From npchala at yahoo.com  Thu May  1 06:09:43 2008
From: npchala at yahoo.com (chalani wijesekara)
Date: Thu, 1 May 2008 06:09:43 -0700 (PDT)
Subject: [antlr-interest] Error: CharScanner; panic: ClassNotFoundException:
Message-ID: <48749.88946.qm@web31401.mail.mud.yahoo.com>

Hi,

I have built a project which uses antlr.jar as a plugin. I need to run this project on Eclipse 3.2. When I run the project as 'Run as Java application' it works fine. But i need to run this project as a separate Eclipse workbench. So when i run the project as 'Run as Eclipse Application' it gives an error as 'CharScanner; panic: ClassNotFoundException: isis.anp.CToken' the exception is thrown from the CharScanner class setTokenObjectClass method. 

This class is in the ANTLR plugin which I was imported. What is happening here is that it is unable to load the CToken class. But all the Classpaths that requires are given properly. I would be thankful if anybody could help to figure out this problem.

Thank you, 
C.Lah




      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080501/618c0fab/attachment.html 

From andreas.bartho at inf.tu-dresden.de  Thu May  1 14:07:32 2008
From: andreas.bartho at inf.tu-dresden.de (Andreas Bartho)
Date: Thu, 01 May 2008 23:07:32 +0200
Subject: [antlr-interest] Error: CharScanner;
	panic: ClassNotFoundException:
In-Reply-To: <48749.88946.qm@web31401.mail.mud.yahoo.com>
References: <48749.88946.qm@web31401.mail.mud.yahoo.com>
Message-ID: <481A3114.9050908@inf.tu-dresden.de>

Hi,

> I have built a project which uses antlr.jar as a plugin. I need to run 
> this project on Eclipse 3.2. When I run the project as 'Run as Java 
> application' it works fine. But i need to run this project as a separate 
> Eclipse workbench. 

did you remember to add the jar to the MANIFEST.MF?

If not, doubleclick on the MANIFEST.MF (in folder META-INF), open the 
Runtime tab and add it to the classpath there (this works for Eclipse 
3.3., but 3.2 should be similar)

Andreas

From elekis at gmail.com  Fri May  2 09:34:20 2008
From: elekis at gmail.com (jabon)
Date: Fri, 02 May 2008 18:34:20 +0200
Subject: [antlr-interest] deleting a left-recursive
Message-ID: <481B428C.1090609@gmail.com>

hi all,

I have a little probleme with my grammar , I have a left recursive and I 
have lot of diffcult to remove this.  I need a little help (I m not an 
expert sorry and compilations lessons are far away)

expression
    : T_LParent expression T_RParent
    | binaryExpression
    | castExpression
    | desig | literal
    | newExpression
    | quantifierExpression
    | unaryExpression
    ;


binaryExpression
    : (expression (T_Ne|T_Eq|T_Ge|T_Le|T_Lt|T_Gt) expression)
    |(expression (T_And|T_Mod|T_Star|T_Slash) expression)
    |(expression (T_Iff|T_Implies|T_Or|T_Plus|T_Minus) expression);

thanks a lot

a+++

From andersen at ontologyworks.com  Fri May  2 09:45:02 2008
From: andersen at ontologyworks.com (Bill Andersen)
Date: Fri, 2 May 2008 12:45:02 -0400
Subject: [antlr-interest] ANTLRWorks 1.2b1
Message-ID: <8AC3762A-1610-4E0A-83ED-506BF2388C1A@ontologyworks.com>

Can anyone tell me why non-terminals are not appearing in in the  
interpreter graph view?  All graphs have a root (the grammar) and all  
leaves are tokens.

	.bill



From jaluber at gmx.de  Fri May  2 12:02:07 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 02 May 2008 21:02:07 +0200
Subject: [antlr-interest] deleting a left-recursive
In-Reply-To: <481B428C.1090609@gmail.com>
References: <481B428C.1090609@gmail.com>
Message-ID: <481B652F.1060909@gmx.de>

jabon schrieb:
> hi all,
> 
> I have a little probleme with my grammar , I have a left recursive and I 
> have lot of diffcult to remove this.  I need a little help (I m not an 
> expert sorry and compilations lessons are far away)
> 
> expression
>    : T_LParent expression T_RParent
>    | binaryExpression
>    | castExpression
>    | desig | literal
>    | newExpression
>    | quantifierExpression
>    | unaryExpression
>    ;
> 
> 
> binaryExpression
>    : (expression (T_Ne|T_Eq|T_Ge|T_Le|T_Lt|T_Gt) expression)
>    |(expression (T_And|T_Mod|T_Star|T_Slash) expression)
>    |(expression (T_Iff|T_Implies|T_Or|T_Plus|T_Minus) expression);
> 
> thanks a lot
> 
> a+++
> 

You've reminded me that I didn't posted my tutorial about left-recursion 
removal yet. After 1 hour or so intense formatting you can see the 
result here: 
<http://www.antlr.org/wiki/display/ANTLR3/Left-Recursion+Removal>. 
Hopefully it is helpful enough. :)

Johannes

From andersen at ontologyworks.com  Fri May  2 12:36:01 2008
From: andersen at ontologyworks.com (Bill Andersen)
Date: Fri, 2 May 2008 15:36:01 -0400
Subject: [antlr-interest] Overriding default constructor generation in Java
Message-ID: <3F1A4D16-76DE-4D29-B555-9E22FD6C540A@ontologyworks.com>

Folks,

I have a ANTLR 3 tree grammar where I use the superClass option to  
provide a class that handles some semantic bookkeeping chores.  Thing  
I added an extra argument to the constructors inherited from  
TreeParser.  When ANTLR generates the Java for the grammar everything  
is fine except that the default constructors for the generated parser  
class are still there with no super class that can catch their  
argument signatures.

Is there a way to modify this behavior?  I can supply my own  
constructors in the members section and delete the generated ones from  
the java source but that's a step I'd rather avoid.

	.bill



From jaluber at gmx.de  Fri May  2 13:35:23 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 02 May 2008 22:35:23 +0200
Subject: [antlr-interest] Overriding default constructor generation in
 Java
In-Reply-To: <3F1A4D16-76DE-4D29-B555-9E22FD6C540A@ontologyworks.com>
References: <3F1A4D16-76DE-4D29-B555-9E22FD6C540A@ontologyworks.com>
Message-ID: <481B7B0B.6090204@gmx.de>

Bill Andersen schrieb:
> Folks,
> 
> I have a ANTLR 3 tree grammar where I use the superClass option to 
> provide a class that handles some semantic bookkeeping chores.  Thing I 
> added an extra argument to the constructors inherited from TreeParser.  
> When ANTLR generates the Java for the grammar everything is fine except 
> that the default constructors for the generated parser class are still 
> there with no super class that can catch their argument signatures.
> 
> Is there a way to modify this behavior?  I can supply my own 
> constructors in the members section and delete the generated ones from 
> the java source but that's a step I'd rather avoid.

There are only two ways. The first is to change the template files 
yourselves, but you have to update them manually. The second is still to 
provide the additional construcotrs and throw an exception when someone 
wants to use them.

Johannes

From open.zone at virgin.net  Fri May  2 14:00:16 2008
From: open.zone at virgin.net (Micheal J)
Date: Fri, 2 May 2008 22:00:16 +0100
Subject: [antlr-interest] deleting a left-recursive
In-Reply-To: <481B652F.1060909@gmx.de>
References: <481B428C.1090609@gmail.com> <481B652F.1060909@gmx.de>
Message-ID: <000401c8ac97$86f15060$c404a8c0@marion>

Hi,

> You've reminded me that I didn't posted my tutorial about 
> left-recursion removal yet. After 1 hour or so intense 
> formatting you can see the result here: 
> <http://www.antlr.org/wiki/display/ANTLR3/Left-Recursion+Removal>. 
> Hopefully it is helpful enough. :)
> 
> Johannes

Nice article.

This would be even more useful if it was [also?] available as a single page
document that can then be printed for offline use.

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 


From jaluber at gmx.de  Fri May  2 14:58:00 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Fri, 02 May 2008 23:58:00 +0200
Subject: [antlr-interest] deleting a left-recursive
In-Reply-To: <000401c8ac97$86f15060$c404a8c0@marion>
References: <481B428C.1090609@gmail.com> <481B652F.1060909@gmx.de>
	<000401c8ac97$86f15060$c404a8c0@marion>
Message-ID: <481B8E68.6020905@gmx.de>

Micheal J schrieb:
> Hi,
> 
>> You've reminded me that I didn't posted my tutorial about 
>> left-recursion removal yet. After 1 hour or so intense 
>> formatting you can see the result here: 
>> <http://www.antlr.org/wiki/display/ANTLR3/Left-Recursion+Removal>. 
>> Hopefully it is helpful enough. :)
>>
>> Johannes
> 
> Nice article.

Thanks!

> This would be even more useful if it was [also?] available as a single page
> document that can then be printed for offline use.

As a single page it would be simply too long for reading. That's why 
I've broken it down into more manageable parts, even though some are 
still quite long. But I've created an extra page with the entire content 
here: 
<http://www.antlr.org/wiki/display/ANTLR3/Left-Recursion+Removal+-+Print+Edition>

Johannes

From antlr5 at hannesschmidt.net  Fri May  2 20:44:48 2008
From: antlr5 at hannesschmidt.net (Hannes Schmidt)
Date: Fri, 02 May 2008 20:44:48 -0700
Subject: [antlr-interest] Why don't parsers support character ranges?
In-Reply-To: <480E9BF0.7060006@hannesschmidt.net>
Message-ID: <C4412DC0.6CC0%antlr5@hannesschmidt.net>

This is just to follow up on this thread in case someone using Google finds
it in the list archives.

The parser generator I ended up using is Rats! which was originally written
for the Extensible C project (XTC). It was extremely suitable for my needs
because it's written in Java and generates parsers in Java. More
importantly, it also is scanner-less, i.e. it doesn't need a lexer DFA that
parses characters into tokens. I had always suspected that the rule about
lexers being an unavoidable necessity is mere folklore. The existence of a
mature and efficient scanner-less parser generator confirms that suspicion.

In the real world, my actual project is the implementation of an
RFC2822-compliant email address parser. With Rats! I was able to basically
copy and paste the syntax specification from the RFC into the Rats! grammar.
Only minor cosmetic changes were necessary (changing production names to
camel case and substituting operator symbols). To me this indicates that
PEGs are both powerful and intuitive to use and that with Rats! there is a
superb implementation of PEGs.

The ANTLR grammar from my original post translates to the following Rats!
grammar:

module Test1;
option withParseTree;
public String Foo = Before '@' After  EOF ;
String Before = [a-z] ;
String After = [m-z] ;


On 4/22/08 7:16 PM, "Hannes Schmidt" <antlr5 at hannesschmidt.net> wrote:

> Hi all,
> 
> I would like to use character ranges in a parser as illustrated in the
> following example (a very reduced version of my real-world grammar):
> 
> grammar test1;
> foo : before '@' after;
> before : 'a'..'z';
> after : 'm'..'z';
> 
> ANTLR generates a parser that ignores the range as if the grammar were
> 
> grammar test2;
> foo : before '@' after;
> before : ;
> after : ;
> 
> IOW, the grammar fails to parse the input "a at m". If I break the grammar
> up into a lexer and a parser as in
> 
> grammar test3;
> foo : BEFORE '@' AFTER;
> BEFORE : 'a'..'z';
> AFTER : 'm'..'z';
> 
> the generated code fails to parse "a at m" with a MismatchedTokeException
> at the 'm'. This is because ANTLR silently prioritizes BEFORE even
> though its set of characters intersects that of AFTER. Swapping BEFORE
> and AFTER would generate a parser that fails to recognize "m at m".
> 
> So here are  my questions:
> 
> Why can't I use ranges in parsers?
> 
> Why doesn't ANTLR emit a warning when it ignores ranges in grammar rules?
> 
> How can I emulate the missing range feature without obfuscating my
> grammar too much? Semantic predicates?
> 
> Now let me put my tinfoil hat on and theorize a little bit: I think that
> the root cause of  my confusion is ANTLR's distinction between lexer and
> parser. I think this distinction is purely historical and ANTLR might be
> better of without it. When writing grammars, I often find myself in
> situations where I know that certain lexer rules make sense in a certain
> parser context only but that context is not available to the lexer
> because the state that defines it is maintained in the parser.
> 
> I fondly remember my CS101 classes when we wrote recursive descent
> parsers for LL(*) in Opal (a functional language similar to Haskell). We
> didn't have to distinguish between lexer and parser and it felt very
> liberating. ;-)



From elekis at gmail.com  Fri May  2 23:47:37 2008
From: elekis at gmail.com (jabon)
Date: Sat, 03 May 2008 08:47:37 +0200
Subject: [antlr-interest] deleting a left-recursive
In-Reply-To: <481B652F.1060909@gmx.de>
References: <481B428C.1090609@gmail.com> <481B652F.1060909@gmx.de>
Message-ID: <481C0A89.8080405@gmail.com>

Johannes Luber a ?crit :
> jabon schrieb:
>> hi all,
>>
>> I have a little probleme with my grammar , I have a left recursive 
>> and I have lot of diffcult to remove this.  I need a little help (I m 
>> not an expert sorry and compilations lessons are far away)
>>
>> expression
>>    : T_LParent expression T_RParent
>>    | binaryExpression
>>    | castExpression
>>    | desig | literal
>>    | newExpression
>>    | quantifierExpression
>>    | unaryExpression
>>    ;
>>
>>
>> binaryExpression
>>    : (expression (T_Ne|T_Eq|T_Ge|T_Le|T_Lt|T_Gt) expression)
>>    |(expression (T_And|T_Mod|T_Star|T_Slash) expression)
>>    |(expression (T_Iff|T_Implies|T_Or|T_Plus|T_Minus) expression);
>>
>> thanks a lot
>>
>> a+++
>>
>
> You've reminded me that I didn't posted my tutorial about 
> left-recursion removal yet. After 1 hour or so intense formatting you 
> can see the result here: 
> <http://www.antlr.org/wiki/display/ANTLR3/Left-Recursion+Removal>. 
> Hopefully it is helpful enough. :)
>
> Johannes
thanks all, I ll look

a++

From npchala at yahoo.com  Sat May  3 06:14:34 2008
From: npchala at yahoo.com (chalani wijesekara)
Date: Sat, 3 May 2008 06:14:34 -0700 (PDT)
Subject: [antlr-interest] ANTLR compatibility with Eclipse 3.2
Message-ID: <167444.20480.qm@web31402.mail.mud.yahoo.com>

Hi, 

For the project that i'm currently working on is built on Eclipse 3.2, and for that project I'm using antlr.jar. This jar which i was imported is from the ANTLR 2.7.6.b1 version. The project working fine when i run it as 'Run as Java Application' but i need to run my project as 'Run As Eclipse Application'. But my project is not working and it shows something like unable to load a class file in my project. The exception was thrown from the CharScanner class in the ANTLR jar. I'm sure about the class path settings. 

Is this ANTLR 2.7.6.b1 is compatible with Eclipse 3.2 and is ANTLR 2.7.6.b1 is compatible with the projects which needed to be run as 'Run as Eclipse Application'? 

What is the most suitable ANTLR version that goes fine with the Eclipse 3.2 or a higher version?

Thanks,
C.Lah




      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080503/bae52b6e/attachment.html 

From hed.barnissan at gmail.com  Sat May  3 06:43:28 2008
From: hed.barnissan at gmail.com (Hed Bar-Nissan)
Date: Sat, 3 May 2008 16:43:28 +0300
Subject: [antlr-interest] is a non unique reference - error when trying to
	fix
Message-ID: <e4d6d3650805030643m5dac321dy1f6a10a67feff834@mail.gmail.com>

I get on this:*
question:    'question:' WS    SENTANCE ';;' WS
        'answer:'  WS    SENTANCE ';;'
    {System.out.print("Question is" + $SENTANCE.getText() + ", Answer is " +
$SENTANCE.getText());} ;*

SENTANCE is a non unique reference which is fair,

but when i try to fix like i found here:
http://www.antlr.org/pipermail/antlr-interest/2008-April/027854.html*
    {System.out.print("Question is" + $SENTANCE1.getText() + ", Answer is "
+ $SENTANCE2.getText());} ;
*
Generation succeeds but i get a compilation error because these lines are
not generated:
Token SENTANCE1=(Token)input.LT(1);

A bug or misuse?

Thanks
Hed
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080503/494052f6/attachment.html 

From jaluber at gmx.de  Sat May  3 07:13:36 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sat, 03 May 2008 16:13:36 +0200
Subject: [antlr-interest] is a non unique reference - error when trying
 to	fix
In-Reply-To: <e4d6d3650805030643m5dac321dy1f6a10a67feff834@mail.gmail.com>
References: <e4d6d3650805030643m5dac321dy1f6a10a67feff834@mail.gmail.com>
Message-ID: <481C7310.3070503@gmx.de>

Hed Bar-Nissan schrieb:
> I get on this:/
> question:    'question:' WS    SENTANCE ';;' WS
>         'answer:'  WS    SENTANCE ';;'
>     {System.out.print("Question is" + $SENTANCE.getText() + ", Answer is 
> " + $SENTANCE.getText());} ;/
> 
> SENTANCE is a non unique reference which is fair,

I'd like to point out that one spells "sentence", not "sentance".
> 
> but when i try to fix like i found here: 
> http://www.antlr.org/pipermail/antlr-interest/2008-April/027854.html/
>     {System.out.print("Question is" + $SENTANCE1.getText() + ", Answer 
> is " + $SENTANCE2.getText());} ;
> /
> Generation succeeds but i get a compilation error because these lines 
> are not generated:
> Token SENTANCE1=(Token)input.LT(1);
> 
> A bug or misuse?

You didn't use labels correctly. Try

question:    'question:' WS    s1=SENTENCE ';;' WS
         'answer:'  WS    s2=SENTENCE ';;'
     {System.out.print("Question is" + $s1.getText() + ", Answer is
" + $s2.getText());} ;

Instead "getText()" "text" should work, too, and is the preferred syntax.

Johannes

From felix_do at web.de  Sat May  3 08:17:19 2008
From: felix_do at web.de (Felix Dorner)
Date: Sat, 03 May 2008 17:17:19 +0200
Subject: [antlr-interest] ANTLR compatibility with Eclipse 3.2
In-Reply-To: <167444.20480.qm@web31402.mail.mud.yahoo.com>
References: <167444.20480.qm@web31402.mail.mud.yahoo.com>
Message-ID: <481C81FF.201@web.de>

Hei chalani

A "class not found exception" is a classpath problem, even if you say 
you're sure. I don't think that there's compatibility issues. You'd 
might consider joining the org.eclipse.newcomer newsgroup and ask there. 
Please also post your plugin descriptor files, plugin.xml manifest.mf 
plugin.properties, and the exception stack trace, or tell us at least 
_which_ class is not found...  As I told you before, I use Antlr 
successfully from inside my eclipse plugin, so don't worry, I am sure 
it's a plugin related classpath problem.


Felix

> For the project that i'm currently working on is built on Eclipse 3.2, 
> and for that project I'm using antlr.jar. This jar which i was 
> imported is from the ANTLR 2.7.6.b1 version. The project working fine 
> when i run it as 'Run as Java Application' but i need to run my 
> project as 'Run As Eclipse Application'. But my project is not working 
> and it shows something like unable to load a class file in my project. 
> The exception was thrown from the CharScanner class in the ANTLR jar. 
> I'm sure about the class path settings.


From elekis at gmail.com  Sat May  3 08:17:58 2008
From: elekis at gmail.com (jabon)
Date: Sat, 03 May 2008 17:17:58 +0200
Subject: [antlr-interest] deleting a left-recursive
In-Reply-To: <481B652F.1060909@gmx.de>
References: <481B428C.1090609@gmail.com> <481B652F.1060909@gmx.de>
Message-ID: <481C8226.9060006@gmail.com>

oki, I ve reduce the prob,
now I have this

expression
    :      (
           expression     
               
(T_Ne|T_Eq|T_Ge|T_Le|T_Lt|T_Gt|T_And|T_Mod|T_Star|T_Slash|T_Iff|T_Implies|T_Or|T_Plus|T_Minus)  

           expression
       )
         ;

it's a simple left recuse but in the doc this become this.
a : a b |b; ==> a : b+;

So I ve tried


expression
    :      (
               
(T_Ne|T_Eq|T_Ge|T_Le|T_Lt|T_Gt|T_And|T_Mod|T_Star|T_Slash|T_Iff|T_Implies|T_Or|T_Plus|T_Minus)  

           expression+
       )
         ;

but That doesn't work.
any idea??

thanks

a++

Johannes Luber a ?crit :
> jabon schrieb:
>> hi all,
>>
>> I have a little probleme with my grammar , I have a left recursive 
>> and I have lot of diffcult to remove this.  I need a little help (I m 
>> not an expert sorry and compilations lessons are far away)
>>
>> expression
>>    : T_LParent expression T_RParent
>>    | binaryExpression
>>    | castExpression
>>    | desig | literal
>>    | newExpression
>>    | quantifierExpression
>>    | unaryExpression
>>    ;
>>
>>
>> binaryExpression
>>    : (expression (T_Ne|T_Eq|T_Ge|T_Le|T_Lt|T_Gt) expression)
>>    |(expression (T_And|T_Mod|T_Star|T_Slash) expression)
>>    |(expression (T_Iff|T_Implies|T_Or|T_Plus|T_Minus) expression);
>>
>> thanks a lot
>>
>> a+++
>>
>
> You've reminded me that I didn't posted my tutorial about 
> left-recursion removal yet. After 1 hour or so intense formatting you 
> can see the result here: 
> <http://www.antlr.org/wiki/display/ANTLR3/Left-Recursion+Removal>. 
> Hopefully it is helpful enough. :)
>
> Johannes


From jaluber at gmx.de  Sat May  3 08:38:47 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sat, 03 May 2008 17:38:47 +0200
Subject: [antlr-interest] deleting a left-recursive
In-Reply-To: <481C8226.9060006@gmail.com>
References: <481B428C.1090609@gmail.com> <481B652F.1060909@gmx.de>
	<481C8226.9060006@gmail.com>
Message-ID: <481C8707.4020008@gmx.de>

jabon schrieb:
> oki, I ve reduce the prob,
> now I have this
> 
> expression
>    :      (
>           expression                   
> (T_Ne|T_Eq|T_Ge|T_Le|T_Lt|T_Gt|T_And|T_Mod|T_Star|T_Slash|T_Iff|T_Implies|T_Or|T_Plus|T_Minus)  
> 
>           expression
>       )
>         ;

Remove the outer parentheses - those are unnecessary and confuse 
ANTLRworks. And let ANTLRworks do the SLRR. :)

Johannes
> 
> it's a simple left recuse but in the doc this become this.
> a : a b |b; ==> a : b+;
> 
> So I ve tried
> 
> 
> expression
>    :      (
>               
> (T_Ne|T_Eq|T_Ge|T_Le|T_Lt|T_Gt|T_And|T_Mod|T_Star|T_Slash|T_Iff|T_Implies|T_Or|T_Plus|T_Minus)  
> 
>           expression+
>       )
>         ;
> 
> but That doesn't work.
> any idea??
> 
> thanks
> 
> a++
> 
> Johannes Luber a ?crit :
>> jabon schrieb:
>>> hi all,
>>>
>>> I have a little probleme with my grammar , I have a left recursive 
>>> and I have lot of diffcult to remove this.  I need a little help (I m 
>>> not an expert sorry and compilations lessons are far away)
>>>
>>> expression
>>>    : T_LParent expression T_RParent
>>>    | binaryExpression
>>>    | castExpression
>>>    | desig | literal
>>>    | newExpression
>>>    | quantifierExpression
>>>    | unaryExpression
>>>    ;
>>>
>>>
>>> binaryExpression
>>>    : (expression (T_Ne|T_Eq|T_Ge|T_Le|T_Lt|T_Gt) expression)
>>>    |(expression (T_And|T_Mod|T_Star|T_Slash) expression)
>>>    |(expression (T_Iff|T_Implies|T_Or|T_Plus|T_Minus) expression);
>>>
>>> thanks a lot
>>>
>>> a+++
>>>
>>
>> You've reminded me that I didn't posted my tutorial about 
>> left-recursion removal yet. After 1 hour or so intense formatting you 
>> can see the result here: 
>> <http://www.antlr.org/wiki/display/ANTLR3/Left-Recursion+Removal>. 
>> Hopefully it is helpful enough. :)
>>
>> Johannes
> 


From jimi at temporal-wave.com  Sat May  3 09:07:35 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 03 May 2008 09:07:35 -0700
Subject: [antlr-interest] deleting a left-recursive
In-Reply-To: <481C8226.9060006@gmail.com>
Message-ID: <!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAABwBgAQAAAAABeWGwlTCki
	SWr3Wi+AdmwEAAAAA@temporal-wave.com>

Basically you need to step away from the grammar you have and consult one of the example grammars (the one that is closest to your problem, perhaps Java or C). In this example grammar, find the expression rule and note how this is a set of or rules starting with expression, that descends in order of lowest to highest precedence of operators, and that the end of the sequence is the set of things that don't break down any further such as ID, INTEGER and so on.

This is where you are going wrong as your basic construct for the expressions is wrong. Look in the Wiki for articles on expression trees as well. You are possibly trying to type in your grammar from some spec and you should note that such specs are generally written with tools like yacc/bison more in mind than antlr and you need to mind translate them :-). If you can afford it, then the ANTLR book would be a good idea for you and will tell you a lot before you get to the compiler lessons :-)

Jim


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of jabon
> Sent: Saturday, May 03, 2008 8:18 AM
> Cc: ANTLRDev Interest
> Subject: Re: [antlr-interest] deleting a left-recursive
> 
> oki, I ve reduce the prob,
> now I have this
> 
> expression
>     :      (
>            expression
> 
> (T_Ne|T_Eq|T_Ge|T_Le|T_Lt|T_Gt|T_And|T_Mod|T_Star|T_Slash|T_Iff|T_Impli
> es|T_Or|T_Plus|T_Minus)
> 
>            expression
>        )
>          ;
> 
> it's a simple left recuse but in the doc this become this.
> a : a b |b; ==> a : b+;
> 
> So I ve tried
> 
> 
> expression
>     :      (
> 
> (T_Ne|T_Eq|T_Ge|T_Le|T_Lt|T_Gt|T_And|T_Mod|T_Star|T_Slash|T_Iff|T_Impli
> es|T_Or|T_Plus|T_Minus)
> 
>            expression+
>        )
>          ;
> 
> but That doesn't work.
> any idea??
> 
> thanks
> 
> a++
> 
> Johannes Luber a ?crit :
> > jabon schrieb:
> >> hi all,
> >>
> >> I have a little probleme with my grammar , I have a left recursive
> >> and I have lot of diffcult to remove this.  I need a little help (I
> m
> >> not an expert sorry and compilations lessons are far away)
> >>
> >> expression
> >>    : T_LParent expression T_RParent
> >>    | binaryExpression
> >>    | castExpression
> >>    | desig | literal
> >>    | newExpression
> >>    | quantifierExpression
> >>    | unaryExpression
> >>    ;
> >>
> >>
> >> binaryExpression
> >>    : (expression (T_Ne|T_Eq|T_Ge|T_Le|T_Lt|T_Gt) expression)
> >>    |(expression (T_And|T_Mod|T_Star|T_Slash) expression)
> >>    |(expression (T_Iff|T_Implies|T_Or|T_Plus|T_Minus) expression);
> >>
> >> thanks a lot
> >>
> >> a+++
> >>
> >
> > You've reminded me that I didn't posted my tutorial about
> > left-recursion removal yet. After 1 hour or so intense formatting you
> > can see the result here:
> > <http://www.antlr.org/wiki/display/ANTLR3/Left-Recursion+Removal>.
> > Hopefully it is helpful enough. :)
> >
> > Johannes





From parrt at cs.usfca.edu  Sat May  3 10:22:19 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 3 May 2008 10:22:19 -0700
Subject: [antlr-interest] Can't get "\<" to work in inline template rule?
In-Reply-To: <1080AEABD1979E42A15840F08084B67BFE3AB9@vcmsydexh.vecommerce.com>
References: <1080AEABD1979E42A15840F08084B67BFE3AB8@vcmsydexh.vecommerce.com>
	<1080AEABD1979E42A15840F08084B67BFE3AB9@vcmsydexh.vecommerce.com>
Message-ID: <3D9DD87E-0035-4679-B612-7ED54FE9FF16@cs.usfca.edu>

Using inline templates is not really my intent...I suggest using a  
template group file.  bug has been entered thoug.
Ter
On Apr 16, 2008, at 6:54 AM, Peter Nann wrote:

> Oh, I have just got it to work using the "<<" and ">>" delimiters,  
> which seem to be directly replacable in place of double-quotes, even  
> on a single line.
>
> But the lack of support in the double-quoted format is a bug, yes?
>
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org 
> ] On Behalf Of Peter Nann
> Sent: Wednesday, 16 April 2008 11:41 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Can't get "\<" to work in inline template  
> rule?
>
>
> Just starting out with what I hope should be a simple translator?
>
> For now, as a start, I am simply trying to turn:
>         [ a ]
> Into:
>         <one-of> a </one-of>
>
> But I can't get an angle bracket verbatim in the output!!!
>
> In the code below, you will see I am only trying to produce the  
> first '<'.
> Simply escaping the '<' does not seem to work as advertised?
> I have tried double, triple escaping, to no avail.
>  - Take the "\<" out of this grammar, and it works fine.
>
> Please help, I am a little dissappointed to have run into trouble so  
> early?
> Woe is me?
>
>
> Here's my Test.g file:
>
> ---- Test.g ----
> grammar Test;
> options {output=template; rewrite=true;}
>
> gslfile : orlist ;
>
> orlist
>         : '[' WORD ']'
>                 -> template(oi={$WORD.text}) "\<one-of <oi> /one-of"
>         ;
>
> WORD : ('a'..'z'|'-'|'_'|'\'') ('a'..'z'|'-'|'_'|'\'')* ;
> WS : ( ' ' | '\t' | '\r' | '\n' )+ {$channel = HIDDEN;} ;
> -----------------------------------------
>
> And here's the error output:
>
> ANTLR Parser Generator  Version 3.0.1 (August 13, 2007)  1989-2007
> error(10):  internal error: Test.g : Test.g:8:34: expecting '"',  
> found '<'
> org.antlr.tool.ANTLRLexer.nextToken(ANTLRLexer.java:321)
> antlr 
> .TokenStreamRewriteEngine.nextToken(TokenStreamRewriteEngine.java:161)
> antlr.TokenBuffer.fill(TokenBuffer.java:69)
> antlr.TokenBuffer.LT(TokenBuffer.java:86)
> antlr.LLkParser.LT(LLkParser.java:56)
> org.antlr.tool.ANTLRParser.rewrite_template(ANTLRParser.java:3306)
> org.antlr.tool.ANTLRParser.rewrite_alternative(ANTLRParser.java:3177)
> org.antlr.tool.ANTLRParser.rewrite(ANTLRParser.java:1885)
> org.antlr.tool.ANTLRParser.altList(ANTLRParser.java:1451)
> org.antlr.tool.ANTLRParser.rule(ANTLRParser.java:1236)
> org.antlr.tool.ANTLRParser.rules(ANTLRParser.java:655)
> org.antlr.tool.ANTLRParser.grammar(ANTLRParser.java:389)
> org.antlr.tool.Grammar.setGrammarContent(Grammar.java:521)
> org.antlr.tool.Grammar.<init>(Grammar.java:456)
> org.antlr.Tool.getGrammar(Tool.java:331)
> org.antlr.Tool.process(Tool.java:267)
> org.antlr.Tool.main(Tool.java:70)
>
>


From parrt at cs.usfca.edu  Sat May  3 10:25:09 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 3 May 2008 10:25:09 -0700
Subject: [antlr-interest] Can't get "\<" to work in inline template rule?
In-Reply-To: <3D9DD87E-0035-4679-B612-7ED54FE9FF16@cs.usfca.edu>
References: <1080AEABD1979E42A15840F08084B67BFE3AB8@vcmsydexh.vecommerce.com>
	<1080AEABD1979E42A15840F08084B67BFE3AB9@vcmsydexh.vecommerce.com>
	<3D9DD87E-0035-4679-B612-7ED54FE9FF16@cs.usfca.edu>
Message-ID: <FAB132FE-73C3-47B7-B6B9-0B7F26101780@cs.usfca.edu>

fixed http://www.antlr.org:8888/browse/ANTLR-240

T
On May 3, 2008, at 10:22 AM, Terence Parr wrote:

> Using inline templates is not really my intent...I suggest using a  
> template group file.  bug has been entered thoug.
> Ter
> On Apr 16, 2008, at 6:54 AM, Peter Nann wrote:
>
>> Oh, I have just got it to work using the "<<" and ">>" delimiters,  
>> which seem to be directly replacable in place of double-quotes,  
>> even on a single line.
>>
>> But the lack of support in the double-quoted format is a bug, yes?
>>
>> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org 
>> ] On Behalf Of Peter Nann
>> Sent: Wednesday, 16 April 2008 11:41 PM
>> To: antlr-interest at antlr.org
>> Subject: [antlr-interest] Can't get "\<" to work in inline template  
>> rule?
>>
>>
>> Just starting out with what I hope should be a simple translator?
>>
>> For now, as a start, I am simply trying to turn:
>>        [ a ]
>> Into:
>>        <one-of> a </one-of>
>>
>> But I can't get an angle bracket verbatim in the output!!!
>>
>> In the code below, you will see I am only trying to produce the  
>> first '<'.
>> Simply escaping the '<' does not seem to work as advertised?
>> I have tried double, triple escaping, to no avail.
>> - Take the "\<" out of this grammar, and it works fine.
>>
>> Please help, I am a little dissappointed to have run into trouble  
>> so early?
>> Woe is me?
>>
>>
>> Here's my Test.g file:
>>
>> ---- Test.g ----
>> grammar Test;
>> options {output=template; rewrite=true;}
>>
>> gslfile : orlist ;
>>
>> orlist
>>        : '[' WORD ']'
>>                -> template(oi={$WORD.text}) "\<one-of <oi> /one-of"
>>        ;
>>
>> WORD : ('a'..'z'|'-'|'_'|'\'') ('a'..'z'|'-'|'_'|'\'')* ;
>> WS : ( ' ' | '\t' | '\r' | '\n' )+ {$channel = HIDDEN;} ;
>> -----------------------------------------
>>
>> And here's the error output:
>>
>> ANTLR Parser Generator  Version 3.0.1 (August 13, 2007)  1989-2007
>> error(10):  internal error: Test.g : Test.g:8:34: expecting '"',  
>> found '<'
>> org.antlr.tool.ANTLRLexer.nextToken(ANTLRLexer.java:321)
>> antlr 
>> .TokenStreamRewriteEngine.nextToken(TokenStreamRewriteEngine.java: 
>> 161)
>> antlr.TokenBuffer.fill(TokenBuffer.java:69)
>> antlr.TokenBuffer.LT(TokenBuffer.java:86)
>> antlr.LLkParser.LT(LLkParser.java:56)
>> org.antlr.tool.ANTLRParser.rewrite_template(ANTLRParser.java:3306)
>> org.antlr.tool.ANTLRParser.rewrite_alternative(ANTLRParser.java:3177)
>> org.antlr.tool.ANTLRParser.rewrite(ANTLRParser.java:1885)
>> org.antlr.tool.ANTLRParser.altList(ANTLRParser.java:1451)
>> org.antlr.tool.ANTLRParser.rule(ANTLRParser.java:1236)
>> org.antlr.tool.ANTLRParser.rules(ANTLRParser.java:655)
>> org.antlr.tool.ANTLRParser.grammar(ANTLRParser.java:389)
>> org.antlr.tool.Grammar.setGrammarContent(Grammar.java:521)
>> org.antlr.tool.Grammar.<init>(Grammar.java:456)
>> org.antlr.Tool.getGrammar(Tool.java:331)
>> org.antlr.Tool.process(Tool.java:267)
>> org.antlr.Tool.main(Tool.java:70)
>>
>>
>


From parrt at cs.usfca.edu  Sat May  3 10:40:40 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 3 May 2008 10:40:40 -0700
Subject: [antlr-interest] Bugs to fix for 3.1
Message-ID: <1B1F316D-C500-48E1-9939-A52A5B022CA4@cs.usfca.edu>

Howdy...I'm going to fix the following for 3.1 (hope the link works):

http://www.antlr.org:8888/secure/IssueNavigator.jspa?reset=true&mode=hide&sorter/order=DESC&sorter/field=priority&resolution=-1&pid=10000&fixfor=10063

then i need to do doc.

Ter

From sohara at pivotal-solutions.co.uk  Sat May  3 17:46:43 2008
From: sohara at pivotal-solutions.co.uk (Steve O'Hara)
Date: Sun, 4 May 2008 01:46:43 +0100
Subject: [antlr-interest] Tokens as keywords
In-Reply-To: <47F54D3E.8070401@virgin.net>
References: <mailman.1.1207249201.27207.antlr-interest@antlr.org>
	<47F54D3E.8070401@virgin.net>
Message-ID: <E51BD230BBA3A64B9C01EF1A20EF5AE61C4FE8@pspub1.pivotal-solutions.co.uk>

I've written a grammar to unravel BASIS Find commands - these look very
similar to SQL Selects e.g.

    Find table where field='gdfdfg' order by field/ascend

All is well except when I try and parse a command that contains a token
as the table name.  For example;

    Find ascend where field='gdfdfg' order by field/ascend

This is a valid command - tables can be called practically anything.
Below is a snippet from the grammar.
Where do I look to go about fixing this?

statement :  FIND Identifier whereClause? orderByClause?;

ASC : ('asc' | 'ascend') ; 
FIND : 'find' ;
Identifier : ('a'..'z' | 'A'..'Z' | '_' | '\$') ('.' |  'a'..'z' |
'A'..'Z' | '_' | '0'..'9' | '$')* ;


Thanks,
Steve


From jimi at temporal-wave.com  Sat May  3 17:59:32 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 03 May 2008 17:59:32 -0700
Subject: [antlr-interest] Tokens as keywords
In-Reply-To: <E51BD230BBA3A64B9C01EF1A20EF5AE61C4FE8@pspub1.pivotal-solutions.co.uk>
Message-ID: <!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAABwBgAQAAAA6QwY3ogD80G
	qHNgAyVd9MAEAAAAA@temporal-wave.com>

statement :  FIND tableName whereClause? orderByClause?;

tableName
   : Identifier
   | (keywords)=>keywords
   ;

keywords
   : FIND
   | WHERE
   | etc
   ;

If writing a tree you can also do:

  | (keywords)=>k=keywords
              ->Identifier[$k]

Then look for real ambiguities in the grammar where you might need more elaborate predicates. For instance if table is optional and followed by some clause, then you won't know if the keyword is the table name or the next clause without some machinations. If an Identifier can always be a keyword, then use the rulename id where I called it tableName.

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Steve O'Hara
> Sent: Saturday, May 03, 2008 5:47 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Tokens as keywords
> 
> I've written a grammar to unravel BASIS Find commands - these look very
> similar to SQL Selects e.g.
> 
>     Find table where field='gdfdfg' order by field/ascend
> 
> All is well except when I try and parse a command that contains a token
> as the table name.  For example;
> 
>     Find ascend where field='gdfdfg' order by field/ascend
> 
> This is a valid command - tables can be called practically anything.
> Below is a snippet from the grammar.
> Where do I look to go about fixing this?
> 
> statement :  FIND Identifier whereClause? orderByClause?;
> 
> ASC : ('asc' | 'ascend') ;
> FIND : 'find' ;
> Identifier : ('a'..'z' | 'A'..'Z' | '_' | '\$') ('.' |  'a'..'z' |
> 'A'..'Z' | '_' | '0'..'9' | '$')* ;
> 
> 
> Thanks,
> Steve





From jaluber at gmx.de  Sun May  4 07:35:14 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sun, 04 May 2008 16:35:14 +0200
Subject: [antlr-interest] Tokens as keywords
In-Reply-To: <!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAABwBgAQAAAA6QwY3ogD80G	qHNgAyVd9MAEAAAAA@temporal-wave.com>
References: <!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAABwBgAQAAAA6QwY3ogD80G	qHNgAyVd9MAEAAAAA@temporal-wave.com>
Message-ID: <481DC9A2.6050202@gmx.de>

Jim Idle schrieb:
> statement :  FIND tableName whereClause? orderByClause?;
> 
> tableName
>    : Identifier
>    | (keywords)=>keywords
>    ;

Just one additional comment: Order alternatives in such way that the 
last alternative is the one without a syntactic predicate. Thinking 
about it further, as one would order the lexer rules in such way that 
the keywords are recognized as such, no Identifier will match a keyword 
anyway. So you can remove that predicate anyway.

Johannes

From jimi at temporal-wave.com  Sun May  4 09:30:12 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 04 May 2008 09:30:12 -0700
Subject: [antlr-interest] Tokens as keywords
In-Reply-To: <481DC9A2.6050202@gmx.de>
Message-ID: <!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAABwBgAQAAAAeH4QEU5usUa
	X/inIz4XjsQEAAAAA@temporal-wave.com>

Whether you need the predicate depends on the presence of optional identifiers that can be keywords. You need the predicate to avoid a warning saying that the upcoming keyword is ambiguous and assuming that the language expects it to be resolved this way. Consider something like:

xxxx id? ONLY?

id
 : Identifier
 | ONLY  -> Identifier[ONLY]
 ;

The original example just shows the mechanism and we cannot say where the predicates might be needed without the whole grammar.

Jim

> -----Original Message-----
> From: Johannes Luber [mailto:jaluber at gmx.de]
> Sent: Sunday, May 04, 2008 7:35 AM
> To: Jim Idle
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Tokens as keywords
> 
> Jim Idle schrieb:
> > statement :  FIND tableName whereClause? orderByClause?;
> >
> > tableName
> >    : Identifier
> >    | (keywords)=>keywords
> >    ;
> 
> Just one additional comment: Order alternatives in such way that the
> last alternative is the one without a syntactic predicate. Thinking
> about it further, as one would order the lexer rules in such way that
> the keywords are recognized as such, no Identifier will match a keyword
> anyway. So you can remove that predicate anyway.
> 
> Johannes




From antlr at mirality.co.nz  Sun May  4 12:46:16 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 05 May 2008 07:46:16 +1200
Subject: [antlr-interest] Tokens as keywords
In-Reply-To: <!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAAB
	wBgAQAAAAeH4QEU5usUa X/inIz4XjsQEAAAAA@temporal-wave.com>
References: <481DC9A2.6050202@gmx.de>
	<!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAABwBgAQAAAAeH4QEU5usUa
	X/inIz4XjsQEAAAAA@temporal-wave.com>
Message-ID: <20080504194632.3FA3D11EC4D@www.antlr.org>

At 04:30 5/05/2008, Jim Idle wrote:
 >Whether you need the predicate depends on the presence of 
optional
 >identifiers that can be keywords. You need the predicate to 
avoid a
 >warning saying that the upcoming keyword is ambiguous and 
assuming
 >that the language expects it to be resolved this way.

Doesn't ANTLR simply drop predicates on the final alt, 
though?  (Except when backtracking is enabled.)


From erasuru at gmail.com  Sun May  4 22:44:47 2008
From: erasuru at gmail.com (erandi lakshika)
Date: Sun, 4 May 2008 22:44:47 -0700
Subject: [antlr-interest] Traversing AST
Message-ID: <fd78362a0805042244u6d4dc5er7a3e3a1690b6d651@mail.gmail.com>

Once we generate a AST using ANTLR is there a way traverse the tree and
search for a specific node?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080504/0538e9d6/attachment.html 

From markwright at internode.on.net  Sun May  4 23:43:14 2008
From: markwright at internode.on.net (Mark Wright)
Date: Mon, 5 May 2008 16:43:14 +1000
Subject: [antlr-interest] Traversing AST
In-Reply-To: <fd78362a0805042244u6d4dc5er7a3e3a1690b6d651@mail.gmail.com>
References: <fd78362a0805042244u6d4dc5er7a3e3a1690b6d651@mail.gmail.com>
Message-ID: <20080505164314.00002516@goanna>

Hello Erandi,

You could use TreeWizard:

http://www.antlr.org/wiki/display/~admin/2007/07/02/Exploring+Concept+of+TreeWizard

Or you could walk it manually:

http://jazillian.com/articles/treewalkers.html

Regards, Mark

On Sun, 4 May 2008 22:44:47 -0700
"erandi lakshika" <erasuru at gmail.com> wrote:

> Once we generate a AST using ANTLR is there a way traverse the tree
> and search for a specific node?


-- 

From felix_do at web.de  Mon May  5 05:06:41 2008
From: felix_do at web.de (Felix Dorner)
Date: Mon, 05 May 2008 14:06:41 +0200
Subject: [antlr-interest] always create an ast node for an optional token
Message-ID: <481EF851.5070307@web.de>

Hey,

I have some problems with ambiguities of declarations/expressions. I 
therefore introduced an additional Token VAR='var' that's required prior 
to a declaration.
At some points however, I want to make that var token optional, because 
it's clear from the context that there is a variable declaration, like 
in a for statement:

Tokens{
VAR='var'
}

declaration: VAR ID -> ^(VAR ID)

forStatement : 'for' (VAR? ID 'in'...) -> ^(FOR ^(VAR ID ...))

You see, that I'd like to put a var node in the tree in all cases, even 
if it's ommited in the text in unambiguous situations. It seems like 
antlr doesn't like it this way, I get RewriteEmptyStreamExceptions in 
this case.

I resolved it by placing literal 'var's into the rules and make VAR an 
imaginary token, to decouple their meanings:

Tokens{
VAR;
}

declaration : 'var' ID -> ^(VAR ID)
for: 'for' '(' 'var'? ID ...)   -> ... ^(VAR ID)

 I guess that's an okay way to do it. Any other solutions?


Thanks
Felix


From jaluber at gmx.de  Mon May  5 05:39:09 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 05 May 2008 14:39:09 +0200
Subject: [antlr-interest] always create an ast node for an optional token
In-Reply-To: <481EF851.5070307@web.de>
References: <481EF851.5070307@web.de>
Message-ID: <481EFFED.6020109@gmx.de>

Felix Dorner schrieb:
> Hey,
> 
> I have some problems with ambiguities of declarations/expressions. I 
> therefore introduced an additional Token VAR='var' that's required prior 
> to a declaration.
> At some points however, I want to make that var token optional, because 
> it's clear from the context that there is a variable declaration, like 
> in a for statement:
> 
> Tokens{
> VAR='var'
> }
> 
> declaration: VAR ID -> ^(VAR ID)
> 
> forStatement : 'for' (VAR? ID 'in'...) -> ^(FOR ^(VAR ID ...))
> 
> You see, that I'd like to put a var node in the tree in all cases, even 
> if it's ommited in the text in unambiguous situations. It seems like 
> antlr doesn't like it this way, I get RewriteEmptyStreamExceptions in 
> this case.
> 
> I resolved it by placing literal 'var's into the rules and make VAR an 
> imaginary token, to decouple their meanings:
> 
> Tokens{
> VAR;
> }
> 
> declaration : 'var' ID -> ^(VAR ID)
> for: 'for' '(' 'var'? ID ...)   -> ... ^(VAR ID)
> 
> I guess that's an okay way to do it. Any other solutions?

I use an imaginary token named OPTIONAL like this:

forStatement : 'for' (VAR? ID 'in'...) -> ^(FOR ^(OPTIONAL VAR?) ^(ID ...))

So your normal code expects only the OPTIONAL part and if you don't need 
to look at VAR, you can ignore it.

Johannes

From jneeraj at us.ibm.com  Mon May  5 09:41:29 2008
From: jneeraj at us.ibm.com (Neeraj Joshi)
Date: Mon, 5 May 2008 10:41:29 -0600
Subject: [antlr-interest] Neeraj Joshi/Durham/IBM is out of the office.
Message-ID: <OFC3B45EE3.3AD08A81-ON87257440.005BB079-87257440.005BB079@us.ibm.com>


I will be out of the office starting  05/02/2008 and will not return until
05/06/2008.

I am on vacation and  will have no access to email. If urgent please call
919 491 0208
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080505/27c6c195/attachment.html 

From antlr at mirality.co.nz  Mon May  5 12:44:04 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 06 May 2008 07:44:04 +1200
Subject: [antlr-interest] always create an ast node for an optional token
In-Reply-To: <481EF851.5070307@web.de>
References: <481EF851.5070307@web.de>
Message-ID: <20080505194419.A35DC11EB3B@www.antlr.org>

At 00:06 6/05/2008, Felix Dorner wrote:
 >declaration: VAR ID -> ^(VAR ID)
 >
 >forStatement : 'for' (VAR? ID 'in'...) -> ^(FOR ^(VAR ID ...))
 >
 >You see, that I'd like to put a var node in the tree in all 
cases,
 >even if it's ommited in the text in unambiguous situations. It
 >seems like antlr doesn't like it this way, I get
 >RewriteEmptyStreamExceptions in this case.

Haven't tested this, but you ought to be able to do what you want 
by being a bit more explicit:

forStatement
   :  'for'
      ( v=VAR ID 'in' ... -> ^(FOR ^($v ID ...))
      | ID 'in' ... -> ^(FOR ^(VAR ID ...))
      )
   ;

Though personally I wouldn't bother putting the VAR node into the 
AST at all.  I'd make it more like ^(FOR ID ...).  Since you know 
that the first child of a FOR tree is the id, it's already 
unambiguously a VAR.


From parrt at cs.usfca.edu  Mon May  5 18:10:54 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 5 May 2008 18:10:54 -0700
Subject: [antlr-interest] Fixed speed issue in ANTLR
Message-ID: <CECFC254-6CBE-4D1B-B428-1210DD908616@cs.usfca.edu>

Grab

http://www.antlr.org/download/build/antlr-2008-05-05.18.tar.gz

if you'd like to try on your grammar.  It reverses a stupid change I  
made 12-31-07 (must have been drinking new year's eve) ;)

This closes all bugs but one for 3.1 release.  Then I document.

Ter

From parrt at cs.usfca.edu  Mon May  5 18:20:28 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 5 May 2008 18:20:28 -0700
Subject: [antlr-interest] predicate question
Message-ID: <B7537D4F-5349-48C9-B0DB-0AC0FCC12ADD@cs.usfca.edu>

Consider:

parser grammar T;

a : {p1}? {action} {p2}? A
   | A
   ;

Someone pointed out that p2 should not be tested out of context (i.e.,  
before action executes).  ANTLR v2 (PCCTS) correctly ignored preds  
after actions.  v3 definitely walks right over actions looking for  
preds.   I propose to prevent p2 from being hoisted into the decision  
for rule 'a'.  Right now it generates enclosed DFA.  After fix, it  
would only see p1.  Not sure how to fix just yet, but i'll figure it  
out.

Contrary opinions?

Ter
-------------- next part --------------
A non-text attachment was scrubbed...
Name: T.dec-1.png
Type: image/png
Size: 14289 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080505/c1f2cbd4/attachment.png 
-------------- next part --------------


From magnus at rubidium.dyndns.org  Mon May  5 19:12:15 2008
From: magnus at rubidium.dyndns.org (Magnus Danielson)
Date: Tue, 06 May 2008 04:12:15 +0200 (CEST)
Subject: [antlr-interest] predicate question
In-Reply-To: <B7537D4F-5349-48C9-B0DB-0AC0FCC12ADD@cs.usfca.edu>
References: <B7537D4F-5349-48C9-B0DB-0AC0FCC12ADD@cs.usfca.edu>
Message-ID: <20080506.041215.572682248262971989.cfmd@bredband.net>

From: Terence Parr <parrt at cs.usfca.edu>
Subject: [antlr-interest] predicate question
Date: Mon, 5 May 2008 18:20:28 -0700
Message-ID: <B7537D4F-5349-48C9-B0DB-0AC0FCC12ADD at cs.usfca.edu>

> Consider:
> 
> parser grammar T;
> 
> a : {p1}? {action} {p2}? A
>    | A
>    ;
> 
> Someone pointed out that p2 should not be tested out of context (i.e., before action executes).  ANTLR v2 (PCCTS) correctly ignored preds after actions.  v3 definitely walks right over actions looking for preds.   I propose to prevent p2 from being hoisted into the decision for rule 'a'.  Right now it generates enclosed DFA.  After fix, it would only see p1.  Not sure how to fix just yet, but i'll figure it out.
> 
> Contrary opinions?

What if p2 depends on content of action? It could be argues that p2 may not
depend on action, and thus can be hoisted along with p1. This would be a limit,
as you may wish to use such a construct.
As long as you can roll back or fail misserably I think not hoisting p2 is
reasnoble in this case. On the other hand, if p2 does not depend on action,
p2 could be merged with p1 without changing the meaning.
If you pass p1 but not p2... bail out appropriatly.

My conclusion is that p2 should not be hoisted, since for it to be usefull, it
need to use information not yeat ready at the time of p1.

Cheers,
Magnus

From gerald at certiv.net  Mon May  5 19:17:40 2008
From: gerald at certiv.net (Gerald Rosenberg)
Date: Mon, 05 May 2008 19:17:40 -0700
Subject: [antlr-interest] predicate question
In-Reply-To: <B7537D4F-5349-48C9-B0DB-0AC0FCC12ADD@cs.usfca.edu>
References: <B7537D4F-5349-48C9-B0DB-0AC0FCC12ADD@cs.usfca.edu>
Message-ID: <200805060219.m462JJmY016144@tach.newtechlaw.com>

Is the question whether

a : {p1}? {action();} {p2}? A | A ;

should perform differently from

a : {p1}? {action(); return true;}? {p2}? A | A ;

 From a high level the-grammar-as-a-language point of view, seems 
like those two rules should match equivalently.



At 06:20 PM 5/5/2008, Terence Parr wrote:
>Consider:
>
>parser grammar T;
>
>a : {p1}? {action} {p2}? A
>   | A
>   ;
>
>Someone pointed out that p2 should not be tested out of context (i.e.,
>before action executes).  ANTLR v2 (PCCTS) correctly ignored preds
>after actions.  v3 definitely walks right over actions looking for
>preds.   I propose to prevent p2 from being hoisted into the decision
>for rule 'a'.  Right now it generates enclosed DFA.  After fix, it
>would only see p1.  Not sure how to fix just yet, but i'll figure it
>out.
>
>Contrary opinions?
>
>Ter
>
>
>
>


From parrt at cs.usfca.edu  Mon May  5 19:27:19 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 5 May 2008 19:27:19 -0700
Subject: [antlr-interest] predicate question
In-Reply-To: <200805060219.m462JJmY016144@tach.newtechlaw.com>
References: <B7537D4F-5349-48C9-B0DB-0AC0FCC12ADD@cs.usfca.edu>
	<200805060219.m462JJmY016144@tach.newtechlaw.com>
Message-ID: <FDD99E80-A1A1-432B-A016-949C5694F6D6@cs.usfca.edu>


On May 5, 2008, at 7:17 PM, Gerald Rosenberg wrote:

> Is the question whether
>
> a : {p1}? {action();} {p2}? A | A ;
>
> should perform differently from
>
> a : {p1}? {action(); return true;}? {p2}? A | A ;
>
> From a high level the-grammar-as-a-language point of view, seems  
> like those two rules should match equivalently.

p1 / p2 are evaluated out of order of normal flow, which is the  
issue.  Predicates can be hoisted into parsing decision, which  
different than the matching. the matching works...prediction won't :)

Ter

From lgcraymer at yahoo.com  Mon May  5 20:06:36 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 5 May 2008 20:06:36 -0700 (PDT)
Subject: [antlr-interest] predicate question
Message-ID: <188215.11874.qm@web55907.mail.re3.yahoo.com>

I'll vote nay.  p2 is guaranteed to be tested out of context in a synpred (the sempred will execute but not the action).  PCCTS did not (IIRC) worry about actions when hoisting sempreds.

This is a playing with fire issue.  The rule needs to be "semantic context changes which will affect the outcome of a decision cannot legally be made within the scope of that decision".  You can never be sure when you will need to insert a synpred in a grammar, so sempred behavior within synpreds should be the same as when they are encountered outside a synpred.

I believe that changing the currently implemented behavior would be unwise--this is the sort of change that introduces new and more exciting behaviors (bug city).

--Loring


----- Original Message ----
> From: Terence Parr <parrt at cs.usfca.edu>
> To: ANTLR Interest <antlr-interest at antlr.org>
> Sent: Monday, May 5, 2008 6:20:28 PM
> Subject: [antlr-interest] predicate question
> 
> Consider:
> 
> parser grammar T;
> 
> a : {p1}? {action} {p2}? A
>    | A
>    ;
> 
> Someone pointed out that p2 should not be tested out of context (i.e.,  
> before action executes).  ANTLR v2 (PCCTS) correctly ignored preds  
> after actions.  v3 definitely walks right over actions looking for  
> preds.   I propose to prevent p2 from being hoisted into the decision  
> for rule 'a'.  Right now it generates enclosed DFA.  After fix, it  
> would only see p1.  Not sure how to fix just yet, but i'll figure it  
> out.
> 
> Contrary opinions?
> 
> Ter
> 
> 




      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ


From gerald at certiv.net  Mon May  5 20:09:49 2008
From: gerald at certiv.net (Gerald Rosenberg)
Date: Mon, 05 May 2008 20:09:49 -0700
Subject: [antlr-interest] predicate question
In-Reply-To: <FDD99E80-A1A1-432B-A016-949C5694F6D6@cs.usfca.edu>
References: <B7537D4F-5349-48C9-B0DB-0AC0FCC12ADD@cs.usfca.edu>
	<200805060219.m462JJmY016144@tach.newtechlaw.com>
	<FDD99E80-A1A1-432B-A016-949C5694F6D6@cs.usfca.edu>
Message-ID: <200805060311.m463BnMW016460@tach.newtechlaw.com>

At 07:27 PM 5/5/2008, Terence Parr wrote:

>On May 5, 2008, at 7:17 PM, Gerald Rosenberg wrote:
>
>>Is the question whether
>>
>>a : {p1}? {action();} {p2}? A | A ;
>>
>>should perform differently from
>>
>>a : {p1}? {action(); return true;}? {p2}? A | A ;
>>
>> From a high level the-grammar-as-a-language point of view, seems
>>like those two rules should match equivalently.
>
>p1 / p2 are evaluated out of order of normal flow, which is the
>issue.  Predicates can be hoisted into parsing decision, which
>different than the matching. the matching works...prediction won't :)
>
>Ter

I was imprecise:  "seems like those two rules should both predict and 
match equivalently."

I know there is a historical basis for treating actions as first 
class elements, but is there a language-level reason why an action is 
not logically just an unchecked validating predicate (or a predicate 
just a checked action with a bunch of nifty turbo-performance 
accelerators under the hood)? 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080505/671e37f7/attachment.html 

From markwright at internode.on.net  Mon May  5 21:43:27 2008
From: markwright at internode.on.net (Mark Wright)
Date: Tue, 6 May 2008 14:43:27 +1000
Subject: [antlr-interest] Fixed speed issue in ANTLR
In-Reply-To: <CECFC254-6CBE-4D1B-B428-1210DD908616@cs.usfca.edu>
References: <CECFC254-6CBE-4D1B-B428-1210DD908616@cs.usfca.edu>
Message-ID: <20080506144327.00004271@goanna>

Hello Ter,

Thanks very much.  This antlr-2008-05-05.18.tar.gz is pre-release
is great, the best ever! It compiles fast like the antlr-2007-12-31.14
pre-release, and the generated parser also works!  It fixes a problem
where the generated parser for my grammar with lots of dis-ambiguating
semantic predicates which:

- worked with antlr-2007-12-28.10, the very first ANTLR pre-release
  that could could handle my grammar.

- worked with the pre-releases up to and including antlr-2007-12-31.14.

- does not work in all the pre-releases starting from
  antlr-2007-12-31.17 to antlr-2008-04-09.18.

- now works with antlr-2008-05-05.18.

Thanks, Mark

On Mon, 5 May 2008 18:10:54 -0700
Terence Parr <parrt at cs.usfca.edu> wrote:

> Grab
> 
> http://www.antlr.org/download/build/antlr-2008-05-05.18.tar.gz
> 
> if you'd like to try on your grammar.  It reverses a stupid change I  
> made 12-31-07 (must have been drinking new year's eve) ;)
> 
> This closes all bugs but one for 3.1 release.  Then I document.
> 
> Ter


-- 

From parrt at cs.usfca.edu  Mon May  5 22:41:25 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 5 May 2008 22:41:25 -0700
Subject: [antlr-interest] predicate question
In-Reply-To: <200805060311.m463BnMW016460@tach.newtechlaw.com>
References: <B7537D4F-5349-48C9-B0DB-0AC0FCC12ADD@cs.usfca.edu>
	<200805060219.m462JJmY016144@tach.newtechlaw.com>
	<FDD99E80-A1A1-432B-A016-949C5694F6D6@cs.usfca.edu>
	<200805060311.m463BnMW016460@tach.newtechlaw.com>
Message-ID: <E1748472-15E6-4FA6-AAC1-03160458B9BD@cs.usfca.edu>


On May 5, 2008, at 8:09 PM, Gerald Rosenberg wrote:

> At 07:27 PM 5/5/2008, Terence Parr wrote:
>
>> On May 5, 2008, at 7:17 PM, Gerald Rosenberg wrote:
>>
>>> Is the question whether
>>>
>>> a : {p1}? {action();} {p2}? A | A ;
>>>
>>> should perform differently from
>>>
>>> a : {p1}? {action(); return true;}? {p2}? A | A ;
>>>
>>> From a high level the-grammar-as-a-language point of view, seems
>>> like those two rules should match equivalently.
>>
>> p1 / p2 are evaluated out of order of normal flow, which is the
>> issue.  Predicates can be hoisted into parsing decision, which
>> different than the matching. the matching works...prediction won't :)
>>
>> Ter
>
> I was imprecise:  "seems like those two rules should both predict  
> and match equivalently."
>
> I know there is a historical basis for treating actions as first  
> class elements, but is there a language-level reason why an action  
> is not logically just an unchecked validating predicate (or a  
> predicate just a checked action with a bunch of nifty turbo- 
> performance accelerators under the hood)?

Well, matching ID could be just an action by that argument...then  
everything is an predicate. ;)  Predicates are not hoisted over rule  
or token refs and should not be hoisted over actions.  I cannot  
execute the action therefore preds after a action cannot be tested.   
The action likely has sideeffects.  Prediction of alts must be side- 
effect free, the whole reason actions are gated with the "if ! 
backtracking" thing.

Ter

From markwright at internode.on.net  Mon May  5 23:31:18 2008
From: markwright at internode.on.net (Mark Wright)
Date: Tue, 6 May 2008 16:31:18 +1000
Subject: [antlr-interest] predicate question
In-Reply-To: <188215.11874.qm@web55907.mail.re3.yahoo.com>
References: <188215.11874.qm@web55907.mail.re3.yahoo.com>
Message-ID: <20080506163118.0000733a@goanna>

I share Loring's concerns.

I don't mind if ANTLR is changed, as long as it still works.
That might be hard to test though.

If ANTLR is changed, then I will run some tests with my grammar which
has lots of dis-ambiguating semantic predicates.  However my grammar
has no syntactic predicates.

Personally I would not mind if ANTLR dis-allowed this, and issued an
error message.  In:

http://www.antlr.org:8888/browse/ANTLR-222

it says that {p2}? may depend on a variable that is calculated
in {action}.  I think I must not understand the issue, as it seems
to me that the issue could be avoided by making the following
changes to the parser:

(1) Change the grammar to:

a : {p1}? {p2}? A
  | A
  ;

(2) Change {p2}? to calculate the variable that was calculated in
{action}.

(3) To address this concern in:

http://www.antlr.org:8888/browse/ANTLR-222

"Also it seems it could cause some performance problem if calculating 
the semantic predicates was a costly operation."

The disambiguating semantic predicates can be coded to cache their
results as I described in:

http://www.antlr.org/pipermail/antlr-interest/2008-February/026385.html

Thanks, Mark

-- 

From antlr at mirality.co.nz  Tue May  6 01:52:08 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 06 May 2008 20:52:08 +1200
Subject: [antlr-interest] predicate question
In-Reply-To: <B7537D4F-5349-48C9-B0DB-0AC0FCC12ADD@cs.usfca.edu>
References: <B7537D4F-5349-48C9-B0DB-0AC0FCC12ADD@cs.usfca.edu>
Message-ID: <20080506085219.69A2E11EC55@www.antlr.org>

At 13:20 6/05/2008, Terence Parr wrote:
 >parser grammar T;
 >
 >a : {p1}? {action} {p2}? A
 >   | A
 >   ;
 >
 >Someone pointed out that p2 should not be tested out of context
 >(i.e., before action executes).  ANTLR v2 (PCCTS) correctly
 >ignored preds after actions.  v3 definitely walks right over
 >actions looking for preds.   I propose to prevent p2 from being
 >hoisted into the decision for rule 'a'.  Right now it generates
 >enclosed DFA.  After fix, it would only see p1.  Not sure how to 

 >fix just yet, but i'll figure it out.

I think it ought to be changed.  The above sequence is logically:
   sempred action sempred token

By definition, any time a sempred appears at the left edge of an 
alt it is a disambiguating predicate, and whenever it appears 
anywhere else it is a validating predicate.  Validating predicates 
should never be hoisted; disambiguating predicates may be.

So the real question is whether the action should be considered 
sufficient to make this no longer the left edge of the alt, and so 
therefore whether the second sempred is a disambiguating or 
validating predicate.  I think the Principle of Least Surprise 
applies here -- an action is "doing something", and the sempred 
follows that, so it should logically only be evaluated after 
having done the preceding action.  This means it must be a 
validating predicate.

If it's really desired to have it be a disambiguating predicate, 
then as others have pointed out it should be possible for the 
grammar author to merge the action into p2, and even then possibly 
merge p2 with p1.  So making this change results in a gain of 
functionality without losing any -- another good reason to do it.


Having said all this, I'm not sure my opinion should be given much 
weight, since my general practice is to avoid sempreds wherever 
possible -- if given the option to specify arbitrary code, most 
people want to use parameters and prior-matched fragments to make 
decisions with, and when they get hoisted then all bets are off.

For example, what about this case:
   rule: A {bar();} b=B ({foo($b)}? C D)? E;

The sempred here is a disambiguating predicate, but it might need 
to be hoisted in certain contexts -- and if that happens, things 
will break, since it turns out that foo() depends on something 
done by bar().

Admittedly this is a bit of a contrived example, but I'm not sure 
there is a good solution for this last one (the only idea which 
comes to mind involves backtracking and "rollback" clauses, which 
seems bad for performance).  But it is something that people will 
beat their head against from time to time.


From markwright at internode.on.net  Tue May  6 05:46:15 2008
From: markwright at internode.on.net (Mark Wright)
Date: Tue, 6 May 2008 22:46:15 +1000
Subject: [antlr-interest] predicate question
In-Reply-To: <20080506085219.69A2E11EC55@www.antlr.org>
References: <B7537D4F-5349-48C9-B0DB-0AC0FCC12ADD@cs.usfca.edu>
	<20080506085219.69A2E11EC55@www.antlr.org>
Message-ID: <20080506224615.00003f9f@goanna>

> At 13:20 6/05/2008, Terence Parr wrote:
>  >parser grammar T;
>  >
>  >a : {p1}? {action} {p2}? A
>  >   | A
>  >   ;
>  >
>  >Someone pointed out that p2 should not be tested out of context
>  >(i.e., before action executes).  ANTLR v2 (PCCTS) correctly
>  >ignored preds after actions.  v3 definitely walks right over
>  >actions looking for preds.   I propose to prevent p2 from being
>  >hoisted into the decision for rule 'a'.  Right now it generates
>  >enclosed DFA.  After fix, it would only see p1.  Not sure how to   
> 
>  >fix just yet, but i'll figure it out.  
> 
> On Tue, 06 May 2008 20:52:08 +1200
> Gavin Lambert <antlr at mirality.co.nz> wrote:
>
> I think it ought to be changed.  The above sequence is logically:
>    sempred action sempred token
> 
> By definition, any time a sempred appears at the left edge of an 
> alt it is a disambiguating predicate, and whenever it appears 
> anywhere else it is a validating predicate.  Validating predicates 
> should never be hoisted; disambiguating predicates may be.
> 
> So the real question is whether the action should be considered 
> sufficient to make this no longer the left edge of the alt, and so 
> therefore whether the second sempred is a disambiguating or 
> validating predicate.  I think the Principle of Least Surprise 
> applies here -- an action is "doing something", and the sempred 
> follows that, so it should logically only be evaluated after 
> having done the preceding action.  This means it must be a 
> validating predicate.

That seems like a neat idea.  It might be useful to be able
to have a validating predicate before consuming a token, as this might
be at the correct line number and column position to report a compiler
error.  I guess then if the action was empty, like:

a : {p1}? {} {p2}? A
  | A
  ;

Then {p2}? would still be a validating semantic predicate.
 
> If it's really desired to have it be a disambiguating predicate, 
> then as others have pointed out it should be possible for the 
> grammar author to merge the action into p2, and even then possibly 
> merge p2 with p1.  So making this change results in a gain of 
> functionality without losing any -- another good reason to do it.
> 
> 
> Having said all this, I'm not sure my opinion should be given much 
> weight, since my general practice is to avoid sempreds wherever 
> possible

Which is fine if you are lucky enough to be parsing a context free
language that does not need dis-ambiguating semantic predicates.

> -- if given the option to specify arbitrary code, most 
> people want to use parameters and prior-matched fragments to make 
> decisions with, and when they get hoisted then all bets are off.

Of course I do not wish to use parameters, as you are saying that
does not work as the dis-ambiguating semantic predicates may be hoisted.

> For example, what about this case:
>    rule: A {bar();} b=B ({foo($b)}? C D)? E;
> 
> The sempred here is a disambiguating predicate, but it might need 
> to be hoisted in certain contexts -- and if that happens, things 
> will break, since it turns out that foo() depends on something 
> done by bar().

The results of the something that was done by bar() could be either:

- stored in the symbol table.

- stored in the token A, and then foo() could scan backwards
looking for A, and retrieve the result.

Likewise for foo() needing to look at B:

- An action could be introduced after consuming token B to store
information about B in the symbol table, then foo() could look
up the information about B in the symbol table.

- foo() could scan backwards looking for B.

- An action could be introduced after consuming token B to store
information about B in the symbol table, and a pointer to the
symbol table information could be stored in token B.  Then foo()
foo() could scan backwards looking for B.

Thanks, Mark
 
> Admittedly this is a bit of a contrived example, but I'm not sure 
> there is a good solution for this last one (the only idea which 
> comes to mind involves backtracking and "rollback" clauses, which 
> seems bad for performance).  But it is something that people will 
> beat their head against from time to time.

-- 

From markwright at internode.on.net  Tue May  6 08:33:39 2008
From: markwright at internode.on.net (Mark Wright)
Date: Wed, 7 May 2008 01:33:39 +1000
Subject: [antlr-interest] should sempred questions be asked on trailing
	optional tokens?
Message-ID: <20080507013339.00000af9@goanna>

Hello,

ANTLR is really neat how it can handle really difficult languages
which require lots of dis-ambiguating semantic predicates.

I have a little question though.  I have a rule which has some
alternatives and some dis-ambiguating semantic predicates like:

simple_type_specifier
        :   {sa.isUnsignedInt((TokenStream)input)}?
                'unsigned' 'int'?
        |   {sa.isSignedInt((TokenStream)input)}?
                'signed' 'int'?
        |   {sa.isInt((TokenStream)input)}?
                'int'
        ;

This is in a large grammar where these dis-ambiguating semantic
predicates are necessary.  Actually I have tried to write a cut-down
example to reproduce this behaviour, but then of course the issue
does not occur.

I try to compile the following input:

unsigned int x;

I tell antlr isUnsignedInt true at line 1 char position 0, but then ANTLR
asks the question at line 1 char position 9 is it an int, then my
parser gets confused.  This is the log of the calls to the dis-ambiguating
semantic predicates when compiling the above input, where:

1:0 means line number 1 char position 0 which is at the start of the token unsigned
1:9 means line number 1 char position 9 which is at the start of the token int

The true or false after the line number:char position is my answer from
the dis-ambiguating semantic predicate.

goanna% tntdboc -ast -logDSPs t1.cpp
Jan 30, 2008 3:42:48 PM Tntdboc process
INFO: Compiling t1.cpp
Jan 30, 2008 3:42:49 PM SemanticActions isStorageClassSpecifierOptTypeIdInitDeclarator
INFO: 1:0 true 
Jan 30, 2008 3:42:49 PM SemanticActions isTypeSpecifierSeqAbstractDeclarator
INFO: 1:0 false 
Jan 30, 2008 3:42:50 PM SemanticActions isUnsignedLongLongInt
INFO: 1:0 false 
Jan 30, 2008 3:42:50 PM SemanticActions isUnsignedLongInt
INFO: 1:0 false 
Jan 30, 2008 3:42:50 PM SemanticActions isStorageClassSpecifierOptTypeIdNoInitDeclarator
INFO: 1:0 false 
Jan 30, 2008 3:42:50 PM SemanticActions isUnsignedShortInt
INFO: 1:0 false 
Jan 30, 2008 3:42:50 PM SemanticActions isUnsignedInt
INFO: 1:0 true 
Jan 30, 2008 3:42:50 PM SemanticActions isUnsignedChar
INFO: 1:0 false 
Jan 30, 2008 3:42:50 PM SemanticActions isInt
INFO: 1:9 true 
line 1:9 [translation_unit, declaration_seq, declaration, block_declaration, simple_declaration, decl_defn_declaration, init_declarator_list, init_declarator]  no viable alt; token=[@2,9:11='int',<91>,1:9] (decision=122 state 0) decision=<<1110:1: init_declarator[CommonTree scs, CommonTree ti] : ({...}? function_declarator -> {(scs == null)}? ^( FUNCTION_DECLARATION function_declarator ) -> {(scs != null)}? ^( FUNCTION_DECLARATION function_declarator ) -> | {...}? operator_function_declarator -> {(scs == null)}? ^( OPERATOR_FUNCTION_DECLARATION operator_function_declarator ) -> {(scs != null)}? ^( OPERATOR_FUNCTION_DECLARATION operator_function_declarator ) -> | declarator ( initializer )? -> {(scs == null)}? ^( DD declarator ( initializer )? ) -> {(scs != null)}? ^( DD declarator ( initializer )? ) ->);>>
Exception in thread "main" org.antlr.runtime.tree.RewriteEarlyExitException
        at tntdbo.dboc.TntdboParser.init_declarator_list(TntdboParser.java:14953)
        at tntdbo.dboc.TntdboParser.decl_defn_declaration(TntdboParser.java:9827)
        at tntdbo.dboc.TntdboParser.simple_declaration(TntdboParser.java:9458)
        at tntdbo.dboc.TntdboParser.block_declaration(TntdboParser.java:9276)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9074)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:8950)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:364)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:136)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:66)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:93)
goanna%

OK so I try to code around this by changing my dis-ambiguating semantic
predicate isInt() to scan backwards looking for 'unsigned', and some other
possibilities I thought of, and answer false if they are found.  This gives
the following dis-ambiguating semantic predicate call trace with
antlr-2008-05-05.18 (I get the same behaviour with this issue in every
ANTLR pre-release I have tried):

goanna% tntdboc -ast -logDSPs t1.cpp
7/05/2008 00:29:23 Tntdboc process
INFO: Compiling t1.cpp
7/05/2008 00:29:26 SemanticActions isStorageClassSpecifierOptTypeIdInitDeclarator
INFO: 1:0 true 
7/05/2008 00:29:26 SemanticActions isTypeSpecifierSeqAbstractDeclarator
INFO: 1:0 false 
7/05/2008 00:29:26 SemanticActions isStorageClassSpecifierOptTypeIdNoInitDeclarator
INFO: 1:0 false 
7/05/2008 00:29:26 SemanticActions isUnsignedShortInt
INFO: 1:0 false 
7/05/2008 00:29:26 SemanticActions isUnsignedChar
INFO: 1:0 false 
7/05/2008 00:29:26 SemanticActions isUnsignedLongInt
INFO: 1:0 false 
7/05/2008 00:29:26 SemanticActions isUnsignedLongLongInt
INFO: 1:0 false 
7/05/2008 00:29:26 SemanticActions isUnsignedInt
INFO: 1:0 true 
7/05/2008 00:29:26 SemanticActions isInt
INFO: 1:9 false 
7/05/2008 00:29:26 SemanticActions isStorageClassSpecifierOptTypeIdInitDeclarator
INFO: 1:9 true 
7/05/2008 00:29:26 SemanticActions isTypeSpecifierSeqAbstractDeclarator
INFO: 1:9 false 
7/05/2008 00:29:26 SemanticActions isStorageClassSpecifierOptTypeIdNoInitDeclarator
INFO: 1:9 false 
7/05/2008 00:29:26 SemanticActions isSimpleTypeSpecifierConstructorCast
INFO: 1:9 false 
7/05/2008 00:29:26 SemanticActions isAssignmentOperatorExpression
INFO: 1:9 false 
7/05/2008 00:29:26 SemanticActions isNoCcQualifierName
INFO: 1:13 false 
7/05/2008 00:29:26 SemanticActions isPtrOperatorDeclarator
INFO: 1:13 false 
7/05/2008 00:29:26 SemanticActions isSimpleTemplateId
INFO: 1:13 false 
7/05/2008 00:29:26 SemanticActions isNoCcIdentifier
INFO: 1:13 true 
(DD unsigned int (DIRECT_DECLARATOR (UNQUALIFIED_IDENTIFIER x)))
goanna% 

My question is:

Is it normal after ANTLR has already chosen to take the alternative:

        :   {sa.isUnsignedInt((TokenStream)input)}?
                'unsigned' 'int'?

to then call another dis-ambiguating semantic predicate on
seeing the token 'int' ?

I thought that ANTLR should trust me: since I answered
isUnsignedInt() is true at 1:0 then I sort of thought that
ANTLR should be greedy and:

- consume the 'int' if its there, without asking any
dis-ambiguating semantic predicate questions.

- only after consuming either ''unsigned' or 'unsigned' 'int' should
ANTLR then start asking more dis-ambiguating semantic predicate
questions if necessary.

Thanks, Mark

PS here is a run with antlr-2008-05-05.18:

- the first call to a dis-ambiguating semantic predicate at each line/char position.

- the ANTLR rule invocation stack.

- the stack trace at the call to the dis-ambiguating semantic predicate.

goanna% tntdboc -ast -logDSPs -logDSPRuleInvocationStack -logDSPStackTrace t1.cpp
7/05/2008 01:04:39 Tntdboc process
INFO: Compiling t1.cpp
7/05/2008 01:04:42 SemanticActions isStorageClassSpecifierOptTypeIdInitDeclarator
INFO: 1:0 true [translation_unit, declaration_seq, declaration]
java.lang.Throwable: isStorageClassSpecifierOptTypeIdInitDeclarator
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isStorageClassSpecifierOptTypeIdInitDeclarator(SemanticActions.java:7341)
        at tntdbo.dboc.TntdboParser$DFA76.specialStateTransition(TntdboParser.java:37160)
        at org.antlr.runtime.DFA.predict(DFA.java:53)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9179)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
7/05/2008 01:04:42 SemanticActions isTypeSpecifierSeqAbstractDeclarator
INFO: 1:0 false [translation_unit, declaration_seq, declaration]
java.lang.Throwable: isTypeSpecifierSeqAbstractDeclarator
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isTypeSpecifierSeqAbstractDeclarator(SemanticActions.java:2448)
        at tntdbo.dboc.TntdboParser$DFA76.specialStateTransition(TntdboParser.java:37160)
        at org.antlr.runtime.DFA.predict(DFA.java:53)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9179)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
7/05/2008 01:04:42 SemanticActions isStorageClassSpecifierOptTypeIdNoInitDeclarator
INFO: 1:0 false [translation_unit, declaration_seq, declaration]
java.lang.Throwable: isStorageClassSpecifierOptTypeIdNoInitDeclarator
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isStorageClassSpecifierOptTypeIdNoInitDeclarator(SemanticActions.java:7391)
        at tntdbo.dboc.TntdboParser$DFA76.specialStateTransition(TntdboParser.java:37160)
        at org.antlr.runtime.DFA.predict(DFA.java:53)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9179)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
7/05/2008 01:04:42 SemanticActions isUnsignedShortInt
INFO: 1:0 false [translation_unit, declaration_seq, declaration]
java.lang.Throwable: isUnsignedShortInt
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isUnsignedShortInt(SemanticActions.java:6212)
        at tntdbo.dboc.TntdboParser$DFA76.specialStateTransition(TntdboParser.java:37160)
        at org.antlr.runtime.DFA.predict(DFA.java:53)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9179)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
7/05/2008 01:04:42 SemanticActions isUnsignedChar
INFO: 1:0 false [translation_unit, declaration_seq, declaration]
java.lang.Throwable: isUnsignedChar
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isUnsignedChar(SemanticActions.java:6108)
        at tntdbo.dboc.TntdboParser$DFA76.specialStateTransition(TntdboParser.java:37160)
        at org.antlr.runtime.DFA.predict(DFA.java:53)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9179)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
7/05/2008 01:04:42 SemanticActions isUnsignedLongInt
INFO: 1:0 false [translation_unit, declaration_seq, declaration]
java.lang.Throwable: isUnsignedLongInt
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isUnsignedLongInt(SemanticActions.java:6225)
        at tntdbo.dboc.TntdboParser$DFA76.specialStateTransition(TntdboParser.java:37160)
        at org.antlr.runtime.DFA.predict(DFA.java:53)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9179)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
7/05/2008 01:04:42 SemanticActions isUnsignedLongLongInt
INFO: 1:0 false [translation_unit, declaration_seq, declaration]
java.lang.Throwable: isUnsignedLongLongInt
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isUnsignedLongLongInt(SemanticActions.java:6238)
        at tntdbo.dboc.TntdboParser$DFA76.specialStateTransition(TntdboParser.java:37160)
        at org.antlr.runtime.DFA.predict(DFA.java:53)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9179)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
7/05/2008 01:04:42 SemanticActions isUnsignedInt
INFO: 1:0 true [translation_unit, declaration_seq, declaration]
java.lang.Throwable: isUnsignedInt
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isUnsignedInt(SemanticActions.java:6134)
        at tntdbo.dboc.TntdboParser$DFA76.specialStateTransition(TntdboParser.java:37160)
        at org.antlr.runtime.DFA.predict(DFA.java:53)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9179)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
7/05/2008 01:04:42 SemanticActions isInt
INFO: 1:9 false [translation_unit, declaration_seq, declaration, block_declaration, simple_declaration, decl_defn_declaration, type_id, type_specifier_seq, type_specifier, simple_type_specifier]
java.lang.Throwable: isInt
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isInt(SemanticActions.java:6199)
        at tntdbo.dboc.TntdboParser.simple_type_specifier(TntdboParser.java:10938)
        at tntdbo.dboc.TntdboParser.type_specifier(TntdboParser.java:10474)
        at tntdbo.dboc.TntdboParser.type_specifier_seq(TntdboParser.java:16469)
        at tntdbo.dboc.TntdboParser.type_id(TntdboParser.java:16390)
        at tntdbo.dboc.TntdboParser.decl_defn_declaration(TntdboParser.java:9989)
        at tntdbo.dboc.TntdboParser.simple_declaration(TntdboParser.java:9622)
        at tntdbo.dboc.TntdboParser.block_declaration(TntdboParser.java:9436)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9232)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
7/05/2008 01:04:42 SemanticActions isStorageClassSpecifierOptTypeIdInitDeclarator
INFO: 1:9 true [translation_unit, declaration_seq, declaration, block_declaration, simple_declaration, decl_defn_declaration, type_id, type_specifier_seq, type_specifier, simple_type_specifier]
java.lang.Throwable: isStorageClassSpecifierOptTypeIdInitDeclarator
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isStorageClassSpecifierOptTypeIdInitDeclarator(SemanticActions.java:7341)
        at tntdbo.dboc.TntdboParser.simple_type_specifier(TntdboParser.java:10938)
        at tntdbo.dboc.TntdboParser.type_specifier(TntdboParser.java:10474)
        at tntdbo.dboc.TntdboParser.type_specifier_seq(TntdboParser.java:16469)
        at tntdbo.dboc.TntdboParser.type_id(TntdboParser.java:16390)
        at tntdbo.dboc.TntdboParser.decl_defn_declaration(TntdboParser.java:9989)
        at tntdbo.dboc.TntdboParser.simple_declaration(TntdboParser.java:9622)
        at tntdbo.dboc.TntdboParser.block_declaration(TntdboParser.java:9436)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9232)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
7/05/2008 01:04:42 SemanticActions isTypeSpecifierSeqAbstractDeclarator
INFO: 1:9 false [translation_unit, declaration_seq, declaration, block_declaration, simple_declaration, decl_defn_declaration, type_id, type_specifier_seq, type_specifier, simple_type_specifier]
java.lang.Throwable: isTypeSpecifierSeqAbstractDeclarator
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isTypeSpecifierSeqAbstractDeclarator(SemanticActions.java:2448)
        at tntdbo.dboc.TntdboParser.simple_type_specifier(TntdboParser.java:10938)
        at tntdbo.dboc.TntdboParser.type_specifier(TntdboParser.java:10474)
        at tntdbo.dboc.TntdboParser.type_specifier_seq(TntdboParser.java:16469)
        at tntdbo.dboc.TntdboParser.type_id(TntdboParser.java:16390)
        at tntdbo.dboc.TntdboParser.decl_defn_declaration(TntdboParser.java:9989)
        at tntdbo.dboc.TntdboParser.simple_declaration(TntdboParser.java:9622)
        at tntdbo.dboc.TntdboParser.block_declaration(TntdboParser.java:9436)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9232)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
7/05/2008 01:04:42 SemanticActions isStorageClassSpecifierOptTypeIdNoInitDeclarator
INFO: 1:9 false [translation_unit, declaration_seq, declaration, block_declaration, simple_declaration, decl_defn_declaration, type_id, type_specifier_seq, type_specifier, simple_type_specifier]
java.lang.Throwable: isStorageClassSpecifierOptTypeIdNoInitDeclarator
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isStorageClassSpecifierOptTypeIdNoInitDeclarator(SemanticActions.java:7391)
        at tntdbo.dboc.TntdboParser.simple_type_specifier(TntdboParser.java:10938)
        at tntdbo.dboc.TntdboParser.type_specifier(TntdboParser.java:10474)
        at tntdbo.dboc.TntdboParser.type_specifier_seq(TntdboParser.java:16469)
        at tntdbo.dboc.TntdboParser.type_id(TntdboParser.java:16390)
        at tntdbo.dboc.TntdboParser.decl_defn_declaration(TntdboParser.java:9989)
        at tntdbo.dboc.TntdboParser.simple_declaration(TntdboParser.java:9622)
        at tntdbo.dboc.TntdboParser.block_declaration(TntdboParser.java:9436)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9232)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
7/05/2008 01:04:42 SemanticActions isSimpleTypeSpecifierConstructorCast
INFO: 1:9 false [translation_unit, declaration_seq, declaration, block_declaration, simple_declaration, decl_defn_declaration, type_id, type_specifier_seq, type_specifier, simple_type_specifier]
java.lang.Throwable: isSimpleTypeSpecifierConstructorCast
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isSimpleTypeSpecifierConstructorCast(SemanticActions.java:6302)
        at tntdbo.dboc.TntdboParser.simple_type_specifier(TntdboParser.java:10938)
        at tntdbo.dboc.TntdboParser.type_specifier(TntdboParser.java:10474)
        at tntdbo.dboc.TntdboParser.type_specifier_seq(TntdboParser.java:16469)
        at tntdbo.dboc.TntdboParser.type_id(TntdboParser.java:16390)
        at tntdbo.dboc.TntdboParser.decl_defn_declaration(TntdboParser.java:9989)
        at tntdbo.dboc.TntdboParser.simple_declaration(TntdboParser.java:9622)
        at tntdbo.dboc.TntdboParser.block_declaration(TntdboParser.java:9436)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9232)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
7/05/2008 01:04:42 SemanticActions isAssignmentOperatorExpression
INFO: 1:9 false [translation_unit, declaration_seq, declaration, block_declaration, simple_declaration, decl_defn_declaration, type_id, type_specifier_seq, type_specifier, simple_type_specifier]
java.lang.Throwable: isAssignmentOperatorExpression
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isAssignmentOperatorExpression(SemanticActions.java:1618)
        at tntdbo.dboc.TntdboParser.simple_type_specifier(TntdboParser.java:10938)
        at tntdbo.dboc.TntdboParser.type_specifier(TntdboParser.java:10474)
        at tntdbo.dboc.TntdboParser.type_specifier_seq(TntdboParser.java:16469)
        at tntdbo.dboc.TntdboParser.type_id(TntdboParser.java:16390)
        at tntdbo.dboc.TntdboParser.decl_defn_declaration(TntdboParser.java:9989)
        at tntdbo.dboc.TntdboParser.simple_declaration(TntdboParser.java:9622)
        at tntdbo.dboc.TntdboParser.block_declaration(TntdboParser.java:9436)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9232)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
7/05/2008 01:04:42 SemanticActions isNoCcQualifierName
INFO: 1:13 false [translation_unit, declaration_seq, declaration, block_declaration, simple_declaration, decl_defn_declaration, init_declarator_list, init_declarator]
java.lang.Throwable: isNoCcQualifierName
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isNoCcQualifierName(SemanticActions.java:3363)
        at tntdbo.dboc.TntdboParser$DFA122.specialStateTransition(TntdboParser.java:38398)
        at org.antlr.runtime.DFA.predict(DFA.java:53)
        at tntdbo.dboc.TntdboParser.init_declarator(TntdboParser.java:15054)
        at tntdbo.dboc.TntdboParser.init_declarator_list(TntdboParser.java:14939)
        at tntdbo.dboc.TntdboParser.decl_defn_declaration(TntdboParser.java:9995)
        at tntdbo.dboc.TntdboParser.simple_declaration(TntdboParser.java:9622)
        at tntdbo.dboc.TntdboParser.block_declaration(TntdboParser.java:9436)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9232)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
7/05/2008 01:04:42 SemanticActions isPtrOperatorDeclarator
INFO: 1:13 false [translation_unit, declaration_seq, declaration, block_declaration, simple_declaration, decl_defn_declaration, init_declarator_list, init_declarator]
java.lang.Throwable: isPtrOperatorDeclarator
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isPtrOperatorDeclarator(SemanticActions.java:2189)
        at tntdbo.dboc.TntdboParser$DFA122.specialStateTransition(TntdboParser.java:38398)
        at org.antlr.runtime.DFA.predict(DFA.java:53)
        at tntdbo.dboc.TntdboParser.init_declarator(TntdboParser.java:15054)
        at tntdbo.dboc.TntdboParser.init_declarator_list(TntdboParser.java:14939)
        at tntdbo.dboc.TntdboParser.decl_defn_declaration(TntdboParser.java:9995)
        at tntdbo.dboc.TntdboParser.simple_declaration(TntdboParser.java:9622)
        at tntdbo.dboc.TntdboParser.block_declaration(TntdboParser.java:9436)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9232)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
7/05/2008 01:04:42 SemanticActions isSimpleTemplateId
INFO: 1:13 false [translation_unit, declaration_seq, declaration, block_declaration, simple_declaration, decl_defn_declaration, init_declarator_list, init_declarator]
java.lang.Throwable: isSimpleTemplateId
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isSimpleTemplateId(SemanticActions.java:1838)
        at tntdbo.dboc.TntdboParser$DFA122.specialStateTransition(TntdboParser.java:38398)
        at org.antlr.runtime.DFA.predict(DFA.java:53)
        at tntdbo.dboc.TntdboParser.init_declarator(TntdboParser.java:15054)
        at tntdbo.dboc.TntdboParser.init_declarator_list(TntdboParser.java:14939)
        at tntdbo.dboc.TntdboParser.decl_defn_declaration(TntdboParser.java:9995)
        at tntdbo.dboc.TntdboParser.simple_declaration(TntdboParser.java:9622)
        at tntdbo.dboc.TntdboParser.block_declaration(TntdboParser.java:9436)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9232)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
7/05/2008 01:04:42 SemanticActions isNoCcIdentifier
INFO: 1:13 true [translation_unit, declaration_seq, declaration, block_declaration, simple_declaration, decl_defn_declaration, init_declarator_list, init_declarator]
java.lang.Throwable: isNoCcIdentifier
        at tntdbo.symbol.SemanticActions.logDSP(SemanticActions.java:567)
        at tntdbo.symbol.SemanticActions.isNoCcIdentifier(SemanticActions.java:4103)
        at tntdbo.dboc.TntdboParser$DFA122.specialStateTransition(TntdboParser.java:38398)
        at org.antlr.runtime.DFA.predict(DFA.java:53)
        at tntdbo.dboc.TntdboParser.init_declarator(TntdboParser.java:15054)
        at tntdbo.dboc.TntdboParser.init_declarator_list(TntdboParser.java:14939)
        at tntdbo.dboc.TntdboParser.decl_defn_declaration(TntdboParser.java:9995)
        at tntdbo.dboc.TntdboParser.simple_declaration(TntdboParser.java:9622)
        at tntdbo.dboc.TntdboParser.block_declaration(TntdboParser.java:9436)
        at tntdbo.dboc.TntdboParser.declaration(TntdboParser.java:9232)
        at tntdbo.dboc.TntdboParser.declaration_seq(TntdboParser.java:9106)
        at tntdbo.dboc.TntdboParser.translation_unit(TntdboParser.java:414)
        at tntdbo.dboc.Tntdboc.process(Tntdboc.java:170)
        at tntdbo.dboc.Tntdboc.<init>(Tntdboc.java:99)
        at tntdbo.dboc.Tntdboc.main(Tntdboc.java:127)
(DD unsigned int (DIRECT_DECLARATOR (UNQUALIFIED_IDENTIFIER x)))
goanna% 

-- 

From karl at karlhennig.com  Tue May  6 13:13:41 2008
From: karl at karlhennig.com (Karl Hennig)
Date: Tue, 06 May 2008 13:13:41 -0700
Subject: [antlr-interest] Use @rulecatch but also keep antlr error messages
Message-ID: <4820BBF5.8080300@karlhennig.com>

Hello,

I'm using antlr for a configuration file system and have used @rulecatch 
to have exceptions thrown all the way up to me so I can exit on a syntax 
error, disallowing antlr's default attempts to recover.

However, the problem is that when I do that, I lose the useful 
information that antlr provides in addition to the exception itself.  
For example, it would also print something out like this:
line 4:0 mismatched input 'a5' expecting ';'

In looking at the exception raised, I see that it has a property called 
'detailmessage', but in my case it's always null.

How can I get/generate the error output (capture it at a higher level, 
not just printed out) while also letting the exceptions bubble to the top?

Thank you.

Karl

From antlr at mirality.co.nz  Tue May  6 13:24:16 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 07 May 2008 08:24:16 +1200
Subject: [antlr-interest] predicate question
In-Reply-To: <20080506224615.00003f9f@goanna>
References: <B7537D4F-5349-48C9-B0DB-0AC0FCC12ADD@cs.usfca.edu>
	<20080506085219.69A2E11EC55@www.antlr.org>
	<20080506224615.00003f9f@goanna>
Message-ID: <20080506202459.7078611EB9F@www.antlr.org>

At 00:46 7/05/2008, Mark Wright wrote:
 >Which is fine if you are lucky enough to be parsing a context 
free
 >language that does not need dis-ambiguating semantic predicates.

True, but since I mostly only work with small DSLs I have the 
luxury of changing the language if it becomes difficult to parse 
:)

 >> For example, what about this case:
 >>    rule: A {bar();} b=B ({foo($b)}? C D)? E;
[...]
 >Likewise for foo() needing to look at B:
 >
 >- An action could be introduced after consuming token B to store
 >information about B in the symbol table, then foo() could look
 >up the information about B in the symbol table.
 >
 >- foo() could scan backwards looking for B.
 >
 >- An action could be introduced after consuming token B to store
 >information about B in the symbol table, and a pointer to the
 >symbol table information could be stored in token B.  Then foo()
 >foo() could scan backwards looking for B.

I don't think that will work, since if foo() is hoisted then B 
will not yet have been consumed, and may be arbitrarily far ahead 
in the input stream (depends on how far it got hoisted).

Mind you, it's possible ANTLR avoids this by not hoisting this 
kind of predicate at all.  As I said, this was a bit of a 
contrived example and I'm not entirely sure how ANTLR reacts to it.


From antlr at deloreyfamily.org  Tue May  6 19:15:00 2008
From: antlr at deloreyfamily.org (Dan Delorey)
Date: Tue, 6 May 2008 20:15:00 -0600
Subject: [antlr-interest] Fixed speed issue in ANTLR
In-Reply-To: <CECFC254-6CBE-4D1B-B428-1210DD908616@cs.usfca.edu>
References: <CECFC254-6CBE-4D1B-B428-1210DD908616@cs.usfca.edu>
Message-ID: <90d6c0620805061915j30f08d32keceeb7c7bb7e629f@mail.gmail.com>

t fails on my Java grammar. :( That last incremental build (2008-04-09.18)
works.

This is the error:

error(10):  internal error: Java.g : java.lang.ArrayIndexOutOfBoundsException:
3
org.antlr.tool.Rule.hasRewrite(Rule.java:350)
org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:1911)
org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1686)
org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1534)
org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1290)
org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:1063)
org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:779)
org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:570)
org.antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java:512)
org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:330)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:421)
org.antlr.Tool.generateRecognizer(Tool.java:419)
org.antlr.Tool.process(Tool.java:286)
org.antlr.Tool.main(Tool.java:71)

I'd be happy to send my grammar along if you'd like to see it.

Thanks for all the work!


On Mon, May 5, 2008 at 7:10 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> Grab
>
> http://www.antlr.org/download/build/antlr-2008-05-05.18.tar.gz
>
> if you'd like to try on your grammar.  It reverses a stupid change I made
> 12-31-07 (must have been drinking new year's eve) ;)
>
> This closes all bugs but one for 3.1 release.  Then I document.
>
> Ter
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080506/f9cd4c54/attachment.html 

From markwright at internode.on.net  Tue May  6 23:53:06 2008
From: markwright at internode.on.net (Mark Wright)
Date: Wed, 7 May 2008 16:53:06 +1000
Subject: [antlr-interest] predicate question
In-Reply-To: <1210105494_37646@mail.internode.on.net>
References: <B7537D4F-5349-48C9-B0DB-0AC0FCC12ADD@cs.usfca.edu>
	<20080506085219.69A2E11EC55@www.antlr.org>
	<20080506224615.00003f9f@goanna>
	<1210105494_37646@mail.internode.on.net>
Message-ID: <20080507165306.00002014@goanna>

>  >> For example, what about this case:
>  >>    rule: A {bar();} b=B ({foo($b)}? C D)? E;
> [...]
>  >Likewise for foo() needing to look at B:
>  >
>  >- An action could be introduced after consuming token B to store
>  >information about B in the symbol table, then foo() could look
>  >up the information about B in the symbol table.
>  >
>  >- foo() could scan backwards looking for B.
>  >
>  >- An action could be introduced after consuming token B to store
>  >information about B in the symbol table, and a pointer to the
>  >symbol table information could be stored in token B.  Then foo()
>  >foo() could scan backwards looking for B.
> 
> On Wed, 07 May 2008 08:24:16 +1200
> Gavin Lambert <antlr at mirality.co.nz> wrote:
>
> I don't think that will work, since if foo() is hoisted then B 
> will not yet have been consumed, and may be arbitrarily far ahead 
> in the input stream (depends on how far it got hoisted).
> 
> Mind you, it's possible ANTLR avoids this by not hoisting this 
> kind of predicate at all.  As I said, this was a bit of a 
> contrived example and I'm not entirely sure how ANTLR reacts to it.

ANTLR will only consider dis-ambiguating semantic predicates for
the alternatives starting at the current token.

So when ANTLR is trying to figure out if the alternative:

  A {bar();} b=B ({foo($b)}? C D)? E;

is the one to take amongst other ambiguous alternatives,
ANTLR does not consider the dis-ambiguating semantic predicate
{foo($B)} that is 2 tokens ahead in the input stream (unless
syntactic predicates or backtracking are used, then I am not
sure, see note below).

This can be handled with dis-ambiguating semantic predicates.
Another dis-ambiguating semantic predicate can be written,
something like:

rule:
  {(isABfooOptE()}?
  A {bar();} b=B ({foo($b)}? C D)? E;

Where isABfooOptE() looks ahead for A followed by B, possibly
looking stuff up in the symbol table, calls a method that is
shared with the foo() dis-ambiguating sempred, and looks ahead
for E.

Since dis-ambiguating semantic predicates can call arbitrary
code, they are very powerful if you do not mind writing thousands
of lines of code.

I have thousands of lines of dis-ambiguating semantic predicates
that do things like:

- scan ahead looking for tokens, while matching things like
parentheses, etc.

- looking up stuff in the symbol table.

- doing stuff like this with hand coded recursive descent
compilers.  The dis-ambiguating semantic predicates are written
in little functions that correspond to the parser rules,
they call each other while scanning ahead.

- sometimes they scan backwards one or 2 tokens, looking for a pointer
into the symbol table that was earlier stored in a token if the
token is present.

Note: Maybe you were thinking of a situation with syntactic
predicates or backtracking as well as dis-ambiguating semantic
predicates.  I am not using syntactic predicates or backtracking,
so I don't have any experience with them.  Instead I have written lots
of dis-ambiguating semantic predicates using hand coded recursive
descent compilers, which is like hand coded backtracking.  The
hand coded recursive descent compilers have the option of cheating:
they can loosely decide to match an alternative, then a compiler
error can be generated if the alternative does not really match
while it is being parsed.

Regards, Mark

--

From hharalambiev at gmail.com  Wed May  7 00:30:05 2008
From: hharalambiev at gmail.com (Haralambi Haralambiev)
Date: Wed, 7 May 2008 10:30:05 +0300
Subject: [antlr-interest] White spaces within token definition
In-Reply-To: <aa71f710804250457w6a25787elce1569ac3a3eba3e@mail.gmail.com>
References: <aa71f710804250457w6a25787elce1569ac3a3eba3e@mail.gmail.com>
Message-ID: <aa71f710805070030n7ebc2af7va42bd1ee74aa3565@mail.gmail.com>

Hello,

Is this question too newbie, or is there noone that could answer it?

Could someone please give me some insight on the problem, as I
do want to understand the cause and not work around the issue.

Thanks,
Hari

On 4/25/08, Haralambi Haralambiev <hharalambiev at gmail.com> wrote:
>
> Hello,
>
> I have stumbled upon a problem, that although has some workarounds, has
> puzzled me over why it is happening.
> (I searched for a similar question, but was unable to find it. I am sorry
> if this has been answered somewhere else. If so, please provide me the
> link.)
>
> Consider the following lexer grammar:
> ---------------------------------------------------
> lexer grammar test;
>
> CMD_EXIT : 'COMMAND EXIT';
> ID : ('A'..'Z'|'a'..'z')+;
> WhiteSpaces : (' '|'\t')+ {$channel=HIDDEN;};
> ---------------------------------------------------
>
> Consider that the language that is recognized has many commands with the
> syntax "COMMAND <name of the command>", but I am interested only in the exit
> command, so I consider "COMMAND EXIT" as a token.
> However, I would like
> "COMMAND <something else>" to be matched as the sequence of two ID tokens.
>
> With the grammar above, the "COMMAND EXIT" is successfully matched as a CMD_EXIT token, however "COMMAND XYZ" produces an error "line
> 1:8 mismatched character 'X' expecting
> 'E'" and what is left (only the character Z) is matched as ID.
>
> In the generated lexer class, in the mTokes() method I noticed that the lexer will consider everything that starts with "COMMAND " as the CMD_EXIT
> token.
> It just doesn't consider the characters in the token definition, that were after the white space (i.e. 'E', 'X', 'I' and 'T') during the recognition.
>
> So, if you could enlighten me on why is this happening, I will be very
> grateful!
>
> Best Regards,
> Hari
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080507/b777c795/attachment.html 

From antlr at mirality.co.nz  Wed May  7 01:12:21 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 07 May 2008 20:12:21 +1200
Subject: [antlr-interest] predicate question
In-Reply-To: <20080507165306.00002014@goanna>
References: <B7537D4F-5349-48C9-B0DB-0AC0FCC12ADD@cs.usfca.edu>
	<20080506085219.69A2E11EC55@www.antlr.org>
	<20080506224615.00003f9f@goanna>
	<1210105494_37646@mail.internode.on.net>
	<20080507165306.00002014@goanna>
Message-ID: <20080507082841.1445311EB4A@www.antlr.org>

At 18:53 7/05/2008, Mark Wright wrote:
 >Note: Maybe you were thinking of a situation with syntactic
 >predicates or backtracking as well as dis-ambiguating semantic
 >predicates.  I am not using syntactic predicates or 
backtracking,
 >so I don't have any experience with them.  Instead I have 
written
 >lots of dis-ambiguating semantic predicates using hand coded
 >recursive descent compilers, which is like hand coded 
backtracking.

Interesting; I've basically taken the exact opposite path.  Most 
of my grammars either use no predicates at all, or they use 
syntactic predicates (though those are mostly in the lexer, not 
the parser).  And I've often switched on backtracking.  Generally 
for the stuff I've been working on the performance hit caused by 
backtracking is negligible compared to how much more readable it 
makes the grammar.


From antlr at mirality.co.nz  Wed May  7 01:39:48 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 07 May 2008 20:39:48 +1200
Subject: [antlr-interest] White spaces within token definition
In-Reply-To: <aa71f710805070030n7ebc2af7va42bd1ee74aa3565@mail.gmail.com
 >
References: <aa71f710804250457w6a25787elce1569ac3a3eba3e@mail.gmail.com>
	<aa71f710805070030n7ebc2af7va42bd1ee74aa3565@mail.gmail.com>
Message-ID: <20080507084141.7B04611E9C3@www.antlr.org>

At 19:30 7/05/2008, Haralambi Haralambiev wrote:
>CMD_EXIT:'COMMAND EXIT';
>ID:('A'..'Z'|'a'..'z')+;
>WhiteSpaces:(' '|'\t')+ {$channel=HIDDEN;};
>---------------------------------------------------
>
>Consider that the language that is recognized has many commands 
>with the syntax "COMMAND <name of the command>", but I am 
>interested only in the exit command, so I consider "COMMAND EXIT" 
>as a token.
>However, I would like "COMMAND <something else>" to be matched as 
>the sequence of two ID tokens.
>
>With the grammar above, the "COMMAND EXIT" is successfully 
>matched as a CMD_EXIT token, however "COMMAND XYZ" produces an 
>error "line 1:8 mismatched character 'X' expecting 'E'" and what 
>is left (only the character Z) is matched as ID.
>
>In the generated lexer class, in the mTokes() method I noticed 
>that the lexer will consider everything that starts with "COMMAND 
>" as the CMD_EXIT token. It just doesn't consider the characters 
>in the token definition, that were after the white space (i.e. 
>'E', 'X', 'I' and 'T') during the recognition.
>
>So, if you could enlighten me on why is this happening, I will be 
>very grateful!

The reason is because up until it hits the whitespace, both 
CMD_EXIT and ID are viable targets.  Once it sees the whitespace, 
it knocks ID out of the running and leaves only CMD_EXIT, so that 
one "wins".  It will never look further ahead to the rest of the 
rule.  (ID followed by WhiteSpaces followed by ID is not 
considered, since single tokens are always preferred over multiple 
ones.)

(I think it ought to work as is, and there's a bug filed to that 
effect.  Apparently it has something to do with not handling 
follow sets and being a bit too generous with error recovery.)

The general workaround for this problem is to merge the rules, 
using either syntactic or semantic predicates to disambiguate and 
change the final token type:

fragment CMD_EXIT: 'COMMAND EXIT';
ID
   :  (CMD_EXIT) => CMD_EXIT { $type = CMD_EXIT; }
   |  ('A'..'Z'|'a'..'z')+
   ;
WS: (' '|'\t')+ {$channel=HIDDEN;};

The synpred here forces it to look through the entire character 
sequence before taking the CMD_EXIT branch.


From jimi at temporal-wave.com  Wed May  7 08:05:27 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 07 May 2008 08:05:27 -0700
Subject: [antlr-interest] White spaces within token definition
In-Reply-To: <aa71f710805070030n7ebc2af7va42bd1ee74aa3565@mail.gmail.com>
Message-ID: <!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAABwBgAQAAAAxGA7kK95vUO
	XK3oe6XUP0QEAAAAA@temporal-wave.com>

The lexer will start down the COMMAND_EXIT path, consume the space, then find that the next sequence is not EXIT so you get the error. You need an alt in the COMMAND sequence to see just the COMMAND part, like this:

 

fragment COMMAND

: 'COMMAND';

 

COMMAND_EXIT

: COMMAND

    (

         (' EXIT')=> ' EXIT'

       | { $type = COMMAND; }

    )

;

ID : ('A'..'Z'|'a'..'z')+;

WS: (' '|'\t')+ {$channel=HIDDEN;};

 

This will produce COMMAND ID when  the next sequence is not ' EXIT';

 

Jim

 

 

 

From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Haralambi Haralambiev
Sent: Wednesday, May 07, 2008 12:30 AM
To: antlr-interest at antlr.org
Cc: parrt at cs.usfca.edu
Subject: Re: [antlr-interest] White spaces within token definition

 

Hello,

Is this question too newbie, or is there noone that could answer it?

Could someone please give me some insight on the problem, as I do want to understand the cause and not work around the issue.

Thanks,
Hari

On 4/25/08, Haralambi Haralambiev <hharalambiev at gmail.com> wrote:

Hello,

I have stumbled upon a problem, that although has some workarounds, has puzzled me over why it is happening.
(I searched for a similar question, but was unable to find it. I am sorry if this has been answered somewhere else. If so, please provide me the link.)

Consider the following lexer grammar:
---------------------------------------------------
lexer grammar test;

CMD_EXIT : 'COMMAND EXIT';
ID : ('A'..'Z'|'a'..'z')+;
WhiteSpaces : (' '|'\t')+ {$channel=HIDDEN;};
---------------------------------------------------

Consider that the language that is recognized has many commands with the syntax "COMMAND <name of the command>", but I am interested only in the exit command, so I consider "COMMAND EXIT" as a token.
However, I would like "COMMAND <something else>" to be matched as the sequence of two ID tokens.

With the grammar above, the "COMMAND EXIT" is successfully matched as a CMD_EXIT token, however "COMMAND XYZ" produces an error "line 1:8 mismatched character 'X' expecting 'E'" and what is left (only the character Z) is matched as ID.

In the generated lexer class, in the mTokes() method I noticed that the lexer will consider everything that starts with "COMMAND " as the CMD_EXIT token. It just doesn't consider the characters in the token definition, that were after the white space (i.e. 'E', 'X', 'I' and 'T') during the recognition.

So, if you could enlighten me on why is this happening, I will be very grateful!

Best Regards,
Hari

 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080507/94e02fd3/attachment.html 

From simos.lists at googlemail.com  Wed May  7 10:27:08 2008
From: simos.lists at googlemail.com (Simos Xenitellis)
Date: Wed, 07 May 2008 18:27:08 +0100
Subject: [antlr-interest] White spaces within token definition
In-Reply-To: <!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAABwBgAQAAAAxGA7kK95vUO	XK3oe6XUP0QEAAAAA@temporal-wave.com>
References: <!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAABwBgAQAAAAxGA7kK95vUO	XK3oe6XUP0QEAAAAA@temporal-wave.com>
Message-ID: <4821E66C.40006@googlemail.com>

When I try it with the following grammar, I do not get this "COMMAND 
EXIT" recognised.

With input:  one two COMMAND EXIT four, the result is
ID one
ID two
ID COMMAND
ID EXIT
ID four

Is there something missing from the code?

Simos

=======
grammar SpaceIssue;

options { language = Python; }

statement       : atoken* EOF ;

atoken  :       
        COMMAND_EXIT    { print "COMMAND", $COMMAND_EXIT.text   }
        | ID            { print "ID", $ID.text          } ;

fragment COMMAND : 'COMMAND' ;

COMMAND_EXIT    : COMMAND ( ('EXIT') => 'COMMAND'| { $type = COMMAND; } ) ;

ID  : ('A'..'Z'|'a'..'z')+ ;

WS: (' '|'\t')+ { $channel=HIDDEN; } ;
=======


O/H Jim Idle ??????:
>
> The lexer will start down the COMMAND_EXIT path, consume the space, 
> then find that the next sequence is not EXIT so you get the error. You 
> need an alt in the COMMAND sequence to see just the COMMAND part, like 
> this:
>
>  
>
> fragment COMMAND
>
> : 'COMMAND';
>
>  
>
> COMMAND_EXIT
>
> : COMMAND
>
>     (
>
>          (' EXIT')=> ' EXIT'
>
>        | { $type = COMMAND; }
>
>     )
>
> ;
>
> ID : ('A'..'Z'|'a'..'z')+;
>
> WS: (' '|'\t')+ {$channel=HIDDEN;};
>
>  
>
> This will produce COMMAND ID when  the next sequence is not ' EXIT';
>
>  
>
> Jim
>
>  
>
>  
>
>  
>
> *From:* antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] *On Behalf Of *Haralambi 
> Haralambiev
> *Sent:* Wednesday, May 07, 2008 12:30 AM
> *To:* antlr-interest at antlr.org
> *Cc:* parrt at cs.usfca.edu
> *Subject:* Re: [antlr-interest] White spaces within token definition
>
>  
>
> Hello,
>
> Is this question too newbie, or is there noone that could answer it?
>
> Could someone please give me some insight on the problem, as I 
> do want to understand the cause and not work around the issue.
>
> Thanks,
> Hari
>
> On 4/25/08, *Haralambi Haralambiev* <hharalambiev at gmail.com 
> <mailto:hharalambiev at gmail.com>> wrote:
>
> Hello,
>
> I have stumbled upon a problem, that although has some workarounds, 
> has puzzled me over why it is happening.
> (I searched for a similar question, but was unable to find it. I am 
> sorry if this has been answered somewhere else. If so, please provide 
> me the link.)
>
> Consider the following lexer grammar:
> ---------------------------------------------------
> lexer grammar test;
>
> CMD_EXIT : 'COMMAND EXIT';
> ID : ('A'..'Z'|'a'..'z')+;
> WhiteSpaces : (' '|'\t')+ {$channel=HIDDEN;};
> ---------------------------------------------------
>
> Consider that the language that is recognized has many commands with 
> the syntax "COMMAND <name of the command>", but I am interested only 
> in the exit command, so I consider "COMMAND EXIT" as a token.
> However, I would like 
> "COMMAND <something else>" to be matched as the sequence of two ID tokens.
>
> With the grammar above, the "COMMAND EXIT" is successfully matched as a CMD_EXIT token, however "COMMAND XYZ" produces an error "line 
> 1:8 mismatched character 'X' expecting 
> 'E'" and what is left (only the character Z) is matched as ID.
>
> In the generated lexer class, in the mTokes() method I noticed that the lexer will consider everything that starts with "COMMAND " as the CMD_EXIT 
> token. 
> It just doesn't consider the characters in the token definition, that were after the white space (i.e. 'E', 'X', 'I' and 'T') during the recognition.
>
> So, if you could enlighten me on why is this happening, I will be very 
> grateful!
>
> Best Regards,
> Hari
>
>  
>


From jimi at temporal-wave.com  Wed May  7 10:34:26 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 07 May 2008 10:34:26 -0700
Subject: [antlr-interest] White spaces within token definition
In-Reply-To: <4821E66C.40006@googlemail.com>
Message-ID: <!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAABwBgAQAAAA708hqDv+u0q
	UBPof/PPwowEAAAAA@temporal-wave.com>

You didn't copy the example correctly (please read it carefully):


> -----Original Message-----
> 
> COMMAND_EXIT    : COMMAND ( ('EXIT') => 'COMMAND'| { $type = COMMAND; }
                                ^         ^^^^^^^^^
> 
> O/H Jim Idle ??????:
> >
> > COMMAND_EXIT
> >
> > : COMMAND
> >
> >     (
> >
> >          (' EXIT')=> ' EXIT'
               ^         ^^^^^^^


Please read up on predicates on the Wiki. I also advise you to buy a copy of the book if you can afford it:

http://www.pragprog.com/titles/tpantlr/the-definitive-antlr-reference


Jim

               




From simos.lists at googlemail.com  Wed May  7 11:05:09 2008
From: simos.lists at googlemail.com (Simos Xenitellis)
Date: Wed, 07 May 2008 19:05:09 +0100
Subject: [antlr-interest] White spaces within token definition
In-Reply-To: <!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAABwBgAQAAAA708hqDv+u0q	UBPof/PPwowEAAAAA@temporal-wave.com>
References: <!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAABwBgAQAAAA708hqDv+u0q	UBPof/PPwowEAAAAA@temporal-wave.com>
Message-ID: <4821EF55.6080407@googlemail.com>

O/H Jim Idle ??????:
> You didn't copy the example correctly (please read it carefully):
>
>
>   
>> -----Original Message-----
>>
>> COMMAND_EXIT    : COMMAND ( ('EXIT') => 'COMMAND'| { $type = COMMAND; }
>>     
>                                 ^         ^^^^^^^^^
>   
>> O/H Jim Idle ??????:
>>     
>>> COMMAND_EXIT
>>>
>>> : COMMAND
>>>
>>>     (
>>>
>>>          (' EXIT')=> ' EXIT'
>>>       
>                ^         ^^^^^^^
>
>
> Please read up on predicates on the Wiki. I also advise you to buy a copy of the book if you can afford it:
>
> http://www.pragprog.com/titles/tpantlr/the-definitive-antlr-reference
>   
Many thanks, it worked.
I am looking in getting the book soon.

Cheers,
Simos


From kaleb.pederson at gmail.com  Wed May  7 12:03:23 2008
From: kaleb.pederson at gmail.com (Kaleb Pederson)
Date: Wed, 7 May 2008 12:03:23 -0700
Subject: [antlr-interest] antlr3c-3.1b2 bug with setDebugListener
Message-ID: <f14c01620805071203s4574b5dcm159bf30fb2baf894@mail.gmail.com>

I'm just starting with the C runtime, so in the process of trying to
debug my grammar, I turned on -debug which resulted in a segfault.  I
traced it down to setDebugListener not being set on the token-stream
pseudo-object.  I grepped through the code, and it looks like there's
a static function that the function pointer should be set to.

My gdb transcript follows:

(gdb) break src/antlr3parser.c:134
No source file named src/antlr3parser.c.
Make breakpoint pending on future shared library load? (y or [n]) y
Breakpoint 1 (src/antlr3parser.c:134) pending.
(gdb) run
Starting program: ./main preface.txt

Breakpoint 1, setDebugListener (parser=0x80698a8, dbg=0x8069a60) at
src/antlr3parser.c:134
134                     parser->tstream->setDebugListener(parser->tstream, dbg);
(gdb) step

Program received signal SIGSEGV, Segmentation fault.
0x00000000 in ?? ()

(gdb) up
#1  0xb7f89853 in setDebugListener (parser=0x80698a8, dbg=0x8069a60)
at src/antlr3parser.c:134
134                     parser->tstream->setDebugListener(parser->tstream, dbg);
(gdb) print parser->tstream
$1 = (pANTLR3_TOKEN_STREAM) 0x8069730
(gdb) print parser->tstream->setDebugListener
$2 = (void (*)(struct ANTLR3_TOKEN_STREAM_struct *,
pANTLR3_DEBUG_EVENT_LISTENER)) 0

Any suggestions for a workaround or did I just miss a step somewhere?

Thanks.

--Kaleb

From jimi at temporal-wave.com  Wed May  7 12:10:55 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 07 May 2008 12:10:55 -0700
Subject: [antlr-interest] antlr3c-3.1b2 bug with setDebugListener
In-Reply-To: <f14c01620805071203s4574b5dcm159bf30fb2baf894@mail.gmail.com>
Message-ID: <!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAABwBgAQAAAAC/vpgHMeOk+
	DXV0fGKlS4gEAAAAA@temporal-wave.com>

It isn't all tested out yet I am afraid - it will be before 3.1 is released though. I haven't hit that one myself, but that doesn't mean it isn;t a bug ;-)

Jim

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Kaleb Pederson
> Sent: Wednesday, May 07, 2008 12:03 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] antlr3c-3.1b2 bug with setDebugListener
> 
> I'm just starting with the C runtime, so in the process of trying to
> debug my grammar, I turned on -debug which resulted in a segfault.  I
> traced it down to setDebugListener not being set on the token-stream
> pseudo-object.  I grepped through the code, and it looks like there's
> a static function that the function pointer should be set to.
> 
> My gdb transcript follows:
> 
> (gdb) break src/antlr3parser.c:134
> No source file named src/antlr3parser.c.
> Make breakpoint pending on future shared library load? (y or [n]) y
> Breakpoint 1 (src/antlr3parser.c:134) pending.
> (gdb) run
> Starting program: ./main preface.txt
> 
> Breakpoint 1, setDebugListener (parser=0x80698a8, dbg=0x8069a60) at
> src/antlr3parser.c:134
> 134                     parser->tstream->setDebugListener(parser-
> >tstream, dbg);
> (gdb) step
> 
> Program received signal SIGSEGV, Segmentation fault.
> 0x00000000 in ?? ()
> 
> (gdb) up
> #1  0xb7f89853 in setDebugListener (parser=0x80698a8, dbg=0x8069a60)
> at src/antlr3parser.c:134
> 134                     parser->tstream->setDebugListener(parser-
> >tstream, dbg);
> (gdb) print parser->tstream
> $1 = (pANTLR3_TOKEN_STREAM) 0x8069730
> (gdb) print parser->tstream->setDebugListener
> $2 = (void (*)(struct ANTLR3_TOKEN_STREAM_struct *,
> pANTLR3_DEBUG_EVENT_LISTENER)) 0
> 
> Any suggestions for a workaround or did I just miss a step somewhere?
> 
> Thanks.
> 
> --Kaleb




From parrt at cs.usfca.edu  Wed May  7 13:19:11 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 7 May 2008 13:19:11 -0700
Subject: [antlr-interest] wow. marathon debug session
Message-ID: <2C676197-38B4-445F-91B4-5A1AA882D14F@cs.usfca.edu>

In process of fixing a bug, I realized that some decisions did not  
properly detect all insufficiently covered predicates. Here is an  
interesting case for you.

parser grammar U;
a : (A B)? ;
b : X a {p1}? A B | Y a {a1} {p2}? A B | Z a ;

To create the prediction DFA for the optional sub rule in 'a', ANTLR  
must find all references to 'a' to determine what can follow. A B can  
follow 'a' in the first two alts rule 'b'.   To resolve the conflict  
between matching A B immediately in the sub rule and exiting rule 'a'  
to match it in 'b', ANTLR looks for predicates. In this case, there  
are two predicates that indicate the semantic context in which the  
surrounding alternatives are valid. The problem is that one of the  
predicates is hidden by an action. It took me 1.5 days, but I've  
finally have gotten ANTLR to properly track the insufficiently covered  
alternatives. Further, I have gotten it to tell you precisely where  
the uncovered predicates are even if they are simply hidden by  
actions. I have also updated all of the nondeterminism warnings so  
that it tells you if there was a predicate but one hidden by an action  
(this could be a separate condition from insufficiently covered  
predicates). here are your messages from ANTLR:

ANTLR Parser Generator  Version 3.1b1 (??)  1989-2007
warning(203): U.g:2:5: Input such as "A B" is insufficiently covered  
with predicates at locations: alt 2: line 3:38 at B
Semantic predicates were present but were hidden by actions.
warning(200): U.g:2:5: Decision can match input such as "A B" using  
multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
Semantic predicates were present but were hidden by actions.

Whew... added a bunch of unit tests and now can get back to the few  
bugs remaining (yes, people reminded me of some important bugs to  
fix). first, I have to teach my last class of the semester for the  
grad programming languages class.

Ter
PS	I am definitely not looking for predicates after actions.  
prediction must occur before any action with side effects which  
includes arbitrary user actions as well as tokens. Hoisting depth must  
be zero.


From antlr at mirality.co.nz  Wed May  7 14:04:11 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 08 May 2008 09:04:11 +1200
Subject: [antlr-interest] White spaces within token definition
In-Reply-To: <!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAAB
	wBgAQAAAAxGA7kK95vUO XK3oe6XUP0QEAAAAA@temporal-wave.com>
References: <aa71f710805070030n7ebc2af7va42bd1ee74aa3565@mail.gmail.com>
	<!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAABwBgAQAAAAxGA7kK95vUO
	XK3oe6XUP0QEAAAAA@temporal-wave.com>
Message-ID: <20080507210421.B3D1811EB9F@www.antlr.org>

At 03:05 8/05/2008, Jim Idle wrote:
>fragment COMMAND
>: 'COMMAND';
>
>COMMAND_EXIT
>: COMMAND
>     (
>          (' EXIT')=> ' EXIT'
>        | { $type = COMMAND; }
>     )
>;
>ID : ('A'..'Z'|'a'..'z')+;
>WS: (' '|'\t')+ {$channel=HIDDEN;};
>
>This will produce COMMAND ID when  the next sequence is not ' 
>EXIT';

The OP asked for this to produce ID ID, though, which is what the 
snippet I provided should do :)


From jimi at temporal-wave.com  Wed May  7 14:24:34 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 07 May 2008 14:24:34 -0700
Subject: [antlr-interest] White spaces within token definition
In-Reply-To: <20080507210129.49B8910FC43A@msf1.dnsmadeeasy.com>
Message-ID: <!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAABwBgAQAAAAS33lg+5yGEi
	NTc2ovg75UwEAAAAA@temporal-wave.com>

No, I think he said he wanted COMMAND ID didn't he? Anyway, he seems to be on track now :-)

Jim

> -----Original Message-----
> From: Gavin Lambert [mailto:antlr at mirality.co.nz]
> Sent: Wednesday, May 07, 2008 2:04 PM
> To: Jim Idle; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] White spaces within token definition
> 
> At 03:05 8/05/2008, Jim Idle wrote:
> >fragment COMMAND
> >: 'COMMAND';
> >
> >COMMAND_EXIT
> >: COMMAND
> >     (
> >          (' EXIT')=> ' EXIT'
> >        | { $type = COMMAND; }
> >     )
> >;
> >ID : ('A'..'Z'|'a'..'z')+;
> >WS: (' '|'\t')+ {$channel=HIDDEN;};
> >
> >This will produce COMMAND ID when  the next sequence is not '
> >EXIT';
> 
> The OP asked for this to produce ID ID, though, which is what the
> snippet I provided should do :)





From robin at pozytron.com  Wed May  7 19:10:15 2008
From: robin at pozytron.com (Robin Hamilton-Pennell)
Date: Wed, 7 May 2008 20:10:15 -0600
Subject: [antlr-interest] Why don't parsers support character ranges?
In-Reply-To: <9bfd4b3c0805071901j64c7c7f5i66cb0451222e7dc@mail.gmail.com>
References: <9bfd4b3c0805071901j64c7c7f5i66cb0451222e7dc@mail.gmail.com>
Message-ID: <9bfd4b3c0805071910qe3cab0dhc8b7cfcc8c9d0174@mail.gmail.com>

Jim,

> You wrote:
> 4) Don't invent languages that are indent sensitive and don't use terminals to surround blocks [that's isn;t a real rule ;-)]

Just out of curiosity: if one's invented language isn't
indent-sensitive, and one doesn't use terminals to surround blocks,
how does one delineate blocks?

I know you intended this as a joke (and I agree completely on
indentation-sensitivity), but I'm just confused... please enlighten
me!

Thanks,
Robin

From antlr at mirality.co.nz  Thu May  8 01:14:22 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 08 May 2008 20:14:22 +1200
Subject: [antlr-interest] White spaces within token definition
In-Reply-To: <!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAAB
	wBgAQAAAAS33lg+5yGEi NTc2ovg75UwEAAAAA@temporal-wave.com>
References: <20080507210129.49B8910FC43A@msf1.dnsmadeeasy.com>
	<!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAABwBgAQAAAAS33lg+5yGEi
	NTc2ovg75UwEAAAAA@temporal-wave.com>
Message-ID: <20080508081433.8D45611EBDF@www.antlr.org>

At 09:24 8/05/2008, Jim Idle wrote:
 >No, I think he said he wanted COMMAND ID didn't he?

Well:
On 4/25/08, Haralambi Haralambiev <hharalambiev at gmail.com> wrote:
 > However, I would like "COMMAND <something else>" to be
 > matched as the sequence of two ID tokens.
...

 >Anyway, he seems to be on track now :-)

Maybe.  But it was a different name and address responding 
afterwards.  So who knows if it was the same person or not :)

Anyway, fairly unimportant.  I'm just in one of those "quibbling 
moods" ;)


From fyaoxy at gmail.com  Thu May  8 01:26:24 2008
From: fyaoxy at gmail.com (=?GB2312?B?z/LRxQ==?=)
Date: Thu, 8 May 2008 16:26:24 +0800
Subject: [antlr-interest] White spaces within token definition
In-Reply-To: <20080508081433.8D45611EBDF@www.antlr.org>
References: <20080507210129.49B8910FC43A@msf1.dnsmadeeasy.com>
	<20080508081433.8D45611EBDF@www.antlr.org>
Message-ID: <91dd9a4f0805080126j4cca98c5mcbcd2e1b32222e35@mail.gmail.com>

Hi,
comments follows

>Anyway, he seems to be on track now :-)

>>Maybe.  But it was a different name and address responding afterwards.  So
who knows if it was the same person or not :)

>>Anyway, fairly unimportant.  I'm just in one of those "quibbling moods" ;)
Given, You make me laugh with happy:)
I first response him but not "response all" at the 3rd mail session.:)
Look, there are so many ways to handle multiple words with whitespaces.

Maybe we can do a comparasion and pick out one way for all.

Any thoughts?

Regards,
Qinxian

2008/5/7 ?? <fyaoxy at gmail.com>:

> Hi,
>
> In my ON project <http://on.dev.java.net/>, I use the style,
> Multiple-Words as a token.
> the grammar look like follows:
>
> string    :    (WORD+|QSTRING)->^(STRING[$text]);
>
> WORD        :    (~(' ' | '\t' | ',' | ':' | ';' | '{' | '}' | '\r' | '\n'
> | '"' | '\''))+;
>
> QSTRING
> @after{
>     setText(getText().substring(1, getText().length()-1));
> }
>     :    ('"' (~('"'))* '"')    |    ('\'' (~('\''))* '\'');
>
>
> Regards,
> Qinxian
>
> 2008/5/7 Haralambi Haralambiev <hharalambiev at gmail.com>:
>
> > Hello,
> >
> > Is this question too newbie, or is there noone that could answer it?
> >
> > Could someone please give me some insight on the problem, as I
> > do want to understand the cause and not work around the issue.
> >
> > Thanks,
> > Hari
> >
> > On 4/25/08, Haralambi Haralambiev <hharalambiev at gmail.com> wrote:
> > >
> > > Hello,
> > >
> > > I have stumbled upon a problem, that although has some workarounds,
> > > has puzzled me over why it is happening.
> > > (I searched for a similar question, but was unable to find it. I am
> > > sorry if this has been answered somewhere else. If so, please provide me the
> > > link.)
> > >
> > > Consider the following lexer grammar:
> > > ---------------------------------------------------
> > > lexer grammar test;
> > >
> > > CMD_EXIT : 'COMMAND EXIT';
> > > ID : ('A'..'Z'|'a'..'z')+;
> > > WhiteSpaces : (' '|'\t')+ {$channel=HIDDEN;};
> > > ---------------------------------------------------
> > >
> > > Consider that the language that is recognized has many commands with
> > > the syntax "COMMAND <name of the command>", but I am interested only in the
> > > exit command, so I consider "COMMAND EXIT" as a token.
> > > However, I would like
> > > "COMMAND <something else>" to be matched as the sequence of two ID tokens.
> > >
> > > With the grammar above, the "COMMAND EXIT" is successfully matched as a CMD_EXIT token, however "COMMAND XYZ" produces an error "line
> > > 1:8 mismatched character 'X' expecting
> > > 'E'" and what is left (only the character Z) is matched as ID.
> > >
> > > In the generated lexer class, in the mTokes() method I noticed that the lexer will consider everything that starts with "COMMAND " as the CMD_EXIT
> > > token.
> > > It just doesn't consider the characters in the token definition, that were after the white space (i.e. 'E', 'X', 'I' and 'T') during the recognition.
> > >
> > > So, if you could enlighten me on why is this happening, I will be very
> > > grateful!
> > >
> > > Best Regards,
> > > Hari
> > >
> >
> >
>
>
> --
> ??
> ??




-- 
??
??

-- 
??
??
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080508/fd99c8b4/attachment-0001.html 

From markwright at internode.on.net  Thu May  8 05:14:46 2008
From: markwright at internode.on.net (Mark Wright)
Date: Thu, 8 May 2008 22:14:46 +1000
Subject: [antlr-interest] should sempred questions be asked on trailing
 optional tokens?
In-Reply-To: <20080507013339.00000af9@goanna>
References: <20080507013339.00000af9@goanna>
Message-ID: <20080508221446.00001d45@goanna>

My question is answered by antlr-2008-05-07.18, which now detects
ambiguities in my grammar that were not detected in earlier
pre-releases:

java -Xmx512m -classpath /h/goanna/2/eng/dev/tntdbo/java_src:/h/goanna/2/eng/dev/tntdbo:/h/goanna/2/ts/antlr/antlr-2008-05-07.18/lib/antlr-2008-05-07.18.jar:/h/goanna/2/ts/antlr/antlr-2008-05-07.18/lib/runtime-2008-05-07.18.jar:/h/goanna/2/ts/antlr/antlr-2008-05-07.18/lib/stringtemplate-3.1b1.jar:/h/goanna/2/ts/antlr/antlr-2008-05-07.18/lib/antlr-2.7.7.jar org.antlr.Tool -Xconversiontimeout 1200000 -report Tntdbo.g
ANTLR Parser Generator  Version 3.1b1 (??)  1989-2007
warning(203): Tntdbo.g:903:32: Input such as "INT" is insufficiently covered with predicates at locations: alt 2: line 909:20 at 'int'
Semantic predicates were present but were hidden by actions.
warning(200): Tntdbo.g:903:32: Decision can match input such as "INT" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
Semantic predicates were present but were hidden by actions.

So after fixing these, by splitting the alternatives to eliminate
the trailing optional tokens on this particular rule like (this is
only a fragment of the rule, the grammar is large):

simple_type_specifier
        :   {sa.isUnsigned((TokenStream)input)}?
                'unsigned'
        |   {sa.isUnsignedInt((TokenStream)input)}?
                'unsigned' 'int'
        |   {sa.isSigned((TokenStream)input)}?
                'signed'
        |   {sa.isSignedInt((TokenStream)input)}?
                'signed' 'int'
        |   {sa.isInt((TokenStream)input)}?
                'int'
        ;

Then it works great.

Of course in most situations trailing optional tokens are fine,
and antlr-2008-05-07.18 lets you know with the new error messages
if there are ambiguities.  

Thanks, Mark

-- 

From antlr at mirality.co.nz  Thu May  8 06:43:14 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 09 May 2008 01:43:14 +1200
Subject: [antlr-interest] should sempred questions be asked on trailing
 optional tokens?
In-Reply-To: <20080508221446.00001d45@goanna>
References: <20080507013339.00000af9@goanna> <20080508221446.00001d45@goanna>
Message-ID: <20080508134507.5357311EBDF@www.antlr.org>

At 00:14 9/05/2008, Mark Wright wrote:
 >simple_type_specifier
 >        :   {sa.isUnsigned((TokenStream)input)}?
 >                'unsigned'
 >        |   {sa.isUnsignedInt((TokenStream)input)}?
 >                'unsigned' 'int'
 >        |   {sa.isSigned((TokenStream)input)}?
 >                'signed'
 >        |   {sa.isSignedInt((TokenStream)input)}?
 >                'signed' 'int'
 >        |   {sa.isInt((TokenStream)input)}?
 >                'int'
 >        ;

Just out of curiosity, what are these sempred functions actually 
examining?  Is it just the one-or-two token lookahead sufficient 
to disambiguate these alts, or are you looking even further ahead 
or doing something more esoteric?

Because if it's just those, then I'd use a synpred instead -- I 
think it's cleaner:

simple_type_specifier
   : ('unsigned' 'int') => 'unsigned' 'int'
   | ('unsigned') => 'unsigned'
   | ('signed' 'int') => 'signed' 'int'
   | ('signed') => 'signed'
   | 'int'
   ;

Or even:

simple_type_specifier
   : (('unsigned') => 'unsigned') 'int'?
   | (('signed') => 'signed') 'int'?
   | 'int'
   ;

Although normally you shouldn't even need to use any predicates 
here at all; just order the alts correctly.  I know you said they 
were required for some reason in your larger grammar, but the only 
explanation for that I can imagine at the moment is if 'int' were 
a valid variable name (which seems like a silly thing to 
allow).  Maybe there's another case I haven't thought of?


From markwright at internode.on.net  Thu May  8 09:39:19 2008
From: markwright at internode.on.net (Mark Wright)
Date: Fri, 9 May 2008 02:39:19 +1000
Subject: [antlr-interest] should sempred questions be asked on trailing
 optional tokens?
In-Reply-To: <1210254312_85706@mail.internode.on.net>
References: <20080507013339.00000af9@goanna> <20080508221446.00001d45@goanna>
	<1210254312_85706@mail.internode.on.net>
Message-ID: <20080509023919.000061cc@goanna>

>  >simple_type_specifier
>  >        :   {sa.isUnsigned((TokenStream)input)}?
>  >                'unsigned'
>  >        |   {sa.isUnsignedInt((TokenStream)input)}?
>  >                'unsigned' 'int'
>  >        |   {sa.isSigned((TokenStream)input)}?
>  >                'signed'
>  >        |   {sa.isSignedInt((TokenStream)input)}?
>  >                'signed' 'int'
>  >        |   {sa.isInt((TokenStream)input)}?
>  >                'int'
>  >        ;  
> 
> On Fri, 09 May 2008 01:43:14 +1200
> Gavin Lambert <antlr at mirality.co.nz> wrote:
>
> Just out of curiosity, what are these sempred functions actually 
> examining?

Hello Gavin,

They just simply look at the tokens with a hand coded
finite state machine.  Which is like a hand coded version
of the code that ANTLR normally produces with simpler
grammars.

If the rest of the grammar was simpler, then ANTLR would
have no problems generating a DFA for this entire rule, which
is larger than the fragment above.

> Is it just the one-or-two token lookahead sufficient 
> to disambiguate these alts,

Yes, but it is the rest of the grammar surrounding it
with ambiguities that require lots of dis-ambiguating
semantic predicates to resolve, that causes ANTLR to go
back to k=1 lookahead on this rule, requiring dis-ambiguating
semantic predicates on this rule.

I think ANTLR is awesome that it can handle my grammar.
Its no bother for me to write the simple dis-ambiguating
semantic predicates that are required on this rule.

> or are you looking even further ahead 
> or doing something more esoteric?

No, not on this rule.

There are other rules that scan further ahead, including
scanning past stuff in this rule.
 
> Because if it's just those, then I'd use a synpred instead -- I 
> think it's cleaner:
> 
> simple_type_specifier
>    : ('unsigned' 'int') => 'unsigned' 'int'
>    | ('unsigned') => 'unsigned'
>    | ('signed' 'int') => 'signed' 'int'
>    | ('signed') => 'signed'
>    | 'int'
>    ;
> 
> Or even:
> 
> simple_type_specifier
>    : (('unsigned') => 'unsigned') 'int'?
>    | (('signed') => 'signed') 'int'?
>    | 'int'
>    ;

Sure if synpreds are cleaner in your grammar, and they probably are
cleaner in lots of grammars, then it sounds like a great idea to use
synpreds.  Using synpreds is probably more appealing in lots of
grammars than hand coding thousands of lines of dis-ambiguating
semantic predicates using little recursive descent compilers,
however for my grammar the latter seemed more appealing to me.

There are reasons I am not using synpreds:

* I need to look up stuff in symbol tables do resolve ambiguities,
hence dis-ambiguating semantic predicates are necessary.

* I would have needed to use nested backtracking (nested synpreds).
At the time I was concerned that nested backtracking may be difficult
to understand and debug.

* I think for my grammar that using dis-ambiguating sempreds results
in it looking cleaner than it would with a combination of
dis-ambiguating sempreds and synpreds.

* I was concerned that I would find it difficult to understand and
debug the ANTLR generated parser code using synpreds.  When I pass
-debug to ANTLR, it encounters an error.  The netbeans debugger can
not open my 2.7MB generated parser Java file.  I thought it would be
easier to debug code that I wrote than to debug ANTLR generated
parser code.

* I think it is easier for me to understand, develop and debug it
where I just use dis-ambiguating semantic predicates for everything.

* The dis-ambiguating semantic predicates are in a functional decomposition
that matches the grammar rule, and they call each other.  So while I
was developing this, my logic was: why introduce a synpred when I can
just continue writing more dis-ambiguating semantic predicates, including
little recursive descent compilers.  After writing thousands of lines of
dis-ambiguating sempreds, I did not need any synpreds.

Earlier when I writing lots of sempreds, and avoiding synpreds,
I was concerned that nested synpreds may be slow.  However I
do not know if they would be any slower than what I am doing.
There is no way I am going to write it again using synpreds
to find out.

> Although normally you shouldn't even need to use any predicates 
> here at all; just order the alts correctly.

Thanks, I tried commenting the sempreds and re-ordering the alts
starting with the longest ones first, however this gave the
same number of unmatched alts as the original ad hoc order with
the sempreds commented.

> I know you said they 
> were required for some reason in your larger grammar, but the only 
> explanation for that I can imagine at the moment is if 'int' were 
> a valid variable name (which seems like a silly thing to 
> allow).  Maybe there's another case I haven't thought of?

If I just comment the one isInt() sempred, ANTLR
still compiles it OK, so it does not need that one.

If I comment the others though, then ANTLR tells me it is ambiguous, with
errors like:

java -Xmx512m -classpath /h/goanna/2/eng/dev/tntdbo/java_src:/h/goanna/2/eng/dev/tntdbo:/h/goanna/2/ts/antlr/antlr-2008-05-07.18/lib/antlr-2008-05-07.18.jar:/h/goanna/2/ts/antlr/antlr-2008-05-07.18/lib/runtime-2008-05-07.18.jar:/h/goanna/2/ts/antlr/antlr-2008-05-07.18/lib/stringtemplate-3.1b1.jar:/h/goanna/2/ts/antlr/antlr-2008-05-07.18/lib/antlr-2.7.7.jar org.antlr.Tool -Xconversiontimeout 1200000 -report Tntdbo.g
ANTLR Parser Generator  Version 3.1b1 (??)  1989-2007
warning(200): Tntdbo.g:866:9: Decision can match input such as "UNSIGNED" using multiple alternatives: 4, 9, 10, 14, 15, 16, 17, 18, 19
As a result, alternative(s) 9,10,14,15,16,17,18,19 were disabled for that input
Semantic predicates were present but were hidden by actions.
error(201): Tntdbo.g:866:9: The following alternatives can never be matched: 9,10,14,15,16,17,18,19

So of course I put the sempreds back in and its fine.

Thanks, Mark

From markwright at internode.on.net  Thu May  8 09:49:53 2008
From: markwright at internode.on.net (Mark Wright)
Date: Fri, 9 May 2008 02:49:53 +1000
Subject: [antlr-interest] wow. marathon debug session
In-Reply-To: <2C676197-38B4-445F-91B4-5A1AA882D14F@cs.usfca.edu>
References: <2C676197-38B4-445F-91B4-5A1AA882D14F@cs.usfca.edu>
Message-ID: <20080509024953.00006f5f@goanna>

Hello Ter,

This is fantastic that you added these extra checks
to detect the insufficiently covered predicates.
The latest pre-release is awesome, it seems to handle
everything I throw at it.  Well, apart from -debug,
but who needs that :-).

Its great, thanks a lot.

Regards, Mark

-- 

From kaleb.pederson at gmail.com  Thu May  8 11:48:42 2008
From: kaleb.pederson at gmail.com (Kaleb Pederson)
Date: Thu, 8 May 2008 11:48:42 -0700
Subject: [antlr-interest] Both hidden and required whitespace
Message-ID: <f14c01620805081148l7bd42a02p770e99585c13ea17@mail.gmail.com>

I must have impeccable timing giving the recent conversation, but
assuming I can't avoid having some whitespace requirements, how's do I
best handle requiring whitespace at certain locations, but not at
others?

Here's my attempt and testcase:

expr: 'one' 'two' COLON (INDENT 'numbers')*;
COLON: ':';
fragment INDENT:	'\n' (' '|'\t')*;
WS: (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;};

And my input:

one two :
    numbers
    numbers

When I interpret the above, I get the following:

% java org.antlr.tool.Interp Test.g 'WS' expr test_input.txt
(<grammar Test> (expr one two : NoViableAltException(9!=[()* loopback
of 19:25: ( INDENT 'numbers' )*])))

where Token 9 is 'numbers'.  I presume that WS is consuming the INDENT
and thus I'm not seeing it in the stream.  I know I read somewhere
that I could get access to the hidden tokens in the actions, but I'd
like to be able to express the required whitespace at that location in
the grammar.

Suggestions?

Thanks.

--Kaleb

From antlr at mirality.co.nz  Thu May  8 13:58:38 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 09 May 2008 08:58:38 +1200
Subject: [antlr-interest] Both hidden and required whitespace
In-Reply-To: <f14c01620805081148l7bd42a02p770e99585c13ea17@mail.gmail.co
 m>
References: <f14c01620805081148l7bd42a02p770e99585c13ea17@mail.gmail.com>
Message-ID: <20080508205855.BEF5F11EB45@www.antlr.org>

At 06:48 9/05/2008, Kaleb Pederson wrote:
 >expr: 'one' 'two' COLON (INDENT 'numbers')*;
 >COLON: ':';
 >fragment INDENT:	'\n' (' '|'\t')*;
 >WS: (' '|'\r'|'\t'|'\u000C'|'\n') {$channel=HIDDEN;};
[...]
 >where Token 9 is 'numbers'.  I presume that WS is consuming the
 >INDENT and thus I'm not seeing it in the stream.

It's more serious than that -- your grammar cannot possibly 
produce INDENT tokens, since it's a fragment rule.  So for 
starters, remove the 'fragment' from the INDENT rule.

This will work in most cases, but not all; for example, because it 
requires a leading newline it won't work on the first line of the 
file, and it also won't work if there is trailing whitespace on 
the line before the newline (since it will already be in the WS 
rule at that point, and it will continue matching).  It also won't 
work if you have Windows end-of-lines, for a similar reason.

Where you should go from here depends on how complicated your 
grammar is already.  I had a similar need to express indentation 
in a grammar I worked on recently, but in that case it was simple 
enough (and had enough weird edge cases) that unhiding the WS rule 
and splitting it into separated WS and NL rules made the most 
sense.  Obviously this requires modifying all the parser rules to 
explicitly indicate where whitespace and newlines are permitted.

I believe someone has written a python grammar for ANTLR; that's 
an indent-sensitive language, so it might be useful looking at how 
it's handled there.


From kaleb.pederson at gmail.com  Thu May  8 14:26:33 2008
From: kaleb.pederson at gmail.com (Kaleb Pederson)
Date: Thu, 8 May 2008 14:26:33 -0700
Subject: [antlr-interest] Both hidden and required whitespace
In-Reply-To: <4823698f.0fba720a.34bd.7797SMTPIN_ADDED@mx.google.com>
References: <f14c01620805081148l7bd42a02p770e99585c13ea17@mail.gmail.com>
	<4823698f.0fba720a.34bd.7797SMTPIN_ADDED@mx.google.com>
Message-ID: <f14c01620805081426n4d95de7dw4b527d39254cd6@mail.gmail.com>

On Thu, May 8, 2008 at 1:58 PM, Gavin Lambert <antlr at mirality.co.nz> wrote:
>  >where Token 9 is 'numbers'.  I presume that WS is consuming the
>  >INDENT and thus I'm not seeing it in the stream.
>
>  It's more serious than that -- your grammar cannot possibly produce INDENT
> tokens, since it's a fragment rule.  So for starters, remove the 'fragment'
> from the INDENT rule.

That makes perfect sense, thanks for clarifying Gavin.

>  This will work in most cases, but not all; for example, because it requires
> a leading newline it won't work on the first line of the file, and it also
> won't work if there is trailing whitespace on the line before the newline

Understood.

> (since it will already be in the WS rule at that point, and it will continue
> matching).  It also won't work if you have Windows end-of-lines, for a
> similar reason.

I'm using the standard "common token" definition of WS as it is on the
wiki, so each WS token is a single character.  My main question is,
therefore, how ANTLR would decide which token to generate (assuming I
make INDENT a token) once I hit strings or characters that fit into
the intersection of the strings generated by  WS and INDENT.  With
yacc, the longer token that matches the longer string would be
generated token, eg. INDENT, but I'm too much of an ANTLR newbie to
know exactly how ANTLR handles it. Readme's / URLs accepted ;).

>  Where you should go from here depends on how complicated your grammar is
> already.  I had a similar need to express indentation in a grammar I worked
> on recently, but in that case it was simple enough (and had enough weird
> edge cases) that unhiding the WS rule and splitting it into separated WS and
> NL rules made the most sense.  Obviously this requires modifying all the
> parser rules to explicitly indicate where whitespace and newlines are
> permitted.

Yeah, my grammar is simple enough that the above is possible and long
enough that it would be cumbersome.  I find it's much more readable
relying on the hidden token stream.

>  I believe someone has written a python grammar for ANTLR; that's an
> indent-sensitive language, so it might be useful looking at how it's handled
> there.

Good idea! I believe Terence wrote it and I'll check to see if it's
been ported to v3.

Thank you.

--Kaleb

From jesse.anderson at 4bright.com  Thu May  8 15:56:02 2008
From: jesse.anderson at 4bright.com (Jesse Anderson)
Date: Thu, 08 May 2008 15:56:02 -0700
Subject: [antlr-interest] Exiting the Recognizer in C
Message-ID: <48238502.8060209@4bright.com>

I have an ANTLR grammar written for C.  I want it to exit whenever an 
error is found.  I have found examples of this for Java.  You override 
mismatch and recoverFromMismatchedSet.  How do you do this for C?

Thanks.

From jimi at temporal-wave.com  Thu May  8 17:25:10 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 08 May 2008 17:25:10 -0700
Subject: [antlr-interest] Exiting the Recognizer in C
In-Reply-To: <48238502.8060209@4bright.com>
Message-ID: <!&!AAAAAAAAAAAgAAAAAAAAABjTxn8agx9HoAwEBZw3asQAAAAAspsWAABwBgAQAAAA6MgbDxSLqk+
	IiYFxW4R9ggEAAAAA@temporal-wave.com>

You do the same thing. Search for C and displayRecognitionError, you will find:

http://www.antlr.org/pipermail/antlr-interest/2007-December/025359.html

Jim


> -----Original Message-----
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-
> bounces at antlr.org] On Behalf Of Jesse Anderson
> Sent: Thursday, May 08, 2008 3:56 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] Exiting the Recognizer in C
> 
> I have an ANTLR grammar written for C.  I want it to exit whenever an
> error is found.  I have found examples of this for Java.  You override
> mismatch and recoverFromMismatchedSet.  How do you do this for C?
> 
> Thanks.




From peter_maciver at hotmail.com  Fri May  9 00:47:43 2008
From: peter_maciver at hotmail.com (Peter Maciver)
Date: Fri, 9 May 2008 08:47:43 +0100
Subject: [antlr-interest]  most efficient grammar pasing
Message-ID: <BAY101-W2590AF330638EC427860D081D30@phx.gbl>


hi there,
 
I am currently tasked with investigating the use of ANTLR to parse Sybase SQL.
Can you give an indication as to any of the following:a) Is the T-SQL grammar publicly availableb) How suitable would it be for Sybase SQL syntax
 
Any assistance would be greatly appreciated
 
regards
peter maciver
_________________________________________________________________

Discover and Win with Live Search

http://clk.atdmt.com/UKM/go/msnnkmgl0010000007ukm/direct/01/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080509/c589d4b3/attachment.html 

From peter_maciver at hotmail.com  Fri May  9 00:48:40 2008
From: peter_maciver at hotmail.com (Peter Maciver)
Date: Fri, 9 May 2008 08:48:40 +0100
Subject: [antlr-interest] TSQL Grammar
Message-ID: <BAY101-W16872F8462088E84DDF3FA81D30@phx.gbl>


hi there,
 
I am currently tasked with investigating the use of ANTLR to parse Sybase SQL
Can you give an indication as to any of the following:a) when will you have this readyb) will it be suitable for most  of the current Sybase SQL syntaxc) indication to the approximate pricing charge and structure
 
Any assistance would be greatly appreciated
 
regards
 
peter maciver
_________________________________________________________________
Win Indiana Jones prizes with Live Search
http://clk.atdmt.com/UKM/go/msnnkmgl0010000002ukm/direct/01/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080509/f7927586/attachment.html 

From scott.royston at gmail.com  Fri May  9 11:00:22 2008
From: scott.royston at gmail.com (Scott Royston)
Date: Fri, 9 May 2008 13:00:22 -0500
Subject: [antlr-interest] Most efficient way to handle character escapes?
Message-ID: <f2d857e0805091100q6348c531wd26c81e76a76870a@mail.gmail.com>

I'm trying to write a set of grammar actions to convert String literals with
character escapes to the final string value,  e.g.:'/47Hello World/47'
should conver to the value 'Hello World' (because /47 is the octal escape
value for ').

My initial try was something like this:
fragment EscapeSequence
:  OctalEscapeSequence {
setText(Character.toString(Character.forDigit(Integer.parseInt(getText()),
8))); }
;

Which doesn't work, I believe because it's a fragment, and setText(...) is a
token construct.

The only obvious way I see to do it is to convert the fragments to tokens
and build up the string, which seems really slow.

I've searched around but can't find any grammars with example actions
handling this.

Am I missing something obvious?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080509/92fc9a53/attachment.html 

From erasuru at gmail.com  Sat May 10 01:24:35 2008
From: erasuru at gmail.com (erandi lakshika)
Date: Sat, 10 May 2008 01:24:35 -0700
Subject: [antlr-interest] Modifying AST
Message-ID: <fd78362a0805100124g6327c89dn908520cbc41391b@mail.gmail.com>

I am dealing with a AST of a language and I want to insert multiple
sub-trees of an AST into my original AST at multiple nodes. For that I want
to make copies of the subtree. How can I do this?

-- 
Regards
-Erandi-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080510/a7a01fc1/attachment.html 

From antlr at deloreyfamily.org  Sat May 10 09:36:50 2008
From: antlr at deloreyfamily.org (Dan Delorey)
Date: Sat, 10 May 2008 10:36:50 -0600
Subject: [antlr-interest] Modifying AST
In-Reply-To: <fd78362a0805100124g6327c89dn908520cbc41391b@mail.gmail.com>
References: <fd78362a0805100124g6327c89dn908520cbc41391b@mail.gmail.com>
Message-ID: <90d6c0620805100936l6f3ba84ai7549a28405c4b6da@mail.gmail.com>

I don't know if this is the preferred method, but I've used
adaptor.dupTree()<http://www.antlr.org/api/Java/interfaceorg_1_1antlr_1_1runtime_1_1tree_1_1_tree_adaptor.html#ae053199c6552b68362d3a8b8d964d22>and
adaptor.becomeRoot()<http://www.antlr.org/api/Java/interfaceorg_1_1antlr_1_1runtime_1_1tree_1_1_tree_adaptor.html#2caa60c49f05e8fb8d7541755b086ce5>to
accomplish that.

On Sat, May 10, 2008 at 2:24 AM, erandi lakshika <erasuru at gmail.com> wrote:

> I am dealing with a AST of a language and I want to insert multiple
> sub-trees of an AST into my original AST at multiple nodes. For that I want
> to make copies of the subtree. How can I do this?
>
> --
> Regards
> -Erandi-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080510/8b2b2664/attachment.html 

From andmej at gmail.com  Sat May 10 15:15:09 2008
From: andmej at gmail.com (=?ISO-8859-1?Q?Andr=E9s_Mej=EDa?=)
Date: Sat, 10 May 2008 17:15:09 -0500
Subject: [antlr-interest] Add Import to parser.java?
Message-ID: <45f830cc0805101515tae3bfe6v58b64ce18cd04dec@mail.gmail.com>

Hello, I'm trying to do a simple action on my parser using embedded Java in
my grammar.

I want to display the date when the parser is being run, and I need to
import some Java classes.

How can I tell AntLR to add some import lines at the beginning of the
myParser.java file?

I need to add:

    import java.util.Date;
    import java.text.DateFormat;
    import java.text.SimpleDateFormat;

Else, I won't be able to compile my grammar.

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080510/faf5fd43/attachment.html 

From antlr at mirality.co.nz  Sat May 10 17:29:49 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 11 May 2008 12:29:49 +1200
Subject: [antlr-interest] Most efficient way to handle character escapes?
In-Reply-To: <f2d857e0805091100q6348c531wd26c81e76a76870a@mail.gmail.com
 >
References: <f2d857e0805091100q6348c531wd26c81e76a76870a@mail.gmail.com>
Message-ID: <20080511002959.899A911EAB0@www.antlr.org>

At 06:00 10/05/2008, Scott Royston wrote:
>I'm trying to write a set of grammar actions to convert String 
>literals with character escapes to the final string value,  e.g.:
>'/47Hello World/47' should conver to the value 'Hello World' 
>(because /47 is the octal escape value for ').

Sure those shouldn't be backslashes?

>Which doesn't work, I believe because it's a fragment, and 
>setText(...) is a token construct.

That's right.  setText only works on the final token.

>The only obvious way I see to do it is to convert the fragments 
>to tokens and build up the string, which seems really slow.

Another approach is to deal with them outside of ANTLR.  You'll 
probably need to have ANTLR recognise escaped quotes (to avoid 
prematurely terminating the string), but for everything else you 
can just ignore them for the moment.  Later on, either when 
generating the final STRING token or even when it's later used, 
you can manually parse and replace the appropriate escapes.


From antlr-list at arizona-software.ch  Sun May 11 00:29:50 2008
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Sun, 11 May 2008 00:29:50 -0700
Subject: [antlr-interest] ANTLRWorks 1.2b2 available
Message-ID: <D6964709-6BE4-4620-98C6-51BE5E1B1876@arizona-software.ch>

Hello,

ANTLRWorks 1.2b2 is available for testing at the usual location (www.antlr.org/works) 
. The list of changes can be viewed in the roadmap (http://www.antlr.org:8888/browse/AW?report=com.atlassian.jira.plugin.system.project:roadmap-panel 
). The main changes concern the support for the composite grammar  
(syntax, debugger).

Regards,

Jean

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080511/67144e44/attachment.html 

From antlr-interest at antlr.org  Sun May 11 01:56:51 2008
From: antlr-interest at antlr.org (VIAGRA  Official Site)
Date: Sun, 11 May 2008 01:56:51 -0700 (PDT)
Subject: [antlr-interest] Dear antlr-interest@antlr.org May 80% 0FF
Message-ID: <20080511155508.80513.qmail@starik>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080511/dc0511de/attachment.html 

From hharalambiev at gmail.com  Sun May 11 03:17:37 2008
From: hharalambiev at gmail.com (Haralambi Haralambiev)
Date: Sun, 11 May 2008 13:17:37 +0300
Subject: [antlr-interest] Add Import to parser.java?
In-Reply-To: <45f830cc0805101515tae3bfe6v58b64ce18cd04dec@mail.gmail.com>
References: <45f830cc0805101515tae3bfe6v58b64ce18cd04dec@mail.gmail.com>
Message-ID: <aa71f710805110317r4b1fa26apa57dcd1e1182aa96@mail.gmail.com>

Add the following to your grammar:

@header
{
import java.util.Date;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
}

If you want to add the import statements to the Lexer also, you should use
the @lexer::header.

-Hari

On 5/11/08, Andr?s Mej?a <andmej at gmail.com> wrote:
>
> Hello, I'm trying to do a simple action on my parser using embedded Java
> in my grammar.
>
> I want to display the date when the parser is being run, and I need to
> import some Java classes.
>
> How can I tell AntLR to add some import lines at the beginning of the
> myParser.java file?
>
> I need to add:
>
>     import java.util.Date;
>     import java.text.DateFormat;
>     import java.text.SimpleDateFormat;
>
> Else, I won't be able to compile my grammar.
>
> Thanks.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080511/713f6bf5/attachment.html 

From erasuru at gmail.com  Sun May 11 21:01:39 2008
From: erasuru at gmail.com (erandi lakshika)
Date: Sun, 11 May 2008 21:01:39 -0700
Subject: [antlr-interest] Modifying AST
In-Reply-To: <90d6c0620805100936l6f3ba84ai7549a28405c4b6da@mail.gmail.com>
References: <fd78362a0805100124g6327c89dn908520cbc41391b@mail.gmail.com>
	<90d6c0620805100936l6f3ba84ai7549a28405c4b6da@mail.gmail.com>
Message-ID: <fd78362a0805112101j51901e5dw901c935a448ebd06@mail.gmail.com>

Thanks... I found another method which can be used to easily duplicate AST
objects. Here is the code snippet;
  *ASTFactory app = new ASTFactory();
  AST dupAttach  = app.dupTree(attach);
*
On Sat, May 10, 2008 at 9:36 AM, Dan Delorey <antlr at deloreyfamily.org>
wrote:

> I don't know if this is the preferred method, but I've used
> adaptor.dupTree()<http://www.antlr.org/api/Java/interfaceorg_1_1antlr_1_1runtime_1_1tree_1_1_tree_adaptor.html#ae053199c6552b68362d3a8b8d964d22>and
> adaptor.becomeRoot()<http://www.antlr.org/api/Java/interfaceorg_1_1antlr_1_1runtime_1_1tree_1_1_tree_adaptor.html#2caa60c49f05e8fb8d7541755b086ce5>to accomplish that.
>
>
> On Sat, May 10, 2008 at 2:24 AM, erandi lakshika <erasuru at gmail.com>
> wrote:
>
>> I am dealing with a AST of a language and I want to insert multiple
>> sub-trees of an AST into my original AST at multiple nodes. For that I want
>> to make copies of the subtree. How can I do this?
>>
>> --
>> Regards
>>  -Erandi-
>
>
>


-- 
Regards
-Erandi-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080511/3d84b54b/attachment.html 

From nilesh.kapile at tcs.com  Mon May 12 05:58:32 2008
From: nilesh.kapile at tcs.com (nilesh.kapile at tcs.com)
Date: Mon, 12 May 2008 18:28:32 +0530
Subject: [antlr-interest] Filter option
Message-ID: <OFD55BA34F.C28B93F0-ON65257447.0045B418-65257447.0047519B@tcs.com>

Hi,

I'm using Filter option to generate only Lexer. The problem is, I'm not 
able to get line number for the token.

How can I get the line number? Sample .g below:
--------------------------------------------------------------------------------------------------------------------------------------------------------------------

lexer grammar FuzzyQPP;

options {filter=true;}

BLOCK   : 
                BEG WS? ID WS? END
                {
                        int line = 0;
                        line = $BEG.line;        /* $BEG.text works but 
$BEG.line doesn't */
                        System.out.println(line);
                }
        ;

SL_COMMENT
: '//' .* '\n'
;

WS : (' ' |'\t' |'\r' |'\n' )+
;

BEG     :'{'
        ;

END     :'}'
        ; 

fragment
ID : ('a'..'z' |'A'..'Z' |'_' ) ('a'..'z' |'A'..'Z' |'_' |'0'..'9' )*
;

Any help will be highly appreciated! 


Thanks,
Nilesh Sudhakar Kapile
Tata Consultancy Services
Mailto: nilesh.kapile at tcs.com
Website: http://www.tcs.com
____________________________________________
Experience certainty.   IT Services
                        Business Solutions
                        Outsourcing
____________________________________________
=====-----=====-----=====
Notice: The information contained in this e-mail
message and/or attachments to it may contain 
confidential or privileged information. If you are 
not the intended recipient, any dissemination, use, 
review, distribution, printing or copying of the 
information contained in this e-mail message 
and/or attachments to it are strictly prohibited. If 
you have received this communication in error, 
please notify us by reply e-mail or telephone and 
immediately and permanently delete the message 
and any attachments. Thank you


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080512/8db85200/attachment.html 

From fyaoxy at gmail.com  Mon May 12 06:50:08 2008
From: fyaoxy at gmail.com (=?GB2312?B?z/LRxQ==?=)
Date: Mon, 12 May 2008 21:50:08 +0800
Subject: [antlr-interest] Filter option
In-Reply-To: <OFD55BA34F.C28B93F0-ON65257447.0045B418-65257447.0047519B@tcs.com>
References: <OFD55BA34F.C28B93F0-ON65257447.0045B418-65257447.0047519B@tcs.com>
Message-ID: <91dd9a4f0805120650h7c36a66bwf4136b77486050e1@mail.gmail.com>

Hi,

Token.getLine()

Pure Lexer has Token used?

Regards,
Qinxian

2008/5/12 <nilesh.kapile at tcs.com>:

>
> Hi,
>
> I'm using Filter option to generate only Lexer. The problem is, I'm not
> able to get line number for the token.
>
> How can I get the line number? Sample .g below:
>
> --------------------------------------------------------------------------------------------------------------------------------------------------------------------
>
> lexer grammar FuzzyQPP;
>
> options {filter=true;}
>
> BLOCK        :
>                 *BEG* WS? ID WS? END
>                 {
>                         int line = 0;
> *                        line = $BEG.line;        /* $BEG.text works but
> $BEG.line doesn't */*
>                         System.out.println(line);
>                 }
>         ;
>
> SL_COMMENT
> : '//' .* '\n'
> ;
>
> WS : (' ' |'\t' |'\r' |'\n' )+
> ;
>
> *BEG        :'{'*
> *        ;*
>
> END        :'}'
>         ;
>
> fragment
> ID : ('a'..'z' |'A'..'Z' |'_' ) ('a'..'z' |'A'..'Z' |'_' |'0'..'9' )*
> ;
>
> Any help will be highly appreciated!
>
>
> Thanks,
> Nilesh Sudhakar Kapile
> Tata Consultancy Services
> Mailto: nilesh.kapile at tcs.com
> Website: http://www.tcs.com
> ____________________________________________
> Experience certainty.        IT Services
>                        Business Solutions
>                        Outsourcing
> ____________________________________________
>
> =====-----=====-----=====
> Notice: The information contained in this e-mail
> message and/or attachments to it may contain
> confidential or privileged information. If you are
> not the intended recipient, any dissemination, use,
> review, distribution, printing or copying of the
> information contained in this e-mail message
> and/or attachments to it are strictly prohibited. If
> you have received this communication in error,
> please notify us by reply e-mail or telephone and
> immediately and permanently delete the message
> and any attachments. Thank you
>
>
>
>


-- 
??
??
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080512/14d1b859/attachment.html 

From isabelle.perseil at enst.fr  Mon May 12 12:46:38 2008
From: isabelle.perseil at enst.fr (Isabelle Perseil)
Date: Mon, 12 May 2008 21:46:38 +0200 (CEST)
Subject: [antlr-interest] =?iso-8859-1?q?_UML=26FM=922008_=3A_Call_for_Pap?=
	=?iso-8859-1?q?ers?=
Message-ID: <2931.82.236.227.177.1210621598.squirrel@webmail.telecom-paristech.fr>

**********************************************************************
                    CALL FOR PAPERS :  UML&FM?2008
           FIRST INTERNATIONAL WORKSHOP ON UML&FORMAL METHODS
          http://www.artist-embedded.org/artist/UML-FM-08.html

               Workshop held in conjunction with ICFEM 2008
                   The 10th International Conference on
                      Formal Engineering Methods
                        http://www.icfem2008.org/
                           October 27, 2008
                        Kitakyushu-City, Japan
************************************************************************

                     Submission deadline: July 01, 2008
                     --------------------------------------


Many interest groups from a research perspective are in favour of the
creation of this workshop.

For more than a decade now, the two communities of UML and formal methods
have been working together to produce a simultaneously practical (via UML)
and rigorous (via formal methods) approach to software engineering.

UML is the de facto standard for modelling various aspects of software
systems in both industry and academia, despite the inconvenience that its
current specification is complex and its syntax imprecise.

The fact that the UML semantics is too informal have led many researchers
to formalize it with all kinds of existing formal languages, like OCL, Z,
B, CSP, VDM, Petri Nets, UPPAAL, HOL, Coq, PVS etc.

This first workshop will be open to various subjects as the main objective
is to encourage new initiatives of building bridges between informal,
semi-formal and formal notations.


Topics:
======

This workshop seeks contributions from researchers and practitioners
interested in all aspects of integrating UML and formal methods. To this
end, we solicit papers (no more than 8 pages long) related to, but not
limited to, the following principal topics:

?        Consistent specifications, model transformations (QVT technologies,
         transformation repositories). Transformations to make models more
         analyzable so as to make them executable.

?        Automation of traceability through transformations

?        Refinement techniques: developing detailed design from a UML
         abstract specification

?        Refinement of OCL specification as well

?        Formal reasoning on models for code generation

?        Technologies for compositional verification of models

?        Specification of a formal semantics for the UML.
         Giving an abstract syntax to UML diagrams

?        Formal validation and verification of software

?        Co-modeling methods formal/informal mapping techniques

?        End-to-end methodologies or software process
         engineering,correct-by-construction design providing and
         supporting tools for safety-critical embedded systems design


Workshop Format
===============
This full-day workshop will consist of an introduction of the topic by the
workshop organizers, presentations of accepted papers, and in depth
discussion of previously identified subjects emerging from the
submissions. A summary of the discussions will be made available.


Submission and Publication
==========================
To contribute, please send a position paper or a technical paper

to agusti[dot]canals[at]c-s[dot]fr with ?ICFEM08 UML&FM Workshop? in the
title.

Papers should not exceed 8 pages. Submitted manuscripts should be in
English and formatted in the style of the ISSE Format. Preferably,
submissions should be in PDF format.
Please, follow the guidelines at the "For authors and editors" heading in
the ISSE website
(http://www.springer.com/computer/programming/journal/11334)

All selected papers will be published in the ISSE NASA journal
(Innovations in Systems and Software Engineering).

Slides will be made available through the workshop website.


IMPORTANT DATES
===============
Submission deadline:             July 01, 2008
All Notification of acceptance:  July 15, 2008
Final copy for proceedings:      July 25th, 2008
Workshop date :                  October 27, 2008


Organizers
==========

Organizational sponsors :

OMG        (http://www.omg.org/)
ARTIST   (http://www.artist-embedded.org/artist/)


Organizers and Programme Steering committee:

Jean-Michel Bruel (Liuppa, France)
Agusti Canals (CS, France)--- General Chair
S?bastien G?rard (CEA-LIST, France)
Isabelle Perseil (TELECOM ParisTech, France)


IEEE CS Coordinator:

Mike Hinchey (NASA GSFC and Loyola College in Maryland, USA)


Program Committee:

Nazareno Aguirre (Universidad Nacional de R?o Cuarto, Argentina)
Pascal Andr? (LINA, University of Nantes, France)
Yamine Ait Ameur (LISI / ENSMA, France)
Luciano Baresi (Politecnico di Milano, Italia)
Jean-Paul Bodeveix (IRIT, France)
Agusti Canals (CS, France)  -- General Chair
Mamoun Filali (IRIT, France)
Madeleine Faug?re (THALES, France)
Robert France (Colorado State University, USA)
S?bastien G?rard (CEA-LIST, France)
Martin Gogolla (University of Bremen, Germany)
Susanne Graf (CNRS-Verimag, France)
Irfan Hamid (TELECOM ParisTech, France)
Alan Hartman (IBM Haifa Research Laboratory, Israel)
Wooter Joosen (Catholic University of Leuven, Belgium)
Kevin Lano (King's College London, United Kingdom)
Tom Maibaum (King's College London, United Kingdom)
Stephen J.Mellor (Accelerated Technologies, Tucson AZ, USA)
Dominique Mery (LORIA, France)
Alexandre Mota (Universidade Federal de Pernambuco, Brazil)
Kazuhiro Ogata (Japan Advanced Institute of Science and Technology, Japan)
Richard Paige (University of York, United Kingdom)
Dorina Petriu (Carlton University, USA)
Pierre-Yves Schobbens (University of Namur, Belgium)
Douglas C. Schmidt (Vanderbild University, USA)
Fran?oise Simonot Lion (LORIA, France)
Oleg Sokolsky (University of Pennsylvania, USA)
Jing Sun (University of Auckland, New Zealand)
Jun Suzuki (University of Massachusetts, Boston, USA)
Martin T?rngren (Royal Institute of Technology, Sweden)
Laurence Tratt (Bornmouth University, United Kingdom)
Tatsuhiro Tsuchiya (Osaka University, Japan)
Naoyasu Ubayashi (Kyushu Institute of Technology, Japan)
Tullio Vardanega (University of Padua, Italia)
Fran?ois Vernadat (CNRS-LAAS, France)
Eugenio Villar (Universidad de Cantabria, Spain)
Andr? Windisch (EADS Military Aircraft, Germany)
John Whittle (George Mason University, USA)




From karthik.abram at neovera.com  Mon May 12 14:51:51 2008
From: karthik.abram at neovera.com (Karthik Abram)
Date: Mon, 12 May 2008 17:51:51 -0400
Subject: [antlr-interest] ANTLR 3.0.1 - Disambiguating semantic predicate
	question
Message-ID: <010f01c8b47a$62d00970$28701c50$@abram@neovera.com>

The attached file has a grammer that attempts to parse a simple language to
"log" your hours into a timesheet application. 

 

Statements are of the form:

 

log <time> <project> <date>

 

where <time> is required a decimal with an optional plus sign

<project> is of the form "in <subproject-name>" and is optional

<date> is of the form "for <date-spec>" where date-spec can be things like
"monday" "last monday" "yesterday" "today" etc.

 

The attached grammar works, except when I input the command:

log +30.25 for last monday

 

it fails the predicate for "in" and fails the predicate for "for" and
erroneously says that the project name is "for" instead of creating an AST
with project set to default project. However, the sentence "log +30.25 for
monday" parses just fine.

 

I don't understand why it fails the predicate for "in" but continues to go
down that path. When I set k=5 in the logCommand expression it works for
this case but fails other cases. Any help pointing me towards what I'm doing
wrong is highly appreciated!

 

Karthik Abram

Neovera, Inc.

703-462-1823

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080512/348bcb0d/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: AcademicHourGlass.g
Type: application/octet-stream
Size: 2747 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080512/348bcb0d/attachment.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 5131 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080512/348bcb0d/attachment.bin 

From mig.marques at gmail.com  Tue May 13 05:08:15 2008
From: mig.marques at gmail.com (Miguel Marques)
Date: Tue, 13 May 2008 13:08:15 +0100
Subject: [antlr-interest] Error Handling.
Message-ID: <CB2C60B8-4B02-4BAF-9157-27AA334145C8@gmail.com>

Hello,

After reading the FAQ and googling I could find exactly what I am  
looking for.
I've generated a lexer+parser with antlr to a DSL and now I'm  
integrating it with the Eclipse Platform as an editor. So I need to be  
able to run the parser and then retrieve the parsing errors. From what  
I've understood antlr generates all the
try/catch for all parsing exceptions so that it can continue the  
parsing process by guessing the "next" needed token and it prints the  
error to the stderror. Are those errors kept somewhere? Is there any  
object that keeps info on the line it occured and token name rule, etc?

Miguel

From ITitov at beeline.ru  Tue May 13 05:51:28 2008
From: ITitov at beeline.ru (Ivan Yu Titov)
Date: Tue, 13 May 2008 16:51:28 +0400
Subject: [antlr-interest]  Tree construction
Message-ID: <OF2D05CF08.1D8E0DCF-ONC3257448.0043BFB2-C3257448.0046A13D@*.beeline.ru>


      Hello,

      I need to parse input "%a%b%c" into the tree. This tree should be
like this (well-know example):

       +
      /  \
%a     +
           /  \
     %b   %c

      After lexer I have three tokens (%a, %b, %c). How can I apply to it
following construction:

      expr: id ('+'^ id)*;    ?

Below is my grammar:

grammar Expr;

id
      :     Reference
      ;

Reference
      :     '%' Identifier
      ;

fragment
Identifier
      :     Letter (Letter | Digit | '_')*
      ;

fragment
Letter      :     'a'..'z' | 'A'..'Z'
      ;

fragment
Digit :     '0'..'9'
      ;


From mig.marques at gmail.com  Tue May 13 05:08:15 2008
From: mig.marques at gmail.com (Miguel Marques)
Date: Tue, 13 May 2008 13:08:15 +0100
Subject: [antlr-interest]  Error Handling.
Message-ID: <CB2C60B8-4B02-4BAF-9157-27AA334145C8@gmail.com>

Hello,

After reading the FAQ and googling I could find exactly what I am  
looking for.
I've generated a lexer+parser with antlr to a DSL and now I'm  
integrating it with the Eclipse Platform as an editor. So I need to be  
able to run the parser and then retrieve the parsing errors. From what  
I've understood antlr generates all the
try/catch for all parsing exceptions so that it can continue the  
parsing process by guessing the "next" needed token and it prints the  
error to the stderror. Are those errors kept somewhere? Is there any  
object that keeps info on the line it occured and token name rule, etc?

Miguel

From hharalambiev at gmail.com  Tue May 13 09:25:04 2008
From: hharalambiev at gmail.com (Haralambi Haralambiev)
Date: Tue, 13 May 2008 19:25:04 +0300
Subject: [antlr-interest] Tree construction
In-Reply-To: <OF2D05CF08.1D8E0DCF-ONC3257448.0043BFB2-C3257448.0046A13D@*.beeline.ru>
References: <OF2D05CF08.1D8E0DCF-ONC3257448.0043BFB2-C3257448.0046A13D@*.beeline.ru>
Message-ID: <aa71f710805130925v1a6bc2b0yb2857ba75d234ea6@mail.gmail.com>

Hello,

As far as I can understand - you do not have that '+' token on the left.

So, first, you should have an imaginary token defined in tokens{} block.

Then the following definition of the expr rule should do the work:
expr : (id expr) => id expr -> ^(PLUS id expr)
| id
;

Hope this helps.

-Hari

On 5/13/08, Ivan Yu Titov <ITitov at beeline.ru> wrote:
>
>
>       Hello,
>
>       I need to parse input "%a%b%c" into the tree. This tree should be
> like this (well-know example):
>
>        +
>       /  \
> %a     +
>            /  \
>      %b   %c
>
>       After lexer I have three tokens (%a, %b, %c). How can I apply to it
> following construction:
>
>       expr: id ('+'^ id)*;    ?
>
> Below is my grammar:
>
> grammar Expr;
>
> id
>       :     Reference
>       ;
>
> Reference
>       :     '%' Identifier
>       ;
>
> fragment
> Identifier
>       :     Letter (Letter | Digit | '_')*
>       ;
>
> fragment
> Letter      :     'a'..'z' | 'A'..'Z'
>       ;
>
> fragment
> Digit :     '0'..'9'
>       ;
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080513/dc1853ba/attachment.html 

From lgcraymer at yahoo.com  Tue May 13 15:47:38 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue, 13 May 2008 15:47:38 -0700 (PDT)
Subject: [antlr-interest] [antlr-dev] generating code from grammar (CSS)
	and large code.
Message-ID: <135132.82327.qm@web55913.mail.re3.yahoo.com>

I've switched groups from antlr-dev to antlr-interest; this discussion does not belong in antlr-dev.

ANTLR 3 tends to generate large files, and you have enough special tokens that an 80K line lexer is not unusual.  This is a transient situation:  one of the later releases will probably focus on minimizing the size of generated code.

Your error message points to "TERM"; this should be converted to a parser rule as a first step (that should also reduce code gen size), and you will probably need to inline your fragment rules (lexers do not yet use FOLLOW sets--for the moment, avoid using fragment rules).

--Loring

----- Original Message ----
From: Kamal Verma <kverma at yahoo.com>
To: antlr-dev at antlr.org
Sent: Tuesday, May 13, 2008 2:38:56 PM
Subject: [antlr-dev] generating code from grammar (CSS) and large code.

Problem generating code from grammar.

CSS.g:203:2: The following alternatives are unreachable: 5,6,7,11,12

I am having trouble generating the code. Any help is very much appreciated. Also if anybody have a CSS parser created please share :-). 

Somehow it generated the code but size of code is too large. ~80k lines.

--------------
$ wc -l *
    296 CSS.g
     97 CSS.tokens
  79701 CSSLexer.cs
   1925 CSSParser.cs
    236 CSS__.g
  82255 total
--------------

Attached it the v3 grammar file.
Original grammar: http://www.antlr.org/share/1126882028006/css2.1.g
Grammar specs: http://www.w3.org/TR/CSS21/grammar.html

Any help is greatly appreciated.
-Kamal



      





      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080513/e05b385d/attachment.html 

From jaluber at gmx.de  Tue May 13 16:05:36 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 14 May 2008 01:05:36 +0200
Subject: [antlr-interest] generating code from grammar (CSS)	and large
 code.
In-Reply-To: <135132.82327.qm@web55913.mail.re3.yahoo.com>
References: <135132.82327.qm@web55913.mail.re3.yahoo.com>
Message-ID: <482A1EC0.7080401@gmx.de>

Loring Craymer schrieb:
> I've switched groups from antlr-dev to antlr-interest; this discussion 
> does not belong in antlr-dev.
> 
> ANTLR 3 tends to generate large files, and you have enough special 
> tokens that an 80K line lexer is not unusual.  This is a transient 
> situation:  one of the later releases will probably focus on minimizing 
> the size of generated code.
> 
> Your error message points to "TERM"; this should be converted to a 
> parser rule as a first step (that should also reduce code gen size), and 
> you will probably need to inline your fragment rules (lexers do not yet 
> use FOLLOW sets--for the moment, avoid using fragment rules).
> 
> --Loring

I'll add that I've managed to fix the other three ambiguities. One was a 
true bug in grammar translation from the W3C page. I'll wait for further 
infos how following Loring's advice worked out.

Johannes
> 
> ----- Original Message ----
> From: Kamal Verma <kverma at yahoo.com>
> To: antlr-dev at antlr.org
> Sent: Tuesday, May 13, 2008 2:38:56 PM
> Subject: [antlr-dev] generating code from grammar (CSS) and large code.
> 
> Problem generating code from grammar.
> 
> CSS.g:203:2: The following alternatives are unreachable: 5,6,7,11,12
> 
> I am having trouble generating the code. Any help is very much 
> appreciated. Also if anybody have a CSS parser created please share :-).
> 
> Somehow it generated the code but size of code is too large. ~80k lines.
> 
> --------------
> $ wc -l *
>     296 CSS.g
>      97 CSS.tokens
>   79701 CSSLexer.cs
>    1925 CSSParser.cs
>     236 CSS__.g
>   82255 total
> --------------
> 
> Attached it the v3 grammar file.
> Original grammar: http://www.antlr.org/share/1126882028006/css2.1.g
> Grammar specs: http://www.w3.org/TR/CSS21/grammar.html
> 
> Any help is greatly appreciated.
> -Kamal
> 
> 
> 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: CSS.g
Type: text/x-gap
Size: 4088 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080514/ff24ec72/attachment.bin 

From robin at pozytron.com  Tue May 13 17:38:56 2008
From: robin at pozytron.com (Robin Hamilton-Pennell)
Date: Tue, 13 May 2008 18:38:56 -0600
Subject: [antlr-interest] TYpe-checking and error reporting
Message-ID: <9bfd4b3c0805131738r32bda7bcxcddee82649af4591@mail.gmail.com>

Howdy all,

I've been using ANTLR for a little while now and it has been mostly
smooth sailing. For my target DSL I've successfully built a lexer,
parser which generates ASTs, and tree grammar to pretty-print the
ASTs. So, my app works great as nothing more than a pretty printer at
this point, but it's a step, at least.

I started implementing code to perform some basic static type
checking. I build symbol tables in the parser, and in the tree grammar
I am able to access the type information. This I got working as
expected.

I ran into a snag when attempting to do some error reporting. For the
purposes of this question, I'll show you a snippet of target code
(it's in a C-like syntax):

int foo;
int bar;
{
    int foo; // This is valid, as it's in a different scope than the foo above
}
int foo; // This is illegal, as the variable "foo" in the same scope
is being redeclared.

I have a method, boolean isDefined(String identifier), which works as
expected to catch this error (for example, if I embed a
System.err.println() action). However, I cannot figure out the best
approach to report the error!

I've perused the book and website to find a solution, and searched the
mailing list briefly, to no avail. I can use semantic predicates, but
the resulting error messages are next-to-useless. Has anyone tackled
this problem before, and if so, what's the recommended path for
reporting semantic errors (without sem preds, if possible)? I really
appreciate any help that can be provided.

Thanks!
Robin

From cmundi at gmail.com  Tue May 13 17:41:14 2008
From: cmundi at gmail.com (C. Mundi)
Date: Tue, 13 May 2008 17:41:14 -0700
Subject: [antlr-interest] Don't Shoot! (Getting started w/ANTLR3 and C#)
Message-ID: <e794390805131741h213a098fwae92a15e69dca287@mail.gmail.com>

Ok.  I have been reading the wiki and experimenting with ANTLRWorks while
waiting for the book to arrive in my mailbox.

I'm not sure the book will (or should) answer this.  I am looking for a
start-to-finish example targeting C#.  The finish line for me is *not* the
output of ANTLR.  My finish line is a Windows dll or exe that actually
parses user input.

I am already able to generate lexing and parsing code for various targets,
either with ANTLRWorks or with ANTLR from the Linux command line.
Ultimately I need to build Windows apps, so I need to get the ANTLR
environment set up for Dev Studio.  So, newly emboldened by my success on
Linux, I tried to port my new skills to Windows by gamely adding an option{
language=CSharp; } phrase.  Oh, if only it were so easy!  I got C# code, but
I couldn't build it.

So I read a number of semi-mutually-contradictory-and-or-incomplete helpful
hints on the wiki and by Googling.

That got me as far as adding a Reference to the Antlr3.Runtime -- huge step
forward.

Then I ran into this mysterious RecognizerSharedState object in the C#
target.  Uh oh.  I guess I'm still missing a Reference to a .NET Assembly,
which probably means I skipped an important step, like building it.  I get a
vague sense of this from some of the postings, but I guess I'm just dense.

Any clues will be greatly appreciated.  I'll be happy to wait for the book
to arrive, if it has the answer.  Please be blunt.  Insults can only make me
smarter.  :)

Thanks,
CM
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080513/42e3a89c/attachment.html 

From helink at sandia.gov  Tue May 13 18:13:32 2008
From: helink at sandia.gov (Hamilton Link)
Date: Tue, 13 May 2008 19:13:32 -0600
Subject: [antlr-interest] a few C# questions, plus ANTLR version questions
Message-ID: <482A3CBC.30402@sandia.gov>

Hello, I started poking a bit at ANTLR today after crawling all over the 
web site and wiki.  I am generating a C# lexer and parser and had a 
couple of comments and questions.  Mostly I think my problems are 
version confusion.  FYI I'm using VSPro 2008 but it doesn't seem to be 
causing any problem.

I quickly noticed that the CSharp target doesn't quite work the same 
between ANTLR 3.0.1 and 3.1b2 (which I believe are the versions that 
I've tried, using ANTLRWorks 1.1.7 and 1.2b2).  I am referencing 
Antlr3.Runtime.dll from the source download (that being the only runtime 
I could find), I think it's a 3.0.1 runtime.

Using the Antlr3.Runtime.dll and AntlrWorks 1.1.7, I am able to tokenize 
and parse in a little command line C# app.  I can't do the parse tree 
example and I am not generating AST nodes so it's not super useful yet 
but it runs.

Q: Is a .net runtime of ANTLR 3.1 available yet, and if not when 
approximately will it appear?  Am I correct in assuming the runtimes 
provided in the 3.0.1 source distribution are the older 3.0.1 and 2.7.7 
runtimes?

I'd rather go CSharp2 for everything, for one thing, and for another 
thing it appears that in the 3.0.1 runtime there's no such thing as 
Antlr.Runtime.RecognizerSharedState --- so I can't generate a parse tree 
based on the wiki's example (I am guessing this is C. Mundi's problem as 
well).

Q: Is the following fixable and am I even understanding the problem 
properly?

Using options{language=CSharp2} doesn't work, I believe I'm at least 
missing the CSharp2.stg file and I am getting an error to this effect.  
This seems contrary to the documentation which suggests it should work 
under ANTLRWorks 1.2b2/ANTLR 3.1b2.  It doesn't seem to be provided in 
the downloadable sources, but that makes sense because the sources 
appear to be for ANTLR 3.0.1 (and CSharp2 is new as of ANTLR 3.1, right?).

Q: Is there a practical way to contribute documentation for the .net 
assembly so that Intellisense becomes useful?

Not having any intellisense documentation is kind of a bummer.  I notice 
that the online Java documentation is close but not quite in line with 
the CSharp target (for one thing, in the 3.0.1 Java target, 
RecognizerSharedState exists).

Finally, one comment: It is hugely confusing for the documentation to 
reference ANTLR 3.1 as if it exists when various features don't yet 
exist as far as I can tell.  Is this a problem with the documentation or 
do I simply not have the right versions of things yet?

Any help on these matters would be greatly appreciated.

thanks,
hamilton





From kverma at yahoo.com  Tue May 13 18:56:02 2008
From: kverma at yahoo.com (Kamal Verma)
Date: Tue, 13 May 2008 18:56:02 -0700 (PDT)
Subject: [antlr-interest] generating code from grammar (CSS) and large
	code.
Message-ID: <669974.91353.qm@web54605.mail.re2.yahoo.com>

Thanks for the input; I was able to compile it. Attached is updated grammar, not perfect.

I am not sure if it works completely, but I was able to parse simple input.

If anybody have better idea; please share here.

-Kamal


----- Original Message ----
From: Johannes Luber <jaluber at gmx.de>
To: Loring Craymer <lgcraymer at yahoo.com>
Cc: Kamal Verma <kverma at yahoo.com>; antlr-interest at antlr.org
Sent: Tuesday, May 13, 2008 7:05:36 PM
Subject: Re: [antlr-interest] generating code from grammar (CSS) and large code.

Loring Craymer schrieb:
> I've switched groups from antlr-dev to antlr-interest; this discussion 
> does not belong in antlr-dev.
> 
> ANTLR 3 tends to generate large files, and you have enough special 
> tokens that an 80K line lexer is not unusual.  This is a transient 
> situation:  one of the later releases will probably focus on minimizing 
> the size of generated code.
> 
> Your error message points to "TERM"; this should be converted to a 
> parser rule as a first step (that should also reduce code gen size), and 
> you will probably need to inline your fragment rules (lexers do not yet 
> use FOLLOW sets--for the moment, avoid using fragment rules).
> 
> --Loring

I'll add that I've managed to fix the other three ambiguities. One was a 
true bug in grammar translation from the W3C page. I'll wait for further 
infos how following Loring's advice worked out.

Johannes
> 
> ----- Original Message ----
> From: Kamal Verma <kverma at yahoo.com>
> To: antlr-dev at antlr.org
> Sent: Tuesday, May 13, 2008 2:38:56 PM
> Subject: [antlr-dev] generating code from grammar (CSS) and large code.
> 
> Problem generating code from grammar.
> 
> CSS.g:203:2: The following alternatives are unreachable: 5,6,7,11,12
> 
> I am having trouble generating the code. Any help is very much 
> appreciated. Also if anybody have a CSS parser created please share :-).
> 
> Somehow it generated the code but size of code is too large. ~80k lines.
> 
> --------------
> $ wc -l *
>     296 CSS.g
>      97 CSS.tokens
>   79701 CSSLexer.cs
>    1925 CSSParser.cs
>     236 CSS__.g
>   82255 total
> --------------
> 
> Attached it the v3 grammar file.
> Original grammar: http://www.antlr.org/share/1126882028006/css2.1.g
> Grammar specs: http://www.w3.org/TR/CSS21/grammar.html
> 
> Any help is greatly appreciated.
> -Kamal
> 
> 
> 


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080513/24015624/attachment-0001.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: CSS_updated.g
Type: text/x-gap
Size: 3874 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080513/24015624/attachment-0001.bin 

From shipmen at gmail.com  Wed May 14 01:30:23 2008
From: shipmen at gmail.com (Maciej Bakalarz)
Date: Wed, 14 May 2008 10:30:23 +0200
Subject: [antlr-interest] Simple expression grammar
Message-ID: <482AA31F.7040702@gmail.com>

Hi !

I am newbie to ANTLR. I am trying to make very simple grammar which will 
be used to build AST for Guard Condition expressions. Guard Conditions 
expression are used as a labels in automata transitions.

This is my grammar:

grammar GuardCondition2;

options {
     output=AST;
     ASTLabelType=CommonTree;
}

prog:
	logical_or_expression+
	;

logical_or_expression:
	logical_and_expression (OR_OP^ logical_and_expression)*
	;

logical_and_expression
	: rel_expression (AND_OP^ rel_expression)*
	;

rel_expression
	: expression (REL_OP^ expression)*
	;
expression
	: ALFANUM
	;

LPAREN 	:	'(' ;
RPAREN	:	')' ;
REL_OP   	: 	 '==' | '<' | '>' | '<=' | '>='|'!=' ;
OR_OP 	: 	'||' ;
AND_OP 	:	 '&&' ;
ALFANUM 	: 	(ID|INT)+;
ID  	:  	 ('a'..'z'|'A'..'Z')+ ;
INT 	:  	 '0'..'9'+ ;
WS  	:   	(' '|'\t')+ {skip();} ;


This grammar is working fine. Using this grammar I can parse expressions 
like "a>=3 || b<=4 && c>=4".

I need to parse expressions which are using nested parenthesis, like:
"( a>=3 || b<=4 ) && c>=4" or "((a>=3 || b<=4) && c>=4) || a>=3 )"

I wast trying to modify grammar to achieve this goal but I it always 
came up that I am using Left Recursion.

Does anybody knows how to modify grammar so nested parenthesis would be 
possible ?

Thank You,
Maciek Bakalarz




From jaluber at gmx.de  Wed May 14 03:29:15 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 14 May 2008 12:29:15 +0200
Subject: [antlr-interest] TYpe-checking and error reporting
In-Reply-To: <9bfd4b3c0805131738r32bda7bcxcddee82649af4591@mail.gmail.com>
References: <9bfd4b3c0805131738r32bda7bcxcddee82649af4591@mail.gmail.com>
Message-ID: <482ABEFB.8060704@gmx.de>

Robin Hamilton-Pennell schrieb:
> Howdy all,
> 
> I've been using ANTLR for a little while now and it has been mostly
> smooth sailing. For my target DSL I've successfully built a lexer,
> parser which generates ASTs, and tree grammar to pretty-print the
> ASTs. So, my app works great as nothing more than a pretty printer at
> this point, but it's a step, at least.
> 
> I started implementing code to perform some basic static type
> checking. I build symbol tables in the parser, and in the tree grammar
> I am able to access the type information. This I got working as
> expected.
> 
> I ran into a snag when attempting to do some error reporting. For the
> purposes of this question, I'll show you a snippet of target code
> (it's in a C-like syntax):
> 
> int foo;
> int bar;
> {
>     int foo; // This is valid, as it's in a different scope than the foo above
> }
> int foo; // This is illegal, as the variable "foo" in the same scope
> is being redeclared.
> 
> I have a method, boolean isDefined(String identifier), which works as
> expected to catch this error (for example, if I embed a
> System.err.println() action). However, I cannot figure out the best
> approach to report the error!
> 
> I've perused the book and website to find a solution, and searched the
> mailing list briefly, to no avail. I can use semantic predicates, but
> the resulting error messages are next-to-useless. Has anyone tackled
> this problem before, and if so, what's the recommended path for
> reporting semantic errors (without sem preds, if possible)? I really
> appreciate any help that can be provided.

This looks like a case for symbol tables. Effectively you collect all 
information about declarations and references in one place. You could 
check while storing a declaration, if it has been already declared. Or 
you could scan for duplicates after the parse phase, but before the tree 
grammar phase. None of these require sempreds.

Johannes
> 
> Thanks!
> Robin
> 


From jaluber at gmx.de  Wed May 14 03:43:44 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 14 May 2008 12:43:44 +0200
Subject: [antlr-interest] Don't Shoot! (Getting started w/ANTLR3 and C#)
In-Reply-To: <e794390805131741h213a098fwae92a15e69dca287@mail.gmail.com>
References: <e794390805131741h213a098fwae92a15e69dca287@mail.gmail.com>
Message-ID: <482AC260.6030504@gmx.de>

C. Mundi schrieb:
> 
> Ok.  I have been reading the wiki and experimenting with ANTLRWorks 
> while waiting for the book to arrive in my mailbox. 
> 
> I'm not sure the book will (or should) answer this.  I am looking for a 
> start-to-finish example targeting C#.  The finish line for me is _not_ 
> the output of ANTLR.  My finish line is a Windows dll or exe that 
> actually parses user input.

There are example grammars for C# on the download page.
> 
> I am already able to generate lexing and parsing code for various 
> targets, either with ANTLRWorks or with ANTLR from the Linux command 
> line.  Ultimately I need to build Windows apps, so I need to get the 
> ANTLR environment set up for Dev Studio.  So, newly emboldened by my 
> success on Linux, I tried to port my new skills to Windows by gamely 
> adding an option{ language=CSharp; } phrase.  Oh, if only it were so 
> easy!  I got C# code, but I couldn't build it.
> 
> So I read a number of semi-mutually-contradictory-and-or-incomplete 
> helpful hints on the wiki and by Googling.

Can you describe where you found not-as-helpful-information on the wiki, 
so I can fix it?
> 
> That got me as far as adding a Reference to the Antlr3.Runtime -- huge 
> step forward.

I'm not sure when which assemblies are required, but I always add 
Antlr.Runtime, Antlr.Utilities, antlr.runtime and Antlr.StringTemplate. 
With these you cover all bases.
> 
> Then I ran into this mysterious RecognizerSharedState object in the C# 
> target.  Uh oh.  I guess I'm still missing a Reference to a .NET 
> Assembly, which probably means I skipped an important step, like 
> building it.  I get a vague sense of this from some of the postings, but 
> I guess I'm just dense. 
> 
> Any clues will be greatly appreciated.  I'll be happy to wait for the 
> book to arrive, if it has the answer.  Please be blunt.  Insults can 
> only make me smarter.  :)

My guess is that you are mixing code generation from ANTLR 3.1b1 with a 
library from 3.0.1. They aren't even source compatible. Please use the 
library and generation from the latest build - otherwise they may not 
work together.

Johannes

From jaluber at gmx.de  Wed May 14 04:21:26 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 14 May 2008 13:21:26 +0200
Subject: [antlr-interest] a few C# questions,
	plus ANTLR version questions
In-Reply-To: <482A3CBC.30402@sandia.gov>
References: <482A3CBC.30402@sandia.gov>
Message-ID: <482ACB36.9060501@gmx.de>

Hamilton Link schrieb:
> Hello, I started poking a bit at ANTLR today after crawling all over the 
> web site and wiki.  I am generating a C# lexer and parser and had a 
> couple of comments and questions.  Mostly I think my problems are 
> version confusion.  FYI I'm using VSPro 2008 but it doesn't seem to be 
> causing any problem.
> 
> I quickly noticed that the CSharp target doesn't quite work the same 
> between ANTLR 3.0.1 and 3.1b2 (which I believe are the versions that 
> I've tried, using ANTLRWorks 1.1.7 and 1.2b2).  I am referencing 
> Antlr3.Runtime.dll from the source download (that being the only runtime 
> I could find), I think it's a 3.0.1 runtime.

Under <http://www.antlr.org/download/build/> you can get the latest 
daily builds. Unfortunately, the last one is a bit outdated as well. Ter 
should push a new one soon.

> Using the Antlr3.Runtime.dll and AntlrWorks 1.1.7, I am able to tokenize 
> and parse in a little command line C# app.  I can't do the parse tree 
> example and I am not generating AST nodes so it's not super useful yet 
> but it runs.
> 
> Q: Is a .net runtime of ANTLR 3.1 available yet, and if not when 
> approximately will it appear?  Am I correct in assuming the runtimes 
> provided in the 3.0.1 source distribution are the older 3.0.1 and 2.7.7 
> runtimes?
> 
> I'd rather go CSharp2 for everything, for one thing, and for another 
> thing it appears that in the 3.0.1 runtime there's no such thing as 
> Antlr.Runtime.RecognizerSharedState --- so I can't generate a parse tree 
> based on the wiki's example (I am guessing this is C. Mundi's problem as 
> well).

The daily build includes a new library version.
> 
> Q: Is the following fixable and am I even understanding the problem 
> properly?
> 
> Using options{language=CSharp2} doesn't work, I believe I'm at least 
> missing the CSharp2.stg file and I am getting an error to this effect.  
> This seems contrary to the documentation which suggests it should work 
> under ANTLRWorks 1.2b2/ANTLR 3.1b2.  It doesn't seem to be provided in 
> the downloadable sources, but that makes sense because the sources 
> appear to be for ANTLR 3.0.1 (and CSharp2 is new as of ANTLR 3.1, right?).

Correct. The appropriate sources are included in the daily build. 
ANTLRworks 1.2b2 doesn't support CSharp2 yet - it includes a too old 
version of ANTLR.
> 
> Q: Is there a practical way to contribute documentation for the .net 
> assembly so that Intellisense becomes useful?

What resources does Intellisense need actually? As I can use the source 
files I don't have difficulties with Intellisense myself, but that 
doesn't help you. In the case of still missing data, we can talk about 
further contributions.

> Not having any intellisense documentation is kind of a bummer.  I notice 
> that the online Java documentation is close but not quite in line with 
> the CSharp target (for one thing, in the 3.0.1 Java target, 
> RecognizerSharedState exists).

My guess is that the docs describe not 3.0.1, but an alpha version of 3.1.

> Finally, one comment: It is hugely confusing for the documentation to 
> reference ANTLR 3.1 as if it exists when various features don't yet 
> exist as far as I can tell.

I've made it a bit more clear in one case that I refer to a new version 
of ANTLR. Otherwise you are simply using the wrong libraries and sources.

Johannes

>  Is this a problem with the documentation or 
> do I simply not have the right versions of things yet?
> 
> Any help on these matters would be greatly appreciated.
> 
> thanks,
> hamilton
> 
> 
> 
> 


From jaluber at gmx.de  Wed May 14 04:25:49 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 14 May 2008 13:25:49 +0200
Subject: [antlr-interest] Simple expression grammar
In-Reply-To: <482AA31F.7040702@gmail.com>
References: <482AA31F.7040702@gmail.com>
Message-ID: <482ACC3D.8030202@gmx.de>

Maciej Bakalarz schrieb:
> Hi !
> 
> I am newbie to ANTLR. I am trying to make very simple grammar which will 
> be used to build AST for Guard Condition expressions. Guard Conditions 
> expression are used as a labels in automata transitions.
> 
> This is my grammar:
> 
> grammar GuardCondition2;
> 
> options {
>     output=AST;
>     ASTLabelType=CommonTree;
> }
> 
> prog:
>     logical_or_expression+
>     ;
> 
> logical_or_expression:
>     logical_and_expression (OR_OP^ logical_and_expression)*
>     ;
> 
> logical_and_expression
>     : rel_expression (AND_OP^ rel_expression)*
>     ;
> 
> rel_expression
>     : expression (REL_OP^ expression)*
>     ;
> expression
>     : ALFANUM
>     ;
> 
> LPAREN     :    '(' ;
> RPAREN    :    ')' ;
> REL_OP       :      '==' | '<' | '>' | '<=' | '>='|'!=' ;
> OR_OP     :     '||' ;
> AND_OP     :     '&&' ;
> ALFANUM     :     (ID|INT)+;
> ID      :       ('a'..'z'|'A'..'Z')+ ;
> INT     :       '0'..'9'+ ;
> WS      :       (' '|'\t')+ {skip();} ;
> 
> 
> This grammar is working fine. Using this grammar I can parse expressions 
> like "a>=3 || b<=4 && c>=4".
> 
> I need to parse expressions which are using nested parenthesis, like:
> "( a>=3 || b<=4 ) && c>=4" or "((a>=3 || b<=4) && c>=4) || a>=3 )"
> 
> I wast trying to modify grammar to achieve this goal but I it always 
> came up that I am using Left Recursion.
> 
> Does anybody knows how to modify grammar so nested parenthesis would be 
> possible ?

Left-recusrion isn't that much of a showstopper as you believe. If your 
grammars orientates itself on the Java or C# grammar, then you can use 
<http://www.antlr.org/wiki/display/ANTLR3/Left-Recursion+Removal> to get 
rid of the left-recursion.

Johannes

From felix_do at web.de  Wed May 14 04:59:23 2008
From: felix_do at web.de (Felix Dorner)
Date: Wed, 14 May 2008 13:59:23 +0200
Subject: [antlr-interest] Simple expression grammar
In-Reply-To: <482AA31F.7040702@gmail.com>
References: <482AA31F.7040702@gmail.com>
Message-ID: <482AD41B.2090900@web.de>

Maciej Bakalarz wrote:
> I need to parse expressions which are using nested parenthesis, like:
> "( a>=3 || b<=4 ) && c>=4" or "((a>=3 || b<=4) && c>=4) || a>=3 )"
>
What happens if you change this:
>
> expression
>     : ALFANUM
>     ;

to this:

  expression
       : ALFANUM | '(' prog ')'

Felix



From antlr at mirality.co.nz  Wed May 14 05:25:14 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 15 May 2008 00:25:14 +1200
Subject: [antlr-interest] a few C# questions,
 plus ANTLR version  questions
In-Reply-To: <482ACB36.9060501@gmx.de>
References: <482A3CBC.30402@sandia.gov>
 <482ACB36.9060501@gmx.de>
Message-ID: <20080514122528.AC30511EC5F@www.antlr.org>

At 23:21 14/05/2008, Johannes Luber wrote:
 >What resources does Intellisense need actually? As I can use the 

 >source files I don't have difficulties with Intellisense myself, 

 >but that doesn't help you. In the case of still missing data, we 

 >can talk about further contributions.

The biggest aid to Intellisense is to enable XML documentation 
(project properties, Build, Output, XML Documentation File [your 
location may vary depending on IDE version]), then include the 
resulting .xml file in the binary distribution as well.

Of course that assumes you've been using XMLdocs in the C# 
source.  A cursory glance at it seems to show sporadic coverage 
(though not to worry -- enabling that option will generate 
compiler warnings for any publically-visible but undocumented 
elements).

The main thing to bear in mind is that Intellisense only really 
uses the <summary> and <param> elements.  While adding the other 
stuff is useful (both for reference in the source code and if you 
decide to run a full HTML doc generation), just remember that 
those need to be sufficiently understandable by themselves for the 
people who are only using Intellisense.


From shipmen at gmail.com  Wed May 14 05:26:17 2008
From: shipmen at gmail.com (Maciej Bakalarz)
Date: Wed, 14 May 2008 14:26:17 +0200
Subject: [antlr-interest] Simple expression grammar
In-Reply-To: <482AD41B.2090900@web.de>
References: <482AA31F.7040702@gmail.com> <482AD41B.2090900@web.de>
Message-ID: <482ADA69.5050200@gmail.com>

Hi again!
>> I need to parse expressions which are using nested parenthesis, like:
>> "( a>=3 || b<=4 ) && c>=4" or "((a>=3 || b<=4) && c>=4) || a>=3 )"
>>
> What happens if you change this:
>>
>> expression
>>     : ALFANUM
>>     ;
> 
> to this:
> 
>  expression
>       : ALFANUM | '(' prog ')'

It's good idea. I will try it for a moment. For now I used '('prog')' 
but in other part of grammar.
I also used mentioned "backtrack=true; memoize=true;" option.
I added possibility to negate expressions too ...
It's not tested but seems to work fine.

Here is the final grammar:

grammar GuardCondition;

options {
     output=AST;
     ASTLabelType=CommonTree;
backtrack=true;
memoize=true;
}

prog:
	logical_or_expression+
	;

logical_or_expression:
	logical_and_expression (OR_OP^ logical_and_expression)*
	;

logical_and_expression
	: rel_expression (AND_OP^ rel_expression)*
	;

rel_expression
	: expression (REL_OP^ expression)*
	| LPAREN! prog RPAREN!
	| NEG^ LPAREN! prog RPAREN!	
	;
expression
	: ID | INT | NEG^ ID
	;

NEG	:	'!';
LPAREN 	:	'(';
RPAREN	:	')';
REL_OP   	: 	 '==' | '<' | '>' | '<=' | '>='|'!=';
OR_OP 	: 	'||';
AND_OP 	:	 '&&';
ID  	:  	ALFA ( ALFA | INT ) *;
ALFA	:	('a'..'z'|'A'..'Z') ;
INT 	:  	 '0'..'9'+;
WS  	:   	(' '|'\t')+ {skip();};


Thanks for help !
Maciek Bakalarz


From kverma at yahoo.com  Wed May 14 05:32:28 2008
From: kverma at yahoo.com (Kamal Verma)
Date: Wed, 14 May 2008 05:32:28 -0700 (PDT)
Subject: [antlr-interest] Command line options for ANTLRWORKS ?
Message-ID: <455117.7039.qm@web54601.mail.re2.yahoo.com>

I will like to associate all the .g files extension to ANTLRWORKS. For that I should be able to load .g file on the command line. Like,

java -jar antlrwk.jar -open "Filename.g"

any information will be greatly appreciated.
-K



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080514/800b502c/attachment-0001.html 

From antlr at mirality.co.nz  Wed May 14 05:48:23 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 15 May 2008 00:48:23 +1200
Subject: [antlr-interest] Command line options for ANTLRWORKS ?
In-Reply-To: <455117.7039.qm@web54601.mail.re2.yahoo.com>
References: <455117.7039.qm@web54601.mail.re2.yahoo.com>
Message-ID: <20080514124833.43D8411EC77@www.antlr.org>

At 00:32 15/05/2008, Kamal Verma wrote:
>I will like to associate all the .g files extension to 
>ANTLRWORKS. For that I should be able to load .g file on the 
>command line. Like,
>
>java -jar antlrwk.jar -open "Filename.g"

Doable, but the instructions differ depending on what operating 
system and version you're using.


From kverma at yahoo.com  Wed May 14 08:21:36 2008
From: kverma at yahoo.com (Kamal Verma)
Date: Wed, 14 May 2008 08:21:36 -0700 (PDT)
Subject: [antlr-interest] Fw:  Command line options for ANTLRWORKS ?
Message-ID: <759691.62996.qm@web54604.mail.re2.yahoo.com>



Wonderful. Where do you think I can find instructions?

Find attached is the registry file that associates grammar file in Windows XP, needs more testing.



----- Original Message ----
From: Gavin Lambert <antlr at mirality.co.nz>
To: Kamal Verma <kverma at yahoo.com>; antlr-interest at antlr.org
Sent: Wednesday, May 14, 2008 8:48:23 AM
Subject: Re: [antlr-interest] Command line options for ANTLRWORKS ?

At 00:32 15/05/2008, Kamal Verma wrote:
>I will like to associate all the .g files extension to 
>ANTLRWORKS. For that I should be able to load .g file on the 
>command line. Like,
>
>java -jar antlrwk.jar -open "Filename.g"

Doable, but the instructions differ depending on what operating 
system and version you're using.


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080514/da34ea70/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: AssociateGrammerFilesWithAntlrWorks.zip
Type: application/zip
Size: 2124 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080514/da34ea70/attachment.zip 

From troy.daniels at baesystems.com  Wed May 14 09:49:16 2008
From: troy.daniels at baesystems.com (Daniels, Troy (US SSA))
Date: Wed, 14 May 2008 12:49:16 -0400
Subject: [antlr-interest] Simple expression grammar
References: <482AA31F.7040702@gmail.com> <482ACC3D.8030202@gmx.de>
Message-ID: <40CBD611A793EA438464B91E749DD8B00437B0D5@blums0017.bluelnk.net>

 

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Johannes Luber
> Sent: Wednesday, May 14, 2008 7:26 AM
> To: Maciej Bakalarz
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Simple expression grammar
> 
> Maciej Bakalarz schrieb:
> > Hi !
> > 
> > I am newbie to ANTLR. I am trying to make very simple grammar which 
> > will be used to build AST for Guard Condition expressions. Guard 
> > Conditions expression are used as a labels in automata transitions.
> > 
> > This is my grammar:
> > 
> > grammar GuardCondition2;
> > 
> > options {
> >     output=AST;
> >     ASTLabelType=CommonTree;
> > }
> > 
> > prog:
> >     logical_or_expression+
> >     ;
> > 
> > logical_or_expression:
> >     logical_and_expression (OR_OP^ logical_and_expression)*
> >     ;
> > 
> > logical_and_expression
> >     : rel_expression (AND_OP^ rel_expression)*
> >     ;
> > 
> > rel_expression
> >     : expression (REL_OP^ expression)*
> >     ;
> > expression
> >     : ALFANUM
> >     ;
> > 

In this case, I think all you need to do is modify the grammar to be

expression
    :   ALPHANUM | LPAREN logical_or_expression RPAREN ;

This is a continuation of the idea that each rule refers to the next
higher operator in the operator precedence chain.  Once you've gotten to
expression, the only things you have left atomic tokens (ALPHANUM) and
parenthesized expressions.  There's no precedence between them: you just
have to choose whichever one you actually have.  If you do find a
parenthesized expression, then you have to go all the way back to the
bottom of the rule chain to resolve that.

Troy


> > LPAREN     :    '(' ;
> > RPAREN    :    ')' ;
> > REL_OP       :      '==' | '<' | '>' | '<=' | '>='|'!=' ;
> > OR_OP     :     '||' ;
> > AND_OP     :     '&&' ;
> > ALFANUM     :     (ID|INT)+;
> > ID      :       ('a'..'z'|'A'..'Z')+ ;
> > INT     :       '0'..'9'+ ;
> > WS      :       (' '|'\t')+ {skip();} ;
> > 
> > 
> > This grammar is working fine. Using this grammar I can parse 
> > expressions like "a>=3 || b<=4 && c>=4".
> > 
> > I need to parse expressions which are using nested 
> parenthesis, like:
> > "( a>=3 || b<=4 ) && c>=4" or "((a>=3 || b<=4) && c>=4) || a>=3 )"
> > 
> > I wast trying to modify grammar to achieve this goal but I 
> it always 
> > came up that I am using Left Recursion.
> > 
> > Does anybody knows how to modify grammar so nested 
> parenthesis would 
> > be possible ?
> 
> Left-recusrion isn't that much of a showstopper as you 
> believe. If your grammars orientates itself on the Java or C# 
> grammar, then you can use 
> <http://www.antlr.org/wiki/display/ANTLR3/Left-Recursion+Remov
> al> to get rid of the left-recursion.
> 
> Johannes
> 

From siemsen at ucar.edu  Wed May 14 09:53:13 2008
From: siemsen at ucar.edu (siemsen at ucar.edu)
Date: Wed, 14 May 2008 10:53:13 -0600
Subject: [antlr-interest] TYpe-checking and error reporting
In-Reply-To: <9bfd4b3c0805131738r32bda7bcxcddee82649af4591@mail.gmail.com>
References: <9bfd4b3c0805131738r32bda7bcxcddee82649af4591@mail.gmail.com>
Message-ID: <C2099EE0-F977-422F-AD24-D9257BB82F96@ucar.edu>

I agree - we need better documentation about how to report semantic  
errors in ANTLR.  The book covers how to deal with lexer and parser  
errors, but not semantic errors like the one you describe.  Such  
errors should follow the standard style, with a file name, line number  
and character number, so I use these methods to report them:

	public void errorMessage (TokenStream inp, String msg) {
		String introString = "";
		if (!currentInputFileName.equals("")) {
			int lineNbr = inp.LT(1).getLine();
			int charPosition = inp.LT(1).getCharPositionInLine();
			introString = currentInputFileName + "(" + lineNbr + ":" +  
charPosition + "): ";
		}
		System.err.println(introString + msg);
	}
	
	public void dieWithMessage (TokenStream inp, String msg) {
		errorMessage(inp, msg);
	        System.exit(1);
	}

which I call with, like,

	dieWithMessage(input, "class " + classNam + " undefined");

This "works" but smells bad:

     1. It needs a global "currentFileName", which changes when there  
are includstream.
     2. The methods take a TokenStream to get the line number and  
character position.  From reading ANTLR-generated code, I figured out  
that "input" is the token stream.  Perhaps I should pass in the token  
itself (input.LT(1)) instead of the whole stream.
     3. It doesn't use exceptions, which seems wrong.
     4. Related to #3, it calls System.exit(), which makes unit  
testing difficult.

Hopefully, this code will provoke enough disgust in better minds that  
they'll post superior approaches :-)

-- Pete

On May 13, 2008, at 6:38 PM, Robin Hamilton-Pennell wrote:

> Howdy all,
>
> I've been using ANTLR for a little while now and it has been mostly
> smooth sailing. For my target DSL I've successfully built a lexer,
> parser which generates ASTs, and tree grammar to pretty-print the
> ASTs. So, my app works great as nothing more than a pretty printer at
> this point, but it's a step, at least.
>
> I started implementing code to perform some basic static type
> checking. I build symbol tables in the parser, and in the tree grammar
> I am able to access the type information. This I got working as
> expected.
>
> I ran into a snag when attempting to do some error reporting. For the
> purposes of this question, I'll show you a snippet of target code
> (it's in a C-like syntax):
>
> int foo;
> int bar;
> {
>    int foo; // This is valid, as it's in a different scope than the  
> foo above
> }
> int foo; // This is illegal, as the variable "foo" in the same scope
> is being redeclared.
>
> I have a method, boolean isDefined(String identifier), which works as
> expected to catch this error (for example, if I embed a
> System.err.println() action). However, I cannot figure out the best
> approach to report the error!
>
> I've perused the book and website to find a solution, and searched the
> mailing list briefly, to no avail. I can use semantic predicates, but
> the resulting error messages are next-to-useless. Has anyone tackled
> this problem before, and if so, what's the recommended path for
> reporting semantic errors (without sem preds, if possible)? I really
> appreciate any help that can be provided.
>
> Thanks!
> Robin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080514/8439eddc/attachment.html 

From ddr1975 at gmail.com  Wed May 14 12:29:12 2008
From: ddr1975 at gmail.com (Daniel Danciu)
Date: Wed, 14 May 2008 21:29:12 +0200
Subject: [antlr-interest] Unquoting strings
Message-ID: <2d64f5e90805141229u4b78b6e8j2a82abaf5653b7da@mail.gmail.com>

Browsing through some tutorials, I was left with the impression that
appending an exclamation mark to a character would remove that character
from the parsed token, e.g.:

fragment
SingleQuotedString
  :
  '\''! // or single quoted string
  ( '\\'! '\''
  | ~('\''|'\n'|'\r')
  )*
   '\''!;



Would cause the enclosing quotes to be removed. This seems to not be
happening in the Java generated code, so I had to resort to the following
ugly hack, which manually removes the quotes:

STRING
: (DoubleQuotedString | SingleQuotedString)
  {
          // Strip the surrounding quotes
          String txt = getText();
          setText(txt.substring(1, txt.length() -1));
  };

This works, but it's not nice. Does anybody know what I might be doing wrong
in the SingleQotedString rule?

Thanks,
Daniel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080514/2e2ebe6e/attachment.html 

From jaluber at gmx.de  Wed May 14 13:28:48 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Wed, 14 May 2008 22:28:48 +0200
Subject: [antlr-interest] Unquoting strings
In-Reply-To: <2d64f5e90805141229u4b78b6e8j2a82abaf5653b7da@mail.gmail.com>
References: <2d64f5e90805141229u4b78b6e8j2a82abaf5653b7da@mail.gmail.com>
Message-ID: <482B4B80.5060904@gmx.de>

Daniel Danciu schrieb:
> Browsing through some tutorials, I was left with the impression that 
> appending an exclamation mark to a character would remove that character 
> from the parsed token, e.g.:
> 
> fragment
> SingleQuotedString
>   :
>   '\''! // or single quoted string
>   ( '\\'! '\''
>   | ~('\''|'\n'|'\r')
>   )*
>    '\''!;
> 
> 
> 
> Would cause the enclosing quotes to be removed. This seems to not be 
> happening in the Java generated code, so I had to resort to the 
> following ugly hack, which manually removes the quotes:
> 
> STRING
> : (DoubleQuotedString | SingleQuotedString)
>   {
>           // Strip the surrounding quotes
>           String txt = getText();
>           setText(txt.substring(1, txt.length() -1));
>   };
> 
> This works, but it's not nice. Does anybody know what I might be doing 
> wrong in the SingleQotedString rule?

Currently, the documentation differs from the capabilities of ANTLR. It 
was supposed to work like in the tutorials, though. My suggestion for an 
implementation would be to expand the CommonToken class, that a token 
can not only take its text from the input file, but also switch to an 
internal string. Seems to be the easiest approach.

Johannes

From antlr at mirality.co.nz  Wed May 14 13:26:15 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 15 May 2008 08:26:15 +1200
Subject: [antlr-interest] Unquoting strings
In-Reply-To: <2d64f5e90805141229u4b78b6e8j2a82abaf5653b7da@mail.gmail.co
 m>
References: <2d64f5e90805141229u4b78b6e8j2a82abaf5653b7da@mail.gmail.com>
Message-ID: <20080514202632.7B2D011EC77@www.antlr.org>

At 07:29 15/05/2008, Daniel Danciu wrote:
>Browsing through some tutorials, I was left with the impression 
>that appending an exclamation mark to a character would remove 
>that character from the parsed token, e.g.:
>
>fragment
>SingleQuotedString
>   :
>   '\''! // or single quoted string
>   ( '\\'! '\''
>   | ~('\''|'\n'|'\r')
>   )*
>    '\''!;

That works in ANTLR v2, but not v3.  In v3 the ! operator only 
works at the parser level (to leave a token out from the 
automatically-generated AST).

>STRING
>: (DoubleQuotedString | SingleQuotedString)
>   {
>           // Strip the surrounding quotes
>           String txt = getText();
>           setText(txt.substring(1, txt.length() -1));
>   };

That's basically just "what you have to do" in v3.

See: <http://www.antlr.org/wiki/pages/viewpage.action?pageId=1461>

Though, you might also want to handle escape characters at the 
same time.  You will need to do a manual search/replace for those.


From cmundi at gmail.com  Wed May 14 13:30:15 2008
From: cmundi at gmail.com (C. Mundi)
Date: Wed, 14 May 2008 13:30:15 -0700
Subject: [antlr-interest] Don't Shoot! (Getting started w/ANTLR3 and C#)
In-Reply-To: <482AC260.6030504@gmx.de>
References: <e794390805131741h213a098fwae92a15e69dca287@mail.gmail.com>
	<482AC260.6030504@gmx.de>
Message-ID: <e794390805141330m6f99873braa4a2c1700502fa0@mail.gmail.com>

Thanks for asking, Hrn. Luber.  I appreciate your invitation.

I should clearly state that my observations are by no means unique to the
wiki pages describing the C# target.  Similar comments could be made about
many of the wiki pages.The difficulties I have with the wiki pages seem to
fall into a few general classes:

1. Instructions which do not clearly specify the applicable version(s) of
ANTLR.

2. Unspecified or ambiguous paths within archives.  (This challenge is
compounded when the version of ANTLR is ambiguous.)

3. This point concerns specifically the The C# Target wiki
http://www.antlr.org/wiki/display/ANTLR3/Antlr+3+CSharp+Target.  This is a
very helpful page, except that the "Status" section leaves me very wanting
to use the CSharp2 target and very wondering what  requirements I must meet
in my environment.  H. Link has commented extensively on this within the
last day.

I also wish to emphasize that I have had almost no problem with the example
grammars, which are highly informative.

Also -- and this is again a more general comment, not specific to C# -- the
ANTLR documentation is naturally very focused on Java.  I would expect the
other targets to lag the "reference" Java target.  Rapid evolution and an
active developer community make ANTLR very appealing, but may also create
some confusion for people who are new to parsing and are trying to soak up a
lot of information at once.  I'm not so easily scared, being a bit of an OSS
veteran.  But I do think there is plenty of opportunity to give newcomers
more chances to get a toe-hold, for example, by presenting a start-to-finish
example for *each* of the targets (not just C#), starting with a rudimentary
grammar and ending with the necessary dependencies for the build
environment, e.g. Visual Studio.  This would include, again, clear
definition of which version of ANTLR must be used in each case.

I will add all of the assembly references and see if that helps.  But I
think I'm still having a version-skew problem, as H. Link suggests, and you
seem to confirm.

Incidentally, if you are the author of the file describing the "what I have
to do to cut a release" of the C# target using NAnt, then I say  *Thank You*
for a document which I will definitely need.

Finally, thank you for pointing out in the wiki that ANTLRWorks can remotely
debug non-Java parsers.  I look forward to making use of this, as soon as I
have a C# parser running.

I sincerely appreciate your taking the time to help me get started with
ANTLR.

Best Regards,
C. Mundi

On Wed, May 14, 2008 at 3:43 AM, Johannes Luber <jaluber at gmx.de> wrote:

> C. Mundi schrieb:
>
>>
>> Ok.  I have been reading the wiki and experimenting with ANTLRWorks while
>> waiting for the book to arrive in my mailbox.
>> I'm not sure the book will (or should) answer this.  I am looking for a
>> start-to-finish example targeting C#.  The finish line for me is _not_ the
>> output of ANTLR.  My finish line is a Windows dll or exe that actually
>> parses user input.
>>
>
> There are example grammars for C# on the download page.
>
>>
>> I am already able to generate lexing and parsing code for various targets,
>> either with ANTLRWorks or with ANTLR from the Linux command line.
>>  Ultimately I need to build Windows apps, so I need to get the ANTLR
>> environment set up for Dev Studio.  So, newly emboldened by my success on
>> Linux, I tried to port my new skills to Windows by gamely adding an option{
>> language=CSharp; } phrase.  Oh, if only it were so easy!  I got C# code, but
>> I couldn't build it.
>>
>> So I read a number of semi-mutually-contradictory-and-or-incomplete
>> helpful hints on the wiki and by Googling.
>>
>
> Can you describe where you found not-as-helpful-information on the wiki, so
> I can fix it?
>
>>
>> That got me as far as adding a Reference to the Antlr3.Runtime -- huge
>> step forward.
>>
>
> I'm not sure when which assemblies are required, but I always add
> Antlr.Runtime, Antlr.Utilities, antlr.runtime and Antlr.StringTemplate. With
> these you cover all bases.
>
>>
>> Then I ran into this mysterious RecognizerSharedState object in the C#
>> target.  Uh oh.  I guess I'm still missing a Reference to a .NET Assembly,
>> which probably means I skipped an important step, like building it.  I get a
>> vague sense of this from some of the postings, but I guess I'm just dense.
>> Any clues will be greatly appreciated.  I'll be happy to wait for the book
>> to arrive, if it has the answer.  Please be blunt.  Insults can only make me
>> smarter.  :)
>>
>
> My guess is that you are mixing code generation from ANTLR 3.1b1 with a
> library from 3.0.1. They aren't even source compatible. Please use the
> library and generation from the latest build - otherwise they may not work
> together.
>
> Johannes
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080514/5d1cbd4f/attachment.html 

From robin at pozytron.com  Wed May 14 14:39:28 2008
From: robin at pozytron.com (Robin Hamilton-Pennell)
Date: Wed, 14 May 2008 15:39:28 -0600
Subject: [antlr-interest] TYpe-checking and error reporting
In-Reply-To: <C2099EE0-F977-422F-AD24-D9257BB82F96@ucar.edu>
References: <9bfd4b3c0805131738r32bda7bcxcddee82649af4591@mail.gmail.com>
	<C2099EE0-F977-422F-AD24-D9257BB82F96@ucar.edu>
Message-ID: <9bfd4b3c0805141439q3c96d0v97e140f32cc7d173@mail.gmail.com>

Thanks for the information, guys.

Johannes: I agree with you (in fact, as I said, I already am using
symbol tables, and already can successfully detect collisions). The
actual problem I'm facing (sorry if it wasn't clear) is that I don't
know the best way to report the error.

Pete: Good to see I'm not the only one to run into this! You are
right, it's a bit smelly, and it's also pretty similar to what I was
doing (minus the exit() call). I think the best bet at this point,
unless someone has a better suggestion, will be to throw a special
SemanticAnalysisException that stores a message about the type of
error. I will try that next. It still seems a bit smelly, since one of
the goals of the built-in RecognitionException & friends is that they
don't store English strings, isn't it?

I would think that this kind of basic analysis & error reporting is
pretty common in compilers, so I find it a bit surprising there's so
little information about the best technique!

Thanks again for the help,
Robin

On Wed, May 14, 2008 at 10:53 AM,  <siemsen at ucar.edu> wrote:
> I agree - we need better documentation about how to report semantic errors
> in ANTLR.  The book covers how to deal with lexer and parser errors, but not
> semantic errors like the one you describe.  Such errors should follow the
> standard style, with a file name, line number and character number, so I use
> these methods to report them:
> public void errorMessage (TokenStream inp, String msg) {
> String introString = "";
> if (!currentInputFileName.equals("")) {
> int lineNbr = inp.LT(1).getLine();
> int charPosition = inp.LT(1).getCharPositionInLine();
> introString = currentInputFileName + "(" + lineNbr + ":" + charPosition +
> "): ";
> }
> System.err.println(introString + msg);
> }
> public void dieWithMessage (TokenStream inp, String msg) {
> errorMessage(inp, msg);
>        System.exit(1);
> }
> which I call with, like,
> dieWithMessage(input, "class " + classNam + " undefined");
> This "works" but smells bad:
>     1. It needs a global "currentFileName", which changes when there are
> includstream.
>     2. The methods take a TokenStream to get the line number and character
> position.  From reading ANTLR-generated code, I figured out that "input" is
> the token stream.  Perhaps I should pass in the token itself (input.LT(1))
> instead of the whole stream.
>     3. It doesn't use exceptions, which seems wrong.
>     4. Related to #3, it calls System.exit(), which makes unit testing
> difficult.
> Hopefully, this code will provoke enough disgust in better minds that
> they'll post superior approaches :-)
> -- Pete
> On May 13, 2008, at 6:38 PM, Robin Hamilton-Pennell wrote:
>
> Howdy all,
>
> I've been using ANTLR for a little while now and it has been mostly
> smooth sailing. For my target DSL I've successfully built a lexer,
> parser which generates ASTs, and tree grammar to pretty-print the
> ASTs. So, my app works great as nothing more than a pretty printer at
> this point, but it's a step, at least.
>
> I started implementing code to perform some basic static type
> checking. I build symbol tables in the parser, and in the tree grammar
> I am able to access the type information. This I got working as
> expected.
>
> I ran into a snag when attempting to do some error reporting. For the
> purposes of this question, I'll show you a snippet of target code
> (it's in a C-like syntax):
>
> int foo;
> int bar;
> {
>    int foo; // This is valid, as it's in a different scope than the foo
> above
> }
> int foo; // This is illegal, as the variable "foo" in the same scope
> is being redeclared.
>
> I have a method, boolean isDefined(String identifier), which works as
> expected to catch this error (for example, if I embed a
> System.err.println() action). However, I cannot figure out the best
> approach to report the error!
>
> I've perused the book and website to find a solution, and searched the
> mailing list briefly, to no avail. I can use semantic predicates, but
> the resulting error messages are next-to-useless. Has anyone tackled
> this problem before, and if so, what's the recommended path for
> reporting semantic errors (without sem preds, if possible)? I really
> appreciate any help that can be provided.
>
> Thanks!
> Robin
>
>

From adam.rpconnelly at googlemail.com  Wed May 14 14:34:09 2008
From: adam.rpconnelly at googlemail.com (Adam Connelly)
Date: Wed, 14 May 2008 22:34:09 +0100
Subject: [antlr-interest] TYpe-checking and error reporting
In-Reply-To: <C2099EE0-F977-422F-AD24-D9257BB82F96@ucar.edu>
References: <9bfd4b3c0805131738r32bda7bcxcddee82649af4591@mail.gmail.com>
	<C2099EE0-F977-422F-AD24-D9257BB82F96@ucar.edu>
Message-ID: <b9a39b060805141434t9a5f213ucd847c572ab49ebf@mail.gmail.com>

The way that I like to do it is to define exception classes that inherit
from RecognitionException for my semantic errors, and remove the error
reporting from the parser completely.  If you look at the thread, "Better
Error Reporting in ANTLR" you can see how I think it should be done.  Ter's
also put a bug report about it here:
http://www.antlr.org:8888/browse/ANTLR-244.

Not saying it's the best way to do it, but it feels right to me.

Adam

2008/5/14 <siemsen at ucar.edu>:

> I agree - we need better documentation about how to report semantic errors
> in ANTLR.  The book covers how to deal with lexer and parser errors, but not
> semantic errors like the one you describe.  Such errors should follow the
> standard style, with a file name, line number and character number, so I use
> these methods to report them:
>
> public void errorMessage (TokenStream inp, String msg) {
> String introString = "";
> if (!currentInputFileName.equals("")) {
> int lineNbr = inp.LT(1).getLine();
> int charPosition = inp.LT(1).getCharPositionInLine();
> introString = currentInputFileName + "(" + lineNbr + ":" + charPosition +
> "): ";
> }
> System.err.println(introString + msg);
> }
>  public void dieWithMessage (TokenStream inp, String msg) {
> errorMessage(inp, msg);
>         System.exit(1);
> }
>
> which I call with, like,
>
> dieWithMessage(input, "class " + classNam + " undefined");
>
> This "works" but smells bad:
>
>     1. It needs a global "currentFileName", which changes when there are
> includstream.
>     2. The methods take a TokenStream to get the line number and character
> position.  From reading ANTLR-generated code, I figured out that "input" is
> the token stream.  Perhaps I should pass in the token itself (input.LT(1))
> instead of the whole stream.
>     3. It doesn't use exceptions, which seems wrong.
>     4. Related to #3, it calls System.exit(), which makes unit testing
> difficult.
>
> Hopefully, this code will provoke enough disgust in better minds that
> they'll post superior approaches :-)
>
> -- Pete
>
> On May 13, 2008, at 6:38 PM, Robin Hamilton-Pennell wrote:
>
> Howdy all,
>
> I've been using ANTLR for a little while now and it has been mostly
> smooth sailing. For my target DSL I've successfully built a lexer,
> parser which generates ASTs, and tree grammar to pretty-print the
> ASTs. So, my app works great as nothing more than a pretty printer at
> this point, but it's a step, at least.
>
> I started implementing code to perform some basic static type
> checking. I build symbol tables in the parser, and in the tree grammar
> I am able to access the type information. This I got working as
> expected.
>
> I ran into a snag when attempting to do some error reporting. For the
> purposes of this question, I'll show you a snippet of target code
> (it's in a C-like syntax):
>
> int foo;
> int bar;
> {
>    int foo; // This is valid, as it's in a different scope than the foo
> above
> }
> int foo; // This is illegal, as the variable "foo" in the same scope
> is being redeclared.
>
> I have a method, boolean isDefined(String identifier), which works as
> expected to catch this error (for example, if I embed a
> System.err.println() action). However, I cannot figure out the best
> approach to report the error!
>
> I've perused the book and website to find a solution, and searched the
> mailing list briefly, to no avail. I can use semantic predicates, but
> the resulting error messages are next-to-useless. Has anyone tackled
> this problem before, and if so, what's the recommended path for
> reporting semantic errors (without sem preds, if possible)? I really
> appreciate any help that can be provided.
>
> Thanks!
> Robin
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080514/dd00312a/attachment-0001.html 

From adam.rpconnelly at googlemail.com  Wed May 14 15:53:56 2008
From: adam.rpconnelly at googlemail.com (Adam Connelly)
Date: Wed, 14 May 2008 23:53:56 +0100
Subject: [antlr-interest] Error Handling.
In-Reply-To: <CB2C60B8-4B02-4BAF-9157-27AA334145C8@gmail.com>
References: <CB2C60B8-4B02-4BAF-9157-27AA334145C8@gmail.com>
Message-ID: <b9a39b060805141553o5a9cd072w919af137bafdc382@mail.gmail.com>

The default behaviour (AFAIK) is simply to print the errors; if you want to
alter this you pretty much have to override emitErrorMessage.  The methods
in BaseRecognizer to look at are:

reportError() [I doubt you'd want to alter this]
getErrorMessage() [defines the text of the message]
getErrorHeader() [defines the start of the error message e.g. "line 30:20"]
emitErrorMessage() [this has the println call]
displayRecognitionError() [calls getErrorMessage(), getErrorHeader() and
then emitErrorMessage()]

The RecognitionException contains the line and charPositionInLine members
that give you the info about where the error occurred, and a token member.
I think if you want to keep track of errors you'd have to override the
method and store the errors yourself.

So if you don't need to alter the text that represents the message, but just
how the message is output, then you just need to look at emitErrorMessage(),
but I think in your case you may wish to override displayRecognitionError()
so you've still got access to the token, etc.

Hope that helps,
Adam

2008/5/13 Miguel Marques <mig.marques at gmail.com>:

> Hello,
>
> After reading the FAQ and googling I could find exactly what I am looking
> for.
> I've generated a lexer+parser with antlr to a DSL and now I'm integrating
> it with the Eclipse Platform as an editor. So I need to be able to run the
> parser and then retrieve the parsing errors. From what I've understood antlr
> generates all the
> try/catch for all parsing exceptions so that it can continue the parsing
> process by guessing the "next" needed token and it prints the error to the
> stderror. Are those errors kept somewhere? Is there any object that keeps
> info on the line it occured and token name rule, etc?
>
> Miguel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080514/20a6b9c9/attachment.html 

From parrt at cs.usfca.edu  Wed May 14 17:05:26 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 14 May 2008 17:05:26 -0700
Subject: [antlr-interest] basic documentation on grammar composition for v3.1
Message-ID: <284A8C4A-F9C9-4EDD-9EF6-1CD28486F8BD@cs.usfca.edu>

Hi. ANTLR v3.1 (beta) is imminent. just working on the documentation  
and final tweaks from the target language developers. Here is basic  
documentation on composite grammars:

http://www.antlr.org/wiki/display/ANTLR3/Composite+Grammars

  and here are the release notes

http://www.antlr.org/wiki/display/ANTLR3/ANTLR+3.1+Release+Nodes

Ter

From cmundi at gmail.com  Wed May 14 18:02:43 2008
From: cmundi at gmail.com (C. Mundi)
Date: Wed, 14 May 2008 18:02:43 -0700
Subject: [antlr-interest] Release naming convention?
Message-ID: <e794390805141802rb65e5c4w29dd980bbc9fce65@mail.gmail.com>

I just read tparr's note that  3.1 beta is imminent.  Cool.  :)

Please check my sanity here, as I sort out my understanding of the build
labeling used in the ANTLR community.

I just installed antlr-2008-05-07.18 from the build area.

The release notes are labeled as early access and state ANTLR 3.1.  So this
is clearly a pre-3.1 build.  Ok.

The output of java org.antlr.Tool states 3.1b1.

So would I be correct to infer that what I have is 3.1b1 + changes since
3.1b1 ?

Or would I be correct to infer that what I have is what I see some people
referring to as 3.1b2 ?

I'm not anal about this, really.  I'm just trying to establish a basis for
communicating with y'all.

Thanks,
CM

P.S.
I see that antlr-2008-05-07.18 has the
org.antlr.runtime.RecognizerSharedState class I was missing.
I am now able to target CSharp2.  Yeah!
Next step is actually building a C# dll, but that will have to wait for
tomorrow.  :(
Thanks to all who have offered advice!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080514/794dc898/attachment.html 

From ddr1975 at gmail.com  Thu May 15 01:15:02 2008
From: ddr1975 at gmail.com (Daniel Danciu)
Date: Thu, 15 May 2008 10:15:02 +0200
Subject: [antlr-interest] Unquoting strings
In-Reply-To: <482b4af4.06ec720a.0803.ffff9602SMTPIN_ADDED@mx.google.com>
References: <2d64f5e90805141229u4b78b6e8j2a82abaf5653b7da@mail.gmail.com>
	<482b4af4.06ec720a.0803.ffff9602SMTPIN_ADDED@mx.google.com>
Message-ID: <2d64f5e90805150115v6a7add43m340fe7ab0edad99@mail.gmail.com>

Thanks folks!

Daniel

On Wed, May 14, 2008 at 10:26 PM, Gavin Lambert <antlr at mirality.co.nz>
wrote:

> At 07:29 15/05/2008, Daniel Danciu wrote:
>
>> Browsing through some tutorials, I was left with the impression that
>> appending an exclamation mark to a character would remove that character
>> from the parsed token, e.g.:
>>
>> fragment
>> SingleQuotedString
>>  :
>>  '\''! // or single quoted string
>>  ( '\\'! '\''
>>  | ~('\''|'\n'|'\r')
>>  )*
>>   '\''!;
>>
>
> That works in ANTLR v2, but not v3.  In v3 the ! operator only works at the
> parser level (to leave a token out from the automatically-generated AST).
>
>  STRING
>> : (DoubleQuotedString | SingleQuotedString)
>>  {
>>          // Strip the surrounding quotes
>>          String txt = getText();
>>          setText(txt.substring(1, txt.length() -1));
>>  };
>>
>
> That's basically just "what you have to do" in v3.
>
> See: <http://www.antlr.org/wiki/pages/viewpage.action?pageId=1461>
>
> Though, you might also want to handle escape characters at the same time.
>  You will need to do a manual search/replace for those.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080515/0929af8e/attachment.html 

From antlr at mirality.co.nz  Thu May 15 02:31:40 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 15 May 2008 21:31:40 +1200
Subject: [antlr-interest] Release naming convention?
In-Reply-To: <e794390805141802rb65e5c4w29dd980bbc9fce65@mail.gmail.com>
References: <e794390805141802rb65e5c4w29dd980bbc9fce65@mail.gmail.com>
Message-ID: <20080515093150.70C0011EB2C@www.antlr.org>

At 13:02 15/05/2008, C. Mundi wrote:
>Next step is actually building a C# dll, but that will have to 
>wait for tomorrow.  :(
>Thanks to all who have offered advice!

If you just want to use the runtime, then no building is needed -- 
there's a prebuilt one in the zipfile (under runtime\CSharp\bin).


From Gerz at fgan.de  Thu May 15 04:13:34 2008
From: Gerz at fgan.de (Gerz, Michael)
Date: Thu, 15 May 2008 13:13:34 +0200
Subject: [antlr-interest] IndexOutOfBoundsException
Message-ID: <1FF0CFC89178B64DBD5CF6696750AC4306EB94@mailserv1.lorien.fkie.fgan.de>

Hi Terence,

with the latest ANTLR snapshot, we get the exception below. (The bug may not be specific to this snapshot.)

Do you need the corresponding tree grammar? We would have to remove some code before sending it to you.

Best regards,

Michael


ANTLR Parser Generator  Version 3.1b1 (??)  1989-2007
error(10):  internal error: RulesDot.g : java.lang.IndexOutOfBoundsException: Index: 2, Size: 2
java.util.ArrayList.RangeCheck(Unknown Source)
java.util.ArrayList.get(Unknown Source)
org.antlr.misc.IntervalSet.addAll(IntervalSet.java:197)
org.antlr.analysis.LookaheadSet.orInPlace(LookaheadSet.java:56)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:243)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:212)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:212)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:212)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:212)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:212)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:212)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:212)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:241)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:212)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:212)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:212)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:212)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:212)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:212)
org.antlr.analysis.LL1Analyzer.FIRST(LL1Analyzer.java:123)
org.antlr.tool.Grammar.FIRST(Grammar.java:2832)
org.antlr.codegen.CodeGenerator.generateLocalFOLLOW(CodeGenerator.java:567)
org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:2077)
org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1686)
org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1561)
org.antlr.codegen.CodeGenTreeWalker.tree(CodeGenTreeWalker.java:2254)
org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1611)
org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1290)
org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:1063)
org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:779)
org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:570)
org.antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java:512)
org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:318)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:421)
org.antlr.Tool.generateRecognizer(Tool.java:419)
org.antlr.Tool.process(Tool.java:286)
org.antlr.Tool.main(Tool.java:71)


************************************************************************
Dr. Michael Gerz 
FGAN e.V.                                       Phone: +49 228 9435-414
Department FKIE/ITF                             Fax: +49 228 9435-685
Neuenahrer Stra?e 20                            E-Mail: gerz at fgan.de 
53343 Wachtberg-Werthhoven, Germany             WWW: www.fgan.de 
 
Forschungsgesellschaft f?r Angewandte Naturwissenschaften e. V. (FGAN) 
Sitz der Gesellschaft: Bonn 
Registergericht: Amtsgericht Bonn VR 2530 
Vorstand: Dr.rer.nat. R. Dornhaus (Vorst.), Prof. Dr. J. Ender (Stellv.)
 


From shipmen at gmail.com  Thu May 15 08:42:04 2008
From: shipmen at gmail.com (Maciej Bakalarz)
Date: Thu, 15 May 2008 17:42:04 +0200
Subject: [antlr-interest] Simple expression grammar
In-Reply-To: <482ACC3D.8030202@gmx.de>
References: <482AA31F.7040702@gmail.com> <482ACC3D.8030202@gmx.de>
Message-ID: <482C59CC.4050106@gmail.com>

Hi again !

OK I have written my grammar for boolean expressions mentioned earlier 
(like ( (a>=3 || b<=5)&& c>=4 )  ).

But my grammar accept also expressions like "abc def ght" and many other 
strange constructions.

Do you have any clues how to change it to accept only boolean 
expressions, -->nothing more<-- ....

This is grammar:

grammar GuardCondition;

options {
     output=AST;
     ASTLabelType=CommonTree;
backtrack=true;
memoize=true;
}

    @rulecatch {
        catch ( RecognitionException ex ) {
            throw ex;
        }
    }

prog:
	logical_or_expression+
	;

logical_or_expression:
	logical_and_expression (OR_OP^ logical_and_expression)*
	;

logical_and_expression
	: rel_expression (AND_OP^ rel_expression)*
	;

rel_expression
	: expression (REL_OP^ expression)*
	| LPAREN! prog RPAREN!
	| NEG^ LPAREN! prog RPAREN!	
	;
expression
	: ID | INT | NEG^ ID
	;

NEG	:	'!';
LPAREN 	:	'(';
RPAREN	:	')';
REL_OP   	: 	 '==' | '<' | '>' | '<=' | '>='|'!=';
OR_OP 	: 	'||';
AND_OP 	:	 '&&';
ID  	:  	ALFA ( ALFA | INT ) *;
ALFA	:	('a'..'z'|'A'..'Z') ;
INT 	:  	 '0'..'9'+;
WS  	:   	(' '|'\t')+ {skip();};


Thanks
Maciej Bakalarz


From jimi at temporal-wave.com  Thu May 15 08:56:08 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 15 May 2008 08:56:08 -0700
Subject: [antlr-interest] Simple expression grammar
In-Reply-To: <482C59CC.4050106@gmail.com>
References: <482AA31F.7040702@gmail.com> <482ACC3D.8030202@gmx.de>
	<482C59CC.4050106@gmail.com>
Message-ID: <1210866968.16231.30.camel@jimi>

On Thu, 2008-05-15 at 17:42 +0200, Maciej Bakalarz wrote:

> Hi again !
> 
> OK I have written my grammar for boolean expressions mentioned earlier 
> (like ( (a>=3 || b<=5)&& c>=4 )  ).
> 
> But my grammar accept also expressions like "abc def ght" and many other 
> strange constructions


I think it is only accepting that because you have used:

logical_or_expression+

Remove the + and it will only accept a single logical expression. this
code accepts  abc def ght as 3 separate logical_or_expressions.


> .
> 
> Do you have any clues how to change it to accept only boolean 
> expressions, -->nothing more<-- ....
> 
> This is grammar:
> 
> grammar GuardCondition;
> 
> options {
>      output=AST;
>      ASTLabelType=CommonTree;
> backtrack=true;
> memoize=true;
> }
> 
>     @rulecatch {
>         catch ( RecognitionException ex ) {
>             throw ex;
>         }
>     }
> 
> prog:
> 	logical_or_expression+
> 	;
> 


Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080515/438b46fa/attachment-0001.html 

From parrt at cs.usfca.edu  Thu May 15 09:11:58 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 15 May 2008 09:11:58 -0700
Subject: [antlr-interest] Release naming convention?
In-Reply-To: <e794390805141802rb65e5c4w29dd980bbc9fce65@mail.gmail.com>
References: <e794390805141802rb65e5c4w29dd980bbc9fce65@mail.gmail.com>
Message-ID: <B860CABD-7109-486B-8D97-8C5CD607F701@cs.usfca.edu>


On May 14, 2008, at 6:02 PM, C. Mundi wrote:
> The output of java org.antlr.Tool states 3.1b1.
>
> So would I be correct to infer that what I have is 3.1b1 + changes  
> since 3.1b1 ?

well, 3.1b1 is me being lazy.  it will be the first formal beta  
release sometime this week.

Ter

From shipmen at gmail.com  Thu May 15 11:07:37 2008
From: shipmen at gmail.com (Maciej Bakalarz)
Date: Thu, 15 May 2008 20:07:37 +0200
Subject: [antlr-interest] Simple expression grammar
In-Reply-To: <1210866968.16231.30.camel@jimi>
References: <482AA31F.7040702@gmail.com>
	<482ACC3D.8030202@gmx.de>	<482C59CC.4050106@gmail.com>
	<1210866968.16231.30.camel@jimi>
Message-ID: <482C7BE9.9000206@gmail.com>

>> OK I have written my grammar for boolean expressions mentioned earlier 
>> (like ( (a>=3 || b<=5)&& c>=4 )  ).
>>
>> But my grammar accept also expressions like "abc def ght" and many other 
>> strange constructions
> 
> I think it is only accepting that because you have used:
> 
> logical_or_expression+
> 
> Remove the + and it will only accept a single logical expression. this 
> code accepts  abc def ght as 3 separate logical_or_expressions.

I have tried it but ... when I remove '+' it will not parse correctly 
expression like "x>=4 || b<=5 && d<=5" . It will parse only 'x'

Thanks
Maciek Bakalarz

From cmundi at gmail.com  Thu May 15 11:42:06 2008
From: cmundi at gmail.com (C. Mundi)
Date: Thu, 15 May 2008 11:42:06 -0700
Subject: [antlr-interest] Release naming convention?
In-Reply-To: <B860CABD-7109-486B-8D97-8C5CD607F701@cs.usfca.edu>
References: <e794390805141802rb65e5c4w29dd980bbc9fce65@mail.gmail.com>
	<B860CABD-7109-486B-8D97-8C5CD607F701@cs.usfca.edu>
Message-ID: <e794390805151142o606a7717s73703898b3ba6ab5@mail.gmail.com>

Thanks.  I eventually realized that clearly stating versions in
documentation is only as valuable as my ability to disambiguate builds.  :)

Although I have not studied your build process for ANTLR in detail, it's
evidently highly automated and might lend itself to automagical build
numbering.  Just a thought.

I have to say, this thing is way cool.  It's easy to see why you've been
jazzed about it for so long.  This so blows away yacc/bison.  Thank you for
that, too.

Thanks,
CM


On Thu, May 15, 2008 at 9:11 AM, Terence Parr <parrt at cs.usfca.edu> wrote:

>
> On May 14, 2008, at 6:02 PM, C. Mundi wrote:
>
>> The output of java org.antlr.Tool states 3.1b1.
>>
>> So would I be correct to infer that what I have is 3.1b1 + changes since
>> 3.1b1 ?
>>
>
> well, 3.1b1 is me being lazy.  it will be the first formal beta release
> sometime this week.
>
> Ter
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080515/82aeead2/attachment.html 

From parrt at cs.usfca.edu  Thu May 15 13:12:30 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 15 May 2008 13:12:30 -0700
Subject: [antlr-interest] Release naming convention?
In-Reply-To: <e794390805151142o606a7717s73703898b3ba6ab5@mail.gmail.com>
References: <e794390805141802rb65e5c4w29dd980bbc9fce65@mail.gmail.com>
	<B860CABD-7109-486B-8D97-8C5CD607F701@cs.usfca.edu>
	<e794390805151142o606a7717s73703898b3ba6ab5@mail.gmail.com>
Message-ID: <0D0C3B61-17C0-41D7-BFCC-91F93EEEB673@cs.usfca.edu>


On May 15, 2008, at 11:42 AM, C. Mundi wrote:
>
> Thanks.  I eventually realized that clearly stating versions in  
> documentation is only as valuable as my ability to disambiguate  
> builds.  :)
>
> Although I have not studied your build process for ANTLR in detail,  
> it's evidently highly automated and might lend itself to  
> automagical build numbering.  Just a thought.

Yeah, i'm going to modify things to put date into version number.

> I have to say, this thing is way cool.  It's easy to see why you've  
> been jazzed about it for so long.  This so blows away yacc/bison.   
> Thank you for that, too.

my pleasure!
Ter

From JALuber at gmx.de  Thu May 15 13:35:09 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Thu, 15 May 2008 22:35:09 +0200
Subject: [antlr-interest] Simple expression grammar
In-Reply-To: <482C7BE9.9000206@gmail.com>
References: <482AA31F.7040702@gmail.com>	<482ACC3D.8030202@gmx.de>
	<482C59CC.4050106@gmail.com>	<1210866968.16231.30.camel@jimi>
	<482C7BE9.9000206@gmail.com>
Message-ID: <20080515203509.14230@gmx.net>

> >> OK I have written my grammar for boolean expressions mentioned earlier 
> >> (like ( (a>=3 || b<=5)&& c>=4 )  ).
> >>
> >> But my grammar accept also expressions like "abc def ght" and many
> other 
> >> strange constructions
> > 
> > I think it is only accepting that because you have used:
> > 
> > logical_or_expression+
> > 
> > Remove the + and it will only accept a single logical expression. this 
> > code accepts  abc def ght as 3 separate logical_or_expressions.
> 
> I have tried it but ... when I remove '+' it will not parse correctly 
> expression like "x>=4 || b<=5 && d<=5" . It will parse only 'x'
> 
> Thanks
> Maciek Bakalarz

How about

logical_or_expression EOF

?

Johannes
-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx

From patricioros.dev at gmail.com  Thu May 15 13:41:44 2008
From: patricioros.dev at gmail.com (Patricio Ros)
Date: Thu, 15 May 2008 22:41:44 +0200
Subject: [antlr-interest] A little bugfix to Ruby.stg and an example
Message-ID: <6869fd1f0805151341n3adb4a01y3ce2ffb7e4865e9e@mail.gmail.com>

    Hi everybody,
    This is my first post in this forum. I'm a ruby newbie and a antlr
newbie too but, while I was playing with antlr and ruby, I think I've found
some little bugs in Ruby.stg file, so I've coded a little patch. You can
find a tiny antlr parser project made with ruby and netbeans 6 here:

    http://patricioros.dev.googlepages.com/HelloRubyAntlr.zip

    It contains the diff file, recompiled antlr tool, rakefile, readme and
so on. The project is based on other antlr java project called HelloAntlr by
Martin Fowler:

    http://martinfowler.com/bliki/HelloAntlr.html
    (maybe you like this too: http://martinfowler.com/bliki/HelloRacc.html)

    I think there are too few ruby antlr examples, so I hope this may help
someone.

    I sent this bugfix to Martin Taverso, the main of antlr ruby target
developer, about ten days ago. No answer yet. He must be too busy.

    Sorry for my English and thank you for your attention.
    See you


    Patricio M. Ros
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080515/7c9ad46b/attachment.html 

From JALuber at gmx.de  Thu May 15 14:42:29 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Thu, 15 May 2008 23:42:29 +0200
Subject: [antlr-interest] Don't Shoot! (Getting started w/ANTLR3 and C#)
Message-ID: <20080515214229.312530@gmx.net>

Hi!

Sorry for the lateness, I've got some computer troubles since today...

> Thanks for asking, Hrn. Luber.  I appreciate your invitation.
> 
> I should clearly state that my observations are by no means unique to the
> wiki pages describing the C# target.  Similar comments could be made about
> many of the wiki pages.The difficulties I have with the wiki pages seem to
> fall into a few general classes:
> 
> 1. Instructions which do not clearly specify the applicable version(s) of
> ANTLR.

Before ANTLR 3.1 there was usually no need. The worst case would have been the use of a daily build because of a bug. In general, if no version number is mentioned then all versions should work with it. It'S possible that a later version of ANTLR invalidates the example, but that can be rectified only if noticed.
> 
> 2. Unspecified or ambiguous paths within archives.  (This challenge is
> compounded when the version of ANTLR is ambiguous.)

The directory structure remains largely unchanged irregardly of the current version. Admittedly, that fact is unknown for new users. Still, without having been giving concrete webpages, the occurrences can't be fixed.
 
> 3. This point concerns specifically the The C# Target wiki
> http://www.antlr.org/wiki/display/ANTLR3/Antlr+3+CSharp+Target.  This is a
> very helpful page, except that the "Status" section leaves me very wanting
> to use the CSharp2 target and very wondering what  requirements I must
> meet
> in my environment.  H. Link has commented extensively on this within the
> last day.

I have to disagree regarding the Status section. It clearly specifies the only 3.1 includes CSharp2. The only problem could be the information where to get 3.1. I actually expected a beta release to be out by the time I have edited the wiki page so I didn't include a statement where to get this prelease. Especially, because I expect to have it prominently featured on the mainpage. Is it unreasonable that I expect from people building compilers to know the basics of release numbers?

(BTW, it seems that my predecessor has cleaned up the page a bit, so I refer to my version of the Status section.)
> 
> I also wish to emphasize that I have had almost no problem with the
> example
> grammars, which are highly informative.
> 
> Also -- and this is again a more general comment, not specific to C# --
> the
> ANTLR documentation is naturally very focused on Java.  I would expect the
> other targets to lag the "reference" Java target.  Rapid evolution and an
> active developer community make ANTLR very appealing, but may also create
> some confusion for people who are new to parsing and are trying to soak up
> a
> lot of information at once.  I'm not so easily scared, being a bit of an
> OSS
> veteran.  But I do think there is plenty of opportunity to give newcomers
> more chances to get a toe-hold, for example, by presenting a
> start-to-finish
> example for *each* of the targets (not just C#), starting with a
> rudimentary
> grammar and ending with the necessary dependencies for the build
> environment, e.g. Visual Studio.  This would include, again, clear
> definition of which version of ANTLR must be used in each case.

Once again, I don't know which wiki pages you refer to. Next to be more generous with links you could also get an account for the wiki and fix the missing information once you discover it. I don't mean to sound snarky but I won't look at every page on the wiki and guess if fixing is required there.
> 
> I will add all of the assembly references and see if that helps.  But I
> think I'm still having a version-skew problem, as H. Link suggests, and
> you
> seem to confirm.
> 
> Incidentally, if you are the author of the file describing the "what I
> have
> to do to cut a release" of the C# target using NAnt, then I say  *Thank
> You*
> for a document which I will definitely need.

That was done by the previous maintainers. Everything with Kunle Odutola was at least initially theirs. Although as it has been pointed out already, the assemblies are already included in the archive and uptodate.
> 
> Finally, thank you for pointing out in the wiki that ANTLRWorks can
> remotely
> debug non-Java parsers.  I look forward to making use of this, as soon as
> I
> have a C# parser running.

I'm quite sure that Kunle added that text, probably after I asked around about the very topic myself. :)
> 
> I sincerely appreciate your taking the time to help me get started with
> ANTLR.
> 
> Best Regards,
> C. Mundi

No problem. :)

Johannes
> 
> On Wed, May 14, 2008 at 3:43 AM, Johannes Luber <jaluber at gmx.de> wrote:
> 
> > C. Mundi schrieb:
> >
> >>
> >> Ok.  I have been reading the wiki and experimenting with ANTLRWorks
> while
> >> waiting for the book to arrive in my mailbox.
> >> I'm not sure the book will (or should) answer this.  I am looking for a
> >> start-to-finish example targeting C#.  The finish line for me is _not_
> the
> >> output of ANTLR.  My finish line is a Windows dll or exe that actually
> >> parses user input.
> >>
> >
> > There are example grammars for C# on the download page.
> >
> >>
> >> I am already able to generate lexing and parsing code for various
> targets,
> >> either with ANTLRWorks or with ANTLR from the Linux command line.
> >>  Ultimately I need to build Windows apps, so I need to get the ANTLR
> >> environment set up for Dev Studio.  So, newly emboldened by my success
> on
> >> Linux, I tried to port my new skills to Windows by gamely adding an
> option{
> >> language=CSharp; } phrase.  Oh, if only it were so easy!  I got C#
> code, but
> >> I couldn't build it.
> >>
> >> So I read a number of semi-mutually-contradictory-and-or-incomplete
> >> helpful hints on the wiki and by Googling.
> >>
> >
> > Can you describe where you found not-as-helpful-information on the wiki,
> so
> > I can fix it?
> >
> >>
> >> That got me as far as adding a Reference to the Antlr3.Runtime -- huge
> >> step forward.
> >>
> >
> > I'm not sure when which assemblies are required, but I always add
> > Antlr.Runtime, Antlr.Utilities, antlr.runtime and Antlr.StringTemplate.
> With
> > these you cover all bases.
> >
> >>
> >> Then I ran into this mysterious RecognizerSharedState object in the C#
> >> target.  Uh oh.  I guess I'm still missing a Reference to a .NET
> Assembly,
> >> which probably means I skipped an important step, like building it.  I
> get a
> >> vague sense of this from some of the postings, but I guess I'm just
> dense.
> >> Any clues will be greatly appreciated.  I'll be happy to wait for the
> book
> >> to arrive, if it has the answer.  Please be blunt.  Insults can only
> make me
> >> smarter.  :)
> >>
> >
> > My guess is that you are mixing code generation from ANTLR 3.1b1 with a
> > library from 3.0.1. They aren't even source compatible. Please use the
> > library and generation from the latest build - otherwise they may not
> work
> > together.
> >
> > Johannes
> >

-- 
249 Spiele f?r nur 1 Preis. Die GMX Spieleflatrate schon ab 9,90 Euro.
Neu: Asterix bei den Olympischen Spielen: http://flat.games.gmx.de

From parrt at cs.usfca.edu  Thu May 15 15:28:15 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 15 May 2008 15:28:15 -0700
Subject: [antlr-interest] don't use richtext editor in wiki
Message-ID: <B5A45856-F3A8-44A6-B195-C196C76A4937@cs.usfca.edu>

it's messed up and messes up the files...

Gerald R says:

> Ok, after a bit of Googling, seems a known bug that the Confluence  
> rich editor strips the escapes from in front of stars, and the star  
> then gets rendered as the graphic.
>
> http://jira.atlassian.com/browse/CONF-7491
> http://jira.atlassian.com/browse/CONF-5258
> http://jira.atlassian.com/browse/CONF-6422

Thanks.
Ter

From JALuber at gmx.de  Thu May 15 15:31:20 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Fri, 16 May 2008 00:31:20 +0200
Subject: [antlr-interest] a few C# questions,
	plus ANTLR version  questions
Message-ID: <20080515223120.312520@gmx.net>

> At 23:21 14/05/2008, Johannes Luber wrote:
>  >What resources does Intellisense need actually? As I can use the 
> 
>  >source files I don't have difficulties with Intellisense myself, 
> 
>  >but that doesn't help you. In the case of still missing data, we 
> 
>  >can talk about further contributions.
> 
> The biggest aid to Intellisense is to enable XML documentation 
> (project properties, Build, Output, XML Documentation File [your 
> location may vary depending on IDE version]), then include the 
> resulting .xml file in the binary distribution as well.
> 
> Of course that assumes you've been using XMLdocs in the C# 
> source.  A cursory glance at it seems to show sporadic coverage 
> (though not to worry -- enabling that option will generate 
> compiler warnings for any publically-visible but undocumented 
> elements).
> 
> The main thing to bear in mind is that Intellisense only really 
> uses the <summary> and <param> elements.  While adding the other 
> stuff is useful (both for reference in the source code and if you 
> decide to run a full HTML doc generation), just remember that 
> those need to be sufficiently understandable by themselves for the 
> people who are only using Intellisense.

I suppose that you, Hamilton, can add additional XML comments to the sources. If you are still interested in helping around, sign a ANTLR contribution agreement and get a perforce account from Ter. Then you can add the XML output to the distribution.

Johannes

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

From JALuber at gmx.de  Thu May 15 15:42:09 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Fri, 16 May 2008 00:42:09 +0200
Subject: [antlr-interest] Composite Grammar problem/CoomonToken suggestion
Message-ID: <20080515224209.312560@gmx.net>

Hi!

Thinking about the "first comes first"-rule precendence in inheriting the grammars, I came up with a case that doesn't seem to be supported. If grammar A defines the rules r and s, as does grammar B, then the rules in B are ignored. What if you want only the rule s in B instead of s in A taking precedence? Switching the grammars around doesn't help.

Also did you see my suggestion regarding CommonToken? If you add a string field then "!" can be made work in the lexer without sacrificing speed for the normal cases. It just requires an overhead for the pointer.

Johannes
-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx

From cmundi at gmail.com  Thu May 15 16:31:24 2008
From: cmundi at gmail.com (C. Mundi)
Date: Thu, 15 May 2008 16:31:24 -0700
Subject: [antlr-interest] Don't Shoot! (Getting started w/ANTLR3 and C#)
In-Reply-To: <20080515214229.312530@gmx.net>
References: <20080515214229.312530@gmx.net>
Message-ID: <e794390805151631p6bce2fbbi9ba8cb9e2f666f1e@mail.gmail.com>

Hrn. Luber,

No need to apologize.  As I mentioned in my first post, I don't bruise
easily.  :)

As I imperfectly tried to convey, my observations on the docs are mostly of
a general nature, not so much about the C# target.  But I appreciate your
jumping in to help anyway.  And where my comments do concern the C# target,
I appreciate that you have inherited material from previous contributors.  I
regret that the lack of clarity of my comments caused you any inconvenience.

I will agree to differ with you on one point.  I take very careful note of
release numbers.  And, for that reason, I mentioned in another post
yesterday that the version numbering of the builds themselves tends to
confound parsing of the online docs.  Perhaps you have seen tparr's
informative response.  H. Link's recent observation on the dangers attendant
to references to unreleased versions as if they were released versions also
remains relevant to all documentation.

Thanks to helpful hints from you and others, with less than eight hours'
effort on my part, I am now happily building C# .NET 2 class libraries in
Visual Studio based on the 2008-05-07.18 build of ANTLR and the CSharp2
target.  This would not have been possible without such a fantastic tool as
ANTLR and its enthusiastic community.

Best Regards,
CM


On Thu, May 15, 2008 at 2:42 PM, Johannes Luber <JALuber at gmx.de> wrote:

> Hi!
>
> Sorry for the lateness, I've got some computer troubles since today...
>
> > Thanks for asking, Hrn. Luber.  I appreciate your invitation.
> >
> > I should clearly state that my observations are by no means unique to the
> > wiki pages describing the C# target.  Similar comments could be made
> about
> > many of the wiki pages.The difficulties I have with the wiki pages seem
> to
> > fall into a few general classes:
> >
> > 1. Instructions which do not clearly specify the applicable version(s) of
> > ANTLR.
>
> Before ANTLR 3.1 there was usually no need. The worst case would have been
> the use of a daily build because of a bug. In general, if no version number
> is mentioned then all versions should work with it. It'S possible that a
> later version of ANTLR invalidates the example, but that can be rectified
> only if noticed.
> >
> > 2. Unspecified or ambiguous paths within archives.  (This challenge is
> > compounded when the version of ANTLR is ambiguous.)
>
> The directory structure remains largely unchanged irregardly of the current
> version. Admittedly, that fact is unknown for new users. Still, without
> having been giving concrete webpages, the occurrences can't be fixed.
>
> > 3. This point concerns specifically the The C# Target wiki
> > http://www.antlr.org/wiki/display/ANTLR3/Antlr+3+CSharp+Target.  This is
> a
> > very helpful page, except that the "Status" section leaves me very
> wanting
> > to use the CSharp2 target and very wondering what  requirements I must
> > meet
> > in my environment.  H. Link has commented extensively on this within the
> > last day.
>
> I have to disagree regarding the Status section. It clearly specifies the
> only 3.1 includes CSharp2. The only problem could be the information where
> to get 3.1. I actually expected a beta release to be out by the time I have
> edited the wiki page so I didn't include a statement where to get this
> prelease. Especially, because I expect to have it prominently featured on
> the mainpage. Is it unreasonable that I expect from people building
> compilers to know the basics of release numbers?
>
> (BTW, it seems that my predecessor has cleaned up the page a bit, so I
> refer to my version of the Status section.)
> >
> > I also wish to emphasize that I have had almost no problem with the
> > example
> > grammars, which are highly informative.
> >
> > Also -- and this is again a more general comment, not specific to C# --
> > the
> > ANTLR documentation is naturally very focused on Java.  I would expect
> the
> > other targets to lag the "reference" Java target.  Rapid evolution and an
> > active developer community make ANTLR very appealing, but may also create
> > some confusion for people who are new to parsing and are trying to soak
> up
> > a
> > lot of information at once.  I'm not so easily scared, being a bit of an
> > OSS
> > veteran.  But I do think there is plenty of opportunity to give newcomers
> > more chances to get a toe-hold, for example, by presenting a
> > start-to-finish
> > example for *each* of the targets (not just C#), starting with a
> > rudimentary
> > grammar and ending with the necessary dependencies for the build
> > environment, e.g. Visual Studio.  This would include, again, clear
> > definition of which version of ANTLR must be used in each case.
>
> Once again, I don't know which wiki pages you refer to. Next to be more
> generous with links you could also get an account for the wiki and fix the
> missing information once you discover it. I don't mean to sound snarky but I
> won't look at every page on the wiki and guess if fixing is required there.
> >
> > I will add all of the assembly references and see if that helps.  But I
> > think I'm still having a version-skew problem, as H. Link suggests, and
> > you
> > seem to confirm.
> >
> > Incidentally, if you are the author of the file describing the "what I
> > have
> > to do to cut a release" of the C# target using NAnt, then I say  *Thank
> > You*
> > for a document which I will definitely need.
>
> That was done by the previous maintainers. Everything with Kunle Odutola
> was at least initially theirs. Although as it has been pointed out already,
> the assemblies are already included in the archive and uptodate.
> >
> > Finally, thank you for pointing out in the wiki that ANTLRWorks can
> > remotely
> > debug non-Java parsers.  I look forward to making use of this, as soon as
> > I
> > have a C# parser running.
>
> I'm quite sure that Kunle added that text, probably after I asked around
> about the very topic myself. :)
> >
> > I sincerely appreciate your taking the time to help me get started with
> > ANTLR.
> >
> > Best Regards,
> > C. Mundi
>
> No problem. :)
>
> Johannes
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080515/ea7a5813/attachment-0001.html 

From parrt at cs.usfca.edu  Thu May 15 18:18:00 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 15 May 2008 18:18:00 -0700
Subject: [antlr-interest] adding more tree doc
Message-ID: <90297E9F-BC1A-4431-BF55-EF6CBE81C97B@cs.usfca.edu>

http://www.antlr.org/wiki/display/ANTLR3/Tree+construction

discusses new tree construction for tree parsers and the automatic  
error node insertion.  Oh, and the new heterogeneous tree construction  
stuff.

Ter

From jhurstus at gmail.com  Thu May 15 21:19:54 2008
From: jhurstus at gmail.com (Joey Hurst)
Date: Thu, 15 May 2008 21:19:54 -0700
Subject: [antlr-interest] JavaScript Target
Message-ID: <eeed9d0b0805152119t21dd6261hc2380e7bc1a44069@mail.gmail.com>

Hello all,
For the last few months I've been working on a JavaScript ANTLR target.
Things are coming along quite well; as of today the target passes most of
the tests (ported to JsUnit) shipped with the 3.0.1 source distribution.
I've focused on the tests in the runtime/Python/tests/ directory, although
there are others too.  I've maintained API compatibility with the Java
target where possible, but there are a few places where JavaScript couldn't
quite handle the task at hand (e.g. there is no reliable way to do runtime
stack reflection in EcmaScript/JavaScript version 3).

I write this message because I wanted to get a couple legal and scheduling
issues cleared up before I continue any further:

1) 99% of the JavaScript target code is original (although heavily inspired,
of course, by the other targets).  The remaining 1% consists of a modified
version of the Yahoo class provided by the Yahoo UI Library.  This code is
licensed under the BSD license like ANTLR, so I assume this won't cause any
problems.  If this is an issue I could rewrite the code, but it would be a
hassle.  Here's a link to the YUI license:
http://developer.yahoo.com/yui/license.html
Here's a link to the Yahoo class docs for anyone who is curious:
http://developer.yahoo.com/yui/yahoo/

2) It appears that the 3.1 release is imminent.  My work has been based off
the 3.01 release to date.  Do y'all think it would be valuable to create a
finished 3.0.1 compatible version of the JavaScript target, or should I port
what I have now to 3.1 and release that?

I'll send out the documentation and code in about another month.  It should
be complete and pretty robust at that time.

Terence: I'm a fellow SF denizen.  I'll have to buy you a beer sometime in
appreciation for this great tool!

Thanks,
Joey Hurst
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080515/3457f895/attachment.html 

From antlr-list at arizona-software.ch  Thu May 15 22:51:16 2008
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Thu, 15 May 2008 22:51:16 -0700
Subject: [antlr-interest] Fw:  Command line options for ANTLRWORKS ?
In-Reply-To: <759691.62996.qm@web54604.mail.re2.yahoo.com>
References: <759691.62996.qm@web54604.mail.re2.yahoo.com>
Message-ID: <9DDBC342-0103-49FE-AB60-9BA213EB43C0@arizona-software.ch>

Use -f <file> when launching ANTLRWorks to open the grammar.

Jean

On May 14, 2008, at 8:21 AM, Kamal Verma wrote:

>
> Wonderful. Where do you think I can find instructions?
>
> Find attached is the registry file that associates grammar file in  
> Windows XP, needs more testing.
>
>
> ----- Original Message ----
> From: Gavin Lambert <antlr at mirality.co.nz>
> To: Kamal Verma <kverma at yahoo.com>; antlr-interest at antlr.org
> Sent: Wednesday, May 14, 2008 8:48:23 AM
> Subject: Re: [antlr-interest] Command line options for ANTLRWORKS ?
>
> At 00:32 15/05/2008, Kamal Verma wrote:
> >I will like to associate all the .g files extension to
> >ANTLRWORKS. For that I should be able to load .g file on the
> >command line. Like,
> >
> >java -jar antlrwk.jar -open "Filename.g"
>
> Doable, but the instructions differ depending on what operating
> system and version you're using.
>
>
>
> <AssociateGrammerFilesWithAntlrWorks.zip>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080515/c582b867/attachment.html 

From shipmen at gmail.com  Fri May 16 01:40:37 2008
From: shipmen at gmail.com (Maciej Bakalarz)
Date: Fri, 16 May 2008 10:40:37 +0200
Subject: [antlr-interest] Simple expression grammar
In-Reply-To: <20080515203509.14230@gmx.net>
References: <482AA31F.7040702@gmail.com>	<482ACC3D.8030202@gmx.de>	<482C59CC.4050106@gmail.com>	<1210866968.16231.30.camel@jimi>
	<482C7BE9.9000206@gmail.com> <20080515203509.14230@gmx.net>
Message-ID: <482D4885.2060101@gmail.com>


>>>> OK I have written my grammar for boolean expressions mentioned earlier 
>>>> (like ( (a>=3 || b<=5)&& c>=4 )  ).
>>>>
>>>> But my grammar accept also expressions like "abc def ght" and many
>> other 
>>>> strange constructions
>>> I think it is only accepting that because you have used:
>>>
>>> logical_or_expression+
>>>
>>> Remove the + and it will only accept a single logical expression. this 
>>> code accepts  abc def ght as 3 separate logical_or_expressions.
>> I have tried it but ... when I remove '+' it will not parse correctly 
>> expression like "x>=4 || b<=5 && d<=5" . It will parse only 'x'

> How about 
> logical_or_expression EOF

Ok thanks for this clue. I have changed two things:

Added EOF in prog:

	"prog: 	logical_or_expression EOF!"

And changed definition of WS so it is using channel now instead of skip():

	WS  	:   	(' '|'\t')+ { $channel = HIDDEN;};

Best regards
Maciej Bakalarz

From antlr at mirality.co.nz  Fri May 16 00:39:28 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 16 May 2008 19:39:28 +1200
Subject: [antlr-interest] Composite Grammar problem/CoomonToken
 suggestion
In-Reply-To: <20080515224209.312560@gmx.net>
References: <20080515224209.312560@gmx.net>
Message-ID: <20080516084331.E300411ECB5@www.antlr.org>

At 10:42 16/05/2008, Johannes Luber wrote:
 >Thinking about the "first comes first"-rule precendence in
 >inheriting the grammars, I came up with a case that doesn't seem 
to
 >be supported. If grammar A defines the rules r and s, as does
 >grammar B, then the rules in B are ignored. What if you want 
only
 >the rule s in B instead of s in A taking precedence? Switching 
the
 >grammars around doesn't help.

Bear in mind that I haven't so much as even glanced at the grammar 
inheritance stuff yet, but assuming it operates similar to general 
inheritance -- can you factor out one of the rules to a common 
base grammar?  That ought to sort it out.

 >Also did you see my suggestion regarding CommonToken? If you add 
a
 >string field then "!" can be made work in the lexer without
 >sacrificing speed for the normal cases. It just requires an
 >overhead for the pointer.

I would love for ! to work in the lexer again.  Although for my 
purposes it's not especially useful unless it also works in 
fragment rules, which is a bit of a trickier task (with the 
current design).


From fyaoxy at gmail.com  Fri May 16 02:04:59 2008
From: fyaoxy at gmail.com (=?GB2312?B?z/LRxQ==?=)
Date: Fri, 16 May 2008 17:04:59 +0800
Subject: [antlr-interest] Simple expression grammar
In-Reply-To: <482C59CC.4050106@gmail.com>
References: <482AA31F.7040702@gmail.com> <482ACC3D.8030202@gmx.de>
	<482C59CC.4050106@gmail.com>
Message-ID: <91dd9a4f0805160204o68fd7b6ewc44ce99dbb4c51ff@mail.gmail.com>

Hi,
If so many other strange constructions, I have an idea:
1, clean your grammar
2, make a min AST model
3, post-process on the AST model.

So, there has more scalabilities.You can use so many strategies to
post-process it. (I call it Object-Protocol layer).
There is a test-try example at http://on.dev.java.net
which ANT-ON sample use this protocol style processing.
And now, I continue this style to construtor an UI builder, seems not bad.

Regards,
Qinxian

2008/5/15 Maciej Bakalarz <shipmen at gmail.com>:

> Hi again !
>
> OK I have written my grammar for boolean expressions mentioned earlier
> (like ( (a>=3 || b<=5)&& c>=4 )  ).
>
> But my grammar accept also expressions like "abc def ght" and many other
> strange constructions.
>
> Do you have any clues how to change it to accept only boolean expressions,
> -->nothing more<-- ....
>
> This is grammar:
>
> grammar GuardCondition;
>
> options {
>    output=AST;
>    ASTLabelType=CommonTree;
> backtrack=true;
> memoize=true;
> }
>
>   @rulecatch {
>       catch ( RecognitionException ex ) {
>           throw ex;
>       }
>   }
>
> prog:
>        logical_or_expression+
>        ;
>
> logical_or_expression:
>        logical_and_expression (OR_OP^ logical_and_expression)*
>        ;
>
> logical_and_expression
>        : rel_expression (AND_OP^ rel_expression)*
>        ;
>
> rel_expression
>        : expression (REL_OP^ expression)*
>        | LPAREN! prog RPAREN!
>        | NEG^ LPAREN! prog RPAREN!
>        ;
> expression
>        : ID | INT | NEG^ ID
>        ;
>
> NEG     :       '!';
> LPAREN  :       '(';
> RPAREN  :       ')';
> REL_OP          :        '==' | '<' | '>' | '<=' | '>='|'!=';
> OR_OP   :       '||';
> AND_OP  :        '&&';
> ID      :       ALFA ( ALFA | INT ) *;
> ALFA    :       ('a'..'z'|'A'..'Z') ;
> INT     :        '0'..'9'+;
> WS      :       (' '|'\t')+ {skip();};
>
>
> Thanks
> Maciej Bakalarz
>
>


-- 
??
??
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080516/16b54472/attachment.html 

From manunews at gmail.com  Fri May 16 04:47:02 2008
From: manunews at gmail.com (Manu)
Date: Fri, 16 May 2008 13:47:02 +0200
Subject: [antlr-interest] RewriteEmptyStreamException
Message-ID: <96f4581f0805160447l574fa56es5e270571bfb26805@mail.gmail.com>

I'm using ANTLR v3.0.1 with C# templates.

The following grammar:

grammar Orders;

options
{
	language=CSharp;
	output=AST;
	ASTLabelType=CommonTree;
}

tokens
{
	CABECERA;
	DETALLE;
	RESUMEN;
	RESTO;
}

@header {
using System.Text;
}

@rulecatch {
}

s: mensajeORDER EOF -> mensajeORDER;

mensajeORDER: HEADER_ID CR LF linea* (CR | LF)* -> ^(HEADER_ID linea*);

linea: lineasCabecera;

restoLinea:	('|' an+=AN)* CR LF -> {($an != null) && ($an.Count > 0)}?
^(RESTO AN*)
								-> ;
lineasCabecera:	lineaORD -> ^(CABECERA lineaORD);

lineaORD: 'ORD' '|' numPedido=AN '|' tipoPedido=AN '|' funcion=AN
restoLinea -> ^('ORD' $numPedido $tipoPedido $funcion restoLinea);

HEADER_ID:	'ORDERS';
CR:	'\r';
LF:	'\n';

	
fragment CARACTER
	:	'a'..'z'
	|	'A'..'Z'
	;

fragment NUMERO: ('0'..'9');

AN: (CARACTER | NUMERO)+;
N: NUMERO+ ('.' NUMERO+)?;

Doesn't work when restoLinea is just CR LF. It gives me the exception:

Antlr.Runtime.Tree.RewriteEmptyStreamException was unhandled
  Message="rule restoLinea"
  Source="Antlr3.Runtime"
  StackTrace:
       en Antlr.Runtime.Tree.RewriteRuleElementStream._Next()
       en Antlr.Runtime.Tree.RewriteRuleElementStream.Next()
       ....


However, if I change restoLinea to:

restoLinea:	('|' an+=AN)* CR LF -> {($an != null) && ($an.Count > 0)}?
^(RESTO AN*)
								-> {(CommonTree)adaptor.GetNilNode()};

It works as expected.

I thought that using an empty rewrite rule (-> ;) returned an empty
AST. Am I wrong? If so, how can I do the same with a rewrite rule that
doesn't use custom code?

Thanks

From curtis at v-sim.com  Fri May 16 07:19:34 2008
From: curtis at v-sim.com (Curtis Deck)
Date: Fri, 16 May 2008 10:19:34 -0400
Subject: [antlr-interest] How to do real division
Message-ID: <000801c8b75f$dd57bcf0$6202a8c0@MAGNYS.COM>

I am writing an expression evaluator using antlr 3 and python. I want to do
real division but I cannot use from __future__ import division because it
needs to be at the top of the script. 

 

Can any one help me please.

 

Thanks in advance!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080516/8db4af8f/attachment.html 

From hharalambiev at gmail.com  Fri May 16 07:41:04 2008
From: hharalambiev at gmail.com (Haralambi Haralambiev)
Date: Fri, 16 May 2008 17:41:04 +0300
Subject: [antlr-interest] Basic predicate question
Message-ID: <aa71f710805160741m46a60032q31b1b48e7e064c35@mail.gmail.com>

Hello,

I have stumbled upon on a problem where the DFA's prediction is incorrect,
as it does not take into account the predicate for a rule.

Consider the following grammar:
-----------------------------------------------------
lexer grammar test;

IF : {getCharPositionInLine()==0}? => 'IF';
UNKNOWN_CMD : {getCharPositionInLine()==0}? => Identifier;

NOT : 'NOT';

Identifier : ('A'..'Z'|'a'..'z')+;
WS : ('\t'|' ')+;
-----------------------------------------------------

In the language I am working on, the first word is always some command. As I
am not interested in all the commands, I decided to define an UNKNOWN_CMD.

I also have some other keywords that are not commands, thus not in the
beginning of the line, e.g. the described above NOT.

With the grammar above and the input "IF NOT SOMETHING", the lexer fails, as
the DFA has predicted that the "NOT" part of the stream should be an
UNKNOWN_COMMAND.
My understanding was that predicates are somehow included when predicting
the next token and thus I am confused why the lexer will attempt to match
the "NOT" to this lexer rule?

If we put the NOT rule above the unknown rule, everything will work
properly, but this is a work around and I would like to understand the cause
of the issue.

Could someone point the reason of such a behaviour?

Thanks,
Hari
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080516/ea02d7f4/attachment.html 

From pink at odahoda.de  Fri May 16 13:38:33 2008
From: pink at odahoda.de (Benjamin Niemann)
Date: Fri, 16 May 2008 22:38:33 +0200
Subject: [antlr-interest] How to do real division
In-Reply-To: <000801c8b75f$dd57bcf0$6202a8c0@MAGNYS.COM>
References: <000801c8b75f$dd57bcf0$6202a8c0@MAGNYS.COM>
Message-ID: <543531490805161338i19ff872cy6c089e4bb282d262@mail.gmail.com>

HI Curtis,

good point, haven't thought about his yet.
Should be fairly easy to fix, but it may not make it into the upcoming
V3.1 release.
If you are not afraid of building antlr yourself:

In src/org/antlr/codegen/templates/Python/Python.stg there's a line

<actions.(actionScope).header>

move it up right before the <@imports> line. Then you should be able to say

@header {
    from __future__ import division
}

and it should appear where you need it.

As a long term solution I probably have to introduce a separate @
action, because e.g. when having other things than imports in @header,
you want these to be after the 'from antlr import *'.

-Ben

On Fri, May 16, 2008 at 4:19 PM, Curtis Deck <curtis at v-sim.com> wrote:
>
>
>
>
> I am writing an expression evaluator using antlr 3 and python. I want to do
> real division but I cannot use from __future__ import division because it
> needs to be at the top of the script.
>
>
>
> Can any one help me please.
>
>
>
> Thanks in advance!

From parrt at cs.usfca.edu  Fri May 16 13:39:10 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 16 May 2008 13:39:10 -0700
Subject: [antlr-interest] JavaScript Target
In-Reply-To: <eeed9d0b0805152119t21dd6261hc2380e7bc1a44069@mail.gmail.com>
References: <eeed9d0b0805152119t21dd6261hc2380e7bc1a44069@mail.gmail.com>
Message-ID: <B46F8CD4-5FCC-4E73-A970-3C7D979F4BD2@cs.usfca.edu>


On May 15, 2008, at 9:19 PM, Joey Hurst wrote:

> Hello all,
> For the last few months I've been working on a JavaScript ANTLR  
> target.

hooray!

> Things are coming along quite well; as of today the target passes  
> most of the tests (ported to JsUnit) shipped with the 3.0.1 source  
> distribution.  I've focused on the tests in the runtime/Python/ 
> tests/ directory, although there are others too.  I've maintained  
> API compatibility with the Java target where possible, but there are  
> a few places where JavaScript couldn't quite handle the task at hand  
> (e.g. there is no reliable way to do runtime stack reflection in  
> EcmaScript/JavaScript version 3).
>
> I write this message because I wanted to get a couple legal and  
> scheduling issues cleared up before I continue any further:
>
> 1) 99% of the JavaScript target code is original (although heavily  
> inspired, of course, by the other targets).  The remaining 1%  
> consists of a modified version of the Yahoo class provided by the  
> Yahoo UI Library.  This code is licensed under the BSD license like  
> ANTLR, so I assume this won't cause any problems.  If this is an  
> issue I could rewrite the code, but it would be a hassle.  Here's a  
> link to the YUI license:
> http://developer.yahoo.com/yui/license.html
> Here's a link to the Yahoo class docs for anyone who is curious:
> http://developer.yahoo.com/yui/yahoo/

seems ok. so you would simply be including a source code file with a  
license a the top? Should be fine.

> 2) It appears that the 3.1 release is imminent.  My work has been  
> based off the 3.01 release to date.  Do y'all think it would be  
> valuable to create a finished 3.0.1 compatible version of the  
> JavaScript target, or should I port what I have now to 3.1 and  
> release that?

We could include 3.0.1 JavaScript target with 3.1 as long as the  
templates worked and the runtime was consistent.

> I'll send out the documentation and code in about another month.  It  
> should be complete and pretty robust at that time.

Oh okay, it seems like you will miss the 3.1 deadline; uh, like this  
weekend ;)

> Terence: I'm a fellow SF denizen.  I'll have to buy you a beer  
> sometime in appreciation for this great tool!

Heh,bring on the beer, dude. ok, wine, but same idea... what part of  
the city do you live in? If you hear gunshots, that's probably my  
neighborhood too. [might one take this discussion to an offlist thread]

Ter

From pink at odahoda.de  Fri May 16 13:43:00 2008
From: pink at odahoda.de (Benjamin Niemann)
Date: Fri, 16 May 2008 22:43:00 +0200
Subject: [antlr-interest] How to do real division
In-Reply-To: <543531490805161338i19ff872cy6c089e4bb282d262@mail.gmail.com>
References: <000801c8b75f$dd57bcf0$6202a8c0@MAGNYS.COM>
	<543531490805161338i19ff872cy6c089e4bb282d262@mail.gmail.com>
Message-ID: <543531490805161343v5d9a10a4l760ca557e192b677@mail.gmail.com>

Or you can of course just force at least one operator to be a float...

On Fri, May 16, 2008 at 10:38 PM, Benjamin Niemann <pink at odahoda.de> wrote:
> HI Curtis,
>
>  good point, haven't thought about his yet.
>  Should be fairly easy to fix, but it may not make it into the upcoming
>  V3.1 release.
>  If you are not afraid of building antlr yourself:
>
>  In src/org/antlr/codegen/templates/Python/Python.stg there's a line
>
>  <actions.(actionScope).header>
>
>  move it up right before the <@imports> line. Then you should be able to say
>
>  @header {
>     from __future__ import division
>  }
>
>  and it should appear where you need it.
>
>  As a long term solution I probably have to introduce a separate @
>  action, because e.g. when having other things than imports in @header,
>  you want these to be after the 'from antlr import *'.
>
>  -Ben
>
>
>
>  On Fri, May 16, 2008 at 4:19 PM, Curtis Deck <curtis at v-sim.com> wrote:
>  >
>  >
>  >
>  >
>  > I am writing an expression evaluator using antlr 3 and python. I want to do
>  > real division but I cannot use from __future__ import division because it
>  > needs to be at the top of the script.
>  >
>  >
>  >
>  > Can any one help me please.
>  >
>  >
>  >
>  > Thanks in advance!
>

From george.scott at gmail.com  Fri May 16 15:14:38 2008
From: george.scott at gmail.com (George Scott)
Date: Fri, 16 May 2008 15:14:38 -0700
Subject: [antlr-interest] JavaScript Target
In-Reply-To: <B46F8CD4-5FCC-4E73-A970-3C7D979F4BD2@cs.usfca.edu>
References: <eeed9d0b0805152119t21dd6261hc2380e7bc1a44069@mail.gmail.com>
	<B46F8CD4-5FCC-4E73-A970-3C7D979F4BD2@cs.usfca.edu>
Message-ID: <5d9afe010805161514x273ed3cbs4a0a622fcce6548f@mail.gmail.com>

Hi Joey,
Great work!  I maintain the ActionScript 3/ECMAScript 4 target for ANTLR, we
should sync up on the work that you've done since the targets should be very
similar.  It would be good to align the runtime APIs and code generation
decisions as much as possible, so there is an evolutionary path from
ECMAScript 3 to 4 that is consistent.  If done right, much of the code
generation templates and even some runtime code could be shared between the
two versions, which would simplify maintenance going forward.

George


On Fri, May 16, 2008 at 1:39 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

>
> On May 15, 2008, at 9:19 PM, Joey Hurst wrote:
>
>  Hello all,
>> For the last few months I've been working on a JavaScript ANTLR target.
>>
>
> hooray!
>
>  Things are coming along quite well; as of today the target passes most of
>> the tests (ported to JsUnit) shipped with the 3.0.1 source distribution.
>>  I've focused on the tests in the runtime/Python/tests/ directory, although
>> there are others too.  I've maintained API compatibility with the Java
>> target where possible, but there are a few places where JavaScript couldn't
>> quite handle the task at hand (e.g. there is no reliable way to do runtime
>> stack reflection in EcmaScript/JavaScript version 3).
>>
>> I write this message because I wanted to get a couple legal and scheduling
>> issues cleared up before I continue any further:
>>
>> 1) 99% of the JavaScript target code is original (although heavily
>> inspired, of course, by the other targets).  The remaining 1% consists of a
>> modified version of the Yahoo class provided by the Yahoo UI Library.  This
>> code is licensed under the BSD license like ANTLR, so I assume this won't
>> cause any problems.  If this is an issue I could rewrite the code, but it
>> would be a hassle.  Here's a link to the YUI license:
>> http://developer.yahoo.com/yui/license.html
>> Here's a link to the Yahoo class docs for anyone who is curious:
>> http://developer.yahoo.com/yui/yahoo/
>>
>
> seems ok. so you would simply be including a source code file with a
> license a the top? Should be fine.
>
>  2) It appears that the 3.1 release is imminent.  My work has been based
>> off the 3.01 release to date.  Do y'all think it would be valuable to create
>> a finished 3.0.1 compatible version of the JavaScript target, or should I
>> port what I have now to 3.1 and release that?
>>
>
> We could include 3.0.1 JavaScript target with 3.1 as long as the templates
> worked and the runtime was consistent.
>
>  I'll send out the documentation and code in about another month.  It
>> should be complete and pretty robust at that time.
>>
>
> Oh okay, it seems like you will miss the 3.1 deadline; uh, like this
> weekend ;)
>
>  Terence: I'm a fellow SF denizen.  I'll have to buy you a beer sometime in
>> appreciation for this great tool!
>>
>
> Heh,bring on the beer, dude. ok, wine, but same idea... what part of the
> city do you live in? If you hear gunshots, that's probably my neighborhood
> too. [might one take this discussion to an offlist thread]
>
> Ter
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080516/0c5c47ba/attachment.html 

From JALuber at gmx.de  Fri May 16 16:27:29 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Sat, 17 May 2008 01:27:29 +0200
Subject: [antlr-interest] C# Target Poll
Message-ID: <20080516232729.311920@gmx.net>

Hi!

While thinking about future improvements, I came across over the switch of the used collections from the .NET versions to the one supplied by C5 <http://www.itu.dk/research/c5/>. The C5 library has more functionality and more types of collections than the .NET. Instead replicating text from the PDF please read at least the introduction yourself: <http://www.itu.dk/research/c5/Release1.1/ITU-TR-2006-76.pdf>

My motivation to consider C5 is simply that I prefer to use state-of-the-art tools, and to a certain extent .NET falls short. I have used it in a few projects so far and will use it again. It is easy to use. I had no problems besides non-binary-serializing of a dictionary, which was caused by .NET bugs, so I wouldn't hold that against C5. Also, serializing seems to be an unusual need for compilers anyway and can be circumvented by own designs anyway, as it probably would have been anyway. Please correct if I'm wrong and C5 would prevent doing from something what you can do now.

Still, I can't simply switch the engines as I'd enforce the same change for all C# target users. As I can see, the use of C5 has the following disadvantages:

-The inclusion of another assembly, thus increasing the application size
-C5 may be fast, but the .NET classes are speedier as they sacrifice some of the extended functionality. How much exactly, I don't know, but if you care about nano-seconds, then C5 might be the wrong choice. Compiler builders care about the speed of their software after all.

Not problematic is:

-C5 can be used like ANTLR in (non)commercial projects as it uses a BSD-like license.
-It can be integrated with .NET classes as it is based on interface programming.

In case, I have overlooked important points, please shout them. I haven't done any work to switch to C5 yet, so voting down my suggestion won't waste any effort from my side.

Johannes
-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

From antlr at mirality.co.nz  Fri May 16 17:00:43 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 17 May 2008 12:00:43 +1200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <20080516232729.311920@gmx.net>
References: <20080516232729.311920@gmx.net>
Message-ID: <20080517000054.4B14F11ECA7@www.antlr.org>

At 11:27 17/05/2008, Johannes Luber wrote:
 >My motivation to consider C5 is simply that I prefer to use
 >state-of-the-art tools, and to a certain extent .NET falls 
short. I
 >have used it in a few projects so far and will use it again. It 
is
 >easy to use. I had no problems besides non-binary-serializing of 
a
 >dictionary, which was caused by .NET bugs, so I wouldn't hold 
that
 >against C5. Also, serializing seems to be an unusual need for
 >compilers anyway and can be circumvented by own designs anyway, 
as
 >it probably would have been anyway. Please correct if I'm wrong 
and
 >C5 would prevent doing from something what you can do now.

What direct improvement/extra features does it provide (for the 
purposes of the ANTLR runtime) that the standard .NET classes do 
not?  What is the advantage in using it, given the penalty of 
adding an additional assembly?

Bear in mind that the CSharp target can't use it anyway (as that's 
still v1-compatible), so by using it you'd create a much larger 
difference between CSharp and CSharp2.  And probably add to the 
maintenance cost.

(Also, you've referred to ANTLR-generated parsers as 'compilers' 
at least twice now.  While that's indeed a common usage, they're 
also used to parse data structures, so they're not *always* 
'compilers'.  Doesn't make much difference to the serialisation 
case, except that it's possible someone might want to serialise an 
AST.  It's probably more likely they'll serialise something else 
generated from the AST/parse, but you never know.)


From sharwell at pixelminegames.com  Fri May 16 21:48:36 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Fri, 16 May 2008 23:48:36 -0500
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <20080516232729.311920@gmx.net>
References: <20080516232729.311920@gmx.net>
Message-ID: <86403CA0939415448BCCB83855EFE09A4FB175@Bloodymary.ironwillgames.com>

I think for a small runtime like Antlr, the best move would be:

- Minimize dependencies
- Minimize size
- Maximize it's "feel" compared to the .NET framework (best practices, conventions, etc.).

There is a tremendous amount of work that could be done to improve the runtime as we move to .NET 2.0. If I had any suggestion at this point, it'd be to have a runtime dll built that doesn't include the debug-only classes.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Johannes Luber
Sent: Friday, May 16, 2008 6:27 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] C# Target Poll

Hi!

While thinking about future improvements, I came across over the switch of the used collections from the .NET versions to the one supplied by C5 <http://www.itu.dk/research/c5/>. The C5 library has more functionality and more types of collections than the .NET. Instead replicating text from the PDF please read at least the introduction yourself: <http://www.itu.dk/research/c5/Release1.1/ITU-TR-2006-76.pdf>

My motivation to consider C5 is simply that I prefer to use state-of-the-art tools, and to a certain extent .NET falls short. I have used it in a few projects so far and will use it again. It is easy to use. I had no problems besides non-binary-serializing of a dictionary, which was caused by .NET bugs, so I wouldn't hold that against C5. Also, serializing seems to be an unusual need for compilers anyway and can be circumvented by own designs anyway, as it probably would have been anyway. Please correct if I'm wrong and C5 would prevent doing from something what you can do now.

Still, I can't simply switch the engines as I'd enforce the same change for all C# target users. As I can see, the use of C5 has the following disadvantages:

-The inclusion of another assembly, thus increasing the application size
-C5 may be fast, but the .NET classes are speedier as they sacrifice some of the extended functionality. How much exactly, I don't know, but if you care about nano-seconds, then C5 might be the wrong choice. Compiler builders care about the speed of their software after all.

Not problematic is:

-C5 can be used like ANTLR in (non)commercial projects as it uses a BSD-like license.
-It can be integrated with .NET classes as it is based on interface programming.

In case, I have overlooked important points, please shout them. I haven't done any work to switch to C5 yet, so voting down my suggestion won't waste any effort from my side.

Johannes
-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

From antlr at mirality.co.nz  Fri May 16 23:38:53 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 17 May 2008 18:38:53 +1200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <86403CA0939415448BCCB83855EFE09A4FB175@Bloodymary.ironwill
	games.com>
References: <20080516232729.311920@gmx.net>
	<86403CA0939415448BCCB83855EFE09A4FB175@Bloodymary.ironwillgames.com>
Message-ID: <20080517063904.4AE8811EC4A@www.antlr.org>

At 16:48 17/05/2008, Sam Harwell wrote:
 >I think for a small runtime like Antlr, the best move would be:
 >
 >- Minimize dependencies
 >- Minimize size
 >- Maximize it's "feel" compared to the .NET framework (best
 >practices, conventions, etc.).

A good way to do that last one is to run FxCop against it.  That's 
what the Framework itself uses :)


From hharalambiev at gmail.com  Sat May 17 01:44:47 2008
From: hharalambiev at gmail.com (Haralambi Haralambiev)
Date: Sat, 17 May 2008 11:44:47 +0300
Subject: [antlr-interest] Generated lexer is affected by parser rules?! A
	bug?
Message-ID: <aa71f710805170144q2d3bec5aq5ee221e42b35a06f@mail.gmail.com>

Hello,

A colleague of mine is working on some grammar and I was bemused when
she told me that a string literal '50' was throwing an error, while the '00'
was not throwing.

The exception said "mismatched character '5' expecting set null".

So, I started investigating... the lexer rule for string literal is the
following:
-----------
fragment
Apos : '\'';

StringLiteral: Apos ~Apos* Apos
-----------

Everything seemed fine, except that in the generated java code, the
mStringLiteral method had the following line:

-----------
mApos();
// ...NewTest.g:84:9: (~ Apos )*
loop2:
do {
int alt2=2;
int LA2_0 = input.LA(1);

if ( ((LA2_0>='\u0000' && LA2_0<='&')||(LA2_0>='(' && LA2_0<='\uFFFE')) ) {
alt2=1;
}

switch (alt2) {
case 1 :
// ...NewTest.g:197:9: ~ Apos
{
*if ( (input.LA(1)>='\u0000' && input.LA(1)<='4')||(input.LA(1)>='6' &&
input.LA(1)<='\uFFFE') ) {*
input.consume();

}
-----------

This was totally unexpected (checking if the character is different than
'5'), so I did the following experiment:

   - I removed all the parser rules.
   - I changed the grammar to a lexer grammar.

When I generated the lexer, the corrupt if statement mentioned above was
changed to the following:

-----------
switch (alt2) {
case 1 :
// ...NewTest.g:84:9: ~ Apos
{
*if ( (input.LA(1)>='\u0000' &&
input.LA(1)<='\u0014')||(input.LA(1)>='\u0016' && input.LA(1)<='\uFFFE') ) {
*
input.consume();

}*
*-----------

So, now the situation changed and the mentioned string '50' is OK, but it is
obvious that the check is wrong.

I tested a simple grammar with the Apos and StringLiteral lexer rules only:
-----------
lexer grammar testStringLiteral;

StringLiteral : Apos ~Apos* Apos;
Apos : '\'';
-----------

it generates the following if, which I consider again wrong:
-----------
*if ( (input.LA(1)>='\u0000' &&
input.LA(1)<='\u0003')||(input.LA(1)>='\u0005' && input.LA(1)<='\uFFFE') ) {
*
input.consume();

}
-----------

Taking into account the things said above,
I have two question:

   - Why the parser rules affect the lexer class?
   - Why is this if clause before the consume() method different than the if
   clause that is deciding the alternative?

Of course, I assume that I could have made some stupid mistake, so please
excuse me if I have done so.

Best regards,
Hari
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080517/b163a662/attachment.html 

From lgcraymer at yahoo.com  Sat May 17 02:17:16 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Sat, 17 May 2008 02:17:16 -0700 (PDT)
Subject: [antlr-interest] C# Target Poll
Message-ID: <374346.91893.qm@web55910.mail.re3.yahoo.com>

Adding external dependencies is best avoided, since it adds to the maintenance problem, irritates new users who have to locate and install extra libraries, and causes problems for organizations who are trying to apply disciplined software practices and have to validate any externally supplied code.

Two approaches which work (after a fashion) are:  1.)  "steal" parts of the library and incorporate them into the runtime--that way, you have taken direct control over bug fixes--and 2.)  fork the C# runtime into a C5-dependent and standard library versions.  Then adoption of C5 is a user option, not something imposed on them.

"The road to hell is paved with good intentions" very much applies--you may want to resist temptation.

--Loring


----- Original Message ----
> From: Johannes Luber <JALuber at gmx.de>
> To: antlr-interest at antlr.org
> Sent: Friday, May 16, 2008 4:27:29 PM
> Subject: [antlr-interest] C# Target Poll
> 
> Hi!
> 
> While thinking about future improvements, I came across over the switch of the 
> used collections from the .NET versions to the one supplied by C5 
> . The C5 library has more functionality and more 
> types of collections than the .NET. Instead replicating text from the PDF please 
> read at least the introduction yourself: 
> 
> 
> My motivation to consider C5 is simply that I prefer to use state-of-the-art 
> tools, and to a certain extent .NET falls short. I have used it in a few 
> projects so far and will use it again. It is easy to use. I had no problems 
> besides non-binary-serializing of a dictionary, which was caused by .NET bugs, 
> so I wouldn't hold that against C5. Also, serializing seems to be an unusual 
> need for compilers anyway and can be circumvented by own designs anyway, as it 
> probably would have been anyway. Please correct if I'm wrong and C5 would 
> prevent doing from something what you can do now.
> 
> Still, I can't simply switch the engines as I'd enforce the same change for all 
> C# target users. As I can see, the use of C5 has the following disadvantages:
> 
> -The inclusion of another assembly, thus increasing the application size
> -C5 may be fast, but the .NET classes are speedier as they sacrifice some of the 
> extended functionality. How much exactly, I don't know, but if you care about 
> nano-seconds, then C5 might be the wrong choice. Compiler builders care about 
> the speed of their software after all.
> 
> Not problematic is:
> 
> -C5 can be used like ANTLR in (non)commercial projects as it uses a BSD-like 
> license.
> -It can be integrated with .NET classes as it is based on interface programming.
> 
> In case, I have overlooked important points, please shout them. I haven't done 
> any work to switch to C5 yet, so voting down my suggestion won't waste any 
> effort from my side.
> 
> Johannes
> -- 
> Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
> Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger



      


From open.zone at virgin.net  Sat May 17 02:57:58 2008
From: open.zone at virgin.net (Micheal J)
Date: Sat, 17 May 2008 10:57:58 +0100
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <20080516232729.311920@gmx.net>
References: <20080516232729.311920@gmx.net>
Message-ID: <002501c8b804$820bcad0$c404a8c0@marion>

 
Hi,

> While thinking about future improvements, I came across over 
> the switch of the used collections from the .NET versions to 
> the one supplied by C5 <http://www.itu.dk/research/c5/>.
[...]

What future improvements were these?

[...]

> Still, I can't simply switch the engines as I'd enforce the 
> same change for all C# target users. As I can see, the use of 
> C5 has the following disadvantages:
> 
> -The inclusion of another assembly, thus increasing the 
> application size
> -C5 may be fast, but the .NET classes are speedier as they 
> sacrifice some of the extended functionality. How much 
> exactly, I don't know, but if you care about nano-seconds, 
> then C5 might be the wrong choice. Compiler builders care 
> about the speed of their software after all.
> 
> Not problematic is:
> 
> -C5 can be used like ANTLR in (non)commercial projects as it 
> uses a BSD-like license.
> -It can be integrated with .NET classes as it is based on 
> interface programming.
> 
> In case, I have overlooked important points, please shout 
> them. I haven't done any work to switch to C5 yet, so voting 
> down my suggestion won't waste any effort from my side.

I think any discussion about C5 is premature since you are yet to discuss
the future improvements that led you to seek C5 in the first place.


My $0.02?...

Having built CSharp2/CSharp3 targets previously for ANTLR v3, my advice is
that you may want to look at the Wintellect PowerCollections library
[http://www.codeplex.com/PowerCollections] rather than C5. Neither is
perfect but PowerCollections feels like an extension of the BCL and C5
definitely does not. The set abstraction in PowerCollections could be better
IMO as it is sadly NOT implemented as an interface but, it works. You can
always provide a custom ISet<T> abstraction (there are plenty of articles
discussing this - e.g.
http://www.codeproject.com/KB/recipes/GenericISet.aspx - and the
Iesi.Collections is open source too).

Some of our targets had to be 'as lean as possible' (no ANTLRWorks support,
LLk - not LL* - grammars hence no DFAs) so, we used just the standard BCL
and a custom ISet<T> abstraction. However, PowerCollections is open source
and has a few types that are useful in a more widely-distributed,
general-use, CSharp2 target such as the stock ANTLR one.

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 


From hharalambiev at gmail.com  Sat May 17 04:35:19 2008
From: hharalambiev at gmail.com (Haralambi Haralambiev)
Date: Sat, 17 May 2008 14:35:19 +0300
Subject: [antlr-interest] Generated lexer is affected by parser rules?!
	A bug?
In-Reply-To: <aa71f710805170144q2d3bec5aq5ee221e42b35a06f@mail.gmail.com>
References: <aa71f710805170144q2d3bec5aq5ee221e42b35a06f@mail.gmail.com>
Message-ID: <aa71f710805170435k5e06f9b6p8edf0e04299b6313@mail.gmail.com>

Just revised the very simple grammar.

Could someone point out what is the difference between the following two
grammars:
-----------
lexer grammar testStringLiteral1;

StringLiteral : Apos ~Apos* Apos;

fragment
Apos : '\'';
-----------

and

-----------
lexer grammar testStringLiteral2;

StringLiteral : '\'' ~'\''* '\'';
-----------

When generated to Java file - they differ, while I expected not to!

-Hari

On 5/17/08, Haralambi Haralambiev <hharalambiev at gmail.com> wrote:
>
> Hello,
>
> A colleague of mine is working on some grammar and I was bemused when
> she told me that a string literal '50' was throwing an error, while the '00'
> was not throwing.
>
> The exception said "mismatched character '5' expecting set null".
>
> So, I started investigating... the lexer rule for string literal is the
> following:
> -----------
> fragment
> Apos : '\'';
>
> StringLiteral: Apos ~Apos* Apos
> -----------
>
> Everything seemed fine, except that in the generated java code, the
> mStringLiteral method had the following line:
>
> -----------
> mApos();
> // ...NewTest.g:84:9: (~ Apos )*
> loop2:
> do {
> int alt2=2;
> int LA2_0 = input.LA(1);
>
> if ( ((LA2_0>='\u0000' && LA2_0<='&')||(LA2_0>='(' && LA2_0<='\uFFFE')) ) {
> alt2=1;
> }
>
> switch (alt2) {
> case 1 :
> // ...NewTest.g:197:9: ~ Apos
> {
> *if ( (input.LA(1)>='\u0000' && input.LA(1)<='4')||(input.LA(1)>='6' &&
> input.LA(1)<='\uFFFE') ) {*
> input.consume();
>
> }
> -----------
>
> This was totally unexpected (checking if the character is different than
> '5'), so I did the following experiment:
>
>    - I removed all the parser rules.
>    - I changed the grammar to a lexer grammar.
>
> When I generated the lexer, the corrupt if statement mentioned above was
> changed to the following:
>
> -----------
> switch (alt2) {
> case 1 :
> // ...NewTest.g:84:9: ~ Apos
> {
> *if ( (input.LA(1)>='\u0000' &&
> input.LA(1)<='\u0014')||(input.LA(1)>='\u0016' && input.LA(1)<='\uFFFE') ) {
> *
> input.consume();
>
> }*
> *-----------
>
> So, now the situation changed and the mentioned string '50' is OK, but it
> is obvious that the check is wrong.
>
> I tested a simple grammar with the Apos and StringLiteral lexer rules only:
> -----------
> lexer grammar testStringLiteral;
>
> StringLiteral : Apos ~Apos* Apos;
> Apos : '\'';
> -----------
>
> it generates the following if, which I consider again wrong:
> -----------
> *if ( (input.LA(1)>='\u0000' &&
> input.LA(1)<='\u0003')||(input.LA(1)>='\u0005' && input.LA(1)<='\uFFFE') ) {
> *
> input.consume();
>
> }
> -----------
>
> Taking into account the things said above,
> I have two question:
>
>    - Why the parser rules affect the lexer class?
>    - Why is this if clause before the consume() method different than the
>    if clause that is deciding the alternative?
>
> Of course, I assume that I could have made some stupid mistake, so please
> excuse me if I have done so.
>
> Best regards,
> Hari
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080517/54540edc/attachment-0001.html 

From imoschak at gmail.com  Sat May 17 06:43:17 2008
From: imoschak at gmail.com (Moschakis, Ioannis)
Date: Sat, 17 May 2008 09:43:17 -0400
Subject: [antlr-interest] Problems with rule variable initilization
Message-ID: <4115de880805170643h246b3b49ta03c3e2b4090d7a9@mail.gmail.com>

Hello all,
I am trying to create a lexer/parser for sql in C with ANTLR and C target.
The problem that arises is that the code generated by ANTLR always tries to
initilize rule variables to NULL which is not acceptable at least for the
GCC compiler for variables of type ANTLR3_STRING_struct.
For example:
attr_assign_value returns [ ANTLR3_STRING_struct attName,
ANTLR3_STRING_struct val ]
    :   attr_name EQT value {
             $attName.appendS(&$attName,&$attr_name.attrName);
             $val.appendS(&$val,&$value.value);
         }
    ;

the previous rule generates the following code (part of it shown here) :
...
ANTLR3_STRING_struct attr_name1;
    #undef    RETURN_TYPE_attr_name1
    #define    RETURN_TYPE_attr_name1 ANTLR3_STRING_struct

    ANTLR3_STRING_struct value2;
    #undef    RETURN_TYPE_value2
    #define    RETURN_TYPE_value2 ANTLR3_STRING_struct

    /* Initialize rule variables
     */


    attr_name1 =  NULL;
    value2 = NULL;
    retval.start = LT(1);
...
The compiler says that attr_name1 = NULL and value2=NULL are incompatible
types which is ofcourse correct. Is there a way to tell ANTLR not to
generate these lines or generate custom code instead of this? Thanks in
advance for any help. Sorry for my bad English.

Regards,
imoschak
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080517/bdbad3da/attachment.html 

From JALuber at gmx.de  Sat May 17 09:47:10 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Sat, 17 May 2008 18:47:10 +0200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <20080517000058.3537gmx1@mx109.gmx.net>
References: <20080516232729.311920@gmx.net>
	<20080517000058.3537gmx1@mx109.gmx.net>
Message-ID: <20080517164710.230450@gmx.net>

> At 11:27 17/05/2008, Johannes Luber wrote:
>  >My motivation to consider C5 is simply that I prefer to use
>  >state-of-the-art tools, and to a certain extent .NET falls 
> short. I
>  >have used it in a few projects so far and will use it again. It 
> is
>  >easy to use. I had no problems besides non-binary-serializing of 
> a
>  >dictionary, which was caused by .NET bugs, so I wouldn't hold 
> that
>  >against C5. Also, serializing seems to be an unusual need for
>  >compilers anyway and can be circumvented by own designs anyway, 
> as
>  >it probably would have been anyway. Please correct if I'm wrong 
> and
>  >C5 would prevent doing from something what you can do now.
> 
> What direct improvement/extra features does it provide (for the 
> purposes of the ANTLR runtime) that the standard .NET classes do 
> not?  What is the advantage in using it, given the penalty of 
> adding an additional assembly?

Looking at the sources, the only used .NET collections seem to be ArrayList and Hashtable. While I didn't create those files I believe it safe to assume that ANTLR itself doesn't require now more features. On the other hand we have an own implementation of a StackList, which is adding Push()/Pop() to ArrayList. C5's own ArrayList has it inbuilt. Then there is Hashlist which doesn't seem to have an equivalent in C5, so it has to be included anyway.

Problematic may be future requirements by mimicking the Java runtime, but that is driven by Ter and thus quite unsure. But there are some collections available in the Java runtime and not in .NET natively, so this issue can arise anytime (as it nearly did once two weeks ago). Having a more powerful collection library is insurance for this case. Still the main benefit would be that no translation from ANTLR objects to C5 collections are necessary by the users.

This requires that enough people do use C5 instead other options. Micheal points out in another email that C5 is no natural extension of BCL classes. One of the design goals was to introduce more orthogonality than the BCL classes have, so I won't disagree with him. In fact that novel design was attracting me to C5. I suppose that is something what other people can argue about - adhering to the broken designs because they are always available and familiar or starting fresh anew.

Looking at potential new functionality from the PowerCollections, I am a bit disappointed of the choices offered. Furthermore, there is no new development done. Is this because it is well-polished software or don't want people maintain this software? Considering that Micheal offered himself a problem with the PowerCollections I'm wondering about its future. C5 is still actively maintained, though.

When I was asking about your opinions, I was well aware of this issue. But that people actually require a leaner option than what is already delivered surprises me. Don't they know about the Mono linker, which can distill only the required functionality of included assemblies? Or is that impractical? In the latter case, inclusion of C5 may be not a good idea.
> 
> Bear in mind that the CSharp target can't use it anyway (as that's 
> still v1-compatible), so by using it you'd create a much larger 
> difference between CSharp and CSharp2.  And probably add to the 
> maintenance cost.

Well, for ANTLR 3.2 I have to split the runtimes anyway. Not only I can change the directory structure a bit (the current one doesn't sit well with me, but I have to look into possibly alternatives first), but I can use in interfaces generics as well. Currently the interfaces conform to .NET 1.1, so the templates work with same code. Splitting the runtimes allows me to limit the .NET 1.1 stuff into one place and with 3.3 I can simply delete the old stuff.
 
> (Also, you've referred to ANTLR-generated parsers as 'compilers' 
> at least twice now.  While that's indeed a common usage, they're 
> also used to parse data structures, so they're not *always* 
> 'compilers'.  Doesn't make much difference to the serialisation 
> case, except that it's possible someone might want to serialise an 
> AST.  It's probably more likely they'll serialise something else 
> generated from the AST/parse, but you never know.)

Well, for serializing there are prebuild solutions, as a Google search shows. I don't believe that this issue is a deathblow anymore, considering that even the in-built dictionary can't be serialized with XML, IIRC.

Johannes
-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

From JALuber at gmx.de  Sat May 17 10:09:08 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Sat, 17 May 2008 19:09:08 +0200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <86403CA0939415448BCCB83855EFE09A4FB175@Bloodymary.ironwillgames.com>
References: <20080516232729.311920@gmx.net>
	<86403CA0939415448BCCB83855EFE09A4FB175@Bloodymary.ironwillgames.com>
Message-ID: <20080517170908.230480@gmx.net>

> I think for a small runtime like Antlr, the best move would be:
> 
> - Minimize dependencies

Theoretically, extra libraries can be included in a single assembly via the inclusion of its source code in the build process or the use of the Mono linker. This is independent of the actual library.

> - Minimize size

While the Mono linker can help there, there is the option of only to include the required classes. The question is which one is easier in the long run here.

> - Maximize it's "feel" compared to the .NET framework (best practices,
> conventions, etc.).

This is something I have been working on already. Takes times, though, to find all issues. And the suggested FxCop doesn't help with template changes nor with the changes in user code.
> 
> There is a tremendous amount of work that could be done to improve the
> runtime as we move to .NET 2.0. If I had any suggestion at this point, it'd be
> to have a runtime dll built that doesn't include the debug-only classes.

Funny that you mention this. It isn't possible because of a language limitation/improvement of C# compared to Java. The DFA classes, I believe, have always a dependency with the debugging part. I didn't found another way to solve the issue, which is still repeatable in ANTLR 3.0.1 with the -debug option (You can also use ANTLRworks 1.1.x). Just look for the variable dbg if you want to try it on your own. :) Speaking of debug dependencies, I've been thinking about making the interfaces for normal and debug versions identical (even if normal doesn't do anything with the extra parameters), so the driver program can be the same. Minimizing can be done with the Mono linker. What do you think?

Johannes
> 
> Sam
> 
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Johannes Luber
> Sent: Friday, May 16, 2008 6:27 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] C# Target Poll
> 
> Hi!
> 
> While thinking about future improvements, I came across over the switch of
> the used collections from the .NET versions to the one supplied by C5
> <http://www.itu.dk/research/c5/>. The C5 library has more functionality and
> more types of collections than the .NET. Instead replicating text from the PDF
> please read at least the introduction yourself:
> <http://www.itu.dk/research/c5/Release1.1/ITU-TR-2006-76.pdf>
> 
> My motivation to consider C5 is simply that I prefer to use
> state-of-the-art tools, and to a certain extent .NET falls short. I have used it in a few
> projects so far and will use it again. It is easy to use. I had no
> problems besides non-binary-serializing of a dictionary, which was caused by .NET
> bugs, so I wouldn't hold that against C5. Also, serializing seems to be an
> unusual need for compilers anyway and can be circumvented by own designs
> anyway, as it probably would have been anyway. Please correct if I'm wrong
> and C5 would prevent doing from something what you can do now.
> 
> Still, I can't simply switch the engines as I'd enforce the same change
> for all C# target users. As I can see, the use of C5 has the following
> disadvantages:
> 
> -The inclusion of another assembly, thus increasing the application size
> -C5 may be fast, but the .NET classes are speedier as they sacrifice some
> of the extended functionality. How much exactly, I don't know, but if you
> care about nano-seconds, then C5 might be the wrong choice. Compiler
> builders care about the speed of their software after all.
> 
> Not problematic is:
> 
> -C5 can be used like ANTLR in (non)commercial projects as it uses a
> BSD-like license.
> -It can be integrated with .NET classes as it is based on interface
> programming.
> 
> In case, I have overlooked important points, please shout them. I haven't
> done any work to switch to C5 yet, so voting down my suggestion won't waste
> any effort from my side.
> 
> Johannes
> -- 
> Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
> Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

-- 
249 Spiele f?r nur 1 Preis. Die GMX Spieleflatrate schon ab 9,90 Euro.
Neu: Asterix bei den Olympischen Spielen: http://flat.games.gmx.de

From JALuber at gmx.de  Sat May 17 13:49:50 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Sat, 17 May 2008 22:49:50 +0200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <374346.91893.qm@web55910.mail.re3.yahoo.com>
References: <374346.91893.qm@web55910.mail.re3.yahoo.com>
Message-ID: <20080517204950.230450@gmx.net>

> Adding external dependencies is best avoided, since it adds to the
> maintenance problem, irritates new users who have to locate and install extra
> libraries, and causes problems for organizations who are trying to apply
> disciplined software practices and have to validate any externally supplied code.

This a good argument against changing.
> 
> Two approaches which work (after a fashion) are:  1.)  "steal" parts of
> the library and incorporate them into the runtime--that way, you have taken
> direct control over bug fixes

That may be a good solution, as one can keep the overall size down.

--and 2.)  fork the C# runtime into a
> C5-dependent and standard library versions.  Then adoption of C5 is a user option,
> not something imposed on them.

It should be possible by using the preprocessor alone. If only interfaces instead implementations are used one could even extract the allocations into a factory, thus allowing people to provide their own implementations. One problem would be, how to tell the runtime what factory to use. This should be ideally an invisible option for those not interested.
> 
> "The road to hell is paved with good intentions" very much applies--you
> may want to resist temptation.

At least thinking things through before making the final decision.

Johannes

> 
> --Loring
> 
> 
> ----- Original Message ----
> > From: Johannes Luber <JALuber at gmx.de>
> > To: antlr-interest at antlr.org
> > Sent: Friday, May 16, 2008 4:27:29 PM
> > Subject: [antlr-interest] C# Target Poll
> > 
> > Hi!
> > 
> > While thinking about future improvements, I came across over the switch
> of the 
> > used collections from the .NET versions to the one supplied by C5 
> > . The C5 library has more functionality and more 
> > types of collections than the .NET. Instead replicating text from the
> PDF please 
> > read at least the introduction yourself: 
> > 
> > 
> > My motivation to consider C5 is simply that I prefer to use
> state-of-the-art 
> > tools, and to a certain extent .NET falls short. I have used it in a few
> > projects so far and will use it again. It is easy to use. I had no
> problems 
> > besides non-binary-serializing of a dictionary, which was caused by .NET
> bugs, 
> > so I wouldn't hold that against C5. Also, serializing seems to be an
> unusual 
> > need for compilers anyway and can be circumvented by own designs anyway,
> as it 
> > probably would have been anyway. Please correct if I'm wrong and C5
> would 
> > prevent doing from something what you can do now.
> > 
> > Still, I can't simply switch the engines as I'd enforce the same change
> for all 
> > C# target users. As I can see, the use of C5 has the following
> disadvantages:
> > 
> > -The inclusion of another assembly, thus increasing the application size
> > -C5 may be fast, but the .NET classes are speedier as they sacrifice
> some of the 
> > extended functionality. How much exactly, I don't know, but if you care
> about 
> > nano-seconds, then C5 might be the wrong choice. Compiler builders care
> about 
> > the speed of their software after all.
> > 
> > Not problematic is:
> > 
> > -C5 can be used like ANTLR in (non)commercial projects as it uses a
> BSD-like 
> > license.
> > -It can be integrated with .NET classes as it is based on interface
> programming.
> > 
> > In case, I have overlooked important points, please shout them. I
> haven't done 
> > any work to switch to C5 yet, so voting down my suggestion won't waste
> any 
> > effort from my side.
> > 
> > Johannes
> > -- 
> > Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
> > Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger
> 
> 
> 
>       

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

From aditsu at yahoo.com  Sat May 17 14:59:32 2008
From: aditsu at yahoo.com (Adrian Sandor)
Date: Sat, 17 May 2008 14:59:32 -0700 (PDT)
Subject: [antlr-interest] Parse trees
Message-ID: <642808.57262.qm@web32507.mail.mud.yahoo.com>

Hi, I'm using antlr 3 and trying to get a parse tree.
I followed the instructions from http://www.antlr.org/wiki/pages/viewpage.action?pageId=1760 and I have some questions:
- in the example from that page, why does the parser accept a statement ending in a semicolon? ("i=4;")
- I modified the grammar to this:

grammar P;
prog: decl* stat* ;
decl: type ID (',' ID)* ';' ;
type: 'int' | 'float' ;
stat: ID '=' expr;   
expr: OP* simple (OP+ simple)* OP*;
simple: INT;
        
ID  : 'a'..'z'+ ; 
INT : '0'..'9'+ ;
OP: '+'|'-';
WS  : (' '|'\n')+ {$channel=HIDDEN;} ;

and the input to this:

int i;
i=1+ -2+3

This time it complained about a semicolon in the statement, so I removed it. But the problem is that the resulting parse tree looks like this:
(<grammar prog> (prog (decl (type int) i ;) (stat i = (expr (simple 1) + - 2 + - (simple 2) + 3 + (simple 3)))))

What's going on? Is this a bug?

Thanks
Adrian



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080517/9a70eb20/attachment.html 

From manunews at gmail.com  Sat May 17 16:45:10 2008
From: manunews at gmail.com (Manu)
Date: Sun, 18 May 2008 01:45:10 +0200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <20080517203919.230450@gmx.net>
References: <20080516232729.311920@gmx.net>
	<96f4581f0805170024n769c415cv342fc9a42db5cfc0@mail.gmail.com>
	<20080517203919.230450@gmx.net>
Message-ID: <96f4581f0805171645i1d6802d0vf23afb0d07f77f55@mail.gmail.com>

>> What I'd suggest for the C# target is:
>>
>> - distribute .xml files, .pdb files and .chm files with the assembly
>
> I get the .xml file, but why the .pdb one? And how should I generate .chm, not to mention what to include there?

The PDB file is really usefull for a release time build. When an
exception is thrown inside an assembly, the Exception members
(ToString, StackTrace, etc) check if there is an associated PDB file
present for the assembly containing the method that thrown the
exception. If the PDB file is present, the stack trace will contain
the source file and line number of where the exception was thrown so
you can easily know where the program failed. If the PDF is not
present, you will only get the method name where the exception was
generated and you will not know in which line it failed.

The .chm will have all the documentation for ANTLR classes in a MSDN
style format. You can use docproject (www.codeplex.com/DocProject) to
generate it. docproject is just another kind of project, that depends
on other projects and generates the chm for all dependent projects, so
having the chm updated is just a matter to enable the docproject
project.

>> - make consistent CR/LF line endings (visual studio is always
>> complaining about that in the generated files)
>
> Looking through the files, I see that ASTParser.stg uses Windows line endings, and the others don't. Does this problem occur for non-AST parsers, too? In that case the reason is StringTemplate and changing the templates would result in a mixture for Linux users, as ST uses different line endings for the platforms.

I haven't tried non AST parsers. I don't care if the line endings are
LF, CR or CR/LF, but it would be nice if they are all the same always.
Anyway, if that can't be done for some technical reason, I can live
with it.

Another thing that I forgot to mention is to add a pragma to disable
the warnings that generate ANTLR for the lexer, parser and tree
parser. It is really annoying to have those warnings reported and
ceirtainly nobody wants them to be reported for those files.

Thanks,
Manu

From jhurstus at gmail.com  Sat May 17 23:38:53 2008
From: jhurstus at gmail.com (Joey Hurst)
Date: Sat, 17 May 2008 23:38:53 -0700
Subject: [antlr-interest] JavaScript Target
In-Reply-To: <B46F8CD4-5FCC-4E73-A970-3C7D979F4BD2@cs.usfca.edu>
References: <eeed9d0b0805152119t21dd6261hc2380e7bc1a44069@mail.gmail.com>
	<B46F8CD4-5FCC-4E73-A970-3C7D979F4BD2@cs.usfca.edu>
Message-ID: <eeed9d0b0805172338p55a4e3e3s47d2e7a5caec089@mail.gmail.com>

I would just be, as you mentioned, linking to the Yahoo.js file which would
retain YUI's BSD license and copyright notice.  So it sounds like we're ok
there.

I'm going to continue working with the 3.0.1 code base for the time being,
just because I'm so close to finishing.  Once done, I'll look at the
diffs from the 3.0.1 to the 3.1 targets to bring the JS target up to speed.
I'll retain the alpha quality 3.0.1 version for those who are interested,
but the 3.1 branch will be the first stable version that will (hopefully) be
merged into the ANTLR code repo.  Sound good?

Thanks,
Joey

On 5/16/08, Terence Parr <parrt at cs.usfca.edu> wrote:
>
>
> On May 15, 2008, at 9:19 PM, Joey Hurst wrote:
>
> Hello all,
>> For the last few months I've been working on a JavaScript ANTLR target.
>>
>
> hooray!
>
> Things are coming along quite well; as of today the target passes most of
>> the tests (ported to JsUnit) shipped with the 3.0.1 source distribution.
>>  I've focused on the tests in the runtime/Python/tests/ directory, although
>> there are others too.  I've maintained API compatibility with the Java
>> target where possible, but there are a few places where JavaScript couldn't
>> quite handle the task at hand (e.g. there is no reliable way to do runtime
>> stack reflection in EcmaScript/JavaScript version 3).
>>
>> I write this message because I wanted to get a couple legal and scheduling
>> issues cleared up before I continue any further:
>>
>> 1) 99% of the JavaScript target code is original (although heavily
>> inspired, of course, by the other targets).  The remaining 1% consists of a
>> modified version of the Yahoo class provided by the Yahoo UI Library.  This
>> code is licensed under the BSD license like ANTLR, so I assume this won't
>> cause any problems.  If this is an issue I could rewrite the code, but it
>> would be a hassle.  Here's a link to the YUI license:
>> http://developer.yahoo.com/yui/license.html
>> Here's a link to the Yahoo class docs for anyone who is curious:
>> http://developer.yahoo.com/yui/yahoo/
>>
>
> seems ok. so you would simply be including a source code file with a
> license a the top? Should be fine.
>
> 2) It appears that the 3.1 release is imminent.  My work has been based off
>> the 3.01 release to date.  Do y'all think it would be valuable to create a
>> finished 3.0.1 compatible version of the JavaScript target, or should I port
>> what I have now to 3.1 and release that?
>>
>
> We could include 3.0.1 JavaScript target with 3.1 as long as the templates
> worked and the runtime was consistent.
>
> I'll send out the documentation and code in about another month.  It should
>> be complete and pretty robust at that time.
>>
>
> Oh okay, it seems like you will miss the 3.1 deadline; uh, like this
> weekend ;)
>
> Terence: I'm a fellow SF denizen.  I'll have to buy you a beer sometime in
>> appreciation for this great tool!
>>
>
> Heh,bring on the beer, dude. ok, wine, but same idea... what part of the
> city do you live in? If you hear gunshots, that's probably my neighborhood
> too. [might one take this discussion to an offlist thread]
>
> Ter
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080517/5d459fe8/attachment.html 

From jhurstus at gmail.com  Sat May 17 23:56:10 2008
From: jhurstus at gmail.com (Joey Hurst)
Date: Sat, 17 May 2008 23:56:10 -0700
Subject: [antlr-interest] JavaScript Target
In-Reply-To: <5d9afe010805161514x273ed3cbs4a0a622fcce6548f@mail.gmail.com>
References: <eeed9d0b0805152119t21dd6261hc2380e7bc1a44069@mail.gmail.com>
	<B46F8CD4-5FCC-4E73-A970-3C7D979F4BD2@cs.usfca.edu>
	<5d9afe010805161514x273ed3cbs4a0a622fcce6548f@mail.gmail.com>
Message-ID: <eeed9d0b0805172356o12d3dd4eq6ba5010fc33de082@mail.gmail.com>

George,
Yes, yes, and yes.  I've been keeping an eye on the ES4 target as I
developed the JS target, so there is already quite a bit of parity between
the two.  Your comments about maintenance and migration are well taken.

I'm travelling this week and won't have much free time, but when I get back
I'll send you and Terence a more detailed comparison of the current state of
the JS and ES4 targets in addition to some thoughts on how to achieve the
ideas you set out below.

Thanks,
Joey

On 5/16/08, George Scott <george.scott at gmail.com> wrote:
>
> Hi Joey,
>
> Great work!  I maintain the ActionScript 3/ECMAScript 4 target for ANTLR,
> we should sync up on the work that you've done since the targets should be
> very similar.  It would be good to align the runtime APIs and code
> generation decisions as much as possible, so there is an evolutionary path
> from ECMAScript 3 to 4 that is consistent.  If done right, much of the code
> generation templates and even some runtime code could be shared between the
> two versions, which would simplify maintenance going forward.
>
>
> George
>
>
> On Fri, May 16, 2008 at 1:39 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
>
>>
>> On May 15, 2008, at 9:19 PM, Joey Hurst wrote:
>>
>> Hello all,
>>> For the last few months I've been working on a JavaScript ANTLR target.
>>>
>>
>> hooray!
>>
>> Things are coming along quite well; as of today the target passes most of
>>> the tests (ported to JsUnit) shipped with the 3.0.1 source distribution.
>>>  I've focused on the tests in the runtime/Python/tests/ directory, although
>>> there are others too.  I've maintained API compatibility with the Java
>>> target where possible, but there are a few places where JavaScript couldn't
>>> quite handle the task at hand (e.g. there is no reliable way to do runtime
>>> stack reflection in EcmaScript/JavaScript version 3).
>>>
>>> I write this message because I wanted to get a couple legal and
>>> scheduling issues cleared up before I continue any further:
>>>
>>> 1) 99% of the JavaScript target code is original (although heavily
>>> inspired, of course, by the other targets).  The remaining 1% consists of a
>>> modified version of the Yahoo class provided by the Yahoo UI Library.  This
>>> code is licensed under the BSD license like ANTLR, so I assume this won't
>>> cause any problems.  If this is an issue I could rewrite the code, but it
>>> would be a hassle.  Here's a link to the YUI license:
>>> http://developer.yahoo.com/yui/license.html
>>> Here's a link to the Yahoo class docs for anyone who is curious:
>>> http://developer.yahoo.com/yui/yahoo/
>>>
>>
>> seems ok. so you would simply be including a source code file with a
>> license a the top? Should be fine.
>>
>> 2) It appears that the 3.1 release is imminent.  My work has been based
>>> off the 3.01 release to date.  Do y'all think it would be valuable to create
>>> a finished 3.0.1 compatible version of the JavaScript target, or should I
>>> port what I have now to 3.1 and release that?
>>>
>>
>> We could include 3.0.1 JavaScript target with 3.1 as long as the templates
>> worked and the runtime was consistent.
>>
>> I'll send out the documentation and code in about another month.  It
>>> should be complete and pretty robust at that time.
>>>
>>
>> Oh okay, it seems like you will miss the 3.1 deadline; uh, like this
>> weekend ;)
>>
>> Terence: I'm a fellow SF denizen.  I'll have to buy you a beer sometime in
>>> appreciation for this great tool!
>>>
>>
>> Heh,bring on the beer, dude. ok, wine, but same idea... what part of the
>> city do you live in? If you hear gunshots, that's probably my neighborhood
>> too. [might one take this discussion to an offlist thread]
>>
>> Ter
>>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080517/acd858ce/attachment-0001.html 

From open.zone at virgin.net  Sun May 18 03:56:51 2008
From: open.zone at virgin.net (Micheal J)
Date: Sun, 18 May 2008 11:56:51 +0100
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <20080516232729.311920@gmx.net>
References: <20080516232729.311920@gmx.net>
Message-ID: <005201c8b8d5$e1d22690$c404a8c0@marion>

I didn't see a reply to my other message so...


> While thinking about future improvements, I came across over 
> the switch of the used collections from the .NET versions to 
> the one supplied by C5 <http://www.itu.dk/research/c5/>.

What future impovements are these?

-------------------------------

<aside>
>From your other messages, I got the sense that you feel C5 is a 'better'
collection library. I won't disagree but, that is not a good enough reason
IMO to switch from BCL to C5 for the ANTLR C# target:
- ANTLR's needs can be (and is) met with the BCL (an ISet<T> abstraction is
nice, not essential)
- user familiarity with the BCL is very important for a *widely-distributed*
tool such as ANTLR
- there are many, many, more potential [future] contributors who know and
use the BCL than C5
- performance is better with the BCL than with C5 in general (in my
experience in any case)

I do use C5 btw.
</aside>

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 


From JALuber at gmx.de  Sun May 18 06:51:56 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Sun, 18 May 2008 15:51:56 +0200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <005201c8b8d5$e1d22690$c404a8c0@marion>
References: <20080516232729.311920@gmx.net>
	<005201c8b8d5$e1d22690$c404a8c0@marion>
Message-ID: <20080518135156.250730@gmx.net>

> I didn't see a reply to my other message so...
> 
> 
> > While thinking about future improvements, I came across over 
> > the switch of the used collections from the .NET versions to 
> > the one supplied by C5 <http://www.itu.dk/research/c5/>.
> 
> What future impovements are these?

Planned are already to increase the .NET feeling and to switch to generics in both interfaces and internal files. Beyound that were only the mentioned addition of debug interfaces to the normal parser (to allow one driver program handle both kinds of generation without resorting to manual editing or preprocessor tricks, even if using the debug option for normal parsers is ignored - but no one commented on that yet) and using LINQ if I find places were this is sensible.

I had the inspiration that the only difference between .NET 2 and .NET 3.5 is that .NET 3.5 has some additional libraries and programs targetted for .NET 3.5 can work on .NET 2, if they ignore the additional capabilities. For ANTLR users this means only some more hard-drive requirements, but there are also the micro framework users. I'm not sure if micro includes already LINQ, in case some libraries are needed. Using Mono with the linker may be a possible solution there, but until further investigations I won't add LINQ yet.

Otherwise I have to take care of the build process which is broken on Linux at least, when using Nant. Further issues haven't cross my mind yet.

Johannes
> 
> -------------------------------
> 
> <aside>
> >>From your other messages, I got the sense that you feel C5 is a 'better'
> collection library. I won't disagree but, that is not a good enough reason
> IMO to switch from BCL to C5 for the ANTLR C# target:
> - ANTLR's needs can be (and is) met with the BCL (an ISet<T> abstraction
> is
> nice, not essential)
> - user familiarity with the BCL is very important for a
> *widely-distributed*
> tool such as ANTLR
> - there are many, many, more potential [future] contributors who know and
> use the BCL than C5
> - performance is better with the BCL than with C5 in general (in my
> experience in any case)
> 
> I do use C5 btw.
> </aside>
> 
> Micheal
> 
> -----------------------
> The best way to contact me is via the list/forum. My time is very limited.

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

From open.zone at virgin.net  Sun May 18 06:54:15 2008
From: open.zone at virgin.net (Micheal J)
Date: Sun, 18 May 2008 14:54:15 +0100
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <20080517164710.230450@gmx.net>
References: <20080516232729.311920@gmx.net><20080517000058.3537gmx1@mx109.gmx.net>
	<20080517164710.230450@gmx.net>
Message-ID: <000301c8b8ee$ae521000$c404a8c0@marion>

Hi,

> Well, for ANTLR 3.2 I have to split the runtimes anyway. Not 
> only I can change the directory structure a bit (the current 
> one doesn't sit well with me, but I have to look into 
> possibly alternatives first)

What are the issues with the current directory structure?


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 


From open.zone at virgin.net  Sun May 18 07:09:39 2008
From: open.zone at virgin.net (Micheal J)
Date: Sun, 18 May 2008 15:09:39 +0100
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <20080518135156.250730@gmx.net>
References: <20080516232729.311920@gmx.net>
	<005201c8b8d5$e1d22690$c404a8c0@marion>
	<20080518135156.250730@gmx.net>
Message-ID: <000401c8b8f0$d0cae9c0$c404a8c0@marion>

Hi,

Thanks for the reply, just one query...

> > > While thinking about future improvements, I came across over the 
> > > switch of the used collections from the .NET versions to the one 
> > > supplied by C5 <http://www.itu.dk/research/c5/>.
> > 
> > What future impovements are these?
> 
> Planned are already to increase the .NET feeling and to 
> switch to generics in both interfaces and internal files. 

OK.

> Beyound that were only the mentioned addition of debug 
> interfaces to the normal parser (to allow one driver program 
> handle both kinds of generation without resorting to manual 
> editing or preprocessor tricks, even if using the debug 
> option for normal parsers is ignored - but no one commented 
> on that yet)

I might be missing something here but, there aren't different driver program
for debug and non-debug parsers AFAIK...

[...]
> but until further investigations I won't add LINQ yet.

OK.

> Otherwise I have to take care of the build process which is 
> broken on Linux at least, when using Nant. Further issues 
> haven't cross my mind yet.

That reminds me...

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 


From parrt at cs.usfca.edu  Sun May 18 09:43:40 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 18 May 2008 09:43:40 -0700
Subject: [antlr-interest] JavaScript Target
In-Reply-To: <eeed9d0b0805172338p55a4e3e3s47d2e7a5caec089@mail.gmail.com>
References: <eeed9d0b0805152119t21dd6261hc2380e7bc1a44069@mail.gmail.com>
	<B46F8CD4-5FCC-4E73-A970-3C7D979F4BD2@cs.usfca.edu>
	<eeed9d0b0805172338p55a4e3e3s47d2e7a5caec089@mail.gmail.com>
Message-ID: <055AAE9B-329D-4D79-BBFE-E653330401A6@cs.usfca.edu>


On May 17, 2008, at 11:38 PM, Joey Hurst wrote:

> I would just be, as you mentioned, linking to the Yahoo.js file  
> which would retain YUI's BSD license and copyright notice.  So it  
> sounds like we're ok there.
>
> I'm going to continue working with the 3.0.1 code base for the time  
> being, just because I'm so close to finishing.  Once done, I'll look  
> at the diffs from the 3.0.1 to the 3.1 targets to bring the JS  
> target up to speed.  I'll retain the alpha quality 3.0.1 version for  
> those who are interested, but the 3.1 branch will be the first  
> stable version that will (hopefully) be merged into the ANTLR code  
> repo.  Sound good?

Sure.

Ter

From andrew.bradnan at gmail.com  Sun May 18 11:09:01 2008
From: andrew.bradnan at gmail.com (Andrew Bradnan)
Date: Sun, 18 May 2008 11:09:01 -0700
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <20080516232729.311920@gmx.net>
References: <20080516232729.311920@gmx.net>
Message-ID: <48307159.0261220a.6f81.59c0@mx.google.com>

I was checking out C5 recently and I found the C5 libraries "non-obvious".
I prefer something more opaque perhaps when it comes to data structures.

Just for reference don't forget all the ones that are hidden in the BCL.
System.Collections.Generic;
System.Collections.ObjectModel;	// Collection<>, ObservableCollection<>
System.Collections.Specialized;

When I need something I almost always find it in the Wintellect library
Power Collections (from Jeff Richter et al).  So at least there will be good
documentation.
http://www.codeplex.com/PowerCollections

Pair, triple, set, tree, deque ... all missing ones.

hth,
Andrew
-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Johannes Luber
Sent: Friday, May 16, 2008 4:27 PM
To: antlr-interest at antlr.org
Subject: [antlr-interest] C# Target Poll

Hi!

While thinking about future improvements, I came across over the switch of
the used collections from the .NET versions to the one supplied by C5
<http://www.itu.dk/research/c5/>. The C5 library has more functionality and
more types of collections than the .NET. Instead replicating text from the
PDF please read at least the introduction yourself:
<http://www.itu.dk/research/c5/Release1.1/ITU-TR-2006-76.pdf>

My motivation to consider C5 is simply that I prefer to use state-of-the-art
tools, and to a certain extent .NET falls short. I have used it in a few
projects so far and will use it again. It is easy to use. I had no problems
besides non-binary-serializing of a dictionary, which was caused by .NET
bugs, so I wouldn't hold that against C5. Also, serializing seems to be an
unusual need for compilers anyway and can be circumvented by own designs
anyway, as it probably would have been anyway. Please correct if I'm wrong
and C5 would prevent doing from something what you can do now.

Still, I can't simply switch the engines as I'd enforce the same change for
all C# target users. As I can see, the use of C5 has the following
disadvantages:

-The inclusion of another assembly, thus increasing the application size
-C5 may be fast, but the .NET classes are speedier as they sacrifice some of
the extended functionality. How much exactly, I don't know, but if you care
about nano-seconds, then C5 might be the wrong choice. Compiler builders
care about the speed of their software after all.

Not problematic is:

-C5 can be used like ANTLR in (non)commercial projects as it uses a BSD-like
license.
-It can be integrated with .NET classes as it is based on interface
programming.

In case, I have overlooked important points, please shout them. I haven't
done any work to switch to C5 yet, so voting down my suggestion won't waste
any effort from my side.

Johannes
-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger


From mail at martin-probst.com  Sun May 18 12:07:01 2008
From: mail at martin-probst.com (Martin Probst)
Date: Sun, 18 May 2008 21:07:01 +0200
Subject: [antlr-interest] XQuery grammar/parser open source
Message-ID: <76663F3B-62C4-4133-84E6-B34974F2A672@martin-probst.com>

Hi all,

I've released my XQuery parser as open source. It's available here:

http://code.google.com/p/xqpretty/

... and also linked from the ANTLR grammars page. It's a fairly  
complete grammar - it parses all of the >10,000 official test cases  
and some really nasty parts. Apart from parsing XQuery (and being a  
pretty printer), it might be interesting to other ANTLRers for it's  
tactique in parsing the syntactically different parts of the language.

The idea is that I have one single grammar file for the whole  
language, but different lexers for the regular XQuery part and the  
embedded XML literals. Because these can be nested, the parser pushes  
and pops lexers onto an internal stack. This also required  
implementing a lazy token stream. The result is a bit fragile with  
respect to parser lookahead, but as long as the different lexical  
sections are entered/left with a single, non-ambiguous token,  
everything is fine.

For example, this is the XML part of the grammar:
dirElemConstructor	
		:	OPEN_ANGLE { pushXMLLexer(); } qNameOrIdent dirAttributeList
			(EMPTY_CLOSE_TAG | (CLOSE_ANGLE dirElemContent CLOSE_TAG  
qNameOrIdent S? CLOSE_ANGLE))
			{ popXMLLexer(); }	/* ws: explicit */ ;

dirElemContent leads to this rule:
elemEnclosedExpr
		:	LCURLY { pushXQueryLexer(); } expr RCURLY { popXQueryLexer(); };

This might also be useful for other languages that have recursively  
nested statements in different syntaxes/languages.

Best Regards,
Martin

From mail at martin-probst.com  Sun May 18 12:09:41 2008
From: mail at martin-probst.com (Martin Probst)
Date: Sun, 18 May 2008 21:09:41 +0200
Subject: [antlr-interest] ParseTreeBuilder broken in decisions (with fix)
Message-ID: <83593ECD-1BE9-4A1E-ACBF-741681B792DF@martin-probst.com>

Hi all,

the ParseTreeBuilder included in ANTLR 3 does not respect decision  
contexts - if the parser enters decision mode during parsing multiple  
times, this breaks the parse tree construction.

The fix is to keep track of the decision nesting depth (methods from  
my extension of the base class):

   @Override
   public void consumeToken(Token token) {
     if (inDecision == 0) super.consumeToken(token);
   }

   private int inDecision = 0;

   @Override
   public void enterDecision(int decisionNumber) {
     super.enterDecision(decisionNumber);
     inDecision++;
   }

   @Override
   public void exitDecision(int decisionNumber) {
     super.exitDecision(decisionNumber);
     inDecision--;
   }

Best regards,
Martin

From aditsu at yahoo.com  Sun May 18 12:23:26 2008
From: aditsu at yahoo.com (Adrian Sandor)
Date: Sun, 18 May 2008 19:23:26 +0000 (UTC)
Subject: [antlr-interest] ParseTreeBuilder broken in decisions (with fix)
References: <83593ECD-1BE9-4A1E-ACBF-741681B792DF@martin-probst.com>
Message-ID: <loom.20080518T192059-460@post.gmane.org>

Martin Probst writes:

> the ParseTreeBuilder included in ANTLR 3 does not respect decision
> contexts - if the parser enters decision mode during parsing multiple
> times, this breaks the parse tree construction.
> 
> The fix is to keep track of the decision nesting depth

Hi, I don't know if this was related to my previous message, but it does solve
my main problem. Thank you very much!

Adrian



From antlr at mirality.co.nz  Sun May 18 13:11:53 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 19 May 2008 08:11:53 +1200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <20080518135156.250730@gmx.net>
References: <20080516232729.311920@gmx.net>
	<005201c8b8d5$e1d22690$c404a8c0@marion>
	<20080518135156.250730@gmx.net>
Message-ID: <20080518201224.9301211EC99@www.antlr.org>

At 01:51 19/05/2008, Johannes Luber wrote:
 >Beyound that were only the mentioned addition of debug 
interfaces
 >to the normal parser (to allow one driver program handle both
 >kinds of generation without resorting to manual editing or
 >preprocessor tricks, even if using the debug option for normal
 >parsers is ignored - but no one commented on that yet)

I'm not sure how useful that would be.  Generally the debug 
interfaces are only consumed by ANTLRworks, and the driver for 
doing debugging work will generally look completely different from 
the driver for doing "real" work.  I guess it would mean you 
wouldn't have to write a little throwaway program to do the 
debugging with, but I don't think that's a big hardship.  I'd 
rather not have the non-debug interfaces get cluttered up.

 >and using LINQ if I find places were this is sensible.

AFAIK, you can't use LINQ without forcing .NET 3.5 as a 
requirement, which seems like too much of a jump.

 >I had the inspiration that the only difference between .NET 2 
and
 >.NET 3.5 is that .NET 3.5 has some additional libraries and
 >programs targetted for .NET 3.5 can work on .NET 2, if they 
ignore
 >the additional capabilities.

Which you're not doing, if you use LINQ.  It's safe to use new 
features of the *compiler* (eg. lambdas, 'var's, and I think 
extension methods as well); that will retain 2.0 
compatibility.  But LINQ requires library support.


From JALuber at gmx.de  Sun May 18 14:38:47 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Sun, 18 May 2008 23:38:47 +0200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <000301c8b8ee$ae521000$c404a8c0@marion>
References: <20080516232729.311920@gmx.net><20080517000058.3537gmx1@mx109.gmx.net>
	<20080517164710.230450@gmx.net> <000301c8b8ee$ae521000$c404a8c0@marion>
Message-ID: <20080518213847.118180@gmx.net>

> Hi,
> 
> > Well, for ANTLR 3.2 I have to split the runtimes anyway. Not 
> > only I can change the directory structure a bit (the current 
> > one doesn't sit well with me, but I have to look into 
> > possibly alternatives first)
> 
> What are the issues with the current directory structure?

It's just that I don't like the current naming from an aesthically point of view. We have Antlr3.Runtime/Antlr.Runtime, etc. It is this repetition that irks me. I prefer DRY also in support structures and I feel as it is violated there. The only problem is that I don't know yet how to change that without losing the logical qualities exhibited there and those qualitities are more important than to pander my own sensibilities. I did mean "can" as "being when willing" here. Sorry if it came over too strong but I didn't expect that to be asked about this point. :)

Johannes
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

From JALuber at gmx.de  Sun May 18 15:19:08 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Mon, 19 May 2008 00:19:08 +0200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <96f4581f0805171645i1d6802d0vf23afb0d07f77f55@mail.gmail.com>
References: <20080516232729.311920@gmx.net>	
	<96f4581f0805170024n769c415cv342fc9a42db5cfc0@mail.gmail.com>	
	<20080517203919.230450@gmx.net>
	<96f4581f0805171645i1d6802d0vf23afb0d07f77f55@mail.gmail.com>
Message-ID: <20080518221908.118210@gmx.net>

> >> What I'd suggest for the C# target is:
> >>
> >> - distribute .xml files, .pdb files and .chm files with the assembly
> >
> > I get the .xml file, but why the .pdb one? And how should I generate
> .chm, not to mention what to include there?
> 
...
> 
> The .chm will have all the documentation for ANTLR classes in a MSDN
> style format. You can use docproject (www.codeplex.com/DocProject) to
> generate it. docproject is just another kind of project, that depends
> on other projects and generates the chm for all dependent projects, so
> having the chm updated is just a matter to enable the docproject
> project.

DocProject requires VS and I require that ANTLR can be built on Linux, too (I do my development there after all :). You can contribute a .chm file yourself as the target won't change much within minor releases.
> 
> >> - make consistent CR/LF line endings (visual studio is always
> >> complaining about that in the generated files)
> >
> > Looking through the files, I see that ASTParser.stg uses Windows line
> endings, and the others don't. Does this problem occur for non-AST parsers,
> too? In that case the reason is StringTemplate and changing the templates
> would result in a mixture for Linux users, as ST uses different line endings
> for the platforms.
> 
> I haven't tried non AST parsers. I don't care if the line endings are
> LF, CR or CR/LF, but it would be nice if they are all the same always.
> Anyway, if that can't be done for some technical reason, I can live
> with it.

I will unify all line endings, but if that doesn't help, you have to petition Ter for a ST change, as the problem must be then there.
> 
> Another thing that I forgot to mention is to add a pragma to disable
> the warnings that generate ANTLR for the lexer, parser and tree
> parser. It is really annoying to have those warnings reported and
> ceirtainly nobody wants them to be reported for those files.

Incidentally I discovered today that #pragmas have been introduced in C# 2. This change can be done only for CSharp2. I suppose with the use of partial classes the warnings (all of them, I suppose) in the generated code can be ignored. Or does someone object?

Johannes
> 
> Thanks,
> Manu

-- 
249 Spiele f?r nur 1 Preis. Die GMX Spieleflatrate schon ab 9,90 Euro.
Neu: Asterix bei den Olympischen Spielen: http://flat.games.gmx.de

From JALuber at gmx.de  Sun May 18 15:22:31 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Mon, 19 May 2008 00:22:31 +0200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <48307159.0261220a.6f81.59c0@mx.google.com>
References: <20080516232729.311920@gmx.net>
	<48307159.0261220a.6f81.59c0@mx.google.com>
Message-ID: <20080518222231.118190@gmx.net>

> I was checking out C5 recently and I found the C5 libraries "non-obvious".
> I prefer something more opaque perhaps when it comes to data structures.

What were your problems exactly?
> 
> Just for reference don't forget all the ones that are hidden in the BCL.
> System.Collections.Generic;
> System.Collections.ObjectModel;	// Collection<>, ObservableCollection<>
> System.Collections.Specialized;

The one in ObjectModel are new to me, but my actual reasoning has been explained already in some other email.
> 
> When I need something I almost always find it in the Wintellect library
> Power Collections (from Jeff Richter et al).  So at least there will be
> good
> documentation.
> http://www.codeplex.com/PowerCollections
> 
> Pair, triple, set, tree, deque ... all missing ones.

I have looked into them already and expressed my opinion in the same email as above.

Johannes
> hth,
> Andrew
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Johannes Luber
> Sent: Friday, May 16, 2008 4:27 PM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] C# Target Poll
> 
> Hi!
> 
> While thinking about future improvements, I came across over the switch of
> the used collections from the .NET versions to the one supplied by C5
> <http://www.itu.dk/research/c5/>. The C5 library has more functionality
> and
> more types of collections than the .NET. Instead replicating text from the
> PDF please read at least the introduction yourself:
> <http://www.itu.dk/research/c5/Release1.1/ITU-TR-2006-76.pdf>
> 
> My motivation to consider C5 is simply that I prefer to use
> state-of-the-art
> tools, and to a certain extent .NET falls short. I have used it in a few
> projects so far and will use it again. It is easy to use. I had no
> problems
> besides non-binary-serializing of a dictionary, which was caused by .NET
> bugs, so I wouldn't hold that against C5. Also, serializing seems to be an
> unusual need for compilers anyway and can be circumvented by own designs
> anyway, as it probably would have been anyway. Please correct if I'm wrong
> and C5 would prevent doing from something what you can do now.
> 
> Still, I can't simply switch the engines as I'd enforce the same change
> for
> all C# target users. As I can see, the use of C5 has the following
> disadvantages:
> 
> -The inclusion of another assembly, thus increasing the application size
> -C5 may be fast, but the .NET classes are speedier as they sacrifice some
> of
> the extended functionality. How much exactly, I don't know, but if you
> care
> about nano-seconds, then C5 might be the wrong choice. Compiler builders
> care about the speed of their software after all.
> 
> Not problematic is:
> 
> -C5 can be used like ANTLR in (non)commercial projects as it uses a
> BSD-like
> license.
> -It can be integrated with .NET classes as it is based on interface
> programming.
> 
> In case, I have overlooked important points, please shout them. I haven't
> done any work to switch to C5 yet, so voting down my suggestion won't
> waste
> any effort from my side.
> 
> Johannes
> -- 
> Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
> Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx

From JALuber at gmx.de  Sun May 18 15:47:39 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Mon, 19 May 2008 00:47:39 +0200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <000401c8b8f0$d0cae9c0$c404a8c0@marion>
References: <20080516232729.311920@gmx.net>
	<005201c8b8d5$e1d22690$c404a8c0@marion>	<20080518135156.250730@gmx.net>
	<000401c8b8f0$d0cae9c0$c404a8c0@marion>
Message-ID: <20080518224739.118190@gmx.net>

> Hi,
> 
> Thanks for the reply, just one query...
> 
> > Beyound that were only the mentioned addition of debug 
> > interfaces to the normal parser (to allow one driver program 
> > handle both kinds of generation without resorting to manual 
> > editing or preprocessor tricks, even if using the debug 
> > option for normal parsers is ignored - but no one commented 
> > on that yet)
> 
> I might be missing something here but, there aren't different driver
> program
> for debug and non-debug parsers AFAIK...

If you want to specify some options like the port to listen on then you need the extras.

Before I forget, using factory methods to create instances of the collection can be done in a way that BCL users won't feel it while still allowing to supply people with a way to use theirs. One part of the solution is to use method 3 in the following link: <http://www.codeproject.com/KB/database/DynamicMethod_ILGenerator.aspx> For the rest of my design the time runs out...

Johannes

Johannes
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

From JALuber at gmx.de  Sun May 18 16:06:57 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Mon, 19 May 2008 01:06:57 +0200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <20080518201224.9301211EC99@www.antlr.org>
References: <20080516232729.311920@gmx.net>
	<005201c8b8d5$e1d22690$c404a8c0@marion>	<20080518135156.250730@gmx.net>
	<20080518201224.9301211EC99@www.antlr.org>
Message-ID: <20080518230657.118200@gmx.net>

> At 01:51 19/05/2008, Johannes Luber wrote:
>  >Beyound that were only the mentioned addition of debug 
> interfaces
>  >to the normal parser (to allow one driver program handle both
>  >kinds of generation without resorting to manual editing or
>  >preprocessor tricks, even if using the debug option for normal
>  >parsers is ignored - but no one commented on that yet)
> 
> I'm not sure how useful that would be.  Generally the debug 
> interfaces are only consumed by ANTLRworks, and the driver for 
> doing debugging work will generally look completely different from 
> the driver for doing "real" work.  I guess it would mean you 
> wouldn't have to write a little throwaway program to do the 
> debugging with, but I don't think that's a big hardship.  I'd 
> rather not have the non-debug interfaces get cluttered up.

While I was working on defuting your point, I recognized that with subclassing the driver the code duplication can be removed easily for debug drivers. IMO, debug drivers need to provide the full range of options for testing purposes anyway. That still leaves the following issue <http://www.antlr.org:8888/browse/ANTLR-265>. Any ideas how to solve this?

> 
>  >and using LINQ if I find places were this is sensible.
> 
> AFAIK, you can't use LINQ without forcing .NET 3.5 as a 
> requirement, which seems like too much of a jump.

Probably. I have to wait for 3.2 before I could introduce LINQ anyway. Maybe the situation is different then.
> 
>  >I had the inspiration that the only difference between .NET 2 
> and
>  >.NET 3.5 is that .NET 3.5 has some additional libraries and
>  >programs targetted for .NET 3.5 can work on .NET 2, if they 
> ignore
>  >the additional capabilities.
> 
> Which you're not doing, if you use LINQ.  It's safe to use new 
> features of the *compiler* (eg. lambdas, 'var's, and I think 
> extension methods as well); that will retain 2.0 
> compatibility.  But LINQ requires library support.

Even LINQ to Objects?

Johannes

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

From brent.yates at gmail.com  Sun May 18 16:29:56 2008
From: brent.yates at gmail.com (Brent Yates)
Date: Sun, 18 May 2008 19:29:56 -0400
Subject: [antlr-interest] gUnit problem
Message-ID: <6edc6c380805181629h41f0ab65r6e0404acbb3a0e3a@mail.gmail.com>

I am attempting to use gUnit for the first time and can't seem to get it
working.

I am using the the latest intermediate build of Antlr (antlr-2008-05-07.18)
and the most recent gUnit (gunit-1.0.2.jar).  I am attempting to run the
examples from the Wiki page (
http://www.antlr.org/wiki/display/ANTLR3/gUnit+-+Grammar+Unit+Testing).  I
can run ANTLR on the LL-star grammar and it compiles properly.  However,
when I run gUnit with the example testsuite I get the following output:

-----------------------------------------------------------------------
<title> with <num_of_test> tests
-----------------------------------------------------------------------
<num_of_failure> failures found:
<failure:{<it.header>
expected: <it.expected>
actual: <it.actual>

}>
<if(has_invalid)>
<num_of_invalid> invalid inputs found:
<invalid:{<it.header>
invalid input: <it.actual>
}>
<endif>

Tests run: <num_of_test>, Failures: <num_of_failure>


Is this a Java problem?  I am not an experienced Java programmer so I could
have classpath issues (even though everything seems to run ok).

Thanks for the help!

Brent Yates
brent.yates at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080518/f7f0e42f/attachment.html 

From parrt at cs.usfca.edu  Sun May 18 18:08:02 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 18 May 2008 18:08:02 -0700
Subject: [antlr-interest] gUnit problem
In-Reply-To: <6edc6c380805181629h41f0ab65r6e0404acbb3a0e3a@mail.gmail.com>
References: <6edc6c380805181629h41f0ab65r6e0404acbb3a0e3a@mail.gmail.com>
Message-ID: <A62D0A94-CDC7-4548-ADE2-4168101AE0B7@cs.usfca.edu>

Hi. Looks like a version issue with StringTemplate.  Maybe you have an  
older version of ST in your path?

If you run java -v option it should show you which classes are being  
loaded as you try to run gunit.

Ter
On May 18, 2008, at 4:29 PM, Brent Yates wrote:

> I am attempting to use gUnit for the first time and can't seem to  
> get it working.
>
> I am using the the latest intermediate build of Antlr  
> (antlr-2008-05-07.18) and the most recent gUnit (gunit-1.0.2.jar).   
> I am attempting to run the examples from the Wiki page (http://www.antlr.org/wiki/display/ANTLR3/gUnit+-+Grammar+Unit+Testing 
> ).  I can run ANTLR on the LL-star grammar and it compiles  
> properly.  However, when I run gUnit with the example testsuite I  
> get the following output:
>
> -----------------------------------------------------------------------
> <title> with <num_of_test> tests
>
> -----------------------------------------------------------------------
> <num_of_failure> failures found:
> <failure:{<it.header>
> expected: <it.expected>
> actual: <it.actual>
>
> }>
>
> <if(has_invalid)>
> <num_of_invalid> invalid inputs found:
> <invalid:{<it.header>
> invalid input: <it.actual>
> }>
> <endif>
>
> Tests run: <num_of_test>, Failures: <num_of_failure>
>
>
>
> Is this a Java problem?  I am not an experienced Java programmer so  
> I could have classpath issues (even though everything seems to run  
> ok).
>
> Thanks for the help!
>
> Brent Yates
> brent.yates at gmail.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080518/5c8ffbc2/attachment.html 

From fyaoxy at gmail.com  Sun May 18 19:09:56 2008
From: fyaoxy at gmail.com (=?GB2312?B?z/LRxQ==?=)
Date: Mon, 19 May 2008 10:09:56 +0800
Subject: [antlr-interest] gUnit problem
In-Reply-To: <6edc6c380805181629h41f0ab65r6e0404acbb3a0e3a@mail.gmail.com>
References: <6edc6c380805181629h41f0ab65r6e0404acbb3a0e3a@mail.gmail.com>
Message-ID: <91dd9a4f0805181909y27f5f05an3dc4f6fc34764be@mail.gmail.com>

I ever faced it.
when gunit meet a newer version StringTemplate.

Seems the template file format is the problem.
I try to clear the gunit template file's content, and add part content of
it, add run it. At last, I add  full content of  origin file, It's OK.
not deep it.

I tried antlr-5-5 build with StringTemplate 3.1.

Regards,
Qinxian

2008/5/19 Brent Yates <brent.yates at gmail.com>:

> I am attempting to use gUnit for the first time and can't seem to get it
> working.
>
> I am using the the latest intermediate build of Antlr (antlr-2008-05-07.18)
> and the most recent gUnit (gunit-1.0.2.jar).  I am attempting to run the
> examples from the Wiki page (
> http://www.antlr.org/wiki/display/ANTLR3/gUnit+-+Grammar+Unit+Testing).  I
> can run ANTLR on the LL-star grammar and it compiles properly.  However,
> when I run gUnit with the example testsuite I get the following output:
>
> -----------------------------------------------------------------------
> <title> with <num_of_test> tests
>
> -----------------------------------------------------------------------
> <num_of_failure> failures found:
> <failure:{<it.header>
> expected: <it.expected>
> actual: <it.actual>
>
> }>
>
> <if(has_invalid)>
> <num_of_invalid> invalid inputs found:
> <invalid:{<it.header>
> invalid input: <it.actual>
> }>
> <endif>
>
> Tests run: <num_of_test>, Failures: <num_of_failure>
>
>
> Is this a Java problem?  I am not an experienced Java programmer so I could
> have classpath issues (even though everything seems to run ok).
>
> Thanks for the help!
>
> Brent Yates
> brent.yates at gmail.com
>



-- 
??
??
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080519/edfa2e80/attachment.html 

From antlr at mirality.co.nz  Mon May 19 01:40:50 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 19 May 2008 20:40:50 +1200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <20080518230657.118200@gmx.net>
References: <20080516232729.311920@gmx.net>
	<005201c8b8d5$e1d22690$c404a8c0@marion>
	<20080518135156.250730@gmx.net>
	<20080518201224.9301211EC99@www.antlr.org>
	<20080518230657.118200@gmx.net>
Message-ID: <20080519084156.5243A11EBD2@www.antlr.org>

At 11:06 19/05/2008, Johannes Luber wrote:
 >While I was working on defuting your point, I recognized that 
with
 >subclassing the driver the code duplication can be removed 
easily
 >for debug drivers. IMO, debug drivers need to provide the full
 >range of options for testing purposes anyway. That still leaves 
the
 >following issue <http://www.antlr.org:8888/browse/ANTLR-265>. 
Any
 >ideas how to solve this?

I don't think I understand the problem, nor why it's related to 
what I was saying.

 >Even LINQ to Objects?

Yes.  Any use of LINQ requires a reference to System.Linq.dll 
(since that's where the LINQ query definition classes are).  So 
you can't use it without requiring .NET 3.5.


From antlr at mirality.co.nz  Mon May 19 01:49:24 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 19 May 2008 20:49:24 +1200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <20080518213847.118180@gmx.net>
References: <20080516232729.311920@gmx.net>
	<20080517000058.3537gmx1@mx109.gmx.net>
	<20080517164710.230450@gmx.net>
	<000301c8b8ee$ae521000$c404a8c0@marion>
	<20080518213847.118180@gmx.net>
Message-ID: <20080519085009.48CAE11EACB@www.antlr.org>

At 09:38 19/05/2008, Johannes Luber wrote:
 >It's just that I don't like the current naming from an 
aesthically
 >point of view. We have Antlr3.Runtime/Antlr.Runtime, etc. It is
 >this repetition that irks me.

The grouping makes a certain amount of sense; one refers to the 
assembly and the other to the namespaces within that 
assembly.  Though it's not entirely consistent, since the 
Antlr3.Runtime.Tests assembly has all its files in the 
assembly-folder, not in a namespace-named folder.

Speaking of which: what actually goes in the equivalently-named 
folders in the root (/runtime/CSharp/)?  In the distribution 
they're all empty.  (I haven't tried building the runtime 
myself.  Maybe that would have answered this question.)

And on a related topic, it puzzled me a bit when I had to 
reference "Antlr3.Runtime.dll" and then use the namespace 
"Antlr.Runtime" in the code.  There's a bit of a disconnect there; 
generally the assembly names tend to match the root namespace name 
(either in full or squashed form).


From simos.lists at googlemail.com  Mon May 19 03:27:05 2008
From: simos.lists at googlemail.com (Simos Xenitellis)
Date: Mon, 19 May 2008 11:27:05 +0100
Subject: [antlr-interest] Problem with antlrworks (1.1.7 and 1.2b) and
	Python target (generation/debugging)
Message-ID: <483155F9.4030800@googlemail.com>

Hi,

I am having trouble in using antlrworks with the Python target.
However, from command line I can generate source code and parse the tree.
The way to bypass this problem is to comment out the language line in 
the options{} section of the grammar when using AntlrWorks.

Here are the errors I am getting,

(antlrworks 1.2b with stringtemplate.jar 3.1, pyStringTemplate 3.1)
error(10):  internal error: /tmp/XKBGrammar.g : 
java.lang.IllegalArgumentException: Can't find template noRewrite.st

In the UI, when generating code, it shows the error
"Cannot generate the grammar because:
error(10): internal error: group Python does not satisfy interface 
ANTLRCore: mismatched arguments on these templates [tokenRef(token, 
label, elementIndex, hetero), tokenRefAndListLabel(token, label, 
elementIndex, hetero)]"

(antlrworks 1.17 with stringtemplate.jar 3.1, pyStringTemplate 3.1)
error(10):  internal error: no such group file Dbg.stg
error(10):  internal error: problem parsing group AST: 
java.lang.IllegalArgumentException: Can't find template outputFile.st : 
java.lang.IllegalArgumentException: Can't find template outputFile.st

Simos

From JALuber at gmx.de  Mon May 19 04:37:14 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Mon, 19 May 2008 13:37:14 +0200
Subject: [antlr-interest] Problem with antlrworks (1.1.7 and 1.2b)
	and	Python target (generation/debugging)
In-Reply-To: <483155F9.4030800@googlemail.com>
References: <483155F9.4030800@googlemail.com>
Message-ID: <20080519113714.274500@gmx.net>

> Hi,
> 
> I am having trouble in using antlrworks with the Python target.
> However, from command line I can generate source code and parse the tree.
> The way to bypass this problem is to comment out the language line in 
> the options{} section of the grammar when using AntlrWorks.
> 
> Here are the errors I am getting,
> 
> (antlrworks 1.2b with stringtemplate.jar 3.1, pyStringTemplate 3.1)
> error(10):  internal error: /tmp/XKBGrammar.g : 
> java.lang.IllegalArgumentException: Can't find template noRewrite.st
> 
> In the UI, when generating code, it shows the error
> "Cannot generate the grammar because:
> error(10): internal error: group Python does not satisfy interface 
> ANTLRCore: mismatched arguments on these templates [tokenRef(token, 
> label, elementIndex, hetero), tokenRefAndListLabel(token, label, 
> elementIndex, hetero)]"
> 
> (antlrworks 1.17 with stringtemplate.jar 3.1, pyStringTemplate 3.1)
> error(10):  internal error: no such group file Dbg.stg
> error(10):  internal error: problem parsing group AST: 
> java.lang.IllegalArgumentException: Can't find template outputFile.st : 
> java.lang.IllegalArgumentException: Can't find template outputFile.st
> 
> Simos

This looks like as if the ANTLR version included in ANTLRworks has a disconnect between the Java target and the Python target. In other words, Python isn't uptodate there. Use the workaround until a new version of ANTLRworks is released.

Johannes
-- 
249 Spiele f?r nur 1 Preis. Die GMX Spieleflatrate schon ab 9,90 Euro.
Neu: Asterix bei den Olympischen Spielen: http://flat.games.gmx.de

From JALuber at gmx.de  Mon May 19 04:40:57 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Mon, 19 May 2008 13:40:57 +0200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <20080519084157.12649gmx1@mx074.gmx.net>
References: <20080516232729.311920@gmx.net>
	<005201c8b8d5$e1d22690$c404a8c0@marion> <20080518135156.250730@gmx.net>
	<20080518201224.9301211EC99@www.antlr.org>
	<20080518230657.118200@gmx.net>
	<20080519084157.12649gmx1@mx074.gmx.net>
Message-ID: <20080519114057.258020@gmx.net>

> At 11:06 19/05/2008, Johannes Luber wrote:
>  >While I was working on defuting your point, I recognized that 
> with
>  >subclassing the driver the code duplication can be removed 
> easily
>  >for debug drivers. IMO, debug drivers need to provide the full
>  >range of options for testing purposes anyway. That still leaves 
> the
>  >following issue <http://www.antlr.org:8888/browse/ANTLR-265>. 
> Any
>  >ideas how to solve this?
> 
> I don't think I understand the problem, nor why it's related to 
> what I was saying.

It is insofar related as the goal is to remove any mentioning of the debug namespace from CSharp(2).stg. It was meant to be a general question not direct at you specifically, but I was too rushed to point that out. :(
> 
>  >Even LINQ to Objects?
> 
> Yes.  Any use of LINQ requires a reference to System.Linq.dll 
> (since that's where the LINQ query definition classes are).  So 
> you can't use it without requiring .NET 3.5.

Gah! The best thing of C# 3 denied to me! At least I can still use the other enhancements.

Johannes

-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

From hharalambiev at gmail.com  Mon May 19 05:51:10 2008
From: hharalambiev at gmail.com (Haralambi Haralambiev)
Date: Mon, 19 May 2008 15:51:10 +0300
Subject: [antlr-interest] Basic predicate question
In-Reply-To: <aa71f710805160741m46a60032q31b1b48e7e064c35@mail.gmail.com>
References: <aa71f710805160741m46a60032q31b1b48e7e064c35@mail.gmail.com>
Message-ID: <aa71f710805190551p36394bb2xe82c450d7c726d3d@mail.gmail.com>

I checked the grammar above with the latest antlrworks and it says that the
NOT token is not reachable. So, at least now it gives you a warning, but I
still think that this is a bug and that the predicates should be taken into
account!

Hari

On 5/16/08, Haralambi Haralambiev <hharalambiev at gmail.com> wrote:
>
> Hello,
>
> I have stumbled upon on a problem where the DFA's prediction is incorrect,
> as it does not take into account the predicate for a rule.
>
> Consider the following grammar:
> -----------------------------------------------------
> lexer grammar test;
>
> IF : {getCharPositionInLine()==0}? => 'IF';
> UNKNOWN_CMD : {getCharPositionInLine()==0}? => Identifier;
>
> NOT : 'NOT';
>
> Identifier : ('A'..'Z'|'a'..'z')+;
> WS : ('\t'|' ')+;
> -----------------------------------------------------
>
> In the language I am working on, the first word is always some command. As
> I am not interested in all the commands, I decided to define an UNKNOWN_CMD.
>
> I also have some other keywords that are not commands, thus not in the
> beginning of the line, e.g. the described above NOT.
>
> With the grammar above and the input "IF NOT SOMETHING", the lexer fails,
> as the DFA has predicted that the "NOT" part of the stream should be an
> UNKNOWN_COMMAND.
> My understanding was that predicates are somehow included when predicting
> the next token and thus I am confused why the lexer will attempt to match
> the "NOT" to this lexer rule?
>
> If we put the NOT rule above the unknown rule, everything will work
> properly, but this is a work around and I would like to understand the cause
> of the issue.
>
> Could someone point the reason of such a behaviour?
>
> Thanks,
> Hari
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080519/0356fc63/attachment.html 

From mail at martin-probst.com  Mon May 19 05:52:32 2008
From: mail at martin-probst.com (Martin Probst)
Date: Mon, 19 May 2008 14:52:32 +0200
Subject: [antlr-interest] ParseTreeBuilder broken in decisions (with fix)
In-Reply-To: <loom.20080518T192059-460@post.gmane.org>
References: <83593ECD-1BE9-4A1E-ACBF-741681B792DF@martin-probst.com>
	<loom.20080518T192059-460@post.gmane.org>
Message-ID: <58DF91DF-3919-4564-A580-468DB7F16086@martin-probst.com>

> Hi, I don't know if this was related to my previous message, but it  
> does solve
> my main problem. Thank you very much!

This is pure coincidence, I didn't even read your message before.  
Happy that I helped you, even if it was by accident :-)

Martin

From hharalambiev at gmail.com  Mon May 19 05:56:17 2008
From: hharalambiev at gmail.com (Haralambi Haralambiev)
Date: Mon, 19 May 2008 15:56:17 +0300
Subject: [antlr-interest] Generated lexer is affected by parser rules?!
	A bug?
In-Reply-To: <aa71f710805170435k5e06f9b6p8edf0e04299b6313@mail.gmail.com>
References: <aa71f710805170144q2d3bec5aq5ee221e42b35a06f@mail.gmail.com>
	<aa71f710805170435k5e06f9b6p8edf0e04299b6313@mail.gmail.com>
Message-ID: <aa71f710805190556ida5672cjd51922ba6cb170e7@mail.gmail.com>

Hi Terrance,

I just tested the two grammars mentioned with the latest antlr with the idea
that this might have been fixed since last August.

However, the case is still the same.

Either I am missing something in the basics, or this is a bug. Could you
please verify which is the case here?

Thanks,
Hari

On 5/17/08, Haralambi Haralambiev <hharalambiev at gmail.com> wrote:
>
> Just revised the very simple grammar.
>
> Could someone point out what is the difference between the following two
> grammars:
> -----------
> lexer grammar testStringLiteral1;
>
> StringLiteral : Apos ~Apos* Apos;
>
> fragment
> Apos : '\'';
> -----------
>
> and
>
> -----------
> lexer grammar testStringLiteral2;
>
> StringLiteral : '\'' ~'\''* '\'';
> -----------
>
> When generated to Java file - they differ, while I expected not to!
>
> -Hari
>
> On 5/17/08, Haralambi Haralambiev <hharalambiev at gmail.com> wrote:
>>
>> Hello,
>>
>> A colleague of mine is working on some grammar and I was bemused when
>> she told me that a string literal '50' was throwing an error, while the '00'
>> was not throwing.
>>
>> The exception said "mismatched character '5' expecting set null".
>>
>> So, I started investigating... the lexer rule for string literal is the
>> following:
>> -----------
>> fragment
>> Apos : '\'';
>>
>> StringLiteral: Apos ~Apos* Apos
>> -----------
>>
>> Everything seemed fine, except that in the generated java code, the
>> mStringLiteral method had the following line:
>>
>> -----------
>> mApos();
>> // ...NewTest.g:84:9: (~ Apos )*
>> loop2:
>> do {
>> int alt2=2;
>> int LA2_0 = input.LA(1);
>>
>> if ( ((LA2_0>='\u0000' && LA2_0<='&')||(LA2_0>='(' && LA2_0<='\uFFFE')) )
>> {
>> alt2=1;
>> }
>>
>> switch (alt2) {
>> case 1 :
>> // ...NewTest.g:197:9: ~ Apos
>> {
>> *if ( (input.LA(1)>='\u0000' && input.LA(1)<='4')||(input.LA(1)>='6' &&
>> input.LA(1)<='\uFFFE') ) {*
>> input.consume();
>>
>> }
>> -----------
>>
>> This was totally unexpected (checking if the character is different than
>> '5'), so I did the following experiment:
>>
>>    - I removed all the parser rules.
>>    - I changed the grammar to a lexer grammar.
>>
>> When I generated the lexer, the corrupt if statement mentioned above was
>> changed to the following:
>>
>> -----------
>> switch (alt2) {
>> case 1 :
>> // ...NewTest.g:84:9: ~ Apos
>> {
>> *if ( (input.LA(1)>='\u0000' &&
>> input.LA(1)<='\u0014')||(input.LA(1)>='\u0016' && input.LA(1)<='\uFFFE') ) {
>> *
>> input.consume();
>>
>> }*
>> *-----------
>>
>> So, now the situation changed and the mentioned string '50' is OK, but it
>> is obvious that the check is wrong.
>>
>> I tested a simple grammar with the Apos and StringLiteral lexer
>> rules only:
>> -----------
>> lexer grammar testStringLiteral;
>>
>> StringLiteral : Apos ~Apos* Apos;
>> Apos : '\'';
>> -----------
>>
>> it generates the following if, which I consider again wrong:
>> -----------
>> *if ( (input.LA(1)>='\u0000' &&
>> input.LA(1)<='\u0003')||(input.LA(1)>='\u0005' && input.LA(1)<='\uFFFE') ) {
>> *
>> input.consume();
>>
>> }
>> -----------
>>
>> Taking into account the things said above,
>> I have two question:
>>
>>    - Why the parser rules affect the lexer class?
>>    - Why is this if clause before the consume() method different than the
>>    if clause that is deciding the alternative?
>>
>> Of course, I assume that I could have made some stupid mistake, so please
>> excuse me if I have done so.
>>
>> Best regards,
>> Hari
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080519/40986419/attachment.html 

From adam.rpconnelly at googlemail.com  Mon May 19 05:58:26 2008
From: adam.rpconnelly at googlemail.com (Adam Connelly)
Date: Mon, 19 May 2008 13:58:26 +0100
Subject: [antlr-interest] Altering antlr tool
Message-ID: <b9a39b060805190558w6e6ab2f2v410fe5d826bd765a@mail.gmail.com>

Hi,

I've got a couple of ideas that I want to try out that would involve
modifying the antlr grammar and altering what's generated.  What I was
wondering is are there any resources that explain where to start with this,
or do I basically just have to snoop around until I figure out how it works.

I basically want to add an extra bit to lexer token definitions and then
generate some code based on that.  Also, I was thinking of modifying the
semantic predicate syntax to add a "type" plus arguments to it (and once
again generate code based on that).

Cheers,
Adam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080519/3b5a1d47/attachment.html 

From open.zone at virgin.net  Mon May 19 06:23:16 2008
From: open.zone at virgin.net (Micheal J)
Date: Mon, 19 May 2008 14:23:16 +0100
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <20080519085009.48CAE11EACB@www.antlr.org>
References: <20080516232729.311920@gmx.net><20080517000058.3537gmx1@mx109.gmx.net><20080517164710.230450@gmx.net><000301c8b8ee$ae521000$c404a8c0@marion><20080518213847.118180@gmx.net>
	<20080519085009.48CAE11EACB@www.antlr.org>
Message-ID: <000901c8b9b3$805a5f70$c404a8c0@marion>

Hi,

>  >It's just that I don't like the current naming from an 
> aesthically  >point of view. We have 
> Antlr3.Runtime/Antlr.Runtime, etc. It is  >this repetition 
> that irks me.
> 
> The grouping makes a certain amount of sense; one refers to 
> the assembly and the other to the namespaces within that 
> assembly.  Though it's not entirely consistent, since the 
> Antlr3.Runtime.Tests assembly has all its files in the 
> assembly-folder, not in a namespace-named folder.

Would I be chasing a foolish consistency by fixing that now?

> Speaking of which: what actually goes in the 
> equivalently-named folders in the root (/runtime/CSharp/)?  
> In the distribution they're all empty.  (I haven't tried 
> building the runtime myself.  Maybe that would have answered 
> this question.)

Nothing. They are [deleted] remnants of the Reflector-ed sources. Should
probably be purged sometime...

> And on a related topic, it puzzled me a bit when I had to 
> reference "Antlr3.Runtime.dll" and then use the namespace 
> "Antlr.Runtime" in the code.  There's a bit of a disconnect 
> there; generally the assembly names tend to match the root 
> namespace name (either in full or squashed form).

If you use ST-integration in your grammars you will need 
- StringTemplate.dll  (ST#)
- antlr.runtime.dll   (an ST# dependency)
- Antlr3.Runtime.dll  (renamed to avoid conflict & brilliantly avoids
clashing with Antlr4.Runtime.dll!)

Could have renamed the namespaces too I guess but, we thought it better to
leave (most other targets use antlr not antlr3)...

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 


From open.zone at virgin.net  Mon May 19 06:30:49 2008
From: open.zone at virgin.net (Micheal J)
Date: Mon, 19 May 2008 14:30:49 +0100
Subject: [antlr-interest] LINQ in a lexer/parser? (WAS: C# Target Poll)
In-Reply-To: <20080519114057.258020@gmx.net>
References: <20080516232729.311920@gmx.net><005201c8b8d5$e1d22690$c404a8c0@marion>
	<20080518135156.250730@gmx.net><20080518201224.9301211EC99@www.antlr.org><20080518230657.118200@gmx.net><20080519084157.12649gmx1@mx074.gmx.net>
	<20080519114057.258020@gmx.net>
Message-ID: <001901c8b9b4$8de55d10$c404a8c0@marion>

Hi,

> >  >Even LINQ to Objects?
> > 
> > Yes.  Any use of LINQ requires a reference to 
> System.Linq.dll (since 
> > that's where the LINQ query definition classes are).  So 
> you can't use 
> > it without requiring .NET 3.5.
> 
> Gah! The best thing of C# 3 denied to me! At least I can 
> still use the other enhancements.

How would you use LINQ in a lexer/parser?

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 


From JALuber at gmx.de  Mon May 19 09:26:42 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Mon, 19 May 2008 18:26:42 +0200
Subject: [antlr-interest] Altering antlr tool
In-Reply-To: <b9a39b060805190558w6e6ab2f2v410fe5d826bd765a@mail.gmail.com>
References: <b9a39b060805190558w6e6ab2f2v410fe5d826bd765a@mail.gmail.com>
Message-ID: <20080519162642.250690@gmx.net>

> Hi,
> 
> I've got a couple of ideas that I want to try out that would involve
> modifying the antlr grammar and altering what's generated.  What I was
> wondering is are there any resources that explain where to start with
> this,
> or do I basically just have to snoop around until I figure out how it
> works.

While I commend your spirit there is one big hindrance for doing modifications: ANTLR 3.x is still implemented in ANTLR 2.7.7. This version has some limitations which are causing grief for many newbies. I suppose that changing ANTLR 3.x means that any implementation change to get rid of the old version will break your changes, too. Maybe you are interested in assisting Ter in this task, as I don't know if ANTLR 3.2 will manage the jump or not. At least you'll know the internals like the insides of your pocket. ;)

Johannes
> 
> I basically want to add an extra bit to lexer token definitions and then
> generate some code based on that.  Also, I was thinking of modifying the
> semantic predicate syntax to add a "type" plus arguments to it (and once
> again generate code based on that).
> 
> Cheers,
> Adam

-- 
249 Spiele f?r nur 1 Preis. Die GMX Spieleflatrate schon ab 9,90 Euro.
Neu: Asterix bei den Olympischen Spielen: http://flat.games.gmx.de

From jeffsaremi at yahoo.com  Mon May 19 09:27:30 2008
From: jeffsaremi at yahoo.com (Jeff Saremi)
Date: Mon, 19 May 2008 09:27:30 -0700 (PDT)
Subject: [antlr-interest] BitSets and 64bit Longs
Message-ID: <596107.51137.qm@web88106.mail.re2.yahoo.com>

THis is more for the ones who have had experience with implementing different "rumtime"s for Antlr.
I am half way through creating a runtime for Javascript however i'm stuck with the fact that i cannot do the "long" operations needed by BitSet.
I'm wondering if anyone knows the ramifications of using 32bit ops such as (bit << 31) instead of (bit << 63) and so on?
thanks
jeff

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080519/e42e1a2d/attachment.html 

From JALuber at gmx.de  Mon May 19 09:43:44 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Mon, 19 May 2008 18:43:44 +0200
Subject: [antlr-interest] LINQ in a lexer/parser? (WAS: C# Target Poll)
In-Reply-To: <001901c8b9b4$8de55d10$c404a8c0@marion>
References: <20080516232729.311920@gmx.net><005201c8b8d5$e1d22690$c404a8c0@marion>
	<20080518135156.250730@gmx.net><20080518201224.9301211EC99@www.antlr.org><20080518230657.118200@gmx.net><20080519084157.12649gmx1@mx074.gmx.net>
	<20080519114057.258020@gmx.net> <001901c8b9b4$8de55d10$c404a8c0@marion>
Message-ID: <20080519164344.250710@gmx.net>

> Hi,
> 
> > >  >Even LINQ to Objects?
> > > 
> > > Yes.  Any use of LINQ requires a reference to 
> > System.Linq.dll (since 
> > > that's where the LINQ query definition classes are).  So 
> > you can't use 
> > > it without requiring .NET 3.5.
> > 
> > Gah! The best thing of C# 3 denied to me! At least I can 
> > still use the other enhancements.
> 
> How would you use LINQ in a lexer/parser?
> 
> Micheal

I was thinking of using it in the runtime. As I neither have used LINQ yet nor have looked for a place where LINQ would be useful I can't give you an example. It was simply on my list with a low priority - and you wanted to see all my items. ;) And to close this thread: I don't know if LINQ is useful in a lexer or parser within the generated part but users may use it in actions and member sections.

Johannes

Johannes
-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx

From JALuber at gmx.de  Mon May 19 09:57:45 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Mon, 19 May 2008 18:57:45 +0200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <20080519085010.20354gmx1@mx036.gmx.net>
References: <20080516232729.311920@gmx.net>
	<20080517000058.3537gmx1@mx109.gmx.net> <20080517164710.230450@gmx.net>
	<000301c8b8ee$ae521000$c404a8c0@marion> <20080518213847.118180@gmx.net>
	<20080519085010.20354gmx1@mx036.gmx.net>
Message-ID: <20080519165745.250730@gmx.net>

> At 09:38 19/05/2008, Johannes Luber wrote:
>  >It's just that I don't like the current naming from an 
> aesthically
>  >point of view. We have Antlr3.Runtime/Antlr.Runtime, etc. It is
>  >this repetition that irks me.
> 
> The grouping makes a certain amount of sense; one refers to the 
> assembly and the other to the namespaces within that 
> assembly.  Though it's not entirely consistent, since the 
> Antlr3.Runtime.Tests assembly has all its files in the 
> assembly-folder, not in a namespace-named folder.

One possibly solution would be to mimic the namespace structure with the directory structure. Though that may collapse the contents of two folders (antlr.runtime and antlr3.runtime). If that is not tolerable, one could create a new folder named base (which would decrease the purity of the solution) or move project stuff somewhere else (Another subfolder? The parent directory? Would the latter clash with several projects?).
 
> And on a related topic, it puzzled me a bit when I had to 
> reference "Antlr3.Runtime.dll" and then use the namespace 
> "Antlr.Runtime" in the code.  There's a bit of a disconnect there; 
> generally the assembly names tend to match the root namespace name 
> (either in full or squashed form).

Makes sense. Why I explain in the answer to Micheal's email.

Johannes
-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx

From adam.rpconnelly at googlemail.com  Mon May 19 10:01:59 2008
From: adam.rpconnelly at googlemail.com (Adam Connelly)
Date: Mon, 19 May 2008 18:01:59 +0100
Subject: [antlr-interest] Altering antlr tool
In-Reply-To: <20080519162642.250690@gmx.net>
References: <b9a39b060805190558w6e6ab2f2v410fe5d826bd765a@mail.gmail.com>
	<20080519162642.250690@gmx.net>
Message-ID: <b9a39b060805191001u63629256sf9eb043e9fed74e7@mail.gmail.com>

Yeah, I'd noticed from looking at the grammars that they were a bit
different to the ones I'm used to.  I'm willing to help anywhere I can, but
I wouldn't quite know where to start.

Anyhow, cheers for the reply.

Adam

2008/5/19 Johannes Luber <JALuber at gmx.de>:

> > Hi,
> >
> > I've got a couple of ideas that I want to try out that would involve
> > modifying the antlr grammar and altering what's generated.  What I was
> > wondering is are there any resources that explain where to start with
> > this,
> > or do I basically just have to snoop around until I figure out how it
> > works.
>
> While I commend your spirit there is one big hindrance for doing
> modifications: ANTLR 3.x is still implemented in ANTLR 2.7.7. This version
> has some limitations which are causing grief for many newbies. I suppose
> that changing ANTLR 3.x means that any implementation change to get rid of
> the old version will break your changes, too. Maybe you are interested in
> assisting Ter in this task, as I don't know if ANTLR 3.2 will manage the
> jump or not. At least you'll know the internals like the insides of your
> pocket. ;)
>
> Johannes
> >
> > I basically want to add an extra bit to lexer token definitions and then
> > generate some code based on that.  Also, I was thinking of modifying the
> > semantic predicate syntax to add a "type" plus arguments to it (and once
> > again generate code based on that).
> >
> > Cheers,
> > Adam
>
> --
> 249 Spiele f?r nur 1 Preis. Die GMX Spieleflatrate schon ab 9,90 Euro.
> Neu: Asterix bei den Olympischen Spielen: http://flat.games.gmx.de
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080519/d142e23d/attachment.html 

From JALuber at gmx.de  Mon May 19 10:05:13 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Mon, 19 May 2008 19:05:13 +0200
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <000901c8b9b3$805a5f70$c404a8c0@marion>
References: <20080516232729.311920@gmx.net><20080517000058.3537gmx1@mx109.gmx.net><20080517164710.230450@gmx.net><000301c8b8ee$ae521000$c404a8c0@marion><20080518213847.118180@gmx.net>
	<20080519085009.48CAE11EACB@www.antlr.org>
	<000901c8b9b3$805a5f70$c404a8c0@marion>
Message-ID: <20080519170513.259210@gmx.net>

> Hi,
> 
> >  >It's just that I don't like the current naming from an 
> > aesthically  >point of view. We have 
> > Antlr3.Runtime/Antlr.Runtime, etc. It is  >this repetition 
> > that irks me.
> > 
> > The grouping makes a certain amount of sense; one refers to 
> > the assembly and the other to the namespaces within that 
> > assembly.  Though it's not entirely consistent, since the 
> > Antlr3.Runtime.Tests assembly has all its files in the 
> > assembly-folder, not in a namespace-named folder.
> 
> Would I be chasing a foolish consistency by fixing that now?

Consistency isn't foolish. Even if this isn't fixed now I'll reorder them when doing the split for the runtimes.
...
> > And on a related topic, it puzzled me a bit when I had to 
> > reference "Antlr3.Runtime.dll" and then use the namespace 
> > "Antlr.Runtime" in the code.  There's a bit of a disconnect 
> > there; generally the assembly names tend to match the root 
> > namespace name (either in full or squashed form).
> 
> If you use ST-integration in your grammars you will need 
> - StringTemplate.dll  (ST#)
> - antlr.runtime.dll   (an ST# dependency)
> - Antlr3.Runtime.dll  (renamed to avoid conflict & brilliantly avoids
> clashing with Antlr4.Runtime.dll!)

What is the Antlr3.Utilities used for?
> 
> Could have renamed the namespaces too I guess but, we thought it better to
> leave (most other targets use antlr not antlr3)...
> 
> Micheal

Well, this time you shouldn't have followed the majority. The problem is that Antlr4.Runtime.dll can't be used in concurrency with Antlr3.Runtime.dll due to namespace clashes. Well, users can use assembly aliases to solve that problem but it could be done without user interaction. And yes, I truly believe that someday ANLTR 3 and ANTLR 4 end up being used together in some project.

Johannes
-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx

From open.zone at virgin.net  Mon May 19 10:17:52 2008
From: open.zone at virgin.net (Micheal J)
Date: Mon, 19 May 2008 18:17:52 +0100
Subject: [antlr-interest] LINQ in a lexer/parser? (WAS: C# Target Poll)
In-Reply-To: <20080519164344.250710@gmx.net>
References: <20080516232729.311920@gmx.net><005201c8b8d5$e1d22690$c404a8c0@marion><20080518135156.250730@gmx.net><20080518201224.9301211EC99@www.antlr.org><20080518230657.118200@gmx.net><20080519084157.12649gmx1@mx074.gmx.net><20080519114057.258020@gmx.net>
	<001901c8b9b4$8de55d10$c404a8c0@marion>
	<20080519164344.250710@gmx.net>
Message-ID: <000001c8b9d4$49e10c70$c404a8c0@marion>

Hi,

> I was thinking of using it in the runtime. As I neither have 
> used LINQ yet nor have looked for a place where LINQ would be 
> useful I can't give you an example. It was simply on my list 
> with a low priority - and you wanted to see all my items. ;) 
> And to close this thread: I don't know if LINQ is useful in a 
> lexer or parser within the generated part but users may use 
> it in actions and member sections.

Sorry, I didn't mean to put you on the spot.

I had read an article using LINQ to implement parser combinators. His
version worked but was unoptimized iirc, I was hoping you had some ideas on
LINQ's utility...

Also saw this http://www.codeplex.com/LinqOverCSharp but, haven't had time
to even look at the code.

Supporting C# 3 syntax in actions would be cool!. I suspect that adding full
support for C# v3 syntax (incl. LINQ) in action blocks would require
target-language-specific action lexers as was the case with ANTLR v2.x - a
change to the ANTLR tool itself in other words.


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited.


From open.zone at virgin.net  Mon May 19 10:31:05 2008
From: open.zone at virgin.net (Micheal J)
Date: Mon, 19 May 2008 18:31:05 +0100
Subject: [antlr-interest] C# Target Poll
In-Reply-To: <20080519170513.259210@gmx.net>
References: <20080516232729.311920@gmx.net><20080517000058.3537gmx1@mx109.gmx.net><20080517164710.230450@gmx.net><000301c8b8ee$ae521000$c404a8c0@marion><20080518213847.118180@gmx.net><20080519085009.48CAE11EACB@www.antlr.org>
	<000901c8b9b3$805a5f70$c404a8c0@marion>
	<20080519170513.259210@gmx.net>
Message-ID: <000401c8b9d6$1edd7930$c404a8c0@marion>

Hi,

> > > And on a related topic, it puzzled me a bit when I had to 
> reference 
> > > "Antlr3.Runtime.dll" and then use the namespace 
> "Antlr.Runtime" in 
> > > the code.  There's a bit of a disconnect there; generally the 
> > > assembly names tend to match the root namespace name 
> (either in full 
> > > or squashed form).
> > 
> > If you use ST-integration in your grammars you will need
> > - StringTemplate.dll  (ST#)
> > - antlr.runtime.dll   (an ST# dependency)
> > - Antlr3.Runtime.dll  (renamed to avoid conflict & 
> brilliantly avoids 
> > clashing with Antlr4.Runtime.dll!)
> 
> What is the Antlr3.Utilities used for?

Currently houses the 'DOTTreeGenerator' class with a dependency on ST. The
split into two assemblies means unless a project uses 'DOTTreeGenerator' or
ST-integration in grammmar, there is no dependency on ST, just
Antlr3.Runtime.

> > Could have renamed the namespaces too I guess but, we thought it 
> > better to leave (most other targets use antlr not antlr3)...
> > 
> > Micheal
> 
> Well, this time you shouldn't have followed the majority. The 
> problem is that Antlr4.Runtime.dll can't be used in 
> concurrency with Antlr3.Runtime.dll due to namespace clashes. 
> Well, users can use assembly aliases to solve that problem 
> but it could be done without user interaction. And yes, I 
> truly believe that someday ANLTR 3 and ANTLR 4 end up being 
> used together in some project.

Can't argue with the reasoning. It was a close decision iirc. For ANTLR4,
there is the option of swap the ST lexer/parser for handcoded ones... ;-)

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 


From belayda at gmail.com  Mon May 19 11:28:05 2008
From: belayda at gmail.com (Bernardo Elayda)
Date: Mon, 19 May 2008 11:28:05 -0700
Subject: [antlr-interest] automatic tree grammar generation
Message-ID: <3e5ed32f0805191128r344db64fk70698f5f6af0d90a@mail.gmail.com>

Hi!

If a tree grammar is derived from an AST made by ANTLR, shouldn't the
creation of the tree grammar be able to happen automatically?
If this can't be done today, I think this would be a nice feature for the
future.

This question occurred to me while I was writing a paper on using ANTLR as a
front-end for a virtual machine.

tia,
Bernie Elayda
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080519/884f6821/attachment.html 

From pink at odahoda.de  Mon May 19 11:55:32 2008
From: pink at odahoda.de (Benjamin Niemann)
Date: Mon, 19 May 2008 20:55:32 +0200
Subject: [antlr-interest] BitSets and 64bit Longs
In-Reply-To: <596107.51137.qm@web88106.mail.re2.yahoo.com>
References: <596107.51137.qm@web88106.mail.re2.yahoo.com>
Message-ID: <543531490805191155y1f235499q48b485ab3855a2fe@mail.gmail.com>

Hi Jeff,

the BitSet class is just an internal implementation detail of the Java
runtime - probably because Java has poor or slow support for real
sets.
For Python I use the set() class to store token types. Use whatever is
most appropriate in JS to manage sets and supports the basic set
operations required by ANTLR. My guess is (but that's a pure guess)
that in such a high level language as JS the overhead of fiddling with
bits is bigger than the use of a less memory efficient, but more
native implementation.

-Ben

On Mon, May 19, 2008 at 6:27 PM, Jeff Saremi <jeffsaremi at yahoo.com> wrote:
>
> THis is more for the ones who have had experience with implementing
> different "rumtime"s for Antlr.
> I am half way through creating a runtime for Javascript however i'm stuck
> with the fact that i cannot do the "long" operations needed by BitSet.
> I'm wondering if anyone knows the ramifications of using 32bit ops such as
> (bit << 31) instead of (bit << 63) and so on?
> thanks
> jeff
>

From brent.yates at gmail.com  Mon May 19 13:22:25 2008
From: brent.yates at gmail.com (Brent Yates)
Date: Mon, 19 May 2008 16:22:25 -0400
Subject: [antlr-interest] gUnit problem
In-Reply-To: <A62D0A94-CDC7-4548-ADE2-4168101AE0B7@cs.usfca.edu>
References: <6edc6c380805181629h41f0ab65r6e0404acbb3a0e3a@mail.gmail.com>
	<A62D0A94-CDC7-4548-ADE2-4168101AE0B7@cs.usfca.edu>
Message-ID: <6edc6c380805191322p4b256fbbw6f6e97d914a6b962@mail.gmail.com>

I checked the path (using the verbose option) and it shows that I am using
stringtemplate-3.1b1 from the antlr-2008-05-07.18 release.  Is there a later
stringtemplate?  Qinxian's response seems to indicate a problem with the
template file format.  Just for reference, I am running under Windows XP.

[Loaded org.antlr.stringtemplate.language.ASTExpr$2 from
file:/E:/UtilityDev/VerilogParser/AntlrWorks/antlr-2008-05-07.18/lib/stringtemplate-3.1b1.jar]
[Loaded org.antlr.stringtemplate.AutoIndentWriter from
file:/E:/UtilityDev/VerilogParser/AntlrWorks/antlr-2008-05-07.18/lib/stringtemplate-3.1b1.jar]

Thanks,

Brent Yates
brent.yates at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080519/9fa8c293/attachment.html 

From csanders at hoovers.com  Mon May 19 13:35:34 2008
From: csanders at hoovers.com (csanders)
Date: Mon, 19 May 2008 15:35:34 -0500
Subject: [antlr-interest] Beginner Question
In-Reply-To: <6edc6c380805191322p4b256fbbw6f6e97d914a6b962@mail.gmail.com>
References: <6edc6c380805181629h41f0ab65r6e0404acbb3a0e3a@mail.gmail.com>	<A62D0A94-CDC7-4548-ADE2-4168101AE0B7@cs.usfca.edu>
	<6edc6c380805191322p4b256fbbw6f6e97d914a6b962@mail.gmail.com>
Message-ID: <4831E496.6060807@hoovers.com>

Hello Antlr users!

I'm using Antlr for the first time, and I'm trying to extend the 
expression evaluator example to handle 'if' statements, if I have 
something like:


ifStatement
    :   
      'if' e=expression s1=statement 
      {
          System.out.println("ifStatement : e = " + $e.value  );
          Boolean test = ( Boolean) $e.value;
          if ( test )
          {
                // How do I do this ??
          }
      }
      ('else' s2=statement)?
      ;



How do I 'execute' s1 ( statement ) if 'test' is true ?  It looks like 
the parser is parsing the statement first, then the expression, then 
finally the second statement if its present.

Thanks!
Charlie

From leon.antlr at mac.com  Mon May 19 13:36:39 2008
From: leon.antlr at mac.com (Leon Su)
Date: Mon, 19 May 2008 13:36:39 -0700
Subject: [antlr-interest] gUnit problem
In-Reply-To: <6edc6c380805191322p4b256fbbw6f6e97d914a6b962@mail.gmail.com>
References: <6edc6c380805181629h41f0ab65r6e0404acbb3a0e3a@mail.gmail.com>
	<A62D0A94-CDC7-4548-ADE2-4168101AE0B7@cs.usfca.edu>
	<6edc6c380805191322p4b256fbbw6f6e97d914a6b962@mail.gmail.com>
Message-ID: <F0733521-783E-4CC4-8A3B-9377FD8FDA7F@mac.com>

Hi,

I just fixed the version issue with StringTemplate.
Please download the latest gunit-1.0.2.jar on the wiki, and let me  
know if there's still the same problem.

Thanks,

Leon

On May 19, 2008, at 1:22 PM, Brent Yates wrote:

> I checked the path (using the verbose option) and it shows that I  
> am using stringtemplate-3.1b1 from the antlr-2008-05-07.18  
> release.  Is there a later stringtemplate?  Qinxian's response  
> seems to indicate a problem with the template file format.  Just  
> for reference, I am running under Windows XP.
>
> [Loaded org.antlr.stringtemplate.language.ASTExpr$2 from file:/E:/ 
> UtilityDev/VerilogParser/AntlrWorks/antlr-2008-05-07.18/lib/ 
> stringtemplate-3.1b1.jar]
> [Loaded org.antlr.stringtemplate.AutoIndentWriter from file:/E:/ 
> UtilityDev/VerilogParser/AntlrWorks/antlr-2008-05-07.18/lib/ 
> stringtemplate-3.1b1.jar]
>
> Thanks,
>
> Brent Yates
> brent.yates at gmail.com
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080519/ca80db9f/attachment.html 

From antlr.markobarko at gmail.com  Mon May 19 13:42:27 2008
From: antlr.markobarko at gmail.com (Marko Simovic)
Date: Mon, 19 May 2008 16:42:27 -0400
Subject: [antlr-interest] Token replacement
Message-ID: <1211229747.11970.14.camel@main>

Hi, i have the following rule:

someRule: something op='where' condition 'else' something;

i'm trying to rewrite it by doing:

-> ^(Function 'if' condition something+)

i do this in order to keep the AST processing code unchanged (as it
already handles the 'if' function correctly; and the 'where' syntax is
just a variant of the same conditional syntax)

however, the rewrite just generates the number '45' for that 'if'??

i tried doing this:

?-> ^(Function 'if'[$op] condition something+)

but that seems to be unsupported.

what can i do?


From lgcraymer at yahoo.com  Mon May 19 14:07:18 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 19 May 2008 14:07:18 -0700 (PDT)
Subject: [antlr-interest] automatic tree grammar generation
Message-ID: <348669.86824.qm@web55913.mail.re3.yahoo.com>

Bernardo--

I did a version of ANTLR 2 (2.8) with that capability, but the distribution got buried behind the OpenChannel licensing conditions.  That was one of the things that inspired the ANTLR 3 effort, and is (or will be--modeling transformations that use the attribute algebra takes a bit of effort to implement) a key feature of ANTLR Yggdrasil.  Automated tree grammar generation does cut development time significantly.

The lack of a first-class attribute syntax in ANTLR 3 makes it very difficult to impossible to build a "complete" tree grammar automatically (long-distance translocations would be hidden in actions) for some of the interesting translation situations, but it should be possible to cover 99% of the cases arising with hand editing for the remainder.

I am in the middle of getting the tree grammar generation working for Yggdrasil.  It will take me about three weeks of intensive debug and test to get the attribute algebra modeling working (but don't ask me when I will have those three weeks--I have other priorities) and then about a month to get the annotation-based (^ and current rule tree manipulations) transformation passes.  Once I have that, I intend to release a pre-1.0 version of Yggdrasil for general use.

--Loring


----- Original Message ----
From: Bernardo Elayda <belayda at gmail.com>
To: antlr-interest at antlr.org
Sent: Monday, May 19, 2008 11:28:05 AM
Subject: [antlr-interest] automatic tree grammar generation

Hi!

If a tree grammar is derived from an AST made by ANTLR, shouldn't the creation of the tree grammar be able to happen automatically?
If this can't be done today, I think this would be a nice feature for the future.

This question occurred to me while I was writing a paper on using ANTLR as a front-end for a virtual machine.

tia,
Bernie Elayda



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080519/b3dae1e7/attachment.html 

From brent.yates at gmail.com  Mon May 19 14:36:49 2008
From: brent.yates at gmail.com (Brent Yates)
Date: Mon, 19 May 2008 17:36:49 -0400
Subject: [antlr-interest] gUnit problem
In-Reply-To: <F0733521-783E-4CC4-8A3B-9377FD8FDA7F@mac.com>
References: <6edc6c380805181629h41f0ab65r6e0404acbb3a0e3a@mail.gmail.com>
	<A62D0A94-CDC7-4548-ADE2-4168101AE0B7@cs.usfca.edu>
	<6edc6c380805191322p4b256fbbw6f6e97d914a6b962@mail.gmail.com>
	<F0733521-783E-4CC4-8A3B-9377FD8FDA7F@mac.com>
Message-ID: <6edc6c380805191436u35b3dc89vd6129b9cb28ddd1@mail.gmail.com>

Leon,

That fixed it.  Thanks!

Brent Yates
brent.yates at gmail.com

On Mon, May 19, 2008 at 4:36 PM, Leon Su <leon.antlr at mac.com> wrote:

> Hi,
>
> I just fixed the version issue with StringTemplate.
> Please download the latest gunit-1.0.2.jar on the wiki, and let me know if
> there's still the same problem.
>
> Thanks,
>
> Leon
>
> On May 19, 2008, at 1:22 PM, Brent Yates wrote:
>
> I checked the path (using the verbose option) and it shows that I am using
> stringtemplate-3.1b1 from the antlr-2008-05-07.18 release.  Is there a later
> stringtemplate?  Qinxian's response seems to indicate a problem with the
> template file format.  Just for reference, I am running under Windows XP.
>
> [Loaded org.antlr.stringtemplate.language.ASTExpr$2 from file:/E
> :/UtilityDev/VerilogParser/AntlrWorks/antlr-2008-05-07.18/lib/stringtemplate-3.1b1.jar]
> [Loaded org.antlr.stringtemplate.AutoIndentWriter from file:/E
> :/UtilityDev/VerilogParser/AntlrWorks/antlr-2008-05-07.18/lib/stringtemplate-3.1b1.jar]
>
> Thanks,
>
> Brent Yates
> brent.yates at gmail.com
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080519/cc05b169/attachment.html 

From JALuber at gmx.de  Mon May 19 16:04:36 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Tue, 20 May 2008 01:04:36 +0200
Subject: [antlr-interest] ANTLR 3.0.1 C# target
In-Reply-To: <4831DF75.2050004@gmail.com>
References: <4831DF75.2050004@gmail.com>
Message-ID: <20080519230436.3440@gmx.net>

> Hello!
> 
> I have a small problem with C# code generator. The generator produces 
> code with using declarations. This may cause name clashes with different 
> classes. In my project the System.Type clashes with my own Type class. 
> The simple workaround is to write:
> 
> 	using Type = My.Own.Type;
> 
> but this won't work for Stack if someone ever needs to use that name. 
> Surely one could use the fully qualified name, but couldn't the 
> generated code do that? So I'd like to suggest removing the using 
> declarations.
> 
> 
> 
> Stefan Chrobot

Just that I understand you correctly: Instead "using IList = System.Collections.IList;" you want to have "System.Collections.IList" everywhere. Would using the new partial class-feature of CSharp2 help already? IIRC, different partial class files can have different using statements, even the same alias for different things.

Johannes
-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

From JALuber at gmx.de  Mon May 19 16:09:41 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Tue, 20 May 2008 01:09:41 +0200
Subject: [antlr-interest] LINQ in a lexer/parser? (WAS: C# Target Poll)
In-Reply-To: <000001c8b9d4$49e10c70$c404a8c0@marion>
References: <20080516232729.311920@gmx.net><005201c8b8d5$e1d22690$c404a8c0@marion><20080518135156.250730@gmx.net><20080518201224.9301211EC99@www.antlr.org><20080518230657.118200@gmx.net><20080519084157.12649gmx1@mx074.gmx.net><20080519114057.258020@gmx.net>
	<001901c8b9b4$8de55d10$c404a8c0@marion>	<20080519164344.250710@gmx.net>
	<000001c8b9d4$49e10c70$c404a8c0@marion>
Message-ID: <20080519230941.3420@gmx.net>

> Hi,
> 
> > I was thinking of using it in the runtime. As I neither have 
> > used LINQ yet nor have looked for a place where LINQ would be 
> > useful I can't give you an example. It was simply on my list 
> > with a low priority - and you wanted to see all my items. ;) 
> > And to close this thread: I don't know if LINQ is useful in a 
> > lexer or parser within the generated part but users may use 
> > it in actions and member sections.
> 
> Sorry, I didn't mean to put you on the spot.
> 
> I had read an article using LINQ to implement parser combinators. His
> version worked but was unoptimized iirc, I was hoping you had some ideas
> on
> LINQ's utility...

Somehow this looks familiar - do you have still the link?
> 
> Also saw this http://www.codeplex.com/LinqOverCSharp but, haven't had time
> to even look at the code.

Hmm - I don't see how that compiler does help with ANTLR code generation.
 
> Supporting C# 3 syntax in actions would be cool!. I suspect that adding
> full
> support for C# v3 syntax (incl. LINQ) in action blocks would require
> target-language-specific action lexers as was the case with ANTLR v2.x - a
> change to the ANTLR tool itself in other words.

Why is the normal action syntax not enough? Isn't the content of actions largely left alone? And even if there is some problem one could use partial classes to define LINQ queries in separate methods. This is a good idea anyway for better syntax highlighting.

Johannes
> 
> 
> Micheal
> 
> -----------------------
> The best way to contact me is via the list/forum. My time is very limited.

-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx

From kverma at yahoo.com  Mon May 19 16:49:38 2008
From: kverma at yahoo.com (Kamal Verma)
Date: Mon, 19 May 2008 16:49:38 -0700 (PDT)
Subject: [antlr-interest] automatic tree grammar generation
Message-ID: <71502.62792.qm@web54606.mail.re2.yahoo.com>

Wonderful, when can we have it.

Few months ago I had similar need and I almost thought of same thing. It will be wonderful if have it as a command line option on antlr. Like "-treeg <filename>". How about string templating the 'AST' of 'antlr' grammar. ( inside the tool )

It will also help with understanding of generated AST and debug and develop the grammar.

I will love to hear Terence thoughts on this.

Regards,
-Kamal


----- Original Message ----
From: Loring Craymer <lgcraymer at yahoo.com>
To: Bernardo Elayda <belayda at gmail.com>; antlr-interest at antlr.org
Sent: Monday, May 19, 2008 5:07:18 PM
Subject: Re: [antlr-interest] automatic tree grammar generation


Bernardo--

I did a version of ANTLR 2 (2.8) with that capability, but the distribution got buried behind the OpenChannel licensing conditions.  That was one of the things that inspired the ANTLR 3 effort, and is (or will be--modeling transformations that use the attribute algebra takes a bit of effort to implement) a key feature of ANTLR Yggdrasil.  Automated tree grammar generation does cut development time significantly.

The lack of a first-class attribute syntax in ANTLR 3 makes it very difficult to impossible to build a "complete" tree grammar automatically (long-distance translocations would be hidden in actions) for some of the interesting translation situations, but it should be possible to cover 99% of the cases arising with hand editing for the remainder.

I am in the middle of getting the tree grammar generation working for Yggdrasil.  It will take me about three weeks of intensive debug and test to get the attribute algebra modeling working (but don't ask me when I will have those three weeks--I have other priorities) and then about a month to get the annotation-based (^ and current rule tree manipulations) transformation passes.  Once I have that, I intend to release a pre-1.0 version of Yggdrasil for general use.

--Loring


----- Original Message ----
From: Bernardo Elayda <belayda at gmail.com>
To: antlr-interest at antlr.org
Sent: Monday, May 19, 2008 11:28:05 AM
Subject: [antlr-interest] automatic tree grammar generation

Hi!

If a tree grammar is derived from an AST made by ANTLR, shouldn't the creation of the tree grammar be able to happen automatically?
If this can't be done today, I think this would be a nice feature for the future.

This question occurred to me while I was writing a paper on using ANTLR as a front-end for a virtual machine.

tia,
Bernie Elayda


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080519/7fcc1ed4/attachment.html 

From parrt at cs.usfca.edu  Mon May 19 17:30:21 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 19 May 2008 17:30:21 -0700
Subject: [antlr-interest] automatic tree grammar generation
In-Reply-To: <71502.62792.qm@web54606.mail.re2.yahoo.com>
References: <71502.62792.qm@web54606.mail.re2.yahoo.com>
Message-ID: <B47FF567-691E-4EC5-9A97-E2702C259B95@cs.usfca.edu>


On May 19, 2008, at 4:49 PM, Kamal Verma wrote:

> Wonderful, when can we have it.
>
> Few months ago I had similar need and I almost thought of same  
> thing. It will be wonderful if have it as a command line option on  
> antlr. Like "-treeg <filename>". How about string templating the  
> 'AST' of 'antlr' grammar. ( inside the tool )
>
> It will also help with understanding of generated AST and debug and  
> develop the grammar.
>
> I will love to hear Terence thoughts on this.

Not always easy for -> rewrites even when they use $a vars.

a : (b->b) ('+' x=b -> ^('+' $a $x) )* ;

not sure how i'd figure that out off top of my head.

A basic "get me started" kind of thing would be pretty easy I guess. :)

Ter

From jhurstus at gmail.com  Mon May 19 17:37:54 2008
From: jhurstus at gmail.com (Joey Hurst)
Date: Mon, 19 May 2008 17:37:54 -0700
Subject: [antlr-interest] antlr-interest Digest, Vol 42, Issue 37
In-Reply-To: <mailman.1.1211223601.19196.antlr-interest@antlr.org>
References: <mailman.1.1211223601.19196.antlr-interest@antlr.org>
Message-ID: <eeed9d0b0805191737w7d13b527t5346ede24c3c3a72@mail.gmail.com>

Hi Jeff,
Ben is probably correct here.  All ES3 numbers are actually floating point,
which means that the interpreter has to cast the number to a 32 bit int and
then back to a floating point to do any bitwise arithmetic.

Also, I'm nearly done with a JavaScript target for ANTLR 3.  I would be
interested in syncing our code at some point to minimize duplicated effort.
Is your code ready to be shared?

Thanks,
Joey

Message: 2
> Date: Mon, 19 May 2008 20:55:32 +0200
> From: "Benjamin Niemann" <pink at odahoda.de>
> Subject: Re: [antlr-interest] BitSets and 64bit Longs
> To: "Jeff Saremi" <jeffsaremi at yahoo.com>
> Cc: antlr-interest at antlr.org
> Message-ID:
>        <543531490805191155y1f235499q48b485ab3855a2fe at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> Hi Jeff,
>
> the BitSet class is just an internal implementation detail of the Java
> runtime - probably because Java has poor or slow support for real
> sets.
> For Python I use the set() class to store token types. Use whatever is
> most appropriate in JS to manage sets and supports the basic set
> operations required by ANTLR. My guess is (but that's a pure guess)
> that in such a high level language as JS the overhead of fiddling with
> bits is bigger than the use of a less memory efficient, but more
> native implementation.
>
> -Ben
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080519/55ca94af/attachment.html 

From anderson.lizardo at gmail.com  Mon May 19 17:56:32 2008
From: anderson.lizardo at gmail.com (Anderson Lizardo)
Date: Mon, 19 May 2008 20:56:32 -0400
Subject: [antlr-interest] Ignore newlines, except for a specific rule
Message-ID: <5b5833aa0805191756s1175120ci5525fb4a84ad00c4@mail.gmail.com>

Hi all,

I'm writing a grammar for a domain-specific language called SLED [1].
It has a strange requirement where it ignores every newline (i.e.
treats it as whitespace) except for a specific expression where the
newline is relevant for splitting it into sub-expressions. In
particular, in this "special" expression, only the first token is
required, the other are optional. Here is the relevant grammar
snippet:

////
constructor: opcode operand* (':' const_type)? branches? ;
////

I tried adding the newline to the WS rule (so it could be ignored) and
the NEWLINE explicit for the "special" rule, like this:

///
constructor: opcode operand* (':' const_type)? branches? NEWLINE ;
...
NEWLINE: '\n' { $channel = HIDDEN; } ;

WS:	(' '|'\t'|'\n')+ { $channel = HIDDEN; } ;
///

But then the newline seems to be consumed by the WS rule before the
"constructor" rule is tried. Excluding the newline from the WS rule
and adding it to the rules where it may appear is unfeasible as it may
occur on pretty much everywhere where a whitespace is accepted.

Any suggestions? Thanks,

[1] http://www.cs.virginia.edu/zephyr/csdl/toolkit.html
-- 
Anderson Lizardo

From fyaoxy at gmail.com  Mon May 19 18:02:48 2008
From: fyaoxy at gmail.com (=?GB2312?B?z/LRxQ==?=)
Date: Tue, 20 May 2008 09:02:48 +0800
Subject: [antlr-interest] Token replacement
In-Reply-To: <1211229747.11970.14.camel@main>
References: <1211229747.11970.14.camel@main>
Message-ID: <91dd9a4f0805191802p58ab398frbf5a5d2223b3a086@mail.gmail.com>

Hi,

I found that about node creating most clear in
org.antlr.runtime.tree.TreeAdaptor API javadoc.

For your case, maybe add a parser ruler is an option.

Regards,
Qinxian

2008/5/20 Marko Simovic <antlr.markobarko at gmail.com>:

> Hi, i have the following rule:
>
> someRule: something op='where' condition 'else' something;
>
> i'm trying to rewrite it by doing:
>
> -> ^(Function 'if' condition something+)
>
> i do this in order to keep the AST processing code unchanged (as it
> already handles the 'if' function correctly; and the 'where' syntax is
> just a variant of the same conditional syntax)
>
> however, the rewrite just generates the number '45' for that 'if'??
>
> i tried doing this:
>
> ?-> ^(Function 'if'[$op] condition something+)
>
> but that seems to be unsupported.
>
> what can i do?
>
>


-- 
??
??
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080520/919369e9/attachment.html 

From jeffsaremi at yahoo.com  Mon May 19 18:05:57 2008
From: jeffsaremi at yahoo.com (Jeff Saremi)
Date: Mon, 19 May 2008 18:05:57 -0700 (PDT)
Subject: [antlr-interest] antlr-interest Digest, Vol 42, Issue 37
Message-ID: <132413.32193.qm@web88107.mail.re2.yahoo.com>

you just poured cold water over me man. If only i knew earlier.
Lemme know where you are.
THis is what I have done:
- Bitset, Lexer, Parser, base recognizer, all streams, dfa, exceptions, and tokens
- the stg is done but i need to rework it in the light of the corrections to the above
- unit test is done for most with the exception of rewritestream which is giving me griefs
- have not touched the tree yet
- i obviously don't have an end to end yet but once i get through the unittests, that should be no problem.

i have tried to stick with the original java logic to the degree i could. therefore the code is probably not efficient to run ina browser. 

I haven't had the time to test anything against IE either. But i don't really have any browser-dependent code.
Since i've been checking Mozilla for refernce there could be some calls I could adjust for IE.

I have not used any libraries either. Its all pure handcoded JS with the exception of a "Class" constructor for simple inheritence.
THat's taken from John Resig's blog.

I have no problem at all dropping this right now. I'm sure preparing examples and documentation is something i could help you with.
Or i might as well just keep going to get some sense of closure for myself.

pls use my email to let me know
thanks
jeff


----- Original Message ----
From: Joey Hurst <jhurstus at gmail.com>
To: antlr-interest at antlr.org; jeffsaremi at yahoo.com; pink at odahoda.de
Sent: Monday, May 19, 2008 8:37:54 PM
Subject: Re: antlr-interest Digest, Vol 42, Issue 37

Hi Jeff,
Ben is probably correct here.  All ES3 numbers are actually floating point, which means that the interpreter has to cast the number to a 32 bit int and then back to a floating point to do any bitwise arithmetic.

Also, I'm nearly done with a JavaScript target for ANTLR 3.  I would be interested in syncing our code at some point to minimize duplicated effort.  Is your code ready to be shared?

Thanks,
Joey

Message: 2
Date: Mon, 19 May 2008 20:55:32 +0200
From: "Benjamin Niemann" <pink at odahoda.de>
Subject: Re: [antlr-interest] BitSets and 64bit Longs
To: "Jeff Saremi" <jeffsaremi at yahoo.com>
Cc: antlr-interest at antlr.org
Message-ID:
        <543531490805191155y1f235499q48b485ab3855a2fe at mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Hi Jeff,

the BitSet class is just an internal implementation detail of the Java
runtime - probably because Java has poor or slow support for real
sets.
For Python I use the set() class to store token types. Use whatever is
most appropriate in JS to manage sets and supports the basic set
operations required by ANTLR. My guess is (but that's a pure guess)
that in such a high level language as JS the overhead of fiddling with
bits is bigger than the use of a less memory efficient, but more
native implementation.

-Ben




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080519/0ad2517a/attachment-0001.html 

From lgcraymer at yahoo.com  Mon May 19 18:14:07 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Mon, 19 May 2008 18:14:07 -0700 (PDT)
Subject: [antlr-interest] automatic tree grammar generation
Message-ID: <361833.61695.qm@web55905.mail.re3.yahoo.com>

Ter--

The basic methodology is "refactor until the transformation is obvious".  For this one, the sequence is:

a :  b  ( '+' x = b  -> ^('+' $a $x) )* ;

goes to

a :   b  ( '+' x = b  -> ^('+' $a $x) )+ 
        |  b
    ;

after which you factor out

c : b  ( '+' x = b  -> ^('+' $a $x) )+ ;

which becomes

c :  c1 = a  '+' x = b -> ^('+' $c1 $x) ;

and substituting back into a gives

a :  ^( '+' a b )
        | b
    ;

Cheers!

--Loring



----- Original Message ----
> From: Terence Parr <parrt at cs.usfca.edu>
> To: Kamal Verma <kverma at yahoo.com>
> Cc: Loring Craymer <lgcraymer at yahoo.com>; Bernardo Elayda <belayda at gmail.com>; antlr-interest at antlr.org
> Sent: Monday, May 19, 2008 5:30:21 PM
> Subject: Re: [antlr-interest] automatic tree grammar generation
> 
> 
> On May 19, 2008, at 4:49 PM, Kamal Verma wrote:
> 
> > Wonderful, when can we have it.
> >
> > Few months ago I had similar need and I almost thought of same  
> > thing. It will be wonderful if have it as a command line option on  
> > antlr. Like "-treeg ". How about string templating the  
> > 'AST' of 'antlr' grammar. ( inside the tool )
> >
> > It will also help with understanding of generated AST and debug and  
> > develop the grammar.
> >
> > I will love to hear Terence thoughts on this.
> 
> Not always easy for -> rewrites even when they use $a vars.
> 
> a : (b->b) ('+' x=b -> ^('+' $a $x) )* ;
> 
> not sure how i'd figure that out off top of my head.
> 
> A basic "get me started" kind of thing would be pretty easy I guess. :)
> 
> Ter



      

From vgrigor at mail.ru  Tue May 20 05:05:04 2008
From: vgrigor at mail.ru (Vladimir Grigoriev)
Date: Tue, 20 May 2008 16:05:04 +0400
Subject: [antlr-interest] AST with typed nodes C# samples and tree parsing
	need
In-Reply-To: <1846305723.20080519000952@mail.ru>
References: <1846305723.20080519000952@mail.ru>
Message-ID: <1358287386.20080520160504@mail.ru>



Are there more advanced samples for C# target?
especially creating typed AST, and parse comples tree with generation something,
once default samples produce just flat set of nodes.

especially interesting creation of referenced leafs in AST -
how to implement variable definition and their use ?
may be some standard technique is used for this most common case?

Does tree walker sufficient and optimal and for serious language
code generation from tree ?

thanks

I'm glad to join ANTLR society.
Vladimir Grigoryev
-------------- next part --------------
An embedded message was scrubbed...
From: Vladimir Grigoriev <vgrigor at mail.ru>
Subject: AST with node types  C# samples need
Date: Mon, 19 May 2008 00:09:52 +0400
Size: 1317
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20080520/bd0f52dd/attachment.eml 

From JALuber at gmx.de  Tue May 20 07:10:02 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Tue, 20 May 2008 16:10:02 +0200
Subject: [antlr-interest] AST with typed nodes C# samples and tree
	parsing	need
In-Reply-To: <1358287386.20080520160504@mail.ru>
References: <1846305723.20080519000952@mail.ru>
	<1358287386.20080520160504@mail.ru>
Message-ID: <20080520141002.14240@gmx.net>

> Are there more advanced samples for C# target?
> especially creating typed AST, and parse comples tree with generation
> something,
> once default samples produce just flat set of nodes.

Aren't the example grammars in the zip-file not enough?
> 
> especially interesting creation of referenced leafs in AST -
> how to implement variable definition and their use ?
> may be some standard technique is used for this most common case?

That doesn't look like limited to C# target alone. I believe the example grammars cover some of this. But I don't know what you mean with "how to implement variable definition and their use" exactly. Are you after a symbol table?
> 
> Does tree walker sufficient and optimal and for serious language
> code generation from tree ?

That sentence isn't correct English. Do you want to know if you can use a tree walker to generate any kind of output? The answer is yes.

Johannes
> 
> thanks
> 
> I'm glad to join ANTLR society.
> Vladimir Grigoryev

-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

From jielu64 at gmail.com  Tue May 20 08:04:09 2008
From: jielu64 at gmail.com (Jie Lu)
Date: Tue, 20 May 2008 11:04:09 -0400
Subject: [antlr-interest] Simple grammar which hangs the code generator
Message-ID: <4151bfbe0805200804l1bc202dcy2e14f5154a4531f5@mail.gmail.com>

Hi,
I'm extremely new to Antlr (I've only been messing around with it for about
a day), so I generally assume that any problems I get is just a result of my
presence. This problem though, is just a little too wierd to not ask people
about.

While experimenting with various rules, I got to a grammar (shown below)
which seems to hang the code generator. In ANTLRWorks, if I do
Generate->Generate Code, the progress dialog comes up and stays forever. The
problem seems to have started when I added (...)+ around the CHAR_CONTENTS
rule. Does the Antlr code generator normally hang on certain grammars?

Btw, while I'm at it, has anyone encountered the issue of the ANTLRWorks
save dialog box freezing for 20 sec. every time you select a folder?

Thanks for any insights.

grammar JavaLang;

file : charLiteral;

charLiteral : '\'' CHAR_CONTENTS '\'';

stringLiteral :    '"' STRING_CONTENTS? '"';

CHAR_CONTENTS : (~('\''|'\\') | ('\\' .))+;

STRING_CONTENTS : (~('"'|'\\') | ('\\' .))+;

SPACING :    (WS | COMMENT | LINE_COMMENT)+;

WS : ' ' | '\r' | '\t' | '\u000C' | '\n';

COMMENT :   '/*' (options {greedy=false;} : .)* '*/';

LINE_COMMENT : '//' ~('\n'|'\r')*;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080520/0dab0129/attachment.html 

From parrt at cs.usfca.edu  Tue May 20 09:55:49 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 20 May 2008 09:55:49 -0700
Subject: [antlr-interest] giving another talk in Netherlands June 10 @ CWI
Message-ID: <2409FDF3-A49D-4594-9205-8795AADA7467@cs.usfca.edu>

Hi, If anybody wants to attend, I will be giving a preview of my  
keynote speech for ICPC'09 at CWI:

http://www.cwi.nl/

here is the abstract:

http://www.cwi.nl/htbin/sen1/twiki/bin/view/SEN1/PEM

Terence

From parrt at cs.usfca.edu  Tue May 20 09:59:09 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 20 May 2008 09:59:09 -0700
Subject: [antlr-interest] ParseTreeBuilder broken in decisions (with fix)
In-Reply-To: <83593ECD-1BE9-4A1E-ACBF-741681B792DF@martin-probst.com>
References: <83593ECD-1BE9-4A1E-ACBF-741681B792DF@martin-probst.com>
Message-ID: <DDF592CB-3452-403C-A28F-A20080CA7661@cs.usfca.edu>

thanks,Martin, adding bug

http://www.antlr.org:8888/browse/ANTLR-267

Ter
On May 18, 2008, at 12:09 PM, Martin Probst wrote:

> Hi all,
>
> the ParseTreeBuilder included in ANTLR 3 does not respect decision  
> contexts - if the parser enters decision mode during parsing  
> multiple times, this breaks the parse tree construction.
>
> The fix is to keep track of the decision nesting depth (methods from  
> my extension of the base class):
>
>  @Override
>  public void consumeToken(Token token) {
>    if (inDecision == 0) super.consumeToken(token);
>  }
>
>  private int inDecision = 0;
>
>  @Override
>  public void enterDecision(int decisionNumber) {
>    super.enterDecision(decisionNumber);
>    inDecision++;
>  }
>
>  @Override
>  public void exitDecision(int decisionNumber) {
>    super.exitDecision(decisionNumber);
>    inDecision--;
>  }
>
> Best regards,
> Martin


From parrt at cs.usfca.edu  Tue May 20 10:11:35 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 20 May 2008 10:11:35 -0700
Subject: [antlr-interest] Generated lexer is affected by parser rules?!
	A bug?
In-Reply-To: <aa71f710805170435k5e06f9b6p8edf0e04299b6313@mail.gmail.com>
References: <aa71f710805170144q2d3bec5aq5ee221e42b35a06f@mail.gmail.com>
	<aa71f710805170435k5e06f9b6p8edf0e04299b6313@mail.gmail.com>
Message-ID: <E34048BB-F426-4428-A007-11FB6346E5B6@cs.usfca.edu>

These Both worked perfectly with 3.1b1.  in one you are calling a  
rule, which is the only difference I see.
Ter
On May 17, 2008, at 4:35 AM, Haralambi Haralambiev wrote:

> Just revised the very simple grammar.
>
> Could someone point out what is the difference between the following  
> two grammars:
> -----------
> lexer grammar testStringLiteral1;
>
> StringLiteral : Apos ~Apos* Apos;
>
> fragment
> Apos : '\'';
> -----------
>
> and
>
> -----------
> lexer grammar testStringLiteral2;
>
> StringLiteral : '\'' ~'\''* '\'';
> -----------
>
> When generated to Java file - they differ, while I expected not to!
>
> -Hari
>
> On 5/17/08, Haralambi Haralambiev <hharalambiev at gmail.com> wrote:  
> Hello,
>
> A colleague of mine is working on some grammar and I was bemused  
> when she told me that a string literal '50' was throwing an error,  
> while the '00' was not throwing.
>
> The exception said "mismatched character '5' expecting set null".
>
> So, I started investigating... the lexer rule for string literal is  
> the following:
> -----------
> fragment
> Apos	:	'\'';
>
> StringLiteral:	Apos ~Apos* Apos
> -----------
>
> Everything seemed fine, except that in the generated java code, the  
> mStringLiteral method had the following line:
>
> -----------
> mApos();
> // ...NewTest.g:84:9: (~ Apos )*
> loop2:
> do {
> int alt2=2;
> int LA2_0 = input.LA(1);
>
> if ( ((LA2_0>='\u0000' && LA2_0<='&')||(LA2_0>='(' &&  
> LA2_0<='\uFFFE')) ) {
> alt2=1;
> }
>
> switch (alt2) {
> case 1 :
> // ...NewTest.g:197:9: ~ Apos
> {
> if ( (input.LA(1)>='\u0000' && input.LA(1)<='4')||(input.LA(1)>='6'  
> && input.LA(1)<='\uFFFE') ) {
> input.consume();
>
> }
> -----------
>
> This was totally unexpected (checking if the character is different  
> than '5'), so I did the following experiment:
> 	? I removed all the parser rules.
> 	? I changed the grammar to a lexer grammar.
> When I generated the lexer, the corrupt if statement mentioned above  
> was changed to the following:
>
> -----------
> switch (alt2) {
> case 1 :
> // ...NewTest.g:84:9: ~ Apos
> {
> if ( (input.LA(1)>='\u0000' && input.LA(1)<='\u0014')|| 
> (input.LA(1)>='\u0016' && input.LA(1)<='\uFFFE') ) {
> input.consume();
>
> }
> -----------
>
> So, now the situation changed and the mentioned string '50' is OK,  
> but it is obvious that the check is wrong.
>
> I tested a simple grammar with the Apos and StringLiteral lexer  
> rules only:
> -----------
> lexer grammar testStringLiteral;
>
> StringLiteral	:	Apos ~Apos* Apos;	
> Apos	 :	'\'';
> -----------
>
> it generates the following if, which I consider again wrong:
> -----------
> if ( (input.LA(1)>='\u0000' && input.LA(1)<='\u0003')|| 
> (input.LA(1)>='\u0005' && input.LA(1)<='\uFFFE') ) {
> input.consume();
>
> }
> -----------
>
> Taking into account the things said above,
> I have two question:
> 	? Why the parser rules affect the lexer class?
> 	? Why is this if clause before the consume() method different than  
> the if clause that is deciding the alternative?
> Of course, I assume that I could have made some stupid mistake, so  
> please excuse me if I have done so.
>
> Best regards,
> Hari
>


From parrt at cs.usfca.edu  Tue May 20 10:16:40 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 20 May 2008 10:16:40 -0700
Subject: [antlr-interest] Generated lexer is affected by parser rules?!
	A bug?
In-Reply-To: <E34048BB-F426-4428-A007-11FB6346E5B6@cs.usfca.edu>
References: <aa71f710805170144q2d3bec5aq5ee221e42b35a06f@mail.gmail.com>
	<aa71f710805170435k5e06f9b6p8edf0e04299b6313@mail.gmail.com>
	<E34048BB-F426-4428-A007-11FB6346E5B6@cs.usfca.edu>
Message-ID: <A5EA7797-3A6B-4CDA-9DC3-AC5792C430B4@cs.usfca.edu>

uh wait. sorry.The generated code as a bug as you say; I was looking  
at the NFA and DFA representations. Adding a bug.

http://www.antlr.org:8888/browse/ANTLR-268

Ter
On May 20, 2008, at 10:11 AM, Terence Parr wrote:

> These Both worked perfectly with 3.1b1.  in one you are calling a  
> rule, which is the only difference I see.
> Ter
> On May 17, 2008, at 4:35 AM, Haralambi Haralambiev wrote:
>
>> Just revised the very simple grammar.
>>
>> Could someone point out what is the difference between the  
>> following two grammars:
>> -----------
>> lexer grammar testStringLiteral1;
>>
>> StringLiteral : Apos ~Apos* Apos;
>>
>> fragment
>> Apos : '\'';
>> -----------
>>
>> and
>>
>> -----------
>> lexer grammar testStringLiteral2;
>>
>> StringLiteral : '\'' ~'\''* '\'';
>> -----------
>>
>> When generated to Java file - they differ, while I expected not to!
>>
>> -Hari
>>
>> On 5/17/08, Haralambi Haralambiev <hharalambiev at gmail.com> wrote:  
>> Hello,
>>
>> A colleague of mine is working on some grammar and I was bemused  
>> when she told me that a string literal '50' was throwing an error,  
>> while the '00' was not throwing.
>>
>> The exception said "mismatched character '5' expecting set null".
>>
>> So, I started investigating... the lexer rule for string literal is  
>> the following:
>> -----------
>> fragment
>> Apos	:	'\'';
>>
>> StringLiteral:	Apos ~Apos* Apos
>> -----------
>>
>> Everything seemed fine, except that in the generated java code, the  
>> mStringLiteral method had the following line:
>>
>> -----------
>> mApos();
>> // ...NewTest.g:84:9: (~ Apos )*
>> loop2:
>> do {
>> int alt2=2;
>> int LA2_0 = input.LA(1);
>>
>> if ( ((LA2_0>='\u0000' && LA2_0<='&')||(LA2_0>='(' &&  
>> LA2_0<='\uFFFE')) ) {
>> alt2=1;
>> }
>>
>> switch (alt2) {
>> case 1 :
>> // ...NewTest.g:197:9: ~ Apos
>> {
>> if ( (input.LA(1)>='\u0000' && input.LA(1)<='4')||(input.LA(1)>='6'  
>> && input.LA(1)<='\uFFFE') ) {
>> input.consume();
>>
>> }
>> -----------
>>
>> This was totally unexpected (checking if the character is different  
>> than '5'), so I did the following experiment:
>> 	? I removed all the parser rules.
>> 	? I changed the grammar to a lexer grammar.
>> When I generated the lexer, the corrupt if statement mentioned  
>> above was changed to the following:
>>
>> -----------
>> switch (alt2) {
>> case 1 :
>> // ...NewTest.g:84:9: ~ Apos
>> {
>> if ( (input.LA(1)>='\u0000' && input.LA(1)<='\u0014')|| 
>> (input.LA(1)>='\u0016' && input.LA(1)<='\uFFFE') ) {
>> input.consume();
>>
>> }
>> -----------
>>
>> So, now the situation changed and the mentioned string '50' is OK,  
>> but it is obvious that the check is wrong.
>>
>> I tested a simple grammar with the Apos and StringLiteral lexer  
>> rules only:
>> -----------
>> lexer grammar testStringLiteral;
>>
>> StringLiteral	:	Apos ~Apos* Apos;	
>> Apos	 :	'\'';
>> -----------
>>
>> it generates the following if, which I consider again wrong:
>> -----------
>> if ( (input.LA(1)>='\u0000' && input.LA(1)<='\u0003')|| 
>> (input.LA(1)>='\u0005' && input.LA(1)<='\uFFFE') ) {
>> input.consume();
>>
>> }
>> -----------
>>
>> Taking into account the things said above,
>> I have two question:
>> 	? Why the parser rules affect the lexer class?
>> 	? Why is this if clause before the consume() method different than  
>> the if clause that is deciding the alternative?
>> Of course, I assume that I could have made some stupid mistake, so  
>> please excuse me if I have done so.
>>
>> Best regards,
>> Hari
>>
>


From parrt at cs.usfca.edu  Tue May 20 10:26:46 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 20 May 2008 10:26:46 -0700
Subject: [antlr-interest] Basic predicate question
In-Reply-To: <aa71f710805190551p36394bb2xe82c450d7c726d3d@mail.gmail.com>
References: <aa71f710805160741m46a60032q31b1b48e7e064c35@mail.gmail.com>
	<aa71f710805190551p36394bb2xe82c450d7c726d3d@mail.gmail.com>
Message-ID: <DCD7BCB1-BDA8-4C8A-B6DB-2F1AA1A89BDE@cs.usfca.edu>


On May 19, 2008, at 5:51 AM, Haralambi Haralambiev wrote:

> I checked the grammar above with the latest antlrworks and it says  
> that the NOT token is not reachable. So, at least now it gives you a  
> warning, but I still think that this is a bug and that the  
> predicates should be taken into account!

The issue with this grammar is that NOT is not protected by a gated  
predicate. Try:

NOT      :      {getCharPositionInLine()>0}?' => NOT';

>
Ter
>
> Hari
>
> On 5/16/08, Haralambi Haralambiev <hharalambiev at gmail.com> wrote:  
> Hello,
>
> I have stumbled upon on a problem where the DFA's prediction is  
> incorrect, as it does not take into account the predicate for a rule.
>
> Consider the following grammar:
> -----------------------------------------------------
> lexer grammar test;
>
> IF	 :	{getCharPositionInLine()==0}? => 'IF';	
> UNKNOWN_CMD	:	{getCharPositionInLine()==0}? => Identifier;
>
> NOT	 :	'NOT';	
>
> Identifier	:	('A'..'Z'|'a'..'z')+;
> WS	:	('\t'|' ')+;
> -----------------------------------------------------
>
> In the language I am working on, the first word is always some  
> command. As I am not interested in all the commands, I decided to  
> define an UNKNOWN_CMD.
>
> I also have some other keywords that are not commands, thus not in  
> the beginning of the line, e.g. the described above NOT.
>
> With the grammar above and the input "IF NOT SOMETHING", the lexer  
> fails, as the DFA has predicted that the "NOT" part of the stream  
> should be an UNKNOWN_COMMAND.
> My understanding was that predicates are somehow included when  
> predicting the next token and thus I am confused why the lexer will  
> attempt to match the "NOT" to this lexer rule?
>
> If we put the NOT rule above the unknown rule, everything will work  
> properly, but this is a work around and I would like to understand  
> the cause of the issue.
>
> Could someone point the reason of such a behaviour?
>
> Thanks,
> Hari
>


From aditsu at yahoo.com  Tue May 20 11:14:53 2008
From: aditsu at yahoo.com (Adrian Sandor)
Date: Tue, 20 May 2008 18:14:53 +0000 (UTC)
Subject: [antlr-interest] ParseTreeBuilder broken in decisions (with fix)
References: <83593ECD-1BE9-4A1E-ACBF-741681B792DF@martin-probst.com>
	<DDF592CB-3452-403C-A28F-A20080CA7661@cs.usfca.edu>
Message-ID: <loom.20080520T181152-628@post.gmane.org>

Terence Parr writes:

> thanks,Martin, adding bug
> 
> http://www.antlr.org:8888/browse/ANTLR-267

Hi Terence,

What about the first question in my original message?
Specifically, why does the grammar at
http://www.antlr.org/wiki/pages/viewpage.action?pageId=1760 accept a statement
ending in a semicolon? ("i=4;")

Thanks
Adrian


From csanders at hoovers.com  Tue May 20 11:28:03 2008
From: csanders at hoovers.com (csanders)
Date: Tue, 20 May 2008 13:28:03 -0500
Subject: [antlr-interest] How to silence 'using multiple alternatives: 1,
	2' warning.
In-Reply-To: <loom.20080520T181152-628@post.gmane.org>
References: <83593ECD-1BE9-4A1E-ACBF-741681B792DF@martin-probst.com>	<DDF592CB-3452-403C-A28F-A20080CA7661@cs.usfca.edu>
	<loom.20080520T181152-628@post.gmane.org>
Message-ID: <48331833.7030807@hoovers.com>

For instance:

Decision can match input such as "'else'" using multiple alternatives: 1, 2

In every case it does the right thing, but I'd like to get rid of these 
errors.

I'm new to Antlr.

Thanks!
Charlie

From parrt at cs.usfca.edu  Tue May 20 11:44:16 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 20 May 2008 11:44:16 -0700
Subject: [antlr-interest] ParseTreeBuilder broken in decisions (with fix)
In-Reply-To: <loom.20080520T181152-628@post.gmane.org>
References: <83593ECD-1BE9-4A1E-ACBF-741681B792DF@martin-probst.com>
	<DDF592CB-3452-403C-A28F-A20080CA7661@cs.usfca.edu>
	<loom.20080520T181152-628@post.gmane.org>
Message-ID: <43EF39EE-C234-4DD7-A3B1-3D59462B9CA8@cs.usfca.edu>

hi. damn good question.  I think because the parse tree builder  
ignores errors ;) and recovers.
Ter
On May 20, 2008, at 11:14 AM, Adrian Sandor wrote:

> Terence Parr writes:
>
>> thanks,Martin, adding bug
>>
>> http://www.antlr.org:8888/browse/ANTLR-267
>
> Hi Terence,
>
> What about the first question in my original message?
> Specifically, why does the grammar at
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=1760 accept a  
> statement
> ending in a semicolon? ("i=4;")
>
> Thanks
> Adrian
>


From antlr at mirality.co.nz  Tue May 20 12:48:23 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 21 May 2008 07:48:23 +1200
Subject: [antlr-interest] Simple grammar which hangs the code generator
In-Reply-To: <4151bfbe0805200804l1bc202dcy2e14f5154a4531f5@mail.gmail.co
 m>
References: <4151bfbe0805200804l1bc202dcy2e14f5154a4531f5@mail.gmail.com>
Message-ID: <20080520194836.AFEFA11ED9B@www.antlr.org>

At 03:04 21/05/2008, Jie Lu wrote:
>While experimenting with various rules, I got to a grammar (shown 
>below) which seems to hang the code generator. In ANTLRWorks, if 
>I do Generate->Generate Code, the progress dialog comes up and 
>stays forever. The problem seems to have started when I added 
>(...)+ around the CHAR_CONTENTS rule. Does the Antlr code 
>generator normally hang on certain grammars?

Well, I'm not sure why it's freezing on you (except maybe the DFA 
combination explosion is killing it), but I can tell you that your 
grammar can't possibly work.

>charLiteral : '\'' CHAR_CONTENTS '\'';
>
>stringLiteral :    '"' STRING_CONTENTS? '"';
>
>CHAR_CONTENTS : (~('\''|'\\') | ('\\' .))+;
>
>STRING_CONTENTS : (~('"'|'\\') | ('\\' .))+;

There is no useful distinction betweeen the CHAR_CONTENTS and 
STRING_CONTENTS rules; and since they are non-fragment lexer rules 
they are both viable targets.  This will typically result in 
STRING_CONTENTS never being generated and CHAR_CONTENTS being 
generated in places you weren't expecting it to.

You should change CHAR_CONTENTS and STRING_CONTENTS into fragment 
rules and then change charLiteral and stringLiteral into lexer 
rules, not parser rules.

Perhaps you haven't realised that the lexing phase is entirely 
separate from the parser?  Lexer rules are run and generate tokens 
completely independently of how they're used in parser rules.


From JALuber at gmx.de  Tue May 20 13:26:42 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Tue, 20 May 2008 22:26:42 +0200
Subject: [antlr-interest] How to silence 'using multiple alternatives: 1,
	2' warning.
In-Reply-To: <48331833.7030807@hoovers.com>
References: <83593ECD-1BE9-4A1E-ACBF-741681B792DF@martin-probst.com>
	<DDF592CB-3452-403C-A28F-A20080CA7661@cs.usfca.edu>
	<loom.20080520T181152-628@post.gmane.org>
	<48331833.7030807@hoovers.com>
Message-ID: <20080520202642.14260@gmx.net>

> For instance:
> 
> Decision can match input such as "'else'" using multiple alternatives: 1,
> 2
> 
> In every case it does the right thing, but I'd like to get rid of these 
> errors.
> 
> I'm new to Antlr.
> 
> Thanks!
> Charlie

For now there is no way to do say except using ('else')=> 'else', which isn't optimal.

Johannes
-- 
249 Spiele f?r nur 1 Preis. Die GMX Spieleflatrate schon ab 9,90 Euro.
Neu: Asterix bei den Olympischen Spielen: http://flat.games.gmx.de

From csanders at hoovers.com  Tue May 20 13:31:56 2008
From: csanders at hoovers.com (csanders)
Date: Tue, 20 May 2008 15:31:56 -0500
Subject: [antlr-interest] How to silence 'using multiple alternatives: 1,
 2' warning.
In-Reply-To: <20080520202642.14260@gmx.net>
References: <83593ECD-1BE9-4A1E-ACBF-741681B792DF@martin-probst.com>	<DDF592CB-3452-403C-A28F-A20080CA7661@cs.usfca.edu>	<loom.20080520T181152-628@post.gmane.org>
	<48331833.7030807@hoovers.com> <20080520202642.14260@gmx.net>
Message-ID: <4833353C.10300@hoovers.com>

Ahh thanks.

Where can I find more information on this operator '=>' ?  I'm super 
appreciative of ANTLR and its contributions but the websites layout 
makes it hard to find anything other than snippets.

Thanks,
Charlie

Johannes Luber wrote:
>> For instance:
>>
>> Decision can match input such as "'else'" using multiple alternatives: 1,
>> 2
>>
>> In every case it does the right thing, but I'd like to get rid of these 
>> errors.
>>
>> I'm new to Antlr.
>>
>> Thanks!
>> Charlie
>>     
>
> For now there is no way to do say except using ('else')=> 'else', which isn't optimal.
>
> Johannes
>   


From csanders at hoovers.com  Tue May 20 13:38:17 2008
From: csanders at hoovers.com (csanders)
Date: Tue, 20 May 2008 15:38:17 -0500
Subject: [antlr-interest] How to silence 'using multiple alternatives: 1,
 2' warning.
In-Reply-To: <4833353C.10300@hoovers.com>
References: <83593ECD-1BE9-4A1E-ACBF-741681B792DF@martin-probst.com>	<DDF592CB-3452-403C-A28F-A20080CA7661@cs.usfca.edu>	<loom.20080520T181152-628@post.gmane.org>	<48331833.7030807@hoovers.com>
	<20080520202642.14260@gmx.net> <4833353C.10300@hoovers.com>
Message-ID: <483336B9.2020308@hoovers.com>

Ahh found it, nevermind.  Thanks!

csanders wrote:
> Ahh thanks.
>
> Where can I find more information on this operator '=>' ?  I'm super 
> appreciative of ANTLR and its contributions but the websites layout 
> makes it hard to find anything other than snippets.
>
> Thanks,
> Charlie
>
> Johannes Luber wrote:
>>> For instance:
>>>
>>> Decision can match input such as "'else'" using multiple 
>>> alternatives: 1,
>>> 2
>>>
>>> In every case it does the right thing, but I'd like to get rid of 
>>> these errors.
>>>
>>> I'm new to Antlr.
>>>
>>> Thanks!
>>> Charlie
>>>     
>>
>> For now there is no way to do say except using ('else')=> 'else', 
>> which isn't optimal.
>>
>> Johannes
>>   
>


From dave at badgers-in-foil.co.uk  Tue May 20 14:24:17 2008
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Tue, 20 May 2008 22:24:17 +0100
Subject: [antlr-interest] [ANNOUNCE] Maven 2 Antlr3 Plugin 1.0 released
Message-ID: <20080520212417.GB9485@badgers-in-foil.co.uk>

I'm pleased to announce that the Maven 2 Antlr3 Plugin 1.0 has
been released.

  http://mojo.codehaus.org/antlr3-maven-plugin/

The significant change in this release is the automatic ordering of the
build for multiple interdependent grammars within a Maven project so 
that the 'depended-on' grammars are built before the 'dependant'
grammars, meaning that generated files should be available when needed.



Full changelog:

Bug
    * [MANTLRTHREE-2] / [MANTLRTHREE-4] - Unable to force the processing
      sequence of several interdependent grammar files

Improvement
    * [MANTLRTHREE-3] - Usage page shows the incorrect groupId for the
    * plugin.
    * [MANTLRTHREE-5] - Switch to mojo-parent POM version 17
    * [MANTLRTHREE-6] - Put <version> elements into example POM snippets
    * [MANTLRTHREE-7] - Update plugin site descriptor to conform to
    * latest
      standards
    * [MANTLRTHREE-8] - Use 'default-value', rather than 'expression' in
      @parameter annotations for stuff that might go in a POM

For more information, see,
http://jira.codehaus.org/secure/IssueNavigator.jspa?reset=true&fixfor=14107&pid=11713


ta,
dave

-- 
http://david.holroyd.me.uk/

From ymo.mail at gmail.com  Tue May 20 17:26:28 2008
From: ymo.mail at gmail.com (Ymo)
Date: Tue, 20 May 2008 20:26:28 -0400
Subject: [antlr-interest] predicates and backtracking
Message-ID: <7196ed5b0805201726t3c765a8fwf9ac2d94e7520448@mail.gmail.com>

Hi folks.

I am trying to follow
http://www.antlr.org/wiki/display/ANTLR3/6.+Advanced+processing

However my predicate is getting hit *before* the below code in the statrtTag
gets executed:

 {$ElementScope::currentElementName = $GENERIC_ID.text; }

So my code ends up throwing NPE since currentElementName never gets
initialized.

I debuged the parser code and

 Here is what i have in my grammar :
 options {
   k=3;
   memoize=true;
   backtrack=true;
}

<snip>

nodeElement
scope ElementScope;
   : nodeElementStart (nodeBlock)* nodeElementEnd
   ;

nodeElementStart
   : TOK_ELEMENT
      attrBlock* TOK_RG {
      $ElementScope::currentElementName = $TOK_ELEMENT.text;
      //$ElementScope::currentElementName = tokElement.getText();
   };

nodeElementEnd
   :  { $ElementScope::currentElementName.equals(input.LT(1).getText()) }?
      TOK_ELEMENT_CLOSE TOK_RG {
   };
   catch [FailedPredicateException fpe] {
      String hdr = getErrorHeader(fpe);
      String msg = "end tag (" + input.LT(2).getText() +
                    ") does not match start tag (" +
                    $ElementScope::currentElementName +
                    ") currently open, closing it anyway";
      emitErrorMessage(hdr+" "+msg);
      consumeUntil(input, TOK_RG);
      input.consume();
   }

The predicate always seems to get executed before  the currentElementName is
initialized by the nodeElementStart.

The generated parser is :

            match(input,TOK_RG,FOLLOW_TOK_RG_in_nodeElementStart289); if
(failed) return ;
            if ( backtracking==0 ) {


((ElementScope_scope)ElementScope_stack.peek()).currentElementName =
TOK_ELEMENT1.getText();

//((ElementScope_scope)ElementScope_stack.peek()).currentElementName =
tokElement.getText();

            }


When debugging the if ( backtracking==0 ) resolves to false so effectively
currentElementName is not initialized !

Is there anything else i need to do in my grammar to make sure the predicate
gets executed after the currentElementName is initialized ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080520/487b3802/attachment.html 

From parrt at cs.usfca.edu  Tue May 20 17:31:11 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 20 May 2008 17:31:11 -0700
Subject: [antlr-interest] predicates and backtracking
In-Reply-To: <7196ed5b0805201726t3c765a8fwf9ac2d94e7520448@mail.gmail.com>
References: <7196ed5b0805201726t3c765a8fwf9ac2d94e7520448@mail.gmail.com>
Message-ID: <4C241114-9861-4A22-A05F-A8B2C65603A0@cs.usfca.edu>

3.1Should fix this; it was not stopping at actions when looking for  
predicates. Try the latest builds.
Ter
On May 20, 2008, at 5:26 PM, Ymo wrote:

> Hi folks.
>
> I am trying to follow http://www.antlr.org/wiki/display/ANTLR3/6.+Advanced+processing
>
> However my predicate is getting hit *before* the below code in the  
> statrtTag gets executed:
>
>  {$ElementScope::currentElementName = $GENERIC_ID.text; }
>
> So my code ends up throwing NPE since currentElementName never gets  
> initialized.
>
> I debuged the parser code and
>
>  Here is what i have in my grammar :
>  options {
>    k=3;
>    memoize=true;
>    backtrack=true;
> }
>
> <snip>
>
> nodeElement
> scope ElementScope;
>    : nodeElementStart (nodeBlock)* nodeElementEnd
>    ;
>
> nodeElementStart
>    : TOK_ELEMENT
>       attrBlock* TOK_RG {
>       $ElementScope::currentElementName = $TOK_ELEMENT.text;
>       //$ElementScope::currentElementName = tokElement.getText();
>    };
>
> nodeElementEnd
>    :   
> { $ElementScope::currentElementName.equals(input.LT(1).getText()) }?
>       TOK_ELEMENT_CLOSE TOK_RG {
>    };
>    catch [FailedPredicateException fpe] {
>       String hdr = getErrorHeader(fpe);
>       String msg = "end tag (" + input.LT(2).getText() +
>                     ") does not match start tag (" +
>                     $ElementScope::currentElementName +
>                     ") currently open, closing it anyway";
>       emitErrorMessage(hdr+" "+msg);
>       consumeUntil(input, TOK_RG);
>       input.consume();
>    }
>
> The predicate always seems to get executed before  the  
> currentElementName is initialized by the nodeElementStart.
>
> The generated parser is :
>
>              
> match(input,TOK_RG,FOLLOW_TOK_RG_in_nodeElementStart289); if  
> (failed) return ;
>             if ( backtracking==0 ) {
>
>                      
> ((ElementScope_scope)ElementScope_stack.peek()).currentElementName =  
> TOK_ELEMENT1.getText();
>                     // 
> ((ElementScope_scope)ElementScope_stack.peek()).currentElementName =  
> tokElement.getText();
>
>             }
>
>
> When debugging the if ( backtracking==0 ) resolves to false so  
> effectively currentElementName is not initialized !
>
> Is there anything else i need to do in my grammar to make sure the  
> predicate gets executed after the currentElementName is initialized ?
>


From parrt at cs.usfca.edu  Tue May 20 19:25:57 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 20 May 2008 19:25:57 -0700
Subject: [antlr-interest] ANTLR 3.1b1 released!
Message-ID: <62F7B8D6-C3D0-4A7A-B1C1-E8BD44405B89@cs.usfca.edu>

Get it while it's hot:

http://www.antlr.org/download/antlr-3.1b1.tar.gz

You'll have to regenerate your recognizers from your grammars, but,  
for the most part, 3.1 should be a drop in replacement for 3.0.1. :)

Documentation has been updated on the wiki. Here or the release notes:

http://www.antlr.org/wiki/display/ANTLR3/ANTLR+3.1+Release+Notes

3.1 final release should happen in the next week or two.

ANTLRWorks will happen fairly soon also.

Ter


From kevina.choolhun at gmail.com  Wed May 21 01:24:43 2008
From: kevina.choolhun at gmail.com (Kevina Choolhun)
Date: Wed, 21 May 2008 12:24:43 +0400
Subject: [antlr-interest] Newbie Needs help...
Message-ID: <2373b1b90805210124r67d124cmc9879b64ec7e00b7@mail.gmail.com>

Hello,

I am new at ANTLR but with the help of The Definitive ANTLR Reference have
managed to set up a parser and a parser walker..

Now for the next stage, I have tried my hand at embedding actions.. but
Stringtemplate I hear is a much better solution.

I am currently reading through stringtemplate.org. I wanted to know if there
are any nice tutorials about it which could help me.. enhance my parser n
lexer with StringTemplate

Thank you for your help.

-- 
Kev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080521/a84d5635/attachment-0001.html 

From fridi70 at gmx.de  Wed May 21 02:51:09 2008
From: fridi70 at gmx.de (Fridi)
Date: Wed, 21 May 2008 11:51:09 +0200
Subject: [antlr-interest] ASTFrame for ANTLR3 / C#
Message-ID: <4833F08D.5040609@gmx.de>

Is there anything comparable to ASTFrame in ANTLR3 for C#?

thank in advance for any advise,
  fridi

From wenliangcai at yahoo.ca  Wed May 21 03:11:11 2008
From: wenliangcai at yahoo.ca (Wenliang Cai)
Date: Wed, 21 May 2008 18:11:11 +0800
Subject: [antlr-interest] Newbie question to lookahead function
Message-ID: <633120D935F94C96A115107F3CA64A54@apac.bea.com>

Hi list,

 

I get a problem when having Antlr 2.7.2 parsing a normal operation
expression. The scenario is like below -

 

Grammar for identifier

IDENT

options {testLiterals=true;}

    : (IDENTATOM "!=") => IDENTATOM

    | IDENTATOM ('!' IDENTATOM)*

    ;

    

IDENTATOM

options {testLiterals=true;}

    : ('_'|'a'..'z')('#'|'_'|'a'..'z'|'0'..'9')*

    ;

In this case, we can get below result:

a. Input string: "MyIdent!=0", result: parser code can parse the string
correctly.

b. Input string: "MyIdent != 0", result: parser code can parse the string
correctly

c. Input string "MyIdent!SubIdent != 0", result: parser code can parse the
string correctly

d. Input string "MyIdent!SubIdent!= 0", result: parser code throws out an
exception, and complains the equal sign is unacceptable. 

 

Then I tried to wrap IDENT in the similar way (see below),
"MyIdent!SubIdent!= 0" but still can not get parsed properly. If possible,
could anyone show me the correct grammar with the logic - "if the
exclamation sign ('!') followed by equal sign, the '!' sign is not a part of
the identifier."? Your help is greatly appreciated!

 

 

IDENT

options {testLiterals=true;}

    : (IDENT2 "!=") => IDENT2

    | IDENT2

    ;

 

IDENT2

options {testLiterals=true;}

    : (IDENTATOM "!=") => IDENTATOM

    | IDENTATOM ('!' IDENTATOM)*

    ;

    

IDENTATOM

options {testLiterals=true;}

    : ('_'|'a'..'z')('#'|'_'|'a'..'z'|'0'..'9')*

    ;

 

 

Thanks,

William

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080521/3525b653/attachment.html 

From open.zone at virgin.net  Wed May 21 03:52:08 2008
From: open.zone at virgin.net (Micheal J)
Date: Wed, 21 May 2008 11:52:08 +0100
Subject: [antlr-interest] ASTFrame for ANTLR3 / C#
In-Reply-To: <4833F08D.5040609@gmx.de>
References: <4833F08D.5040609@gmx.de>
Message-ID: <000601c8bb30$bc15d1b0$c404a8c0@marion>

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org 
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Fridi
> Sent: 21 May 2008 10:51
> To: antlr
> Subject: [antlr-interest] ASTFrame for ANTLR3 / C#
> 
> Is there anything comparable to ASTFrame in ANTLR3 for C#?
> 
> thank in advance for any advise,
>   fridi

None included up to latest beta. This article is a good starting point for
someone wishing to develop one for C# (it's for a Java equivalent):

http://www.antlr.org/wiki/display/ANTLR3/How+do+I+display+ASTs+graphically


Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 


From antlr at mirality.co.nz  Wed May 21 06:07:17 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 22 May 2008 01:07:17 +1200
Subject: [antlr-interest] Newbie question to lookahead function
In-Reply-To: <633120D935F94C96A115107F3CA64A54@apac.bea.com>
References: <633120D935F94C96A115107F3CA64A54@apac.bea.com>
Message-ID: <20080521130733.0153B11ED61@www.antlr.org>

At 22:11 21/05/2008, Wenliang Cai wrote:
>I get a problem when having Antlr 2.7.2 parsing 
>a normal operation expression. The scenario is like below ?
>
>Grammar for identifier
>IDENT
>options {testLiterals=true;}
>     : (IDENTATOM "!=") => IDENTATOM
>     | IDENTATOM ('!' IDENTATOM)*
>     ;
>
>IDENTATOM
>options {testLiterals=true;}
>     : ('_'|'a'..'z')('#'|'_'|'a'..'z'|'0'..'9')*
>     ;
>In this case, we can get below result:
>a. Input string: ?MyIdent!=0?, result: parser 
>code can parse the string correctly.
>b. Input string: ?MyIdent != 0?, result: parser 
>code can parse the string correctly
>c. Input string ?MyIdent!SubIdent != 0?, result: 
>parser code can parse the string correctly
>d. Input string ?MyIdent!SubIdent!= 0?, result: 
>parser code throws out an exception, and 
>complains the equal sign is unacceptable.

I think this should work:

IDENT
options {testLiterals=true;}
     : IDENTATOM (('!' ~'=') => '!' IDENTATOM)*
     ;

You *might* need an extra set of parentheses (ie. 
"~('=')"); I think I remember reading that ANTLR 
v2 was a bit more strict about this than v3 is.


From wenliangcai at yahoo.ca  Wed May 21 06:21:30 2008
From: wenliangcai at yahoo.ca (William Cai)
Date: Wed, 21 May 2008 06:21:30 -0700 (PDT)
Subject: [antlr-interest] Newbie question to lookahead function
Message-ID: <901097.77503.qm@web46202.mail.sp1.yahoo.com>

Yes, it works. Thank you so much! 


----- Original Message ----
From: Gavin Lambert <antlr at mirality.co.nz>
To: Wenliang Cai <wenliangcai at yahoo.ca>; antlr-interest at antlr.org
Sent: Wednesday, May 21, 2008 9:07:17 PM
Subject: Re: [antlr-interest] Newbie question to lookahead function

At 22:11 21/05/2008, Wenliang Cai wrote:
>I get a problem when having Antlr 2.7.2 parsing 
>a normal operation expression. The scenario is like below ?
>
>Grammar for identifier
>IDENT
>options {testLiterals=true;}
>? ? : (IDENTATOM "!=") => IDENTATOM
>? ? | IDENTATOM ('!' IDENTATOM)*
>? ? ;
>
>IDENTATOM
>options {testLiterals=true;}
>? ? : ('_'|'a'..'z')('#'|'_'|'a'..'z'|'0'..'9')*
>? ? ;
>In this case, we can get below result:
>a. Input string: ?MyIdent!=0?, result: parser 
>code can parse the string correctly.
>b. Input string: ?MyIdent != 0?, result: parser 
>code can parse the string correctly
>c. Input string ?MyIdent!SubIdent != 0?, result: 
>parser code can parse the string correctly
>d. Input string ?MyIdent!SubIdent!= 0?, result: 
>parser code throws out an exception, and 
>complains the equal sign is unacceptable.

I think this should work:

IDENT
options {testLiterals=true;}
? ? : IDENTATOM (('!' ~'=') => '!' IDENTATOM)*
? ? ;

You *might* need an extra set of parentheses (ie. 
"~('=')"); I think I remember reading that ANTLR 
v2 was a bit more strict about this than v3 is.


      __________________________________________________________________
Get a sneak peak at messages with a handy reading pane with All new Yahoo! Mail: http://ca.promos.yahoo.com/newmail/overview2/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080521/d5973992/attachment-0001.html 

From csanders at hoovers.com  Wed May 21 06:45:46 2008
From: csanders at hoovers.com (csanders)
Date: Wed, 21 May 2008 08:45:46 -0500
Subject: [antlr-interest] Newbie Needs help...
In-Reply-To: <2373b1b90805210124r67d124cmc9879b64ec7e00b7@mail.gmail.com>
References: <2373b1b90805210124r67d124cmc9879b64ec7e00b7@mail.gmail.com>
Message-ID: <4834278A.1030204@hoovers.com>

I'm also new to ANTLR and would like to know how StringTemplate is a 
better solution, is there somewhere we can read about this ?

Thanks,
Charlie

Kevina Choolhun wrote:
> Hello,
>
> I am new at ANTLR but with the help of The Definitive ANTLR Reference 
> have managed to set up a parser and a parser walker..
>
> Now for the next stage, I have tried my hand at embedding actions.. 
> but Stringtemplate I hear is a much better solution.
>
> I am currently reading through stringtemplate.org 
> <http://stringtemplate.org>. I wanted to know if there are any nice 
> tutorials about it which could help me.. enhance my parser n lexer 
> with StringTemplate
>
> Thank you for your help.
>
> -- 
> Kev 


From nik9000 at gmail.com  Wed May 21 06:59:11 2008
From: nik9000 at gmail.com (Nikolas Everett)
Date: Wed, 21 May 2008 09:59:11 -0400
Subject: [antlr-interest] Newbie Needs help...
In-Reply-To: <4834278A.1030204@hoovers.com>
References: <2373b1b90805210124r67d124cmc9879b64ec7e00b7@mail.gmail.com>
	<4834278A.1030204@hoovers.com>
Message-ID: <d4e11e980805210659h28cd8696r12cccf05a9227f0@mail.gmail.com>

I learned a good portion of what I know about antlr and stringtemplate by
going through the source code for the Mantra compiler.  Its all here:
http://www.linguamantra.org/

The long and short of it is that embedding actions is great for checking
things but is more cumbersome when actually generating output.  Tree
grammars that output templates are the way to go there.

I tend to do:
1 grammar to lex and parse into an AST (output=AST)
1 grammar to verify the AST (tree grammar with no output, only embedded
actions calling a callback)
1 grammar to generate output (tree grammar with output=template)

This is wonderfully flexible because the grammars become modules, allowing
you to test them individually and substitute them at will.  This is kind of
a pain because you need to wrote three or more grammars and sync up the
output of the tree constructing grammar to the input of the others.

On Wed, May 21, 2008 at 9:45 AM, csanders <csanders at hoovers.com> wrote:

> I'm also new to ANTLR and would like to know how StringTemplate is a better
> solution, is there somewhere we can read about this ?
>
> Thanks,
> Charlie
>
> Kevina Choolhun wrote:
>
>> Hello,
>>
>> I am new at ANTLR but with the help of The Definitive ANTLR Reference have
>> managed to set up a parser and a parser walker..
>>
>> Now for the next stage, I have tried my hand at embedding actions.. but
>> Stringtemplate I hear is a much better solution.
>>
>> I am currently reading through stringtemplate.org <
>> http://stringtemplate.org>. I wanted to know if there are any nice
>> tutorials about it which could help me.. enhance my parser n lexer with
>> StringTemplate
>>
>> Thank you for your help.
>>
>> --
>> Kev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080521/91141cef/attachment.html 

From kevina.choolhun at gmail.com  Wed May 21 07:13:57 2008
From: kevina.choolhun at gmail.com (Kevina Choolhun)
Date: Wed, 21 May 2008 18:13:57 +0400
Subject: [antlr-interest] Newbie Needs help...
In-Reply-To: <d4e11e980805210659h28cd8696r12cccf05a9227f0@mail.gmail.com>
References: <2373b1b90805210124r67d124cmc9879b64ec7e00b7@mail.gmail.com>
	<4834278A.1030204@hoovers.com>
	<d4e11e980805210659h28cd8696r12cccf05a9227f0@mail.gmail.com>
Message-ID: <2373b1b90805210713q588a3c38t3f51b0f4101dcf43@mail.gmail.com>

Hello,

Thanks! Could you please explain further what you mean by

"1 grammar to verify the AST (tree grammar with no output, only embedded
actions calling a callback)"

Maybe, you mean error messages?

Thank you.

Kevina

On Wed, May 21, 2008 at 5:59 PM, Nikolas Everett <nik9000 at gmail.com> wrote:

> I learned a good portion of what I know about antlr and stringtemplate by
> going through the source code for the Mantra compiler.  Its all here:
> http://www.linguamantra.org/
>
> The long and short of it is that embedding actions is great for checking
> things but is more cumbersome when actually generating output.  Tree
> grammars that output templates are the way to go there.
>
> I tend to do:
> 1 grammar to lex and parse into an AST (output=AST)
> 1 grammar to verify the AST (tree grammar with no output, only embedded
> actions calling a callback)
> 1 grammar to generate output (tree grammar with output=template)
>
> This is wonderfully flexible because the grammars become modules, allowing
> you to test them individually and substitute them at will.  This is kind of
> a pain because you need to wrote three or more grammars and sync up the
> output of the tree constructing grammar to the input of the others.
>
>
> On Wed, May 21, 2008 at 9:45 AM, csanders <csanders at hoovers.com> wrote:
>
>> I'm also new to ANTLR and would like to know how StringTemplate is a
>> better solution, is there somewhere we can read about this ?
>>
>> Thanks,
>> Charlie
>>
>> Kevina Choolhun wrote:
>>
>>> Hello,
>>>
>>> I am new at ANTLR but with the help of The Definitive ANTLR Reference
>>> have managed to set up a parser and a parser walker..
>>>
>>> Now for the next stage, I have tried my hand at embedding actions.. but
>>> Stringtemplate I hear is a much better solution.
>>>
>>> I am currently reading through stringtemplate.org <
>>> http://stringtemplate.org>. I wanted to know if there are any nice
>>> tutorials about it which could help me.. enhance my parser n lexer with
>>> StringTemplate
>>>
>>> Thank you for your help.
>>>
>>> --
>>> Kev
>>>
>>
>>
>


-- 
Kevina
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080521/d6000932/attachment.html 

From nik9000 at gmail.com  Wed May 21 07:33:16 2008
From: nik9000 at gmail.com (Nikolas Everett)
Date: Wed, 21 May 2008 10:33:16 -0400
Subject: [antlr-interest] Newbie Needs help...
In-Reply-To: <2373b1b90805210713q588a3c38t3f51b0f4101dcf43@mail.gmail.com>
References: <2373b1b90805210124r67d124cmc9879b64ec7e00b7@mail.gmail.com>
	<4834278A.1030204@hoovers.com>
	<d4e11e980805210659h28cd8696r12cccf05a9227f0@mail.gmail.com>
	<2373b1b90805210713q588a3c38t3f51b0f4101dcf43@mail.gmail.com>
Message-ID: <d4e11e980805210733s2bd58b5ud6ece481be9fd1e2@mail.gmail.com>

I haven't gotten that deep into this as of yet, but the idea is to have
something like
class VerificationCallback {
 private final List<Error> errors;

 public void import(ASTNode importedPackage) {//Do some checks, and add
errors to the list of errors}
  public void referencedType(ASTNode nodeForType) {//Do some checks, and add
errors to the list of errors}

}

You'd create the grammar with a member for the callback, and then you'd call
it when processing the tree like so:
import:  ^(IMPORT name=packageName) {this.callback.import(name);}

--Nik

On Wed, May 21, 2008 at 10:13 AM, Kevina Choolhun <kevina.choolhun at gmail.com>
wrote:

> Hello,
>
> Thanks! Could you please explain further what you mean by
>
> "1 grammar to verify the AST (tree grammar with no output, only embedded
> actions calling a callback)"
>
> Maybe, you mean error messages?
>
> Thank you.
>
> Kevina
>
>
> On Wed, May 21, 2008 at 5:59 PM, Nikolas Everett <nik9000 at gmail.com>
> wrote:
>
>> I learned a good portion of what I know about antlr and stringtemplate by
>> going through the source code for the Mantra compiler.  Its all here:
>> http://www.linguamantra.org/
>>
>> The long and short of it is that embedding actions is great for checking
>> things but is more cumbersome when actually generating output.  Tree
>> grammars that output templates are the way to go there.
>>
>> I tend to do:
>> 1 grammar to lex and parse into an AST (output=AST)
>> 1 grammar to verify the AST (tree grammar with no output, only embedded
>> actions calling a callback)
>> 1 grammar to generate output (tree grammar with output=template)
>>
>> This is wonderfully flexible because the grammars become modules, allowing
>> you to test them individually and substitute them at will.  This is kind of
>> a pain because you need to wrote three or more grammars and sync up the
>> output of the tree constructing grammar to the input of the others.
>>
>>
>> On Wed, May 21, 2008 at 9:45 AM, csanders <csanders at hoovers.com> wrote:
>>
>>> I'm also new to ANTLR and would like to know how StringTemplate is a
>>> better solution, is there somewhere we can read about this ?
>>>
>>> Thanks,
>>> Charlie
>>>
>>> Kevina Choolhun wrote:
>>>
>>>> Hello,
>>>>
>>>> I am new at ANTLR but with the help of The Definitive ANTLR Reference
>>>> have managed to set up a parser and a parser walker..
>>>>
>>>> Now for the next stage, I have tried my hand at embedding actions.. but
>>>> Stringtemplate I hear is a much better solution.
>>>>
>>>> I am currently reading through stringtemplate.org <
>>>> http://stringtemplate.org>. I wanted to know if there are any nice
>>>> tutorials about it which could help me.. enhance my parser n lexer with
>>>> StringTemplate
>>>>
>>>> Thank you for your help.
>>>>
>>>> --
>>>> Kev
>>>>
>>>
>>>
>>
>
>
> --
> Kevina
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080521/5ac8de95/attachment.html 

From kevina.choolhun at gmail.com  Wed May 21 07:44:40 2008
From: kevina.choolhun at gmail.com (Kevina Choolhun)
Date: Wed, 21 May 2008 18:44:40 +0400
Subject: [antlr-interest] Newbie Needs help...
In-Reply-To: <d4e11e980805210733s2bd58b5ud6ece481be9fd1e2@mail.gmail.com>
References: <2373b1b90805210124r67d124cmc9879b64ec7e00b7@mail.gmail.com>
	<4834278A.1030204@hoovers.com>
	<d4e11e980805210659h28cd8696r12cccf05a9227f0@mail.gmail.com>
	<2373b1b90805210713q588a3c38t3f51b0f4101dcf43@mail.gmail.com>
	<d4e11e980805210733s2bd58b5ud6ece481be9fd1e2@mail.gmail.com>
Message-ID: <2373b1b90805210744w3bbff605nce4d580f148dd93b@mail.gmail.com>

Thanks again... Me too havent got that deep yet... But I'm going to look
into this...

Thank you.

Kevina

On Wed, May 21, 2008 at 6:33 PM, Nikolas Everett <nik9000 at gmail.com> wrote:

> I haven't gotten that deep into this as of yet, but the idea is to have
> something like
> class VerificationCallback {
>  private final List<Error> errors;
>
>  public void import(ASTNode importedPackage) {//Do some checks, and add
> errors to the list of errors}
>   public void referencedType(ASTNode nodeForType) {//Do some checks, and
> add errors to the list of errors}
>
> }
>
> You'd create the grammar with a member for the callback, and then you'd
> call it when processing the tree like so:
> import:  ^(IMPORT name=packageName) {this.callback.import(name);}
>
> --Nik
>
>
> On Wed, May 21, 2008 at 10:13 AM, Kevina Choolhun <
> kevina.choolhun at gmail.com> wrote:
>
>> Hello,
>>
>> Thanks! Could you please explain further what you mean by
>>
>> "1 grammar to verify the AST (tree grammar with no output, only embedded
>> actions calling a callback)"
>>
>> Maybe, you mean error messages?
>>
>> Thank you.
>>
>> Kevina
>>
>>
>> On Wed, May 21, 2008 at 5:59 PM, Nikolas Everett <nik9000 at gmail.com>
>> wrote:
>>
>>> I learned a good portion of what I know about antlr and stringtemplate by
>>> going through the source code for the Mantra compiler.  Its all here:
>>> http://www.linguamantra.org/
>>>
>>> The long and short of it is that embedding actions is great for checking
>>> things but is more cumbersome when actually generating output.  Tree
>>> grammars that output templates are the way to go there.
>>>
>>> I tend to do:
>>> 1 grammar to lex and parse into an AST (output=AST)
>>> 1 grammar to verify the AST (tree grammar with no output, only embedded
>>> actions calling a callback)
>>> 1 grammar to generate output (tree grammar with output=template)
>>>
>>> This is wonderfully flexible because the grammars become modules,
>>> allowing you to test them individually and substitute them at will.  This is
>>> kind of a pain because you need to wrote three or more grammars and sync up
>>> the output of the tree constructing grammar to the input of the others.
>>>
>>>
>>> On Wed, May 21, 2008 at 9:45 AM, csanders <csanders at hoovers.com> wrote:
>>>
>>>> I'm also new to ANTLR and would like to know how StringTemplate is a
>>>> better solution, is there somewhere we can read about this ?
>>>>
>>>> Thanks,
>>>> Charlie
>>>>
>>>> Kevina Choolhun wrote:
>>>>
>>>>> Hello,
>>>>>
>>>>> I am new at ANTLR but with the help of The Definitive ANTLR Reference
>>>>> have managed to set up a parser and a parser walker..
>>>>>
>>>>> Now for the next stage, I have tried my hand at embedding actions.. but
>>>>> Stringtemplate I hear is a much better solution.
>>>>>
>>>>> I am currently reading through stringtemplate.org <
>>>>> http://stringtemplate.org>. I wanted to know if there are any nice
>>>>> tutorials about it which could help me.. enhance my parser n lexer with
>>>>> StringTemplate
>>>>>
>>>>> Thank you for your help.
>>>>>
>>>>> --
>>>>> Kev
>>>>>
>>>>
>>>>
>>>
>>
>>
>> --
>> Kevina
>
>
>


-- 
Kevina
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080521/f2517e50/attachment-0001.html 

From carter_cheng at yahoo.com  Wed May 21 11:00:36 2008
From: carter_cheng at yahoo.com (Carter Cheng)
Date: Wed, 21 May 2008 11:00:36 -0700 (PDT)
Subject: [antlr-interest] Does new beta support C++?
Message-ID: <302222.43421.qm@web50101.mail.re2.yahoo.com>

I have been waiting for C++ compatible support for a while since there is a project which I would like to attempt in C++. Is this in the current beta release?

Regards,

Carter. 


      

From jimi at temporal-wave.com  Wed May 21 11:12:25 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 21 May 2008 11:12:25 -0700
Subject: [antlr-interest] Does new beta support C++?
In-Reply-To: <302222.43421.qm@web50101.mail.re2.yahoo.com>
References: <302222.43421.qm@web50101.mail.re2.yahoo.com>
Message-ID: <1211393545.10504.131.camel@jimi>

On Wed, 2008-05-21 at 11:00 -0700, Carter Cheng wrote:

> I have been waiting for C++ compatible support for a while since there is a project which I would like to attempt in C++. Is this in the current beta release?
> 

Yes, just compile the generated .c files as C++ files. Release is a
little ways off, but not too far - the more people that try the beta and
let me know (here) of any bugs, the better :-)

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080521/c832e3fe/attachment.html 

From David.Raymer at motorola.com  Wed May 21 12:47:11 2008
From: David.Raymer at motorola.com (Raymer David-fdr017)
Date: Wed, 21 May 2008 14:47:11 -0500
Subject: [antlr-interest] strangeness parsing comments
Message-ID: <EDC0C53BE7E5D549A9E2577C7412219301EB6A2B@tx14exm60.ds.mot.com>

Gentlebeings,
 
 
Given the following lexer construct in a grammar file ...
 
INLINE_COMMENT
     :  '/*' ( options {greedy=false;} : . )* '*/'   { $channel=HIDDEN; }
     |  '//' ~('\n'|'\r')* '\r'? '\n'  { $channel=HIDDEN; }
     ;    

If this rule executes on the "/* .... */" construct, it seems as tho my parser is stuck in "not greedy" mode -- that is the match of the any subsequent rules fail.  If I remove the "/* ... */" from the input file everying works. 
 
I'm using AntlrWorks 1.1.7 and Antlr 3.0.1 on Windoze(tm) with JDK 1.6.0_05 
 
thanks for any thoughts on what I am doing wrong ..

Dave Raymer
D: (817)-245-6834       M:(817)501-2665         ICBM: 32.9? N 97.2? W
All that is necessary for the triumph of evil is for good men to do nothing
-- attributed to Edmund Burke 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080521/49739ef1/attachment.html 

From David.Raymer at motorola.com  Wed May 21 13:23:21 2008
From: David.Raymer at motorola.com (Raymer David-fdr017)
Date: Wed, 21 May 2008 15:23:21 -0500
Subject: [antlr-interest] strangeness parsing comments
In-Reply-To: <EDC0C53BE7E5D549A9E2577C7412219301EB6A2B@tx14exm60.ds.mot.com>
References: <EDC0C53BE7E5D549A9E2577C7412219301EB6A2B@tx14exm60.ds.mot.com>
Message-ID: <EDC0C53BE7E5D549A9E2577C7412219301EB6A4E@tx14exm60.ds.mot.com>

well .. this was a symptom, not the problem.  The problem is actually another lexer rule ...  it appears that rule is a misuse of the lexer, and should be implemented as a parser rule.
 

Dave Raymer
D: (817)-245-6834       M:(817)501-2665         ICBM: 32.9? N 97.2? W
All that is necessary for the triumph of evil is for good men to do nothing
-- attributed to Edmund Burke 


 


________________________________

	From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Raymer David-fdr017
	Sent: Wednesday, May 21, 2008 2:47 PM
	To: antlr-interest at antlr.org
	Subject: [antlr-interest] strangeness parsing comments
	
	
	Gentlebeings,
	 
	 
	Given the following lexer construct in a grammar file ...
	 
	INLINE_COMMENT
	     :  '/*' ( options {greedy=false;} : . )* '*/'   { $channel=HIDDEN; }
	     |  '//' ~('\n'|'\r')* '\r'? '\n'  { $channel=HIDDEN; }
	     ;    
	
	If this rule executes on the "/* .... */" construct, it seems as tho my parser is stuck in "not greedy" mode -- that is the match of the any subsequent rules fail.  If I remove the "/* ... */" from the input file everying works. 
	 
	I'm using AntlrWorks 1.1.7 and Antlr 3.0.1 on Windoze(tm) with JDK 1.6.0_05 
	 
	thanks for any thoughts on what I am doing wrong ..

	Dave Raymer
	D: (817)-245-6834       M:(817)501-2665         ICBM: 32.9? N 97.2? W
	All that is necessary for the triumph of evil is for good men to do nothing
	-- attributed to Edmund Burke 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080521/cbc4dc18/attachment.html 

From andreas.bartho at inf.tu-dresden.de  Wed May 21 13:54:19 2008
From: andreas.bartho at inf.tu-dresden.de (Andreas Bartho)
Date: Wed, 21 May 2008 22:54:19 +0200
Subject: [antlr-interest] ANTLR 3.1b1 released!
In-Reply-To: <62F7B8D6-C3D0-4A7A-B1C1-E8BD44405B89@cs.usfca.edu>
References: <62F7B8D6-C3D0-4A7A-B1C1-E8BD44405B89@cs.usfca.edu>
Message-ID: <48348BFB.7050604@inf.tu-dresden.de>

Hi,

> You'll have to regenerate your recognizers from your grammars, but, for 
> the most part, 3.1 should be a drop in replacement for 3.0.1. :)

the parser generation works without errors (and magnitudes faster than 
with 3.0.1). But when running the parser with memoization I get an error 
message:

!!!!!!!!! memo array is null for CSharp.g

Please tell me if you need my grammar to investigate the issue.

Andreas

From parrt at cs.usfca.edu  Wed May 21 13:57:54 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 21 May 2008 13:57:54 -0700
Subject: [antlr-interest] ANTLR 3.1b1 released!
In-Reply-To: <48348BFB.7050604@inf.tu-dresden.de>
References: <62F7B8D6-C3D0-4A7A-B1C1-E8BD44405B89@cs.usfca.edu>
	<48348BFB.7050604@inf.tu-dresden.de>
Message-ID: <6249469F-4621-4727-845E-F8F7DDB70E94@cs.usfca.edu>


On May 21, 2008, at 1:54 PM, Andreas Bartho wrote:

> Hi,
>
>> You'll have to regenerate your recognizers from your grammars, but,  
>> for the most part, 3.1 should be a drop in replacement for 3.0.1. :)
>
> the parser generation works without errors (and magnitudes faster  
> than with 3.0.1).

hooray!

> But when running the parser with memoization I get an error message:
>
> !!!!!!!!! memo array is null for CSharp.g
>
> Please tell me if you need my grammar to investigate the issue.

whichTarget? java? C#? C?
Ter

From lgcraymer at yahoo.com  Wed May 21 13:59:09 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Wed, 21 May 2008 13:59:09 -0700 (PDT)
Subject: [antlr-interest] ANTLR 3.1b1 released!
Message-ID: <911737.681.qm@web55906.mail.re3.yahoo.com>

You should mention which target you are using--Java, C#, whatever.  Problems with the generated code are probably not generic, but are likely to indicate an improperly updated template or library class.

--Loring

----- Original Message ----
> From: Andreas Bartho <andreas.bartho at inf.tu-dresden.de>
> To: Terence Parr <parrt at cs.usfca.edu>
> Cc: "antlr-interest at antlr.org Interest" <antlr-interest at antlr.org>
> Sent: Wednesday, May 21, 2008 1:54:19 PM
> Subject: Re: [antlr-interest] ANTLR 3.1b1 released!
> 
> Hi,
> 
> > You'll have to regenerate your recognizers from your grammars, but, for 
> > the most part, 3.1 should be a drop in replacement for 3.0.1. :)
> 
> the parser generation works without errors (and magnitudes faster than 
> with 3.0.1). But when running the parser with memoization I get an error 
> message:
> 
> !!!!!!!!! memo array is null for CSharp.g
> 
> Please tell me if you need my grammar to investigate the issue.
> 
> Andreas



      


From jimi at temporal-wave.com  Wed May 21 14:03:01 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 21 May 2008 14:03:01 -0700
Subject: [antlr-interest] ANTLR 3.1b1 released!
In-Reply-To: <6249469F-4621-4727-845E-F8F7DDB70E94@cs.usfca.edu>
References: <62F7B8D6-C3D0-4A7A-B1C1-E8BD44405B89@cs.usfca.edu>
	<48348BFB.7050604@inf.tu-dresden.de>
	<6249469F-4621-4727-845E-F8F7DDB70E94@cs.usfca.edu>
Message-ID: <1211403781.9284.4.camel@jimi>

On Wed, 2008-05-21 at 13:57 -0700, Terence Parr wrote:

> On May 21, 2008, at 1:54 PM, Andreas Bartho wrote:
> 
> > Hi,
> >
> >> You'll have to regenerate your recognizers from your grammars, but,  
> >> for the most part, 3.1 should be a drop in replacement for 3.0.1. :)
> >
> > the parser generation works without errors (and magnitudes faster  
> > than with 3.0.1).
> 
> hooray!
> 
> > But when running the parser with memoization I get an error message:
> >
> > !!!!!!!!! memo array is null for CSharp.g
> >
> > Please tell me if you need my grammar to investigate the issue.
> 
> whichTarget? java? C#? C?


Looks like:

./runtime/Java/src/org/antlr/runtime/BaseRecognizer.java:
System.out.println("!!!!!!!!! memo array is null for "+
getGrammarFileName());


Though this is also copied in the ActionScript target it would seem.

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080521/f3d1b0bf/attachment.html 

From parrt at cs.usfca.edu  Wed May 21 14:05:44 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 21 May 2008 14:05:44 -0700
Subject: [antlr-interest] ANTLR 3.1b1 released!
In-Reply-To: <1211403781.9284.4.camel@jimi>
References: <62F7B8D6-C3D0-4A7A-B1C1-E8BD44405B89@cs.usfca.edu>
	<48348BFB.7050604@inf.tu-dresden.de>
	<6249469F-4621-4727-845E-F8F7DDB70E94@cs.usfca.edu>
	<1211403781.9284.4.camel@jimi>
Message-ID: <CFB8D1D0-ED69-41A6-A739-D9164B30C453@cs.usfca.edu>

Interesting. I wonder if this scene only during debugging or when  
using a nonstandard constructor (i.e., a constructor specified by the  
user for the recognizer).

Ter
On May 21, 2008, at 2:03 PM, Jim Idle wrote:

> On Wed, 2008-05-21 at 13:57 -0700, Terence Parr wrote:
>>
>> On May 21, 2008, at 1:54 PM, Andreas Bartho wrote:
>>
>> > Hi,
>> >
>> >> You'll have to regenerate your recognizers from your grammars,  
>> but,
>> >> for the most part, 3.1 should be a drop in replacement for  
>> 3.0.1. :)
>> >
>> > the parser generation works without errors (and magnitudes faster
>> > than with 3.0.1).
>>
>> hooray!
>>
>> > But when running the parser with memoization I get an error  
>> message:
>> >
>> > !!!!!!!!! memo array is null for CSharp.g
>> >
>> > Please tell me if you need my grammar to investigate the issue.
>>
>> whichTarget? java? C#? C?
>
> Looks like:
>
> ./runtime/Java/src/org/antlr/runtime/BaseRecognizer.java:	  
> System.out.println("!!!!!!!!! memo array is null for "+  
> getGrammarFileName());
>
>
> Though this is also copied in the ActionScript target it would seem.
>
> Jim


From andreas.bartho at inf.tu-dresden.de  Thu May 22 02:39:04 2008
From: andreas.bartho at inf.tu-dresden.de (Andreas Bartho)
Date: Thu, 22 May 2008 11:39:04 +0200
Subject: [antlr-interest] ANTLR 3.1b1 released!
In-Reply-To: <CFB8D1D0-ED69-41A6-A739-D9164B30C453@cs.usfca.edu>
References: <62F7B8D6-C3D0-4A7A-B1C1-E8BD44405B89@cs.usfca.edu>	<48348BFB.7050604@inf.tu-dresden.de>	<6249469F-4621-4727-845E-F8F7DDB70E94@cs.usfca.edu>	<1211403781.9284.4.camel@jimi>
	<CFB8D1D0-ED69-41A6-A739-D9164B30C453@cs.usfca.edu>
Message-ID: <48353F38.8020401@inf.tu-dresden.de>

Hi Terence,

> Interesting. I wonder if this scene only during debugging or when using 
> a nonstandard constructor (i.e., a constructor specified by the user for 
> the recognizer).

I'm using the Java target.

I have not specified a new constructor and I'm not in debugging mode. 
This is how I invoke the parser:

CSharpLexer lexer = new CSharpLexer(new 
ANTLRReaderStream(getCodeFileReader(codeFile)));
CommonTokenStream tokens = new CommonTokenStream(lexer);
CSharpParser parser = new CSharpParser(tokens);
ParserRuleReturnScope ret = parser.compilationunit();

The grammar can be found here:
http://deftproject.svn.sourceforge.net/viewvc/*checkout*/deftproject/deft/trunk/org.deft.antlrcsharp/CSharp.g?revision=236

If it helps I could try to strip the grammar down.

Andreas


From kevina.choolhun at gmail.com  Thu May 22 04:43:09 2008
From: kevina.choolhun at gmail.com (Kevina Choolhun)
Date: Thu, 22 May 2008 15:43:09 +0400
Subject: [antlr-interest] Newbie Needs help... StringTemplate and Language
	Translation
Message-ID: <2373b1b90805220443g6cfbf2c5l1cdd9a44a511ddde@mail.gmail.com>

Hello again  everybody...

I  have been checking the Mantra Language and I am spell bound.

I am a student and would like a simple example of how to use StringTemplate
to translate a language. So far, I have 2 grammars, but i have been told I
need three. I am working on it. But still cannot get a hang of how to deal
with the StringTemplate bit.

Anybody can help me?

Thank you

Kevina


On Wed, May 21, 2008 at 6:44 PM, Kevina Choolhun <kevina.choolhun at gmail.com>
wrote:

> Thanks again... Me too havent got that deep yet... But I'm going to look
> into this...
>
> Thank you.
>
> Kevina
>
>
> On Wed, May 21, 2008 at 6:33 PM, Nikolas Everett <nik9000 at gmail.com>
> wrote:
>
>> I haven't gotten that deep into this as of yet, but the idea is to have
>> something like
>> class VerificationCallback {
>>  private final List<Error> errors;
>>
>>  public void import(ASTNode importedPackage) {//Do some checks, and add
>> errors to the list of errors}
>>   public void referencedType(ASTNode nodeForType) {//Do some checks, and
>> add errors to the list of errors}
>>
>> }
>>
>> You'd create the grammar with a member for the callback, and then you'd
>> call it when processing the tree like so:
>> import:  ^(IMPORT name=packageName) {this.callback.import(name);}
>>
>> --Nik
>>
>>
>> On Wed, May 21, 2008 at 10:13 AM, Kevina Choolhun <
>> kevina.choolhun at gmail.com> wrote:
>>
>>> Hello,
>>>
>>> Thanks! Could you please explain further what you mean by
>>>
>>> "1 grammar to verify the AST (tree grammar with no output, only embedded
>>> actions calling a callback)"
>>>
>>> Maybe, you mean error messages?
>>>
>>> Thank you.
>>>
>>> Kevina
>>>
>>>
>>> On Wed, May 21, 2008 at 5:59 PM, Nikolas Everett <nik9000 at gmail.com>
>>> wrote:
>>>
>>>> I learned a good portion of what I know about antlr and stringtemplate
>>>> by going through the source code for the Mantra compiler.  Its all here:
>>>> http://www.linguamantra.org/
>>>>
>>>> The long and short of it is that embedding actions is great for checking
>>>> things but is more cumbersome when actually generating output.  Tree
>>>> grammars that output templates are the way to go there.
>>>>
>>>> I tend to do:
>>>> 1 grammar to lex and parse into an AST (output=AST)
>>>> 1 grammar to verify the AST (tree grammar with no output, only embedded
>>>> actions calling a callback)
>>>> 1 grammar to generate output (tree grammar with output=template)
>>>>
>>>> This is wonderfully flexible because the grammars become modules,
>>>> allowing you to test them individually and substitute them at will.  This is
>>>> kind of a pain because you need to wrote three or more grammars and sync up
>>>> the output of the tree constructing grammar to the input of the others.
>>>>
>>>>
>>>> On Wed, May 21, 2008 at 9:45 AM, csanders <csanders at hoovers.com> wrote:
>>>>
>>>>> I'm also new to ANTLR and would like to know how StringTemplate is a
>>>>> better solution, is there somewhere we can read about this ?
>>>>>
>>>>> Thanks,
>>>>> Charlie
>>>>>
>>>>> Kevina Choolhun wrote:
>>>>>
>>>>>> Hello,
>>>>>>
>>>>>> I am new at ANTLR but with the help of The Definitive ANTLR Reference
>>>>>> have managed to set up a parser and a parser walker..
>>>>>>
>>>>>> Now for the next stage, I have tried my hand at embedding actions..
>>>>>> but Stringtemplate I hear is a much better solution.
>>>>>>
>>>>>> I am currently reading through stringtemplate.org <
>>>>>> http://stringtemplate.org>. I wanted to know if there are any nice
>>>>>> tutorials about it which could help me.. enhance my parser n lexer with
>>>>>> StringTemplate
>>>>>>
>>>>>> Thank you for your help.
>>>>>>
>>>>>> --
>>>>>> Kev
>>>>>>
>>>>>
>>>>>
>>>>
>>>
>>>
>>> --
>>> Kevina
>>
>>
>>
>
>
> --
> Kevina
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080522/e16f309a/attachment.html 

From adam.rpconnelly at googlemail.com  Thu May 22 06:52:34 2008
From: adam.rpconnelly at googlemail.com (Adam Connelly)
Date: Thu, 22 May 2008 14:52:34 +0100
Subject: [antlr-interest] Idea: semantic grammar
Message-ID: <b9a39b060805220652p43a8267ev662414293ccecd46@mail.gmail.com>

Hi,
I don't know if there is anything like this about at the moment, or even if
it's a good idea.  What I've been thinking about is having a grammar that
defines the semantics of a language that parsers can then import.  It would
basically be a list of the possible types of semantic error that could
occur, along with any information necessary to generate an error message,
and an action that creates the message.

>From this a number of exception classes would be generated, along with a
MessageCreator that would generate error messages based on the actions
supplied.  Inside the parser grammar, when semantic predicates are declared,
the type of error would be indicated, and from this the correct exception
would be thrown.  The parser would then ask its ErrorReporter to handle the
error, which would use the MessageCreator to create the error message, and
would then add it to a list / print to the console / whatever.

>From this, "catalogs" of pre-defined semantic errors could be provided along
with the correct messages to display for these errors.  Obviously this
wouldn't define the actual semantics of the language (since you'd still need
to implement this in actions), but it would simplify the error reporting
part since users would just import the correct semantics, then indicate when
a certain semantic error should be thrown.

Any thoughts?
Adam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080522/f3fd6d7a/attachment.html 

From felix_do at web.de  Thu May 22 07:04:22 2008
From: felix_do at web.de (Felix Dorner)
Date: Thu, 22 May 2008 16:04:22 +0200
Subject: [antlr-interest] Getting rid of class cast exceptions to CommonTree
Message-ID: <48357D66.1030208@web.de>

Hi,

I use a lot of semantic predicates in my tree grammar. When a 
FailedPredicateException is thrown, I sometimes end up with a ClassCast 
exception, because Antlr tries to cast an "UP" or a "DOWN" node, to my 
custom AST type. It seems that UP/DOWN are always CommonTrees.

I don't know where things get messed up, for now I'd just like to get 
rid of the class cast exception.

Felix

From docinnuke at gmail.com  Thu May 22 08:12:32 2008
From: docinnuke at gmail.com (Doc In Nuke)
Date: Thu, 22 May 2008 18:12:32 +0300
Subject: [antlr-interest] C# Just starting with Parsers, Trees
Message-ID: <48358D60.2010007@gmail.com>

Hi @ all

First of all let me apologize for the english mistakes you will surely 
find in this message.

So, I just started working with ANTLR a few days ago.

I was able to generate a parser and lexer for the lua grammar provided 
on the site.
Now I also was able to create nodes / sub trees using the ^ parameter in 
the grammar.
I also modified the grammar a bit to try to generate what i really 
wanted in the end.

One of the rule i added for exemple is the following one:
globalfuncdec    :    'function' ^ funcname funcbody ;

so for every global function (declaration not starting with local) i get 
a subtree with the funcname and funcbody block.
Now what would really be nice is a way to get the funcname as 1 token 
and not more.
funcname is the following rule:
 funcname : NAME ('.' NAME)* (':' NAME)? ;

in the same way having just a childnode named funcbody with all the 
stuff related to funcbody under it would be great.

So i would have something like that:
                                function
                               /            \
            funcname/value         funcbody
                                             /           \
                                         stuff_1  ... stuff_n

So I was wondering if one can do such a thing, and if yes, how ?

Best Regards,


From hharalambiev at gmail.com  Thu May 22 08:28:39 2008
From: hharalambiev at gmail.com (Haralambi Haralambiev)
Date: Thu, 22 May 2008 18:28:39 +0300
Subject: [antlr-interest] C# Just starting with Parsers, Trees
In-Reply-To: <48358D60.2010007@gmail.com>
References: <48358D60.2010007@gmail.com>
Message-ID: <aa71f710805220828p75916887hf314cba5f3f4de07@mail.gmail.com>

Hello,

I was wondering - what is the purpose of collecting all the nodes into one?
What difficulties do you encounter in the current state of the tree - maybe
this could be solved in an eaiser way?

For example, if you just need the name of the function, you could always use
$funcname.text and this will get everything in one place.

Best Regards,
Hari

On 5/22/08, Doc In Nuke <docinnuke at gmail.com> wrote:
>
> Hi @ all
>
> First of all let me apologize for the english mistakes you will surely find
> in this message.
>
> So, I just started working with ANTLR a few days ago.
>
> I was able to generate a parser and lexer for the lua grammar provided on
> the site.
> Now I also was able to create nodes / sub trees using the ^ parameter in
> the grammar.
> I also modified the grammar a bit to try to generate what i really wanted
> in the end.
>
> One of the rule i added for exemple is the following one:
> globalfuncdec    :    'function' ^ funcname funcbody ;
>
> so for every global function (declaration not starting with local) i get a
> subtree with the funcname and funcbody block.
> Now what would really be nice is a way to get the funcname as 1 token and
> not more.
> funcname is the following rule:
> funcname : NAME ('.' NAME)* (':' NAME)? ;
>
> in the same way having just a childnode named funcbody with all the stuff
> related to funcbody under it would be great.
>
> So i would have something like that:
>                               function
>                              /            \
>           funcname/value         funcbody
>                                            /           \
>                                        stuff_1  ... stuff_n
>
> So I was wondering if one can do such a thing, and if yes, how ?
>
> Best Regards,
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080522/f875b83f/attachment-0001.html 

From siemsen at ucar.edu  Thu May 22 08:30:58 2008
From: siemsen at ucar.edu (siemsen at ucar.edu)
Date: Thu, 22 May 2008 09:30:58 -0600
Subject: [antlr-interest] Newbie Needs help... StringTemplate and
	Language Translation
In-Reply-To: <2373b1b90805220443g6cfbf2c5l1cdd9a44a511ddde@mail.gmail.com>
References: <2373b1b90805220443g6cfbf2c5l1cdd9a44a511ddde@mail.gmail.com>
Message-ID: <72CEBB6B-15D7-47B7-BA9F-F92DEABCD2F9@ucar.edu>

Kevina,

You don't "need" 2 or 3 grammars.  I have a useful ANTLR 3 translator  
that uses StringTemplate and just 1 grammar, with no AST.  The number  
of grammars you need has to do with the number of phases that you  
need.  For example, if your language has forward references (in one  
source file, definitions of functions can appear after calls to the  
functions), then you probably need 2 grammars, one that lexes/parses  
and collects the names of the defined functions.  Then in a later AST  
phase, you can check that function calls refer to functions that have  
been defined, and emit output using StringTemplate.

The ANTLR book has a good chapter on how to use StringTemplate, with  
examples.

-- Pete


On May 22, 2008, at 5:43 AM, Kevina Choolhun wrote:

> Hello again everybody...
>
> I  have been checking the Mantra Language and I am spell bound.
>
> I am a student and would like a simple example of how to use  
> StringTemplate to translate a language. So far, I have 2 grammars,  
> but i have been told I need three. I am working on it. But still  
> cannot get a hang of how to deal with the StringTemplate bit.
>
> Anybody can help me?
>
> Thank you
>
> Kevina
>
>
> On Wed, May 21, 2008 at 6:44 PM, Kevina Choolhun <kevina.choolhun at gmail.com 
> > wrote:
> Thanks again... Me too havent got that deep yet... But I'm going to  
> look into this...
>
> Thank you.
>
> Kevina
>
>
> On Wed, May 21, 2008 at 6:33 PM, Nikolas Everett <nik9000 at gmail.com>  
> wrote:
> I haven't gotten that deep into this as of yet, but the idea is to  
> have something like
> class VerificationCallback {
>  private final List<Error> errors;
>
>  public void import(ASTNode importedPackage) {//Do some checks, and  
> add errors to the list of errors}
>   public void referencedType(ASTNode nodeForType) {//Do some checks,  
> and add errors to the list of errors}
>
> }
>
> You'd create the grammar with a member for the callback, and then  
> you'd call it when processing the tree like so:
> import:  ^(IMPORT name=packageName) {this.callback.import(name);}
>
> --Nik
>
>
> On Wed, May 21, 2008 at 10:13 AM, Kevina Choolhun <kevina.choolhun at gmail.com 
> > wrote:
> Hello,
>
> Thanks! Could you please explain further what you mean by
>
> "1 grammar to verify the AST (tree grammar with no output, only  
> embedded actions calling a callback)"
>
> Maybe, you mean error messages?
>
> Thank you.
>
> Kevina
>
>
> On Wed, May 21, 2008 at 5:59 PM, Nikolas Everett <nik9000 at gmail.com>  
> wrote:
> I learned a good portion of what I know about antlr and  
> stringtemplate by going through the source code for the Mantra  
> compiler.  Its all here:  http://www.linguamantra.org/
>
> The long and short of it is that embedding actions is great for  
> checking things but is more cumbersome when actually generating  
> output.  Tree grammars that output templates are the way to go there.
>
> I tend to do:
> 1 grammar to lex and parse into an AST (output=AST)
> 1 grammar to verify the AST (tree grammar with no output, only  
> embedded actions calling a callback)
> 1 grammar to generate output (tree grammar with output=template)
>
> This is wonderfully flexible because the grammars become modules,  
> allowing you to test them individually and substitute them at will.   
> This is kind of a pain because you need to wrote three or more  
> grammars and sync up the output of the tree constructing grammar to  
> the input of the others.
>
>
> On Wed, May 21, 2008 at 9:45 AM, csanders <csanders at hoovers.com>  
> wrote:
> I'm also new to ANTLR and would like to know how StringTemplate is a  
> better solution, is there somewhere we can read about this ?
>
> Thanks,
> Charlie
>
> Kevina Choolhun wrote:
> Hello,
>
> I am new at ANTLR but with the help of The Definitive ANTLR  
> Reference have managed to set up a parser and a parser walker..
>
> Now for the next stage, I have tried my hand at embedding actions..  
> but Stringtemplate I hear is a much better solution.
>
> I am currently reading through stringtemplate.org <http://stringtemplate.org 
> >. I wanted to know if there are any nice tutorials about it which  
> could help me.. enhance my parser n lexer with StringTemplate
>
>
> Thank you for your help.
>
> -- 
> Kev
>
>
>
>
>
> -- 
> Kevina
>
>
>
>
> -- 
> Kevina
>
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080522/d0f32b2b/attachment.html 

From docinnuke at gmail.com  Thu May 22 08:42:56 2008
From: docinnuke at gmail.com (Doc In Nuke)
Date: Thu, 22 May 2008 18:42:56 +0300
Subject: [antlr-interest] C# Just starting with Parsers, Trees
In-Reply-To: <aa71f710805220828p75916887hf314cba5f3f4de07@mail.gmail.com>
References: <48358D60.2010007@gmail.com>
	<aa71f710805220828p75916887hf314cba5f3f4de07@mail.gmail.com>
Message-ID: <48359480.9060005@gmail.com>

Hi,

Here is what I did:
Took the lua grammar
generated a parser and lexer with it in csharp. I also added the 
output=AST option.
This without modifying the rules. This generated 2 classes

used the following code:
            ANTLRFileStream afs = new ANTLRFileStream("LuaFile/queue.lua");
            LuaLexer lexer = new LuaLexer(afs);
            CommonTokenStream cts = new CommonTokenStream();

            cts.TokenSource = lexer;

            LuaParser parser = new LuaParser(cts);

            LuaParser.chunk_return r = parser.chunk();

            CommonTree t = (CommonTree)r.Tree;

            CommonTreeNodeStream nodes = new CommonTreeNodeStream(t);

now,t is flat if I only do that. This is why I started trying stuff with 
the tree syntax. And since I am not english I do not really understand 
all the documentation available :(

So the more general question would be, how do I get a real tree from 
that, either by modifying the grammar, or do I need to create some code 
too ?

I would love to know how I get the $funcname.Text stuff in my code :)

Best Regards,


Haralambi Haralambiev wrote:
> Hello,
>
> I was wondering - what is the purpose of collecting all the nodes into 
> one?
> What difficulties do you encounter in the current state of the tree - 
> maybe this could be solved in an eaiser way?
>
> For example, if you just need the name of the function, you could 
> always use $funcname.text and this will get everything in one place.
>
> Best Regards,
> Hari
>
> On 5/22/08, *Doc In Nuke* <docinnuke at gmail.com 
> <mailto:docinnuke at gmail.com>> wrote:
>
>     Hi @ all
>
>     First of all let me apologize for the english mistakes you will
>     surely find in this message.
>
>     So, I just started working with ANTLR a few days ago.
>
>     I was able to generate a parser and lexer for the lua grammar
>     provided on the site.
>     Now I also was able to create nodes / sub trees using the ^
>     parameter in the grammar.
>     I also modified the grammar a bit to try to generate what i really
>     wanted in the end.
>
>     One of the rule i added for exemple is the following one:
>     globalfuncdec    :    'function' ^ funcname funcbody ;
>
>     so for every global function (declaration not starting with local)
>     i get a subtree with the funcname and funcbody block.
>     Now what would really be nice is a way to get the funcname as 1
>     token and not more.
>     funcname is the following rule:
>     funcname : NAME ('.' NAME)* (':' NAME)? ;
>
>     in the same way having just a childnode named funcbody with all
>     the stuff related to funcbody under it would be great.
>
>     So i would have something like that:
>                                   function
>                                  /            \
>               funcname/value         funcbody
>                                                /           \
>                                            stuff_1  ... stuff_n
>
>     So I was wondering if one can do such a thing, and if yes, how ?
>
>     Best Regards,
>
>


From parrt at cs.usfca.edu  Thu May 22 08:54:55 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 22 May 2008 08:54:55 -0700
Subject: [antlr-interest] Getting rid of class cast exceptions to
	CommonTree
In-Reply-To: <48357D66.1030208@web.de>
References: <48357D66.1030208@web.de>
Message-ID: <B156FC81-E8FC-4EB2-B82B-990A35BF983A@cs.usfca.edu>

hi. what line exactly is giving the issue?  Perhaps we can avoid the  
cast.
Ter
On May 22, 2008, at 7:04 AM, Felix Dorner wrote:

> Hi,
>
> I use a lot of semantic predicates in my tree grammar. When a  
> FailedPredicateException is thrown, I sometimes end up with a  
> ClassCast exception, because Antlr tries to cast an "UP" or a "DOWN"  
> node, to my custom AST type. It seems that UP/DOWN are always  
> CommonTrees.
>
> I don't know where things get messed up, for now I'd just like to  
> get rid of the class cast exception.
>
> Felix


From JALuber at gmx.de  Thu May 22 09:09:53 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Thu, 22 May 2008 18:09:53 +0200
Subject: [antlr-interest] Idea: semantic grammar
Message-ID: <20080522160953.76900@gmx.net>

> Hi,
> I don't know if there is anything like this about at the moment, or even
> if
> it's a good idea.  What I've been thinking about is having a grammar that
> defines the semantics of a language that parsers can then import.  It
> would
> basically be a list of the possible types of semantic error that could
> occur, along with any information necessary to generate an error message,
> and an action that creates the message.
> 
> >>From this a number of exception classes would be generated, along with a
> MessageCreator that would generate error messages based on the actions
> supplied.  Inside the parser grammar, when semantic predicates are
> declared,
> the type of error would be indicated, and from this the correct exception
> would be thrown.  The parser would then ask its ErrorReporter to handle
> the
> error, which would use the MessageCreator to create the error message, and
> would then add it to a list / print to the console / whatever.
> 
> >>From this, "catalogs" of pre-defined semantic errors could be provided
> along
> with the correct messages to display for these errors.  Obviously this
> wouldn't define the actual semantics of the language (since you'd still
> need
> to implement this in actions), but it would simplify the error reporting
> part since users would just import the correct semantics, then indicate
> when
> a certain semantic error should be thrown.
> 
> Any thoughts?
> Adam

A nice idea but probably infeasible. There are too many semantic differences for basically one thing - recently I read an article about "PHP sucks" and saw that references were handled in 4.3, 4.4 and 5 differently. Granted, 4.3 was leaky and 4.4 made it too complicated, so restricting options to sensible ones has a benefit, but if you want to be able to parse even the most idiotic things, you have to able to define arbitrary semantics. And then you can use the target language itself. 

Maybe Yggdrasil of Loring Craymer can do that in target independent manner, but it would be basically still Turing equivalent. At least you can do far more things target independent in Yggdrasil than in ANTLR - just a shame, that he didn't got around to finish it yet.

Johannes
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

From adam.rpconnelly at googlemail.com  Thu May 22 09:17:17 2008
From: adam.rpconnelly at googlemail.com (Adam Connelly)
Date: Thu, 22 May 2008 17:17:17 +0100
Subject: [antlr-interest] Idea: semantic grammar
In-Reply-To: <20080522160953.76900@gmx.net>
References: <20080522160953.76900@gmx.net>
Message-ID: <b9a39b060805220917h6e4aea36p558949457341d950@mail.gmail.com>

Cheers for the replies.

Johannes, I probably didn't phrase it quite right.  I wasn't suggesting that
you define the actual semantics of the language (I thought about that but
temporarily moved it to the side).  What I was meaning is that for the
purposes of simpler (from the user's point of view) error reporting, it
should be possible to define the types of semantic errors that can occur
(but not necessarily how to detect these errors).

Once these types were defined, when users create their semantic predicates
they could then "attach" a type to a predicate which would alter the type of
exception thrown by the predicate, and in turn the error message that was
created.

Something like (ignoring the actual syntax)

{table.HasKey("myvar")}?[UndefinedIdentifier]

It may also be good to be able to pass argument to the types, but I haven't
thought that quite through.

Does that make any more sense?
Adam

2008/5/22 Johannes Luber <JALuber at gmx.de>:

> > Hi,
> > I don't know if there is anything like this about at the moment, or even
> > if
> > it's a good idea.  What I've been thinking about is having a grammar that
> > defines the semantics of a language that parsers can then import.  It
> > would
> > basically be a list of the possible types of semantic error that could
> > occur, along with any information necessary to generate an error message,
> > and an action that creates the message.
> >
> > >>From this a number of exception classes would be generated, along with
> a
> > MessageCreator that would generate error messages based on the actions
> > supplied.  Inside the parser grammar, when semantic predicates are
> > declared,
> > the type of error would be indicated, and from this the correct exception
> > would be thrown.  The parser would then ask its ErrorReporter to handle
> > the
> > error, which would use the MessageCreator to create the error message,
> and
> > would then add it to a list / print to the console / whatever.
> >
> > >>From this, "catalogs" of pre-defined semantic errors could be provided
> > along
> > with the correct messages to display for these errors.  Obviously this
> > wouldn't define the actual semantics of the language (since you'd still
> > need
> > to implement this in actions), but it would simplify the error reporting
> > part since users would just import the correct semantics, then indicate
> > when
> > a certain semantic error should be thrown.
> >
> > Any thoughts?
> > Adam
>
> A nice idea but probably infeasible. There are too many semantic
> differences for basically one thing - recently I read an article about "PHP
> sucks" and saw that references were handled in 4.3, 4.4 and 5 differently.
> Granted, 4.3 was leaky and 4.4 made it too complicated, so restricting
> options to sensible ones has a benefit, but if you want to be able to parse
> even the most idiotic things, you have to able to define arbitrary
> semantics. And then you can use the target language itself.
>
> Maybe Yggdrasil of Loring Craymer can do that in target independent manner,
> but it would be basically still Turing equivalent. At least you can do far
> more things target independent in Yggdrasil than in ANTLR - just a shame,
> that he didn't got around to finish it yet.
>
> Johannes
> --
> Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen!
> Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080522/b4be6e89/attachment-0001.html 

From felix_do at web.de  Thu May 22 09:19:31 2008
From: felix_do at web.de (Felix Dorner)
Date: Thu, 22 May 2008 18:19:31 +0200
Subject: [antlr-interest] Getting rid of class cast exceptions to
	CommonTree
In-Reply-To: <B156FC81-E8FC-4EB2-B82B-990A35BF983A@cs.usfca.edu>
References: <48357D66.1030208@web.de>
	<B156FC81-E8FC-4EB2-B82B-990A35BF983A@cs.usfca.edu>
Message-ID: <48359D13.4070502@web.de>

Terence Parr wrote:
> hi. what line exactly is giving the issue?  Perhaps we can avoid the 
> cast.
> Ter
I think it occurs when I try to acces a node in a subsequent semantic 
predicate body. it's more my incomplete error handling... I expect one 
of my ASTs, but get an UP/DOWN...

Felix

From JALuber at gmx.de  Thu May 22 10:08:54 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Thu, 22 May 2008 19:08:54 +0200
Subject: [antlr-interest] Idea: semantic grammar
In-Reply-To: <b9a39b060805220917h6e4aea36p558949457341d950@mail.gmail.com>
References: <20080522160953.76900@gmx.net>
	<b9a39b060805220917h6e4aea36p558949457341d950@mail.gmail.com>
Message-ID: <20080522170854.76900@gmx.net>

> Cheers for the replies.
> 
> Johannes, I probably didn't phrase it quite right.  I wasn't suggesting
> that
> you define the actual semantics of the language (I thought about that but
> temporarily moved it to the side).  What I was meaning is that for the
> purposes of simpler (from the user's point of view) error reporting, it
> should be possible to define the types of semantic errors that can occur
> (but not necessarily how to detect these errors).
> 
> Once these types were defined, when users create their semantic predicates
> they could then "attach" a type to a predicate which would alter the type
> of
> exception thrown by the predicate, and in turn the error message that was
> created.
> 
> Something like (ignoring the actual syntax)
> 
> {table.HasKey("myvar")}?[UndefinedIdentifier]
> 
> It may also be good to be able to pass argument to the types, but I
> haven't
> thought that quite through.
> 
> Does that make any more sense?
> Adam

It does. It's a nice idea, but things have to be extendable - not all semantic errors occur in a language.

Johannes

> 
> 2008/5/22 Johannes Luber <JALuber at gmx.de>:
> 
> > > Hi,
> > > I don't know if there is anything like this about at the moment, or
> even
> > > if
> > > it's a good idea.  What I've been thinking about is having a grammar
> that
> > > defines the semantics of a language that parsers can then import.  It
> > > would
> > > basically be a list of the possible types of semantic error that could
> > > occur, along with any information necessary to generate an error
> message,
> > > and an action that creates the message.
> > >
> > > >>From this a number of exception classes would be generated, along
> with
> > a
> > > MessageCreator that would generate error messages based on the actions
> > > supplied.  Inside the parser grammar, when semantic predicates are
> > > declared,
> > > the type of error would be indicated, and from this the correct
> exception
> > > would be thrown.  The parser would then ask its ErrorReporter to
> handle
> > > the
> > > error, which would use the MessageCreator to create the error message,
> > and
> > > would then add it to a list / print to the console / whatever.
> > >
> > > >>From this, "catalogs" of pre-defined semantic errors could be
> provided
> > > along
> > > with the correct messages to display for these errors.  Obviously this
> > > wouldn't define the actual semantics of the language (since you'd
> still
> > > need
> > > to implement this in actions), but it would simplify the error
> reporting
> > > part since users would just import the correct semantics, then
> indicate
> > > when
> > > a certain semantic error should be thrown.
> > >
> > > Any thoughts?
> > > Adam
> >
> > A nice idea but probably infeasible. There are too many semantic
> > differences for basically one thing - recently I read an article about
> "PHP
> > sucks" and saw that references were handled in 4.3, 4.4 and 5
> differently.
> > Granted, 4.3 was leaky and 4.4 made it too complicated, so restricting
> > options to sensible ones has a benefit, but if you want to be able to
> parse
> > even the most idiotic things, you have to able to define arbitrary
> > semantics. And then you can use the target language itself.
> >
> > Maybe Yggdrasil of Loring Craymer can do that in target independent
> manner,
> > but it would be basically still Turing equivalent. At least you can do
> far
> > more things target independent in Yggdrasil than in ANTLR - just a
> shame,
> > that he didn't got around to finish it yet.
> >
> > Johannes
> > --
> > Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen!
> > Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer
> >

-- 
Desperate Housewives - das Spiel!
Pikante Skandale, schockierende Details unter: http://flat.games.gmx.de

From adam.rpconnelly at googlemail.com  Thu May 22 10:17:43 2008
From: adam.rpconnelly at googlemail.com (Adam Connelly)
Date: Thu, 22 May 2008 18:17:43 +0100
Subject: [antlr-interest] Idea: semantic grammar
In-Reply-To: <20080522170854.76900@gmx.net>
References: <20080522160953.76900@gmx.net>
	<b9a39b060805220917h6e4aea36p558949457341d950@mail.gmail.com>
	<20080522170854.76900@gmx.net>
Message-ID: <b9a39b060805221017j75a3dea2gd55d42129d6a5589@mail.gmail.com>

I totally agree.  What if you had a basic pre-defined collection that was
distributed, and then users could extend on it to add their own.  Then when
they were used in a parser, only the types that were actually used in the
grammar would be imported.

Like I say, I've not totally thought things through yet so any comments are
great.

Cheers,
Adam

2008/5/22 Johannes Luber <JALuber at gmx.de>:

> > Cheers for the replies.
> >
> > Johannes, I probably didn't phrase it quite right.  I wasn't suggesting
> > that
> > you define the actual semantics of the language (I thought about that but
> > temporarily moved it to the side).  What I was meaning is that for the
> > purposes of simpler (from the user's point of view) error reporting, it
> > should be possible to define the types of semantic errors that can occur
> > (but not necessarily how to detect these errors).
> >
> > Once these types were defined, when users create their semantic
> predicates
> > they could then "attach" a type to a predicate which would alter the type
> > of
> > exception thrown by the predicate, and in turn the error message that was
> > created.
> >
> > Something like (ignoring the actual syntax)
> >
> > {table.HasKey("myvar")}?[UndefinedIdentifier]
> >
> > It may also be good to be able to pass argument to the types, but I
> > haven't
> > thought that quite through.
> >
> > Does that make any more sense?
> > Adam
>
> It does. It's a nice idea, but things have to be extendable - not all
> semantic errors occur in a language.
>
> Johannes
>
> >
> > 2008/5/22 Johannes Luber <JALuber at gmx.de>:
> >
> > > > Hi,
> > > > I don't know if there is anything like this about at the moment, or
> > even
> > > > if
> > > > it's a good idea.  What I've been thinking about is having a grammar
> > that
> > > > defines the semantics of a language that parsers can then import.  It
> > > > would
> > > > basically be a list of the possible types of semantic error that
> could
> > > > occur, along with any information necessary to generate an error
> > message,
> > > > and an action that creates the message.
> > > >
> > > > >>From this a number of exception classes would be generated, along
> > with
> > > a
> > > > MessageCreator that would generate error messages based on the
> actions
> > > > supplied.  Inside the parser grammar, when semantic predicates are
> > > > declared,
> > > > the type of error would be indicated, and from this the correct
> > exception
> > > > would be thrown.  The parser would then ask its ErrorReporter to
> > handle
> > > > the
> > > > error, which would use the MessageCreator to create the error
> message,
> > > and
> > > > would then add it to a list / print to the console / whatever.
> > > >
> > > > >>From this, "catalogs" of pre-defined semantic errors could be
> > provided
> > > > along
> > > > with the correct messages to display for these errors.  Obviously
> this
> > > > wouldn't define the actual semantics of the language (since you'd
> > still
> > > > need
> > > > to implement this in actions), but it would simplify the error
> > reporting
> > > > part since users would just import the correct semantics, then
> > indicate
> > > > when
> > > > a certain semantic error should be thrown.
> > > >
> > > > Any thoughts?
> > > > Adam
> > >
> > > A nice idea but probably infeasible. There are too many semantic
> > > differences for basically one thing - recently I read an article about
> > "PHP
> > > sucks" and saw that references were handled in 4.3, 4.4 and 5
> > differently.
> > > Granted, 4.3 was leaky and 4.4 made it too complicated, so restricting
> > > options to sensible ones has a benefit, but if you want to be able to
> > parse
> > > even the most idiotic things, you have to able to define arbitrary
> > > semantics. And then you can use the target language itself.
> > >
> > > Maybe Yggdrasil of Loring Craymer can do that in target independent
> > manner,
> > > but it would be basically still Turing equivalent. At least you can do
> > far
> > > more things target independent in Yggdrasil than in ANTLR - just a
> > shame,
> > > that he didn't got around to finish it yet.
> > >
> > > Johannes
> > > --
> > > Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen!
> > > Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer
> > >
>
> --
> Desperate Housewives - das Spiel!
> Pikante Skandale, schockierende Details unter: http://flat.games.gmx.de
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080522/942c9f0f/attachment.html 

From parrt at cs.usfca.edu  Thu May 22 10:35:26 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 22 May 2008 10:35:26 -0700
Subject: [antlr-interest] Getting rid of class cast exceptions to
	CommonTree
In-Reply-To: <48359D13.4070502@web.de>
References: <48357D66.1030208@web.de>
	<B156FC81-E8FC-4EB2-B82B-990A35BF983A@cs.usfca.edu>
	<48359D13.4070502@web.de>
Message-ID: <0E746344-530A-4CC8-AB3D-36D37C03D5A0@cs.usfca.edu>


On May 22, 2008, at 9:19 AM, Felix Dorner wrote:

> Terence Parr wrote:
>> hi. what line exactly is giving the issue?  Perhaps we can avoid  
>> the cast.
>> Ter
> I think it occurs when I try to acces a node in a subsequent  
> semantic predicate body. it's more my incomplete error handling... I  
> expect one of my ASTs, but get an UP/DOWN...

Hmm...ok,So probably not ANTLR's fault?
Ter

From felix_do at web.de  Thu May 22 11:04:01 2008
From: felix_do at web.de (Felix Dorner)
Date: Thu, 22 May 2008 20:04:01 +0200
Subject: [antlr-interest] Getting rid of class cast exceptions to
	CommonTree
In-Reply-To: <0E746344-530A-4CC8-AB3D-36D37C03D5A0@cs.usfca.edu>
References: <48357D66.1030208@web.de>
	<B156FC81-E8FC-4EB2-B82B-990A35BF983A@cs.usfca.edu>
	<48359D13.4070502@web.de>
	<0E746344-530A-4CC8-AB3D-36D37C03D5A0@cs.usfca.edu>
Message-ID: <4835B591.901@web.de>

 >So probably not ANTLR's fault?
No, its in the generated code.. When I say antlr tries to.. I should 
really mean the runtime and not the generated code I guess.

From parrt at cs.usfca.edu  Thu May 22 11:07:45 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 22 May 2008 11:07:45 -0700
Subject: [antlr-interest] Getting rid of class cast exceptions to
	CommonTree
In-Reply-To: <4835B591.901@web.de>
References: <48357D66.1030208@web.de>
	<B156FC81-E8FC-4EB2-B82B-990A35BF983A@cs.usfca.edu>
	<48359D13.4070502@web.de>
	<0E746344-530A-4CC8-AB3D-36D37C03D5A0@cs.usfca.edu>
	<4835B591.901@web.de>
Message-ID: <02EA84C3-C78E-4114-A426-A822A961FF49@cs.usfca.edu>


On May 22, 2008, at 11:04 AM, Felix Dorner wrote:

> >So probably not ANTLR's fault?
> No, its in the generated code.. When I say antlr tries to.. I should  
> really mean the runtime and not the generated code I guess.

Well,I mean both runtime and tool when I say ANTLR. so, what specific  
line or operation in the runtime is getting typecast problem.
T

From felix_do at web.de  Thu May 22 11:12:19 2008
From: felix_do at web.de (Felix Dorner)
Date: Thu, 22 May 2008 20:12:19 +0200
Subject: [antlr-interest] lexer error cont
Message-ID: <4835B783.3000301@web.de>

Hey,

is it correct that the Lexer  doesn't count errors? I look in 3.1.b1 
org.antlr.runtime.Lexer.reportError(). which overrides 
BaseRecognizer.reportError(), with comments:

 *  If you override, make sure to update syntaxErrors if you care about 
that.

So I just override again in my personal lexer? The use case is: It's 
really cool that Antlr successfully recovers in some cases, but I _want 
to know about that. Rather than overriding, I thought I check for the 
error count in the lexer.


Felix

From parrt at cs.usfca.edu  Thu May 22 11:37:38 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 22 May 2008 11:37:38 -0700
Subject: [antlr-interest] CFP: SAC 2009 PL Track (WAPL'07 PC)
Message-ID: <B47E644B-0367-475C-AE56-4E0080BCABBA@cs.usfca.edu>

***********************************************************************************
CALL FOR PAPERS

SAC'09 - ACM 2009 SYMPOSIUM ON APPLIED COMPUTING
March 8-12, 2009
Honolulu, Hawaii, USA
Technical Track on "Programming Languages"
***********************************************************************************

Over the past 23 years, the ACM Symposium on Applied Computing has  
become a primary forum for applied computer scientists, computer  
engineers, software engineers, and application developers from around  
the world to interact and present their work. SAC 2009 is sponsored by  
the ACM Special Interest Group on Applied Computing (SIGAPP). For  
additional information, please check the SAC web page: http://www.acm.org/conferences/sac/sac2009 
.

PROGRAMMING LANGUAGES (PL) TRACK (http://www.cis.uab.edu/bryant/ 
sac2009/)
A technical track on Programming Languages will be held at SAC'09. It  
will be a forum for engineers, researchers and practitioners  
throughout the world to share technical ideas and experiences relating  
to implementation and application of programming languages. Original  
papers and experience reports are invited in all areas of programming  
languages. Major topics of interest include but are not limited to the  
following:
? Compiling Techniques,
? Domain-Specific Languages,
? Formal Semantics and Syntax,
? Garbage Collection,
? Language Design and Implementation,
? Languages for Modeling,
? Model-Driven Development and Model Transformation,
? New Programming Language Ideas and Concepts,
? New Programming Paradigms,
? Practical Experiences with Programming Languages,
? Program Analysis and Verification,
? Program Generation and Transformation,
? Programming Languages from All Paradigms (Agent-Oriented, Aspect- 
Oriented, Functional, Logic, Object-Oriented, etc.),
? Visual Programming Languages.

GUIDELINES FOR SUBMISSION
Authors are invited to contribute original papers in all areas of  
experimental computing and application development relevant to the  
theme of the track. This includes the following categories of  
submissions:
1) Original and unpublished research work,
2) Reports of innovative applications to the arts, sciences,  
engineering, and business areas,
3) Reports of successful technology transfer to new problem domains,
4) Reports of industrial experience and demos of new innovative systems.

All submissions will be peer reviewed. Papers will be selected based  
on their originality, timeliness, significance, relevance and clarity  
of presentation. Accepted papers will be published in the symposium  
proceedings. A set of selected papers, which did not get accepted as  
full papers, will be accepted as poster papers and will be published  
as extended 2-page abstracts in the symposium proceedings. After the  
conference, selected accepted papers will be invited to a special  
issue of a prominent journal.

The following submission guidelines must be strictly followed:
Use the webpage http://sac.cs.iupui.edu/SAC2009/ to submit your paper.  
Submissions must follow the template available athttp://www.acm.org/conferences/sac/sac2009/downloads09.htm 
. The author(s) name(s) and address(es) must NOT appear in the body of  
the paper, and self-reference should be in the third person. This is  
to facilitate blind review. Only the title should be shown at the  
first page without the author's information. The manuscript file  
format should be PDF. The total number of final pages without any  
extra page charge (80 USD per page) is 5 (the maximum number of pages  
is 8). An abstract (.txt format) including the title of the paper at  
the beginning (without having any author's information) should be also  
submitted. If you have any problem to submit your paper via web,  
please contact Jeff Allen or track organizers.

IMPORTANT DATES

August 16, 2008: Paper Submissions (strict deadline)
October 11, 2008: Author Notification
October 25, 2008: Camera-Ready Copy

The SAC 2009 Programming Language Track Program Committee Members  
(Tentative)

Suad Alagic, University of Southern Maine, USA
Paulo Borba, Federal University of Pernambuco, Brazil
Thomas Cleenewerck, Vrije Universiteit Brussel, Belgium
Sophia Drossopolou, Imperial College, England
Nigel Horspool, University of Victoria, Canada
Roberto Ierusalimschy, PUC-Rio, Brazil
Ralf Lammel, Universit?t Koblenz-Landau, Germany
Pablo Martinez Lopez, Universidad Nacional de Quilmes, Argentina
Soo-Mook Moon, Seoul National University, Korea
Terence Parr, University of San Francisco, USA
Enrico Ponteli, New Mexico State University, USA
Ganesan Ramalingam, Microsoft, India
Komondoor Raghavan, IBM, India
Martin Rinard, MIT, USA
Bostjan Slivnik, University of Ljubljana, Slovenia
Diomidis Spinellis, Athens University of Economics and Business, Greece
Tachio Terauchi, Tohoku University, Japan
Wuu Yang, National Chiao-Tung University, Taiwan

Track Chairs
Marjan Mernik, University of Maribor, Slovenia, marjan.mernik at uni-mb.si
Barrett Bryant, University of Alabama at Birmingham, USA, bryant at cis.uab.edu

From antlr at mirality.co.nz  Thu May 22 13:06:16 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 23 May 2008 08:06:16 +1200
Subject: [antlr-interest] C# Just starting with Parsers, Trees
In-Reply-To: <48358D60.2010007@gmail.com>
References: <48358D60.2010007@gmail.com>
Message-ID: <20080522200631.3BE4111ED1A@www.antlr.org>

At 03:12 23/05/2008, Doc In Nuke wrote:
 >One of the rule i added for exemple is the following one:
 >globalfuncdec    :    'function' ^ funcname funcbody ;
 >
 >so for every global function (declaration not starting with 
local)
 >i get a subtree with the funcname and funcbody block.
 >Now what would really be nice is a way to get the funcname as 1
 >token and not more.
 >funcname is the following rule:
 > funcname : NAME ('.' NAME)* (':' NAME)? ;

There's a few ways you can go here.  One is to convert funcname 
into a lexer rule (but this may introduce problems into your 
grammar, if it's not sufficiently unique).  Another is to keep it 
as separate tokens but put it into a subtree, like this:

funcname : n=NAME (n+='.' n+=NAME)* (n+=':' n+=NAME)? -> 
^(FUNCNAME $n+);

I'm not completely sure about this last option (I've never used it 
myself), but I think you can also construct an imaginary token 
around it after the fact.  Something like this:

globalfuncdec : 'function' funcname funcbody -> ^('function' 
FUNCNAME[$funcname.text] funcbody);

I think doing this causes it to lose the line/column information 
though; there is a way to preserve that but I'm not sure exactly 
how in this case.


From lgcraymer at yahoo.com  Thu May 22 13:11:02 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Thu, 22 May 2008 13:11:02 -0700 (PDT)
Subject: [antlr-interest] Idea: semantic grammar
Message-ID: <880775.34535.qm@web55910.mail.re3.yahoo.com>

Johannes, Adam--

Yes, Yggdrasil will let you do the analysis in a target-independent way.  Semantics, however, are application-dependent, not language-dependent.  If your application processes a language as a compiler, then it finds compiler errors.  On the other hand, if the application is a static analyzer, then you have a different set of errors--race condition detection or memory leaks, and so forth.

--Loring

----- Original Message ----
> From: Johannes Luber <JALuber at gmx.de>
> To: Adam Connelly <adam.rpconnelly at googlemail.com>; antlr-interest at antlr.org
> Sent: Thursday, May 22, 2008 9:09:53 AM
> Subject: Re: [antlr-interest] Idea: semantic grammar
> 
> > Hi,
> > I don't know if there is anything like this about at the moment, or even
> > if
> > it's a good idea.  What I've been thinking about is having a grammar that
> > defines the semantics of a language that parsers can then import.  It
> > would
> > basically be a list of the possible types of semantic error that could
> > occur, along with any information necessary to generate an error message,
> > and an action that creates the message.
> > 
> > >>From this a number of exception classes would be generated, along with a
> > MessageCreator that would generate error messages based on the actions
> > supplied.  Inside the parser grammar, when semantic predicates are
> > declared,
> > the type of error would be indicated, and from this the correct exception
> > would be thrown.  The parser would then ask its ErrorReporter to handle
> > the
> > error, which would use the MessageCreator to create the error message, and
> > would then add it to a list / print to the console / whatever.
> > 
> > >>From this, "catalogs" of pre-defined semantic errors could be provided
> > along
> > with the correct messages to display for these errors.  Obviously this
> > wouldn't define the actual semantics of the language (since you'd still
> > need
> > to implement this in actions), but it would simplify the error reporting
> > part since users would just import the correct semantics, then indicate
> > when
> > a certain semantic error should be thrown.
> > 
> > Any thoughts?
> > Adam
> 
> A nice idea but probably infeasible. There are too many semantic differences for 
> basically one thing - recently I read an article about "PHP sucks" and saw that 
> references were handled in 4.3, 4.4 and 5 differently. Granted, 4.3 was leaky 
> and 4.4 made it too complicated, so restricting options to sensible ones has a 
> benefit, but if you want to be able to parse even the most idiotic things, you 
> have to able to define arbitrary semantics. And then you can use the target 
> language itself. 
> 
> Maybe Yggdrasil of Loring Craymer can do that in target independent manner, but 
> it would be basically still Turing equivalent. At least you can do far more 
> things target independent in Yggdrasil than in ANTLR - just a shame, that he 
> didn't got around to finish it yet.
> 
> Johannes
> -- 
> Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
> Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer



      


From helink at sandia.gov  Thu May 22 13:45:11 2008
From: helink at sandia.gov (Link, Hamilton)
Date: Thu, 22 May 2008 14:45:11 -0600
Subject: [antlr-interest] 3.1b1 trouble with a CSharp2/AST example
Message-ID: <796FAD48C7891F43A943B67DF279C58921A46056A4@ES04SNLNT.srn.sandia.gov>

I'm having trouble producing an abstract syntax tree with ANTLR.  Lexing is working fine, parsing without any translation is working as far as I can tell as well.  Parsing using a grammer with rewrite rules in it dies.

Here's what I'm doing.

I scarfed the polynomial example from the web site and stuck it in a SimpleExpressions.g test file:

------

grammar SimpleExpressions;

options { language = CSharp2; output = AST; }

tokens { MULT; } // imaginary token

start: term ('+'^ term)*

;

term: INT ID -> ^(MULT["*"] INT ID)

| INT exp -> ^(MULT["*"] INT exp)

| exp

| INT

| ID

;

exp : ID '^'^ INT

;

ID : 'a'..'z'+ ;

INT : '0'..'9'+ ;

WS : (' '|'\t'|'\r'|'\n')+ {$channel = HIDDEN;} ;

------



I ran the 3.1b1 version of antlr on it, from the command line, and it produced my .cs files for the lexer and parser without any errors:



$ java -cp "./antlr-3.1b1.jar;./stringtemplate-3.1.jar;./antlr-runtime-3.1b1.ja
r;./antlr-2.7.7.jar;./gunit-1.0.2.jar" org.antlr.Tool "C:\Documents and Setting
s\helink\My Documents\Visual Studio 2008\Projects\Examples\ANTLRTest\TestParser
\SimpleExpressions.g"
ANTLR Parser Generator  Version 3.1b1 (May 20, 2008)  1989-2008

$



I built a sample C# application and it compiles just fine (using antlr.runtime, Antlr3.Runtime, Antlr3.Utility, and StringTemplate as references).  My main program.cs file is as follows, and it is built with the SimpleExpressionsLexer.cs and SimpleExpressionsParser.cs.



------

using System;

using System.Collections.Generic;

using System.Linq;

using System.Text;

using Antlr.Runtime;

using Antlr.Runtime.Tree;

using Antlr.Runtime.Debug;

using Antlr.Utility.Tree;

namespace TestParser

{

class Program

{

static void Main(string[] args)

{

string testString = "2x+3x^5";

SimpleExpressionsLexer lexer = new SimpleExpressionsLexer(new ANTLRStringStream(testString));

CommonTokenStream tokens = new CommonTokenStream(lexer);

SimpleExpressionsParser parser = new SimpleExpressionsParser(tokens);

SimpleExpressionsParser.start_return bar = parser.start();

CommonTree t = (CommonTree)bar.Tree;

String result = (t != null) ? t.ToStringTree() : null;

}

}

}

------



When I run it, I get a "RewriteEmptyStreamException was unhandled" error with the message "token INT".  Here is the exception detail:



Antlr.Runtime.Tree.RewriteEmptyStreamException was unhandled
  Message="token INT"
  Source="Antlr3.Runtime"
  StackTrace:
       at Antlr.Runtime.Tree.RewriteRuleElementStream`1._Next()
       at Antlr.Runtime.Tree.RewriteRuleTokenStream.NextNode()
       at SimpleExpressionsParser.term() in C:\Documents and Settings\helink\My Documents\Visual Studio 2008\Projects\Examples\ANTLRTest\TestParser\SimpleExpressionsParser.cs:line 305
       at SimpleExpressionsParser.start() in C:\Documents and Settings\helink\My Documents\Visual Studio 2008\Projects\Examples\ANTLRTest\TestParser\SimpleExpressionsParser.cs:line 104
       at TestParser.Program.Main(String[] args) in C:\Documents and Settings\helink\My Documents\Visual Studio 2008\Projects\Examples\ANTLRTest\TestParser\Program.cs:line 20
       at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException:

in other words it's dying in term() as called by start() as called by my main program, i.e. it's dying trying to parse.  The code around the error (at the break point) in Visual Studio is....



// 10:15: -> ^( MULT[\"*\"] INT ID )

{

// C:\\Documents and Settings\\helink\\My Documents\\Visual Studio 2008\\Projects\\Examples\\ANTLRTest\\TestParser\\SimpleExpressions.g:10:18: ^( MULT[\"*\"] INT ID )

{

object root_1 = (object)adaptor.GetNilNode();

root_1 = (object)adaptor.BecomeRoot((object)adaptor.Create(MULT, "*"), root_1);

adaptor.AddChild(root_1, stream_INT.NextNode());         // <--- It's dying here, in SimpleExpressionsParser.cs

adaptor.AddChild(root_1, stream_ID.NextNode());

adaptor.AddChild(root_0, root_1);

}



If I get rid of the rewrite rules or whatever you call them, the -> and ^ etc. stuff, and regenerate and recompile, it runs fine but of course it doesn't produce a useful AST, it just produces t==null.



Any help getting this simple example to run would be greatly appreciated.  At the moment however I'm suspecting either a bug in the example or in the CSharp2 target, as there's nothing of my own making in the picture (even the main program is cribbed from the web site example code).



My immediate goal is to get parse trees and ASTs generated from fairly simple expression grammars.  My ultimate goal is to build heterogenous node trees and write code to evaluate them, i.e. my ultimate goal is to make a fairly simple expression interpreter.  I think if I can get the polynomial example working I'll be a great deal closer to that goal.



thanks,

hamilton






-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080522/68a2672c/attachment.html 

From JALuber at gmx.de  Thu May 22 14:53:24 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Thu, 22 May 2008 23:53:24 +0200
Subject: [antlr-interest] 3.1b1 trouble with a CSharp2/AST example
In-Reply-To: <796FAD48C7891F43A943B67DF279C58921A46056A4@ES04SNLNT.srn.sandia.gov>
References: <796FAD48C7891F43A943B67DF279C58921A46056A4@ES04SNLNT.srn.sandia.gov>
Message-ID: <20080522215324.178950@gmx.net>

Hi!

My apologies: Right now, I do not have access to a machine with the required development tools, so I can't go bug hunting. Also I don't know how long that state will continue. :( I will add the report to JIRA, so I don't forget it. Maybe you or someone else hunt the bug down?

Johannes

> I'm having trouble producing an abstract syntax tree with ANTLR.  Lexing
> is working fine, parsing without any translation is working as far as I can
> tell as well.  Parsing using a grammer with rewrite rules in it dies.
> 
> Here's what I'm doing.
> 
> I scarfed the polynomial example from the web site and stuck it in a
> SimpleExpressions.g test file:
> 
> ------
> 
> grammar SimpleExpressions;
> 
> options { language = CSharp2; output = AST; }
> 
> tokens { MULT; } // imaginary token
> 
> start: term ('+'^ term)*
> 
> ;
> 
> term: INT ID -> ^(MULT["*"] INT ID)
> 
> | INT exp -> ^(MULT["*"] INT exp)
> 
> | exp
> 
> | INT
> 
> | ID
> 
> ;
> 
> exp : ID '^'^ INT
> 
> ;
> 
> ID : 'a'..'z'+ ;
> 
> INT : '0'..'9'+ ;
> 
> WS : (' '|'\t'|'\r'|'\n')+ {$channel = HIDDEN;} ;
> 
> ------
> 
> 
> 
> I ran the 3.1b1 version of antlr on it, from the command line, and it
> produced my .cs files for the lexer and parser without any errors:
> 
> 
> 
> $ java -cp
> "./antlr-3.1b1.jar;./stringtemplate-3.1.jar;./antlr-runtime-3.1b1.ja
> r;./antlr-2.7.7.jar;./gunit-1.0.2.jar" org.antlr.Tool "C:\Documents and
> Setting
> s\helink\My Documents\Visual Studio
> 2008\Projects\Examples\ANTLRTest\TestParser
> \SimpleExpressions.g"
> ANTLR Parser Generator  Version 3.1b1 (May 20, 2008)  1989-2008
> 
> $
> 
> 
> 
> I built a sample C# application and it compiles just fine (using
> antlr.runtime, Antlr3.Runtime, Antlr3.Utility, and StringTemplate as references). 
> My main program.cs file is as follows, and it is built with the
> SimpleExpressionsLexer.cs and SimpleExpressionsParser.cs.
> 
> 
> 
> ------
> 
> using System;
> 
> using System.Collections.Generic;
> 
> using System.Linq;
> 
> using System.Text;
> 
> using Antlr.Runtime;
> 
> using Antlr.Runtime.Tree;
> 
> using Antlr.Runtime.Debug;
> 
> using Antlr.Utility.Tree;
> 
> namespace TestParser
> 
> {
> 
> class Program
> 
> {
> 
> static void Main(string[] args)
> 
> {
> 
> string testString = "2x+3x^5";
> 
> SimpleExpressionsLexer lexer = new SimpleExpressionsLexer(new
> ANTLRStringStream(testString));
> 
> CommonTokenStream tokens = new CommonTokenStream(lexer);
> 
> SimpleExpressionsParser parser = new SimpleExpressionsParser(tokens);
> 
> SimpleExpressionsParser.start_return bar = parser.start();
> 
> CommonTree t = (CommonTree)bar.Tree;
> 
> String result = (t != null) ? t.ToStringTree() : null;
> 
> }
> 
> }
> 
> }
> 
> ------
> 
> 
> 
> When I run it, I get a "RewriteEmptyStreamException was unhandled" error
> with the message "token INT".  Here is the exception detail:
> 
> 
> 
> Antlr.Runtime.Tree.RewriteEmptyStreamException was unhandled
>   Message="token INT"
>   Source="Antlr3.Runtime"
>   StackTrace:
>        at Antlr.Runtime.Tree.RewriteRuleElementStream`1._Next()
>        at Antlr.Runtime.Tree.RewriteRuleTokenStream.NextNode()
>        at SimpleExpressionsParser.term() in C:\Documents and
> Settings\helink\My Documents\Visual Studio
> 2008\Projects\Examples\ANTLRTest\TestParser\SimpleExpressionsParser.cs:line 305
>        at SimpleExpressionsParser.start() in C:\Documents and
> Settings\helink\My Documents\Visual Studio
> 2008\Projects\Examples\ANTLRTest\TestParser\SimpleExpressionsParser.cs:line 104
>        at TestParser.Program.Main(String[] args) in C:\Documents and
> Settings\helink\My Documents\Visual Studio
> 2008\Projects\Examples\ANTLRTest\TestParser\Program.cs:line 20
>        at System.AppDomain._nExecuteAssembly(Assembly assembly, String[]
> args)
>        at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence
> assemblySecurity, String[] args)
>        at
> Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
>        at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
>        at System.Threading.ExecutionContext.Run(ExecutionContext
> executionContext, ContextCallback callback, Object state)
>        at System.Threading.ThreadHelper.ThreadStart()
>   InnerException:
> 
> in other words it's dying in term() as called by start() as called by my
> main program, i.e. it's dying trying to parse.  The code around the error
> (at the break point) in Visual Studio is....
> 
> 
> 
> // 10:15: -> ^( MULT[\"*\"] INT ID )
> 
> {
> 
> // C:\\Documents and Settings\\helink\\My Documents\\Visual Studio
> 2008\\Projects\\Examples\\ANTLRTest\\TestParser\\SimpleExpressions.g:10:18: ^(
> MULT[\"*\"] INT ID )
> 
> {
> 
> object root_1 = (object)adaptor.GetNilNode();
> 
> root_1 = (object)adaptor.BecomeRoot((object)adaptor.Create(MULT, "*"),
> root_1);
> 
> adaptor.AddChild(root_1, stream_INT.NextNode());         // <--- It's
> dying here, in SimpleExpressionsParser.cs
> 
> adaptor.AddChild(root_1, stream_ID.NextNode());
> 
> adaptor.AddChild(root_0, root_1);
> 
> }
> 
> 
> 
> If I get rid of the rewrite rules or whatever you call them, the -> and ^
> etc. stuff, and regenerate and recompile, it runs fine but of course it
> doesn't produce a useful AST, it just produces t==null.
> 
> 
> 
> Any help getting this simple example to run would be greatly appreciated. 
> At the moment however I'm suspecting either a bug in the example or in the
> CSharp2 target, as there's nothing of my own making in the picture (even
> the main program is cribbed from the web site example code).
> 
> 
> 
> My immediate goal is to get parse trees and ASTs generated from fairly
> simple expression grammars.  My ultimate goal is to build heterogenous node
> trees and write code to evaluate them, i.e. my ultimate goal is to make a
> fairly simple expression interpreter.  I think if I can get the polynomial
> example working I'll be a great deal closer to that goal.
> 
> 
> 
> thanks,
> 
> hamilton
> 
> 
> 
> 
> 
> 

-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx

From helink at sandia.gov  Thu May 22 15:04:49 2008
From: helink at sandia.gov (Hamilton Link)
Date: Thu, 22 May 2008 16:04:49 -0600
Subject: [antlr-interest] 3.1b1 trouble with a CSharp2/AST example
In-Reply-To: <20080522215324.178950@gmx.net>
References: <796FAD48C7891F43A943B67DF279C58921A46056A4@ES04SNLNT.srn.sandia.gov>
	<20080522215324.178950@gmx.net>
Message-ID: <4835EE01.4000609@sandia.gov>

If you have any suggestions of where to look for the problem (and any 
suggestions on what the problem might be) I am happy to follow up on 
them, I need to get this working.

Oh, um... I do have ANT 1.7 and JDK 1.6 installed but when I tried to 
"ant build" the 3.1b1 distribution I got a mess of errors.  I didn't 
look very closely at them, I just re-unpacked the distro since mostly I 
care about using antlr rather than building it.  If I start to track 
down this one bug I may have to start messing with other build problems 
and Java isn't my strong point (thus my use of the C# targets to begin 
with), but c'est la vie.  If you're interested in _those_ error logs I 
can post them.

I will also try this with the CSharp target (vs. CSharp2)... yep, same 
error and raised in the same place.

thanks,
hamilton

Johannes Luber wrote:
> Hi!
>
> My apologies: Right now, I do not have access to a machine with the required development tools, so I can't go bug hunting. Also I don't know how long that state will continue. :( I will add the report to JIRA, so I don't forget it. Maybe you or someone else hunt the bug down?
>
> Johannes
>
>   
>> I'm having trouble producing an abstract syntax tree with ANTLR.  Lexing
>> is working fine, parsing without any translation is working as far as I can
>> tell as well.  Parsing using a grammer with rewrite rules in it dies.
>>
>> Here's what I'm doing.
>>
>> I scarfed the polynomial example from the web site and stuck it in a
>> SimpleExpressions.g test file:
>>
>> ------
>>
>> grammar SimpleExpressions;
>>
>> options { language = CSharp2; output = AST; }
>>
>> tokens { MULT; } // imaginary token
>>
>> start: term ('+'^ term)*
>>
>> ;
>>
>> term: INT ID -> ^(MULT["*"] INT ID)
>>
>> | INT exp -> ^(MULT["*"] INT exp)
>>
>> | exp
>>
>> | INT
>>
>> | ID
>>
>> ;
>>
>> exp : ID '^'^ INT
>>
>> ;
>>
>> ID : 'a'..'z'+ ;
>>
>> INT : '0'..'9'+ ;
>>
>> WS : (' '|'\t'|'\r'|'\n')+ {$channel = HIDDEN;} ;
>>
>> ------
>>
>>
>>
>> I ran the 3.1b1 version of antlr on it, from the command line, and it
>> produced my .cs files for the lexer and parser without any errors:
>>
>>
>>
>> $ java -cp
>> "./antlr-3.1b1.jar;./stringtemplate-3.1.jar;./antlr-runtime-3.1b1.ja
>> r;./antlr-2.7.7.jar;./gunit-1.0.2.jar" org.antlr.Tool "C:\Documents and
>> Setting
>> s\helink\My Documents\Visual Studio
>> 2008\Projects\Examples\ANTLRTest\TestParser
>> \SimpleExpressions.g"
>> ANTLR Parser Generator  Version 3.1b1 (May 20, 2008)  1989-2008
>>
>> $
>>
>>
>>
>> I built a sample C# application and it compiles just fine (using
>> antlr.runtime, Antlr3.Runtime, Antlr3.Utility, and StringTemplate as references).
>> My main program.cs file is as follows, and it is built with the
>> SimpleExpressionsLexer.cs and SimpleExpressionsParser.cs.
>>
>>
>>
>> ------
>>
>> using System;
>>
>> using System.Collections.Generic;
>>
>> using System.Linq;
>>
>> using System.Text;
>>
>> using Antlr.Runtime;
>>
>> using Antlr.Runtime.Tree;
>>
>> using Antlr.Runtime.Debug;
>>
>> using Antlr.Utility.Tree;
>>
>> namespace TestParser
>>
>> {
>>
>> class Program
>>
>> {
>>
>> static void Main(string[] args)
>>
>> {
>>
>> string testString = "2x+3x^5";
>>
>> SimpleExpressionsLexer lexer = new SimpleExpressionsLexer(new
>> ANTLRStringStream(testString));
>>
>> CommonTokenStream tokens = new CommonTokenStream(lexer);
>>
>> SimpleExpressionsParser parser = new SimpleExpressionsParser(tokens);
>>
>> SimpleExpressionsParser.start_return bar = parser.start();
>>
>> CommonTree t = (CommonTree)bar.Tree;
>>
>> String result = (t != null) ? t.ToStringTree() : null;
>>
>> }
>>
>> }
>>
>> }
>>
>> ------
>>
>>
>>
>> When I run it, I get a "RewriteEmptyStreamException was unhandled" error
>> with the message "token INT".  Here is the exception detail:
>>
>>
>>
>> Antlr.Runtime.Tree.RewriteEmptyStreamException was unhandled
>>   Message="token INT"
>>   Source="Antlr3.Runtime"
>>   StackTrace:
>>        at Antlr.Runtime.Tree.RewriteRuleElementStream`1._Next()
>>        at Antlr.Runtime.Tree.RewriteRuleTokenStream.NextNode()
>>        at SimpleExpressionsParser.term() in C:\Documents and
>> Settings\helink\My Documents\Visual Studio
>> 2008\Projects\Examples\ANTLRTest\TestParser\SimpleExpressionsParser.cs:line 305
>>        at SimpleExpressionsParser.start() in C:\Documents and
>> Settings\helink\My Documents\Visual Studio
>> 2008\Projects\Examples\ANTLRTest\TestParser\SimpleExpressionsParser.cs:line 104
>>        at TestParser.Program.Main(String[] args) in C:\Documents and
>> Settings\helink\My Documents\Visual Studio
>> 2008\Projects\Examples\ANTLRTest\TestParser\Program.cs:line 20
>>        at System.AppDomain._nExecuteAssembly(Assembly assembly, String[]
>> args)
>>        at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence
>> assemblySecurity, String[] args)
>>        at
>> Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
>>        at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
>>        at System.Threading.ExecutionContext.Run(ExecutionContext
>> executionContext, ContextCallback callback, Object state)
>>        at System.Threading.ThreadHelper.ThreadStart()
>>   InnerException:
>>
>> in other words it's dying in term() as called by start() as called by my
>> main program, i.e. it's dying trying to parse.  The code around the error
>> (at the break point) in Visual Studio is....
>>
>>
>>
>> // 10:15: -> ^( MULT[\"*\"] INT ID )
>>
>> {
>>
>> // C:\\Documents and Settings\\helink\\My Documents\\Visual Studio
>> 2008\\Projects\\Examples\\ANTLRTest\\TestParser\\SimpleExpressions.g:10:18: ^(
>> MULT[\"*\"] INT ID )
>>
>> {
>>
>> object root_1 = (object)adaptor.GetNilNode();
>>
>> root_1 = (object)adaptor.BecomeRoot((object)adaptor.Create(MULT, "*"),
>> root_1);
>>
>> adaptor.AddChild(root_1, stream_INT.NextNode());         // <--- It's
>> dying here, in SimpleExpressionsParser.cs
>>
>> adaptor.AddChild(root_1, stream_ID.NextNode());
>>
>> adaptor.AddChild(root_0, root_1);
>>
>> }
>>
>>
>>
>> If I get rid of the rewrite rules or whatever you call them, the -> and ^
>> etc. stuff, and regenerate and recompile, it runs fine but of course it
>> doesn't produce a useful AST, it just produces t==null.
>>
>>
>>
>> Any help getting this simple example to run would be greatly appreciated.
>> At the moment however I'm suspecting either a bug in the example or in the
>> CSharp2 target, as there's nothing of my own making in the picture (even
>> the main program is cribbed from the web site example code).
>>
>>
>>
>> My immediate goal is to get parse trees and ASTs generated from fairly
>> simple expression grammars.  My ultimate goal is to build heterogenous node
>> trees and write code to evaluate them, i.e. my ultimate goal is to make a
>> fairly simple expression interpreter.  I think if I can get the polynomial
>> example working I'll be a great deal closer to that goal.
>>
>>
>>
>> thanks,
>>
>> hamilton
>>
>>
>>
>>
>>
>>
>>     
>
> --
> GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
> Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx
>
>
>   



From helink at sandia.gov  Thu May 22 19:48:16 2008
From: helink at sandia.gov (Hamilton Link)
Date: Thu, 22 May 2008 20:48:16 -0600
Subject: [antlr-interest] building antlr 3.1b1
In-Reply-To: <4835EE01.4000609@sandia.gov>
References: <796FAD48C7891F43A943B67DF279C58921A46056A4@ES04SNLNT.srn.sandia.gov>
	<20080522215324.178950@gmx.net> <4835EE01.4000609@sandia.gov>
Message-ID: <48363070.2050108@sandia.gov>

Hamilton Link wrote:
> I do have ANT 1.7 and JDK 1.6 installed but when I tried to
> "ant build" the 3.1b1 distribution I got a mess of errors.

OK, I can build 3.1b1 from the distro now.  For those of you who are 
Java-illiterate like me, let me briefly clarify a few things:

- In general when compiling java stuff you want to pass javac a 
-classpath argument enumerating the jar files of interest, don't set a 
CLASSPATH variable for your entire shell (usually).

- If you're building it under Mac OS X or *nix, your classpath separator 
character is ':' and under windows it is ';' --- and annoyingly, using a 
';' under OS X doesn't error out, it just... ignores the classpath 
you're providing, so you get "package so.and.so does not exist" errors 
for stuff you thought you pointed to.

- Less obviously, to build antlr 3.1b1, you need one jar beyond what
http://www.antlr.org/wiki/pages/viewpage.action?pageId=732
says (and note the comment added one beyond what the original page 
had).  Your classpath must include the following four jar files:

${ANTLRLIB}/antlr-2.7.7.jar
${ANTLRLIB}/stringtemplate-3.1.jar
${ANTLRLIB}/junit-4.4.jar
${ANTLRLIB}/antlr-runtime-3.1b1.jar

- And no, junit-4.4.jar is not provided in the distribution, you need to 
get it from sourceforge.  gunit's not the same thing (as it turns out).

- And there's no such thing as org/antlr/*/*/*.java in the distribution 
(presumably because we're provided the jar files instead), so I am 
setting an ANTLR_CP variable to the above list and compiling with the 
following command within antlr-3.1b1/src:

javac -verbose -classpath ${ANTLR_CP} -d . org/antlr/Tool.java 
org/antlr/*/*.java


Now that I can do this much, we'll see if I can rebuild targets, .net 
runtime assemblies, or the jar files provided in antlr-3.1b1/lib.  I am 
guessing not, as there appears to be code to these jar files that 
doesn't come with the snapshots.  Perhaps someone in the know can 
clarify what having the snapshots (vs. the exhaustive sources) does and 
does not let us build from scratch?

I think, also, that it would be friendly if someone could go and update 
the "how to rebuild antlr" web page at 
http://www.antlr.org/wiki/pages/viewpage.action?pageId=732  ... it's not 
hugely out of date but it is a little bit out of date, and it would be 
nice if that page made it clear what you are rebuilding and what you 
can't rebuild without additional code not provided in the snapshots.

thanks,
h



From parrt at cs.usfca.edu  Thu May 22 20:16:17 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 22 May 2008 20:16:17 -0700
Subject: [antlr-interest] building antlr 3.1b1
In-Reply-To: <48363070.2050108@sandia.gov>
References: <796FAD48C7891F43A943B67DF279C58921A46056A4@ES04SNLNT.srn.sandia.gov>
	<20080522215324.178950@gmx.net> <4835EE01.4000609@sandia.gov>
	<48363070.2050108@sandia.gov>
Message-ID: <5829903E-C1B7-448E-9642-1C23142450BE@cs.usfca.edu>

Hi Hamilton, it would be awesome if you signed up on the wiki and  
updated that page!
THanks,
Ter
On May 22, 2008, at 7:48 PM, Hamilton Link wrote:

> Hamilton Link wrote:
>> I do have ANT 1.7 and JDK 1.6 installed but when I tried to
>> "ant build" the 3.1b1 distribution I got a mess of errors.
>
> OK, I can build 3.1b1 from the distro now.  For those of you who are  
> Java-illiterate like me, let me briefly clarify a few things:
>
> - In general when compiling java stuff you want to pass javac a - 
> classpath argument enumerating the jar files of interest, don't set  
> a CLASSPATH variable for your entire shell (usually).
>
> - If you're building it under Mac OS X or *nix, your classpath  
> separator character is ':' and under windows it is ';' --- and  
> annoyingly, using a ';' under OS X doesn't error out, it just...  
> ignores the classpath you're providing, so you get "package  
> so.and.so does not exist" errors for stuff you thought you pointed to.
>
> - Less obviously, to build antlr 3.1b1, you need one jar beyond what
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=732
> says (and note the comment added one beyond what the original page  
> had).  Your classpath must include the following four jar files:
>
> ${ANTLRLIB}/antlr-2.7.7.jar
> ${ANTLRLIB}/stringtemplate-3.1.jar
> ${ANTLRLIB}/junit-4.4.jar
> ${ANTLRLIB}/antlr-runtime-3.1b1.jar
>
> - And no, junit-4.4.jar is not provided in the distribution, you  
> need to get it from sourceforge.  gunit's not the same thing (as it  
> turns out).
>
> - And there's no such thing as org/antlr/*/*/*.java in the  
> distribution (presumably because we're provided the jar files  
> instead), so I am setting an ANTLR_CP variable to the above list and  
> compiling with the following command within antlr-3.1b1/src:
>
> javac -verbose -classpath ${ANTLR_CP} -d . org/antlr/Tool.java org/ 
> antlr/*/*.java
>
>
> Now that I can do this much, we'll see if I can rebuild  
> targets, .net runtime assemblies, or the jar files provided in  
> antlr-3.1b1/lib.  I am guessing not, as there appears to be code to  
> these jar files that doesn't come with the snapshots.  Perhaps  
> someone in the know can clarify what having the snapshots (vs. the  
> exhaustive sources) does and does not let us build from scratch?
>
> I think, also, that it would be friendly if someone could go and  
> update the "how to rebuild antlr" web page at http://www.antlr.org/wiki/pages/viewpage.action?pageId=732 
>   ... it's not hugely out of date but it is a little bit out of  
> date, and it would be nice if that page made it clear what you are  
> rebuilding and what you can't rebuild without additional code not  
> provided in the snapshots.
>
> thanks,
> h
>
>


From brent.yates at gmail.com  Thu May 22 20:38:48 2008
From: brent.yates at gmail.com (Brent Yates)
Date: Thu, 22 May 2008 23:38:48 -0400
Subject: [antlr-interest] DFA problem
Message-ID: <6edc6c380805222038u77b39ec5h86bc192f653f156d@mail.gmail.com>

I have run across a problem when building gUnit tests for my grammar using
the 3.1b1 release.  The code (java) that ANTLR generates when trying to
predict alternatives changes from being LA() based to DFA based from compile
to compile when I make changes to (seemingly) unrelated sections of the
grammar.  In general, I don't care but in this case the DFA produced fires a
NoViableAltException when the prediction fails (which is correct), but the
calling rule function does not catch the exception and therefore the rule
fails even though it is valid for the predtion to fail (the alt is
optional).

For an example, see the rule below.  The section starting on the line after
the : is optional (see the ending ')?' ).  If I feed in a single
UNSIGNED_NUMGER token followed by a EOF token to the rule, the prediction
DFA fails with a NoViableAltException while the LA() predication code fails,
but the integral number rule returns ok.  The NoViableAltException is not
caught by the calling rule code.

integral_number
    :    (s=UNSIGNED_NUMBER -> ^(TOK_NUM_RAW $s))
        (
             (HEX_BASE)     => (HEX_BASE     post_base_number    ->
^(TOK_NUM_HEX ^(TOK_NUM_SIZE $s) post_base_number))
        |    (BINARY_BASE)  => (BINARY_BASE  post_base_number    ->
^(TOK_NUM_BIN ^(TOK_NUM_SIZE $s) post_base_number))
        |    (OCTAL_BASE)   => (OCTAL_BASE   post_base_number    ->
^(TOK_NUM_OCT ^(TOK_NUM_SIZE $s) post_base_number))
        |    (DECIMAL_BASE) => (DECIMAL_BASE post_base_number    ->
^(TOK_NUM_DEC ^(TOK_NUM_SIZE $s) post_base_number))
        )?
    |    HEX_BASE        post_base_number    -> ^(TOK_NUM_HEX
post_base_number)
    |    BINARY_BASE     post_base_number    -> ^(TOK_NUM_BIN
post_base_number)
    |    OCTAL_BASE      post_base_number    -> ^(TOK_NUM_OCT
post_base_number)
    |    DECIMAL_BASE    post_base_number    -> ^(TOK_NUM_DEC
post_base_number)
    ;


So my questions are:

1) What is the mechanism used by ANTLR to decide when to use a DFA versus
expilcit LA() checks?
2) Is it possible to force the use of LA() checks for prediction?
3) If the prediction DFA fails due to NoViableAltException but the predicted
ALT is optional, should the calling rule catch the exception?

Regards,

Brent Yates
brent.yates at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080522/5e888376/attachment.html 

From matthieu at offthelip.org  Thu May 22 21:42:08 2008
From: matthieu at offthelip.org (Matthieu Riou)
Date: Thu, 22 May 2008 21:42:08 -0700
Subject: [antlr-interest] Antlr ActionScript code generation target
Message-ID: <fbdc6a970805222142g53a2b752i91fef21d5e49f6db@mail.gmail.com>

Hi,

I'm currently trying to test the ActionScript code generation for Antlr with
a simple grammar. However I'm not sure which ActionScript runtime I can use.
Ideally I'd like to use Tamarin with the Flex ASC compiler, is that
possible? Currently I'm having issues when using -import with the runtime
swc. Which environment people developing the ActionScript are working with?

Thanks!
Matthieu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080522/b7aee281/attachment-0001.html 

From JALuber at gmx.de  Fri May 23 05:04:10 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Fri, 23 May 2008 14:04:10 +0200
Subject: [antlr-interest] building antlr 3.1b1
In-Reply-To: <48363070.2050108@sandia.gov>
References: <796FAD48C7891F43A943B67DF279C58921A46056A4@ES04SNLNT.srn.sandia.gov>
	<20080522215324.178950@gmx.net> <4835EE01.4000609@sandia.gov>
	<48363070.2050108@sandia.gov>
Message-ID: <20080523120410.107320@gmx.net>

> Hamilton Link wrote:
> > I do have ANT 1.7 and JDK 1.6 installed but when I tried to
> > "ant build" the 3.1b1 distribution I got a mess of errors.
> 
> OK, I can build 3.1b1 from the distro now.  For those of you who are 
> Java-illiterate like me, let me briefly clarify a few things:
> 
> - In general when compiling java stuff you want to pass javac a 
> -classpath argument enumerating the jar files of interest, don't set a 
> CLASSPATH variable for your entire shell (usually).

Another possibility is to put the jars into the lib directory of the root of the decompressed distribution. No handling with CLASSPATH is then necessary.

Johannes
> 
> - If you're building it under Mac OS X or *nix, your classpath separator 
> character is ':' and under windows it is ';' --- and annoyingly, using a 
> ';' under OS X doesn't error out, it just... ignores the classpath 
> you're providing, so you get "package so.and.so does not exist" errors 
> for stuff you thought you pointed to.
> 
> - Less obviously, to build antlr 3.1b1, you need one jar beyond what
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=732
> says (and note the comment added one beyond what the original page 
> had).  Your classpath must include the following four jar files:
> 
> ${ANTLRLIB}/antlr-2.7.7.jar
> ${ANTLRLIB}/stringtemplate-3.1.jar
> ${ANTLRLIB}/junit-4.4.jar
> ${ANTLRLIB}/antlr-runtime-3.1b1.jar
> 
> - And no, junit-4.4.jar is not provided in the distribution, you need to 
> get it from sourceforge.  gunit's not the same thing (as it turns out).
> 
> - And there's no such thing as org/antlr/*/*/*.java in the distribution 
> (presumably because we're provided the jar files instead), so I am 
> setting an ANTLR_CP variable to the above list and compiling with the 
> following command within antlr-3.1b1/src:
> 
> javac -verbose -classpath ${ANTLR_CP} -d . org/antlr/Tool.java 
> org/antlr/*/*.java
> 
> 
> Now that I can do this much, we'll see if I can rebuild targets, .net 
> runtime assemblies, or the jar files provided in antlr-3.1b1/lib.  I am 
> guessing not, as there appears to be code to these jar files that 
> doesn't come with the snapshots.  Perhaps someone in the know can 
> clarify what having the snapshots (vs. the exhaustive sources) does and 
> does not let us build from scratch?
> 
> I think, also, that it would be friendly if someone could go and update 
> the "how to rebuild antlr" web page at 
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=732  ... it's not 
> hugely out of date but it is a little bit out of date, and it would be 
> nice if that page made it clear what you are rebuilding and what you 
> can't rebuild without additional code not provided in the snapshots.
> 
> thanks,
> h
> 

-- 
Super-Acktion nur in der GMX Spieleflat: 10 Tage f?r 1 Euro.
?ber 180 Spiele downloaden und spiele: http://flat.games.gmx.de

From JALuber at gmx.de  Fri May 23 05:20:56 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Fri, 23 May 2008 14:20:56 +0200
Subject: [antlr-interest] 3.1b1 trouble with a CSharp2/AST example
In-Reply-To: <4835EE01.4000609@sandia.gov>
References: <796FAD48C7891F43A943B67DF279C58921A46056A4@ES04SNLNT.srn.sandia.gov>
	<20080522215324.178950@gmx.net> <4835EE01.4000609@sandia.gov>
Message-ID: <20080523122056.188240@gmx.net>

> If you have any suggestions of where to look for the problem (and any 
> suggestions on what the problem might be) I am happy to follow up on 
> them, I need to get this working.

The first thing I'd check, if the Java code generated by the same grammar has the same defect. You may have to change actions, too, but if the cause isn't your own code, the content of them is ignorable. Indeed, it would be a good idea to remove all actions in C# variant first and see if a clean version still fails.

After that, if you determine that Java doesn't work, send Ter the full grammar, so he can fix the templates (maybe even the C# variants, otherwise you have to do it yourself). If the Java code works, then compare the generated code for differences. It may be possible, that I lost a line somewhere when syncing with Java. If you find a difference beyond syntactic Java/C# changes, then change the C# template file at the appropriate place(s) and recreate ANTLR, regenerate the files and test them. Usually that does work.

If you don't find a difference in the output files, then the mistake is in the runtime somewhere. Look for the crash, determine why at that place the code blew up and track the wrong state back to its origin. Then compare all Java runtime files touched by the wrong state from the beginning with the C# equivalents. Somewhere there has to be the difference.

I hope that should be enough advice to deal with the problem. :)
> 
> Oh, um... I do have ANT 1.7 and JDK 1.6 installed but when I tried to 
> "ant build" the 3.1b1 distribution I got a mess of errors.  I didn't 
> look very closely at them, I just re-unpacked the distro since mostly I 
> care about using antlr rather than building it.  If I start to track 
> down this one bug I may have to start messing with other build problems 
> and Java isn't my strong point (thus my use of the C# targets to begin 
> with), but c'est la vie.  If you're interested in _those_ error logs I 
> can post them.
> 
> I will also try this with the CSharp target (vs. CSharp2)... yep, same 
> error and raised in the same place.

CSharp and CSharp2 differ currently at only four tested places, so the templates don't have to be checked both, unless you want to test the .NET 1.1.-only parts of the runtime.

Johannes
> 
> thanks,
> hamilton
> 
> Johannes Luber wrote:
> > Hi!
> >
> > My apologies: Right now, I do not have access to a machine with the
> required development tools, so I can't go bug hunting. Also I don't know how
> long that state will continue. :( I will add the report to JIRA, so I don't
> forget it. Maybe you or someone else hunt the bug down?
> >
> > Johannes
> >
> >   
> >> I'm having trouble producing an abstract syntax tree with ANTLR. 
> Lexing
> >> is working fine, parsing without any translation is working as far as I
> can
> >> tell as well.  Parsing using a grammer with rewrite rules in it dies.
> >>
> >> Here's what I'm doing.
> >>
> >> I scarfed the polynomial example from the web site and stuck it in a
> >> SimpleExpressions.g test file:
> >>
> >> ------
> >>
> >> grammar SimpleExpressions;
> >>
> >> options { language = CSharp2; output = AST; }
> >>
> >> tokens { MULT; } // imaginary token
> >>
> >> start: term ('+'^ term)*
> >>
> >> ;
> >>
> >> term: INT ID -> ^(MULT["*"] INT ID)
> >>
> >> | INT exp -> ^(MULT["*"] INT exp)
> >>
> >> | exp
> >>
> >> | INT
> >>
> >> | ID
> >>
> >> ;
> >>
> >> exp : ID '^'^ INT
> >>
> >> ;
> >>
> >> ID : 'a'..'z'+ ;
> >>
> >> INT : '0'..'9'+ ;
> >>
> >> WS : (' '|'\t'|'\r'|'\n')+ {$channel = HIDDEN;} ;
> >>
> >> ------
> >>
> >>
> >>
> >> I ran the 3.1b1 version of antlr on it, from the command line, and it
> >> produced my .cs files for the lexer and parser without any errors:
> >>
> >>
> >>
> >> $ java -cp
> >> "./antlr-3.1b1.jar;./stringtemplate-3.1.jar;./antlr-runtime-3.1b1.ja
> >> r;./antlr-2.7.7.jar;./gunit-1.0.2.jar" org.antlr.Tool "C:\Documents and
> >> Setting
> >> s\helink\My Documents\Visual Studio
> >> 2008\Projects\Examples\ANTLRTest\TestParser
> >> \SimpleExpressions.g"
> >> ANTLR Parser Generator  Version 3.1b1 (May 20, 2008)  1989-2008
> >>
> >> $
> >>
> >>
> >>
> >> I built a sample C# application and it compiles just fine (using
> >> antlr.runtime, Antlr3.Runtime, Antlr3.Utility, and StringTemplate as
> references).
> >> My main program.cs file is as follows, and it is built with the
> >> SimpleExpressionsLexer.cs and SimpleExpressionsParser.cs.
> >>
> >>
> >>
> >> ------
> >>
> >> using System;
> >>
> >> using System.Collections.Generic;
> >>
> >> using System.Linq;
> >>
> >> using System.Text;
> >>
> >> using Antlr.Runtime;
> >>
> >> using Antlr.Runtime.Tree;
> >>
> >> using Antlr.Runtime.Debug;
> >>
> >> using Antlr.Utility.Tree;
> >>
> >> namespace TestParser
> >>
> >> {
> >>
> >> class Program
> >>
> >> {
> >>
> >> static void Main(string[] args)
> >>
> >> {
> >>
> >> string testString = "2x+3x^5";
> >>
> >> SimpleExpressionsLexer lexer = new SimpleExpressionsLexer(new
> >> ANTLRStringStream(testString));
> >>
> >> CommonTokenStream tokens = new CommonTokenStream(lexer);
> >>
> >> SimpleExpressionsParser parser = new SimpleExpressionsParser(tokens);
> >>
> >> SimpleExpressionsParser.start_return bar = parser.start();
> >>
> >> CommonTree t = (CommonTree)bar.Tree;
> >>
> >> String result = (t != null) ? t.ToStringTree() : null;
> >>
> >> }
> >>
> >> }
> >>
> >> }
> >>
> >> ------
> >>
> >>
> >>
> >> When I run it, I get a "RewriteEmptyStreamException was unhandled"
> error
> >> with the message "token INT".  Here is the exception detail:
> >>
> >>
> >>
> >> Antlr.Runtime.Tree.RewriteEmptyStreamException was unhandled
> >>   Message="token INT"
> >>   Source="Antlr3.Runtime"
> >>   StackTrace:
> >>        at Antlr.Runtime.Tree.RewriteRuleElementStream`1._Next()
> >>        at Antlr.Runtime.Tree.RewriteRuleTokenStream.NextNode()
> >>        at SimpleExpressionsParser.term() in C:\Documents and
> >> Settings\helink\My Documents\Visual Studio
> >>
> 2008\Projects\Examples\ANTLRTest\TestParser\SimpleExpressionsParser.cs:line 305
> >>        at SimpleExpressionsParser.start() in C:\Documents and
> >> Settings\helink\My Documents\Visual Studio
> >>
> 2008\Projects\Examples\ANTLRTest\TestParser\SimpleExpressionsParser.cs:line 104
> >>        at TestParser.Program.Main(String[] args) in C:\Documents and
> >> Settings\helink\My Documents\Visual Studio
> >> 2008\Projects\Examples\ANTLRTest\TestParser\Program.cs:line 20
> >>        at System.AppDomain._nExecuteAssembly(Assembly assembly,
> String[]
> >> args)
> >>        at System.AppDomain.ExecuteAssembly(String assemblyFile,
> Evidence
> >> assemblySecurity, String[] args)
> >>        at
> >> Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
> >>        at System.Threading.ThreadHelper.ThreadStart_Context(Object
> state)
> >>        at System.Threading.ExecutionContext.Run(ExecutionContext
> >> executionContext, ContextCallback callback, Object state)
> >>        at System.Threading.ThreadHelper.ThreadStart()
> >>   InnerException:
> >>
> >> in other words it's dying in term() as called by start() as called by
> my
> >> main program, i.e. it's dying trying to parse.  The code around the
> error
> >> (at the break point) in Visual Studio is....
> >>
> >>
> >>
> >> // 10:15: -> ^( MULT[\"*\"] INT ID )
> >>
> >> {
> >>
> >> // C:\\Documents and Settings\\helink\\My Documents\\Visual Studio
> >>
> 2008\\Projects\\Examples\\ANTLRTest\\TestParser\\SimpleExpressions.g:10:18: ^(
> >> MULT[\"*\"] INT ID )
> >>
> >> {
> >>
> >> object root_1 = (object)adaptor.GetNilNode();
> >>
> >> root_1 = (object)adaptor.BecomeRoot((object)adaptor.Create(MULT, "*"),
> >> root_1);
> >>
> >> adaptor.AddChild(root_1, stream_INT.NextNode());         // <--- It's
> >> dying here, in SimpleExpressionsParser.cs
> >>
> >> adaptor.AddChild(root_1, stream_ID.NextNode());
> >>
> >> adaptor.AddChild(root_0, root_1);
> >>
> >> }
> >>
> >>
> >>
> >> If I get rid of the rewrite rules or whatever you call them, the -> and
> ^
> >> etc. stuff, and regenerate and recompile, it runs fine but of course it
> >> doesn't produce a useful AST, it just produces t==null.
> >>
> >>
> >>
> >> Any help getting this simple example to run would be greatly
> appreciated.
> >> At the moment however I'm suspecting either a bug in the example or in
> the
> >> CSharp2 target, as there's nothing of my own making in the picture
> (even
> >> the main program is cribbed from the web site example code).
> >>
> >>
> >>
> >> My immediate goal is to get parse trees and ASTs generated from fairly
> >> simple expression grammars.  My ultimate goal is to build heterogenous
> node
> >> trees and write code to evaluate them, i.e. my ultimate goal is to make
> a
> >> fairly simple expression interpreter.  I think if I can get the
> polynomial
> >> example working I'll be a great deal closer to that goal.
> >>
> >>
> >>
> >> thanks,
> >>
> >> hamilton
> >>
> >>
> >>
> >>
> >>
> >>
> >>     
> >
> > --
> > GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
> > Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx
> >
> >
> >   
> 

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

From David.Raymer at motorola.com  Fri May 23 07:19:19 2008
From: David.Raymer at motorola.com (Raymer David-fdr017)
Date: Fri, 23 May 2008 09:19:19 -0500
Subject: [antlr-interest] problem with unicode characters in comments within
	ANTLR .g files ...
Message-ID: <EDC0C53BE7E5D549A9E2577C7412219301EEE526@tx14exm60.ds.mot.com>

Found what may be a problem ...
 
The follow ANTRL v3 fragment generates just fine ...
 
O_SQUOTE     : '\u2018'; //  
C_SQUOTE     : '\u2019'; //  
O_DQUOTE     : '\u201C'; // 
C_DQUOTE     : '\u201D'; // 
 
This fragment generates an exception ...
 
O_SQUOTE     : '\u2018'; // '
C_SQUOTE     : '\u2019'; // '
DQUOTE       : '\"';
O_DQUOTE     : '\u201C'; // " 
C_DQUOTE     : '\u201D'; // "
 
[09:04:26] BPL.g:456:24: unexpected char: ' '
 at org.antlr.tool.ANTLRLexer.nextToken(ANTLRLexer.java:321)
 at antlr.TokenStreamRewriteEngine.nextToken(TokenStreamRewriteEngine.java:161)
 at antlr.TokenBuffer.fill(TokenBuffer.java:69)
 at antlr.TokenBuffer.LA(TokenBuffer.java:80)
 at antlr.LLkParser.LA(LLkParser.java:52)
 at org.antlr.tool.ANTLRParser.altList(ANTLRParser.java:1453)
 at org.antlr.tool.ANTLRParser.rule(ANTLRParser.java:1236)
 at org.antlr.tool.ANTLRParser.rules(ANTLRParser.java:655)
 at org.antlr.tool.ANTLRParser.grammar(ANTLRParser.java:389)
 at org.antlr.tool.Grammar.setGrammarContent(Grammar.java:521)
 at org.antlr.tool.Grammar.setGrammarContent(Grammar.java:497)
 at org.antlr.works.grammar.EngineGrammar.createNewGrammar(Unknown Source)
 at org.antlr.works.grammar.EngineGrammar.createParserGrammar(Unknown Source)
 at org.antlr.works.grammar.EngineGrammar.createCombinedGrammar(Unknown Source)
 at org.antlr.works.grammar.EngineGrammar.createGrammars(Unknown Source)
 at org.antlr.works.grammar.EngineGrammar.analyze(Unknown Source)
 at org.antlr.works.grammar.CheckGrammar.run(Unknown Source)
 at java.lang.Thread.run(Unknown Source)

The problem appears to the be the non-\ encoded unicode characters. Is this behavior expected?
 

Dave Raymer
Motorola Labs, Network Research CoE, NIRL Autonomics and Policy Research Group
Software and System Architect for Autonomics and Policy Research
Distinguished Member of the Technical Staff
Distinguished Fellow of the TeleManagement Forum
D: (817)-245-6834       M:(817)501-2665         ICBM: 32.9? N 97.2? W
All that is necessary for the triumph of evil is for good men to do nothing
-- attributed to Edmund Burke 


 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080523/c52c2d33/attachment.html 

From docinnuke at gmail.com  Fri May 23 07:29:16 2008
From: docinnuke at gmail.com (Doc In Nuke)
Date: Fri, 23 May 2008 17:29:16 +0300
Subject: [antlr-interest] C# Just starting with Parsers, Trees
In-Reply-To: <4835d247.23bb720a.4bfe.ffffb6f3SMTPIN_ADDED@mx.google.com>
References: <48358D60.2010007@gmail.com>
	<4835d247.23bb720a.4bfe.ffffb6f3SMTPIN_ADDED@mx.google.com>
Message-ID: <4836D4BC.9030104@gmail.com>

Hi,

Thanks for the information, however i am truly a beginner, what do I 
need to get this to work in ANTLR:

funcname : n=NAME (n+='.' n+=NAME)* (n+=':' n+=NAME)? -> ^(FUNCNAME $n+);

I added a token at the start of the grammar named FUNCNAME but i still 
have grammar errors :(
Do I need to declare n in a special way ?

(if you have a link to a documentation on the site I ll gladly take it)

Best Regards,


Gavin Lambert wrote:
> At 03:12 23/05/2008, Doc In Nuke wrote:
> >One of the rule i added for exemple is the following one:
> >globalfuncdec    :    'function' ^ funcname funcbody ;
> >
> >so for every global function (declaration not starting with local)
> >i get a subtree with the funcname and funcbody block.
> >Now what would really be nice is a way to get the funcname as 1
> >token and not more.
> >funcname is the following rule:
> > funcname : NAME ('.' NAME)* (':' NAME)? ;
>
> There's a few ways you can go here.  One is to convert funcname into a 
> lexer rule (but this may introduce problems into your grammar, if it's 
> not sufficiently unique).  Another is to keep it as separate tokens 
> but put it into a subtree, like this:
>
> funcname : n=NAME (n+='.' n+=NAME)* (n+=':' n+=NAME)? -> ^(FUNCNAME $n+);
>
> I'm not completely sure about this last option (I've never used it 
> myself), but I think you can also construct an imaginary token around 
> it after the fact.  Something like this:
>
> globalfuncdec : 'function' funcname funcbody -> ^('function' 
> FUNCNAME[$funcname.text] funcbody);
>
> I think doing this causes it to lose the line/column information 
> though; there is a way to preserve that but I'm not sure exactly how 
> in this case.
>
>


From trey_shonuff at freemail.hu  Fri May 23 07:40:09 2008
From: trey_shonuff at freemail.hu (Trey Cool Shonuff)
Date: Fri, 23 May 2008 16:40:09 +0200 (CEST)
Subject: [antlr-interest] Newbie: Token/Rule Difference
Message-ID: <freemail.20080423164009.18411@fm25.freemail.hu>

Hi all,
I'm new to  

_______________________________________________________
T?R?T?SMENTES ?RETTS?GI UT?NI SZAKK?PZ?SEK!

2 ?v alatt ak?r 3 szakma!

EUROPASS, EBCL ?S ECDL!

J?v? Eur?p?ba - EFEB
http://ad.adverticum.net/b/cl,1,6022,259041,315847/click.prm


From trey_shonuff at freemail.hu  Fri May 23 07:50:12 2008
From: trey_shonuff at freemail.hu (Trey Cool Shonuff)
Date: Fri, 23 May 2008 16:50:12 +0200 (CEST)
Subject: [antlr-interest] Newbie: Token/Rule Difference [again..]
In-Reply-To: <freemail.20080423164009.18411@fm25.freemail.hu>
Message-ID: <freemail.20080423165012.63758@fm25.freemail.hu>

Hi all,
I'm totally new to ANTLR and the last time I've really fiddled with language processing was back in college.
Please help me tell why the following two, similar grammars behave differently:

grammar G1;
q	:	WORD;
LETTER 	:	('a'..'z' | 'A'..'Z');
DIGIT 	:	'0'..'9';
WORD	:	(DIGIT | LETTER)+;
--------

grammar G2;
q	:	(DIGIT | LETTER)+;
LETTER 	:	('a'..'z' | 'A'..'Z');
DIGIT 	:	'0'..'9';
--------

I thought that these two were equivalent, however, G1 does not recognize the single-character sentence (throws MismatchedTokenException), while G2 does.

Can you tell me what the actual difference is?
Than You,
-Trevor.




_______________________________________________________
T?R?T?SMENTES ?RETTS?GI UT?NI SZAKK?PZ?SEK!

2 ?v alatt ak?r 3 szakma!

EUROPASS, EBCL ?S ECDL!

J?v? Eur?p?ba - EFEB
http://ad.adverticum.net/b/cl,1,6022,259041,315847/click.prm


From andreas.bartho at inf.tu-dresden.de  Fri May 23 08:18:03 2008
From: andreas.bartho at inf.tu-dresden.de (Andreas Bartho)
Date: Fri, 23 May 2008 17:18:03 +0200
Subject: [antlr-interest] Newbie: Token/Rule Difference [again..]
In-Reply-To: <freemail.20080423165012.63758@fm25.freemail.hu>
References: <freemail.20080423165012.63758@fm25.freemail.hu>
Message-ID: <4836E02B.9080801@inf.tu-dresden.de>

Hi,

in your first grammar a single letter is matched by LETTER, i.e. the 
parser receives the LETTER token, but expects the WORD token, which 
causes the error. As you probably do not want LETTER to be a token but 
only a helper rule, try adding the fragment keyword. The same holds for 
digit:

grammar G1;
q	:	WORD;

fragment
LETTER 	:	('a'..'z' | 'A'..'Z');

fragment
DIGIT 	:	'0'..'9';

WORD	:	(DIGIT | LETTER)+;

This should work
	Andreas


Trey Cool Shonuff wrote:
> Hi all,
> I'm totally new to ANTLR and the last time I've really fiddled with language processing was back in college.
> Please help me tell why the following two, similar grammars behave differently:
> 
> grammar G1;
> q	:	WORD;
> LETTER 	:	('a'..'z' | 'A'..'Z');
> DIGIT 	:	'0'..'9';
> WORD	:	(DIGIT | LETTER)+;
> --------
> 
> grammar G2;
> q	:	(DIGIT | LETTER)+;
> LETTER 	:	('a'..'z' | 'A'..'Z');
> DIGIT 	:	'0'..'9';
> --------
> 
> I thought that these two were equivalent, however, G1 does not recognize the single-character sentence (throws MismatchedTokenException), while G2 does.
> 
> Can you tell me what the actual difference is?
> Than You,
> -Trevor.


From trey_shonuff at freemail.hu  Fri May 23 09:03:28 2008
From: trey_shonuff at freemail.hu (Trey Cool Shonuff)
Date: Fri, 23 May 2008 18:03:28 +0200 (CEST)
Subject: [antlr-interest] Newbie: Token/Rule Difference [again..]
In-Reply-To: <4836E02B.9080801@inf.tu-dresden.de>
Message-ID: <freemail.20080423180328.96193@fm25.freemail.hu>

Hi,
yes indeed it works this way, thank you very much!
I will however go and dig deeper into the actual Java Parser/Lexer code ANTLR generates to get a better understanding of how things really work.
You gave me a good kickstart!
Cheers,
-Trevor.

> -----Original Message-----
> From: Andreas Bartho [mailto:andreas.bartho at inf.tu-dresden.de] 
> Sent: 2008. m?jus 23. 17:18
> To: Trey Cool Shonuff
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Newbie: Token/Rule Difference [again..]
> 
> Hi,
> 
> in your first grammar a single letter is matched by LETTER, 
> i.e. the parser receives the LETTER token, but expects the 
> WORD token, which causes the error. As you probably do not 
> want LETTER to be a token but only a helper rule, try adding 
> the fragment keyword. The same holds for
> digit:
> 
> grammar G1;
> q	:	WORD;
> 
> fragment
> LETTER 	:	('a'..'z' | 'A'..'Z');
> 
> fragment
> DIGIT 	:	'0'..'9';
> 
> WORD	:	(DIGIT | LETTER)+;
> 
> This should work
> 	Andreas
> 
> 
> Trey Cool Shonuff wrote:
> > Hi all,
> > I'm totally new to ANTLR and the last time I've really 
> fiddled with language processing was back in college.
> > Please help me tell why the following two, similar grammars 
> behave differently:
> > 
> > grammar G1;
> > q	:	WORD;
> > LETTER 	:	('a'..'z' | 'A'..'Z');
> > DIGIT 	:	'0'..'9';
> > WORD	:	(DIGIT | LETTER)+;
> > --------
> > 
> > grammar G2;
> > q	:	(DIGIT | LETTER)+;
> > LETTER 	:	('a'..'z' | 'A'..'Z');
> > DIGIT 	:	'0'..'9';
> > --------
> > 
> > I thought that these two were equivalent, however, G1 does 
> not recognize the single-character sentence (throws 
> MismatchedTokenException), while G2 does.
> > 
> > Can you tell me what the actual difference is?
> > Than You,
> > -Trevor.
> 
> 

_______________________________________________________
T?R?T?SMENTES ?RETTS?GI UT?NI SZAKK?PZ?SEK!

2 ?v alatt ak?r 3 szakma!

EUROPASS, EBCL ?S ECDL!

J?v? Eur?p?ba - EFEB
http://ad.adverticum.net/b/cl,1,6022,259041,315847/click.prm


From jimi at temporal-wave.com  Fri May 23 09:36:04 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 23 May 2008 09:36:04 -0700
Subject: [antlr-interest] C# Just starting with Parsers, Trees
In-Reply-To: <4836D4BC.9030104@gmail.com>
References: <48358D60.2010007@gmail.com>
	<4835d247.23bb720a.4bfe.ffffb6f3SMTPIN_ADDED@mx.google.com>
	<4836D4BC.9030104@gmail.com>
Message-ID: <1211560564.7556.38.camel@jimi>

On Fri, 2008-05-23 at 17:29 +0300, Doc In Nuke wrote:

> Hi,
> 
> Thanks for the information, however i am truly a beginner, what do I 
> need to get this to work in ANTLR:
> 
> funcname : n=NAME (n+='.' n+=NAME)* (n+=':' n+=NAME)? -> ^(FUNCNAME $n+);
> 
> I added a token at the start of the grammar named FUNCNAME but i still 
> have grammar errors :(
> Do I need to declare n in a special way ?
> 
> (if you have a link to a documentation on the site I ll gladly take it)


Your variables can only accumulate the same type, so you can't
accumulate ':' and '.' and NAME. However, it is usually more useful to
create nodes from the elements like ':' and '.' as this gives you a tree
that helps resolve them (with symbol tables and so on. Of course if you
are just going to 'print' them separately then you might not need that,
in which case you probably don't need the n+= anyway.

If you want a flat token sequence in the tree, but within a FUNC node
then do this:


funcname : ns=nameSequence -> ^(FUNCNAME $ns) ;

nameSequence : NAME ('.' NAME)* (':' NAME)?  ;

If you want a tree (I usually do this, but as i say it is more useful
when you are resolving name space sequences and so on, then use:

?nameSequence : NAME ('.'^ NAME)* (':'^ NAME)?  ;

And construct the tree grammar rules appropriately

funcname: ^(FUNCNAME names) ;

names : ^(':' nameSeq NAME)
      | nameSeq
      ;

nameSeq : ^('.' nameSeq nameSeq)
        | NAME
        ;

(Check that, I just typed it straight in to the email ;-).

Jim
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080523/a009678d/attachment.html 

From docinnuke at gmail.com  Fri May 23 09:39:06 2008
From: docinnuke at gmail.com (Doc In Nuke)
Date: Fri, 23 May 2008 19:39:06 +0300
Subject: [antlr-interest] C# Just starting with Parsers, Trees
In-Reply-To: <1211560564.7556.38.camel@jimi>
References: <48358D60.2010007@gmail.com>	<4835d247.23bb720a.4bfe.ffffb6f3SMTPIN_ADDED@mx.google.com>	<4836D4BC.9030104@gmail.com>
	<1211560564.7556.38.camel@jimi>
Message-ID: <4836F32A.1030907@gmail.com>

Hi,

Darn, I am so stupid sometimes :)

I got around to figuring the thing with the funcname thingy but I was 
looking at a way to concatenate the stuff and was thinking of doing it 
afterwards :)

With your method it is one shot and I do not even have to recreate the 
string after from the bits :)

Thanks a lot to all of you :)

Jim Idle wrote:
> On Fri, 2008-05-23 at 17:29 +0300, Doc In Nuke wrote:
>> Hi,
>>
>> Thanks for the information, however i am truly a beginner, what do I 
>> need to get this to work in ANTLR:
>>
>> funcname : n=NAME (n+='.' n+=NAME)* (n+=':' n+=NAME)? -> ^(FUNCNAME $n+);
>>
>> I added a token at the start of the grammar named FUNCNAME but i still 
>> have grammar errors :(
>> Do I need to declare n in a special way ?
>>
>> (if you have a link to a documentation on the site I ll gladly take it)
>>     
>
> Your variables can only accumulate the same type, so you can't 
> accumulate ':' and '.' and NAME. However, it is usually more useful to 
> create nodes from the elements like ':' and '.' as this gives you a 
> tree that helps resolve them (with symbol tables and so on. Of course 
> if you are just going to 'print' them separately then you might not 
> need that, in which case you probably don't need the n+= anyway.
>
> If you want a flat token sequence in the tree, but within a FUNC node 
> then do this:
>
>
> funcname : ns=nameSequence -> ^(FUNCNAME $ns) ;
>
> nameSequence : NAME ('.' NAME)* (':' NAME)?  ;
>
> If you want a tree (I usually do this, but as i say it is more useful 
> when you are resolving name space sequences and so on, then use:
>
> ?nameSequence : NAME ('.'^ NAME)* (':'^ NAME)?  ;
>
> And construct the tree grammar rules appropriately
>
> funcname: ^(FUNCNAME names) ;
>
> names : ^(':' nameSeq NAME)
>       | nameSeq
>       ;
>
> nameSeq : ^('.' nameSeq nameSeq)
>         | NAME
>         ;
>
> (Check that, I just typed it straight in to the email ;-).
>
> Jim
>   


From parrt at cs.usfca.edu  Fri May 23 11:46:52 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 23 May 2008 11:46:52 -0700
Subject: [antlr-interest] problem with unicode characters in comments
	within ANTLR .g files ...
In-Reply-To: <EDC0C53BE7E5D549A9E2577C7412219301EEE526@tx14exm60.ds.mot.com>
References: <EDC0C53BE7E5D549A9E2577C7412219301EEE526@tx14exm60.ds.mot.com>
Message-ID: <5847B64B-6323-45EC-A750-0AF9BA0A5C27@cs.usfca.edu>

Hi. v3.1Gives you a better error message, though still does not like  
those characters. basically, the comment scanner should look to the  
end of line, but apparently it reuses a rule in the grammar lexer that  
skips over strings and so on.  Try \' etc...
Ter
On May 23, 2008, at 7:19 AM, Raymer David-fdr017 wrote:

> Found what may be a problem ...
>
> The follow ANTRL v3 fragment generates just fine ...
>
> O_SQUOTE     : '\u2018'; //
> C_SQUOTE     : '\u2019'; //
> O_DQUOTE     : '\u201C'; //
> C_DQUOTE     : '\u201D'; //
>
> This fragment generates an exception ...
>
> O_SQUOTE     : '\u2018'; // ?
> C_SQUOTE     : '\u2019'; // ?
> DQUOTE       : '\"';
> O_DQUOTE     : '\u201C'; // ?
> C_DQUOTE     : '\u201D'; // ?
>
> [09:04:26] BPL.g:456:24: unexpected char: ' '
>  at org.antlr.tool.ANTLRLexer.nextToken(ANTLRLexer.java:321)
>  at  
> antlr 
> .TokenStreamRewriteEngine.nextToken(TokenStreamRewriteEngine.java:161)
>  at antlr.TokenBuffer.fill(TokenBuffer.java:69)
>  at antlr.TokenBuffer.LA(TokenBuffer.java:80)
>  at antlr.LLkParser.LA(LLkParser.java:52)
>  at org.antlr.tool.ANTLRParser.altList(ANTLRParser.java:1453)
>  at org.antlr.tool.ANTLRParser.rule(ANTLRParser.java:1236)
>  at org.antlr.tool.ANTLRParser.rules(ANTLRParser.java:655)
>  at org.antlr.tool.ANTLRParser.grammar(ANTLRParser.java:389)
>  at org.antlr.tool.Grammar.setGrammarContent(Grammar.java:521)
>  at org.antlr.tool.Grammar.setGrammarContent(Grammar.java:497)
>  at org.antlr.works.grammar.EngineGrammar.createNewGrammar(Unknown  
> Source)
>  at  
> org.antlr.works.grammar.EngineGrammar.createParserGrammar(Unknown  
> Source)
>  at  
> org.antlr.works.grammar.EngineGrammar.createCombinedGrammar(Unknown  
> Source)
>  at org.antlr.works.grammar.EngineGrammar.createGrammars(Unknown  
> Source)
>  at org.antlr.works.grammar.EngineGrammar.analyze(Unknown Source)
>  at org.antlr.works.grammar.CheckGrammar.run(Unknown Source)
>  at java.lang.Thread.run(Unknown Source)
> The problem appears to the be the non-\ encoded unicode characters.  
> Is this behavior expected?
>
> Dave Raymer
> Motorola Labs, Network Research CoE, NIRL Autonomics and Policy  
> Research Group
> Software and System Architect for Autonomics and Policy Research
> Distinguished Member of the Technical Staff
> Distinguished Fellow of the TeleManagement Forum
> D: (817)-245-6834       M:(817)501-2665         ICBM: 32.9? N 97.2? W
> All that is necessary for the triumph of evil is for good men to do  
> nothing
> -- attributed to Edmund Burke 
>
>


From george.scott at gmail.com  Fri May 23 12:40:17 2008
From: george.scott at gmail.com (George Scott)
Date: Fri, 23 May 2008 12:40:17 -0700
Subject: [antlr-interest] Antlr ActionScript code generation target
Message-ID: <5d9afe010805231240i74c096c6t47dfe7a22546a672@mail.gmail.com>

Hi Matthieu,

The ActionScript target was originally developed for Adobe Flex/AIR and
currently works with the Adobe Flex 3 SDK using the Flash or AIR runtime.  I
am following the Tamarin work, but haven't tested against it.  There are a
few dependencies in the current runtime on classes in the flash namespace
which are proprietary to Adobe, which is likely why you cannot import it
using Tamarin.

I can refactor the runtime and break out flash dependencies into a separate
.swc file, so the base runtime will be clean of all flash dependencies.

George



> Date: Thu, 22 May 2008 21:42:08 -0700
> From: "Matthieu Riou" <matthieu at offthelip.org>
> Subject: [antlr-interest] Antlr ActionScript code generation target
> To: antlr-interest at antlr.org
> Message-ID:
>        <fbdc6a970805222142g53a2b752i91fef21d5e49f6db at mail.gmail.com>
> Content-Type: text/plain; charset="iso-8859-1"
>
> Hi,
>
> I'm currently trying to test the ActionScript code generation for Antlr
> with
> a simple grammar. However I'm not sure which ActionScript runtime I can
> use.
> Ideally I'd like to use Tamarin with the Flex ASC compiler, is that
> possible? Currently I'm having issues when using -import with the runtime
> swc. Which environment people developing the ActionScript are working with?
>
> Thanks!
> Matthieu
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080523/a21707fd/attachment.html 

From helink at sandia.gov  Fri May 23 13:32:13 2008
From: helink at sandia.gov (Link, Hamilton)
Date: Fri, 23 May 2008 14:32:13 -0600
Subject: [antlr-interest] 3.1b1 trouble with a CSharp2/AST example
In-Reply-To: <e794390805221724q2dc3da41wb2561bd112145894@mail.gmail.com>
References: <796FAD48C7891F43A943B67DF279C58921A46056A4@ES04SNLNT.srn.sandia.gov>
	<20080522215324.178950@gmx.net> <4835EE01.4000609@sandia.gov>,
	<e794390805221724q2dc3da41wb2561bd112145894@mail.gmail.com>
Message-ID: <796FAD48C7891F43A943B67DF279C58921A46056B5@ES04SNLNT.srn.sandia.gov>

Okie dokie... just a quick post by way of keeping track of what I'm doing.



Once I got 3.1b1 rebuilding, I was satisfied that I should be able to build and test a Java-targeted parser.  I took the CSharp2-targeted .g file and changed the grammar name and the target:



grammar TestJava;

options { language = Java; output = AST; }

tokens { MULT; } // imaginary token

start: term ('+'^ term)*
    ;

term: INT ID  -> ^(MULT["*"] INT ID)
    | INT exp -> ^(MULT["*"] INT exp)
    | exp
    | INT
    | ID
    ;
exp : ID '^'^ INT
    ;

ID  : 'a'..'z'+ ;
INT : '0'..'9'+ ;
WS  : (' '|'\t'|'\r'|'\n')+ {$channel = HIDDEN;} ;

and used ANTLR to build the TestJavaLexer.java and TestJavaParser.java files.  Then I took my C# test program and converted it to Java (back to Java, really, as I took the program from the web site to begin with):



import org.antlr.runtime.*;
import org.antlr.runtime.tree.*;
import org.antlr.runtime.debug.*;

public class Program {
    public static void main(String[] args) throws Exception {
        String testString = "2x+3x^5";
        TestJavaLexer lexer = new TestJavaLexer(new ANTLRStringStream(testString));
        CommonTokenStream tokens = new CommonTokenStream(lexer);
        TestJavaParser parser = new TestJavaParser(tokens);
        TestJavaParser.start_return bar = parser.start();
        CommonTree t = (CommonTree)bar.getTree();
        String result = (t != null) ? t.toStringTree() : null;
        System.out.println(result);
    }
}



And I built and ran this:

> javac -cp "./antlr-3.1b1/lib/antlr-3.1b1.jar;./antlr-3.1b1/lib/stringtemplate-3.1.jar;./antlr-3.1b1/lib/antlr-runtime-3.1b1.jar;./antlr-3.1b1/lib/antlr-2.7.7.jar;./antlr-3.1b1/lib/gunit-1.0.2.jar" -d . Program.java TestJavaLexer.java TestJavaParser.java

> java -cp ".;./antlr-3.1b1/lib/antlr-3.1b1.jar;./antlr-3.1b1/lib/stringtemplate-3.1.jar;./antlr-3.1b1/lib/antlr-runtime-3.1b1.jar;./antlr-3.1b1/lib/antlr-2.7.7.jar;./antlr-3.1b1/lib/gunit-1.0.2.jar" Program

It printed

(+ (* 2 x) (* 3 (^ x 5)))

as desired, so obviously it's building the AST properly (and it's getting farther than the C# version by merit of not throwing an error during parsing).



So the Java target and Java runtime seem to be OK and C# target generation is a likely suspect.  I will do a side-by-side comparison between the FooParser.java and FooParser.cs and see what I can turn up.  _If_ I can identify a possible bug I will report it and also see if I can decipher what Johannes was suggesting re: fixing and rebuilding.



h


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080523/ba5b6672/attachment.html 

From helink at sandia.gov  Fri May 23 14:29:00 2008
From: helink at sandia.gov (Hamilton Link)
Date: Fri, 23 May 2008 15:29:00 -0600
Subject: [antlr-interest] 3.1b1 trouble with a CSharp2/AST example
In-Reply-To: <796FAD48C7891F43A943B67DF279C58921A46056B5@ES04SNLNT.srn.sandia.gov>
References: <796FAD48C7891F43A943B67DF279C58921A46056A4@ES04SNLNT.srn.sandia.gov>
	<20080522215324.178950@gmx.net> <4835EE01.4000609@sandia.gov>,
	<e794390805221724q2dc3da41wb2561bd112145894@mail.gmail.com>
	<796FAD48C7891F43A943B67DF279C58921A46056B5@ES04SNLNT.srn.sandia.gov>
Message-ID: <4837371C.3080802@sandia.gov>

Link, Hamilton wrote:
>
> > java -cp 
> ".;./antlr-3.1b1/lib/antlr-3.1b1.jar;./antlr-3.1b1/lib/stringtemplate-3.1.jar;./antlr-3.1b1/lib/antlr-runtime-3.1b1.jar;./antlr-3.1b1/lib/antlr-2.7.7.jar;./antlr-3.1b1/lib/gunit-1.0.2.jar" 
> Program
>
> It printed
>
> (+ (* 2 x) (* 3 (^ x 5)))
>
> as desired, so obviously it's building the AST properly (and it's 
> getting farther than the C# version by merit of not throwing an error 
> during parsing).
>
>  
>
> So the Java target and Java runtime seem to be OK and C# target 
> generation is a likely suspect.  I will do a side-by-side comparison 
> between the FooParser.java and FooParser.cs and see what I can turn 
> up.  _If_ I can identify a possible bug I will report it and also see 
> if I can decipher what Johannes was suggesting re: fixing and rebuilding.
>
>  
>
> h
>

The C# parser code dies calling NextNode() on stream_INT.

stream_INT is a RewriteRuleTokenStream and I don't have the code for 
that to the best of my knowledge, it's in the runtime.  It's throwing a 
RewriteEmptyStreamException when calling stream_INT.NextNode().

In both the Java and the C# the Parser code looks equivalent to me, and 
without the code to RewriteRuleTokenStream I can't begin to determine 
when it would throw this exception.

The operations performed on this object are as follows...
- It's allocated (new RewriteRuleTokenStream(adaptor, "token INT");)
- IToken INT4 is set to (IToken)Match({2x+3x^5}, INT=5, 
FOLLOW_INT_in_term61={6}), but INT4 comes back null (could this be the 
problem or is this the right answer?)
- stream_INT.Add(INT4) is called, passing in null.
- stream_INT now has Description="token INT", cursor=0, dirty=false, 
elements=null and singleElement=null, and adaptor=CommonTreeAdaptor
- stream_INT.NextNode() gets called and throws an error at this point.

Comments?  Am I supposed to have code for the runtime classes?  'cause I 
don't know that I have that and this will be about as far as I can go if so.

thanks,
hamilton




From helink at sandia.gov  Fri May 23 14:52:11 2008
From: helink at sandia.gov (Hamilton Link)
Date: Fri, 23 May 2008 15:52:11 -0600
Subject: [antlr-interest] ParseTreeBuilder example?
Message-ID: <48373C8B.1080403@sandia.gov>

The "How can I build parse trees not ASTs?" page...
http://www.antlr.org/wiki/pages/viewpage.action?pageId=1760

shows an example of creating a ParseTreeBuilder and then passing it into 
the FooParser two-argument constructor.

Unfortunately, as far as I can tell the two-arg constructor takes a 
TokenStream and a RecognizerSharedState... and ParseTreeBuilder doesn't 
inherit from RecognizerSharedState.

So, is the example on this web page bogus?  When did it work and when 
will it work again, because at the moment I don't see how it could 
possibly work as advertised.  (Mind you I'm not _all_ that concerned, as 
I can't even build ASTs quite yet.)  If someone could correct the 
example or explain the example that'd be great.

thanks,
hamilton


From parrt at cs.usfca.edu  Fri May 23 15:32:31 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 23 May 2008 15:32:31 -0700
Subject: [antlr-interest] greedy=false for lexersBy default
Message-ID: <10700F8F-77C0-419C-B39C-5D4F7E53FE61@cs.usfca.edu>

hi,

  I'm thinking of changing lexers to use greedy=false by default so  
that things like

STRING : '"' ('\\' '"'|.)* '"' ;

  so I don't have to say

STRING : '"' (options {greedy=false;}:'\\' '"'|.)* '"' ;

I think with a dot in there it works now:

CMT : '//' .* '\n' ;

Any objections to me flipping this real quick for 3.1?

Ter

From matthieu at offthelip.org  Fri May 23 15:52:44 2008
From: matthieu at offthelip.org (Matthieu Riou)
Date: Fri, 23 May 2008 15:52:44 -0700
Subject: [antlr-interest] Antlr ActionScript code generation target
In-Reply-To: <5d9afe010805231240i74c096c6t47dfe7a22546a672@mail.gmail.com>
References: <5d9afe010805231240i74c096c6t47dfe7a22546a672@mail.gmail.com>
Message-ID: <fbdc6a970805231552r7a98a985qba1af5db16a8c957@mail.gmail.com>

On Fri, May 23, 2008 at 12:40 PM, George Scott <george.scott at gmail.com>
wrote:

> Hi Matthieu,
>
> The ActionScript target was originally developed for Adobe Flex/AIR and
> currently works with the Adobe Flex 3 SDK using the Flash or AIR runtime.  I
> am following the Tamarin work, but haven't tested against it.  There are a
> few dependencies in the current runtime on classes in the flash namespace
> which are proprietary to Adobe, which is likely why you cannot import it
> using Tamarin.
>
> I can refactor the runtime and break out flash dependencies into a separate
> .swc file, so the base runtime will be clean of all flash dependencies.
>

That'd be pretty cool :)

Matthieu


>
> George
>
>
>
>> Date: Thu, 22 May 2008 21:42:08 -0700
>> From: "Matthieu Riou" <matthieu at offthelip.org>
>> Subject: [antlr-interest] Antlr ActionScript code generation target
>> To: antlr-interest at antlr.org
>> Message-ID:
>>        <fbdc6a970805222142g53a2b752i91fef21d5e49f6db at mail.gmail.com>
>> Content-Type: text/plain; charset="iso-8859-1"
>>
>>
>> Hi,
>>
>> I'm currently trying to test the ActionScript code generation for Antlr
>> with
>> a simple grammar. However I'm not sure which ActionScript runtime I can
>> use.
>> Ideally I'd like to use Tamarin with the Flex ASC compiler, is that
>> possible? Currently I'm having issues when using -import with the runtime
>> swc. Which environment people developing the ActionScript are working
>> with?
>>
>> Thanks!
>> Matthieu
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080523/b1e4dce9/attachment-0001.html 

From lgcraymer at yahoo.com  Fri May 23 16:09:03 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Fri, 23 May 2008 16:09:03 -0700 (PDT)
Subject: [antlr-interest] greedy=false for lexersBy default
Message-ID: <506988.17591.qm@web55911.mail.re3.yahoo.com>

Ter--

I'm uneasy about this, but then I tend to avoid the greedy=false shortcut in favor of being precise (~'"' instead of . in this case).  Why not make "greedy" a grammar-level option, instead?

--Loring

----- Original Message ----
> From: Terence Parr <parrt at cs.usfca.edu>
> To: antlr-interest Interest <antlr-interest at antlr.org>
> Sent: Friday, May 23, 2008 3:32:31 PM
> Subject: [antlr-interest] greedy=false for lexersBy default
> 
> hi,
> 
>   I'm thinking of changing lexers to use greedy=false by default so  
> that things like
> 
> STRING : '"' ('\\' '"'|.)* '"' ;
> 
>   so I don't have to say
> 
> STRING : '"' (options {greedy=false;}:'\\' '"'|.)* '"' ;
> 
> I think with a dot in there it works now:
> 
> CMT : '//' .* '\n' ;
> 
> Any objections to me flipping this real quick for 3.1?
> 
> Ter



      


From parrt at cs.usfca.edu  Fri May 23 16:21:16 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 23 May 2008 16:21:16 -0700
Subject: [antlr-interest] greedy=false for lexersBy default
In-Reply-To: <506988.17591.qm@web55911.mail.re3.yahoo.com>
References: <506988.17591.qm@web55911.mail.re3.yahoo.com>
Message-ID: <03CC0019-2A35-4825-863E-C48E0F020799@cs.usfca.edu>

it is specific to a block.

~'"' doesn't work if you need escapes etc...

>> STRING : '"' ('\\' '"'|.)* '"' ;

Ter
On May 23, 2008, at 4:09 PM, Loring Craymer wrote:

> Ter--
>
> I'm uneasy about this, but then I tend to avoid the greedy=false  
> shortcut in favor of being precise (~'"' instead of . in this  
> case).  Why not make "greedy" a grammar-level option, instead?
>
> --Loring
>
> ----- Original Message ----
>> From: Terence Parr <parrt at cs.usfca.edu>
>> To: antlr-interest Interest <antlr-interest at antlr.org>
>> Sent: Friday, May 23, 2008 3:32:31 PM
>> Subject: [antlr-interest] greedy=false for lexersBy default
>>
>> hi,
>>
>>  I'm thinking of changing lexers to use greedy=false by default so
>> that things like
>>
>> STRING : '"' ('\\' '"'|.)* '"' ;
>>
>>  so I don't have to say
>>
>> STRING : '"' (options {greedy=false;}:'\\' '"'|.)* '"' ;
>>
>> I think with a dot in there it works now:
>>
>> CMT : '//' .* '\n' ;
>>
>> Any objections to me flipping this real quick for 3.1?
>>
>> Ter
>
>
>
>
>


From parrt at cs.usfca.edu  Fri May 23 16:26:22 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 23 May 2008 16:26:22 -0700
Subject: [antlr-interest] greedy=false for lexersBy default
In-Reply-To: <03CC0019-2A35-4825-863E-C48E0F020799@cs.usfca.edu>
References: <506988.17591.qm@web55911.mail.re3.yahoo.com>
	<03CC0019-2A35-4825-863E-C48E0F020799@cs.usfca.edu>
Message-ID: <6684BD25-AFBD-46BC-BAF6-F1F9C016A34E@cs.usfca.edu>


On May 23, 2008, at 4:21 PM, Terence Parr wrote:

> it is specific to a block.
>
> ~'"' doesn't work if you need escapes etc...
>
>>> STRING : '"' ('\\' '"'|.)* '"' ;

oh, ~'"' inside.  perhaps ~('\\'|'") inside * loop.
Ter

From JALuber at gmx.de  Fri May 23 16:36:28 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Sat, 24 May 2008 01:36:28 +0200
Subject: [antlr-interest] 3.1b1 trouble with a CSharp2/AST example
In-Reply-To: <4837371C.3080802@sandia.gov>
References: <796FAD48C7891F43A943B67DF279C58921A46056A4@ES04SNLNT.srn.sandia.gov>
	<20080522215324.178950@gmx.net> <4835EE01.4000609@sandia.gov>,
	<e794390805221724q2dc3da41wb2561bd112145894@mail.gmail.com>
	<796FAD48C7891F43A943B67DF279C58921A46056B5@ES04SNLNT.srn.sandia.gov>
	<4837371C.3080802@sandia.gov>
Message-ID: <20080523233628.230490@gmx.net>

> The C# parser code dies calling NextNode() on stream_INT.
> 
> stream_INT is a RewriteRuleTokenStream and I don't have the code for 
> that to the best of my knowledge, it's in the runtime.  It's throwing a 
> RewriteEmptyStreamException when calling stream_INT.NextNode().
>
> In both the Java and the C# the Parser code looks equivalent to me, and 
> without the code to RewriteRuleTokenStream I can't begin to determine 
> when it would throw this exception.
> 
> The operations performed on this object are as follows...
> - It's allocated (new RewriteRuleTokenStream(adaptor, "token INT");)
> - IToken INT4 is set to (IToken)Match({2x+3x^5}, INT=5, 
> FOLLOW_INT_in_term61={6}), but INT4 comes back null (could this be the 
> problem or is this the right answer?)
> - stream_INT.Add(INT4) is called, passing in null.
> - stream_INT now has Description="token INT", cursor=0, dirty=false, 
> elements=null and singleElement=null, and adaptor=CommonTreeAdaptor
> - stream_INT.NextNode() gets called and throws an error at this point.
> 
> Comments?  Am I supposed to have code for the runtime classes?  'cause I 
> don't know that I have that and this will be about as far as I can go if
> so.
> 
> thanks,
> hamilton
> 

The runtimes should be included in the distribution under the runtime directory. If you have an IDE like VS then you can use the project file.

Johannes

-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

From adam.rpconnelly at googlemail.com  Fri May 23 17:01:30 2008
From: adam.rpconnelly at googlemail.com (Adam Connelly)
Date: Sat, 24 May 2008 01:01:30 +0100
Subject: [antlr-interest] Idea: semantic grammar
In-Reply-To: <880775.34535.qm@web55910.mail.re3.yahoo.com>
References: <880775.34535.qm@web55910.mail.re3.yahoo.com>
Message-ID: <b9a39b060805231701l7d3d72b9w99aec14478ff8b1@mail.gmail.com>

Ok, but do you think it would be fair to say that there is a separation
between the method that you use to identify that an error has occurred, the
method used to generate an error message, and what you then do with that
message?  Also, is it fair to assume that many applications share a very
similar set of errors (I've got no idea about this one since I'm pretty much
only familiar with compiled programming languages)?

Adam

2008/5/22 Loring Craymer <lgcraymer at yahoo.com>:

> Johannes, Adam--
>
> Yes, Yggdrasil will let you do the analysis in a target-independent way.
>  Semantics, however, are application-dependent, not language-dependent.  If
> your application processes a language as a compiler, then it finds compiler
> errors.  On the other hand, if the application is a static analyzer, then
> you have a different set of errors--race condition detection or memory
> leaks, and so forth.
>
> --Loring
>
> ----- Original Message ----
> > From: Johannes Luber <JALuber at gmx.de>
> > To: Adam Connelly <adam.rpconnelly at googlemail.com>;
> antlr-interest at antlr.org
> > Sent: Thursday, May 22, 2008 9:09:53 AM
> > Subject: Re: [antlr-interest] Idea: semantic grammar
> >
> > > Hi,
> > > I don't know if there is anything like this about at the moment, or
> even
> > > if
> > > it's a good idea.  What I've been thinking about is having a grammar
> that
> > > defines the semantics of a language that parsers can then import.  It
> > > would
> > > basically be a list of the possible types of semantic error that could
> > > occur, along with any information necessary to generate an error
> message,
> > > and an action that creates the message.
> > >
> > > >>From this a number of exception classes would be generated, along
> with a
> > > MessageCreator that would generate error messages based on the actions
> > > supplied.  Inside the parser grammar, when semantic predicates are
> > > declared,
> > > the type of error would be indicated, and from this the correct
> exception
> > > would be thrown.  The parser would then ask its ErrorReporter to handle
> > > the
> > > error, which would use the MessageCreator to create the error message,
> and
> > > would then add it to a list / print to the console / whatever.
> > >
> > > >>From this, "catalogs" of pre-defined semantic errors could be
> provided
> > > along
> > > with the correct messages to display for these errors.  Obviously this
> > > wouldn't define the actual semantics of the language (since you'd still
> > > need
> > > to implement this in actions), but it would simplify the error
> reporting
> > > part since users would just import the correct semantics, then indicate
> > > when
> > > a certain semantic error should be thrown.
> > >
> > > Any thoughts?
> > > Adam
> >
> > A nice idea but probably infeasible. There are too many semantic
> differences for
> > basically one thing - recently I read an article about "PHP sucks" and
> saw that
> > references were handled in 4.3, 4.4 and 5 differently. Granted, 4.3 was
> leaky
> > and 4.4 made it too complicated, so restricting options to sensible ones
> has a
> > benefit, but if you want to be able to parse even the most idiotic
> things, you
> > have to able to define arbitrary semantics. And then you can use the
> target
> > language itself.
> >
> > Maybe Yggdrasil of Loring Craymer can do that in target independent
> manner, but
> > it would be basically still Turing equivalent. At least you can do far
> more
> > things target independent in Yggdrasil than in ANTLR - just a shame, that
> he
> > didn't got around to finish it yet.
> >
> > Johannes
> > --
> > Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen!
> > Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer
>
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080524/455868bc/attachment.html 

From robin at pozytron.com  Fri May 23 20:21:06 2008
From: robin at pozytron.com (Robin Hamilton-Pennell)
Date: Fri, 23 May 2008 21:21:06 -0600
Subject: [antlr-interest] Tree Rewrite Caveats
Message-ID: <9bfd4b3c0805232021k73302a53n232a3e2f08178922@mail.gmail.com>

Hi all,

Been playing around with the tree rewriting stuff in 3.1b1. It's much
better than the previous test build was. I'm not through with my
experimentation and likely will find more things, but I thought I'd
make some notes on a few troubles I ran into, in case it helps anyone
else.

Firstly (this is probably true of tree parsers in general), if you use
a custom class as your AST node and the Java target, you will probably
need to add the method errorNode() in your TreeAdaptor class. This
will also entail either adding error node utility methods to your AST
node, or creating a custom subclass of CommonErrorNode. I could be
completely misguided on this; please say so.

Second, every (sub)rule that you are rewriting must match a tree node,
I think. This seems obvious in retrospect, but it took me a while to
figure out. That means that you can't do this:

stmt:
    expr   ->   expr
    ;

However, you can do either of the following (or change your AST
generation code):

stmt:
    expr  // omit rewrite rule
    ;

stmt:
    // (after changing your AST generation)
    ^(EXPR expr)   ->   ^(EXPR expr)
    ;

I should mention that both of these issues involves the rewrite=true
option. I haven't tested the effects of turning that off, actually.

Again, I could simply be completely misguided on this, in which case,
please enlighten me.

Thanks,
Robin

From lgcraymer at yahoo.com  Fri May 23 23:36:24 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Fri, 23 May 2008 23:36:24 -0700 (PDT)
Subject: [antlr-interest] Idea: semantic grammar
Message-ID: <514856.97524.qm@web55913.mail.re3.yahoo.com>

Yes on separation (I rather like the ErrorManager plus template solution that Ter used in the ANTLR 3 tool), and a skeptical "maybe" on widespread commonality of errors.  "How should you report an error to the user" rarely has a single, correct answer.  Users of different applications have different problem perspectives, so that the same error occurring in two different applications might or might not be properly reported with the same error message.  It all depends on how the user will react to the message--different kinds of users tends to mean different error reports are likely to be effective.

--Loring


----- Original Message ----
From: Adam Connelly <adam.rpconnelly at googlemail.com>
To: Loring Craymer <lgcraymer at yahoo.com>
Cc: Johannes Luber <JALuber at gmx.de>; antlr-interest at antlr.org
Sent: Friday, May 23, 2008 5:01:30 PM
Subject: Re: [antlr-interest] Idea: semantic grammar

Ok, but do you think it would be fair to say that there is a separation between the method that you use to identify that an error has occurred, the method used to generate an error message, and what you then do with that message?  Also, is it fair to assume that many applications share a very similar set of errors (I've got no idea about this one since I'm pretty much only familiar with compiled programming languages)?

Adam


2008/5/22 Loring Craymer <lgcraymer at yahoo.com>:

Johannes, Adam--

Yes, Yggdrasil will let you do the analysis in a target-independent way.  Semantics, however, are application-dependent, not language-dependent.  If your application processes a language as a compiler, then it finds compiler errors.  On the other hand, if the application is a static analyzer, then you have a different set of errors--race condition detection or memory leaks, and so forth.

--Loring


----- Original Message ----
> From: Johannes Luber <JALuber at gmx.de>
> To: Adam Connelly <adam.rpconnelly at googlemail.com>; antlr-interest at antlr.org
> Sent: Thursday, May 22, 2008 9:09:53 AM
> Subject: Re: [antlr-interest] Idea: semantic grammar
>
> > Hi,
> > I don't know if there is anything like this about at the moment, or even
> > if
> > it's a good idea.  What I've been thinking about is having a grammar that
> > defines the semantics of a language that parsers can then import.  It
> > would
> > basically be a list of the possible types of semantic error that could
> > occur, along with any information necessary to generate an error message,
> > and an action that creates the message.
> >
> > >>From this a number of exception classes would be generated, along with a
> > MessageCreator that would generate error messages based on the actions
> > supplied.  Inside the parser grammar, when semantic predicates are
> > declared,
> > the type of error would be indicated, and from this the correct exception
> > would be thrown.  The parser would then ask its ErrorReporter to handle
> > the
> > error, which would use the MessageCreator to create the error message, and
> > would then add it to a list / print to the console / whatever.
> >
> > >>From this, "catalogs" of pre-defined semantic errors could be provided
> > along
> > with the correct messages to display for these errors.  Obviously this
> > wouldn't define the actual semantics of the language (since you'd still
> > need
> > to implement this in actions), but it would simplify the error reporting
> > part since users would just import the correct semantics, then indicate
> > when
> > a certain semantic error should be thrown.
> >
> > Any thoughts?
> > Adam
>
> A nice idea but probably infeasible. There are too many semantic differences for
> basically one thing - recently I read an article about "PHP sucks" and saw that
> references were handled in 4.3, 4.4 and 5 differently. Granted, 4.3 was leaky
> and 4.4 made it too complicated, so restricting options to sensible ones has a
> benefit, but if you want to be able to parse even the most idiotic things, you
> have to able to define arbitrary semantics. And then you can use the target
> language itself.
>
> Maybe Yggdrasil of Loring Craymer can do that in target independent manner, but
> it would be basically still Turing equivalent. At least you can do far more
> things target independent in Yggdrasil than in ANTLR - just a shame, that he
> didn't got around to finish it yet.
>
> Johannes
> --
> Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen!
> Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080523/08ffa40a/attachment-0001.html 

From felix_do at web.de  Sat May 24 03:42:44 2008
From: felix_do at web.de (Felix Dorner)
Date: Sat, 24 May 2008 12:42:44 +0200
Subject: [antlr-interest] Getting rid of class cast exceptions to
	CommonTree
In-Reply-To: <02EA84C3-C78E-4114-A426-A822A961FF49@cs.usfca.edu>
References: <48357D66.1030208@web.de>
	<B156FC81-E8FC-4EB2-B82B-990A35BF983A@cs.usfca.edu>
	<48359D13.4070502@web.de>
	<0E746344-530A-4CC8-AB3D-36D37C03D5A0@cs.usfca.edu>
	<4835B591.901@web.de>
	<02EA84C3-C78E-4114-A426-A822A961FF49@cs.usfca.edu>
Message-ID: <4837F124.3060702@web.de>

Terence Parr wrote:
>
> On May 22, 2008, at 11:04 AM, Felix Dorner wrote:
>
>> >So probably not ANTLR's fault?
>> No, its in the generated code.. When I say antlr tries to.. I should 
>> really mean the runtime and not the generated code I guess.
>
> Well,I mean both runtime and tool when I say ANTLR. so, what specific 
> line or operation in the runtime is getting typecast problem.
> T
Terence,

I'm sorry being so imprecise. It is neither in the Tool, nor in the 
Runtime. It in the generated tree parser. I just was wondering what happens:

In the tree grammar I use this style to check for semantics, e.g for 
expressions:

expr:  ^(binop e1=expr e2=expr)
         {$e1.start.evalType() != null}?
         {$e2.start.evalType() != null}?
         $expr.start.evalType = validateExpr ($binop, e1.start e2.start);

validateEpr returns the Type of the whole expression. In case of an 
error, I return null and print out a useful error message. Further, I 
override reportError like this:

@Override
     public void reportError(RecognitionException e){     
         if (!( e instanceof FailedPredicateException )){
             // I expect only failed predicate exceptions,
             // anything else is a tampered ast... For a failed 
predicate, I already output a message, so ignore those
             Logger.logException(e);
         }
         errors.add(e);
     }

Now somehow in those predicates (after a failing preceding predicate) 
instead of an AST object, I get a CommonTreeNode with an Up or a down 
Token.. So there seems to be a sync problem during error recovery 
somehow. But I am really new, so might well be that I mess smth. up.

Thanks,
Felix









From felix_do at web.de  Sat May 24 04:50:45 2008
From: felix_do at web.de (Felix Dorner)
Date: Sat, 24 May 2008 13:50:45 +0200
Subject: [antlr-interest] EOF token insertion, ArrayIndexOutOfBounds
Message-ID: <48380115.4060702@web.de>

Hey,

I have this rule:

body    
    : statement* EOF -> ^(SLIST["BODY"] statement*)
    ;

If no statement is matched, but the next token isn't EOF either, 
eventuall this operation is called, with expectedTokenType = -1,

protected Object getMissingSymbol(IntStream input,
                                      RecognitionException e,
                                      int expectedTokenType,
                                      BitSet follow)
    {
        String tokenText =
            "<missing "+getTokenNames()[expectedTokenType]+">";
    ...
}

Which obviously explodes with an ArrayIndexOutOfBounds exception.

Something I can do against this?




From antlr at mirality.co.nz  Sat May 24 05:13:41 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 25 May 2008 00:13:41 +1200
Subject: [antlr-interest] problem with unicode characters in comments
 within ANTLR .g files ...
In-Reply-To: <EDC0C53BE7E5D549A9E2577C7412219301EEE526@tx14exm60.ds.mot. com>
References: <EDC0C53BE7E5D549A9E2577C7412219301EEE526@tx14exm60.ds.mot.com>
Message-ID: <20080524121357.1A7BD11EDB3@www.antlr.org>

At 02:19 24/05/2008, Raymer David-fdr017 wrote:
>This fragment generates an exception ...
>
>O_SQUOTE     : '\u2018'; // '
>C_SQUOTE     : '\u2019'; // '
>DQUOTE       : '\"';
>O_DQUOTE     : '\u201C'; // "
>C_DQUOTE     : '\u201D'; // "
[...]
>The problem appears to the be the non-\ encoded unicode 
>characters. Is this behavior expected?

ANTLR grammars can't contain any Unicode characters, since the 
grammar itself is still parsed with ANTLR v2, and v2 can't cope 
with Unicode.  (Lexers generated by ANTLR v3 can recognise Unicode 
just fine though, but you need to escape them within the grammar.)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080525/cc0da7c4/attachment.html 

From antlr at mirality.co.nz  Sat May 24 05:32:32 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 25 May 2008 00:32:32 +1200
Subject: [antlr-interest] greedy=false for lexersBy default
In-Reply-To: <10700F8F-77C0-419C-B39C-5D4F7E53FE61@cs.usfca.edu>
References: <10700F8F-77C0-419C-B39C-5D4F7E53FE61@cs.usfca.edu>
Message-ID: <20080524123246.E992011EDB1@www.antlr.org>

At 10:32 24/05/2008, Terence Parr wrote:
 >  I'm thinking of changing lexers to use greedy=false by default 
so
 >
 >that things like
 >
 >STRING : '"' ('\\' '"'|.)* '"' ;
 >
 >  so I don't have to say
 >
 >STRING : '"' (options {greedy=false;}:'\\' '"'|.)* '"' ;

Provided it only goes non-greedy if there's a following 
character.  Otherwise I think it'd lead to too much change in 
behaviour.  (And I'm not sure what makes sense if the following 
character can be optional.)

But yeah, like Loring I almost never use a . in this sort of case; 
it's more common to do something along the lines of:

STRING : '"' ('\\' ('"' | '\\' | 'r' | 'n') | ~('\\' | '"'))* '"';

Very explicit and I think it makes greediness or non-greediness 
irrelevant too.  Alternatively, if I don't want the lexer to choke 
if an invalid escape sequence is used, I'll use the simpler form:

STRING : '"' ('\\' . | ~('\\' | '"'))* '"';

Admittedly this approach does get a bit messy when the termination 
sequence consists of multiple characters (eg. '*/' for a C-like 
block comment or ']]>' for XML CDATA).  That's when an 
auto-non-greedy approach might be beneficial.


From adam.rpconnelly at googlemail.com  Sat May 24 05:41:25 2008
From: adam.rpconnelly at googlemail.com (Adam Connelly)
Date: Sat, 24 May 2008 13:41:25 +0100
Subject: [antlr-interest] Idea: semantic grammar
In-Reply-To: <514856.97524.qm@web55913.mail.re3.yahoo.com>
References: <514856.97524.qm@web55913.mail.re3.yahoo.com>
Message-ID: <b9a39b060805240541u40f289fbvd2d9c61eda914a20@mail.gmail.com>

Point taken.  I might have a look at the ErrorManager plus template solution
you mentioned since it sounds interesting.  There definitely seems to be a
gap anyway where error reporting could be made a lot easier - but maybe
doing so would take too much control away.

I know how I would like to do things anyway (not that that's the right way
:))

Cheers,
Adam

2008/5/24 Loring Craymer <lgcraymer at yahoo.com>:

> Yes on separation (I rather like the ErrorManager plus template solution
> that Ter used in the ANTLR 3 tool), and a skeptical "maybe" on widespread
> commonality of errors.  "How should you report an error to the user" rarely
> has a single, correct answer.  Users of different applications have
> different problem perspectives, so that the same error occurring in two
> different applications might or might not be properly reported with the same
> error message.  It all depends on how the user will react to the
> message--different kinds of users tends to mean different error reports are
> likely to be effective.
>
> --Loring
>
>
> ----- Original Message ----
> From: Adam Connelly <adam.rpconnelly at googlemail.com>
> To: Loring Craymer <lgcraymer at yahoo.com>
> Cc: Johannes Luber <JALuber at gmx.de>; antlr-interest at antlr.org
> Sent: Friday, May 23, 2008 5:01:30 PM
> Subject: Re: [antlr-interest] Idea: semantic grammar
>
> Ok, but do you think it would be fair to say that there is a separation
> between the method that you use to identify that an error has occurred, the
> method used to generate an error message, and what you then do with that
> message?  Also, is it fair to assume that many applications share a very
> similar set of errors (I've got no idea about this one since I'm pretty much
> only familiar with compiled programming languages)?
>
> Adam
>
> 2008/5/22 Loring Craymer <lgcraymer at yahoo.com>:
>
>> Johannes, Adam--
>>
>> Yes, Yggdrasil will let you do the analysis in a target-independent way.
>>  Semantics, however, are application-dependent, not language-dependent.  If
>> your application processes a language as a compiler, then it finds compiler
>> errors.  On the other hand, if the application is a static analyzer, then
>> you have a different set of errors--race condition detection or memory
>> leaks, and so forth.
>>
>> --Loring
>>
>> ----- Original Message ----
>> > From: Johannes Luber <JALuber at gmx.de>
>> > To: Adam Connelly <adam.rpconnelly at googlemail.com>;
>> antlr-interest at antlr.org
>> > Sent: Thursday, May 22, 2008 9:09:53 AM
>> > Subject: Re: [antlr-interest] Idea: semantic grammar
>> >
>> > > Hi,
>> > > I don't know if there is anything like this about at the moment, or
>> even
>> > > if
>> > > it's a good idea.  What I've been thinking about is having a grammar
>> that
>> > > defines the semantics of a language that parsers can then import.  It
>> > > would
>> > > basically be a list of the possible types of semantic error that could
>> > > occur, along with any information necessary to generate an error
>> message,
>> > > and an action that creates the message.
>> > >
>> > > >>From this a number of exception classes would be generated, along
>> with a
>> > > MessageCreator that would generate error messages based on the actions
>> > > supplied.  Inside the parser grammar, when semantic predicates are
>> > > declared,
>> > > the type of error would be indicated, and from this the correct
>> exception
>> > > would be thrown.  The parser would then ask its ErrorReporter to
>> handle
>> > > the
>> > > error, which would use the MessageCreator to create the error message,
>> and
>> > > would then add it to a list / print to the console / whatever.
>> > >
>> > > >>From this, "catalogs" of pre-defined semantic errors could be
>> provided
>> > > along
>> > > with the correct messages to display for these errors.  Obviously this
>> > > wouldn't define the actual semantics of the language (since you'd
>> still
>> > > need
>> > > to implement this in actions), but it would simplify the error
>> reporting
>> > > part since users would just import the correct semantics, then
>> indicate
>> > > when
>> > > a certain semantic error should be thrown.
>> > >
>> > > Any thoughts?
>> > > Adam
>> >
>> > A nice idea but probably infeasible. There are too many semantic
>> differences for
>> > basically one thing - recently I read an article about "PHP sucks" and
>> saw that
>> > references were handled in 4.3, 4.4 and 5 differently. Granted, 4.3 was
>> leaky
>> > and 4.4 made it too complicated, so restricting options to sensible ones
>> has a
>> > benefit, but if you want to be able to parse even the most idiotic
>> things, you
>> > have to able to define arbitrary semantics. And then you can use the
>> target
>> > language itself.
>> >
>> > Maybe Yggdrasil of Loring Craymer can do that in target independent
>> manner, but
>> > it would be basically still Turing equivalent. At least you can do far
>> more
>> > things target independent in Yggdrasil than in ANTLR - just a shame,
>> that he
>> > didn't got around to finish it yet.
>> >
>> > Johannes
>> > --
>> > Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen!
>> > Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer
>>
>>
>>
>>
>>
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080524/d2876bbc/attachment.html 

From anderson.lizardo at gmail.com  Sat May 24 08:40:05 2008
From: anderson.lizardo at gmail.com (Anderson Lizardo)
Date: Sat, 24 May 2008 11:40:05 -0400
Subject: [antlr-interest] ANTLR 3.1b1 released!
In-Reply-To: <62F7B8D6-C3D0-4A7A-B1C1-E8BD44405B89@cs.usfca.edu>
References: <62F7B8D6-C3D0-4A7A-B1C1-E8BD44405B89@cs.usfca.edu>
Message-ID: <5b5833aa0805240840yb9f2718g44c07b43f06e31d6@mail.gmail.com>

On Tue, May 20, 2008 at 10:25 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> Get it while it's hot:
>
> http://www.antlr.org/download/antlr-3.1b1.tar.gz

As a side note, I did run both unit and functional tests for the
Python target. It all went well, except for these four tests:

======================================================================
ERROR: testMalformedInput1 (t012lexerXML.t012lexerXML)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "tests/t012lexerXML.py", line 12, in setUp
    self.compileGrammar('t012lexerXMLLexer.g')
  File "tests/testbase.py", line 175, in compileGrammar
    grammar = open(grammarPath, 'r').read()
IOError: [Errno 2] No such file or directory:
'/home/lizardo/build/src/antlr/antlr-3.1b1/runtime/Python/tests/t012lexerXMLLexer.g'

======================================================================
ERROR: testMalformedInput2 (t012lexerXML.t012lexerXML)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "tests/t012lexerXML.py", line 12, in setUp
    self.compileGrammar('t012lexerXMLLexer.g')
  File "tests/testbase.py", line 175, in compileGrammar
    grammar = open(grammarPath, 'r').read()
IOError: [Errno 2] No such file or directory:
'/home/lizardo/build/src/antlr/antlr-3.1b1/runtime/Python/tests/t012lexerXMLLexer.g'

======================================================================
ERROR: testMalformedInput3 (t012lexerXML.t012lexerXML)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "tests/t012lexerXML.py", line 12, in setUp
    self.compileGrammar('t012lexerXMLLexer.g')
  File "tests/testbase.py", line 175, in compileGrammar
    grammar = open(grammarPath, 'r').read()
IOError: [Errno 2] No such file or directory:
'/home/lizardo/build/src/antlr/antlr-3.1b1/runtime/Python/tests/t012lexerXMLLexer.g'

======================================================================
ERROR: testValid (t012lexerXML.t012lexerXML)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "tests/t012lexerXML.py", line 12, in setUp
    self.compileGrammar('t012lexerXMLLexer.g')
  File "tests/testbase.py", line 175, in compileGrammar
    grammar = open(grammarPath, 'r').read()
IOError: [Errno 2] No such file or directory:
'/home/lizardo/build/src/antlr/antlr-3.1b1/runtime/Python/tests/t012lexerXMLLexer.g'

----------------------------------------------------------------------

It seems the "t012lexerXMLLexer.g" grammar file is missing on the tarball.

Regards,
-- 
Anderson Lizardo

From parrt at cs.usfca.edu  Sat May 24 10:05:15 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 24 May 2008 10:05:15 -0700
Subject: [antlr-interest] greedy=false for lexersBy default
In-Reply-To: <20080524123246.E992011EDB1@www.antlr.org>
References: <10700F8F-77C0-419C-B39C-5D4F7E53FE61@cs.usfca.edu>
	<20080524123246.E992011EDB1@www.antlr.org>
Message-ID: <70AF9CD7-3E45-4D92-9F37-512DFBB6570E@cs.usfca.edu>


On May 24, 2008, at 5:32 AM, Gavin Lambert wrote:

> At 10:32 24/05/2008, Terence Parr wrote:
> >  I'm thinking of changing lexers to use greedy=false by default so
> >
> >that things like
> >
> >STRING : '"' ('\\' '"'|.)* '"' ;
> >
> >  so I don't have to say
> >
> >STRING : '"' (options {greedy=false;}:'\\' '"'|.)* '"' ;
>
> Provided it only goes non-greedy if there's a following character.   
> Otherwise I think it'd lead to too much change in behaviour.  (And  
> I'm not sure what makes sense if the following character can be  
> optional.)

you are right!  yeah, i found that out the hard way when I turned it  
nogreedy.  Has to be a following char. ok, i'll leave alone for now.

> But yeah, like Loring I almost never use a . in this sort of case;  
> it's more common to do something along the lines of:
>
> STRING : '"' ('\\' ('"' | '\\' | 'r' | 'n') | ~('\\' | '"'))* '"';

gotcha

Ter

From brent.yates at gmail.com  Sat May 24 11:04:54 2008
From: brent.yates at gmail.com (Brent Yates)
Date: Sat, 24 May 2008 14:04:54 -0400
Subject: [antlr-interest] NoViableAltException in optional alternative
Message-ID: <6edc6c380805241104i551652aau6774ef4250533154@mail.gmail.com>

If the prediction DFA for an alternative fails but the alternative is
optional, should the rule throw a NoViableAltException?  It seems to me that
it should not, but the code generated by Antlr 3.1b1 does throw the
exception.  Here is a short silly grammar that shows the problem.  If you
runs this in AntlrWorks and test just the numbers rule with an input of '5',
you will get NoViableAltExceptions.

grammar Bug;

options
    {
    language= Java;
    }

start
    :    declarations EOF
    ;

declarations
    :    numbers ';'
    ;

numbers
    :    '5'
        (
            '.'
        |    '&' '%' '%'
        |    '&' '%' '^'
        |    '%' '$'
        |    '%' '^'
        )?
    ;

If one calls the '*numbers*' rule in isolation (for example during unit
testing or if you are building an interpreter) and feeds a single '*5*' to
it followed by EOF (or anything other than semicolon), the alternative
prediction DFA inside the numbers function fails and a NoViableAltException
is thrown.  I belive this is incorrect as the numbers rule should have
succeeded since the final alternative is optional.  The extra input should
be passed up the chain for other rules to verify.

Antlr is also not consistent in this behavior.  Making minor changes to the
grammar will sometimes cause the generated code to NOT use a DFA for the
alternative check and in this case no exception is thrown when the
alternative does not match - reguardless of the reason for not matching
(i.e., extra input that is not in the follow set).

The inconsistency makes it hard to craft gUnit tests as the rule tests work
sometimes and then later fail (due to NoViableAltExceptions) after unrelated
changes to the grammar.  I also think this could cause problems for
applications where the rules need to be called independently.

Thanks,

Brent Yates
brent.yates at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080524/2f5d2f6a/attachment.html 

From adam.rpconnelly at googlemail.com  Sun May 25 05:04:59 2008
From: adam.rpconnelly at googlemail.com (Adam Connelly)
Date: Sun, 25 May 2008 13:04:59 +0100
Subject: [antlr-interest] stringtemplate.org and antlr.org down
Message-ID: <b9a39b060805250504j53b2e323lb6caf9d3b058a11f@mail.gmail.com>

Hi,

Don't know if anyone's noticed, but both stringtemplate.org and
antlr.orgare down with "500 Servlet Exception -
java.lang.OutOfMemoryError: PermGen space" error.

Weird...
Adam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080525/bc01f9c5/attachment.html 

From parrt at cs.usfca.edu  Sun May 25 09:31:03 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 25 May 2008 09:31:03 -0700
Subject: [antlr-interest] stringtemplate.org and antlr.org down
In-Reply-To: <b9a39b060805250504j53b2e323lb6caf9d3b058a11f@mail.gmail.com>
References: <b9a39b060805250504j53b2e323lb6caf9d3b058a11f@mail.gmail.com>
Message-ID: <F7F4AEF4-4D5A-4278-A5CC-380C1B9E0798@cs.usfca.edu>

sorry...coming back up.
Ter
On May 25, 2008, at 5:04 AM, Adam Connelly wrote:

> Hi,
>
> Don't know if anyone's noticed, but both stringtemplate.org and  
> antlr.org are down with "500 Servlet Exception -
> java.lang.OutOfMemoryError: PermGen space" error.
>
> Weird...
> Adam

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080525/3fdcb8ef/attachment.html 

From parrt at cs.usfca.edu  Sun May 25 11:28:37 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 25 May 2008 11:28:37 -0700
Subject: [antlr-interest] NoViableAltException in optional alternative
In-Reply-To: <6edc6c380805241104i551652aau6774ef4250533154@mail.gmail.com>
References: <6edc6c380805241104i551652aau6774ef4250533154@mail.gmail.com>
Message-ID: <E45FC120-8F23-46B7-8622-84C868CDFC8C@cs.usfca.edu>

i have a bug to look at optional subrules on end of rules. use another  
rule that invokes nubmers EOF.
Ter
On May 24, 2008, at 11:04 AM, Brent Yates wrote:

> If the prediction DFA for an alternative fails but the alternative  
> is optional, should the rule throw a NoViableAltException?  It seems  
> to me that it should not, but the code generated by Antlr 3.1b1 does  
> throw the exception.  Here is a short silly grammar that shows the  
> problem.  If you runs this in AntlrWorks and test just the numbers  
> rule with an input of '5', you will get NoViableAltExceptions.
>
> grammar Bug;
>
> options
>     {
>     language= Java;
>     }
>
> start
>     :    declarations EOF
>     ;
>
> declarations
>     :    numbers ';'
>     ;
>
> numbers
>     :    '5'
>         (
>             '.'
>         |    '&' '%' '%'
>         |    '&' '%' '^'
>         |    '%' '$'
>         |    '%' '^'
>         )?
>     ;
>
> If one calls the 'numbers' rule in isolation (for example during  
> unit testing or if you are building an interpreter) and feeds a  
> single '5' to it followed by EOF (or anything other than semicolon),  
> the alternative prediction DFA inside the numbers function fails and  
> a NoViableAltException is thrown.  I belive this is incorrect as the  
> numbers rule should have succeeded since the final alternative is  
> optional.  The extra input should be passed up the chain for other  
> rules to verify.
>
> Antlr is also not consistent in this behavior.  Making minor changes  
> to the grammar will sometimes cause the generated code to NOT use a  
> DFA for the alternative check and in this case no exception is  
> thrown when the alternative does not match - reguardless of the  
> reason for not matching (i.e., extra input that is not in the follow  
> set).
>
> The inconsistency makes it hard to craft gUnit tests as the rule  
> tests work sometimes and then later fail (due to  
> NoViableAltExceptions) after unrelated changes to the grammar.  I  
> also think this could cause problems for applications where the  
> rules need to be called independently.
>
> Thanks,
>
> Brent Yates
> brent.yates at gmail.com
>
>
>
>
>
>


From Gerz at fgan.de  Mon May 26 03:21:45 2008
From: Gerz at fgan.de (Gerz, Michael)
Date: Mon, 26 May 2008 12:21:45 +0200
Subject: [antlr-interest] API change for "recoverFromMismatchedSet"?
Message-ID: <1FF0CFC89178B64DBD5CF6696750AC4306ECAF@mailserv1.lorien.fkie.fgan.de>

Hello,

 

I use the following code to suppress any kind of error handling

 

>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 

 

@rulecatch { 

            catch (RecognitionException e) {

                        throw e;

            }

}

 

@members {

            @Override

            protected void mismatch(IntStream input, int ttype, BitSet follow)

                        throws RecognitionException

            {

                        throw new MismatchedTokenException(ttype, input);

            }

 

            @Override

            public void recoverFromMismatchedSet(IntStream input, RecognitionException e, BitSet follow)

                        throws RecognitionException

            {

                        throw e;

            }

}

 

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< 

 

With the latest ANTLR snapshot as of 2008-05-25, the Java compiler complains about the following problem:

 

   The return type is incompatible with BaseRecognizer.recoverFromMismatchedSet(IntStream, RecognitionException, BitSet)

 

It seems that I have to return an "Object". What is the proper way of overwriting this method to suppress errors? 

 

Kind regards, 

 

Michael

 

************************************************************************

Dr. Michael Gerz 

FGAN e.V.                                       Phone:  +49 228 9435-414

Department FKIE/ITF                             Fax:    +49 228 9435-685

Neuenahrer Stra?e 20                            E-Mail: gerz at fgan.de 

53343 Wachtberg-Werthhoven, Germany             WWW:    www.fgan.de 

 

Forschungsgesellschaft f?r Angewandte Naturwissenschaften e. V. (FGAN) 

Sitz der Gesellschaft: Bonn 

Registergericht: Amtsgericht Bonn VR 2530 

Vorstand: Dr.rer.nat. R. Dornhaus (Vorst.), Prof. Dr. J. Ender (Stellv.)

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080526/ea9c902e/attachment.html 

From Gerz at fgan.de  Mon May 26 03:33:33 2008
From: Gerz at fgan.de (Gerz, Michael)
Date: Mon, 26 May 2008 12:33:33 +0200
Subject: [antlr-interest] API change for "recoverFromMismatchedSet"?
Message-ID: <1FF0CFC89178B64DBD5CF6696750AC4306ECB0@mailserv1.lorien.fkie.fgan.de>

Hello,

 

with the recent API changes, I think that the "error handling" section at

 

http://www.antlr.org/wiki/display/ANTLR3/Migrating+from+ANTLR+2+to+ANTLR+3 <http://www.antlr.org/wiki/display/ANTLR3/Migrating+from+ANTLR+2+to+ANTLR+3> 

 

needs be revised.

 

Regards,

 

Michael

 

 

************************************************************************

Dr. Michael Gerz 

FGAN e.V.                                       Phone:  +49 228 9435-414

Department FKIE/ITF                             Fax:    +49 228 9435-685

Neuenahrer Stra?e 20                            E-Mail: gerz at fgan.de 

53343 Wachtberg-Werthhoven, Germany             WWW:    www.fgan.de 

 

Forschungsgesellschaft f?r Angewandte Naturwissenschaften e. V. (FGAN) 

Sitz der Gesellschaft: Bonn 

Registergericht: Amtsgericht Bonn VR 2530 

Vorstand: Dr.rer.nat. R. Dornhaus (Vorst.), Prof. Dr. J. Ender (Stellv.)

 

________________________________

Von: Gerz, Michael 
Gesendet: Montag, 26. Mai 2008 12:22
An: 'antlr-interest at antlr.org'
Betreff: API change for "recoverFromMismatchedSet"?

 

Hello,

 

I use the following code to suppress any kind of error handling

 

>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 

 

@rulecatch { 

            catch (RecognitionException e) {

                        throw e;

            }

}

 

@members {

            @Override

            protected void mismatch(IntStream input, int ttype, BitSet follow)

                        throws RecognitionException

            {

                        throw new MismatchedTokenException(ttype, input);

            }

 

            @Override

            public void recoverFromMismatchedSet(IntStream input, RecognitionException e, BitSet follow)

                        throws RecognitionException

            {

                        throw e;

            }

}

 

<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< 

 

With the latest ANTLR snapshot as of 2008-05-25, the Java compiler complains about the following problem:

 

   The return type is incompatible with BaseRecognizer.recoverFromMismatchedSet(IntStream, RecognitionException, BitSet)

 

It seems that I have to return an "Object". What is the proper way of overwriting this method to suppress errors? 

 

Kind regards, 

 

Michael

 

************************************************************************

Dr. Michael Gerz 

FGAN e.V.                                       Phone:  +49 228 9435-414

Department FKIE/ITF                             Fax:    +49 228 9435-685

Neuenahrer Stra?e 20                            E-Mail: gerz at fgan.de 

53343 Wachtberg-Werthhoven, Germany             WWW:    www.fgan.de 

 

Forschungsgesellschaft f?r Angewandte Naturwissenschaften e. V. (FGAN) 

Sitz der Gesellschaft: Bonn 

Registergericht: Amtsgericht Bonn VR 2530 

Vorstand: Dr.rer.nat. R. Dornhaus (Vorst.), Prof. Dr. J. Ender (Stellv.)

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080526/0d910349/attachment-0001.html 

From arjode at uni-koblenz.de  Mon May 26 07:33:29 2008
From: arjode at uni-koblenz.de (arjode at uni-koblenz.de)
Date: Mon, 26 May 2008 16:33:29 +0200 (CEST)
Subject: [antlr-interest] RewriteEmptyStreamException at last brace
Message-ID: <2090.212.16.235.86.1211812409.squirrel@mail.uni-koblenz.de>

Hi all,

I've a simple grammar, basicly something Javalike. My rule looks like that
(it's realy that simple as it is unfinished):

    classDecl : CLASS classBody -> ^(CLASS classBody)
    classBody : LBRACE RBRACE -> ^(CLASSBODY)

To test the error recovery I use the following input:

    class {

I would expect error recovery inserts the missing brace, print the error
message and the AST is generated as it should. But instead I get a
RewriteEmptyStreamException (which indicates there is something wrong with
my grammar!?). What's going on here? Can someone explain?

Thanks!
Arne


From jstpierre-antlr at mecheye.net  Mon May 26 07:59:55 2008
From: jstpierre-antlr at mecheye.net (ANTLR Mailing List)
Date: Mon, 26 May 2008 10:59:55 -0400
Subject: [antlr-interest] Writing a compiler for ECMAScript 4
Message-ID: <4ff3ab470805260759s696f738at1e2f43828ae00488@mail.gmail.com>

I am currently writing a compiler for ECMAScript 4 in ActionScript 3,
using Tamarin ESC:
http://hg.mozilla.org/index.cgi/tamarin-central/file/548a350c9c29/esc/src/
(parse.es, lex-*.es and ast.es are the biggies) as a source. I am also
somewhat contributing to the ANTLR ActionScript target, but George
Scott is mainly the guru behind it.

The reference compiler uses a lot of tricks and half-assed
implementations (context, ribs, desugaring patterns, etc.), and I was
wondering if these same things can be done either straightforwardly in
ANTLR or in a better ANTLR-istic way. I have the latest 3.1b1 build,
and already have a somewhat complete grammar for an old revision which
I will attach.

Main points of interest:
 * How much does ANTLR help in compilation, e.g. can I traverse the
AST to build symbol tables, resolve qualified name and type names?
 * Would there be a more ANTLR-istic approach to the parser than what
is shown in ESC, or would it be better to write a hand parser?
 * In ECMAScript the parser's/lexer's main goal is to seperate '/'
usage from Regular Expressions and Division. ESC does this by a
non-buffered lexer that retrieves tokens based on context. Can ANTLR
grammars have context?
 * Does ANTLR have support for heterogeneous AST nodes?

Thanks in advance,
  JP St. Pierre
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Ecma.g
Type: application/octet-stream
Size: 30639 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080526/595e3dfb/attachment-0001.obj 

From felix_do at web.de  Mon May 26 08:19:59 2008
From: felix_do at web.de (Felix Dorner)
Date: Mon, 26 May 2008 17:19:59 +0200
Subject: [antlr-interest] Proper use of options {k=..}
Message-ID: <483AD51F.4000505@web.de>

Hi,

In my backend, I need to distinguish various kinds of "equality 
expressions" of the general form

^(EQ expression expression)

to simplify the generated code as much as possible. For example,
"nil == someExpression" can be simplified. I capture those special 
expressions with subrules. Antlr now warns me, for example that
^(EQ L_NIL ...) can be matched by both rules and he disabled the second 
rule for this case. This is perfectly what I want I guess. I wonder if 
there's a way
to get those warnings away?

equalityExpression
options{k=3;}
       // nil == expression -> output can be simplified
    :  ^(EQ L_NIL e2=expression)
       -> nil_identical(rhs={$e2.st})
   
    |  ^(EQ e1=expression e2=expression)
       -> identical(lhs={$e1.st},
                    lhsType={map($e1.start.evalType().getQualifiedName())},
                    rhs={$e2.st})
    ;



From parrt at cs.usfca.edu  Mon May 26 09:52:51 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 26 May 2008 09:52:51 -0700
Subject: [antlr-interest] adding enum token types output for java target
Message-ID: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>

Howdy folks,

The C target gets a .h file as output to define tokens etc...  Brian  
Goetz, Sun smarty pants, asked me about generating an enum from ANTLR  
to make it easier for IDEs and other tools to use reflection to get  
token types and other goodies.  It took me 2 minutes and a few  
template lines to make this happen (i.e., no code generator changes).   
Should I add this for 3.1?  Should it be added at all?

Note that we still need a textbased ID=34 type file for data  
interchange with nonjava tools etc...

Given the late release stage, I could do for java and leave such a  
change for other targets to 3.2, though it's trivial to add.

Votes?

Ter

From parrt at cs.usfca.edu  Mon May 26 09:54:48 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 26 May 2008 09:54:48 -0700
Subject: [antlr-interest] API change for "recoverFromMismatchedSet"?
In-Reply-To: <1FF0CFC89178B64DBD5CF6696750AC4306ECB0@mailserv1.lorien.fkie.fgan.de>
References: <1FF0CFC89178B64DBD5CF6696750AC4306ECB0@mailserv1.lorien.fkie.fgan.de>
Message-ID: <55632162-4F3F-4434-88BB-1BA525C620A3@cs.usfca.edu>

actually, that's v2 to v3. this is v3.0.1 to v3.1 issue. i had a note  
in backward incomp. with match; guess I need to add for this method too.
Ter
On May 26, 2008, at 3:33 AM, Gerz, Michael wrote:

> Hello,
>
> with the recent API changes, I think that the ?error handling?  
> section at
>
> http://www.antlr.org/wiki/display/ANTLR3/Migrating+from+ANTLR+2+to+ANTLR+3
>
> needs be revised.
>
> Regards,
>
> Michael
>
>
> ************************************************************************
> Dr. Michael Gerz
> FGAN e.V.                                       Phone:  +49 228  
> 9435-414
> Department FKIE/ITF                             Fax:    +49 228  
> 9435-685
> Neuenahrer Stra?e 20                            E-Mail: gerz at fgan.de
> 53343 Wachtberg-Werthhoven, Germany             WWW:    www.fgan.de
>
> Forschungsgesellschaft f?r Angewandte Naturwissenschaften e. V. (FGAN)
> Sitz der Gesellschaft: Bonn
> Registergericht: Amtsgericht Bonn VR 2530
> Vorstand: Dr.rer.nat. R. Dornhaus (Vorst.), Prof. Dr. J. Ender  
> (Stellv.)
>
> Von: Gerz, Michael
> Gesendet: Montag, 26. Mai 2008 12:22
> An: 'antlr-interest at antlr.org'
> Betreff: API change for "recoverFromMismatchedSet"?
>
> Hello,
>
> I use the following code to suppress any kind of error handling
>
> >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
>
> @rulecatch {
>             catch (RecognitionException e) {
>                         throw e;
>             }
> }
>
> @members {
>             @Override
>             protected void mismatch(IntStream input, int ttype,  
> BitSet follow)
>                         throws RecognitionException
>             {
>                         throw new MismatchedTokenException(ttype,  
> input);
>             }
>
>             @Override
>             public void recoverFromMismatchedSet(IntStream input,  
> RecognitionException e, BitSet follow)
>                         throws RecognitionException
>             {
>                         throw e;
>             }
> }
>
> <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
>
> With the latest ANTLR snapshot as of 2008-05-25, the Java compiler  
> complains about the following problem:
>
>    The return type is incompatible with  
> BaseRecognizer.recoverFromMismatchedSet(IntStream,  
> RecognitionException, BitSet)
>
> It seems that I have to return an ?Object?. What is the proper way  
> of overwriting this method to suppress errors?
>
> Kind regards,
>
> Michael
>
> ************************************************************************
> Dr. Michael Gerz
> FGAN e.V.                                       Phone:  +49 228  
> 9435-414
> Department FKIE/ITF                             Fax:    +49 228  
> 9435-685
> Neuenahrer Stra?e 20                            E-Mail: gerz at fgan.de
> 53343 Wachtberg-Werthhoven, Germany             WWW:    www.fgan.de
>
> Forschungsgesellschaft f?r Angewandte Naturwissenschaften e. V. (FGAN)
> Sitz der Gesellschaft: Bonn
> Registergericht: Amtsgericht Bonn VR 2530
> Vorstand: Dr.rer.nat. R. Dornhaus (Vorst.), Prof. Dr. J. Ender  
> (Stellv.)
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080526/75ac0f4b/attachment-0001.html 

From parrt at cs.usfca.edu  Mon May 26 09:56:06 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 26 May 2008 09:56:06 -0700
Subject: [antlr-interest] RewriteEmptyStreamException at last brace
In-Reply-To: <2090.212.16.235.86.1211812409.squirrel@mail.uni-koblenz.de>
References: <2090.212.16.235.86.1211812409.squirrel@mail.uni-koblenz.de>
Message-ID: <9C6FACDC-A156-4187-915C-9024AB72A2D7@cs.usfca.edu>

3.0.1 or 3.1b1?
Ter
On May 26, 2008, at 7:33 AM, arjode at uni-koblenz.de wrote:

> Hi all,
>
> I've a simple grammar, basicly something Javalike. My rule looks  
> like that
> (it's realy that simple as it is unfinished):
>
>    classDecl : CLASS classBody -> ^(CLASS classBody)
>    classBody : LBRACE RBRACE -> ^(CLASSBODY)
>
> To test the error recovery I use the following input:
>
>    class {
>
> I would expect error recovery inserts the missing brace, print the  
> error
> message and the AST is generated as it should. But instead I get a
> RewriteEmptyStreamException (which indicates there is something  
> wrong with
> my grammar!?). What's going on here? Can someone explain?
>
> Thanks!
> Arne
>


From parrt at cs.usfca.edu  Mon May 26 09:57:39 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 26 May 2008 09:57:39 -0700
Subject: [antlr-interest] Proper use of options {k=..}
In-Reply-To: <483AD51F.4000505@web.de>
References: <483AD51F.4000505@web.de>
Message-ID: <0AA4040C-3592-49FE-8ABE-94780FEFA33A@cs.usfca.edu>

not in this version. a future version will have a "hushcode" that will  
turn off a warning for a specific decision.
Ter
On May 26, 2008, at 8:19 AM, Felix Dorner wrote:

> Hi,
>
> In my backend, I need to distinguish various kinds of "equality  
> expressions" of the general form
>
> ^(EQ expression expression)
>
> to simplify the generated code as much as possible. For example,
> "nil == someExpression" can be simplified. I capture those special  
> expressions with subrules. Antlr now warns me, for example that
> ^(EQ L_NIL ...) can be matched by both rules and he disabled the  
> second rule for this case. This is perfectly what I want I guess. I  
> wonder if there's a way
> to get those warnings away?
>
> equalityExpression
> options{k=3;}
>      // nil == expression -> output can be simplified
>   :  ^(EQ L_NIL e2=expression)
>      -> nil_identical(rhs={$e2.st})
>     |  ^(EQ e1=expression e2=expression)
>      -> identical(lhs={$e1.st},
>                    
> lhsType={map($e1.start.evalType().getQualifiedName())},
>                   rhs={$e2.st})
>   ;
>
>


From jimi at temporal-wave.com  Mon May 26 10:08:00 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 26 May 2008 10:08:00 -0700
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
Message-ID: <1211821680.7293.19.camel@jimi>

On Mon, 2008-05-26 at 09:52 -0700, Terence Parr wrote:

> Howdy folks,
> 
> The C target gets a .h file as output to define tokens etc...  Brian  
> Goetz, Sun smarty pants, asked me about generating an enum from ANTLR  
> to make it easier for IDEs and other tools to use reflection to get  
> token types and other goodies.  It took me 2 minutes and a few  
> template lines to make this happen (i.e., no code generator changes).   
> Should I add this for 3.1?  Should it be added at all?
> 
> Note that we still need a textbased ID=34 type file for data  
> interchange with nonjava tools etc...
> 
> Given the late release stage, I could do for java and leave such a  
> change for other targets to 3.2, though it's trivial to add.
> 
> Votes?


Yeah - I think you should do that. I thought about using enum a bit more
int he generated C code, but for most C compilers there is as yet little
difference.

> 
> Ter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080526/1147fd8b/attachment.html 

From JALuber at gmx.de  Mon May 26 10:59:55 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Mon, 26 May 2008 19:59:55 +0200
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
Message-ID: <20080526175955.253610@gmx.net>

> Howdy folks,
> 
> The C target gets a .h file as output to define tokens etc...  Brian  
> Goetz, Sun smarty pants, asked me about generating an enum from ANTLR  
> to make it easier for IDEs and other tools to use reflection to get  
> token types and other goodies.  It took me 2 minutes and a few  
> template lines to make this happen (i.e., no code generator changes).

You mean an enum for UP, DOWN, EOF, etc.? Why isn't there one already used in Java instead the int array? Why is the current solution not sufficient?

> Should I add this for 3.1?  Should it be added at all?

I'd say you can still add this feature (if you manage to convince me of its necessity). C# may be late because I get my notebook back in one or two weeks (hopefully), but you can release 3.1.1 in the case that 3.1 is published before I can update the other stuff.

Johannes
> 
> Note that we still need a textbased ID=34 type file for data  
> interchange with nonjava tools etc...
> 
> Given the late release stage, I could do for java and leave such a  
> change for other targets to 3.2, though it's trivial to add.
> 
> Votes?
> 
> Ter

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

From parrt at cs.usfca.edu  Mon May 26 11:55:39 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 26 May 2008 11:55:39 -0700
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <20080526175955.253610@gmx.net>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
	<20080526175955.253610@gmx.net>
Message-ID: <A66BA8D6-46E4-4675-9BE8-ED080FC32F3D@cs.usfca.edu>


On May 26, 2008, at 10:59 AM, Johannes Luber wrote:

>> Howdy folks,
>>
>> The C target gets a .h file as output to define tokens etc...  Brian
>> Goetz, Sun smarty pants, asked me about generating an enum from ANTLR
>> to make it easier for IDEs and other tools to use reflection to get
>> token types and other goodies.  It took me 2 minutes and a few
>> template lines to make this happen (i.e., no code generator changes).
>
> You mean an enum for UP, DOWN, EOF, etc.? Why isn't there one  
> already used in Java instead the int array? Why is the current  
> solution not sufficient?

It's for all of the generated tokens not be predefined ones, although  
I should add those as well.  Tools that use antlr-generated  
recognizers need to know what the list of tokens is in token types so  
that it can do highlighting, error recovery, auto completion, all  
sorts of things.

Ter

From parrt at cs.usfca.edu  Mon May 26 12:13:19 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 26 May 2008 12:13:19 -0700
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <A66BA8D6-46E4-4675-9BE8-ED080FC32F3D@cs.usfca.edu>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
	<20080526175955.253610@gmx.net>
	<A66BA8D6-46E4-4675-9BE8-ED080FC32F3D@cs.usfca.edu>
Message-ID: <3A05A9BC-B420-4135-B6E3-4ACB163FEA0B@cs.usfca.edu>

RatherThem a separate file, it seems like the Tokens enough and should  
be generated within the class itself like this:

enum Tokens {
    FUNC_DEF(8);
    T__23(23);
    WS(20);
    CHAR(15);
    EQ(11);
    EOF(-1);
...
    public final int tokenNum;
    public Tokens(int tokenNum) { this.tokenNum = tokenNum; }
}

all I did was add

enum Tokens {
    <tokens:{<it.name>(<it.type>);}; separator="\n">
    public final int tokenNum;
    public Tokens(int tokenNum) { this.tokenNum = tokenNum; }
}

to the output template.

The problem is that we have some duplication; I generate the following  
as well:

     public static final int Inputcharacter=31;
     public static final int COMMA=14;
     public static final int MINUS=21;

So really, it should be a replacement not an addition. That  
unfortunately makes it ickier to reference token types. you would have  
to use Tokens.MINUS instead of MINUS within the code and, externally,  
one would have to use MyParser.Tokens.MINUS. well, I guess it reads  
well, but I'm worried about such a widespread ( albeit simple) change  
to the code generation. each reference to a token type would have to  
have the Tokens. prefix on the front.

Ter

From brent.yates at gmail.com  Mon May 26 12:17:29 2008
From: brent.yates at gmail.com (Brent Yates)
Date: Mon, 26 May 2008 15:17:29 -0400
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <3A05A9BC-B420-4135-B6E3-4ACB163FEA0B@cs.usfca.edu>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
	<20080526175955.253610@gmx.net>
	<A66BA8D6-46E4-4675-9BE8-ED080FC32F3D@cs.usfca.edu>
	<3A05A9BC-B420-4135-B6E3-4ACB163FEA0B@cs.usfca.edu>
Message-ID: <6edc6c380805261217w7de54e64r1f623666d19f525f@mail.gmail.com>

I would prefer the Token.MINUS form (even if it breaks existing code) just
to resolve name conflicts that often arise.

Brent Yates

On Mon, May 26, 2008 at 3:13 PM, Terence Parr <parrt at cs.usfca.edu> wrote:

> RatherThem a separate file, it seems like the Tokens enough and should be
> generated within the class itself like this:
>
> enum Tokens {
>   FUNC_DEF(8);
>   T__23(23);
>   WS(20);
>   CHAR(15);
>   EQ(11);
>   EOF(-1);
> ...
>   public final int tokenNum;
>   public Tokens(int tokenNum) { this.tokenNum = tokenNum; }
> }
>
> all I did was add
>
> enum Tokens {
>   <tokens:{<it.name>(<it.type>);}; separator="\n">
>   public final int tokenNum;
>   public Tokens(int tokenNum) { this.tokenNum = tokenNum; }
> }
>
> to the output template.
>
> The problem is that we have some duplication; I generate the following as
> well:
>
>    public static final int Inputcharacter=31;
>    public static final int COMMA=14;
>    public static final int MINUS=21;
>
> So really, it should be a replacement not an addition. That unfortunately
> makes it ickier to reference token types. you would have to use Tokens.MINUS
> instead of MINUS within the code and, externally, one would have to use
> MyParser.Tokens.MINUS. well, I guess it reads well, but I'm worried about
> such a widespread ( albeit simple) change to the code generation. each
> reference to a token type would have to have the Tokens. prefix on the
> front.
>
> Ter
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080526/d4320fe3/attachment.html 

From parrt at cs.usfca.edu  Mon May 26 12:20:47 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 26 May 2008 12:20:47 -0700
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <6edc6c380805261217w7de54e64r1f623666d19f525f@mail.gmail.com>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
	<20080526175955.253610@gmx.net>
	<A66BA8D6-46E4-4675-9BE8-ED080FC32F3D@cs.usfca.edu>
	<3A05A9BC-B420-4135-B6E3-4ACB163FEA0B@cs.usfca.edu>
	<6edc6c380805261217w7de54e64r1f623666d19f525f@mail.gmail.com>
Message-ID: <7235D88B-A402-4533-8A97-FB3F8EF2E2A3@cs.usfca.edu>


On May 26, 2008, at 12:17 PM, Brent Yates wrote:

> I would prefer the Token.MINUS form (even if it breaks existing  
> code) just to resolve name conflicts that often arise.

Yep, and other reason to add the enum.  Is enum 1.4?  if it requires  
1.5, though, I think I will hold off because it is part of the  
runtime. I want to keep the run time 1.4 compatible for now.

Ter


From gmdidro at gmail.com  Mon May 26 12:25:33 2008
From: gmdidro at gmail.com (=?KOI8-R?B?8MXU0s/XIOHMxcvTwc7E0g==?=)
Date: Mon, 26 May 2008 23:25:33 +0400
Subject: [antlr-interest] Tree grammar's rule with alternatives -> no viable
	alternative
Message-ID: <1dcb5c470805261225k5e195460l2fc88922e0b606d9@mail.gmail.com>

---------- Forwarded message ----------
From: ?????? ????????? <gmdidro at gmail.com>
Date: 26 May 2008 23:20
Subject: Tree grammar's rule with alternatives cause no viable alternative
To: antlr-interest at antlr.org


Hello, I've sample grammars to illustrate my problem:

/////------------------------T1.g BEGIN-----------------------------/////
grammar T1;

options{ output = AST;
ASTLabelType=CommonTree;
language = CSharp;}

tokens{ CPROGRAM; NODES; SM; OBJECTNAME; }


program : name=ID ('.' d+=ID)* '.' sm=ID '.' 'go'
       -> ^(CPROGRAM ^(OBJECTNAME $name) ^(NODES $d*) ^(SM $sm) );

ID   :   ('a'..'z' | 'A'..'Z' | '_') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_')*;
/////------------------------T1.g END-----------------------------/////

/////------------------------T1tree.g BEGIN-----------------------------/////
tree grammar T1tree;

options {tokenVocab=T1;
ASTLabelType=CommonTree;
language = CSharp;}

param : ^(CPARAM ID);
program
 :
     ^(CPROGRAM ^(OBJECTNAME ID) ^(NODES ID*) ^(SM ID) )
   | ^(CPROGRAM ^(OBJECTNAME ID) ^(NODES ID*) ^(SM ID) param)
   {Console.WriteLine("OK");}
 ;
/////------------------------T1tree.g END-----------------------------/////

So when I parse the text "a.id1.id2.go", I have:

------------- GENERATED AST TREE -------------
(CPROGRAM (OBJECTNAME a) (NODES id1) (SM id2))
------------- GENERATED AST TREE -------------
Ok

But when I parse the text "a.id.go", I have:

Processing file: D:\antlr\empty nodes\test.txt
------------- GENERATED AST TREE -------------
(CPROGRAM (OBJECTNAME a) NODES (SM id))
------------- GENERATED AST TREE -------------
T1tree.g: node from line 0:-1 no viable alternative at input 'SM'
Finished processing file: D:\antlr\empty nodes\test.txt

Why ? What is the cause of "no viable alternative" error ?
I note, that if I erase the second alternative in T1.g, that all will
be all right. I don't understand it.

Thank you,
Alexander Petrov

From fridi70 at gmx.de  Mon May 26 13:10:38 2008
From: fridi70 at gmx.de (fridi70 at gmx.de)
Date: Mon, 26 May 2008 22:10:38 +0200
Subject: [antlr-interest] How to rewrite rule with optional terms?
Message-ID: <20080526201038.320280@gmx.net>

Hi,

if have a grammar like this:

op: queryOp ('>' INT)?;

INT: DIGIT+;

fragment
DIGIT: '0'..'9';


I want to rewrite the rule op in a manner that it adds '>' and '0' as children to the root if '>0' is missing.

How can I achieve this? Thanks in advance, fridi

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

From parrt at cs.usfca.edu  Mon May 26 13:13:04 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 26 May 2008 13:13:04 -0700
Subject: [antlr-interest] How to rewrite rule with optional terms?
In-Reply-To: <20080526201038.320280@gmx.net>
References: <20080526201038.320280@gmx.net>
Message-ID: <2F7A2C30-D7DD-4354-B27A-62E8F63A8DA3@cs.usfca.edu>


On May 26, 2008, at 1:10 PM, fridi70 at gmx.de wrote:

> Hi,
>
> if have a grammar like this:
>
> op: queryOp ('>' INT)?;
>

trySomething like:

op : queryOp ('>' INT -> ^('>' queryOp INT) | ->^('>' queryOp  
INT["0"])) ;

> INT: DIGIT+;
>
> fragment
> DIGIT: '0'..'9';
>
>
> I want to rewrite the rule op in a manner that it adds '>' and '0'  
> as children to the root if '>0' is missing.
>
> How can I achieve this? Thanks in advance, fridi
>
> -- 
> Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
> Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger


From arjode at uni-koblenz.de  Mon May 26 13:19:58 2008
From: arjode at uni-koblenz.de (Arne Deutsch)
Date: Mon, 26 May 2008 22:19:58 +0200
Subject: [antlr-interest] RewriteEmptyStreamException at last brace
In-Reply-To: <9C6FACDC-A156-4187-915C-9024AB72A2D7@cs.usfca.edu>
References: <2090.212.16.235.86.1211812409.squirrel@mail.uni-koblenz.de>
	<9C6FACDC-A156-4187-915C-9024AB72A2D7@cs.usfca.edu>
Message-ID: <op.ubr2rkrh40d717@seven.speedport_w_700v>

3.0.1

> 3.0.1 or 3.1b1?
> Ter
> On May 26, 2008, at 7:33 AM, arjode at uni-koblenz.de wrote:
>
>> Hi all,
>>
>> I've a simple grammar, basicly something Javalike. My rule looks like  
>> that
>> (it's realy that simple as it is unfinished):
>>
>>    classDecl : CLASS classBody -> ^(CLASS classBody)
>>    classBody : LBRACE RBRACE -> ^(CLASSBODY)
>>
>> To test the error recovery I use the following input:
>>
>>    class {
>>
>> I would expect error recovery inserts the missing brace, print the error
>> message and the AST is generated as it should. But instead I get a
>> RewriteEmptyStreamException (which indicates there is something wrong  
>> with
>> my grammar!?). What's going on here? Can someone explain?
>>
>> Thanks!
>> Arne
>>
>



From parrt at cs.usfca.edu  Mon May 26 13:26:33 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 26 May 2008 13:26:33 -0700
Subject: [antlr-interest] RewriteEmptyStreamException at last brace
In-Reply-To: <op.ubr2rkrh40d717@seven.speedport_w_700v>
References: <2090.212.16.235.86.1211812409.squirrel@mail.uni-koblenz.de>
	<9C6FACDC-A156-4187-915C-9024AB72A2D7@cs.usfca.edu>
	<op.ubr2rkrh40d717@seven.speedport_w_700v>
Message-ID: <38B421C8-76B4-4ECF-B982-FD720C9CCE70@cs.usfca.edu>

Ah. yeah,I made some big improvements there. Please take a look at  
3.1b1. you'll see it at the top of the download page
Ter
On May 26, 2008, at 1:19 PM, Arne Deutsch wrote:

> 3.0.1
>
>> 3.0.1 or 3.1b1?
>> Ter
>> On May 26, 2008, at 7:33 AM, arjode at uni-koblenz.de wrote:
>>
>>> Hi all,
>>>
>>> I've a simple grammar, basicly something Javalike. My rule looks  
>>> like that
>>> (it's realy that simple as it is unfinished):
>>>
>>>   classDecl : CLASS classBody -> ^(CLASS classBody)
>>>   classBody : LBRACE RBRACE -> ^(CLASSBODY)
>>>
>>> To test the error recovery I use the following input:
>>>
>>>   class {
>>>
>>> I would expect error recovery inserts the missing brace, print the  
>>> error
>>> message and the AST is generated as it should. But instead I get a
>>> RewriteEmptyStreamException (which indicates there is something  
>>> wrong with
>>> my grammar!?). What's going on here? Can someone explain?
>>>
>>> Thanks!
>>> Arne
>>>
>>
>
>


From JALuber at gmx.de  Mon May 26 13:46:36 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Mon, 26 May 2008 22:46:36 +0200
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <7235D88B-A402-4533-8A97-FB3F8EF2E2A3@cs.usfca.edu>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
	<20080526175955.253610@gmx.net>
	<A66BA8D6-46E4-4675-9BE8-ED080FC32F3D@cs.usfca.edu>
	<3A05A9BC-B420-4135-B6E3-4ACB163FEA0B@cs.usfca.edu>
	<6edc6c380805261217w7de54e64r1f623666d19f525f@mail.gmail.com>
	<7235D88B-A402-4533-8A97-FB3F8EF2E2A3@cs.usfca.edu>
Message-ID: <20080526204636.327140@gmx.net>

> On May 26, 2008, at 12:17 PM, Brent Yates wrote:
> 
> > I would prefer the Token.MINUS form (even if it breaks existing  
> > code) just to resolve name conflicts that often arise.
> 
> Yep, and other reason to add the enum.  Is enum 1.4?  if it requires  
> 1.5, though, I think I will hold off because it is part of the  
> runtime. I want to keep the run time 1.4 compatible for now.
> 
> Ter

enum is 1.5. It would be nice, if you could still add that to the templates within comments, so targets with a support for enums can simply change the output.

Johannes
-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

From parrt at cs.usfca.edu  Mon May 26 13:55:04 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 26 May 2008 13:55:04 -0700
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <20080526204636.327140@gmx.net>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
	<20080526175955.253610@gmx.net>
	<A66BA8D6-46E4-4675-9BE8-ED080FC32F3D@cs.usfca.edu>
	<3A05A9BC-B420-4135-B6E3-4ACB163FEA0B@cs.usfca.edu>
	<6edc6c380805261217w7de54e64r1f623666d19f525f@mail.gmail.com>
	<7235D88B-A402-4533-8A97-FB3F8EF2E2A3@cs.usfca.edu>
	<20080526204636.327140@gmx.net>
Message-ID: <E9C48C6A-FF69-4D11-99CB-9ED967BD077A@cs.usfca.edu>


On May 26, 2008, at 1:46 PM, Johannes Luber wrote:

>> On May 26, 2008, at 12:17 PM, Brent Yates wrote:
>>
>>> I would prefer the Token.MINUS form (even if it breaks existing
>>> code) just to resolve name conflicts that often arise.
>>
>> Yep, and other reason to add the enum.  Is enum 1.4?  if it requires
>> 1.5, though, I think I will hold off because it is part of the
>> runtime. I want to keep the run time 1.4 compatible for now.
>>
>> Ter
>
> enum is 1.5. It would be nice, if you could still add that to the  
> templates within comments, so targets with a support for enums can  
> simply change the output.

Actually, we could add an attribute to the output templates that  
indicates the language level. Useful for not only Java but C# as well,  
right? then we could do

<if(1_5)>
enum...
<endif>

Ter

From fyaoxy at gmail.com  Mon May 26 13:57:23 2008
From: fyaoxy at gmail.com (=?GB2312?B?z/LRxQ==?=)
Date: Tue, 27 May 2008 04:57:23 +0800
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <E9C48C6A-FF69-4D11-99CB-9ED967BD077A@cs.usfca.edu>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
	<20080526175955.253610@gmx.net>
	<A66BA8D6-46E4-4675-9BE8-ED080FC32F3D@cs.usfca.edu>
	<3A05A9BC-B420-4135-B6E3-4ACB163FEA0B@cs.usfca.edu>
	<6edc6c380805261217w7de54e64r1f623666d19f525f@mail.gmail.com>
	<7235D88B-A402-4533-8A97-FB3F8EF2E2A3@cs.usfca.edu>
	<20080526204636.327140@gmx.net>
	<E9C48C6A-FF69-4D11-99CB-9ED967BD077A@cs.usfca.edu>
Message-ID: <91dd9a4f0805261357g62f23752xf229ce0eb61f7a93@mail.gmail.com>

2008/5/27 Terence Parr <parrt at cs.usfca.edu>:

>
> On May 26, 2008, at 1:46 PM, Johannes Luber wrote:
>
>  On May 26, 2008, at 12:17 PM, Brent Yates wrote:
>>>
>>>  I would prefer the Token.MINUS form (even if it breaks existing
>>>> code) just to resolve name conflicts that often arise.
>>>>
>>>
>>> Yep, and other reason to add the enum.  Is enum 1.4?  if it requires
>>> 1.5, though, I think I will hold off because it is part of the
>>> runtime. I want to keep the run time 1.4 compatible for now.
>>>
>>> Ter
>>>
>>
>> enum is 1.5. It would be nice, if you could still add that to the
>> templates within comments, so targets with a support for enums can simply
>> change the output.
>>
>
> Actually, we could add an attribute to the output templates that indicates
> the language level. Useful for not only Java but C# as well, right? then we
> could do
>
> <if(1_5)>
> enum...
> <endif>
>
> Ter


If 1.4 needed, maybe 2 build versions needed. One for 1.4, One for 1.5.


-- 
??
??
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080527/1be7abd6/attachment.html 

From parrt at cs.usfca.edu  Mon May 26 14:00:26 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 26 May 2008 14:00:26 -0700
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <91dd9a4f0805261357g62f23752xf229ce0eb61f7a93@mail.gmail.com>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
	<20080526175955.253610@gmx.net>
	<A66BA8D6-46E4-4675-9BE8-ED080FC32F3D@cs.usfca.edu>
	<3A05A9BC-B420-4135-B6E3-4ACB163FEA0B@cs.usfca.edu>
	<6edc6c380805261217w7de54e64r1f623666d19f525f@mail.gmail.com>
	<7235D88B-A402-4533-8A97-FB3F8EF2E2A3@cs.usfca.edu>
	<20080526204636.327140@gmx.net>
	<E9C48C6A-FF69-4D11-99CB-9ED967BD077A@cs.usfca.edu>
	<91dd9a4f0805261357g62f23752xf229ce0eb61f7a93@mail.gmail.com>
Message-ID: <FF6CE19E-A530-4B0C-B71F-522EA3AD1942@cs.usfca.edu>

On May 26, 2008, at 1:57 PM, ?? wrote:
> enum is 1.5. It would be nice, if you could still add that to the  
> templates within comments, so targets with a support for enums can  
> simply change the output.
>
> Actually, we could add an attribute to the output templates that  
> indicates the language level. Useful for not only Java but C# as  
> well, right? then we could do
>
> <if(1_5)>
> enum...
> <endif>
>
> Ter
>
> If 1.4 needed, maybe 2 build versions needed. One for 1.4, One for  
> 1.5.

I suppose the "right way" would be to have Java target mean 1.4 and  
below and them have Java5 target override a method in its template  
supergroup to add the enum.

Ter

From antlr at mirality.co.nz  Mon May 26 14:09:40 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 27 May 2008 09:09:40 +1200
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <20080526204636.327140@gmx.net>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
	<20080526175955.253610@gmx.net>
	<A66BA8D6-46E4-4675-9BE8-ED080FC32F3D@cs.usfca.edu>
	<3A05A9BC-B420-4135-B6E3-4ACB163FEA0B@cs.usfca.edu>
	<6edc6c380805261217w7de54e64r1f623666d19f525f@mail.gmail.com>
	<7235D88B-A402-4533-8A97-FB3F8EF2E2A3@cs.usfca.edu>
	<20080526204636.327140@gmx.net>
Message-ID: <20080526210954.D11EF11ED98@www.antlr.org>

At 08:46 27/05/2008, Johannes Luber wrote:
 >enum is 1.5. It would be nice, if you could still add that to 
the
 >templates within comments, so targets with a support for enums 
can
 >simply change the output.

You could also make it an option, or an alternate target (like 
CSharp2).  Provided that Java supports nested classes (and I think 
it does), it's possible to build an enum-like class in the absence 
of explicit enum support.  (I did that in C++ once because I 
wanted the values to be scoped to the "enum" instead of floating 
in the parent class or global namespace.)  So the target code 
needn't change between the two.

The trouble with enums is that they're not extensible; you can't 
inherit from one and simply add a few extra values (which would be 
useful for adding imaginary tokens at the parser/treeparser 
level).  And since they can't be a base class the library code 
will still have to work with raw ints, which means a lot more 
casts will be required to type-juggle.  It gets messy very 
quickly.

You could get around this by using an enum-like-class for all 
targets (so you can have a common base in the library which the 
grammars inherit from), but then you have to create factory 
methods and possibly re-implement some of the reflection-like 
calls (since you won't be able to use the standard enum 
ones).  I'm not sure it's worth it.


From parrt at cs.usfca.edu  Mon May 26 14:19:04 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 26 May 2008 14:19:04 -0700
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <20080526210954.D11EF11ED98@www.antlr.org>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
	<20080526175955.253610@gmx.net>
	<A66BA8D6-46E4-4675-9BE8-ED080FC32F3D@cs.usfca.edu>
	<3A05A9BC-B420-4135-B6E3-4ACB163FEA0B@cs.usfca.edu>
	<6edc6c380805261217w7de54e64r1f623666d19f525f@mail.gmail.com>
	<7235D88B-A402-4533-8A97-FB3F8EF2E2A3@cs.usfca.edu>
	<20080526204636.327140@gmx.net>
	<20080526210954.D11EF11ED98@www.antlr.org>
Message-ID: <1B7A20EA-1600-4DDD-92C0-70937AD40453@cs.usfca.edu>

Yikes.I forgot about that whole "can't extend enum" thing. This could  
cause trouble for imported grammars.

I guess only ANTLR knows what tokens should go in there though; if you  
use tokens { IMAG; } it will add IMAG to the enumeration for you.

Oh crap. You're right. how can we have a generic match() method that  
compares token types?

Ter

On May 26, 2008, at 2:09 PM, Gavin Lambert wrote:

> At 08:46 27/05/2008, Johannes Luber wrote:
> >enum is 1.5. It would be nice, if you could still add that to the
> >templates within comments, so targets with a support for enums can
> >simply change the output.
>
> You could also make it an option, or an alternate target (like  
> CSharp2).  Provided that Java supports nested classes (and I think  
> it does), it's possible to build an enum-like class in the absence  
> of explicit enum support.  (I did that in C++ once because I wanted  
> the values to be scoped to the "enum" instead of floating in the  
> parent class or global namespace.)  So the target code needn't  
> change between the two.
>
> The trouble with enums is that they're not extensible; you can't  
> inherit from one and simply add a few extra values (which would be  
> useful for adding imaginary tokens at the parser/treeparser level).   
> And since they can't be a base class the library code will still  
> have to work with raw ints, which means a lot more casts will be  
> required to type-juggle.  It gets messy very quickly.
>
> You could get around this by using an enum-like-class for all  
> targets (so you can have a common base in the library which the  
> grammars inherit from), but then you have to create factory methods  
> and possibly re-implement some of the reflection-like calls (since  
> you won't be able to use the standard enum ones).  I'm not sure it's  
> worth it.
>


From parrt at cs.usfca.edu  Mon May 26 14:56:43 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 26 May 2008 14:56:43 -0700
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <483B2B28.3040303@sun.com>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
	<20080526175955.253610@gmx.net>
	<A66BA8D6-46E4-4675-9BE8-ED080FC32F3D@cs.usfca.edu>
	<3A05A9BC-B420-4135-B6E3-4ACB163FEA0B@cs.usfca.edu>
	<6edc6c380805261217w7de54e64r1f623666d19f525f@mail.gmail.com>
	<7235D88B-A402-4533-8A97-FB3F8EF2E2A3@cs.usfca.edu>
	<20080526204636.327140@gmx.net>
	<20080526210954.D11EF11ED98@www.antlr.org>
	<1B7A20EA-1600-4DDD-92C0-70937AD40453@cs.usfca.edu>
	<483B2B28.3040303@sun.com>
Message-ID: <40CA27A6-58FC-4E6D-9797-8762EDBFADA0@cs.usfca.edu>


On May 26, 2008, at 2:27 PM, Brian Goetz wrote:

> Think of the enum as a form of "reflection for ANTLR grammars."  Its  
> not required that you actually have to USE the generated enum; its a  
> way for third-party code to enumerate the tokens, including their  
> names.  The enums can also be used as keys in hashmaps.
>
> If you import another grammar, and therefore its tokens become  
> yours, you can simply "inline" the set of tokens at each level of  
> the hierarchy.  (In that case, you could include as a constructor  
> param the grammar from which they are imported, to further preserve  
> the provenance.)

So we'd leave everything as-is, just provide a new enum as a  
reflection thing.  I could buy that.  I'd make it in a separate file  
though like a .h file so it wouldn't look weird (i.e., like a dup) in  
the parser file.  It'd be XTokens.java for recognizer X.  Would that  
work for everybody?

Ter

From JALuber at gmx.de  Mon May 26 15:32:58 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Tue, 27 May 2008 00:32:58 +0200
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <40CA27A6-58FC-4E6D-9797-8762EDBFADA0@cs.usfca.edu>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
	<20080526175955.253610@gmx.net>
	<A66BA8D6-46E4-4675-9BE8-ED080FC32F3D@cs.usfca.edu>
	<3A05A9BC-B420-4135-B6E3-4ACB163FEA0B@cs.usfca.edu>
	<6edc6c380805261217w7de54e64r1f623666d19f525f@mail.gmail.com>
	<7235D88B-A402-4533-8A97-FB3F8EF2E2A3@cs.usfca.edu>
	<20080526204636.327140@gmx.net>	<20080526210954.D11EF11ED98@www.antlr.org>
	<1B7A20EA-1600-4DDD-92C0-70937AD40453@cs.usfca.edu>
	<483B2B28.3040303@sun.com>
	<40CA27A6-58FC-4E6D-9797-8762EDBFADA0@cs.usfca.edu>
Message-ID: <20080526223258.327130@gmx.net>

> On May 26, 2008, at 2:27 PM, Brian Goetz wrote:
> 
> > Think of the enum as a form of "reflection for ANTLR grammars."  Its  
> > not required that you actually have to USE the generated enum; its a  
> > way for third-party code to enumerate the tokens, including their  
> > names.  The enums can also be used as keys in hashmaps.
> >
> > If you import another grammar, and therefore its tokens become  
> > yours, you can simply "inline" the set of tokens at each level of  
> > the hierarchy.  (In that case, you could include as a constructor  
> > param the grammar from which they are imported, to further preserve  
> > the provenance.)
> 
> So we'd leave everything as-is, just provide a new enum as a  
> reflection thing.  I could buy that.  I'd make it in a separate file  
> though like a .h file so it wouldn't look weird (i.e., like a dup) in  
> the parser file.  It'd be XTokens.java for recognizer X.  Would that  
> work for everybody?
> 
> Ter

It would for me. BTW, C# always supported enums. Considering that enums are mapped onto other base types, this language feature can be resolved by compilers easily - thus I've never understood why Java didn't support them from the beginning.

Johannes

-- 
Super-Aktion nur in der GMX Spieleflat: 10 Tage f?r 1 Euro.
?ber 180 Spiele downloaden und spiele: http://flat.games.gmx.de

From waldemarsauer at hotmail.com  Mon May 26 22:26:14 2008
From: waldemarsauer at hotmail.com (Waldemar Sauer)
Date: Tue, 27 May 2008 01:26:14 -0400
Subject: [antlr-interest] Multiple grammar files
Message-ID: <BAY136-W532F34015EC29864A2DB49BABD0@phx.gbl>

I'm writing a grammar that getting close to 2000 lines. It is becoming cumbersome to find stuff in there, so I was wondering: what is the recommended way in antlr to separate a single grammar into separate files? Let?s say you have the following grammar g1.g:
 
grammar g1; options { language=C;  }
a: b c;
b: ?literal1?;
c: ?literal2?;
 
How can I put the rules for b and c in separate files?
 
 
_________________________________________________________________
Change the world with e-mail. Join the i?m Initiative from Microsoft.
http://im.live.com/Messenger/IM/Join/Default.aspx?source=EML_WL_ChangeWorld
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080527/a5c3569e/attachment.html 

From parrt at cs.usfca.edu  Mon May 26 23:08:11 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 26 May 2008 23:08:11 -0700
Subject: [antlr-interest] Multiple grammar files
In-Reply-To: <BAY136-W532F34015EC29864A2DB49BABD0@phx.gbl>
References: <BAY136-W532F34015EC29864A2DB49BABD0@phx.gbl>
Message-ID: <00E59BB6-7B7D-4483-9D04-0200A2B2BF25@cs.usfca.edu>

3.1 has a grammar import. :)
Ter
On May 26, 2008, at 10:26 PM, Waldemar Sauer wrote:

> I'm writing a grammar that getting close to 2000 lines. It is  
> becoming cumbersome to find stuff in there, so I was wondering: what  
> is the recommended way in antlr to separate a single grammar into  
> separate files? Let?s say you have the following grammar g1.g:
>
> grammar g1; options { language=C;  }
> a: b c;
> b: ?literal1?;
> c: ?literal2?;
>
> How can I put the rules for b and c in separate files?
>
>
>
> Change the world with e-mail. Join the i?m Initiative from Microsoft.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080526/58a9efdd/attachment-0001.html 

From g.vandeglind at beinformed.nl  Tue May 27 04:37:54 2008
From: g.vandeglind at beinformed.nl (Gerard van de Glind)
Date: Tue, 27 May 2008 13:37:54 +0200
Subject: [antlr-interest] how to resolve ambiguity considering identifiers
	vs mathematical constants
Message-ID: <35AC19B502E98D42879AFA71FAD9CDCC295D53@UTEX01.be-value.nl>

Hi,

 

I am writing a grammar (using antlr 3) that should be able to parse
identifiers and mathematical constants (they may be used in more complex
constructs). For example, the mathematical constant PI and E. Depending
on the context they can also be identifiers.

How can I best resolve this ambiguity? 

 

Thanks in advance!

 

Gerard

 

 

Here is a simplified grammar: 

 

expression

                :              MATH_CONSTANT | IDENTIFIER;

 

MATH_CONSTANT 

                :              'E' | 'PI';

 

IDENTIFIER 

 :             ('a'..'z'|'A'..'Z')
('0'..'9'|'a'..'z'|'A'..'Z'|'_'|'.')*;

 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080527/7ef67585/attachment.html 

From antlr at mirality.co.nz  Tue May 27 05:33:24 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 28 May 2008 00:33:24 +1200
Subject: [antlr-interest] how to resolve ambiguity considering
 identifiers vs mathematical constants
In-Reply-To: <35AC19B502E98D42879AFA71FAD9CDCC295D53@UTEX01.be-value.nl>
References: <35AC19B502E98D42879AFA71FAD9CDCC295D53@UTEX01.be-value.nl>
Message-ID: <20080527123335.171FF11EDC0@www.antlr.org>

At 23:37 27/05/2008, Gerard van de Glind wrote:
>I am writing a grammar (using antlr 3) that should be able to 
>parse identifiers and mathematical constants (they may be used in 
>more complex constructs). For example, the mathematical constant 
>PI and E. Depending on the context they can also be identifiers.
>How can I best resolve this ambiguity?
>
>Thanks in advance!
>
>Gerard
>
>
>Here is a simplified grammar:
>
>expression
>                 :              MATH_CONSTANT | IDENTIFIER;
>
>MATH_CONSTANT
>                 :              'E' | 'PI';
>
>IDENTIFIER
>  :             ('a'..'z'|'A'..'Z') 
> ('0'..'9'|'a'..'z'|'A'..'Z'|'_'|'.')*;

What you've already got there should work.  (You might get an 
ambiguity warning, but you should be able to just ignore it.)  The 
important thing is to list your most specific rules (keywords etc 
like MATH_CONSTANT) before the more general rules (like 
IDENTIFIER).

(Having said that, sometimes the lexer lookahead generation seems 
to get a bit confused, and you need to do more work to help it 
out.  So write lots of unit tests.)

If there's another case at the parser level where you want to 
treat a MATH_CONSTANT as if it were an IDENTIFIER, then you just 
need to put in a parser rule (similar to expression above) which 
recognises both.  If you're constructing an AST, you can also 
convert the MATH_CONSTANT token to an IDENTIFIER one if you want 
to at the same time.


From David.Raymer at motorola.com  Tue May 27 05:52:26 2008
From: David.Raymer at motorola.com (Raymer David-fdr017)
Date: Tue, 27 May 2008 07:52:26 -0500
Subject: [antlr-interest] problem with unicode characters in comments
	within ANTLR .g files ...
In-Reply-To: <5847B64B-6323-45EC-A750-0AF9BA0A5C27@cs.usfca.edu>
References: <EDC0C53BE7E5D549A9E2577C7412219301EEE526@tx14exm60.ds.mot.com>
	<5847B64B-6323-45EC-A750-0AF9BA0A5C27@cs.usfca.edu>
Message-ID: <EDC0C53BE7E5D549A9E2577C7412219301EEE794@tx14exm60.ds.mot.com>



Tried all the various combinations of \', etc, same errors. 

I've worked around it be dropping the comments for now.


Dave Raymer
D: (817)-245-6834 	M:(817)501-2665 	ICBM: 32.9? N 97.2? W 
All that is necessary for the triumph of evil is for good men to do nothing
-- attributed to Edmund Burke 



-----Original Message-----
From: Terence Parr [mailto:parrt at cs.usfca.edu] 
Sent: Friday, May 23, 2008 1:47 PM
To: Raymer David-fdr017
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] problem with unicode characters in comments within ANTLR .g files ...

Hi. v3.1Gives you a better error message, though still does not like  
those characters. basically, the comment scanner should look to the  
end of line, but apparently it reuses a rule in the grammar lexer that  
skips over strings and so on.  Try \' etc...
Ter
On May 23, 2008, at 7:19 AM, Raymer David-fdr017 wrote:

> Found what may be a problem ...
>
> The follow ANTRL v3 fragment generates just fine ...
>
> O_SQUOTE     : '\u2018'; //
> C_SQUOTE     : '\u2019'; //
> O_DQUOTE     : '\u201C'; //
> C_DQUOTE     : '\u201D'; //
>
> This fragment generates an exception ...
>
> O_SQUOTE     : '\u2018'; // '
> C_SQUOTE     : '\u2019'; // '
> DQUOTE       : '\"';
> O_DQUOTE     : '\u201C'; // "
> C_DQUOTE     : '\u201D'; // "
>
> [09:04:26] BPL.g:456:24: unexpected char: ' '
>  at org.antlr.tool.ANTLRLexer.nextToken(ANTLRLexer.java:321)
>  at  
> antlr 
> .TokenStreamRewriteEngine.nextToken(TokenStreamRewriteEngine.java:161)
>  at antlr.TokenBuffer.fill(TokenBuffer.java:69)
>  at antlr.TokenBuffer.LA(TokenBuffer.java:80)
>  at antlr.LLkParser.LA(LLkParser.java:52)
>  at org.antlr.tool.ANTLRParser.altList(ANTLRParser.java:1453)
>  at org.antlr.tool.ANTLRParser.rule(ANTLRParser.java:1236)
>  at org.antlr.tool.ANTLRParser.rules(ANTLRParser.java:655)
>  at org.antlr.tool.ANTLRParser.grammar(ANTLRParser.java:389)
>  at org.antlr.tool.Grammar.setGrammarContent(Grammar.java:521)
>  at org.antlr.tool.Grammar.setGrammarContent(Grammar.java:497)
>  at org.antlr.works.grammar.EngineGrammar.createNewGrammar(Unknown  
> Source)
>  at  
> org.antlr.works.grammar.EngineGrammar.createParserGrammar(Unknown  
> Source)
>  at  
> org.antlr.works.grammar.EngineGrammar.createCombinedGrammar(Unknown  
> Source)
>  at org.antlr.works.grammar.EngineGrammar.createGrammars(Unknown  
> Source)
>  at org.antlr.works.grammar.EngineGrammar.analyze(Unknown Source)
>  at org.antlr.works.grammar.CheckGrammar.run(Unknown Source)
>  at java.lang.Thread.run(Unknown Source)
> The problem appears to the be the non-\ encoded unicode characters.  
> Is this behavior expected?
>
> Dave Raymer
> Motorola Labs, Network Research CoE, NIRL Autonomics and Policy  
> Research Group
> Software and System Architect for Autonomics and Policy Research
> Distinguished Member of the Technical Staff
> Distinguished Fellow of the TeleManagement Forum
> D: (817)-245-6834       M:(817)501-2665         ICBM: 32.9? N 97.2? W
> All that is necessary for the triumph of evil is for good men to do  
> nothing
> -- attributed to Edmund Burke 
>
>


From fridi70 at gmx.de  Tue May 27 06:40:02 2008
From: fridi70 at gmx.de (fridi70 at gmx.de)
Date: Tue, 27 May 2008 15:40:02 +0200
Subject: [antlr-interest] Tree grammar conditionally run subrule
Message-ID: <20080527134002.56670@gmx.net>

Hi,

I have a tree grammar that handles some AND and OR logic and works very well. For performance reasons, in 'OR' I want to run 'b = expression' only if a is false. How can I realize this in the grammar?
Thanks for any answer,
  fridi





expression returns [bool r = false]
: ^(OR a = expression
       b = expression
       {
	  $r = a || b;
       }
    )

| ^(AND a = expression
	b = expression
	{
	  $r = a && b;
	}

| a = condition 
	{
	  $r = a;
	}
      
)


-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

From g.vandeglind at beinformed.nl  Tue May 27 08:24:18 2008
From: g.vandeglind at beinformed.nl (Gerard van de Glind)
Date: Tue, 27 May 2008 17:24:18 +0200
Subject: [antlr-interest] how to resolve ambiguity considering
	identifiers vs mathematical constants
In-Reply-To: <20080527123335.0F2D4222BB6A@spam.be-value.nl>
References: <35AC19B502E98D42879AFA71FAD9CDCC295D53@UTEX01.be-value.nl>
	<20080527123335.0F2D4222BB6A@spam.be-value.nl>
Message-ID: <35AC19B502E98D42879AFA71FAD9CDCC295DB2@UTEX01.be-value.nl>

>I am writing a grammar (using antlr 3) that should be able to 
>parse identifiers and mathematical constants (they may be used in 
>more complex constructs). For example, the mathematical constant 
>PI and E. Depending on the context they can also be identifiers.
>How can I best resolve this ambiguity?
>
>Thanks in advance!
>
>Gerard
>
>
>Here is a simplified grammar:
>
>expression
>                 :              MATH_CONSTANT | IDENTIFIER;
>
>MATH_CONSTANT
>                 :              'E' | 'PI';
>
>IDENTIFIER
>  :             ('a'..'z'|'A'..'Z') 
> ('0'..'9'|'a'..'z'|'A'..'Z'|'_'|'.')*;

What you've already got there should work.  (You might get an 
ambiguity warning, but you should be able to just ignore it.)  The 
important thing is to list your most specific rules (keywords etc 
like MATH_CONSTANT) before the more general rules (like 
IDENTIFIER).

(Having said that, sometimes the lexer lookahead generation seems 
to get a bit confused, and you need to do more work to help it 
out.  So write lots of unit tests.)

If there's another case at the parser level where you want to 
treat a MATH_CONSTANT as if it were an IDENTIFIER, then you just 
need to put in a parser rule (similar to expression above) which 
recognises both.  If you're constructing an AST, you can also 
convert the MATH_CONSTANT token to an IDENTIFIER one if you want 
to at the same time.


Thanks Gavin,

You directed me to a solution to my problem. I changed my grammar to the
following (I use a # to tell my grammar it is dealing with a math
constant):

expression		:              MATH_CONSTANT | IDENTIFIER;

MATH_CONSTANT	:              ('E' | 'PI') '#';

IDENTIFIER		:             ('a'..'z'|'A'..'Z')
('0'..'9'|'a'..'z'|'A'..'Z'|'_'|'.')*;


From paulofachinetti at gmail.com  Tue May 27 12:33:21 2008
From: paulofachinetti at gmail.com (Paulo Azevedo)
Date: Tue, 27 May 2008 16:33:21 -0300
Subject: [antlr-interest] email
Message-ID: <b1636c10805271233q2627e50cq7ffa9a76418c2a37@mail.gmail.com>



From paulofachinetti at gmail.com  Tue May 27 12:37:02 2008
From: paulofachinetti at gmail.com (Paulo Azevedo)
Date: Tue, 27 May 2008 16:37:02 -0300
Subject: [antlr-interest] Question
Message-ID: <b1636c10805271237q3da7ccf3gab282ad5bcf11924@mail.gmail.com>

Hi, i am new to antlr, i bought the book and i am getting used to it.
My question is, is it possible to use antlr to generate java code to
be ran in some point in the future, instead os execute it right a way.

thanks

From antlr at mirality.co.nz  Tue May 27 13:32:28 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 28 May 2008 08:32:28 +1200
Subject: [antlr-interest] Question
In-Reply-To: <b1636c10805271237q3da7ccf3gab282ad5bcf11924@mail.gmail.com
 >
References: <b1636c10805271237q3da7ccf3gab282ad5bcf11924@mail.gmail.com>
Message-ID: <20080527203240.E58BD11ED6D@www.antlr.org>

At 07:37 28/05/2008, Paulo Azevedo wrote:
 >Hi, i am new to antlr, i bought the book and i am getting used 
to
 >it.
 >My question is, is it possible to use antlr to generate java 
code
 >to be ran in some point in the future, instead os execute it
 >right a way.

I'm not sure I understand the question, because that's what ANTLR 
*does* do anyway.


From r.mark.volkmann at gmail.com  Tue May 27 13:53:24 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Tue, 27 May 2008 15:53:24 -0500
Subject: [antlr-interest] Question
In-Reply-To: <20080527203240.E58BD11ED6D@www.antlr.org>
References: <b1636c10805271237q3da7ccf3gab282ad5bcf11924@mail.gmail.com>
	<20080527203240.E58BD11ED6D@www.antlr.org>
Message-ID: <f0fcc6820805271353g80cb651r6e96b4f19719503a@mail.gmail.com>

On Tue, May 27, 2008 at 3:32 PM, Gavin Lambert <antlr at mirality.co.nz> wrote:
> At 07:37 28/05/2008, Paulo Azevedo wrote:
>>Hi, i am new to antlr, i bought the book and i am getting used to
>>it.
>>My question is, is it possible to use antlr to generate java code
>>to be ran in some point in the future, instead os execute it
>>right a way.
>
> I'm not sure I understand the question, because that's what ANTLR *does* do
> anyway.

I like to think of ANTLR as supporting three specific use cases.
1) Simply validate input.
2) Process input, doing something with it other than outputting code
to be executed later.
3) Translate input into some programming language or bytecode to be
executed later.

I think Paulo wants to do #3. I recommending using the StringTemplate
library along with ANTLR to produce the Java code output.

-- 
R. Mark Volkmann
Object Computing, Inc.

From jstpierre-antlr at mecheye.net  Tue May 27 16:02:01 2008
From: jstpierre-antlr at mecheye.net (ANTLR Mailing List)
Date: Tue, 27 May 2008 19:02:01 -0400
Subject: [antlr-interest] ANTLR Questions
Message-ID: <4ff3ab470805271602m38cfc188l7ecb04dc8cf73df4@mail.gmail.com>

Using this grammar:
http://www.antlr.org/pipermail/antlr-interest/attachments/20080526/595e3dfb/attachment-0001.obj

I seem to get ambiguity errors, or so I think. The error messages are
very ambiguous themselves (Yes, I know, wait until ANTLR 3 is built on
ANTLR 3), but I cannot pinpoint the results of them..

Also, Random Questions:
 * How do hetero trees work in 3.1? I looked at the wiki, but I was
confused as how the flat tree system works. What are the differences
between this system and the usual standard AST model?
 * How would you create a code generator using a tree grammar?
 * What would be an efficient system for entering and exiting contexts?

My project is porting the hand-written parsing/lexing stuff of ESC
from mozilla ( http://hg.mozilla.org/index.cgi/tamarin-central/file/548a350c9c29/esc/src/
, parse.es, lex-*.es and ast.es) into a more manageable ANTLR grammar.

Any suggestions?

From mark.k.widdowson at jpmorgan.com  Wed May 28 00:51:57 2008
From: mark.k.widdowson at jpmorgan.com (mark.k.widdowson at jpmorgan.com)
Date: Wed, 28 May 2008 08:51:57 +0100
Subject: [antlr-interest] Nested Comments
Message-ID: <OF5703CAC2.9C76D392-ON80257457.002AE45C-80257457.002B352B@jpmchase.com>

Hi,
I've been developing a Sybase SQL stored proc parser using ANTLR3, and 
have run into the problem of dealing with nested comments

e.g.

/*
select  * 
from hello  /* table*/
where
field1 = 'world' /* field*/

*/

Ideally, I need to retain the line numbers whilst removing any nested 
comments,

any ideas ?

regards
Mark.


Generally, this communication is for informational purposes only
and it is not intended as an offer or solicitation for the purchase
or sale of any financial instrument or as an official confirmation
of any transaction. In the event you are receiving the offering
materials attached below related to your interest in hedge funds or
private equity, this communication may be intended as an offer or
solicitation for the purchase or sale of such fund(s).  All market
prices, data and other information are not warranted as to
completeness or accuracy and are subject to change without notice.
Any comments or statements made herein do not necessarily reflect
those of JPMorgan Chase & Co., its subsidiaries and affiliates.

This transmission may contain information that is privileged,
confidential, legally privileged, and/or exempt from disclosure
under applicable law. If you are not the intended recipient, you
are hereby notified that any disclosure, copying, distribution, or
use of the information contained herein (including any reliance
thereon) is STRICTLY PROHIBITED. Although this transmission and any
attachments are believed to be free of any virus or other defect
that might affect any computer system into which it is received and
opened, it is the responsibility of the recipient to ensure that it
is virus free and no responsibility is accepted by JPMorgan Chase &
Co., its subsidiaries and affiliates, as applicable, for any loss
or damage arising in any way from its use. If you received this
transmission in error, please immediately contact the sender and
destroy the material in its entirety, whether in electronic or hard
copy format. Thank you.
Please refer to http://www.jpmorgan.com/pages/disclosures for
disclosures relating to UK legal entities.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080528/0248e634/attachment.html 

From antlr at mirality.co.nz  Wed May 28 01:54:23 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 28 May 2008 20:54:23 +1200
Subject: [antlr-interest] ANTLR Questions
In-Reply-To: <4ff3ab470805271602m38cfc188l7ecb04dc8cf73df4@mail.gmail.co
 m>
References: <4ff3ab470805271602m38cfc188l7ecb04dc8cf73df4@mail.gmail.com>
Message-ID: <20080528085439.2A97811ED26@www.antlr.org>

At 11:02 28/05/2008, ANTLR Mailing List wrote:
 >Using this grammar:
 >http://www.antlr.org/pipermail/antlr-interest/attachments/2008
 >0526/595e3dfb/attachment-0001.obj
 >
 >I seem to get ambiguity errors, or so I think. The error 
messages
 >are very ambiguous themselves (Yes, I know, wait until ANTLR 3 
is
 >built on ANTLR 3), but I cannot pinpoint the results of them..

A very quick glance over the grammar suggests these might be 
problems:

1. The use of ~IdentifierPart means you're actually consuming the 
following non-IdentifierPart character, which may not be what you 
want.  You should probably use a syntactic predicate instead.

2. Actually, you probably shouldn't do it at all, since 
'IdentifierPart' is not a character set, it is a sequence (it 
contains IdentifierStart, which contains EscapeSequence, which can 
represent a sequence of characters); it's illegal to use ~ on a 
sequence.

3. Your various integer tokens are ambiguous; remember, the lexer 
doesn't have any context, and can't lookahead past a + or * 
without an explicit syntactic predicate (or backtracking, which 
doesn't work in the lexer).  You'll need to merge all of these 
into one rule with type switches depending on predicates.

4. RegExpLiteral, SingleLineComment, MultiLineComment, and 
DocComment are all ambiguous (RegExpLiteral can match all of 
them).

5. MultiLineCommentInside is just plain illegal, as previously 
mentioned.  To do reversed sequences you have to explicitly spell 
out the possibilities; ie. instead of this:
    ~'*/'
you need to do this:
    (~'*' | '*' ~'/')
Another option is to use ANTLR's automatic non-greedy matching and 
change MultiLineComment to:
   '/*' .* '*/'
(You can't extract a fragment out of that though, it won't work.)

You also need to watch out a bit for over-use of fragments.  Since 
fragments are still treated as rules (they get their own method) 
they unfortunately don't always give the same behaviour as when 
they're inlined.  This is especially true when used with ~.

 > * How would you create a code generator using a tree grammar?

You make the parser output an AST, then create a tree grammar to 
recognise that AST and either output the desired code directly or 
use StringTemplate to do it for you.

 > * What would be an efficient system for entering and exiting
 >contexts?

You mean like scopes?  ANTLR provides stackable scopes, which are 
useful for contextual information.


From antlr at mirality.co.nz  Wed May 28 01:57:08 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 28 May 2008 20:57:08 +1200
Subject: [antlr-interest] Nested Comments
In-Reply-To: <OF5703CAC2.9C76D392-ON80257457.002AE45C-80257457.002B352B@
	jpmchase.com>
References: <OF5703CAC2.9C76D392-ON80257457.002AE45C-80257457.002B352B@jpmchase.com>
Message-ID: <20080528085721.B872F11ED17@www.antlr.org>

At 19:51 28/05/2008, mark.k.widdowson at jpmorgan.com wrote:
>I've been developing a Sybase SQL stored proc parser using 
>ANTLR3, and have run into the problem of dealing with nested 
>comments
>
>e.g.
>
>/*
>select  *
>from hello  /* table*/
>where
>field1 = 'world' /* field*/
>
>*/
>
>Ideally, I need to retain the line numbers whilst removing any 
>nested comments,

This is just air code, but:

MultiLineComment
   :  '/*'
      ( ('/*') => MultiLineComment
      | ~'*'
      | '*' ~'/'
      )*
      '*/'
   ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080528/2d1e1fb2/attachment.html 

From open.zone at virgin.net  Wed May 28 07:17:11 2008
From: open.zone at virgin.net (Micheal J)
Date: Wed, 28 May 2008 15:17:11 +0100
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <20080526210954.D11EF11ED98@www.antlr.org>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu><20080526175955.253610@gmx.net><A66BA8D6-46E4-4675-9BE8-ED080FC32F3D@cs.usfca.edu><3A05A9BC-B420-4135-B6E3-4ACB163FEA0B@cs.usfca.edu><6edc6c380805261217w7de54e64r1f623666d19f525f@mail.gmail.com><7235D88B-A402-4533-8A97-FB3F8EF2E2A3@cs.usfca.edu><20080526204636.327140@gmx.net>
	<20080526210954.D11EF11ED98@www.antlr.org>
Message-ID: <015601c8c0cd$8909ab00$0300a8c0@marion>

Hi,

> The trouble with enums is that they're not extensible; you 
> can't inherit from one and simply add a few extra values 
> (which would be useful for adding imaginary tokens at the 
> parser/treeparser level).  And since they can't be a base 
> class the library code will still have to work with raw ints, 
> which means a lot more casts will be required to type-juggle. 
>  It gets messy very quickly.

Precisely. The C# target had enums in early v2.7.x releases.

We removed them to ease the task of maintaining C# and Java recognizers
simultaneously for v2 but, also because it reduce the need to typecast.

We originally planned to generate both the int constants and an emun type in
the v3 target...

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 


From antlr at jazillian.com  Wed May 28 08:30:06 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Wed, 28 May 2008 11:30:06 -0400
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
Message-ID: <483D7A7E.9000504@jazillian.com>

I'd suggest creating a tool that's separate from ANTLR itself,
starting with the ANTLR-generated "ID=34" format file
to produce enums. This would be a great example of how to get started StringTemplate,
without having to know any ANTLR. It would also avoid the "ANTLR generates
only JDK1.4" issue.

And I'll be interested to see if StringTemplate lets me write it in less time than it took
to write it in Java (5 mins?).

Andy

From parrt at cs.usfca.edu  Wed May 28 08:48:41 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 28 May 2008 08:48:41 -0700
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <483D7A7E.9000504@jazillian.com>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
	<483D7A7E.9000504@jazillian.com>
Message-ID: <B48F21EE-383D-44E4-B97B-271D2EDF72C0@cs.usfca.edu>


On May 28, 2008, at 8:30 AM, Andy Tripp wrote:

> I'd suggest creating a tool that's separate from ANTLR itself,
> starting with the ANTLR-generated "ID=34" format file
> to produce enums. This would be a great example of how to get  
> started StringTemplate,
> without having to know any ANTLR. It would also avoid the "ANTLR  
> generates
> only JDK1.4" issue.
>
> And I'll be interested to see if StringTemplate lets me write it in  
> less time than it took
> to write it in Java (5 mins?).

sed can do it in 1 command in 3 seconds ;)

Ter

From jimi at temporal-wave.com  Wed May 28 08:51:10 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 28 May 2008 08:51:10 -0700
Subject: [antlr-interest] adding enum token types output for java target
In-Reply-To: <B48F21EE-383D-44E4-B97B-271D2EDF72C0@cs.usfca.edu>
References: <1CB1FAE9-8EB5-4EAA-A719-63C9753911A9@cs.usfca.edu>
	<483D7A7E.9000504@jazillian.com>
	<B48F21EE-383D-44E4-B97B-271D2EDF72C0@cs.usfca.edu>
Message-ID: <1211989870.9644.43.camel@jimi>

On Wed, 2008-05-28 at 08:48 -0700, Terence Parr wrote:

> On May 28, 2008, at 8:30 AM, Andy Tripp wrote:
> 
> > I'd suggest creating a tool that's separate from ANTLR itself,
> > starting with the ANTLR-generated "ID=34" format file
> > to produce enums. This would be a great example of how to get  
> > started StringTemplate,
> > without having to know any ANTLR. It would also avoid the "ANTLR  
> > generates
> > only JDK1.4" issue.
> >
> > And I'll be interested to see if StringTemplate lets me write it in  
> > less time than it took
> > to write it in Java (5 mins?).
> 
> sed can do it in 1 command in 3 seconds ;)



That University needs to upgrade your 1990's laptop, unless you are
talking about how long it took you to type the command ;-)

> 
> Ter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080528/3a677b1c/attachment.html 

From mark.pollack at springsource.com  Wed May 28 08:57:51 2008
From: mark.pollack at springsource.com (Mark Pollack)
Date: Wed, 28 May 2008 11:57:51 -0400
Subject: [antlr-interest] Request for Strongly Signed Antlr3.Runtime.dll
	(3.0.1)
Message-ID: <004201c8c0db$963e3850$c2baa8f0$@pollack@springsource.com>

Hi,

 

We use Antlr quite heavily in an open source project, Spring.NET, and we
must sign all of our assemblies.  I want to update from 2.7 to 3.0.1 but
noticed that the assembly is not strongly signed.  In the past
<http://www.antlr.org/pipermail/antlr-interest/2006-January/015149.html
> I was able to track down the source code and recompile myself but I can't
locate the source for Antlr3.Runtime.dll now and it would of course be
better if it was done by the Antlr team.

 

Is it possible to get a strongly signed 3.0.1 runtime dll?  If not, can it
be done for the 3.1 release?   I'm happy to lend a hand to help out and even
compile myself, contribute back, if you can point me in the right direction.


 

Thanks again for the great software!

 

Cheers,

Mark

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080528/27ac8dd2/attachment.html 

From gmdidro at gmail.com  Wed May 28 10:03:16 2008
From: gmdidro at gmail.com (=?KOI8-R?B?8MXU0s/XIOHMxcvTwc7E0g==?=)
Date: Wed, 28 May 2008 21:03:16 +0400
Subject: [antlr-interest] [bug?] Unrecognized escape sequence in Lexer .cs
	code(3.1b1 C# Target)
Message-ID: <1dcb5c470805281003qb63478mc69d29ff443e12fb@mail.gmail.com>

Hello,
the Lexer code generated in accordance to the following grammar gets
the many errors "LPMEDLexer.cs(510,11): error CS1009: Unrecognized
escape sequence".

It seems to me, that when ANTLR generates a code for DFA, it doesn't
use "@" for format-string representation:

LPMEDLexer.cs
line: 510
        "\3\uffff\2\10\4\uffff\4\10\1\17\1\10\1\uffff\1\21\1\uffff";
it should be
        @"\3\uffff\2\10\4\uffff\4\10\1\17\1\10\1\uffff\1\21\1\uffff";

I also have such errors in Parser and Tree Parser code, but can't
reproduce it with a small grammar.

Is it a bug ?
----------------------------------------------------------------------------------------------------------------------
grammar LPMED;
options{ language = CSharp; }
tokens{ CINT; CBOOL; }

program : atom '.' ;

atom
options
{
	backtrack=true;
}	:		dMFID
		| 	INT	//-> ^(CINT INT)
		|	dBOOL	//-> ^(CBOOL dBOOL)
;

dMFID	: ',' atom | ID;

dBOOL :
 'true'
|'false'
;

	
INT 	:	('0'..'9')+ ;
WS  	:   (   ' '
       	|   '\t'
        |   '\r'
        |   '\n'
        )+
        { $channel=HIDDEN; }
    ;

fragment NEWLINE
	:	'\r'|'\n'
;

LINECOMMENT
	:	'//' ~('\r'|'\n')* NEWLINE {$channel=HIDDEN;}
;

ID  	:   ('a'..'z' | 'A'..'Z' | '_') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_')*;
----------------------------------------------------------------------------------------------------------------------

//ANTLR Parser Generator  Version 3.1b1 (May 20, 2008)  1989-2008
//LPMEDLexer.cs(510,11): error CS1009: Unrecognized escape sequence

Thank you

From gmdidro at gmail.com  Wed May 28 10:29:35 2008
From: gmdidro at gmail.com (=?KOI8-R?B?8MXU0s/XIOHMxcvTwc7E0g==?=)
Date: Wed, 28 May 2008 21:29:35 +0400
Subject: [antlr-interest] [bug?] The using alias 'Hashtable' appeared twice
	in Tree Parser .cs code (3.1b1 C# Target)
Message-ID: <1dcb5c470805281029o4afc3b9coc1da7ceef434b18f@mail.gmail.com>

Hello,

When I generate C# code for the following Tree Parser grammar I have
th error (on the code compilation step)

//ANTLR Parser Generator  Version 3.1b1 (May 20, 2008)  1989-2008
"LPMEDLuaCodeGen.cs(15,7): error CS1537: The using alias 'Hashtable'
appeared previously in this namespace"

I've found the bug report, that describe such problem with alias
'Hashtable' (http://www.antlr.org:8888/browse/ANTLR-157). It's
considered fixed in 3.1 antlr version, but its seems to me 3.1b1 has
that bug.

Should we wait for the 3.1 release or that a "reopened bug" ?

Thank you
------------------------------------------------------------------------------------------------------------------------
tree grammar LPMEDLuaCodeGen;

options {
tokenVocab=LPMED; // use the vocabulary from the parser
ASTLabelType=CommonTree; // what kind of trees are we walking?
output=template; // generate templates
language = CSharp;
}


program

  :
    ^(CPROGRAM atom)  -> program(name={$atom.st})
  ;



atom
options
{
	backtrack=true;
}	
 :
   ID -> {%{$ID}}
 | ^(CINT INT) ->{%{$INT.text}}
;

From parrt at cs.usfca.edu  Wed May 28 11:51:40 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 28 May 2008 11:51:40 -0700
Subject: [antlr-interest] Tree Rewrite Caveats
In-Reply-To: <9bfd4b3c0805232021k73302a53n232a3e2f08178922@mail.gmail.com>
References: <9bfd4b3c0805232021k73302a53n232a3e2f08178922@mail.gmail.com>
Message-ID: <1BBFEC6B-9E1E-402A-86BA-AF26AEF736CC@cs.usfca.edu>

Thanks...i'llLook at these before we go out.
Ter
On May 23, 2008, at 8:21 PM, Robin Hamilton-Pennell wrote:

> Hi all,
>
> Been playing around with the tree rewriting stuff in 3.1b1. It's much
> better than the previous test build was. I'm not through with my
> experimentation and likely will find more things, but I thought I'd
> make some notes on a few troubles I ran into, in case it helps anyone
> else.
>
> Firstly (this is probably true of tree parsers in general), if you use
> a custom class as your AST node and the Java target, you will probably
> need to add the method errorNode() in your TreeAdaptor class. This
> will also entail either adding error node utility methods to your AST
> node, or creating a custom subclass of CommonErrorNode. I could be
> completely misguided on this; please say so.
>
> Second, every (sub)rule that you are rewriting must match a tree node,
> I think. This seems obvious in retrospect, but it took me a while to
> figure out. That means that you can't do this:
>
> stmt:
>    expr   ->   expr
>    ;
>
> However, you can do either of the following (or change your AST
> generation code):
>
> stmt:
>    expr  // omit rewrite rule
>    ;
>
> stmt:
>    // (after changing your AST generation)
>    ^(EXPR expr)   ->   ^(EXPR expr)
>    ;
>
> I should mention that both of these issues involves the rewrite=true
> option. I haven't tested the effects of turning that off, actually.
>
> Again, I could simply be completely misguided on this, in which case,
> please enlighten me.
>
> Thanks,
> Robin


From parrt at cs.usfca.edu  Wed May 28 12:21:36 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 28 May 2008 12:21:36 -0700
Subject: [antlr-interest] Definitive ANTLR reference guide slashdot'd
Message-ID: <8F1E689C-955A-453C-9B0D-766A655B5BC4@cs.usfca.edu>

http://books.slashdot.org/article.pl?sid=08/05/28/1323209

From radurd at hotmail.com  Wed May 28 12:27:54 2008
From: radurd at hotmail.com (Radu Damboianu)
Date: Wed, 28 May 2008 12:27:54 -0700
Subject: [antlr-interest] [bug?] Unrecognized escape sequence in Lexer
 .cs	code(3.1b1 C# Target)
In-Reply-To: <1dcb5c470805281003qb63478mc69d29ff443e12fb@mail.gmail.com>
References: <1dcb5c470805281003qb63478mc69d29ff443e12fb@mail.gmail.com>
Message-ID: <BLU125-W470CB08DC8877ADA234F45DBBC0@phx.gbl>

I have encountered this issue as well. The correct solution for the unrecognized C# escape sequences is not prepending a @ (that would kill the correct \uffff escape sequences as well) but replacing escapes like \3 with \u0003.
 
Unfortunately, even after doing that (I wrote a small program that does the replacements above), I found that there were other problems in 3.1b1 for the C# target which makes it basically unusable in the current state.



> Date: Wed, 28 May 2008 21:03:16 +0400> From: gmdidro at gmail.com> To: antlr-interest at antlr.org> Subject: [antlr-interest] [bug?] Unrecognized escape sequence in Lexer .cs code(3.1b1 C# Target)> > Hello,> the Lexer code generated in accordance to the following grammar gets> the many errors "LPMEDLexer.cs(510,11): error CS1009: Unrecognized> escape sequence".> > It seems to me, that when ANTLR generates a code for DFA, it doesn't> use "@" for format-string representation:> > LPMEDLexer.cs> line: 510> "\3\uffff\2\10\4\uffff\4\10\1\17\1\10\1\uffff\1\21\1\uffff";> it should be> @"\3\uffff\2\10\4\uffff\4\10\1\17\1\10\1\uffff\1\21\1\uffff";> > I also have such errors in Parser and Tree Parser code, but can't> reproduce it with a small grammar.> > Is it a bug ?> ----------------------------------------------------------------------------------------------------------------------> grammar LPMED;> options{ language = CSharp; }> tokens{ CINT; CBOOL; }> > program : atom '.' ;> > atom> options> {> backtrack=true;> } : dMFID> | INT //-> ^(CINT INT)> | dBOOL //-> ^(CBOOL dBOOL)> ;> > dMFID : ',' atom | ID;> > dBOOL :> 'true'> |'false'> ;> > > INT : ('0'..'9')+ ;> WS : ( ' '> | '\t'> | '\r'> | '\n'> )+> { $channel=HIDDEN; }> ;> > fragment NEWLINE> : '\r'|'\n'> ;> > LINECOMMENT> : '//' ~('\r'|'\n')* NEWLINE {$channel=HIDDEN;}> ;> > ID : ('a'..'z' | 'A'..'Z' | '_') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_')*;> ----------------------------------------------------------------------------------------------------------------------> > //ANTLR Parser Generator Version 3.1b1 (May 20, 2008) 1989-2008> //LPMEDLexer.cs(510,11): error CS1009: Unrecognized escape sequence> > Thank you
_________________________________________________________________
Change the world with e-mail. Join the i?m Initiative from Microsoft.
http://im.live.com/Messenger/IM/Join/Default.aspx?source=EML_WL_ChangeWorld
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080528/45af1bef/attachment.html 

From leon.antlr at mac.com  Wed May 28 13:01:06 2008
From: leon.antlr at mac.com (Leon Su)
Date: Wed, 28 May 2008 13:01:06 -0700
Subject: [antlr-interest] ParseTreeBuilder example?
In-Reply-To: <48373C8B.1080403@sandia.gov>
References: <48373C8B.1080403@sandia.gov>
Message-ID: <22613064-56D0-4AF8-A00C-71B56A6721B8@mac.com>

Hi,

You may miss the -debug commandline option.
try: java org.antlr.Tool -debug P.g

Leon

On May 23, 2008, at 2:52 PM, Hamilton Link wrote:

> The "How can I build parse trees not ASTs?" page...
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=1760
>
> shows an example of creating a ParseTreeBuilder and then passing it  
> into the FooParser two-argument constructor.
>
> Unfortunately, as far as I can tell the two-arg constructor takes a  
> TokenStream and a RecognizerSharedState... and ParseTreeBuilder  
> doesn't inherit from RecognizerSharedState.
>
> So, is the example on this web page bogus?  When did it work and  
> when will it work again, because at the moment I don't see how it  
> could possibly work as advertised.  (Mind you I'm not _all_ that  
> concerned, as I can't even build ASTs quite yet.)  If someone could  
> correct the example or explain the example that'd be great.
>
> thanks,
> hamilton
>


From JALuber at gmx.de  Wed May 28 16:21:06 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Thu, 29 May 2008 01:21:06 +0200
Subject: [antlr-interest] [bug?] Unrecognized escape sequence in Lexer
	.cs	code(3.1b1 C# Target)
In-Reply-To: <BLU125-W470CB08DC8877ADA234F45DBBC0@phx.gbl>
References: <1dcb5c470805281003qb63478mc69d29ff443e12fb@mail.gmail.com>
	<BLU125-W470CB08DC8877ADA234F45DBBC0@phx.gbl>
Message-ID: <20080528232106.262120@gmx.net>

> I have encountered this issue as well. The correct solution for the
> unrecognized C# escape sequences is not prepending a @ (that would kill the
> correct \uffff escape sequences as well) but replacing escapes like \3 with
> \u0003.
>  
> Unfortunately, even after doing that (I wrote a small program that does
> the replacements above), I found that there were other problems in 3.1b1 for
> the C# target which makes it basically unusable in the current state.

Sorry about this. :( It seems that Java defines escape sequences differently than C#. I thought C# was a superset of Java here and thus never looked into the actual algorithm mined from the Java target. I'm actually surprised that these problems came up only now - other people did use the same version as you and they never mentioned this problem.

It could be your specific grammar, so it would be nice, if you could send it to me. Also all other problems and possibly their fixes, as they can't be fixed then. Unfortunately, I am bereft of my development tools due to a harddrive crash of my main machine and until it is fixed, I can't look for the bugs. In case you can't wait a few more weeks, you have to fix them yourself or you can go back to an earlier daily build - the runtime compression was a late addition.

I also noted that the grammar example of the OP uses CSharp as the target. For ANTLR 3.1, CSharp is obsoleted by CSharp2. Please take this into account and refer for further details to the ANTLR wiki page about the C# target. 

Johannes
> 
> 
> 
> > Date: Wed, 28 May 2008 21:03:16 +0400> From: gmdidro at gmail.com> To:
> antlr-interest at antlr.org> Subject: [antlr-interest] [bug?] Unrecognized escape
> sequence in Lexer .cs code(3.1b1 C# Target)> > Hello,> the Lexer code
> generated in accordance to the following grammar gets> the many errors
> "LPMEDLexer.cs(510,11): error CS1009: Unrecognized> escape sequence".> > It seems to
> me, that when ANTLR generates a code for DFA, it doesn't> use "@" for
> format-string representation:> > LPMEDLexer.cs> line: 510>
> "\3\uffff\2\10\4\uffff\4\10\1\17\1\10\1\uffff\1\21\1\uffff";> it should be>
> @"\3\uffff\2\10\4\uffff\4\10\1\17\1\10\1\uffff\1\21\1\uffff";> > I also have such errors in
> Parser and Tree Parser code, but can't> reproduce it with a small grammar.> >
> Is it a bug ?>
> ----------------------------------------------------------------------------------------------------------------------> grammar
> LPMED;> options{ language = CSharp; }> tokens{ CINT; CBOOL; }> > program : atom
> '.' ;> > atom> options> {> backtrack=true;> } : dMFID> | INT //-> ^(CINT
> INT)> | dBOOL //-> ^(CBOOL dBOOL)> ;> > dMFID : ',' atom | ID;> > dBOOL :>
> 'true'> |'false'> ;> > > INT : ('0'..'9')+ ;> WS : ( ' '> | '\t'> | '\r'> |
> '\n'> )+> { $channel=HIDDEN; }> ;> > fragment NEWLINE> : '\r'|'\n'> ;> >
> LINECOMMENT> : '//' ~('\r'|'\n')* NEWLINE {$channel=HIDDEN;}> ;> > ID :
> ('a'..'z' | 'A'..'Z' | '_') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_')*;>
> ---------------------------------------------------------------------------------------------------------------------->
> > //ANTLR Parser Generator Version 3.1b1 (May 20, 2008) 1989-2008>
> //LPMEDLexer.cs(510,11): error CS1009: Unrecognized escape sequence> > Thank you
> _________________________________________________________________
> Change the world with e-mail. Join the i?m Initiative from Microsoft.
> http://im.live.com/Messenger/IM/Join/Default.aspx?source=EML_WL_ChangeWorld

-- 
Super-Aktion nur in der GMX Spieleflat: 10 Tage f?r 1 Euro.
?ber 180 Spiele downloaden: http://flat.games.gmx.de

From JALuber at gmx.de  Wed May 28 16:27:06 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Thu, 29 May 2008 01:27:06 +0200
Subject: [antlr-interest] [bug?] The using alias 'Hashtable' appeared
	twice	in Tree Parser .cs code (3.1b1 C# Target)
In-Reply-To: <1dcb5c470805281029o4afc3b9coc1da7ceef434b18f@mail.gmail.com>
References: <1dcb5c470805281029o4afc3b9coc1da7ceef434b18f@mail.gmail.com>
Message-ID: <20080528232706.262140@gmx.net>

> Hello,
> 
> When I generate C# code for the following Tree Parser grammar I have
> th error (on the code compilation step)
> 
> //ANTLR Parser Generator  Version 3.1b1 (May 20, 2008)  1989-2008
> "LPMEDLuaCodeGen.cs(15,7): error CS1537: The using alias 'Hashtable'
> appeared previously in this namespace"
> 
> I've found the bug report, that describe such problem with alias
> 'Hashtable' (http://www.antlr.org:8888/browse/ANTLR-157). It's
> considered fixed in 3.1 antlr version, but its seems to me 3.1b1 has
> that bug.
> 
> Should we wait for the 3.1 release or that a "reopened bug" ?
> 
> Thank you

Well, I closed it because my try to recreate the issue failed. Ironically, I was probably the first noting the bug ever... In any case, once I can look into this, I will. Also please send a email with the LPMED.tokens file as otherwise I can't regenerated the grammar below.

Johannes
> ------------------------------------------------------------------------------------------------------------------------
> tree grammar LPMEDLuaCodeGen;
> 
> options {
> tokenVocab=LPMED; // use the vocabulary from the parser
> ASTLabelType=CommonTree; // what kind of trees are we walking?
> output=template; // generate templates
> language = CSharp;
> }
> 
> 
> program
> 
>   :
>     ^(CPROGRAM atom)  -> program(name={$atom.st})
>   ;
> 
> 
> 
> atom
> options
> {
> 	backtrack=true;
> }	
>  :
>    ID -> {%{$ID}}
>  | ^(CINT INT) ->{%{$INT.text}}
> ;

-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

From JALuber at gmx.de  Wed May 28 16:32:01 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Thu, 29 May 2008 01:32:01 +0200
Subject: [antlr-interest] [bug?] The using alias 'Hashtable'
	appeared	twice	in Tree Parser .cs code (3.1b1 C# Target)
In-Reply-To: <20080528232706.262140@gmx.net>
References: <1dcb5c470805281029o4afc3b9coc1da7ceef434b18f@mail.gmail.com>
	<20080528232706.262140@gmx.net>
Message-ID: <20080528233201.262140@gmx.net>

> > Hello,
> > 
> > When I generate C# code for the following Tree Parser grammar I have
> > th error (on the code compilation step)
> > 
> > //ANTLR Parser Generator  Version 3.1b1 (May 20, 2008)  1989-2008
> > "LPMEDLuaCodeGen.cs(15,7): error CS1537: The using alias 'Hashtable'
> > appeared previously in this namespace"
> > 
> > I've found the bug report, that describe such problem with alias
> > 'Hashtable' (http://www.antlr.org:8888/browse/ANTLR-157). It's
> > considered fixed in 3.1 antlr version, but its seems to me 3.1b1 has
> > that bug.
> > 
> > Should we wait for the 3.1 release or that a "reopened bug" ?
> > 
> > Thank you
> 
> Well, I closed it because my try to recreate the issue failed. Ironically,
> I was probably the first noting the bug ever... In any case, once I can
> look into this, I will. Also please send a email with the LPMED.tokens file
> as otherwise I can't regenerated the grammar below.

Nevermind that, I just saw that LPMED is the grammar in the other email.

Johannes
> 
> Johannes
> >
> ------------------------------------------------------------------------------------------------------------------------
> > tree grammar LPMEDLuaCodeGen;
> > 
> > options {
> > tokenVocab=LPMED; // use the vocabulary from the parser
> > ASTLabelType=CommonTree; // what kind of trees are we walking?
> > output=template; // generate templates
> > language = CSharp;
> > }
> > 
> > 
> > program
> > 
> >   :
> >     ^(CPROGRAM atom)  -> program(name={$atom.st})
> >   ;
> > 
> > 
> > 
> > atom
> > options
> > {
> > 	backtrack=true;
> > }	
> >  :
> >    ID -> {%{$ID}}
> >  | ^(CINT INT) ->{%{$INT.text}}
> > ;
> 
> -- 
> Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
> Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

From JALuber at gmx.de  Wed May 28 16:35:45 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Thu, 29 May 2008 01:35:45 +0200
Subject: [antlr-interest] Request for Strongly Signed
	Antlr3.Runtime.dll	(3.0.1)
Message-ID: <20080528233545.262100@gmx.net>

> Hi,
> 
>  
> 
> We use Antlr quite heavily in an open source project, Spring.NET, and we
> must sign all of our assemblies.  I want to update from 2.7 to 3.0.1 but
> noticed that the assembly is not strongly signed.  In the past
> <http://www.antlr.org/pipermail/antlr-interest/2006-January/015149.html
> > I was able to track down the source code and recompile myself but I
> can't
> locate the source for Antlr3.Runtime.dll now and it would of course be
> better if it was done by the Antlr team.

The reason is that the only avaliable source was the reflactored source code version. Even I as the new maintainer never had the original source code for that. But while I can't help you there, 3.1 already includes strongnamed assemblies - at least they should be strongnamed. Never tested that myself, as I didn't create the build files. Look at the latest beta or daily build for the current source code and assemblies.

Johannes
> 
>  
> 
> Is it possible to get a strongly signed 3.0.1 runtime dll?  If not, can it
> be done for the 3.1 release?   I'm happy to lend a hand to help out and
> even
> compile myself, contribute back, if you can point me in the right
> direction.
> 
> 
>  
> 
> Thanks again for the great software!
> 
>  
> 
> Cheers,
> 
> Mark
> 

-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx

From sharwell at pixelminegames.com  Wed May 28 18:32:34 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Wed, 28 May 2008 20:32:34 -0500
Subject: [antlr-interest] [bug?] Unrecognized escape sequence in
	Lexer.cs	code(3.1b1 C# Target)
In-Reply-To: <20080528232106.262120@gmx.net>
References: <1dcb5c470805281003qb63478mc69d29ff443e12fb@mail.gmail.com><BLU125-W470CB08DC8877ADA234F45DBBC0@phx.gbl>
	<20080528232106.262120@gmx.net>
Message-ID: <86403CA0939415448BCCB83855EFE09A4FB338@Bloodymary.ironwillgames.com>

There is an override of encodeIntAsCharEscape in CSharp2Target.java that should also be in CSharpTarget.java. This will resolve the escape sequences issue.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Johannes Luber
Sent: Wednesday, May 28, 2008 6:21 PM
To: Radu Damboianu; antlr-interest at antlr.org; gmdidro at gmail.com
Subject: Re: [antlr-interest] [bug?] Unrecognized escape sequence in Lexer.cs code(3.1b1 C# Target)

> I have encountered this issue as well. The correct solution for the
> unrecognized C# escape sequences is not prepending a @ (that would kill the
> correct \uffff escape sequences as well) but replacing escapes like \3 with
> \u0003.
>  
> Unfortunately, even after doing that (I wrote a small program that does
> the replacements above), I found that there were other problems in 3.1b1 for
> the C# target which makes it basically unusable in the current state.

Sorry about this. :( It seems that Java defines escape sequences differently than C#. I thought C# was a superset of Java here and thus never looked into the actual algorithm mined from the Java target. I'm actually surprised that these problems came up only now - other people did use the same version as you and they never mentioned this problem.

It could be your specific grammar, so it would be nice, if you could send it to me. Also all other problems and possibly their fixes, as they can't be fixed then. Unfortunately, I am bereft of my development tools due to a harddrive crash of my main machine and until it is fixed, I can't look for the bugs. In case you can't wait a few more weeks, you have to fix them yourself or you can go back to an earlier daily build - the runtime compression was a late addition.

I also noted that the grammar example of the OP uses CSharp as the target. For ANTLR 3.1, CSharp is obsoleted by CSharp2. Please take this into account and refer for further details to the ANTLR wiki page about the C# target. 

Johannes
> 
> 
> 
> > Date: Wed, 28 May 2008 21:03:16 +0400> From: gmdidro at gmail.com> To:
> antlr-interest at antlr.org> Subject: [antlr-interest] [bug?] Unrecognized escape
> sequence in Lexer .cs code(3.1b1 C# Target)> > Hello,> the Lexer code
> generated in accordance to the following grammar gets> the many errors
> "LPMEDLexer.cs(510,11): error CS1009: Unrecognized> escape sequence".> > It seems to
> me, that when ANTLR generates a code for DFA, it doesn't> use "@" for
> format-string representation:> > LPMEDLexer.cs> line: 510>
> "\3\uffff\2\10\4\uffff\4\10\1\17\1\10\1\uffff\1\21\1\uffff";> it should be>
> @"\3\uffff\2\10\4\uffff\4\10\1\17\1\10\1\uffff\1\21\1\uffff";> > I also have such errors in
> Parser and Tree Parser code, but can't> reproduce it with a small grammar.> >
> Is it a bug ?>
> ----------------------------------------------------------------------------------------------------------------------> grammar
> LPMED;> options{ language = CSharp; }> tokens{ CINT; CBOOL; }> > program : atom
> '.' ;> > atom> options> {> backtrack=true;> } : dMFID> | INT //-> ^(CINT
> INT)> | dBOOL //-> ^(CBOOL dBOOL)> ;> > dMFID : ',' atom | ID;> > dBOOL :>
> 'true'> |'false'> ;> > > INT : ('0'..'9')+ ;> WS : ( ' '> | '\t'> | '\r'> |
> '\n'> )+> { $channel=HIDDEN; }> ;> > fragment NEWLINE> : '\r'|'\n'> ;> >
> LINECOMMENT> : '//' ~('\r'|'\n')* NEWLINE {$channel=HIDDEN;}> ;> > ID :
> ('a'..'z' | 'A'..'Z' | '_') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_')*;>
> ---------------------------------------------------------------------------------------------------------------------->
> > //ANTLR Parser Generator Version 3.1b1 (May 20, 2008) 1989-2008>
> //LPMEDLexer.cs(510,11): error CS1009: Unrecognized escape sequence> > Thank you
> _________________________________________________________________
> Change the world with e-mail. Join the i'm Initiative from Microsoft.
> http://im.live.com/Messenger/IM/Join/Default.aspx?source=EML_WL_ChangeWorld

-- 
Super-Aktion nur in der GMX Spieleflat: 10 Tage f?r 1 Euro.
?ber 180 Spiele downloaden: http://flat.games.gmx.de

From 12345alex at gmx.net  Wed May 28 20:53:45 2008
From: 12345alex at gmx.net (alexander krohn)
Date: Thu, 29 May 2008 05:53:45 +0200
Subject: [antlr-interest] antlr command line options
Message-ID: <483E28C9.6020404@gmx.net>

hi.

i tried to run antlr 3.0.1 from the command line, it seems to ignore the 
-o and the -fo options.

is it a bug or did i miss something?

regards,

alexander

From fridi70 at gmx.de  Wed May 28 23:38:25 2008
From: fridi70 at gmx.de (Fridi)
Date: Thu, 29 May 2008 08:38:25 +0200
Subject: [antlr-interest] Tree grammar conditionally run subrule
In-Reply-To: <20080527134002.56670@gmx.net>
References: <20080527134002.56670@gmx.net>
Message-ID: <483E4F61.6080903@gmx.de>

I have simply tried

: ^(OR a = expression
	{
	  if (a) 
	    return true; 
	}
       b = expression
       {
	  $r = a || b;
       }
    )


... but that leads to mismatched tokens exception, and I guess that is 
because the tokens (nodes) are not consumed as if it would run the 2nd. 
expression


Any other idea?


fridi70 at gmx.de schrieb:
> Hi,
>
> I have a tree grammar that handles some AND and OR logic and works very well. For performance reasons, in 'OR' I want to run 'b = expression' only if a is false. How can I realize this in the grammar?
> Thanks for any answer,
>   fridi
>
>
>
>
>
> expression returns [bool r = false]
> : ^(OR a = expression
>        b = expression
>        {
> 	  $r = a || b;
>        }
>     )
>
> | ^(AND a = expression
> 	b = expression
> 	{
> 	  $r = a && b;
> 	}
>
> | a = condition 
> 	{
> 	  $r = a;
> 	}
>       
> )
>
>
>   


From david.benn at astc-design.com  Thu May 29 01:17:47 2008
From: david.benn at astc-design.com (David Benn)
Date: Thu, 29 May 2008 17:47:47 +0930
Subject: [antlr-interest] Bug in generated C for AST rewrite rule with
 repetition of a production element
Message-ID: <483E66AB.3040208@astc-design.com>

Hi Jim, all

I appear to have found a bug in the generation of C code for AST rewrite 
rules where an element is repeated. I am using ANTLR3.1b1.

The Wiki (http://www.antlr.org/wiki/display/ANTLR3/Tree+construction) 
gives an example of this:
 
<quote>
ANTLR tracks all elements with the same name into a single implicit list:

formalArgs
	:	formalArg (',' formalArg)* -> formalArg+
	|
	;

</quote>

I have the following production which has essentially the same form:

enumerated_type_def
                  : ENUMERATED IDENT
                    LBRACE
                    enumerated_type_element
                    (COMMA enumerated_type_element)* RBRACE
                    SEMI?
                  -> ^(TYPE ENUMERATED IDENT enumerated_type_element+)
                  ;

Code is generated just fine but compiling the parser results in this 
error (source file name changed to protect the innocent):

XParser.c: In function `XParser_enumerated_type_def_return 
enumerated_type_def(XParser_Ctx_struct*)':
XParser.c:2191: error: invalid conversion from `const void*' to `void*'

However, changing the + into a * does work okay, and yields the expected 
AST, i.e.

-> ^(TYPE ENUMERATED IDENT enumerated_type_element*)

I am compiling the resulting parser and lexer source files with g++ 
3.4.6. I specifically want to use C++, and yes, I realise this is not 
the most recent g++ version. :)

Using a const_cast in the generated code suppresses the error, but that 
only fixes the symptom. I haven't looked further at the generated code 
yet to suggest another solution.

Thanks.

Rgds,

DJB

-- 
David Benn
Australian Semiconductor Technology Company (ASTC) Pty Ltd
76 Waymouth Street
Adelaide 5000, South Australia
ABN:   18 117 392 784
Tel:   +61 8 8231 2782
Mob:   +61 407 261163
Email: david.benn at astc-design.com
Web:   www.astc-design.com


From antlr at mirality.co.nz  Thu May 29 02:21:33 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 29 May 2008 21:21:33 +1200
Subject: [antlr-interest] Tree grammar conditionally run subrule
In-Reply-To: <483E4F61.6080903@gmx.de>
References: <20080527134002.56670@gmx.net>
 <483E4F61.6080903@gmx.de>
Message-ID: <20080529092145.6E5F611ED76@www.antlr.org>

At 18:38 29/05/2008, Fridi wrote:
 >I have simply tried
 >
 >: ^(OR a = expression
 >	{
 >	  if (a)
 >	    return true;
 >	}
 >       b = expression
 >       {
 >	  $r = a || b;
 >       }
 >    )
 >
 >
 >... but that leads to mismatched tokens exception, and I guess 
that
 >is because the tokens (nodes) are not consumed as if it would 
run the
 >2nd. expression

How about this:

   ^(OR a=expression
     ( { $a }? => . { $r = true; }
     | b=expression { $r = $b; }
     )
   )

(I'm assuming that expression already returns a boolean.)


From antlr at mirality.co.nz  Thu May 29 02:39:28 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 29 May 2008 21:39:28 +1200
Subject: [antlr-interest] Request for Strongly Signed Antlr3.Runtime.dll
 (3.0.1)
In-Reply-To: <004201c8c0db$963e3850$c2baa8f0$@pollack@springsource.com>
References: <004201c8c0db$963e3850$c2baa8f0$@pollack@springsource.com>
Message-ID: <20080529093939.A54D011EAC5@www.antlr.org>

At 03:57 29/05/2008, Mark Pollack wrote:
>We use Antlr quite heavily in an open source project, Spring.NET, 
>and we must sign all of our assemblies.  I want to update from 
>2.7 to 3.0.1 but noticed that the assembly is not strongly 
>signed.  In the past 
><<http://www.antlr.org/pipermail/antlr-interest/2006-January/015149.html>http://www.antlr.org/pipermail/antlr-interest/2006-January/015149.html> 
>I was able to track down the source code and recompile myself but 
>I can't locate the source for Antlr3.Runtime.dll now and it would 
>of course be better if it was done by the Antlr team.

You don't need source to sign an assembly.  Assuming it's pure IL 
at least (which should always be true for C# code) it's trivial to 
re-sign an assembly:

md temp
ildasm /output=temp\AssemblyName.il AssemblyName.dll
ilasm /output=SignedAssemblyName.dll temp\AssemblyName.il 
/keyfile=Key.snk /resource=temp\AssemblyName.res

ildasm is in the .NET SDK (separate download or with Visual 
Studio).
ilasm is in the framework runtime folder (under 
%windir%\Microsoft.NET\Framework).

If you want to sign it with a .pfx file instead of an .snk, then 
first sign it with *any* .snk as above, then do this:

sn -i KeyFile.pfx TempSign
sn -Rca SignedAssemblyName.dll TempSign


From potrto at centrum.cz  Thu May 29 04:13:58 2008
From: potrto at centrum.cz (Tomas Potrusil)
Date: Thu, 29 May 2008 13:13:58 +0200
Subject: [antlr-interest] ANTLR 3.1b1 released!
In-Reply-To: <200805291300.22459@centrum.cz>
References: <62F7B8D6-C3D0-4A7A-B1C1-E8BD44405B89@cs.usfca.edu>
	<200805291300.22459@centrum.cz>
Message-ID: <af7c90190805290413n2dc8b7c9rb35a5de24f266b72@mail.gmail.com>

I would like to remind you that C runtime still doesn't support
(correct) custom adaptors like Java does. In "advocacy of C++ support
in ANTLR 3.x" thread Jim Idle wrote:

> As I said, if I have wandered away from that recently, it is a mistake as it is intended to do this,
> so I will fix it up for the release of 3.1.

It would nice to have it done in the coming 3.1 version...

Tom

From zebabez at gmail.com  Thu May 29 05:11:02 2008
From: zebabez at gmail.com (Sebastian Mattsson)
Date: Thu, 29 May 2008 15:11:02 +0300
Subject: [antlr-interest] AntlrWorks 1.2b2 and Incompatible Grammar with
	sample code
Message-ID: <6ffb015e0805290511x59e36543xce0664c9eb6c1a9f@mail.gmail.com>

Hi,

Installed 3.1b to get to try out the nice new features.
However when I pasted the simple example from the wiki:

grammar T;
options {output=AST;}
@members {
static class V extends CommonTree {
  public int x,y,z;
  public V(int ttype, int x, int y, int z) {
    this.x=x; this.y=y; this.z=z; token=new CommonToken(ttype,"");
  }
  public V(int ttype, Token t, int x) { token=t; this.x=x; }
  public String toString() {
    return (token!=null?token.getText():"")+"<V>;"+x+y+z;
  }
}
}
a : ID -> ID<V>[42,19,30] ID<V>[$ID,99] ;
ID : 'a'..'z'+ ;
WS : (' '|'\\n') {$channel=HIDDEN;} ;

AntlrWorks first tells my that it's an Incompatible Grammar, and then it
can't find the class V, just says 'undefined reference' about <V>.
After debugging the console outputs:
[org.antlr.works.debugger.tree.DBASTModel - event 12] Warning: [addChild]
Child node 2 not found, ignoring.
[org.antlr.works.debugger.tree.DBASTModel - event 14] Warning: [addChild]
Child node 3 not found, ignoring.


Are these some kind of problems to be expected with the beta-version or have
I done something wrong?

Thank You,
Sebastian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080529/59e0b424/attachment.html 

From mark.k.widdowson at jpmorgan.com  Thu May 29 05:59:51 2008
From: mark.k.widdowson at jpmorgan.com (mark.k.widdowson at jpmorgan.com)
Date: Thu, 29 May 2008 13:59:51 +0100
Subject: [antlr-interest] Nested Comments
In-Reply-To: <200805280857.m4S8vqOZ023561@se3.svr.bankone.net>
Message-ID: <OF36E50719.7308F107-ON80257458.00473A67-80257458.004765C9@jpmchase.com>

Thanks Gavin,

but ideally would want to be on hidden channel, and don't want to specify 
optional comments on every rule ?

does anyone know if this is possible in ANTLR, or is it a matter of coding 
a pre-processor to remove the nested comments ?

regards
Mark.




Gavin Lambert <antlr at mirality.co.nz> 
28/05/2008 09:57

To
mark.k.widdowson at jpmorgan.com, antlr-interest at antlr.org
cc

Subject
Re: [antlr-interest] Nested Comments






At 19:51 28/05/2008, mark.k.widdowson at jpmorgan.com wrote:
I've been developing a Sybase SQL stored proc parser using ANTLR3, and 
have run into the problem of dealing with nested comments 

e.g. 

/* 
select  * 
from hello  /* table*/ 
where 
field1 = 'world' /* field*/ 

*/ 

Ideally, I need to retain the line numbers whilst removing any nested 
comments, 

This is just air code, but:

MultiLineComment
  :  '/*'
     ( ('/*') => MultiLineComment
     | ~'*'
     | '*' ~'/'
     )*
     '*/'
  ;


Generally, this communication is for informational purposes only
and it is not intended as an offer or solicitation for the purchase
or sale of any financial instrument or as an official confirmation
of any transaction. In the event you are receiving the offering
materials attached below related to your interest in hedge funds or
private equity, this communication may be intended as an offer or
solicitation for the purchase or sale of such fund(s).  All market
prices, data and other information are not warranted as to
completeness or accuracy and are subject to change without notice.
Any comments or statements made herein do not necessarily reflect
those of JPMorgan Chase & Co., its subsidiaries and affiliates.

This transmission may contain information that is privileged,
confidential, legally privileged, and/or exempt from disclosure
under applicable law. If you are not the intended recipient, you
are hereby notified that any disclosure, copying, distribution, or
use of the information contained herein (including any reliance
thereon) is STRICTLY PROHIBITED. Although this transmission and any
attachments are believed to be free of any virus or other defect
that might affect any computer system into which it is received and
opened, it is the responsibility of the recipient to ensure that it
is virus free and no responsibility is accepted by JPMorgan Chase &
Co., its subsidiaries and affiliates, as applicable, for any loss
or damage arising in any way from its use. If you received this
transmission in error, please immediately contact the sender and
destroy the material in its entirety, whether in electronic or hard
copy format. Thank you.
Please refer to http://www.jpmorgan.com/pages/disclosures for
disclosures relating to UK legal entities.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080529/778fc580/attachment.html 

From antlr at mirality.co.nz  Thu May 29 06:09:28 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 30 May 2008 01:09:28 +1200
Subject: [antlr-interest] Nested Comments
In-Reply-To: <OF36E50719.7308F107-ON80257458.00473A67-80257458.004765C9@
	jpmchase.com>
References: <200805280857.m4S8vqOZ023561@se3.svr.bankone.net>
	<OF36E50719.7308F107-ON80257458.00473A67-80257458.004765C9@jpmchase.com>
Message-ID: <20080529130959.901FE11ED1D@www.antlr.org>

At 00:59 30/05/2008, mark.k.widdowson at jpmorgan.com wrote:
>but ideally would want to be on hidden channel, and don't want to 
>specify optional comments on every rule ?

So just put { $channel = HIDDEN; } at the end, just like for 
whitespace.  There's no difference.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080530/a4d99032/attachment-0001.html 

From mark.pollack at springsource.com  Thu May 29 07:38:31 2008
From: mark.pollack at springsource.com (Mark Pollack)
Date: Thu, 29 May 2008 10:38:31 -0400
Subject: [antlr-interest] Request for Strongly Signed
	Antlr3.Runtime.dll	(3.0.1)
In-Reply-To: <20080528233545.262100@gmx.net>
References: <20080528233545.262100@gmx.net>
Message-ID: <00b301c8c199$abba00b0$032e0210$@pollack@springsource.com>

Hi,

Are you saying that there isn't any source code for 3.0.1?  What is the
process by which the .dll is created? It sounds like some byte-code to IL
code conversion.  I'm asking from the point of view of support for bug
fixes.  Sounds like all the effort, rightly so, is going into 3.1, though
that would force us to drop support for .NET 1.1.  I'll check into the
latest beta/daily build and ping back if there are issues.

BTW, there is a way to sign after the fact.  

ildasm Antlr3.Runtime.dll /out:Antlr3.Runtime.il

ilasm Antlr3.Runtime.il /dll /res:Antlr3.Runtime.res /key:Spring.Net.snk
/out:Antlr3.Runtime.dll

Could you sign the current assemblies this way?

Cheers,
Mark



-----Original Message-----
From: Johannes Luber [mailto:JALuber at gmx.de] 
Sent: Wednesday, May 28, 2008 7:36 PM
To: Mark Pollack; antlr-interest at antlr.org
Subject: Re: [antlr-interest] Request for Strongly Signed Antlr3.Runtime.dll
(3.0.1)

> Hi,
> 
>  
> 
> We use Antlr quite heavily in an open source project, Spring.NET, and we
> must sign all of our assemblies.  I want to update from 2.7 to 3.0.1 but
> noticed that the assembly is not strongly signed.  In the past
>
<http://www.antlr.org/pipermail/antlr-interest/2006-January/015149.html
> > I was able to track down the source code and recompile myself but I
> can't
> locate the source for Antlr3.Runtime.dll now and it would of course be
> better if it was done by the Antlr team.

The reason is that the only avaliable source was the reflactored source code
version. Even I as the new maintainer never had the original source code for
that. But while I can't help you there, 3.1 already includes strongnamed
assemblies - at least they should be strongnamed. Never tested that myself,
as I didn't create the build files. Look at the latest beta or daily build
for the current source code and assemblies.

Johannes
> 
>  
> 
> Is it possible to get a strongly signed 3.0.1 runtime dll?  If not, can it
> be done for the 3.1 release?   I'm happy to lend a hand to help out and
> even
> compile myself, contribute back, if you can point me in the right
> direction.
> 
> 
>  
> 
> Thanks again for the great software!
> 
>  
> 
> Cheers,
> 
> Mark
> 

-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx


From JALuber at gmx.de  Thu May 29 08:32:53 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Thu, 29 May 2008 17:32:53 +0200
Subject: [antlr-interest] Request for Strongly
	Signed	Antlr3.Runtime.dll	(3.0.1)
In-Reply-To: <00b301c8c199$abba00b0$032e0210$@pollack@springsource.com>
References: <20080528233545.262100@gmx.net>
	<00b301c8c199$abba00b0$032e0210$@pollack@springsource.com>
Message-ID: <20080529153253.208380@gmx.net>

> Hi,
> 
> Are you saying that there isn't any source code for 3.0.1?  What is the
> process by which the .dll is created? It sounds like some byte-code to IL
> code conversion.  I'm asking from the point of view of support for bug
> fixes.

To put it simply: I do neither create a 3.0.1 nor do I bugfix it anymore. Nor should someone else bugfix it - see below.

>  Sounds like all the effort, rightly so, is going into 3.1, though
> that would force us to drop support for .NET 1.1.  I'll check into the
> latest beta/daily build and ping back if there are issues.

You are the first I know who requires support for .NET 1.1. Currently, 3.1 supports .NET 1.1 and 3.2 will be the last release with the CSharp target included. Afterwards, the CSharp2 target will be the only one remaining. CSharp2 is already available in the latest beta. For further details about the differences between the two targets see the ANTLR wiki page about the C# target. Where did you get the notion that 3.1 kills .NET 1.1 support already?
 
> BTW, there is a way to sign after the fact.  
> 
> ildasm Antlr3.Runtime.dll /out:Antlr3.Runtime.il
> 
> ilasm Antlr3.Runtime.il /dll /res:Antlr3.Runtime.res /key:Spring.Net.snk
> /out:Antlr3.Runtime.dll
> 
> Could you sign the current assemblies this way?

I never looked into this myself, as my predecessor did all the required work. And you don't need doing it yourself anyway. :)

Johannes
> 
> Cheers,
> Mark
> 
> 
> 
> -----Original Message-----
> From: Johannes Luber [mailto:JALuber at gmx.de] 
> Sent: Wednesday, May 28, 2008 7:36 PM
> To: Mark Pollack; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Request for Strongly Signed
> Antlr3.Runtime.dll
> (3.0.1)
> 
> > Hi,
> > 
> >  
> > 
> > We use Antlr quite heavily in an open source project, Spring.NET, and we
> > must sign all of our assemblies.  I want to update from 2.7 to 3.0.1 but
> > noticed that the assembly is not strongly signed.  In the past
> >
> <http://www.antlr.org/pipermail/antlr-interest/2006-January/015149.html
> > > I was able to track down the source code and recompile myself but I
> > can't
> > locate the source for Antlr3.Runtime.dll now and it would of course be
> > better if it was done by the Antlr team.
> 
> The reason is that the only avaliable source was the reflactored source
> code
> version. Even I as the new maintainer never had the original source code
> for
> that. But while I can't help you there, 3.1 already includes strongnamed
> assemblies - at least they should be strongnamed. Never tested that
> myself,
> as I didn't create the build files. Look at the latest beta or daily build
> for the current source code and assemblies.
> 
> Johannes
> > 
> >  
> > 
> > Is it possible to get a strongly signed 3.0.1 runtime dll?  If not, can
> it
> > be done for the 3.1 release?   I'm happy to lend a hand to help out and
> > even
> > compile myself, contribute back, if you can point me in the right
> > direction.
> > 
> > 
> >  
> > 
> > Thanks again for the great software!
> > 
> >  
> > 
> > Cheers,
> > 
> > Mark
> > 
> 
> -- 
> GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
> Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx

-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx

From mark.pollack at springsource.com  Thu May 29 09:00:02 2008
From: mark.pollack at springsource.com (Mark Pollack)
Date: Thu, 29 May 2008 12:00:02 -0400
Subject: [antlr-interest] Request for Strongly
	Signed	Antlr3.Runtime.dll	(3.0.1)
In-Reply-To: <20080529153253.208380@gmx.net>
References: <20080528233545.262100@gmx.net>
	<00b301c8c199$abba00b0$032e0210$@pollack@springsource.com>
	<20080529153253.208380@gmx.net>
Message-ID: <00e001c8c1a5$0eaea3f0$2c0bebd0$@pollack@springsource.com>

Hi,

Thanks, we will target 3.1 then.  I got confused w.r.t. to antlr version and
.net framework support.

Cheers,
Mark


-----Original Message-----
From: Johannes Luber [mailto:JALuber at gmx.de] 
Sent: Thursday, May 29, 2008 11:33 AM
To: Mark Pollack; antlr-interest at antlr.org
Subject: Re: [antlr-interest] Request for Strongly Signed Antlr3.Runtime.dll
(3.0.1)

> Hi,
> 
> Are you saying that there isn't any source code for 3.0.1?  What is the
> process by which the .dll is created? It sounds like some byte-code to IL
> code conversion.  I'm asking from the point of view of support for bug
> fixes.

To put it simply: I do neither create a 3.0.1 nor do I bugfix it anymore.
Nor should someone else bugfix it - see below.

>  Sounds like all the effort, rightly so, is going into 3.1, though
> that would force us to drop support for .NET 1.1.  I'll check into the
> latest beta/daily build and ping back if there are issues.

You are the first I know who requires support for .NET 1.1. Currently, 3.1
supports .NET 1.1 and 3.2 will be the last release with the CSharp target
included. Afterwards, the CSharp2 target will be the only one remaining.
CSharp2 is already available in the latest beta. For further details about
the differences between the two targets see the ANTLR wiki page about the C#
target. Where did you get the notion that 3.1 kills .NET 1.1 support
already?
 
> BTW, there is a way to sign after the fact.  
> 
> ildasm Antlr3.Runtime.dll /out:Antlr3.Runtime.il
> 
> ilasm Antlr3.Runtime.il /dll /res:Antlr3.Runtime.res /key:Spring.Net.snk
> /out:Antlr3.Runtime.dll
> 
> Could you sign the current assemblies this way?

I never looked into this myself, as my predecessor did all the required
work. And you don't need doing it yourself anyway. :)

Johannes
> 
> Cheers,
> Mark
> 
> 
> 
> -----Original Message-----
> From: Johannes Luber [mailto:JALuber at gmx.de] 
> Sent: Wednesday, May 28, 2008 7:36 PM
> To: Mark Pollack; antlr-interest at antlr.org
> Subject: Re: [antlr-interest] Request for Strongly Signed
> Antlr3.Runtime.dll
> (3.0.1)
> 
> > Hi,
> > 
> >  
> > 
> > We use Antlr quite heavily in an open source project, Spring.NET, and we
> > must sign all of our assemblies.  I want to update from 2.7 to 3.0.1 but
> > noticed that the assembly is not strongly signed.  In the past
> >
>
<http://www.antlr.org/pipermail/antlr-interest/2006-January/015149.html
> > > I was able to track down the source code and recompile myself but I
> > can't
> > locate the source for Antlr3.Runtime.dll now and it would of course be
> > better if it was done by the Antlr team.
> 
> The reason is that the only avaliable source was the reflactored source
> code
> version. Even I as the new maintainer never had the original source code
> for
> that. But while I can't help you there, 3.1 already includes strongnamed
> assemblies - at least they should be strongnamed. Never tested that
> myself,
> as I didn't create the build files. Look at the latest beta or daily build
> for the current source code and assemblies.
> 
> Johannes
> > 
> >  
> > 
> > Is it possible to get a strongly signed 3.0.1 runtime dll?  If not, can
> it
> > be done for the 3.1 release?   I'm happy to lend a hand to help out and
> > even
> > compile myself, contribute back, if you can point me in the right
> > direction.
> > 
> > 
> >  
> > 
> > Thanks again for the great software!
> > 
> >  
> > 
> > Cheers,
> > 
> > Mark
> > 
> 
> -- 
> GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
> Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx

-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx


From fridi70 at gmx.de  Thu May 29 11:45:16 2008
From: fridi70 at gmx.de (Fridi)
Date: Thu, 29 May 2008 20:45:16 +0200
Subject: [antlr-interest] Tree grammar conditionally run subrule
In-Reply-To: <20080529092146.22317gmx1@mx041.gmx.net>
References: <20080527134002.56670@gmx.net> <483E4F61.6080903@gmx.de>
	<20080529092146.22317gmx1@mx041.gmx.net>
Message-ID: <483EF9BC.5020707@gmx.de>

Thanks, yes, expression returns bool.
I tried that, but ANTLRWorks (1.1.7) cannot generate C#/Java out of this 
:'(

"missing attribute access on rule scope: a"

expression[IBObject record] returns [bool r = false]
    // evaluate 2 expression with OR
    : ^(OR a = expression[record]
        ( { $a }? => . { $r = true; }
          | b = expression[record] { $r = $b; }
             )
       )


Did I miss something?



Gavin Lambert schrieb:
>
> How about this:
>
> ^(OR a=expression
> ( { $a }? => . { $r = true; }
> | b=expression { $r = $b; }
> )
> )
>
> (I'm assuming that expression already returns a boolean.)
>


From parrt at cs.usfca.edu  Thu May 29 12:50:35 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 29 May 2008 12:50:35 -0700
Subject: [antlr-interest] Tree grammar conditionally run subrule
In-Reply-To: <483EF9BC.5020707@gmx.de>
References: <20080527134002.56670@gmx.net> <483E4F61.6080903@gmx.de>
	<20080529092146.22317gmx1@mx041.gmx.net> <483EF9BC.5020707@gmx.de>
Message-ID: <31B14E9C-76B8-4FC2-9A35-B2C0E26CF512@cs.usfca.edu>

$a.r
Ter
On May 29, 2008, at 11:45 AM, Fridi wrote:

> Thanks, yes, expression returns bool.
> I tried that, but ANTLRWorks (1.1.7) cannot generate C#/Java out of  
> this :'(
>
> "missing attribute access on rule scope: a"
>
> expression[IBObject record] returns [bool r = false]
>   // evaluate 2 expression with OR
>   : ^(OR a = expression[record]
>       ( { $a }? => . { $r = true; }
>         | b = expression[record] { $r = $b; }
>            )
>      )
>
>
> Did I miss something?
>
>
>
> Gavin Lambert schrieb:
>>
>> How about this:
>>
>> ^(OR a=expression
>> ( { $a }? => . { $r = true; }
>> | b=expression { $r = $b; }
>> )
>> )
>>
>> (I'm assuming that expression already returns a boolean.)
>>
>


From jimi at temporal-wave.com  Thu May 29 17:45:53 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 29 May 2008 17:45:53 -0700
Subject: [antlr-interest] ANTLR 3.1b1 released!
In-Reply-To: <af7c90190805290413n2dc8b7c9rb35a5de24f266b72@mail.gmail.com>
References: <62F7B8D6-C3D0-4A7A-B1C1-E8BD44405B89@cs.usfca.edu>
	<200805291300.22459@centrum.cz>
	<af7c90190805290413n2dc8b7c9rb35a5de24f266b72@mail.gmail.com>
Message-ID: <1212108353.7204.13.camel@jimi>

On Thu, 2008-05-29 at 13:13 +0200, Tomas Potrusil wrote:

> I would like to remind you that C runtime still doesn't support
> (correct) custom adaptors like Java does. In "advocacy of C++ support
> in ANTLR 3.x" thread Jim Idle wrote:
> 
> > As I said, if I have wandered away from that recently, it is a mistake as it is intended to do this,
> > so I will fix it up for the release of 3.1.
> 
> It would nice to have it done in the coming 3.1 version...


Yes - I am planning on making sure that all that stuff works properly
again :-)

> 
> Tom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080529/5590049e/attachment.html 

From david.benn at astc-design.com  Fri May 30 01:07:29 2008
From: david.benn at astc-design.com (David Benn)
Date: Fri, 30 May 2008 17:37:29 +0930
Subject: [antlr-interest] [bug?] AST rewrite rule with no (imaginary) token
 yields C runtime compile error
Message-ID: <483FB5C1.4070804@astc-design.com>

I have this production:

predefined_type_def
                  : primitive_type -> ^(PREDEF_TYPE primitive_type)
                  | IDENT IDENT -> ^(PREDEF_TYPE IDENT IDENT)
                  ;

that works fine. An earlier version looked like this:

predefined_type_def
                  : primitive_type -> ^(primitive_type)
                  | IDENT IDENT -> ^(IDENT IDENT)
                  ;

i.e. it had no imaginary root node in the AST rewrite rule.

When compiling the resulting Parser for grammar X for the C runtime, I get:

- g++ -g  -I/work/astc-internal/antlr3/include -c XLexer.c    XParser.c
XParser.c: In function `XParser_struct_field_def_return 
struct_field_def(XParser_Ctx_struct*)':
XParser.c:2112: error: `stream_XParser' was not declared in this scope

Assuming the rewrite rule is legal (but perhaps not desirable), I guess 
this is a bug in the C runtime code generation step.

Rgds,

DJB

-- 
David Benn
Australian Semiconductor Technology Company (ASTC) Pty Ltd
76 Waymouth Street
Adelaide 5000, South Australia
ABN:   18 117 392 784
Tel:   +61 8 8231 2782
Mob:   +61 407 261163
Email: david.benn at astc-design.com
Web:   www.astc-design.com


From antlr at mirality.co.nz  Fri May 30 01:14:01 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 30 May 2008 20:14:01 +1200
Subject: [antlr-interest] [bug?] AST rewrite rule with no (imaginary)
 token yields C runtime compile error
In-Reply-To: <483FB5C1.4070804@astc-design.com>
References: <483FB5C1.4070804@astc-design.com>
Message-ID: <20080530081421.099A511ED34@www.antlr.org>

At 20:07 30/05/2008, David Benn wrote:
 >predefined_type_def
 >                  : primitive_type -> ^(primitive_type)
 >                  | IDENT IDENT -> ^(IDENT IDENT)
 >                  ;
 >
 >i.e. it had no imaginary root node in the AST rewrite rule.
[...]
 >Assuming the rewrite rule is legal (but perhaps not desirable), 
I
 >guess this is a bug in the C runtime code generation step.

I vaguely remember a discussion on something similar a while 
back.  I think the general idea was that this sort of thing isn't 
legal, since 'primitive_type' might expand to zero or more tokens, 
and exactly one token must be the root node.

You could always just not try to wrap it into another subtree 
level though -- 'primitive_type -> primitive_type' should work 
fine.  (In fact I think just 'primitive_type' alone should also 
work, but I vaguely recall something odd with that as well.)


From hharalambiev at gmail.com  Fri May 30 04:15:19 2008
From: hharalambiev at gmail.com (Haralambi Haralambiev)
Date: Fri, 30 May 2008 14:15:19 +0300
Subject: [antlr-interest] Ignoring case within token definition?
Message-ID: <aa71f710805300415n5bfd041cn1c2cb02c4d3b8e96@mail.gmail.com>

Hello,

I was wondering is there a possibility to ignore the letter case when
matching a token rule.

There are several languages that ignore the case of keywords, so
I wonder how to match all cases in a beautiful and efficient manner?

The only way I could think of is the following (consider the keyword is
"keyword"):

Keyword: ('K'|'k') ('E'|'e') ('Y'|'y') ('W'|'w') ('O'|'o') ('R'|'r')
('D'|'d');

This, obviously, is not nice to type... I would love if there is some option
to tell the lexer rule to ignore the case. Is there any?

Best Regards,
Hari
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080530/b1060736/attachment.html 

From antlr at mirality.co.nz  Fri May 30 04:46:10 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 30 May 2008 23:46:10 +1200
Subject: [antlr-interest] Ignoring case within token definition?
In-Reply-To: <aa71f710805300415n5bfd041cn1c2cb02c4d3b8e96@mail.gmail.com
 >
References: <aa71f710805300415n5bfd041cn1c2cb02c4d3b8e96@mail.gmail.com>
Message-ID: <20080530114620.3420311E996@www.antlr.org>

At 23:15 30/05/2008, Haralambi Haralambiev wrote:
>I was wondering is there a possibility to ignore the letter case 
>when matching a token rule.

http://www.antlr.org/wiki/pages/viewpage.action?pageId=1782


From dbenn at computer.org  Fri May 30 05:23:37 2008
From: dbenn at computer.org (David Benn)
Date: Fri, 30 May 2008 21:53:37 +0930
Subject: [antlr-interest] [bug?] AST rewrite rule with no (imaginary)
	token yields C runtime compile error
In-Reply-To: <20080530081421.099A511ED34@www.antlr.org>
References: <483FB5C1.4070804@astc-design.com>
	<20080530081421.099A511ED34@www.antlr.org>
Message-ID: <E91D7929-EF3B-408B-809D-44E6E1A7FF3D@computer.org>

Hi Gary

Thanks, that seems quite reasonable. Mostly I wanted to raise the  
question: should this error make it through to the generated parser  
code, or be caught by the ANTLR AST rewrite mechanism? If it is an  
illegal construct, I would suppose the latter.

Thanks.

Rgds,

DJB

On 30/05/2008, at 5:44 PM, Gavin Lambert wrote:

> At 20:07 30/05/2008, David Benn wrote:
> >predefined_type_def
> >                  : primitive_type -> ^(primitive_type)
> >                  | IDENT IDENT -> ^(IDENT IDENT)
> >                  ;
> >
> >i.e. it had no imaginary root node in the AST rewrite rule.
> [...]
> >Assuming the rewrite rule is legal (but perhaps not desirable), I
> >guess this is a bug in the C runtime code generation step.
>
> I vaguely remember a discussion on something similar a while back.   
> I think the general idea was that this sort of thing isn't legal,  
> since 'primitive_type' might expand to zero or more tokens, and  
> exactly one token must be the root node.
>
> You could always just not try to wrap it into another subtree level  
> though -- 'primitive_type -> primitive_type' should work fine.  (In  
> fact I think just 'primitive_type' alone should also work, but I  
> vaguely recall something odd with that as well.)
>

Regards,

David Benn
dbenn at computer.org
0407 261163

"The real voyage of discovery consists not in seeking new landscapes  
but in having new eyes." (Marcel Proust)





From cmundi at gmail.com  Fri May 30 08:24:49 2008
From: cmundi at gmail.com (C. Mundi)
Date: Fri, 30 May 2008 08:24:49 -0700
Subject: [antlr-interest] Ignoring case within token definition?
In-Reply-To: <aa71f710805300415n5bfd041cn1c2cb02c4d3b8e96@mail.gmail.com>
References: <aa71f710805300415n5bfd041cn1c2cb02c4d3b8e96@mail.gmail.com>
Message-ID: <e794390805300824y55784756g608c2b2ff8720fc9@mail.gmail.com>

This is a rhetorical question, not really an answer to the OP's question:

Is case-insensitivity an appropriate (read: orthodox in the canon of
language recognition) role for a lexer?

I am genuinely interested in the opinion of language experts on this
question.  My amateur logic goes like this:

It seems to me that case insensitivity -- if it is to be applied fairly
generally free of context -- is a job for an input filter.  Requiring a
lexer to recognize case equivalence seems like a complication unlikely to
support robust behavior or maintainability of the lexer generator itself or
the resulting lexer.

When I have needed to do this (long ago in a galaxy far away) I simply
filtered the lexer's input stream to convert all non-escaped tokens to lower
case (for lexers designed to recognize lower case).  So quoted strings and
escape sequences are passed through unchanged to the lexer, but everything
else the lexer gets is lower case.  I realize that this is probably not a
Unicode-friendly solution.  :)  But it was a practical engineering solution
for me, and that code is still in production.

cm


On Fri, May 30, 2008 at 4:15 AM, Haralambi Haralambiev <
hharalambiev at gmail.com> wrote:

> Hello,
>
> I was wondering is there a possibility to ignore the letter case when
> matching a token rule.
>
> There are several languages that ignore the case of keywords, so
> I wonder how to match all cases in a beautiful and efficient manner?
>
> The only way I could think of is the following (consider the keyword is
> "keyword"):
>
> Keyword: ('K'|'k') ('E'|'e') ('Y'|'y') ('W'|'w') ('O'|'o') ('R'|'r')
> ('D'|'d');
>
> This, obviously, is not nice to type... I would love if there is some
> option to tell the lexer rule to ignore the case. Is there any?
>
> Best Regards,
> Hari
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080530/710f1c52/attachment.html 

From cmundi at gmail.com  Fri May 30 11:31:29 2008
From: cmundi at gmail.com (C. Mundi)
Date: Fri, 30 May 2008 11:31:29 -0700
Subject: [antlr-interest] C# sources in intermediate builds
Message-ID: <e794390805301131v630171efpb6893fad46700dfd@mail.gmail.com>

Hi, again.

My goal today is to build all of the ANTLR 3.1 runtime libs (expect maybe
StringTemplate) needed to target C#.

I noticed a couple things about the C# sources in antlr-2008-05-25.11 when
building on WinXP.

The following files (and only the following files) for the C# runtime
projects had "0000664" appended to them by WinZip 9.0.  Hmmm... looks a lot
like un*x file permissions bits:

Antlr3.Runtime.Tests (VS2005).csproj0000644
MismatchedNotSetException.cs0000644
DebugTreeNodeStream.cs0000644
IDebugEventListener.cs0000644
CommonTreeNodeStream.cs0000644

Renamed the files, and everything built great with Visual Studio 2005.

The other thing I noticed is that there seems to be no project file (Visual
Studio or Nant) to rebuild antlr.runtime.dll.  I assume there's a really
good reason for this, and that if I understood that reason I would be that
much further along in my ANTLR journey.  So what do I need to know?  If this
has been discussed here (which seems likely) I would appreciate a pointer to
that discussion.

thanks!
cm
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080530/0836f5cd/attachment-0001.html 

From cdoucette at vaultus.com  Fri May 30 13:39:40 2008
From: cdoucette at vaultus.com (Doucette, Charles)
Date: Fri, 30 May 2008 16:39:40 -0400
Subject: [antlr-interest] ANTLRWorks 1.2b2 available
In-Reply-To: <D6964709-6BE4-4620-98C6-51BE5E1B1876@arizona-software.ch>
References: <D6964709-6BE4-4620-98C6-51BE5E1B1876@arizona-software.ch>
Message-ID: <A7746824D386F947BBC285F6EC4716B0021311CF2E@vmtbosmail01.VMTBOSTON.VAULTUS.COM>

I think I may have found a small bug in ANTLRWorks 1.2b2 (on Windows in case that matters).
When I search for usages of a grammar rule, and I get a new tab with the search results, I am usually not able to close that tab.

Thanks,
Chuck

p.s.    Is the lexer grammar no longer regenerated as a separate __.g file?

________________________________
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jean Bovet
Sent: Sunday, May 11, 2008 3:30 AM
To: antlr-interest Interest
Subject: [antlr-interest] ANTLRWorks 1.2b2 available

Hello,

ANTLRWorks 1.2b2 is available for testing at the usual location (www.antlr.org/works)<http://www.antlr.org/works)>. The list of changes can be viewed in the roadmap (http://www.antlr.org:8888/browse/AW?report=com.atlassian.jira.plugin.system.project:roadmap-panel). The main changes concern the support for the composite grammar (syntax, debugger).

Regards,

Jean

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080530/3f85ee8c/attachment.html 

From parrt at cs.usfca.edu  Fri May 30 13:43:31 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 30 May 2008 13:43:31 -0700
Subject: [antlr-interest] ANTLRWorks 1.2b2 available
In-Reply-To: <A7746824D386F947BBC285F6EC4716B0021311CF2E@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
References: <D6964709-6BE4-4620-98C6-51BE5E1B1876@arizona-software.ch>
	<A7746824D386F947BBC285F6EC4716B0021311CF2E@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
Message-ID: <2999AF96-2099-4E07-9539-5FC94BD4FD1C@cs.usfca.edu>


On May 30, 2008, at 1:39 PM, Doucette, Charles wrote:

> I think I may have found a small bug in ANTLRWorks 1.2b2 (on Windows  
> in case that matters).
> When I search for usages of a grammar rule, and I get a new tab with  
> the search results, I am usually not able to close that tab.
>
> Thanks,
> Chuck
>
> p.s.    Is the lexer grammar no longer regenerated as a separate  
> __.g file?

it is but tmp file is deleted...i need an option to keep that sucker  
around.
Ter

From JALuber at gmx.de  Fri May 30 13:44:22 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Fri, 30 May 2008 22:44:22 +0200
Subject: [antlr-interest] ANTLRWorks 1.2b2 available
In-Reply-To: <A7746824D386F947BBC285F6EC4716B0021311CF2E@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
References: <D6964709-6BE4-4620-98C6-51BE5E1B1876@arizona-software.ch>
	<A7746824D386F947BBC285F6EC4716B0021311CF2E@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
Message-ID: <20080530204422.230450@gmx.net>

> I think I may have found a small bug in ANTLRWorks 1.2b2 (on Windows in
> case that matters).
> When I search for usages of a grammar rule, and I get a new tab with the
> search results, I am usually not able to close that tab.
> 
> Thanks,
> Chuck
> 
> p.s.    Is the lexer grammar no longer regenerated as a separate __.g
> file?

I believe that this temporary file is deleted after the generation.

Johannes
> 
> ________________________________
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jean Bovet
> Sent: Sunday, May 11, 2008 3:30 AM
> To: antlr-interest Interest
> Subject: [antlr-interest] ANTLRWorks 1.2b2 available
> 
> Hello,
> 
> ANTLRWorks 1.2b2 is available for testing at the usual location
> (www.antlr.org/works)<http://www.antlr.org/works)>. The list of changes can be viewed
> in the roadmap
> (http://www.antlr.org:8888/browse/AW?report=com.atlassian.jira.plugin.system.project:roadmap-panel). The main changes concern the
> support for the composite grammar (syntax, debugger).
> 
> Regards,
> 
> Jean
> 

-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

From JALuber at gmx.de  Fri May 30 13:47:45 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Fri, 30 May 2008 22:47:45 +0200
Subject: [antlr-interest] C# sources in intermediate builds
Message-ID: <20080530204745.230470@gmx.net>

> Hi, again.
> 
> My goal today is to build all of the ANTLR 3.1 runtime libs (expect maybe
> StringTemplate) needed to target C#.
> 
> I noticed a couple things about the C# sources in antlr-2008-05-25.11 when
> building on WinXP.
> 
> The following files (and only the following files) for the C# runtime
> projects had "0000664" appended to them by WinZip 9.0.  Hmmm... looks a
> lot
> like un*x file permissions bits:
> 
> Antlr3.Runtime.Tests (VS2005).csproj0000644
> MismatchedNotSetException.cs0000644
> DebugTreeNodeStream.cs0000644
> IDebugEventListener.cs0000644
> CommonTreeNodeStream.cs0000644

I don't know why that is the case. Personally I use perforce and never had this problem.
> 
> Renamed the files, and everything built great with Visual Studio 2005.

Neat!
> 
> The other thing I noticed is that there seems to be no project file
> (Visual
> Studio or Nant) to rebuild antlr.runtime.dll.  I assume there's a really
> good reason for this, and that if I understood that reason I would be that
> much further along in my ANTLR journey.  So what do I need to know?  If
> this
> has been discussed here (which seems likely) I would appreciate a pointer
> to
> that discussion.
> 
> thanks!
> cm

As far as I understand it, antlr.runtime is from ANTLR 2.7.7 and is used by StringTemplate, as it has not been converted to ANTLR 3 yet. Just ignore the file for building purposes, unless you plan to use StringTemplate.

Johannes
-- 
Super-Aktion nur in der GMX Spieleflat: 10 Tage f?r 1 Euro.
?ber 180 Spiele downloaden: http://flat.games.gmx.de

From robin at pozytron.com  Fri May 30 15:08:58 2008
From: robin at pozytron.com (Robin Hamilton-Pennell)
Date: Fri, 30 May 2008 16:08:58 -0600
Subject: [antlr-interest] Duplicating Tree Nodes (in rewrite grammar)
Message-ID: <9bfd4b3c0805301508u1f52fac9g47dc9e527b3b902b@mail.gmail.com>

Hi all,

Been stumbling against a problem lately which I'd like to get some feedback on.

I need to duplicate a tree node at a certain point in my AST rewrite
grammar, including all of its children (recursively). If I knew the
number of copies necessary in advance, I imagine I could do something
like this:

foo:
    ^(BAR baz)  ->  ^(BAR baz)  ^(BAR baz)  ^(BAR baz)
    ;

However, the number of copies necessary is not knowable until runtime.

I tried simply using CommonTree.dupNode(), but it doesn't copy the
children (after reading through the source I know this is correct
behavior).

So I guess my question is this: How can I make an arbitrary number of
copies of a tree node and all sub-trees? I don't actually care about
making changes to the tree yet, I just want a verbatim copy.

Any advice would be appreciated.

Thanks in advance,
Robin

From parrt at cs.usfca.edu  Fri May 30 15:11:33 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 30 May 2008 15:11:33 -0700
Subject: [antlr-interest] Duplicating Tree Nodes (in rewrite grammar)
In-Reply-To: <9bfd4b3c0805301508u1f52fac9g47dc9e527b3b902b@mail.gmail.com>
References: <9bfd4b3c0805301508u1f52fac9g47dc9e527b3b902b@mail.gmail.com>
Message-ID: <6D18A17E-3A19-4B3E-89ED-666954CFDC4C@cs.usfca.edu>

ANTLRWill automatically build duplicates as necessary. Is this what  
you want?

d : type ID (',' ID)* -> ^(DECL type ID)+ ;

ANTLR should make n copies of DECL and n-1 copies of type's tree.
Ter
On May 30, 2008, at 3:08 PM, Robin Hamilton-Pennell wrote:

> Hi all,
>
> Been stumbling against a problem lately which I'd like to get some  
> feedback on.
>
> I need to duplicate a tree node at a certain point in my AST rewrite
> grammar, including all of its children (recursively). If I knew the
> number of copies necessary in advance, I imagine I could do something
> like this:
>
> foo:
>    ^(BAR baz)  ->  ^(BAR baz)  ^(BAR baz)  ^(BAR baz)
>    ;
>
> However, the number of copies necessary is not knowable until runtime.
>
> I tried simply using CommonTree.dupNode(), but it doesn't copy the
> children (after reading through the source I know this is correct
> behavior).
>
> So I guess my question is this: How can I make an arbitrary number of
> copies of a tree node and all sub-trees? I don't actually care about
> making changes to the tree yet, I just want a verbatim copy.
>
> Any advice would be appreciated.
>
> Thanks in advance,
> Robin


From cmundi at gmail.com  Fri May 30 15:53:43 2008
From: cmundi at gmail.com (C. Mundi)
Date: Fri, 30 May 2008 15:53:43 -0700
Subject: [antlr-interest] C# sources in intermediate builds
In-Reply-To: <20080530204745.230470@gmx.net>
References: <20080530204745.230470@gmx.net>
Message-ID: <e794390805301553q5d8a1ea4hbbac8737a088782e@mail.gmail.com>

Thank you, Johannes.  - Carlos

On Fri, May 30, 2008 at 1:47 PM, Johannes Luber <JALuber at gmx.de> wrote:

> > Hi, again.
> >
> > My goal today is to build all of the ANTLR 3.1 runtime libs (expect maybe
> > StringTemplate) needed to target C#.
> >
> > I noticed a couple things about the C# sources in antlr-2008-05-25.11
> when
> > building on WinXP.
> >
> > The following files (and only the following files) for the C# runtime
> > projects had "0000664" appended to them by WinZip 9.0.  Hmmm... looks a
> > lot
> > like un*x file permissions bits:
> >
> > Antlr3.Runtime.Tests (VS2005).csproj0000644
> > MismatchedNotSetException.cs0000644
> > DebugTreeNodeStream.cs0000644
> > IDebugEventListener.cs0000644
> > CommonTreeNodeStream.cs0000644
>
> I don't know why that is the case. Personally I use perforce and never had
> this problem.
> >
> > Renamed the files, and everything built great with Visual Studio 2005.
>
> Neat!
> >
> > The other thing I noticed is that there seems to be no project file
> > (Visual
> > Studio or Nant) to rebuild antlr.runtime.dll.  I assume there's a really
> > good reason for this, and that if I understood that reason I would be
> that
> > much further along in my ANTLR journey.  So what do I need to know?  If
> > this
> > has been discussed here (which seems likely) I would appreciate a pointer
> > to
> > that discussion.
> >
> > thanks!
> > cm
>
> As far as I understand it, antlr.runtime is from ANTLR 2.7.7 and is used by
> StringTemplate, as it has not been converted to ANTLR 3 yet. Just ignore the
> file for building purposes, unless you plan to use StringTemplate.
>
> Johannes
> --
> Super-Aktion nur in der GMX Spieleflat: 10 Tage f?r 1 Euro.
> ?ber 180 Spiele downloaden: http://flat.games.gmx.de
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080530/71c65d68/attachment.html 

From ejungkurth at yahoo.com  Fri May 30 15:54:31 2008
From: ejungkurth at yahoo.com (Eric Jungkurth)
Date: Fri, 30 May 2008 15:54:31 -0700 (PDT)
Subject: [antlr-interest] Backtracking question
Message-ID: <406660.59608.qm@web63004.mail.re1.yahoo.com>

I have a grammar.
I can match multiple distinct phrases such as "SECTION 1. ORS 123.456 is amended to read" 
but unfortunately my input is littered with a lot of other stuff I don't care about. 
Most of that stuff gets ignored just as I'd like it to. However, if the stuff I don't 
care about contains tokens such as "is" or "and", which I do care about in certain 
contexts, then the parser throws a NoViableAltException and quits.
If I turn backtracking on I can no longer match anything, even if the entire input can be
matched with backtracking turned off. I've tried using a syntactic predicate but can
never match more than "SECTION 1." before I get a FailedPredicate.
What I'd really like to do is something like this:
phrase
?:?ors (IS | ARE) orsAction 
?|?orcp (IS | ARE) orcpAction
?|?orl (IS | ARE) orlAction
?|?// I didn't match 'ORS'or 'ORCP' or 'SECTION' so go to next token
?;

Any help? I'm especially not understanding why a grammar that works for certain inputs
won't match anything with backtracking on. That seems counterintuitive.
Thanks,
Eric

grammar ar;
measure?:?section+ EOF
?;
section?:?SECTION_INDEX phrase+
?;
phrase
?:?ors (IS | ARE) orsAction 
?|?orcp (IS | ARE) orcpAction
?|?orl (IS | ARE) orlAction
?;
orsAction
?:?FURTHER? AMENDED TO READ
?|?REPEALED
?|?ADDED TO AND MADE PART OF
?;
?
orcpAction
?:?FURTHER? AMENDED TO READ
?|?REPEALED
?|?AMENDED BY ADDING A? NEW SECTION
?;
orlAction
?:?FURTHER? AMENDED TO READ
?|?ADDED TO AND MADE PART OF orlSections
?|?REPEALED
?;
?
ors?:?orsRange (COMMA orsRange)*
?;
??
orsRange
?:?ORS ORS_BASE_SECTION (TO ORS_BASE_SECTION)? 
?;
?
ORS_BASE_SECTION
?:?BASE_SECTION PERIOD DIGIT+
?;
orcp?:?ORCP orcpRange
?;
? 
orcpRange
?:?BASE_SECTION ((COMMA BASE_SECTION)* AND BASE_SECTION)? 
?;
?
BASE_SECTION
?:?DIGIT+ WS UPPERCASE_LETTER?
?;
??
orl?:?orlSections 
??((COMMA AS AMENDED BY orlSections)
??|(OF THIS DIGIT+ ACT)) 
?;
orlSections
?:?SECTION orlBaseRange
??((COMMA orlBaseRange)* AND orlBaseRange)?
?;
?
orlBaseRange
?:?orlSection (TO orlSection)?
?;
?
orlSection
?:?ORL_BASE_SECTION COMMA
??(CHAPTER DIGIT+ COMMA)?
??(OREGON LAWS DIGIT+)?
??(LPAREN ENROLLED measureNumber RPAREN)?
?;
?
ORL_BASE_SECTION
?:?DIGIT+ LOWERCASE_LETTER?
?;
measureNumber
?:?measurePrefix DIGIT+
?;
??
measurePrefix
?:?(HOUSE | SENATE) (BILL | (JOINT RESOLUTION))
?;
?
A?:?'a';
ACT?:?'Act';
ADDED?:?'added';
?
ADDING?:?'adding';
AMENDED?:?'amended';
AND?:?'and';
ARE?:?'are';
AS?:?'as';
BILL?:?'Bill';
BY?:?'by';
CHAPTER?:?'chapter';
ENROLLED:?'Enrolled';
FURTHER?:?'further';
HOUSE?:?'House';
IS?:?'is';
JOINT?:?'Joint';
LAWS?:?'Laws';
LPAREN?:?'(';
MADE?:?'made';
NEW?:?'new';
OF?:?'of';
ORCP?:?'ORCP';
OREGON?:?'Oregon';
ORS?:?'ORS';
PART?:?'part';
READ?:?'read';
REPEALED:?'repealed';
RESOLUTION
?:?'Resolution';
?
RPAREN?:?')';
SECTION?:?('S'|'s')('E'|'e')('C'|'c')('T'|'t')('I'|'i')('O'|'o')('N'|'n')'s'?;
SENATE?:?'Senate';
TO?:?'to';
?
THIS?:?'this';
SECTION_INDEX
?:?SECTION WS DIGIT+ PERIOD;
COMMA?:?',';
PERIOD?:?'.';
fragment
DIGIT?:?'0'..'9';
WS?:?(' ' | '\t' | '\n')* { skip(); };
fragment
UPPERCASE_LETTER
?:?'A'..'Z';
fragment
LOWERCASE_LETTER
?:?'a'..'z';


      

From parrt at cs.usfca.edu  Fri May 30 16:04:28 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 30 May 2008 16:04:28 -0700
Subject: [antlr-interest] Backtracking question
In-Reply-To: <406660.59608.qm@web63004.mail.re1.yahoo.com>
References: <406660.59608.qm@web63004.mail.re1.yahoo.com>
Message-ID: <308A8D1F-E414-4531-9BB2-41E2BB72B952@cs.usfca.edu>

sounds to me like you need filter=true in a lexer.  Check out fuzzy  
parser in examples-v3 tarball.
Ter
On May 30, 2008, at 3:54 PM, Eric Jungkurth wrote:

> I have a grammar.
> I can match multiple distinct phrases such as "SECTION 1. ORS  
> 123.456 is amended to read"
> but unfortunately my input is littered with a lot of other stuff I  
> don't care about.
> Most of that stuff gets ignored just as I'd like it to. However, if  
> the stuff I don't
> care about contains tokens such as "is" or "and", which I do care  
> about in certain
> contexts, then the parser throws a NoViableAltException and quits.
> If I turn backtracking on I can no longer match anything, even if  
> the entire input can be
> matched with backtracking turned off. I've tried using a syntactic  
> predicate but can
> never match more than "SECTION 1." before I get a FailedPredicate.
> What I'd really like to do is something like this:
> phrase
>  : ors (IS | ARE) orsAction
>  | orcp (IS | ARE) orcpAction
>  | orl (IS | ARE) orlAction
>  | // I didn't match 'ORS'or 'ORCP' or 'SECTION' so go to next token
>  ;
>
> Any help? I'm especially not understanding why a grammar that works  
> for certain inputs
> won't match anything with backtracking on. That seems  
> counterintuitive.
> Thanks,
> Eric
>
> grammar ar;
> measure : section+ EOF
>  ;
> section : SECTION_INDEX phrase+
>  ;
> phrase
>  : ors (IS | ARE) orsAction
>  | orcp (IS | ARE) orcpAction
>  | orl (IS | ARE) orlAction
>  ;
> orsAction
>  : FURTHER? AMENDED TO READ
>  | REPEALED
>  | ADDED TO AND MADE PART OF
>  ;
>
> orcpAction
>  : FURTHER? AMENDED TO READ
>  | REPEALED
>  | AMENDED BY ADDING A? NEW SECTION
>  ;
> orlAction
>  : FURTHER? AMENDED TO READ
>  | ADDED TO AND MADE PART OF orlSections
>  | REPEALED
>  ;
>
> ors : orsRange (COMMA orsRange)*
>  ;
>
> orsRange
>  : ORS ORS_BASE_SECTION (TO ORS_BASE_SECTION)?
>  ;
>
> ORS_BASE_SECTION
>  : BASE_SECTION PERIOD DIGIT+
>  ;
> orcp : ORCP orcpRange
>  ;
>
> orcpRange
>  : BASE_SECTION ((COMMA BASE_SECTION)* AND BASE_SECTION)?
>  ;
>
> BASE_SECTION
>  : DIGIT+ WS UPPERCASE_LETTER?
>  ;
>
> orl : orlSections
>   ((COMMA AS AMENDED BY orlSections)
>   |(OF THIS DIGIT+ ACT))
>  ;
> orlSections
>  : SECTION orlBaseRange
>   ((COMMA orlBaseRange)* AND orlBaseRange)?
>  ;
>
> orlBaseRange
>  : orlSection (TO orlSection)?
>  ;
>
> orlSection
>  : ORL_BASE_SECTION COMMA
>   (CHAPTER DIGIT+ COMMA)?
>   (OREGON LAWS DIGIT+)?
>   (LPAREN ENROLLED measureNumber RPAREN)?
>  ;
>
> ORL_BASE_SECTION
>  : DIGIT+ LOWERCASE_LETTER?
>  ;
> measureNumber
>  : measurePrefix DIGIT+
>  ;
>
> measurePrefix
>  : (HOUSE | SENATE) (BILL | (JOINT RESOLUTION))
>  ;
>
> A : 'a';
> ACT : 'Act';
> ADDED : 'added';
>
> ADDING : 'adding';
> AMENDED : 'amended';
> AND : 'and';
> ARE : 'are';
> AS : 'as';
> BILL : 'Bill';
> BY : 'by';
> CHAPTER : 'chapter';
> ENROLLED: 'Enrolled';
> FURTHER : 'further';
> HOUSE : 'House';
> IS : 'is';
> JOINT : 'Joint';
> LAWS : 'Laws';
> LPAREN : '(';
> MADE : 'made';
> NEW : 'new';
> OF : 'of';
> ORCP : 'ORCP';
> OREGON : 'Oregon';
> ORS : 'ORS';
> PART : 'part';
> READ : 'read';
> REPEALED: 'repealed';
> RESOLUTION
>  : 'Resolution';
>
> RPAREN : ')';
> SECTION : ('S'|'s')('E'|'e')('C'|'c')('T'|'t')('I'|'i')('O'|'o') 
> ('N'|'n')'s'?;
> SENATE : 'Senate';
> TO : 'to';
>
> THIS : 'this';
> SECTION_INDEX
>  : SECTION WS DIGIT+ PERIOD;
> COMMA : ',';
> PERIOD : '.';
> fragment
> DIGIT : '0'..'9';
> WS : (' ' | '\t' | '\n')* { skip(); };
> fragment
> UPPERCASE_LETTER
>  : 'A'..'Z';
> fragment
> LOWERCASE_LETTER
>  : 'a'..'z';
>
>
>


From robin at pozytron.com  Fri May 30 18:17:39 2008
From: robin at pozytron.com (Robin Hamilton-Pennell)
Date: Fri, 30 May 2008 19:17:39 -0600
Subject: [antlr-interest] Duplicating Tree Nodes (in rewrite grammar)
In-Reply-To: <6D18A17E-3A19-4B3E-89ED-666954CFDC4C@cs.usfca.edu>
References: <9bfd4b3c0805301508u1f52fac9g47dc9e527b3b902b@mail.gmail.com>
	<6D18A17E-3A19-4B3E-89ED-666954CFDC4C@cs.usfca.edu>
Message-ID: <9bfd4b3c0805301817x44196a0bq8c242a0f66574063@mail.gmail.com>

Thanks for the reply.

Actually, that won't work in my case, since the number of duplicates
is not based on any existing tokens, but on some member variables set
during semantic analysis (I actually have a Set<String> containing the
"names" for each of the generated blocks). Unfortunately the specifics
of my grammar are pretty esoteric, and so explaining it is difficult.

There's no repeated elements in the rule I want to do the duplication
in (this is an actual clip of the grammar, slightly simplified):

statement
	: ^(TYPEDEF l=lvalue b=basicBlock)			->  // ?????
	| // other rules...
        ;

So, let's say after semantic analysis, I determine I need 6 duplicates
of $b above. What could I put on the right side of the rule to do
this? Is it possible to create 6 imaginary tokens based on some
context variables, and then use the technique you showed? I'm sorry if
I'm being dense, I just have a hard time wrapping my mind around what
I need to do...

Thanks again for your help,
Robin

On Fri, May 30, 2008 at 4:11 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> ANTLRWill automatically build duplicates as necessary. Is this what you
> want?
>
> d : type ID (',' ID)* -> ^(DECL type ID)+ ;
>
> ANTLR should make n copies of DECL and n-1 copies of type's tree.
> Ter
> On May 30, 2008, at 3:08 PM, Robin Hamilton-Pennell wrote:
>
>> Hi all,
>>
>> Been stumbling against a problem lately which I'd like to get some
>> feedback on.
>>
>> I need to duplicate a tree node at a certain point in my AST rewrite
>> grammar, including all of its children (recursively). If I knew the
>> number of copies necessary in advance, I imagine I could do something
>> like this:
>>
>> foo:
>>   ^(BAR baz)  ->  ^(BAR baz)  ^(BAR baz)  ^(BAR baz)
>>   ;
>>
>> However, the number of copies necessary is not knowable until runtime.
>>
>> I tried simply using CommonTree.dupNode(), but it doesn't copy the
>> children (after reading through the source I know this is correct
>> behavior).
>>
>> So I guess my question is this: How can I make an arbitrary number of
>> copies of a tree node and all sub-trees? I don't actually care about
>> making changes to the tree yet, I just want a verbatim copy.
>>
>> Any advice would be appreciated.
>>
>> Thanks in advance,
>> Robin
>
>

From robin at pozytron.com  Fri May 30 19:08:59 2008
From: robin at pozytron.com (Robin Hamilton-Pennell)
Date: Fri, 30 May 2008 20:08:59 -0600
Subject: [antlr-interest] Duplicating Tree Nodes (in rewrite grammar)
In-Reply-To: <10C380B9-EDA7-4E79-A7AD-E64F06D21A59@gmail.com>
References: <9bfd4b3c0805301508u1f52fac9g47dc9e527b3b902b@mail.gmail.com>
	<6D18A17E-3A19-4B3E-89ED-666954CFDC4C@cs.usfca.edu>
	<9bfd4b3c0805301817x44196a0bq8c242a0f66574063@mail.gmail.com>
	<10C380B9-EDA7-4E79-A7AD-E64F06D21A59@gmail.com>
Message-ID: <9bfd4b3c0805301908l48e83ec7mb1e1b252201bc9d5@mail.gmail.com>

Dan,

You are the man, you saved me from my own ignorance! adaptor.dupTree()
is exactly what I needed.

Thanks,
Robin

On Fri, May 30, 2008 at 7:37 PM, Dan Delorey <dandelorey at gmail.com> wrote:
> How about adaptor.dupTree()?
>
> Sent from my iPhone
>
> On May 30, 2008, at 7:17 PM, "Robin Hamilton-Pennell" <robin at pozytron.com>
> wrote:
>
>> Thanks for the reply.
>>
>> Actually, that won't work in my case, since the number of duplicates
>> is not based on any existing tokens, but on some member variables set
>> during semantic analysis (I actually have a Set<String> containing the
>> "names" for each of the generated blocks). Unfortunately the specifics
>> of my grammar are pretty esoteric, and so explaining it is difficult.
>>
>> There's no repeated elements in the rule I want to do the duplication
>> in (this is an actual clip of the grammar, slightly simplified):
>>
>> statement
>>   : ^(TYPEDEF l=lvalue b=basicBlock)            ->  // ?????
>>   | // other rules...
>>       ;
>>
>> So, let's say after semantic analysis, I determine I need 6 duplicates
>> of $b above. What could I put on the right side of the rule to do
>> this? Is it possible to create 6 imaginary tokens based on some
>> context variables, and then use the technique you showed? I'm sorry if
>> I'm being dense, I just have a hard time wrapping my mind around what
>> I need to do...
>>
>> Thanks again for your help,
>> Robin
>>
>> On Fri, May 30, 2008 at 4:11 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
>>>
>>> ANTLRWill automatically build duplicates as necessary. Is this what you
>>> want?
>>>
>>> d : type ID (',' ID)* -> ^(DECL type ID)+ ;
>>>
>>> ANTLR should make n copies of DECL and n-1 copies of type's tree.
>>> Ter
>>> On May 30, 2008, at 3:08 PM, Robin Hamilton-Pennell wrote:
>>>
>>>> Hi all,
>>>>
>>>> Been stumbling against a problem lately which I'd like to get some
>>>> feedback on.
>>>>
>>>> I need to duplicate a tree node at a certain point in my AST rewrite
>>>> grammar, including all of its children (recursively). If I knew the
>>>> number of copies necessary in advance, I imagine I could do something
>>>> like this:
>>>>
>>>> foo:
>>>>  ^(BAR baz)  ->  ^(BAR baz)  ^(BAR baz)  ^(BAR baz)
>>>>  ;
>>>>
>>>> However, the number of copies necessary is not knowable until runtime.
>>>>
>>>> I tried simply using CommonTree.dupNode(), but it doesn't copy the
>>>> children (after reading through the source I know this is correct
>>>> behavior).
>>>>
>>>> So I guess my question is this: How can I make an arbitrary number of
>>>> copies of a tree node and all sub-trees? I don't actually care about
>>>> making changes to the tree yet, I just want a verbatim copy.
>>>>
>>>> Any advice would be appreciated.
>>>>
>>>> Thanks in advance,
>>>> Robin
>>>
>>>
>

From antlr-list at arizona-software.ch  Fri May 30 22:50:01 2008
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Fri, 30 May 2008 22:50:01 -0700
Subject: [antlr-interest] ANTLRWorks 1.2b2 available
In-Reply-To: <A7746824D386F947BBC285F6EC4716B0021311CF2E@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
References: <D6964709-6BE4-4620-98C6-51BE5E1B1876@arizona-software.ch>
	<A7746824D386F947BBC285F6EC4716B0021311CF2E@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
Message-ID: <B1B913A1-83D3-4577-9F90-291FB642A896@arizona-software.ch>

This must be fixed in the beta 3 that I just released.

Regards,

Jean

On May 30, 2008, at 1:39 PM, Doucette, Charles wrote:

> I think I may have found a small bug in ANTLRWorks 1.2b2 (on Windows  
> in case that matters).
> When I search for usages of a grammar rule, and I get a new tab with  
> the search results, I am usually not able to close that tab.
>
> Thanks,
> Chuck
>
> p.s.    Is the lexer grammar no longer regenerated as a separate  
> __.g file?
>
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org 
> ] On Behalf Of Jean Bovet
> Sent: Sunday, May 11, 2008 3:30 AM
> To: antlr-interest Interest
> Subject: [antlr-interest] ANTLRWorks 1.2b2 available
>
> Hello,
>
> ANTLRWorks 1.2b2 is available for testing at the usual location (www.antlr.org/works) 
> . The list of changes can be viewed in the roadmap (http://www.antlr.org:8888/browse/AW?report=com.atlassian.jira.plugin.system.project:roadmap-panel 
> ). The main changes concern the support for the composite grammar  
> (syntax, debugger).
>
> Regards,
>
> Jean
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080530/a93b3cd8/attachment.html 

From antlr-list at arizona-software.ch  Fri May 30 22:50:18 2008
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Fri, 30 May 2008 22:50:18 -0700
Subject: [antlr-interest] AntlrWorks 1.2b2 and Incompatible Grammar with
	sample code
In-Reply-To: <6ffb015e0805290511x59e36543xce0664c9eb6c1a9f@mail.gmail.com>
References: <6ffb015e0805290511x59e36543xce0664c9eb6c1a9f@mail.gmail.com>
Message-ID: <34BE0049-2061-49B0-A909-AE1B84CF77B7@arizona-software.ch>

This has been fixed in the beta 3 that I just released.

Regards,

Jean

On May 29, 2008, at 5:11 AM, Sebastian Mattsson wrote:

> Hi,
>
> Installed 3.1b to get to try out the nice new features.
> However when I pasted the simple example from the wiki:
> grammar T;
> options {output=AST;}
> @members {
> static class V extends CommonTree {
>
>   public int x,y,z;
>   public V(int ttype, int x, int y, int z) {
>     this.x=x; this.y=y; this.z=z; token=new CommonToken(ttype,"");
>   }
>   public V(int ttype, Token t, int x) { token=t; this.x=x; }
>
>   public String toString() {
>     return (token!=null?token.getText():"")+"<V>;"+x+y+z;
>   }
> }
> }
> a : ID -> ID<V>[42,19,30] ID<V>[$ID,99] ;
> ID : 'a'..'z'+ ;
>
> WS : (' '|'\\n') {$channel=HIDDEN;} ;
> AntlrWorks first tells my that it's an Incompatible Grammar, and  
> then it can't find the class V, just says 'undefined reference'  
> about <V>.
> After debugging the console outputs:
> [org.antlr.works.debugger.tree.DBASTModel - event 12] Warning:  
> [addChild] Child node 2 not found, ignoring.
> [org.antlr.works.debugger.tree.DBASTModel - event 14] Warning:  
> [addChild] Child node 3 not found, ignoring.
>
>
> Are these some kind of problems to be expected with the beta-version  
> or have I done something wrong?
>
> Thank You,
> Sebastian


From felix_do at web.de  Sat May 31 03:25:08 2008
From: felix_do at web.de (Felix Dorner)
Date: Sat, 31 May 2008 12:25:08 +0200
Subject: [antlr-interest] grammar to latex
Message-ID: <48412784.70906@web.de>

Hi,

Converting my antlr grammar to readable format (cursive nonterminals, 
typewriter terminals, filter actions) in latex is a pain. I looked for a 
grammar to latex converter, but didn' t find anything suitable. This 
would be a cool antlr+stringtemplate translator huh?

Maybe someone has already done this?


Felix

From nelson.ana at gmail.com  Sat May 31 05:57:01 2008
From: nelson.ana at gmail.com (Ana Nelson)
Date: Sat, 31 May 2008 13:57:01 +0100
Subject: [antlr-interest] grammar to latex
In-Reply-To: <48412784.70906@web.de>
References: <48412784.70906@web.de>
Message-ID: <a7d6d2740805310557n298cb964ta788986d59366bbd@mail.gmail.com>

Maybe try pygments? Or some other syntax highlighter with LaTeX support.
You'd just have to write/adapt a grammar definition for
ANTLR-and-your-target-language.

I think that would be easier and more maintainable than writing your own
custom output templates from scratch, even with StringTemplate :-), and you
would be able to output other formats (besides LaTeX, e.g. HTML) for free.

In fact, out of curiosity I just ran 'pygmentize' on one of my java-based
ANTLR grammar files using the java lexer and it didn't blow up. The results
weren't perfect but I was able to paste them into a latex file and render
it.

-Ana



2008/5/31 Felix Dorner <felix_do at web.de>:

> Hi,
>
> Converting my antlr grammar to readable format (cursive nonterminals,
> typewriter terminals, filter actions) in latex is a pain. I looked for a
> grammar to latex converter, but didn' t find anything suitable. This would
> be a cool antlr+stringtemplate translator huh?
>
> Maybe someone has already done this?
>
>
> Felix
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080531/930b7beb/attachment-0001.html 

From ld at galador.net  Sat May 31 06:43:19 2008
From: ld at galador.net (Lloyd Dupont)
Date: Sat, 31 May 2008 23:13:19 +0930
Subject: [antlr-interest] help with ANTLRWorks and grammar error....
Message-ID: <FCB35AC42F6B4210B564C5D3BE60EA36@LloydPC>

Hi all, after a long break, I tried to do some ANTLR again.
I decided to add a new, original, expression type in my expression interpreter.
I named it the IFS expression and it goes like that 
'ifs' LPAREN (condExpr COMMA valExpr COMMA)+ defExpr RPAREN

where condExpr, valExpr, defExpr are just expression, but I give them a nice name to make them more meaningful.
condExp is a condition expression
valExpr is the value expression to return if the condition is true
defExpr is default value expression to return if all condition where false



Part 1.]
----------
anyway I added this rule in my parser and I got one of those mysterious error
==========
22:45:48] warning(200): ExpressionGrammar.g:188:72: Decision can match input such as "LPAREN" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
==========

I don't really see it can have multiple way of getting to this LPAREN, when there is a 'ifs' first it's always a IFS rule!!!, if there is no 'ifs' it's not an IFS rule! 
where is the ambiguity in that?

I even added a predicate:
( 'ifs' LPAREN )=> 'ifs' LPAREN ( expression COMMA expression COMMA )+ assign RPAREN -> ^( IFS ^(LIST expression + ))

but ANTLR keep stubbornly fail, any clue?




Part 2.]
-----------
Then I decided to look at the "Syntax Diagram" in ANTLR Works (the attached image).
Well I realised, quite frustratingly, that I had no clue whatsoever about the meaning of the green line and red line. Can anyone enlighten me as to what the green line and the red line means please?
In what way is it supposed to help me understand my problem/"ambiguity"?
(plus the ifs expression doesn't seems to be the source of the ambiguity according to the diagram)


(below is the diagram with only what look like problematic part)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080531/e2fe4639/attachment-0001.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 22255 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080531/e2fe4639/attachment-0001.png 

From jbb at acm.org  Sat May 31 07:42:18 2008
From: jbb at acm.org (John B. Brodie)
Date: Sat, 31 May 2008 10:42:18 -0400
Subject: [antlr-interest] help with ANTLRWorks and grammar error....
In-Reply-To: <FCB35AC42F6B4210B564C5D3BE60EA36@LloydPC> (ld@galador.net)
References: <FCB35AC42F6B4210B564C5D3BE60EA36@LloydPC>
Message-ID: <E1K2SHi-0002pK-G5@gecko.home.org>

On Sat, 31 May 2008 23:13:19 +0930, Lloyd Dupont asked (summarized):
>I decided to add a new, original, expression type in my expression
>interpreter.
>I named it the IFS expression and it goes like that
>'ifs' LPAREN (condExpr COMMA valExpr COMMA)+ defExpr RPAREN
>
>where condExpr, valExpr, defExpr are just expression, but I give them a
>nice name to make them more meaningful.
>condExp is a condition expression
>valExpr is the value expression to return if the condition is true
>defExpr is default value expression to return if all condition where false

since condExpr, valExpr, and defExpr are all just an alias for the same
rule (e.g. expression), lets rewrite your rule above as:

ifs : 'ifs' LPAREN (e COMMA e COMMA)+ e RPAREN ;

where e is just expression. now i think it is easier to see the ambiguity.

consider this fragment of input:

ifs ( e1 , e2 , e3

where e1, e2, and e3 are valid instances of expression; now does the e3
above correspond to a second condExpr or to the final defExpr from your
original rule?

suggest you rewrite your rule as follows (untested):

ifs : 'ifs' LPAREN e ( COMMA e )+ RPAREN ;

and then split up the list of e's as you desire during your semantic
analysis phase.

or perhaps these rules (fairly ugly) (untested):

ifs : 'ifs' LPAREN e COMMA e tail RPAREN ;
tail : COMMA e ( COMMA e tail )? ;

Hope this helps (oh, and i do not know the answer to your AntlrWorks green
vs red lines in the Syntax Diagram question, sorry)

   -jbb

From ld at galador.net  Sat May 31 08:56:33 2008
From: ld at galador.net (Lloyd Dupont)
Date: Sun, 1 Jun 2008 01:26:33 +0930
Subject: [antlr-interest] help with ANTLRWorks and grammar error....
In-Reply-To: <E1K2SHi-0002pK-G5@gecko.home.org>
References: <FCB35AC42F6B4210B564C5D3BE60EA36@LloydPC>
	<E1K2SHi-0002pK-G5@gecko.home.org>
Message-ID: <8427344924EE4BC6911F790C8A616BC5@LloydPC>

Big thanks, your explanation makes it so clear. And indeed solve the 
problem!

I think ANTLR (Works?) error message didn't help me mail as they made me 
focus on the begining of my expression, the
"IFS LPAREN expression" part
where as the problem was more like a tail recursion problem?

Anyway thanks!

2.]
Now it would be awesome if someone can explain the meaning of the green and 
red line in the Syntax Diagram of ANTLR?!?!


From sam.ellis at arm.com  Sat May 31 11:46:41 2008
From: sam.ellis at arm.com (Sam Ellis)
Date: Sat, 31 May 2008 19:46:41 +0100
Subject: [antlr-interest] 3.1b1 (??) 2008-04-09.18 issues
Message-ID: <C4675BA1.3393F%sam.ellis@arm.com>

On Fri Apr 11, Guntis Ozols wrote:
> I've tried 2008-04-09.18 on my grammar.
> 
> 3)   [java] error(10):  internal error: .../Query.g :
> java.util.NoSuchElementException: no such attribute: ASTLabelType in template
> context [outputFile lexer lexerRule ruleDeclarations]

Hi Guntis,

I didn't see a reply to your email, but I'm seeing the same exception when
switching from antlr 3.0.1 to 3.1b1 (May 20, 2008). I tracked this down to
my lexer rules containing the '!' operator for example:

QUOTED_STRING
        :   (DQUOTE! (DSTRING_LETTER | STRING_NL)* DQUOTE!

I suspect my intent here was for the token text to not include the quotes
characters, but I already have a rule action to strip them off, so I think
my use of the '!' operator here is incorrect. Removing the '!' operator
eliminates the exception from ANTLR.


-- 
Sam Ellis, Engineering Manager,
Product Engineering Group,                 Tel: +44 (0) 1223 400516
System Design Division,                    Fax: +44 (0) 1223 400887
ARM Ltd., 110 Fulbourn Road,               skype:armsamellis
Cambridge, CB1 9NJ                         mailto:sam.ellis at arm.com



-- 
IMPORTANT NOTICE: The contents of this email and any attachments are confidential and may also be privileged. If you are not the intended recipient, please notify the sender immediately and do not disclose the contents to any other person, use it for any purpose, or store or copy the information in any medium.  Thank you.



From nelson.ana at gmail.com  Sat May 31 14:13:11 2008
From: nelson.ana at gmail.com (Ana Nelson)
Date: Sat, 31 May 2008 22:13:11 +0100
Subject: [antlr-interest] grammar to latex
In-Reply-To: <a7d6d2740805310557n298cb964ta788986d59366bbd@mail.gmail.com>
References: <48412784.70906@web.de>
	<a7d6d2740805310557n298cb964ta788986d59366bbd@mail.gmail.com>
Message-ID: <a7d6d2740805311413s68c97cddsd729278d952296ed@mail.gmail.com>

This looked like too much fun so I tried writing a Pygments grammar for
ANTLR myself. It's not finished, but the embedded Java syntax highlighting
works. :-) The bits in red which look like ransom-note lettering are the
parts of the grammar which I haven't completed. I'll try to finish the
basics off tomorrow or Monday. I'm just using Expr.g from the wiki which is
a pretty basic example.

I'm just delegating the Java portions to the Java syntax highlighter, which
means ANTLR variables in Java code like $ID or $expr don't get any special
treatment. But, that can be fixed pretty easily I imagine.

Also, it'll be very easy to add other target languages.

Pygments Grammar:
http://pastie.caboo.se/206505

Raw generated latex:
http://pastie.caboo.se/206509

Generated latex style file:
http://pastie.caboo.se/206512

Runnable latex file:
http://pastie.caboo.se/206513

Resulting PDF (temporary URL):
http://dev.agent.ie/antlr-example.pdf



2008/5/31 Ana Nelson <nelson.ana at gmail.com>:

> Maybe try pygments? Or some other syntax highlighter with LaTeX support.
> You'd just have to write/adapt a grammar definition for
> ANTLR-and-your-target-language.
>
> I think that would be easier and more maintainable than writing your own
> custom output templates from scratch, even with StringTemplate :-), and you
> would be able to output other formats (besides LaTeX, e.g. HTML) for free.
>
> In fact, out of curiosity I just ran 'pygmentize' on one of my java-based
> ANTLR grammar files using the java lexer and it didn't blow up. The results
> weren't perfect but I was able to paste them into a latex file and render
> it.
>
> -Ana
>
>
>
> 2008/5/31 Felix Dorner <felix_do at web.de>:
>
> Hi,
>>
>> Converting my antlr grammar to readable format (cursive nonterminals,
>> typewriter terminals, filter actions) in latex is a pain. I looked for a
>> grammar to latex converter, but didn' t find anything suitable. This would
>> be a cool antlr+stringtemplate translator huh?
>>
>> Maybe someone has already done this?
>>
>>
>> Felix
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080531/203fa155/attachment.html 

From felix_do at web.de  Sat May 31 15:29:46 2008
From: felix_do at web.de (Felix Dorner)
Date: Sun, 01 Jun 2008 00:29:46 +0200
Subject: [antlr-interest] grammar to latex
In-Reply-To: <a7d6d2740805311413s68c97cddsd729278d952296ed@mail.gmail.com>
References: <48412784.70906@web.de>	
	<a7d6d2740805310557n298cb964ta788986d59366bbd@mail.gmail.com>
	<a7d6d2740805311413s68c97cddsd729278d952296ed@mail.gmail.com>
Message-ID: <4841D15A.4060405@web.de>

Hei Ana,

gee, I hope I didn't keep you from socializing this weekend... The 
example looks cool. I don' t know pygments, what I really would like is 
not syntax coloring, but fontification, such that terminals (Strings in 
' ' would get typewriter font, braces and other ebnf specials roman, and 
all other stuff (rules and subrules) italic. Would this be easy too?

Felix

From antlr at mirality.co.nz  Sat May 31 20:30:20 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 01 Jun 2008 15:30:20 +1200
Subject: [antlr-interest] 3.1b1 (??) 2008-04-09.18 issues
In-Reply-To: <C4675BA1.3393F%sam.ellis@arm.com>
References: <C4675BA1.3393F%sam.ellis@arm.com>
Message-ID: <20080601033029.16AF911EC46@www.antlr.org>

At 06:46 1/06/2008, Sam Ellis wrote:
 >I didn't see a reply to your email, but I'm seeing the same
 >exception when switching from antlr 3.0.1 to 3.1b1 (May 20,
 >2008). I tracked this down to my lexer rules containing the
 >'!' operator for example:
 >
 >QUOTED_STRING
 >        :   (DQUOTE! (DSTRING_LETTER | STRING_NL)* DQUOTE!

Yeah, ANTLR v3 has never supported ! at the lexer level (it's now 
purely a tree construction operator only).

Sadly ANTLR's own syntax checking is a little vague-to-nonexistent 
at present, so you just have to "know" some of these little quirks 
:)


