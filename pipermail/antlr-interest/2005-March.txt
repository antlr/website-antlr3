From togolmach2 at lycos.com  Tue Mar  1 01:52:34 2005
From: togolmach2 at lycos.com (togol machillan)
Date: Tue Mar  1 01:52:37 2005
Subject: [antlr-interest] Getting column number in simple parser
Message-ID: <20050301095234.3D1A4CA07C@ws7-4.us4.outblaze.com>

Hi,

I am using a simple parser with no AST construction. Let me explain the rule that I am trying to write. 

sentence: keyword (rest of the rule or subrules ...)

keyword: "Town"|"City"|"Land"|"Country" ;

Now I want to check the column number where the keyword occurs by using getColumn() or some other way in C++. I am new to ANTLR, so any help will be appreciated.

Regards,

T. Mach  

----- Original Message -----
From: "Bryan Ewbank" <ewbank@gmail.com>
To: "ANTLR Interest" <antlr-interest@antlr.org>
Subject: Re: [antlr-interest] Getting column no. in parser
Date: Fri, 11 Feb 2005 13:15:54 -0500

> 
> I think what you need is "#t->getColumn()" (i.e, the tree returned by
> t, rather than the function called t).  If you look at the generated
> code, it should be clear that "t" is the name of a function.
> 
> - B

-- 
_______________________________________________
Find what you are looking for with the Lycos Yellow Pages
http://r.lycos.com/r/yp_emailfooter/http://yellowpages.lycos.com/default.asp?SRC=lycos10

From demakov at ispras.ru  Tue Mar  1 05:24:18 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Tue Mar  1 05:24:27 2005
Subject: [antlr-interest] Custom tokens
References: <000401c51dd2$018f18a0$5694ca55@giepc>
Message-ID: <00ca01c51e61$fa0faf00$8cc79553@marlboro>

Hi

> How do i extend token class used by lexer to return tokens (say, to include 
> file name in every such token)?

1. Extend token class (e.g. antlr.CommonToken) to add your functionality
2. Set token class in lexer:
lexer.setTokenObjectClass( "<token object full class name>" );

Now lexer will create objects of your class.

3. Insert filter between lexer and parser to set additional fields 
(file name) in token objects. (I use it to link adjacent tokens).
Don't remember exaclty, may be lexer have some method that can be overriden
to set these fields at token construction time.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com



From demakov at ispras.ru  Tue Mar  1 05:35:36 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Tue Mar  1 05:35:42 2005
Subject: [antlr-interest] Getting column number in simple parser
References: <20050301095234.3D1A4CA07C@ws7-4.us4.outblaze.com>
Message-ID: <00e001c51e63$8cd48260$8cc79553@marlboro>

Hi

> I am using a simple parser with no AST construction. Let me explain the rule that I am trying to write.
>
> sentence: keyword (rest of the rule or subrules ...)
>
> keyword: "Town"|"City"|"Land"|"Country" ;
>
> Now I want to check the column number where the keyword occurs by using getColumn() or some other way in C++. I am new to ANTLR,
so any help will be appreciated.

I didn't use it in C++ but in Java or C# (and I beleive in C++ too)
you need to label your tokens and call label.getColumn() in code. Sorry label->getColumn() :)

keyword:
{
  Token k = null;
}
  // if we need label for multiple tokens
  { k=LT(1); } // thanks, Terrence :)
  "Town" | "City" | "Land"
    // if we need label only for one token:
  | country:"Country" { country->getColumn(); }
  // use label->getColumn()
  { k->getColumn(); }

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


From ewbank at gmail.com  Tue Mar  1 09:57:51 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue Mar  1 09:58:18 2005
Subject: [antlr-interest] Re: Adding parenthesis to the calc grammer
In-Reply-To: <OWAzAfquTT7u3C4G2aT00002e7e@owa.idc.ac.il>
References: <dd3a065f050224024066d61dac@mail.gmail.com>
	<OWAzAfquTT7u3C4G2aT00002e7e@owa.idc.ac.il>
Message-ID: <dd3a065f05030109572cfb366b@mail.gmail.com>

Eran pointed out that my code didn't work.  I'd missed part of the
discussion of semantic predicates.

To accept the tree, but not evaluate it, you must provide an alternate
that eats the tree but bypasses evaluation of that tree:

eval returns [bool result]
    :
        #(AND
            result = eval
            (
                {result==true}? result=eval
            |
                . // skip processing
            )
        )
    |
        #(OR
            result = eval
            (
                {result==false}? result=eval
            |
                . // skip processing
            )
        )
    | TRUE_  {result = 1;}
    | FALSE_ {result = 0;}
    ;
From doctlo-antlr at yahoo.com  Tue Mar  1 10:05:38 2005
From: doctlo-antlr at yahoo.com (doctlo-antlr@yahoo.com)
Date: Tue Mar  1 10:08:17 2005
Subject: [antlr-interest] Problem with this antlr grammar.
In-Reply-To: <200503010738.j217cCx5003489@eis-msg-012.jpl.nasa.gov>
References: <gp5821p53o3c68uciaipp8ojkc6eob3qvp@4ax.com>
	<200503010738.j217cCx5003489@eis-msg-012.jpl.nasa.gov>
Message-ID: <3n992193itpl10ovst2qc1e8vm0kqgvph0@4ax.com>

On Mon, 28 Feb 2005 23:38:20 -0800, you wrote:

>DIGIT, UPPER, LOWER, OPENB, and CLOSEB need to be "protected" so that they
>can be used inside other lexer rules.  What your grammar encounters is OPENP
>SEMI UPPER.
>
>--Loring
>
Thanks. I have one more question.
If I use this as input:
 (;GM[1-1])

I get the error message:
exception: line 1:7: expecting ']', found '-'

which if I interpret correctly means that - is not part of  ~']'.
Basically I want to include any character that is not a ], but am
unsure how.

>> -----Original Message-----
>> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
>> bounces@antlr.org] On Behalf Of doctlo-antlr@yahoo.com
>> Sent: Monday, February 28, 2005 11:24 PM
>> To: ANTLR Interest
>> Subject: [antlr-interest] Problem with this antlr grammar.
>> 
>> header {
>> }
>> 
>> class MyLexer extends Lexer;
>> options
>> {
>>     k=3;
>> }
>> WS       : ('\n' | '\r')
>>               { _ttype = Token.SKIP; };
>> DIGIT        : '0'..'9';
>> UPPER        : 'A'..'Z';
>> LOWER        : 'a'..'z';
>> //NUMBER       : ('+'|'-')(DIGIT)+;
>> //REAL         : NUMBER '.' (DIGIT)*;
>> OPENP        : '(';
>> CLOSEP       : ')';
>> SEMI         : ';';
>> OPENB        : '[';
>> CLOSEB       : ']';
>> COLON        : ':';
>> PERIOD       : '.';
>> ESC          : '\\' ']';
>> PROP_VALUE   : OPENB ( ESC | ~']')*   CLOSEB;
>> PROP_IDENT   : UPPER (UPPER|DIGIT)?;
>> 
>> class MyParser extends Parser;
>> options
>> {
>>    k=3;
>> }
>> collection   : (game_tree)+;
>> game_tree    : OPENP sequence (game_tree)* CLOSEP;
>> sequence     : (node)+ ;
>> node         : SEMI (property)*;
>> property     : PROP_IDENT  PROP_VALUE;
>> 
>> 
>> For some reason when I feed it the following:
>> 
>> (;GM[1])
>> 
>> line 1:3: expecting CLOSEP but found 'G'.
>> 
>> I have no idea why.
>> Can someone help?
>> 
>> Thanks
>> T.L.Olczyk
>> 2.7.4

From monty at codetransform.com  Tue Mar  1 07:32:57 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Tue Mar  1 10:33:05 2005
Subject: [antlr-interest] Problem with this antlr grammar.
In-Reply-To: <3n992193itpl10ovst2qc1e8vm0kqgvph0@4ax.com>
References: <gp5821p53o3c68uciaipp8ojkc6eob3qvp@4ax.com>	<200503010738.j217cCx5003489@eis-msg-012.jpl.nasa.gov>
	<3n992193itpl10ovst2qc1e8vm0kqgvph0@4ax.com>
Message-ID: <42248B29.3050603@codetransform.com>

doctlo-antlr@yahoo.com wrote:
> On Mon, 28 Feb 2005 23:38:20 -0800, you wrote:
> 
> 
>>DIGIT, UPPER, LOWER, OPENB, and CLOSEB need to be "protected" so that they
>>can be used inside other lexer rules.  What your grammar encounters is OPENP
>>SEMI UPPER.
>>
>>--Loring
>>
> 
> Thanks. I have one more question.
> If I use this as input:
>  (;GM[1-1])
> 
> I get the error message:
> exception: line 1:7: expecting ']', found '-'
> 
> which if I interpret correctly means that - is not part of  ~']'.
> Basically I want to include any character that is not a ], but am

Take a look in the manual about the charVocabulary option, you need to 
set it.

Monty
From ewerner at idc.ac.il  Tue Mar  1 11:12:36 2005
From: ewerner at idc.ac.il (Eran Werner)
Date: Tue Mar  1 11:12:43 2005
Subject: [antlr-interest] Re: Adding parenthesis to the calc grammer
In-Reply-To: <dd3a065f05030109572cfb366b@mail.gmail.com>
Message-ID: <OWAD8StMjg9vOXGbQtF00003113@owa.idc.ac.il>

I managed to find some sort of solution by catching the semantic exception
thrown if the predicate is not true. So my code looks like this:

eval returns [bool result]
    :

      #(OR  result=eval 

         {result==false}? result=eval
	)

    | TRUE_  {result = 1;}
    | FALSE_ {result = 0;}
    exception 
    catch [ANTLR_USE_NAMESPACE(antlr)SemanticException ex] {}


but this is not more than stifling the exception. There must be a better way

Eran 



    ;-----Original Message-----
From: Bryan Ewbank [mailto:ewbank@gmail.com]
Sent: Tuesday, March 01, 2005 7:58 PM
To: ANTLR Interest
Subject: Re: [antlr-interest] Re: Adding parenthesis to the calc grammer

Eran pointed out that my code didn't work.  I'd missed part of the
discussion of semantic predicates.

To accept the tree, but not evaluate it, you must provide an alternate that
eats the tree but bypasses evaluation of that tree:

eval returns [bool result]
    :
        #(AND
            result = eval
            (
                {result==true}? result=eval
            |
                . // skip processing
            )
        )
    |
        #(OR
            result = eval
            (
                {result==false}? result=eval
            |
                . // skip processing
            )
        )
    | TRUE_  {result = 1;}
    | FALSE_ {result = 0;}
    ;

From doctlo-antlr at yahoo.com  Tue Mar  1 12:43:08 2005
From: doctlo-antlr at yahoo.com (doctlo-antlr@yahoo.com)
Date: Tue Mar  1 12:45:45 2005
Subject: [antlr-interest] Problem with this antlr grammar.
In-Reply-To: <42248B29.3050603@codetransform.com>
References: <gp5821p53o3c68uciaipp8ojkc6eob3qvp@4ax.com>	<200503010738.j217cCx5003489@eis-msg-012.jpl.nasa.gov>
	<3n992193itpl10ovst2qc1e8vm0kqgvph0@4ax.com>
	<42248B29.3050603@codetransform.com>
Message-ID: <umk9219q58t41ekmngvan9616erl0nsfiq@4ax.com>

On Tue, 01 Mar 2005 10:32:57 -0500, you wrote:

>doctlo-antlr@yahoo.com wrote:
>> On Mon, 28 Feb 2005 23:38:20 -0800, you wrote:
>> 
>> 
>>>DIGIT, UPPER, LOWER, OPENB, and CLOSEB need to be "protected" so that they
>>>can be used inside other lexer rules.  What your grammar encounters is OPENP
>>>SEMI UPPER.
>>>
>>>--Loring
>>>
>> 
>> Thanks. I have one more question.
>> If I use this as input:
>>  (;GM[1-1])
>> 
>> I get the error message:
>> exception: line 1:7: expecting ']', found '-'
>> 
>> which if I interpret correctly means that - is not part of  ~']'.
>> Basically I want to include any character that is not a ], but am
>
>Take a look in the manual about the charVocabulary option, you need to 
>set it.
>
OK. Is there a way of specifying "all characters in UTF-8" or UTF-16
etc. or do I have to do it by hand?




From wjb at abstractnonsense.com  Tue Mar  1 17:32:51 2005
From: wjb at abstractnonsense.com (William Bland)
Date: Tue Mar  1 17:32:54 2005
Subject: [antlr-interest] Possible bug in Java grammar (all versions)?
Message-ID: <1109727171.9778.14.camel@localhost>

Unless I'm doing something particularly stupid (wouldn't be the first
time!), the following code seems to tickle a bug in the ANTLR parser
generated from every Java grammar that I could find:

=== Begin Java code ===
package com.foo;

public class Example {
    public Example() {
        super();
        System.out.println("ANTLR will not descend to this node in the
AST, unless the above call to super is commented out!");
    }
}
=== End Java code ===

I added logging calls to each method in the generated
JavaTreeParser.java so I could see what was happening.  With the above
code, the parser appeared to fail to descend to the System.out.println
node of the AST - it only did so if I removed, or commented-out the call
to super().

Am I misunderstanding something, or is this a bug?  I tried using the
Java1.3, Java1.4 and both Java1.5 grammars from the ANTLR website, and I
am using ANTLR version 2.7.5.

Thanks for your help.
Best wishes,
		Bill.
-- 
It turns out that while it's easy to undo technical mistakes, it's not
as easy to undo personality disorders.        (Linus Torvalds)

From yjargudo at tiscali.es  Wed Mar  2 00:33:13 2005
From: yjargudo at tiscali.es (yjargudo@tiscali.es)
Date: Wed Mar  2 00:46:59 2005
Subject: [antlr-interest] I have a doubt
Message-ID: <42233D8F00000982@genova.tiscali.red>

Hello,

I'm new with antlr and I have a doubt.

Is possible to use parser rules inside lexer rules?

For example I have this rule in my parser:

ConstantExpression
	:
		Expression
	;

And then I use this rule in lexer as follows:

ConditionalConstantDeclaration
	:
   		'#' (WS)* "Const" Identifier '=' ConstantExpression LineTerminator

	;

Thanks a lot for your help

Yolanda




Especial Oscar 2005

Todo sobre la gran fiesta del cine

http://cine.tiscali.es/oscars



From mail at martin-probst.com  Wed Mar  2 02:25:51 2005
From: mail at martin-probst.com (Martin Probst)
Date: Wed Mar  2 02:25:57 2005
Subject: [antlr-interest] I have a doubt
In-Reply-To: <42233D8F00000982@genova.tiscali.red>
References: <42233D8F00000982@genova.tiscali.red>
Message-ID: <1109759151.22044.3.camel@narr.homeip.net>

Hi,

> Is possible to use parser rules inside lexer rules?

No that's not possible. The general idea of ANTLR parsing is that the
Parser asks the Lexer for the (type of the) next token. Depending on
that token it descends to the according rule.

So to match what you have you would possibly write in the Parser:

constantExpression:
	'#' (WS)* "Const" Identifier '=' expression LineTerminator;

And have to make sure that the Lexer is able to identify the
corresponding Tokens (i.e. provide rules for Identifier, LineTerminator,
"Const" etc.).

> For example I have this rule in my parser:
> 
> ConstantExpression
> 	:
> 		Expression
> 	;
> 
> And then I use this rule in lexer as follows:
> 
> ConditionalConstantDeclaration
> 	:
>    		'#' (WS)* "Const" Identifier '=' ConstantExpression LineTerminator
> 
> 	;


From mail at martin-probst.com  Wed Mar  2 02:32:22 2005
From: mail at martin-probst.com (Martin Probst)
Date: Wed Mar  2 02:32:27 2005
Subject: [antlr-interest] Problem with this antlr grammar.
In-Reply-To: <umk9219q58t41ekmngvan9616erl0nsfiq@4ax.com>
References: <gp5821p53o3c68uciaipp8ojkc6eob3qvp@4ax.com>
	<200503010738.j217cCx5003489@eis-msg-012.jpl.nasa.gov>
	<3n992193itpl10ovst2qc1e8vm0kqgvph0@4ax.com>
	<42248B29.3050603@codetransform.com>
	<umk9219q58t41ekmngvan9616erl0nsfiq@4ax.com>
Message-ID: <1109759542.22044.9.camel@narr.homeip.net>

Hi,

> OK. Is there a way of specifying "all characters in UTF-8" or UTF-16
> etc. or do I have to do it by hand?

That depends on your language choice. In Java all characters are UCS-2
characters and by that in ANTLR generated Java code too. So in Java you
can use UCS-2 charVocabularies.

In C++ there is some support for Unicode but I didn't try it. It works
well though if you specify the characters in an own rule, e.g.

UTF8LETTER:
	/* European, Arabic, Hebrew */
        | '\u00c2'..'\u00df'  '\u0080'..'\u00bf'
        /* Indic, Thai, CJK, some symbols */
        | '\u00E0'  '\u00A0'..'\u00BF'  '\u0080'..'\u00BF'
        | '\u00E1'..'\u00EC'  '\u0080'..'\u00BF'  '\u0080'..'\u00BF'
        | '\u00ED'  '\u0080'..'\u009F'  '\u0080'..'\u00BF'
        | '\u00EF'  '\u00A4'..'\u00BF'  '\u0080'..'\u00BF'
        /* Custom Area #1 */
        | '\u00EE'  '\u0080'..'\u00BF'  '\u0080'..'\u00BF'
        | '\u00EF'  '\u0080'..'\u00A3'  '\u0080'..'\u00BF'
        /* Supplementary characters: more CJK, historical, math, musical
*/
        | '\u00F0'  '\u0090'..'\u00BF'  '\u0080'..'\u00BF'
'\u0080'..'\u00BF'
        | '\u00F1'..'\u00F2'  '\u0080'..'\u00BF'  '\u0080'..'\u00BF'
'\u0080'..'\u00BF'
        | '\u00F3'  '\u0080'..'\u00AF'  '\u0080'..'\u00BF'
'\u0080'..'\u00BF'
        /* Custom Area #2 */
        | '\u00F3'  '\u00B0'..'\u00BF'  '\u0080'..'\u00BF'
'\u0080'..'\u00BF'
        | '\u00F4'  '\u0080'..'\u008F'  '\u0080'..'\u00BF'
'\u0080'..'\u00BF';

This is not the perfect way of doing that - in many cases you have to
make sure you don't mix up basechars and ideographic chars. But if you
just have to simply match UTF-8 this should work. The rules don't
include simple ASCII (chars below 0xc2) btw.

Regards,
Martin

From Jim.O'Connor at microfocus.com  Wed Mar  2 06:47:33 2005
From: Jim.O'Connor at microfocus.com (Jim O'Connor)
Date: Wed Mar  2 06:47:27 2005
Subject: [antlr-interest] Possible bug in Java grammar (all versions)?
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E9103B958FC@rock-corpmail.microfocus.com>

Hi Bill,
  It's a known problem, but I'm not sure there is an "official" solution.
Jim

On Nov 24, 2004, at 6:24 AM, Jim O'Connor wrote:

> The if condition fails with "_t" holding the SUPER_CTOR_CALL value.
> The SUPER_CTOR_CALL is in the following rule tree, and only in this 
> rule tree. ?

> stat: typeDefinition
>
> ????? |???? variableDef
>
> ????? |???? expression
>
> ....... others
> ????? ;
>
>
> Expression ??//Offending parent???? EXPR
>
> ????? :???? #(EXPR expr)
>
> ????? ;
>
> ?
>
> expr: #(QUESTION expr expr expr)??? // trinary operator
>
> ?
>
> ....... others
>
> ????? |???? primaryExpression
>
> ????? ;
>
> primaryExpression
>
> ??? :?? IDENT
>
> ....... others
>
> ????? |???? ctorCall
>
> ....... others
> ????? ;
>
>
> ctorCall
>
> ????? :???? #( CTOR_CALL elist )
>
> ????? |???? #( SUPER_CTOR_CALL
>
> ????????????????? (???? elist
>
> ????????????????? |???? primaryExpression elist
>
> ????????????????? )
>
> ??????????? ?)
>
> ????? ;
>
>
> It appears that the SUPER_CTOR_CALL is in the stat list but shoved
> down below the #(EXPR expr) tree. ?There are comments about 
> ambiguities. ?I don't want to insert the ctorCall into a spot that 
> would cause more problems. ?Should I concentrate on java.g or 
> java.tree.g?

//Monty's comments, 
I'm not totally sure what the author's intent was, but the simplest 
solution seems to be to wrap the ctors into a #(EXPR parent)

explicitConstructorInvocation

??? :?? ( "this"! lp1:LPAREN^ argList RPAREN! SEMI!

??????????? {#lp1.setType(CTOR_CALL);}

??? |?? "super"! lp2:LPAREN^ argList RPAREN! SEMI!

??????????? {#lp2.setType(SUPER_CTOR_CALL);}
	)
	{ ##=#(#[EXPR],##);}
??? ;

?
Monty



> -----Original Message-----
> From: William Bland [mailto:wjb@abstractnonsense.com]
> Sent: Tuesday, March 01, 2005 8:33 PM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Possible bug in Java grammar (all versions)?
> 
> Unless I'm doing something particularly stupid (wouldn't be the first
> time!), the following code seems to tickle a bug in the ANTLR parser
> generated from every Java grammar that I could find:
> 
> === Begin Java code ===
> package com.foo;
> 
> public class Example {
>     public Example() {
>         super();
>         System.out.println("ANTLR will not descend to this node in the
> AST, unless the above call to super is commented out!");
>     }
> }
> === End Java code ===
> 
> I added logging calls to each method in the generated
> JavaTreeParser.java so I could see what was happening.  With the above
> code, the parser appeared to fail to descend to the System.out.println
> node of the AST - it only did so if I removed, or commented-out the call
> to super().
> 
> Am I misunderstanding something, or is this a bug?  I tried using the
> Java1.3, Java1.4 and both Java1.5 grammars from the ANTLR website, and I
> am using ANTLR version 2.7.5.
> 
> Thanks for your help.
> Best wishes,
> 		Bill.
> --
> It turns out that while it's easy to undo technical mistakes, it's not
> as easy to undo personality disorders.        (Linus Torvalds)
> 
> 
> 
> This message has been scanned for viruses by MailController -
> www.MailController.altohiway.com
From prashant.deva at gmail.com  Wed Mar  2 12:15:57 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Mar  2 12:16:00 2005
Subject: [antlr-interest] Incremental parsing using ANTLR
Message-ID: <41fed8f8050302121572fefb2@mail.gmail.com>

Anybody has any ideas on doing incremental parsing in ides using antlr.

All the papers I have found talk only about LR parsers. Havent found one for LL.

Eclipse also uses a hand coded LR parser for its incremental parsing.

What I can think of right now is to determine the 'context' the user
is in, say in a method, then tell the parser to parse only the rule
for 'method'.

PRASHANT
From nbsherid at secsme.org.au  Wed Mar  2 13:15:04 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Wed Mar  2 13:15:40 2005
Subject: [antlr-interest] Incremental parsing using ANTLR
In-Reply-To: <41fed8f8050302121572fefb2@mail.gmail.com>
Message-ID: <000101c51f6c$f9104810$a428198a@nigelnote>


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Prashant Deva
> Sent: Thursday, 3 March 2005 7:16 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Incremental parsing using ANTLR
> 
> Anybody has any ideas on doing incremental parsing in ides using antlr.
> 
> All the papers I have found talk only about LR parsers. Havent found one
> for LL.
> 
> Eclipse also uses a hand coded LR parser for its incremental parsing.
> 
> What I can think of right now is to determine the 'context' the user
> is in, say in a method, then tell the parser to parse only the rule
> for 'method'.


Can't you call the parsing method for any non-protected parser rules?


x: y z;
y: a B;
protected a: C;
protected z: D;


With this simple grammar, I can call method x() to parse "C B D", or method
y() to parse "C B", but I cannot call a() or z().

As long as your rules aren't using ()* or ()+ then it should stop parsing
once enough input is obtained. Right?

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435 


From wjb at abstractnonsense.com  Wed Mar  2 13:38:25 2005
From: wjb at abstractnonsense.com (William Bland)
Date: Wed Mar  2 13:38:30 2005
Subject: [antlr-interest] Possible bug in Java grammar (all versions)?
In-Reply-To: <3AC103F1B7EEEC48A855ACB1D2819E9103B958FC@rock-corpmail.microfocus.com>
References: <3AC103F1B7EEEC48A855ACB1D2819E9103B958FC@rock-corpmail.microfocus.com>
Message-ID: <1109799505.9965.65.camel@localhost>

On Wed, 2005-03-02 at 09:47 -0500, Jim O'Connor wrote:
> Hi Bill,
>   It's a known problem, but I'm not sure there is an "official" solution.
> Jim
> 

Thanks a million Jim.  Glad to hear that the problem is known about, and
thank you very much for the email thread you included.  I used the fix
given in that thread and it seems to work just fine.

Thanks again!

Best wishes,
		Bill.
-- 
It turns out that while it's easy to undo technical mistakes, it's not
as easy to undo personality disorders.        (Linus Torvalds)

From monty at codetransform.com  Wed Mar  2 11:00:09 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Wed Mar  2 14:00:19 2005
Subject: [antlr-interest] Incremental parsing using ANTLR
In-Reply-To: <000101c51f6c$f9104810$a428198a@nigelnote>
References: <000101c51f6c$f9104810$a428198a@nigelnote>
Message-ID: <42260D39.2070409@codetransform.com>

Nigel Sheridan-Smith wrote:
>>-----Original Message-----
>>From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
>>bounces@antlr.org] On Behalf Of Prashant Deva
>>Sent: Thursday, 3 March 2005 7:16 AM
>>To: antlr-interest@antlr.org
>>Subject: [antlr-interest] Incremental parsing using ANTLR
>>
>>Anybody has any ideas on doing incremental parsing in ides using antlr.
>>
>>All the papers I have found talk only about LR parsers. Havent found one
>>for LL.
>>
>>Eclipse also uses a hand coded LR parser for its incremental parsing.
>>
>>What I can think of right now is to determine the 'context' the user
>>is in, say in a method, then tell the parser to parse only the rule
>>for 'method'.
> 
> 
> 
> Can't you call the parsing method for any non-protected parser rules?
> 

That's an intuitive conclusion to draw, but it is wrong.

"protected" is really only useful in lexers, where it is used as a flag 
to keep that rule out of the ANTLR-synthesized nextToken() rule.

With a parser, you need to have your rule accessible as a "top level" 
rule, which means that no other rules call it, and hence no tokens are 
expected to come after it.  Easily done like so:

topExpr: expr;
topMethod: method;

If you don't do that, then ANTLR doesn't have the information to 
correctly compute the follow sets, and you will get messages about 
expecting a token that isn't there when you use that rule.  That's 
because to ANTLR, expr is always followed by something else, which gets 
sucked into the follow sets, which turn into the lookahead and then 
become part of the lookahead computation, even if, intuitively, it is 
not necessary.

Monty
www.codetransform.com
From yjargudo at tiscali.es  Thu Mar  3 00:20:30 2005
From: yjargudo at tiscali.es (yjargudo@tiscali.es)
Date: Thu Mar  3 00:34:17 2005
Subject: [antlr-interest] I have a doubt
In-Reply-To: <1109759151.22044.3.camel@narr.homeip.net>
Message-ID: <4225D7C400000317@genova.tiscali.red>

Thanks a lot for your help Martin

I will try your suggestion

Yolanda

Especial Oscar 2005

Todo sobre la gran fiesta del cine

http://cine.tiscali.es/oscars



From Loring.G.Craymer at jpl.nasa.gov  Thu Mar  3 13:13:19 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Thu Mar  3 13:13:21 2005
Subject: [antlr-interest] (no subject)
Message-ID: <6.1.1.1.2.20050303112501.01fc8af8@mail.jpl.nasa.gov>

All--

I just got notification that the ANTLR Tree Extensions site (ANTLR 2.8) has 
been approved and is now live.  You can download a "beta" 
version--compatible with 2.7.5, but Python support is absent (C#, C++, and 
Java are supported)--from
http://www.openchannelsoftware.org/projects/ANTLR_Tree_Extensions/
after jumping through a few hoops.  I was also told that this is the 
"featured" application for the next week or so as can be seen from the main 
page:
http://www.openchannelfoundation.org/

The tree documentation has been upgraded to include the construction 
syntax, and tree grammars are generated when ANTLR is given the "-tree" 
command line option.  I am working on a tutorial, but have no spare time 
right now.

Bug reports, questions, etc. are welcome.

--Loring


From parrt at cs.usfca.edu  Thu Mar  3 13:25:22 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Mar  3 13:18:36 2005
Subject: [antlr-interest] (no subject)
In-Reply-To: <6.1.1.1.2.20050303112501.01fc8af8@mail.jpl.nasa.gov>
References: <6.1.1.1.2.20050303112501.01fc8af8@mail.jpl.nasa.gov>
Message-ID: <e51856b49e6d94b1d5de77de2c75ed8c@cs.usfca.edu>

Congratulations, Loring, on the successful launch of 2.8e!!!  You've 
got a lot of great stuff in there.  Keep up the good work.

Ter
On Mar 3, 2005, at 1:13 PM, Loring Craymer wrote:

> All--
>
> I just got notification that the ANTLR Tree Extensions site (ANTLR 
> 2.8) has been approved and is now live.  You can download a "beta" 
> version--compatible with 2.7.5, but Python support is absent (C#, C++, 
> and Java are supported)--from
> http://www.openchannelsoftware.org/projects/ANTLR_Tree_Extensions/
> after jumping through a few hoops.  I was also told that this is the 
> "featured" application for the next week or so as can be seen from the 
> main page:
> http://www.openchannelfoundation.org/
>
> The tree documentation has been upgraded to include the construction 
> syntax, and tree grammars are generated when ANTLR is given the 
> "-tree" command line option.  I am working on a tutorial, but have no 
> spare time right now.
>
> Bug reports, questions, etc. are welcome.
>
> --Loring
>
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From prashant.deva at gmail.com  Thu Mar  3 13:57:34 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Thu Mar  3 13:57:40 2005
Subject: [antlr-interest] (no subject)
In-Reply-To: <e51856b49e6d94b1d5de77de2c75ed8c@cs.usfca.edu>
References: <6.1.1.1.2.20050303112501.01fc8af8@mail.jpl.nasa.gov>
	<e51856b49e6d94b1d5de77de2c75ed8c@cs.usfca.edu>
Message-ID: <41fed8f805030313575a863c9a@mail.gmail.com>

Isnt there anyway to download this without actually scanning in my
signature and sending it?? Its a big hassle to do that.

PRASHANT


On Thu, 3 Mar 2005 13:25:22 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:
> Congratulations, Loring, on the successful launch of 2.8e!!!  You've
> got a lot of great stuff in there.  Keep up the good work.
> 
> Ter
> On Mar 3, 2005, at 1:13 PM, Loring Craymer wrote:
> 
> > All--
> >
> > I just got notification that the ANTLR Tree Extensions site (ANTLR
> > 2.8) has been approved and is now live.  You can download a "beta"
> > version--compatible with 2.7.5, but Python support is absent (C#, C++,
> > and Java are supported)--from
> > http://www.openchannelsoftware.org/projects/ANTLR_Tree_Extensions/
> > after jumping through a few hoops.  I was also told that this is the
> > "featured" application for the next week or so as can be seen from the
> > main page:
> > http://www.openchannelfoundation.org/
> >
> > The tree documentation has been upgraded to include the construction
> > syntax, and tree grammars are generated when ANTLR is given the
> > "-tree" command line option.  I am working on a tutorial, but have no
> > spare time right now.
> >
> > Bug reports, questions, etc. are welcome.
> >
> > --Loring
> >
> >
> >
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> 
>
From Loring.G.Craymer at jpl.nasa.gov  Thu Mar  3 14:04:26 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Thu Mar  3 14:04:29 2005
Subject: [antlr-interest] (no subject)
In-Reply-To: <41fed8f805030313575a863c9a@mail.gmail.com>
References: <6.1.1.1.2.20050303112501.01fc8af8@mail.jpl.nasa.gov>
	<e51856b49e6d94b1d5de77de2c75ed8c@cs.usfca.edu>
	<41fed8f805030313575a863c9a@mail.gmail.com>
Message-ID: <6.1.1.1.2.20050303140004.01eae060@mail.jpl.nasa.gov>

I don't know the answer to that--try sending email to the Open Channel 
folks.  They are in Chicago, I believe, so it is getting late in the day there.

--Loring


At 01:57 PM 3/3/2005, Prashant Deva wrote:
>Isnt there anyway to download this without actually scanning in my
>signature and sending it?? Its a big hassle to do that.
>
>PRASHANT
>
>
>On Thu, 3 Mar 2005 13:25:22 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:
> > Congratulations, Loring, on the successful launch of 2.8e!!!  You've
> > got a lot of great stuff in there.  Keep up the good work.
> >
> > Ter
> > On Mar 3, 2005, at 1:13 PM, Loring Craymer wrote:
> >
> > > All--
> > >
> > > I just got notification that the ANTLR Tree Extensions site (ANTLR
> > > 2.8) has been approved and is now live.  You can download a "beta"
> > > version--compatible with 2.7.5, but Python support is absent (C#, C++,
> > > and Java are supported)--from
> > > http://www.openchannelsoftware.org/projects/ANTLR_Tree_Extensions/
> > > after jumping through a few hoops.  I was also told that this is the
> > > "featured" application for the next week or so as can be seen from the
> > > main page:
> > > http://www.openchannelfoundation.org/
> > >
> > > The tree documentation has been upgraded to include the construction
> > > syntax, and tree grammars are generated when ANTLR is given the
> > > "-tree" command line option.  I am working on a tutorial, but have no
> > > spare time right now.
> > >
> > > Bug reports, questions, etc. are welcome.
> > >
> > > --Loring
> > >
> > >
> > >
> > --
> > CS Professor & Grad Director, University of San Francisco
> > Creator, ANTLR Parser Generator, http://www.antlr.org
> > Cofounder, http://www.jguru.com
> >
> >


From doctlo-antlr at yahoo.com  Fri Mar  4 10:17:08 2005
From: doctlo-antlr at yahoo.com (doctlo-antlr@yahoo.com)
Date: Fri Mar  4 10:19:50 2005
Subject: [antlr-interest] Replacing a node with a subtree.
In-Reply-To: <20050217160440.23293.qmail@web30405.mail.mud.yahoo.com>
References: <20050217160440.23293.qmail@web30405.mail.mud.yahoo.com>
Message-ID: <q48h21t5n47bp3svgtac1fvqj73v5goduk@4ax.com>

When parsing a particular grammar, at one point it
is easier to throw all the text into a string and call a 
second parser ie:


rule :  .....
{
       String text=getText();
       AST a= // Do second parse of text	
       /./ Replace this node with a.
}

The question that I have is how do I accomplish the third line:
Take the node that is being created and replace it with one that I
have created.

Thanks.


From ewbank at gmail.com  Fri Mar  4 11:14:29 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Mar  4 11:14:33 2005
Subject: [antlr-interest] Missing operator==() in C++?
Message-ID: <dd3a065f050304111475344c62@mail.gmail.com>

I'm looking at generated C++ code for a TreeParser with a local AST
type(RefTreeNode), and am getting a compiler error from this:
   bool
   TypeAnalysis::traverse(RefTreeNode _t)
   {
      bool b = true;
      RefTreeNode traverse_AST_in = (_t == ASTNULL) ?
RefTreeNode(antlr::nullAST) : _t;

In particular, _t == ASTNULL complains for one of our target machines
because _t and ASTNULL are different types (RefTreeNode versus RefAST)
-- it's an *old* C++ compiler.

Thoughts and/or insight?
From johnm-antlr at non.net  Fri Mar  4 12:34:02 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Fri Mar  4 12:33:43 2005
Subject: [antlr-interest] Replacing a node with a subtree.
In-Reply-To: <q48h21t5n47bp3svgtac1fvqj73v5goduk@4ax.com>
References: <20050217160440.23293.qmail@web30405.mail.mud.yahoo.com>
	<q48h21t5n47bp3svgtac1fvqj73v5goduk@4ax.com>
Message-ID: <16936.50746.426565.929216@despot.non.net>

>>>>> "doctlo-antlr" == doctlo-antlr  <doctlo-antlr@yahoo.com> writes:
[...]

> The question that I have is how do I accomplish the third line: Take the
> node that is being created and replace it with one that I have created.

## = a;

I believe this is in the manual.

Have fun,
	John
From parrt at cs.usfca.edu  Fri Mar  4 15:33:39 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Mar  4 15:26:51 2005
Subject: [antlr-interest] Incremental parsing using ANTLR
In-Reply-To: <42260D39.2070409@codetransform.com>
References: <000101c51f6c$f9104810$a428198a@nigelnote>
	<42260D39.2070409@codetransform.com>
Message-ID: <25aad86301dc34e16e8c8e3e8984d451@cs.usfca.edu>

Hi Gang,

I just came across this link:

http://portal.acm.org/citation.cfm?id=631080

It's about LL(1) incremental parsing.

Ter



From prashant.deva at gmail.com  Fri Mar  4 22:58:41 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Fri Mar  4 22:58:44 2005
Subject: [antlr-interest] Incremental parsing using ANTLR
In-Reply-To: <25aad86301dc34e16e8c8e3e8984d451@cs.usfca.edu>
References: <000101c51f6c$f9104810$a428198a@nigelnote>
	<42260D39.2070409@codetransform.com>
	<25aad86301dc34e16e8c8e3e8984d451@cs.usfca.edu>
Message-ID: <41fed8f8050304225816ec6ff@mail.gmail.com>

The paper is almost 12 years old, written in 1993.

You gotta pay for it to view it.
Plus i doubt whether it applies to recursive desent parsers like ANTLR
which use a runtime stack for keeping state.

PRASHANT


On Fri, 4 Mar 2005 15:33:39 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:
> Hi Gang,
> 
> I just came across this link:
> 
> http://portal.acm.org/citation.cfm?id=631080
> 
> It's about LL(1) incremental parsing.
> 
> Ter
> 
>
From prashant.deva at gmail.com  Sat Mar  5 22:50:04 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Sat Mar  5 22:50:07 2005
Subject: [antlr-interest] (no subject)
In-Reply-To: <6.1.1.1.2.20050303140004.01eae060@mail.jpl.nasa.gov>
References: <6.1.1.1.2.20050303112501.01fc8af8@mail.jpl.nasa.gov>
	<e51856b49e6d94b1d5de77de2c75ed8c@cs.usfca.edu>
	<41fed8f805030313575a863c9a@mail.gmail.com>
	<6.1.1.1.2.20050303140004.01eae060@mail.jpl.nasa.gov>
Message-ID: <41fed8f80503052250156a69b8@mail.gmail.com>

Well, i did sign the license, scanned it and emailed it. But its been
over 24 hours since and i have not got back any reply.

What should i do?

PRASHANT


On Thu, 03 Mar 2005 14:04:26 -0800, Loring Craymer
<Loring.G.Craymer@jpl.nasa.gov> wrote:
> I don't know the answer to that--try sending email to the Open Channel
> folks.  They are in Chicago, I believe, so it is getting late in the day there.
> 
> --Loring
> 
> 
> At 01:57 PM 3/3/2005, Prashant Deva wrote:
> >Isnt there anyway to download this without actually scanning in my
> >signature and sending it?? Its a big hassle to do that.
> >
> >PRASHANT
> >
> >
> >On Thu, 3 Mar 2005 13:25:22 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:
> > > Congratulations, Loring, on the successful launch of 2.8e!!!  You've
> > > got a lot of great stuff in there.  Keep up the good work.
> > >
> > > Ter
> > > On Mar 3, 2005, at 1:13 PM, Loring Craymer wrote:
> > >
> > > > All--
> > > >
> > > > I just got notification that the ANTLR Tree Extensions site (ANTLR
> > > > 2.8) has been approved and is now live.  You can download a "beta"
> > > > version--compatible with 2.7.5, but Python support is absent (C#, C++,
> > > > and Java are supported)--from
> > > > http://www.openchannelsoftware.org/projects/ANTLR_Tree_Extensions/
> > > > after jumping through a few hoops.  I was also told that this is the
> > > > "featured" application for the next week or so as can be seen from the
> > > > main page:
> > > > http://www.openchannelfoundation.org/
> > > >
> > > > The tree documentation has been upgraded to include the construction
> > > > syntax, and tree grammars are generated when ANTLR is given the
> > > > "-tree" command line option.  I am working on a tutorial, but have no
> > > > spare time right now.
> > > >
> > > > Bug reports, questions, etc. are welcome.
> > > >
> > > > --Loring
> > > >
> > > >
> > > >
> > > --
> > > CS Professor & Grad Director, University of San Francisco
> > > Creator, ANTLR Parser Generator, http://www.antlr.org
> > > Cofounder, http://www.jguru.com
> > >
> > >
> 
>
From mail at martin-probst.com  Sun Mar  6 04:21:13 2005
From: mail at martin-probst.com (Martin Probst)
Date: Sun Mar  6 04:21:18 2005
Subject: [antlr-interest] Missing operator==() in C++?
In-Reply-To: <dd3a065f050304111475344c62@mail.gmail.com>
References: <dd3a065f050304111475344c62@mail.gmail.com>
Message-ID: <1110111673.11699.2.camel@narr.homeip.net>

Hi,
we have seen a similar behaviour with an old HP-UX compiler. It didn't
pick up the operator+ on tokens. We were able to work around that by
explicitly calling operator+. Did you try to replace
>       RefTreeNode traverse_AST_in = (_t == ASTNULL) ?
> RefTreeNode(antlr::nullAST) : _t;
with
>	RefTreeNode traverse_AST_in = (_t.operator==(ASTNULL)) ?
> RefTreeNode(antlr::nullAST) : _t;
?

It's actually quite strange but that helped us.

Regards,
Martin

From ewerner at idc.ac.il  Sun Mar  6 04:29:49 2005
From: ewerner at idc.ac.il (Eran Werner)
Date: Sun Mar  6 04:29:57 2005
Subject: [antlr-interest] wchar
Message-ID: <OWAqVbKGhPgR5W4sGsI0000f8f1@owa.idc.ac.il>

How can I use antlr with wide characters. The provided CharInputBuffer class
supports only char streams

 

Eran

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050306/92c68586/attachment.html
From jr at scorpiosport.com  Tue Mar  1 09:32:49 2005
From: jr at scorpiosport.com (Jesus Rodriguez)
Date: Sun Mar  6 09:21:45 2005
Subject: [antlr-interest] Translating PASCAL (or C) into JAVA
Message-ID: <20050301172654.B38C5DCC31@www.antlr.org>

Every get a response on this one?

--------------------====================-------------------

Hello all,

I'm new to the mailing list and I'm 'playing' with ANTLR since a few 
days. The ideas behind ANTLR are magnificant and I find it a very 
intelligent system, a real contribution to Computer Science.

Now I have a simple question.

I must find a system to translate Pascal files into JAVA. (can be C 
into JAVA aswell)
Can that be done with ANTLR?
Is there a quick solution to do that (perhaps starting from the 
Pascal example?)

I have testet the Pascal grammer (antlr-2.7.1\java\examples\pascal) 
and the GNU C parser from the website.

ANTLR produces me the JAVA-files PascalLexer.java PascalParser.java 
and PascalTokenTypes.java
and I can build these together and test it with the example P_0_1.pas
I also tested it with the grammer from Sinan (message 2398 Re: Ter, 
Would you mind looking at ....) which builds me an AST.

My problem is that I want to translate this P_0_1.pas into JAVA code!

Is that possible?


From sid_linda_fluhrer at sbcglobal.net  Sun Mar  6 08:07:31 2005
From: sid_linda_fluhrer at sbcglobal.net (Sid and Linda Fluhrer)
Date: Sun Mar  6 09:22:02 2005
Subject: [antlr-interest] Foolish VC6.0 user wants to use antlr
Message-ID: <001c01c52266$9a50ead0$6500a8c0@CYCLIST>

I am having trouble running a compatible antlr.tool and static antlr lib.

I want to create c++ output using VC6.0.  Using VC6.0, the latest version of the antlr library I can create is 2.7.1.  (All latter versions generate errors.)  However the latest windows compatible antlr tool I can down load is 2.7.5.  Regretfully *.cpp files generated by the 2.7.5 antlr tool are not compatible with the include files of the 2.7.1 library I created.

I also tried down loading java sdk(1.4.1) and antlr.jar (for 2.7.1). I set up the CLASSPATH and modified the PATH environment variables.  However when I execute the following from the command prompt:

    java antlr.tool

I get the error message:

    Exception in thread "main"  java.lang.NoClassDefFoundError: antlr/Tool

Thanks for any help you may have.

Sincerely,
Confused!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050306/eb1cf2eb/attachment.html
From parrt at cs.usfca.edu  Sun Mar  6 09:23:50 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Mar  6 09:23:56 2005
Subject: [antlr-interest] Foolish VC6.0 user wants to use antlr
In-Reply-To: <001c01c52266$9a50ead0$6500a8c0@CYCLIST>
References: <001c01c52266$9a50ead0$6500a8c0@CYCLIST>
Message-ID: <817E2F7C-8E64-11D9-BA97-000393BB647E@cs.usfca.edu>

Hi.  tool != Tool :)  Microsoft world is still stuck in the case 
insensitive world so be careful!

Terence
On Mar 6, 2005, at 8:07 AM, Sid and Linda Fluhrer wrote:

>
> I am having trouble running a compatible antlr.tool and static antlr 
> lib.
> ?
> I want to?create c++ output using VC6.0.? Using VC6.0, the latest 
> version of the antlr library I can create is 2.7.1.? (All latter 
> versions generate errors.)? However the latest windows compatible 
> antlr tool I can down load is 2.7.5.? Regretfully *.cpp files 
> generated by the 2.7.5 antlr tool are not compatible with the include 
> files of the 2.7.1 library I created.
> ?
> I also tried down loading java sdk(1.4.1) and antlr.jar (for 2.7.1). I 
> set up the CLASSPATH and modified the PATH environment variables.? 
> However when I?execute the following?from the command prompt:
> ?
> ??? java antlr.tool
> ?
> I get the error message:
> ?
> ??? Exception in thread "main"? java.lang.NoClassDefFoundError: 
> antlr/Tool
> ?
> Thanks for any help you may have.
>
> Sincerely,
> Confused!
> ?



From ric.klaren at gmail.com  Sun Mar  6 13:01:50 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Sun Mar  6 13:01:38 2005
Subject: [antlr-interest] wchar
In-Reply-To: <OWAqVbKGhPgR5W4sGsI0000f8f1@owa.idc.ac.il>
References: <OWAqVbKGhPgR5W4sGsI0000f8f1@owa.idc.ac.il>
Message-ID: <422B6FBE.3070608@gmail.com>

Eran Werner wrote:
> How can I use antlr with wide characters. The provided CharInputBuffer class
> supports only char streams

You might try adapting the examples/cpp/unicode example's custom 
inputbuffer and charscanner to work with wchars. Then use those not 100% 
sure if any further patching inside the lib or tool is necessary (my 
hunch is not...).

Cheers,

Ric
From ric.klaren at gmail.com  Sun Mar  6 13:05:55 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Sun Mar  6 13:05:35 2005
Subject: [antlr-interest] Foolish VC6.0 user wants to use antlr
In-Reply-To: <001c01c52266$9a50ead0$6500a8c0@CYCLIST>
References: <001c01c52266$9a50ead0$6500a8c0@CYCLIST>
Message-ID: <422B70B3.90409@gmail.com>

Sid and Linda Fluhrer wrote:
> I am having trouble running a compatible antlr.tool and static antlr lib.
> 
> I want to create c++ output using VC6.0.  Using VC6.0, the latest version of the
 > antlr library I can create is 2.7.1.  (All latter versions generate 
errors.)

They should work for static versions of the library. 2.7.5 as well. It 
might be helpfull if you send the errors you got and also the procedure 
you followed to compile stuff.

Cheers,

Ric
From prashant.deva at gmail.com  Sun Mar  6 17:17:07 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Sun Mar  6 17:17:10 2005
Subject: [antlr-interest] (no subject)
In-Reply-To: <41fed8f80503052250156a69b8@mail.gmail.com>
References: <6.1.1.1.2.20050303112501.01fc8af8@mail.jpl.nasa.gov>
	<e51856b49e6d94b1d5de77de2c75ed8c@cs.usfca.edu>
	<41fed8f805030313575a863c9a@mail.gmail.com>
	<6.1.1.1.2.20050303140004.01eae060@mail.jpl.nasa.gov>
	<41fed8f80503052250156a69b8@mail.gmail.com>
Message-ID: <41fed8f80503061717417e66d7@mail.gmail.com>

Hi,
Just got the link for download so dont bother with the above post.

PRASHANT


On Sun, 6 Mar 2005 12:20:04 +0530, Prashant Deva
<prashant.deva@gmail.com> wrote:
> Well, i did sign the license, scanned it and emailed it. But its been
> over 24 hours since and i have not got back any reply.
> 
> What should i do?
> 
> PRASHANT
> 
> 
> On Thu, 03 Mar 2005 14:04:26 -0800, Loring Craymer
> <Loring.G.Craymer@jpl.nasa.gov> wrote:
> > I don't know the answer to that--try sending email to the Open Channel
> > folks.  They are in Chicago, I believe, so it is getting late in the day there.
> >
> > --Loring
> >
> >
> > At 01:57 PM 3/3/2005, Prashant Deva wrote:
> > >Isnt there anyway to download this without actually scanning in my
> > >signature and sending it?? Its a big hassle to do that.
> > >
> > >PRASHANT
> > >
> > >
> > >On Thu, 3 Mar 2005 13:25:22 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:
> > > > Congratulations, Loring, on the successful launch of 2.8e!!!  You've
> > > > got a lot of great stuff in there.  Keep up the good work.
> > > >
> > > > Ter
> > > > On Mar 3, 2005, at 1:13 PM, Loring Craymer wrote:
> > > >
> > > > > All--
> > > > >
> > > > > I just got notification that the ANTLR Tree Extensions site (ANTLR
> > > > > 2.8) has been approved and is now live.  You can download a "beta"
> > > > > version--compatible with 2.7.5, but Python support is absent (C#, C++,
> > > > > and Java are supported)--from
> > > > > http://www.openchannelsoftware.org/projects/ANTLR_Tree_Extensions/
> > > > > after jumping through a few hoops.  I was also told that this is the
> > > > > "featured" application for the next week or so as can be seen from the
> > > > > main page:
> > > > > http://www.openchannelfoundation.org/
> > > > >
> > > > > The tree documentation has been upgraded to include the construction
> > > > > syntax, and tree grammars are generated when ANTLR is given the
> > > > > "-tree" command line option.  I am working on a tutorial, but have no
> > > > > spare time right now.
> > > > >
> > > > > Bug reports, questions, etc. are welcome.
> > > > >
> > > > > --Loring
> > > > >
> > > > >
> > > > >
> > > > --
> > > > CS Professor & Grad Director, University of San Francisco
> > > > Creator, ANTLR Parser Generator, http://www.antlr.org
> > > > Cofounder, http://www.jguru.com
> > > >
> > > >
> >
> >
>
From info at jazillian.com  Sun Mar  6 14:55:58 2005
From: info at jazillian.com (Andy Tripp)
Date: Sun Mar  6 20:17:27 2005
Subject: [antlr-interest] lexer suggestions
Message-ID: <422B8A7E.4050805@jazillian.com>

Hi,

Forgive me if this has been discussed before or if it's not even
an issue with more recent versions of ANTLR. I'm using ANTLR 2.7.2.

I have a couple of minor suggestions for ANTLR-generated lexers:

1) Rather than (or in addition to):

lexer.setObjectClass("some.package.MyToken");

I'd like to be able to specify my own Token factory:

lexer.setTokenFactory(TokenFactory myfactory);

...and then in the antlr package, we'd need:

package antlr;
public interface TokenFactory {
        Token makeToken(int type);
}

One advantage of specifying a factory rather than a class name
is that any errors are caught at compile time, rather
than having a RuntimeException if I have a typo in my class name.
Another advantage is speed. The reflection newInstance() method
is a little slower than just a call to a constructor (though not
much - I measured about 1.5 seconds for 10 million calls for a simple
constructor, and twice that using newInstance()).
A third (potential) advantage is that my Factory could then
be made more efficient, perhaps recycling old Tokens with an
object pool.

Of course, I can add a setTokenFactory() method
myself by adding just a few lines of
code (and I do), but it might be nice default
behaviour.

2) It would also be nice to have Token be an interface, and maybe
rename the current Token class to "BaseToken" or something.
It's not very likely that anyone would really need their
Token class to inherit from something else, but it's possible.
It just seems ugly to have those few methods in the Token class
that don't do anything. We have set/get methods for column, line,
filename, and none of them do anything in the Token class.

Andy

From mcerveny at gmail.com  Mon Mar  7 01:58:56 2005
From: mcerveny at gmail.com (Marcel Cerveny)
Date: Mon Mar  7 01:59:00 2005
Subject: [antlr-interest] Grouping the parsed data
Message-ID: <83a0b5ae05030701589fc1a2c@mail.gmail.com>

Hello there!

After a while of really pleasant work with antlr I bumped into one problem.
I do a parsing of quite general source files, which describe
interfaces. However one of the requirements is to have a freedom of
placing say other used interfaces, meaning one interface source could
look like:
public interface ITest {
  using John, Paul;
  const int aaa = 1;
  int bbb;
  using George, Ringo;
  int ccc();
}

My problem is that I want to have the using node stored as the
firstChild of the curly bracket. Moreover, I want all the uses
specified later have stored as the children of (first) uses node.

Now, I can create an mandatory (actual or { ## = #[EMPTY]; }) using
node, but how can I move parsed information into other node during the
process of parsing. Of course I can to rearrange the AST after being
created, but I'd like to make this during parsing, if it is possible.

Thanx in advance for any of your hints.
Marcel
From togolmach2 at lycos.com  Mon Mar  7 03:39:08 2005
From: togolmach2 at lycos.com (togol machillan)
Date: Mon Mar  7 03:39:10 2005
Subject: [antlr-interest] Resolving ambiguities between rules
Message-ID: <20050307113908.5CAE4E5BC7@ws7-2.us4.outblaze.com>

Hello,

How do I resolve ambiguities between rules when a certain starting part of the rules are the same, like the following two rules.

p_singleline_list { std::string k = "";}  
		    : (k = keyword) {std::cout << "With single line list --- Keyword is " << k << std::endl;} 
		     (VALUE SLASH)+ (VALUE NEWLINE|AMPERSAND NEWLINE (VALUE (SLASH)?)+ NEWLINE)  ;


p_with_sentences { std::string k = "";}  
	     :(k = keyword) {std::cout << "Single line para  with sentences--- Keyword is " << k << std::endl;}
	     (VALUE|FIGURE|VALUE EQUAL (VALUE|FIGURE))+ NEWLINE (sentence)*;

Here the parser always tries to match with the first rule and throws in an unexpected token error when the structure should match the second rule. Is there any way to prioritise rule matching? Is it possible to use syntactic perdicates to differentiate two rules rather two alternatives of the same rule? 

Regards,

Togol Mach 
-- 
_______________________________________________
NEW! Lycos Dating Search. The only place to search multiple dating sites at once.
http://datingsearch.lycos.com

From parrt at cs.usfca.edu  Mon Mar  7 08:50:52 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Mar  7 08:50:56 2005
Subject: [antlr-interest] Resolving ambiguities between rules
In-Reply-To: <20050307113908.5CAE4E5BC7@ws7-2.us4.outblaze.com>
References: <20050307113908.5CAE4E5BC7@ws7-2.us4.outblaze.com>
Message-ID: <11201B47-8F29-11D9-BA97-000393BB647E@cs.usfca.edu>


On Mar 7, 2005, at 3:39 AM, togol machillan wrote:

> Hello,
>
> How do I resolve ambiguities between rules when a certain starting 
> part of the rules are the same, like the following two rules.
>
> p_singleline_list { std::string k = "";}
> 		    : (k = keyword) {std::cout << "With single line list --- Keyword 
> is " << k << std::endl;}
> 		     (VALUE SLASH)+ (VALUE NEWLINE|AMPERSAND NEWLINE (VALUE 
> (SLASH)?)+ NEWLINE)  ;
>
>
> p_with_sentences { std::string k = "";}
> 	     :(k = keyword) {std::cout << "Single line para  with 
> sentences--- Keyword is " << k << std::endl;}
> 	     (VALUE|FIGURE|VALUE EQUAL (VALUE|FIGURE))+ NEWLINE (sentence)*;
>
> Here the parser always tries to match with the first rule and throws 
> in an unexpected token error when the structure should match the 
> second rule. Is there any way to prioritise rule matching? Is it 
> possible to use syntactic perdicates to differentiate two rules rather 
> two alternatives of the same rule?

Hi.  The key is in the rule that calls these.  That is where the 
decision is made about which to call.  You may have to move keyword 
rule reference into that rule and pass k downwards as an argument into 
these rules.

Or just use a syntactic predicate.

Terence



From kweinert at gmail.com  Mon Mar  7 10:20:11 2005
From: kweinert at gmail.com (Ken Weinert)
Date: Mon Mar  7 10:21:32 2005
Subject: [antlr-interest] Separation of specification and code
Message-ID: <466c57fa050307102043b60818@mail.gmail.com>

I've been an antlr advocate since it was pccts (Hi Terence :) but I've
not really had occasion to use it much since then.

My boss stopped by today with a question that I'm relaying here as I'm
really not familiar enough with the mechanics to know if antlr
supports this mode of operation.

What he'd like is to be able to keep the specification clean and the
code separate. He mentioned Grammatica which uses the EBNF to produce
a parser, but you implement the actions by extending the class for
each leaf in the generated code.

Have I made myself clear? Is this something that antlr supports?
Pointers to where I can easily resolve this are as (if not more)
welcome as direct answers.

Thanks for any information.

-- 
Ken Weinert   kweinert@gmail.com
From monty at codetransform.com  Mon Mar  7 08:20:45 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Mar  7 11:20:49 2005
Subject: [antlr-interest] Grouping the parsed data
In-Reply-To: <83a0b5ae05030701589fc1a2c@mail.gmail.com>
References: <83a0b5ae05030701589fc1a2c@mail.gmail.com>
Message-ID: <422C7F5D.4080406@codetransform.com>

Marcel Cerveny wrote:
> Hello there!
> 
> After a while of really pleasant work with antlr I bumped into one problem.
> I do a parsing of quite general source files, which describe
> interfaces. However one of the requirements is to have a freedom of
> placing say other used interfaces, meaning one interface source could
> look like:
> public interface ITest {
>   using John, Paul;
>   const int aaa = 1;
>   int bbb;
>   using George, Ringo;
>   int ccc();
> }
> 

I'm sure the syntax isn't right, but you should get the idea.  In your 
interface rule create a tree to populate and pass it as an argument to 
the using rule:

interface:
	{AST usingTree = #(USING);}
	...
	| using[usingTree]
	...
;

using[AST usingTree]!:
	"using" i:ID {#usingTree.append(#i);} //not sure of actual method to 
append a node off the top of my head

;

MOnty
From gregbugaj at yahoo.com  Mon Mar  7 11:38:54 2005
From: gregbugaj at yahoo.com (Grzegorz Bugaj)
Date: Mon Mar  7 11:38:56 2005
Subject: [antlr-interest] Parser Error:Expecting ID 
Message-ID: <20050307193854.17033.qmail@web31501.mail.mud.yahoo.com>


Hi, This is my first attempt to play with antlr so any comments are welcome. here is the error that I am reciving: line 1:5: Expecting ID found 'greg'


here is my input file: 
int greg=3;
int leo=4;


and here is my grammar file. 
class ExprLexer extends Lexer;

options
{
 exportVocab=V;

charVocabulary = '\3'..'\377' | '\u1000'..'\u1fff';
caseSensitive=false;

}

VARINT :"int";
PRINT :"print";
STATUS :"status";
IDENTIFIER :(UNDERSCORE|DOLLAR)? (LETTER|DIGIT)+;
NUMBER :(DIGIT)+ ('.' (DIGIT)+ )?;
LETTER :('a'..'z');
LEFTPAREN :'(';
RIGHTPAREN:')';
UNDERSCORE:'_';
DOLLAR:'$';
DIGIT :('0'..'9');
INTO:'*';
DIV:'/';
PLUS:'+';
MINUS:'-';
ISEQUALTO:'=';
SEMI: ';';
// whitespace
WS: 
    ( ' '
    | '\t'
    | ( "\r\n" | '\r' | '\n' ) 
      { newline (); }
    )
    { $setType(Token.SKIP); }
;
ID : LETTER (LETTER | DIGIT)*;

 

// ----------------------------------------------------------------------------
class ExprParser extends Parser;
options
{
k = 2;
buildAST = true;
importVocab=V; 
}


print:PRINT;

setinteger: VARINT ID ISEQUALTO
{System.out.println("Integer Var");}

;

 

Any sugestions ? 





Regards
Greg Bugaj

		
---------------------------------
Celebrate Yahoo!'s 10th Birthday! 
 Yahoo! Netrospective: 100 Moments of the Web 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050307/e8645757/attachment-0001.html
From Loring.G.Craymer at jpl.nasa.gov  Mon Mar  7 11:40:26 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Mon Mar  7 11:40:28 2005
Subject: [antlr-interest] Separation of specification and code
In-Reply-To: <466c57fa050307102043b60818@mail.gmail.com>
References: <466c57fa050307102043b60818@mail.gmail.com>
Message-ID: <6.1.1.1.2.20050307113224.01f96c38@mail.jpl.nasa.gov>

Ken--

This is done in ANTLR via trees and Ter's StringTemplate package.  For tree 
support, check out

http://www.openchannelsoftware.org/projects/ANTLR_Tree_Extensions/

where I have just released an ANTLR 2.8 version which includes an extended 
syntax for tree rewriting and automated tree grammar generation from an 
annotated input grammar.  For StringTemplate, check out

http://www.stringtemplate.org/

and I believe that some other material may appear on the ANTLR site.

--Loring


At 10:20 AM 3/7/2005, Ken Weinert wrote:
>I've been an antlr advocate since it was pccts (Hi Terence :) but I've
>not really had occasion to use it much since then.
>
>My boss stopped by today with a question that I'm relaying here as I'm
>really not familiar enough with the mechanics to know if antlr
>supports this mode of operation.
>
>What he'd like is to be able to keep the specification clean and the
>code separate. He mentioned Grammatica which uses the EBNF to produce
>a parser, but you implement the actions by extending the class for
>each leaf in the generated code.
>
>Have I made myself clear? Is this something that antlr supports?
>Pointers to where I can easily resolve this are as (if not more)
>welcome as direct answers.
>
>Thanks for any information.
>
>--
>Ken Weinert   kweinert@gmail.com


From monty at codetransform.com  Mon Mar  7 08:43:26 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Mar  7 11:43:30 2005
Subject: [antlr-interest] Separation of specification and code
In-Reply-To: <466c57fa050307102043b60818@mail.gmail.com>
References: <466c57fa050307102043b60818@mail.gmail.com>
Message-ID: <422C84AE.8040605@codetransform.com>

Ken Weinert wrote:

 > I've been an antlr advocate since it was pccts (Hi Terence :) but I've
 > not really had occasion to use it much since then.
 >
 > My boss stopped by today with a question that I'm relaying here as I'm
 > really not familiar enough with the mechanics to know if antlr
 > supports this mode of operation.
 >
 > What he'd like is to be able to keep the specification clean and the
 > code separate. He mentioned Grammatica which uses the EBNF to produce
 > a parser, but you implement the actions by extending the class for
 > each leaf in the generated code.
 >
 > Have I made myself clear? Is this something that antlr supports?
 > Pointers to where I can easily resolve this are as (if not more)
 > welcome as direct answers.
 >
 > Thanks for any information.
 >

Well, are you talking just about making a parser or are you talking 
about a translator?

Somebody wrote a "literate programming" system for ANTLR which is all 
about keeping the action code separated from the .g file.  A web search 
should turn it up, it may be on the antlr.org file sharing page as well.

If you are talking about a translator, grammar subclassing is another 
approach.  http://www.codetransform.com/fun_with_antlr.html has a few 
details about managing an eight pass translator.

Monty
www.codetransform.com
From iank at bearcave.com  Mon Mar  7 11:44:54 2005
From: iank at bearcave.com (Ian Kaplan)
Date: Mon Mar  7 11:45:03 2005
Subject: [antlr-interest] Separation of specification and code
Message-ID: <200503071944.j27JisI30376@shell2.webquarry.com>


> What he'd like is to be able to keep the specification clean and the
> code separate. He mentioned Grammatica which uses the EBNF to
> produce a parser, but you implement the actions by extending the
> class for each leaf in the generated code.
> 
> Have I made myself clear? Is this something that antlr supports?
> Pointers to where I can easily resolve this are as (if not more)
> welcome as direct answers.

  I think that this is an interesting point.  In a parser I recently
  did for a query language I developed the grammar first and then
  added the actions.  The emacs grammar coloring helps, but the
  actions and arguments pretty much obscure the grammar once they are
  added.  So I understand the desire to separate grammar and actions.

  This said, I'm not sure how to do this in practice.  For example,
  in some cases you want to pass an argument "downward" in the parse.
  For many parsers in all cases the grammar production returns a value
  (the attribute grammar people sometimes call this a synthesized
  attribute).  Downward arguments become method arguments and returned
  values, of course, become method results.  Since these are part of
  the core signature for the method that handles that grammar
  production, it seems like at a minimum you have to include this
  along with the grammar.

  If all of the method signatures are correct you could in theory
  subclass the ANTLR parser.

  While the separation of grammar and actions sounds nice, it has
  problems too.  The advantage of having the actions there with the
  grammar is that you can immediately see what is being done when the
  production is processed.  This may out weigh the problem of the
  actions obscuring the grammar.  Especially since someone wrote a
  nice Emacs module that can be loaded to colar the grammar (if you're
  not an Emacs user I can only say: there is one true editor and its
  name is Emacs and Stallman is its prophet).

  Ian
From monty at codetransform.com  Mon Mar  7 08:47:50 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Mar  7 11:47:56 2005
Subject: [antlr-interest] Parser Error:Expecting ID
In-Reply-To: <20050307193854.17033.qmail@web31501.mail.mud.yahoo.com>
References: <20050307193854.17033.qmail@web31501.mail.mud.yahoo.com>
Message-ID: <422C85B6.2090006@codetransform.com>

See the lexer docs about "literals".

Monty
From wiggjd at lsbu.ac.uk  Mon Mar  7 14:01:21 2005
From: wiggjd at lsbu.ac.uk (David Wigg)
Date: Mon Mar  7 14:01:25 2005
Subject: [antlr-interest] Separation of specification and code
Message-ID: <60697.81.86.32.6.1110232881.squirrel@webmail.lsbu.ac.uk>

I am using subclassing to separate application code from the
parser code in our C/C++ parser, CPP_parser.g which is
available from the antlr website.

I have called the demonstration application code MyCode.cpp
and you could see how this was done for C++.

Basically this is done by including a call to the subclassed
functions in the required places in the antlr grammar definition.

I think this a useful facility because it keeps the code,
statements and, in particular, the data, separate, enabling
different people to work on the two parts at the same time.

David Wigg
London South Bank University
UK

Message: 2
Date: Mon, 07 Mar 2005 11:43:26 -0500
From: Monty Zukowski <monty@codetransform.com>
Subject: Re: [antlr-interest] Separation of specification and
code
To: antlr-interest@antlr.org
Message-ID: <422C84AE.8040605@codetransform.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Ken Weinert wrote:

 > I've been an antlr advocate since it was pccts (Hi Terence
:) but I've
 > not really had occasion to use it much since then.
 >
 > My boss stopped by today with a question that I'm relaying
here as I'm
 > really not familiar enough with the mechanics to know if
antlr
 > supports this mode of operation.
 >
 > What he'd like is to be able to keep the specification
clean and the
 > code separate. He mentioned Grammatica which uses the EBNF
to produce
 > a parser, but you implement the actions by extending the
class for
 > each leaf in the generated code.
 >
 > Have I made myself clear? Is this something that antlr
supports?
 > Pointers to where I can easily resolve this are as (if not
more)
 > welcome as direct answers.
 >
 > Thanks for any information.
 >

Well, are you talking just about making a parser or are you
talking
about a translator?

Somebody wrote a "literate programming" system for ANTLR which
is all
about keeping the action code separated from the .g file.  A
web search
should turn it up, it may be on the antlr.org file sharing
page as well.

If you are talking about a translator, grammar subclassing is
another
approach.  http://www.codetransform.com/fun_with_antlr.html
has a few
details about managing an eight pass translator.

Monty
www.codetransform.com






From johnl at temporal-wave.com  Mon Mar  7 14:35:03 2005
From: johnl at temporal-wave.com (John Lambert)
Date: Mon Mar  7 14:35:08 2005
Subject: [antlr-interest] Source code for 2.7.5
Message-ID: <B36CCC332A32904F8FA3DE134A23533615B916@wavemachine.temporal-wave.com>

On the antlr.org download page, the file linked to as the source
http://www.antlr.org/download/antlr-2.7.5.tar.gz  contains only the
.class files 

 

Is the source available somewhere?

 

John Lambert

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050307/5054eb75/attachment.html
From parrt at cs.usfca.edu  Mon Mar  7 16:10:00 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Mar  7 16:03:11 2005
Subject: [antlr-interest] Source code for 2.7.5
In-Reply-To: <B36CCC332A32904F8FA3DE134A23533615B916@wavemachine.temporal-wave.com>
References: <B36CCC332A32904F8FA3DE134A23533615B916@wavemachine.temporal-wave.com>
Message-ID: <509f999e90227b374dcf74687fe3e172@cs.usfca.edu>

Hi John,

Hmm...I'm pretty sure it does in the antlr subdir.  Can you check again?

Thanks,
Ter
On Mar 7, 2005, at 2:35 PM, John Lambert wrote:

> On the antlr.org download page, the file linked to as the source 
> http://www.antlr.org/download/antlr-2.7.5.tar.gz ?contains only the 
> .class files
>
>  ?
>
> Is the source available somewhere?
>
> ?
>
> John Lambert
>
> ?
>
> ?
>
> ?
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From johnl at temporal-wave.com  Mon Mar  7 16:11:20 2005
From: johnl at temporal-wave.com (John Lambert)
Date: Mon Mar  7 16:11:26 2005
Subject: [antlr-interest] Source code for 2.7.5
Message-ID: <B36CCC332A32904F8FA3DE134A23533615B91C@wavemachine.temporal-wave.com>

Sorry .. my winzip screwup. It's there.

John


-----Original Message-----
From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: Monday, March 07, 2005 4:10 PM
To: ANTLR Interest
Subject: Re: [antlr-interest] Source code for 2.7.5

Hi John,

Hmm...I'm pretty sure it does in the antlr subdir.  Can you check again?

Thanks,
Ter
On Mar 7, 2005, at 2:35 PM, John Lambert wrote:

> On the antlr.org download page, the file linked to as the source 
> http://www.antlr.org/download/antlr-2.7.5.tar.gz ?contains only the 
> .class files
>
>  ?
>
> Is the source available somewhere?
>
> ?
>
> John Lambert
>
> ?
>
> ?
>
> ?
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From teddemc at yahoo.com  Mon Mar  7 21:08:07 2005
From: teddemc at yahoo.com (Matthew Tedder)
Date: Mon Mar  7 21:08:11 2005
Subject: [antlr-interest] Two Conflicts..
Message-ID: <20050308050807.10033.qmail@web52905.mail.yahoo.com>


It would be really appreciated if someone would give
me guidance on how to resolve these two conflicts:

(1) I want someone to enter code such as: 
x = myfunc(param2,param2) * (z - 4);
y =  "You will die in the year " x ", a very sad man."

paramList
  : LPAREN (IDENT (COMMA paramList)*)? RPAREN
  ;

expr
  : NLIT
  : SLIT
  | IDENT paramList         // conflicts with "LPAREN
expr LPAREN"
                                       // because of
string concatenation
  | expr (expr)+               // for string
concatenation..
  | LPAREN expr RPAREN  // conflicts with "IDENT
paramList
  | expr TIMES expr          
  | expr DIVISION expr          
  | expr PLUS expr
  | expr MINUS expr     
  ;

(2) I want ot use "=" for assignments in a statement
context and for comparisons in a condition context.  I
currently have them as "=" for assignment and "==" for
comparison, as follows:

assignmentStmt
  : IDENT ASSIGN expr  // currently "=", as in "x =
42"
  ;

condition
  : TRUE
  | FALSE
  | LPAREN condition RPAREN
  | condition AND condition
  | condition OR condition
  | NOT condition 
  | expr EQ expr  // currently "=="; want to change to
"="
  | expr NE expr
  | expr GT expr
  | expr GE expr
  | expr LT expr
  | expr LE expr
  ;

Any advice would be appreciated greatly.  This is my
first ANTLR project....  and I have not yet compiled
anything.... due to obvious conflicts.   Thanks!

Matthew


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From open.zone at virgin.net  Mon Mar  7 21:55:09 2005
From: open.zone at virgin.net (Micheal J)
Date: Mon Mar  7 21:42:22 2005
Subject: [antlr-interest] search strings from google to antlr.org
In-Reply-To: <7f0c7a0ae0cfc7f561d269c0872effd5@cs.usfca.edu>
Message-ID: <002e01c523a3$6367de00$7e02a8c0@hercules>

> Howdy,
> 
> Thought you might find this interesting/amusing.  The 
> keywords used in 
> search engines over past 10 days to reach antlr.org pages.  My 
> favorites are "n" and "history of micheal jordan" (from MSN's 
> "awesome" 
> new search engine).  I didn't know he was a coder! ;)

Well, I do like to hack when I'm not shooting hoops. All the same, I'm kinda
surprised at the interest in my life history though...  ;-)

Micheal

From nbsherid at secsme.org.au  Tue Mar  8 00:14:44 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Tue Mar  8 00:14:36 2005
Subject: [antlr-interest] Two Conflicts..
In-Reply-To: <20050308050807.10033.qmail@web52905.mail.yahoo.com>
Message-ID: <000201c523b6$e2fd7a90$0500a8c0@nigel>


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Matthew Tedder
> Sent: Tuesday, 8 March 2005 4:08 PM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Two Conflicts..
> 
> 
> It would be really appreciated if someone would give
> me guidance on how to resolve these two conflicts:
> 
> (1) I want someone to enter code such as:
> x = myfunc(param2,param2) * (z - 4);
> y =  "You will die in the year " x ", a very sad man."
> 
> paramList
>   : LPAREN (IDENT (COMMA paramList)*)? RPAREN
>   ;
> 
> expr
>   : NLIT
>   : SLIT
>   | IDENT paramList         // conflicts with "LPAREN
> expr LPAREN"
>                                        // because of
> string concatenation
>   | expr (expr)+               // for string
> concatenation..
>   | LPAREN expr RPAREN  // conflicts with "IDENT
> paramList
>   | expr TIMES expr
>   | expr DIVISION expr
>   | expr PLUS expr
>   | expr MINUS expr
>   ;
> 

I can't see any conflict here (unless my eyes are deceiving me)... "IDENT
paramList" implies "IDENT LPAREN (IDENT | RPAREN)" is the sequence to match.
With *only these* rules there isn't any conflict, because IDENT can never
appear before LPAREN in any other way (since LPAREN is not optional).
However, if there is some other rule that interacts with expr, then that
might be causing the trouble.

Can you post the full grammar, and the error message?

As for the second issue, I don't see any problem with changing EQ to ASSIGN
in the line "| expr EQ expr". But again, that relies on the rules you have
given us (and depends on whether I have overlooked anything).

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435
 


From togolmach2 at lycos.com  Tue Mar  8 09:50:12 2005
From: togolmach2 at lycos.com (togol machillan)
Date: Tue Mar  8 09:50:13 2005
Subject: [antlr-interest] "unexpected token" error
Message-ID: <20050308175012.1FDECCA06F@ws7-4.us4.outblaze.com>

Hi,

Another newbie question. I hope somebody can help me out here.

I have the following lexer rules (omitting some which are clear by name)

VALUE  options {testLiterals = true; }
       : CAPITAL_LETTER (CAPITAL_LETTER|DIGIT|','|'-')*
       ;

FIGURE: ('-')? ((DIGIT)+ '.' (DIGIT)* | '.'(DIGIT)+ );

ASSIGNMENT: VALUE '=' (VALUE|FIGURE)
          ;

I want the ASSIGNMENT rule to match a token like MOLE-FRAC=1.0 or STOIC=IN, for example. But when I include this rule, the program throws the unexpected token: error at the point where first space character occurs in the input file. Is this due to some problem with the greedy nature of the the VALUE rule? 

Thanks in advance.

Regards,

Togol Mach  
-- 
_______________________________________________
NEW! Lycos Dating Search. The only place to search multiple dating sites at once.
http://datingsearch.lycos.com

From monty at codetransform.com  Tue Mar  8 07:03:28 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Tue Mar  8 10:03:34 2005
Subject: [antlr-interest] "unexpected token" error
In-Reply-To: <20050308175012.1FDECCA06F@ws7-4.us4.outblaze.com>
References: <20050308175012.1FDECCA06F@ws7-4.us4.outblaze.com>
Message-ID: <422DBEC0.4060406@codetransform.com>

togol machillan wrote:
> Hi,
> 
> Another newbie question. I hope somebody can help me out here.
> 
> I have the following lexer rules (omitting some which are clear by name)
> 
> VALUE  options {testLiterals = true; }
>        : CAPITAL_LETTER (CAPITAL_LETTER|DIGIT|','|'-')*
>        ;
> 
> FIGURE: ('-')? ((DIGIT)+ '.' (DIGIT)* | '.'(DIGIT)+ );
> 
> ASSIGNMENT: VALUE '=' (VALUE|FIGURE)
>           ;
> 
> I want the ASSIGNMENT rule to match a token like MOLE-FRAC=1.0 or STOIC=IN, for example. But when I include this rule, the program throws the unexpected token: error at the point where first space character occurs in the input file. Is this due to some problem with the greedy nature of the the VALUE rule? 
> 
> Thanks in advance.
> 
> Regards,
> 
> Togol Mach  

What does your whitespace rule look like?

Monty
From togolmach2 at lycos.com  Tue Mar  8 12:08:05 2005
From: togolmach2 at lycos.com (togol machillan)
Date: Tue Mar  8 12:08:08 2005
Subject: [antlr-interest] "unexpected token" error
Message-ID: <20050308200805.6D015E5BC7@ws7-2.us4.outblaze.com>

Hi,

The whitespace and the newline rules are as follows.

NEWLINE 	: ('\r''\n')=> '\r''\n' //DOS
		| '\r' //MAC
		| '\n' //UNIX
		{ newline(); 
		}
		;

WS : (' '|'\t'|'\f') { _ttype = ANTLR_USE_NAMESPACE(antlr)Token::SKIP; } ;

Regards,

Mach
----- Original Message -----
From: "Monty Zukowski" <monty@codetransform.com>
To: antlr-interest@antlr.org
Subject: Re: [antlr-interest] "unexpected token" error
Date: Tue, 08 Mar 2005 10:03:28 -0500

> 
> togol machillan wrote:
> > Hi,
> >
> > Another newbie question. I hope somebody can help me out here.
> >
> > I have the following lexer rules (omitting some which are clear by name)
> >
> > VALUE  options {testLiterals = true; }
> >        : CAPITAL_LETTER (CAPITAL_LETTER|DIGIT|','|'-')*
> >        ;
> >
> > FIGURE: ('-')? ((DIGIT)+ '.' (DIGIT)* | '.'(DIGIT)+ );
> >
> > ASSIGNMENT: VALUE '=' (VALUE|FIGURE)
> >           ;
> >
> > I want the ASSIGNMENT rule to match a token like MOLE-FRAC=1.0 or 
> > STOIC=IN, for example. But when I include this rule, the program 
> > throws the unexpected token: error at the point where first space 
> > character occurs in the input file. Is this due to some problem 
> > with the greedy nature of the the VALUE rule? Thanks in advance.
> >
> > Regards,
> >
> > Togol Mach
> 
> What does your whitespace rule look like?
> 
> Monty

-- 
_______________________________________________
NEW! Lycos Dating Search. The only place to search multiple dating sites at once.
http://datingsearch.lycos.com

From monty at codetransform.com  Tue Mar  8 09:35:48 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Tue Mar  8 12:35:56 2005
Subject: [antlr-interest] "unexpected token" error
In-Reply-To: <20050308200805.6D015E5BC7@ws7-2.us4.outblaze.com>
References: <20050308200805.6D015E5BC7@ws7-2.us4.outblaze.com>
Message-ID: <422DE274.3010305@codetransform.com>

togol machillan wrote:
> Hi,
> 
> The whitespace and the newline rules are as follows.
> 
> NEWLINE 	: ('\r''\n')=> '\r''\n' //DOS
> 		| '\r' //MAC
> 		| '\n' //UNIX
> 		{ newline(); 
> 		}
> 		;
> 
> WS : (' '|'\t'|'\f') { _ttype = ANTLR_USE_NAMESPACE(antlr)Token::SKIP; } ;
> 
> Regards,
> 
> Mach
> ----- Original Message -----
> From: "Monty Zukowski" <monty@codetransform.com>
> To: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] "unexpected token" error
> Date: Tue, 08 Mar 2005 10:03:28 -0500
> 
> 
>>togol machillan wrote:
>>
>>>Hi,
>>>
>>>Another newbie question. I hope somebody can help me out here.
>>>
>>>I have the following lexer rules (omitting some which are clear by name)
>>>
>>>VALUE  options {testLiterals = true; }
>>>       : CAPITAL_LETTER (CAPITAL_LETTER|DIGIT|','|'-')*
>>>       ;
>>>
>>>FIGURE: ('-')? ((DIGIT)+ '.' (DIGIT)* | '.'(DIGIT)+ );
>>>
>>>ASSIGNMENT: VALUE '=' (VALUE|FIGURE)
>>>          ;
>>>
>>>I want the ASSIGNMENT rule to match a token like MOLE-FRAC=1.0 or 
>>>STOIC=IN, for example. But when I include this rule, the program 
>>>throws the unexpected token: error at the point where first space 
>>>character occurs in the input file. Is this due to some problem 
>>>with the greedy nature of the the VALUE rule? Thanks in advance.
>>>
>>>Regards,
>>>
>>>Togol Mach
>>
>>What does your whitespace rule look like?
>>
>>Monty
> 
> 

It's still not enough information to diagnose.  Best thing is the 
minimal grammar & input to reproduce, plus the actual error message.

Monty
From demakov at ispras.ru  Tue Mar  8 23:02:46 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Tue Mar  8 23:02:53 2005
Subject: [antlr-interest] lexer suggestions
References: <422B8A7E.4050805@jazillian.com>
Message-ID: <008701c52475$ffacb790$8cc79553@marlboro>

I agree with both proposals.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com

----- Original Message ----- 
From: "Andy Tripp" <info@jazillian.com>
To: <antlr-interest@antlr.org>
Sent: Monday, March 07, 2005 1:55 AM
Subject: [antlr-interest] lexer suggestions


> Hi,
> 
> Forgive me if this has been discussed before or if it's not even
> an issue with more recent versions of ANTLR. I'm using ANTLR 2.7.2.
> 
> I have a couple of minor suggestions for ANTLR-generated lexers:
> 
> 1) Rather than (or in addition to):
> 
> lexer.setObjectClass("some.package.MyToken");
> 
> I'd like to be able to specify my own Token factory:
> 
> lexer.setTokenFactory(TokenFactory myfactory);
> 
> ...and then in the antlr package, we'd need:
> 
> package antlr;
> public interface TokenFactory {
>         Token makeToken(int type);
> }
> 
> One advantage of specifying a factory rather than a class name
> is that any errors are caught at compile time, rather
> than having a RuntimeException if I have a typo in my class name.
> Another advantage is speed. The reflection newInstance() method
> is a little slower than just a call to a constructor (though not
> much - I measured about 1.5 seconds for 10 million calls for a simple
> constructor, and twice that using newInstance()).
> A third (potential) advantage is that my Factory could then
> be made more efficient, perhaps recycling old Tokens with an
> object pool.
> 
> Of course, I can add a setTokenFactory() method
> myself by adding just a few lines of
> code (and I do), but it might be nice default
> behaviour.
> 
> 2) It would also be nice to have Token be an interface, and maybe
> rename the current Token class to "BaseToken" or something.
> It's not very likely that anyone would really need their
> Token class to inherit from something else, but it's possible.
> It just seems ugly to have those few methods in the Token class
> that don't do anything. We have set/get methods for column, line,
> filename, and none of them do anything in the Token class.
> 
> Andy
> 

From togolmach2 at lycos.com  Wed Mar  9 03:02:49 2005
From: togolmach2 at lycos.com (togol machillan)
Date: Wed Mar  9 03:02:51 2005
Subject: [antlr-interest] "unexpected token" error
Message-ID: <20050309110249.9BDD23384B@ws7-3.us4.outblaze.com>

Hi,

The lexer grammar has the following main rules. I think the problem is only to the ASSIGNMENT rule or the rules it depends on, because the program works fine if I comment it out. 

VALUE  options {testLiterals = true; }
       : CAPITAL_LETTER (CAPITAL_LETTER|DIGIT|','|'-')*
       ;

FIGURE: ('-')? ((DIGIT)+ '.' (DIGIT)* | '.'(DIGIT)+ );

ASSIGNMENT: VALUE '=' (VALUE|FIGURE)
          ;

protected
DIGIT: '0'..'9';

protected
CAPITAL_LETTER: 'A'..'Z';

protected
SMALL_LETTER: 'a'..'z';

Some input files and the corresponding error messages generated are as follows. 

Input file: 
FLOWSHEET 
    BLOCK B1 IN=1 2 OUT=3

Output error message:
<cin>:1:11: unexpected token: 

Input file:
DATABANKS PURE12  / AQUEOUS  / SOLIDS  / INORGANIC  /  &
        NOASPENPCD

Output error message:
<cin>:1:19: unexpected token: /

I really appreciate your will to help. Thanks.

T. Mach



----- Original Message -----
From: "Monty Zukowski" <monty@codetransform.com>
To: "ANTLR Interest" <antlr-interest@antlr.org>
Subject: Re: [antlr-interest] "unexpected token" error
Date: Tue, 08 Mar 2005 12:35:48 -0500

> 
> togol machillan wrote:
> > Hi,
> >
> > The whitespace and the newline rules are as follows.
> >
> > NEWLINE 	: ('\r''\n')=> '\r''\n' //DOS
> > 		| '\r' //MAC
> > 		| '\n' //UNIX
> > 		{ newline(); 		}
> > 		;
> >
> > WS : (' '|'\t'|'\f') { _ttype = ANTLR_USE_NAMESPACE(antlr)Token::SKIP; } ;
> >
> > Regards,
> >
> > Mach
> > ----- Original Message -----
> > From: "Monty Zukowski" <monty@codetransform.com>
> > To: antlr-interest@antlr.org
> > Subject: Re: [antlr-interest] "unexpected token" error
> > Date: Tue, 08 Mar 2005 10:03:28 -0500
> >
> >
> >> togol machillan wrote:
> >>
> >>> Hi,
> >>>
> >>> Another newbie question. I hope somebody can help me out here.
> >>>
> >>> I have the following lexer rules (omitting some which are clear by name)
> >>>
> >>> VALUE  options {testLiterals = true; }
> >>>       : CAPITAL_LETTER (CAPITAL_LETTER|DIGIT|','|'-')*
> >>>       ;
> >>>
> >>> FIGURE: ('-')? ((DIGIT)+ '.' (DIGIT)* | '.'(DIGIT)+ );
> >>>
> >>> ASSIGNMENT: VALUE '=' (VALUE|FIGURE)
> >>>          ;
> >>>
> >>> I want the ASSIGNMENT rule to match a token like MOLE-FRAC=1.0 
> >>> or STOIC=IN, for example. But when I include this rule, the 
> >>> program throws the unexpected token: error at the point where 
> >>> first space character occurs in the input file. Is this due to 
> >>> some problem with the greedy nature of the the VALUE rule? 
> >>> Thanks in advance.
> >>>
> >>> Regards,
> >>>
> >>> Togol Mach
> >>
> >> What does your whitespace rule look like?
> >>
> >> Monty
> >
> >
> 
> It's still not enough information to diagnose.  Best thing is the 
> minimal grammar & input to reproduce, plus the actual error message.
> 
> Monty

-- 
_______________________________________________
NEW! Lycos Dating Search. The only place to search multiple dating sites at once.
http://datingsearch.lycos.com

From open.zone at virgin.net  Wed Mar  9 04:44:40 2005
From: open.zone at virgin.net (Micheal J)
Date: Wed Mar  9 04:31:55 2005
Subject: [antlr-interest] lexer suggestions
In-Reply-To: <422B8A7E.4050805@jazillian.com>
Message-ID: <001001c524a5$c3c9e740$7e02a8c0@hercules>

Hi Andy,

> Forgive me if this has been discussed before or if it's not 
> even an issue with more recent versions of ANTLR. I'm using 
> ANTLR 2.7.2.
> 
> I have a couple of minor suggestions for ANTLR-generated lexers:
> 
> 1) Rather than (or in addition to):
> 
> lexer.setObjectClass("some.package.MyToken");
> 
> I'd like to be able to specify my own Token factory:
> 
> lexer.setTokenFactory(TokenFactory myfactory);

This is already present for ANTLR C# targets. The TokenCreator (as the
factory is called) is not an interface but an abstract base class (it
could/should have been an interface). For C#, creating instances via
reflection is [very?] expensive.

> 2) It would also be nice to have Token be an interface, and 
> maybe rename the current Token class to "BaseToken" or 
> something. It's not very likely that anyone would really need 
> their Token class to inherit from something else, but it's 
> possible. It just seems ugly to have those few methods in the 
> Token class that don't do anything. We have set/get methods 
> for column, line, filename, and none of them do anything in 
> the Token class.

Once again, C# has an IToken interface. The Token class still exists however
with all it's methods intact. Think of it as a badly named abstract base
that isn't...erm...abstract. I chose not to change it in the ANTLR 2.x line.
It would have been a gratuitious breaking change with not much benefit.

IToken allows you (in C#) to create an alternative Token class hierarchy if
you so please.

Cheers,

Micheal
ANTLR/C#

From jbb at acm.org  Wed Mar  9 07:17:40 2005
From: jbb at acm.org (jbb@acm.org)
Date: Wed Mar  9 07:17:47 2005
Subject: [antlr-interest] "unexpected token" error
In-Reply-To: <20050309110249.9BDD23384B@ws7-3.us4.outblaze.com> (message from
	togol machillan on Wed, 09 Mar 2005 03:02:49 -0800)
References: <20050309110249.9BDD23384B@ws7-3.us4.outblaze.com>
Message-ID: <E1D92wO-0003vT-00@gecko>

Pardon me for butting in...

>togol machillan wrote:
>...snip
>Some input files and the corresponding error messages generated are as follows. 
>
>Input file: 
>FLOWSHEET 
>    BLOCK B1 IN=1 2 OUT=3
>
>Output error message:
><cin>:1:11: unexpected token: 
>
>Input file:
>DATABANKS PURE12  / AQUEOUS  / SOLIDS  / INORGANIC  /  &
>        NOASPENPCD
>
>Output error message:
><cin>:1:19: unexpected token: /
>
>...snip


For the first error, your posted lexer rule NEWLINE does not set the token
type to SKIP and so newlines are not ignored.  The newline appearing after
the "FLOWSHEET" VALUE token is the unexpected culprit here, I believe.
Do any of your parser rules handle NEWLINE tokens?

For the second error, none of your posted lexer fragments have dealt with the
'/' character. Do you have any lexer rules that consume a '/' character?
Perhaps your lexer ASSIGNMENT rule should really be a rule in the parser and
should be updated to permit a '/' separated list of items on the right hand
side of the '='?

Hope this helps...
   -jbb
From koensegers at scarlet.be  Thu Mar 10 01:37:31 2005
From: koensegers at scarlet.be (Koen Segers)
Date: Thu Mar 10 01:37:36 2005
Subject: [antlr-interest] ast problem
Message-ID: <ID4QQJ$26E919104B5852FD5176A44FBECE4E94@scarlet.be>

Hi, 

I want to remove an astnode typedef with childeren a and b, and insert the a
and b node. How do I do this?

##=#(null,#i); //gives only b (a removed)
##=#(##,#i);    //gives a as child of b.

I just want a and b to be childeren of the same root.

Greetz

-----------------------------------------------------
Let op! Mijn mailadres verandert naar ... @scarlet.be 
Gelieve dit aan te passen in uw adresboek.

From ewbank at gmail.com  Thu Mar 10 02:43:10 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Mar 10 02:43:13 2005
Subject: [antlr-interest] ast problem
In-Reply-To: <ID4QQJ$26E919104B5852FD5176A44FBECE4E94@scarlet.be>
References: <ID4QQJ$26E919104B5852FD5176A44FBECE4E94@scarlet.be>
Message-ID: <dd3a065f0503100243189ac914@mail.gmail.com>

We need more information.  What is the root node to be, since it is
not the typedef?

If you have something like this:
   statement
      : ...
      | TYPEDEF^ a:name b:type
      ;

Then a and b are children of the same node - the TYPEDEF node.  So,
you can overwrite the name and type of that root node if you want, or
you can leave it.

The sequence you want is probably
      #( #[TYPE,"NAME"], #a, #b );
but you already have that - with the TYPEDEF as the root of this small tree.

Hope this helps,
- B

On Thu, 10 Mar 2005 10:37:31 +0100, Koen Segers <koensegers@scarlet.be> wrote:
> I want to remove an astnode typedef with childeren a and b, and
> insert the a and b node. How do I do this?
> 
>   ##=#(null,#i); //gives only b (a removed)
>   ##=#(##,#i);    //gives a as child of b.
> 
> I just want a and b to be childeren of the same root.
From demakov at ispras.ru  Thu Mar 10 06:21:32 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Thu Mar 10 06:21:42 2005
Subject: [antlr-interest] Advanced questions and proposals
Message-ID: <010e01c5257c$7547cf60$8cc79553@marlboro>

Hi all,

I'm trying to improve my parser (and ANTLR skills :) ) and have the following questions:

1. How to suppress warning for "optional" token in lexer?

I have lexer rule that use another lexer to recognize complex token

CUSTOM_TOKEN : { ... }?
               {
                 selector.push( "custom" );
                 Token t = selector.nextToken();
                 t.setType( CUSTOM_TOKEN );
                 $setToken( t );
               }
             ;

ANTLR complains that this rule is optional (can match "nothing").
Yes, it's reasonable warning, but in other cases I can suppress similar warnings
using options ('warnWhenFollowAmbig' and 'generateAmbigWarnings').
But how can I suppress this warning?

2. Text of EOF token

When ANTLR (or generated parser) reports about unexpected end of file,
error message looks like: 

a.g:2:1: expecting ID, found 'null'

I prefer to see something more informative instead of 'null'.
I've found workaround for that,
but propose to change default behaviour in future versions.

3. Multiple error messages about unexpected EOF in parser.

When EOF is found in some deep parser rule, ANTLR generates syntax error messages
for each exception handler (rule) on stack. I propose to process this case
separately and, for example, suppress all error messages after the first one
when EOF is reached.

4. Error handling - extend default error handler

When I specify my own error handler, ANTLR doesn't generate default one.
But what if I process additional exception types and want use default handler
for RecognitionException? I propose that 
options { defaultErrorHandler=true; }
turn on default error handler generation in this case.

5. How to use follow set in user defined exception handlers?

Other way to extend default error handler - to write it in user error handler.
But default error handler uses follow set:

  catch (RecognitionException ex) {
   if (inputState.guessing==0) {
    reportError(ex);
    consume();
    consumeUntil(_tokenSet_4);
   } else {
     throw ex;
   }
  }

In this case it is _tokenSet_4. What should I write in error handler to mimic
this behaviour? I can't use _tokenSet_4 because only ANTLR knows number of set
and can change it on grammar change.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


From jungdl at ornl.gov  Thu Mar 10 07:57:15 2005
From: jungdl at ornl.gov (David Jung)
Date: Thu Mar 10 08:02:14 2005
Subject: [antlr-interest] Semantic predicates that aren't & hoisting
Message-ID: <3327.172.23.0.3.1110470235.squirrel@callisto.ornl.gov>

I have a large grammar for a complex custom programming language
that I've implemented in ANTLR.  However, there is one problem
I have been unable to solve.  I don't think there is a clean
way to solve it within the current ANTLR framework (2.7.4), but
I could be wrong - hence my query.

I have some parser rules something like this (to simplify):

expr: additiveExpr ;

additiveExpr: multExpr ( ('+' | '-') multExpr ;

multExpr: ...

...

primaryExpr:
   const
 | buildinType
 ...
 | expressionList
 ;

expressionList : '{' expr ( ';' expr )* '}' ;


The important rule for this discussion being expressionList.
So, a valid expr can be "5" or "{5; 7; 8}"
or
"{
   {
     2;
     3;
   };     <-- notice this ';'
   5;
 }
"

My problem is that I want to eliminate the requirement for
the separating ';' after a sub-expressionList.  I cannot just make
the ';' optional in the expressionList rule (i.e. (';')?) as
that makes expr ambiguous (i.e. can't distinguish between
expr "3" followed by expr "-2" and expr "3-2" (evaluating to 1) ).

I think it may be possibly to solve by having two paths through
all the rules between expr and primaryExpr, but that would
mean duplicating almost my whole grammar (of Java/C++ order of complexity);
and isn't very natural.

So, my first attempt at a solution went like this (using a semantic
predicate):

expressionList:
  : '{' expr ( conditionalSEMI expr )* '}' ;

conditionalSEMI : {<just-saw-'}'-token>}? | SEMI ;

While this works for expressionList, it generates many ANTLR
ambiguous warnings all over the grammar - which makes me uncomfortable.
This uses ANTLR's semantic predicate notation, but it is really
a syntactic predicate.  Is there any way to have the condition hoisted
into the rule decision logic so that the warnings are eliminated?
(note that an ANTLR syntactic predicate doesn't work because is
provides a lookahead grammar for prediction, while I need to look
back at the last token).

My second idea for a solution was something like:

expressionList:
  : '{' expr ( {conditionallyInsertSEMI();} SEMI expr )* '}' ;

defining the function:

void conditionallyInsertSEMI()
{
  if (<last token wasn't '}'>)
    Insert_SEMI_into_token_stream();
}

However, I don't know how (or if) it is possible to insert
a token into the stream during parsing like that.


Does anyone who is an experienced ANTLR user know if it is
possible to do what I want cleanly? Or if there is a way
to force hoisting or to insert a token?
Thanks in advance for help - it will be appreciated.
-David.

From johnm-antlr at non.net  Thu Mar 10 08:56:15 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Thu Mar 10 08:55:57 2005
Subject: [antlr-interest] Semantic predicates that aren't & hoisting
In-Reply-To: <3327.172.23.0.3.1110470235.squirrel@callisto.ornl.gov>
References: <3327.172.23.0.3.1110470235.squirrel@callisto.ornl.gov>
Message-ID: <16944.31791.463980.186783@despot.non.net>

>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
[...]

> expressionList : '{' expr ( ';' expr )* '}' ;

> The important rule for this discussion being expressionList.  So, a valid
> expr can be "5" or "{5; 7; 8}" or "{ { 2; 3; }; <-- notice this ';' 5; }
> "

Make the exprList rule a bit more complicated and have it explicitly
understand the recursive nesting of the exprLists.

I'm not sure why you don't require the semi-colon after the last item in
the exprList but changing that would make the grammar cleaner.

Take care,
	John
From KoenSegers at scarlet.be  Thu Mar 10 09:02:38 2005
From: KoenSegers at scarlet.be (Koen Segers)
Date: Thu Mar 10 09:02:51 2005
Subject: [antlr-interest] ast problem
In-Reply-To: <dd3a065f0503100243189ac914@mail.gmail.com>
References: <ID4QQJ$26E919104B5852FD5176A44FBECE4E94@scarlet.be>
	<dd3a065f0503100243189ac914@mail.gmail.com>
Message-ID: <200503101802.38756.KoenSegers@scarlet.be>

I will explain it totally...

I created an ast in my Parser.
This parser is optimized in TreeParser.
I analyze the ast and replace a part of the tree with new objects.
These object have a sort of execute and generate methods.

typeDef
        :       
                #(ASTtypeDef
                        {
                                Type type = new Type();
                                boolean constant = false;
                        }
                        #(ASTdeclarationSpecifiers
                                (CONST {constant = true;} )*
                                (INT
                                        {
                                                type = new Int();
                                        }
                                )
                                {type.setConstant(constant);}
                        )

                        #!(ASTinitDeclaratorList
                                (i:ID           //something else than ids??
                                        {
                                                Typedef typedef = new 
Typedef(type, i.getText());
                                                //symbol table
                                                //tree construction
                                                #i.setAbstractAst(typedef);
                                                ## = #(##, #i);
                                        }
                                )*
                        )
                )

as you can see the ASTinitDeclaratorList can be several ID's.
These ID's must will be the the new nodes... (instead of 1 typedef node)

On Thursday 10 March 2005 11:43, Bryan Ewbank wrote:
> We need more information.  What is the root node to be, since it is
> not the typedef?
>
> If you have something like this:
>    statement
>
>       : ...
>       :
>       | TYPEDEF^ a:name b:type
>
>       ;
>
> Then a and b are children of the same node - the TYPEDEF node.  So,
> you can overwrite the name and type of that root node if you want, or
> you can leave it.
>
> The sequence you want is probably
>       #( #[TYPE,"NAME"], #a, #b );
> but you already have that - with the TYPEDEF as the root of this small
> tree.
>
> Hope this helps,
> - B
>
> On Thu, 10 Mar 2005 10:37:31 +0100, Koen Segers <koensegers@scarlet.be> 
wrote:
> > I want to remove an astnode typedef with childeren a and b, and
> > insert the a and b node. How do I do this?
> >
> >   ##=#(null,#i); //gives only b (a removed)
> >   ##=#(##,#i);    //gives a as child of b.
> >
> > I just want a and b to be childeren of the same root.

-- 

Koen Segers

<koensegers@scarlet.be>
<http://eddyvite.dyndns.org>
From jungdl at ornl.gov  Thu Mar 10 09:19:14 2005
From: jungdl at ornl.gov (David Jung)
Date: Thu Mar 10 09:19:30 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
Message-ID: <4635.172.23.0.3.1110475154.squirrel@callisto.ornl.gov>

John D. Mitchell said:
>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
> [...]
>
>> expressionList : '{' expr ( ';' expr )* '}' ;
>
>> The important rule for this discussion being expressionList.  So, a
>> valid
>> expr can be "5" or "{5; 7; 8}" or "{ { 2; 3; }; <-- notice this ';' 5; }
>> "
>
> Make the exprList rule a bit more complicated and have it explicitly
> understand the recursive nesting of the exprLists.

John,

I'm not exactly sure how that would work.
Note that a semi-colon following an expr that was an expressionList isn't
the only case where I want it optional, but immediately after *any*
expressionList (which could be nested down).
e.g.  another valid expr rule option is

expr: 'if' cond 'then' expr

so I'd like to be able to write (where f() is func call):
{
  if (c) then {f();g();h()}
  i();
  j();
}

Here the outer expressionList consists of three expressions, none
of which are an expressionList (but the first is an 'if' that
contains an expressionList as its last part)

>
> I'm not sure why you don't require the semi-colon after the last item in
> the exprList but changing that would make the grammar cleaner.

Actually I was trying to simplify my description.  I'd like
to have an optional semi-colon after the last expression.
This is so that users coming from java/C++ could write 'naturally'
both:

{
  f();
  g();
  h();
}

and

a = {f();g();h()};

I think requiring either

{
  f();
  g();
  h()
}

or

a = {f();g();h();}

is confusing and 'un-natural'.


Thanks very much for your reply, btw.
Cheers,
-David.


From johnm-antlr at non.net  Thu Mar 10 09:38:36 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Thu Mar 10 09:38:18 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <4635.172.23.0.3.1110475154.squirrel@callisto.ornl.gov>
References: <4635.172.23.0.3.1110475154.squirrel@callisto.ornl.gov>
Message-ID: <16944.34332.888446.499210@despot.non.net>

>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
> John D. Mitchell said:
>>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
[...]

>>> expressionList : '{' expr ( ';' expr )* '}' ;

>>> The important rule for this discussion being expressionList.  So, a
>>> valid expr can be "5" or "{5; 7; 8}" or "{ { 2; 3; }; <-- notice this
>>> ';' 5; } "

>> Make the exprList rule a bit more complicated and have it explicitly
>> understand the recursive nesting of the exprLists.

> I'm not exactly sure how that would work.

Add the handling of the recursive exprList directly into exprList. E.g.:

exprList
	: '{' ( exprListOrStmt )* '}'
	;

exprListOrStmt
	: exprList
	| expr ';'
	;

> Note that a semi-colon following an expr that was an expressionList isn't
> the only case where I want it optional, but immediately after *any*
> expressionList (which could be nested down).  e.g.  another valid expr
> rule option is
[...]

Ah, the old separator vs. terminator argument.  Well, there are certainly
plenty of examples of that idea floating around. :-)

Since you seem to have some control over the language, I strongly suggest
implementing your grammar with semi-colons as terminators first and then go
back after you have that well debugged and tweak it to be a separator.

Hope this helps,
		John
From jungdl at ornl.gov  Thu Mar 10 10:21:37 2005
From: jungdl at ornl.gov (David Jung)
Date: Thu Mar 10 10:21:44 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <16944.34332.888446.499210@despot.non.net>
References: <4635.172.23.0.3.1110475154.squirrel@callisto.ornl.gov>
	<16944.34332.888446.499210@despot.non.net>
Message-ID: <1592.172.23.0.3.1110478897.squirrel@callisto.ornl.gov>


John D. Mitchell said:
>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
>> John D. Mitchell said:
>>>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
> [...]
>
>>>> expressionList : '{' expr ( ';' expr )* '}' ;
>
>>>> The important rule for this discussion being expressionList.  So, a
>>>> valid expr can be "5" or "{5; 7; 8}" or "{ { 2; 3; }; <-- notice this
>>>> ';' 5; } "
>
>>> Make the exprList rule a bit more complicated and have it explicitly
>>> understand the recursive nesting of the exprLists.
>
>> I'm not exactly sure how that would work.
>
> Add the handling of the recursive exprList directly into exprList. E.g.:
>
> exprList
>         : '{' ( exprListOrStmt )* '}'
>         ;
>
> exprListOrStmt
>         : exprList
>         | expr ';'
>         ;

Perhaps I'm confused.  Here as you have expr ';', that means that
an expression that ends with an exprList (but isn't one directly),
like the 'if' case, can have a ';' following it - which is exactly
what I'm trying to avoid requiring.
That is "if (a) {f();g();h();}" is a valid expr, but isn't
an exprList, so if embedded as part of an exprList like:
{ if(a) {f();g();h();}; x(); y(); } requires that ';' before
the x.
Note that I can't place all the rules with training expr in
the exprListOrStmt rule (like the 'if' rule), because the
expr rule is the root of the whole grammar, but exprList
is part of a primaryExpr, which is way near the 'bottom' of the
grammar.
(So you can write (if(a)then b())+{g();h();}*5, for example.
Even {if(a)then f else g}() - which calls func f or g depending on c)
That is, everything is an expression (and both functions and types
are first-class values)

> Ah, the old separator vs. terminator argument.  Well, there are certainly
> plenty of examples of that idea floating around. :-)
>
> Since you seem to have some control over the language, I strongly suggest
> implementing your grammar with semi-colons as terminators first and then
> go
> back after you have that well debugged and tweak it to be a separator.

Well, this was intended to the the tweaking stage :)
I've implemented an interpreter for the language already and am
now starting a compiler to target the JVM.  So I though I'd try
to fix the nagging ';' problem that's been bugging me :)
I have no problem with terminators, so long as the last one in
an exprList isn't required :)

> Hope this helps,
Yes, you're certainly helping... :)

Thanks,
-David.


From monty at codetransform.com  Thu Mar 10 07:45:09 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Thu Mar 10 10:45:21 2005
Subject: [antlr-interest] Semantic predicates that aren't & hoisting
In-Reply-To: <3327.172.23.0.3.1110470235.squirrel@callisto.ornl.gov>
References: <3327.172.23.0.3.1110470235.squirrel@callisto.ornl.gov>
Message-ID: <42306B85.3080308@codetransform.com>

David Jung wrote:

> 
> void conditionallyInsertSEMI()
> {
>   if (<last token wasn't '}'>)
>     Insert_SEMI_into_token_stream();
> }
> 
> However, I don't know how (or if) it is possible to insert
> a token into the stream during parsing like that.
> 

Not such a good idea from the parser, but a fine use of a TokenStream. 
See http://www.codetransform.com/filterexample.html
The idea for you would be to write enough of a parser to recognize the 
right brace, check for a following semi, and insert a semi if there 
isn't one.  The big question is if you can make your parser accept a 
SEMI after every right brace or if you need to make the filter smart 
enough to tell when the brace is part of an expr or not.

Actually, if you can rearrange it so that the parser can handle a semi 
after a brace everywhere, you might be able to accomplish the whole 
thing in the lexer.

> 
> Does anyone who is an experienced ANTLR user know if it is
> possible to do what I want cleanly? Or if there is a way
> to force hoisting or to insert a token?

You can't hoist, you have to manually do it by copy and paste.  It still 
may leave you with warnings though.  Don't insert a token from the 
parser, you must do that before it gets to the parser somehow.

Ter, this would make an interesting test for ANTLR 3.

Monty
www.codetransform.com
From eprice at vettro.com  Thu Mar 10 09:32:31 2005
From: eprice at vettro.com (eprice@vettro.com)
Date: Thu Mar 10 10:59:51 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <4635.172.23.0.3.1110475154.squirrel@callisto.ornl.gov> (David
	Jung's message of "Thu, 10 Mar 2005 12:19:14 -0500 (EST)")
References: <4635.172.23.0.3.1110475154.squirrel@callisto.ornl.gov>
Message-ID: <m3oedrflu8.fsf@volatile.vettro.com>

David Jung <jungdl@ornl.gov> writes:

> Actually I was trying to simplify my description.  I'd like to have
> an optional semi-colon after the last expression.  This is so that
> users coming from java/C++ could write 'naturally' both:
>
> {
>   f();
>   g();
>   h();
> }
>
> and
>
> a = {f();g();h()};

Hmm, what about the following:

 if (foo) {};
 else {}

Should that be legal?

$0.02,
-Ed
From johnm-antlr at non.net  Thu Mar 10 11:11:32 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Thu Mar 10 11:11:13 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <1592.172.23.0.3.1110478897.squirrel@callisto.ornl.gov>
References: <4635.172.23.0.3.1110475154.squirrel@callisto.ornl.gov>
	<16944.34332.888446.499210@despot.non.net>
	<1592.172.23.0.3.1110478897.squirrel@callisto.ornl.gov>
Message-ID: <16944.39908.496053.735061@despot.non.net>

>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
>>>>>> John D. Mitchell said:
>>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
[...]

>> Add the handling of the recursive exprList directly into
>> exprList. E.g.:

>> exprList : '{' ( exprListOrStmt )* '}' ;

>> exprListOrStmt : exprList | expr ';' ;

> Perhaps I'm confused.  Here as you have expr ';', that means that an
> expression that ends with an exprList (but isn't one directly), like the
> 'if' case, can have a ';' following it - which is exactly what I'm trying
> to avoid requiring.

Read my grammar fragment again. The first alternative of exprListOrStmt is
a recursive call to exprList.  That will match the nested exprLists.

What I didn't do was make the semi-colon optional: no semi after exprList
blocks but a semi is require after an expr.

> That is "if (a) {f();g();h();}" is a valid expr, but isn't an exprList,

The entire if expression isn't an exprList but the block is an expr which
will resolve to an exprList all by itself.

Check out e.g., the C or Java grammars for examples of how the various
parts of an expr hang together.

Take care,
	John
From jungdl at ornl.gov  Thu Mar 10 11:15:56 2005
From: jungdl at ornl.gov (David Jung)
Date: Thu Mar 10 11:16:26 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <m3oedrflu8.fsf@volatile.vettro.com>
References: <4635.172.23.0.3.1110475154.squirrel@callisto.ornl.gov>
	<m3oedrflu8.fsf@volatile.vettro.com>
Message-ID: <2467.172.23.0.3.1110482156.squirrel@callisto.ornl.gov>

eprice@vettro.com said:
> David Jung <jungdl@ornl.gov> writes:
>
>> Actually I was trying to simplify my description.  I'd like to have
>> an optional semi-colon after the last expression.  This is so that
>> users coming from java/C++ could write 'naturally' both:
>>
>> {
>>   f();
>>   g();
>>   h();
>> }
>>
>> and
>>
>> a = {f();g();h()};
>
> Hmm, what about the following:
>
>  if (foo) {};
>  else {}
>
> Should that be legal?

It would be better if it wasn't.
In my previous posts I've said I don't want to
require a ';' after an expr that ends with an exprList,
but in reality it would be better is it wasn't allowed.
There are two different choices here
(given that ';' is required to separate expr's when the first doesn't
end in an exprList):

1) require/allow/disallow ';' after expr with a training exprList
2) require/allow/disallow ';' after last expr in an exprList

I was trying to avoid the complication of discussing 2), but
perhaps it isn't completely independent of 1).
Ideally I'd like 1) disallow, 2) allow - but I don't know
how to do it :(
-David.

From xeenman at yahoo.com  Thu Mar 10 11:24:33 2005
From: xeenman at yahoo.com (William Lam)
Date: Thu Mar 10 11:24:35 2005
Subject: [antlr-interest] pretty printer
Message-ID: <20050310192433.91112.qmail@web54608.mail.yahoo.com>

hi guys,

I'm writing a pretty printer for the grammar that I
wrote.  The grammer file outputs an object
encapsulating the input.  So to pretty print it, I
would just walk my object and print out the keywords.

Unfortunately, this approach fails because all
comments are thrown away by my lexer.  I attempted to
have my lexer put all the comments into a collection
w/ its row and column information so that I could
insert it during pretty printing.  But this falls a
little short, because my objects don't keep track of
every keyword that the lexer returns.

Any ideas?  Should I use a AST to do this instead?

Is there any way to search through the archives on the
new mailing list?


		
__________________________________ 
Do you Yahoo!? 
Yahoo! Small Business - Try our new resources site!
http://smallbusiness.yahoo.com/resources/ 
From gsidier at yahoo.com  Thu Mar 10 05:10:39 2005
From: gsidier at yahoo.com (Gregory Sidier)
Date: Thu Mar 10 12:19:50 2005
Subject: [antlr-interest] C# port of StringTemplate : small bug and possible
	fix
Message-ID: <20050310131039.62487.qmail@web50307.mail.yahoo.com>

Hi,

The C# port of StringTemplate produces error output
when the "separator" construct is used. 

Apparently the faulty code is in ASTExpr.cs[line 442]
and NoIndentWriter.cs[line 34] also needs a  fix.

At these two places, the references to
System.IO.StreamWriter should be changed to
System.IO.TextWriter.

I haven't checked if this problem occurs in the java
version.

Perhaps a patch was already issued, but i couldn't
find one.

BTW out of curiosity, how is the C# port produced ??
Is  it a manual port or a fully automatic process or a
mix (automatic + corrections)?

Thanks.


		
__________________________________ 
Do you Yahoo!? 
Yahoo! Small Business - Try our new resources site!
http://smallbusiness.yahoo.com/resources/ 
From jungdl at ornl.gov  Thu Mar 10 12:53:17 2005
From: jungdl at ornl.gov (David Jung)
Date: Thu Mar 10 12:53:32 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <16944.39908.496053.735061@despot.non.net>
References: <4635.172.23.0.3.1110475154.squirrel@callisto.ornl.gov>
	<16944.34332.888446.499210@despot.non.net>
	<1592.172.23.0.3.1110478897.squirrel@callisto.ornl.gov>
	<16944.39908.496053.735061@despot.non.net>
Message-ID: <3894.172.23.0.3.1110487997.squirrel@callisto.ornl.gov>

John D. Mitchell said:
>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
>>>>>>> John D. Mitchell said:
>>>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
> [...]
>
>>> Add the handling of the recursive exprList directly into
>>> exprList. E.g.:
>
>>> exprList : '{' ( exprListOrStmt )* '}' ;
>
>>> exprListOrStmt : exprList | expr ';' ;
>
>> Perhaps I'm confused.  Here as you have expr ';', that means that an
>> expression that ends with an exprList (but isn't one directly), like the
>> 'if' case, can have a ';' following it - which is exactly what I'm
>> trying
>> to avoid requiring.
>
> Read my grammar fragment again. The first alternative of exprListOrStmt is
> a recursive call to exprList.  That will match the nested exprLists.
>
> What I didn't do was make the semi-colon optional: no semi after exprList
> blocks but a semi is require after an expr.

John,
I think you misunderstood the problem (or I still misunderstand you).
Your fragment above didn't make rule expr explicit, but if I add it in
we have something like:

expr:  ruleA
      | 'if' expr 'then' expr
      | ...
ruleA: ruleB ( ('+'|'-') expr )?
ruleB ...
...
ruleZ : exprList | number | ...
exprList: : '{' ( exprListOrStmt )* '}' ;
exprListOrStmt : ('{')=>exprList | expr ';' ;

Firstly, I added the ('{')=> syntactic predicate to
eliminate the ambiguity when it starts with an exprList.

Secondly, and importantly, expr won't match:

"{if {a>0} then {f();g();} x();}", will it? (or am I going blind?)

This is what I'm trying to solve. (note the absence of the ';'
before the x. "{if {a>0} then {f();g();}; x();}" should be
invalid syntax).


If I promote the exprListOrStmt rule to be the root of
the grammar and replace some of the expr references
to exprListOrStmt instead, I still think we've trouble.
i.e.

exprListOrStmt : ('{')=>exprList | expr ';' ;
exprList: : '{' ( exprListOrStmt )* '}' ;
expr:  ruleA
      | 'if' exprListOrStmt 'then' exprListOrStmt
      | ...
ruleA: ruleB ( ('+'|'-') expr)?
ruleB ...
...
ruleZ : exprList | number | ...

This can't match "1+{2;};" as an exprListOrStmt/expr.
If we changed RuleA to
ruleA: ruleB ( ('+'|'-') exprListOrStmt )?
when it would, but it wouldn't match "1+2+3;" then
(but would match "1+2+3;;;")

Am I going crazy?


> Check out e.g., the C or Java grammars for examples of how the various
> parts of an expr hang together.

Both C & Java make the distinction between statements and expressions,
which makes the problem simple. You can't write f({g(),h();}()) in Java.
(g is called, h is called & returns a function, which is called and its
return value passed to f)

Thanks again,
-David.

From johnm-antlr at non.net  Thu Mar 10 14:34:35 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Thu Mar 10 14:34:17 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <3894.172.23.0.3.1110487997.squirrel@callisto.ornl.gov>
References: <4635.172.23.0.3.1110475154.squirrel@callisto.ornl.gov>
	<16944.34332.888446.499210@despot.non.net>
	<1592.172.23.0.3.1110478897.squirrel@callisto.ornl.gov>
	<16944.39908.496053.735061@despot.non.net>
	<3894.172.23.0.3.1110487997.squirrel@callisto.ornl.gov>
Message-ID: <16944.52091.689061.339703@despot.non.net>

>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
>>>>>> John D. Mitchell said:
>>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
[...]

> John, I think you misunderstood the problem (or I still misunderstand
> you).  Your fragment above didn't make rule expr explicit, but if I add
> it in we have something like:

> expr: ruleA | 'if' expr 'then' expr | ...  ruleA: ruleB ( ('+'|'-') expr
> )?  ruleB ...  ...  ruleZ : exprList | number | ...  exprList: : '{' (
> exprListOrStmt )* '}' ; exprListOrStmt : ('{')=>exprList | expr ';' ;

Note that since you called it an exprList, I've presumed that the value of
an exprList is the value of the last expression (that's pretty
standard). In that case, e.g., 5 + {a(); b + g()} does actually make sense.
If that's not your intent then you need to figure out a difference between
e.g., statements and expressions for your language.

> Firstly, I added the ('{')=> syntactic predicate to eliminate the
> ambiguity when it starts with an exprList.

> Secondly, and importantly, expr won't match:

> "{if {a>0} then {f();g();} x();}", will it? (or am I going blind?)

Of course it will:

expr will match exprList.

exprList will match expr will match if followed by an expr matching an
exprList followed by then followed by an expr matching an exprList
containing two exprs matching a list of function call expressions; followed
by a function call expression.


> This is what I'm trying to solve. (note the absence of the ';' before the
> x. "{if {a>0} then {f();g();}; x();}" should be invalid syntax).

That's exactly what my fragment supports.  As noted, it forbids the semi
colon after the exprList (unless, of course, you allow empty statements
:-).

I don't know the rest of your grammar/language so I can't speak
specifically about what other wacky things you're doing and how this
interacts.


> If I promote the exprListOrStmt rule to be the root of the grammar and
> replace some of the expr references to exprListOrStmt instead, I still
> think we've trouble.  i.e.

You keep trying to make things more complicated. :-(


>> Check out e.g., the C or Java grammars for examples of how the various
>> parts of an expr hang together.

> Both C & Java make the distinction between statements and expressions,
> which makes the problem simple. You can't write f({g(),h();}()) in Java.
> (g is called, h is called & returns a function, which is called and its
> return value passed to f)

Indeed, and now you can see why such a distinction is useful. :-)

Take care,
	John
From cyberlync at gmail.com  Thu Mar 10 14:52:16 2005
From: cyberlync at gmail.com (Eric Merritt)
Date: Thu Mar 10 14:52:19 2005
Subject: [antlr-interest] A little problem with DOT in numbers and as line
	terminators.
Message-ID: <f69c840c0503101452bff8ed5@mail.gmail.com>

I am using a dot as both a decimal separator in numbers and a
statement terminator. I run into a problem when a number is at the end
of a statement. For example

 origin := 0 @ 0.

Gives me huge problems because the NUMBER rule consumes the '.' and
automatically expects another digit. When it doesn't find one it dies
because it doesn't find the expected digit. What I need to to do is
check the character after the '.' to see if it is a number. If a
number follows it should continue to consume normally. If not it
should unconsume the '.' and terminate the number rule. That would
allow the '.' to be consumed by the DOT rule and form the expected
statement terminator. Of course, I will still have problems with

 origin := 0 @ 0.
 0 + 33.

but I will cross that bridge when I come to it.

I played around with semantic predicates and these will allow me to
look ahead, but these will only allow the rule to continue or an
exception to be thrown. Throwing an exception isn't the right
solution. Following is the number rule, I will gladly provide the
entire grammar if there is a need.




// a numeric literal
NUMBER
  : (DIGIT DIGIT 'r')? (DIGIT)+ ('.' (DIGIT)+ EXPONENT)?
  ;

protected 
DIGIT
  : ('0'..'9')
  ;

protected
EXPONENT
   :  ('e'|'E') ('+'|'-')? ('0'..'9')+
   ;




-- 
I'm a programmer, I don't have to spell correctly; I just have to
spell consistently
From nbsherid at secsme.org.au  Thu Mar 10 16:03:37 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Thu Mar 10 16:03:23 2005
Subject: [antlr-interest] A little problem with DOT in numbers and as
	lineterminators.
In-Reply-To: <f69c840c0503101452bff8ed5@mail.gmail.com>
Message-ID: <000f01c525cd$c65304a0$0500a8c0@nigel>




> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Eric Merritt
> Sent: Friday, 11 March 2005 9:52 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] A little problem with DOT in numbers and as
> lineterminators.
> 
> I am using a dot as both a decimal separator in numbers and a
> statement terminator. I run into a problem when a number is at the end
> of a statement. For example
> 
>  origin := 0 @ 0.
> 
> Gives me huge problems because the NUMBER rule consumes the '.' and
> automatically expects another digit. When it doesn't find one it dies
> because it doesn't find the expected digit. What I need to to do is
> check the character after the '.' to see if it is a number. If a
> number follows it should continue to consume normally. If not it
> should unconsume the '.' and terminate the number rule. That would
> allow the '.' to be consumed by the DOT rule and form the expected
> statement terminator. Of course, I will still have problems with
> 

<snip>

> 
> // a numeric literal
> NUMBER
>   : (DIGIT DIGIT 'r')? (DIGIT)+ ('.' (DIGIT)+ EXPONENT)?
>   ;
> 

Is k>=2 or k=1? It will always try and consume the next '.' if k=1 since it
can't determine that a DIGIT always follows.

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435

From cyberlync at gmail.com  Thu Mar 10 16:38:23 2005
From: cyberlync at gmail.com (Eric Merritt)
Date: Thu Mar 10 16:38:26 2005
Subject: [antlr-interest] A little problem with DOT in numbers and as
	lineterminators.
In-Reply-To: <000f01c525cd$c65304a0$0500a8c0@nigel>
References: <f69c840c0503101452bff8ed5@mail.gmail.com>
	<000f01c525cd$c65304a0$0500a8c0@nigel>
Message-ID: <f69c840c0503101638c4315ac@mail.gmail.com>

 Actually k=3 for various other reasons. It should have enough look
ahead to tell the difference, but looking at the generated source it
doesn't even attempt to look ahead before consuming the '.'


> 
> Is k>=2 or k=1? It will always try and consume the next '.' if k=1 since it
> can't determine that a DIGIT always follows.
> 
> Nigel
> 
> --
> Nigel Sheridan-Smith
> PhD research student
> 
> Faculty of Engineering
> University of Technology, Sydney
> Phone: 02 9514 7946
> Fax: 02 9514 2435
> 
> 


-- 
I'm a programmer, I don't have to spell correctly; I just have to
spell consistently
From sk at z.pl  Fri Mar 11 03:28:48 2005
From: sk at z.pl (Sebastian Kaliszewski)
Date: Fri Mar 11 03:23:23 2005
Subject: [antlr-interest] A little problem with DOT in numbers and as line
	terminators.
In-Reply-To: <f69c840c0503101452bff8ed5@mail.gmail.com>
References: <f69c840c0503101452bff8ed5@mail.gmail.com>
Message-ID: <200503111228.48712.sk@z.pl>

On Thursday 10 March 2005 23:52, Eric Merritt wrote:
> I am using a dot as both a decimal separator in numbers and a
> statement terminator. I run into a problem when a number is at the end
> of a statement. For example
>
>  origin := 0 @ 0.
>
> Gives me huge problems because the NUMBER rule consumes the '.' and
> automatically expects another digit. When it doesn't find one it dies
> because it doesn't find the expected digit. What I need to to do is
> check the character after the '.' to see if it is a number. If a
> number follows it should continue to consume normally. If not it
> should unconsume the '.' and terminate the number rule. That would
> allow the '.' to be consumed by the DOT rule and form the expected
> statement terminator. Of course, I will still have problems with
>
>  origin := 0 @ 0.
>  0 + 33.
>
> but I will cross that bridge when I come to it.


But it possible that it's the cause of the problem. 

>
> I played around with semantic predicates and these will allow me to
> look ahead, but these will only allow the rule to continue or an
> exception to be thrown. Throwing an exception isn't the right
> solution.

But di you try syntactic predicate? i.e. ('.' DIGIT)=>

> Following is the number rule, I will gladly provide the
> entire grammar if there is a need.
>
>
> // a numeric literal
> NUMBER
>
>   : (DIGIT DIGIT 'r')? (DIGIT)+ ('.' (DIGIT)+ EXPONENT)?
>   ;
>

Did you try:
NUMBER
   : (DIGIT DIGIT 'r')? (DIGIT)+ (('.' DIGIT)=> ('.' (DIGIT)+ EXPONENT))?


rgds
-- 
Sebastian Kaliszewski
From Sarandos.Steve at PBGC.GOV  Fri Mar 11 05:15:56 2005
From: Sarandos.Steve at PBGC.GOV (Sarandos Steve)
Date: Fri Mar 11 05:16:03 2005
Subject: [####] [antlr-interest] C# port of StringTemplate : small bug and
	possible    fix
Message-ID: <5363E6266D206F49BE6BEBCD7408EA880B3721E9@hqw0prod1vcs08.prod.ent.pbgc.gov>

Thanks.  I'll check into this and post a fix on antlr.org.

<<BTW out of curiosity, how is the C# port produced ??
Is  it a manual port or a fully automatic process or a
mix (automatic + corrections)?>>

It's a combination.  I tried to automate it as much as possible using
the Java-to-C# conversion tools provided by Microsoft.  The tools get it
about 90% there and the rest requires some manual intervention.

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Gregory Sidier
Sent: Thursday, March 10, 2005 8:11 AM
To: antlr-interest@antlr.org
Subject: [####] [antlr-interest] C# port of StringTemplate : small bug
and possible fix


Hi,

The C# port of StringTemplate produces error output
when the "separator" construct is used. 

Apparently the faulty code is in ASTExpr.cs[line 442]
and NoIndentWriter.cs[line 34] also needs a  fix.

At these two places, the references to
System.IO.StreamWriter should be changed to System.IO.TextWriter.

I haven't checked if this problem occurs in the java
version.

Perhaps a patch was already issued, but i couldn't
find one.

BTW out of curiosity, how is the C# port produced ??
Is  it a manual port or a fully automatic process or a
mix (automatic + corrections)?

Thanks.


		
__________________________________ 
Do you Yahoo!? 
Yahoo! Small Business - Try our new resources site!
http://smallbusiness.yahoo.com/resources/ 








From jungdl at ornl.gov  Fri Mar 11 05:33:18 2005
From: jungdl at ornl.gov (David Jung)
Date: Fri Mar 11 05:33:42 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
Message-ID: <2633.172.23.0.3.1110547998.squirrel@callisto.ornl.gov>

John D. Mitchell said:
>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
>>>>>>> John D. Mitchell said:
>>>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
> [...]
>
[...]
>> expr: ruleA | 'if' expr 'then' expr | ...  ruleA: ruleB ( ('+'|'-') expr
>> )?  ruleB ...  ...  ruleZ : exprList | number | ...  exprList: : '{' (
>> exprListOrStmt )* '}' ; exprListOrStmt : ('{')=>exprList | expr ';' ;
>
> Note that since you called it an exprList, I've presumed that the value of
> an exprList is the value of the last expression (that's pretty
> standard). In that case, e.g., 5 + {a(); b + g()} does actually make
> sense.
yes. That is the intention.  A program in an expr, so are namespaces,
classes etc. etc.

[...]
>> Secondly, and importantly, expr won't match:
>
>> "{if {a>0} then {f();g();} x();}", will it? (or am I going blind?)
>
> Of course it will:
>
> expr will match exprList.
>
> exprList will match expr will match if followed by an expr matching an
> exprList followed by then followed by an expr matching an exprList
> containing two exprs matching a list of function call expressions;
> followed
> by a function call expression.
>

I still don't get it.  It looks like your exprListOrStmt *requires*
a ';' to follow an expr.  So, if the above entire expression is
an exprList containing two exprs (first is 'if'... and second is x();),
why isn't a ';' required to follow the 'if' expr?


>
>> This is what I'm trying to solve. (note the absence of the ';' before
>> the
>> x. "{if {a>0} then {f();g();}; x();}" should be invalid syntax).
>
> That's exactly what my fragment supports.  As noted, it forbids the semi
> colon after the exprList (unless, of course, you allow empty statements
> :-).

That fragment doesn't contain a ';' after an exprList.  The ';'
before the x(); belongs to the 'if' expr, not the sub exprList following
the 'then'.

[...]
> Indeed, and now you can see why such a distinction is useful. :-)
Yes.  I may have to go that route after all, but I don't want
to cripple the language just to make writing the parser easier.

Cheers,
-David.

From atripp at comcast.net  Fri Mar 11 07:23:54 2005
From: atripp at comcast.net (Andy Tripp)
Date: Fri Mar 11 07:23:59 2005
Subject: [antlr-interest] Re: Translating PASCAL (or C) into JAVA
Message-ID: <4231B80A.30604@comcast.net>

See http://www.jazillian.com for a tool that translates C (but not
Pascal, C++, or anything else) to Java. This tool uses
ANTLR.

>Every get a response on this one?
>
>--------------------====================-------------------
>
>Hello all,
>
>I'm new to the mailing list and I'm 'playing' with ANTLR since a few 
>days. The ideas behind ANTLR are magnificant and I find it a very 
>intelligent system, a real contribution to Computer Science.
>
>Now I have a simple question.
>
>I must find a system to translate Pascal files into JAVA. (can be C 
>into JAVA aswell)
>Can that be done with ANTLR?
>Is there a quick solution to do that (perhaps starting from the 
>Pascal example?)
>
>I have testet the Pascal grammer (antlr-2.7.1\java\examples\pascal) 
>and the GNU C parser from the website.
>
>ANTLR produces me the JAVA-files PascalLexer.java PascalParser.java 
>and PascalTokenTypes.java
>and I can build these together and test it with the example P_0_1.pas
>I also tested it with the grammer from Sinan (message 2398 Re: Ter, 
>Would you mind looking at ....) which builds me an AST.
>
>My problem is that I want to translate this P_0_1.pas into JAVA code!
>
>Is that possible?
>


From atripp at comcast.net  Fri Mar 11 07:47:41 2005
From: atripp at comcast.net (Andy Tripp)
Date: Fri Mar 11 07:47:46 2005
Subject: [antlr-interest] pretty printer
Message-ID: <4231BD9D.7010809@comcast.net>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050311/76d97b11/attachment.html
From johnm-antlr at non.net  Fri Mar 11 08:53:36 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Fri Mar 11 08:53:17 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <2633.172.23.0.3.1110547998.squirrel@callisto.ornl.gov>
References: <2633.172.23.0.3.1110547998.squirrel@callisto.ornl.gov>
Message-ID: <16945.52496.37623.486246@despot.non.net>

>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
> John D. Mitchell said:
>>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
[...]

> yes. That is the intention.  A program in an expr, so are namespaces,
> classes etc. etc.

Interesting.

Well, if you're going that far, why not go whole hog to e.g., Lisp or even
a pure functional language?  You'll get a much cleaner, more consistent,
and (mostly likely) a more powerful solution.


[...]
>>> Secondly, and importantly, expr won't match:

>>> "{if {a>0} then {f();g();} x();}", will it? (or am I going blind?)

>> Of course it will:

>> expr will match exprList.

>> exprList will match expr will match if followed by an expr matching an
>> exprList followed by then followed by an expr matching an exprList
>> containing two exprs matching a list of function call expressions;
>> followed by a function call expression.

> I still don't get it.  It looks like your exprListOrStmt *requires* a ';'
> to follow an expr.  So, if the above entire expression is an exprList
> containing two exprs (first is 'if'... and second is x();), why isn't a
> ';' required to follow the 'if' expr?

You're (mis-)reading the wrong part.  The *FIRST* alternative in
exprListOrStmt matches the *nested* exprList's.  That's the whole point
(and why that's the first alternative and the statement is the second
alternative -- remember that ANTLR does top-down (aka predictive) parsers).

I suggest that you write a small, simple grammar that has this and turn on
the tracing and run it over some input to see it in action.

Take care,
	John
From ric.klaren at gmail.com  Fri Mar 11 09:18:03 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Fri Mar 11 09:18:01 2005
Subject: [antlr-interest] Advanced questions and proposals
In-Reply-To: <010e01c5257c$7547cf60$8cc79553@marlboro>
References: <010e01c5257c$7547cf60$8cc79553@marlboro>
Message-ID: <4231D2CB.60106@gmail.com>

Alexey Demakov wrote:
> I'm trying to improve my parser (and ANTLR skills :) ) and have the following questions:
> 
> 1. How to suppress warning for "optional" token in lexer?

In 2.7 you're probably out of luck with respect to that. I by far gave 
up on getting warning free things with antlr. I don't like turning 
warnings off anyway, in case I foul up something lateron and it gets 
eaten by the wrong warning surpressor. Warnings in a grammar are seldom 
completely local. And turning the warning off locally may also eat a 
more global warning if that makes sense ;)

> 2. Text of EOF token
> 
> When ANTLR (or generated parser) reports about unexpected end of file,
> error message looks like: 
> 
> a.g:2:1: expecting ID, found 'null'
> 
> I prefer to see something more informative instead of 'null'.
> I've found workaround for that,
> but propose to change default behaviour in future versions.

Is this parser or lexer? I'm kindoff surprised at this at least the null 
doesn't ring a bell my parser/lexers usually say EOF. It might be 
something triggered by a specific construct rule though.

> 3. Multiple error messages about unexpected EOF in parser.
> 
> When EOF is found in some deep parser rule, ANTLR generates syntax error messages
> for each exception handler (rule) on stack. I propose to process this case
> separately and, for example, suppress all error messages after the first one
> when EOF is reached.

This again does not really ring a direct bell with me. But there's many 
ways to have error handlers and such.. A custom errorhandler that does 
something specific for an EOF could be a first workaround.

> 4. Error handling - extend default error handler
> 
> When I specify my own error handler, ANTLR doesn't generate default one.
> But what if I process additional exception types and want use default handler
> for RecognitionException? I propose that 
> options { defaultErrorHandler=true; }
> turn on default error handler generation in this case.

How about the ordering of the default one and your specific ones? 
Depending on the place and your custom exception hierarchy the one might 
eat the exception for the other.

> 5. How to use follow set in user defined exception handlers?

$FOLLOW
$FIRST
$FOLLOW(rulename)
$FIRST(rulename)

Expand to the bitsets names you can make a copy and modify the bitset in 
the error handler I do sometimes to kick a specific token out to tweak 
the consumeUntil to be a bit more sensible.

Cheers,

Ric
From parrt at cs.usfca.edu  Fri Mar 11 09:43:59 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Mar 11 09:44:02 2005
Subject: [####] [antlr-interest] C# port of StringTemplate : small bug and
	possible fix
In-Reply-To: <5363E6266D206F49BE6BEBCD7408EA880B3721E9@hqw0prod1vcs08.prod.ent.pbgc.gov>
References: <5363E6266D206F49BE6BEBCD7408EA880B3721E9@hqw0prod1vcs08.prod.ent.pbgc.gov>
Message-ID: <2658ECDE-9255-11D9-8673-000393BB647E@cs.usfca.edu>

Howdy.  Michael Jordan and crew are supposedly building a C# port from 
scratch for 2.1.

Terence
On Mar 11, 2005, at 5:15 AM, Sarandos Steve wrote:

> Thanks.  I'll check into this and post a fix on antlr.org.
>
> <<BTW out of curiosity, how is the C# port produced ??
> Is  it a manual port or a fully automatic process or a
> mix (automatic + corrections)?>>
>
> It's a combination.  I tried to automate it as much as possible using
> the Java-to-C# conversion tools provided by Microsoft.  The tools get 
> it
> about 90% there and the rest requires some manual intervention.
>
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Gregory Sidier
> Sent: Thursday, March 10, 2005 8:11 AM
> To: antlr-interest@antlr.org
> Subject: [####] [antlr-interest] C# port of StringTemplate : small bug
> and possible fix
>
>
> Hi,
>
> The C# port of StringTemplate produces error output
> when the "separator" construct is used.
>
> Apparently the faulty code is in ASTExpr.cs[line 442]
> and NoIndentWriter.cs[line 34] also needs a  fix.
>
> At these two places, the references to
> System.IO.StreamWriter should be changed to System.IO.TextWriter.
>
> I haven't checked if this problem occurs in the java
> version.
>
> Perhaps a patch was already issued, but i couldn't
> find one.
>
> BTW out of curiosity, how is the C# port produced ??
> Is  it a manual port or a fully automatic process or a
> mix (automatic + corrections)?
>
> Thanks.
>
>
> 		
> __________________________________
> Do you Yahoo!?
> Yahoo! Small Business - Try our new resources site!
> http://smallbusiness.yahoo.com/resources/
>
>
>
>
>
>
>
>



From parrt at cs.usfca.edu  Fri Mar 11 09:45:50 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Mar 11 09:45:54 2005
Subject: [antlr-interest] pretty printer
In-Reply-To: <4231BD9D.7010809@comcast.net>
References: <4231BD9D.7010809@comcast.net>
Message-ID: <68822C18-9255-11D9-8673-000393BB647E@cs.usfca.edu>

You folks might also check my articles on antlr.org about preserving 
whitespace and token order etc...

Ter



From cyberlync at gmail.com  Fri Mar 11 10:57:07 2005
From: cyberlync at gmail.com (Eric Merritt)
Date: Fri Mar 11 10:57:13 2005
Subject: [antlr-interest] A little problem with DOT in numbers and as line
	terminators.
In-Reply-To: <200503111228.48712.sk@z.pl>
References: <f69c840c0503101452bff8ed5@mail.gmail.com>
	<200503111228.48712.sk@z.pl>
Message-ID: <f69c840c050311105767fef687@mail.gmail.com>

> But di you try syntactic predicate? i.e. ('.' DIGIT)=>

I did, but I didn't quite use it right. The fact that your solution
resolved my problem proves that.

> 
> Did you try:
> NUMBER
>    : (DIGIT DIGIT 'r')? (DIGIT)+ (('.' DIGIT)=> ('.' (DIGIT)+ EXPONENT))?

No and this solved my problem. Thanks a million.
 
> rgds
> --
> Sebastian Kaliszewski
> 


-- 
I'm a programmer, I don't have to spell correctly; I just have to
spell consistently
From pincombe at gmail.com  Fri Mar 11 12:21:13 2005
From: pincombe at gmail.com (Keith Pincombe)
Date: Fri Mar 11 12:21:17 2005
Subject: [antlr-interest] MSVC++ 6.0 problems
Message-ID: <a86d1c40050311122177930514@mail.gmail.com>

Hi,

I've never sent an email to a mailing list before so please forgive me
if this goes wrong.

I am working on a translator and ANTLR will suit my purposes perfectly
since i have already found the grammar file i require, the problem is
the grammer file requires the use of the C++ version of ANTLR. I
realise i can just use the pre-compilied version of ANTLR to create
the code from the grammar but i am having difficulties compiling the
code made from doing that. I have made sure to include
<installdir>antlr/lib/cpp

I am using Mircosfot Visual C++ 6.0 with service pack 5 installed

I read the readme file which says that to compile the code generated i
must first create a win32 static link library with the files in
<installpath>antlr/lib/cpp/src but when i try to build this i get 6
errors and 8 warnings

the errors are as follows

d:\antlr-2.7.5\lib\cpp\antlr\tokenstreamrewriteengine.hpp(82) : error
C2252: 'MIN_TOKEN_INDEX' : pure specifier can only be specified for
functions
d:\antlr-2.7.5\lib\cpp\antlr\tokenstreamrewriteengine.hpp(84) : error
C2258: illegal pure syntax, must be '= 0'
d:\antlr-2.7.5\lib\cpp\antlr\tokenstreamrewriteengine.hpp(84) : error
C2252: 'PROGRAM_INIT_SIZE' : pure specifier can only be specified for
functions
d:\antlr-2.7.5\lib\cpp\src\tokenstreamrewriteengine.cpp(44) : error
C2065: 'MIN_TOKEN_INDEX' : undeclared identifier
d:\antlr-2.7.5\lib\cpp\src\tokenstreamrewriteengine.cpp(136) : error
C2039: 'min' : is not a member of 'std'
d:\antlr-2.7.5\lib\cpp\src\tokenstreamrewriteengine.cpp(136) : error
C2065: 'min' : undeclared identifier

i am sure this is an easy problem to solve when you know the answer
but for me this is a nightmare with no solution, please help!!!!!!

Thx in advance
Keith
From jungdl at ornl.gov  Fri Mar 11 12:29:59 2005
From: jungdl at ornl.gov (David Jung)
Date: Fri Mar 11 12:30:16 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <16945.52496.37623.486246@despot.non.net>
References: <2633.172.23.0.3.1110547998.squirrel@callisto.ornl.gov>
	<16945.52496.37623.486246@despot.non.net>
Message-ID: <3879.172.23.0.3.1110572999.squirrel@callisto.ornl.gov>

John D. Mitchell said:
>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
>> John D. Mitchell said:
>>>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
> [...]
>
>> yes. That is the intention.  A program in an expr, so are namespaces,
>> classes etc. etc.
>
> Interesting.
>
> Well, if you're going that far, why not go whole hog to e.g., Lisp or even
> a pure functional language?  You'll get a much cleaner, more consistent,
> and (mostly likely) a more powerful solution.

The language has some functional features already - functions can be
marked 'pure' which disallows side-effects.  That also means that
pure functions with const args can be computed at compile time
and result in further const values.
Types, being first-class values, are just literals assigned to
variables.  If the variables are const then static type checking
can be performed on the type, otherwise the types are dynamic
(but everything is still strongly typed - with the exception
of the 'any' type).
Hence, pure functions that operate on types and are called with
const types in initializers allow something like Java/C++ generics/templates
(strong, static, parameterized types).  If such a function isn't pure
then the type is dynamically generated instead (using java.lang.reflect).

The language is intended to be 'familiar' to Java/C++/Fortran(!) programmers
as well as having a shallow learning, but still full-featured.
(static & dynamic typing, strong & weak typing, OO, procedural,
Design by Contract support, operator overloading, rich builtin
types (matrix, vector, complex, list, map, etc.), good string
processing (regexs) etc.)
But the current interpreter is hidiously slow (and obviously removes
the distinction between static(compile-time)/dynamic(run-time)).
Hence the need to write a compiler.

I've put our little test grammar into ANTLR, see below..

>
>
> [...]
>>>> Secondly, and importantly, expr won't match:
>
>>>> "{if {a>0} then {f();g();} x();}", will it? (or am I going blind?)
>
>>> Of course it will:
>
>>> expr will match exprList.
>
>>> exprList will match expr will match if followed by an expr matching an
>>> exprList followed by then followed by an expr matching an exprList
>>> containing two exprs matching a list of function call expressions;
>>> followed by a function call expression.
>
>> I still don't get it.  It looks like your exprListOrStmt *requires* a
>> ';'
>> to follow an expr.  So, if the above entire expression is an exprList
>> containing two exprs (first is 'if'... and second is x();), why isn't a
>> ';' required to follow the 'if' expr?
>
> You're (mis-)reading the wrong part.  The *FIRST* alternative in
> exprListOrStmt matches the *nested* exprList's.  That's the whole point
> (and why that's the first alternative and the statement is the second
> alternative -- remember that ANTLR does top-down (aka predictive)
> parsers).
>
> I suggest that you write a small, simple grammar that has this and turn on
> the tracing and run it over some input to see it in action.

This is what I give ANTLR:

program : expr EOF ;
expr : ifExpr | addExpr ;
ifExpr : "if" expr "then" expr ;
addExpr : condExpr ( (PLUS | MINUS) expr )? ;
condExpr: callExpr ( GTHAN expr )? ;
callExpr : primaryExpr ( LPAREN RPAREN )? ;
primaryExpr : exprList | constant | IDENT ;
exprList : LCURLY ( exprListOrStmt )* RCURLY ;
exprListOrStmt : (RCURLY)=>exprList | expr SEMI ;

which is a small variation on my previous post, mainly to
make it readable and to use my already defined lexer tokens.

Now, if I try to match "{if {a>0;} then {f();g();} x();}",
like I want (save the extra ';' I has to put after the 0), I get
this:

> program; LA(1)=={, LA(2)==if
  > expr; LA(1)=={, LA(2)==if
   > addExpr; LA(1)=={, LA(2)==if
    > condExpr; LA(1)=={, LA(2)==if
     > callExpr; LA(1)=={, LA(2)==if
      > primaryExpr; LA(1)=={, LA(2)==if
       > exprList; LA(1)=={, LA(2)==if
        > exprListOrStmt; LA(1)==if, LA(2)=={
         > expr; LA(1)==if, LA(2)=={
          > ifExpr; LA(1)==if, LA(2)=={
           > expr; LA(1)=={, LA(2)==a
            > addExpr; LA(1)=={, LA(2)==a
             > condExpr; LA(1)=={, LA(2)==a
              > callExpr; LA(1)=={, LA(2)==a
               > primaryExpr; LA(1)=={, LA(2)==a
                > exprList; LA(1)=={, LA(2)==a
                 > exprListOrStmt; LA(1)==a, LA(2)==>
                  > expr; LA(1)==a, LA(2)==>
                   > addExpr; LA(1)==a, LA(2)==>
                    > condExpr; LA(1)==a, LA(2)==>
                     > callExpr; LA(1)==a, LA(2)==>
                      > primaryExpr; LA(1)==a, LA(2)==>
                      < primaryExpr; LA(1)==>, LA(2)==0
                     < callExpr; LA(1)==>, LA(2)==0
                     > expr; LA(1)==0, LA(2)==;
                      > addExpr; LA(1)==0, LA(2)==;
                       > condExpr; LA(1)==0, LA(2)==;
                        > callExpr; LA(1)==0, LA(2)==;
                         > primaryExpr; LA(1)==0, LA(2)==;
                          > constant; LA(1)==0, LA(2)==;
                          < constant; LA(1)==;, LA(2)==}
                         < primaryExpr; LA(1)==;, LA(2)==}
                        < callExpr; LA(1)==;, LA(2)==}
                       < condExpr; LA(1)==;, LA(2)==}
                      < addExpr; LA(1)==;, LA(2)==}
                     < expr; LA(1)==;, LA(2)==}
                    < condExpr; LA(1)==;, LA(2)==}
                   < addExpr; LA(1)==;, LA(2)==}
                  < expr; LA(1)==;, LA(2)==}
                 < exprListOrStmt; LA(1)==}, LA(2)==then
                < exprList; LA(1)==then, LA(2)=={
               < primaryExpr; LA(1)==then, LA(2)=={
              < callExpr; LA(1)==then, LA(2)=={
             < condExpr; LA(1)==then, LA(2)=={
            < addExpr; LA(1)==then, LA(2)=={
           < expr; LA(1)==then, LA(2)=={
           > expr; LA(1)=={, LA(2)==f
            > addExpr; LA(1)=={, LA(2)==f
             > condExpr; LA(1)=={, LA(2)==f
              > callExpr; LA(1)=={, LA(2)==f
               > primaryExpr; LA(1)=={, LA(2)==f
                > exprList; LA(1)=={, LA(2)==f
                 > exprListOrStmt; LA(1)==f, LA(2)==(
                  > expr; LA(1)==f, LA(2)==(
                   > addExpr; LA(1)==f, LA(2)==(
                    > condExpr; LA(1)==f, LA(2)==(
                     > callExpr; LA(1)==f, LA(2)==(
                      > primaryExpr; LA(1)==f, LA(2)==(
                      < primaryExpr; LA(1)==(, LA(2)==)
                     < callExpr; LA(1)==;, LA(2)==g
                    < condExpr; LA(1)==;, LA(2)==g
                   < addExpr; LA(1)==;, LA(2)==g
                  < expr; LA(1)==;, LA(2)==g
                 < exprListOrStmt; LA(1)==g, LA(2)==(
                 > exprListOrStmt; LA(1)==g, LA(2)==(
                  > expr; LA(1)==g, LA(2)==(
                   > addExpr; LA(1)==g, LA(2)==(
                    > condExpr; LA(1)==g, LA(2)==(
                     > callExpr; LA(1)==g, LA(2)==(
                      > primaryExpr; LA(1)==g, LA(2)==(
                      < primaryExpr; LA(1)==(, LA(2)==)
                     < callExpr; LA(1)==;, LA(2)==}
                    < condExpr; LA(1)==;, LA(2)==}
                   < addExpr; LA(1)==;, LA(2)==}
                  < expr; LA(1)==;, LA(2)==}
                 < exprListOrStmt; LA(1)==}, LA(2)==x
                < exprList; LA(1)==x, LA(2)==(
               < primaryExpr; LA(1)==x, LA(2)==(
              < callExpr; LA(1)==x, LA(2)==(
             < condExpr; LA(1)==x, LA(2)==(
            < addExpr; LA(1)==x, LA(2)==(
           < expr; LA(1)==x, LA(2)==(
          < ifExpr; LA(1)==x, LA(2)==(
         < expr; LA(1)==x, LA(2)==(
        < exprListOrStmt; LA(1)==x, LA(2)==(
       < exprList; LA(1)==x, LA(2)==(
      < primaryExpr; LA(1)==x, LA(2)==(
     < callExpr; LA(1)==x, LA(2)==(
    < condExpr; LA(1)==x, LA(2)==(
   < addExpr; LA(1)==x, LA(2)==(
  < expr; LA(1)==x, LA(2)==(
 < program; LA(1)==x, LA(2)==(
exception during compilation:
tests/test.sg:0:0: unexpected token: x

As I expected.  However, if I add the extra ';' after the exprList
"{if {a>0;} then {f();g();}; x();}"
(which I don't want in the syntax), I get a sucessful parse:

 > program; LA(1)=={, LA(2)==if
  > expr; LA(1)=={, LA(2)==if
   > addExpr; LA(1)=={, LA(2)==if
    > condExpr; LA(1)=={, LA(2)==if
     > callExpr; LA(1)=={, LA(2)==if
      > primaryExpr; LA(1)=={, LA(2)==if
       > exprList; LA(1)=={, LA(2)==if
        > exprListOrStmt; LA(1)==if, LA(2)=={
         > expr; LA(1)==if, LA(2)=={
          > ifExpr; LA(1)==if, LA(2)=={
           > expr; LA(1)=={, LA(2)==a
            > addExpr; LA(1)=={, LA(2)==a
             > condExpr; LA(1)=={, LA(2)==a
              > callExpr; LA(1)=={, LA(2)==a
               > primaryExpr; LA(1)=={, LA(2)==a
                > exprList; LA(1)=={, LA(2)==a
                 > exprListOrStmt; LA(1)==a, LA(2)==>
                  > expr; LA(1)==a, LA(2)==>
                   > addExpr; LA(1)==a, LA(2)==>
                    > condExpr; LA(1)==a, LA(2)==>
                     > callExpr; LA(1)==a, LA(2)==>
                      > primaryExpr; LA(1)==a, LA(2)==>
                      < primaryExpr; LA(1)==>, LA(2)==0
                     < callExpr; LA(1)==>, LA(2)==0
                     > expr; LA(1)==0, LA(2)==;
                      > addExpr; LA(1)==0, LA(2)==;
                       > condExpr; LA(1)==0, LA(2)==;
                        > callExpr; LA(1)==0, LA(2)==;
                         > primaryExpr; LA(1)==0, LA(2)==;
                          > constant; LA(1)==0, LA(2)==;
                          < constant; LA(1)==;, LA(2)==}
                         < primaryExpr; LA(1)==;, LA(2)==}
                        < callExpr; LA(1)==;, LA(2)==}
                       < condExpr; LA(1)==;, LA(2)==}
                      < addExpr; LA(1)==;, LA(2)==}
                     < expr; LA(1)==;, LA(2)==}
                    < condExpr; LA(1)==;, LA(2)==}
                   < addExpr; LA(1)==;, LA(2)==}
                  < expr; LA(1)==;, LA(2)==}
                 < exprListOrStmt; LA(1)==}, LA(2)==then
                < exprList; LA(1)==then, LA(2)=={
               < primaryExpr; LA(1)==then, LA(2)=={
              < callExpr; LA(1)==then, LA(2)=={
             < condExpr; LA(1)==then, LA(2)=={
            < addExpr; LA(1)==then, LA(2)=={
           < expr; LA(1)==then, LA(2)=={
           > expr; LA(1)=={, LA(2)==f
            > addExpr; LA(1)=={, LA(2)==f
             > condExpr; LA(1)=={, LA(2)==f
              > callExpr; LA(1)=={, LA(2)==f
               > primaryExpr; LA(1)=={, LA(2)==f
                > exprList; LA(1)=={, LA(2)==f
                 > exprListOrStmt; LA(1)==f, LA(2)==(
                  > expr; LA(1)==f, LA(2)==(
                   > addExpr; LA(1)==f, LA(2)==(
                    > condExpr; LA(1)==f, LA(2)==(
                     > callExpr; LA(1)==f, LA(2)==(
                      > primaryExpr; LA(1)==f, LA(2)==(
                      < primaryExpr; LA(1)==(, LA(2)==)
                     < callExpr; LA(1)==;, LA(2)==g
                    < condExpr; LA(1)==;, LA(2)==g
                   < addExpr; LA(1)==;, LA(2)==g
                  < expr; LA(1)==;, LA(2)==g
                 < exprListOrStmt; LA(1)==g, LA(2)==(
                 > exprListOrStmt; LA(1)==g, LA(2)==(
                  > expr; LA(1)==g, LA(2)==(
                   > addExpr; LA(1)==g, LA(2)==(
                    > condExpr; LA(1)==g, LA(2)==(
                     > callExpr; LA(1)==g, LA(2)==(
                      > primaryExpr; LA(1)==g, LA(2)==(
                      < primaryExpr; LA(1)==(, LA(2)==)
                     < callExpr; LA(1)==;, LA(2)==}
                    < condExpr; LA(1)==;, LA(2)==}
                   < addExpr; LA(1)==;, LA(2)==}
                  < expr; LA(1)==;, LA(2)==}
                 < exprListOrStmt; LA(1)==}, LA(2)==;
                < exprList; LA(1)==;, LA(2)==x
               < primaryExpr; LA(1)==;, LA(2)==x
              < callExpr; LA(1)==;, LA(2)==x
             < condExpr; LA(1)==;, LA(2)==x
            < addExpr; LA(1)==;, LA(2)==x
           < expr; LA(1)==;, LA(2)==x
          < ifExpr; LA(1)==;, LA(2)==x
         < expr; LA(1)==;, LA(2)==x
        < exprListOrStmt; LA(1)==x, LA(2)==(
        > exprListOrStmt; LA(1)==x, LA(2)==(
         > expr; LA(1)==x, LA(2)==(
          > addExpr; LA(1)==x, LA(2)==(
           > condExpr; LA(1)==x, LA(2)==(
            > callExpr; LA(1)==x, LA(2)==(
             > primaryExpr; LA(1)==x, LA(2)==(
             < primaryExpr; LA(1)==(, LA(2)==)
            < callExpr; LA(1)==;, LA(2)==}
           < condExpr; LA(1)==;, LA(2)==}
          < addExpr; LA(1)==;, LA(2)==}
         < expr; LA(1)==;, LA(2)==}
        < exprListOrStmt; LA(1)==}, LA(2)==null
       < exprList; LA(1)==null, LA(2)==null
      < primaryExpr; LA(1)==null, LA(2)==null
     < callExpr; LA(1)==null, LA(2)==null
    < condExpr; LA(1)==null, LA(2)==null
   < addExpr; LA(1)==null, LA(2)==null
  < expr; LA(1)==null, LA(2)==null
 < program; LA(1)==null, LA(2)==null

Can you see my problem?

-David.


From monty at codetransform.com  Fri Mar 11 09:40:07 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Fri Mar 11 12:40:22 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <3879.172.23.0.3.1110572999.squirrel@callisto.ornl.gov>
References: <2633.172.23.0.3.1110547998.squirrel@callisto.ornl.gov>	<16945.52496.37623.486246@despot.non.net>
	<3879.172.23.0.3.1110572999.squirrel@callisto.ornl.gov>
Message-ID: <4231D7F7.5010304@codetransform.com>

David Jung wrote:

> exprList : LCURLY ( exprListOrStmt )* RCURLY ;
> exprListOrStmt : (RCURLY)=>exprList | expr SEMI ;

Shouldn't that be
exprListOrStmt : (LCURLY)=>exprList | expr SEMI ;

Give that a try and see if it works.

Monty
From johnm-antlr at non.net  Fri Mar 11 12:48:01 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Fri Mar 11 12:47:43 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <3879.172.23.0.3.1110572999.squirrel@callisto.ornl.gov>
References: <2633.172.23.0.3.1110547998.squirrel@callisto.ornl.gov>
	<16945.52496.37623.486246@despot.non.net>
	<3879.172.23.0.3.1110572999.squirrel@callisto.ornl.gov>
Message-ID: <16946.1025.664367.238134@despot.non.net>

>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
[...]

>> Well, if you're going that far, why not go whole hog to e.g., Lisp or
>> even a pure functional language?  You'll get a much cleaner, more
>> consistent, and (mostly likely) a more powerful solution.

> The language has some functional features already - functions can be
> marked 'pure' which disallows side-effects.  That also means that pure
> functions with const args can be computed at compile time and result in
> further const values.  Types, being first-class values, are just literals
> assigned to variables.  If the variables are const then static type
> checking can be performed on the type, otherwise the types are dynamic
> (but everything is still strongly typed - with the exception of the 'any'
> type).  Hence, pure functions that operate on types and are called with
> const types in initializers allow something like Java/C++
> generics/templates (strong, static, parameterized types).  If such a
> function isn't pure then the type is dynamically generated instead (using
> java.lang.reflect).

Ah, the kitchen sink approach.  :-? :-)


[...]

> program : expr EOF ; expr : ifExpr | addExpr ; ifExpr : "if" expr "then"
> expr ; addExpr : condExpr ( (PLUS | MINUS) expr )? ; condExpr: callExpr (
> GTHAN expr )? ; callExpr : primaryExpr ( LPAREN RPAREN )? ; primaryExpr :
> exprList | constant | IDENT ; exprList : LCURLY ( exprListOrStmt )*
> RCURLY ; exprListOrStmt : (RCURLY)=>exprList | expr SEMI ;

The syntactic predicate doesn't make sense -- it should be LCURLY, right?
The use of RCURLY will never match the (well-formed) input and so the
recursive match of exprList is forced to go through the *second*
alternative (which requires the semi at the end).

Have fun,
	John
From jungdl at ornl.gov  Fri Mar 11 13:14:41 2005
From: jungdl at ornl.gov (David Jung)
Date: Fri Mar 11 13:15:10 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
Message-ID: <4013.172.23.0.3.1110575681.squirrel@callisto.ornl.gov>

John D. Mitchell said:
>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
> [...]
>
> Ah, the kitchen sink approach.  :-? :-)
Yep. :)
>
>
> [...]
>
>> program : expr EOF ;
>> expr : ifExpr | addExpr ;
>> ifExpr : "if" expr "then" expr ;
>> addExpr : condExpr ( (PLUS | MINUS) expr )? ;
>> condExpr: callExpr ( GTHAN expr )? ;
>> callExpr : primaryExpr ( LPAREN RPAREN )? ;
>> primaryExpr : exprList | constant | IDENT ;
>> exprList : LCURLY ( exprListOrStmt )* RCURLY ;
>> exprListOrStmt : (RCURLY)=>exprList | expr SEMI ;
>
> The syntactic predicate doesn't make sense -- it should be LCURLY, right?
> The use of RCURLY will never match the (well-formed) input and so the
> recursive match of exprList is forced to go through the *second*
> alternative (which requires the semi at the end).

You're right.  Good spotting.  However, I still get the same
result when changed to LCURLY.
So, one of us is going mad (probably me).
Perhaps I am still missing something - what first and second alternative
are you speaking of?  The whole "{if...}" is an ExprList.  Within
that the "if {a>0;} then {f();g();}" can only be an expr, can't it?
(can't be an exprList as it doesn't start with a '{', hence
it needs a trailing ';').

Here is the output for "{if {a>0;} then {f();g();} x();}" :

 > program; LA(1)=={, LA(2)==if
  > expr; LA(1)=={, LA(2)==if
   > addExpr; LA(1)=={, LA(2)==if
    > condExpr; LA(1)=={, LA(2)==if
     > callExpr; LA(1)=={, LA(2)==if
      > primaryExpr; LA(1)=={, LA(2)==if
       > exprList; LA(1)=={, LA(2)==if
        > exprListOrStmt; LA(1)==if, LA(2)=={
         > expr; LA(1)==if, LA(2)=={
          > ifExpr; LA(1)==if, LA(2)=={
           > expr; LA(1)=={, LA(2)==a
            > addExpr; LA(1)=={, LA(2)==a
             > condExpr; LA(1)=={, LA(2)==a
              > callExpr; LA(1)=={, LA(2)==a
               > primaryExpr; LA(1)=={, LA(2)==a
                > exprList; LA(1)=={, LA(2)==a
                 > exprListOrStmt; LA(1)==a, LA(2)==>
                  > expr; LA(1)==a, LA(2)==>
                   > addExpr; LA(1)==a, LA(2)==>
                    > condExpr; LA(1)==a, LA(2)==>
                     > callExpr; LA(1)==a, LA(2)==>
                      > primaryExpr; LA(1)==a, LA(2)==>
                      < primaryExpr; LA(1)==>, LA(2)==0
                     < callExpr; LA(1)==>, LA(2)==0
                     > expr; LA(1)==0, LA(2)==;
                      > addExpr; LA(1)==0, LA(2)==;
                       > condExpr; LA(1)==0, LA(2)==;
                        > callExpr; LA(1)==0, LA(2)==;
                         > primaryExpr; LA(1)==0, LA(2)==;
                          > constant; LA(1)==0, LA(2)==;
                          < constant; LA(1)==;, LA(2)==}
                         < primaryExpr; LA(1)==;, LA(2)==}
                        < callExpr; LA(1)==;, LA(2)==}
                       < condExpr; LA(1)==;, LA(2)==}
                      < addExpr; LA(1)==;, LA(2)==}
                     < expr; LA(1)==;, LA(2)==}
                    < condExpr; LA(1)==;, LA(2)==}
                   < addExpr; LA(1)==;, LA(2)==}
                  < expr; LA(1)==;, LA(2)==}
                 < exprListOrStmt; LA(1)==}, LA(2)==then
                < exprList; LA(1)==then, LA(2)=={
               < primaryExpr; LA(1)==then, LA(2)=={
              < callExpr; LA(1)==then, LA(2)=={
             < condExpr; LA(1)==then, LA(2)=={
            < addExpr; LA(1)==then, LA(2)=={
           < expr; LA(1)==then, LA(2)=={
           > expr; LA(1)=={, LA(2)==f
            > addExpr; LA(1)=={, LA(2)==f
             > condExpr; LA(1)=={, LA(2)==f
              > callExpr; LA(1)=={, LA(2)==f
               > primaryExpr; LA(1)=={, LA(2)==f
                > exprList; LA(1)=={, LA(2)==f
                 > exprListOrStmt; LA(1)==f, LA(2)==(
                  > expr; LA(1)==f, LA(2)==(
                   > addExpr; LA(1)==f, LA(2)==(
                    > condExpr; LA(1)==f, LA(2)==(
                     > callExpr; LA(1)==f, LA(2)==(
                      > primaryExpr; LA(1)==f, LA(2)==(
                      < primaryExpr; LA(1)==(, LA(2)==)
                     < callExpr; LA(1)==;, LA(2)==g
                    < condExpr; LA(1)==;, LA(2)==g
                   < addExpr; LA(1)==;, LA(2)==g
                  < expr; LA(1)==;, LA(2)==g
                 < exprListOrStmt; LA(1)==g, LA(2)==(
                 > exprListOrStmt; LA(1)==g, LA(2)==(
                  > expr; LA(1)==g, LA(2)==(
                   > addExpr; LA(1)==g, LA(2)==(
                    > condExpr; LA(1)==g, LA(2)==(
                     > callExpr; LA(1)==g, LA(2)==(
                      > primaryExpr; LA(1)==g, LA(2)==(
                      < primaryExpr; LA(1)==(, LA(2)==)
                     < callExpr; LA(1)==;, LA(2)==}
                    < condExpr; LA(1)==;, LA(2)==}
                   < addExpr; LA(1)==;, LA(2)==}
                  < expr; LA(1)==;, LA(2)==}
                 < exprListOrStmt; LA(1)==}, LA(2)==x
                < exprList; LA(1)==x, LA(2)==(
               < primaryExpr; LA(1)==x, LA(2)==(
              < callExpr; LA(1)==x, LA(2)==(
             < condExpr; LA(1)==x, LA(2)==(
            < addExpr; LA(1)==x, LA(2)==(
           < expr; LA(1)==x, LA(2)==(
          < ifExpr; LA(1)==x, LA(2)==(
         < expr; LA(1)==x, LA(2)==(
        < exprListOrStmt; LA(1)==x, LA(2)==(
       < exprList; LA(1)==x, LA(2)==(
      < primaryExpr; LA(1)==x, LA(2)==(
     < callExpr; LA(1)==x, LA(2)==(
    < condExpr; LA(1)==x, LA(2)==(
   < addExpr; LA(1)==x, LA(2)==(
  < expr; LA(1)==x, LA(2)==(
 < program; LA(1)==x, LA(2)==(
exception during compilation:
tests/test.sg:0:0: unexpected token: x

Thanks for sticking with me in sorting this out.
-David.

From johnm-antlr at non.net  Fri Mar 11 16:55:29 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Fri Mar 11 16:55:10 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <4013.172.23.0.3.1110575681.squirrel@callisto.ornl.gov>
References: <4013.172.23.0.3.1110575681.squirrel@callisto.ornl.gov>
Message-ID: <16946.15873.447314.42050@despot.non.net>

>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
>>>>>> John D. Mitchell said:
[...]

> You're right.  Good spotting.  However, I still get the same result when
> changed to LCURLY.  So, one of us is going mad (probably me).  Perhaps I
> am still missing something - what first and second alternative are you
> speaking of?

exprList.

> The whole "{if...}" is an ExprList.  Within that the "if {a>0;} then
> {f();g();}" can only be an expr, can't it?  (can't be an exprList as it
> doesn't start with a '{', hence it needs a trailing ';').

Really look at the trace information and see the flow through the grammar.


> Here is the output for "{if {a>0;} then {f();g();} x();}" :

Ugh.  Notice how your example input is actually malformed...

{if {a>0;} then {f();g();} x();}

I.e., your grammar only allows one expression for the then block but you're
trying to put in a sequence of expressions ("{f();g();} x();").

So, the parser sees the 'x' but it's expecting e.g., the closing RCURLY.

Take care,
	John


From jungdl at ornl.gov  Fri Mar 11 19:56:14 2005
From: jungdl at ornl.gov (David Jung)
Date: Fri Mar 11 19:56:32 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <16946.15873.447314.42050@despot.non.net>
References: <4013.172.23.0.3.1110575681.squirrel@callisto.ornl.gov>
	<16946.15873.447314.42050@despot.non.net>
Message-ID: <1170.172.23.0.3.1110599774.squirrel@callisto.ornl.gov>

John D. Mitchell said:
>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
>>>>>>> John D. Mitchell said:
> [...]
>
>> The whole "{if...}" is an ExprList.  Within that the "if {a>0;} then
>> {f();g();}" can only be an expr, can't it?  (can't be an exprList as it
>> doesn't start with a '{', hence it needs a trailing ';').
>
> Really look at the trace information and see the flow through the grammar.
>
>
>> Here is the output for "{if {a>0;} then {f();g();} x();}" :
>
> Ugh.  Notice how your example input is actually malformed...

My input is not mal-formed with respect to what I want to achieve
(i.e. the original problem I posed), but it is mal-formed
according to the grammar you've proposed.  That is why I
couldn't see how that grammar solves my problem - it doesn't.

>
> {if {a>0;} then {f();g();} x();}

This is what I want for a well-formed input. Actually I'd prefer
"{if {a>0} then {f(); g()} x()}" - but that is the separator/terminator
argument we're ignoring for now.

>
> I.e., your grammar only allows one expression for the then block but
> you're
> trying to put in a sequence of expressions ("{f();g();} x();").

No I'm not.  The expr after then is "{f();g();}".  The "x()" is the
2nd expr in the outer-most exprList.  It may be clearer split into
multiple lines:

{
  if {a>0;} then
    {
      f();
      g();
    }    <--- I don't want to require a ';' here
  x();
}



According to the grammar the "x()" needs to be separated from the
'if' expr by a ';', but I don't
want it to be (as it is redundant - the '}' should be enough to
indicate the separation between an exprList and a following
expr in an exprList)

>
> So, the parser sees the 'x' but it's expecting e.g., the closing RCURLY.

Right - which is why the grammar fails to parse the input it needs to.

Please correct me if I'm still confused, but I think
I see now where we were missing each other's perspective.

Don't suppose you have another idea :))

Thanks for your help.  My problem is clearer in my mind. Alas it
doesn't look like it can be solved with the current versions of ANTLR.
(not without manually hacking the generated parser anyway)

-David.

From johnm-antlr at non.net  Fri Mar 11 20:13:07 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Fri Mar 11 20:12:49 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <1170.172.23.0.3.1110599774.squirrel@callisto.ornl.gov>
References: <4013.172.23.0.3.1110575681.squirrel@callisto.ornl.gov>
	<16946.15873.447314.42050@despot.non.net>
	<1170.172.23.0.3.1110599774.squirrel@callisto.ornl.gov>
Message-ID: <16946.27731.747665.284343@despot.non.net>

>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
>>>>>> John D. Mitchell said:
[...]

>> Ugh.  Notice how your example input is actually malformed...

> My input is not mal-formed with respect to what I want to achieve
> (i.e. the original problem I posed), but it is mal-formed according to
> the grammar you've proposed.  That is why I couldn't see how that grammar
> solves my problem - it doesn't.

Ugh.  Sure it does.  You just didn't allow for multiple expressions at the
top level:

program : expr EOF ;

Follow the grammar and make it say what you mean (and make sure you mean
what you say (through the grammar :-)).

John
From jungdl at ornl.gov  Fri Mar 11 21:01:12 2005
From: jungdl at ornl.gov (David Jung)
Date: Fri Mar 11 21:01:19 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <16946.27731.747665.284343@despot.non.net>
References: <4013.172.23.0.3.1110575681.squirrel@callisto.ornl.gov>
	<16946.15873.447314.42050@despot.non.net>
	<1170.172.23.0.3.1110599774.squirrel@callisto.ornl.gov>
	<16946.27731.747665.284343@despot.non.net>
Message-ID: <1509.172.23.0.3.1110603672.squirrel@callisto.ornl.gov>

John D. Mitchell said:
>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
>>>>>>> John D. Mitchell said:
> [...]
>
>>> Ugh.  Notice how your example input is actually malformed...
>
>> My input is not mal-formed with respect to what I want to achieve
>> (i.e. the original problem I posed), but it is mal-formed according to
>> the grammar you've proposed.  That is why I couldn't see how that
>> grammar
>> solves my problem - it doesn't.
>
> Ugh.  Sure it does.  You just didn't allow for multiple expressions at the
> top level:
>
> program : expr EOF ;
>
> Follow the grammar and make it say what you mean (and make sure you mean
> what you say (through the grammar :-)).

I really don't get it.  Do you mean that changing the 'program' rule
will somehow allow the grammar to parse:
"{if {a>0;} then {f();g();} x();}"?

In English, this program will yield the value of x() unconditionally,
but first will call both f() and then g() only if a > 0.

Perhaps it would be easier if you just replied with the grammar
you think can parse that as:
program
 expr
...
  exprList
    '{'
    exprListOrStmt
     expr  <--- grammar erroneously wants a ';' after this
      ifExpr
       'if'
       expr
...
        exprList
         '{'
         exprListOrStmt
          expr
...
           condExpr
...
            IDENT
            '>'
            expr
...
             '0'
          ';'
       'then'
       expr
...
        exprList
         '{'
         exprListOrStmt
          expr
...
           callExpr
...
            'f'
            '(' ')'
           ';'
          expr
...
           callExpr
...
            'g'
            '(' ')'
           ';'
         '}'
              <--- grammar wants ';' here, but finds 'x'
     expr
...
      callExpr
...
       'x'
       '(' ')'
     ';'
    '}'
 EOF


Your certainly makes me uncertain. :)
-David.

From stuart.dootson at gmail.com  Sat Mar 12 02:54:45 2005
From: stuart.dootson at gmail.com (Stuart Dootson)
Date: Sat Mar 12 02:54:47 2005
Subject: [antlr-interest] MSVC++ 6.0 problems
In-Reply-To: <a86d1c40050311122177930514@mail.gmail.com>
References: <a86d1c40050311122177930514@mail.gmail.com>
Message-ID: <8b56cad405031202542e0bd1ba@mail.gmail.com>

On Fri, 11 Mar 2005 20:21:13 +0000, Keith Pincombe <pincombe@gmail.com> wrote:
> Hi,

Hi Keith

To summarise an e-mail I sent to Ric Klaren (he's the main man behind
the C++ generation) rather than the list (doh!):

> 
> the errors are as follows
> 
> d:\antlr-2.7.5\lib\cpp\antlr\tokenstreamrewriteengine.hpp(82) : error
> C2252: 'MIN_TOKEN_INDEX' : pure specifier can only be specified for
> functions
> d:\antlr-2.7.5\lib\cpp\antlr\tokenstreamrewriteengine.hpp(84) : error
> C2258: illegal pure syntax, must be '= 0'
> d:\antlr-2.7.5\lib\cpp\antlr\tokenstreamrewriteengine.hpp(84) : error
> C2252: 'PROGRAM_INIT_SIZE' : pure specifier can only be specified for
> functions
> d:\antlr-2.7.5\lib\cpp\src\tokenstreamrewriteengine.cpp(44) : error
> C2065: 'MIN_TOKEN_INDEX' : undeclared identifier

MSVC6 doesn't support static const variables being defined in a
header. Instead, you can define the static const in the associated
.cpp file:

e.g. in the TokenStreamRewriteEngine class declaration in
TokenStreamRewriteEngine.hpp, remove the ' = <number>' from static
const declarations, like this:

	static const size_t MIN_TOKEN_INDEX;

and in TokenStreamRewriteEngine.cpp, put the variable definition, like this:

const size_t TokenStreamRewriteEngine::MIN_TOKEN_INDEX = 0;


Alternatively, you can just replace the line in the header by 

enum { MIN_TOKEN_INDEX = 0 };

This has the disadvantage of losing type information, but is simpler to do.

> d:\antlr-2.7.5\lib\cpp\src\tokenstreamrewriteengine.cpp(136) : error
> C2039: 'min' : is not a member of 'std'
> d:\antlr-2.7.5\lib\cpp\src\tokenstreamrewriteengine.cpp(136) : error
> C2065: 'min' : undeclared identifier

This comes about because Microsoft define min and max macros in their
headers. Add these lines at the top of TokenStreamRewriteEngine.cpp

#if defined(_MSC_VER)
#define NO_MINMAX
#define min _cpp_min
#define max _cpp_max
#endif // defined(_MSC_VER)

> i am sure this is an easy problem to solve when you know the answer
> but for me this is a nightmare with no solution, please help!!!!!!
> 
> Thx in advance
> Keith
> 

You're also going to have errors from lines 350, 356, 362 and 370 in
TokenStreamRewriteEngine.hpp because they return a value in void
functions. Remove the return keyword.

Or alternatively, use the attached files...

HTH
Stuart Dootson
-------------- next part --------------
A non-text attachment was scrubbed...
Name: TokenStreamRewriteEngine.cpp
Type: text/x-c
Size: 6312 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050312/97cca45b/TokenStreamRewriteEngine-0001.bin
-------------- next part --------------
#ifndef INC_TokenStreamRewriteEngine_hpp__
#define INC_TokenStreamRewriteEngine_hpp__

/* ANTLR Translator Generator
 * Project led by Terence Parr at http://www.jGuru.com
 * Software rights: http://www.antlr.org/license.html
 */

#include <string>
#include <list>
#include <vector>
#include <map>
#include <utility>
#include <iostream>
#include <iterator>
#include <cassert>
#include <algorithm>

#include <antlr/config.hpp>

#include <antlr/TokenStream.hpp>
#include <antlr/TokenWithIndex.hpp>
#include <antlr/BitSet.hpp>

#ifdef ANTLR_CXX_SUPPORTS_NAMESPACE
namespace antlr {
#endif

/** This token stream tracks the *entire* token stream coming from
 *  a lexer, but does not pass on the whitespace (or whatever else
 *  you want to discard) to the parser.
 *
 *  This class can then be asked for the ith token in the input stream.
 *  Useful for dumping out the input stream exactly after doing some
 *  augmentation or other manipulations.  Tokens are index from 0..n-1
 *
 *  You can insert stuff, replace, and delete chunks.  Note that the
 *  operations are done lazily--only if you convert the buffer to a
 *  String.  This is very efficient because you are not moving data around
 *  all the time.  As the buffer of tokens is converted to strings, the
 *  toString() method(s) check to see if there is an operation at the
 *  current index.  If so, the operation is done and then normal String
 *  rendering continues on the buffer.  This is like having multiple Turing
 *  machine instruction streams (programs) operating on a single input tape. :)
 *
 *  Since the operations are done lazily at toString-time, operations do not
 *  screw up the token index values.  That is, an insert operation at token
 *  index i does not change the index values for tokens i+1..n-1.
 *
 *  Because operations never actually alter the buffer, you may always get
 *  the original token stream back without undoing anything.  Since
 *  the instructions are queued up, you can easily simulate transactions and
 *  roll back any changes if there is an error just by removing instructions.
 *  For example,
 *
 *       TokenStreamRewriteEngine rewriteEngine =
 *          new TokenStreamRewriteEngine(lexer);
 *      JavaRecognizer parser = new JavaRecognizer(rewriteEngine);
 *      ...
 *      rewriteEngine.insertAfter("pass1", t, "foobar");}
 *       rewriteEngine.insertAfter("pass2", u, "start");}
 *       System.out.println(rewriteEngine.toString("pass1"));
 *       System.out.println(rewriteEngine.toString("pass2"));
 *
 *  You can also have multiple "instruction streams" and get multiple
 *  rewrites from a single pass over the input.  Just name the instruction
 *  streams and use that name again when printing the buffer.  This could be
 *  useful for generating a C file and also its header file--all from the
 *  same buffer.
 *
 *  If you don't use named rewrite streams, a "default" stream is used.
 *
 *  Terence Parr, parrt@cs.usfca.edu
 *  University of San Francisco
 *  February 2004
 */
class TokenStreamRewriteEngine : public TokenStream
{
public:
   typedef ANTLR_USE_NAMESPACE(std)vector<antlr::RefTokenWithIndex> token_list;

   enum { MIN_TOKEN_INDEX = 0 };
   static const char* DEFAULT_PROGRAM_NAME;
   enum { PROGRAM_INIT_SIZE = 100 };

   struct tokenToStream {
      tokenToStream( ANTLR_USE_NAMESPACE(std)ostream& o ) : out(o) {}
      template <typename T> void operator() ( const T& t ) {
         out << t->getText();
      }
      ANTLR_USE_NAMESPACE(std)ostream& out;
   };

   class RewriteOperation {
   protected:
      RewriteOperation( size_t idx, const ANTLR_USE_NAMESPACE(std)string& txt )
      : index(idx), text(txt)
      {
      }
   public:
      virtual ~RewriteOperation()
      {
      }
      /** Execute the rewrite operation by possibly adding to the buffer.
       *  Return the index of the next token to operate on.
       */
      virtual size_t execute( ANTLR_USE_NAMESPACE(std)ostream& /* out */ ) {
         return index;
      }
      virtual size_t getIndex() const {
         return index;
      }
      virtual const char* type() const {
         return "RewriteOperation";
      }
   protected:
      size_t index;
      ANTLR_USE_NAMESPACE(std)string text;
   };

   struct executeOperation {
      ANTLR_USE_NAMESPACE(std)ostream& out;
      executeOperation( ANTLR_USE_NAMESPACE(std)ostream& s ) : out(s) {}
      void operator () ( RewriteOperation* t ) {
         t->execute(out);
      }
   };

   /// list of rewrite operations
   typedef ANTLR_USE_NAMESPACE(std)list<RewriteOperation*> operation_list;
   /// map program name to <program counter,program> tuple
   typedef ANTLR_USE_NAMESPACE(std)map<ANTLR_USE_NAMESPACE(std)string,operation_list> program_map;

   class InsertBeforeOp : public RewriteOperation
   {
   public:
      InsertBeforeOp( size_t index, const ANTLR_USE_NAMESPACE(std)string& text )
      : RewriteOperation(index, text)
      {
      }
      virtual ~InsertBeforeOp() {}
      virtual size_t execute( ANTLR_USE_NAMESPACE(std)ostream& out )
      {
         out << text;
         return index;
      }
      virtual const char* type() const {
         return "InsertBeforeOp";
      }
   };

   class ReplaceOp : public RewriteOperation
   {
   public:
      ReplaceOp(size_t from, size_t to, ANTLR_USE_NAMESPACE(std)string text)
      : RewriteOperation(from,text)
      , lastIndex(to)
      {
      }
      virtual ~ReplaceOp() {}
      virtual size_t execute( ANTLR_USE_NAMESPACE(std)ostream& out ) {
         out << text;
         return lastIndex+1;
      }
      virtual const char* type() const {
         return "ReplaceOp";
      }
   protected:
      size_t lastIndex;
   };

   class DeleteOp : public ReplaceOp {
   public:
      DeleteOp(size_t from, size_t to)
      : ReplaceOp(from,to,"")
      {
      }
      virtual const char* type() const {
         return "DeleteOp";
      }
   };

   TokenStreamRewriteEngine(TokenStream& upstream);

   TokenStreamRewriteEngine(TokenStream& upstream, size_t initialSize);

   RefToken nextToken( void );

   void rollback(size_t instructionIndex) {
      rollback(DEFAULT_PROGRAM_NAME, instructionIndex);
   }

   /** Rollback the instruction stream for a program so that
    *  the indicated instruction (via instructionIndex) is no
    *  longer in the stream.  UNTESTED!
    */
   void rollback(const ANTLR_USE_NAMESPACE(std)string& programName,
                 size_t instructionIndex );

   void deleteProgram() {
      deleteProgram(DEFAULT_PROGRAM_NAME);
   }

   /** Reset the program so that no instructions exist */
   void deleteProgram(const ANTLR_USE_NAMESPACE(std)string& programName) {
      rollback(programName, MIN_TOKEN_INDEX);
   }

   void insertAfter( RefTokenWithIndex t,
                     const ANTLR_USE_NAMESPACE(std)string& text )
   {
      insertAfter(DEFAULT_PROGRAM_NAME, t, text);
   }

   void insertAfter(size_t index, const ANTLR_USE_NAMESPACE(std)string& text) {
      insertAfter(DEFAULT_PROGRAM_NAME, index, text);
   }

   void insertAfter( const ANTLR_USE_NAMESPACE(std)string& programName,
                     RefTokenWithIndex t,
                     const ANTLR_USE_NAMESPACE(std)string& text )
   {
      insertAfter(programName, t->getIndex(), text);
   }

   void insertAfter( const ANTLR_USE_NAMESPACE(std)string& programName,
                     size_t index,
                     const ANTLR_USE_NAMESPACE(std)string& text )
   {
      // to insert after, just insert before next index (even if past end)
      insertBefore(programName,index+1, text);
   }

   void insertBefore( RefTokenWithIndex t,
                      const ANTLR_USE_NAMESPACE(std)string& text )
   {
      // std::cout << "insertBefore index " << t->getIndex() << " " << text << std::endl;
      insertBefore(DEFAULT_PROGRAM_NAME, t, text);
   }

   void insertBefore(size_t index, const ANTLR_USE_NAMESPACE(std)string& text) {
      insertBefore(DEFAULT_PROGRAM_NAME, index, text);
   }

   void insertBefore( const ANTLR_USE_NAMESPACE(std)string& programName,
                      RefTokenWithIndex t,
                      const ANTLR_USE_NAMESPACE(std)string& text )
   {
      insertBefore(programName, t->getIndex(), text);
   }

   void insertBefore( const ANTLR_USE_NAMESPACE(std)string& programName,
                      size_t index,
                      const ANTLR_USE_NAMESPACE(std)string& text )
   {
      addToSortedRewriteList(programName, new InsertBeforeOp(index,text));
   }

   void replace(size_t index, const ANTLR_USE_NAMESPACE(std)string& text)
   {
      replace(DEFAULT_PROGRAM_NAME, index, index, text);
   }

   void replace( size_t from, size_t to,
                 const ANTLR_USE_NAMESPACE(std)string& text)
   {
      replace(DEFAULT_PROGRAM_NAME, from, to, text);
   }

   void replace( RefTokenWithIndex indexT,
                 const ANTLR_USE_NAMESPACE(std)string& text )
   {
      replace(DEFAULT_PROGRAM_NAME, indexT->getIndex(), indexT->getIndex(), text);
   }

   void replace( RefTokenWithIndex from,
                 RefTokenWithIndex to,
                 const ANTLR_USE_NAMESPACE(std)string& text )
   {
      replace(DEFAULT_PROGRAM_NAME, from, to, text);
   }

   void replace(const ANTLR_USE_NAMESPACE(std)string& programName,
                size_t from, size_t to,
                const ANTLR_USE_NAMESPACE(std)string& text )
   {
      addToSortedRewriteList(programName,new ReplaceOp(from, to, text));
   }

   void replace( const ANTLR_USE_NAMESPACE(std)string& programName,
                 RefTokenWithIndex from,
                 RefTokenWithIndex to,
                 const ANTLR_USE_NAMESPACE(std)string& text )
   {
      replace(programName,
              from->getIndex(),
              to->getIndex(),
              text);
   }

   void remove(size_t index) {
      remove(DEFAULT_PROGRAM_NAME, index, index);
   }

   void remove(size_t from, size_t to) {
      remove(DEFAULT_PROGRAM_NAME, from, to);
   }

   void remove(RefTokenWithIndex indexT) {
      remove(DEFAULT_PROGRAM_NAME, indexT, indexT);
   }

   void remove(RefTokenWithIndex from, RefTokenWithIndex to) {
      remove(DEFAULT_PROGRAM_NAME, from, to);
   }

   void remove( const ANTLR_USE_NAMESPACE(std)string& programName,
                size_t from, size_t to)
   {
      replace(programName,from,to,"");
   }

   void remove( const ANTLR_USE_NAMESPACE(std)string& programName,
                RefTokenWithIndex from, RefTokenWithIndex to )
   {
      replace(programName,from,to,"");
   }

   void discard(int ttype) {
      discardMask.add(ttype);
   }

   RefToken getToken( size_t i )
   {
      return RefToken(tokens.at(i));
   }

   size_t getTokenStreamSize() const {
      return tokens.size();
   }

   void originalToStream( ANTLR_USE_NAMESPACE(std)ostream& out ) const {
      ANTLR_USE_NAMESPACE(std)for_each( tokens.begin(), tokens.end(), tokenToStream(out) );
   }

   void originalToStream( ANTLR_USE_NAMESPACE(std)ostream& out,
                          size_t start, size_t end ) const;

   void toStream( ANTLR_USE_NAMESPACE(std)ostream& out ) const {
      toStream( out, MIN_TOKEN_INDEX, getTokenStreamSize());
   }

   void toStream( ANTLR_USE_NAMESPACE(std)ostream& out,
                  const ANTLR_USE_NAMESPACE(std)string& programName ) const
   {
      toStream( out, programName, MIN_TOKEN_INDEX, getTokenStreamSize());
   }

   void toStream( ANTLR_USE_NAMESPACE(std)ostream& out,
                  size_t start, size_t end ) const
   {
      toStream(out, DEFAULT_PROGRAM_NAME, start, end);
   }

   void toStream( ANTLR_USE_NAMESPACE(std)ostream& out,
                  const ANTLR_USE_NAMESPACE(std)string& programName,
                  size_t firstToken, size_t lastToken ) const;

   void toDebugStream( ANTLR_USE_NAMESPACE(std)ostream& out ) const {
      toDebugStream( out, MIN_TOKEN_INDEX, getTokenStreamSize());
   }

   void toDebugStream( ANTLR_USE_NAMESPACE(std)ostream& out,
                       size_t start, size_t end ) const;

   size_t getLastRewriteTokenIndex() const {
      return getLastRewriteTokenIndex(DEFAULT_PROGRAM_NAME);
   }

   /** Return the last index for the program named programName
    * return 0 if the program does not exist or the program is empty.
    * (Note this is different from the java implementation that returns -1)
    */
   size_t getLastRewriteTokenIndex(const ANTLR_USE_NAMESPACE(std)string& programName) const {
      program_map::const_iterator rewrites = programs.find(programName);

      if( rewrites == programs.end() )
         return 0;

      const operation_list& prog = rewrites->second;
      if( !prog.empty() )
      {
         operation_list::const_iterator last = prog.end();
         --last;
         return (*last)->getIndex();
      }
      return 0;
   }

protected:
   /** If op.index > lastRewriteTokenIndexes, just add to the end.
    *  Otherwise, do linear */
   void addToSortedRewriteList(RewriteOperation* op) {
      addToSortedRewriteList(DEFAULT_PROGRAM_NAME, op);
   }

   void addToSortedRewriteList( const ANTLR_USE_NAMESPACE(std)string& programName,
                                RewriteOperation* op );

protected:
   /** Who do we suck tokens from? */
   TokenStream& stream;
   /** track index of tokens */
   size_t index;

   /** Track the incoming list of tokens */
   token_list tokens;

   /** You may have multiple, named streams of rewrite operations.
    *  I'm calling these things "programs."
    *  Maps String (name) -> rewrite (List)
    */
   program_map programs;

   /** Which (whitespace) token(s) to throw out */
   BitSet discardMask;
};

#ifdef ANTLR_CXX_SUPPORTS_NAMESPACE
}
#endif

#endif
From johnm-antlr at non.net  Sat Mar 12 10:01:26 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Sat Mar 12 10:01:08 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <1509.172.23.0.3.1110603672.squirrel@callisto.ornl.gov>
References: <4013.172.23.0.3.1110575681.squirrel@callisto.ornl.gov>
	<16946.15873.447314.42050@despot.non.net>
	<1170.172.23.0.3.1110599774.squirrel@callisto.ornl.gov>
	<16946.27731.747665.284343@despot.non.net>
	<1509.172.23.0.3.1110603672.squirrel@callisto.ornl.gov>
Message-ID: <16947.11894.391913.983130@despot.non.net>

>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
[...]

Ugh.  Well, if you want me to fix your wacky grammar/language, I'll have to
start charging you my consulting rate.


Here's a relatively proper language that deals with statements and
expressions with the nesting that you seem to want.

Here's a sample input: {if (a() < 0) then {b; c(); {;} dd();} e; f();} g();

Note very clearly that the blocks do NOT require a semi-colon where as a
bare expression (when used as a statement) does.


<<<<< ExprList.g <<<<<

/*
 * Lex and parse a silly little language showing how to do nesting in a list.
 */

header
{
import java.io.* ;
import antlr.* ;
}

class ExprListParser extends Parser;

options
{
k = 2;
buildAST = false;
}

{
}


program : statementList EOF ;

statementList : ( statement )* ;

statement
        : SEMI
        | block
        | expression SEMI
        | "if" LPAREN expression RPAREN "then" statement
          ( options { warnWhenFollowAmbig = false; } : "else" statement )?
        ;

block : LCURLY statementList RCURLY ;

expression : equalityExpr ;

equalityExpr : relationalExpr ( ( EQUAL | NOT_EQUAL ) relationalExpr )* ;

relationalExpr : postfixExpr ( ( LT | LTE | GT | GTE ) postfixExpr )* ;

postfixExpr : primaryExpr ( postfixSuffix )? ;

primaryExpr
        : ID
        | intConst
        ;

postfixSuffix : ( functionCall )+ ;

functionCall : LPAREN RPAREN ;

protected
intConst : IntLiteral ;



{
import java.io.* ;
import antlr.* ;
}


class ExprListLexer extends Lexer;

options
{
k = 3;
testLiterals = false;
}

{
}

protected
Vocabulary : '\3'..'\377' ;

SEMI : ';' ;

LCURLY : '{' ;
RCURLY : '}' ;
LPAREN : '(' ;
RPAREN : ')' ;

EQUAL       : "==" ;
NOT_EQUAL   : "!=" ;
LTE         : "<=" ;
LT          : "<" ;
GTE         : ">=" ;
GT          : ">" ;

Whitespace
        : ( ( '\003'..'\010'
            | '\t'
            | '\013'
            | '\f'
            | '\016'..'\037'
            | '\177'..'\377'
            | ' ' )
          | "\r\n"        { newline(); }
          | ( '\n' | '\r' )     { newline(); }
          )                     { _ttype = Token.SKIP;  }
        ;

protected
Digit : '0'..'9' ;

IntLiteral : ( Digit )+ ;

ID
options { testLiterals = true; }
        : ( 'a'..'z' | 'A'..'Z' | '_' )
          ( 'a'..'z' | 'A'..'Z' | '_' | '0'..'9' )*
        ;

>>>>> >>>>>


<<<<< ExprListTest.java <<<<<
/*
 * This example shows how to do a nested list inside an expression.
 */

import java.io.* ;

import antlr.* ;

public class ExprListTest
    {
    public static void main (String[] args)
	{
	if (0 >= args.length)
	    {
	    spewLine ("Usage: java ExprListTest file+");
	    }

	for (int argNum = 0; argNum < args.length; argNum++)
	    {
	    try
		{
		DataInputStream input = null;

		String progName = args[argNum];

		if ("--".equals (progName))
		    {
		    input = new DataInputStream (System.in);
		    }
		else
		    {
		    input = new DataInputStream
			( new FileInputStream (progName) );
		    }

		ExprListLexer lexer = new ExprListLexer (input);

		ExprListParser parser = new ExprListParser (lexer);
		
		try
		    {
		    parser.program();
		    }
		catch (TokenStreamException ex)
		    {
		    spewLine ("Unable to read data from '" + progName + "'!",
			      ex);
		    }
		catch (RecognitionException ex)
		    {
		    spewLine ("Unable to parse data from '" + progName + "'!",
			      ex);
		    }
		}
	    catch (Exception ex)
		{
		spewLine ("Unknown exception:", ex);
		}
	    }
	}

    private static void spewLine (String s, Exception ex)
	{
	System.err.println (s);
	ex.printStackTrace();
	System.exit (1);
	}
    
    private static void spewLine (String s)
	{
	System.err.println (s);
	System.exit (1);
	}
    
    }

>>>>> >>>>>

Take care,
	John
From joanpujol at gmail.com  Sat Mar 12 10:41:47 2005
From: joanpujol at gmail.com (Joan Pujol)
Date: Sat Mar 12 10:41:54 2005
Subject: [antlr-interest] Insert tokens and Recovering from an error.
Message-ID: <d2d18a1050312104143386d99@mail.gmail.com>

For my recovery strategy I need to insert some missen tokens to the
parser and then relaunch some rules. And I don't know how to do it.

Here is an example:


rulea: b:ruleb c:rulec d:ruled; 

exception[c] catch NoviableAlt[ex]
{
 My recovery strategy for rulec is:
   consumeUntil TOKEN1,TOKEN2,TOKEN3,TOKEN4

   if(LA(1)==TOKEN1 or LA(1)==TOKEN2)
	relaunch rulec
   if(LA(1)==TOKEN3)
	insert TOKEN1 to the parser and relaunch rulec
   if(LA(1)==TOKEN2)
	insert TOKEN4 to the parser and relaunch rulec
}

where rulec: TOKEN1 rulec1 //rulec1 can start with TOKEN3
	     |TOKEN2 rulec2; //rulec2 can start with TOKEN4

I use this recovery strategy because I create an AST. And the
objective is to always create a correct AST.


I know how to relaunch rulec anc create the AST. The code I use is:

AST previousc=#c;
rulec();
#c=returnAST;
ChangeNode(currentAST,previousc,#c); //Where ChangeNode is an utility
method I made that when found the previousc change it for the #c

Is this the best way to do it?


But when I need to insert a token before launch the rule I don't know
how to do it.
How can I do it? Or any workarround?

A lot of thanks in advance,

-- 
Joan Jes?s Pujol Espinar
From jungdl at ornl.gov  Sat Mar 12 12:52:20 2005
From: jungdl at ornl.gov (David Jung)
Date: Sat Mar 12 12:52:31 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <16947.11894.391913.983130@despot.non.net>
References: <4013.172.23.0.3.1110575681.squirrel@callisto.ornl.gov>
	<16946.15873.447314.42050@despot.non.net>
	<1170.172.23.0.3.1110599774.squirrel@callisto.ornl.gov>
	<16946.27731.747665.284343@despot.non.net>
	<1509.172.23.0.3.1110603672.squirrel@callisto.ornl.gov>
	<16947.11894.391913.983130@despot.non.net>
Message-ID: <4192.172.23.0.3.1110660740.squirrel@callisto.ornl.gov>

John D. Mitchell said:
>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
> [...]
> Here's a relatively proper language that deals with statements and
> expressions with the nesting that you seem to want.

John,

Nice try (& thanks for taking the effort) - but no prize.
The grammar you've given has gone back to making the restrictive
distinction between statements & expressions (ala Java/C++).
That, of course, makes my no-semi-following-blocks requirement
trivial to solve (using the same form as the Java grammar).

>
> Here's a sample input: {if (a() < 0) then {b; c(); {;} dd();} e; f();}
> g();
>

Notice how you've corrupted my input "{if {a>0;} then {f();g();} x();}"
so that you only accept an expression, but not a statement as the
if conditional.
More importantly, statements are not primary in your grammar.
Having the primaryExpr rule include statement would make it closer.

If you can modify your grammar some-how to parse this, then we'd
have a solution:

"{if ({a();}++ < 0) then {b; c(); {;}+1 dd();} e; f();}*2"

(& I might just consider paying for an hour of your time)

or better yet, to include my other issue with ';'s after the last
expr in a block, to parse this:

"{if ({a()}++ < 0) then {b; c(); {}+1 dd()} e; f()}*2"

which is really what I want.

Cheers,
-David.

From darandavis at comcast.net  Sat Mar 12 12:46:15 2005
From: darandavis at comcast.net (Daran Davis)
Date: Sat Mar 12 16:21:32 2005
Subject: [antlr-interest] help writing a grammar class for a statement
Message-ID: <002301c52744$88d09e80$6601a8c0@yeshua>

Hello,
 
I am new to antlr and have a question regarding writing grammar classes.
I have a language which has no line continuation characters and no
statement end characters. For example, the following statement need to
be correctly parsed:
 
Var1 = 2*(3+4)+ (
         6+4)/10
Var2 = Var1/2
 
How can I handle this with antlr?
 
Thanks,
 
DD
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050312/49cd56a7/attachment.html
From johnm-antlr at non.net  Sat Mar 12 18:40:01 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Sat Mar 12 18:39:42 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <4192.172.23.0.3.1110660740.squirrel@callisto.ornl.gov>
References: <4013.172.23.0.3.1110575681.squirrel@callisto.ornl.gov>
	<16946.15873.447314.42050@despot.non.net>
	<1170.172.23.0.3.1110599774.squirrel@callisto.ornl.gov>
	<16946.27731.747665.284343@despot.non.net>
	<1509.172.23.0.3.1110603672.squirrel@callisto.ornl.gov>
	<16947.11894.391913.983130@despot.non.net>
	<4192.172.23.0.3.1110660740.squirrel@callisto.ornl.gov>
Message-ID: <16947.43009.192997.690744@despot.non.net>

>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
[...]

>> Here's a sample input: {if (a() < 0) then {b; c(); {;} dd();} e; f();}
>> g();

> Notice how you've corrupted my input "{if {a>0;} then {f();g();} x();}"
> so that you only accept an expression, but not a statement as the if
> conditional.  More importantly, statements are not primary in your
> grammar.  Having the primaryExpr rule include statement would make it
> closer.

Here's my last take on this for free.  If you want more, contact me
directly and we can work out a consulting agreement.

Change the following in the grammar that I gave previously:

statement
        : SEMI
        | block
        | expression ( SEMI ) ?
        | "if" exprOrBlock "then" statement
          ( options { warnWhenFollowAmbig = false; } : "else" statement )?
        ;

And add this:

exprOrBlock
        : block
        | expression
        ;

Now your wacky "{if {a>0;} then {f();g();} x();}" works just fine.

Geez,
	John
From joanpujol at gmail.com  Sun Mar 13 02:04:37 2005
From: joanpujol at gmail.com (Joan Pujol)
Date: Sun Mar 13 02:04:40 2005
Subject: [antlr-interest] help writing a grammar class for a statement
In-Reply-To: <002301c52744$88d09e80$6601a8c0@yeshua>
References: <002301c52744$88d09e80$6601a8c0@yeshua>
Message-ID: <d2d18a1050313020450edfd72@mail.gmail.com>

Only and idea:

In your example I think that you can use a syntactic predicate when
parsing identifiers in expression. And only consume the identifier if
the next token is not a '='.

Cheers,


On Sat, 12 Mar 2005 12:46:15 -0800, Daran Davis <darandavis@comcast.net> wrote:
>  
>  
> 
> Hello, 
> 
>   
> 
> I am new to antlr and have a question regarding writing grammar classes. I
> have a language which has no line continuation characters and no statement
> end characters. For example, the following statement need to be correctly
> parsed: 
> 
>   
> 
> Var1 = 2*(3+4)+ ( 
> 
>          6+4)/10 
> 
> Var2 = Var1/2 
> 
>   
> 
> How can I handle this with antlr? 
> 
>   
> 
> Thanks, 
> 
>   
> 
> DD 


-- 
Joan Jes?s Pujol Espinar
From prashant.deva at gmail.com  Sun Mar 13 03:19:02 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Sun Mar 13 06:06:17 2005
Subject: [antlr-interest] what does '##' stand for?
Message-ID: <41fed8f805031303195a06559c@mail.gmail.com>

I am not too familiar with tree grammar stuff.
What does '##' stand for inside an action.

For example, what does the following rule do -

grammar
	:	headerDef ( classDef )*  EOF!
		{ ## = #([GRAMMAR,"grammar"], ##) ; }
	;

PRASHANT
From dcaton at shorelinesoftware.com  Sun Mar 13 06:31:15 2005
From: dcaton at shorelinesoftware.com (Don Caton)
Date: Sun Mar 13 06:31:29 2005
Subject: [antlr-interest] what does '##' stand for?
In-Reply-To: <41fed8f805031303195a06559c@mail.gmail.com>
Message-ID: <1110724386.13458@mx9.mysite4now.com>

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Prashant Deva
> Sent: Sunday, March 13, 2005 6:19 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] what does '##' stand for?
> 
> I am not too familiar with tree grammar stuff.
> What does '##' stand for inside an action.
> 
> For example, what does the following rule do -
> 
> grammar
> 	:	headerDef ( classDef )*  EOF!
> 		{ ## = #([GRAMMAR,"grammar"], ##) ; }
> 	;
> 
> PRASHANT
> 

It's shorthand for the tree that the rule returns.  Your example is
equivalent to:

	{ #grammar = #([GRAMMAR,"grammar"], #grammar) ; }

I don't think it's documented anywhere.  It makes actions a bit less verbose
and if you rename the rule, the action won't break.

-- 
Don


From tangfc2001 at yahoo.com  Sat Mar 12 21:16:50 2005
From: tangfc2001 at yahoo.com (FC)
Date: Sun Mar 13 10:03:02 2005
Subject: [antlr-interest] Can ANTLR transform AST  to XML? 
Message-ID: <20050313051651.59232.qmail@web53903.mail.yahoo.com>

Hi,

In my project, I want to use Antlr to parse my Java
source code to generate AST tree. But I want to store
AST in XML so that I can use this XML in my next
module of the project. I wonder if the current Antlr
can provide to tranform AST to XML. 

thanks for your help

Ted




		
__________________________________ 
Do you Yahoo!? 
Yahoo! Small Business - Try our new resources site!
http://smallbusiness.yahoo.com/resources/ 
From johnm-antlr at non.net  Sun Mar 13 10:44:40 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Sun Mar 13 10:44:21 2005
Subject: [antlr-interest] Can ANTLR transform AST  to XML? 
In-Reply-To: <20050313051651.59232.qmail@web53903.mail.yahoo.com>
References: <20050313051651.59232.qmail@web53903.mail.yahoo.com>
Message-ID: <16948.35352.231424.694931@despot.non.net>

>>>>> "FC" == FC  <tangfc2001@yahoo.com> writes:
[...]

> In my project, I want to use Antlr to parse my Java source code to
> generate AST tree. But I want to store AST in XML so that I can use this
> XML in my next module of the project. I wonder if the current Antlr can
> provide to tranform AST to XML.

Sure, just write a tree walker which dumps out the AST into an XML format.

The classic way is to use a syntax-directed approach where you just embed
e.g., print statements as the actions of the tree walker.

If you have more complex ordering/reuse/etc. needs in your output, you
might want to take the approach of using the walker to instantiate
StringTemplates.  Ter wrote an article about this:
http://www.codegeneration.net/tiki-read_article.php?articleId=77

Have fun,
	John
From parrt at cs.usfca.edu  Sun Mar 13 11:13:18 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Mar 13 11:13:21 2005
Subject: [antlr-interest] Can ANTLR transform AST  to XML? 
In-Reply-To: <20050313051651.59232.qmail@web53903.mail.yahoo.com>
References: <20050313051651.59232.qmail@web53903.mail.yahoo.com>
Message-ID: <F549EAC4-93F3-11D9-8673-000393BB647E@cs.usfca.edu>

On Mar 12, 2005, at 9:16 PM, FC wrote:
> Hi,
>
> In my project, I want to use Antlr to parse my Java
> source code to generate AST tree. But I want to store
> AST in XML so that I can use this XML in my next
> module of the project. I wonder if the current Antlr
> can provide to tranform AST to XML.

Thanks to Oliver Zeigermann, there are AST xml serialization methods 
built into the AST classes...search for XML in the api.

Ter



From johnm-antlr at non.net  Sun Mar 13 11:28:38 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Sun Mar 13 11:28:19 2005
Subject: [antlr-interest] Can ANTLR transform AST  to XML? 
In-Reply-To: <F549EAC4-93F3-11D9-8673-000393BB647E@cs.usfca.edu>
References: <20050313051651.59232.qmail@web53903.mail.yahoo.com>
	<F549EAC4-93F3-11D9-8673-000393BB647E@cs.usfca.edu>
Message-ID: <16948.37990.236653.116656@despot.non.net>

>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
[...]

> Thanks to Oliver Zeigermann, there are AST xml serialization methods
> built into the AST classes...search for XML in the api.

Cool. Learn something new everyday.

Thought, that's a straight serialization of the AST to XML and so would be
brittle w.r.t. changes in the structure over time. [TANSTAAFL. :-)].

Thanks,
	John

From parrt at cs.usfca.edu  Sun Mar 13 11:35:15 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Mar 13 11:35:19 2005
Subject: [antlr-interest] Can ANTLR transform AST  to XML? 
In-Reply-To: <16948.37990.236653.116656@despot.non.net>
References: <20050313051651.59232.qmail@web53903.mail.yahoo.com>
	<F549EAC4-93F3-11D9-8673-000393BB647E@cs.usfca.edu>
	<16948.37990.236653.116656@despot.non.net>
Message-ID: <064D5F1C-93F7-11D9-8673-000393BB647E@cs.usfca.edu>


On Mar 13, 2005, at 11:28 AM, John D. Mitchell wrote:

>>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
> [...]
>
>> Thanks to Oliver Zeigermann, there are AST xml serialization methods
>> built into the AST classes...search for XML in the api.
>
> Cool. Learn something new everyday.
>
> Thought, that's a straight serialization of the AST to XML and so 
> would be
> brittle w.r.t. changes in the structure over time. [TANSTAAFL. :-)].

Yep, but usually changes in structure mean you want a different tree; 
mostly ;)

Ter



From tangfc2001 at yahoo.com  Sun Mar 13 23:08:15 2005
From: tangfc2001 at yahoo.com (FC)
Date: Sun Mar 13 23:08:19 2005
Subject: [antlr-interest] Can ANTLR transform AST  to XML? 
In-Reply-To: 6667
Message-ID: <20050314070815.59836.qmail@web53907.mail.yahoo.com>

Hi, 

I am still confused with the problem to transform AST
to XML. Using Antlr I can get AST for Java code, while
serialization to XML is provided in the class of
XMLAST which is a derived class of class CommonAST.
Since base class can not be casted to its sub class,
how can I cast AST to XMLAST?

Ted

--- Terence Parr <parrt@cs.usfca.edu> wrote:
> On Mar 12, 2005, at 9:16 PM, FC wrote:
> > Hi,
> >
> > In my project, I want to use Antlr to parse my
> Java
> > source code to generate AST tree. But I want to
> store
> > AST in XML so that I can use this XML in my next
> > module of the project. I wonder if the current
> Antlr
> > can provide to tranform AST to XML.
> 
> Thanks to Oliver Zeigermann, there are AST xml
> serialization methods 
> built into the AST classes...search for XML in the
> api.
> 
> Ter
> 
> 
> 
> 


		
__________________________________ 
Do you Yahoo!? 
Yahoo! Sports - Sign up for Fantasy Baseball. 
http://baseball.fantasysports.yahoo.com/
From max.andersen at jboss.com  Mon Mar 14 01:44:15 2005
From: max.andersen at jboss.com (Max Rydahl Andersen)
Date: Mon Mar 14 01:47:13 2005
Subject: [antlr-interest] ANTLR and Class.forName()
Message-ID: <003801c5287a$64150ef0$5004a8c0@xam>

Hi,

In Hibernate3 we started using antlr for our HQL parser and it has worked
out great! Made the parser much more extensible.

Still, we've found a major problem in ANTLR with respect to classloading
when running inside e.g. a J2EE container.

The antlr code has about 11 instances of dynamic classloading where
it naively uses Class.forName to load classes. That is "bad" behavior
for a framework that is meant to be portable :(

The solution is to use something like:

public static Class classForName(String name) throws ClassNotFoundException 
{

try {

return Thread.currentThread().getContextClassLoader().loadClass(name);

}

catch (Exception e) {

return Class.forName(name);

}

}

which uses the current context classloader BEFORE trying to use 
Class.forName().

By not using the context classloader you can get into all kind of problems 
in containers

that might be having antlr in their classpath for whatever reason and then 
antlr cant load the classes

which are available in ones j2ee app.

There is the workaround of putting all your jars in the system boot or 
startup path, but that is

a real bad workaround since it affects all jars that is dependent on it.

I can provide a patch for Antlr against the latest release if you want me 
to - should this

just go to this mailinglist of is there issue tracker available somewhere ?



/max



From demakov at ispras.ru  Mon Mar 14 02:09:36 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Mar 14 02:09:39 2005
Subject: [antlr-interest] Advanced questions and proposals
References: <010e01c5257c$7547cf60$8cc79553@marlboro>
	<4231D2CB.60106@gmail.com>
Message-ID: <030801c5287d$ed8a8b30$8cc79553@marlboro>

> > 2. Text of EOF token
> > 
> > When ANTLR (or generated parser) reports about unexpected end of file,
> > error message looks like: 
> > 
> > a.g:2:1: expecting ID, found 'null'
> > 
> > I prefer to see something more informative instead of 'null'.
> > I've found workaround for that,
> > but propose to change default behaviour in future versions.
> 
> Is this parser or lexer? I'm kindoff surprised at this at least the null 
> doesn't ring a bell my parser/lexers usually say EOF. It might be 
> something triggered by a specific construct rule though.

It is parser message about EOF_TOKEN from lexer.
Try to translate MyParser.g:
--- MyParser.g start ---
class MyParser
--- MyParser.g end ---
and you'll see:
ANTLR Parser Generator   Version 2.7.4   1989-2004 jGuru.com
MyParser.g:1:16: expecting "extends", found 'null'
MyParser.g:1:16: rule classDef trapped:
MyParser.g:1:16: unexpected token: null
error: aborting grammar 'unknown grammar' due to errors
Exiting due to errors.

> > 3. Multiple error messages about unexpected EOF in parser.
> > 
> > When EOF is found in some deep parser rule, ANTLR generates syntax error messages
> > for each exception handler (rule) on stack. I propose to process this case
> > separately and, for example, suppress all error messages after the first one
> > when EOF is reached.
> 
> This again does not really ring a direct bell with me. But there's many 
> ways to have error handlers and such.. A custom errorhandler that does 
> something specific for an EOF could be a first workaround.

Yes, I know workaround, but it possible to improve ANTLR.

> > 4. Error handling - extend default error handler
> > 
> > When I specify my own error handler, ANTLR doesn't generate default one.
> > But what if I process additional exception types and want use default handler
> > for RecognitionException? I propose that 
> > options { defaultErrorHandler=true; }
> > turn on default error handler generation in this case.
> 
> How about the ordering of the default one and your specific ones? 
> Depending on the place and your custom exception hierarchy the one might 
> eat the exception for the other.

When I write 

exception
catch[MyExceptionType ex]
{ ... }

default exception handling is turned off and I have to write it explicitly
as 
catch[RecognitionException ex]
{
    reportError(ex);
    consume();
    consumeUntil($FOLLOW); // thanks, now I at least know how to write it :)
}

Or even with:
   if (inputState.guessing==0) {
      ...
   } else {
     throw ex;
   }
And I don't know when I should add this check.

And my question is - how to add custom error handlers but have default handler generated?
And if it is not possible - add this feature.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


From pete.forman at westerngeco.com  Mon Mar 14 02:48:49 2005
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Mar 14 02:49:05 2005
Subject: [antlr-interest] Re: Can ANTLR transform AST  to XML?
References: <20050314070815.59836.qmail@web53907.mail.yahoo.com>
Message-ID: <is3uy032.fsf@wgmail2.gatwick.eur.slb.com>

FC <tangfc2001@yahoo.com> writes:

 > I am still confused with the problem to transform AST
 > to XML. Using Antlr I can get AST for Java code, while
 > serialization to XML is provided in the class of
 > XMLAST which is a derived class of class CommonAST.
 > Since base class can not be casted to its sub class,
 > how can I cast AST to XMLAST?

Call setASTNodeClass on the [Tree]Parser.
-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.

From m_schellens at hotmail.com  Mon Mar 14 06:06:36 2005
From: m_schellens at hotmail.com (marc schellens)
Date: Mon Mar 14 06:06:41 2005
Subject: [antlr-interest] Jump over nodes in tree construction
Message-ID: <BAY103-F12AED83055F5CD12440D7998560@phx.gbl>

Hello,

could somebody please point out to me what is wrong with the following rule?
Ie. How to skip nodes in the output tree properly?

unbrace_expr!
	: ex:expr
		{
            // remove last pair of braces
            if( #ex->getType()==EXPR)
                #unbrace_expr= #( NULL, ex->getFirstChild());
            else
                #unbrace_expr= #( NULL, ex);
		}

Thanks,
marc


From jungdl at ornl.gov  Mon Mar 14 10:15:31 2005
From: jungdl at ornl.gov (David Jung)
Date: Mon Mar 14 10:15:52 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
Message-ID: <1301.160.91.212.176.1110824131.squirrel@callisto.ornl.gov>

John D. Mitchell said:
>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
> [...]
>
>>> Here's a sample input: {if (a() < 0) then {b; c(); {;} dd();} e; f();}
>>> g();
>
>> Notice how you've corrupted my input "{if {a>0;} then {f();g();} x();}"
>> so that you only accept an expression, but not a statement as the if
>> conditional.  More importantly, statements are not primary in your
>> grammar.  Having the primaryExpr rule include statement would make it
>> closer.
>
> Here's my last take on this for free.  If you want more, contact me
> directly and we can work out a consulting agreement.

John,
  Don't waste any more of your time.  You've failed to
grasp the fundamental problem.  Your grammar, like Java/C++,
breaks the orthogonality rule of language design; in that
your statements/blocks are not primary.
That's why it can't parse the input I provided in my last post:
"{if ({a();}++ < 0) then {b; c(); {;}+1 dd();} e; f();}*2"
(notice the "++", "+1" and "*2")

That could be fixed by putting statementList in primaryExpr, but
would introduce ambiguity.  Doing that would give something very
similar to the solution I proposed in my original post in this
thread.  However, my original question was if there was a better
way; one that avoids the ambiguity.  Now I know the answer is no.
Perhaps ANTLR 3 will support the hoisting I need.

Thanks for your time,
-David.

From arpin at kingston.net  Mon Mar 14 12:43:16 2005
From: arpin at kingston.net (Andre Arpin)
Date: Mon Mar 14 12:43:20 2005
Subject: [antlr-interest] Understanding AST
Message-ID: <000001c528d6$737fb9b0$6400a8c0@PORTABLE>

If I turn off the standard tree construction in expr, I am not able to
create the same tree as the one created with tree construction enable.

This is probably simple but I just cannot solve it. I would really
appreciate any suggestion. 

 

expr!

      :     mexpr ((PLUS^ | MINUS^) b:mexpr)*

      ;

 

mexpr

      :     atom ((STAR^ | SOLIDUS^)  atom)*

      ;

            

atom: INT

    | LPAREN! expr RPAREN!

      ;

 

Andr?

 


-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.308 / Virus Database: 266.7.2 - Release Date: 11/03/2005
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050314/799f61b8/attachment.html
From parrt at cs.usfca.edu  Mon Mar 14 14:31:37 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Mar 14 14:24:42 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <1301.160.91.212.176.1110824131.squirrel@callisto.ornl.gov>
References: <1301.160.91.212.176.1110824131.squirrel@callisto.ornl.gov>
Message-ID: <5ec6f67fa25d51c896336dcfc24008a2@cs.usfca.edu>

> thread.  However, my original question was if there was a better
> way; one that avoids the ambiguity.  Now I know the answer is no.
> Perhaps ANTLR 3 will support the hoisting I need.

ANTLR 3 will support semantic predicate hoisting (just like PCCTS did). 
  Hopefully this will help.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From parrt at cs.usfca.edu  Mon Mar 14 14:33:55 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Mar 14 14:27:01 2005
Subject: [antlr-interest] Jump over nodes in tree construction
In-Reply-To: <BAY103-F12AED83055F5CD12440D7998560@phx.gbl>
References: <BAY103-F12AED83055F5CD12440D7998560@phx.gbl>
Message-ID: <c364fa29e08e3a80b4ccc3e73d779e76@cs.usfca.edu>


On Mar 14, 2005, at 6:06 AM, marc schellens wrote:

> Hello,
>
> could somebody please point out to me what is wrong with the following 
> rule?
> Ie. How to skip nodes in the output tree properly?
>
> unbrace_expr!
> 	: ex:expr
> 		{
>            // remove last pair of braces
>            if( #ex->getType()==EXPR)
>                #unbrace_expr= #( NULL, ex->getFirstChild());
>            else
>                #unbrace_expr= #( NULL, ex);
> 		}

Hi Marc :)

I assume you have set buildAST=true in the tree grammar?

Try referencing #ex not ex.

You can do this with the following by the way:

if ( ... ) {
   #unbrace_expr = #ex->getFirstChild();
}
else {
   #unbrace_expr = #ex;
}

--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From johnm-antlr at non.net  Mon Mar 14 16:09:42 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Mar 14 16:09:24 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <1301.160.91.212.176.1110824131.squirrel@callisto.ornl.gov>
References: <1301.160.91.212.176.1110824131.squirrel@callisto.ornl.gov>
Message-ID: <16950.10182.894095.651490@despot.non.net>

>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
[...]

> That could be fixed by putting statementList in primaryExpr, but would
> introduce ambiguity.  Doing that would give something very similar to the
> solution I proposed in my original post in this thread.  However, my
> original question was if there was a better way; one that avoids the
> ambiguity.  Now I know the answer is no.  Perhaps ANTLR 3 will support
> the hoisting I need.

As the man once said, "You're deluded, Mr. Bond."

(A) As I've shown from the beginning, you can get around the lack of
hoisting by making your grammar a bit [or a lot depending on how ambiguous
your language is] more complicated so as to drive the decision more
directly.  This is what we had to do in the C grammar because Antlr v2
doesn't support automatic predicate hoisting.

(B) Your language looks pretty ambiguous.  One way or another you still
have to resolve the ambiguity by forcing the choice of how the parser will
actually act when it comes to those decision points.  There's no magic wand
to take that responsibility off of your hands as the language
designer/implementor.

(C) Yes, Antlr v3 does/will do automatic predicate hoisting.  This allows
for more naturally structured grammars.

Take care,
	John
From jungdl at ornl.gov  Mon Mar 14 16:30:51 2005
From: jungdl at ornl.gov (David Jung)
Date: Mon Mar 14 16:30:58 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <16950.9992.5722.690607@despot.non.net>
References: <1301.160.91.212.176.1110824131.squirrel@callisto.ornl.gov>
	<16950.9992.5722.690607@despot.non.net>
Message-ID: <4864.172.23.0.3.1110846651.squirrel@callisto.ornl.gov>

John D. Mitchell said:
>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
>> John D. Mitchell said:
>>>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
> [...]
>
>> That could be fixed by putting statementList in primaryExpr, but would
>> introduce ambiguity.  Doing that would give something very similar to
>> the
>> solution I proposed in my original post in this thread.  However, my
>> original question was if there was a better way; one that avoids the
>> ambiguity.  Now I know the answer is no.  Perhaps ANTLR 3 will support
>> the hoisting I need.
>
> As the man once said, "You're deluded, Mr. Bond."
Really? :)

>
> (A) As I've shown from the beginning, you can get around the lack of
> hoisting by making your grammar a bit [or a lot depending on how ambiguous
> your language is] more complicated so as to drive the decision more
> directly.  This is what we had to do in the C grammar because Antlr v2
> doesn't support automatic predicate hoisting.
Yes.  In this case it will be a lot.  Hence my post for suggestions
of a solution that doesn't involve whole-sale re-organization of the
grammar.

>
> (B) Your language looks pretty ambiguous.  One way or another you still
> have to resolve the ambiguity by forcing the choice of how the parser will
> actually act when it comes to those decision points.  There's no magic
> wand
> to take that responsibility off of your hands as the language
> designer/implementor.

There is a simple syntactic predicate that can make the decision (as
previously indicated).
Unfortunately, in ANTLR v2 it must be expressed as a,
so called, semantic predicate, which additionally it isn't hoised,
hence ANTLR thinks the grammar is highly ambiguous when it actually
isn't.
As you say, I can avoid the need for the predicate by
re-orgnizing the grammar, but that would make it highly unnatural.

>
> (C) Yes, Antlr v3 does/will do automatic predicate hoisting.  This allows
> for more naturally structured grammars.

Indeed, I think I've settled on using ANTLR v3 to implement
the solution.  Perhaps I will brave the pre-release.

Cheers,
-David.
From tangfc2001 at yahoo.com  Mon Mar 14 21:37:13 2005
From: tangfc2001 at yahoo.com (FC)
Date: Mon Mar 14 21:37:17 2005
Subject: [antlr-interest] Inheritance of BaseAST class
In-Reply-To: 6667
Message-ID: <20050315053714.60491.qmail@web53909.mail.yahoo.com>

I am now working on transforming the AST parsed on
java code to xml file. I use the example of java
parser in Antlr-2.7.3 package as follows.

//JavaRecognizer is a subclass of class 
//antlr.LLkParser 
JavaLexer lexer = new JavaLexer(r);
lexer.setFilename(f);
JavaRecognizer parser = new JavaRecognizer(lexer);
parser.setFilename(f);
parser.compilationUnit();

//JavaAST is extended from BaseAST, and the XML 
//serialization methods in BaseAST are overriden	
JavaAST t = (JavaAST)parser.getAST();
Writer w = new OutputStreamWriter(System.out);
t.xmlSerialize(w);
w.write("\n");
w.flush();

But there is run-time error: 
parser exception: java.lang.ClassCastException at line
of "JavaAST t = (JavaAST)parser.getAST();", that is,
the AST object can not be casted to my subclass
JavaAST. How can I solve this problem? 

thanks

Ted


		
__________________________________ 
Do you Yahoo!? 
Yahoo! Small Business - Try our new resources site!
http://smallbusiness.yahoo.com/resources/ 
From tangfc2001 at yahoo.com  Mon Mar 14 21:37:44 2005
From: tangfc2001 at yahoo.com (FC)
Date: Mon Mar 14 21:37:46 2005
Subject: [antlr-interest] Inheritance of BaseAST class
In-Reply-To: 6667
Message-ID: <20050315053745.17998.qmail@web53906.mail.yahoo.com>

I am now working on transforming the AST parsed on
java code to xml file. I use the example of java
parser in Antlr-2.7.3 package as follows.

//JavaRecognizer is a subclass of class 
//antlr.LLkParser 
JavaLexer lexer = new JavaLexer(r);
lexer.setFilename(f);
JavaRecognizer parser = new JavaRecognizer(lexer);
parser.setFilename(f);
parser.compilationUnit();

//JavaAST is extended from BaseAST, and the XML 
//serialization methods in BaseAST are overriden	
JavaAST t = (JavaAST)parser.getAST();
Writer w = new OutputStreamWriter(System.out);
t.xmlSerialize(w);
w.write("\n");
w.flush();

But there is run-time error: 
parser exception: java.lang.ClassCastException at line
of "JavaAST t = (JavaAST)parser.getAST();", that is,
the AST object can not be casted to my subclass
JavaAST. How can I solve this problem? 

thanks

Ted


		
__________________________________ 
Do you Yahoo!? 
Yahoo! Small Business - Try our new resources site!
http://smallbusiness.yahoo.com/resources/ 
From m_schellens at hotmail.com  Mon Mar 14 22:11:08 2005
From: m_schellens at hotmail.com (marc schellens)
Date: Mon Mar 14 22:11:12 2005
Subject: [antlr-interest] Jump over nodes in tree construction
In-Reply-To: <c364fa29e08e3a80b4ccc3e73d779e76@cs.usfca.edu>
Message-ID: <BAY103-F34A71E90772FDD78D5F6098570@phx.gbl>

>From: Terence Parr <parrt@cs.usfca.edu>
>To: ANTLR Interest <antlr-interest@antlr.org>
>Subject: Re: [antlr-interest] Jump over nodes in tree construction
>Date: Mon, 14 Mar 2005 14:33:55 -0800
>
>
>On Mar 14, 2005, at 6:06 AM, marc schellens wrote:
>
>>Hello,
>>
>>could somebody please point out to me what is wrong with the following 
>>rule?
>>Ie. How to skip nodes in the output tree properly?
>>
>>unbrace_expr!
>>	: ex:expr
>>		{
>>            // remove last pair of braces
>>            if( #ex->getType()==EXPR)
>>                #unbrace_expr= #( NULL, ex->getFirstChild());
>>            else
>>                #unbrace_expr= #( NULL, ex);
>>		}
>
>Hi Marc :)
>
>I assume you have set buildAST=true in the tree grammar?
>
>Try referencing #ex not ex.
>
>You can do this with the following by the way:
>
>if ( ... ) {
>   #unbrace_expr = #ex->getFirstChild();
>}
>else {
>   #unbrace_expr = #ex;
>}


Thanks Terence,

I figured it out: #( ...,  ex->getFirstChild())  (same for #ex->...) is 
translated to  ex->...  NOT  ex_AST->...
in C++ mode, so one has to put here #(..., ex_AST->...)  explicitely.
But I think your way might be better anyway.

marc


From johnm-antlr at non.net  Mon Mar 14 22:13:14 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Mar 14 22:12:55 2005
Subject: [antlr-interest] Inheritance of BaseAST class
In-Reply-To: <20050315053745.17998.qmail@web53906.mail.yahoo.com>
References: <20050315053745.17998.qmail@web53906.mail.yahoo.com>
Message-ID: <16950.31994.540394.220494@despot.non.net>

>>>>> "FC" == FC  <tangfc2001@yahoo.com> writes:
[...]

> But there is run-time error: parser exception:
> java.lang.ClassCastException at line of "JavaAST t =
> (JavaAST)parser.getAST();", that is, the AST object can not be casted to
> my subclass JavaAST. How can I solve this problem?

Check out the setASTNodeClass() method of the parser.

Go wild,
	John
From sk at z.pl  Tue Mar 15 04:53:29 2005
From: sk at z.pl (Sebastian Kaliszewski)
Date: Tue Mar 15 04:47:54 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <1301.160.91.212.176.1110824131.squirrel@callisto.ornl.gov>
References: <1301.160.91.212.176.1110824131.squirrel@callisto.ornl.gov>
Message-ID: <200503151353.29524.sk@z.pl>

On Monday 14 March 2005 19:15, David Jung wrote:
> John,
>   Don't waste any more of your time.  You've failed to
> grasp the fundamental problem.  Your grammar, like Java/C++,
> breaks the orthogonality rule of language design; in that
> your statements/blocks are not primary.
> That's why it can't parse the input I provided in my last post:
> "{if ({a();}++ < 0) then {b; c(); {;}+1 dd();} e; f();}*2"
> (notice the "++", "+1" and "*2")
>
> That could be fixed by putting statementList in primaryExpr, but
> would introduce ambiguity.  Doing that would give something very
> similar to the solution I proposed in my original post in this
> thread.  However, my original question was if there was a better
> way; one that avoids the ambiguity.  Now I know the answer is no.


I thonk not. Try using syntactic predicate instead of semantic one. You 
wrote that it's impossible in your case, but IMHO it is. Just notice, that 
every closing brace is matched be an openig one -- so make ANTLR decide 
upon that.

So... In your original grammar instead of...


expressionList : '{' expr ( ';' expr )* '}' ;


Try using...


expressionList: '{' exprListBody '}'

exprListBody:
  ('{')=> expressionList exprListBody
 | expr (';' exprListBody)?
 | (';')*
 ;


> Perhaps ANTLR 3 will support the hoisting I need.

Try the above proposal -- or something about the lines (I didn't check if 
it's 100% right, but I had to somewhat do similar stuff in my grammar (my 
case is more complex, as using separator is dictated not only by preceding 
construct but also the following one -- in your case it would be something 
like making semicolon optional not only directly after closing brace, but 
also directly before opening brace -- this is also possible to solve

rgds
-- 
Sebastian Kaliszewski
From sk at z.pl  Tue Mar 15 05:14:54 2005
From: sk at z.pl (Sebastian Kaliszewski)
Date: Tue Mar 15 05:09:25 2005
Subject: [antlr-interest] Re: Semantic predicates that aren't & hoisting
In-Reply-To: <200503151353.29524.sk@z.pl>
References: <1301.160.91.212.176.1110824131.squirrel@callisto.ornl.gov>
	<200503151353.29524.sk@z.pl>
Message-ID: <200503151414.54321.sk@z.pl>

Sorry for the noise...

On Tuesday 15 March 2005 13:53, Sebastian Kaliszewski wrote:
> I thonk not. Try using syntactic predicate instead of semantic one. You
> wrote that it's impossible in your case, but IMHO it is. Just notice,
> that every closing brace is matched be an openig one -- so make ANTLR
> decide upon that. 
[snip]

Ignore that...
It won't solve your if {exprlist} then {exprlist} case properly.

rgds
-- 
Sebastian Kaliszewski
From weberjn at yahoo.com  Tue Mar 15 07:58:00 2005
From: weberjn at yahoo.com (Juergen Weber)
Date: Tue Mar 15 07:58:01 2005
Subject: [antlr-interest] Puzzled by leading dot
Message-ID: <20050315155800.80296.qmail@web41504.mail.yahoo.com>

   
Hi,

I want to parse lines of the form

.SE DATE = '03.02.2005';.SE TIME = '20:17'            
   

(basically a key value format, the .SE is to be
ignored).

If I parse the input with the grammar below, I got
this error message:

Exception in thread "main" line 1:1: unexpected char:
'.'

How could I specify a keyword with a leading dot?

Thanks for your help,
Juergen




class MyParser extends Parser;


line
	: item (SEMI item)*
	;

item 
	: DOTSE IDENT "=" STRING_LITERAL
	;

  

class MyLexer extends Lexer;

tokens {
        DOTSE=".SE";
}


IDENT
	:	('a'..'z'|'A'..'Z'|'_')
('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
	;



STRING_LITERAL 	
	:
	'\'' 
	(~'\'')* 
	'\'' 
	;


SEMI:	';'
	;




		
__________________________________ 
Do you Yahoo!? 
Yahoo! Small Business - Try our new resources site!
http://smallbusiness.yahoo.com/resources/ 
From demakov at ispras.ru  Tue Mar 15 08:15:24 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Tue Mar 15 08:15:28 2005
Subject: [antlr-interest] Puzzled by leading dot
References: <20050315155800.80296.qmail@web41504.mail.yahoo.com>
Message-ID: <00fe01c5297a$31fd9b20$8cc79553@marlboro>

Just define it as usual token.

DOTSE : ".SE" ;

Tokens section is for changing token type in special cases
(keyword is special case of identifier).
But DOTSE is not special case of IDENT because
IDENT can't start with '.'

Regards,
Alexey

P.S. May be "=" should be in lexer too? :)

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message ----- 
From: "Juergen Weber" <weberjn@yahoo.com>
To: <antlr-interest@antlr.org>
Sent: Tuesday, March 15, 2005 6:58 PM
Subject: [antlr-interest] Puzzled by leading dot


>    
> Hi,
> 
> I want to parse lines of the form
> 
> .SE DATE = '03.02.2005';.SE TIME = '20:17'            
>    
> 
> (basically a key value format, the .SE is to be
> ignored).
> 
> If I parse the input with the grammar below, I got
> this error message:
> 
> Exception in thread "main" line 1:1: unexpected char:
> '.'
> 
> How could I specify a keyword with a leading dot?
> 
> Thanks for your help,
> Juergen
> 
> 
> 
> 
> class MyParser extends Parser;
> 
> 
> line
> : item (SEMI item)*
> ;
> 
> item 
> : DOTSE IDENT "=" STRING_LITERAL
> ;
> 
>   
> 
> class MyLexer extends Lexer;
> 
> tokens {
>         DOTSE=".SE";
> }
> 
> 
> IDENT
> : ('a'..'z'|'A'..'Z'|'_')
> ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
> ;
> 
> 
> 
> STRING_LITERAL 
> :
> '\'' 
> (~'\'')* 
> '\'' 
> ;
> 
> 
> SEMI: ';'
> ;


From togolmach2 at lycos.com  Tue Mar 15 08:31:08 2005
From: togolmach2 at lycos.com (togol machillan)
Date: Tue Mar 15 08:31:11 2005
Subject: [antlr-interest] Puzzled by leading dot
Message-ID: <20050315163108.A90E33384B@ws7-3.us4.outblaze.com>

Writing the dot as a separate character like '.' might solve the problem.

Mach


----- Original Message -----
From: "Juergen Weber" <weberjn@yahoo.com>
To: antlr-interest@antlr.org
Subject: [antlr-interest] Puzzled by leading dot
Date: Tue, 15 Mar 2005 07:58:00 -0800 (PST)

> 
> 
> Hi,
> 
> I want to parse lines of the form
> 
> .SE DATE = '03.02.2005';.SE TIME = '20:17'
> 
> 
> (basically a key value format, the .SE is to be
> ignored).
> 
> If I parse the input with the grammar below, I got
> this error message:
> 
> Exception in thread "main" line 1:1: unexpected char:
> '.'
> 
> How could I specify a keyword with a leading dot?
> 
> Thanks for your help,
> Juergen
> 
> 
> 
> 
> class MyParser extends Parser;
> 
> 
> line
> 	: item (SEMI item)*
> 	;
> 
> item
> 	: DOTSE IDENT "=" STRING_LITERAL
> 	;
> 
> 
> 
> class MyLexer extends Lexer;
> 
> tokens {
>          DOTSE=".SE";
> }
> 
> 
> IDENT
> 	:	('a'..'z'|'A'..'Z'|'_')
> ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
> 	;
> 
> 
> 
> STRING_LITERAL 	
> 	:
> 	'\''
> 	(~'\'')*
> 	'\''
> 	;
> 
> 
> SEMI:	';'
> 	;
> 
> 
> 
> 
> 		
> __________________________________
> Do you Yahoo!?
> Yahoo! Small Business - Try our new resources site!
> http://smallbusiness.yahoo.com/resources/

-- 
_______________________________________________
NEW! Lycos Dating Search. The only place to search multiple dating sites at once.
http://datingsearch.lycos.com

From demakov at ispras.ru  Tue Mar 15 08:37:48 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Tue Mar 15 08:37:51 2005
Subject: [antlr-interest] Puzzled by leading dot
References: <20050315163108.A90E33384B@ws7-3.us4.outblaze.com>
Message-ID: <011701c5297d$52fe5e60$8cc79553@marlboro>

It is not correct if there are skipped whitespace
because "." WHITESPACE "SE" will be accepted.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message ----- 
From: "togol machillan" <togolmach2@lycos.com>
To: <antlr-interest@antlr.org>
Sent: Tuesday, March 15, 2005 7:31 PM
Subject: Re: [antlr-interest] Puzzled by leading dot


> Writing the dot as a separate character like '.' might solve the problem.
> 
> Mach
> 
> 
> ----- Original Message -----
> From: "Juergen Weber" <weberjn@yahoo.com>
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Puzzled by leading dot
> Date: Tue, 15 Mar 2005 07:58:00 -0800 (PST)
> 
> > 
> > 
> > Hi,
> > 
> > I want to parse lines of the form
> > 
> > .SE DATE = '03.02.2005';.SE TIME = '20:17'
> > 
> > 
> > (basically a key value format, the .SE is to be
> > ignored).
> > 
> > If I parse the input with the grammar below, I got
> > this error message:
> > 
> > Exception in thread "main" line 1:1: unexpected char:
> > '.'
> > 
> > How could I specify a keyword with a leading dot?
> > 
> > Thanks for your help,
> > Juergen
> > 
> > 
> > 
> > 
> > class MyParser extends Parser;
> > 
> > 
> > line
> > : item (SEMI item)*
> > ;
> > 
> > item
> > : DOTSE IDENT "=" STRING_LITERAL
> > ;
> > 
> > 
> > 
> > class MyLexer extends Lexer;
> > 
> > tokens {
> >          DOTSE=".SE";
> > }
> > 
> > 
> > IDENT
> > : ('a'..'z'|'A'..'Z'|'_')
> > ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
> > ;
> > 
> > 
> > 
> > STRING_LITERAL 
> > :
> > '\''
> > (~'\'')*
> > '\''
> > ;
> > 
> > 
> > SEMI: ';'
> > ;
> > 
> > 
> > 
> > 
> > 
> > __________________________________
> > Do you Yahoo!?
> > Yahoo! Small Business - Try our new resources site!
> > http://smallbusiness.yahoo.com/resources/
> 
> -- 
> _______________________________________________
> NEW! Lycos Dating Search. The only place to search multiple dating sites at once.
> http://datingsearch.lycos.com
> 
> 

From johnm-antlr at non.net  Tue Mar 15 09:02:25 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Tue Mar 15 09:02:07 2005
Subject: [antlr-interest] ANTLR and Class.forName()
In-Reply-To: <003801c5287a$64150ef0$5004a8c0@xam>
References: <003801c5287a$64150ef0$5004a8c0@xam>
Message-ID: <16951.5409.552861.900627@despot.non.net>

>>>>> "Max" == Max Rydahl Andersen <max.andersen@jboss.com> writes:
[...]

> In Hibernate3 we started using antlr for our HQL parser and it has worked
> out great! Made the parser much more extensible.

Cool!

[...]
> The antlr code has about 11 instances of dynamic classloading where it
> naively uses Class.forName to load classes. That is "bad" behavior for a
> framework that is meant to be portable :(

Ah, yes, good point.

> I can provide a patch for Antlr against the latest release if you want me
> to - should this just go to this mailinglist of is there issue tracker
> available somewhere ?

Probably best to just send the patch directly to Terence.

Thanks,
	John


From max.andersen at jboss.com  Tue Mar 15 09:07:40 2005
From: max.andersen at jboss.com (Max Rydahl Andersen)
Date: Tue Mar 15 09:10:48 2005
Subject: [antlr-interest] ANTLR and Class.forName()
In-Reply-To: <16951.5409.552861.900627@despot.non.net>
References: <003801c5287a$64150ef0$5004a8c0@xam>
	<16951.5409.552861.900627@despot.non.net>
Message-ID: <op.snou62o1sj49yt@xam>

Hi,

>> The antlr code has about 11 instances of dynamic classloading where it
>> naively uses Class.forName to load classes. That is "bad" behavior for a
>> framework that is meant to be portable :(
>
> Ah, yes, good point.
>
>> I can provide a patch for Antlr against the latest release if you want  
>> me
>> to - should this just go to this mailinglist of is there issue tracker
>> available somewhere ?
>
> Probably best to just send the patch directly to Terence.

did that earlier today ,)


-- 
--
Max Rydahl Andersen
callto://max.rydahl.andersen

Hibernate
max@hibernate.org
http://hibernate.org

JBoss Inc
max.andersen@jboss.com
http://jboss.com
From weberjn at yahoo.com  Tue Mar 15 09:19:51 2005
From: weberjn at yahoo.com (Juergen Weber)
Date: Tue Mar 15 09:19:53 2005
Subject: [antlr-interest] Puzzled by leading dot
Message-ID: <20050315171952.35958.qmail@web41503.mail.yahoo.com>

Thanks Alexey,

I changed to 

...extends Lexer;

DOTSE:

   ".SE"
	;

But still

Exception in thread "main" line 1:4: unexpected char:
' '

Do I have to quote the dot? How?

Thanks,
Juergen



		
__________________________________ 
Do you Yahoo!? 
Yahoo! Small Business - Try our new resources site!
http://smallbusiness.yahoo.com/resources/ 
From pauljlucas at mac.com  Tue Mar 15 09:26:04 2005
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Tue Mar 15 09:26:06 2005
Subject: [antlr-interest] ANTLR and Class.forName()
In-Reply-To: <16951.5409.552861.900627@despot.non.net>
References: <003801c5287a$64150ef0$5004a8c0@xam>
	<16951.5409.552861.900627@despot.non.net>
Message-ID: <Pine.LNX.4.62.0503150924390.22368@mini1.pauljlucas.org>

>>>>> "Max" == Max Rydahl Andersen <max.andersen@jboss.com> writes:

> The antlr code has about 11 instances of dynamic classloading where it
> naively uses Class.forName to load classes. That is "bad" behavior for a
> framework that is meant to be portable :(

 	I already complained to Terence about this and I thought it was
 	fixed in 2.7.5 (i.e., a new API was added and the old was
 	deprecated).

 	- Paul
From max.andersen at jboss.com  Tue Mar 15 09:29:18 2005
From: max.andersen at jboss.com (Max Rydahl Andersen)
Date: Tue Mar 15 09:32:23 2005
Subject: [antlr-interest] ANTLR and Class.forName()
In-Reply-To: <Pine.LNX.4.62.0503150924390.22368@mini1.pauljlucas.org>
References: <003801c5287a$64150ef0$5004a8c0@xam>
	<16951.5409.552861.900627@despot.non.net>
	<Pine.LNX.4.62.0503150924390.22368@mini1.pauljlucas.org>
Message-ID: <op.snov64h3sj49yt@xam>

On Tue, 15 Mar 2005 18:26:04 +0100, Paul J. Lucas <pauljlucas@mac.com>  
wrote:

>>>>>> "Max" == Max Rydahl Andersen <max.andersen@jboss.com> writes:
>
>> The antlr code has about 11 instances of dynamic classloading where it
>> naively uses Class.forName to load classes. That is "bad" behavior for a
>> framework that is meant to be portable :(
>
>  	I already complained to Terence about this and I thought it was
>  	fixed in 2.7.5 (i.e., a new API was added and the old was
>  	deprecated).

well it ain't ,)

FYI we first discovered the problem when our users tried to use
H3 inside weblogic which for some reason unkown to me dont provide
proper classloader isolation so the antlr.jar they have gets mixed
up with us....especially because class.forName() can't find our classes
as antlr.jar is on the sys classpath and we are not.


-- 
--
Max Rydahl Andersen
callto://max.rydahl.andersen

Hibernate
max@hibernate.org
http://hibernate.org

JBoss Inc
max.andersen@jboss.com
http://jboss.com
From pauljlucas at mac.com  Tue Mar 15 09:36:54 2005
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Tue Mar 15 09:36:57 2005
Subject: [antlr-interest] ANTLR and Class.forName()
In-Reply-To: <op.snov64h3sj49yt@xam>
References: <003801c5287a$64150ef0$5004a8c0@xam>
	<16951.5409.552861.900627@despot.non.net>
	<Pine.LNX.4.62.0503150924390.22368@mini1.pauljlucas.org>
	<op.snov64h3sj49yt@xam>
Message-ID: <Pine.LNX.4.62.0503150936100.22368@mini1.pauljlucas.org>

On Tue, 15 Mar 2005, Max Rydahl Andersen wrote:

> On Tue, 15 Mar 2005 18:26:04 +0100, Paul J. Lucas <pauljlucas@mac.com> wrote:
>>  	I already complained to Terence about this and I thought it was
>>  	fixed in 2.7.5 (i.e., a new API was added and the old was
>>  	deprecated).
>
> well it ain't ,)

 	Hmmm....  Terence?

> FYI we first discovered the problem when our users tried to use H3 inside
> weblogic ...

 	Yep, that's how I found it.

 	- Paul
From m.gadsdon at rheagroup.com  Tue Mar 15 09:44:13 2005
From: m.gadsdon at rheagroup.com (Mike Gadsdon)
Date: Tue Mar 15 09:44:15 2005
Subject: [antlr-interest] Using code inserts in syntactic predicates
Message-ID: <NFBBKLEKFHDGOJLCDCJAGENGDLAA.m.gadsdon@rheagroup.com>

Hi all,

I'm trying to use syntactic predicates in conjuction with testing token text
to resolve parsing ambiguity. Problem is that the code inserts I use end up
surrounded by a condition on inputState.guessing==0, which means that my
token text code only runs when the rule is NOT being run as a syntactic
predicate, but I need it to run always.

Is there any way I can insert code such that it runs independent of the
guessing state?

I did think I could workaround by resetting inputState.guessing to zero by a
code insert in the syntactic predicate call and then setting back to its
correct value after making my checks, but this code insert is also
conditional on inputState.guessing = 0 !

any other ideas ?

Grammar extract is :-


standardObjectPropertyName
	: (sopnConfirmationStatus) => sopnConfirmationStatus
	| (sopnValidityStatus) => sopnValidityStatus
	| (sopnValue) => sopnValue
	| ({inputState.guessing = 0;}sopnMonitoringStatus) => sopnMonitoringStatus
	| (sopnStatusConsistencyCheckStatus) => sopnStatusConsistencyCheckStatus
	| (sopnLimitCheckStatus) => sopnLimitCheckStatus
	| (sopnDeltaCheckStatus) => sopnDeltaCheckStatus
	| sopnExpectedCheckStatus
	;

// following rules define the standard object properties, checking the token
text is
// correct in each case
sopnConfirmationStatus
	: a:CONFIRMATION b:IDENTIFIER_WORD
	  {if (!b.getText().equalsIgnoreCase("status")) {throw new
RecognitionException();}}
	  {a_AST.setType(Parse.IDENTIFIER_WORD);}
	;

sopnValidityStatus
	: a:IDENTIFIER_WORD b:IDENTIFIER_WORD
	  {if (!a.getText().equalsIgnoreCase("validity") ||
!b.getText().equalsIgnoreCase("status")) {throw new
RecognitionException();}}
	;

sopnValue
	: a:VALUE
	  {a_AST.setType(Parse.IDENTIFIER_WORD);}
	;

sopnMonitoringStatus
	: a:IDENTIFIER_WORD b:IDENTIFIER_WORD
	  {if (!a.getText().equalsIgnoreCase("monitoring") ||
!b.getText().equalsIgnoreCase("status")) {throw new
RecognitionException();}}
	;


Code generated is (for one rule) :-

	public final void sopnMonitoringStatus() throws RecognitionException,
TokenStreamException {

		returnAST = null;
		ASTPair currentAST = new ASTPair();
		AST sopnMonitoringStatus_AST = null;
		Token  a = null;
		AST a_AST = null;
		Token  b = null;
		AST b_AST = null;

		try {      // for error handling
			a = LT(1);
			a_AST = astFactory.create(a);
			astFactory.addASTChild(currentAST, a_AST);
			match(IDENTIFIER_WORD);
			b = LT(1);
			b_AST = astFactory.create(b);
			astFactory.addASTChild(currentAST, b_AST);
			match(IDENTIFIER_WORD);
			if ( inputState.guessing==0 ) {
				if (!a.getText().equalsIgnoreCase("monitoring") ||
!b.getText().equalsIgnoreCase("status")) {throw new RecognitionException();}
			}
			sopnMonitoringStatus_AST = (AST)currentAST.root;
		}
		catch (RecognitionException ex) {
			if (inputState.guessing==0) {
				reportError(ex);
				consume();
				consumeUntil(_tokenSet_49);
			} else {
			  throw ex;
			}
		}
		returnAST = sopnMonitoringStatus_AST;
	}


==============================================================
Mike Gadsdon                   mailto:m.gadsdon@rheagroup.com
Rhea System S.A                Tel +44 (0)20 8891 0702
                               Fax +44 (0)20 8891 6702
==============================================================

From johnm-antlr at non.net  Tue Mar 15 09:47:37 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Tue Mar 15 09:47:20 2005
Subject: [antlr-interest] Using code inserts in syntactic predicates
In-Reply-To: <NFBBKLEKFHDGOJLCDCJAGENGDLAA.m.gadsdon@rheagroup.com>
References: <NFBBKLEKFHDGOJLCDCJAGENGDLAA.m.gadsdon@rheagroup.com>
Message-ID: <16951.8121.650257.326483@despot.non.net>

>>>>> "Mike" == Mike Gadsdon <m.gadsdon@rheagroup.com> writes:
[...]

> I'm trying to use syntactic predicates in conjuction with testing token
> text to resolve parsing ambiguity. Problem is that the code inserts I use
> end up surrounded by a condition on inputState.guessing==0, which means
> that my token text code only runs when the rule is NOT being run as a
> syntactic predicate, but I need it to run always.

Hmm... Why aren't you using semantic predicates then?

Take care,
	John
From parrt at cs.usfca.edu  Tue Mar 15 10:52:51 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Mar 15 10:45:55 2005
Subject: [antlr-interest] ANTLR and Class.forName()
In-Reply-To: <Pine.LNX.4.62.0503150924390.22368@mini1.pauljlucas.org>
References: <003801c5287a$64150ef0$5004a8c0@xam>
	<16951.5409.552861.900627@despot.non.net>
	<Pine.LNX.4.62.0503150924390.22368@mini1.pauljlucas.org>
Message-ID: <cadb98a67c38acf51b4aee31c3bba7c9@cs.usfca.edu>


On Mar 15, 2005, at 9:26 AM, Paul J. Lucas wrote:

>>>>>> "Max" == Max Rydahl Andersen <max.andersen@jboss.com> writes:
>
>> The antlr code has about 11 instances of dynamic classloading where it
>> naively uses Class.forName to load classes. That is "bad" behavior 
>> for a
>> framework that is meant to be portable :(
>
> 	I already complained to Terence about this and I thought it was
> 	fixed in 2.7.5 (i.e., a new API was added and the old was
> 	deprecated).

I am pretty sure you complained about a similar problem in 
StringTempalte, which was fixed. ;)

We will put this 2.7.6 :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From ewbank at gmail.com  Tue Mar 15 11:29:01 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue Mar 15 11:29:09 2005
Subject: [antlr-interest] Puzzled by leading dot
In-Reply-To: <20050315171952.35958.qmail@web41503.mail.yahoo.com>
References: <20050315171952.35958.qmail@web41503.mail.yahoo.com>
Message-ID: <dd3a065f0503151129125f2ff8@mail.gmail.com>

I think what you need is to add EOF and/or newline processing.  For
EOF processing, change this:
     line : item (SEMI item)*
to this:
     line : item (SEMI item)* EOF

For newline/whitespace processing, you need to mark tokens as being
skipped.  I don't use ANTLR for lexing, but look for "SKIP" in the
manual and/or the examples.  This will allow ANTLR to ignore the
whitespace between your tokens.

On Tue, 15 Mar 2005 09:19:51 -0800 (PST), Juergen Weber
<weberjn@yahoo.com> wrote:
> Thanks Alexey,
> 
> I changed to
> 
> ...extends Lexer;
> 
> DOTSE:
> 
>    ".SE"
>         ;
> 
> But still
> 
> Exception in thread "main" line 1:4: unexpected char:
> ' '
> 
> Do I have to quote the dot? How?
> 
> Thanks,
> Juergen
> 
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Small Business - Try our new resources site!
> http://smallbusiness.yahoo.com/resources/
>
From pauljlucas at mac.com  Tue Mar 15 12:09:39 2005
From: pauljlucas at mac.com (Paul J. Lucas)
Date: Tue Mar 15 12:09:43 2005
Subject: [antlr-interest] ANTLR and Class.forName()
In-Reply-To: <cadb98a67c38acf51b4aee31c3bba7c9@cs.usfca.edu>
References: <003801c5287a$64150ef0$5004a8c0@xam>
	<16951.5409.552861.900627@despot.non.net>
	<Pine.LNX.4.62.0503150924390.22368@mini1.pauljlucas.org>
	<cadb98a67c38acf51b4aee31c3bba7c9@cs.usfca.edu>
Message-ID: <Pine.LNX.4.62.0503151209120.22368@mini1.pauljlucas.org>

On Tue, 15 Mar 2005, Terence Parr wrote:

> I am pretty sure you complained about a similar problem in StringTempalte, 
> which was fixed. ;)

 	I've never used StringTemplate, so I'd have no reason to
 	complain about it.

 	- Paul
From parrt at cs.usfca.edu  Tue Mar 15 12:26:37 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Mar 15 12:19:42 2005
Subject: [antlr-interest] ANTLR and Class.forName()
In-Reply-To: <Pine.LNX.4.62.0503151209120.22368@mini1.pauljlucas.org>
References: <003801c5287a$64150ef0$5004a8c0@xam>
	<16951.5409.552861.900627@despot.non.net>
	<Pine.LNX.4.62.0503150924390.22368@mini1.pauljlucas.org>
	<cadb98a67c38acf51b4aee31c3bba7c9@cs.usfca.edu>
	<Pine.LNX.4.62.0503151209120.22368@mini1.pauljlucas.org>
Message-ID: <2de3d0216d30f1098a3b2c82bea0b110@cs.usfca.edu>


On Mar 15, 2005, at 12:09 PM, Paul J. Lucas wrote:

> On Tue, 15 Mar 2005, Terence Parr wrote:
>
>> I am pretty sure you complained about a similar problem in 
>> StringTempalte, which was fixed. ;)
>
> 	I've never used StringTemplate, so I'd have no reason to
> 	complain about it.

Ah!  Hmm...now, I know I fixed something for you in this realm.  
Hmm...anyway, it'll be fixed in a 2.7.6 release coming soon to a 
theatre near you!

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From cyberlync at gmail.com  Tue Mar 15 15:22:40 2005
From: cyberlync at gmail.com (Eric Merritt)
Date: Tue Mar 15 15:22:45 2005
Subject: [antlr-interest] A little trouble with single line comments and EOFs
Message-ID: <f69c840c05031515227b6fa343@mail.gmail.com>

I am having a bit of trouble with a single line comment rule that
looks like the rule below. The problem comes in when a single line
comment is at the very end of a file and isn't followed by a newline.
The problem occurs becuase the lexer expects that new line.

COMMENT 
  : ( '#' ) ( ~'\n' )* '\n'  
  { 
      newline(); 
      _ttype = Token.SKIP; 
  }
  ;


 The obvious fix to this is something like


COMMENT 
  : ( '#' ) ( ~'\n' )* ( '\n' | EOF_CHAR)   
  { 
      newline(); 
      _ttype = Token.SKIP; 
  }
  ;

However, there isn't any EOF or EOF_CHAR defined in the lexer. Can
anyone offer a solution to this problem?

Thanks,
Eric
From scott at javadude.com  Tue Mar 15 16:08:00 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Tue Mar 15 16:08:05 2005
Subject: [antlr-interest] ANTLR and Class.forName()
In-Reply-To: <op.snou62o1sj49yt@xam>
Message-ID: <20050315234811.2A10C2902BE@new.knowspam.net>

Terence & I have chatted about this issue a bit, and I'm gonna work this in
for the 2.7.6 release (along with the JSR-45 support).

I'm factoring out the XML support as an extension (so it doesn't cause extra
work for the other code gen folks), and will release it at the same time.

Later,
-- Scott

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Max Rydahl Andersen
Sent: Tuesday, March 15, 2005 12:08 PM
To: John D. Mitchell
Cc: antlr-interest@antlr.org
Subject: Re: [antlr-interest] ANTLR and Class.forName()

Hi,

>> The antlr code has about 11 instances of dynamic classloading where it
>> naively uses Class.forName to load classes. That is "bad" behavior for a
>> framework that is meant to be portable :(
>
> Ah, yes, good point.
>
>> I can provide a patch for Antlr against the latest release if you want  
>> me
>> to - should this just go to this mailinglist of is there issue tracker
>> available somewhere ?
>
> Probably best to just send the patch directly to Terence.

did that earlier today ,)


-- 
--
Max Rydahl Andersen
callto://max.rydahl.andersen

Hibernate
max@hibernate.org
http://hibernate.org

JBoss Inc
max.andersen@jboss.com
http://jboss.com



From demakov at ispras.ru  Tue Mar 15 22:56:45 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Tue Mar 15 22:56:52 2005
Subject: [antlr-interest] Puzzled by leading dot
References: <20050315171952.35958.qmail@web41503.mail.yahoo.com>
Message-ID: <002201c529f5$51940a70$8cc79553@marlboro>

The problem is not in escaping '.'.
Do you have rules to skip whitespaces in Lexer?
You have to instruct ANTLR what to do with them.
Look in docs & example grammars for rules like this:

protected
NL : (   {LA(2) == '\n'}? '\r' '\n'
       | '\r'
       | '\n'
     )
     { newline(); }
   ;

WS : ( options { greedy = true; } :
          ' '
       | '\t'
       | '\f'
       | NL
     )+
     { _ttype = Token.SKIP; }
   ;

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message ----- 
From: "Juergen Weber" <weberjn@yahoo.com>
To: <antlr-interest@antlr.org>
Sent: Tuesday, March 15, 2005 8:19 PM
Subject: [antlr-interest] Puzzled by leading dot


> Thanks Alexey,
> 
> I changed to 
> 
> ...extends Lexer;
> 
> DOTSE:
> 
>    ".SE"
> ;
> 
> But still
> 
> Exception in thread "main" line 1:4: unexpected char:
> ' '
> 
> Do I have to quote the dot? How?
> 
> Thanks,
> Juergen


From demakov at ispras.ru  Tue Mar 15 23:11:22 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Tue Mar 15 23:11:30 2005
Subject: [antlr-interest] A little trouble with single line comments and
	EOFs
References: <f69c840c05031515227b6fa343@mail.gmail.com>
Message-ID: <003001c529f7$5c56a3d0$8cc79553@marlboro>

Quote from my TreeDL parser:

protected
NL : (   {LA(2) == '\n'}? '\r' '\n'
       | '\r'
       | '\n'
     )
     { newline(); }
   ;

protected
SL_COMMENT : "//"
             ( ~( '\n' | '\r' ) )*
             /* 
              * single line comment may not
              * be followed by new line
              * at the end of file
              */
             ( NL )? 
           ;

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message ----- 
From: "Eric Merritt" <cyberlync@gmail.com>
To: <antlr-interest@antlr.org>
Sent: Wednesday, March 16, 2005 2:22 AM
Subject: [antlr-interest] A little trouble with single line comments and EOFs


> I am having a bit of trouble with a single line comment rule that
> looks like the rule below. The problem comes in when a single line
> comment is at the very end of a file and isn't followed by a newline.
> The problem occurs becuase the lexer expects that new line.
> 
> COMMENT 
>   : ( '#' ) ( ~'\n' )* '\n'  
>   { 
>       newline(); 
>       _ttype = Token.SKIP; 
>   }
>   ;
> 
> 
>  The obvious fix to this is something like
> 
> 
> COMMENT 
>   : ( '#' ) ( ~'\n' )* ( '\n' | EOF_CHAR)   
>   { 
>       newline(); 
>       _ttype = Token.SKIP; 
>   }
>   ;
> 
> However, there isn't any EOF or EOF_CHAR defined in the lexer. Can
> anyone offer a solution to this problem?
> 
> Thanks,
> Eric

From ATov at nds.com  Tue Mar 15 23:23:33 2005
From: ATov at nds.com (Tov, Amatzia)
Date: Tue Mar 15 23:23:37 2005
Subject: [antlr-interest] Displaying base code after parsing
Message-ID: <BE152B31CC9EFC42A2A554FE6B57D2A2881DCA@ILEX3.IL.NDS.COM>

Hi,

I would like to change the base code (in Java) and add a line of text at the beginning and end of every method, like so:

public int compareTo(Object o)
{ 
ADDED_ENTRY_TEXT;
{
	return 0;
}
ADDED_EXIT_TEXT;
}

I've managed to identify the entry/exit points using a tree parser, but now I want to write the base code (with the changes) to a file.

The problem is, that I can't use a filter in the tree parser which identifies the entry / exit points. 

The filter option is legal only in Lexer classes, but the lexer cannot find the entry / exit points.

I'd be glad if someone could help..

Thanks,

Amatzia 
***********************************************************************************
Information contained in this email message is intended only for use of the individual or entity named above. If the reader of this message is not the intended recipient, or the employee or agent responsible to deliver it to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please immediately notify the postmaster@nds.com and destroy the original message.
***********************************************************************************
From open.zone at virgin.net  Wed Mar 16 00:12:48 2005
From: open.zone at virgin.net (Micheal J)
Date: Tue Mar 15 23:59:54 2005
Subject: [antlr-interest] ANTLR and Class.forName()
In-Reply-To: <20050315234811.2A10C2902BE@new.knowspam.net>
Message-ID: <002001c529ff$f11658a0$7e02a8c0@hercules>

Scott,

> I'm factoring out the XML support as an extension (so it 
> doesn't cause extra work for the other code gen folks), and 
> will release it at the same time.

What is this "XML support" that you plan to support as an extension?. 

Micheal
ANTLR/C#

From m.gadsdon at rheagroup.com  Wed Mar 16 01:05:36 2005
From: m.gadsdon at rheagroup.com (Mike Gadsdon)
Date: Wed Mar 16 01:05:37 2005
Subject: [antlr-interest] Using code inserts in syntactic predicates
In-Reply-To: <16951.8121.650257.326483@despot.non.net>
Message-ID: <NFBBKLEKFHDGOJLCDCJACENKDLAA.m.gadsdon@rheagroup.com>

John,

the parser is doing what I want now with a combination of syntactic and
semantic predicates as below.

Thanks for the hint!

Mike.



// we need to use syntactic predicates to eliminate ambiguity
standardObjectPropertyName
	: (sopnConfirmationStatus) => sopnConfirmationStatus
	| (sopnValidityStatus) => sopnValidityStatus
	| (sopnValue) => sopnValue
	| (sopnMonitoringStatus) => sopnMonitoringStatus
	| (sopnStatusConsistencyCheckStatus) => sopnStatusConsistencyCheckStatus
	| (sopnLimitCheckStatus) => sopnLimitCheckStatus
	| (sopnDeltaCheckStatus) => sopnDeltaCheckStatus
	| sopnExpectedCheckStatus
	;

// following rules define the standard object properties, checking the token
text is
// correct in each case
sopnConfirmationStatus
	: {LT(2).getText().equalsIgnoreCase("status")}?
	  a:CONFIRMATION IDENTIFIER_WORD
	  {a_AST.setType(Parse.IDENTIFIER_WORD);}
	;

sopnValidityStatus
	: {LT(1).getText().equalsIgnoreCase("validity") &&
LT(2).getText().equalsIgnoreCase("status")}?
	  IDENTIFIER_WORD IDENTIFIER_WORD
	;

sopnValue
	: a:VALUE
	  {a_AST.setType(Parse.IDENTIFIER_WORD);}
	;

sopnMonitoringStatus
	: {LT(1).getText().equalsIgnoreCase("monitoring") &&
LT(2).getText().equalsIgnoreCase("status")}?
	  IDENTIFIER_WORD IDENTIFIER_WORD
	;

==============================================================
Mike Gadsdon                   mailto:m.gadsdon@rheagroup.com
Rhea System S.A                Tel +44 (0)20 8891 0702
                               Fax +44 (0)20 8891 6702
==============================================================


-----Original Message-----
From: John D. Mitchell [mailto:johnm-antlr@non.net]
Sent: 15 March 2005 17:48
To: Mike Gadsdon
Cc: antlr-interest@antlr.org
Subject: [antlr-interest] Using code inserts in syntactic predicates


>>>>> "Mike" == Mike Gadsdon <m.gadsdon@rheagroup.com> writes:
[...]

> I'm trying to use syntactic predicates in conjuction with testing token
> text to resolve parsing ambiguity. Problem is that the code inserts I use
> end up surrounded by a condition on inputState.guessing==0, which means
> that my token text code only runs when the rule is NOT being run as a
> syntactic predicate, but I need it to run always.

Hmm... Why aren't you using semantic predicates then?

Take care,
	John

From demakov at ispras.ru  Wed Mar 16 01:15:38 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Wed Mar 16 01:15:43 2005
Subject: Fw: Re[2]: [antlr-interest] A little trouble with single line
	comments andEOFs
Message-ID: <006401c52a08$b84b1340$8cc79553@marlboro>

Alexey, don't forget to "reply all" to send message in list!
And change, please, your name in message header because cyrillics is unreadably
for many list readers.

Yes, it's just a little trick :) See at generated code - ANTLR check LA(1) automatically.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message ----- 
From: "Alexey Sedov" <alexsedow@mail.ru>
To: "Alexey Demakov" <demakov@ispras.ru>
Sent: Wednesday, March 16, 2005 11:57 AM
Subject: Re[2]: [antlr-interest] A little trouble with single line comments andEOFs


> > protected
> > NL : (   {LA(2) == '\n'}? '\r' '\n'
> >        | '\r'
> >        | '\n'
> >      )
> >      { newline(); }
> >    ;
> 
> Is this Right?
> 
> I suppose, should be
> 
> protected
> NL : (   {LA(1) == '\r' && LA(2) == '\n'}? '\r' '\n'
>        | '\r'
>        | '\n'
>      )
>      { newline(); }
>    ;


From alexsedow at mail.ru  Wed Mar 16 02:11:21 2005
From: alexsedow at mail.ru (Alex Sedow)
Date: Wed Mar 16 02:11:27 2005
Subject: Fw: Re[2]: [antlr-interest] A little trouble with single
	linecomments andEOFs
In-Reply-To: <006401c52a08$b84b1340$8cc79553@marlboro>
Message-ID: <E1DBVUn-000Ar4-00.alexsedow-mail-ru@f23.mail.ru>

Alexey,

Thanks. I fix male preferences.

About trick. Is code generated by ANTLR is equal in both cases? Or tricky code faster?

Alex.

-----Original Message-----
From: "Alexey Demakov" <demakov@ispras.ru>
To: "antlr-interest" <antlr-interest@antlr.org>
Date: Wed, 16 Mar 2005 12:15:38 +0300
Subject: Fw: Re[2]: [antlr-interest] A little trouble with single linecomments andEOFs

> 
> Alexey, don't forget to "reply all" to send message in list!
> And change, please, your name in message header because cyrillics is unreadably
> for many list readers.
> 
> Yes, it's just a little trick :) See at generated code - ANTLR check LA(1) automatically.
> 
> Regards,
> Alexey
> 
> -----
> Alexey Demakov
> TreeDL: Tree Description Language: http://treedl.sourceforge.net
> RedVerst Group: http://www.unitesk.com
> 
> 
> ----- Original Message ----- 
> From: "Alexey Sedov" <alexsedow@mail.ru>
> To: "Alexey Demakov" <demakov@ispras.ru>
> Sent: Wednesday, March 16, 2005 11:57 AM
> Subject: Re[2]: [antlr-interest] A little trouble with single line comments andEOFs
> 
> 
> > > protected
> > > NL : (   {LA(2) == '\n'}? '\r' '\n'
> > >        | '\r'
> > >        | '\n'
> > >      )
> > >      { newline(); }
> > >    ;
> > 
> > Is this Right?
> > 
> > I suppose, should be
> > 
> > protected
> > NL : (   {LA(1) == '\r' && LA(2) == '\n'}? '\r' '\n'
> >        | '\r'
> >        | '\n'
> >      )
> >      { newline(); }
> >    ;
> 
> 
> 
From prashant.deva at gmail.com  Wed Mar 16 02:39:49 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Mar 16 02:39:52 2005
Subject: [antlr-interest] How to assign diff ids to same literal when
	importing grammars?
Message-ID: <41fed8f805031602396379daf1@mail.gmail.com>

I got 2 lexers which contain the keyword 'public' in the literals
section. i import the grammar of lexer B into A. Now the problem is
that the token id assigned to the 'public' keyword in the generated
'ATokenTypes' is the same.
eg -
Literal_public = 14;
But while runtime i will be switching between the 2 lexers while
lexing. So i want the parser to see a different id when the 'public'
comes from lexer A and when it comes from lexer B.
So i want it to be something like this is the generated ATokenTypes file - 
Key_A_Public =15;
Key_B_Public = 16;

How do i do this?
From demakov at ispras.ru  Wed Mar 16 02:54:41 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Wed Mar 16 02:54:46 2005
Subject: Fw: Re[2]: [antlr-interest] A little trouble with single
	linecomments andEOFs
References: <E1DBVUn-000Ar4-00.alexsedow-mail-ru@f23.mail.ru>
Message-ID: <00ac01c52a16$8f232760$8cc79553@marlboro>

In your code LA(1) is checked twice. Not very big overhead.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message ----- 
From: "Alex Sedow" <alexsedow@mail.ru>
To: "Alexey Demakov" <demakov@ispras.ru>; "antlr-interest" <antlr-interest@antlr.org>
Sent: Wednesday, March 16, 2005 1:11 PM
Subject: Re: Fw: Re[2]: [antlr-interest] A little trouble with single linecomments andEOFs


> Alexey,
> 
> Thanks. I fix male preferences.
> 
> About trick. Is code generated by ANTLR is equal in both cases? Or tricky code faster?
> 
> Alex.
> 
> -----Original Message-----
> From: "Alexey Demakov" <demakov@ispras.ru>
> To: "antlr-interest" <antlr-interest@antlr.org>
> Date: Wed, 16 Mar 2005 12:15:38 +0300
> Subject: Fw: Re[2]: [antlr-interest] A little trouble with single linecomments andEOFs
> 
> > 
> > Alexey, don't forget to "reply all" to send message in list!
> > And change, please, your name in message header because cyrillics is unreadably
> > for many list readers.
> > 
> > Yes, it's just a little trick :) See at generated code - ANTLR check LA(1) automatically.
> > 
> > Regards,
> > Alexey
> > 
> > -----
> > Alexey Demakov
> > TreeDL: Tree Description Language: http://treedl.sourceforge.net
> > RedVerst Group: http://www.unitesk.com
> > 
> > 
> > ----- Original Message ----- 
> > From: "Alexey Sedov" <alexsedow@mail.ru>
> > To: "Alexey Demakov" <demakov@ispras.ru>
> > Sent: Wednesday, March 16, 2005 11:57 AM
> > Subject: Re[2]: [antlr-interest] A little trouble with single line comments andEOFs
> > 
> > 
> > > > protected
> > > > NL : (   {LA(2) == '\n'}? '\r' '\n'
> > > >        | '\r'
> > > >        | '\n'
> > > >      )
> > > >      { newline(); }
> > > >    ;
> > > 
> > > Is this Right?
> > > 
> > > I suppose, should be
> > > 
> > > protected
> > > NL : (   {LA(1) == '\r' && LA(2) == '\n'}? '\r' '\n'
> > >        | '\r'
> > >        | '\n'
> > >      )
> > >      { newline(); }
> > >    ;


From ewbank at gmail.com  Wed Mar 16 03:27:47 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Wed Mar 16 03:27:51 2005
Subject: [antlr-interest] Semantic predicates that aren't & hoisting
In-Reply-To: <3327.172.23.0.3.1110470235.squirrel@callisto.ornl.gov>
References: <3327.172.23.0.3.1110470235.squirrel@callisto.ornl.gov>
Message-ID: <dd3a065f0503160327574c770b@mail.gmail.com>

I think this solves the original problem of eliminating ";" after "}".
 I lost the thread of the discussion several emails ago, and then
ended up seeing something similar in a grammar I'm developing so
thought to share the idiom here.

The trick is to use recursion to eat away at the nested sequence (I've
noticed that recusive rules are my friend :-), rather than trying to
do it in one large production.

      1 expressionList
      2 :
      3     LCB exprSeq RCB
      4 ;
      5  
      6 exprSeq
      7 :
      8     ( expressionList (exprSeq)?
      9     | expr (SEMI (exprSeq)? )?
     10     )
     11 ;  

If this doesn't apply, my apologies. Just trying to help...
- B

On Thu, 10 Mar 2005 10:57:15 -0500 (EST), David Jung <jungdl@ornl.gov> wrote:
> My problem is that I want to eliminate the requirement for
> the separating ';' after a sub-expressionList.  I cannot just make
> the ';' optional in the expressionList rule (i.e. (';')?) as
> that makes expr ambiguous (i.e. can't distinguish between
> expr "3" followed by expr "-2" and expr "3-2" (evaluating to 1) ).
From ewbank at gmail.com  Wed Mar 16 03:32:57 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Wed Mar 16 03:32:59 2005
Subject: Fwd: [antlr-interest] Jump over nodes in tree construction
In-Reply-To: <dd3a065f05031506091b780605@mail.gmail.com>
References: <c364fa29e08e3a80b4ccc3e73d779e76@cs.usfca.edu>
	<BAY103-F34A71E90772FDD78D5F6098570@phx.gbl>
	<dd3a065f05031506091b780605@mail.gmail.com>
Message-ID: <dd3a065f0503160332447f9a0a@mail.gmail.com>

[[Sending this to the list so that it's in the collective]]

Another option that should work with a bit less C++ goo...

  /**
   * first alternative discards extra EXPR node;
   * second alternative is passthru.
   */
  unbrace_expr!
  : ( EXPR ) => #( EXPR e1:. )   { ## = #e1; }
  | e2:.  { ## = #e2; }
  ;

As a side question, might you prefer a recursive definition to remove
redundant nodes from the tree?

  /**
   * first alternative rips out all EXPR nodes;
   * second alternative restores one level of same.
   */
  unbrace_expr!
  : ( EXPR ) => #( EXPR e1:unbrace_expr )   { ## = #e1; }
  | e2:.  { ## = #( #[EXPR,"EXPR]", #e2); }
  ;

Hope this helps.  I've learned that if I see getType() or
getFirstChild() in my C++, it means I need to refactor some of that
into ANTLR.

On Tue, 15 Mar 2005 06:11:08 +0000, marc schellens
<m_schellens@hotmail.com> wrote:
> unbrace_expr!
>       : ex:expr
>               {
>            // remove last pair of braces
>            if( #ex->getType()==EXPR)
>                #unbrace_expr= #( NULL, ex->getFirstChild());
>            else
>                #unbrace_expr= #( NULL, ex);
>               }
From scott at javadude.com  Wed Mar 16 04:13:49 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Wed Mar 16 04:13:51 2005
Subject: [antlr-interest] ANTLR and Class.forName()
In-Reply-To: <002001c529ff$f11658a0$7e02a8c0@hercules>
Message-ID: <20050316115351.322352905CD@new.knowspam.net>

See

http://javadude.com/misc/xml-support.html

For a first-pass at the docs. Right now, it's java-only, but it shouldn't be
too hard to create support for it for other languages that already have a
SAX parser that can be used as a scanner.

Later,
-- Scott

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Micheal J
> Sent: Wednesday, March 16, 2005 3:13 AM
> To: antlr-interest@antlr.org
> Subject: RE: [antlr-interest] ANTLR and Class.forName()
> 
> Scott,
> 
> > I'm factoring out the XML support as an extension (so it 
> doesn't cause 
> > extra work for the other code gen folks), and will release 
> it at the 
> > same time.
> 
> What is this "XML support" that you plan to support as an extension?. 
> 
> Micheal
> ANTLR/C#



From jungdl at ornl.gov  Wed Mar 16 08:39:51 2005
From: jungdl at ornl.gov (David Jung)
Date: Wed Mar 16 08:40:15 2005
Subject: [antlr-interest] ANTLR 3 dev status?
Message-ID: <2739.160.91.212.176.1110991191.squirrel@callisto.ornl.gov>

Terence,
    Can you give us an idea what the current dev status
of ANTLR 3 is?  Is the source available somewhere?
I'm bascially wondering if it is early days and likely
won't be available for a year or more, or if perhaps
it is further along than that.
If it was around alpha-level I'd be interested to
test it out.
Thanks,
-David.

From johnm-antlr at non.net  Wed Mar 16 08:47:57 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Wed Mar 16 08:47:40 2005
Subject: [antlr-interest] Puzzled by leading dot
In-Reply-To: <002201c529f5$51940a70$8cc79553@marlboro>
References: <20050315171952.35958.qmail@web41503.mail.yahoo.com>
	<002201c529f5$51940a70$8cc79553@marlboro>
Message-ID: <16952.25405.544190.639483@despot.non.net>

[Sorry for jumpting into the middle of this thread after missing this
thread...] 

Do you have '.' in any other lexer rules?  Like, say, in lexer rules for
numbers?

If so, check out the lexer for the Java grammar and note how it handles
having dot used in so many places in the lexer.

Hope this helps,
		John
From johnm-antlr at non.net  Wed Mar 16 08:53:16 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Wed Mar 16 08:52:59 2005
Subject: [antlr-interest] ANTLR 3 dev status?
In-Reply-To: <2739.160.91.212.176.1110991191.squirrel@callisto.ornl.gov>
References: <2739.160.91.212.176.1110991191.squirrel@callisto.ornl.gov>
Message-ID: <16952.25724.598666.648107@despot.non.net>

>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
> Terence, Can you give us an idea what the current dev status of ANTLR 3
> is?

Check out the archives of the mailing list:
http://www.antlr.org/pipermail/antlr-interest/

Ter gave an update recently.

Take care,
	John
From jungdl at ornl.gov  Wed Mar 16 09:11:56 2005
From: jungdl at ornl.gov (David Jung)
Date: Wed Mar 16 09:12:08 2005
Subject: [antlr-interest] ANTLR 3 dev status?
In-Reply-To: <16952.25724.598666.648107@despot.non.net>
References: <2739.160.91.212.176.1110991191.squirrel@callisto.ornl.gov>
	<16952.25724.598666.648107@despot.non.net>
Message-ID: <2816.160.91.212.176.1110993116.squirrel@callisto.ornl.gov>

John D. Mitchell said:
>>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
>> Terence, Can you give us an idea what the current dev status of ANTLR 3
>> is?
>
> Check out the archives of the mailing list:
> http://www.antlr.org/pipermail/antlr-interest/
>
> Ter gave an update recently.

I had scanned the archives, but didn't see anything, so I looked
again.  I see lots of talk about tree parsing, update on v2.8
and a reply to a request for source in Dec stating that he
wasn't really for a while yet.  Is that what you were refering
to?
I didn't see any update for 3, roadmap or location for
source or repository.  Is there something burried in one
of the other discussions?
Did you have some particular post in mind?
(There doesn't seem to be a way to search the full-text
of the archives without downloading a tarball for each
month seperately - is there?)
Thanks,
-David.


From johnm-antlr at non.net  Wed Mar 16 09:48:37 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Wed Mar 16 09:48:35 2005
Subject: [antlr-interest] ANTLR 3 dev status?
In-Reply-To: <2816.160.91.212.176.1110993116.squirrel@callisto.ornl.gov>
References: <2739.160.91.212.176.1110991191.squirrel@callisto.ornl.gov>
	<16952.25724.598666.648107@despot.non.net>
	<2816.160.91.212.176.1110993116.squirrel@callisto.ornl.gov>
Message-ID: <16952.29045.988950.639850@despot.non.net>

>>>>> "David" == David Jung <jungdl@ornl.gov> writes:
[...]

> I had scanned the archives, but didn't see anything, so I looked again.
> I see lots of talk about tree parsing, update on v2.8 and a reply to a
> request for source in Dec stating that he wasn't really for a while yet.
> Is that what you were refering to?  I didn't see any update for 3,
> roadmap or location for source or repository.  Is there something burried
> in one of the other discussions?  Did you have some particular post in
> mind?  (There doesn't seem to be a way to search the full-text of the
> archives without downloading a tarball for each month seperately - is
> there?) 

(A) Alas, the search mechanism on the Antlr.org site doesn't (yet?) spider
the mailing list archives.  [The search seems to be particularly
problematic in that I just tried to use it and it gave me one page of
(useless) results without any way to get to any other pages. Ouch.]

(B) I just checked my personal archive of the mailing list but I only keep
a small subset of posts and I couldn't find the message I was thinking of.

(C) Antlr v3 is in the research and development phase so it's
definitely NOT yet ready for poking and prodding. It's really just Ter
hacking away and some of the cabal members beating him periodically.  Check
out the Antlr v3 weblog entries to see the thinking in progress.

(D) The idea is to have something that the adventurous can play with
available later this year.  Knowing Ter, I wouldn't expect it until the end
of the summer break. :-)

Hope this helps,
		John
From parrt at cs.usfca.edu  Wed Mar 16 10:51:06 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Mar 16 10:44:14 2005
Subject: [antlr-interest] ANTLR 3 dev status?
In-Reply-To: <2739.160.91.212.176.1110991191.squirrel@callisto.ornl.gov>
References: <2739.160.91.212.176.1110991191.squirrel@callisto.ornl.gov>
Message-ID: <6ed7b958c3a21ec120101e38a1491758@cs.usfca.edu>


On Mar 16, 2005, at 8:39 AM, David Jung wrote:

> Terence,
>     Can you give us an idea what the current dev status
> of ANTLR 3 is?  Is the source available somewhere?
> I'm bascially wondering if it is early days and likely
> won't be available for a year or more, or if perhaps
> it is further along than that.
> If it was around alpha-level I'd be interested to
> test it out.

Hi David,

Thanks for your interest.  The project is going extremely well.  I just 
went down to visit the hip cats in Apple's dev tools group with Jean 
Bovet, the maniac USF grad student.  We demo'd his ANTLR IDE and 
discussed ANTLR 3.0.

The basic status is that the tool seems to work. ;)  It correctly reads 
in the Java grammar and generates a recognizer in Java (and bytecodes) 
that seems to parse Java properly...*and* more quickly than ANTLR 2.x, 
but I need to really do more tests.  The interesting thing is that I 
removed syntactic predicates from the grammar and the 3.0 prototype 
still handled the grammar. :)  The only warnings are are true grammar 
ambiguities (same input, multiple ways to match).

I'm hoping to have an early access version at end of May or early June 
including Jean's GUI (which totally kicks ass by the way).

New version currently does not have tree mechanism or any rewrite 
stuff, but it does do parsers/lexers and with the fabulous new LL(*) 
algorithm.  A much better error recovery strategy is done.  New 
attribute mechanism is done.  I'm working on the interpreter and 
debugging protocol.  Then tool clean up, some optimizations.  Ric 
Klaren may have the C code generator working by then (I keep changing 
things out from underneath him).  We'll have internationalized error 
messages (with perhaps English, French at that point).

Anyway, my goal is to get a solid base system done that knows how to 
parse / lex shortly, with full semantic predicate hoisting.  Then, 
after first early-release, I'll add tree stuff etc... once I settle on 
what I want.

Oh, and I have *no* documentation other than my blogs so far.  Only 
minor syntax differences with 2.x, however.

I think you'll like this new version, David.  I'd be happy for you to 
play with it in a few short months!

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Wed Mar 16 10:53:12 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Mar 16 10:46:17 2005
Subject: [antlr-interest] ANTLR 3 dev status?
In-Reply-To: <16952.29045.988950.639850@despot.non.net>
References: <2739.160.91.212.176.1110991191.squirrel@callisto.ornl.gov>
	<16952.25724.598666.648107@despot.non.net>
	<2816.160.91.212.176.1110993116.squirrel@callisto.ornl.gov>
	<16952.29045.988950.639850@despot.non.net>
Message-ID: <f107c4dacf7f6195ed3aec6cddb1ed0d@cs.usfca.edu>


On Mar 16, 2005, at 9:48 AM, John D. Mitchell wrote:
> (A) Alas, the search mechanism on the Antlr.org site doesn't (yet?) 
> spider
> the mailing list archives.  [The search seems to be particularly
> problematic in that I just tried to use it and it gave me one page of
> (useless) results without any way to get to any other pages. Ouch.]

It did until yesterday when I killed it so you can actually see the 
articles in the results ;)  The mailing list was flooding the search 
resutls.  I need to make that a separate thing.  I'll get to it ;)

> (D) The idea is to have something that the adventurous can play with
> available later this year.  Knowing Ter, I wouldn't expect it until 
> the end
> of the summer break. :-)

Yep, I'm going very slowly and carefully!  For a full release probably 
end of Summer.  For an early access, however, only a few short months 
away! :)  Hooray!

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From davmac at deakin.edu.au  Wed Mar 16 15:01:42 2005
From: davmac at deakin.edu.au (Davin McCall)
Date: Wed Mar 16 14:57:36 2005
Subject: [antlr-interest] java.g - a couple of issues
Message-ID: <4238BAD6.1000808@deakin.edu.au>

Hi,
We're using Michael Studman's java 1.5 grammar as a base for our own and 
have noticed the following issues. We've got fixes but I wanted to both 
highlight the issues to the community and see if anyone else has 
comments (especially in regards to whether the fixes are correct :-) ).

1. Single line comments without a terminating newline at the end of a 
file cause a parse error, due to the requirement that the comment is 
followed by a line-end.

It seems to be possible to just remove that requirement (and also the 
call to newline()) and then everything works fine (ie. the match is 
greedy anyway).

2. Arrays aren't allowed as wildcard bounds (they should be).

For instance, "? extends Thread[]" as a wildcard in some declaration 
causes a parse error. A possible fix is to add "arraySpecOpt" in to the 
"typeArgumentBounds" target.

Davin

From rprememail at yahoo.com  Wed Mar 16 02:47:13 2005
From: rprememail at yahoo.com (Premkumar Rathanavelu)
Date: Wed Mar 16 18:31:52 2005
Subject: [antlr-interest] Please help : Grammar rule for preprocessor
Message-ID: <20050316104713.77322.qmail@web80901.mail.scd.yahoo.com>

Hi to all ANTLR -ers.,
   I am writing a Grammar for Preprocessors and strucking with its complex code structure .. I want to parse the C/C++  preprocessor code and then have to write in the database for further applications...
  Already i spent morethan a month exploring all possible ways to parse/Lex the code but still struggling .. 
 The problem is 
Eg : #define MAX_SETUP_STRINGS  (sizeof(setup_strings) / sizeof(char *))  /*comment*/
In the above eg. my rule should parse/lex after #define " MAX_SETUP_STRINGS "  - this should be done seperately and written to the DB and then whatever comes next to this, that is here  "(sizeof(setup_strings) / sizeof(char *)) " - this should be written to the DB seperately and after that comments should be skipped.. removing comments is very important..
 
The rule what i tried and became tired -- this is for the third part that is the replacement value ..in lexer 

ReplacementList returns [String Replacement=""]



:

(

Rep :PPtokens

{Replacement = Rep.getText();}

)

;

PPtokens returns [String pt = ""] 

:

 id:ID  

| num:Number 

| cl:CharLiteral 

| sl:StringLiteral 

| opt:OPERATORS

 | Comment

| CPPComment 



; 

 
 
 
Please help me by providing some tipps to the above #define rule .. and i'll be grateful to you..
 
Thanking you., 
PREM

		
---------------------------------
Do you Yahoo!?
 Yahoo! Small Business - Try our new resources site! 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050316/64c0c396/attachment.html
From mmoktali at bphx.dk  Thu Mar 17 02:20:11 2005
From: mmoktali at bphx.dk (Meena Moktali)
Date: Thu Mar 17 02:20:57 2005
Subject: [antlr-interest] Code beautifier-indentation
Message-ID: <389DFA1991602B4DB5E5691B00929EB904FCC9@bpsdk910.bphx.dk>

HI,
I am a newby in ANTLR.I am trying to write a grammar for code beautification(proper indentation )according to the looping strutures.
The source code is that of AppBilder rule(having its own language syntax ,similar to HTML).

Can anybody suggest some sample code or ideas of how to go about this?

thanking you in advance

Meena
From ATov at nds.com  Thu Mar 17 04:42:41 2005
From: ATov at nds.com (Tov, Amatzia)
Date: Thu Mar 17 04:42:48 2005
Subject: [antlr-interest] Showing all input text on tree parser output
Message-ID: <BE152B31CC9EFC42A2A554FE6B57D2A2FA6BF8@ILEX3.IL.NDS.COM>

Hi,

I'm trying to walk over an AST using a tree parser, and output all the original text while doing it.

How can it be done?

Thanks,

Amatzia 
***********************************************************************************
Information contained in this email message is intended only for use of the individual or entity named above. If the reader of this message is not the intended recipient, or the employee or agent responsible to deliver it to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please immediately notify the postmaster@nds.com and destroy the original message.
***********************************************************************************
From johnm-antlr at non.net  Thu Mar 17 06:59:36 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Thu Mar 17 06:59:19 2005
Subject: [antlr-interest] Code beautifier-indentation
In-Reply-To: <389DFA1991602B4DB5E5691B00929EB904FCC9@bpsdk910.bphx.dk>
References: <389DFA1991602B4DB5E5691B00929EB904FCC9@bpsdk910.bphx.dk>
Message-ID: <16953.39768.402641.968703@despot.non.net>

>>>>> "Meena" == Meena Moktali <mmoktali@bphx.dk> writes:
[...]

> HI, I am a newby in ANTLR.I am trying to write a grammar for code
> beautification(proper indentation )according to the looping strutures.
> The source code is that of AppBilder rule(having its own language syntax
> ,similar to HTML).

> Can anybody suggest some sample code or ideas of how to go about this?

How complex is the "beautification"?  I.e., are you literally only changing
indentation or do you need to completely reformat the code?  If it's the
first, you can take some really simple approaches but if it's the latter
than you're into the world of full-on source-to-source transformation.

Take care,
	John
From mmoktali at bphx.dk  Thu Mar 17 08:18:17 2005
From: mmoktali at bphx.dk (Meena Moktali)
Date: Thu Mar 17 08:19:01 2005
Subject: [antlr-interest] Code beautifier-indentation
Message-ID: <389DFA1991602B4DB5E5691B00929EB9044E9C@bpsdk910.bphx.dk>

hi John,
The final goal is to indent the code according to standards for each block.
I can give u an example as below..
Can u help me with this?

Meena

ORIGINAL CODE  (no indentation followed)
-------------

if L_RTRN_CD = SUCCESS in STD_RTRN_CD
*> Corebank account or currency are required <*
if (ACT_RECVD_CLRG_ID of ACCTG_TRANS_PD_WD of ACCTG_TRANS_PD_W
= ' '
or ARID_ITEM of ACCTG_TRANS_PD_WD of ACCTG_TRANS_PD_W
= ' ')
and
PSTG_ORGNL_ISO4217 of ACCTG_TRANS_PD_WD of ACCTG_TRANS_PD_W
= ' '
map EITHER_ACCOUNT_OR_CURRENCY in KSPS8_MSG
to TEXT_CODE of STD_MSG_PARM_V of STD_MSG_CLIENT_SRV_I
map 'ACCTG_TRANS_PD_WD'
to VIEW_LONG_NAME of STD_MSG_CLIENT_SRV_I
map BUSINESS_ERROR in STD_RTRN_CD
to L_RTRN_CD
map 'ACT_RECVD_CLRG_ID'
to FIELD_LONG_NAME of STD_MSG_CLIENT_SRV_I
map 'ADZRLP'
to MESSAGE_SET_NAME of STD_MSG_PARM_V of STD_MSG_CLIENT_SRV_I
  endif
endif

BEAUTIFIED CODE
---------------

if L_RTRN_CD = SUCCESS in STD_RTRN_CD
  *> Corebank account or currency are required <*
  if (ACT_RECVD_CLRG_ID of ACCTG_TRANS_PD_WD of ACCTG_TRANS_PD_W
     = ' '
     or ARID_ITEM of ACCTG_TRANS_PD_WD of ACCTG_TRANS_PD_W
     = ' ')
  and
    PSTG_ORGNL_ISO4217 of ACCTG_TRANS_PD_WD of ACCTG_TRANS_PD_W
     = ' '
    map EITHER_ACCOUNT_OR_CURRENCY in KSPS8_MSG
       to TEXT_CODE of STD_MSG_PARM_V of STD_MSG_CLIENT_SRV_I
    map 'ACCTG_TRANS_PD_WD'
       to VIEW_LONG_NAME of STD_MSG_CLIENT_SRV_I
    map BUSINESS_ERROR in STD_RTRN_CD
       to L_RTRN_CD
    map 'ACT_RECVD_CLRG_ID'
       to FIELD_LONG_NAME of STD_MSG_CLIENT_SRV_I
    map 'ADZRLP'
       to MESSAGE_SET_NAME of STD_MSG_PARM_V of STD_MSG_CLIENT_SRV_I

  endif
endif
       


-----Original Message-----
From: John D. Mitchell [mailto:johnm-antlr@non.net]
Sent: 17. marts 2005 17:00
To: Meena Moktali
Cc: antlr-interest@antlr.org
Subject: [antlr-interest] Code beautifier-indentation


>>>>> "Meena" == Meena Moktali <mmoktali@bphx.dk> writes:
[...]

> HI, I am a newby in ANTLR.I am trying to write a grammar for code
> beautification(proper indentation )according to the looping strutures.
> The source code is that of AppBilder rule(having its own language syntax
> ,similar to HTML).

> Can anybody suggest some sample code or ideas of how to go about this?

How complex is the "beautification"?  I.e., are you literally only changing
indentation or do you need to completely reformat the code?  If it's the
first, you can take some really simple approaches but if it's the latter
than you're into the world of full-on source-to-source transformation.

Take care,
	John
From monty at codetransform.com  Thu Mar 17 07:30:58 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Thu Mar 17 10:31:18 2005
Subject: [antlr-interest] Showing all input text on tree parser output
In-Reply-To: <BE152B31CC9EFC42A2A554FE6B57D2A2FA6BF8@ILEX3.IL.NDS.COM>
References: <BE152B31CC9EFC42A2A554FE6B57D2A2FA6BF8@ILEX3.IL.NDS.COM>
Message-ID: <4239A2B2.2010106@codetransform.com>

Tov, Amatzia wrote:
> Hi,
> 
> I'm trying to walk over an AST using a tree parser, and output all the original text while doing it.
> 
> How can it be done?

Take a look at the GCC grammar on antlr.org, it does that.

Monty
From johnm-antlr at non.net  Thu Mar 17 11:35:28 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Thu Mar 17 11:35:19 2005
Subject: [antlr-interest] Code beautifier-indentation
In-Reply-To: <389DFA1991602B4DB5E5691B00929EB9044E9C@bpsdk910.bphx.dk>
References: <389DFA1991602B4DB5E5691B00929EB9044E9C@bpsdk910.bphx.dk>
Message-ID: <16953.56320.270303.524511@despot.non.net>

>>>>> "Meena" == Meena Moktali <mmoktali@bphx.dk> writes:
[...]

> hi John, The final goal is to indent the code according to standards for
> each block.  I can give u an example as below..  Can u help me with this?

Well, given a quick look at your example it looks like all that you need to
do is deal with indentation.  If that's really the case then you can
certainly come up with a simple hack to read in the input, keep track of
the level, and output the input with the appropriate indentation.

Have fun,
	John
From parrt at cs.usfca.edu  Thu Mar 17 13:02:19 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Mar 17 12:55:22 2005
Subject: [antlr-interest] another milestone for v3.0
Message-ID: <c60f5d4e22a4f89fb6ed5a15a4f05a04@cs.usfca.edu>

Howdy,

Just this morning I was able to get ANTLR to *interpret* the java.g 
grammar.  In other words, instead of generating a parser in some 
language, compiling it, and then running it on some java input, I was 
able to parse Java w/o generating code or compiling at all.  The result 
of interpretation is a parse tree always.  If there is a parse error, 
it blasts out of the interpreter, but leaves an error node in the tree 
indicating where the problem was.

The reason you care about this is because of the GUI dev environment.  
Imagine prototyping a language.  You're building the grammar and you 
want to constantly check a small sample input against your grammar.  
Generating code, compiling, and running it is a hassle.  With the GUI, 
you'll be able to immediately test input against the grammar or just a 
single rule etc... :)  Hooray!

BTW, the interpreter is actually pretty fast. :)

For the curious, here is what the code looks like that reads in the 
java.g grammar dynamically and interprets an input file.  Note that the 
java.g file is a combined parser/lexer and hence the call to get the 
lexer grammar from the original grammar.  This seems pretty clean to me 
for such a real world problem.

Grammar parser =
     new Grammar("java.g", new BufferedReader(new FileReader("java.g")));

String lexerGrammarText = parser.getLexerGrammar();
Grammar lexer = new Grammar();
lexer.importTokenVocabulary(parser); // make sure token types line up
lexer.setGrammarContent(lexerGrammarText);

CharStream input = new ANTLRFileStream(args[0]);
Interpreter lexEngine = new Interpreter(lexer, input);
CommonTokenStream tokens = new CommonTokenStream(lexEngine);
// parser tunes to channel one by default, ignores stuff on other 
channels.
// can't execute actions in the lexer so I have to force certain tokens 
to
// be ignored
tokens.setTokenTypeChannel(lexer.getTokenType("WS"), 99);
tokens.setTokenTypeChannel(lexer.getTokenType("SL_COMMENT"), 99);
tokens.setTokenTypeChannel(lexer.getTokenType("ML_COMMENT"), 99);

System.out.println("tokens="+tokens.toString()); // print all tokens
Interpreter parseEngine = new Interpreter(parser, tokens);
ParseTree t = parseEngine.parse("compilationUnit"); // interpret

System.out.println(t); // print parse tree

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From ewbank at gmail.com  Thu Mar 17 14:29:18 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Mar 17 14:29:21 2005
Subject: [antlr-interest] Code beautifier-indentation
In-Reply-To: <16953.56320.270303.524511@despot.non.net>
References: <389DFA1991602B4DB5E5691B00929EB9044E9C@bpsdk910.bphx.dk>
	<16953.56320.270303.524511@despot.non.net>
Message-ID: <dd3a065f050317142961cd1b01@mail.gmail.com>

To expand on John's question...

Do you need to split/merge lines, or simply change the indents.  The
example you showed only adjusts leading whitespace, so it's hard to
tell.

It may be as simple as a hack that says "map must start in column 4",
or it may be much more complex.

Please say more about the problem you need to solve; it may be (gasp)
that ANTLR isn't the right tool for you to do solve it.  No, really
:-)

- B
From rprememail at yahoo.com  Thu Mar 17 14:48:36 2005
From: rprememail at yahoo.com (Premkumar Rathanavelu)
Date: Thu Mar 17 14:48:39 2005
Subject: [antlr-interest] Need help: How to Remove comments before Parsing?
Message-ID: <20050317224836.450.qmail@web80903.mail.scd.yahoo.com>

Hi to all ANTLR -ers,
   New to ANTLR, I'm writing a Preprocessor Grammar file and strucking with the comments... i have got an idea to remove all the comments before doing parsing/lexing .. so please give me some tipps to embed java codes through actions({..}) in the grammar file itself .. so that the rules should act on the input file only after removing all the comments.. 
 
The rules like 

Comment 

: "/*" 

( {LA(2) != '/'}? '*'

| EndOfLine {newline();}

| ~('*'|'\r' | '\n'|' ')

| Whitespace

)* 

"*/" {$setType(Token.SKIP);}

;

CPPComment

: "//" (~('\n' | '\r'))* EndOfLine

{$setType(Token.SKIP); newline();} 

;

are not suitable for me .. 

Please help me to solve the problem ..I will be grateful to you..

Thanks,

PREM


		
---------------------------------
Do you Yahoo!?
 Yahoo! Small Business - Try our new resources site! 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050317/88d14a8a/attachment.html
From KoenSegers at scarlet.be  Thu Mar 17 15:28:04 2005
From: KoenSegers at scarlet.be (Koen Segers)
Date: Thu Mar 17 15:28:17 2005
Subject: [antlr-interest] treeParser problem
Message-ID: <200503180028.04837.KoenSegers@scarlet.be>

Hi,

I have a problem with the treeParser.
In Parser I created an ast. In treeParser I walk this one.

I have this in my walker:
parameterType=typeSpecifier (par:ID)

If the ID isn't in the ast the error is:
<AST>: expecting ID, found '<empty tree>'

how can I give the line number + column number?

-- 

Koen Segers

<koensegers@scarlet.be>
<http://eddyvite.dyndns.org>
From ewbank at gmail.com  Thu Mar 17 15:58:27 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Mar 17 15:58:30 2005
Subject: [antlr-interest] another milestone for v3.0
In-Reply-To: <c60f5d4e22a4f89fb6ed5a15a4f05a04@cs.usfca.edu>
References: <c60f5d4e22a4f89fb6ed5a15a4f05a04@cs.usfca.edu>
Message-ID: <dd3a065f05031715587eca7650@mail.gmail.com>

Go go Ter!


On Thu, 17 Mar 2005 13:02:19 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:
> Just this morning I was able to get ANTLR to *interpret* the java.g
> grammar.  In other words, instead of generating a parser in some
> language, compiling it, and then running it on some java input, I was
> able to parse Java w/o generating code or compiling at all.  The result
> of interpretation is a parse tree always.  If there is a parse error,
> it blasts out of the interpreter, but leaves an error node in the tree
> indicating where the problem was.
From johnm-antlr at non.net  Thu Mar 17 16:33:23 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Thu Mar 17 16:33:07 2005
Subject: [antlr-interest] Need help: How to Remove comments before Parsing?
In-Reply-To: <20050317224836.450.qmail@web80903.mail.scd.yahoo.com>
References: <20050317224836.450.qmail@web80903.mail.scd.yahoo.com>
Message-ID: <16954.8659.182177.314133@despot.non.net>

>>>>> "Premkumar" == Premkumar Rathanavelu <rprememail@yahoo.com> writes:
[...]

> The rules like
[...Comment...]
> are not suitable for me ..

Why?

Thanks,
	John
From davmac at deakin.edu.au  Thu Mar 17 17:24:12 2005
From: davmac at deakin.edu.au (Davin McCall)
Date: Thu Mar 17 17:20:10 2005
Subject: [antlr-interest] java.g - a couple of issues
In-Reply-To: <4238BAD6.1000808@deakin.edu.au>
References: <4238BAD6.1000808@deakin.edu.au>
Message-ID: <423A2DBC.9090100@deakin.edu.au>

To clarify, we have changed the single line comment target "SL_COMMENT" 
as follows:

(Original)
// Single-line comments
SL_COMMENT
    :    "//"
        (~('\n'|'\r'))* ('\n'|'\r'('\n')?)
        {$setType(Token.SKIP); newline();}
    ;

(Modified)
// Single-line comments
SL_COMMENT
    :    "//"
        (~('\n'|'\r'))*
        {$setType(Token.SKIP); }
    ;

And the typeArgumentBounds target from:

typeArgumentBounds[boolean addImagNode]
    {boolean isUpperBounds = false;}
    :
        ( "extends"! {isUpperBounds=true;} | "super"! ) 
classOrInterfaceType[addImagNode]
        {
            if (isUpperBounds)
            {
                #typeArgumentBounds = 
#(#[TYPE_UPPER_BOUNDS,"TYPE_UPPER_BOUNDS"], #typeArgumentBounds);
            }
            else
            {
                #typeArgumentBounds = 
#(#[TYPE_LOWER_BOUNDS,"TYPE_LOWER_BOUNDS"], #typeArgumentBounds);
            }
        }
    ;

To:

typeArgumentBounds[boolean addImagNode]
    {boolean isUpperBounds = false;}
    :
        ( "extends"! {isUpperBounds=true;} | "super"! ) 
classOrInterfaceType[addImagNode] arraySpecOpt
        {
            if (isUpperBounds)
            {
                #typeArgumentBounds = 
#(#[TYPE_UPPER_BOUNDS,"TYPE_UPPER_BOUNDS"], #typeArgumentBounds);
            }
            else
            {
                #typeArgumentBounds = 
#(#[TYPE_LOWER_BOUNDS,"TYPE_LOWER_BOUNDS"], #typeArgumentBounds);
            }
        }
    ;


Davin


Davin McCall wrote:

> Hi,
> We're using Michael Studman's java 1.5 grammar as a base for our own 
> and have noticed the following issues. We've got fixes but I wanted to 
> both highlight the issues to the community and see if anyone else has 
> comments (especially in regards to whether the fixes are correct :-) ).
>
> 1. Single line comments without a terminating newline at the end of a 
> file cause a parse error, due to the requirement that the comment is 
> followed by a line-end.
>
> It seems to be possible to just remove that requirement (and also the 
> call to newline()) and then everything works fine (ie. the match is 
> greedy anyway).
>
> 2. Arrays aren't allowed as wildcard bounds (they should be).
>
> For instance, "? extends Thread[]" as a wildcard in some declaration 
> causes a parse error. A possible fix is to add "arraySpecOpt" in to 
> the "typeArgumentBounds" target.
>
> Davin
>
>
>

From rprememail at yahoo.com  Thu Mar 17 17:39:58 2005
From: rprememail at yahoo.com (Premkumar Rathanavelu)
Date: Thu Mar 17 17:40:01 2005
Subject: [antlr-interest] Re: Need help: How to remove comments before
	parsing?
Message-ID: <20050318013958.44181.qmail@web80909.mail.scd.yahoo.com>

Hi ..
 Thanks for your relply.
Your Question : Why the comment rules are not working ? 
Ans: Because, take 
Eg : #define MAX_SETUP_STRINGS  (sizeof(setup_strings) / sizeof(char *))  /*comment*/
In the above eg. my rule should parse/lex 
after #define " MAX_SETUP_STRINGS "  -
 this should be done seperately and written to the DB 
and then whatever comes next to this,
 that is here in this eg.,  "(sizeof(setup_strings) / sizeof(char *)) " -
 this should be written to the DB seperately and 
after that comments should be skipped.. removing comments is very important..
 
The rule what i tried and became tired --
 this is for the third part that is the replacement value ..in lexer 

ReplacementList returns [String Replacement=""]
:

(

Rep :PPtokens

{Replacement = Rep.getText();}

)

;

PPtokens  
:

 id:ID  

| num:Number 

| cl:CharLiteral 

| sl:StringLiteral 

| opt:OPERATORS

 ;  

Explanation : As the #define macros ( Object-like and Function -like) has very 
complex structure of expanding its macros i.e. sometimes with lot of
 operators and expressions, I can't able to write a perfect rule for 
parsing the replacement value and so I thought of capturing all
 everything upto the nextline.But here the problem comes due 
to comments.I can use the comment rules to skip ..but it is not
 working in this context becos I'm capturing all up to the end of the line.. 
 
Result:The comments are also written to my
          Database together with the replacement value.
 
Suggestion: I tried by exploring lot of rules and 
            now I got an idea to precompile the files(.c or .h or .cpp) 
            to remove all the comments by using  some tools 
            and then acting grammar upon them.
 
Please reply me whether this above concept work ? 
 
Pleasure to have comments..
Thanks.,
PREM

		
---------------------------------
Do you Yahoo!?
 Yahoo! Small Business - Try our new resources site! 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050317/2c2423ba/attachment.html
From johnm-antlr at non.net  Thu Mar 17 17:50:39 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Thu Mar 17 17:50:20 2005
Subject: [antlr-interest] Re: Need help: How to remove comments before parsing?
In-Reply-To: <20050318013958.44181.qmail@web80909.mail.scd.yahoo.com>
References: <20050318013958.44181.qmail@web80909.mail.scd.yahoo.com>
Message-ID: <16954.13295.191156.487710@despot.non.net>

Your sketch of how you're trying to handle C preprocessor constructs
doesn't sound powerful enough to be correct.  It's more complicated than
you think. :-) :-(

I'd suggest getting a copy of the C Standard and particularly studying the
early phases of translation that they explain.  You can also look at the
Standard C ('89) grammar that's part of the GCC bundle that we built
(available on antlr.org) for some help on some of those phased (but not on
the CPP mess).

Hope this helps,
		John
From jpschewe at mtu.net  Thu Mar 17 19:26:16 2005
From: jpschewe at mtu.net (Jon Schewe)
Date: Thu Mar 17 19:26:23 2005
Subject: [antlr-interest] java.g - a couple of issues
In-Reply-To: <423A2DBC.9090100@deakin.edu.au>
References: <4238BAD6.1000808@deakin.edu.au> <423A2DBC.9090100@deakin.edu.au>
Message-ID: <1111116376.23947.17.camel@workstation.mn.mtu.net>

One problem with this is that if you remove the calls to newline(),
you're line numbers will be off.  This makes error reporting rather
difficult.

On Fri, 2005-03-18 at 12:24 +1100, Davin McCall wrote:
> To clarify, we have changed the single line comment target "SL_COMMENT" 
> as follows:
> 
> (Original)
> // Single-line comments
> SL_COMMENT
>     :    "//"
>         (~('\n'|'\r'))* ('\n'|'\r'('\n')?)
>         {$setType(Token.SKIP); newline();}
>     ;
> 
> (Modified)
> // Single-line comments
> SL_COMMENT
>     :    "//"
>         (~('\n'|'\r'))*
>         {$setType(Token.SKIP); }
>     ;
> 
> And the typeArgumentBounds target from:
> 
> typeArgumentBounds[boolean addImagNode]
>     {boolean isUpperBounds = false;}
>     :
>         ( "extends"! {isUpperBounds=true;} | "super"! ) 
> classOrInterfaceType[addImagNode]
>         {
>             if (isUpperBounds)
>             {
>                 #typeArgumentBounds = 
> #(#[TYPE_UPPER_BOUNDS,"TYPE_UPPER_BOUNDS"], #typeArgumentBounds);
>             }
>             else
>             {
>                 #typeArgumentBounds = 
> #(#[TYPE_LOWER_BOUNDS,"TYPE_LOWER_BOUNDS"], #typeArgumentBounds);
>             }
>         }
>     ;
> 
> To:
> 
> typeArgumentBounds[boolean addImagNode]
>     {boolean isUpperBounds = false;}
>     :
>         ( "extends"! {isUpperBounds=true;} | "super"! ) 
> classOrInterfaceType[addImagNode] arraySpecOpt
>         {
>             if (isUpperBounds)
>             {
>                 #typeArgumentBounds = 
> #(#[TYPE_UPPER_BOUNDS,"TYPE_UPPER_BOUNDS"], #typeArgumentBounds);
>             }
>             else
>             {
>                 #typeArgumentBounds = 
> #(#[TYPE_LOWER_BOUNDS,"TYPE_LOWER_BOUNDS"], #typeArgumentBounds);
>             }
>         }
>     ;
> 
> 
> Davin
> 
> 
> Davin McCall wrote:
> 
> > Hi,
> > We're using Michael Studman's java 1.5 grammar as a base for our own 
> > and have noticed the following issues. We've got fixes but I wanted to 
> > both highlight the issues to the community and see if anyone else has 
> > comments (especially in regards to whether the fixes are correct :-) ).
> >
> > 1. Single line comments without a terminating newline at the end of a 
> > file cause a parse error, due to the requirement that the comment is 
> > followed by a line-end.
> >
> > It seems to be possible to just remove that requirement (and also the 
> > call to newline()) and then everything works fine (ie. the match is 
> > greedy anyway).
> >
> > 2. Arrays aren't allowed as wildcard bounds (they should be).
> >
> > For instance, "? extends Thread[]" as a wildcard in some declaration 
> > causes a parse error. A possible fix is to add "arraySpecOpt" in to 
> > the "typeArgumentBounds" target.
> >
> > Davin
> >
> >
> >

________________________________________________________________________
Jon Schewe | http://mtu.net/~jpschewe
GPG signature at http://mtu.net/~jpschewe/gpg.sig.html
For I am convinced that neither death nor life, neither angels 
nor demons, neither the present nor the future, nor any 
powers, neither height nor depth, nor anything else in all 
creation, will be able to separate us from the love of God that 
is in Christ Jesus our Lord. - Romans 8:38-39



From prashant.deva at gmail.com  Thu Mar 17 20:44:09 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Thu Mar 17 20:44:13 2005
Subject: [antlr-interest] Whats the diff between 'protected' and 'Token.SKIP'
Message-ID: <41fed8f8050317204412075ce2@mail.gmail.com>

Whats the diff between marking a token as 'SKIP' and marking it as 'protected'.
Eg- 
Whats the diff between the 2 rules - 
WS   : ('\t' | '\r' | ' ') {_ttype=Token.SKIP;} ;

protected WS   : ('\t' | '\r' | ' ') ;

PRASHANT
From davmac at deakin.edu.au  Thu Mar 17 20:50:10 2005
From: davmac at deakin.edu.au (Davin McCall)
Date: Thu Mar 17 20:44:56 2005
Subject: [antlr-interest] java.g - a couple of issues
In-Reply-To: <1111116376.23947.17.camel@workstation.mn.mtu.net>
References: <4238BAD6.1000808@deakin.edu.au>	 <423A2DBC.9090100@deakin.edu.au>
	<1111116376.23947.17.camel@workstation.mn.mtu.net>
Message-ID: <423A5E02.9050304@deakin.edu.au>

Thanks, but it actually seems like the line numbers are off if we leave 
the call to "newline()" _in_.

As far as I can tell, because we are no longer matching the newline 
character sequence in SL_COMMENT, it instead gets matched in the 
whitespace target, which includes a call to newline() anyway:

// Whitespace -- ignored
WS    :    (    ' '
        |    '\t'
        |    '\f'
            // handle newlines
        |    (    options {generateAmbigWarnings=false;}
            :    "\r\n"  // Evil DOS
            |    '\r'    // Macintosh
            |    '\n'    // Unix (the right way)
            )
            { newline(); }
        )+
        { _ttype = Token.SKIP; }
    ;

- Davin


Jon Schewe wrote:

>One problem with this is that if you remove the calls to newline(),
>you're line numbers will be off.  This makes error reporting rather
>difficult.
>
>On Fri, 2005-03-18 at 12:24 +1100, Davin McCall wrote:
>  
>
>>To clarify, we have changed the single line comment target "SL_COMMENT" 
>>as follows:
>>
>>(Original)
>>// Single-line comments
>>SL_COMMENT
>>    :    "//"
>>        (~('\n'|'\r'))* ('\n'|'\r'('\n')?)
>>        {$setType(Token.SKIP); newline();}
>>    ;
>>
>>(Modified)
>>// Single-line comments
>>SL_COMMENT
>>    :    "//"
>>        (~('\n'|'\r'))*
>>        {$setType(Token.SKIP); }
>>    ;
>>
>>And the typeArgumentBounds target from:
>>
>>typeArgumentBounds[boolean addImagNode]
>>    {boolean isUpperBounds = false;}
>>    :
>>        ( "extends"! {isUpperBounds=true;} | "super"! ) 
>>classOrInterfaceType[addImagNode]
>>        {
>>            if (isUpperBounds)
>>            {
>>                #typeArgumentBounds = 
>>#(#[TYPE_UPPER_BOUNDS,"TYPE_UPPER_BOUNDS"], #typeArgumentBounds);
>>            }
>>            else
>>            {
>>                #typeArgumentBounds = 
>>#(#[TYPE_LOWER_BOUNDS,"TYPE_LOWER_BOUNDS"], #typeArgumentBounds);
>>            }
>>        }
>>    ;
>>
>>To:
>>
>>typeArgumentBounds[boolean addImagNode]
>>    {boolean isUpperBounds = false;}
>>    :
>>        ( "extends"! {isUpperBounds=true;} | "super"! ) 
>>classOrInterfaceType[addImagNode] arraySpecOpt
>>        {
>>            if (isUpperBounds)
>>            {
>>                #typeArgumentBounds = 
>>#(#[TYPE_UPPER_BOUNDS,"TYPE_UPPER_BOUNDS"], #typeArgumentBounds);
>>            }
>>            else
>>            {
>>                #typeArgumentBounds = 
>>#(#[TYPE_LOWER_BOUNDS,"TYPE_LOWER_BOUNDS"], #typeArgumentBounds);
>>            }
>>        }
>>    ;
>>
>>
>>Davin
>>
>>
>>Davin McCall wrote:
>>
>>    
>>
>>>Hi,
>>>We're using Michael Studman's java 1.5 grammar as a base for our own 
>>>and have noticed the following issues. We've got fixes but I wanted to 
>>>both highlight the issues to the community and see if anyone else has 
>>>comments (especially in regards to whether the fixes are correct :-) ).
>>>
>>>1. Single line comments without a terminating newline at the end of a 
>>>file cause a parse error, due to the requirement that the comment is 
>>>followed by a line-end.
>>>
>>>It seems to be possible to just remove that requirement (and also the 
>>>call to newline()) and then everything works fine (ie. the match is 
>>>greedy anyway).
>>>
>>>2. Arrays aren't allowed as wildcard bounds (they should be).
>>>
>>>For instance, "? extends Thread[]" as a wildcard in some declaration 
>>>causes a parse error. A possible fix is to add "arraySpecOpt" in to 
>>>the "typeArgumentBounds" target.
>>>
>>>Davin
>>>
>>>
>>>
>>>      
>>>
>
>________________________________________________________________________
>Jon Schewe | http://mtu.net/~jpschewe
>GPG signature at http://mtu.net/~jpschewe/gpg.sig.html
>For I am convinced that neither death nor life, neither angels 
>nor demons, neither the present nor the future, nor any 
>powers, neither height nor depth, nor anything else in all 
>creation, will be able to separate us from the love of God that 
>is in Christ Jesus our Lord. - Romans 8:38-39
>
>
>
>
>
>  
>

From atripp at comcast.net  Thu Mar 17 21:02:49 2005
From: atripp at comcast.net (Andy Tripp)
Date: Thu Mar 17 21:02:59 2005
Subject: [antlr-interest] Code beautifier-indentation
In-Reply-To: <20050317200004.133B4DCD44@www.antlr.org>
References: <20050317200004.133B4DCD44@www.antlr.org>
Message-ID: <423A60F9.5000600@comcast.net>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050318/f0728425/attachment.html
From Loring.G.Craymer at jpl.nasa.gov  Thu Mar 17 21:33:47 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Thu Mar 17 21:33:49 2005
Subject: [antlr-interest] Whats the diff between 'protected' and
	'Token.SKIP'
In-Reply-To: <41fed8f8050317204412075ce2@mail.gmail.com>
Message-ID: <200503180533.j2I5Xkx5002260@eis-msg-012.jpl.nasa.gov>

protected rules do not produce tokens--they must be called by public rules
which do produce tokens.

--Loring

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Prashant Deva
> Sent: Thursday, March 17, 2005 8:44 PM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Whats the diff between 'protected' and
> 'Token.SKIP'
> 
> Whats the diff between marking a token as 'SKIP' and marking it as
> 'protected'.
> Eg-
> Whats the diff between the 2 rules -
> WS   : ('\t' | '\r' | ' ') {_ttype=Token.SKIP;} ;
> 
> protected WS   : ('\t' | '\r' | ' ') ;
> 
> PRASHANT

From prashant.deva at gmail.com  Thu Mar 17 22:35:56 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Thu Mar 17 22:35:59 2005
Subject: [antlr-interest] Whats the diff between 'protected' and
	'Token.SKIP'
In-Reply-To: <200503180533.j2I5Xkx5002260@eis-msg-012.jpl.nasa.gov>
References: <41fed8f8050317204412075ce2@mail.gmail.com>
	<200503180533.j2I5Xkx5002260@eis-msg-012.jpl.nasa.gov>
Message-ID: <41fed8f8050317223515401de1@mail.gmail.com>

> protected rules do not produce tokens--they must be called by public rules
> which do produce tokens.
Well it seems the token doesn't get created when you set the toke type
as skip , too.
Here is the code from a generated lexer -
if ( _createToken && _token==null && _ttype!=Token.SKIP ) {
			_token = makeToken(_ttype);
			_token.setText(new String(text.getBuffer(), _begin, text.length()-_begin));
		}

So as you can see , in both the cases the token doesn't get created.
Then how are they different.

PRASHANT


On Thu, 17 Mar 2005 21:33:47 -0800, Loring Craymer
<Loring.G.Craymer@jpl.nasa.gov> wrote:
> protected rules do not produce tokens--they must be called by public rules
> which do produce tokens.
> 
> --Loring
> 
> > -----Original Message-----
> > From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> > bounces@antlr.org] On Behalf Of Prashant Deva
> > Sent: Thursday, March 17, 2005 8:44 PM
> > To: antlr-interest@antlr.org
> > Subject: [antlr-interest] Whats the diff between 'protected' and
> > 'Token.SKIP'
> >
> > Whats the diff between marking a token as 'SKIP' and marking it as
> > 'protected'.
> > Eg-
> > Whats the diff between the 2 rules -
> > WS   : ('\t' | '\r' | ' ') {_ttype=Token.SKIP;} ;
> >
> > protected WS   : ('\t' | '\r' | ' ') ;
> >
> > PRASHANT
> 
>
From prashant.deva at gmail.com  Thu Mar 17 22:55:27 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Thu Mar 17 22:55:30 2005
Subject: [antlr-interest] ANTLR 3 dev status?
In-Reply-To: <41fed8f805031722546cb8b494@mail.gmail.com>
References: <2739.160.91.212.176.1110991191.squirrel@callisto.ornl.gov>
	<16952.25724.598666.648107@despot.non.net>
	<2816.160.91.212.176.1110993116.squirrel@callisto.ornl.gov>
	<16952.29045.988950.639850@despot.non.net>
	<f107c4dacf7f6195ed3aec6cddb1ed0d@cs.usfca.edu>
	<41fed8f805031722546cb8b494@mail.gmail.com>
Message-ID: <41fed8f805031722554a17f37@mail.gmail.com>

I have been working on an ANTLR IDE for eclipse for some time.
Its called - ANTLR Studio
 
I will be releasing a web address in a few days time :)

 PRASHANT

> 
> 
> On Wed, 16 Mar 2005 10:53:12 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:
> >
> > On Mar 16, 2005, at 9:48 AM, John D. Mitchell wrote:
> > > (A) Alas, the search mechanism on the Antlr.org site doesn't (yet?)
> > > spider
> > > the mailing list archives.  [The search seems to be particularly
> > > problematic in that I just tried to use it and it gave me one page of
> > > (useless) results without any way to get to any other pages. Ouch.]
> >
> > It did until yesterday when I killed it so you can actually see the
> > articles in the results ;)  The mailing list was flooding the search
> > resutls.  I need to make that a separate thing.  I'll get to it ;)
> >
> > > (D) The idea is to have something that the adventurous can play with
> > > available later this year.  Knowing Ter, I wouldn't expect it until
> > > the end
> > > of the summer break. :-)
> >
> > Yep, I'm going very slowly and carefully!  For a full release probably
> > end of Summer.  For an early access, however, only a few short months
> > away! :)  Hooray!
> >
> > Ter
> > --
> > CS Professor & Grad Director, University of San Francisco
> > Creator, ANTLR Parser Generator, http://www.antlr.org
> > Cofounder, http://www.jguru.com
> >
> >
>
From nbsherid at secsme.org.au  Thu Mar 17 23:45:45 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Thu Mar 17 23:45:50 2005
Subject: [antlr-interest] Whats the diff between 'protected'
	and'Token.SKIP'
In-Reply-To: <41fed8f8050317223515401de1@mail.gmail.com>
Message-ID: <000001c52b8e$7ed97ca0$0500a8c0@nigel>


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Prashant Deva
> Sent: Friday, 18 March 2005 5:36 PM
> To: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] Whats the diff between 'protected'
> and'Token.SKIP'
> 
> > protected rules do not produce tokens--they must be called by public
> rules
> > which do produce tokens.
> Well it seems the token doesn't get created when you set the toke type
> as skip , too.
> Here is the code from a generated lexer -
> if ( _createToken && _token==null && _ttype!=Token.SKIP ) {
> 			_token = makeToken(_ttype);
> 			_token.setText(new String(text.getBuffer(), _begin,
> text.length()-_begin));
> 		}
> 
> So as you can see , in both the cases the token doesn't get created.
> Then how are they different.
> 


Both protected and non-protected rules can lead to the creation of tokens.
However, protected rules do not create tokens of their own, but contribute
to other tokens.

e.g.

A: 'c' B 'd';
protected B: 'z';

When the lexer reads the input stream, it constructs an "A" token if it sees
'c' followed by 'z' followed by 'd'. However, it will never construct a "B"
token on its own, consisting of only the 'z', because it is a protected
rule.

Setting "skip" on a (constructed) token prevents it from being forwarded on
to the parser. Consequently, it is often used for comments and white-space,
since these are irrelevant to many parsers. I have no idea what setting skip
on a protected rule does, though. Probably just changes the skip flag on the
encapsulating rule(s).

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435


From mmoktali at bphx.dk  Fri Mar 18 00:04:20 2005
From: mmoktali at bphx.dk (Meena Moktali)
Date: Fri Mar 18 00:05:10 2005
Subject: [antlr-interest] Code beautifier-indentation
Message-ID: <389DFA1991602B4DB5E5691B00929EB904FCCA@bpsdk910.bphx.dk>

hi John & Bryan,
The example I have shown is just doing indentation...to start with..:)
I also know that I have to keep track of the levels and change the columns...just not getting the proper grammar 
for it.I also have to reformat it ---
keep track of line size,put the 'of' under another 'of' and 'map'under 'map'.

I am trying out with the help of treewalk.g ,but getting stuck.
I shall be grateful if u can suggest me a sample grammar for the indentation,the rest I think I can 
manage.Also I welcome suggestions for any other option to ANTLR...:)
I have a scary deadline..please help!



-----Original Message-----
From: Bryan Ewbank [mailto:ewbank@gmail.com]
Sent: 18. marts 2005 00:29
To: antlr-interest@antlr.org
Subject: Re: [antlr-interest] Code beautifier-indentation


To expand on John's question...

Do you need to split/merge lines, or simply change the indents.  The
example you showed only adjusts leading whitespace, so it's hard to
tell.

It may be as simple as a hack that says "map must start in column 4",
or it may be much more complex.

Please say more about the problem you need to solve; it may be (gasp)
that ANTLR isn't the right tool for you to do solve it.  No, really
:-)

- B
From mmoktali at bphx.dk  Fri Mar 18 01:53:36 2005
From: mmoktali at bphx.dk (Meena Moktali)
Date: Fri Mar 18 01:54:22 2005
Subject: [antlr-interest] Code beautifier-indentation
Message-ID: <389DFA1991602B4DB5E5691B00929EB9044E9F@bpsdk910.bphx.dk>

hi everyone!
Can anyone tell me what do the below given variables do?

codeGenMakeSwitchThreshold = 3;
codeGenBitsetTestThreshold = 4;


regs,
Meena

-----Original Message-----
From: Bryan Ewbank [mailto:ewbank@gmail.com]
Sent: 18. marts 2005 00:29
To: antlr-interest@antlr.org
Subject: Re: [antlr-interest] Code beautifier-indentation


To expand on John's question...

Do you need to split/merge lines, or simply change the indents.  The
example you showed only adjusts leading whitespace, so it's hard to
tell.

It may be as simple as a hack that says "map must start in column 4",
or it may be much more complex.

Please say more about the problem you need to solve; it may be (gasp)
that ANTLR isn't the right tool for you to do solve it.  No, really
:-)

- B
From ewbank at gmail.com  Fri Mar 18 02:37:30 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Mar 18 02:37:33 2005
Subject: [antlr-interest] Code beautifier-indentation
In-Reply-To: <389DFA1991602B4DB5E5691B00929EB9044E9F@bpsdk910.bphx.dk>
References: <389DFA1991602B4DB5E5691B00929EB9044E9F@bpsdk910.bphx.dk>
Message-ID: <dd3a065f0503180237777da4e3@mail.gmail.com>

Both options control parts of how code is generated.  Theres a fairly
complete reference manual on-line; references to what your asking
about are here:

http://www.antlr.org/doc/options.html#codeGenMakeSwitchThreshold - a
threshold  for using if/else versus switch statements.

http://www.antlr.org/doc/options.html#codeBitsetTestThreshold - a
threshold for building and using bitsets.

I've been fairly successful with google "antlr foo" to find
information on antlr-related stuff.

On Fri, 18 Mar 2005 10:53:36 +0100, Meena Moktali <mmoktali@bphx.dk> wrote:
> hi everyone!
> Can anyone tell me what do the below given variables do?
> 
> codeGenMakeSwitchThreshold = 3;
> codeGenBitsetTestThreshold = 4;
From demakov at ispras.ru  Fri Mar 18 02:40:02 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Fri Mar 18 02:40:08 2005
Subject: [antlr-interest] Code beautifier-indentation
References: <389DFA1991602B4DB5E5691B00929EB9044E9F@bpsdk910.bphx.dk>
Message-ID: <009001c52ba6$d7acaab0$8cc79553@marlboro>

http://www.antlr.org/doc/options.html#codeGenMakeSwitchThreshold

----- Original Message ----- 
From: "Meena Moktali" <mmoktali@bphx.dk>
To: <antlr-interest@antlr.org>
Sent: Friday, March 18, 2005 12:53 PM
Subject: RE: [antlr-interest] Code beautifier-indentation


> hi everyone!
> Can anyone tell me what do the below given variables do?
> 
> codeGenMakeSwitchThreshold = 3;
> codeGenBitsetTestThreshold = 4;
> 
> 
> regs,
> Meena
> 
> -----Original Message-----
> From: Bryan Ewbank [mailto:ewbank@gmail.com]
> Sent: 18. marts 2005 00:29
> To: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] Code beautifier-indentation
> 
> 
> To expand on John's question...
> 
> Do you need to split/merge lines, or simply change the indents.  The
> example you showed only adjusts leading whitespace, so it's hard to
> tell.
> 
> It may be as simple as a hack that says "map must start in column 4",
> or it may be much more complex.
> 
> Please say more about the problem you need to solve; it may be (gasp)
> that ANTLR isn't the right tool for you to do solve it.  No, really
> :-)
> 
> - B
> 

From koensegers at scarlet.be  Fri Mar 18 06:22:56 2005
From: koensegers at scarlet.be (Koen Segers)
Date: Fri Mar 18 06:23:00 2005
Subject: [antlr-interest] error messages + treeParser with OR'ed root
Message-ID: <IDJXA8$115BD48DC639889BA2872075606455A3@scarlet.be>

Hi,

I have 2 problems.

First one is a problem with the treeParser.
In Parser I created an ast. In treeParser I walk this one.

I have this in my walker:
parameterType=typeSpecifier (par:ID)

If the ID isn't in the ast the error is:
<AST>: expecting ID, found '<empty tree>'

how can I give the line number + column number?

Second problem has to do with an root in walker that is OR'ed.
#( (PLUS|MINUS|STAR|DIV) lType = expr rType = expr)
gives an error of unexpected token '('.

Any idea how I can fix this?


Greetz

Thx in advance.


-- 

Koen Segers


-----------------------------------------------------
Let op! Mijn mailadres verandert naar ... @scarlet.be 
Gelieve dit aan te passen in uw adresboek.

From johnm-antlr at non.net  Fri Mar 18 06:55:31 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Fri Mar 18 06:55:12 2005
Subject: [antlr-interest] Code beautifier-indentation
In-Reply-To: <389DFA1991602B4DB5E5691B00929EB904FCCA@bpsdk910.bphx.dk>
References: <389DFA1991602B4DB5E5691B00929EB904FCCA@bpsdk910.bphx.dk>
Message-ID: <16954.60387.337842.450384@despot.non.net>

>>>>> "Meena" == Meena Moktali <mmoktali@bphx.dk> writes:
[...]

> hi John & Bryan, The example I have shown is just doing indentation...to
> start with..:) I also know that I have to keep track of the levels and
> change the columns...just not getting the proper grammar for it.I also
> have to reformat it --- keep track of line size,put the 'of' under
> another 'of' and 'map'under 'map'.

So, that now sounds like you want a full source-to-soruce translator.
If you want to do a very high-quality job, that can be very painful.  If
you want to merely do an okay job, that's pretty straight forward.

> I am trying out with the help of treewalk.g ,but getting stuck.  I shall
> be grateful if u can suggest me a sample grammar for the indentation,the
> rest I think I can manage.Also I welcome suggestions for any other option
> to ANTLR...:) I have a scary deadline..please help!

Check out the C/GCC translator that's available on antlr.org. In terms of
the rewriting, the idea is to start with a clean treeparser (like
GnuCTreeParser) and then, if you need to do any structural changes, create
one or more tree transformation passes.  In terms of printing out the tree,
check out GnuCEmitter.g for an example of one way of doing it.

Have fun,
	John
From MVerma at ferranti.be  Fri Mar 18 07:36:27 2005
From: MVerma at ferranti.be (Michiel Vermandel)
Date: Fri Mar 18 07:36:33 2005
Subject: [antlr-interest] Problem with PLSQLGrammar.g
Message-ID: <919392D7803AE7489E03BFED5E52E82F017EE15F@MAIL.ferranti.be>

Hi,
 
First of all I'm brand new in using AntLr.
I was looking for a PLS/QL code parser and came across AntLr.
While trying to generate the classes out of the PLSQLGrammar.g file I
stumbled on an error.
Given my lack of experience with AntLr I'm stuck.
 
This is what I did:
 
I installed AntLr version 2.7.5 on a Win2k machine and downloaded the
PLSQLGrammar.g file (version: Krupa Benhur Sun Feb 6, 2005 21:04).
 
Running "antlr.Tool PLSQLGrammar.g" results in a number of java files.
PLSqlParser.java
PLSqlLexer.java
and others...
 
During the generation a lot of warnings are show.
At the bottom of this mail you find some of them in section A.
I dumpt the warning output into a file which is in total about 382kb.
I can send the complete file upon request.
 
Though, because I only found warnings and the .java files were created I
continued with compiling these .java files.
 
I use javac.exe. 
I can't find out how to get the version of it but it's installed
together with a java.exe which says this:
 java version "1.3.1_02"
 Java(TM) 2 Runtime Environment, Standard Edition (build 1.3.1_02-b02)
 Java HotSpot(TM) Client VM (build 1.3.1_02-b02, mixed mode)
 
While compiling the .java files I get the errors as mentioned in section
B.
 
It seems to be going wrong on the AST class definition of
"SELECT_EXPRESSIONNode".
 
That's what I came up with...
 
But I don't have a clue how to fix this.
 
Hopefully someone does!
 
Thanks in advance.
 
Michiel
 
------------------------------------------------------------------------
---------------------------------------------------------------------
Section A:
------------
 
ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 jGuru.com
PLSQLGrammar.g: warning:lexical nondeterminism between rules IDENTIFIER
and ANY_CHARACTER upon
PLSQLGrammar.g:     k==1:'a'..'z'
PLSQLGrammar.g:     k==2:<end-of-token>
PLSQLGrammar.g: warning:lexical nondeterminism between rules DOT and
NUMBER upon
PLSQLGrammar.g:     k==1:'.'
PLSQLGrammar.g:     k==2:<end-of-token>
PLSQLGrammar.g: warning:lexical nondeterminism between rules PLUS and
NUMBER upon
PLSQLGrammar.g:     k==1:'+'
PLSQLGrammar.g:     k==2:<end-of-token>
PLSQLGrammar.g: warning:lexical nondeterminism between rules MINUS and
NUMBER upon
PLSQLGrammar.g:     k==1:'-'
PLSQLGrammar.g:     k==2:<end-of-token>
PLSQLGrammar.g: warning:lexical nondeterminism between rules DOUBLEDOT
and NUMBER upon
PLSQLGrammar.g:     k==1:'.'
PLSQLGrammar.g:     k==2:'.'
PLSQLGrammar.g:2064:35: warning:lexical nondeterminism between alts 1
and 2 of block upon
PLSQLGrammar.g:2064:35:     k==1:'\n'
PLSQLGrammar.g:2064:35:     k==2:<end-of-token>,'\t','\n','\r',' '
PLSQLGrammar.g:62:9: warning:nondeterminism between alts 1 and 2 of
block upon
PLSQLGrammar.g:62:9:     k==1:"package"
PLSQLGrammar.g:62:9:
k==2:"replace",QUOTED_STRING,"abs","ceil","floor","power","round","sign"
,"sqrt","trunc","chr","initcap","lower","lpad","ltrim","rpad","rtrim","s
oundex","substr","translate","upper","ascii","instr","length","concat","
count","chartorowid","convert","hextoraw","rawtohex","rowidtochar","to_c
har","to_date","to_number","decode","dump","greatest","least","nvl","use
renv","vsize","user","sysdate","intersect",IDENTIFIER
PLSQLGrammar.g:62:9:     k==3:"is","as",DOT
PLSQLGrammar.g:62:9:
k==4:"replace","subtype","cursor","type","procedure","function",QUOTED_S
TRING,"abs","ceil","floor","power","round","sign","sqrt","trunc","chr","
initcap","lower","lpad","ltrim","rpad","rtrim","soundex","substr","trans
late","upper","ascii","instr","length","concat","count","chartorowid","c
onvert","hextoraw","rawtohex","rowidtochar","to_char","to_date","to_numb
er","decode","dump","greatest","least","nvl","userenv","vsize","user","s
ysdate","intersect",IDENTIFIER
PLSQLGrammar.g:75: warning:nondeterminism upon
PLSQLGrammar.g:75:
k==1:"replace",QUOTED_STRING,"abs","ceil","floor","power","round","sign"
,"sqrt","trunc","chr","initcap","lower","lpad","ltrim","rpad","rtrim","s
oundex","substr","translate","upper","ascii","instr","length","concat","
count","chartorowid","convert","hextoraw","rawtohex","rowidtochar","to_c
har","to_date","to_number","decode","dump","greatest","least","nvl","use
renv","vsize","user","sysdate","intersect",IDENTIFIER
PLSQLGrammar.g:75:
k==2:"replace",DOT,"exception",QUOTED_STRING,"abs","ceil","floor","power
","round","sign","sqrt","trunc","chr","initcap","lower","lpad","ltrim","
rpad","rtrim","soundex","substr","translate","upper","ascii","instr","le
ngth","concat","count","chartorowid","convert","hextoraw","rawtohex","ro
widtochar","to_char","to_date","to_number","decode","dump","greatest","l
east","nvl","userenv","vsize","user","sysdate","intersect",IDENTIFIER
PLSQLGrammar.g:75:
k==3:"replace","is","as",SEMI,DOT,"not",ASSIGNMENT_EQ,OPEN_PAREN,PERCENT
AGE,"return",QUOTED_STRING,"abs","ceil","floor","power","round","sign","
sqrt","trunc","chr","initcap","lower","lpad","ltrim","rpad","rtrim","sou
ndex","substr","translate","upper","ascii","instr","length","concat","co
unt","chartorowid","convert","hextoraw","rawtohex","rowidtochar","to_cha
r","to_date","to_number","decode","dump","greatest","least","nvl","usere
nv","vsize","user","sysdate","intersect",IDENTIFIER
PLSQLGrammar.g:75:
k==4:"create","replace","is","as","end",SEMI,"begin",DOT,"not","null",AS
SIGNMENT_EQ,OPEN_PAREN,"exception",COLON,"goto","exit","binary_integer",
"natural","positive","number",NUMBER,"char","long","raw","boolean","date
","smallint","real","numeric","int","integer","double
precesion","decimal","dec","varchar2","varchar","character","mlslabel",P
ERCENTAGE,"return","table",PLUS,MINUS,"raise","while","for","loop","true
","false",QUOTED_STRING,"commit","if","select","abs","ceil","floor","mod
","power","round","sign","sqrt","trunc","chr","initcap","lower","lpad","
ltrim","rpad","rtrim","soundex","substr","translate","upper","ascii","in
str","length","concat","avg","count","max","min","stddev","sum","varianc
e","chartorowid","convert","hextoraw","rawtohex","rowidtochar","to_char"
,"to_date","to_number","decode","dump","greatest","least","nvl","uid","u
serenv","vsize","user","sysdate","intersect","update","insert","set","cl
ose","fetch","lock","open","rollback","savepoint",IDENTIFIER
PLSQLGrammar.g:75:     between alt 1 and exit branch of block
...
 
 
 
------------------------------------------------------------------------
---------------------------------------
Section B
------------
 
C:\Program Files\AntLr\PlSql>"C:\ids9\jdk\bin\javac.exe" -classpath
".;C:\Program Files\AntLr\antlr-2.7.5\antlr-2.7.5.jar" *.java
PLSqlParser.java:9350: cannot resolve symbol
symbol  : class SELECT_EXPRESSIONNode
location: class MyParser.PLSqlParser
                                select_expression_AST =
(AST)astFactory.make( (new
ASTArray(2)).add((SELECT_EXPRESSIONNode)astFactory.create(SELECT_EXPRESS
ION,"select_expression","SELECT_EXPRESSIONNode")).add(select_expression_
AST));
 
                     ^
PLSqlParser.java:14706: cannot resolve symbol
symbol  : class SELECT_EXPRESSIONNode
location: class MyParser.PLSqlParser
                tokenTypeToASTClassMap.put(new Integer(8),
SELECT_EXPRESSIONNode.class);
                                                           ^
2 errors
 
 
Michiel Vermandel
System Design Architect
N.V. Ferranti Computer Systems S.A.
www.ferranti.be <http://www.ferranti.be/> 
Michiel.Vermandel@ferranti.be <outbind://7/mverma@ferranti.be> 
tel: +32 (0)3.540.49.11
fax: +32 (0)3.542.63.28

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050318/541c8360/attachment-0001.html
From open.zone at virgin.net  Fri Mar 18 08:09:53 2005
From: open.zone at virgin.net (Micheal J)
Date: Fri Mar 18 07:56:58 2005
Subject: [antlr-interest] Problem with PLSQLGrammar.g
In-Reply-To: <919392D7803AE7489E03BFED5E52E82F017EE15F@MAIL.ferranti.be>
Message-ID: <000801c52bd4$ebfdff40$7e02a8c0@hercules>

Please post in text format not HTML in future.

The PLSQLGrammar as written depends on a class called
'SELECT_EXPRESSIONNode' which isn't included in the .g file. Make the
following change and try again.

Change the line that reads:
    SELECT_EXPRESSION<AST=SELECT_EXPRESSIONNode>;
To:
    SELECT_EXPRESSION;

NOTE: I have looked at the PLSQLGrammar.g file just for long enough to
determine the reason for the reference to a 'SELECT_EXPRESSIONNode' type.
The above change resolves that issue only.

Cheers,

Micheal
ANTLR/C#


From MVerma at ferranti.be  Fri Mar 18 08:00:32 2005
From: MVerma at ferranti.be (Michiel Vermandel)
Date: Fri Mar 18 08:00:36 2005
Subject: [antlr-interest] Problem with PLSQLGrammar.g
Message-ID: <919392D7803AE7489E03BFED5E52E82F017EE163@MAIL.ferranti.be>

No chance that anyone has the SELECT_EXPRESSIONNode class available?

Thanks!

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Micheal J
Sent: vrijdag 18 maart 2005 17:10
To: antlr-interest@antlr.org
Subject: RE: [antlr-interest] Problem with PLSQLGrammar.g


Please post in text format not HTML in future.

The PLSQLGrammar as written depends on a class called
'SELECT_EXPRESSIONNode' which isn't included in the .g file. Make the
following change and try again.

Change the line that reads:
    SELECT_EXPRESSION<AST=SELECT_EXPRESSIONNode>;
To:
    SELECT_EXPRESSION;

NOTE: I have looked at the PLSQLGrammar.g file just for long enough to
determine the reason for the reference to a 'SELECT_EXPRESSIONNode'
type. The above change resolves that issue only.

Cheers,

Micheal
ANTLR/C#


From open.zone at virgin.net  Fri Mar 18 08:27:30 2005
From: open.zone at virgin.net (Micheal J)
Date: Fri Mar 18 08:14:35 2005
Subject: [antlr-interest] Problem with PLSQLGrammar.g
In-Reply-To: <919392D7803AE7489E03BFED5E52E82F017EE163@MAIL.ferranti.be>
Message-ID: <000901c52bd7$61d26ab0$7e02a8c0@hercules>

You may try contacting the original authors if you feel strongly about that
class. Their contact details are in the grammar file.

Note however that having that class will add nothing to the parsing/lexing
as specified in the .g file. The class in not used at all. If you've made
the change I advised, it is not even referenced anywhere.

Cheers,

Micheal
ANTLR/C#

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of 
> Michiel Vermandel
> Sent: 18 March 2005 16:01
> To: antlr-interest@antlr.org
> Subject: RE: [antlr-interest] Problem with PLSQLGrammar.g
> 
> 
> No chance that anyone has the SELECT_EXPRESSIONNode class available?
> 
> Thanks!
> 
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On > Behalf Of 
> Micheal J
> Sent: vrijdag 18 maart 2005 17:10
> To: antlr-interest@antlr.org
> Subject: RE: [antlr-interest] Problem with PLSQLGrammar.g
> 
> 
> Please post in text format not HTML in future.
> 
> The PLSQLGrammar as written depends on a class called 
> 'SELECT_EXPRESSIONNode' which isn't included in the .g file. 
> Make the following change and try again.
> 
> Change the line that reads:
>     SELECT_EXPRESSION<AST=SELECT_EXPRESSIONNode>;
> To:
>     SELECT_EXPRESSION;
> 
> NOTE: I have looked at the PLSQLGrammar.g file just for long 
> enough to determine the reason for the reference to a 
> 'SELECT_EXPRESSIONNode' type. The above change resolves that 
> issue only.
> 
> Cheers,
> 
> Micheal
> ANTLR/C#
> 
> 

From MVerma at ferranti.be  Fri Mar 18 08:17:03 2005
From: MVerma at ferranti.be (Michiel Vermandel)
Date: Fri Mar 18 08:17:06 2005
Subject: [antlr-interest] Problem with PLSQLGrammar.g
Message-ID: <919392D7803AE7489E03BFED5E52E82F017EE164@MAIL.ferranti.be>

Okway, thanks.
I wasn't aware that it has no influence.
I'll remove it from the file.

Thanks

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Micheal J
Sent: vrijdag 18 maart 2005 17:28
To: antlr-interest@antlr.org
Subject: RE: [antlr-interest] Problem with PLSQLGrammar.g


You may try contacting the original authors if you feel strongly about
that class. Their contact details are in the grammar file.

Note however that having that class will add nothing to the
parsing/lexing as specified in the .g file. The class in not used at
all. If you've made the change I advised, it is not even referenced
anywhere.

Cheers,

Micheal
ANTLR/C#

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of 
> Michiel Vermandel
> Sent: 18 March 2005 16:01
> To: antlr-interest@antlr.org
> Subject: RE: [antlr-interest] Problem with PLSQLGrammar.g
> 
> 
> No chance that anyone has the SELECT_EXPRESSIONNode class available?
> 
> Thanks!
> 
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-bounces@antlr.org] On > Behalf Of 
> Micheal J
> Sent: vrijdag 18 maart 2005 17:10
> To: antlr-interest@antlr.org
> Subject: RE: [antlr-interest] Problem with PLSQLGrammar.g
> 
> 
> Please post in text format not HTML in future.
> 
> The PLSQLGrammar as written depends on a class called
> 'SELECT_EXPRESSIONNode' which isn't included in the .g file. 
> Make the following change and try again.
> 
> Change the line that reads:
>     SELECT_EXPRESSION<AST=SELECT_EXPRESSIONNode>;
> To:
>     SELECT_EXPRESSION;
> 
> NOTE: I have looked at the PLSQLGrammar.g file just for long
> enough to determine the reason for the reference to a 
> 'SELECT_EXPRESSIONNode' type. The above change resolves that 
> issue only.
> 
> Cheers,
> 
> Micheal
> ANTLR/C#
> 
> 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 3005 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050318/d64d6e8d/attachment.bin
From sk at z.pl  Fri Mar 18 09:18:21 2005
From: sk at z.pl (Sebastian Kaliszewski)
Date: Fri Mar 18 09:12:54 2005
Subject: [antlr-interest] ANTLR 3 dev status?
In-Reply-To: <6ed7b958c3a21ec120101e38a1491758@cs.usfca.edu>
References: <2739.160.91.212.176.1110991191.squirrel@callisto.ornl.gov>
	<6ed7b958c3a21ec120101e38a1491758@cs.usfca.edu>
Message-ID: <200503181818.21377.sk@z.pl>

On Wednesday 16 March 2005 19:51, Terence Parr wrote:
[snip]
> We'll have internationalized error
> messages (with perhaps English, French at that point).

I volunteer to do Polish translations (If you're interested, of course).


> Anyway, my goal is to get a solid base system done that knows how to
> parse / lex shortly, with full semantic predicate hoisting.  Then,
> after first early-release, I'll add tree stuff etc... once I settle on
> what I want.

Oh, one idea WRT ^ & ^^ 'operators' for tree creation in Parser. Those are 
nice but break compatibility with 2.x -- so maybe use good old ^ instead od 
new proposed ^^ and ` to mean what ^ is proposed to mean in 3.0 (` is the 
reverse single quote, i.e that sign sharing the key with ~ on most 
keyboards). Like ^ is half of ^^ then ` might be considered half of ^. Just 
an idea...


rgds
-- 
Sebastian Kaliszewski
From monty at codetransform.com  Fri Mar 18 06:21:01 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Fri Mar 18 09:21:07 2005
Subject: [antlr-interest] Whats the diff between 'protected'
	and	'Token.SKIP'
In-Reply-To: <41fed8f8050317223515401de1@mail.gmail.com>
References: <41fed8f8050317204412075ce2@mail.gmail.com>	<200503180533.j2I5Xkx5002260@eis-msg-012.jpl.nasa.gov>
	<41fed8f8050317223515401de1@mail.gmail.com>
Message-ID: <423AE3CD.3010005@codetransform.com>

Prashant Deva wrote:
>>protected rules do not produce tokens--they must be called by public rules
>>which do produce tokens.
> 
> Well it seems the token doesn't get created when you set the toke type
> as skip , too.
> Here is the code from a generated lexer -
> if ( _createToken && _token==null && _ttype!=Token.SKIP ) {
> 			_token = makeToken(_ttype);
> 			_token.setText(new String(text.getBuffer(), _begin, text.length()-_begin));
> 		}
> 
> So as you can see , in both the cases the token doesn't get created.
> Then how are they different.
> 
> PRASHANT
> 
> 
> On Thu, 17 Mar 2005 21:33:47 -0800, Loring Craymer
> <Loring.G.Craymer@jpl.nasa.gov> wrote:
> 
>>protected rules do not produce tokens--they must be called by public rules
>>which do produce tokens.
>>
>>--Loring
>>
>>
>>>-----Original Message-----
>>>From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
>>>bounces@antlr.org] On Behalf Of Prashant Deva
>>>Sent: Thursday, March 17, 2005 8:44 PM
>>>To: antlr-interest@antlr.org
>>>Subject: [antlr-interest] Whats the diff between 'protected' and
>>>'Token.SKIP'
>>>
>>>Whats the diff between marking a token as 'SKIP' and marking it as
>>>'protected'.
>>>Eg-
>>>Whats the diff between the 2 rules -
>>>WS   : ('\t' | '\r' | ' ') {_ttype=Token.SKIP;} ;
called by nextToken() and doesn't produce a token.

>>>
>>>protected WS   : ('\t' | '\r' | ' ') ;
not called by nextToken() directly -- must be called by another rule to 
be used.


The difference is this--protected rules don't get included in the ANTLR 
synthesized nextToken() rule.  That is the entry point for the lexer to 
produce tokens.


Monty
From Bharath.Sundararaman at starthis.com  Fri Mar 18 09:23:57 2005
From: Bharath.Sundararaman at starthis.com (Bharath Sundararaman)
Date: Fri Mar 18 09:24:00 2005
Subject: [antlr-interest] Problem with ANTLR Plugin for Eclipse.
Message-ID: <B1180416E5C44E49AE556D23DBB45B2906139A@webmail.starthis.com>

Hi Antlers,

I use ANTLR in Eclipse (http://antlreclipse.sourceforge.net/updates/)
and since few hours back, I am unable to compile my grammar to generate
java code. The ANTLR plugin recognized and displays errors (for eg. If I
deliberately removed a semicolon b/w two rules, I get the usual error)
but it does not generate the java code.

Anybody ever faced this issue? I deleted the .java file that was
previously generated by the same grammar and it doesn't help.

Thanks,

Bharath.


-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Michiel Vermandel
Sent: Friday, March 18, 2005 10:17 AM
To: Micheal J
Cc: antlr-interest@antlr.org
Subject: RE: [antlr-interest] Problem with PLSQLGrammar.g

Okway, thanks.
I wasn't aware that it has no influence.
I'll remove it from the file.

Thanks

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Micheal J
Sent: vrijdag 18 maart 2005 17:28
To: antlr-interest@antlr.org
Subject: RE: [antlr-interest] Problem with PLSQLGrammar.g


You may try contacting the original authors if you feel strongly about
that class. Their contact details are in the grammar file.

Note however that having that class will add nothing to the
parsing/lexing as specified in the .g file. The class in not used at
all. If you've made the change I advised, it is not even referenced
anywhere.

Cheers,

Micheal
ANTLR/C#

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of 
> Michiel Vermandel
> Sent: 18 March 2005 16:01
> To: antlr-interest@antlr.org
> Subject: RE: [antlr-interest] Problem with PLSQLGrammar.g
> 
> 
> No chance that anyone has the SELECT_EXPRESSIONNode class available?
> 
> Thanks!
> 
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-bounces@antlr.org] On > Behalf Of 
> Micheal J
> Sent: vrijdag 18 maart 2005 17:10
> To: antlr-interest@antlr.org
> Subject: RE: [antlr-interest] Problem with PLSQLGrammar.g
> 
> 
> Please post in text format not HTML in future.
> 
> The PLSQLGrammar as written depends on a class called
> 'SELECT_EXPRESSIONNode' which isn't included in the .g file. 
> Make the following change and try again.
> 
> Change the line that reads:
>     SELECT_EXPRESSION<AST=SELECT_EXPRESSIONNode>;
> To:
>     SELECT_EXPRESSION;
> 
> NOTE: I have looked at the PLSQLGrammar.g file just for long
> enough to determine the reason for the reference to a 
> 'SELECT_EXPRESSIONNode' type. The above change resolves that 
> issue only.
> 
> Cheers,
> 
> Micheal
> ANTLR/C#
> 
> 

From monty at codetransform.com  Fri Mar 18 06:24:34 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Fri Mar 18 09:24:40 2005
Subject: [antlr-interest] error messages + treeParser with OR'ed root
In-Reply-To: <IDJXA8$115BD48DC639889BA2872075606455A3@scarlet.be>
References: <IDJXA8$115BD48DC639889BA2872075606455A3@scarlet.be>
Message-ID: <423AE4A2.10909@codetransform.com>

Koen Segers wrote:
> Hi,
> 
> I have 2 problems.
> 
> First one is a problem with the treeParser.
> In Parser I created an ast. In treeParser I walk this one.
> 
> I have this in my walker:
> parameterType=typeSpecifier (par:ID)
> 
> If the ID isn't in the ast the error is:
> <AST>: expecting ID, found '<empty tree>'
> 
> how can I give the line number + column number?
> 

That's hard when you don't have a tree node to take it from.

> Second problem has to do with an root in walker that is OR'ed.
> #( (PLUS|MINUS|STAR|DIV) lType = expr rType = expr)
> gives an error of unexpected token '('.
> 
> Any idea how I can fix this?

Currently ANTLR cannot have OR'd roots.  You'll have to do something like

#(PLUS expr expr)
| #(MINUS expr expr)
...

Monty
From ewbank at gmail.com  Fri Mar 18 10:34:26 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Mar 18 10:34:28 2005
Subject: [antlr-interest] error messages + treeParser with OR'ed root
In-Reply-To: <423AE4A2.10909@codetransform.com>
References: <IDJXA8$115BD48DC639889BA2872075606455A3@scarlet.be>
	<423AE4A2.10909@codetransform.com>
Message-ID: <dd3a065f05031810344515e3ea@mail.gmail.com>

I've also had some limited success with using predicates to fake it out:
    (PLUS|MINUS|STAR|DIV) => #( op:. lType = expr rType = expr)
       {
            // op will be one of the four
       }

On Fri, 18 Mar 2005 09:24:34 -0500, Monty Zukowski
<monty@codetransform.com> wrote:
> > Second problem has to do with an root in walker that is OR'ed.
> > #( (PLUS|MINUS|STAR|DIV) lType = expr rType = expr)
> > gives an error of unexpected token '('.
> >
> > Any idea how I can fix this?
> 
> Currently ANTLR cannot have OR'd roots.  You'll have to do something like
> 
> #(PLUS expr expr)
> | #(MINUS expr expr)
From johnm-antlr at non.net  Fri Mar 18 10:58:41 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Fri Mar 18 10:58:27 2005
Subject: [antlr-interest] ^ and ^^ tree operators (was: ANTLR 3 dev status?)
In-Reply-To: <200503181818.21377.sk@z.pl>
References: <2739.160.91.212.176.1110991191.squirrel@callisto.ornl.gov>
	<6ed7b958c3a21ec120101e38a1491758@cs.usfca.edu>
	<200503181818.21377.sk@z.pl>
Message-ID: <16955.9441.668994.567561@despot.non.net>

>>>>> "Sebastian" == Sebastian Kaliszewski <sk@z.pl> writes:
[...]

> Oh, one idea WRT ^ & ^^ 'operators' for tree creation in Parser. Those
> are nice but break compatibility with 2.x -- so maybe use good old ^
> instead od new proposed ^^ and ` to mean what ^ is proposed to mean in
> 3.0 (` is the reverse single quote, i.e that sign sharing the key with ~
> on most keyboards). Like ^ is half of ^^ then ` might be considered half
> of ^. Just an idea...

Using backtick for that?  Eeeww...  Hard to read, non-mnemonic (i.e., the ^
looks like a tree (to all use sick CS types :-)).

Remember that Antlr v3 is truly a new generation of Antlr/PCCTS.  The idea
certainly isn't to gratuitously change things but after a fair bit of
analysis, thought, and argument (:-), adding ^^ as the rule root and
changing ^ to mean the local root really does seem to be justified is a
good step for the better.

IMHO,
	John

From edelaney at sungardsct.com  Fri Mar 18 11:20:10 2005
From: edelaney at sungardsct.com (Ed Delaney)
Date: Fri Mar 18 11:20:23 2005
Subject: [antlr-interest] RE: Problem with PLSQLGrammar.g (Micheal J)
Message-ID: <OF435E394E.0C9708DE-ON05256FC8.0069A871-05256FC8.006A338E@sungardsct.com>

Hi Micheal et al., 
I'm new to antlr and the world of parsers, compilers, translaters, but at 
least make up for it with enthusiasm.

I am very interested in getting the PLSQL Grammar working but my first 
attempt to use the plsql grammer file generated so many errors I've sat 
back and have started from square one. I have lots of things I'd like to 
be able to do since PLSQL is mainly what I program in these days.

If there is anything I can do to help  I am most interested in 
collaborating on it.

Ed

---------------------------------------------------
Ed Delaney
SunGard SCT
Advisory Software Engineer
Phone Number (Office): 765-939-0533
Time Zone: US Indiana
edelaney@sungardsct.com
www.sungardsct.com

Leadership - Choices - Excellence
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050318/ad82dac8/attachment.html
From parrt at cs.usfca.edu  Fri Mar 18 11:46:29 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Mar 18 11:39:33 2005
Subject: [antlr-interest] screen shot of ANTLR GUI interpreting java.g
Message-ID: <a59851847bc477e06bf3a3f0d36bc22b@cs.usfca.edu>

Howdy,

Jean Bovet sent me this screenshot last night. :)  He integrated my 
interpreter into his GUI:

http://www.antlr.org/tmp/antlrgui.jpg

The text box is the input, the "field" is the start rule, and the 
treeview on the right is the resulting parse tree.

Cool, n'est-ce pas?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Fri Mar 18 11:51:36 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Mar 18 11:44:38 2005
Subject: [antlr-interest] ANTLR 3 dev status?
In-Reply-To: <200503181818.21377.sk@z.pl>
References: <2739.160.91.212.176.1110991191.squirrel@callisto.ornl.gov>
	<6ed7b958c3a21ec120101e38a1491758@cs.usfca.edu>
	<200503181818.21377.sk@z.pl>
Message-ID: <020a02557d3f418e09a8730fd3c91c48@cs.usfca.edu>


On Mar 18, 2005, at 9:18 AM, Sebastian Kaliszewski wrote:

> On Wednesday 16 March 2005 19:51, Terence Parr wrote:
> [snip]
>> We'll have internationalized error
>> messages (with perhaps English, French at that point).
>
> I volunteer to do Polish translations (If you're interested, of 
> course).

Sounds great!  I will ask for translations when i send out the early 
release.

>> Anyway, my goal is to get a solid base system done that knows how to
>> parse / lex shortly, with full semantic predicate hoisting.  Then,
>> after first early-release, I'll add tree stuff etc... once I settle on
>> what I want.
>
> Oh, one idea WRT ^ & ^^ 'operators' for tree creation in Parser. Those 
> are
> nice but break compatibility with 2.x -- so maybe use good old ^ 
> instead od
> new proposed ^^ and ` to mean what ^ is proposed to mean in 3.0 (` is 
> the
> reverse single quote, i.e that sign sharing the key with ~ on most
> keyboards). Like ^ is half of ^^ then ` might be considered half of ^. 
> Just
> an idea...

Yes, i am very aware of the strange change in operator meaning and have 
struggled to figure out the right answer.  I will probably go with the 
backward incompatibility because ^^ does really make more sense like .. 
to mean up a directory or whatever. Hmm...

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Fri Mar 18 12:17:13 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Mar 18 12:10:15 2005
Subject: [antlr-interest] ANTLR GUI name
Message-ID: <9a4a977459129365fcff5d2e5e67dfe2@cs.usfca.edu>

Howdy,

We need a working name for the 3.0 gui.  For example, Prashant's 2.x 
gui is called "ANTLR Studio", which is a good name.

I used to have something called the "ANTLR workbench", which is ok I 
suppose.

How about something more marketing-savvy like ANTLRWorks?  I kinda like 
that. :)

ANTLR Sweatshop ;)
ANTLR Workshop
ANTLR Erector ;)
RapidANTLR
UberANTLR
ANTLRBuilder
DevANTLR
ANTLRFab

Hmm....  ANTLRWorks is good and so is RapidANTLR.  What do you think?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From monty at codetransform.com  Fri Mar 18 09:23:13 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Fri Mar 18 12:23:18 2005
Subject: [antlr-interest] ANTLR GUI name
In-Reply-To: <9a4a977459129365fcff5d2e5e67dfe2@cs.usfca.edu>
References: <9a4a977459129365fcff5d2e5e67dfe2@cs.usfca.edu>
Message-ID: <423B0E81.6040006@codetransform.com>


> Hmm....  ANTLRWorks is good and so is RapidANTLR.  What do you think?

How about RabidANTLR?  Just a bit more aggressive....

Monty
From atripp at comcast.net  Fri Mar 18 12:26:21 2005
From: atripp at comcast.net (Andy Tripp)
Date: Fri Mar 18 12:26:37 2005
Subject: [antlr-interest] Code beautifier-indentation
Message-ID: <423B396D.3020806@comcast.net>

See my JavaEmitter code:
http://jazillian.com/antlr/emitter.html
And in particular, the IndentingPrintStream class for an example of
pretty-printing code.

 > I am trying out with the help of treewalk.g ,but getting stuck.

I know the feeling :(
I was also quite confused by the treewalker approach, so my approach
does not use ANTLR treewalking, it just walks the AST "by hand".

Andy

From Jim.O'Connor at microfocus.com  Fri Mar 18 12:28:12 2005
From: Jim.O'Connor at microfocus.com (Jim O'Connor)
Date: Fri Mar 18 12:28:08 2005
Subject: [antlr-interest] ANTLR GUI name
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E9103CAC2B4@rock-corpmail.microfocus.com>

The DisMANTLR.

> -----Original Message-----
> From: Terence Parr [mailto:parrt@cs.usfca.edu]
> Sent: Friday, March 18, 2005 3:17 PM
> To: ANTLR Interest
> Subject: [antlr-interest] ANTLR GUI name
> 
> Howdy,
> 
> We need a working name for the 3.0 gui.  For example, Prashant's 2.x
> gui is called "ANTLR Studio", which is a good name.
> 
> I used to have something called the "ANTLR workbench", which is ok I
> suppose.
> 
> How about something more marketing-savvy like ANTLRWorks?  I kinda like
> that. :)
> 
> ANTLR Sweatshop ;)
> ANTLR Workshop
> ANTLR Erector ;)
> RapidANTLR
> UberANTLR
> ANTLRBuilder
> DevANTLR
> ANTLRFab
> 
> Hmm....  ANTLRWorks is good and so is RapidANTLR.  What do you think?
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> 
> 
> 
> This message has been scanned for viruses by MailController -
> www.MailController.altohiway.com
From ewbank at gmail.com  Fri Mar 18 12:37:59 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Mar 18 12:38:05 2005
Subject: [antlr-interest] ANTLR GUI name
In-Reply-To: <3AC103F1B7EEEC48A855ACB1D2819E9103CAC2B4@rock-corpmail.microfocus.com>
References: <3AC103F1B7EEEC48A855ACB1D2819E9103CAC2B4@rock-corpmail.microfocus.com>
Message-ID: <dd3a065f050318123748c6fafe@mail.gmail.com>

What about Moose?  ANTLRs come from mooses, after all.
From Bharath.Sundararaman at starthis.com  Fri Mar 18 12:38:41 2005
From: Bharath.Sundararaman at starthis.com (Bharath Sundararaman)
Date: Fri Mar 18 12:38:44 2005
Subject: [antlr-interest] ANTLR GUI name
Message-ID: <B1180416E5C44E49AE556D23DBB45B2906139E@webmail.starthis.com>

ANTLRules!

A na?ve explanation would be ANTLR rules and it's all about rules -]

-----Original Message-----
From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Jim O'Connor
Sent: Friday, March 18, 2005 2:28 PM
To: ANTLR Interest
Subject: RE: [antlr-interest] ANTLR GUI name

The DisMANTLR.

> -----Original Message-----
> From: Terence Parr [mailto:parrt@cs.usfca.edu]
> Sent: Friday, March 18, 2005 3:17 PM
> To: ANTLR Interest
> Subject: [antlr-interest] ANTLR GUI name
> 
> Howdy,
> 
> We need a working name for the 3.0 gui.  For example, Prashant's 2.x
> gui is called "ANTLR Studio", which is a good name.
> 
> I used to have something called the "ANTLR workbench", which is ok I
> suppose.
> 
> How about something more marketing-savvy like ANTLRWorks?  I kinda like
> that. :)
> 
> ANTLR Sweatshop ;)
> ANTLR Workshop
> ANTLR Erector ;)
> RapidANTLR
> UberANTLR
> ANTLRBuilder
> DevANTLR
> ANTLRFab
> 
> Hmm....  ANTLRWorks is good and so is RapidANTLR.  What do you think?
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> 
> 
> 
> This message has been scanned for viruses by MailController -
> www.MailController.altohiway.com
From Loring.G.Craymer at jpl.nasa.gov  Fri Mar 18 13:09:40 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Fri Mar 18 13:10:07 2005
Subject: [antlr-interest] ANTLR GUI name
In-Reply-To: <dd3a065f050318123748c6fafe@mail.gmail.com>
References: <3AC103F1B7EEEC48A855ACB1D2819E9103CAC2B4@rock-corpmail.microfocus.com>
	<dd3a065f050318123748c6fafe@mail.gmail.com>
Message-ID: <6.1.1.1.2.20050318124837.01cb91e8@mail.jpl.nasa.gov>

Well, if you are going in that direction, ELK (efficient? language kit) 
might work.  However, I'd rather keep to something like the "ANTLR 
Workbench" for simple reasons.  It doesn't look like something that might 
be trademarked (i. e.:  commercial, not free), it doesn't smell like M$ 
(the disadvantage of Prashant's ANTLR Studio), and other products with 
"Workbench" in the name look like good company.  If you google with 
"software workbench", "workbench", and the like, some interesting things 
pop up.  There is the "Logics Workbench", the "Edinburgh Concurrency 
Workbench", the "IMS Corpus Workbench", and others which might use language 
translation.

--Loring


At 12:37 PM 3/18/2005, Bryan Ewbank wrote:
>What about Moose?  ANTLRs come from mooses, after all.


From KoenSegers at scarlet.be  Fri Mar 18 14:53:21 2005
From: KoenSegers at scarlet.be (Koen Segers)
Date: Fri Mar 18 14:53:35 2005
Subject: [antlr-interest] error messages + treeParser with OR'ed root
In-Reply-To: <423AE4A2.10909@codetransform.com>
References: <IDJXA8$115BD48DC639889BA2872075606455A3@scarlet.be>
	<423AE4A2.10909@codetransform.com>
Message-ID: <200503182353.21919.KoenSegers@scarlet.be>

On Friday 18 March 2005 15:24, Monty Zukowski wrote:
> Koen Segers wrote:
> > Hi,
> >
> > I have 2 problems.
> >
> > First one is a problem with the treeParser.
> > In Parser I created an ast. In treeParser I walk this one.
> >
> > I have this in my walker:
> > parameterType=typeSpecifier (par:ID)
> >
> > If the ID isn't in the ast the error is:
> > <AST>: expecting ID, found '<empty tree>'
> >
> > how can I give the line number + column number?
>
> That's hard when you don't have a tree node to take it from.
>
> > Second problem has to do with an root in walker that is OR'ed.
> > #( (PLUS|MINUS|STAR|DIV) lType = expr rType = expr)
> > gives an error of unexpected token '('.
> >
> > Any idea how I can fix this?
>
> Currently ANTLR cannot have OR'd roots.  You'll have to do something like
>
> #(PLUS expr expr)
>
> | #(MINUS expr expr)
>

It's a pity...

> ...
>
> Monty

Thx!

-- 

Koen Segers

<koensegers@scarlet.be>
<http://eddyvite.dyndns.org>
From csnyder at alumni.ncsu.edu  Fri Mar 18 15:28:37 2005
From: csnyder at alumni.ncsu.edu (Chris Snyder)
Date: Fri Mar 18 15:28:45 2005
Subject: [antlr-interest] ANTLR GUI name
In-Reply-To: <6.1.1.1.2.20050318124837.01cb91e8@mail.jpl.nasa.gov>
Message-ID: <002001c52c12$38cf2460$c818a8c0@chrismain>

Don't you know the name needs to start with "I"?

iANTLR
iParse
iBuildTrees <- :>)


-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Loring Craymer
Sent: Friday, March 18, 2005 4:10 PM
To: Bryan Ewbank; antlr-interest
Subject: Re: [antlr-interest] ANTLR GUI name


Well, if you are going in that direction, ELK (efficient? language kit) 
might work.  However, I'd rather keep to something like the "ANTLR 
Workbench" for simple reasons.  It doesn't look like something that might 
be trademarked (i. e.:  commercial, not free), it doesn't smell like M$ 
(the disadvantage of Prashant's ANTLR Studio), and other products with 
"Workbench" in the name look like good company.  If you google with 
"software workbench", "workbench", and the like, some interesting things 
pop up.  There is the "Logics Workbench", the "Edinburgh Concurrency 
Workbench", the "IMS Corpus Workbench", and others which might use language 
translation.

--Loring


At 12:37 PM 3/18/2005, Bryan Ewbank wrote:
>What about Moose?  ANTLRs come from mooses, after all.





From tangfc2001 at yahoo.com  Fri Mar 18 15:40:37 2005
From: tangfc2001 at yahoo.com (FC)
Date: Fri Mar 18 15:40:39 2005
Subject: [antlr-interest] Inheritance of BaseAST class
In-Reply-To: 6667
Message-ID: <20050318234037.54798.qmail@web53910.mail.yahoo.com>

Hi,

I tried to use setASTNodeClass method to specify the
node type of AST to my defined class JavaAST under
package MyPkg. while there is run-time error agian: 
Can't find/access AST node type MyPkg.JavaAST.

My code is as follows:

JavaLexer lexer = new JavaLexer(r);
lexer.setFilename(f);
// Create a parser that reads from the scanner
JavaRecognizer parser = new JavaRecognizer(lexer);
parser.setFilename(f);
parser.setASTNodeClass("MyPkg.JavaAST");
		
// start parsing at the compilationUnit rule
parser.compilationUnit();

JavaAST t = (JavaAST)parser.getAST();

thanks 

Ted


--- "John D. Mitchell" <johnm-antlr@non.net> wrote:
> >>>>> "FC" == FC  <tangfc2001@yahoo.com> writes:
> [...]
> 
> > But there is run-time error: parser exception:
> > java.lang.ClassCastException at line of "JavaAST t
> =
> > (JavaAST)parser.getAST();", that is, the AST
> object can not be casted to
> > my subclass JavaAST. How can I solve this problem?
> 
> Check out the setASTNodeClass() method of the
> parser.
> 
> Go wild,
> 	John
> 

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From parrt at cs.usfca.edu  Fri Mar 18 15:54:02 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Mar 18 15:47:05 2005
Subject: [antlr-interest] ANTLR GUI name
In-Reply-To: <002001c52c12$38cf2460$c818a8c0@chrismain>
References: <002001c52c12$38cf2460$c818a8c0@chrismain>
Message-ID: <aae423569d1b76e95b8e70460981dab9@cs.usfca.edu>


On Mar 18, 2005, at 3:28 PM, Chris Snyder wrote:

> Don't you know the name needs to start with "I"?
>
> iANTLR
> iParse
> iBuildTrees <- :>)

;)  Interesting. :)

I was also thinking SavANTLR (Savant == genius).  ANTLRProdigy?

Thanks for all the names, folks!  I like 'em :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Fri Mar 18 17:26:34 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Mar 18 17:19:39 2005
Subject: [antlr-interest] still more GUI names...
Message-ID: <79b7a4980d006d0d55a64de29876a67d@cs.usfca.edu>

Hi,

Perhaps these will give somebody a good idea:

ANTLR Adept
ANTLR Guru
ANTLR Scholar

Actually, I think ANTLRules is probably the best so far.  Thanks, 
Bharath!  Doesn't make one think of a dev environment, but it's cool 
nonetheless. :)

Jamie Herre on the phone just convinced me that ANTLRWorks is not as 
good.

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From m.gadsdon at rheagroup.com  Fri Mar 18 05:10:26 2005
From: m.gadsdon at rheagroup.com (Mike Gadsdon)
Date: Fri Mar 18 18:01:24 2005
Subject: [antlr-interest] NullPointerException from LA
In-Reply-To: <20050318015025.88254DCDFB@www.antlr.org>
Message-ID: <NFBBKLEKFHDGOJLCDCJACEOGDLAA.m.gadsdon@rheagroup.com>

Hi,

I'm getting a Java NullPointerException from the LA method. It appears to
trigger when a parser lookahead test goes past the available tokens. See
attached image of Eclipse debug environment - the exception is thrown at the
line highlighted in green.

I'm using ANTLR 2.7.4 at the moment.

Cheers

Mike

==============================================================
Mike Gadsdon                   mailto:m.gadsdon@rheagroup.com
Rhea System S.A                Tel +44 (0)20 8891 0702
                               Fax +44 (0)20 8891 6702
==============================================================

-------------- next part --------------
A non-text attachment was scrubbed...
Name: pic.jpg
Type: image/jpeg
Size: 195777 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050318/43df2a11/pic-0001.jpg
From scott at javadude.com  Fri Mar 18 20:50:50 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Fri Mar 18 20:50:52 2005
Subject: [antlr-interest] Problem with ANTLR Plugin for Eclipse.
In-Reply-To: <B1180416E5C44E49AE556D23DBB45B2906139A@webmail.starthis.com>
Message-ID: <20050319043002.6FA6E2903E4@new.knowspam.net>

I'm working on the next version of the ANTLR plugin. I've seen similar
problems with a few syntax errors (one that comes to mind is I accidentally
used a "-" in a rule name when parsing XML...)

I'm looking into it this weekend...

If you could send me your grammar, I could use it as another test case to
narrow the problem.

Later,
-- Scott 

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of 
> Bharath Sundararaman
> Sent: Friday, March 18, 2005 12:24 PM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Problem with ANTLR Plugin for Eclipse.
> 
> Hi Antlers,
> 
> I use ANTLR in Eclipse (http://antlreclipse.sourceforge.net/updates/)
> and since few hours back, I am unable to compile my grammar 
> to generate java code. The ANTLR plugin recognized and 
> displays errors (for eg. If I deliberately removed a 
> semicolon b/w two rules, I get the usual error) but it does 
> not generate the java code.
> 
> Anybody ever faced this issue? I deleted the .java file that 
> was previously generated by the same grammar and it doesn't help.
> 
> Thanks,
> 
> Bharath.
> 
> 
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of 
> Michiel Vermandel
> Sent: Friday, March 18, 2005 10:17 AM
> To: Micheal J
> Cc: antlr-interest@antlr.org
> Subject: RE: [antlr-interest] Problem with PLSQLGrammar.g
> 
> Okway, thanks.
> I wasn't aware that it has no influence.
> I'll remove it from the file.
> 
> Thanks
> 
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Micheal J
> Sent: vrijdag 18 maart 2005 17:28
> To: antlr-interest@antlr.org
> Subject: RE: [antlr-interest] Problem with PLSQLGrammar.g
> 
> 
> You may try contacting the original authors if you feel 
> strongly about that class. Their contact details are in the 
> grammar file.
> 
> Note however that having that class will add nothing to the 
> parsing/lexing as specified in the .g file. The class in not 
> used at all. If you've made the change I advised, it is not 
> even referenced anywhere.
> 
> Cheers,
> 
> Micheal
> ANTLR/C#
> 
> > -----Original Message-----
> > From: antlr-interest-bounces@antlr.org 
> > [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Michiel 
> > Vermandel
> > Sent: 18 March 2005 16:01
> > To: antlr-interest@antlr.org
> > Subject: RE: [antlr-interest] Problem with PLSQLGrammar.g
> > 
> > 
> > No chance that anyone has the SELECT_EXPRESSIONNode class available?
> > 
> > Thanks!
> > 
> > -----Original Message-----
> > From: antlr-interest-bounces@antlr.org 
> > [mailto:antlr-interest-bounces@antlr.org] On > Behalf Of Micheal J
> > Sent: vrijdag 18 maart 2005 17:10
> > To: antlr-interest@antlr.org
> > Subject: RE: [antlr-interest] Problem with PLSQLGrammar.g
> > 
> > 
> > Please post in text format not HTML in future.
> > 
> > The PLSQLGrammar as written depends on a class called 
> > 'SELECT_EXPRESSIONNode' which isn't included in the .g file.
> > Make the following change and try again.
> > 
> > Change the line that reads:
> >     SELECT_EXPRESSION<AST=SELECT_EXPRESSIONNode>;
> > To:
> >     SELECT_EXPRESSION;
> > 
> > NOTE: I have looked at the PLSQLGrammar.g file just for 
> long enough to 
> > determine the reason for the reference to a 'SELECT_EXPRESSIONNode' 
> > type. The above change resolves that issue only.
> > 
> > Cheers,
> > 
> > Micheal
> > ANTLR/C#
> > 
> > 
> 



From sk at z.pl  Sat Mar 19 04:44:09 2005
From: sk at z.pl (Sebastian Kaliszewski)
Date: Sat Mar 19 04:38:22 2005
Subject: [antlr-interest] ANTLR 3 dev status?
In-Reply-To: <020a02557d3f418e09a8730fd3c91c48@cs.usfca.edu>
References: <2739.160.91.212.176.1110991191.squirrel@callisto.ornl.gov>
	<200503181818.21377.sk@z.pl>
	<020a02557d3f418e09a8730fd3c91c48@cs.usfca.edu>
Message-ID: <200503191344.09191.sk@z.pl>

On Friday 18 March 2005 20:51, Terence Parr wrote:
> Yes, i am very aware of the strange change in operator meaning and have
> struggled to figure out the right answer.  I will probably go with the
> backward incompatibility because ^^ does really make more sense like ..
> to mean up a directory or whatever. Hmm...

Yup. That's why i tried to come with something among the lines. As single 
character (here ^) can't be divided -- I tried to come some character which 
looks like half of that ^, hence little ` -- it looks quite like the part 
of ^ in many fonts, and ocupies similar place at the top of character row.

This is just my (silent) voice in the discussion.
I simply came with this now, as I rememeber the dicussion from some time 
ago: ^ and ^^ breaks compatibility and might make some troubles in 
migrating grammars from 2.x to 3.x, especially if someone left unchanged 
single ^ somewhere in his .g file, esp in some cases this would express 
itself only in (potentially rarely used) some single path of parsing. But 
no one was able to come with anything even halfway reasonable, which would 
not look misleading (esp for newcomers) and not terribly verbose (thus 
hiding the token name inside noise of (,), %, $, @, whatever). Hence the 
conslusion was then that nothing better than changing ^ to ^^ and 
introducing new meaning to ^ had been found. I came with my little idea 
only yesterday, so I posted it here. It well may get rejected, but I'll 
sleep peacefully now, as I now I didn't keep the possibly "greatest idea to 
save the world" ;) for myself only but put it for a judgement of others.

rgds
-- 
Sebastian Kaliszewski
From Jon.Rand at thomson.com  Sat Mar 19 07:15:48 2005
From: Jon.Rand at thomson.com (Jon.Rand@thomson.com)
Date: Sat Mar 19 07:14:53 2005
Subject: [antlr-interest] Re: ANTLR GUI name (Jon Rand)
Message-ID: <C3A072E2F8962C4BBF413A00D9FBEFDC02C8F3B7@TSHUSMIANMSG07.ERF.THOMSON.COM>

ANTLR IDE - for straightforwardness
ANTLR Velvet - if you're inclined to puns
Visual ANTLR - if you don't mind sounding MS-ish
ANTLR Forge - my favorite.

Jon Rand
From jungdl at ornl.gov  Sat Mar 19 08:30:28 2005
From: jungdl at ornl.gov (David Jung)
Date: Sat Mar 19 08:30:39 2005
Subject: [antlr-interest] Re: ANTLR GUI name
Message-ID: <61923.65.6.33.16.1111249828.squirrel@callisto.ornl.gov>

ANTLReze?
.02c

From Bharath.Sundararaman at starthis.com  Sat Mar 19 11:57:47 2005
From: Bharath.Sundararaman at starthis.com (Bharath Sundararaman)
Date: Sat Mar 19 11:57:50 2005
Subject: [antlr-interest] ANTLR plugin
Message-ID: <B1180416E5C44E49AE556D23DBB45B290613A5@webmail.starthis.com>

Hi Scott,

I use Eclipse 3.0.1 and ANTLR plug-in 3.0.5 on Windows XP. I noticed
after sending the e-mail that my parser grammar worked fine while my
tree parser grammar was not. I restored my tree parser grammar to the
previous version I had stored in my repository and it worked. 

The issue however is this:

1) The grammar which refused to compile and yield java code was working
the previous night and there were no modifications to it that could have
caused the problem.
 
2) Even if I had made a mistake (For eg. If I had typed in an extra
letter while doing ctrl+s to save changes the previous night), the
grammar should have displayed the error. Au contraire, it behaved just
like a text file and did not show any errors even when I deliberately
changed the keyword "return" to "retrn". 

3) Unfortunately, I will not be able to send you the grammar due to NDA.
Please bear with me.

Thanks for the help. I will be looking forward to the next version -].

Bharath.
From Bharath.Sundararaman at starthis.com  Sat Mar 19 11:59:15 2005
From: Bharath.Sundararaman at starthis.com (Bharath Sundararaman)
Date: Sat Mar 19 11:59:18 2005
Subject: [antlr-interest] still more GUI names...
Message-ID: <B1180416E5C44E49AE556D23DBB45B290613A6@webmail.starthis.com>

Hi Ter,

You're welcome.

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: Friday, March 18, 2005 7:27 PM
To: 'antlr-interest' Interest
Subject: [antlr-interest] still more GUI names...

Hi,

Perhaps these will give somebody a good idea:

ANTLR Adept
ANTLR Guru
ANTLR Scholar

Actually, I think ANTLRules is probably the best so far.  Thanks, 
Bharath!  Doesn't make one think of a dev environment, but it's cool 
nonetheless. :)

Jamie Herre on the phone just convinced me that ANTLRWorks is not as 
good.

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From metzgerm at iro.umontreal.ca  Sat Mar 19 15:02:26 2005
From: metzgerm at iro.umontreal.ca (Michel Metzger)
Date: Sat Mar 19 15:02:50 2005
Subject: [antlr-interest] Bug in C# Tree Parser generator ?
Message-ID: <423CAF82.4010805@iro.umontreal.ca>

Hi,

First of all, thank you very much for this wonderful tool !

I'm using Antlr to build and transform an AST of linear temporal logic 
formulae (but that's a detail).
I observed a strange behavior for the following transformation rule :

 |! (#(OP_NOT OP_UNT)) => #(OP_NOT #(OP_UNT leftNU:expr rightNU:expr))
    {
      #expr = #([OP_REL, "R"], #([OP_NOT, "!"], leftNU), #([OP_NOT, 
"!"], rightNU));
    }
 |  #(OP_NOT expr)

The generated code for the subtree creation (line 2) is:

    expr_AST = (AST) astFactory.make(astFactory.create(OP_REL,"R"), 
(AST) astFactory.make(astFactory.create(tmp12_AST,"!"), leftNU_AST), 
(AST) astFactory.make(astFactory.create(tmp12_AST,"!"), rightNU_AST));

The problem is the transformation from [OP_NOT, "!"] to 
astFactory.create(tmp12_AST,"!"). I don't understand
why it didn't produce astFactory.create(OP_NOT,"!"). For now, the only 
workaround I found is to write directly the int code of my token OP_NOT 
ie. [12, "!"].

Is there something wrong in my code ? or is it a bug ?

I can send the VS project to the maintainer of the C# generator if it 
can help. I use Antlr 2.7.5, VS 2003 and .NET 1.1

Thank you,

Michel.
From open.zone at virgin.net  Sat Mar 19 16:35:39 2005
From: open.zone at virgin.net (Micheal J)
Date: Sat Mar 19 16:22:43 2005
Subject: [antlr-interest] Bug in C# Tree Parser generator ?
In-Reply-To: <423CAF82.4010805@iro.umontreal.ca>
Message-ID: <000d01c52ce4$be0f5a50$7e02a8c0@hercules>

Michel,

> Is there something wrong in my code ? or is it a bug ?
> 
> I can send the VS project to the maintainer of the C# generator if it 
> can help. I use Antlr 2.7.5, VS 2003 and .NET 1.1

Thanks for the issue report. You may send me the VS project including the
grammar file.

Cheers,

Micheal

From KoenSegers at scarlet.be  Sun Mar 20 04:11:37 2005
From: KoenSegers at scarlet.be (Koen Segers)
Date: Sun Mar 20 04:11:52 2005
Subject: [antlr-interest] no treeParser if Parser fails
Message-ID: <200503201311.37943.KoenSegers@scarlet.be>

I don't find a sort of boolean to see if parser found an error in the given 
file. How can I see then that there was an error?

If there was an error it isn't needed to walk the tree also...

Greetz
-- 

Koen Segers

<koensegers@scarlet.be>
<http://eddyvite.dyndns.org>
From amohombe at yahoo.com  Sat Mar 19 04:37:14 2005
From: amohombe at yahoo.com (Ahmed Mohombe)
Date: Sun Mar 20 04:22:11 2005
Subject: [antlr-interest] Re: ANTLR GUI name
In-Reply-To: <002001c52c12$38cf2460$c818a8c0@chrismain>
References: <6.1.1.1.2.20050318124837.01cb91e8@mail.jpl.nasa.gov>
	<002001c52c12$38cf2460$c818a8c0@chrismain>
Message-ID: <d1h68q$9ru$1@sea.gmane.org>

> Don't you know the name needs to start with "I"?
> 
> iANTLR
> iParse
> iBuildTrees <- :>)
Do you want to get problems with Apple? :).

Ahmed.

From ric.klaren at gmail.com  Sun Mar 20 05:03:37 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Sun Mar 20 05:03:37 2005
Subject: [antlr-interest] no treeParser if Parser fails
In-Reply-To: <200503201311.37943.KoenSegers@scarlet.be>
References: <200503201311.37943.KoenSegers@scarlet.be>
Message-ID: <423D74A9.7020903@gmail.com>

Koen Segers wrote:
> I don't find a sort of boolean to see if parser found an error in the given 
> file. How can I see then that there was an error?
> 
> If there was an error it isn't needed to walk the tree also...

Override reportError/Warning in the generated parser and set a boolean 
attribute in there.

Cheers,

Ric
From pincombe at gmail.com  Sun Mar 20 06:11:48 2005
From: pincombe at gmail.com (Keith Pincombe)
Date: Sun Mar 20 06:11:50 2005
Subject: [antlr-interest] understanding CPP_PARSER.g
Message-ID: <a86d1c40050320061111944030@mail.gmail.com>

Hi,

If anyone has used CPP_PARSER.g i would love to ask you some questions
as i am really struggling to use it, my main problem is working out
how to access the information that the parser has discovered, more
specifically what type of variable has been discovered.

I think this is covered in the grammar below but the more i look at it
the more i don't think its in the right place, the more i look into
this the more confused i am getting if someone could help i would be
very grateful.

simple_type_specifier returns [CPPParser::TypeSpecifier ts]
{char *s;
ts = tsInvalid;}
: ( {qualifiedItemIsOneOf(qiType|qiCtor)}? 
s = qualified_type {ts=tsTYPEID;} 
| 
( "char" {ts |= tsCHAR;}
| "wchar_t" {ts |= tsWCHAR_T;}  
| "bool" {ts |= tsBOOL;}
| "short" {ts |= tsSHORT;}
| "int" {ts |= tsINT;}
| ("_int64"|"__int64") {ts |= tsLONG;}
| "__w64" {ts |= tsLONG;}
| "long" {ts |= tsLONG;}
| "signed" {ts |= tsSIGNED;}
| "unsigned" {ts |= tsUNSIGNED;}
| "float" {ts |= tsFLOAT;}
| "double" {ts |= tsDOUBLE;}
| "void" {ts |= tsVOID;}
| ("_declspec"|"__declspec") LPAREN ID RPAREN 
)+
|
// Fix towards allowing us to parse *.cpp files directly
(qualified_type qualified_id)=> s = qualified_type {ts=tsTYPEID;}
{printf("simple_type_specifier third option entered\n");}
)
;
From KoenSegers at scarlet.be  Sun Mar 20 09:39:36 2005
From: KoenSegers at scarlet.be (Koen Segers)
Date: Sun Mar 20 09:39:49 2005
Subject: [antlr-interest] no treeParser if Parser fails
In-Reply-To: <423D74A9.7020903@gmail.com>
References: <200503201311.37943.KoenSegers@scarlet.be>
	<423D74A9.7020903@gmail.com>
Message-ID: <200503201839.36154.KoenSegers@scarlet.be>

On Sunday 20 March 2005 14:03, Ric Klaren wrote:
> Koen Segers wrote:
> > I don't find a sort of boolean to see if parser found an error in the
> > given file. How can I see then that there was an error?
> >
> > If there was an error it isn't needed to walk the tree also...
>
> Override reportError/Warning in the generated parser and set a boolean
> attribute in there.

Jep thx !

>
> Cheers,
>
> Ric

-- 

Koen Segers

<koensegers@scarlet.be>
<http://eddyvite.dyndns.org>
From johnm-antlr at non.net  Sun Mar 20 09:42:39 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Sun Mar 20 09:42:20 2005
Subject: [antlr-interest] Inheritance of BaseAST class
In-Reply-To: <20050318234037.54798.qmail@web53910.mail.yahoo.com>
References: <20050318234037.54798.qmail@web53910.mail.yahoo.com>
Message-ID: <16957.46607.313682.863025@despot.non.net>

>>>>> "FC" == FC  <tangfc2001@yahoo.com> writes:
[...]

> JavaLexer lexer = new JavaLexer(r); lexer.setFilename(f); // Create a
> parser that reads from the scanner JavaRecognizer parser = new
> JavaRecognizer(lexer); parser.setFilename(f);
> parser.setASTNodeClass("MyPkg.JavaAST");

Hmm... I don't if I've tried using it with a package.

Also, I use e.g., parser.setASTNodeClass (TNode.class.getName());

Take care,
	John


From MVerma at ferranti.be  Mon Mar 21 00:55:52 2005
From: MVerma at ferranti.be (Michiel Vermandel)
Date: Mon Mar 21 00:55:56 2005
Subject: [antlr-interest] RE: Problem with PLSQLGrammar.g (Micheal J)
Message-ID: <919392D7803AE7489E03BFED5E52E82F017EE174@MAIL.ferranti.be>

Hi,

I had no problems in compiling the PLSQLGrammar.g file except for the
problem with the SELECT_EXPRESSIONNode.
But in any case, the same yields for me: I like to collaborate too in
refining the PLSQL parsing.

Regards

Michiel

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Ed Delaney
Sent: vrijdag 18 maart 2005 20:20
To: antlr-interest@antlr.org
Subject: [antlr-interest] RE: Problem with PLSQLGrammar.g (Micheal J)



Hi Micheal et al., 
I'm new to antlr and the world of parsers, compilers, translaters, but
at least make up for it with enthusiasm. 

I am very interested in getting the PLSQL Grammar working but my first
attempt to use the plsql grammer file generated so many errors I've sat
back and have started from square one. I have lots of things I'd like to
be able to do since PLSQL is mainly what I program in these days. 

If there is anything I can do to help  I am most interested in
collaborating on it. 

Ed 

---------------------------------------------------
Ed Delaney
SunGard SCT
Advisory Software Engineer
Phone Number (Office): 765-939-0533
Time Zone: US Indiana
edelaney@sungardsct.com
www.sungardsct.com

Leadership - Choices - Excellence
From marcus.tangermann at web.de  Mon Mar 21 01:36:00 2005
From: marcus.tangermann at web.de (Marcus Tangermann)
Date: Mon Mar 21 01:36:20 2005
Subject: [antlr-interest] Switching lexer rules on/off from parser
Message-ID: <423E9580.5070400@web.de>

Hello,

I have a grammar with a declaration part that can ignore newline and a
part with statements. A statement in this part is terminated by a newline.
Is it possible to turn on/off a lexer rule from parser which skips newline
in the declaration part and returns a newline after the end of the 
declaration
part?

Bye
Marcus
From togolmach2 at lycos.com  Mon Mar 21 03:07:24 2005
From: togolmach2 at lycos.com (togol machillan)
Date: Mon Mar 21 03:07:26 2005
Subject: [antlr-interest] Assertion failure in cicularqueue.hpp
Message-ID: <20050321110724.5E06D3384B@ws7-3.us4.outblaze.com>

Hi,

I get the following output due to failure of the assertion in the removeItems (size_t) method defined in the mentioned file. 

p ----> start of paragraph ...
 col == 1
Assertion failed: nb <= entries(), file u:\antlr-2.7.5\lib\cpp\antlr\circularqueue.hpp, line 59

The rule which generates this error looks like this:
paragraph{ 
	   std::cout << "p ----> start of paragraph ..." << std::endl;
	 } 
	 : pkeyword = p_keyword_nolist {col == 1}? ...  

The starting portion of the input file is given below. The assertion fails when the parser tries to process the TITLE line, although "TITLE" is defined as a literal in the p_keyword_nolist rule and starts in column 1. Can somebody explain what I need to do to avoid this situation.

Input file:

DYNAMICS
    DYNAMICS RESULTS=ON

TITLE 'IsoCyanate Leverkusen' 
...

Regards,

Togol

-- 
_______________________________________________
NEW! Lycos Dating Search. The only place to search multiple dating sites at once.
http://datingsearch.lycos.com

From pete.forman at westerngeco.com  Mon Mar 21 04:58:54 2005
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Mar 21 04:59:34 2005
Subject: [antlr-interest] Re: ANTLR GUI name
References: <3AC103F1B7EEEC48A855ACB1D2819E9103CAC2B4@rock-corpmail.microfocus.com>
	<dd3a065f050318123748c6fafe@mail.gmail.com>
Message-ID: <k6o15f5d.fsf@wgmail2.gatwick.eur.slb.com>

Bryan Ewbank <ewbank@gmail.com> writes:

 > What about Moose?  ANTLRs come from mooses, after all.

Shouldn't that be MOOS?
-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.

From scott at javadude.com  Mon Mar 21 05:03:10 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Mon Mar 21 05:03:16 2005
Subject: [antlr-interest] Re: ANTLR GUI name
In-Reply-To: <k6o15f5d.fsf@wgmail2.gatwick.eur.slb.com>
Message-ID: <20050321124142.74B06290B48@new.knowspam.net>

Has anyone suggested "Bovet"? 

It's at very least worth a suggestion to compliment the author ;)

-- Scott

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Pete Forman
> Sent: Monday, March 21, 2005 7:59 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Re: ANTLR GUI name
> 
> Bryan Ewbank <ewbank@gmail.com> writes:
> 
>  > What about Moose?  ANTLRs come from mooses, after all.
> 
> Shouldn't that be MOOS?
> -- 
> Pete Forman                -./\.-  Disclaimer: This post is originated
> WesternGeco                  -./\.-   by myself and does not represent
> pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
> http://petef.port5.com           -./\.-   Hughes or their divisions.



From ewbank at gmail.com  Mon Mar 21 05:35:11 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon Mar 21 05:35:14 2005
Subject: [antlr-interest] Switching lexer rules on/off from parser
In-Reply-To: <423E9580.5070400@web.de>
References: <423E9580.5070400@web.de>
Message-ID: <dd3a065f050321053566a0ef71@mail.gmail.com>

Yes, but be careful.  Any communications upstream from the parser to
the lexer have a funny smell to them.  If you can change your design
(or is this a requirement?), it's probably better to do that.

...

Since you mark a token as being skipped by setting it's type, you can
do this with some nifty interface - or a global variable :-)

The "be careful" has to do with lookahead.  If the lexer gets a few
tokens ahead of the parser, it's possible to "see" a newline in
declaration mode that should, in fact, terminate a statement.

I'm making this up, as I don't know your grammar, but consider:

   decl ....
   a=b

If you scanner reads the newline after "b" before the parser knows to
switch from decl to statement mode, it will ignore that newline.

If you allow declarations to follow statements, you see the same
problem in reverse:
   // I'm assuming "i: integer" is a declaration here
   a = b
   i
   : integer
Now, the newline after "i" might cause problems because it's not clear
if this is a declaration or a statement.

As a general rule, be aware of k in LL(k), and also - where I've been
burned - syntactic predicates which require more information that is
available

    ( decl ) => decl
    | statement

It's likely that (decl) will not match because the newlines are not
being correctly processed - and therefore your grammar will attempt to
process something that looks like a declaration as a statement.

Hope this helps,
B-)

On Mon, 21 Mar 2005 10:36:00 +0100, Marcus Tangermann
<marcus.tangermann@web.de> wrote:
> I have a grammar with a declaration part that can ignore newline
> and a part with statements. A statement in this part is terminated
> by a newline.
From wiggjd at lsbu.ac.uk  Mon Mar 21 06:15:09 2005
From: wiggjd at lsbu.ac.uk (David Wigg)
Date: Mon Mar 21 06:10:09 2005
Subject: [antlr-interest] Understanding C++ parser, CPP_parser.g
Message-ID: <423ED6ED.2000609@lsbu.ac.uk>

As the latest author of this parser I can help Keith Pincombe 
off-list.

Can I assume Keith you are using version 3.00 of July 2004?

The only types of symbols actually saved (in CPPSymbol.hpp) are 
those required for parsing. However, other fundamental types are 
available in "id_expression" where a call to (for example) 
myCode_id_expression could be inserted to pick up variable names 
and their types (from "_ts").

I agree it would be nice to save the types of variables in 
CPPSymbol.hpp as well. One day?

I look forward to hearing how you get on with your problem Keith.

David.

Message: 6
Date: Sun, 20 Mar 2005 14:11:48 +0000
From: Keith Pincombe <pincombe@gmail.com>
Subject: [antlr-interest] understanding CPP_PARSER.g
To: antlr-interest@antlr.org
Message-ID: <a86d1c40050320061111944030@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Hi,

If anyone has used CPP_PARSER.g i would love to ask you some 
questions as i am really struggling to use it, my main problem 
is working out how to access the information that the parser has 
discovered, more specifically what type of variable has been 
discovered.

I think this is covered in the grammar below but the more i look 
at it the more i don't think its in the right place, the more i 
look into this the more confused i am getting if someone could 
help i would be very grateful.

simple_type_specifier returns [CPPParser::TypeSpecifier ts]
{char *s;
ts = tsInvalid;}
: ( {qualifiedItemIsOneOf(qiType|qiCtor)}?
s = qualified_type {ts=tsTYPEID;}
|
( "char" {ts |= tsCHAR;}
| "wchar_t" {ts |= tsWCHAR_T;}
| "bool" {ts |= tsBOOL;}
| "short" {ts |= tsSHORT;}
| "int" {ts |= tsINT;}
| ("_int64"|"__int64") {ts |= tsLONG;}
| "__w64" {ts |= tsLONG;}
| "long" {ts |= tsLONG;}
| "signed" {ts |= tsSIGNED;}
| "unsigned" {ts |= tsUNSIGNED;}
| "float" {ts |= tsFLOAT;}
| "double" {ts |= tsDOUBLE;}
| "void" {ts |= tsVOID;}
| ("_declspec"|"__declspec") LPAREN ID RPAREN
)+
|
// Fix towards allowing us to parse *.cpp files directly
(qualified_type qualified_id)=> s = qualified_type {ts=tsTYPEID;}
{printf("simple_type_specifier third option entered\n");}
)
;


From jobapply at nextmail.ru  Sun Mar 20 14:05:17 2005
From: jobapply at nextmail.ru (jobapply)
Date: Mon Mar 21 09:01:53 2005
Subject: [antlr-interest] A simple parser for methods and nested {}
Message-ID: <20050320220519.86BD0DCC21@www.antlr.org>

I have nested command expressions like

~Command1{ <something1> ~Command2{ <something2> } <something3> } ...

Here <something> is anything including {}, but it is to become plain text in
tree nodes.
Commands are started with ~ and capital letter, curly bracers are
obligatory: ~SomeCommand{...}.

I've never written any grammars before.. 
I've read a heap of docs but as I try to do it - keep failing again and
again.

I imagine that should become something like:

           ~Command1
        /  \          \
       /    \          \
      /      \          \
     /        \          \
something1  ~Command2  something3
                \
		something2


Another example:
~Command{ BLA ~Command{bla{bla}} Bla }
~A{b{}}
~A{b{~C{c}}}

   The last one should be smth like

   ~A
 /  |  \
b{  ~C  }
    |
    c

This is my grammar. It works, but splits {} into separate nodes even when
counter!=0;
Maybe there is a way to prevent such split into tokens or somehow else solve
the problem?

----------------------------

class ExpressionParser extends Parser;
options { buildAST=true; }

tokens {
    COMMAND<AST=CommandNode>;
}

{ public static int curlCounter=0; }


expr: (COMMAND^)? lcurl components rcurl;
lcurl: LCURL { curlCounter++; } ;
rcurl: RCURL { curlCounter--; };
components: component components |;
component: expr | ANY | COMMA!;

class ExpressionLexer extends Lexer;

LCURL: '{';
RCURL: '}';

ANY: (~('~' | '{' | '}' | ','))+;
COMMA: ',';   // yep I have a list of params, but that does not matter

COMMAND: '~' ('A'..'Z')+;


I tried to explain the needs as much as I can.. Sorry it took so long.

From mail at martin-probst.com  Mon Mar 21 09:26:47 2005
From: mail at martin-probst.com (Martin Probst)
Date: Mon Mar 21 09:26:56 2005
Subject: [antlr-interest] Switching lexer rules on/off from parser
In-Reply-To: <dd3a065f050321053566a0ef71@mail.gmail.com>
References: <423E9580.5070400@web.de>
	<dd3a065f050321053566a0ef71@mail.gmail.com>
Message-ID: <1111426007.23302.15.camel@narr.homeip.net>

Hi,

> The "be careful" has to do with lookahead.  If the lexer gets a few
> tokens ahead of the parser, it's possible to "see" a newline in
> declaration mode that should, in fact, terminate a statement.

This "be careful" should be taken very seriously. If you are using C++
code generation you will definetly run into problems as the current
implementation always looks one token ahead of the parser. I once wrote
a mail and a small patch to the list but Ric apparently didn't have the
time to look into that. If you run into the problem I can give you that
patch.

mfg
Martin

From mail at martin-probst.com  Mon Mar 21 09:35:36 2005
From: mail at martin-probst.com (Martin Probst)
Date: Mon Mar 21 09:35:43 2005
Subject: [antlr-interest] A simple parser for methods and nested {}
In-Reply-To: <20050320220519.86BD0DCC21@www.antlr.org>
References: <20050320220519.86BD0DCC21@www.antlr.org>
Message-ID: <1111426536.23302.24.camel@narr.homeip.net>

Hi,

> This is my grammar. It works, but splits {} into separate nodes even when
> counter!=0;
> Maybe there is a way to prevent such split into tokens or somehow else solve
> the problem?

About splitting nodes etc: read the section about tree construction in
the ANTLR documentation, it should really help.

As to your grammar: you can use recursion to keep track of the curly
braces:

expr: (COMMAND^ LCURL component RCURL)*;
component: (expr | ANY | COMMA)*;

This should only accept well-formed command sequences. E.g. if you
encounter
~Foo{ ~bar{...}}

The parser will start with a command and by that enter the "expr" rule.
Then it sees a LCURL. The following "COMMAND" token makes it descend
into "component" rule and then (recursively) back to expr. It will again
parse the LCURL, then the content of the expr ("...") and then the
RCURL. With this token the expr rule is finished and it returns upwards.
Then it sees a RCURL token again. This means the current expr rule is
finished too and the parser can exit.

Btw. you should possibly add an "EOF" after the topmost "expr" rule:
expr: (COMMAND^ LCURL component RCURL)* EOF;
this way the parser will require the whole input to be wellformed. If
there was no EOF token the parser might just stop parsing if it can't
match any more rules.

Regards,
Martin

From parrt at cs.usfca.edu  Mon Mar 21 10:47:02 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Mar 21 10:40:04 2005
Subject: [antlr-interest] Re: ANTLR GUI name
In-Reply-To: <20050321124142.74B06290B48@new.knowspam.net>
References: <20050321124142.74B06290B48@new.knowspam.net>
Message-ID: <e50ddfc6f6697b69d13f44773b758d85@cs.usfca.edu>


On Mar 21, 2005, at 5:03 AM, Scott Stanchfield wrote:

> Has anyone suggested "Bovet"?

I hadn't thought of that.  Pretty cool: ANTLRBovet or BovetANTLR or 
Bovet, but it doesn't "say" IDE.  I really would like to have ANTLR in 
the name so I can leverage the visibility and names that say what they 
do are useful.  That said, "Bovet" is pretty cool 'cept everyone but 
the French would mispronounce it ;)  It's "bo-vay".

Ter

>
> It's at very least worth a suggestion to compliment the author ;)
>
> -- Scott
>
>> -----Original Message-----
>> From: antlr-interest-bounces@antlr.org
>> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Pete Forman
>> Sent: Monday, March 21, 2005 7:59 AM
>> To: antlr-interest@antlr.org
>> Subject: [antlr-interest] Re: ANTLR GUI name
>>
>> Bryan Ewbank <ewbank@gmail.com> writes:
>>
>>> What about Moose?  ANTLRs come from mooses, after all.
>>
>> Shouldn't that be MOOS?
>> -- 
>> Pete Forman                -./\.-  Disclaimer: This post is originated
>> WesternGeco                  -./\.-   by myself and does not represent
>> pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
>> http://petef.port5.com           -./\.-   Hughes or their divisions.
>
>
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From mail at martin-probst.com  Mon Mar 21 11:19:23 2005
From: mail at martin-probst.com (Martin Probst)
Date: Mon Mar 21 11:19:30 2005
Subject: [antlr-interest] Re: ANTLR GUI name
In-Reply-To: <e50ddfc6f6697b69d13f44773b758d85@cs.usfca.edu>
References: <20050321124142.74B06290B48@new.knowspam.net>
	<e50ddfc6f6697b69d13f44773b758d85@cs.usfca.edu>
Message-ID: <1111432763.23302.28.camel@narr.homeip.net>


> That said, "Bovet" is pretty cool 'cept everyone but 
> the French would mispronounce it ;)  It's "bo-vay".

One more reason for "BovetANTLR", then it's the same in French, English
and German - at least ;-)

Regards,
Martin

From Loring.G.Craymer at jpl.nasa.gov  Mon Mar 21 11:41:53 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Mon Mar 21 11:41:57 2005
Subject: [antlr-interest] Re: ANTLR GUI name
In-Reply-To: <1111432763.23302.28.camel@narr.homeip.net>
References: <20050321124142.74B06290B48@new.knowspam.net>
	<e50ddfc6f6697b69d13f44773b758d85@cs.usfca.edu>
	<1111432763.23302.28.camel@narr.homeip.net>
Message-ID: <6.1.1.1.2.20050321113632.01de3be8@mail.jpl.nasa.gov>

I've never been keen on packages named for the author--wrong focus, as Ter 
points out.  Naming by the author is another matter:  what's Jean's take on 
this?

BTW, another possibility is AIDE with "A" for "ANTLR" rather than "Another".

--Loring


At 11:19 AM 3/21/2005, Martin Probst wrote:

> > That said, "Bovet" is pretty cool 'cept everyone but
> > the French would mispronounce it ;)  It's "bo-vay".
>
>One more reason for "BovetANTLR", then it's the same in French, English
>and German - at least ;-)
>
>Regards,
>Martin


From edelaney at sungardsct.com  Mon Mar 21 11:44:17 2005
From: edelaney at sungardsct.com (Ed Delaney)
Date: Mon Mar 21 11:44:29 2005
Subject: [antlr-interest] PLSQLGrammar.g
In-Reply-To: <20050321184010.2A236DCD25@www.antlr.org>
Message-ID: <OF759F50E3.0511BDC0-ON05256FCB.006C12F7-05256FCB.006C6F53@sungardsct.com>

Hey Michiel,
Can you tell me how you generated it? I have not figured out Eclipse and 
the Antlr plug-in, so I'm just trying from dos.
java antlr.Tool plsqlgrammar.g

It generates PLSqlLexer.java and PLSqlParser.java, but in the process 
generates a huge amount of output that looks like the stuff below.

So you have any idea what it's problem is?

Can you tell me a little about what you are interested in doing? 

My interest is first just learning about antlr and parsers and lexers. 
Specifically, I want to be able to create a tool that does this:

1) recognizes pl/sql, sqlplus, and sql code inside a file. All our source 
is stored as sqlplus build scripts that may contain all of these in one 
file, including sqlplus substitution variables. I'd like my tool to be 
aware of the substitution variables so it doesn't choke on them or force 
me to always extract the code from the database first.

2) for plsql, a) a code formatter, b) a syntax checker c) a style checker 
(with our custom style rules)

3) finally, once I can get a complete parse tree, I want to create a 
language that can edit and query the parse tree in a syntax sensitive way 
and generate new plsql code. That is, I want to be able to answer 
questions such as "list all the procedure names in the package that 
contain a call to function X with  the first paramter = 'ABC'"
or
Select every procedure or function definition that does not contain a call 
to function 'B'.
or
Read the package and for every procedure called 'A', insert text at a 
specific point in the code.

thanks,
ed

--------------------------------------------------------------
...
PLSQLGrammar.g:1196:25:     k==1:OPEN_PAREN
PLSQLGrammar.g:1196:25:     k==2:NUMBER
PLSQLGrammar.g:1196:25:     k==3:CLOSE_PAREN
PLSQLGrammar.g:1196:25: 
k==4:NULL_TREE_LOOKAHEAD,"or","replace","is","as",SE
MI,"not",ASSIGNMENT_EQ,"default",OPEN_PAREN,COMMA,CLOSE_PAREN,"then","in",PLUS,M
INUS,"and","like","between",DOUBLEDOT,ASTERISK,DIVIDE,QUOTED_STRING,"abs","ceil"
,"floor","power","round","sign","sqrt","trunc","chr","initcap","lower","lpad","l
trim","rpad","rtrim","soundex","substr","translate","upper","ascii","instr","len
gth","concat","count","chartorowid","convert","hextoraw","rawtohex","rowidtochar
","to_char","to_date","to_number","decode","dump","greatest","least","nvl","user
env","vsize","user","sysdate",EQ,LT,GT,NOT_EQ,LE,GE,"intersect",IDENTIFIER
PLSQLGrammar.g:1684:11: warning:nondeterminism between alts 1 and 2 of 
block upo
n
PLSQLGrammar.g:1684:11: 
k==1:"replace",QUOTED_STRING,"abs","ceil","floor","p
ower","round","sign","sqrt","trunc","chr","initcap","lower","lpad","ltrim","rpad
","rtrim","soundex","substr","translate","upper","ascii","instr","length","conca
t","count","chartorowid","convert","hextoraw","rawtohex","rowidtochar","to_char"
,"to_date","to_number","decode","dump","greatest","least","nvl","userenv","vsize
","user","sysdate","intersect",IDENTIFIER
PLSQLGrammar.g:1684:11:     k==2:DOT
PLSQLGrammar.g:1684:11: 
k==3:"replace",QUOTED_STRING,"abs","ceil","floor","p
ower","round","sign","sqrt","trunc","chr","initcap","lower","lpad","ltrim","rpad
","rtrim","soundex","substr","translate","upper","ascii","instr","length","conca
t","count","chartorowid","convert","hextoraw","rawtohex","rowidtochar","to_char"
,"to_date","to_number","decode","dump","greatest","least","nvl","userenv","vsize
","user","sysdate","intersect",IDENTIFIER
PLSQLGrammar.g:1684:11:     k==4:DOT
PLSQLGrammar.g:1634: warning:nondeterminism between alts 1 and 2 of block 
upon
...

---------------------------------------------------
Ed Delaney
SunGard SCT
Advisory Software Engineer
Phone Number (Office): 765-939-0533
Time Zone: US Indiana
edelaney@sungardsct.com
www.sungardsct.com

Leadership - Choices - Excellence
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050321/e2db71cd/attachment.html
From mail at martin-probst.com  Mon Mar 21 12:01:25 2005
From: mail at martin-probst.com (Martin Probst)
Date: Mon Mar 21 12:01:34 2005
Subject: [antlr-interest] Switching lexer rules on/off from parser
In-Reply-To: <1111426007.23302.15.camel@narr.homeip.net>
References: <423E9580.5070400@web.de>
	<dd3a065f050321053566a0ef71@mail.gmail.com>
	<1111426007.23302.15.camel@narr.homeip.net>
Message-ID: <1111435285.23302.35.camel@narr.homeip.net>

I'm wrong on this, the code has been fixed.

Am Montag, den 21.03.2005, 18:26 +0100 schrieb Martin Probst:
> Hi,
> 
> > The "be careful" has to do with lookahead.  If the lexer gets a few
> > tokens ahead of the parser, it's possible to "see" a newline in
> > declaration mode that should, in fact, terminate a statement.
> 
> This "be careful" should be taken very seriously. If you are using C++
> code generation you will definetly run into problems as the current
> implementation always looks one token ahead of the parser. I once wrote
> a mail and a small patch to the list but Ric apparently didn't have the
> time to look into that. If you run into the problem I can give you that
> patch.
> 
> mfg
> Martin
> 
> 

From parrt at cs.usfca.edu  Mon Mar 21 18:26:22 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Mar 21 18:19:22 2005
Subject: [antlr-interest] v3.0 debug interface
Message-ID: <a049c61ed9dd438344c940d699fd09a1@cs.usfca.edu>

Howdy,

I am working on the debug interface so that parsers trigger events.  
The GUI can listen for these events (initially in Java and then 
marshaled over a socket to support non-Java languages) and do cool 
displays etc...  The debugger will be able to tell the parser to 
Thread.wait() in order to implement breakpoints etc...

Anyway, I've been thinking hard about what events we need to trigger.  
Most of my thoughts are driven by the ways in which I intend to use a 
debugger.  Also I've take some ideas from David Wigg (who suggested I 
fire events for alternatives not just rules) and Scott Stanchfield (who 
did the ParseView debugger).

The code generator adds the appropriate triggers upon -debug 
command-line option.  All but the location() triggers are functioning.  
Currently, I'm going to have the GUI launch the parser with a 
TokenStream but later your apps will be able to create an instance of 
the GUI and pass it to the parser as the debug event listener. :)   By 
default, the parser compiles but doesn't emit any debug output; I'll 
probably change that so it mimics the -traceParser 2.x feature.

BTW, I've kept this interface as small as possible.  Some of the 
functionality I want in the debugger is not obviously possible from 
this interface, but in fact with a little work the debugger will be 
able to do amazing things!

So, here it is so far...I'm happy to receive feedback.  I expect that 
this will change a lot as Jean builds the GUI on top.

Ter
-------------------------------
package org.antlr.runtime;

public interface ANTLRDebugInterface {
	/** The parser has just entered a rule.  No decision has been made 
about
	 *  which alt is predicted.  This is fired AFTER init actions have been
	 *  executed.  Attributes are defined and available etc...
	 */
	public void enterRule(String ruleName);

	/** Because rules can have lots of alternatives, it is very useful to
	 *  know which alt you are entering.  This is 1..n for n alts.
	 */
	public void enterAlt(int alt);

	/** This is the last thing executed before leaving a rule.  It is
	 *  executed even if an exception is thrown.  This is triggered after
	 *  error reporting and recovery have occurred.  This implies an
	 *  "exitAlt" event.
	 */
	public void exitRule(String ruleName);

	/** Track entry into any (...) subrule other EBNF construct */
	public void enterSubRule();

	public void exitSubRule();

	/** An input token was consumed; matched by any kind of element.
	 *  Trigger after the token was matched by things like match(), 
matchAny().
	 */
	public void consumeToken(Token t);

	/** To watch a parser move through the grammar, the parser needs to
	 *  inform the debugger what line/charPos it is passing in the grammar.
	 *  For now, this does not know how to switch from one grammar to the
	 *  other and back for island grammars etc...
	 *
	 *  This should also allow breakpoints because the debugger can stop
	 *  the parser whenever it hits this line/pos.
	 */
	public void location(int line, int pos);

	/** A recognition exception occurred such as NoViableAltException.  I 
made
	 *  this a generic event so that I can alter the exception hierachy 
later
	 *  without having to alter all the debug objects.
	 */
	public void recognitionException(RecognitionException e);

	/** Indicates that the parser was in an error state and has now 
recovered
	 *  in that a token, t, was successfully matched.  This will be useful
	 *  in a GUI where you want to probably grey out tokens that are 
consumed
	 *  but not matched to anything in grammar.  Anything between an 
exception
	 *  and recovered() was tossed out by the parser.
	 */
	public void recovered(Token t);
}

--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From scott at javadude.com  Mon Mar 21 20:25:24 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Mon Mar 21 20:25:28 2005
Subject: [antlr-interest] Re: ANTLR GUI name
In-Reply-To: <6.1.1.1.2.20050321113632.01de3be8@mail.jpl.nasa.gov>
Message-ID: <20050322040342.9B8122907A0@new.knowspam.net>

I'm generally not terribly keen on using the author's name (sounds kinda
self-important) either, though some last names roll off the tongue nicely...

Stanchfield would make a lowsy tool name ;)

But Bovet (pronounced properly, and I'm not French and knew how ;) has a
nice ring to it.

Not that I'm voting for it, but wanted to propose it as a kudos ;)

Later,
-- Scott



From ewbank at gmail.com  Mon Mar 21 22:03:14 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon Mar 21 22:03:18 2005
Subject: [antlr-interest] IEEE STIL language?
Message-ID: <dd3a065f05032122033f2b3a0e@mail.gmail.com>

Anyone know of a grammar for IEEE STIL?  There's a sort of a front
page [1] but the grammar referenced there as "an introduction" is a
bit vague/illegal.

Thanks for any pointers,
- B

[1] http://grouper.ieee.org/groups/1450/Flyer_frame.html
From brendan at cenqua.com  Mon Mar 21 23:14:24 2005
From: brendan at cenqua.com (Brendan Humphreys)
Date: Mon Mar 21 23:14:28 2005
Subject: [antlr-interest] still more GUI names...
In-Reply-To: <79b7a4980d006d0d55a64de29876a67d@cs.usfca.edu>
References: <79b7a4980d006d0d55a64de29876a67d@cs.usfca.edu>
Message-ID: <423FC5D0.1040301@cenqua.com>

grANTLR - graphical ANTLR - got a nice enough sound to it IMHO
RampANTLR - dunno, just liked the rampant part

Can't wait for the inevitable logo competition ;-)

-Brendan


Terence Parr wrote:
> Hi,
> 
> Perhaps these will give somebody a good idea:
> 
> ANTLR Adept
> ANTLR Guru
> ANTLR Scholar
> 
> Actually, I think ANTLRules is probably the best so far.  Thanks, 
> Bharath!  Doesn't make one think of a dev environment, but it's cool 
> nonetheless. :)
> 
> Jamie Herre on the phone just convinced me that ANTLRWorks is not as good.
> 
> Terence
> -- 
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> 
> 

From MVerma at ferranti.be  Tue Mar 22 00:17:59 2005
From: MVerma at ferranti.be (Michiel Vermandel)
Date: Tue Mar 22 00:18:08 2005
Subject: [antlr-interest] PLSQLGrammar.g
Message-ID: <919392D7803AE7489E03BFED5E52E82F017EE1B2@MAIL.ferranti.be>

Hi Ed,

About the list of warnings in your mail: I've got these too...
I ignored them for the moment and passed on to the next stage where I compiled the java files. After removing the missing class the compilation went ok.
That's were I got... Now I'm a bit short of time (this week) and knowledge to proceed. I do not quit now how to proceed and parse a PlSql package file, but I'll find out, I guess.

My purpose: I'm working in a company with about 60 people working on the same project. We are generating lots of PlSql packages and so we are facing some problems such as checking code quality and coding standards but even more important: we need to keep the technical designs of these packages in sync so other programmers can use this documentation.

Therefore we want to 
1) create a tool which creates a basic documentation out of PlSql packages (We call it PlSqlDoc, similar to JavaDoc) 
2) be able to add structured comments to our code. Then we can use these comments to generate a flow of the packages.
What I mean is: you can find some software to generate a flowchart out of PLSQL code but that's mainly not useful since they just parse the syntax and generate hugh flows without much added value. Sometimes you just get your code duplicated in boxes and arrows. We want to be able to identify important blocks and for these add special comment.
For example: if you have some code with two loops and one of them is very important for the understanding of the functionality then we want to be able to add some comment tag:

FOR x IN (SELECT * FROM Employees)
LOOP /*@DOC: Determining raise for every employee*/

END LOOP;

The other, less important loop does not get such /*@DOC */ tag and thus won't appear in the generated flow...

For the example above we want to use AntLr to identify the structure (the LOOP) and find the comment assigned to this statement. Then we want to generate a flow with this comment added to the loop symbol.

Well, that's the idea...

In this way the programmer can distinguish important logical steps from less important ones and control the comment that will appear along side in the documentation.

Any ideas are off course welcome.

Regards,

Michiel

-----Original Message-----
From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Ed Delaney
Sent: maandag 21 maart 2005 20:44
To: antlr-interest@antlr.org
Subject: [antlr-interest] PLSQLGrammar.g


Hey Michiel, 
Can you tell me how you generated it? I have not figured out Eclipse and the Antlr plug-in, so I'm just trying from dos. 
java antlr.Tool plsqlgrammar.g 

It generates PLSqlLexer.java and PLSqlParser.java, but in the process generates a huge amount of output that looks like the stuff below. 

So you have any idea what it's problem is? 

Can you tell me a little about what you are interested in doing? 

My interest is first just learning about antlr and parsers and lexers. Specifically, I want to be able to create a tool that does this: 

1) recognizes pl/sql, sqlplus, and sql code inside a file. All our source is stored as sqlplus build scripts that may contain all of these in one file, including sqlplus substitution variables. I'd like my tool to be aware of the substitution variables so it doesn't choke on them or force me to always extract the code from the database first. 

2) for plsql, a) a code formatter, b) a syntax checker c) a style checker (with our custom style rules) 

3) finally, once I can get a complete parse tree, I want to create a language that can edit and query the parse tree in a syntax sensitive way and generate new plsql code. That is, I want to be able to answer questions such as "list all the procedure names in the package that contain a call to function X with ?the first paramter = 'ABC'" 
or 
Select every procedure or function definition that does not contain a call to function 'B'. 
or 
Read the package and for every procedure called 'A', insert text at a specific point in the code. 

thanks, 
ed 

-------------------------------------------------------------- 
... 
PLSQLGrammar.g:1196:25: ? ? k==1:OPEN_PAREN 
PLSQLGrammar.g:1196:25: ? ? k==2:NUMBER 
PLSQLGrammar.g:1196:25: ? ? k==3:CLOSE_PAREN 
PLSQLGrammar.g:1196:25: ? ? k==4:NULL_TREE_LOOKAHEAD,"or","replace","is","as",SE 
MI,"not",ASSIGNMENT_EQ,"default",OPEN_PAREN,COMMA,CLOSE_PAREN,"then","in",PLUS,M 
INUS,"and","like","between",DOUBLEDOT,ASTERISK,DIVIDE,QUOTED_STRING,"abs","ceil" 
,"floor","power","round","sign","sqrt","trunc","chr","initcap","lower","lpad","l 
trim","rpad","rtrim","soundex","substr","translate","upper","ascii","instr","len 
gth","concat","count","chartorowid","convert","hextoraw","rawtohex","rowidtochar 
","to_char","to_date","to_number","decode","dump","greatest","least","nvl","user 
env","vsize","user","sysdate",EQ,LT,GT,NOT_EQ,LE,GE,"intersect",IDENTIFIER 
PLSQLGrammar.g:1684:11: warning:nondeterminism between alts 1 and 2 of block upo 
n 
PLSQLGrammar.g:1684:11: ? ? k==1:"replace",QUOTED_STRING,"abs","ceil","floor","p 
ower","round","sign","sqrt","trunc","chr","initcap","lower","lpad","ltrim","rpad 
","rtrim","soundex","substr","translate","upper","ascii","instr","length","conca 
t","count","chartorowid","convert","hextoraw","rawtohex","rowidtochar","to_char" 
,"to_date","to_number","decode","dump","greatest","least","nvl","userenv","vsize 
","user","sysdate","intersect",IDENTIFIER 
PLSQLGrammar.g:1684:11: ? ? k==2:DOT 
PLSQLGrammar.g:1684:11: ? ? k==3:"replace",QUOTED_STRING,"abs","ceil","floor","p 
ower","round","sign","sqrt","trunc","chr","initcap","lower","lpad","ltrim","rpad 
","rtrim","soundex","substr","translate","upper","ascii","instr","length","conca 
t","count","chartorowid","convert","hextoraw","rawtohex","rowidtochar","to_char" 
,"to_date","to_number","decode","dump","greatest","least","nvl","userenv","vsize 
","user","sysdate","intersect",IDENTIFIER 
PLSQLGrammar.g:1684:11: ? ? k==4:DOT 
PLSQLGrammar.g:1634: warning:nondeterminism between alts 1 and 2 of block upon 
... 

---------------------------------------------------
Ed Delaney
SunGard SCT
Advisory Software Engineer
Phone Number (Office): 765-939-0533
Time Zone: US Indiana
edelaney@sungardsct.com
www.sungardsct.com

Leadership - Choices - Excellence
From hombre at gmail.com  Tue Mar 22 01:14:42 2005
From: hombre at gmail.com (Tom Verbeure)
Date: Tue Mar 22 01:14:47 2005
Subject: [antlr-interest] Re: ANTLR GUI name
In-Reply-To: <1111432763.23302.28.camel@narr.homeip.net>
References: <20050321124142.74B06290B48@new.knowspam.net>
	<e50ddfc6f6697b69d13f44773b758d85@cs.usfca.edu>
	<1111432763.23302.28.camel@narr.homeip.net>
Message-ID: <f7896340050322011462097bc6@mail.gmail.com>

> One more reason for "BovetANTLR", then it's the same in French, English
> and German - at least ;-)

Here's the definition of 'bovet' according to www.dictionary.com:

"wiss-born Italian physiologist. He won a 1957 Nobel Prize for the
development of muscle relaxants and the first synthetic
antihistamine."

www.wordreference.com doesn't know about it at all.

I must be missing some crucial clue here. Can anyone help me out? ;-)

Tom

(I liked the DismANTLR !)
From ArnarB at oddi.is  Tue Mar 22 01:19:54 2005
From: ArnarB at oddi.is (Arnar Birgisson)
Date: Tue Mar 22 01:20:34 2005
Subject: [antlr-interest] Re: ANTLR GUI name
Message-ID: <s23fe35f.010@emil.oddi.is>

I had the same dilemma yesterday :o) However, this explained it:

>From http://www.antlr.org/history.html:
 Jean Bovet, a graduate student in CS here at University of San
Francisco is working on a GUI IDE.

Arnar


>>> Tom Verbeure <hombre@gmail.com> 22.3.2005 09:14:42 >>>
> One more reason for "BovetANTLR", then it's the same in French,
English
> and German - at least ;-)

Here's the definition of 'bovet' according to www.dictionary.com: 

"wiss-born Italian physiologist. He won a 1957 Nobel Prize for the
development of muscle relaxants and the first synthetic
antihistamine."

www.wordreference.com doesn't know about it at all.

I must be missing some crucial clue here. Can anyone help me out? ;-)

Tom

(I liked the DismANTLR !)
From hombre at gmail.com  Tue Mar 22 01:48:44 2005
From: hombre at gmail.com (Tom Verbeure)
Date: Tue Mar 22 01:48:52 2005
Subject: [antlr-interest] Re: ANTLR GUI name
In-Reply-To: <s23fe35f.010@emil.oddi.is>
References: <s23fe35f.010@emil.oddi.is>
Message-ID: <f789634005032201481e537eed@mail.gmail.com>

> >From http://www.antlr.org/history.html:
>  Jean Bovet, a graduate student in CS here at University of San
> Francisco is working on a GUI IDE.

Thanks! Maybe someone should send this definition to dictonary.com then. ;-)

Tom
From togolmach2 at lycos.com  Tue Mar 22 02:50:26 2005
From: togolmach2 at lycos.com (togol machillan)
Date: Tue Mar 22 02:50:28 2005
Subject: [antlr-interest] Skipping anything not parseable
Message-ID: <20050322105026.2AE20C6142@ws7-5.us4.outblaze.com>

Hi,

Is there any way to skip token on input for which no rule has been defined in the parser? When the parser sees some structure which it does not recognize, it stops saying that it was expecting something else. I want the parser to continue and just skip over structures or tokens it cannot handle. 

Regards,

Awais
-- 
_______________________________________________
NEW! Lycos Dating Search. The only place to search multiple dating sites at once.
http://datingsearch.lycos.com

From MVerma at ferranti.be  Tue Mar 22 02:52:34 2005
From: MVerma at ferranti.be (Michiel Vermandel)
Date: Tue Mar 22 02:52:37 2005
Subject: [antlr-interest] Skipping anything not parseable
Message-ID: <919392D7803AE7489E03BFED5E52E82F017EE1CB@MAIL.ferranti.be>

I guess you still want to know about these occurrences, right?


-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of togol machillan
Sent: dinsdag 22 maart 2005 11:50
To: antlr-interest@antlr.org
Subject: [antlr-interest] Skipping anything not parseable

Hi,

Is there any way to skip token on input for which no rule has been
defined in the parser? When the parser sees some structure which it does
not recognize, it stops saying that it was expecting something else. I
want the parser to continue and just skip over structures or tokens it
cannot handle. 

Regards,

Awais
-- 
_______________________________________________
NEW! Lycos Dating Search. The only place to search multiple dating sites
at once.
http://datingsearch.lycos.com

From togolmach2 at lycos.com  Tue Mar 22 03:18:11 2005
From: togolmach2 at lycos.com (togol machillan)
Date: Tue Mar 22 03:18:13 2005
Subject: [antlr-interest] Skipping anything not parseable
Message-ID: <20050322111811.D961A86B0E@ws7-1.us4.outblaze.com>

No, not important because I am selecting paragraphs of interest by defining keywords which occur as the first word on the line. So any paragraph which starts with a keyword not in the defined keyword list, should be skipped over. How can parser skip over unknown paragraphs without saying that its expecting the EOF token.

Mach

----- Original Message -----
From: "Michiel Vermandel" <MVerma@ferranti.be>
To: "togol machillan" <togolmach2@lycos.com>, antlr-interest@antlr.org
Subject: RE: [antlr-interest] Skipping anything not parseable
Date: Tue, 22 Mar 2005 11:52:34 +0100

> 
> I guess you still want to know about these occurrences, right?
> 
> 
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of togol machillan
> Sent: dinsdag 22 maart 2005 11:50
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Skipping anything not parseable
> 
> Hi,
> 
> Is there any way to skip token on input for which no rule has been
> defined in the parser? When the parser sees some structure which it does
> not recognize, it stops saying that it was expecting something else. I
> want the parser to continue and just skip over structures or tokens it
> cannot handle.
> 
> Regards,
> 
> Awais
> --
> _______________________________________________
> NEW! Lycos Dating Search. The only place to search multiple dating sites
> at once.
> http://datingsearch.lycos.com

-- 
_______________________________________________
NEW! Lycos Dating Search. The only place to search multiple dating sites at once.
http://datingsearch.lycos.com

From MVerma at ferranti.be  Tue Mar 22 03:32:16 2005
From: MVerma at ferranti.be (Michiel Vermandel)
Date: Tue Mar 22 03:32:19 2005
Subject: [antlr-interest] Skipping anything not parseable
Message-ID: <919392D7803AE7489E03BFED5E52E82F017EE1CD@MAIL.ferranti.be>

Sorry, can't help you on this one...yet (I'm quit new in AntLr)

-----Original Message-----
From: togol machillan [mailto:togolmach2@lycos.com] 
Sent: dinsdag 22 maart 2005 12:17
To: Michiel Vermandel
Subject: RE: [antlr-interest] Skipping anything not parseable

No, not important because I am selecting paragraphs of interest by
defining keywords which occur as the first word on the line. So any
paragraph which starts with a keyword not in the defined keyword list,
should be skipped over. How can parser skip over unknown paragraphs
without saying that its expecting the EOF token.

Mach

----- Original Message -----
From: "Michiel Vermandel" <MVerma@ferranti.be>
To: "togol machillan" <togolmach2@lycos.com>, antlr-interest@antlr.org
Subject: RE: [antlr-interest] Skipping anything not parseable
Date: Tue, 22 Mar 2005 11:52:34 +0100

> 
> I guess you still want to know about these occurrences, right?
> 
> 
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of togol machillan
> Sent: dinsdag 22 maart 2005 11:50
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Skipping anything not parseable
> 
> Hi,
> 
> Is there any way to skip token on input for which no rule has been
> defined in the parser? When the parser sees some structure which it
does
> not recognize, it stops saying that it was expecting something else. I
> want the parser to continue and just skip over structures or tokens it
> cannot handle.
> 
> Regards,
> 
> Awais
> --
> _______________________________________________
> NEW! Lycos Dating Search. The only place to search multiple dating
sites
> at once.
> http://datingsearch.lycos.com

-- 
_______________________________________________
NEW! Lycos Dating Search. The only place to search multiple dating sites
at once.
http://datingsearch.lycos.com

From mmoktali at bphx.dk  Tue Mar 22 03:35:24 2005
From: mmoktali at bphx.dk (Meena Moktali)
Date: Tue Mar 22 03:36:23 2005
Subject: [antlr-interest] Unexpected Token problem
Message-ID: <389DFA1991602B4DB5E5691B00929EB904FCCB@bpsdk910.bphx.dk>

hi all,
I have a problem with Tree construction.
I have written a grammar for parsing map statements which are as shown below

----------------------------------------------------------------
map CURRENCY_SPACE in KSPS4_MSG
       to TEXT_CODE of STD_MSG_PARM_V of STD_MSG_CLIENT_SRV_I
map 'CURRENCY_EXCHANGE'
       to VIEW_LONG_NAME of STD_MSG_CLIENT_SRV_I
---------------------------------------------------------------- 

The grammar Lexer and Parser are as below....

***************************************************************
class MapsParser extends Parser;

options{buildAST=true;}

statement	:	(mapval)+ ;

mapval	:	"map"^ viewfield "to" viewfield ;

viewfield	:	text((IN^|OF^)text)*;

text	 	:	IDENT ;

class MapsLexer extends Lexer;

options{k=2;}

IDENT	:	('a'..'z'|'A'..'Z'|'0'..'9'|'_'|'\'')(WS)* ;

WS	:	('\t'
		|'\r''\n' {newline();}
		|'\n'	  {newline();}
		|'\r'
		|' ');
IN	:	"in" ;
OF	:	"of" ;

**************************************************************
What is the problem with the parser?
I am getting an error

C:\TEMP>java MapMain
line 1:1: unexpected token: m
Exception java.lang.NullPointerException

PLease help.....

-Meena.

-----Original Message-----
From: Scott Stanchfield [mailto:scott@javadude.com]
Sent: 21. marts 2005 15:03
To: antlr-interest@antlr.org
Subject: RE: [antlr-interest] Re: ANTLR GUI name

From ewbank at gmail.com  Tue Mar 22 04:10:56 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue Mar 22 04:10:59 2005
Subject: [antlr-interest] Unexpected Token problem
In-Reply-To: <389DFA1991602B4DB5E5691B00929EB904FCCB@bpsdk910.bphx.dk>
References: <389DFA1991602B4DB5E5691B00929EB904FCCB@bpsdk910.bphx.dk>
Message-ID: <dd3a065f05032204105d53663a@mail.gmail.com>

I think the error is caused because IDENT matched "m" - the lexer rule
shown matches exactly one letter, followed by whitespace:

This needs to change by adding a * after the first set of parenthesis

On Tue, 22 Mar 2005 12:35:24 +0100, Meena Moktali <mmoktali@bphx.dk> wrote:
> class MapsLexer extends Lexer;
> 
> options{k=2;}
> 
> IDENT   :       ('a'..'z'|'A'..'Z'|'0'..'9'|'_'|'\'')(WS)* ;
From mmoktali at bphx.dk  Tue Mar 22 05:00:23 2005
From: mmoktali at bphx.dk (Meena Moktali)
Date: Tue Mar 22 05:01:26 2005
Subject: [antlr-interest] Unexpected Token problem
Message-ID: <389DFA1991602B4DB5E5691B00929EB9044EA7@bpsdk910.bphx.dk>

Thnx for the suggestion .I made the necessary changes for reading more text,But now it is not reading consecutive statements 
Its giving the error--

C:\TEMP>java MapMain
line 1:1: unexpected token: map CURRENCY_SPACE in KSPS4_MSG to TEXT_CODE of STD_
MSG_PARM_V of STD_MSG_CLIENT_SRV_I

I have given the grammar as below-----
----------------------------------------------
class MapsParser extends Parser;

options{buildAST=true;}

statement:	(mapval)+;						--------anything wrong in these 3 lines??

mapval   :	("map"^ viewfield "to"! viewfield );	--------  ''

viewfield:	(text((IN^|OF^)text)*);				--------  ''

text	   :	IDENT ;

class MapsLexer extends Lexer;

options{k=2;}

IDENT		options{testLiterals=true;}
	:	('a'..'z'|'A'..'Z'|'0'..'9'|'_'|'\''|' ')('a'..'z'|'A'..'Z'|'0'..'9'|'_'|'\''|' ')*;

WS	:	('\t'
		|'\r''\n' {newline();}
		|'\n'	  {newline();}
		|'\r'	  {newline();}
		|' ')*
		;
IN	:	"in" ;
OF	:	"of" ;
---------------------------------------------------------------------------------------------------
regs,
Meena	

-----Original Message-----
From: Bryan Ewbank [mailto:ewbank@gmail.com]
Sent: 22. marts 2005 14:11
To: antlr-interest
Subject: Re: [antlr-interest] Unexpected Token problem


I think the error is caused because IDENT matched "m" - the lexer rule
shown matches exactly one letter, followed by whitespace:

This needs to change by adding a * after the first set of parenthesis

On Tue, 22 Mar 2005 12:35:24 +0100, Meena Moktali <mmoktali@bphx.dk> wrote:
> class MapsLexer extends Lexer;
> 
> options{k=2;}
> 
> IDENT   :       ('a'..'z'|'A'..'Z'|'0'..'9'|'_'|'\'')(WS)* ;
From mail at martin-probst.com  Tue Mar 22 05:19:02 2005
From: mail at martin-probst.com (Martin Probst)
Date: Tue Mar 22 05:19:07 2005
Subject: [antlr-interest] Skipping anything not parseable
In-Reply-To: <20050322111811.D961A86B0E@ws7-1.us4.outblaze.com>
References: <20050322111811.D961A86B0E@ws7-1.us4.outblaze.com>
Message-ID: <1111497542.11627.10.camel@narr.homeip.net>

Hi,
what about making a rule for "unrecognized paragraphs"? You could write
something like this:
> para: knownPara | unknownPara;
> knownPara: (( KEYWORD1 ... ) | ( KEYWORD2 ... ) | ... ) LINEBREAK;
> unknownPara: (WORDS)* LINEBREAK;
By writing "unknownPara!:" you can also suppress automatic AST
generation for that rule so you won't see these paragraphs in the AST.

Regards,
Martin

Am Dienstag, den 22.03.2005, 03:18 -0800 schrieb togol machillan:
> No, not important because I am selecting paragraphs of interest by defining keywords which occur as the first word on the line. So any paragraph which starts with a keyword not in the defined keyword list, should be skipped over. How can parser skip over unknown paragraphs without saying that its expecting the EOF token.
> 
> Mach
> 
> ----- Original Message -----
> From: "Michiel Vermandel" <MVerma@ferranti.be>
> To: "togol machillan" <togolmach2@lycos.com>, antlr-interest@antlr.org
> Subject: RE: [antlr-interest] Skipping anything not parseable
> Date: Tue, 22 Mar 2005 11:52:34 +0100
> 
> > 
> > I guess you still want to know about these occurrences, right?
> > 
> > 
> > -----Original Message-----
> > From: antlr-interest-bounces@antlr.org
> > [mailto:antlr-interest-bounces@antlr.org] On Behalf Of togol machillan
> > Sent: dinsdag 22 maart 2005 11:50
> > To: antlr-interest@antlr.org
> > Subject: [antlr-interest] Skipping anything not parseable
> > 
> > Hi,
> > 
> > Is there any way to skip token on input for which no rule has been
> > defined in the parser? When the parser sees some structure which it does
> > not recognize, it stops saying that it was expecting something else. I
> > want the parser to continue and just skip over structures or tokens it
> > cannot handle.
> > 
> > Regards,
> > 
> > Awais
> > --
> > _______________________________________________
> > NEW! Lycos Dating Search. The only place to search multiple dating sites
> > at once.
> > http://datingsearch.lycos.com
> 

From edelaney at sungardsct.com  Tue Mar 22 05:44:10 2005
From: edelaney at sungardsct.com (Ed Delaney)
Date: Tue Mar 22 05:44:22 2005
Subject: [antlr-interest] RE: PLSQLGrammar.g
In-Reply-To: <20050322105030.E7B94DCD8F@www.antlr.org>
Message-ID: <OF6195A5C1.2D2638AA-ON05256FCC.004B3288-05256FCC.004B77B9@sungardsct.com>

Michiel,

Have you looked into the PLDoc project at Sourceforge.net? It uses a 
subset of the javadoc tags and produces decent output. So does the pldoc 
plugin for PLSql Developer.

I'll keep you posted on any progress I make,
thanks,
ed

---------------------------------------------------
Ed Delaney
SunGard SCT
Advisory Software Engineer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050322/f24da480/attachment.html
From ewbank at gmail.com  Tue Mar 22 06:00:02 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue Mar 22 06:00:04 2005
Subject: [antlr-interest] Unexpected Token problem
In-Reply-To: <389DFA1991602B4DB5E5691B00929EB9044EA6@bpsdk910.bphx.dk>
References: <389DFA1991602B4DB5E5691B00929EB9044EA6@bpsdk910.bphx.dk>
Message-ID: <dd3a065f050322060049989855@mail.gmail.com>

The change you made eats whitespace and letters as a single token. 
The problem is still in IDENT, because the change you made does not
see each identifier separately.

Go back to your original IDENT rule, remove the reference to WS, and
add a trailing "*"

> IDENT   :       ('a'..'z'|'A'..'Z'|'0'..'9'|'_'|'\'')(WS)* ;

IDENT   :       ('a'..'z'|'A'..'Z'|'0'..'9'|'_'|'\'')*;

In the WS rule, change the code so that that token is skipped; it's
different for the different target languages, so look for SKIP in the
examples that were packaged with ANTLR.

B-)
From MVerma at ferranti.be  Tue Mar 22 06:36:39 2005
From: MVerma at ferranti.be (Michiel Vermandel)
Date: Tue Mar 22 06:36:46 2005
Subject: [antlr-interest] RE: PLSQLGrammar.g
Message-ID: <919392D7803AE7489E03BFED5E52E82F017EE1E1@MAIL.ferranti.be>

Hmm, Yes, probably worth looking into this.
Though we now have a very similar java doc generator (one of my
colleagues created it). 
The problem is that we need to write design documents that include more
than just some basic documentation and parameter explanation.
Company quality rules state we need to write a technical design doc with
package documentation, function/procedure documentation, argument
documentation and a (visio or whatever) flowchart explaining the
functionality of the code. This should help other programmers to be able
to takeover code from another developer.

Guess PLDoc does not provide the ability to generate basic flowcharts...

As I pointed out before, the PL flowchart generators I found do not
offer the possibility to indicate important parts in the code nor allow
adding comments to specific statements which then are included in the
flowchart.

Anyway, thanks for the tip and for keeping me posted.

Michiel

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Ed Delaney
Sent: dinsdag 22 maart 2005 14:44
To: antlr-interest@antlr.org
Subject: [antlr-interest] RE: PLSQLGrammar.g


Michiel, 

Have you looked into the PLDoc project at Sourceforge.net? It uses a
subset of the javadoc tags and produces decent output. So does the pldoc
plugin for PLSql Developer. 

I'll keep you posted on any progress I make, 
thanks, 
ed 

---------------------------------------------------
Ed Delaney
SunGard SCT
Advisory Software Engineer
From atripp at comcast.net  Tue Mar 22 07:31:50 2005
From: atripp at comcast.net (Andy Tripp)
Date: Tue Mar 22 07:31:56 2005
Subject: [antlr-interest] v3.0 debug interface
Message-ID: <42403A66.4070104@comcast.net>

Terence,

You may also want to add a method to let the debugger know when
the lexer has matched a Token:

  public void nextToken(Token token);

And maybe let the debugger know about the AST that's being created:

  public void rootCreated(AST root);
  public void childAdded(AST parent, AST child);

Andy

From monty at codetransform.com  Tue Mar 22 05:12:25 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Tue Mar 22 08:12:30 2005
Subject: [antlr-interest] Skipping anything not parseable
In-Reply-To: <20050322105026.2AE20C6142@ws7-5.us4.outblaze.com>
References: <20050322105026.2AE20C6142@ws7-5.us4.outblaze.com>
Message-ID: <424019B9.4030605@codetransform.com>

togol machillan wrote:
> Hi,
> 
> Is there any way to skip token on input for which no rule has been defined in the parser? When the parser sees some structure which it does not recognize, it stops saying that it was expecting something else. I want the parser to continue and just skip over structures or tokens it cannot handle. 
> 

Have a look at this section of the docs:

http://www.antlr.org/doc/lexer.html#Filtering%20Input%20Streams

Monty
From parrt at cs.usfca.edu  Tue Mar 22 09:12:40 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Mar 22 09:12:42 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <42403A66.4070104@comcast.net>
References: <42403A66.4070104@comcast.net>
Message-ID: <be28d7bf13f5a00232eb1b956922ae0b@cs.usfca.edu>


On Mar 22, 2005, at 7:31 AM, Andy Tripp wrote:

> Terence,
>
> You may also want to add a method to let the debugger know when
> the lexer has matched a Token:
>
>  public void nextToken(Token token);

Hi Andy. :)  I was wondering about this, but the problem is that the 
default mode is to consume all tokens before parsing.

I'm also wondering if debugging the lexers will be necessary.  They are 
identical to parsers except they read chars, but...

> And maybe let the debugger know about the AST that's being created:
>
>  public void rootCreated(AST root);
>  public void childAdded(AST parent, AST child);

Yep, i was going to leave this until the summer when I started the tree 
stuff.

Ter



From rprememail at yahoo.com  Tue Mar 22 12:14:42 2005
From: rprememail at yahoo.com (Premkumar Rathanavelu)
Date: Tue Mar 22 12:14:44 2005
Subject: [antlr-interest] Problem with Parsing
Message-ID: <20050322201442.66470.qmail@web80908.mail.scd.yahoo.com>

Hi to all.,
  I'm writing a Preprocessor grammar and fed up with its complex
structure. Even more worse in handling #if and #define directives
 
For eg:
#if !defined(UNALLIGNED_INT_OP) && defined(DEBUG) 
My rule should parse everything after #if, but i tried with lot 
options and followed many rules but i could not do it.
 
So please help me by providing some tips ..
 
Thanking You,
PREM

		
---------------------------------
Do you Yahoo!?
 Yahoo! Mail - Helps protect you from nasty viruses.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050322/3bfefcc0/attachment.html
From torkildr at resheim.no  Tue Mar 22 13:05:59 2005
From: torkildr at resheim.no (Torkild =?iso-8859-1?q?Ulv=F8y_Resheim?=)
Date: Tue Mar 22 13:13:55 2005
Subject: [antlr-interest] Problem with ANTLR Plugin for Eclipse.
In-Reply-To: <20050319043002.6FA6E2903E4@new.knowspam.net>
References: <20050319043002.6FA6E2903E4@new.knowspam.net>
Message-ID: <200503222206.00229.torkildr@resheim.no>

On Saturday 19 March 2005 05:50, Scott Stanchfield wrote:
> I'm working on the next version of the ANTLR plugin. I've seen similar
Goodie :-) I'm looking forward to that!

I'm using ANTLR and your plugin for writing a parser that is part of a project 
for supporting a language called "Visual DataFlex" in Eclipse. It's a messy 
language with hundreds of keywords so It's been quite a task. However most of 
the job is done so I do mostly optimizations these days.
This language only runs under Windows but I normally use GNU/Linux for 
development so I have another Eclipse installation with my project in Windows 
just for testing. Ever so often I forget to generate code from the .g files 
after updating the Windows version from CVS. It would be neat if you could 
integrate the ANTLR building into the native building mechanism :-) I'm not 
an expert in the area but if you have any questions regarding this I'll be 
happy to help.
> problems with a few syntax errors (one that comes to mind is I accidentally
> used a "-" in a rule name when parsing XML...)
>
> I'm looking into it this weekend...
>
> If you could send me your grammar, I could use it as another test case to
> narrow the problem.
>
> Later,
> -- Scott
>
> > -----Original Message-----
> > From: antlr-interest-bounces@antlr.org
> > [mailto:antlr-interest-bounces@antlr.org] On Behalf Of
> > Bharath Sundararaman
> > Sent: Friday, March 18, 2005 12:24 PM
> > To: antlr-interest@antlr.org
> > Subject: [antlr-interest] Problem with ANTLR Plugin for Eclipse.
> >
> > Hi Antlers,
> >
> > I use ANTLR in Eclipse (http://antlreclipse.sourceforge.net/updates/)
> > and since few hours back, I am unable to compile my grammar
> > to generate java code. The ANTLR plugin recognized and
> > displays errors (for eg. If I deliberately removed a
> > semicolon b/w two rules, I get the usual error) but it does
> > not generate the java code.
> >
> > Anybody ever faced this issue? I deleted the .java file that
> > was previously generated by the same grammar and it doesn't help.
Yes, it happens sometimes to me too. It could be that you'll find some useful 
information in the PDE Runtime error log.
> >
> > Thanks,
> >
> > Bharath.
> >
[snip]
-- 
Med vennlig hilsen / Kind regards                                  ((
Torkild Ulv?y Resheim, Senior Systemutvikler / Software Engineer    ))
Emma EDB AS, Trondheim, Norway. http://www.emmaedb.no             |----|_
Private pages: http://resheim.no - "Any sufficiently advanced     |    | )
bug is indistinguishable from a feature."                         |____|'
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050322/f21ac7ad/attachment.bin
From tom at psy.unsw.edu.au  Wed Mar 23 00:51:10 2005
From: tom at psy.unsw.edu.au (Tom Brandon)
Date: Wed Mar 23 00:50:06 2005
Subject: [antlr-interest] v3.0 debug interface
Message-ID: <81EFB02B4F41C34192AD7BEFE55007501D2ED2@mail-x.ad.life.unsw.edu.au>

I had a couple of comments about your post (see below), but then
realised I wasn't quite sure how debugging is supposed to work wrt
target languages. How is the Antlr GUI executing grammars for debugging?
Is it executing an interpreted version of the grammar or a compiled
version? If it is interpreted then what does it do about actions? Are
you planning to support debugging of languages with actions in languages
other than the language of the GUI? It would seem nice to allow this as
an option in the design of Antlr though supporting it in the GUI may not
be a priority.

You suggest a java debugging interface which can then be proxied out
over TCP to non-Java clients, but doesn't this mean that the solution
(at least the solution of the GUI) is limited to debugging grammars that
target Java? Wouldn't it be better to have Antlr specify a language
neutral TCP based debugging protocol. Then a GUI would implement this
and with a bit of target language code to run a compiled grammar and
send the debugging information over TCP any target language could be
debugged from a single GUI. There may still be target language specific
protocols (such as your Java interface) but shouldn't Antlr 3 specify a
single language neutral debugging mechanism.

And then the issues with the actual proposal:

Any reason for not going with a more standard Listener based pattern (if
you weren't already intending such a pattern)? Will the system support
multiple listeners? Can't really conceive of a case where multiple apps
would want to listen, but you may want more flexibility in the GUI,
multiple parts each registering their own listeners rather than
everything having to come off one master listener (and there's the
code-gen specific events mentioned below where you might want
corresponding GUI modules for different code-gens).

Any reason for a non-extensible model? If you use a standard Listener
pattern with event data wrapped up in objects then you could have a
generic method (in addition to specific methods), like:
public void debugEvent(AntlrDebugEvent evt); 

Not really sure about use-cases for that. Maybe some code generators
want to add (or subclass) their own events which shouldn't pollute the
main interface.

Tom.

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: Tuesday, 22 March 2005 13:26
To: 'antlr-interest' Interest
Subject: [antlr-interest] v3.0 debug interface

Howdy,

I am working on the debug interface so that parsers trigger events.  
The GUI can listen for these events (initially in Java and then
marshaled over a socket to support non-Java languages) and do cool
displays etc...  The debugger will be able to tell the parser to
Thread.wait() in order to implement breakpoints etc...

Anyway, I've been thinking hard about what events we need to trigger.  
Most of my thoughts are driven by the ways in which I intend to use a
debugger.  Also I've take some ideas from David Wigg (who suggested I
fire events for alternatives not just rules) and Scott Stanchfield (who
did the ParseView debugger).

The code generator adds the appropriate triggers upon -debug
command-line option.  All but the location() triggers are functioning.  
Currently, I'm going to have the GUI launch the parser with a
TokenStream but later your apps will be able to create an instance of 
the GUI and pass it to the parser as the debug event listener. :)   By 
default, the parser compiles but doesn't emit any debug output; I'll
probably change that so it mimics the -traceParser 2.x feature.

BTW, I've kept this interface as small as possible.  Some of the
functionality I want in the debugger is not obviously possible from this
interface, but in fact with a little work the debugger will be able to
do amazing things!

So, here it is so far...I'm happy to receive feedback.  I expect that
this will change a lot as Jean builds the GUI on top.

Ter
-------------------------------
package org.antlr.runtime;

public interface ANTLRDebugInterface {
<SNIP>
}

--
CS Professor & Grad Director, University of San Francisco Creator, ANTLR
Parser Generator, http://www.antlr.org Cofounder, http://www.jguru.com


From wiggjd at lsbu.ac.uk  Wed Mar 23 03:37:16 2005
From: wiggjd at lsbu.ac.uk (David Wigg)
Date: Wed Mar 23 03:32:09 2005
Subject: [antlr-interest] Re: ANTLR GUI name
Message-ID: <424154EC.9040408@lsbu.ac.uk>

I like "ANTLR Works". Well, it does, doesn't it?

and "works" also has a connotation of "factory" (here?).

David.

From m.gadsdon at rheagroup.com  Wed Mar 23 03:34:37 2005
From: m.gadsdon at rheagroup.com (Mike Gadsdon)
Date: Wed Mar 23 03:34:44 2005
Subject: [antlr-interest] NullPointerException in parser bug
In-Reply-To: <20050317200004.1B41EDCD46@www.antlr.org>
Message-ID: <NFBBKLEKFHDGOJLCDCJAAEAGDMAA.m.gadsdon@rheagroup.com>

Hi All

I've come across what appears to be a bug in ANTLR (i'm using version
2.7.4).

One of my parser rules generates Java code like this :-

else if ((LA(1)==MINUS||LA(1)==PLUS||LA(1)==NUMBER) &&
         (_tokenSet_8.member(LA(2))) &&
         (_tokenSet_9.member(LA(3))) &&
         (_tokenSet_10.member(LA(4))) &&
         (_tokenSet_11.member(LA(5))) &&
         (_tokenSet_7.member(LA(6))) &&
         (_tokenSet_7.member(LA(7)))) {
   decimalConstant();

I've split the if condition onto separate lines, but otherwise this is
automatically generated by ANTLR, and presumably goes out to LA(7) due to my
lookahead being set to 7.

The problem arises when this code is executed as a result of tokens near the
end of the input file. In the case I've debugged, LA(5) is the end of file,
so LA(6) does not exist. The previous conditions (LA(1) -> LA(5)) all pass,
so the condition on LA(6) is executed.

The LA code in TokenBuffer ends up running :-

    public final int LA(int i) throws TokenStreamException {
        fill(i);
        return queue.elementAt(markerOffset + i - 1).type;
    }

but the queue contains null at the accessed index position, so the type
method call fails with a NullPointerException.

I'm not entirely sure what should be done about this. Maybe LA should
return -1 if we are past the end of the input and the 'member' method always
return true if the token type is -1. Whatever the solution, it would appear
to need changes in ANTLR itself.

Any suggestions for a workaround would be gratefully received.

Mike

==============================================================
Mike Gadsdon                   mailto:m.gadsdon@rheagroup.com
Rhea System S.A                Tel +44 (0)20 8891 0702
                               Fax +44 (0)20 8891 6702
==============================================================

From ewbank at gmail.com  Wed Mar 23 06:38:20 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Wed Mar 23 06:38:25 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <be28d7bf13f5a00232eb1b956922ae0b@cs.usfca.edu>
References: <42403A66.4070104@comcast.net>
	<be28d7bf13f5a00232eb1b956922ae0b@cs.usfca.edu>
Message-ID: <dd3a065f05032306386f4a58b3@mail.gmail.com>

How does consuming all tokens reconcil with stateful tokenizing, where
the same string is reported as different tokens depending on context?
I think C's <typedef> is the classic example of this situation.

On Tue, 22 Mar 2005 09:12:40 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:
> Hi Andy. :)  I was wondering about this, but the problem is that the
> default mode is to consume all tokens before parsing.
From chantal.ackermann at web.de  Wed Mar 23 08:15:32 2005
From: chantal.ackermann at web.de (Chantal Ackermann)
Date: Wed Mar 23 08:15:21 2005
Subject: [antlr-interest] Insert Node Into AST
Message-ID: <109f0bbd844469be716232b190fa2eca@web.de>

Hello all,

I'm parsing natural language (German) but with a very limited grammar. 
Here are some examples translated in English.

'"Navigation to Foo Street 2 in Bla-Town"
(keywords: Navigation (menu), Foo Street (street), 2 (Streenumber), 
Bla-Town (city))
"I want to go to Foo Street"
(keywords: Foo Street (street))

Note, the input needs not be correct German (or English, in this case) 
grammar as only some keywords are of interest. There are some semantic 
rules, though, as to what keywords can appear together, in one input, 
which should show up in the AST.

It ist possible to have these combinations in any order:
(navigation)? (street (streetnumber)? )? (city)?
? - means all are optional though certainly at least one should show up 
to make some sense

it's not possible to have the keywords
(telephone) (street)
in one input as (telephone) directs to the menu "telephone" while 
(street) implies the menu "navigation".

And here comes my problem:
I managed to parse these input sentences and the parser (without and 
with AST) correctly extracted the keywords, but I'd like to insert the 
implied menu information while parsing to have the AST always reflect 
the menu structure.

So, input of the kind: "I want to go to Foo Street"
should not just produce: "Foo Street (street)" as it does now, but 
"Navigation (menu), Foo Street (street)"

Please, don't bother with the form of the output here. I just chose 
this notation to show the name-value pairs of the keywords. The AST 
toStringList method would rather output something like:
( Navigation ( Foo Street ) ) -- hopefully.

This is the body of my Paser class with buildAST=true (I'm working with 
Java, by the way):
It does not compile (="run through antlr") because of the rule 
"naviInput". (it compiles after removing "naviInput" and the comments 
in "topLevelInput" and the call to "naviInput" in there, though.)

topLevelInput
//	:	( NAVIGATION^ ) => NAVIGATION^ ( adresse )?
//	|	adresse // doesn't work: { #NAVIGATION = #( NAVIGATION ); }
	:	naviInput
	|	( TELEFON^ ) => TELEFON^ ( NUMMER! ) NUMBER ( telefonaktion )?
	|	( NUMMER! ) NUMBER telefonaktion
	;

naviInput!
	:	( NAVIGATION ) => NAVIGATION ( adresse )?
	|	a:adresse
	        { #naviInput = #([naviInput], a ); }
	;

anschrift
	:	STREET^ (( HAUSNUMMER! | NUMMER! )? n:NUMBER )?
	;

adresse
	:	( CITY ) => CITY ( anschrift )?
	|	anschrift ( CITY )?
	;

telefonaktion
	:	ANRUFEN
	|	SPEICHERN
	;

The TreeWalker looks like this:

class ProtoTreeWalker extends TreeParser;

topLevelInput
	:	#( naviInput CITY STREET )
	|	#( TELEFON NUMBER ( ANRUFEN | SPEICHERN )? )
	;

Well, this doesn't work at all. Changing "naviInput" to "Navigation" 
after reverting the above Parser to functional state (see above comment 
on the parser), works.

So, shortly, I'd like to insert the node "Navigation" even if it is not 
in the input -- if that contains a street or city or anything alike. 
Maybe I'm thinking along the wrong tracks here -- I admit, I don't 
quite understand what to put into the Parser and what into the 
TreeWalker. Why do I need the TreeWalker, anyway.

Did any of you gurus reach this point? Thanks a lot for reading through!
I'll gladly appreciate advise of any kind (concerning any aspect of my 
code).

Thanks!
Chantal

P.S.: Just for the records -- in the documentation there is an error in 
the following example:
decl!:
     modifiers type ID SEMI;
         { #decl = #([DECL], ID, ([TYPE] type),
                     ([MOD] modifiers) ); }
     ;
trees.html -> "A few examples"
There is one superficial semicolon after "SEMI". What I am missing 
about this example is: What happens to the node declaration when there 
is more than one alternative -- does it only apply to the one it comes 
right after, does it work at all? It's not working for me, at the 
moment. :-/

From parrt at cs.usfca.edu  Wed Mar 23 11:22:41 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Mar 23 11:15:40 2005
Subject: [antlr-interest] Re: ANTLR GUI name
In-Reply-To: <424154EC.9040408@lsbu.ac.uk>
References: <424154EC.9040408@lsbu.ac.uk>
Message-ID: <efb07caca08cba8d77e15a3f29d52e7f@cs.usfca.edu>


On Mar 23, 2005, at 3:37 AM, David Wigg wrote:

> I like "ANTLR Works". Well, it does, doesn't it?

Yeah, I like it too...it was my first thought.

> and "works" also has a connotation of "factory" (here?).

Agreed.  I like it better than ANTLR Studio due to the implicit 
association with Vizdevstudio ;)

ANTLRules is "cute" but something a bit more "academic" or 
"professional" might be better.  I'm also partial to ANTLRGuru or 
ANTLRSavant or ANTLRProdigy or RapidANTLR...still not sure.

Ter

>
> David.
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From parrt at cs.usfca.edu  Wed Mar 23 11:24:01 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Mar 23 11:17:02 2005
Subject: [antlr-interest] NullPointerException in parser bug
In-Reply-To: <NFBBKLEKFHDGOJLCDCJAAEAGDMAA.m.gadsdon@rheagroup.com>
References: <NFBBKLEKFHDGOJLCDCJAAEAGDMAA.m.gadsdon@rheagroup.com>
Message-ID: <9398c12ba30e83608fc9d5340ffda107@cs.usfca.edu>

Hi Mike,

Yeah, LA(i) should return -1...hmm...perhaps 2.7.5 has a fix for 
this...can't remember.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From parrt at cs.usfca.edu  Wed Mar 23 11:36:02 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Mar 23 11:29:01 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <81EFB02B4F41C34192AD7BEFE55007501D2ED2@mail-x.ad.life.unsw.edu.au>
References: <81EFB02B4F41C34192AD7BEFE55007501D2ED2@mail-x.ad.life.unsw.edu.au>
Message-ID: <089b1bea9507d35d6ff83fcca196b848@cs.usfca.edu>

Hi Tom, thanks for the nice comments!

On Mar 23, 2005, at 12:51 AM, Tom Brandon wrote:
> I had a couple of comments about your post (see below), but then
> realised I wasn't quite sure how debugging is supposed to work wrt
> target languages. How is the Antlr GUI executing grammars for 
> debugging?
> Is it executing an interpreted version of the grammar or a compiled
> version?

It will debug generated/compiled parsers only.  Later I might get the 
interpreter to work...well, it works, but it doesn't generate all the 
location(line,pos) calls so the breakpoints don't really work.

>  If it is interpreted then what does it do about actions? Are

The debugger won't work on the interpreter for now, but later it will 
just ignore actions.  That of course makes it impossible to do grammars 
with semantic predicates.

> you planning to support debugging of languages with actions in 
> languages
> other than the language of the GUI? It would seem nice to allow this as
> an option in the design of Antlr though supporting it in the GUI may 
> not
> be a priority.

ANTLR will be a parasite on the running parser in whatever target 
language...so ANTLR's gui has no issues with actions. :)

> You suggest a java debugging interface which can then be proxied out
> over TCP to non-Java clients, but doesn't this mean that the solution
> (at least the solution of the GUI) is limited to debugging grammars 
> that
> target Java?

Nope...

>  Wouldn't it be better to have Antlr specify a language
> neutral TCP based debugging protocol. Then a GUI would implement this
> and with a bit of target language code to run a compiled grammar and
> send the debugging information over TCP any target language could be
> debugged from a single GUI. There may still be target language specific
> protocols (such as your Java interface) but shouldn't Antlr 3 specify a
> single language neutral debugging mechanism.

That Java interface is just the Java way to trigger events.  C or 
whatever would just call functions that emitted a text protocol across 
the socket to the GUI (which happens to be in Java, though that's not 
important...anybody that wants to will be able to handle the protocol).

So, I'll be defining a very simple text language (protocol) for anybody 
that knows how to open sockets to use.  I won't be marshaling method 
calls across the net.  That was always dumb and is dumb now.   
Empirically only text protocols have survived (SMTP, NNTP, FTP, HTTP, 
.....) whereas CORBA is heinous...SOAP and friends frighten me so much 
I'm speechless...but I digress.

> And then the issues with the actual proposal:
>
> Any reason for not going with a more standard Listener based pattern 
> (if
> you weren't already intending such a pattern)?

You mean like the AWT bean listener thing?

>  Will the system support
> multiple listeners? Can't really conceive of a case where multiple apps
> would want to listen,

I couldn't either so I went for simplicity instead. ;)  You can 
daisy-chain to get multiple if you want.

>  but you may want more flexibility in the GUI,
> multiple parts each registering their own listeners rather than
> everything having to come off one master listener (and there's the
> code-gen specific events mentioned below where you might want
> corresponding GUI modules for different code-gens).
>
> Any reason for a non-extensible model? If you use a standard Listener
> pattern with event data wrapped up in objects then you could have a
> generic method (in addition to specific methods), like:
> public void debugEvent(AntlrDebugEvent evt);

All good ideas, but I'm opposed to "OO" for "OO"s sake.  I like 
location(line,charPosition) for example because it's explicit and I'm 
opposed to complexity just "in case".  Though, I agree, changes are a 
bigger deal to an interface if you screw up!  You'll note that the 
exceptions (which may want to track all sorts of stuff later) are 
tossed in as objects. :)

> Not really sure about use-cases for that. Maybe some code generators
> want to add (or subclass) their own events which shouldn't pollute the
> main interface.

Agreed.  I worry that I can't find a use-case either. ;)  I have 
learned that adding complexity now to avoid possible future issues is 
good, but it's an optimization problem.   Further, it says that changes 
later (when you know stuff) are harder than changes now (when you 
don't).  There is some truth in terms of backward compatibility, but 
I'll avoid complexity unless we can think of a real need.

Thanks!

Ter

> Tom.
>
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
> Sent: Tuesday, 22 March 2005 13:26
> To: 'antlr-interest' Interest
> Subject: [antlr-interest] v3.0 debug interface
>
> Howdy,
>
> I am working on the debug interface so that parsers trigger events.
> The GUI can listen for these events (initially in Java and then
> marshaled over a socket to support non-Java languages) and do cool
> displays etc...  The debugger will be able to tell the parser to
> Thread.wait() in order to implement breakpoints etc...
>
> Anyway, I've been thinking hard about what events we need to trigger.
> Most of my thoughts are driven by the ways in which I intend to use a
> debugger.  Also I've take some ideas from David Wigg (who suggested I
> fire events for alternatives not just rules) and Scott Stanchfield (who
> did the ParseView debugger).
>
> The code generator adds the appropriate triggers upon -debug
> command-line option.  All but the location() triggers are functioning.
> Currently, I'm going to have the GUI launch the parser with a
> TokenStream but later your apps will be able to create an instance of
> the GUI and pass it to the parser as the debug event listener. :)   By
> default, the parser compiles but doesn't emit any debug output; I'll
> probably change that so it mimics the -traceParser 2.x feature.
>
> BTW, I've kept this interface as small as possible.  Some of the
> functionality I want in the debugger is not obviously possible from 
> this
> interface, but in fact with a little work the debugger will be able to
> do amazing things!
>
> So, here it is so far...I'm happy to receive feedback.  I expect that
> this will change a lot as Jean builds the GUI on top.
>
> Ter
> -------------------------------
> package org.antlr.runtime;
>
> public interface ANTLRDebugInterface {
> <SNIP>
> }
>
> --
> CS Professor & Grad Director, University of San Francisco Creator, 
> ANTLR
> Parser Generator, http://www.antlr.org Cofounder, http://www.jguru.com
>
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From parrt at cs.usfca.edu  Wed Mar 23 11:36:58 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Mar 23 11:29:57 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <dd3a065f05032306386f4a58b3@mail.gmail.com>
References: <42403A66.4070104@comcast.net>
	<be28d7bf13f5a00232eb1b956922ae0b@cs.usfca.edu>
	<dd3a065f05032306386f4a58b3@mail.gmail.com>
Message-ID: <0d207743009898507e6ac3f9b195af15@cs.usfca.edu>


On Mar 23, 2005, at 6:38 AM, Bryan Ewbank wrote:

> How does consuming all tokens reconcil with stateful tokenizing, where
> the same string is reported as different tokens depending on context?
> I think C's <typedef> is the classic example of this situation.

Hi Bryan,

Semantic predicates. :)  Context-sensitive lexing (based upon 
semantics) is generally a nightmare.  I keep it all in the parser. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From togolmach2 at lycos.com  Wed Mar 23 11:30:42 2005
From: togolmach2 at lycos.com (togol machillan)
Date: Wed Mar 23 11:30:43 2005
Subject: [antlr-interest] Assertion failure
Message-ID: <20050323193042.614DEE5BC7@ws7-2.us4.outblaze.com>

Hi,

I get the following error messages at run time due to assertion failure. 

  col == 1
Assertion failed: nb <= entries(), file c:\antlr-2.7.5\lib\cpp\antlr\circularqueue.hpp, line 59

Here col is a global integer variable which has the column number of the keyword after that rule is called. The rule which generates this message looks like

paragraph: keyword {col == 1} ...
         ; 

keyword: t:"TITLE" {col = t->getColumn();}
         |in:"IN-UNITS" {col = t->getColumn();} 
         |data:"DATABANKS" {col = t->getColumn();}
        ;


The difficulty is that the assertion fails even when the keyword like TITLE occurs in column 1. Can somebody please explain how to avoid this assertion failure. 
Secondly, is there a better way of getting the column number in the keyword rule without defining a label for every alternative literal.

Thank you all for your helpful suggestions to my previous queries.

Togol  

-- 
_______________________________________________
NEW! Lycos Dating Search. The only place to search multiple dating sites at once.
http://datingsearch.lycos.com

From Bharath.Sundararaman at starthis.com  Wed Mar 23 12:35:59 2005
From: Bharath.Sundararaman at starthis.com (Bharath Sundararaman)
Date: Wed Mar 23 12:36:03 2005
Subject: [antlr-interest] Re: ANTLR GUI name
Message-ID: <B1180416E5C44E49AE556D23DBB45B290613D5@webmail.starthis.com>

I'm against ANTLRSavant because "Savant" is an extension of ANT and it
might be misleading in a way. I may be wrong, just expressing my
opinion.

Ter, talking about unprofessional naming, the first name I wanted to
suggest was ^NTLRules! with the ^ and the ! rule annotations. -]. 

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: Wednesday, March 23, 2005 1:23 PM
To: 'antlr-interest' Interest
Subject: Re: [antlr-interest] Re: ANTLR GUI name


On Mar 23, 2005, at 3:37 AM, David Wigg wrote:

> I like "ANTLR Works". Well, it does, doesn't it?

Yeah, I like it too...it was my first thought.

> and "works" also has a connotation of "factory" (here?).

Agreed.  I like it better than ANTLR Studio due to the implicit 
association with Vizdevstudio ;)

ANTLRules is "cute" but something a bit more "academic" or 
"professional" might be better.  I'm also partial to ANTLRGuru or 
ANTLRSavant or ANTLRProdigy or RapidANTLR...still not sure.

Ter

>
> David.
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From teddemc at yahoo.com  Wed Mar 23 13:07:29 2005
From: teddemc at yahoo.com (Matthew Tedder)
Date: Wed Mar 23 13:07:33 2005
Subject: [antlr-interest] Re: ANTLR GUI name
In-Reply-To: 6667
Message-ID: <20050323210730.6011.qmail@web52907.mail.yahoo.com>



How about:

ANTLRIA - ANTLR Interactive Associations
ANTLR Cooker
ANTLR Visions
ANTLR World

Matthew

--- Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> On Mar 23, 2005, at 3:37 AM, David Wigg wrote:
> 
> > I like "ANTLR Works". Well, it does, doesn't it?
> 
> Yeah, I like it too...it was my first thought.
> 
> > and "works" also has a connotation of "factory"
> (here?).
> 
> Agreed.  I like it better than ANTLR Studio due to
> the implicit 
> association with Vizdevstudio ;)
> 
> ANTLRules is "cute" but something a bit more
> "academic" or 
> "professional" might be better.  I'm also partial to
> ANTLRGuru or 
> ANTLRSavant or ANTLRProdigy or RapidANTLR...still
> not sure.
> 
> Ter
> 
> >
> > David.
> >
> >
> --
> CS Professor & Grad Director, University of San
> Francisco
> Creator, ANTLR Parser Generator,
> http://www.antlr.org
> Cofounder, http://www.jguru.com
> 
> 
> 
> 

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From tom at psy.unsw.edu.au  Wed Mar 23 20:37:11 2005
From: tom at psy.unsw.edu.au (Tom Brandon)
Date: Wed Mar 23 20:36:10 2005
Subject: [antlr-interest] v3.0 debug interface
Message-ID: <81EFB02B4F41C34192AD7BEFE55007501D2EE7@mail-x.ad.life.unsw.edu.au>

Ah, great, looks like we were on the same page as far as the inteface
between GUI and lexer\parser goes, you just sent specs in terms of Java
interface rather than the net based protocol. And I certainly wasn't
think of some nasty CORBA style thing, just a text protocol like you
suggest.

As to the format of the interface, I meant the standard Java style
listeners, extend java.util.EventListener (just a tag for tools) and
then (add|remove)Listener(...); methods (hadn't remembered that Java's
"Listener" pattern was quite so simple, too long living day to day in
C#'s delegate land I guess).

Amd then events of the form:
void location(LocationEvent evt); 
where LocationEvent extends java.util.EventObject.

While I agree about the general issue of cost\benefit, these changes
seem of little cost, seem to offer some functional benefit (the two
use-cases of modular handling in the GUI and code-gen specific events)
and also fit the standard Java design patterns thus making them easier
to understand for those familiar with other Java apps (in this case a
rather weak point due to the simplicity of the pattern but still) and
understandable by other language tools.

Tom.
-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: Thursday, 24 March 2005 06:36
To: 'antlr-interest' Interest
Subject: Re: [antlr-interest] v3.0 debug interface

Hi Tom, thanks for the nice comments!

On Mar 23, 2005, at 12:51 AM, Tom Brandon wrote:
> I had a couple of comments about your post (see below), but then 
> realised I wasn't quite sure how debugging is supposed to work wrt 
> target languages. How is the Antlr GUI executing grammars for 
> debugging?
> Is it executing an interpreted version of the grammar or a compiled 
> version?

It will debug generated/compiled parsers only.  Later I might get the
interpreter to work...well, it works, but it doesn't generate all the
location(line,pos) calls so the breakpoints don't really work.

>  If it is interpreted then what does it do about actions? Are

The debugger won't work on the interpreter for now, but later it will
just ignore actions.  That of course makes it impossible to do grammars
with semantic predicates.

> you planning to support debugging of languages with actions in 
> languages other than the language of the GUI? It would seem nice to 
> allow this as an option in the design of Antlr though supporting it in

> the GUI may not be a priority.

ANTLR will be a parasite on the running parser in whatever target
language...so ANTLR's gui has no issues with actions. :)

> You suggest a java debugging interface which can then be proxied out 
> over TCP to non-Java clients, but doesn't this mean that the solution 
> (at least the solution of the GUI) is limited to debugging grammars 
> that target Java?

Nope...

>  Wouldn't it be better to have Antlr specify a language neutral TCP 
> based debugging protocol. Then a GUI would implement this and with a 
> bit of target language code to run a compiled grammar and send the 
> debugging information over TCP any target language could be debugged 
> from a single GUI. There may still be target language specific 
> protocols (such as your Java interface) but shouldn't Antlr 3 specify 
> a single language neutral debugging mechanism.

That Java interface is just the Java way to trigger events.  C or
whatever would just call functions that emitted a text protocol across
the socket to the GUI (which happens to be in Java, though that's not
important...anybody that wants to will be able to handle the protocol).

So, I'll be defining a very simple text language (protocol) for anybody
that knows how to open sockets to use.  I won't be marshaling method 
calls across the net.  That was always dumb and is dumb now.   
Empirically only text protocols have survived (SMTP, NNTP, FTP, HTTP,
.....) whereas CORBA is heinous...SOAP and friends frighten me so much
I'm speechless...but I digress.

> And then the issues with the actual proposal:
>
> Any reason for not going with a more standard Listener based pattern 
> (if you weren't already intending such a pattern)?

You mean like the AWT bean listener thing?

>  Will the system support
> multiple listeners? Can't really conceive of a case where multiple 
> apps would want to listen,

I couldn't either so I went for simplicity instead. ;)  You can
daisy-chain to get multiple if you want.

>  but you may want more flexibility in the GUI, multiple parts each 
> registering their own listeners rather than everything having to come 
> off one master listener (and there's the code-gen specific events 
> mentioned below where you might want corresponding GUI modules for 
> different code-gens).
>
> Any reason for a non-extensible model? If you use a standard Listener 
> pattern with event data wrapped up in objects then you could have a 
> generic method (in addition to specific methods), like:
> public void debugEvent(AntlrDebugEvent evt);

All good ideas, but I'm opposed to "OO" for "OO"s sake.  I like
location(line,charPosition) for example because it's explicit and I'm
opposed to complexity just "in case".  Though, I agree, changes are a
bigger deal to an interface if you screw up!  You'll note that the
exceptions (which may want to track all sorts of stuff later) are tossed
in as objects. :)

> Not really sure about use-cases for that. Maybe some code generators 
> want to add (or subclass) their own events which shouldn't pollute the

> main interface.

Agreed.  I worry that I can't find a use-case either. ;)  I have learned
that adding complexity now to avoid possible future issues is 
good, but it's an optimization problem.   Further, it says that changes 
later (when you know stuff) are harder than changes now (when you
don't).  There is some truth in terms of backward compatibility, but
I'll avoid complexity unless we can think of a real need.

Thanks!

Ter

> Tom.
>
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
> Sent: Tuesday, 22 March 2005 13:26
> To: 'antlr-interest' Interest
> Subject: [antlr-interest] v3.0 debug interface
>
> Howdy,
>
> I am working on the debug interface so that parsers trigger events.
> The GUI can listen for these events (initially in Java and then 
> marshaled over a socket to support non-Java languages) and do cool 
> displays etc...  The debugger will be able to tell the parser to
> Thread.wait() in order to implement breakpoints etc...
>
> Anyway, I've been thinking hard about what events we need to trigger.
> Most of my thoughts are driven by the ways in which I intend to use a 
> debugger.  Also I've take some ideas from David Wigg (who suggested I 
> fire events for alternatives not just rules) and Scott Stanchfield 
> (who did the ParseView debugger).
>
> The code generator adds the appropriate triggers upon -debug 
> command-line option.  All but the location() triggers are functioning.
> Currently, I'm going to have the GUI launch the parser with a 
> TokenStream but later your apps will be able to create an instance of
> the GUI and pass it to the parser as the debug event listener. :)   By
> default, the parser compiles but doesn't emit any debug output; I'll 
> probably change that so it mimics the -traceParser 2.x feature.
>
> BTW, I've kept this interface as small as possible.  Some of the 
> functionality I want in the debugger is not obviously possible from 
> this interface, but in fact with a little work the debugger will be 
> able to do amazing things!
>
> So, here it is so far...I'm happy to receive feedback.  I expect that 
> this will change a lot as Jean builds the GUI on top.
>
> Ter
> -------------------------------
> package org.antlr.runtime;
>
> public interface ANTLRDebugInterface { <SNIP> }
>
> --
> CS Professor & Grad Director, University of San Francisco Creator, 
> ANTLR Parser Generator, http://www.antlr.org Cofounder, 
> http://www.jguru.com
>
>
>
--
CS Professor & Grad Director, University of San Francisco Creator, ANTLR
Parser Generator, http://www.antlr.org Cofounder, http://www.jguru.com



From ewbank at gmail.com  Wed Mar 23 20:55:46 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Wed Mar 23 20:55:54 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <81EFB02B4F41C34192AD7BEFE55007501D2EE7@mail-x.ad.life.unsw.edu.au>
References: <81EFB02B4F41C34192AD7BEFE55007501D2EE7@mail-x.ad.life.unsw.edu.au>
Message-ID: <dd3a065f050323205550015218@mail.gmail.com>

Perhaps I missed it in this thread, but is the V3.0 debug interface
intended only for Java?  It seems that quite a bit of the discussion
is in that context, so need to ask.

Thanks,
- Bryan (C++ ANTLR for me)
From tom at psy.unsw.edu.au  Wed Mar 23 21:44:03 2005
From: tom at psy.unsw.edu.au (Tom Brandon)
Date: Wed Mar 23 21:42:58 2005
Subject: [antlr-interest] v3.0 debug interface
Message-ID: <81EFB02B4F41C34192AD7BEFE55007501D2EF4@mail-x.ad.life.unsw.edu.au>

No, the Antlr GUI, written in Java, or other GUIs in any language, will
be able to debug parsers in any target language.

Terrence Parr said:
"That Java interface is just the Java way to trigger events.  C or
whatever would just call functions that emitted a text protocol across
the socket to the GUI (which happens to be in Java, though that's not
important...anybody that wants to will be able to handle the protocol).

So, I'll be defining a very simple text language (protocol) for anybody
that knows how to open sockets to use."

Tom.
-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Bryan Ewbank
Sent: Thursday, 24 March 2005 15:56
To: antlr-interest
Subject: Re: [antlr-interest] v3.0 debug interface

Perhaps I missed it in this thread, but is the V3.0 debug interface
intended only for Java?  It seems that quite a bit of the discussion is
in that context, so need to ask.

Thanks,
- Bryan (C++ ANTLR for me)
From parrt at cs.usfca.edu  Wed Mar 23 21:56:53 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Mar 23 21:56:57 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <dd3a065f050323205550015218@mail.gmail.com>
References: <81EFB02B4F41C34192AD7BEFE55007501D2EE7@mail-x.ad.life.unsw.edu.au>
	<dd3a065f050323205550015218@mail.gmail.com>
Message-ID: <d93def36744cb650a54724493e45f5b1@cs.usfca.edu>


On Mar 23, 2005, at 8:55 PM, Bryan Ewbank wrote:

> Perhaps I missed it in this thread, but is the V3.0 debug interface
> intended only for Java?  It seems that quite a bit of the discussion
> is in that context, so need to ask.

Hi Bryan,

The debugger will work with any language that can spit text across a 
socket; that is, any language you're likely to care about. :)  There 
will some limitations I imagine even for Java->Java across a socket.  
For example, I don't think that tracking the currently constructed for 
a rule will be very easy.  it could be a HUGE amount of data to 
send...we'll see how clever Jean Bovet and I can be. :)

Ter



From prashant.deva at gmail.com  Wed Mar 23 22:00:24 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Mar 23 22:00:26 2005
Subject: [antlr-interest] Re: ANTLR GUI name
In-Reply-To: <20050323210730.6011.qmail@web52907.mail.yahoo.com>
References: <20050323210730.6011.qmail@web52907.mail.yahoo.com>
Message-ID: <41fed8f80503232200ae0d08c@mail.gmail.com>

>Agreed.  I like it better than ANTLR Studio due to the implicit
>association with Vizdevstudio ;)

Actually the m$ naming convention is 'Visual xyz' and NOT ''xyz
Studio'. I had that in mind when i kept the name ;)
And well there is no way to change it now anyway cause i have
registered a domain for it.

PRASHANT

On Wed, 23 Mar 2005 13:07:29 -0800 (PST), Matthew Tedder
<teddemc@yahoo.com> wrote:
> 
> 
> How about:
> 
> ANTLRIA - ANTLR Interactive Associations
> ANTLR Cooker
> ANTLR Visions
> ANTLR World
> 
> Matthew
> 
> --- Terence Parr <parrt@cs.usfca.edu> wrote:
> >
> > On Mar 23, 2005, at 3:37 AM, David Wigg wrote:
> >
> > > I like "ANTLR Works". Well, it does, doesn't it?
> >
> > Yeah, I like it too...it was my first thought.
> >
> > > and "works" also has a connotation of "factory"
> > (here?).
> >
> > Agreed.  I like it better than ANTLR Studio due to
> > the implicit
> > association with Vizdevstudio ;)
> >
> > ANTLRules is "cute" but something a bit more
> > "academic" or
> > "professional" might be better.  I'm also partial to
> > ANTLRGuru or
> > ANTLRSavant or ANTLRProdigy or RapidANTLR...still
> > not sure.
> >
> > Ter
> >
> > >
> > > David.
> > >
> > >
> > --
> > CS Professor & Grad Director, University of San
> > Francisco
> > Creator, ANTLR Parser Generator,
> > http://www.antlr.org
> > Cofounder, http://www.jguru.com
> >
> >
> >
> >
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
From db at dawnbreaks.net  Wed Mar 23 23:09:06 2005
From: db at dawnbreaks.net (David Bullock)
Date: Wed Mar 23 23:09:10 2005
Subject: [antlr-interest] Re: ANTLR GUI name
In-Reply-To: <41fed8f80503232200ae0d08c@mail.gmail.com>
References: <20050323210730.6011.qmail@web52907.mail.yahoo.com>
	<41fed8f80503232200ae0d08c@mail.gmail.com>
Message-ID: <20050324175735.G10011@arwen.lorien.dawnbreaks.net>

How about:

   - 'ANTLR Language Factory'
   - 'ANGLR' (Another Neat GUI for Language Recognition)

cheers,
David

--
"money, moreover, attracts administrators and experts
as sugar attracts ants"              -- Wendell Berry
From jeremy.rayner at gmail.com  Wed Mar 23 23:44:38 2005
From: jeremy.rayner at gmail.com (Jeremy Rayner)
Date: Wed Mar 23 23:44:40 2005
Subject: [antlr-interest] Re: ANTLR GUI name
In-Reply-To: <20050324175735.G10011@arwen.lorien.dawnbreaks.net>
References: <20050323210730.6011.qmail@web52907.mail.yahoo.com>
	<41fed8f80503232200ae0d08c@mail.gmail.com>
	<20050324175735.G10011@arwen.lorien.dawnbreaks.net>
Message-ID: <90a60e7605032323443c5f0a5@mail.gmail.com>

How about ANIDE:

  ANIDE, ANother Integrated Development Environment

cheers,
jez.
-- 
http://javanicus.com/blog2
From m.gadsdon at rheagroup.com  Thu Mar 24 01:51:58 2005
From: m.gadsdon at rheagroup.com (Mike Gadsdon)
Date: Thu Mar 24 01:52:00 2005
Subject: [antlr-interest] NullPointerException in parser bug
In-Reply-To: <20050323191704.1B997DCD4A@www.antlr.org>
Message-ID: <NFBBKLEKFHDGOJLCDCJACEALDMAA.m.gadsdon@rheagroup.com>

Hi Ter,

>> Yeah, LA(i) should return -1...hmm...perhaps 2.7.5 has a fix for
>>this...can't remember.

I just re-ran tests with 2.7.5 and I see the same problem. As far as I can
see the LA method is just not built to handle nulls in the queue.

With further thought, the problem should go away if we ensure nulls never
get in the queue. I modified the fill method in TokenBuffer as below to
insert a token type 1 (I presume this represents EOF) into the circular
buffer if a null is pulled in from the input stream. This solves the problem
I'm having, and I can't see that such a change should have a negative effect
anywhere. It only makes a difference when we are beyond the end of file
anyway.

    private final void fill(int amount) throws TokenStreamException {
        syncConsume();
        // Fill the buffer sufficiently to hold needed tokens
        while (queue.nbrEntries < amount + markerOffset) {
            // Append the next token, ensuring null does not end up in the
queue
        	Token tok = input.nextToken();
        	if (tok == null) {tok = new Token(1);}
            queue.append(tok);
        }
    }

Cheers

Mike
==============================================================
Mike Gadsdon                   mailto:m.gadsdon@rheagroup.com
Rhea System S.A                Tel +44 (0)20 8891 0702
                               Fax +44 (0)20 8891 6702
==============================================================

From m.gadsdon at rheagroup.com  Thu Mar 24 02:06:10 2005
From: m.gadsdon at rheagroup.com (Mike Gadsdon)
Date: Thu Mar 24 02:06:12 2005
Subject: [antlr-interest] Re: ANTLR GUI name
In-Reply-To: <20050324095205.4D56CDCDBF@www.antlr.org>
Message-ID: <NFBBKLEKFHDGOJLCDCJAMEALDMAA.m.gadsdon@rheagroup.com>

If you like ANTLR Savant, what about saVANTLR? (seriously advanced Visual
ANTLR)

Mike
==============================================================
Mike Gadsdon                   mailto:m.gadsdon@rheagroup.com
Rhea System S.A                Tel +44 (0)20 8891 0702
                               Fax +44 (0)20 8891 6702
==============================================================

From rprememail at yahoo.com  Thu Mar 24 02:24:32 2005
From: rprememail at yahoo.com (Premkumar Rathanavelu)
Date: Thu Mar 24 02:24:35 2005
Subject: [antlr-interest] ANTLR - GUI name suggestion
Message-ID: <20050324102432.35031.qmail@web80909.mail.scd.yahoo.com>

One more suggestion for the ANTLR GUI 
 
"Smart ANTLR " or  "ANTLR Smart"
 
Thanks.,
Prem

		
---------------------------------
Do you Yahoo!?
 Yahoo! Small Business - Try our new resources site! 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050324/9b1260f0/attachment.html
From scott at javadude.com  Thu Mar 24 04:22:53 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Thu Mar 24 04:23:15 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <81EFB02B4F41C34192AD7BEFE55007501D2EE7@mail-x.ad.life.unsw.edu.au>
Message-ID: <20050324120027.DD6722903E3@new.knowspam.net>

Ter's proposing a unicast observer pattern, rather than multicast (as Ter's
assuming only a single listener). I would prefer a multicast as well, as
this will make hooking up views way easier, and different people can
contribute views independently. Daisy chaining doesn't allow that.

The debugger(s) will need some sort of notification/registration mechanism.
In Eclipse, this is easy (plugin registration makes it easy, and we can
define an ANTLR launcher that looks for registered debuggers and attaches
them as listeners to a parser).

If there was a good chance that people would want to wire a debugger to
ANTLR in a JavaBean builder, I'd agree that having it follow the JavaBean
event model (using EventListener and EventObject) would be a good idea. I
don't think that's likely, so I'd avoid the extra event object creation, and
because of that, skip the EventListener extension.

I hadn't had a chance to chime in until now, so here's my 2c...

I'd like to be notified of:
* which parser sent the information (we could be debugging multiple parsers
at once with a single debugger...) for all methods
* predicate evaluation (and success/failure)
* whether we're guessing or not
* la(k)/lt(k) evaluation
* enterAlt needs a ruleName as well
* parsing completed successfully
* text or a token was matched
* newline was triggered
* have location indicate the file we're in
* I'd prefer to be notified of rules by number rather than name - a
debuggable parser can provide a rule-name lookup method or public static
array of rule names



These features will allow a debugger to show the user exactly what's going
on during the scan/parse by highlighting source, displaying messages, and so
forth.


Here's what I've got for ANTLR 2.7.6's parser listener. I've simplified it
significantly from previous versions. Note the lack of event objects in this
version; I felt they were a waste. Still an observer pattern.

public interface ParserListener {
	public static final int TOKEN=0;
	public static final int BITSET=1;
	public static final int CHAR=2;
	public static final int CHAR_BITSET=3;
	public static final int STRING=4;
	public static final int CHAR_RANGE=5;
	public static final int VALIDATING=6;
	public static final int PREDICTING=7;

	public void semanticPredicateEvaluated(DebuggingParser parser,
boolean validating, int condition, boolean result, int guessing);
	public void parserMatch(DebuggingParser parser, int type, int value,
Object targetValue, String text, int guessing, boolean inverse, boolean
matched);
	public void parserMatch(DebuggingParser parser, int type, String
value, Object targetValue, String text, int guessing, boolean inverse,
boolean matched);
	public void reportError(DebuggingParser parser, Throwable
throwable);
	public void reportError(DebuggingParser parser, String text);
	public void reportWarning(DebuggingParser parser, String text);
	public void parserConsume(DebuggingParser parser, int value, int
guessing);
	public void parserLA(DebuggingParser parser, int amount, int value);
	public void parserLT(DebuggingParser parser, int amount, Token
value);
	public void enterRule(DebuggingParser parser, int ruleNum, int
guessing, int data);
	public void exitRule(DebuggingParser parser, int ruleNum, int
guessing, int data);
	public void syntacticPredicateStarted(DebuggingParser parser, int
guessing);
	public void syntacticPredicateFinished(DebuggingParser parser, int
guessing, boolean succeeded);
	public void doneParsing(DebuggingParser parser);

	public void hitNewLine(DebuggingParser parser, int line);
}	


I've also got an input buffer listener so we can display that:

public interface InputBufferListener {
	public void inputBufferConsume(InputBuffer inputBuffer, char c);
	public void inputBufferLA(InputBuffer inputBuffer, char c, int
lookaheadAmount);
	public void inputBufferMark(InputBuffer inputBuffer, int position);
	public void inputBufferRewind(InputBuffer inputBuffer, int
position);
	public void doneParsing(InputBuffer inputBuffer);
}


Later,
-- Scott



From scott at javadude.com  Thu Mar 24 04:28:49 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Thu Mar 24 04:28:52 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <81EFB02B4F41C34192AD7BEFE55007501D2EF4@mail-x.ad.life.unsw.edu.au>
Message-ID: <20050324120623.A66DC2902B4@new.knowspam.net>

I would really prefer the transport mechanism to be a plugin. This would
allow socket-based transport if desired, or direct observer communication.
No need to do network I/O if not necessary.

The plugin would be responsible for the unicast/multicast support.

That said, an implementation in Eclipse would need to use socket-based
communication ;) I'm just thinking of a command-line version similar to
ParseView, which simply adds listeners.

Later,
-- Scott

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Tom Brandon
> Sent: Thursday, March 24, 2005 12:44 AM
> To: antlr-interest
> Subject: RE: [antlr-interest] v3.0 debug interface
> 
> No, the Antlr GUI, written in Java, or other GUIs in any 
> language, will be able to debug parsers in any target language.
> 
> Terrence Parr said:
> "That Java interface is just the Java way to trigger events.  
> C or whatever would just call functions that emitted a text 
> protocol across the socket to the GUI (which happens to be in 
> Java, though that's not important...anybody that wants to 
> will be able to handle the protocol).
> 
> So, I'll be defining a very simple text language (protocol) 
> for anybody that knows how to open sockets to use."
> 
> Tom.
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Bryan Ewbank
> Sent: Thursday, 24 March 2005 15:56
> To: antlr-interest
> Subject: Re: [antlr-interest] v3.0 debug interface
> 
> Perhaps I missed it in this thread, but is the V3.0 debug 
> interface intended only for Java?  It seems that quite a bit 
> of the discussion is in that context, so need to ask.
> 
> Thanks,
> - Bryan (C++ ANTLR for me)



From ATov at nds.com  Thu Mar 24 07:27:16 2005
From: ATov at nds.com (Tov, Amatzia)
Date: Thu Mar 24 07:27:25 2005
Subject: [antlr-interest] TokenStreamRewriteEngine problem
Message-ID: <BE152B31CC9EFC42A2A554FE6B57D2A2881DCE@ILEX3.IL.NDS.COM>

Hi all,

I have a problem with the TokenStreamRewriteEngine class.

I'm trying to add tokens to the stream, but whenever I manipulate two adjacent tokens, the stream gets scrambled.

For example, when adding a token after the method header, I can't remove the first line in the method - when doing so, the first added token is also removed.

Is it because the "lazy" approach of the class? Is there a way to "flatten" the stream and add all the new changes to it (not via toString)?

Is there any other solution?

Thanks,

Amatzia
***********************************************************************************
Information contained in this email message is intended only for use of the individual or entity named above. If the reader of this message is not the intended recipient, or the employee or agent responsible to deliver it to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please immediately notify the postmaster@nds.com and destroy the original message.
***********************************************************************************
From jferguson at aptas.com  Thu Mar 24 10:37:19 2005
From: jferguson at aptas.com (Jamie Ferguson)
Date: Thu Mar 24 10:37:22 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
Message-ID: <1111689439.5659.5.camel@dev7lt>

The only documentation I've found says restrictions can be set for:
* zero-or-more
* one-or-more
* optional 

Is there a way to restriction a subrule so it occurs from n to m times?

Thanks,
Jamie




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050324/38b3b271/attachment.html
From ewbank at gmail.com  Thu Mar 24 11:07:25 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Mar 24 11:07:28 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <1111689439.5659.5.camel@dev7lt>
References: <1111689439.5659.5.camel@dev7lt>
Message-ID: <dd3a065f05032411074bfa4183@mail.gmail.com>

Only way of which I'm aware is a counter in the loop, and a following
semantic restriction:

rule
{ int c = 0; }
:
     ( subrule { c++; } )*
     {
          if (c < N || c > M)
          {
             diediedie(...)
          }
     }
;


On Thu, 24 Mar 2005 11:37:19 -0700, Jamie Ferguson <jferguson@aptas.com> wrote:
>  Is there a way to restriction a subrule so it occurs from n to m times?
From prashant.deva at gmail.com  Thu Mar 24 11:29:46 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Thu Mar 24 11:29:48 2005
Subject: [antlr-interest] problem with rule to match 'any other' text
Message-ID: <41fed8f805032411291454c107@mail.gmail.com>

Hi,
 I have a little problem. I have this grammer (the antlr 2.7.xx
grammar, that is) and i am trying to add a rule to match 'any other
text'. basically text that is not matched by any rule.
But there seems to be a conflict with it and Whitespace rule. 
Here are the rules- 

TEXT_ERROR : (options{ greedy = false;}: .)+ ; //match any text not
matched by any other //rule

WS_LOOP
	:	(	// grab as much WS as you can
			options {
				greedy=true;
			}
		:
			WS
		|	COMMENT
		)*
	;

Thing is, when i type a whitespace, it is detected as a 'TEXT_ERROR'
token instead of a ws token. how do i correct the rules so that the ws
is handled correctly.

PRASHANT
From parrt at cs.usfca.edu  Thu Mar 24 12:26:09 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Mar 24 12:19:08 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <dd3a065f05032411074bfa4183@mail.gmail.com>
References: <1111689439.5659.5.camel@dev7lt>
	<dd3a065f05032411074bfa4183@mail.gmail.com>
Message-ID: <0893519828f9a815a359076931291492@cs.usfca.edu>


On Mar 24, 2005, at 11:07 AM, Bryan Ewbank wrote:

> Only way of which I'm aware is a counter in the loop, and a following
> semantic restriction:
>
> rule
> { int c = 0; }
> :
>      ( subrule { c++; } )*
>      {
>           if (c < N || c > M)
>           {
>              diediedie(...)
>           }
>      }
> ;

I'm thinking about this for 3.0.  Perhaps (...)+[n,m] ????

Ter

--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From prashant.deva at gmail.com  Thu Mar 24 13:38:12 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Thu Mar 24 13:38:16 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <0893519828f9a815a359076931291492@cs.usfca.edu>
References: <1111689439.5659.5.camel@dev7lt>
	<dd3a065f05032411074bfa4183@mail.gmail.com>
	<0893519828f9a815a359076931291492@cs.usfca.edu>
Message-ID: <41fed8f805032413381bca234d@mail.gmail.com>

Ter, 
 I think you should put this in 3.0 only if it is widely useful, which
it doesn't seem to be.
For special cases like this, people can use the code like its provided above.

PRASHANT

On Thu, 24 Mar 2005 12:26:09 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> On Mar 24, 2005, at 11:07 AM, Bryan Ewbank wrote:
> 
> > Only way of which I'm aware is a counter in the loop, and a following
> > semantic restriction:
> >
> > rule
> > { int c = 0; }
> > :
> >      ( subrule { c++; } )*
> >      {
> >           if (c < N || c > M)
> >           {
> >              diediedie(...)
> >           }
> >      }
> > ;
> 
> I'm thinking about this for 3.0.  Perhaps (...)+[n,m] ????
> 
> Ter
> 
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> 
>
From nbsherid at secsme.org.au  Thu Mar 24 13:45:10 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Thu Mar 24 13:44:59 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <41fed8f805032413381bca234d@mail.gmail.com>
Message-ID: <000001c530ba$c11f4730$0500a8c0@nigel>




> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Prashant Deva
> Sent: Friday, 25 March 2005 8:38 AM
> To: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] Can subrules be set to 'n-to-m'?
> 
> Ter,
>  I think you should put this in 3.0 only if it is widely useful, which
> it doesn't seem to be.
> For special cases like this, people can use the code like its provided
> above.
> 


Actually I think (...)+[n,m] comes up often enough to make it a useful
feature of the ANTLR grammar. Using the action code is unwieldy and messy,
but if there are no other options, then it?s the only way. 

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435

From richard at exaflop.org  Thu Mar 24 14:47:49 2005
From: richard at exaflop.org (Richard Matthias)
Date: Thu Mar 24 14:47:46 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <000001c530ba$c11f4730$0500a8c0@nigel>
Message-ID: <ECOWS01MbjRVL5OthkH0008d742@smtp-out1.blueyonder.co.uk>

>> Ter,
>>  I think you should put this in 3.0 only if it is widely 
>useful, which 
>> it doesn't seem to be.
>> For special cases like this, people can use the code like 
>its provided 
>> above.
>> 
>
>
>Actually I think (...)+[n,m] comes up often enough to make it 
>a useful feature of the ANTLR grammar. Using the action code 
>is unwieldy and messy, but if there are no other options, then 
>it's the only way. 

Yes, I hate putting checks in action code for something so simple and it does
come up often enough when you are trying to covert rules from a 'lex' type
scanner. I'm pulling my hair out now with trying to get the sample CSS
grammar to work with antlr (pretty close to giving up and using the Apache
Batik project's hand-coded parser). That has a rule for unicode escapes.

H : '0'..'9' | 'a'..'f';
UNICODE : '\\' (H)+		// one to six hex characters
           { some action code here to check the length;}
        ;

I suppose another way to do it would be

UNICODE : '\\' H ( H ( H ( H ( H ( H )? )? )? )? )? ;

Not pretty though!

richard

From parrt at cs.usfca.edu  Thu Mar 24 14:58:40 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Mar 24 14:51:39 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <ECOWS01MbjRVL5OthkH0008d742@smtp-out1.blueyonder.co.uk>
References: <ECOWS01MbjRVL5OthkH0008d742@smtp-out1.blueyonder.co.uk>
Message-ID: <43b4aba7ef38cc2cd623382497cbac7a@cs.usfca.edu>


On Mar 24, 2005, at 2:47 PM, Richard Matthias wrote:
> Yes, I hate putting checks in action code for something so simple and 
> it does
> come up often enough when you are trying to covert rules from a 'lex' 
> type
> scanner. I'm pulling my hair out now with trying to get the sample CSS
> grammar to work with antlr (pretty close to giving up and using the 
> Apache
> Batik project's hand-coded parser). That has a rule for unicode 
> escapes.
>
> H : '0'..'9' | 'a'..'f';
> UNICODE : '\\' (H)+		// one to six hex characters
>            { some action code here to check the length;}
>         ;

Hi Richard,

I usually do it this way.  Not everything has to be checked with the 
syntax.  I've built a lot of translators and I have encountered very 
few cases where the length of a lexeme was important ('cept for when I 
did fortran translation).  It's reasonably easy to put in the 
"semantic" check. :)

Ter

>
> I suppose another way to do it would be
>
> UNICODE : '\\' H ( H ( H ( H ( H ( H )? )? )? )? )? ;
>
> Not pretty though!


> --
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From Loring.G.Craymer at jpl.nasa.gov  Thu Mar 24 15:08:20 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Thu Mar 24 15:08:26 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <000001c530ba$c11f4730$0500a8c0@nigel>
References: <41fed8f805032413381bca234d@mail.gmail.com>
	<000001c530ba$c11f4730$0500a8c0@nigel>
Message-ID: <6.1.1.1.2.20050324143755.01e2fa28@mail.jpl.nasa.gov>

The ISO standard for EBNF, <http://www.cl.cam.ac.uk/~mgk25/iso-14977.pdf>, 
supports fixed count repetition.  However, I find that the cases where you 
would want to restrict repetition are not so common as to merit special 
case treatment:  if you are being this careful, then you have sprinkled in 
enough semantic predicates for other conditions that one more does not 
matter.  Also, you may want to treat a count that is out of range as an 
error condition during a tree walk instead of in the parser.  I must admit 
that I wish for a limited repeat feature whenever I run into the 
problem--the sem preds look ugly--but I don't think that adding a repeat 
count to ANTLR syntax makes sense.

--Loring


At 01:45 PM 3/24/2005, Nigel Sheridan-Smith wrote:



> > -----Original Message-----
> > From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> > bounces@antlr.org] On Behalf Of Prashant Deva
> > Sent: Friday, 25 March 2005 8:38 AM
> > To: antlr-interest@antlr.org
> > Subject: Re: [antlr-interest] Can subrules be set to 'n-to-m'?
> >
> > Ter,
> >  I think you should put this in 3.0 only if it is widely useful, which
> > it doesn't seem to be.
> > For special cases like this, people can use the code like its provided
> > above.
> >
>
>
>Actually I think (...)+[n,m] comes up often enough to make it a useful
>feature of the ANTLR grammar. Using the action code is unwieldy and messy,
>but if there are no other options, then it's the only way.
>
>--
>Nigel Sheridan-Smith
>PhD research student
>
>Faculty of Engineering
>University of Technology, Sydney
>Phone: 02 9514 7946
>Fax: 02 9514 2435


From johnm-antlr at non.net  Thu Mar 24 15:31:52 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Thu Mar 24 15:31:32 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <0893519828f9a815a359076931291492@cs.usfca.edu>
References: <1111689439.5659.5.camel@dev7lt>
	<dd3a065f05032411074bfa4183@mail.gmail.com>
	<0893519828f9a815a359076931291492@cs.usfca.edu>
Message-ID: <16963.19944.369597.61231@despot.non.net>

>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
[...]

> I'm thinking about this for 3.0.  Perhaps (...)+[n,m] ????

Looks good to me.  Simple and a lot more clear about the intent then doing
semantic predicates.

Remember to support the degenerate case of exactly n instances.

I'd find this really helpful in parsing fixed-size formats.

Take care,
	John
From jferguson at aptas.com  Thu Mar 24 15:53:56 2005
From: jferguson at aptas.com (Jamie Ferguson)
Date: Thu Mar 24 15:53:58 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <6.1.1.1.2.20050324143755.01e2fa28@mail.jpl.nasa.gov>
References: <41fed8f805032413381bca234d@mail.gmail.com>
	<000001c530ba$c11f4730$0500a8c0@nigel>
	<6.1.1.1.2.20050324143755.01e2fa28@mail.jpl.nasa.gov>
Message-ID: <1111708436.5659.22.camel@dev7lt>

Depends on your domain -- in my domain this functionality is essential.
I don't know enough about how the code generation works to know if this
is a difficult problem to solve, but if it is not it seems like a handy
thing to have even if it is not used often.  I would assume that if the
EBNF standard supports it then it is used often enough to make it
worthwhile.

I'll try the code approach for now and see how that works.  Thanks to
everyone for the feedback.  :)

Jamie



On Thu, 2005-03-24 at 15:08 -0800, Loring Craymer wrote:

> The ISO standard for EBNF, <http://www.cl.cam.ac.uk/~mgk25/iso-14977.pdf>, 
> supports fixed count repetition.  However, I find that the cases where you 
> would want to restrict repetition are not so common as to merit special 
> case treatment:  if you are being this careful, then you have sprinkled in 
> enough semantic predicates for other conditions that one more does not 
> matter.  Also, you may want to treat a count that is out of range as an 
> error condition during a tree walk instead of in the parser.  I must admit 
> that I wish for a limited repeat feature whenever I run into the 
> problem--the sem preds look ugly--but I don't think that adding a repeat 
> count to ANTLR syntax makes sense.
> 
> --Loring
> 
> 
> At 01:45 PM 3/24/2005, Nigel Sheridan-Smith wrote:
> 
> 
> 
> > > -----Original Message-----
> > > From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> > > bounces@antlr.org] On Behalf Of Prashant Deva
> > > Sent: Friday, 25 March 2005 8:38 AM
> > > To: antlr-interest@antlr.org
> > > Subject: Re: [antlr-interest] Can subrules be set to 'n-to-m'?
> > >
> > > Ter,
> > >  I think you should put this in 3.0 only if it is widely useful, which
> > > it doesn't seem to be.
> > > For special cases like this, people can use the code like its provided
> > > above.
> > >
> >
> >
> >Actually I think (...)+[n,m] comes up often enough to make it a useful
> >feature of the ANTLR grammar. Using the action code is unwieldy and messy,
> >but if there are no other options, then it's the only way.
> >
> >--
> >Nigel Sheridan-Smith
> >PhD research student
> >
> >Faculty of Engineering
> >University of Technology, Sydney
> >Phone: 02 9514 7946
> >Fax: 02 9514 2435
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050324/68ccbb42/attachment.html
From ric.klaren at gmail.com  Thu Mar 24 16:13:31 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Thu Mar 24 16:13:18 2005
Subject: [antlr-interest] Assertion failure
In-Reply-To: <20050323193042.614DEE5BC7@ws7-2.us4.outblaze.com>
References: <20050323193042.614DEE5BC7@ws7-2.us4.outblaze.com>
Message-ID: <424357AB.1050907@gmail.com>

togol machillan wrote:
> I get the following error messages at run time due to assertion failure. 
> 
>   col == 1
> Assertion failed: nb <= entries(), file c:\antlr-2.7.5\lib\cpp\antlr\circularqueue.hpp, line 59
> 
> Here col is a global integer variable which has the column number of the keyword after that rule is called. The rule which generates this message looks like
> 
> paragraph: keyword {col == 1} ...
>          ; 
> 
> keyword: t:"TITLE" {col = t->getColumn();}
>          |in:"IN-UNITS" {col = t->getColumn();} 
>          |data:"DATABANKS" {col = t->getColumn();}
>         ;
> 
> 
> The difficulty is that the assertion fails even when the keyword like TITLE
 > occurs in column 1. Can somebody please explain how to avoid this
 > assertion failure.

Could you send me a copy of the grammar that triggers this (if possible) 
preferably pruned down to a minimal example that triggers the problem 
together with the input? I'm short on time but I try to have a look.

 > Secondly, is there a better way of getting the column number in the
 > keyword rule without defining a label for every alternative literal.

keyword:    {col = LT(1)->getColumn();} t:"TITLE"
          |  {col = LT(1)->getColumn();} in:"IN-UNITS"
          |  {col = LT(1)->getColumn();} data:"DATABANKS"
         ;

Should probably work. (LT(1) refers to the first lookahead token)

Cheers,

Ric

> 
> Thank you all for your helpful suggestions to my previous queries.
> 
> Togol  
> 

From atripp at comcast.net  Thu Mar 24 17:29:41 2005
From: atripp at comcast.net (Andy Tripp)
Date: Thu Mar 24 17:29:46 2005
Subject: [antlr-interest] v3.0 debug interface
Message-ID: <42436985.4070500@comcast.net>

>
>
>Ah, great, looks like we were on the same page as far as the inteface
>between GUI and lexer\parser goes, you just sent specs in terms of Java
>interface rather than the net based protocol. And I certainly wasn't
>think of some nasty CORBA style thing, just a text protocol like you
>suggest.
>
Just thought I'd mention that I really like CORBA, and I think the days 
of everyone inventing
their own little text-based protocol across a socket are over. However, 
in this case, it
may be overkill, as the complexity of the data is very low.

>
>As to the format of the interface, I meant the standard Java style
>listeners, extend java.util.EventListener (just a tag for tools) and
>then (add|remove)Listener(...); methods (hadn't remembered that Java's
>"Listener" pattern was quite so simple, too long living day to day in
>C#'s delegate land I guess).
>
>Amd then events of the form:
>void location(LocationEvent evt); 
>where LocationEvent extends java.util.EventObject.
>
I'd certainly recommend using Listeners (I assume that's what Terrence 
had in mind).
But I wouldn't extend any of the built-in Java Events, as you don't need 
any of
that functionality.

>
>While I agree about the general issue of cost\benefit, these changes
>seem of little cost, seem to offer some functional benefit (the two
>use-cases of modular handling in the GUI and code-gen specific events)
>and also fit the standard Java design patterns thus making them easier
>to understand for those familiar with other Java apps (in this case a
>rather weak point due to the simplicity of the pattern but still) and
>understandable by other language tools.
>
Also, extending built-in Java Events will make handling them in other 
languages a mess.

Andy

From atripp at comcast.net  Thu Mar 24 17:32:58 2005
From: atripp at comcast.net (Andy Tripp)
Date: Thu Mar 24 17:33:02 2005
Subject: [antlr-interest] v3.0 debug interface
Message-ID: <42436A4A.4090508@comcast.net>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050324/3e303b44/attachment.html
From atripp at comcast.net  Thu Mar 24 17:45:50 2005
From: atripp at comcast.net (Andy Tripp)
Date: Thu Mar 24 17:45:55 2005
Subject: [antlr-interest] v3.0 debug interface
Message-ID: <42436D4E.3040402@comcast.net>

>
>
>I would really prefer the transport mechanism to be a plugin. This would
>allow socket-based transport if desired, or direct observer communication.
>No need to do network I/O if not necessary.
>
>The plugin would be responsible for the unicast/multicast support.
>  
>
That sounds like a good idea. Now, if we just had some magic way to add 
listeners, and not
care whether the listeners are on the same machine or not. And not care 
what language the listeners
are in. And actually listen for objects/data rather than 
marshalling/demarshalling streams of bytes
across a socket.

Gosh, maybe we could make such a mechanism a standard, and have lots of 
implemenations, many
of them free, and even a free one included in with the base Java JDK.
Man, that would be great. We are in the 90's after all, no need to keep 
kludging our interfaces.
http://www.omg.org/gettingstarted/history_of_corba.htm

Andy :)


From parrt at cs.usfca.edu  Thu Mar 24 18:21:25 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Mar 24 18:14:24 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <42436D4E.3040402@comcast.net>
References: <42436D4E.3040402@comcast.net>
Message-ID: <a3a9bc64c368805e81ff9368bade8184@cs.usfca.edu>


On Mar 24, 2005, at 5:45 PM, Andy Tripp wrote:
> That sounds like a good idea. Now, if we just had some magic way to 
> add listeners, and not
> care whether the listeners are on the same machine or not. And not 
> care what language the listeners
> are in. And actually listen for objects/data rather than 
> marshalling/demarshalling streams of bytes
> across a socket.
>
> Gosh, maybe we could make such a mechanism a standard, and have lots 
> of implemenations, many
> of them free, and even a free one included in with the base Java JDK.
> Man, that would be great. We are in the 90's after all, no need to 
> keep kludging our interfaces.
> http://www.omg.org/gettingstarted/history_of_corba.htm

Not to propagate a corba discussion, i'll only add that i'd hate to 
require a CORBA server installed and running just so I could debug my 
grammar ;)  Oh and I won't be sending binary data across the 
socket...all text.  shouldn't be issues of byte order etc...

Ter :)
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From parrt at cs.usfca.edu  Thu Mar 24 18:23:44 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Mar 24 18:16:43 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <20050324120623.A66DC2902B4@new.knowspam.net>
References: <20050324120623.A66DC2902B4@new.knowspam.net>
Message-ID: <fdb50beff1c5b257ab192686d94e792c@cs.usfca.edu>


On Mar 24, 2005, at 4:28 AM, Scott Stanchfield wrote:

> I would really prefer the transport mechanism to be a plugin. This 
> would
> allow socket-based transport if desired, or direct observer 
> communication.
> No need to do network I/O if not necessary.

Correct...i'll use the interface to swap in a proxy only if you wanna 
go across the socket.

> The plugin would be responsible for the unicast/multicast support.

Yeah, even in the nonsocket case; that's sort of similar to the 
daisychaining thingie i was talking about.

> That said, an implementation in Eclipse would need to use socket-based
> communication ;)

Really?  Oh well; good to know.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From tom at psy.unsw.edu.au  Thu Mar 24 18:17:51 2005
From: tom at psy.unsw.edu.au (Tom Brandon)
Date: Thu Mar 24 18:16:47 2005
Subject: [antlr-interest] v3.0 debug interface
Message-ID: <81EFB02B4F41C34192AD7BEFE55007501D2F08@mail-x.ad.life.unsw.edu.au>

 I agree, though a plugin to what? How exactly is the instrumentation
supposed to happen (Ter?)? I assume it will be through custom code
generators extending the base ones to add debug functionality? So, will
these be provided by Antlr or will the IDE be responsible for hooking in
it's own debug generators? And then how will it divide between core
Antlr and code-gens? Presumably some mix is needed. Code-gen needs to
provide language-specific debug calls, but implementing entire debug
system would be troublesome, so ideally core Antlr would be doing
something, building on smaller units specified by code-gen (perhaps just
low-level call-message stuff, perhaps higher, allowing C# to spit out
conditional methods for debug builds might be nice). And then the IDE
seems to need some place in the whole thing, to specify whether it wants
to be doing in-process (for a target-language it can host) or net based
otherwise for instance.

Tom.
-----Original Message-----
From: Scott Stanchfield [mailto:scott@javadude.com] 
Sent: Thursday, 24 March 2005 23:29
To: Tom Brandon; 'antlr-interest'
Subject: RE: [antlr-interest] v3.0 debug interface

I would really prefer the transport mechanism to be a plugin. This would
allow socket-based transport if desired, or direct observer
communication.
No need to do network I/O if not necessary.

The plugin would be responsible for the unicast/multicast support.

That said, an implementation in Eclipse would need to use socket-based
communication ;) I'm just thinking of a command-line version similar to
ParseView, which simply adds listeners.

Later,
-- Scott

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Tom Brandon
> Sent: Thursday, March 24, 2005 12:44 AM
> To: antlr-interest
> Subject: RE: [antlr-interest] v3.0 debug interface
> 
> No, the Antlr GUI, written in Java, or other GUIs in any language, 
> will be able to debug parsers in any target language.
> 
> Terrence Parr said:
> "That Java interface is just the Java way to trigger events.  
> C or whatever would just call functions that emitted a text protocol 
> across the socket to the GUI (which happens to be in Java, though 
> that's not important...anybody that wants to will be able to handle 
> the protocol).
> 
> So, I'll be defining a very simple text language (protocol) for 
> anybody that knows how to open sockets to use."
> 
> Tom.
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Bryan Ewbank
> Sent: Thursday, 24 March 2005 15:56
> To: antlr-interest
> Subject: Re: [antlr-interest] v3.0 debug interface
> 
> Perhaps I missed it in this thread, but is the V3.0 debug interface 
> intended only for Java?  It seems that quite a bit of the discussion 
> is in that context, so need to ask.
> 
> Thanks,
> - Bryan (C++ ANTLR for me)



From parrt at cs.usfca.edu  Thu Mar 24 18:45:45 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Mar 24 18:38:44 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <81EFB02B4F41C34192AD7BEFE55007501D2F08@mail-x.ad.life.unsw.edu.au>
References: <81EFB02B4F41C34192AD7BEFE55007501D2F08@mail-x.ad.life.unsw.edu.au>
Message-ID: <55f727d3258fdb3dfee93cf47003da53@cs.usfca.edu>


On Mar 24, 2005, at 6:17 PM, Tom Brandon wrote:

>  I agree, though a plugin to what? How exactly is the instrumentation
> supposed to happen (Ter?)? I assume it will be through custom code
> generators extending the base ones to add debug functionality? So, will
> these be provided by Antlr or will the IDE be responsible for hooking 
> in
> it's own debug generators? And then how will it divide between core
> Antlr and code-gens? Presumably some mix is needed. Code-gen needs to
> provide language-specific debug calls, but implementing entire debug
> system would be troublesome, so ideally core Antlr would be doing
> something, building on smaller units specified by code-gen (perhaps 
> just
> low-level call-message stuff, perhaps higher, allowing C# to spit out
> conditional methods for debug builds might be nice). And then the IDE
> seems to need some place in the whole thing, to specify whether it 
> wants
> to be doing in-process (for a target-language it can host) or net based
> otherwise for instance.

The way it works now is the following.  There is a -debug command line 
option that notifies the code generator to turn on the debug attribute 
in the code generation templates.  Then any template can reference that 
boolean.  For example, in the rule template you'll see this:

<if(debug)>
     dbg.enterRule("<ruleName>");
     dbg.location(<ruleDescriptor.tree.line>, 
<ruleDescriptor.tree.column>);<\n>
<endif>

In the parser template, you'll see:

class <name> extends <if(debug)>DebugParser<else>Parser<endif> {

so some of the triggers are in the DebugParser.

These are in the Java templates.  Presumably C would do something else 
such as call a function or two that squirt text across the socket to 
Jean's Java-based debugger.

In the debugger, the protocol will be interpreted and then 
ANTLRDebugInterface methods will be triggered appropriately.  So, the 
debugger should not care what language is generating the events.  It 
will, however, have to specifically connect to a running process via a 
socket to get the events.  It will also be able to just invoke a parser 
class if you are using Java, but that brings up other problems like 
where to get input and how exactly to start up a parser etc...  Those I 
will work on with Jean Bovet.

Generating extra code for debugging is not that hard thanks to 
StringTemplate.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From parrt at cs.usfca.edu  Thu Mar 24 18:55:51 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Mar 24 18:48:51 2005
Subject: [antlr-interest] some quick codegen optimization thoughts
Message-ID: <87f636adf0c930880510b57d3ab076c5@cs.usfca.edu>

Howdy,

So I've spent some time implementing switches vs if-then-else chains 
(in Java and bytecodes (yes, that was a pain)).  Further, I have worked 
on factoring out input.LA(1) calls.  The code looks pretty clean I 
think.  I've been using the java.g grammar as a benchmark.  The 
decision making is optimal in that it references input.LA(k) at most 
once per k value need to predict alternatives (both with if-then-elses 
and switches; both in Java and in bytecodes).

The summary is this.  Generating switches generates slightly bigger 
code .class files.  It seems to gain only about 10% in CPU time, which 
ain't much given all the effort I just put in. ;)  I'm guessing C and 
other compilers will be able to take better advantage of my efforts. ;) 
  To give you a benchmark against 2.x ANTLR doing the same grammar (but 
doing tree construction), ANTLR's generated parser is only about 2x as 
fast, but that ain't too bad to start.  I have one really major 
optimization left to do (later) that should make it much better.

I'm rapidly closing in on a complete piece of software for an 
early-release.  Then I'll need some more sample grammars so people can 
actually try it out.  Still I'm thinking late May timeframe.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From scott at javadude.com  Thu Mar 24 20:25:17 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Thu Mar 24 20:25:20 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <fdb50beff1c5b257ab192686d94e792c@cs.usfca.edu>
Message-ID: <20050325040239.33C31290355@new.knowspam.net>

> > That said, an implementation in Eclipse would need to use 
> socket-based 
> > communication ;)
> 
> Really?  Oh well; good to know.

Considering that the plugin would be running in a different VM than the
application doing the parsing... Then again, we could set up the launcher to
run it in the same VM as eclipse, but that's not generally a good idea b/c
you then inherit the classpath of the eclipse installation rather than
what's set up in the project.

Basically you need some kind of remote communication. For the new ParseView,
I'm using RMI (as it's Java-Java communication).

Later,
-- Scott



From scott at javadude.com  Thu Mar 24 20:28:09 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Thu Mar 24 20:28:16 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <81EFB02B4F41C34192AD7BEFE55007501D2F08@mail-x.ad.life.unsw.edu.au>
Message-ID: <20050325040536.70FFF2905F0@new.knowspam.net>

Sounds like an ideal place for a factorily that returns a strategery for the
communification of the debuggery informat...

(Sorry -- possessed by the commander-in-chimp for a second... at least my
state voted against him ;)

-- Scott

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Tom Brandon
> Sent: Thursday, March 24, 2005 9:18 PM
> To: antlr-interest
> Subject: RE: [antlr-interest] v3.0 debug interface
> 
>  I agree, though a plugin to what? How exactly is the 
> instrumentation supposed to happen (Ter?)? I assume it will 
> be through custom code generators extending the base ones to 
> add debug functionality? So, will these be provided by Antlr 
> or will the IDE be responsible for hooking in it's own debug 
> generators? And then how will it divide between core Antlr 
> and code-gens? Presumably some mix is needed. Code-gen needs 
> to provide language-specific debug calls, but implementing 
> entire debug system would be troublesome, so ideally core 
> Antlr would be doing something, building on smaller units 
> specified by code-gen (perhaps just low-level call-message 
> stuff, perhaps higher, allowing C# to spit out conditional 
> methods for debug builds might be nice). And then the IDE 
> seems to need some place in the whole thing, to specify 
> whether it wants to be doing in-process (for a 
> target-language it can host) or net based otherwise for instance.
> 
> Tom.
> -----Original Message-----
> From: Scott Stanchfield [mailto:scott@javadude.com]
> Sent: Thursday, 24 March 2005 23:29
> To: Tom Brandon; 'antlr-interest'
> Subject: RE: [antlr-interest] v3.0 debug interface
> 
> I would really prefer the transport mechanism to be a plugin. 
> This would allow socket-based transport if desired, or direct 
> observer communication.
> No need to do network I/O if not necessary.
> 
> The plugin would be responsible for the unicast/multicast support.
> 
> That said, an implementation in Eclipse would need to use 
> socket-based communication ;) I'm just thinking of a 
> command-line version similar to ParseView, which simply adds 
> listeners.
> 
> Later,
> -- Scott
> 
> > -----Original Message-----
> > From: antlr-interest-bounces@antlr.org 
> > [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Tom Brandon
> > Sent: Thursday, March 24, 2005 12:44 AM
> > To: antlr-interest
> > Subject: RE: [antlr-interest] v3.0 debug interface
> > 
> > No, the Antlr GUI, written in Java, or other GUIs in any language, 
> > will be able to debug parsers in any target language.
> > 
> > Terrence Parr said:
> > "That Java interface is just the Java way to trigger events.  
> > C or whatever would just call functions that emitted a text 
> protocol 
> > across the socket to the GUI (which happens to be in Java, though 
> > that's not important...anybody that wants to will be able to handle 
> > the protocol).
> > 
> > So, I'll be defining a very simple text language (protocol) for 
> > anybody that knows how to open sockets to use."
> > 
> > Tom.
> > -----Original Message-----
> > From: antlr-interest-bounces@antlr.org 
> > [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Bryan Ewbank
> > Sent: Thursday, 24 March 2005 15:56
> > To: antlr-interest
> > Subject: Re: [antlr-interest] v3.0 debug interface
> > 
> > Perhaps I missed it in this thread, but is the V3.0 debug interface 
> > intended only for Java?  It seems that quite a bit of the 
> discussion 
> > is in that context, so need to ask.
> > 
> > Thanks,
> > - Bryan (C++ ANTLR for me)
> 
> 
> 



From nbsherid at secsme.org.au  Thu Mar 24 21:36:53 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Thu Mar 24 21:36:40 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <20050325040536.70FFF2905F0@new.knowspam.net>
Message-ID: <000001c530fc$a71bb570$0500a8c0@nigel>


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Scott Stanchfield
> Sent: Friday, 25 March 2005 3:28 PM
> To: 'Tom Brandon'; 'antlr-interest'
> Subject: RE: [antlr-interest] v3.0 debug interface
> 
> (Sorry -- possessed by the commander-in-chimp for a second... at least my
> state voted against him ;)
> 

Geez you Americans are a bit wacky... Hmmm better not speak too loudly or
immigration may not let me in next week :D

http://news4colorado.com/gaveltogavel/local_story_083130626.html

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435


From ewbank at gmail.com  Thu Mar 24 23:32:30 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Mar 24 23:32:33 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <0893519828f9a815a359076931291492@cs.usfca.edu>
References: <1111689439.5659.5.camel@dev7lt>
	<dd3a065f05032411074bfa4183@mail.gmail.com>
	<0893519828f9a815a359076931291492@cs.usfca.edu>
Message-ID: <dd3a065f0503242332bddd36e@mail.gmail.com>

> I'm thinking about this for 3.0.  Perhaps (...)+[n,m] ????

Are "n" and "m" here constants, or variables?  I ask because this
could be used for function call support if they are variables.
From rprememail at yahoo.com  Fri Mar 25 03:27:44 2005
From: rprememail at yahoo.com (Premkumar Rathanavelu)
Date: Fri Mar 25 03:27:48 2005
Subject: [antlr-interest] Help : How to return more values in Parser
Message-ID: <20050325112744.44071.qmail@web80906.mail.scd.yahoo.com>

HI to all.,
  
 Eg:
// in Parser
tokenStream returns [String result = ""]
:
   (id:RET_ID)  {result = id.getText();}  // RET_ID see in Lexer below 
;
/* Q: here if i add (id:ID)+ to return more values. 
        Then I'm getting unexpected result */
 
// in Parser 
LEX_ID
:
  (ID)+     // ID is an identifier
;
RET_ID
:
  (Whitespace)+   (LEX_ID)
;
 
Here in the parser I used to get only value of the token.
 
For eg: /* beginining comes some "Whitespace" */  
           HERE IS A TEST
 
The result : parser gets only one token ID (= HERE) and 
                 leaving other after a whitespace
Coments : The Whitespace rule in the LEX_ID is must
                 for my construct so i cannot delete it.
 
Please give me some tips to solve the problem ..
 
Thanks.,
PREM
 

		
---------------------------------
Do you Yahoo!?
 Yahoo! Small Business - Try our new resources site! 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050325/0fcd329a/attachment.html
From scott at javadude.com  Fri Mar 25 04:23:47 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Fri Mar 25 04:23:51 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <dd3a065f0503242332bddd36e@mail.gmail.com>
Message-ID: <20050325120103.174582902CA@new.knowspam.net>

I think the "+" is redundant here...

Normally I'd say

  (...){n,m}

but of course that's ambiguous with actions, so

  (...)[n,m]

Should suffice.

BUT,

While I'm at it, can (...) be optional for single-ref repetition? For
example, I'd love to be able to use:

Foo[int x]
  : fee fie+ fo CRUFT* fum[x]*
  ;

and only use parens for multiple ref repetion or action inclusion:

foo
  : fee
    ( fie {...} )+
    fo
    (a b c d)*
  ;


Of course this would mean that foo[n,m] would be ambiguous under my request,
so we would have to do something like

  foo+[x,m]

for n-m repetition...

(But think about what foo+[0,4] means... Kinda the same as foo*[4])


Thoughts?
-- Scott



> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Bryan Ewbank
> Sent: Friday, March 25, 2005 2:33 AM
> To: antlr-interest Interest
> Subject: Re: [antlr-interest] Can subrules be set to 'n-to-m'?
> 
> > I'm thinking about this for 3.0.  Perhaps (...)+[n,m] ????
> 
> Are "n" and "m" here constants, or variables?  I ask because 
> this could be used for function call support if they are variables.



From scott at javadude.com  Fri Mar 25 04:42:59 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Fri Mar 25 04:43:02 2005
Subject: [antlr-interest] Variable definition annoyances
In-Reply-To: <dd3a065f0503242332bddd36e@mail.gmail.com>
Message-ID: <20050325122014.C9A7F290546@new.knowspam.net>

For 3.0, can we do something about variable definitions?

I get pretty annoyed at things like:

foo
  { String a=null, b=null, c=null, d=null; }
  : a=fee
    b=fie
    c=fo
    d=fum
    { doSomething(a,b,c,d); }
  ;

Can we not infer the variable definitions based on rule usage?

foo
  : a=fee
    b=fie
    c=fo
    d=fum
    { doSomething(a,b,c,d); }
  ;

or nicer still, something like

foo
  : fee fie fo fum
    { doSomething(::fee::, ::fie::, ::fo::, ::fum::); } 
  ;

(picking some syntax that's not likely to occur in any languge... Not sure
if ::x:: is sufficient, but it's a stab) and have the rule-ref assignments
be generated?

For multiple refs, we could go something like:

foo
  : stuff expression stuff fum
    { doSomething(::stuff[1]::, ::expression::, ::stuff[2]::, ::fum::); } 
  ;

which would be very clear, and really nice for tokens:

foo
  : ID EQUALS ID PLUS ID
    { addAndAssign(::ID[1]::, ::ID[2]::, ::ID[3]::); }


Ooooh... Think about all the cool stuff we could do with this:

  ::ID.text:: or ::ID[n].text::
  ::ID.type:: or ::ID[n].type::
     
translated to appropriate "get" call for the token text, type, whatever.

Something like

  ::foo.tree::

could represent the resulting tree, ::foo.@x:: could represent an attribute
(perhaps for XML processing), and this could be extended by later ANTLR
plugins or versions, like

  ::foo.matched-text::

or

  ::foo.start-line::
  ::foo.end-line::
  ::foo.first-set::
  ::foo.follow-set::

and other meta madness.

This would allow easy syntactic sugar to be added in action code, and make
the grammar much cleaner.

Thoughts?
-- Scott




From tbrandon at psy.unsw.edu.au  Thu Mar 24 18:27:20 2005
From: tbrandon at psy.unsw.edu.au (Thomas Brandon)
Date: Fri Mar 25 08:42:01 2005
Subject: [antlr-interest] v3.0 debug interface
Message-ID: <81EFB02B4F41C34192AD7BEFE55007501D2F09@mail-x.ad.life.unsw.edu.au>

 Yeah, I had slightly confused the two suggestions in that second post.
I think that multicast is pretty essential but yeah the full EventObject
stuff is a little over-the-top perhaps (especially in Java with it's
lack of delegates, when you're using C# style parser.OnLocation +=
handleLocation(EventObject); it becomes more useful, i.e. when you can
easily assign handler methods to events). Presumably if you want to have
events that the ultimate listeners know about that the proxying listener
doesn't know about, i.e. you can make your custom codegen send events
that one of your listening modules knows about but Antlr doesn't, then
you need such a format. If you are worried about the impact on
programmer then one possibility would be a standard
handleEvent(EventObject evt) method that proxied out to location(int
col, int line) rather than location(LocationEventObject evt) methods.
Though you still have the overhead Scott mentions avoiding.

Tom.
-----Original Message-----
From: Scott Stanchfield [mailto:scott@javadude.com] 
Sent: Thursday, 24 March 2005 23:23
To: Tom Brandon; ''antlr-interest' Interest'
Subject: RE: [antlr-interest] v3.0 debug interface

Ter's proposing a unicast observer pattern, rather than multicast (as
Ter's assuming only a single listener). I would prefer a multicast as
well, as this will make hooking up views way easier, and different
people can contribute views independently. Daisy chaining doesn't allow
that.

The debugger(s) will need some sort of notification/registration
mechanism.
In Eclipse, this is easy (plugin registration makes it easy, and we can
define an ANTLR launcher that looks for registered debuggers and
attaches them as listeners to a parser).

If there was a good chance that people would want to wire a debugger to
ANTLR in a JavaBean builder, I'd agree that having it follow the
JavaBean event model (using EventListener and EventObject) would be a
good idea. I don't think that's likely, so I'd avoid the extra event
object creation, and because of that, skip the EventListener extension.

<SNIP>


Here's what I've got for ANTLR 2.7.6's parser listener. I've simplified
it significantly from previous versions. Note the lack of event objects
in this version; I felt they were a waste. Still an observer pattern.

public interface ParserListener {
<SNIP>


Later,
-- Scott



From johnm-antlr at non.net  Fri Mar 25 09:13:32 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Fri Mar 25 09:13:14 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <20050325120103.174582902CA@new.knowspam.net>
References: <dd3a065f0503242332bddd36e@mail.gmail.com>
	<20050325120103.174582902CA@new.knowspam.net>
Message-ID: <16964.18108.523402.975740@despot.non.net>

>>>>> "Scott" == Scott Stanchfield <scott@javadude.com> writes:
[...]

> I think the "+" is redundant here...

So are you also suggesting that (ID)+ should only be written as
e.g. (ID)[1]?

That would be completely silly.  It looks like an indexed access operation,
it's different than the base case, etc.


[...]

> (...)[n,m]

Yes, I agree that it use the square brackets (ala math notation):

(...)+[n,m]

with the ,m part optional.


> Should suffice.

> BUT,

> While I'm at it, can (...) be optional for single-ref repetition? For
> example, I'd love to be able to use:

I don't care for that.  Why?  Because it means that people have to scan and
understand two different forms for the same fundamental meaning.  I.e.,
it's a Good Thing(tm) that the parentheses make the loops stand out
distinctively.

Take care,
	John
From parrt at cs.usfca.edu  Fri Mar 25 10:52:51 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Mar 25 10:45:50 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <16964.18108.523402.975740@despot.non.net>
References: <dd3a065f0503242332bddd36e@mail.gmail.com>
	<20050325120103.174582902CA@new.knowspam.net>
	<16964.18108.523402.975740@despot.non.net>
Message-ID: <eee80a80f81c63a241b91ace09c175dc@cs.usfca.edu>

Hi.  Regarding ID+ versus (ID)+ I've gone back and forth on this one so 
many times.  I like the brevity, but I really like consistency too.  So 
far consistency has won out! :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From parrt at cs.usfca.edu  Fri Mar 25 11:08:54 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Mar 25 11:01:54 2005
Subject: [antlr-interest] Variable definition annoyances
In-Reply-To: <20050325122014.C9A7F290546@new.knowspam.net>
References: <20050325122014.C9A7F290546@new.knowspam.net>
Message-ID: <66a5cd0b44f9b0e461bf62b6ae9e3fc9@cs.usfca.edu>


On Mar 25, 2005, at 4:42 AM, Scott Stanchfield wrote:

> For 3.0, can we do something about variable definitions?
>
> I get pretty annoyed at things like:
>
> foo
>   { String a=null, b=null, c=null, d=null; }
>   : a=fee
>     b=fie
>     c=fo
>     d=fum
>     { doSomething(a,b,c,d); }
>   ;

Yep, that is really annoying.  I racked my brain over it for a long 
time.  It turns out you don't need to define them anymore.  You can do 
this:

start : r=rule { @r.i ... @r.s ... } ;

rule returns [int i, String s] : ... {@i=3; @s="foo";} ... ;

Cool eh?  Does this satisfy you?  It integrates very nicely with the 
dynamically scoped attributes and trees etc...

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From parrt at cs.usfca.edu  Fri Mar 25 11:10:28 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Mar 25 11:03:25 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <20050325040239.33C31290355@new.knowspam.net>
References: <20050325040239.33C31290355@new.knowspam.net>
Message-ID: <360078ccfe7344eef56d9cb6efdf6660@cs.usfca.edu>


On Mar 24, 2005, at 8:25 PM, Scott Stanchfield wrote:

>>> That said, an implementation in Eclipse would need to use
>> socket-based
>>> communication ;)
>>
>> Really?  Oh well; good to know.
>
> Considering that the plugin would be running in a different VM than the
> application doing the parsing... Then again, we could set up the 
> launcher to
> run it in the same VM as eclipse, but that's not generally a good idea 
> b/c
> you then inherit the classpath of the eclipse installation rather than
> what's set up in the project.

Yeah, I forgot about the classpath issue.  :(  How easy is the RMI 
stuff?  Does it automatically start up a light server to handle the 
method calls (for Java only stuff)?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From parrt at cs.usfca.edu  Fri Mar 25 11:23:01 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Mar 25 11:16:03 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <20050324120027.DD6722903E3@new.knowspam.net>
References: <20050324120027.DD6722903E3@new.knowspam.net>
Message-ID: <6cb360ebc9ecf78b57da01d65cea4096@cs.usfca.edu>

On Mar 24, 2005, at 4:22 AM, Scott Stanchfield wrote:
> Ter's proposing a unicast observer pattern, rather than multicast (as 
> Ter's
> assuming only a single listener).

Or daisy-chain or a listener that is the multicast.  Please pass on a 
common use-case and I'll add :)

> The debugger(s) will need some sort of notification/registration 
> mechanism.
> In Eclipse, this is easy (plugin registration makes it easy, and we can
> define an ANTLR launcher that looks for registered debuggers and 
> attaches
> them as listeners to a parser).

Yeah, there are a number of nasty issues related to ease of hooking 
this beast up.  i'm brainstorming with Jean Bovet this Sunday.

> If there was a good chance that people would want to wire a debugger to
> ANTLR in a JavaBean builder, I'd agree that having it follow the 
> JavaBean
> event model (using EventListener and EventObject) would be a good 
> idea. I
> don't think that's likely, so I'd avoid the extra event object 
> creation, and
> because of that, skip the EventListener extension.

Yeah, I like location(line,pos) as it's language neutral; heck even C 
would like it. :)

> I'd like to be notified of:
> * which parser sent the information (we could be debugging multiple 
> parsers
> at once with a single debugger...) for all methods

Yeah, i am worried about this; haven't thought about how this will 
work.  I'm going to start with one grammar and then  when I know more, 
add multiple grammar support (like multiple tree parsers).

> * predicate evaluation (and success/failure)

Yep, this is reasonable.  The only question is how do you identify the 
predicates?  By their text?  I.e., do i do this?

if ( dbg.predEval("isTypeLA(1)", isType(LA(1))) ) { ... }

in the prediction expressions?  Hmm...probably would want the decision 
number as well.  File line info?  Does ParseView do this?  Have you 
found it useful?  I imagine it would be.

> * whether we're guessing or not

3.0 doesn't have syn preds yet so I'll add later.

> * la(k)/lt(k) evaluation

I thought about this for a long time.  Seems to me we can derive this 
in just about every situation unless the debugger can't load the input 
file such as when it's coming in from a socket.  In most cases, the 
debugger can show the input with all consumed char dimmed out.  The 
next input is the lookahead.  'course, you don't know how they are 
tokenized.  OTOH, since most of the time the input will be fully 
tokenized a priori, that could be just sent to the debugger. 
Hmm...perhaps LA(i)/LT(i) is easier.  Anybody else have thoughts here?  
I'm trying to keep the interface to a minimum as you can tell.

> * enterAlt needs a ruleName as well

It's the prior enterRule value, right?

> * parsing completed successfully

I guess you're right.  That's hard though.  Where do you put it?  Every 
rule can be a start symbol.  Further, can't end of input suggest you're 
done successfully?

> * text or a token was matched

I have consumed.

> * newline was triggered

Perhaps it's obvious, but why do you want this?

> * have location indicate the file we're in

Yeah, I was thinking about include files and such too...would the file 
be an int representing which file to reduce network traffic?  Then we'd 
need a "registerFile("foo.txt", 1);" to get file number.

> * I'd prefer to be notified of rules by number rather than name - a
> debuggable parser can provide a rule-name lookup method or public 
> static
> array of rule names

True.  We would need rules to register then.  We'd want to avoid having 
both antlr and the debugger have to use the exact same algorithm to 
number rules.

> These features will allow a debugger to show the user exactly what's 
> going
> on during the scan/parse by highlighting source, displaying messages, 
> and so
> forth.

Yup.

> Here's what I've got for ANTLR 2.7.6's parser listener. I've 
> simplified it
> significantly from previous versions. Note the lack of event objects 
> in this
> version; I felt they were a waste. Still an observer pattern.

[...]

Nice.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From prashant.deva at gmail.com  Fri Mar 25 12:44:31 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Fri Mar 25 12:44:34 2005
Subject: [antlr-interest] problem matching any 'other' text
Message-ID: <41fed8f8050325124415f75996@mail.gmail.com>

Hi,
I have a little problem. I have this grammer (the antlr 2.7.xx
grammar, that is) and i am trying to add a rule to match 'any other
text'. basically text that is not matched by any rule.
But there seems to be a conflict with it and Whitespace rule.
Here are the rules-

TEXT_ERROR : (options{ greedy = false;}: .)+ ; //match any text not
matched by any other rule

WS_LOOP
       :       (       // grab as much WS as you can
                       options {greedy=true;} :
               WS |   COMMENT
               )*
       ;

Thing is, when i type a whitespace, it is detected as a 'TEXT_ERROR'
token instead of a ws token. how do i correct the rules so that the ws
is handled correctly.

PRASHANT
From mail at martin-probst.com  Fri Mar 25 13:30:18 2005
From: mail at martin-probst.com (Martin Probst)
Date: Fri Mar 25 13:30:26 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <16964.18108.523402.975740@despot.non.net>
References: <dd3a065f0503242332bddd36e@mail.gmail.com>
	<20050325120103.174582902CA@new.knowspam.net>
	<16964.18108.523402.975740@despot.non.net>
Message-ID: <1111786218.27700.2.camel@narr.homeip.net>

Am Freitag, den 25.03.2005, 09:13 -0800 schrieb John D. Mitchell:

> > (...)[n,m]
> 
> Yes, I agree that it use the square brackets (ala math notation):
> 
> (...)+[n,m]
> 
> with the ,m part optional.

Uh, better make only the "m" optional, e.g.
> (...)+[n,]
Otherwise it might be mistaken as "exactly n times". Maybe this should
indeed be the case for (...)+[n]. Also (...)[1,] looks at least
understandable for me - maybe as an alias for (...)+.

Regards,
Martin

From nbsherid at secsme.org.au  Fri Mar 25 13:46:25 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Fri Mar 25 13:46:11 2005
Subject: [antlr-interest] problem matching any 'other' text
In-Reply-To: <41fed8f8050325124415f75996@mail.gmail.com>
Message-ID: <000201c53184$17d694b0$0500a8c0@nigel>


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Prashant Deva
> Sent: Saturday, 26 March 2005 7:45 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] problem matching any 'other' text
> 
> Hi,
> I have a little problem. I have this grammer (the antlr 2.7.xx
> grammar, that is) and i am trying to add a rule to match 'any other
> text'. basically text that is not matched by any rule.
> But there seems to be a conflict with it and Whitespace rule.
> Here are the rules-
> 
> TEXT_ERROR : (options{ greedy = false;}: .)+ ; //match any text not
> matched by any other rule
> 
> WS_LOOP
>        :       (       // grab as much WS as you can
>                        options {greedy=true;} :
>                WS |   COMMENT
>                )*
>        ;
> 
> Thing is, when i type a whitespace, it is detected as a 'TEXT_ERROR'
> token instead of a ws token. how do i correct the rules so that the ws
> is handled correctly.
> 


It looks like these are rules in the Lexer... In that case, you need to be
very careful about how tokens are generated. You can use protected Lexer
rules to avoid some conflicts, but not in all cases.

I assume your whitespace/newline rules are something like this:

WS: NL | ' ' | '\t';
protected NL: '\n' | '\r' { newline(); };  /* Simplified example */

If you want a rule that matches anything else, you can do this:

ANYTHINGELSE: ( ~(' ' | '\t' | '\n' | '\r') )+ ;

But this will conflict with any other lexer rules you write, because you
need to have at least the first few characters distinguishable (or use a
syntactic predicate). Otherwise, this rule could potentially grab any
character input up until the next white-space. Which I'm pretty sure you
don't want!

So what exactly are you trying to achieve?

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435
 


From johnm-antlr at non.net  Fri Mar 25 14:13:17 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Fri Mar 25 14:12:58 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <1111786218.27700.2.camel@narr.homeip.net>
References: <dd3a065f0503242332bddd36e@mail.gmail.com>
	<20050325120103.174582902CA@new.knowspam.net>
	<16964.18108.523402.975740@despot.non.net>
	<1111786218.27700.2.camel@narr.homeip.net>
Message-ID: <16964.36093.318835.894092@despot.non.net>

>>>>> "Martin" == Martin Probst <mail@martin-probst.com> writes:
[...]

>> (...)+[n,m]

>> with the ,m part optional.

> Uh, better make only the "m" optional, e.g.
>> (...)+[n,]
> Otherwise it might be mistaken as "exactly n times". Maybe this should
> indeed be the case for (...)+[n].

Yes, I meant that to mean 'exactly".  To be clear...

(XYZ)+[n,m]  means XYZ must occur anywhere from n through m times
(inclusive on both ends).

(XYZ)+[n]  means XYZ must occur exactly n times.

(XYZ)+[0,n]  should be an error telling people that they should b using:

(XYZ)*[0,n]  means 0..n occurrences.

(XYZ)*[n,m]  means 0, or n..m occurrences.

(XYZ)*[n]  means 0 or exactly n occurrences.

[Though, personally, I'm not sure that the last three cases are
justifiable to include in the Antlr core.  I'd like them for completeness
and consistency and would actually be using them but I know that I'm a
wacko. :-)]

> Also (...)[1,] looks at least understandable for me - maybe as an alias
> for (...)+.

Naw, if you're going to support an "at least" construct then you've gotta
make it more clearly distinct than that.  Something like:

(XYZ)+[n...]   or
(XYZ)+[n,...]   or
(XYZ)+[n,+]

Hope this helps,
		John
From jferguson at aptas.com  Fri Mar 25 14:17:26 2005
From: jferguson at aptas.com (Jamie Ferguson)
Date: Fri Mar 25 14:17:31 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <1111786218.27700.2.camel@narr.homeip.net>
References: <dd3a065f0503242332bddd36e@mail.gmail.com>
	<20050325120103.174582902CA@new.knowspam.net>
	<16964.18108.523402.975740@despot.non.net>
	<1111786218.27700.2.camel@narr.homeip.net>
Message-ID: <1111789046.5992.6.camel@dev7lt>

Presumably you'd get 'exactly n times' from (...)[n,n] or (...)+[n,n].



On Fri, 2005-03-25 at 22:30 +0100, Martin Probst wrote:

> Am Freitag, den 25.03.2005, 09:13 -0800 schrieb John D. Mitchell:
> 
> > > (...)[n,m]
> > 
> > Yes, I agree that it use the square brackets (ala math notation):
> > 
> > (...)+[n,m]
> > 
> > with the ,m part optional.
> 
> Uh, better make only the "m" optional, e.g.
> > (...)+[n,]
> Otherwise it might be mistaken as "exactly n times". Maybe this should
> indeed be the case for (...)+[n]. Also (...)[1,] looks at least
> understandable for me - maybe as an alias for (...)+.
> 
> Regards,
> Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050325/58301ff4/attachment.html
From jferguson at aptas.com  Fri Mar 25 14:38:12 2005
From: jferguson at aptas.com (Jamie Ferguson)
Date: Fri Mar 25 14:38:23 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <16964.36093.318835.894092@despot.non.net>
References: <dd3a065f0503242332bddd36e@mail.gmail.com>
	<20050325120103.174582902CA@new.knowspam.net>
	<16964.18108.523402.975740@despot.non.net>
	<1111786218.27700.2.camel@narr.homeip.net>
	<16964.36093.318835.894092@despot.non.net>
Message-ID: <1111790292.5992.8.camel@dev7lt>

Why do you consider these cases:

(XYZ)*[0,n]  means 0..n occurrences.
(XYZ)*[n,m]  means 0, or n..m occurrences.
(XYZ)*[n]  means 0 or exactly n occurrences.

not justifiable to include?

Jamie



On Fri, 2005-03-25 at 14:13 -0800, John D. Mitchell wrote:

> >>>>> "Martin" == Martin Probst <mail@martin-probst.com> writes:
> [...]
> 
> >> (...)+[n,m]
> 
> >> with the ,m part optional.
> 
> > Uh, better make only the "m" optional, e.g.
> >> (...)+[n,]
> > Otherwise it might be mistaken as "exactly n times". Maybe this should
> > indeed be the case for (...)+[n].
> 
> Yes, I meant that to mean 'exactly".  To be clear...
> 
> (XYZ)+[n,m]  means XYZ must occur anywhere from n through m times
> (inclusive on both ends).
> 
> (XYZ)+[n]  means XYZ must occur exactly n times.
> 
> (XYZ)+[0,n]  should be an error telling people that they should b using:
> 
> (XYZ)*[0,n]  means 0..n occurrences.
> 
> (XYZ)*[n,m]  means 0, or n..m occurrences.
> 
> (XYZ)*[n]  means 0 or exactly n occurrences.
> 
> [Though, personally, I'm not sure that the last three cases are
> justifiable to include in the Antlr core.  I'd like them for completeness
> and consistency and would actually be using them but I know that I'm a
> wacko. :-)]
> 
> > Also (...)[1,] looks at least understandable for me - maybe as an alias
> > for (...)+.
> 
> Naw, if you're going to support an "at least" construct then you've gotta
> make it more clearly distinct than that.  Something like:
> 
> (XYZ)+[n...]   or
> (XYZ)+[n,...]   or
> (XYZ)+[n,+]
> 
> Hope this helps,
> 		John
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050325/62516be3/attachment.html
From johnm-antlr at non.net  Fri Mar 25 15:27:29 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Fri Mar 25 15:27:09 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <1111790292.5992.8.camel@dev7lt>
References: <dd3a065f0503242332bddd36e@mail.gmail.com>
	<20050325120103.174582902CA@new.knowspam.net>
	<16964.18108.523402.975740@despot.non.net>
	<1111786218.27700.2.camel@narr.homeip.net>
	<16964.36093.318835.894092@despot.non.net>
	<1111790292.5992.8.camel@dev7lt>
Message-ID: <16964.40545.680718.600657@despot.non.net>

>>>>> "Jamie" == Jamie Ferguson <jferguson@aptas.com> writes:
[...]

> Why do you consider these cases:

> (XYZ)*[0,n] means 0..n occurrences.  (XYZ)*[n,m] means 0, or n..m
> occurrences.  (XYZ)*[n] means 0 or exactly n occurrences.

> not justifiable to include?

(A) Thanks for asking!

(B) To be clear, please note that I wrote that I wasn't sure whether they
are justifiable or not.  That's a good bit different from your restatement.

(C) Basically, it's easy to argue that they aren't used much and that they
are so close to the + variety that people would get weird behavior that
they wouldn't understand.  It's also arguable that the zero versus some
number of instances test should be done in a semantic pass against e.g.,
the AST rather than in the parser.

(D) As I mentioned, I think they are actually useful; would be
consistent and coherent with the * vs. + separation that we already have
now; and should be in lexers, parsers, and tree walkers.

Hope this makes sense,
			John

From jferguson at aptas.com  Fri Mar 25 15:50:44 2005
From: jferguson at aptas.com (Jamie Ferguson)
Date: Fri Mar 25 15:50:51 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <16964.40545.680718.600657@despot.non.net>
References: <dd3a065f0503242332bddd36e@mail.gmail.com>
	<20050325120103.174582902CA@new.knowspam.net>
	<16964.18108.523402.975740@despot.non.net>
	<1111786218.27700.2.camel@narr.homeip.net>
	<16964.36093.318835.894092@despot.non.net>
	<1111790292.5992.8.camel@dev7lt>
	<16964.40545.680718.600657@despot.non.net>
Message-ID: <1111794644.5992.27.camel@dev7lt>

Thanks for the clarification, and sorry for the incorrect restatement.  

In using Antlr I very quickly discovered that the domain I'm working in
is not something Antlr was designed to handle.  I'm replacing a parser I
had written myself -- my parser handled rules in a variation of EBNF,
and it worked very well.  Antlr is a bit more restrictive, and I've had
to write extra code to handle things which it does not expect (such as
my own token stream, which allows me to mark matched tokens and reuse
the stream).  It may be that my domain is too specialized to expect
everything from a parser such as Antlr, but I also feel that the ability
to have n-m occurrences, or 0-m, etc. is pretty generic and would be
extremely useful in Antlr, even if it wasn't used often by most people.
That's just my opinion, of course.  :)

Jamie



On Fri, 2005-03-25 at 15:27 -0800, John D. Mitchell wrote:

> >>>>> "Jamie" == Jamie Ferguson <jferguson@aptas.com> writes:
> [...]
> 
> > Why do you consider these cases:
> 
> > (XYZ)*[0,n] means 0..n occurrences.  (XYZ)*[n,m] means 0, or n..m
> > occurrences.  (XYZ)*[n] means 0 or exactly n occurrences.
> 
> > not justifiable to include?
> 
> (A) Thanks for asking!
> 
> (B) To be clear, please note that I wrote that I wasn't sure whether they
> are justifiable or not.  That's a good bit different from your restatement.
> 
> (C) Basically, it's easy to argue that they aren't used much and that they
> are so close to the + variety that people would get weird behavior that
> they wouldn't understand.  It's also arguable that the zero versus some
> number of instances test should be done in a semantic pass against e.g.,
> the AST rather than in the parser.
> 
> (D) As I mentioned, I think they are actually useful; would be
> consistent and coherent with the * vs. + separation that we already have
> now; and should be in lexers, parsers, and tree walkers.
> 
> Hope this makes sense,
> 			John
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050325/f005c69f/attachment-0001.html
From scott at javadude.com  Fri Mar 25 19:17:46 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Fri Mar 25 19:18:08 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <16964.18108.523402.975740@despot.non.net>
Message-ID: <20050326025451.A7F3B2901FD@new.knowspam.net>

No no no no... Silly!

I'm saying that instead of writing

  (foo)+[2,3]

It would just be

  (foo)[2,3]



As for parens, they should be treated the same way as any other expression
language (other than Lisp ;) -- optional to denote precedence where needed.

I hate typing extra stuff for no good reason. If there were a conflict I'd
agree they should be required, but as Einstein said "make it as simple as
possible, and no simpler".

Everyone deals fine with

  x = 3 + 4

Why make them type

  x = (3 + 4)

Unless they need the extra precedence indication?

Later,
-- Scott
 

> -----Original Message-----
> From: John D. Mitchell [mailto:johnm-antlr@non.net] 
> Sent: Friday, March 25, 2005 12:14 PM
> To: Scott Stanchfield
> Cc: 'antlr-interest Interest'
> Subject: RE: [antlr-interest] Can subrules be set to 'n-to-m'?
> 
> >>>>> "Scott" == Scott Stanchfield <scott@javadude.com> writes:
> [...]
> 
> > I think the "+" is redundant here...
> 
> So are you also suggesting that (ID)+ should only be written 
> as e.g. (ID)[1]?
> 
> That would be completely silly.  It looks like an indexed 
> access operation, it's different than the base case, etc.
> 
> 
> [...]
> 
> > (...)[n,m]
> 
> Yes, I agree that it use the square brackets (ala math notation):
> 
> (...)+[n,m]
> 
> with the ,m part optional.
> 
> 
> > Should suffice.
> 
> > BUT,
> 
> > While I'm at it, can (...) be optional for single-ref 
> repetition? For 
> > example, I'd love to be able to use:
> 
> I don't care for that.  Why?  Because it means that people 
> have to scan and understand two different forms for the same 
> fundamental meaning.  I.e., it's a Good Thing(tm) that the 
> parentheses make the loops stand out distinctively.
> 
> Take care,
> 	John



From scott at javadude.com  Fri Mar 25 19:21:34 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Fri Mar 25 19:21:36 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <16964.36093.318835.894092@despot.non.net>
Message-ID: <20050326025839.2AAA12901FA@new.knowspam.net>

I think these examples strengthen my point about how ugly the "+" is in
there...

In every regex language that I've seen that allows min/max cardinality, it's
something like

  foo{n,m}
  foo+
  foo*

But not

  foo+{n,m}

And they allow (but don't require) parens if you're matching a single
element.

C'mon -- let's be STANDARD about this. People have been using regex's for
years that work this way, so let's be similar.

(And to be clear, I understand the diff between parsing grammars and regexs
-- but there's no reason to have a different syntax if it's not necessary.)

<g>

-- Scott 

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of John 
> D. Mitchell
> Sent: Friday, March 25, 2005 5:13 PM
> To: Martin Probst
> Cc: 'antlr-interest Interest'
> Subject: RE: [antlr-interest] Can subrules be set to 'n-to-m'?
> 
> >>>>> "Martin" == Martin Probst <mail@martin-probst.com> writes:
> [...]
> 
> >> (...)+[n,m]
> 
> >> with the ,m part optional.
> 
> > Uh, better make only the "m" optional, e.g.
> >> (...)+[n,]
> > Otherwise it might be mistaken as "exactly n times". Maybe 
> this should 
> > indeed be the case for (...)+[n].
> 
> Yes, I meant that to mean 'exactly".  To be clear...
> 
> (XYZ)+[n,m]  means XYZ must occur anywhere from n through m 
> times (inclusive on both ends).
> 
> (XYZ)+[n]  means XYZ must occur exactly n times.
> 
> (XYZ)+[0,n]  should be an error telling people that they 
> should b using:
> 
> (XYZ)*[0,n]  means 0..n occurrences.
> 
> (XYZ)*[n,m]  means 0, or n..m occurrences.
> 
> (XYZ)*[n]  means 0 or exactly n occurrences.
> 
> [Though, personally, I'm not sure that the last three cases 
> are justifiable to include in the Antlr core.  I'd like them 
> for completeness and consistency and would actually be using 
> them but I know that I'm a wacko. :-)]
> 
> > Also (...)[1,] looks at least understandable for me - maybe as an 
> > alias for (...)+.
> 
> Naw, if you're going to support an "at least" construct then 
> you've gotta make it more clearly distinct than that.  Something like:
> 
> (XYZ)+[n...]   or
> (XYZ)+[n,...]   or
> (XYZ)+[n,+]
> 
> Hope this helps,
> 		John



From scott at javadude.com  Fri Mar 25 19:23:27 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Fri Mar 25 19:23:30 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <360078ccfe7344eef56d9cb6efdf6660@cs.usfca.edu>
Message-ID: <20050326030031.9F7782901FA@new.knowspam.net>

The server starting part is the trouble. You can set up eclipse to start a
plugin on startup, though, which would take care of it. However, if there's
already a server running, we'd need to pick a different port, and the server
needs the right classpath.

It's a bit of a pain... But not *too* bad

-- Scott 

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
> Sent: Friday, March 25, 2005 2:10 PM
> To: 'antlr-interest'
> Subject: Re: [antlr-interest] v3.0 debug interface
> 
> 
> On Mar 24, 2005, at 8:25 PM, Scott Stanchfield wrote:
> 
> >>> That said, an implementation in Eclipse would need to use
> >> socket-based
> >>> communication ;)
> >>
> >> Really?  Oh well; good to know.
> >
> > Considering that the plugin would be running in a different VM than 
> > the application doing the parsing... Then again, we could 
> set up the 
> > launcher to run it in the same VM as eclipse, but that's 
> not generally 
> > a good idea b/c you then inherit the classpath of the eclipse 
> > installation rather than what's set up in the project.
> 
> Yeah, I forgot about the classpath issue.  :(  How easy is 
> the RMI stuff?  Does it automatically start up a light server 
> to handle the method calls (for Java only stuff)?
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco 
> Creator, ANTLR Parser Generator, http://www.antlr.org 
> Cofounder, http://www.jguru.com
> 
> 



From scott at javadude.com  Fri Mar 25 19:30:22 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Fri Mar 25 19:30:25 2005
Subject: [antlr-interest] Variable definition annoyances
In-Reply-To: <66a5cd0b44f9b0e461bf62b6ae9e3fc9@cs.usfca.edu>
Message-ID: <20050326030726.C03E6290222@new.knowspam.net>

> Yep, that is really annoying.  I racked my brain over it for 
> a long time.  It turns out you don't need to define them 
> anymore.  You can do
> this:
> 
> start : r=rule { @r.i ... @r.s ... } ;

I pretty-much like, but can't we infer a variable for the rule? So it would
just be:

  start
    : rule { @rule.i ... } ;

You could easily do this by genning

  ResultType __rule = rule();
  __rule.i

Or some such thing.

For multiple refs. They could be numbered:

  start
    : rule otherRule rule { @rule[1].i ... @rule[2] ... }
    ;

Which could expand to 

  __rule_1 = rule();
  __otherRule = otherRule();
  __rule_2 = rule();
  ...


Though while we're at it, I'd really like to define a standard syntax that
can be for antlr replacement in action code with an obvious start and end,
which is why I suggested a paired delimiter like :: on either end. We'd just
need to pick something not super likely to appear in the action code...

> rule returns [int i, String s] : ... {@i=3; @s="foo";} ... ;
> 
> Cool eh?  Does this satisfy you?  It integrates very nicely 
> with the dynamically scoped attributes and trees etc...

Actually, why would we need to use the @ in that syntax? In ANTLR 2.0 with
the same syntax we just use i and s...  Wait a sec... Multiple return
values? Are you pushing them on a stack or something?

-- Scott



From scott at javadude.com  Fri Mar 25 19:31:51 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Fri Mar 25 19:31:54 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <eee80a80f81c63a241b91ace09c175dc@cs.usfca.edu>
Message-ID: <20050326030855.A02FF290224@new.knowspam.net>

What about consistency with so many prior art examples (like all the unix
regexs?)

This would make ANTLR much more approachable, IMHO.
-- Scott 

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
> Sent: Friday, March 25, 2005 1:53 PM
> To: 'antlr-interest Interest'
> Subject: Re: [antlr-interest] Can subrules be set to 'n-to-m'?
> 
> Hi.  Regarding ID+ versus (ID)+ I've gone back and forth on 
> this one so many times.  I like the brevity, but I really 
> like consistency too.  So far consistency has won out! :)
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco 
> Creator, ANTLR Parser Generator, http://www.antlr.org 
> Cofounder, http://www.jguru.com
> 
> 



From scott at javadude.com  Fri Mar 25 21:39:09 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Fri Mar 25 21:38:58 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <16964.56829.261506.516671@despot.non.net>
Message-ID: <20050326051557.71E902901A2@new.knowspam.net>

How is

  foo
    : (fee)+  (fie)*  (fo)+
    ;

More readable than

  foo
   : fee+  fie*  fo+ 
   ;

???

MAKE IT OPTIONAL!

If people feel the parens aid readability, they can type the damned things.
I'm sick of typing them when I shouldn't have to!

Never force *your* style on others like this. It's unnecessary and outright
self-important.

Read *my* comments -- it would be _more_ consistent to make them optional,
so they match how people use them in every regex language that people use...

-- Scott

> -----Original Message-----
> From: John D. Mitchell [mailto:johnm-advanced-java@non.net] 
> Sent: Friday, March 25, 2005 10:59 PM
> To: Scott Stanchfield
> Cc: 'antlr-interest Interest'
> Subject: RE: [antlr-interest] Can subrules be set to 'n-to-m'?
> 
> >>>>> "Scott" == Scott Stanchfield <scott@javadude.com> writes:
> [...]
> 
> > No no no no... Silly!
> 
> No, I understood you the first time.
> 
> Read the rest of the thread.  There are reasons for the + and 
> * and, as I've noted previously, the parens are important not 
> only for consistency but also for distinctiveness (i.e., readability).
> 
> Take care,
> 	John
> 



From johnm-antlr at non.net  Sat Mar 26 10:14:25 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Sat Mar 26 10:14:05 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <20050326051557.71E902901A2@new.knowspam.net>
References: <16964.56829.261506.516671@despot.non.net>
	<20050326051557.71E902901A2@new.knowspam.net>
Message-ID: <16965.42625.189274.467816@despot.non.net>

>>>>> "Scott" == Scott Stanchfield <scott@javadude.com> writes:
[...]

> Read *my* comments -- it would be _more_ consistent to make them
> optional, so they match how people use them in every regex language that
> people use...

You crack me up...

First, let's be clear that your argument is *against* consistency and for
adherence to the simplistifications of popularity.  [Try the dictionary for
more. :-)]

ANTLR is not some little hack tool.  Most people write regexps that are (1)
relatively short, (2) hard to read, and (3) hard to maintain.  ANTLR is
used to create complete grammars that can be 10s of thousands of lines
long.  True consistency and regularity make a huge difference in the
readability and maintainability by e.g., removing unnecessary variability.

Happy Easter,
		John
From parrt at cs.usfca.edu  Sat Mar 26 10:28:43 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Mar 26 10:28:46 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <20050326030855.A02FF290224@new.knowspam.net>
References: <20050326030855.A02FF290224@new.knowspam.net>
Message-ID: <b2688d69b42844675d1fc5d5c1da92b1@cs.usfca.edu>


On Mar 25, 2005, at 7:31 PM, Scott Stanchfield wrote:

> What about consistency with so many prior art examples (like all the 
> unix
> regexs?)

I mean self-consistent not consistent so much with other tools. :)

> This would make ANTLR much more approachable, IMHO.

"much"?  Probably not ;)

Ter



From parrt at cs.usfca.edu  Sat Mar 26 10:32:45 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Mar 26 10:32:48 2005
Subject: [antlr-interest] Variable definition annoyances
In-Reply-To: <20050326030726.C03E6290222@new.knowspam.net>
References: <20050326030726.C03E6290222@new.knowspam.net>
Message-ID: <7aad29c5a48cfff4dd0affcb590203ed@cs.usfca.edu>


On Mar 25, 2005, at 7:30 PM, Scott Stanchfield wrote:

>> Yep, that is really annoying.  I racked my brain over it for
>> a long time.  It turns out you don't need to define them
>> anymore.  You can do
>> this:
>>
>> start : r=rule { @r.i ... @r.s ... } ;
>
> I pretty-much like, but can't we infer a variable for the rule? So it 
> would
> just be:
>
>   start
>     : rule { @rule.i ... } ;

That is possible, yes.  I've considered it but you run into trouble 
with multiple refs...The $1 $2 thing died with yacc (i hoped) ;)  
Perhaps then you have to label.  I'll reconsider.

> You could easily do this by genning
>
>   ResultType __rule = rule();
>   __rule.i
>
> Or some such thing.
>
> For multiple refs. They could be numbered:
>
>   start
>     : rule otherRule rule { @rule[1].i ... @rule[2] ... }
>     ;

....

> Though while we're at it, I'd really like to define a standard syntax 
> that
> can be for antlr replacement in action code with an obvious start and 
> end,
> which is why I suggested a paired delimiter like :: on either end. 
> We'd just
> need to pick something not super likely to appear in the action code...

Why do you need the replacement thing?  So you could alter the code 
generator more easily?  I'm trying to avoid translation but I need to 
for @i.

>> rule returns [int i, String s] : ... {@i=3; @s="foo";} ... ;
>>
>> Cool eh?  Does this satisfy you?  It integrates very nicely
>> with the dynamically scoped attributes and trees etc...
>
> Actually, why would we need to use the @ in that syntax? In ANTLR 2.0 
> with
> the same syntax we just use i and s...

Because these suckers can be dynamically scoped and don't translate to 
simply i and s. :)

>  Wait a sec... Multiple return
> values? Are you pushing them on a stack or something?

Currently I'm using the method stack, but I'm going to change that to 
my own stack.  I push an aggregate with the return values as fields.

Ter



From parrt at cs.usfca.edu  Sat Mar 26 10:34:41 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Mar 26 10:34:44 2005
Subject: [antlr-interest] v3.0 debug interface
In-Reply-To: <20050326030031.9F7782901FA@new.knowspam.net>
References: <20050326030031.9F7782901FA@new.knowspam.net>
Message-ID: <855a757522afdc687c55860549b4e2d3@cs.usfca.edu>


On Mar 25, 2005, at 7:23 PM, Scott Stanchfield wrote:

> The server starting part is the trouble. You can set up eclipse to 
> start a
> plugin on startup, though, which would take care of it. However, if 
> there's
> already a server running, we'd need to pick a different port, and the 
> server
> needs the right classpath.
>
> It's a bit of a pain... But not *too* bad

I'm wondering if a pure socket interface to the debugger is the right 
answer.  No point in having Java do it differently unless I get a 
serious benefit.  The most obvious benefit would be an initial "ease of 
implementation while we are experimenting" benefit.  Hmm....

I meet Jean tomorrow to brainstorm.

Ter



From scott at javadude.com  Sat Mar 26 11:42:47 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Sat Mar 26 11:42:50 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <16965.42625.189274.467816@despot.non.net>
Message-ID: <20050326191939.708FE290A30@new.knowspam.net>

All I'm asking is to make it optional. People can always add the parens if
they feel it helps readability.

Just don't force it on everyone... 

It's like if Java required you to have {...} around if-statement bodies.
Some people prefer that, while others (like me) don't want the extra curly's
if not needed.

   if (user wants to do it without parens)
       letThemDoItWithOutParens();
   else {
       (beVeryVerboseAndDoItWithParens();)
   }

Why force verbosity???

Sheesh.
-- Scott 

> -----Original Message-----
> From: John D. Mitchell [mailto:johnm-antlr@non.net] 
> Sent: Saturday, March 26, 2005 1:14 PM
> To: Scott Stanchfield
> Cc: 'antlr-interest Interest'
> Subject: RE: [antlr-interest] Can subrules be set to 'n-to-m'?
> 
> >>>>> "Scott" == Scott Stanchfield <scott@javadude.com> writes:
> [...]
> 
> > Read *my* comments -- it would be _more_ consistent to make them 
> > optional, so they match how people use them in every regex language 
> > that people use...
> 
> You crack me up...
> 
> First, let's be clear that your argument is *against* 
> consistency and for adherence to the simplistifications of 
> popularity.  [Try the dictionary for more. :-)]
> 
> ANTLR is not some little hack tool.  Most people write 
> regexps that are (1) relatively short, (2) hard to read, and 
> (3) hard to maintain.  ANTLR is used to create complete 
> grammars that can be 10s of thousands of lines long.  True 
> consistency and regularity make a huge difference in the 
> readability and maintainability by e.g., removing unnecessary 
> variability.
> 
> Happy Easter,
> 		John



From scott at javadude.com  Sat Mar 26 11:55:15 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Sat Mar 26 11:55:23 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <b2688d69b42844675d1fc5d5c1da92b1@cs.usfca.edu>
Message-ID: <20050326193211.F035D290B16@new.knowspam.net>

When I first started demoing ANTLR to the folks I worked with at FGM, all
the extra parens made it LESS readable.

The two folks I had writing the grammar kept writing

    foo+
    foo*

and asking me why antlr was complaining. To which I responded "you've got to
put the terms in parens" to which they responded "why?" to which I responded
"because Ter says so".


> On Mar 25, 2005, at 7:31 PM, Scott Stanchfield wrote:
> 
> > What about consistency with so many prior art examples 
> (like all the 
> > unix
> > regexs?)
> 
> I mean self-consistent not consistent so much with other tools. :)

Expressions like

  2 + 3
  (2 + 3)
  2 + 3 + 4
  (2 + 3) + 4
  ((2 + 3) + 4)

Are **all** self-consistent. The parens are just optional and cane be
included if the writer feels it helps clarify things.

Consistency is in the definition. If the definition says "parens are used to
group one or more terms", it's totally consistent to write

  foo+
  (foo)+
  (foo fee)+

C'mon guys. EVERYONE knows how parens work. EVERYONE knows that you can
write

  2 + 3
  (2 + 3)
  ((2 + 3))
  (((2 + 3)))

And it all means the same thing.

What is the problem here??? Why do you insist on making me waste keystrokes
and make the grammar LESS clear?

Expressions have been written this way for 30 or more years in the computer
field, and well longer than that in mathematics.


PEOPLE GET IT. THEY DON'T NEED TO BE FORCED TO ADD EXTRA SYNTAX.

(Another reason why I did the XML simplification and requested the variable
simplification -- why type what can easily be generated?)


> > This would make ANTLR much more approachable, IMHO.
> 
> "much"?  Probably not ;)

Based on the experience I've had introducing people to ANTLR, yes. They ALL
ask about why the parens are needed.

Think about how many people use regular expressions. 

  a+b*

Rather than

  (a)+(b)*


Why insist on redefining common usage of + and *???

-- Scott



From scott at javadude.com  Sat Mar 26 12:03:26 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Sat Mar 26 12:03:30 2005
Subject: [antlr-interest] Variable definition annoyances
In-Reply-To: <7aad29c5a48cfff4dd0affcb590203ed@cs.usfca.edu>
Message-ID: <20050326194018.0DF272901A2@new.knowspam.net>

> > Though while we're at it, I'd really like to define a 
> standard syntax 
> > that can be for antlr replacement in action code with an 
> obvious start 
> > and end, which is why I suggested a paired delimiter like 
> :: on either 
> > end.
> > We'd just
> > need to pick something not super likely to appear in the 
> action code...
> 
> Why do you need the replacement thing?  So you could alter 
> the code generator more easily?  I'm trying to avoid 
> translation but I need to for @i.

I'm trying to come up with a common way that code generators could find
things they want to replace.

Code gens could allow "replacement plugins" to add function.

For example, in the XML support I wrote, I wanted to replace "@foo" with
attributes. I had to add this to the action processor, which basically makes
it all-or-nothing.

I'd love to be able to have a generalized action scanner that does the
following:

  for each delimited thing t in the action code
      for each replacement plugin p
          if p.wantsToReplace(t)
              replace t with p.getReplacement(thing)

Something like that. This would allow custom action code plugins,
simplifying the code generator.

For the XML support, I replace @foo with something like
    ((XMLToken)_startToken).getAttributes().get("foo")

Now to make this work right as a plugin, it would have to cooperate with the
code generator. In this example, I'd need to know the "_startToken" that
matched the xml token. So the action processing plugin would have to either
cooperate with the code gen, or be explicit like @startToken:foo. Have to
think ont to get it right.

> >> rule returns [int i, String s] : ... {@i=3; @s="foo";} ... ;
> >>
> >> Cool eh?  Does this satisfy you?  It integrates very 
> nicely with the 
> >> dynamically scoped attributes and trees etc...
> >
> > Actually, why would we need to use the @ in that syntax? In 
> ANTLR 2.0 
> > with the same syntax we just use i and s...
> 
> Because these suckers can be dynamically scoped and don't 
> translate to simply i and s. :)
> 
> >  Wait a sec... Multiple return
> > values? Are you pushing them on a stack or something?
> 
> Currently I'm using the method stack, but I'm going to change 
> that to my own stack.  I push an aggregate with the return 
> values as fields.

That's what I thought...

Later,
-- Scott



From richard at exaflop.org  Sat Mar 26 12:58:43 2005
From: richard at exaflop.org (Richard Matthias)
Date: Sat Mar 26 12:58:35 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <20050326193211.F035D290B16@new.knowspam.net>
Message-ID: <ECOWS01MDUOIQs2VK4r00091ccf@smtp-out1.blueyonder.co.uk>

>-----Original Message-----
>From: antlr-interest-bounces@antlr.org 
>[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Scott 
>Stanchfield
>Sent: 26 March 2005 19:55
>To: 'Terence Parr'; 'antlr-interest Interest'
>Subject: RE: [antlr-interest] Can subrules be set to 'n-to-m'?
>
>When I first started demoing ANTLR to the folks I worked with 
>at FGM, all the extra parens made it LESS readable.


As an example from the CSS grammar, because it doesn't allow spaces between
some tokens the lexer cannot just discard whitespace which means the parser
rules have to be peppered with (mostly optional) whitespace tokens. So you
get lots of rules like this:-

media
  : MEDIA_SYM (S)* medium ( COMMA (S)* medium )* LBRACE (S)* (ruleset)* "}"
//(S)*
  ;
  
medium
  : IDENT (S)*
  ;
  
page
  : PAGE_SYM (S)* (pseudo_page (S)* )?  LBRACE (S)* declaration ( ";" (S)*
declaration )* "}" //(S)*
  ;
  
pseudo_page
  : ":" IDENT
  ;
  
ruleset
  : selector ( COMMA (S)* selector )* LBRACE (S)* declaration ( ";" (S)*
declaration )* "}" //(S)*
  ;

Needless to say you have to be very careful where you place those (S)*
sub-rules to avoid non-determinism. Oh, the comments on the ends of the lines
are where the original yacc grammar had what I think are superfluous
whitespace swallowing sub-rules. Actually I'd like to open a discussion on
the best way to handle a language that needs to allow whitespace but only in
certain places. Like I could allow the lexer to drop whitespace but then make
everything where whitespace wasn't allowed into a single custom token, but I
don't know if ANTLR's lexer could handle that.

While we're on the subject of lexers, one of John D. Mitchell's emails on
this subject appears to denigrate the regex as something that's only useful
for simple operations or hacks. That may be so, but I'd kill for a lexer
right now that could handle common left prefixes without requiring syntactic
predicates (like I want a load of exception-based backtracking on every
token). There are some clever things you can do with a LL(k) based lexer but
there are also some very basic things that you can do with lex that are an
absolute nightmare with antlr. Hopefully the DFA-based LL(*) algorithm for
antlr3 will sort most of this. 

richard

From johnm-antlr at non.net  Sat Mar 26 13:42:34 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Sat Mar 26 13:42:14 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <ECOWS01MDUOIQs2VK4r00091ccf@smtp-out1.blueyonder.co.uk>
References: <20050326193211.F035D290B16@new.knowspam.net>
	<ECOWS01MDUOIQs2VK4r00091ccf@smtp-out1.blueyonder.co.uk>
Message-ID: <16965.55114.351052.663638@despot.non.net>

>>>>> "Richard" == Richard Matthias <richard@exaflop.org> writes:
[...]

> As an example from the CSS grammar, because it doesn't allow spaces
> between some tokens the lexer cannot just discard whitespace which means
> the parser rules have to be peppered with (mostly optional) whitespace
> tokens. So you get lots of rules like this:-

Yeah, that's usually a sign of a poorly designed language.  Alas, there's
all too many of those kinds of problems in the languages we have to deal
with. :-(


> Needless to say you have to be very careful where you place those (S)*
> sub-rules to avoid non-determinism. Oh, the comments on the ends of the
> lines are where the original yacc grammar had what I think are
> superfluous whitespace swallowing sub-rules. Actually I'd like to open a
> discussion on the best way to handle a language that needs to allow
> whitespace but only in certain places.

Well, besides "don't"? :-)

> Like I could allow the lexer to drop whitespace but then make everything
> where whitespace wasn't allowed into a single custom token, but I don't
> know if ANTLR's lexer could handle that.

Personally, I've never found a completely satisfactory solution using any
tool.

What I've done a couple of times in manually create a lexer that has just
enough understanding of the parse level to deal with the whitespace
vagarities.


> While we're on the subject of lexers, one of John D. Mitchell's emails on
> this subject appears to denigrate the regex as something that's only
> useful for simple operations or hacks.

Hmm... I can see how it could be read that way.  To be clear, at heart,
regexps are just another tool.  One of the big problems is that because of
their easy to get started with nature, people have gone well and truly
insane in their abuse of both the usage of regexps as well as
gerrymandering them to attempt to become full blown grammars.  That's
become a vicious cycle.

And yes, I too have written ridiculously impenetrable regexp abusing code
in a number of languages, including Perl. :-)

> That may be so, but I'd kill for a lexer right now that could handle
> common left prefixes without requiring syntactic predicates (like I want
> a load of exception-based backtracking on every token). There are some
> clever things you can do with a LL(k) based lexer but there are also some
> very basic things that you can do with lex that are an absolute nightmare
> with antlr. Hopefully the DFA-based LL(*) algorithm for antlr3 will sort
> most of this.

Yeah, the LL* stuff seems to kick ass on that sort of thing.

Do you have some good examples of some easy-using-lex constructs readily at
hand?  Those would be good for us to keep in mind as we beat on Antlr v3.

Thanks,
	John
From scott at javadude.com  Sat Mar 26 14:18:13 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Sat Mar 26 14:18:14 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <16965.55114.351052.663638@despot.non.net>
Message-ID: <20050326215502.7D9D4290359@new.knowspam.net>

Dude -- I think you're missing the point about regexps.

*Anything* can be abused. One could write an ANTLR parser in a few huge
rules with a bunch of subrules that are unreadable...

The point of the regexp mention is that
__many_people_are_used_to_the_syntax__. We don't need to shield people from
things they already know how to use and are more efficent using without
extra syntax.

-- Scott

> > While we're on the subject of lexers, one of John D. 
> Mitchell's emails 
> > on this subject appears to denigrate the regex as something that's 
> > only useful for simple operations or hacks.
> 
> Hmm... I can see how it could be read that way.  To be clear, 
> at heart, regexps are just another tool.  One of the big 
> problems is that because of their easy to get started with 
> nature, people have gone well and truly insane in their abuse 
> of both the usage of regexps as well as gerrymandering them 
> to attempt to become full blown grammars.  That's become a 
> vicious cycle.



From parrt at cs.usfca.edu  Sat Mar 26 17:48:35 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Mar 26 17:48:38 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <16965.55114.351052.663638@despot.non.net>
References: <20050326193211.F035D290B16@new.knowspam.net>
	<ECOWS01MDUOIQs2VK4r00091ccf@smtp-out1.blueyonder.co.uk>
	<16965.55114.351052.663638@despot.non.net>
Message-ID: <6db5379ca0b72985ef928badbd368550@cs.usfca.edu>


On Mar 26, 2005, at 1:42 PM, John D. Mitchell wrote:
>> That may be so, but I'd kill for a lexer right now that could handle
>> common left prefixes without requiring syntactic predicates (like I 
>> want
>> a load of exception-based backtracking on every token). There are some
>> clever things you can do with a LL(k) based lexer but there are also 
>> some
>> very basic things that you can do with lex that are an absolute 
>> nightmare
>> with antlr. Hopefully the DFA-based LL(*) algorithm for antlr3 will 
>> sort
>> most of this.
>
> Yeah, the LL* stuff seems to kick ass on that sort of thing.
>
> Do you have some good examples of some easy-using-lex constructs 
> readily at
> hand?  Those would be good for us to keep in mind as we beat on Antlr 
> v3.

FYI, for the new java.g used in version 3.0 antlr, I just took the 
language spec's definition of float etc... and stuck in.  ANTLR said 
"ok" :)  Hooray!

Ter



From tribble at e-dean.com  Sun Mar 27 09:38:54 2005
From: tribble at e-dean.com (Dean Tribble)
Date: Sun Mar 27 09:38:08 2005
Subject: [antlr-interest] Lexer switching
In-Reply-To: <423E9580.5070400@web.de>
References: <423E9580.5070400@web.de>
Message-ID: <4246EFAE.2030600@e-dean.com>

Summary: I'm rebuilding the E grammar in antlr 
(http://www.erights.org/e-impls/e-on-e/egrammar/).  It contains a few 
occurrences of *recursively* nesting grammars, for which the current 
lexer switching is inadequate.  I finally figured out a different and 
simpler way to manage switching lexers that addresses this problem.

Context: E is an expression language, in which one of the expressions is 
a "quasi-literal".  A quasi-literal is similar to (but more general 
than) a Perl string (or a Lisp quasi-list) in that it can contain 
$-escaped expressions in E.  Because these are arbitrary E expressions, 
they can recursively contain further quasi-literals.  A couple of examples:

    print(`The value of X is $x`)

    print(`Name: ${if (title.isEmpty()) { `${name}'s book` } else 
{title}} date: $date`

Backquote introduces a quasi-literal (and causes a switch to the 
quasi-lexer).  Within a quasi-literal, '$' escapes a nested expression 
(and switches to the E lexer).  If it is just an identifier, then no 
braces are required.  If it is a more complex expression, then braces 
are required.  Note, however, that since E also uses braces, simply 
encountering a brace is not the right reason to switch back to the quasi 
lexer from the E lexer (and thus the lexer by itself cannot manage the 
transitions back).  BTW The more general aspects of quasi-literals are 
outside the parsing realm, so I won't go into those, but they are really 
cool :-)

I initially implemented all this with multiple parsers and corresponding 
grammars, and blithely switched lexers in the parser productions.  This 
did not work at all because of lookahead and predicates:  lexer actions 
to switch the current lexer will happen during parser lookahead (whether 
it was triggered by a parser predicate or not), whereas parser actions 
by default do not.  Even if you make them happen in predicates, they 
still happen when the parser gets to the relevant token, which because 
of lookahead, is already after the wrong (unswitched) lexer has already 
consumed tokens past where you wanted to switch.  Thus, all lexer 
switching needs to happen purely within lexers.  There is not sufficient 
support to do that if the exit of the nested lexer must be driven by the 
grammar (and thus the parser) rather than by simple lexing.

After several rounds, it seems that implementing lexer switching as a 
TokenStream  (via TokenStreamSelector) is not the right place.  It is 
less accessible to the lexer or parser, cannot participate in the 
lookahead process, has less access to the line numbers, etc.  I instead 
merged that concept with the TokenBuffer, so a TokenMultiBuffer can 
select from different streams of tokens.  The class supports a stack of 
nesting lexers.  It also directly supports enter and exit (e.g., of 
braces) so that a nested grammar can be exited when encountering a 
close-"brace" that does not match an open brace in that grammar.  I had 
started support for participation in the parser predicates, but by then 
had figured that brace management was enough to keep all lexer switching 
under control of the lexers, so that semi-support is removed.

Even without the support for the parser changing the lexer, I found that 
using a special TokenBuffer to handle lexer changing was simpler than 
using a stream selector.  This is mainly because it adds no layers in 
the process of getting tokens, so debugging is easier.  Because it does 
not add per-token overhead, it could perfectly well be *always* wired 
into the framework.  Then, having multiple lexers would be special, but 
would not be an awkward integration.  In an informal sampling of 
languages, I believe that multiple-lexers will be increasing, and 
already would have been used more if it was more integral.  Thus, I'd 
like to see the token-buffer by default support it (fold the 
TokenMultiBuffer support into TokenBuffer), and make it so that adding a 
lexer will arrange for that lexer to have the shared input state 
(instead of having to arrange that explicitly).  This will also mean 
that lexers will by default be able to switch lexers, and you won't need 
to add language-specific code to do so (e.g., add a setSelector method, 
etc.).
-------------- next part --------------
package antlr;

/**
 * Combines and interleaves multiple streams of tokens together into a single stream.
 * Actions during token recognition change the token stream to be provided.  This
 * simultaneously supports mark/rewind across changes in the token stream, recursive
 * use of token streams (for languages that nest in each other), and tracking of
 * such nesting (e.g., if a nested language is terminated by a bracket that is also
 * used in an outer language).
 *
 * <p>
 *
 * @author Dean Tribble
 *
 * Software rights: http://www.antlr.org/license.html
 *
 * @see antlr.TokenBuffer
 * @see antlr.Token
 * @see antlr.TokenQueue
 */
public class TokenMultiBuffer extends TokenBuffer {

    protected String[] myNames;
    protected TokenStream[] myInputs;
    protected MarkRecord myLayers = null;

    protected int myEnterCount = 0;

    /** Create a token buffer */
    public TokenMultiBuffer(TokenStream input_) {
        this(new String[]{"base"}, new TokenStream[]{input_});
    }

    /** Create a token buffer will multiple token streams. */
    public TokenMultiBuffer(String[] names, TokenStream[] inputs) {
        myNames = names;
        myInputs = inputs;
        input = myInputs[0];
    }

    /** Nest into a named lexer. */
    public void push(String name) {
        myLayers = new MarkRecord(myEnterCount, input, myLayers);
        myEnterCount = 0;
        select(findInput(name));
        trace("push");
    }

    /** Exit the current lexer and continue lexing with the outer lexer. */
    public void pop() {
        trace("pop");
        //TODO check for myNesting==0?
        input = myLayers.stream;
        myEnterCount = myLayers.enterCount;
        myLayers = myLayers.next;
    }

    /** Record that we entered the kind of brace that will cause this lexer to exit.
     * This could be called when parsing multiple brace-typed, or generalized to enforce
     * specific matching (e.g., so that if both paren and bracket were supported, it
     * would throw a parsing exception if the matching brace was not on the top of the
     * brace stack). */
    public void enterBrace() {
        trace("enter");
        myEnterCount++;
    }
    /** Exit from a nested brace.  If the corresponding open brace was not lexed by this lexer
     * (or more specifically, by the lexing of this layer if the grammars recursively nest), then
     * this lexer is also finished lexing, so pop it and continue lexing in the outer lexer.
     */
    public void exitBrace() {
        trace("exit");
        if (myEnterCount <= 0) {
            pop();
        } else {
            myEnterCount--;
        }
    }

    public void select(int streamNum) {
        input = myInputs[streamNum];
    }
    public void select(String name) {
        input = myInputs[findInput(name)];
        trace("select");
    }
    private int findInput(String name) {
        for (int i = 0, max = myInputs.length; i<max; i++) {
            if (myNames[i].equals(name)) {
                return i;
            }
        }
        return -1; //not a great default, but ensures an error
    }
    private String findName(TokenStream ts) {
        for (int i = 0, max = myInputs.length; i<max; i++) {
            if (myInputs[i] == ts) {
                return myNames[i];
            }
        }
        return "unknown";
    }

    private class MarkRecord {
        final int enterCount;
        final TokenStream stream;
        final MarkRecord next;
        MarkRecord(int count, TokenStream s, MarkRecord n) {
            enterCount = count;
            stream = s;
            next = n;
        }
    };

    private void trace(String header) {
//        System.err.print(header + " [" + findName(input));
//        for (MarkRecord r = myLayers; r != null; r = r.next) {
//            System.err.print(", " + findName(r.stream));
//        }
//        System.err.println("]");
//        Thread.dumpStack();
    }

}
From mortench2004 at yahoo.dk  Sun Mar 27 13:47:03 2005
From: mortench2004 at yahoo.dk (M C)
Date: Sun Mar 27 13:47:05 2005
Subject: [antlr-interest] To Ter and others: Observations on performance
	problems and how Antlr could be made faster
Message-ID: <20050327214703.83405.qmail@web25102.mail.ukl.yahoo.com>

I have been looking briefly at the source-code for
Antlr with an eye towards general implementation
performance issues (looking at java coding issues only
- not algorithms). I have made some observations that
I hope the Antlr implementers will think about.

1) Some possible uses of Antlr are not compilers but
interactive applications. High performance
applications may need to parse distinct texts a LOT(!)
of times (for instance the query parser for a search
engine). For such applications concurrency and reuse
of objects can be very important. Currently, ANTLR
parsers are not multi-thread safe and object reuse is
hard to do (not explicitly supported). Generation of
reusable MT-safe parsers/lexers would be a great
(optional) feature.

2) Some classes like antlr.Parser and
antlr.CharScanner use inefficient legacy java classes
like tokenTypeToASTClassMap?s HashTable) instead of
HashMap (unnecessary synchronization for a
parser/scanner that is not thread-safe anyway). 

3) The current API is targeted for large files but
does not allow for efficient parsing of small strings
like ?x AND NOT (y AND z OR w)? compared to a
hand-written parser. Antlr should generate a lexer
with a constructor that accepts a string (or even
better a CharSequence) so that the overhead of a
StringReader can be avoided for such cases.

3) Antlr should try to limit the number of Strings
that it generates or forces the antlr-user to generate
because of API limitations. In that relation, for JDK
1.4+, CharSequence can sometimes used as a very fast
String replacement. (BTW: I did not find any uses of
StringBuffer but for JDK 1.5+ it should be replaced
with StringBuilder).

Sincerely,
Morten Christensen
From alexsedow at mail.ru  Sun Mar 27 21:43:26 2005
From: alexsedow at mail.ru (Alex Sedow)
Date: Sun Mar 27 21:43:30 2005
Subject: [antlr-interest] To Ter and others: Observations on
	performanceproblems and how Antlr could be made faster
References: <20050327214703.83405.qmail@web25102.mail.ukl.yahoo.com>
Message-ID: <003401c53359$10a657d0$07060b0a@home>

Hello Morten!

1. I more and more thinking about introduction taboo on ANTLR2-perfomance 
comments until ANTLR3 is not coming. Wanna perfomance - look at my 
high-perfomance C# parser (www.csharpparser.com), 50 Mb/s AST generation is 
real!

2. It is too complicated to optimize parser for fast processing small files. 
For example, my parser on small set of small files (totally less than 5 Kb) 
works 6-7 slower than on big set of files (about 10 Mb). For your string 
example, I believe parser will be about 100-1000 times slower.

3. Multi-threading is the next step for improving perfomance. But fast 
multi-treading algorithms is always are platform and language-dependent. And 
it is too difficult implement fast common multi-threading algorithms and 
data structures for all basic ANTLR-supported languages (Java, C++, C#). But 
for one concrete language (C++) and platform (Windows) develop is not so 
difficult. I think for multi-threading support it is enough implement only 
multi-threading allocator and hash-table. Also I think that parser needs 
only partially thread-safe algorithms, full thread-safe algorithms need only 
for source transformations. I'm interesting in cooperation to develop it.

4. Also see nice Herb Sutter's article 
http://www.gotw.ca/publications/concurrency-ddj.htm.

--
Alex Sedow
alex@csharpparser.com


>I have been looking briefly at the source-code for
> Antlr with an eye towards general implementation
> performance issues (looking at java coding issues only
> - not algorithms). I have made some observations that
> I hope the Antlr implementers will think about.
>
> 1) Some possible uses of Antlr are not compilers but
> interactive applications. High performance
> applications may need to parse distinct texts a LOT(!)
> of times (for instance the query parser for a search
> engine). For such applications concurrency and reuse
> of objects can be very important. Currently, ANTLR
> parsers are not multi-thread safe and object reuse is
> hard to do (not explicitly supported). Generation of
> reusable MT-safe parsers/lexers would be a great
> (optional) feature.
>
> 2) Some classes like antlr.Parser and
> antlr.CharScanner use inefficient legacy java classes
> like tokenTypeToASTClassMap's HashTable) instead of
> HashMap (unnecessary synchronization for a
> parser/scanner that is not thread-safe anyway).
>
> 3) The current API is targeted for large files but
> does not allow for efficient parsing of small strings
> like "x AND NOT (y AND z OR w)" compared to a
> hand-written parser. Antlr should generate a lexer
> with a constructor that accepts a string (or even
> better a CharSequence) so that the overhead of a
> StringReader can be avoided for such cases.
>
> 3) Antlr should try to limit the number of Strings
> that it generates or forces the antlr-user to generate
> because of API limitations. In that relation, for JDK
> 1.4+, CharSequence can sometimes used as a very fast
> String replacement. (BTW: I did not find any uses of
> StringBuffer but for JDK 1.5+ it should be replaced
> with StringBuilder).
>
> Sincerely,
> Morten Christensen
> 

From gauldong at gmail.com  Mon Mar 28 03:14:29 2005
From: gauldong at gmail.com (Hendy Irawan)
Date: Mon Mar 28 03:14:31 2005
Subject: [antlr-interest] ANTLR C# chokes on ""
Message-ID: <3c4c8fa605032803147d95f2d7@mail.gmail.com>

Hi!

Running the ANTLR C# lexer and feeding it nothing gives the following:

Aphrodox.Test.DocBlockParserTest.Empty :
System.ArgumentOutOfRangeException : Index was out of range.  Must be
non-negative and less than the size of the collection.
Parameter name: index

   at System.Collections.ArrayList.get_Item(Int32 index)
   at antlr.InputBuffer.LA(Int32 i)
   at antlr.CharScanner..ctor(LexerSharedInputState sharedState)
   at Aphrodox.DocBlock.DocBlockLexer..ctor(LexerSharedInputState
state) in d:\c4\vcs\aphrodox\docblock\docblocklexer.cs:line 53
   at Aphrodox.DocBlock.DocBlockLexer..ctor(InputBuffer ib) in
d:\c4\vcs\aphrodox\docblock\docblocklexer.cs:line 49
   at Aphrodox.DocBlock.DocBlockLexer..ctor(TextReader r) in
d:\c4\vcs\aphrodox\docblock\docblocklexer.cs:line 45
   at Aphrodox.Test.DocBlockParserTest.Empty() in
d:\c4\vcs\aphrodox\test\aphrodoxtest\docblockparsertest.cs:line 16

It happens even on all the examples. Just run the generated program,
however don't type anything just type Ctrl+Z. All examples will give
similar error.

Is this the expected behavior? I don't see that exception listed in
the "throws" list though...
-- 
Hendy Irawan - http://dev.gauldong.net - GaulDong Developer Center
From gauldong at gmail.com  Mon Mar 28 04:02:10 2005
From: gauldong at gmail.com (Hendy Irawan)
Date: Mon Mar 28 04:02:13 2005
Subject: [antlr-interest] Importing grammars and Unicode character classes
Message-ID: <3c4c8fa60503280402cfe223f@mail.gmail.com>

Hi!

Is there a feature to import "include files" inside grammars? which
works exactly like C's #include ? It'd be great to separate commonly
used token definitions sometimes in several files (for example,
Unicode character classes).

While ANTLR still has no support for Unicode character classes... has
anyone already have/written grammar definitions for (any of) them? The
most commonly used would probably be Unicode letters (which can be any
letter in any language), and stuff like that...

Thanks...

-- 
Hendy Irawan - http://dev.gauldong.net - GaulDong Developer Center
From gauldong at gmail.com  Mon Mar 28 05:13:40 2005
From: gauldong at gmail.com (Hendy Irawan)
Date: Mon Mar 28 05:13:43 2005
Subject: [antlr-interest] Syntactic predicates require "k=x" ?
Message-ID: <3c4c8fa6050328051356b81f7e@mail.gmail.com>

Hi!

I was wondering:

NEWLINE : ("\r\n") => "\r\n" | '\r' | '\n';

Does that syntactic predicate ("\r\n") works if I don't specify k=2 in options?
It seems that it doesn't (it only checks for '\r' which is k=1) but I
can't be sure... help me please...

The FAQ says that I can have infinite lookahead using syntactic
predicates, yet I have to specify k ???? (*confused*)

-- 
Hendy Irawan - http://dev.gauldong.net - GaulDong Developer Center
From mmoktali at bphx.dk  Mon Mar 28 05:33:02 2005
From: mmoktali at bphx.dk (Meena Moktali)
Date: Mon Mar 28 05:34:17 2005
Subject: [antlr-interest] Print the actual code after building AST.
Message-ID: <389DFA1991602B4DB5E5691B00929EB904FCCF@bpsdk910.bphx.dk>

hi,
I have built a tree parser for a sample code.Thanks for your suggestions Bryan ,I have corrected the mistakes.I want to print the code after adding actions to it.
As shown in my parser class ,I am indenting the 'map statements' .Now I want to print the resultant code.
How do i do it?I saw the java.g ...but it does not print the whole inputstream after parsing.
The parser and tree walker are as shown below.
 
class MParser extends Parser;
options  {
  buildAST=true;
  k=2;
  }
 
block       : (statement)*   ;
statement:    "if"^ expr (statement)+
                   ("else" statement)?
                   "endif" 
                   | m:"map"^ vfield "to" vfield  {m.setColumn(m.getColumn()+2);}   .....will I achieve indentation with this?? 
              ;
 
expr      : vfield(COMPARE^ vfield)*;
 
vfield      : IDENT(("in"|"of") IDENT)*;
 
class MTree extends TreeParser;
 
block           : (statement)*   ; 
statement    : #("if" expr (statement)+ ("else" statement)? "endif")|#("map" vfld "to" vfld);
expr            : #(COMPARE vfld vfld);
vfld              : IDENT(("in"|"of") IDENT)*;
 
class MLexer extends Lexer;
 
options  { k=2;
  testLiterals=true;
  }
 
COMPARE   : ('='|'<'|'>');
 
IDENT          : ('a'..'z'|'A'..'Z'|'0'..'9'|'\''|'_')*;
 
WS  : (' '
  | '\r''\n'
  | '\t'
  | '\n'
  | '\r')
  { _ttype = Token.SKIP; }
  ;
-------------------------------------------------------------------------------------------------------------
Sample code is as follows:
 
if PSTG_ISO4217_VAL of CURRENCY_EXCHANGE of ACCTG_TRANS_PD_WD
                                of ACCTG_TRANS_PD_W 
   = SUCCESS in STD_RTRN_CD
    map CURRENCY_SPACE in KSPS4_MSG
       to TEXT_CODE of STD_MSG_PARM_V of STD_MSG_CLIENT_SRV_I
    map 'CURRENCY_EXCHANGE'
       to VIEW_LONG_NAME of STD_MSG_CLIENT_SRV_I
    map BUSINESS_ERROR in STD_RTRN_CD
       to L_RTRN_CD
    map 'PSTG_ISO4217_VAL'
       to FIELD_LONG_NAME of STD_MSG_CLIENT_SRV_I
    map 'AO6IMF'
       to MESSAGE_SET_NAME of STD_MSG_PARM_V of STD_MSG_CLIENT_SRV_I
    map CURRENCY_SPACE in KSPS4_MSG
       to TEXT_CODE of STD_MSG_PARM_V of STD_MSG_CLIENT_SRV_I
  else
    map CURRENCY_SPACE in KSPS4_MSG
       to TEXT_CODE of STD_MSG_PARM_V of STD_MSG_CLIENT_SRV_I
 
  endif
 
Thanks,
Meena.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050328/6d7f7a33/attachment.html
From demakov at ispras.ru  Mon Mar 28 06:05:58 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Mar 28 06:06:06 2005
Subject: [antlr-interest] Syntactic predicates require "k=x" ?
References: <3c4c8fa6050328051356b81f7e@mail.gmail.com>
Message-ID: <01f401c5339f$4401ea40$8cc79553@marlboro>

Hi,

> I was wondering:
> 
> NEWLINE : ("\r\n") => "\r\n" | '\r' | '\n';
> 
> Does that syntactic predicate ("\r\n") works if I don't specify k=2 in options?
> It seems that it doesn't (it only checks for '\r' which is k=1) but I
> can't be sure... help me please...
> 
> The FAQ says that I can have infinite lookahead using syntactic
> predicates, yet I have to specify k ???? (*confused*)

I see the following generated code:

  boolean synPredMatched16 = false;
  if (((LA(1)=='\r'))) {
   int _m16 = mark();
   synPredMatched16 = true;
   inputState.guessing++;
   try {
    {
    match("\r\n");
    }
   }
   catch (RecognitionException pe) {
    synPredMatched16 = false;
   }
   rewind(_m16);
   inputState.guessing--;
  }
  if ( synPredMatched16 ) {
   match("\r\n");
  }

if LA(1) is '\r', antlr enters guess mode (inputState.guessing++)
and tries to match "\r\n". If it is successful, antlr set flag (synPredMatched16)
indicating that predicate successfully matched
and (in any case) leaves guess mode (with rewind to position before '\r').
After that antlr checks if predicate flag is true and
match "\r\n".

You need to specify lookahead depth to generate this code.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


From parrt at cs.usfca.edu  Mon Mar 28 10:35:33 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Mar 28 10:28:30 2005
Subject: [antlr-interest] Syntactic predicates require "k=x" ?
In-Reply-To: <01f401c5339f$4401ea40$8cc79553@marlboro>
References: <3c4c8fa6050328051356b81f7e@mail.gmail.com>
	<01f401c5339f$4401ea40$8cc79553@marlboro>
Message-ID: <3de300287061a388efbff2b4876976cb@cs.usfca.edu>


On Mar 28, 2005, at 6:05 AM, Alexey Demakov wrote:

> Hi,
>
>> I was wondering:
>>
>> NEWLINE : ("\r\n") => "\r\n" | '\r' | '\n';
>>
>> Does that syntactic predicate ("\r\n") works if I don't specify k=2 
>> in options?
>> It seems that it doesn't (it only checks for '\r' which is k=1) but I
>> can't be sure... help me please...
>>
>> The FAQ says that I can have infinite lookahead using syntactic
>> predicates, yet I have to specify k ???? (*confused*)

That is correct.  No need to specify lookahead (it could be arbitrarily 
large; i.e., not fixed k).

> I see the following generated code:
>
>   boolean synPredMatched16 = false;
>   if (((LA(1)=='\r'))) {
>    int _m16 = mark();
>    synPredMatched16 = true;
>    inputState.guessing++;
>    try {
>     {
>     match("\r\n");
>     }
>    }
>    catch (RecognitionException pe) {
>     synPredMatched16 = false;
>    }
>    rewind(_m16);
>    inputState.guessing--;
>   }
>   if ( synPredMatched16 ) {
>    match("\r\n");
>   }
>
> if LA(1) is '\r', antlr enters guess mode (inputState.guessing++)

Just as an efficiency; it tries your fixed lookahead first to avoid 
unnecessary backtracking.  If the fixed lookahead is consistent it will 
attempt to match the predicate regardless of lookahead depth.

My guess is that you have another issue entirely ;)  What, I can't 
guess, but the predicate should definitely work :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From parrt at cs.usfca.edu  Mon Mar 28 11:12:25 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Mar 28 11:05:22 2005
Subject: [antlr-interest] should we create stringtemplate-interest list?
Message-ID: <b0bf52dd6448690e60f31d6af87b4d43@cs.usfca.edu>

Howdy,

Do we have enough folks playing with StringTemplate to create a 
separate list?  It's low overhead to set up / maintain.  Anybody care 
to comment?

BTW, Google search for "java template engine" has stringtemplate.org 
listed first. :)   (oh and "parser generator" has antlr come up first). 
:)  Heh heh heh

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From mrada at catalina-inter.net  Sun Mar 27 21:14:33 2005
From: mrada at catalina-inter.net (Chris Sparks)
Date: Mon Mar 28 11:40:26 2005
Subject: [antlr-interest] Cygwin and 2.7.5 of Antlr
Message-ID: <424792B9.1020501@catalina-inter.net>

Hi (Hopefully Tom Verbeure),

I have followed the instructions provided by Tom to get Antlr to work 
under cygwin and I am stuck at instruction 7 of the first part (the 
compiling everything part).  I did receive warnings as he stated, 
however, it stopped based on some errors and here they are:

antlr/debug/misc/JTreeASTPanel.java: In class 
`antlr.debug.misc.JTreeASTPanel':
antlr/debug/misc/JTreeASTPanel.java: In constructor 
`(javax.swing.tree.TreeModel,javax.swing.event.TreeSelectionListener)':
antlr/debug/misc/JTreeASTPanel.java:23: error: class 'javax.swing.JTree' 
has no method named '<init>' matching signature 
'(Ljavax/swing/tree/TreeModel;)V'
antlr/debug/misc/JTreeASTPanel.java:23: error: expected type 
'javax.swing.JTree' but stack contains 'void'
antlr/debug/misc/JTreeASTPanel.java:23: error: expected type 
'antlr.debug.misc.JTreeASTPanel' but stack contains 'javax.swing.JTree'
antlr/debug/misc/JTreeASTPanel.java:23: confused by earlier errors, 
bailing out

So any help is appreciated.

What I am working, in case anyone has done this before and can save me 
some time, is a C++ to Ada 95 bindings/translation tool.

Chris Sparks
From johnm-antlr at non.net  Mon Mar 28 13:57:26 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Mar 28 13:57:06 2005
Subject: [antlr-interest] To Ter and others: Observations on performance
	problems and how Antlr could be made faster
In-Reply-To: <20050327214703.83405.qmail@web25102.mail.ukl.yahoo.com>
References: <20050327214703.83405.qmail@web25102.mail.ukl.yahoo.com>
Message-ID: <16968.32198.869496.486956@despot.non.net>

>>>>> "M" == M C <mortench2004@yahoo.dk> writes:
[...]

> 1) Some possible uses of Antlr are not compilers but interactive
> applications. High performance applications may need to parse distinct
> texts a LOT(!)  of times (for instance the query parser for a search
> engine). For such applications concurrency and reuse of objects can be
> very important. Currently, ANTLR parsers are not multi-thread safe and
> object reuse is hard to do (not explicitly supported). Generation of
> reusable MT-safe parsers/lexers would be a great (optional) feature.

The notion has been that you can instantiate as many instances of your
lexer/parser/walker that you want to get the concurrency that you desire.


> 2) Some classes like antlr.Parser and antlr.CharScanner use inefficient
> legacy java classes like tokenTypeToASTClassMaps HashTable) instead
> of HashMap (unnecessary synchronization for a parser/scanner that is not
> thread-safe anyway).

That will be easier to change in Antlr v3 both because of the rewrite as
well as the use of StringTemplates for the code generation.


> 3) The current API is targeted for large files but does not allow for
> efficient parsing of small strings like x AND NOT (y AND z OR w)
> compared to a hand-written parser. Antlr should generate a lexer with a
> constructor that accepts a string (or even better a CharSequence) so that
> the overhead of a StringReader can be avoided for such cases.

> 3) Antlr should try to limit the number of Strings that it generates or
> forces the antlr-user to generate because of API limitations. In that
> relation, for JDK 1.4+, CharSequence can sometimes used as a very fast
> String replacement. (BTW: I did not find any uses of StringBuffer but for
> JDK 1.5+ it should be replaced with StringBuilder).

Antlr v3 does a lot to improve efficiency in not generating excess
garbage, not copying data unnecessarily, and precision in touching e.g. LA
to make decisions.

Hope this helps,
		John
From monty at codetransform.com  Mon Mar 28 12:18:49 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Mar 28 15:18:54 2005
Subject: [antlr-interest] should we create stringtemplate-interest list?
In-Reply-To: <b0bf52dd6448690e60f31d6af87b4d43@cs.usfca.edu>
References: <b0bf52dd6448690e60f31d6af87b4d43@cs.usfca.edu>
Message-ID: <424866A9.4020504@codetransform.com>

Terence Parr wrote:
> Howdy,
> 
> Do we have enough folks playing with StringTemplate to create a separate 
> list?  It's low overhead to set up / maintain.  Anybody care to comment?

Might as well, it is a bit of cognitive dissonance to see StringTemplate 
questions posted here.

> BTW, Google search for "java template engine" has stringtemplate.org 
> listed first. :)   (oh and "parser generator" has antlr come up first). 
> :)  Heh heh heh

Gee, all I come up first for is "spore paper decay".  Well, at least I'm 
the king of that little Google hill :)

Monty
www.codetransform.com
From shalini.sh at gmail.com  Tue Mar 29 00:01:03 2005
From: shalini.sh at gmail.com (Shalini Sharma)
Date: Tue Mar 29 00:01:07 2005
Subject: [antlr-interest] should we create stringtemplate-interest list?
In-Reply-To: <424866A9.4020504@codetransform.com>
References: <b0bf52dd6448690e60f31d6af87b4d43@cs.usfca.edu>
	<424866A9.4020504@codetransform.com>
Message-ID: <696675100503290001148da2aa@mail.gmail.com>

how can extension of header be specified while generating .cpp 
and .h files . i want the header generated to be .h instead of .hpp




On Mon, 28 Mar 2005 15:18:49 -0500, Monty Zukowski
<monty@codetransform.com> wrote:
> Terence Parr wrote:
> > Howdy,
> >
> > Do we have enough folks playing with StringTemplate to create a separate
> > list?  It's low overhead to set up / maintain.  Anybody care to comment?
> 
> Might as well, it is a bit of cognitive dissonance to see StringTemplate
> questions posted here.
> 
> > BTW, Google search for "java template engine" has stringtemplate.org
> > listed first. :)   (oh and "parser generator" has antlr come up first).
> > :)  Heh heh heh
> 
> Gee, all I come up first for is "spore paper decay".  Well, at least I'm
> the king of that little Google hill :)
> 
> Monty
> www.codetransform.com
>
From mmoktali at bphx.dk  Tue Mar 29 00:54:40 2005
From: mmoktali at bphx.dk (Meena Moktali)
Date: Tue Mar 29 00:55:56 2005
Subject: [antlr-interest] problem-tree parse with nodes
Message-ID: <389DFA1991602B4DB5E5691B00929EB904FCD1@bpsdk910.bphx.dk>

hi all!
I want to know whether I can skip the methods 
public void xmlSerializeRootOpen(Writer out) throws IOException {}
public void xmlSerializeRootClose(Writer out) throws IOException {}
 
in the AST classes for parsing with tree node methods
somebody please guide me with this.
 
regs,
Meena





 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050329/31066fe9/attachment.html
From shalini.sh at gmail.com  Tue Mar 29 06:28:23 2005
From: shalini.sh at gmail.com (Shalini Sharma)
Date: Tue Mar 29 06:28:26 2005
Subject: [antlr-interest] NON DETERMINISM PROBLEM
Message-ID: <69667510050329062812dec6f3@mail.gmail.com>

due to non determism at "number" whatever lookahead i use .
non-determinism remains at rule array_index_seq . what should be done
for such problem



array_index_seq:
			array_index (array_index )*	
           ;

array_index:
	LBRAC number RBRAC
	;

number:
		  NUMBER	
		| TIC_NUMBER	
		| NUMBER TIC_NUMBER	
	;
From demakov at ispras.ru  Tue Mar 29 06:50:28 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Tue Mar 29 06:50:35 2005
Subject: [antlr-interest] NON DETERMINISM PROBLEM
References: <69667510050329062812dec6f3@mail.gmail.com>
Message-ID: <016e01c5346e$a67cc990$8cc79553@marlboro>

number:
| NUMBER ( TIC_NUMBER )?
| TIC_NUMBER 
;

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message ----- 
From: "Shalini Sharma" <shalini.sh@gmail.com>
To: "'antlr-interest' Interest" <antlr-interest@antlr.org>
Sent: Tuesday, March 29, 2005 6:28 PM
Subject: [antlr-interest] NON DETERMINISM PROBLEM


> due to non determism at "number" whatever lookahead i use .
> non-determinism remains at rule array_index_seq . what should be done
> for such problem
> 
> 
> 
> array_index_seq:
> array_index (array_index )* 
>            ;
> 
> array_index:
> LBRAC number RBRAC
> ;
> 
> number:
>   NUMBER 
> | TIC_NUMBER 
> | NUMBER TIC_NUMBER 
> ;

From jbb at acm.org  Tue Mar 29 06:58:31 2005
From: jbb at acm.org (John B. Brodie)
Date: Tue Mar 29 06:58:38 2005
Subject: [antlr-interest] NON DETERMINISM PROBLEM
In-Reply-To: <69667510050329062812dec6f3@mail.gmail.com> (message from Shalini
	Sharma on Tue, 29 Mar 2005 19:58:23 +0530)
References: <69667510050329062812dec6f3@mail.gmail.com>
Message-ID: <E1DGIAp-0000T8-00@gecko>

Greetings!

You asked:
>due to non determism at "number" whatever lookahead i use .
>non-determinism remains at rule array_index_seq . what should be done
>for such problem
>
>array_index_seq:
>			array_index (array_index )*
>           ;
>
>array_index:
>	LBRAC number RBRAC
>	;
>
>number:
>		  NUMBER
>		| TIC_NUMBER
>		| NUMBER TIC_NUMBER
>	;
>
>

try replacing your number rule with:

number :
      NUMBER ( TIC_NUMBER )?
    | TIC_NUMBER
    ;

Hope this helps...
   -jbb
From mortench2004 at yahoo.dk  Tue Mar 29 07:12:43 2005
From: mortench2004 at yahoo.dk (M C)
Date: Tue Mar 29 07:12:46 2005
Subject: [antlr-interest] To Ter and others: Observations on performance
	problems and how Antlr could be made faster
Message-ID: <20050329151243.17346.qmail@web25101.mail.ukl.yahoo.com>

Thanks to John D. Mitchell and Alex Sedow for your
thoughtfull answers! 

Alex's c# parser sound nice! Good work.

As for Antlr, I will eagerly await Antlr v3 and hope
for some changes that will make Antlr compete better
with a hand-written lexer/paser (for small input
strings).

Cheers,
Morten Christensen
From Henk-Jan at Ebbersconsult.nl  Tue Mar 29 07:47:53 2005
From: Henk-Jan at Ebbersconsult.nl (Henk-Jan Ebbers)
Date: Tue Mar 29 07:48:01 2005
Subject: [antlr-interest] keep getting java.lang.NullPointerException using
	xmlSerialize()
Message-ID: <424978A9.2090601@Ebbersconsult.nl>

using antlr 2.7.5, java 1.5.0_01

I want output parsed file as XML

            FileInputStream test = new FileInputStream("test.edi");       
            EdifactLexer lexer = new EdifactLexer(new 
DataInputStream(test));
            EdifactParser parser = new EdifactParser(lexer);
            parser.start();
            antlr.BaseAST resultTree=(antlr.BaseAST)parser.getAST();
            Writer w = new OutputStreamWriter(System.out);
            resultTree.xmlSerialize(w);
            w.write("\n");
            w.flush();

large part of the tree input-file is written to System.out,
but then:
java.lang.NullPointerException
        at antlr.BaseAST.encode(BaseAST.java:409)
        at antlr.BaseAST.xmlSerializeNode(BaseAST.java:452)
        at antlr.BaseAST.xmlSerialize(BaseAST.java:479)
        at Main.main(Main.java:23)

Am i missing something?

greetings,
Henk-Jan

From ric.klaren at gmail.com  Tue Mar 29 08:35:11 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Tue Mar 29 08:41:58 2005
Subject: [antlr-interest] Cygwin and 2.7.5 of Antlr
In-Reply-To: <424792B9.1020501@catalina-inter.net>
References: <424792B9.1020501@catalina-inter.net>
Message-ID: <424983BF.8090008@gmail.com>

Chris Sparks wrote:
> I have followed the instructions provided by Tom to get Antlr to work 
> under cygwin and I am stuck at instruction 7 of the first part (the 
> compiling everything part).  I did receive warnings as he stated, 
> however, it stopped based on some errors and here they are:

Doesn't 2.7.5 work out of the box?? E.g. the default configure, make, 
make install ?

 > antlr/debug/misc/JTreeASTPanel.java: In class
 > `antlr.debug.misc.JTreeASTPanel':
 > antlr/debug/misc/JTreeASTPanel.java: In constructor
 > (javax.swing.tree.TreeModel,javax.swing.event.TreeSelectionListener)':
 > antlr/debug/misc/JTreeASTPanel.java:23: error: class 'javax.swing.JTree'
 > has no method named '<init>' matching signature
 > '(Ljavax/swing/tree/TreeModel;)V'
 > antlr/debug/misc/JTreeASTPanel.java:23: error: expected type
 > 'javax.swing.JTree' but stack contains 'void'
 > antlr/debug/misc/JTreeASTPanel.java:23: error: expected type
 > 'antlr.debug.misc.JTreeASTPanel' but stack contains 'javax.swing.JTree'
 > antlr/debug/misc/JTreeASTPanel.java:23: confused by earlier errors,
 > bailing out

If you're trying for a native binary with gcj you should leave out all 
the swing stuff.

Cheers,

Ric

From sk at z.pl  Tue Mar 29 08:30:45 2005
From: sk at z.pl (Sebastian Kaliszewski)
Date: Tue Mar 29 09:25:31 2005
Subject: [antlr-interest] Can subrules be set to 'n-to-m'?
In-Reply-To: <20050326193211.F035D290B16@new.knowspam.net>
References: <20050326193211.F035D290B16@new.knowspam.net>
Message-ID: <200503291830.45697.sk@z.pl>

+1 for optional parens...

On Saturday 26 March 2005 20:55, Scott Stanchfield wrote:
[snip]
> What is the problem here??? Why do you insist on making me waste
> keystrokes and make the grammar LESS clear?
>
> Expressions have been written this way for 30 or more years in the
> computer field, and well longer than that in mathematics.
[snip]
> Based on the experience I've had introducing people to ANTLR, yes. They
> ALL ask about why the parens are needed.
>
> Think about how many people use regular expressions.
>
>   a+b*
>
> Rather than
>
>   (a)+(b)*
>
>
> Why insist on redefining common usage of + and *???
>

I'm with Scott here... Too much parens obfuscate the .g code for me. 
Hey, it's ANTLR, not Lisp, after all.

rgds
-- 
Sebastian Kaliszewski
From hombre at gmail.com  Tue Mar 29 09:34:51 2005
From: hombre at gmail.com (Tom Verbeure)
Date: Tue Mar 29 09:34:54 2005
Subject: [antlr-interest] Cygwin and 2.7.5 of Antlr
In-Reply-To: <424792B9.1020501@catalina-inter.net>
References: <424792B9.1020501@catalina-inter.net>
Message-ID: <f7896340050329093460fcf22b@mail.gmail.com>

Hi Chris,

> antlr/debug/misc/JTreeASTPanel.java: In class
> `antlr.debug.misc.JTreeASTPanel':
> antlr/debug/misc/JTreeASTPanel.java: In constructor
> `(javax.swing.tree.TreeModel,javax.swing.event.TreeSelectionListener)':
> antlr/debug/misc/JTreeASTPanel.java:23: error: class 'javax.swing.JTree'
> has no method named '<init>' matching signature
> '(Ljavax/swing/tree/TreeModel;)V'
> antlr/debug/misc/JTreeASTPanel.java:23: error: expected type
> 'javax.swing.JTree' but stack contains 'void'
> antlr/debug/misc/JTreeASTPanel.java:23: error: expected type
> 'antlr.debug.misc.JTreeASTPanel' but stack contains 'javax.swing.JTree'
> antlr/debug/misc/JTreeASTPanel.java:23: confused by earlier errors,
> bailing out

I haven't tried compling 2.7.5 yet, but I think that you forgot to do
step 4: the ./antrl/debug/misc directory tries to compile swing code,
but (as far as I can judge with my very limited understanding of Java
and GCJ) this library isn't supported very well for GCJ.
That why, in step 4, I simply deleted this directory which magically
seemed to solve the problem.

Tom
From shalini.sh at gmail.com  Tue Mar 29 18:42:42 2005
From: shalini.sh at gmail.com (Shalini Sharma)
Date: Tue Mar 29 18:42:45 2005
Subject: [antlr-interest] NON DETERMINISM PROBLEM
In-Reply-To: <E1DGIAp-0000T8-00@gecko>
References: <69667510050329062812dec6f3@mail.gmail.com>
	<E1DGIAp-0000T8-00@gecko>
Message-ID: <69667510050329184225c2d3c5@mail.gmail.com>

this is not getting solved as recursion exists in 
array_index_seq:
                       array_index (array_index )*
           ;

this would exist everywhere where there is non-determinism in subrule


On Tue, 29 Mar 2005 09:58:31 -0500, John B. Brodie <jbb@acm.org> wrote:
> Greetings!
> 
> You asked:
> >due to non determism at "number" whatever lookahead i use .
> >non-determinism remains at rule array_index_seq . what should be done
> >for such problem
> >
> >array_index_seq:
> >                       array_index (array_index )*
> >           ;
> >
> >array_index:
> >       LBRAC number RBRAC
> >       ;
> >
> >number:
> >                 NUMBER
> >               | TIC_NUMBER
> >               | NUMBER TIC_NUMBER
> >       ;
> >
> >
> 
> try replacing your number rule with:
> 
> number :
>      NUMBER ( TIC_NUMBER )?
>    | TIC_NUMBER
>    ;
> 
> Hope this helps...
>   -jbb
>
From jbb at acm.org  Tue Mar 29 19:17:17 2005
From: jbb at acm.org (John B. Brodie)
Date: Tue Mar 29 19:17:25 2005
Subject: [antlr-interest] Re: NON DETERMINISM PROBLEM
In-Reply-To: <69667510050329184225c2d3c5@mail.gmail.com> (message from Shalini
	Sharma on Wed, 30 Mar 2005 08:12:42 +0530)
References: <69667510050329062812dec6f3@mail.gmail.com>
	<E1DGIAp-0000T8-00@gecko> <69667510050329184225c2d3c5@mail.gmail.com>
Message-ID: <E1DGThl-0005Er-00@gecko>

>this is not getting solved as recursion exists in 
>array_index_seq:
>                       array_index (array_index )*
>           ;
>
>this would exist everywhere where there is non-determinism in subrule

No.

You are correct that if a rule were non-deterministic, all of it uses would be
problematic.

But we have fixed the non-determinism in the `number` rule, so there now is no
(or rather now should be no) problem with the `array_index_seq` rule.

I think something else is non-deterministic in the bigger grammar that you
tried to simplify for display in this example.

Does your installed antlr.Tool report any non-determinism with this grammar?

/* --- cut here --- cut here --- begin test.g --- cut here --- cut here*/
class testParser extends Parser;

array_index_seq :
	array_index ( array_index )*
    ;

array_index :
	LBRAC number RBRAC
    ;

number :
	NUMBER ( TIC_NUMBER )?
    | TIC_NUMBER
    ;

class testLexer extends Lexer;

NUMBER : 'n';
TIC_NUMBER : 't';
LBRAC : '(';
RBRAC : ')';
/* --- cut here --- cut here --- end test.g --- cut here --- cut here*/

mine does not.

I believe that something else is causing your non-determinism problem.

Please post more.

   -jbb
From gauldong at gmail.com  Wed Mar 30 05:42:17 2005
From: gauldong at gmail.com (Hendy Irawan)
Date: Wed Mar 30 05:42:20 2005
Subject: [antlr-interest] Processing filter-ed lexer tokens with ANTLR
	parser?
Message-ID: <3c4c8fa605033005426ba95cd7@mail.gmail.com>

Hi!

I'm currently writing a template engine, which transforms HTML
templates into C# classes.

I currently uses both the ANTLR parser and lexer for this task. I
define several tokens and the LITERAL token, which is "." (which
matches anything). This generates warnings, but it actually "works"
because I prefer other tokens, LITERAL last.

The problem lies when a non-LITERAL matches, then it doesn't match in
the middle (usually a template syntax error, but not always). I want
the template grammar to be as loose as possible (syntax errors later,
or even ignore these syntax errors), and treat any syntax errors as
LITERALs.

I tried using the "filter" option, which seems to be exactly what I
want, but it doesn't allow me to return the token (it seems to always
discard the token, although it allows me to have an action, basically
anything but returning a token). What I want is when something went
wrong (i.e. "no match"), whatever it is, it will get labeled as a
LITERAL then returned to the parser as a "normal" token.

Is this possible?

P.S.: For Terence, thanks a lot for answering my questions... It felt good. :-)
-- 
Hendy Irawan - http://dev.gauldong.net - GaulDong Developer Center
From prashant.deva at gmail.com  Wed Mar 30 10:21:11 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Mar 30 10:21:15 2005
Subject: [antlr-interest] Bug (sort of) in antlr 2.7.xx java implementation
Message-ID: <41fed8f805033010216f24cb39@mail.gmail.com>

The TokenBuffer.LA(int i) method uses the 'type' field in antlr.Token
class directly. It should instead use the 'getType()' method.
I just had a hell of a debugging session cause i was storing the token
types elsewhere and had overriden the getType method, just to find out
that antlr doesn't use it.

  /** Get a lookahead token value */
  public final int LA(int i) throws TokenStreamException {
        fill(i);
        return queue.elementAt(markerOffset + i - 1).type; //should be
'getType()'
    }

PRASHANT
From parrt at cs.usfca.edu  Wed Mar 30 11:17:36 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Mar 30 11:17:36 2005
Subject: [antlr-interest] Bug (sort of) in antlr 2.7.xx java implementation
In-Reply-To: <41fed8f805033010216f24cb39@mail.gmail.com>
References: <41fed8f805033010216f24cb39@mail.gmail.com>
Message-ID: <a471002da1a02e82986e46e813688ac6@cs.usfca.edu>

Ack, you are right!

Fixing for 2.7.6.

Ter
On Mar 30, 2005, at 10:21 AM, Prashant Deva wrote:

> The TokenBuffer.LA(int i) method uses the 'type' field in antlr.Token
> class directly. It should instead use the 'getType()' method.
> I just had a hell of a debugging session cause i was storing the token
> types elsewhere and had overriden the getType method, just to find out
> that antlr doesn't use it.
>
>   /** Get a lookahead token value */
>   public final int LA(int i) throws TokenStreamException {
>         fill(i);
>         return queue.elementAt(markerOffset + i - 1).type; //should be
> 'getType()'
>     }
>
> PRASHANT
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From parrt at cs.usfca.edu  Wed Mar 30 11:18:43 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Mar 30 11:18:44 2005
Subject: [antlr-interest] Bug (sort of) in antlr 2.7.xx java implementation
In-Reply-To: <41fed8f805033010216f24cb39@mail.gmail.com>
References: <41fed8f805033010216f24cb39@mail.gmail.com>
Message-ID: <919e843134d8fd49da3ad5f1f8196bb2@cs.usfca.edu>

Prashant, which version are you using?  2.7.5 has it fixed as far as I 
know (or at least the main line):

     /** Get a lookahead token value */
     public final int LA(int i) throws TokenStreamException {
         fill(i);
         return queue.elementAt(markerOffset + i - 1).getType();
     }

Ter
On Mar 30, 2005, at 10:21 AM, Prashant Deva wrote:

> The TokenBuffer.LA(int i) method uses the 'type' field in antlr.Token
> class directly. It should instead use the 'getType()' method.
> I just had a hell of a debugging session cause i was storing the token
> types elsewhere and had overriden the getType method, just to find out
> that antlr doesn't use it.
>
>   /** Get a lookahead token value */
>   public final int LA(int i) throws TokenStreamException {
>         fill(i);
>         return queue.elementAt(markerOffset + i - 1).type; //should be
> 'getType()'
>     }
>
> PRASHANT
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From parrt at cs.usfca.edu  Wed Mar 30 15:43:48 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Mar 30 15:43:49 2005
Subject: [antlr-interest] wow; talk about premature optimization
Message-ID: <9d597b6161abe2869f5c9c3999ed99a2@cs.usfca.edu>

Hi,

This is pretty funny.  The fact that I have all this junk in ANTLR v3 
to generate/assemble bytecode etc... has been bugging me.  It's 
"unclean" and only needed for java.  I ran an experiment last night and 
today--I went back to generating pure Java for my cyclic DFA.  I have 
to use a method call to switch states whereas in bytecodes I can use a 
goto.  I expected this to be a huge win.  Turns out...drum roll...for 
large input there is no difference. ;)  most decisions are not cyclic 
and are generated efficiently in pure java.  There appears to be a 
small start up cost associated with the static DFA objects I have to 
create, but not that bad.

It was a MUCH bigger optimization to factor out LA(i) calls to 
store/use a temp value instead.  Switch generation also surprised me by 
buying us not that much.  C and such could get more from it so I'm 
leaving.  Java VMs probably just aren't too good at switches unless 
they are consecutive values.

So, I am tentatively switching back to pure java, no bytecodes.   
Apparently I did the bytecode stuff for "fun".  No biggie as I really 
wanted to learn how to gen .class files and generate bytecodes.  I'm 
well prepared for a grad programming class now. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com



From simon at icmethods.com  Wed Mar 30 17:41:33 2005
From: simon at icmethods.com (Simon M. C. Butler)
Date: Wed Mar 30 17:41:36 2005
Subject: [antlr-interest] antlr spice grammar  
Message-ID: <200503310141.j2V1fXqu004691@pacifica.icmethods.com>

hi, i'm planning on writing a spice netlist parser using antlr and would love to get my hands on some previously written antlr grammar if anyone has any or knows of any.

thx in advance. 


-----------------------------------------------
Simon Butler: 415.554.0535: simon@icmethods.com
http://www.icmethods.com
From shalini.sh at gmail.com  Wed Mar 30 19:23:00 2005
From: shalini.sh at gmail.com (Shalini Sharma)
Date: Wed Mar 30 19:23:02 2005
Subject: [antlr-interest] SYNTAX predicates in lexer
In-Reply-To: <E1DGltT-0001BA-00@gecko>
References: <69667510050329062812dec6f3@mail.gmail.com>
	<E1DGIAp-0000T8-00@gecko> <69667510050329184225c2d3c5@mail.gmail.com>
	<E1DGThl-0005Er-00@gecko> <6966751005032920427769be58@mail.gmail.com>
	<E1DGltT-0001BA-00@gecko>
Message-ID: <6966751005033019232439160d@mail.gmail.com>

header
{
# include<iostream>		
using namespace std;
}
options {
	language="Cpp";

}
class testParser extends Parser;


c: A X 
;	



class testLexer extends Lexer;
options
{
k=2;
}


A:    (Z  "b")=> Z 'b' { cout<<"matched with B"<<endl;}	
	  |Z	{cout<<"matched without B"<<endl;}	  
	 ;
X	:'x'
	;
protected
Z:   ('a')* 
	;


when i give aaaaa  or aaaaaaaaab (wrong input ) parser hangs writing 
"matched without B" . but on correct input it works fine .  i want it
to exit with some error .
From travis_caldwell2000 at yahoo.com  Wed Mar 30 19:56:05 2005
From: travis_caldwell2000 at yahoo.com (Travis Caldwell)
Date: Wed Mar 30 19:56:07 2005
Subject: [antlr-interest] Any updates on the Python version of String
	Template?
In-Reply-To: 6667
Message-ID: <20050331035605.42368.qmail@web90108.mail.scd.yahoo.com>


 Being able to learn a template syntax once and use it for both Java
and Python would be great. (Of course given a choice I'd always pick
Python!)

                _Travis_Caldwell_
 


		
__________________________________ 
Do you Yahoo!? 
Yahoo! Small Business - Try our new resources site!
http://smallbusiness.yahoo.com/resources/ 
From shalini.sh at gmail.com  Wed Mar 30 20:14:40 2005
From: shalini.sh at gmail.com (Shalini Sharma)
Date: Wed Mar 30 20:14:42 2005
Subject: [antlr-interest] SYNTAX predicates in lexer
In-Reply-To: <6966751005033019232439160d@mail.gmail.com>
References: <69667510050329062812dec6f3@mail.gmail.com>
	<E1DGIAp-0000T8-00@gecko> <69667510050329184225c2d3c5@mail.gmail.com>
	<E1DGThl-0005Er-00@gecko> <6966751005032920427769be58@mail.gmail.com>
	<E1DGltT-0001BA-00@gecko> <6966751005033019232439160d@mail.gmail.com>
Message-ID: <696675100503302014167365eb@mail.gmail.com>

---------- Forwarded message ----------
From: Shalini Sharma <shalini.sh@gmail.com>
Date: Mar 31, 2005 8:53 AM
Subject: SYNTAX predicates in lexer
To: "John B. Brodie" <jbb@acm.org>, 'antlr-interest' Interest
<antlr-interest@antlr.org>


header
{
# include<iostream>
using namespace std;
}
options {
       language="Cpp";

}
class testParser extends Parser;

c: A X
;

class testLexer extends Lexer;
options
{
k=2;
}

A:    (Z  "b")=> Z 'b' { cout<<"matched with B"<<endl;}
         |Z    {cout<<"matched without B"<<endl;}
        ;
X       :'x'
       ;
protected
Z:   ('a')*
       ;

when i give aaaaa  or aaaaaaaaab (wrong input ) parser hangs writing
"matched without B" . but on correct input it works fine .  i want it
to exit with some error .
From scott at javadude.com  Wed Mar 30 20:22:09 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Wed Mar 30 20:22:12 2005
Subject: [antlr-interest] wow; talk about premature optimization
In-Reply-To: <9d597b6161abe2869f5c9c3999ed99a2@cs.usfca.edu>
Message-ID: <20050331035741.0D5952906D2@new.knowspam.net>

> Java VMs probably just 
> aren't too good at switches unless they are consecutive values.

Yep - there are two bytecodes for switches -- one is just a simple offset
table for densely populated values, while the other has to do a two-hop
lookup...

> So, I am tentatively switching back to pure java, no bytecodes.   

Good -- glad to hear it...

Next time, remember -- write it for good design, then profile, then tweak...
You'll rarely outguess a compiler & optimizer

> Apparently I did the bytecode stuff for "fun".  No biggie as 
> I really wanted to learn how to gen .class files and generate 
> bytecodes.  I'm well prepared for a grad programming class now. :)

Yup -- can be fun... Did you use the jakarta bytecode stuff (BCEL?) or
hand-roll?

(I wrote a bytecode assembler for a C++ to PicoJava compiler once... fun
stuff...)

- Scott



From jbb at acm.org  Wed Mar 30 20:53:51 2005
From: jbb at acm.org (John B. Brodie)
Date: Wed Mar 30 20:53:56 2005
Subject: [antlr-interest] Re: SYNTAX predicates in lexer
In-Reply-To: <6966751005033019232439160d@mail.gmail.com> (message from Shalini
	Sharma on Thu, 31 Mar 2005 08:53:00 +0530)
References: <69667510050329062812dec6f3@mail.gmail.com>
	<E1DGIAp-0000T8-00@gecko> <69667510050329184225c2d3c5@mail.gmail.com>
	<E1DGThl-0005Er-00@gecko> <6966751005032920427769be58@mail.gmail.com>
	<E1DGltT-0001BA-00@gecko> <6966751005033019232439160d@mail.gmail.com>
Message-ID: <E1DGrgl-0001lm-00@gecko>

I do not do C++ so I am unable to reproduce your example.  But I have
a couple of suggestions.



1) Top-Level Rules (those that you call from outside Antlr) should
   always end with a reference to the EOF token - and, of course, they
   must be top-level, e.g. no other parser rule(s) refer to them.

   so your rule for c should be:

c: A X EOF;




2) No Token should accept the Empty String. I think because your Z
   protected token may be empty, and therefore your A token may be
   empty, you get your infinite loop.

   so your rule for Z should be:

protected Z : ( 'a' )+ ; 

   and the parser adjusted to make tokens which contain Z as a
   component optional.

   Note, that I previously answered one of your questions regarding
   how to handle a general lexer situation such as:

A : ( a )* b ;
B : ( a )* ;

   with this pseudo fragment:

protected a : ... ;
protected b : ... ;

B : ( a )* ( b { $setType(A); } )? ;

   and this answer also suffers from this same empty-string problem.

   Sorry About That.



3) I would try to avoid any kind of Predicates in the Lexer (and the
   Parser too, for that matter).  The potential of re-parsing the
   entire remaining input (and then backtracking) each time a
   syntactic predicate is invoked is, for me, too big a performance
   penalty.  I'd rather re-work the rules so that the syntactic
   predicate (and subsequent backtracking) is not necessary.  If you
   must use them, analyze their lookahead/backtrack impact *very*
   carefully. (Just my opinion)


Hope this helps...
   -jbb

From parrt at cs.usfca.edu  Wed Mar 30 22:06:23 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Mar 30 22:06:28 2005
Subject: [antlr-interest] wow; talk about premature optimization
In-Reply-To: <20050331035741.0D5952906D2@new.knowspam.net>
References: <20050331035741.0D5952906D2@new.knowspam.net>
Message-ID: <10c92ade71de1ecddc770ab6dbe655a0@cs.usfca.edu>


On Mar 30, 2005, at 8:22 PM, Scott Stanchfield wrote:
> Next time, remember -- write it for good design, then profile, then 
> tweak...
> You'll rarely outguess a compiler & optimizer

Without doing the bytecodes at some point, how could one compare?  I 
just did it first 'cause it seemed like fun. :)

Ter



From shalini.sh at gmail.com  Thu Mar 31 00:18:49 2005
From: shalini.sh at gmail.com (Shalini Sharma)
Date: Thu Mar 31 00:18:52 2005
Subject: [antlr-interest] YACC LEX
Message-ID: <696675100503310018a86b7b5@mail.gmail.com>

why there is no non determinism in YACC parser . what kind of look ahead is used
there. and why in lexer look ahead is required can't every NFA be
converted into DFA
From scott at javadude.com  Thu Mar 31 05:26:35 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Thu Mar 31 05:26:38 2005
Subject: [antlr-interest] wow; talk about premature optimization
In-Reply-To: <10c92ade71de1ecddc770ab6dbe655a0@cs.usfca.edu>
Message-ID: <20050331130159.E7CE529022E@new.knowspam.net>

> On Mar 30, 2005, at 8:22 PM, Scott Stanchfield wrote:
> > Next time, remember -- write it for good design, then profile, then 
> > tweak...
> > You'll rarely outguess a compiler & optimizer
> 
> Without doing the bytecodes at some point, how could one 
> compare?  

History, my friend. People have been attempting to do this for years and the
compilers always win (or at least they do after the compiler writers have
had a year or two to optimize).

Usually for the first year or so of a compiler's life, misguided programmers
keep writing their own assembly code "because real programmers write in
assembler". They might be a wee bit more efficient, but then them compiler
catches up and they're left with some nasty, unmaintainable code that's at
best the same as what the compiler optimizes to (and usually not as good).
Then it's time to rewrite it maintainably ;)

It all boils down to the fact that intuition (& common sense) is a
misdirected optimizer. Go for good, understandable & maintainable design and
let a profiler figure out what you need to tweak into submission.


>I just did it first 'cause it seemed like fun. :)

Of course, and that's a good reason ;)

-- Scott



From ewbank at gmail.com  Thu Mar 31 07:18:53 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Mar 31 07:18:55 2005
Subject: [antlr-interest] wow; talk about premature optimization
In-Reply-To: <20050331130159.E7CE529022E@new.knowspam.net>
References: <10c92ade71de1ecddc770ab6dbe655a0@cs.usfca.edu>
	<20050331130159.E7CE529022E@new.knowspam.net>
Message-ID: <dd3a065f0503310718615369a0@mail.gmail.com>

On Thu, 31 Mar 2005 08:26:35 -0500, Scott Stanchfield
<scott@javadude.com> wrote:
> > On Mar 30, 2005, at 8:22 PM, Scott Stanchfield wrote:
> > > Next time, remember -- write it for good design, then profile, then
> > > tweak...
> > > You'll rarely outguess a compiler & optimizer
> >
> > Without doing the bytecodes at some point, how could one
> > compare?

Without a baseline, how do you know it's a problem :-)
From johnm-antlr at non.net  Thu Mar 31 08:38:53 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Thu Mar 31 08:38:33 2005
Subject: [antlr-interest] YACC LEX
In-Reply-To: <696675100503310018a86b7b5@mail.gmail.com>
References: <696675100503310018a86b7b5@mail.gmail.com>
Message-ID: <16972.10141.461903.205133@despot.non.net>

>>>>> "Shalini" == Shalini Sharma <shalini.sh@gmail.com> writes:
> why there is no non determinism in YACC parser . what kind of look ahead
> is used there. and why in lexer look ahead is required can't every NFA be
> converted into DFA

There are non-determinisms possible in all parser/lexer generators. LR
style parser generators like YACC suffer from shift-reduce and
reduce-reduce conflicts.  There's a lot of information on this floating
around.

Have fun,
	John
From parrt at cs.usfca.edu  Thu Mar 31 09:06:13 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Mar 31 09:06:16 2005
Subject: [antlr-interest] wow; talk about premature optimization
In-Reply-To: <20050331130159.E7CE529022E@new.knowspam.net>
References: <20050331130159.E7CE529022E@new.knowspam.net>
Message-ID: <c28d3d188445c5e1344b5cacaa95e5cf@cs.usfca.edu>

I had no idea writing software was so complex!  Code generation and 
compilers?  What are those?  Hokey smokes!  Design?  Maintenance?  
Hm....i'll have to look all those up on google. ;)

Ter

On Mar 31, 2005, at 5:26 AM, Scott Stanchfield wrote:

>> On Mar 30, 2005, at 8:22 PM, Scott Stanchfield wrote:
>>> Next time, remember -- write it for good design, then profile, then
>>> tweak...
>>> You'll rarely outguess a compiler & optimizer
>>
>> Without doing the bytecodes at some point, how could one
>> compare?
>
> History, my friend. People have been attempting to do this for years 
> and the
> compilers always win (or at least they do after the compiler writers 
> have
> had a year or two to optimize).
>
> Usually for the first year or so of a compiler's life, misguided 
> programmers
> keep writing their own assembly code "because real programmers write in
> assembler". They might be a wee bit more efficient, but then them 
> compiler
> catches up and they're left with some nasty, unmaintainable code 
> that's at
> best the same as what the compiler optimizes to (and usually not as 
> good).
> Then it's time to rewrite it maintainably ;)
>
> It all boils down to the fact that intuition (& common sense) is a
> misdirected optimizer. Go for good, understandable & maintainable 
> design and
> let a profiler figure out what you need to tweak into submission.
>
>
>> I just did it first 'cause it seemed like fun. :)
>
> Of course, and that's a good reason ;)
>
> -- Scott
>
>
>



From metzgerm at iro.umontreal.ca  Thu Mar 31 09:39:50 2005
From: metzgerm at iro.umontreal.ca (Michel Metzger)
Date: Thu Mar 31 09:40:01 2005
Subject: [antlr-interest] simplification of logic formula
Message-ID: <424C35E6.5050107@iro.umontreal.ca>

Hi,

I have a question for you !

I have a logic formula: logic operators (&&, ||, !), atomic proposition 
(a, b, c, d, ...), and litterals (true, false)
What I want is to simplify those formulae : for instance translate (a && 
!a) into false
I also want to push the not operator in front of atomic propositions 
only. ie, transform !(a && b) in !a || !b

To do that, I thought that using tree parser to transform my syntax tree 
would be a good idea. I wrote the following tree transformation rules:

     |! (#(OP_NOT OP_OR)) => #(OP_NOT #(OP_OR leftNO:expr rightNO:expr))
        {
            #expr = #([OP_AND, "&&"], #([12, "!"], leftNO), #([12, "!"], 
rightNO));
        }
     |!    (#(OP_NOT OP_AND)) => #(OP_NOT #(OP_AND leftNA:expr 
rightNA:expr))
        {
            #expr = #([OP_OR, "||"], #([12, "!"], leftNA), #([12, "!"], 
rightNA));
        }

But I have a problem :
take the formula !((a && b) || c). The result should be : ((!a || !b) && 
!c). But with the rules I wrote, the result is :
(!(a && b) && !c. I understand why, but is there a way to call again my 
transformation rule on the subtree that I build in my action bloc ?

I hope that my question is clear, and sorry for my english :)

Michel


From jeremy.rayner at gmail.com  Thu Mar 31 11:05:52 2005
From: jeremy.rayner at gmail.com (Jeremy Rayner)
Date: Thu Mar 31 11:05:55 2005
Subject: [antlr-interest] Unicode Scanners and java.g
Message-ID: <90a60e760503311105a982872@mail.gmail.com>

Hiya,
  In lieu of trawling through the historical copies of java.g, what are the
reasons in Michael Studman's latest copy for having the scanner use
the following...

charVocabulary='\u0003'..'\u7FFE'

I understand of course that the top end of this (8bit unicode I assume) is not
treading on the toes of EOF (i.e. \u7FFF as per
http://www.antlr.org/doc/lexer.html#unicode )

But why are the 3 characters '\u0000', '\u0001' and '\u0002' left out?
What are the design decisions behind that?


Thanks for a great tool Ter, Groovy is on the cusp of releasing it's
first antlr based groovy compiler very soon now, yay.

Jez.
-- 
http://groovy.codehaus.org
http://javanicus.com/blog2
From virtualaspirin at yahoo.com  Thu Mar 31 14:28:51 2005
From: virtualaspirin at yahoo.com (Akhilesh Mritunjai)
Date: Thu Mar 31 14:28:55 2005
Subject: [antlr-interest] ANTLR AST,
	tree transformations and doing them declaratively
Message-ID: <20050331222851.10113.qmail@web30804.mail.mud.yahoo.com>

Hi everybody

What do people use for AST->AST non-trivial
tansformations ? Say if you have to clone some
sub-trees, apply some tranformations and/or mutations
over a set of type of nodes. Further, lets say these
the AST of homogenous.

Did anybody try doing it by means of a declarative
language ? eg some subset/counterpart of XPath/XQuery
? 

Finally, I'd like to ask, what things I should look
out for if I need to implement such type of system ?

PS: In case anybody is interested, I'm doing an
analyzer for a domain specific language. I *can* do
this "normally", as in writing tons of code, but being
lazy and short on head-count, I'd like to do it in
least lines of human-written maintainable code. In
short, I'd like to skip writing code that computers
can write for me and for this, a system of this kind
would be interesting to look at.

Thanks
- akhilesh

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From ewbank at gmail.com  Thu Mar 31 17:10:46 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Mar 31 17:10:48 2005
Subject: [antlr-interest] wow; talk about premature optimization
In-Reply-To: <c28d3d188445c5e1344b5cacaa95e5cf@cs.usfca.edu>
References: <20050331130159.E7CE529022E@new.knowspam.net>
	<c28d3d188445c5e1344b5cacaa95e5cf@cs.usfca.edu>
Message-ID: <dd3a065f05033117104f42f745@mail.gmail.com>

Aww, Terence.  We luvs ya anyway.  Those we luvs, we corrects ;-)

On Thu, 31 Mar 2005 09:06:13 -0800, Terence Parr <parrt@cs.usfca.edu> wrote:
> I had no idea writing software was so complex!  Code generation and
> compilers?  What are those?  Hokey smokes!  Design?  Maintenance?
> Hm....i'll have to look all those up on google. ;)
From gerhard at tasking.nl  Thu Mar 31 01:42:23 2005
From: gerhard at tasking.nl (Gerhard Mennen)
Date: Thu Mar 31 18:59:29 2005
Subject: [antlr-interest] floating point numbers and ranges
Message-ID: <20050331094223.GA331060@greve.tasking.nl>


Hello All,

I am new to antlr (and java) and for a project a ran into a problem
similar to the "floating point numbers and ranges" problem that is
described in the antlr documentation.
So I tried that example and all looked well, but that changed when
I specified "k = 2;" in the lexer options part.
Then it gives an error "exception: line 3:3: unexpected char: '.'"
when I try to process my example input.

Is it correct that that example gives an error when "k = some value;"
is added to the lexer options?
Is there another solution to solve this kind op problem that does
work with lookahead depth value.

Below added are files that I used (RangeAndReal.g, Main.java and
test.txt). Run with the following commands:
    java antlr.Tool RangeAndReal.g
    javac Main.java
    java Main < test.txt

Version string printed by first command:
    ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 jGuru.com

Output of third command without "k = 2;":
    INT..INT
    token REAL
    INT..INT
    INT..INT
    token REAL
    INT..INT
    plain old INT
    token REAL
    INT..INT
    plain old INT

Output with "k = 2;"
    INT..INT
    token REAL
    exception: line 3:3: unexpected char: '.'


Any help appreciated

Gerhard




RangeAndReal.g:

class PascalParser extends Parser;

main
    :
        (prog)* EOF
    ;

prog
    :
        {
            Boolean range = false;
        }
        INT
        (    (RANGE INT
            { range = true; System.out.println("INT..INT"); })?
            { if (range == false) { System.out.println("plain old INT"); } }
        )
    |
        REAL    { System.out.println("token REAL"); }
    ;

class PascalLexer extends Lexer;
options
{
/*
*/
	k = 2;
	charVocabulary = '\3'..'\377';
}

WS
    :    (' ' | '\t' | '\n' { newline(); } | '\r')+
        {
            $setType(Token.SKIP);
        }
    ;

protected
INT
    :
        ('0'..'9')+
    ;

protected
REAL
    :
        INT '.' INT
    ;

RANGE
    :
        ".."
    ;

RANGE_OR_INT
    :
        ( INT ".." )    => INT      { $setType(INT); }
    |
        ( INT '.' )     => REAL     { $setType(REAL); }
    |
        INT                         { $setType(INT); }
    ;


Main.java:

import java.io.*;

class Main {
	public static void main(String[] args) {
		try {
			DataInputStream input = new DataInputStream(System.in);

			// attach lexer to the input stream
			PascalLexer lexer = new PascalLexer(input);

			// Create parser attached to lexer
			PascalParser parser = new PascalParser(lexer);

			// start up the parser by calling the rule
			// at which you want to begin parsing.
			parser.main();
		}
		catch (Exception e) {
			System.err.println("exception: "+e);
		}
	}
}

text.txt:

1 .. 4
1.4
1..4

123 .. 456
123.456
123..456

123456

333.666

333..666

998877

From atripp at comcast.net  Thu Mar 31 20:30:12 2005
From: atripp at comcast.net (Andy Tripp)
Date: Thu Mar 31 20:30:16 2005
Subject: [antlr-interest] wow; talk about premature optimization
Message-ID: <424CCE54.4060408@comcast.net>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050331/12a031ba/attachment.html
From atripp at comcast.net  Thu Mar 31 20:35:07 2005
From: atripp at comcast.net (Andy Tripp)
Date: Thu Mar 31 20:35:13 2005
Subject: [antlr-interest] Print the actual code after building AST.
Message-ID: <424CCF7B.4050501@comcast.net>

>
>
>hi,
>I have built a tree parser for a sample code.Thanks for your suggestions Bryan ,I have corrected the mistakes.I want to print the code after adding actions to it.
>As shown in my parser class ,I am indenting the 'map statements' .Now I want to print the resultant code.
>How do i do it?I saw the java.g ...but it does not print the whole inputstream after parsing.
>

Under the "file sharing" section on antlr.org, see the JavaEmitter by 
Terence for a treewalker that pretty-prints a Java AST.
Of, if you prefer, see my JavaEmitter which does the same thing, but 
walks the tree "by hand", rather than
using an ANTLR-generated treewalker.

Andy


