From edsin at swes.saren.ru  Fri Mar  1 03:50:47 2002
From: edsin at swes.saren.ru (Ed Sinjiashvili)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] ignoring lexer rules
Message-ID: <usn7ky0a0.fsf@swes.saren.ru>

Hi,

I've tried to ask Terence about this issue and he pointed me to this
ML. So here I am. Suppose I have the following grammar(that describes
literal strings with escaped octal numbers inside):

-----
class Dummy extends Lexer;
options
{
    charVocabulary = '\3'..'\177';
}

{
    char scanOct(String txt)
	{
		char result = 0;
		try 
		{
			result = (char) Integer.parseInt(txt, 8);
		}
		catch (NumberFormatException e)
		{
			result = 0;
		}
		return result;
	}
}

STR: '"' ( c = ESCAPE { text.append(c); } 
         | ~('\\' | '"')
         )*
     '"'
    ;

protected
ESCAPE! returns [char c = 0]
 	: 	'\\'!
        '0'..'7' 
        (options {warnWhenFollowAmbig = false;} : '0'..'7'
            (options {warnWhenFollowAmbig = false;} : '0'..'7')? )? 
        { c = scanOct($getText); } 
 	;
-----

I'd like the tokenizer to return my strings already interpolated -
that is escaped octals should be converted to a char - and parser
should not be able to tell whether particular character was in string
literally or resulted from escape substitution. Naturally I used '!'
on ESCAPE rule to discard matched octals and backslash. This resulted
in the following java code (narrowed to not include irrelevant stuff):

-----
protected final char  mESCAPE(boolean _createToken) throws RecognitionException, CharStreamException, TokenStreamException {
	char c = 0; int _ttype; Token _token=null; int _begin=text.length();
	_ttype = ESCAPE; 
	int _saveIndex;
		
	_saveIndex=text.length();
	match('\\');
	text.setLength(_saveIndex);
	_saveIndex=text.length();
	matchRange('0','7');
	text.setLength(_saveIndex);
        [ ... skipped ... ]

	c = scanOct(new String(text.getBuffer(),_begin,text.length()-_begin));
	if ( _createToken && _token==null && _ttype!=Token.SKIP ) {
		_token = makeToken(_ttype);
		_token.setText(new String(text.getBuffer(), _begin, text.length()-_begin));
	}
	_returnToken = _token;
	return c;
	}
-----

ANTLR just wraps every alternative with "_saveIndex = text.length();"
and "text.setLength(_saveIndex);". This causes my scanOct method to
fail - all matched stuff was discarded by subsequent "_saveIndex"
wrappers. Besides it looks a little wrong to me - we know that we
gonna discard all the text, we know where it starts and we know where
it ends. Why just don't cut it before trying to create a token
instance? This way actions can access matched text and mess with it. 

I've patched ANTLR.2.7.2a2's JavaCodeGenerator so it produces the
following java code (no narrowing now):

-----
protected final char  mESCAPE(boolean _createToken) throws RecognitionException, CharStreamException, TokenStreamException {
		char c = 0;
		int _ttype; Token _token=null; int _begin=text.length();
		_ttype = ESCAPE;
		int _saveIndex;
		
		_saveIndex=text.length();
		match('\\');
		text.setLength(_saveIndex);
		matchRange('0','7');
		{
		if (((LA(1) >= '0' && LA(1) <= '7'))) {
			matchRange('0','7');
			{
			if (((LA(1) >= '0' && LA(1) <= '7'))) {
				matchRange('0','7');
			}
			else if (((LA(1) >= '\u0003' && LA(1) <= '\u007f'))) {
			}
			else {
				throw new NoViableAltForCharException((char)LA(1), getFilename(), getLine(), getColumn());
			}
			
			}
		}
		else if (((LA(1) >= '\u0003' && LA(1) <= '\u007f'))) {
		}
		else {
			throw new NoViableAltForCharException((char)LA(1), getFilename(), getLine(), getColumn());
		}
		
		}
		c = scanOct(new String(text.getBuffer(),_begin,text.length()-_begin));
		text.setLength(_begin);
		if ( _createToken && _token==null && _ttype!=Token.SKIP ) {
		   _token = makeToken(_ttype);
		   _token.setText(new String(text.getBuffer(), _begin, text.length()-_begin));
		}
		_returnToken = _token;
		return c;
	}
-----	

As you can see I'm still able to exclude arbitrary matches (backslash
in the example) from text, then text is available to action. Finally
I just discard all the text with "text.setLength(_begin)". Thus
exclamaited rule (the one with ! mark) is seen to actions like ordinal
rule - the only difference is that text is not propogated. To put it
more formally - these two pairs of rules are not equivalent in current
ANTLR-2.7.2a2 (IMHO they should be identical):

----- first pair
STR: '"' ( (! c = ESCAPE) { text.append(c); } 
         | ~('\\' | '"')
         )*
     '"'
    ;

protected
ESCAPE returns [char c = 0]
 	: '\\'!
        '0'..'7' ('0'..'7' ('0'..'7')? )? 
        { c = scanOct($getText); } 
 	;

----- second pair
STR: '"' ( c = ESCAPE { text.append(c); } 
         | ~('\\' | '"')
         )*
     '"'
    ;

protected
ESCAPE! returns [char c = 0]
 	: '\\'!
        '0'..'7' 
        (options {warnWhenFollowAmbig = false;} : '0'..'7'
            (options {warnWhenFollowAmbig = false;} : '0'..'7')? )? 
        { c = scanOct($getText); } 
 	;
-----


--Ed 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From extern.thomas.pasch at volkswagen.de  Fri Mar  1 10:55:21 2002
From: extern.thomas.pasch at volkswagen.de (aanno)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Token Ranges in TreeParser: possible
Message-ID: <a5oiqp+53s4@eGroups.com>

Hello,

I tried the following: I fixed the token types with *TokenTypes.txt 
in a TreeParser. Everything just works fine except when I tried to 
use a TOKEN RANGE (ie. (TOKEN_1 .. TOKEN_2)). There is no complaint 
from ANTLR 2.7.1, but its generated code can't be compiled by javac. 
There 
is a line like:

match(TOKEN_1, TOKEN_2);

there match(..) is not a method of TreeParser.

This are my questions:

1. Is it possible to have token ranges at all or are ranges limited 
to lexers?
2. Is there a way to define the method match(..) so that the token 
range just works fine?
3. Is it the same for not matches like in (~TOKEN_1).

By the way, apart from this problem, I think ANTLR is a great tool.

Cheers,

Thomas



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From extern.thomas.pasch at volkswagen.de  Fri Mar  1 11:12:14 2002
From: extern.thomas.pasch at volkswagen.de (aanno)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Re: Token Ranges in TreeParser: possible
In-Reply-To: <a5oiqp+53s4@eGroups.com>
Message-ID: <a5ojqe+m67@eGroups.com>

Ohhps,

I certainly meant

matchRange(TOKEN_1, TOKEN_2);

Sorry for any inconviniance...

Thomas


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Christoph.Wedler at sap.com  Fri Mar  1 14:14:08 2002
From: Christoph.Wedler at sap.com (Christoph.Wedler@sap.com)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] antlr-mode 2.2; Emacs major mode for ANTLR grammar files
Message-ID: <q7uu1s00wcv.fsf@hw1020.wdf.sap-ag.de>

The following message is a courtesy copy of an article
that has been posted to gnu.emacs.sources as well.

Version 2.2 of ANTLR-mode has been uploaded.

  http://antlr-mode.sourceforge.net/

THE PROJECT WEB PAGE HAS BEEN MOVED.  PLEASE UPDATE YOUR LINKS!

The Emacs package ANTLR-Mode provides: syntax highlighting for ANTLR
grammar files, automatic indentation, menus containing rule/token
definitions and supported options and various other things like running
ANTLR from within Emacs.

A longer description can be found at the end of the posting after the
changes below.  This or an older version of ANTLR-Mode is distributed
with Emacs-21.1+ and ANTLR-2.7.1+.

Thanks to the people having sent patches & suggestions, see the
ChangeLog file in the distribution.

Have fun,
- Christoph


Changes with 2.2 vs 2.1:
 * Moved to SourceForge.net.  More details on web page.
 * Minor bug fixes.  Miscellaneous.


The package ANTLR-Mode makes Emacs the perfect IDE for the development
of ANTLR grammar files. ANTLR is a LL(k)-based recognition tool which
generates lexers, parsers and tree transformers in Java, C++ or Sather
and can be found at <http://www.antlr.org/>.

This package provides the following features: 

 * CONSISTENT INDENTATION. You do not have to insert or delete the
   correct amount of spaces or tabs manually to indent a line according
   to ANTLR's coding style: just press TAB. It is even done
   automatically if you insert an ANTLR syntax symbol (one of
   :;|&(){}). Use the menu to indent all lines in a selected region.

 * SYNTAX HIGHLIGHTING. When enabled, this mode highlights grammar
   symbols (syntax symbols and keywords: bold black, rule references:
   dark blue, token references: dark orange, rule/token definition: bold
   blue) and the code in actions.

 * CODE BROWSING. Find the definition of a rule, token, or grammar class
   by using the Index menu, a keyboard command or selecting an entry in
   the speedbar frame.

 * FAST NAVIGATION. Move to the next or previous rule definition or to
   the beginning or end of the rule body by one or two key strokes.

 * ACTION VISIBILITY. Control the visibility of less important code like
   actions.

 * OPTION SUPPORT. Insert or change one of ANTLR's options by a using
   the menu or a keyboard command. This mode knows the options supported
   by ANTLR, their allowed values and the correct position where to
   insert the option (and the surrounding options{} if necessary).

 * TOOL INVOCATION. Run ANTLR from within Emacs and find the error
   position by selecting the error message via the mouse or a keyboard
   command.

 * MAKEFILE CREATION. Show the makefile dependencies for all grammar and
   generated files in the current directory. For it, this mode considers
   the value of ANTLR's language option, import/export vocabularies and
   grammar inheritance.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From m_schellens at hotmail.com  Sat Mar  2 07:25:49 2002
From: m_schellens at hotmail.com (marc_schellens)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] include files
Message-ID: <a5qqtt+o5hu@eGroups.com>

What is the best way to realize include files
in ANTLR?
thanks,
marc


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From elim at tti-telecom.com  Sun Mar  3 08:10:38 2002
From: elim at tti-telecom.com (Eli Mesika)
Date: Mon Dec 20 16:14:42 2004
Subject: To Sinan --> RE: [antlr-interest] Simple questions
Message-ID: <8AABB7C1CB60BD4CB07A1976035C429D636656@exchange.tti-telecom.com>

Thanks for your quick respond.

Since I have another lexer rule :

ID
	:	(LETTER|UNDERSCORE)
(LETTER|UNDERSCORE|MINUS|DOT|DIGIT)*
	;

and I have added the following :

CATCH_LITERAL_TOKENS: "connect!"

I have to use k=8 in the lexer options.

Isn't that expensive ???
I used till now k=2 for my grammar, is there any other solution that doesn't
force me to increase k ???

Thanks


-----Original Message-----
From: Sinan [mailto:sinan.karasu@boeing.com]
Sent: Thursday, February 28, 2002 7:53 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Simple questions


Eli Mesika wrote:
> 
> HI folks
> 
> I have a real problem in using '!' in the Antlr Tokens section.
> I have tried Matthew's solution, it doesn't work.
> 
> Attached please find connect.g which describes the "connect" language.
> The language can recognize the following statement:
> (connect a b)
> However, the exact command is
> (connect! a b)
> if you are generating java files from it compiling and running Main it
will
> accept (connect a b)
> However if you change the CONNECT token in the .g file to "connect!" and
> test (connect! a b) you
> will get an error.
> 
> Am I missing something ???
> 
> Please HELP.
> Thanks


The way nextToken works in lexer, you have to have a rule that accepts
the token before a hash
table is consulted for keywords.

so do in the lexer

CATCH_LITERAL_TOKENS:  ( "connect!" | "whatever_else_i_want!@#") ;

so on...

you HAVE TO HAVE testLiterals=true; for this to work.....


I think nextToken should check the keyword  table after consuming 
until a special token ( such as WS ) is seen. But both Ter and Ric are
pretty busy these days.....

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From rradh at yahoo.com  Sun Mar  3 11:04:55 2002
From: rradh at yahoo.com (rradh)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Re: include files
In-Reply-To: <a5qqtt+o5hu@eGroups.com>
Message-ID: <a5ts4n+sm89@eGroups.com>

--- In antlr-interest@y..., "marc_schellens" <m_schellens@h...> wrote:
> What is the best way to realize include files
> in ANTLR?
> thanks,
> marc

a good place to start would be:

antlr-2.7.1/examples/cpp(or java)/includeFile/

regards
rajesh


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From m_schellens at hotmail.com  Sun Mar  3 23:54:18 2002
From: m_schellens at hotmail.com (marc_schellens)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] c++ memory leaks
Message-ID: <a5v97a+8bm0@eGroups.com>

Looking closer onto the generated lexer, one finds:

MyLexer::MyLexer(std::istream& in)
	: antlr::CharScanner(new antlr::CharBuffer(in))
{
	setCaseSensitive(false);
	initLiterals();
}

So here is a new CharBuffer alloccated on the heap.
But where is it freed?
MyLexer hasn't a destructor and ~CharScanner() does nothing.

I would say thats a memory leak, or what am I missing?
thanks,
marc


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Mar  4 01:14:11 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] c++ memory leaks
In-Reply-To: <a5v97a+8bm0@eGroups.com>; from m_schellens@hotmail.com on Mon, Mar 04, 2002 at 07:54:18AM -0000
References: <a5v97a+8bm0@eGroups.com>
Message-ID: <20020304101411.B806@cs.utwente.nl>

On Mon, Mar 04, 2002 at 07:54:18AM -0000, marc_schellens wrote:
> MyLexer::MyLexer(std::istream& in)
> 	: antlr::CharScanner(new antlr::CharBuffer(in))
> {
> 	setCaseSensitive(false);
> 	initLiterals();
> }
> 
> So here is a new CharBuffer alloccated on the heap.
> But where is it freed?
> MyLexer hasn't a destructor and ~CharScanner() does nothing.
> 
> I would say thats a memory leak, or what am I missing?

See LexerInputState.hpp

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Mon Mar  4 06:26:03 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:42 2004
Subject: To Sinan --> RE: [antlr-interest] Simple questions
Message-ID: <170826586F3BD511910D0200C110AAA801C58297@memail03.bco-home.com>

You don't have a '!' in your ID rule, so you would never match connect!
because you never match the !.  The way literals work is they are a table of
words and token numbers.  At the end of any rule with testLiterals=true on
the table is consulted and  the token type is changed if there was one in
the table.  You don't need k=8, you need your ID rule to have all the
characters that are possible in the literals table.

 ID 
optons { testLiterals = true; }
	:	(LETTER|UNDERSCORE)
 (LETTER|UNDERSCORE|MINUS|DOT|DIGIT|'!')*
 	;

Monty

> -----Original Message-----
> From: Eli Mesika [mailto:elim@tti-telecom.com]
> Sent: Sunday, March 03, 2002 8:11 AM
> To: 'antlr-interest@yahoogroups.com'
> Subject: To Sinan --> RE: [antlr-interest] Simple questions
> 
> 
> Thanks for your quick respond.
> 
> Since I have another lexer rule :
> 
> ID
> 	:	(LETTER|UNDERSCORE)
> (LETTER|UNDERSCORE|MINUS|DOT|DIGIT)*
> 	;
> 
> and I have added the following :
> 
> CATCH_LITERAL_TOKENS: "connect!"
> 
> I have to use k=8 in the lexer options.
> 
> Isn't that expensive ???
> I used till now k=2 for my grammar, is there any other 
> solution that doesn't
> force me to increase k ???
> 
> Thanks
> 
> 
> -----Original Message-----
> From: Sinan [mailto:sinan.karasu@boeing.com]
> Sent: Thursday, February 28, 2002 7:53 PM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Simple questions
> 
> 
> Eli Mesika wrote:
> > 
> > HI folks
> > 
> > I have a real problem in using '!' in the Antlr Tokens section.
> > I have tried Matthew's solution, it doesn't work.
> > 
> > Attached please find connect.g which describes the 
> "connect" language.
> > The language can recognize the following statement:
> > (connect a b)
> > However, the exact command is
> > (connect! a b)
> > if you are generating java files from it compiling and 
> running Main it
> will
> > accept (connect a b)
> > However if you change the CONNECT token in the .g file to 
> "connect!" and
> > test (connect! a b) you
> > will get an error.
> > 
> > Am I missing something ???
> > 
> > Please HELP.
> > Thanks
> 
> 
> The way nextToken works in lexer, you have to have a rule that accepts
> the token before a hash
> table is consulted for keywords.
> 
> so do in the lexer
> 
> CATCH_LITERAL_TOKENS:  ( "connect!" | "whatever_else_i_want!@#") ;
> 
> so on...
> 
> you HAVE TO HAVE testLiterals=true; for this to work.....
> 
> 
> I think nextToken should check the keyword  table after consuming 
> until a special token ( such as WS ) is seen. But both Ter and Ric are
> pretty busy these days.....
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From herculus6502 at yahoo.com.tw  Tue Mar  5 07:48:21 2002
From: herculus6502 at yahoo.com.tw (herculus6502)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] xtal serialization problem when file size >65536 bytes...
Message-ID: <a62pc5+1o2a@eGroups.com>

I did exactly what's mentioned in the docs:

Writer w = new OutputStreamWriter(System.out);
t.xmlSerialize(w);
w.write("\n");
w.flush();

But when the file size exceeds 65536 bytes, an exception is thrown,

something like java.lang.nullpointerexception...

Anyone ideas?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jshahguju at hotmail.com  Wed Mar  6 08:09:37 2002
From: jshahguju at hotmail.com (jshahguju)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Please Help. New to Compiler world.
Message-ID: <a65f01+pldf@eGroups.com>

Hi,

I am new to ANTLR - PARSER/ LEXER. We have input like

e.g. CYDEN/DA121201/TA2310

Where CY is CITY and DEN is its value. Same way DA is Date and then 
its value. So each token is separated by "/" and then each token has 
first 2 letter as a tag. 

After parsing I have to put that value in Java object. So, Creating 
java object and then setting value in that. 

Is it better to use ANTLR to handle this situation?. Or is it better 
to do it by coding?.

I have ANTLR man pdf file. But I am looking for more detail which is 
easy to digest for beginner. Is there any book available in market?. 

Please help.

Thanks
Jig


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed Mar  6 09:51:50 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] ignoring lexer rules
References: <usn7ky0a0.fsf@swes.saren.ru>
Message-ID: <3C865736.686CBF5B@boeing.com>

Ed Sinjiashvili wrote:
> 
> Hi,
> 
> I've tried to ask Terence about this issue and he pointed me to this
> ML. So here I am. Suppose I have the following grammar(that describes
> literal strings with escaped octal numbers inside):

I would do something like:

import antlr.*;


public class MyTokenStreamSelector extends TokenStreamSelector {
	/** The set of token types to discard */

	public MyTokenStreamSelector() {
		super();
	}

	public Token nextToken() throws TokenStreamException {
		for(;;;){
			try {
				Token tok = super.nextToken();

				if(tok.getType()==MyParser.STRING){
					//code to replace the octal stuff maybe regular expressions.
				...........
				}

				//System.out.println("returning:"+tok.getType()+":"+tok);
				return tok;
			}
			catch (TokenStreamRetryException r) {
				// just retry "forever"
			}
		}
	}
}

------------------------
And then in your MyParser.g



	private MyTokenStreamSelector filter=null;
	
	public MyParser(MyTokenStreamSelector lexer) {
  		this((TokenStream)lexer);
		filter=lexer;
	}


------------------
and where you instantiate Parser/Lexer etc....


 public static MyTokenStreamSelector selector = new
MyTokenStreamSelector();


// notify selector about starting lexer; name for convenience
		selector.addInputStream(myMainLexer, "main");
		selector.select("main"); // start with main P lexer

		// Create a parser that reads from the scanner
		myParser = new MyParser(selector);

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From altugbayram_2000 at yahoo.com  Fri Mar  8 07:03:32 2002
From: altugbayram_2000 at yahoo.com (Altuð Bayram)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] c++ compilation error
Message-ID: <001701c1c6b2$6f241ac0$cb92afc3@freddy>

Hi,
I'm trying to build c++ lib of antlr-2.7.2a2 on Linux 2.4.x with gcc 3.x
And compiler given following error:

Building CharScanner.o
In file included from CharScanner.cpp:33:
../antlr/CharScanner.hpp: In member function `virtual int
   antlr::CharScanner::toLower(int) const':
../antlr/CharScanner.hpp:407: `tolower' undeclared (first use this function)
../antlr/CharScanner.hpp:407: (Each undeclared identifier is reported only once
   for each function it appears in.)
make[4]: *** [CharScanner.o] Error 1

Building MismatchedCharException.o
In file included from MismatchedCharException.cpp:33:
../antlr/CharScanner.hpp: In member function `virtual int
   antlr::CharScanner::toLower(int) const':
../antlr/CharScanner.hpp:407: `tolower' undeclared (first use this function)
../antlr/CharScanner.hpp:407: (Each undeclared identifier is reported only once
   for each function it appears in.)
make[4]: *** [MismatchedCharException.o] Error 1

Building NoViableAltForCharException.o
In file included from ../antlr/NoViableAltForCharException.hpp:37,
                 from NoViableAltForCharException.cpp:33:
../antlr/CharScanner.hpp: In member function `virtual int
   antlr::CharScanner::toLower(int) const':
../antlr/CharScanner.hpp:407: `tolower' undeclared (first use this function)
../antlr/CharScanner.hpp:407: (Each undeclared identifier is reported only once
   for each function it appears in.)
make[4]: *** [NoViableAltForCharException.o] Error 1

Altuð Bayram



_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From casellas at infres.enst.fr  Fri Mar  8 07:36:36 2002
From: casellas at infres.enst.fr (ramon_casellas)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Re: c++ compilation error
In-Reply-To: <001701c1c6b2$6f241ac0$cb92afc3@freddy>
Message-ID: <a6alq4+4fc8@eGroups.com>

Quick Workaround:

Edit CharScanner.hpp
Add #include <cctype>
recompile

R.

Ps: I am quite sure there are better ways (e.g. regarding the 
autoconf or similar) but this should do the trick



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From joshuamather at hotmail.com  Fri Mar  8 10:03:23 2002
From: joshuamather at hotmail.com (jmather12000)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Newbie: Running The examples in VC6
Message-ID: <a6audb+h4je@eGroups.com>

Has anyone run the examples in vc6 and/or converted one of the 
makefiles over.  If you have any tips on how to run the example like 
calc, could you please give me any pointers and/or makefiles that you 
used.  Thanks,

JM


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jaymallick at yahoo.com  Fri Mar  8 23:52:00 2002
From: jaymallick at yahoo.com (jaymallick)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] I need help
Message-ID: <a6cev0+5nsk@eGroups.com>

Hi
I m looking for LL(1) parser. If anybody has it then please email me 
that project. I really appericate your help. Thank you


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From altugbayram_2000 at yahoo.com  Sat Mar  9 00:48:50 2002
From: altugbayram_2000 at yahoo.com (Altuð Bayram)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Re: c++ compilation error
References: <a6alq4+4fc8@eGroups.com>
Message-ID: <002001c1c751$1c6760e0$3692afc3@freddy>

Building OK. Thanks.
Altuð Bayram
----- Original Message -----
From: "ramon_casellas" <casellas@infres.enst.fr>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, March 08, 2002 5:36 PM
Subject: [antlr-interest] Re: c++ compilation error


> Quick Workaround:
>
> Edit CharScanner.hpp
> Add #include <cctype>
> recompile
>
> R.
>
> Ps: I am quite sure there are better ways (e.g. regarding the
> autoconf or similar) but this should do the trick
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>



_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From altugbayram_2000 at yahoo.com  Sat Mar  9 01:58:10 2002
From: altugbayram_2000 at yahoo.com (Altuð Bayram)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] c++ lib compilation on win32 with borland c++ 5.5
Message-ID: <002101c1c751$1e3431a0$3692afc3@freddy>

Hi,
I'm modified /lib/cpp/contrib/bcb4/antlr.bpr file.
added to CFLAG1  -A (Ansi compatibility) and removed from OBJFILES antlr.obj
because not required
and building, compiler given folowing error:

Error E2268 ..\..\..\cpp\antlr/CharScanner.hpp 519: Call to undefined function '
stricmp' in function CharScannerLiteralsLess::operator ()(const std::string &,co
nst std::string &) const
*** 1 errors in Compile ***

stricmp func. not included with ansi option.
I'm modified in /lib/cpp/antlr/config.hpp file relevant lines as:

/*****************************************************************************/
/*{{{ Inprise C++ Builder 3.0
 *****************************************************************************/
#ifdef __BCPLUSPLUS__
# define NO_TEMPLATE_PARTS
//# define NO_STRCASECMP
# define ANTLR_REALLY_NO_STRCASECMP
# undef ANTLR_CCTYPE_NEEDS_STD
#endif // End of C++ Builder 3.0
/*}}}*/

Building OK.
Altuð Bayram

Ps: sorry for my poor english.



_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pc_poppe at hotmail.com  Sat Mar  9 02:04:31 2002
From: pc_poppe at hotmail.com (poppe chris)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] comments
Message-ID: <F463C3FcX4Zr7MSeJ280000fa77@hotmail.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020309/7018c5ad/attachment.html
From kts81932 at yahoo.co.kr  Mon Mar 11 00:49:41 2002
From: kts81932 at yahoo.co.kr (kts81932)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] How can i get ML_COMMENT
Message-ID: <a6hr35+6pe9@eGroups.com>

NIce to meet you.
recently, i used antlr_2.1.7..

single line comment is defined as below..

SL_COMMENT
         : "//" (~'\n')* '\n"
           { _ttype = antlr::Token::SKIP; newline();}
          ;
to get SL_COMMENT in output, modified as below...

SL_COMMENT
         : "//" (~'\n')* '\n"
           { newline();}
          ;

same way, i modified ML_COMMENT
( delete  { _ttype = antlr::Token::SKIP: }...)
but i can not get ML_COMMENT in output.. 

to get ML_COMMENT in output
What shall i do..
thanks..

ML_COMMENT
	: "/*"
		( {LA(2) != '/'}? '*'
		| '\n' { newline(); }
		| ~('*' | '\n')
		)+
		"*/"
		{ _ttype = antlr::Token::SKIP; }
		;



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mtiller at ford.com  Mon Mar 11 10:03:27 2002
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Build Question
Message-ID: <200203111806.g2BI64O31594@dymwsm09.mailwatch.com>

I am having a problem with creating a nice build structure for a project I'm working on and I'm hoping somebody can point out a way around this.
 
I have a grammar, call it "base.g".  Now, I'd like to preserve the ability to use "base.g" to generate either a C++ parser or a Java parser.  So, I've made "base.g" language neutral.  Now, I've created two more grammars called "base_cpp.g" and "base_java.g" that specify language and header file information.
 
So far so good I imagine (although I haven't gotten far enough to figure out if this is a good idea yet).  The problem I'm running into is that I imagine these grammars may be shared among several distinct applications.  For that reason, I keep the ".g" files away from everything else.  So when I run ANTLR, the Makefile rule looks like this:
 
 $(ANTLR) -glib $(ROOTDIR)/base.g -o $(GENDIR) $(ROOTDIR)/base_java.g
 
where GENDIR is the location for the generated code and ROOTDIR is where I keep the .g files.  This way, I can generate the set of source files for each project based on the grammars.
 
The problem is that when you use grammar inheritance, ANTLR expands the complete grammar into "expandedbase_java.g".  Except that it actually names it "expanded$(ROOTDIR)/base_java.g" (where ROOTDIR is actually expanded).  In other words, it assumes that the ".g" is in the current directory.
 
Any suggestions about how to avoid this problem?  I'm surprised that I can't explicitly specify the name of the expanded grammar.  That would have been a nice option.
 
--
Mike
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020311/f47ba3ef/attachment.html
From open.zone at virgin.net  Mon Mar 11 12:38:31 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Problem with token names that are also keywords in target language (e.g. C#)
Message-ID: <a6j4k8+tr55@eGroups.com>

I am working on the CSharpCodeGenerator based on the 
JavaCodeGenerator.

There is an issue because variable names in the generated Parser are 
sometimes C# keywords (e.g. "in"). I have investigated and, the names 
are "inherited" from the grammar file. The java.g file in 
dir 'examples' has "in" for instance.

Is it possible to do something globally, perhaps a prefix to all such 
names?. Could someone more familiar with the code do this please?. I 
am still on 2.7.1 so please post the changes here in addition to 
applying it to 2.7.2a2......

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Mar 12 00:50:39 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Build Question
In-Reply-To: <200203111806.g2BI64O31594@dymwsm09.mailwatch.com>; from mtiller@ford.com on Mon, Mar 11, 2002 at 01:03:27PM -0500
References: <200203111806.g2BI64O31594@dymwsm09.mailwatch.com>
Message-ID: <20020312095037.A680@cs.utwente.nl>

On Mon, Mar 11, 2002 at 01:03:27PM -0500, Tiller, Michael (M.M.) wrote:
> So far so good I imagine (although I haven't gotten far enough to figure
> out if this is a good idea yet).  The problem I'm running into is that I
> imagine these grammars may be shared among several distinct applications.
> For that reason, I keep the ".g" files away from everything else.  So when
> I run ANTLR, the Makefile rule looks like this:
>  
>  $(ANTLR) -glib $(ROOTDIR)/base.g -o $(GENDIR) $(ROOTDIR)/base_java.g
>  
> where GENDIR is the location for the generated code and ROOTDIR is where I
> keep the .g files.  This way, I can generate the set of source files for
> each project based on the grammars.
>  
> The problem is that when you use grammar inheritance, ANTLR expands the
> complete grammar into "expandedbase_java.g".  Except that it actually names
> it "expanded$(ROOTDIR)/base_java.g" (where ROOTDIR is actually expanded).
> In other words, it assumes that the ".g" is in the current directory.
>  
> Any suggestions about how to avoid this problem?  I'm surprised that I
> can't explicitly specify the name of the expanded grammar.  That would have
> been a nice option.

Been there done that. Doesn't work. It needs some serious fixing in antlr
to make this behave well. I already looked at it when I ran into it, it's
not completely easy to fix in antlr. I currently copy .g files around with
Make rules to get the right behaviour.

I personally must say that I found antlr's grammar inheritance pretty
useless (gives to little control over what you want to override, in the end
you end up copying action code in a complicated way so I figured I'd better
copy stuff around in an easy way). YMMV though I suspect some ppl on the
list may have gotten nice results with it.

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Mar 12 05:11:15 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Re: Problem with token names that are also keywords in target language (e.g. C#)
In-Reply-To: <a6j4k8+tr55@eGroups.com>
Message-ID: <a6kupj+bu5j@eGroups.com>

--- In antlr-interest@y..., "micheal_jor" <open.zone@v...> wrote:

> Is it possible to do something globally, perhaps a prefix to all 
such 
> names?. Could someone more familiar with the code do this please?. 
I 
> am still on 2.7.1 so please post the changes here in addition to 
> applying it to 2.7.2a2......

Or should I just take the easy route, suggest/submit a change to the 
affected grammars and we can assume that grammars need to be changed 
in this situations rather than fixing it in ANTLR?

I haven't had a reply [yet] and I want to finish the code generator 
ASAP before RealLife(tm) finds a way to deny me any further time.....

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Mar 12 05:58:58 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Problem with token names that are also keywords in target language (e.g. C#)
In-Reply-To: <a6j4k8+tr55@eGroups.com>; from open.zone@virgin.net on Mon, Mar 11, 2002 at 08:38:31PM -0000
References: <a6j4k8+tr55@eGroups.com>
Message-ID: <20020312145858.C680@cs.utwente.nl>

On Mon, Mar 11, 2002 at 08:38:31PM -0000, micheal_jor wrote:
> There is an issue because variable names in the generated Parser are 
> sometimes C# keywords (e.g. "in"). I have investigated and, the names 
> are "inherited" from the grammar file. The java.g file in 
> dir 'examples' has "in" for instance.
> 
> Is it possible to do something globally, perhaps a prefix to all such 
> names?. Could someone more familiar with the code do this please?. I 
> am still on 2.7.1 so please post the changes here in addition to
> applying it to 2.7.2a2......

If this is some example files you have ported to C# then I'd say change the
examples. Doing a global prefixing for everything java/c++ just because C#
does something different seems not practical to me. Or do you mean some of
the variable names which are generated by some of the generic parts of
antlr?

Or it may be that I'm completely missing the point.

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
	  Innovation makes enemies of all those who prospered under the old
	regime, and only lukewarm support is forthcoming from those who would
					prosper under the new. --- Niccolò Machiavelli


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Mar 12 06:18:35 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Re: Problem with token names that are also keywords in target language (e.g. C#)
In-Reply-To: <20020312145858.C680@cs.utwente.nl>
Message-ID: <a6l2nr+if56@eGroups.com>

--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:

> If this is some example files you have ported to C# then I'd say 
change the
> examples. Doing a global prefixing for everything java/c++ just 
because C#
> does something different seems not practical to me. Or do you mean 
some of
> the variable names which are generated by some of the generic parts 
of
> antlr?
> 
> Or it may be that I'm completely missing the point.

The culprit grammar files are the existing examples (e.g. Java 
grammar) supplied with ANTLR. Some of the variables names that are 
generated in the Parser are keywords in C#. This could happen to some 
other language in the future too I would guess....

I am happy for someone to just change the affected shared example 
grammar files (for all languages obviously so we don't have 
incompatible branches - beyong the language option) rather than 
ANTLR. Or I could submit a patch to the examples in the C# dir (who 
keeps tracks of changes in the examples accross languages?).

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From elim at tti-telecom.com  Tue Mar 12 06:27:45 2002
From: elim at tti-telecom.com (Eli Mesika)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] LISP like grammar ,Exception handling,  Please HELP
Message-ID: <8AABB7C1CB60BD4CB07A1976035C429D6366B2@exchange.tti-telecom.com>

HI folks
 
1)
 
HI have a LISP like grammar to parse named CONNECT.
 
The language actually describes a graphical representation of a network,
however not all statements in the language have graphical meaning.
 
I am building an editor that can read CONNECT files and represent its
content graphically.
 
Actually, my parser should parse only the graphical commands but it still
should preserve the non graphical commands in order to save the CONNECT file
properly after editing.
 
I am looking for a way to get those non graphical commands as a string so I
will be able to restore it.
 
I have tried to use an IGNORE rule, but I don't know how to match a complete
LISP statement ( a statement can be constructed when number of '(' = number
of ')'   )
 
Is there a way to force matching rules in  certain order, so I can add a
rule that match all non graphical commands as the last rule.
 
2)
 
Exception handling 
 
How to clean up after typing an illegal token, I am getting an exception an
from that point my parser does not recognize anything .
 
 
Thanks for your kind help
 
Eli
 
 
 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020312/c284bdd3/attachment.html
From klaren at cs.utwente.nl  Tue Mar 12 06:43:33 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Re: Problem with token names that are also keywords in target language (e.g. C#)
In-Reply-To: <a6l2nr+if56@eGroups.com>; from open.zone@virgin.net on Tue, Mar 12, 2002 at 02:18:35PM -0000
References: <20020312145858.C680@cs.utwente.nl> <a6l2nr+if56@eGroups.com>
Message-ID: <20020312154333.E680@cs.utwente.nl>

Hi,

On Tue, Mar 12, 2002 at 02:18:35PM -0000, micheal_jor wrote:
> The culprit grammar files are the existing examples (e.g. Java
> grammar) supplied with ANTLR. Some of the variables names that are
> generated in the Parser are keywords in C#. This could happen to some
> other language in the future too I would guess....

Yah but planning ahead on non implemented languages seems a bit overdone.
At least I still have no clue what variables you mean exactly. And if
patching should be done in something else than input files for the
examples.

> I am happy for someone to just change the affected shared example
> grammar files (for all languages obviously so we don't have
> incompatible branches - beyong the language option) rather than
> ANTLR. Or I could submit a patch to the examples in the C# dir

Think that shared is a big word in the context of the examples. Most of the
examples are quite incompatible between Java/C++. Maybe it's better for
Java/C# ?

> (who keeps tracks of changes in the examples accross languages?).

The language maintainers might port changes done in examples. In a very
rare case someone posts a patch for all examples. In general nobody keeps
track of this stuff. At least I noticed no such activity since starting to
work on antlr.

Easiest is to just make the changes for the C# dir I guess.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mtiller at ford.com  Tue Mar 12 06:47:59 2002
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Build Question
Message-ID: <200203121459.g2CEx0T29903@dymwsm09.mailwatch.com>

A few followup comments...

I was hoping to support both Java and C++ for future development.  It seems like this is impractical for the following reasons:

1) Trying to write a language independent way comment rule that "eats" comments doesn't seem possible.
2) Perhaps for misguided reasons, I'd like to be able to add "child" nodes to my AST during tree construction.  It isn't clear to me how that can be done in a language neutral way.  It would be nice if ANTLR's tree construction shorthand were extended to allow this.
3) The target language has to be specified in the grammar (couldn't this be a command line option?)
4) The difficulties with trying to do grammar inheritance (see below).

This isn't really criticism (ANTLR is a great tool).  Consider it ideas for future releases.  Because of these problems, I think I'm going to have to abandon my hope of a language neutral grammar and just start plugging in my C++ code.

--
Mike

> -----Original Message-----
> From: Ric Klaren [mailto:klaren@cs.utwente.nl]
> Sent: Tuesday, March 12, 2002 3:51 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Build Question
> 
> 
> On Mon, Mar 11, 2002 at 01:03:27PM -0500, Tiller, Michael 
> (M.M.) wrote:
> > So far so good I imagine (although I haven't gotten far 
> enough to figure
> > out if this is a good idea yet).  The problem I'm running 
> into is that I
> > imagine these grammars may be shared among several distinct 
> applications.
> > For that reason, I keep the ".g" files away from everything 
> else.  So when
> > I run ANTLR, the Makefile rule looks like this:
> >  
> >  $(ANTLR) -glib $(ROOTDIR)/base.g -o $(GENDIR) 
> $(ROOTDIR)/base_java.g
> >  
> > where GENDIR is the location for the generated code and 
> ROOTDIR is where I
> > keep the .g files.  This way, I can generate the set of 
> source files for
> > each project based on the grammars.
> >  
> > The problem is that when you use grammar inheritance, ANTLR 
> expands the
> > complete grammar into "expandedbase_java.g".  Except that 
> it actually names
> > it "expanded$(ROOTDIR)/base_java.g" (where ROOTDIR is 
> actually expanded).
> > In other words, it assumes that the ".g" is in the current 
> directory.
> >  
> > Any suggestions about how to avoid this problem?  I'm 
> surprised that I
> > can't explicitly specify the name of the expanded grammar.  
> That would have
> > been a nice option.
> 
> Been there done that. Doesn't work. It needs some serious 
> fixing in antlr
> to make this behave well. I already looked at it when I ran 
> into it, it's
> not completely easy to fix in antlr. I currently copy .g 
> files around with
> Make rules to get the right behaviour.
> 
> I personally must say that I found antlr's grammar inheritance pretty
> useless (gives to little control over what you want to 
> override, in the end
> you end up copying action code in a complicated way so I 
> figured I'd better
> copy stuff around in an easy way). YMMV though I suspect some 
> ppl on the
> list may have gotten nice results with it.
> 
> Ric
> --
> -----+++++****************************************************
> *+++++++++-------
>     ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 
> 4893722  ----
> -----+++++****************************************************
> *+++++++++-------
>  Time what is time - I wish I knew how to tell You why - It 
> hurts to know -
>           Aren't we machines - Time what is time - Unlock the door
>                - And see the truth - Then time is time again
>                 From: 'Time what is Time' by Blind Guardian
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Tue Mar 12 07:08:05 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Build Question
Message-ID: <170826586F3BD511910D0200C110AAA801C582C6@memail03.bco-home.com>

One way to accomplish what you wish would be to do some preprocessing.  I'm
particularly fond of the "noweb" literate programming tool, which I used to
build the GCC grammar.  It allowed me to reuse grammar fragments and then
add my own actions.  More importantly for me it allowed me to keep related
rules in the same area of the noweb file, so my declaration rules for the
ANSI C Parser, GCC Parser, GCC tree walker, GCC tree emitter were all
together, and while debugging when I modified one rule I was right there to
make sure the other rules were changed in sync.

Antlr subclassing is most useful when there are no actions to subclass.  So
I use it for a tree grammar that I subclass with actions for specific passes
of a translator.  Subclassing a grammar with actions would be almost
useless.  In fact I would reorganize my grammars as a literate program so I
could reuse parts as I wish, it ends up being more flexible than antlr's
subclassing.

Monty

> -----Original Message-----
> From: Tiller, Michael (M.M.) [mailto:mtiller@ford.com]
> Sent: Tuesday, March 12, 2002 6:48 AM
> To: 'antlr-interest@yahoogroups.com'
> Subject: RE: [antlr-interest] Build Question
> 
> 
> A few followup comments...
> 
> I was hoping to support both Java and C++ for future 
> development.  It seems like this is impractical for the 
> following reasons:
> 
> 1) Trying to write a language independent way comment rule 
> that "eats" comments doesn't seem possible.
> 2) Perhaps for misguided reasons, I'd like to be able to add 
> "child" nodes to my AST during tree construction.  It isn't 
> clear to me how that can be done in a language neutral way.  
> It would be nice if ANTLR's tree construction shorthand were 
> extended to allow this.
> 3) The target language has to be specified in the grammar 
> (couldn't this be a command line option?)
> 4) The difficulties with trying to do grammar inheritance (see below).
> 
> This isn't really criticism (ANTLR is a great tool).  
> Consider it ideas for future releases.  Because of these 
> problems, I think I'm going to have to abandon my hope of a 
> language neutral grammar and just start plugging in my C++ code.
> 
> --
> Mike
> 
> > -----Original Message-----
> > From: Ric Klaren [mailto:klaren@cs.utwente.nl]
> > Sent: Tuesday, March 12, 2002 3:51 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: Re: [antlr-interest] Build Question
> > 
> > 
> > On Mon, Mar 11, 2002 at 01:03:27PM -0500, Tiller, Michael 
> > (M.M.) wrote:
> > > So far so good I imagine (although I haven't gotten far 
> > enough to figure
> > > out if this is a good idea yet).  The problem I'm running 
> > into is that I
> > > imagine these grammars may be shared among several distinct 
> > applications.
> > > For that reason, I keep the ".g" files away from everything 
> > else.  So when
> > > I run ANTLR, the Makefile rule looks like this:
> > >  
> > >  $(ANTLR) -glib $(ROOTDIR)/base.g -o $(GENDIR) 
> > $(ROOTDIR)/base_java.g
> > >  
> > > where GENDIR is the location for the generated code and 
> > ROOTDIR is where I
> > > keep the .g files.  This way, I can generate the set of 
> > source files for
> > > each project based on the grammars.
> > >  
> > > The problem is that when you use grammar inheritance, ANTLR 
> > expands the
> > > complete grammar into "expandedbase_java.g".  Except that 
> > it actually names
> > > it "expanded$(ROOTDIR)/base_java.g" (where ROOTDIR is 
> > actually expanded).
> > > In other words, it assumes that the ".g" is in the current 
> > directory.
> > >  
> > > Any suggestions about how to avoid this problem?  I'm 
> > surprised that I
> > > can't explicitly specify the name of the expanded grammar.  
> > That would have
> > > been a nice option.
> > 
> > Been there done that. Doesn't work. It needs some serious 
> > fixing in antlr
> > to make this behave well. I already looked at it when I ran 
> > into it, it's
> > not completely easy to fix in antlr. I currently copy .g 
> > files around with
> > Make rules to get the right behaviour.
> > 
> > I personally must say that I found antlr's grammar 
> inheritance pretty
> > useless (gives to little control over what you want to 
> > override, in the end
> > you end up copying action code in a complicated way so I 
> > figured I'd better
> > copy stuff around in an easy way). YMMV though I suspect some 
> > ppl on the
> > list may have gotten nice results with it.
> > 
> > Ric
> > --
> > -----+++++****************************************************
> > *+++++++++-------
> >     ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 
> > 4893722  ----
> > -----+++++****************************************************
> > *+++++++++-------
> >  Time what is time - I wish I knew how to tell You why - It 
> > hurts to know -
> >           Aren't we machines - Time what is time - Unlock the door
> >                - And see the truth - Then time is time again
> >                 From: 'Time what is Time' by Blind Guardian
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mtiller at ford.com  Tue Mar 12 07:12:48 2002
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Build Question
Message-ID: <200203121514.g2CFEYT32269@dymwsm09.mailwatch.com>

Could you post an example of how this is done?

--
Mike

> -----Original Message-----
> From: mzukowski@bco.com [mailto:mzukowski@bco.com]
> Sent: Tuesday, March 12, 2002 10:08 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Build Question
> 
> 
> One way to accomplish what you wish would be to do some 
> preprocessing.  I'm
> particularly fond of the "noweb" literate programming tool, 
> which I used to
> build the GCC grammar.  It allowed me to reuse grammar 
> fragments and then
> add my own actions.  More importantly for me it allowed me to 
> keep related
> rules in the same area of the noweb file, so my declaration 
> rules for the
> ANSI C Parser, GCC Parser, GCC tree walker, GCC tree emitter were all
> together, and while debugging when I modified one rule I was 
> right there to
> make sure the other rules were changed in sync.
> 
> Antlr subclassing is most useful when there are no actions to 
> subclass.  So
> I use it for a tree grammar that I subclass with actions for 
> specific passes
> of a translator.  Subclassing a grammar with actions would be almost
> useless.  In fact I would reorganize my grammars as a 
> literate program so I
> could reuse parts as I wish, it ends up being more flexible 
> than antlr's
> subclassing.
> 
> Monty
> 
> > -----Original Message-----
> > From: Tiller, Michael (M.M.) [mailto:mtiller@ford.com]
> > Sent: Tuesday, March 12, 2002 6:48 AM
> > To: 'antlr-interest@yahoogroups.com'
> > Subject: RE: [antlr-interest] Build Question
> > 
> > 
> > A few followup comments...
> > 
> > I was hoping to support both Java and C++ for future 
> > development.  It seems like this is impractical for the 
> > following reasons:
> > 
> > 1) Trying to write a language independent way comment rule 
> > that "eats" comments doesn't seem possible.
> > 2) Perhaps for misguided reasons, I'd like to be able to add 
> > "child" nodes to my AST during tree construction.  It isn't 
> > clear to me how that can be done in a language neutral way.  
> > It would be nice if ANTLR's tree construction shorthand were 
> > extended to allow this.
> > 3) The target language has to be specified in the grammar 
> > (couldn't this be a command line option?)
> > 4) The difficulties with trying to do grammar inheritance 
> (see below).
> > 
> > This isn't really criticism (ANTLR is a great tool).  
> > Consider it ideas for future releases.  Because of these 
> > problems, I think I'm going to have to abandon my hope of a 
> > language neutral grammar and just start plugging in my C++ code.
> > 
> > --
> > Mike
> > 
> > > -----Original Message-----
> > > From: Ric Klaren [mailto:klaren@cs.utwente.nl]
> > > Sent: Tuesday, March 12, 2002 3:51 AM
> > > To: antlr-interest@yahoogroups.com
> > > Subject: Re: [antlr-interest] Build Question
> > > 
> > > 
> > > On Mon, Mar 11, 2002 at 01:03:27PM -0500, Tiller, Michael 
> > > (M.M.) wrote:
> > > > So far so good I imagine (although I haven't gotten far 
> > > enough to figure
> > > > out if this is a good idea yet).  The problem I'm running 
> > > into is that I
> > > > imagine these grammars may be shared among several distinct 
> > > applications.
> > > > For that reason, I keep the ".g" files away from everything 
> > > else.  So when
> > > > I run ANTLR, the Makefile rule looks like this:
> > > >  
> > > >  $(ANTLR) -glib $(ROOTDIR)/base.g -o $(GENDIR) 
> > > $(ROOTDIR)/base_java.g
> > > >  
> > > > where GENDIR is the location for the generated code and 
> > > ROOTDIR is where I
> > > > keep the .g files.  This way, I can generate the set of 
> > > source files for
> > > > each project based on the grammars.
> > > >  
> > > > The problem is that when you use grammar inheritance, ANTLR 
> > > expands the
> > > > complete grammar into "expandedbase_java.g".  Except that 
> > > it actually names
> > > > it "expanded$(ROOTDIR)/base_java.g" (where ROOTDIR is 
> > > actually expanded).
> > > > In other words, it assumes that the ".g" is in the current 
> > > directory.
> > > >  
> > > > Any suggestions about how to avoid this problem?  I'm 
> > > surprised that I
> > > > can't explicitly specify the name of the expanded grammar.  
> > > That would have
> > > > been a nice option.
> > > 
> > > Been there done that. Doesn't work. It needs some serious 
> > > fixing in antlr
> > > to make this behave well. I already looked at it when I ran 
> > > into it, it's
> > > not completely easy to fix in antlr. I currently copy .g 
> > > files around with
> > > Make rules to get the right behaviour.
> > > 
> > > I personally must say that I found antlr's grammar 
> > inheritance pretty
> > > useless (gives to little control over what you want to 
> > > override, in the end
> > > you end up copying action code in a complicated way so I 
> > > figured I'd better
> > > copy stuff around in an easy way). YMMV though I suspect some 
> > > ppl on the
> > > list may have gotten nice results with it.
> > > 
> > > Ric
> > > --
> > > -----+++++****************************************************
> > > *+++++++++-------
> > >     ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 
> > > 4893722  ----
> > > -----+++++****************************************************
> > > *+++++++++-------
> > >  Time what is time - I wish I knew how to tell You why - It 
> > > hurts to know -
> > >           Aren't we machines - Time what is time - Unlock the door
> > >                - And see the truth - Then time is time again
> > >                 From: 'Time what is Time' by Blind Guardian
> > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to 
> > > http://docs.yahoo.com/info/terms/ 
> > > 
> > > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Mar 12 07:23:13 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Build Question
In-Reply-To: <200203121459.g2CEx0T29903@dymwsm09.mailwatch.com>; from mtiller@ford.com on Tue, Mar 12, 2002 at 09:47:59AM -0500
References: <200203121459.g2CEx0T29903@dymwsm09.mailwatch.com>
Message-ID: <20020312162312.G680@cs.utwente.nl>

Hi,

On Tue, Mar 12, 2002 at 09:47:59AM -0500, Tiller, Michael (M.M.) wrote:
> I was hoping to support both Java and C++ for future development.  It seems
> like this is impractical for the following reasons:
>
> 1) Trying to write a language independent way comment rule that "eats"
> comments doesn't seem possible.

In current antlr you can plainly forget it to write language independent
stuff without reverting to hackery.

> 2) Perhaps for misguided reasons, I'd like to be able to add "child" nodes
> to my AST during tree construction.  It isn't clear to me how that can be
> done in a language neutral way.  It would be nice if ANTLR's tree
> construction shorthand were extended to allow this.

Maybe the fabled new AST construction stuff will make this possible.

> 3) The target language has to be specified in the grammar (couldn't this be
> a command line option?)

You never talked to Ter about commandline options did you ;) There's more
of these things I personally would like to see as commandline options,
#line generation options stuff like that. Antlr is because of this quite
'make' unfriendly.

Also building different configurations without getting dirty is because of
this a problem. I'd love commandline options. Terence refuses (I'm told a
pccts trauma ;) ).

> 4) The difficulties with trying to do grammar inheritance (see below).

> This isn't really criticism (ANTLR is a great tool).  Consider it ideas for
> future releases.  

ANTLR's pretty great, but it isn't perfect..

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Mar 12 07:41:55 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Re: Problem with token names that are also keywords in target language (e.g. C#)
In-Reply-To: <20020312154333.E680@cs.utwente.nl>
Message-ID: <a6l7k3+s7sf@eGroups.com>

--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:

> At least I still have no clue what variables you mean exactly. And 
if
> patching should be done in something else than input files for the
> examples.

I gave an example - the token "in" (as on INCrement) results in a 
vraible named "in". "in" is a keyword in C# ( as in "foreach <var> in 
<enumerator>").

> Think that shared is a big word in the context of the examples. 
Most of the
> examples are quite incompatible between Java/C++. Maybe it's better 
for
> Java/C# ?

OK. They are different anyhows. Should have guessed with all the 
semantic action snippets.... ;-)

> > (who keeps tracks of changes in the examples accross languages?).
> 
> The language maintainers might port changes done in examples. In a 
very
> rare case someone posts a patch for all examples. In general nobody 
keeps
> track of this stuff. At least I noticed no such activity since 
starting to
> work on antlr.
> 
> Easiest is to just make the changes for the C# dir I guess.

Done. Thanks.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Tue Mar 12 08:56:24 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Build Question
Message-ID: <170826586F3BD511910D0200C110AAA801C582C8@memail03.bco-home.com>

Yes, I will write up a simple example in the next few days, as I'm swamped
right now.  In the meantime I can send you the noweb file I used for the gcc
stuff if you like.

Monty

> -----Original Message-----
> From: Tiller, Michael (M.M.) [mailto:mtiller@ford.com]
> Sent: Tuesday, March 12, 2002 7:13 AM
> To: 'antlr-interest@yahoogroups.com'
> Subject: RE: [antlr-interest] Build Question
> 
> 
> Could you post an example of how this is done?
> 
> --
> Mike
> 
> > -----Original Message-----
> > From: mzukowski@bco.com [mailto:mzukowski@bco.com]
> > Sent: Tuesday, March 12, 2002 10:08 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: RE: [antlr-interest] Build Question
> > 
> > 
> > One way to accomplish what you wish would be to do some 
> > preprocessing.  I'm
> > particularly fond of the "noweb" literate programming tool, 
> > which I used to
> > build the GCC grammar.  It allowed me to reuse grammar 
> > fragments and then
> > add my own actions.  More importantly for me it allowed me to 
> > keep related
> > rules in the same area of the noweb file, so my declaration 
> > rules for the
> > ANSI C Parser, GCC Parser, GCC tree walker, GCC tree 
> emitter were all
> > together, and while debugging when I modified one rule I was 
> > right there to
> > make sure the other rules were changed in sync.
> > 
> > Antlr subclassing is most useful when there are no actions to 
> > subclass.  So
> > I use it for a tree grammar that I subclass with actions for 
> > specific passes
> > of a translator.  Subclassing a grammar with actions would be almost
> > useless.  In fact I would reorganize my grammars as a 
> > literate program so I
> > could reuse parts as I wish, it ends up being more flexible 
> > than antlr's
> > subclassing.
> > 
> > Monty
> > 
> > > -----Original Message-----
> > > From: Tiller, Michael (M.M.) [mailto:mtiller@ford.com]
> > > Sent: Tuesday, March 12, 2002 6:48 AM
> > > To: 'antlr-interest@yahoogroups.com'
> > > Subject: RE: [antlr-interest] Build Question
> > > 
> > > 
> > > A few followup comments...
> > > 
> > > I was hoping to support both Java and C++ for future 
> > > development.  It seems like this is impractical for the 
> > > following reasons:
> > > 
> > > 1) Trying to write a language independent way comment rule 
> > > that "eats" comments doesn't seem possible.
> > > 2) Perhaps for misguided reasons, I'd like to be able to add 
> > > "child" nodes to my AST during tree construction.  It isn't 
> > > clear to me how that can be done in a language neutral way.  
> > > It would be nice if ANTLR's tree construction shorthand were 
> > > extended to allow this.
> > > 3) The target language has to be specified in the grammar 
> > > (couldn't this be a command line option?)
> > > 4) The difficulties with trying to do grammar inheritance 
> > (see below).
> > > 
> > > This isn't really criticism (ANTLR is a great tool).  
> > > Consider it ideas for future releases.  Because of these 
> > > problems, I think I'm going to have to abandon my hope of a 
> > > language neutral grammar and just start plugging in my C++ code.
> > > 
> > > --
> > > Mike
> > > 
> > > > -----Original Message-----
> > > > From: Ric Klaren [mailto:klaren@cs.utwente.nl]
> > > > Sent: Tuesday, March 12, 2002 3:51 AM
> > > > To: antlr-interest@yahoogroups.com
> > > > Subject: Re: [antlr-interest] Build Question
> > > > 
> > > > 
> > > > On Mon, Mar 11, 2002 at 01:03:27PM -0500, Tiller, Michael 
> > > > (M.M.) wrote:
> > > > > So far so good I imagine (although I haven't gotten far 
> > > > enough to figure
> > > > > out if this is a good idea yet).  The problem I'm running 
> > > > into is that I
> > > > > imagine these grammars may be shared among several distinct 
> > > > applications.
> > > > > For that reason, I keep the ".g" files away from everything 
> > > > else.  So when
> > > > > I run ANTLR, the Makefile rule looks like this:
> > > > >  
> > > > >  $(ANTLR) -glib $(ROOTDIR)/base.g -o $(GENDIR) 
> > > > $(ROOTDIR)/base_java.g
> > > > >  
> > > > > where GENDIR is the location for the generated code and 
> > > > ROOTDIR is where I
> > > > > keep the .g files.  This way, I can generate the set of 
> > > > source files for
> > > > > each project based on the grammars.
> > > > >  
> > > > > The problem is that when you use grammar inheritance, ANTLR 
> > > > expands the
> > > > > complete grammar into "expandedbase_java.g".  Except that 
> > > > it actually names
> > > > > it "expanded$(ROOTDIR)/base_java.g" (where ROOTDIR is 
> > > > actually expanded).
> > > > > In other words, it assumes that the ".g" is in the current 
> > > > directory.
> > > > >  
> > > > > Any suggestions about how to avoid this problem?  I'm 
> > > > surprised that I
> > > > > can't explicitly specify the name of the expanded grammar.  
> > > > That would have
> > > > > been a nice option.
> > > > 
> > > > Been there done that. Doesn't work. It needs some serious 
> > > > fixing in antlr
> > > > to make this behave well. I already looked at it when I ran 
> > > > into it, it's
> > > > not completely easy to fix in antlr. I currently copy .g 
> > > > files around with
> > > > Make rules to get the right behaviour.
> > > > 
> > > > I personally must say that I found antlr's grammar 
> > > inheritance pretty
> > > > useless (gives to little control over what you want to 
> > > > override, in the end
> > > > you end up copying action code in a complicated way so I 
> > > > figured I'd better
> > > > copy stuff around in an easy way). YMMV though I suspect some 
> > > > ppl on the
> > > > list may have gotten nice results with it.
> > > > 
> > > > Ric
> > > > --
> > > > -----+++++****************************************************
> > > > *+++++++++-------
> > > >     ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 
> > > > 4893722  ----
> > > > -----+++++****************************************************
> > > > *+++++++++-------
> > > >  Time what is time - I wish I knew how to tell You why - It 
> > > > hurts to know -
> > > >           Aren't we machines - Time what is time - 
> Unlock the door
> > > >                - And see the truth - Then time is time again
> > > >                 From: 'Time what is Time' by Blind Guardian
> > > > 
> > > > 
> > > >  
> > > > 
> > > > Your use of Yahoo! Groups is subject to 
> > > > http://docs.yahoo.com/info/terms/ 
> > > > 
> > > > 
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sander at aqris.com  Tue Mar 12 09:16:01 2002
From: sander at aqris.com (=?iso-8859-1?Q?Sander_M=E4gi?=)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Stangeness in example java grammar
Message-ID: <03b601c1c9e9$95c0fba0$1200a8c0@sander>

Hi

Example java grammar had (an unintentional?) strangness:

Can anybody please say if it was intentional and what were the reasons?

The 'try' rule
<RULE>
tryBlock
 : "try"^ compoundStatement
  (handler)*
  ( "finally"^ compoundStatement )?
 ;
</RULE>

When finally is present, then finally is set as a root node and try is it's child.

Perhaps more logical would be?
<RULE>
tryBlock
 : "try"^ compoundStatement
  (handler)*
  ( finallyHandler )?
 ;

finallyHandler
 : "finally"^ compoundStatement
 ;
</RULE>

br,
Sander
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020312/b8f716ad/attachment.html
From mzukowski at bco.com  Tue Mar 12 09:19:44 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Stangeness in example java grammar
Message-ID: <170826586F3BD511910D0200C110AAA801C582CA@memail03.bco-home.com>

You are exactly right.  Having the finallyHandler rule is the right way to
do it.

Monty

-----Original Message-----
From: Sander M?gi [mailto:sander@aqris.com]
Sent: Tuesday, March 12, 2002 9:16 AM
To: ANTLR
Subject: [antlr-interest] Stangeness in example java grammar


Hi
 
Example java grammar had (an unintentional?) strangness:
 
Can anybody please say if it was intentional and what were the reasons?
 
The 'try' rule
<RULE>
tryBlock
 : "try"^ compoundStatement
  (handler)*
  ( "finally"^ compoundStatement )?
 ;
</RULE>
 
When finally is present, then finally is set as a root node and try is it's
child.
 
Perhaps more logical would be?
<RULE>
tryBlock
 : "try"^ compoundStatement
  (handler)*
  ( finallyHandler )?
 ;
 
finallyHandler
 : "finally"^ compoundStatement
 ;
</RULE>
 
br,
Sander

Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From nagii5 at yahoo.com  Tue Mar 12 10:19:45 2002
From: nagii5 at yahoo.com (nagii5)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Re: How can i get ML_COMMENT
In-Reply-To: <a6hr35+6pe9@eGroups.com>
Message-ID: <a6lgs1+764e@eGroups.com>


> ML_COMMENT
> 	: "/*"
> 		( {LA(2) != '/'}? '*'
> 		| '\n' { newline(); }
> 		| ~('*' | '\n')
> 		)+
> 		"*/"
> 		{ _ttype = antlr::Token::SKIP; }
> 		;

did you say you are using 2.1.7 or 2.7.1 
if you are using 2.7.1 the following should work

ML_COMMENT : "/*" ({ options{greedy=false;} :. ) * "*/" ;
you can take care of the \n and newline instead of the .

hope that helps
-nagesh




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From smolyn at cs.ubc.ca  Tue Mar 12 11:42:11 2002
From: smolyn at cs.ubc.ca (Greg Smolyn)
Date: Mon Dec 20 16:14:42 2004
Subject: [antlr-interest] Ignoring nodes with the tree parser
Message-ID: <3C8E5A13.8010105@cs.ubc.ca>

Okay, I'm working with a modified version of the C grammar that came 
with ANTLR.

Anyways, in my AST there are nodes I would like to ignore during the 
emitting phase.  In the code generation phase all code is output as side 
effects (ie. print(token)).  Now, is there a way I can ignore an element 
in a tree node?

ie.
I have an augmented C ast that contains the following

aspect foo {

before(): call(int bar()) {
   helperFunction();
}

void helperFunction() {}

}

(as well, we add new function decls inside this AST element during our 
processing phase).


Anyways, I have a node that looks like:

#(NAspectDeclaration declarator
                      (  (adviceDecl)=>adviceDecl
                        | pointcutDecl
                        | functionDef )*
   )

Now, I want to ignore "declarator", "adviceDecl" and "pointcutDecl".
Is there any way to do this easily?
I first started by doing a
(declarator)=>ignoreDeclarator, and creating a special node to ignore 
the declarator (ie. the node from the TreeGrammar without the actions).

However, I can't do that for adviceDecl and pointcutDecl, because they 
use elements from the C grammar and it would require a LOT of work 
converting every single instance to ignoreFooToken, ignoreBarToken, 
yadda yadda.

Any suggestions?  What would be really wicked would be some sort of "!" 
so I could say "!declarator" and it would know of it's existance but not 
process any actions on it.

- greg




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Tue Mar 12 13:02:16 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Ignoring nodes with the tree parser
Message-ID: <170826586F3BD511910D0200C110AAA801C582CD@memail03.bco-home.com>

You can use the wildcard operator to match but not descend a subtree.

#(NAspectDeclaration (declarator)=> .
                      (  (adviceDecl)=>.
                        | (pointcutDecl)=>.
                        | functionDef )*
   )

Technically you wouldn't need the syntactic predicates if you were convinced
that you were building your trees correctly.  This should work:

#(NAspectDeclaration  . /*that dot matches declarator*/
                      (  (functionDef)=>functionDef
                        | .
			    )*
   )

Monty

> -----Original Message-----
> From: Greg Smolyn [mailto:smolyn@cs.ubc.ca]
> Sent: Tuesday, March 12, 2002 11:42 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Ignoring nodes with the tree parser
> 
> 
> Okay, I'm working with a modified version of the C grammar that came 
> with ANTLR.
> 
> Anyways, in my AST there are nodes I would like to ignore during the 
> emitting phase.  In the code generation phase all code is 
> output as side 
> effects (ie. print(token)).  Now, is there a way I can ignore 
> an element 
> in a tree node?
> 
> ie.
> I have an augmented C ast that contains the following
> 
> aspect foo {
> 
> before(): call(int bar()) {
>    helperFunction();
> }
> 
> void helperFunction() {}
> 
> }
> 
> (as well, we add new function decls inside this AST element 
> during our 
> processing phase).
> 
> 
> Anyways, I have a node that looks like:
> 
> #(NAspectDeclaration declarator
>                       (  (adviceDecl)=>adviceDecl
>                         | pointcutDecl
>                         | functionDef )*
>    )
> 
> Now, I want to ignore "declarator", "adviceDecl" and "pointcutDecl".
> Is there any way to do this easily?
> I first started by doing a
> (declarator)=>ignoreDeclarator, and creating a special node to ignore 
> the declarator (ie. the node from the TreeGrammar without the 
> actions).
> 
> However, I can't do that for adviceDecl and pointcutDecl, 
> because they 
> use elements from the C grammar and it would require a LOT of work 
> converting every single instance to ignoreFooToken, ignoreBarToken, 
> yadda yadda.
> 
> Any suggestions?  What would be really wicked would be some 
> sort of "!" 
> so I could say "!declarator" and it would know of it's 
> existance but not 
> process any actions on it.
> 
> - greg
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Tue Mar 12 13:54:18 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Build Question
References: <170826586F3BD511910D0200C110AAA801C582C8@memail03.bco-home.com>
Message-ID: <002201c1ca10$7654c900$6664020a@matthewfnb>

Yes please Monty,
I am interested in you noweb stuff as well
matthew
----- Original Message -----
From: <mzukowski@bco.com>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, March 13, 2002 3:56 AM
Subject: RE: [antlr-interest] Build Question


> Yes, I will write up a simple example in the next few days, as I'm swamped
> right now.  In the meantime I can send you the noweb file I used for the
gcc
> stuff if you like.
>
> Monty
>
> > -----Original Message-----
> > From: Tiller, Michael (M.M.) [mailto:mtiller@ford.com]
> > Sent: Tuesday, March 12, 2002 7:13 AM
> > To: 'antlr-interest@yahoogroups.com'
> > Subject: RE: [antlr-interest] Build Question
> >
> >
> > Could you post an example of how this is done?
> >
> > --
> > Mike
> >
> > > -----Original Message-----
> > > From: mzukowski@bco.com [mailto:mzukowski@bco.com]
> > > Sent: Tuesday, March 12, 2002 10:08 AM
> > > To: antlr-interest@yahoogroups.com
> > > Subject: RE: [antlr-interest] Build Question
> > >
> > >
> > > One way to accomplish what you wish would be to do some
> > > preprocessing.  I'm
> > > particularly fond of the "noweb" literate programming tool,
> > > which I used to
> > > build the GCC grammar.  It allowed me to reuse grammar
> > > fragments and then
> > > add my own actions.  More importantly for me it allowed me to
> > > keep related
> > > rules in the same area of the noweb file, so my declaration
> > > rules for the
> > > ANSI C Parser, GCC Parser, GCC tree walker, GCC tree
> > emitter were all
> > > together, and while debugging when I modified one rule I was
> > > right there to
> > > make sure the other rules were changed in sync.
> > >
> > > Antlr subclassing is most useful when there are no actions to
> > > subclass.  So
> > > I use it for a tree grammar that I subclass with actions for
> > > specific passes
> > > of a translator.  Subclassing a grammar with actions would be almost
> > > useless.  In fact I would reorganize my grammars as a
> > > literate program so I
> > > could reuse parts as I wish, it ends up being more flexible
> > > than antlr's
> > > subclassing.
> > >
> > > Monty
> > >
> > > > -----Original Message-----
> > > > From: Tiller, Michael (M.M.) [mailto:mtiller@ford.com]
> > > > Sent: Tuesday, March 12, 2002 6:48 AM
> > > > To: 'antlr-interest@yahoogroups.com'
> > > > Subject: RE: [antlr-interest] Build Question
> > > >
> > > >
> > > > A few followup comments...
> > > >
> > > > I was hoping to support both Java and C++ for future
> > > > development.  It seems like this is impractical for the
> > > > following reasons:
> > > >
> > > > 1) Trying to write a language independent way comment rule
> > > > that "eats" comments doesn't seem possible.
> > > > 2) Perhaps for misguided reasons, I'd like to be able to add
> > > > "child" nodes to my AST during tree construction.  It isn't
> > > > clear to me how that can be done in a language neutral way.
> > > > It would be nice if ANTLR's tree construction shorthand were
> > > > extended to allow this.
> > > > 3) The target language has to be specified in the grammar
> > > > (couldn't this be a command line option?)
> > > > 4) The difficulties with trying to do grammar inheritance
> > > (see below).
> > > >
> > > > This isn't really criticism (ANTLR is a great tool).
> > > > Consider it ideas for future releases.  Because of these
> > > > problems, I think I'm going to have to abandon my hope of a
> > > > language neutral grammar and just start plugging in my C++ code.
> > > >
> > > > --
> > > > Mike
> > > >
> > > > > -----Original Message-----
> > > > > From: Ric Klaren [mailto:klaren@cs.utwente.nl]
> > > > > Sent: Tuesday, March 12, 2002 3:51 AM
> > > > > To: antlr-interest@yahoogroups.com
> > > > > Subject: Re: [antlr-interest] Build Question
> > > > >
> > > > >
> > > > > On Mon, Mar 11, 2002 at 01:03:27PM -0500, Tiller, Michael
> > > > > (M.M.) wrote:
> > > > > > So far so good I imagine (although I haven't gotten far
> > > > > enough to figure
> > > > > > out if this is a good idea yet).  The problem I'm running
> > > > > into is that I
> > > > > > imagine these grammars may be shared among several distinct
> > > > > applications.
> > > > > > For that reason, I keep the ".g" files away from everything
> > > > > else.  So when
> > > > > > I run ANTLR, the Makefile rule looks like this:
> > > > > >
> > > > > >  $(ANTLR) -glib $(ROOTDIR)/base.g -o $(GENDIR)
> > > > > $(ROOTDIR)/base_java.g
> > > > > >
> > > > > > where GENDIR is the location for the generated code and
> > > > > ROOTDIR is where I
> > > > > > keep the .g files.  This way, I can generate the set of
> > > > > source files for
> > > > > > each project based on the grammars.
> > > > > >
> > > > > > The problem is that when you use grammar inheritance, ANTLR
> > > > > expands the
> > > > > > complete grammar into "expandedbase_java.g".  Except that
> > > > > it actually names
> > > > > > it "expanded$(ROOTDIR)/base_java.g" (where ROOTDIR is
> > > > > actually expanded).
> > > > > > In other words, it assumes that the ".g" is in the current
> > > > > directory.
> > > > > >
> > > > > > Any suggestions about how to avoid this problem?  I'm
> > > > > surprised that I
> > > > > > can't explicitly specify the name of the expanded grammar.
> > > > > That would have
> > > > > > been a nice option.
> > > > >
> > > > > Been there done that. Doesn't work. It needs some serious
> > > > > fixing in antlr
> > > > > to make this behave well. I already looked at it when I ran
> > > > > into it, it's
> > > > > not completely easy to fix in antlr. I currently copy .g
> > > > > files around with
> > > > > Make rules to get the right behaviour.
> > > > >
> > > > > I personally must say that I found antlr's grammar
> > > > inheritance pretty
> > > > > useless (gives to little control over what you want to
> > > > > override, in the end
> > > > > you end up copying action code in a complicated way so I
> > > > > figured I'd better
> > > > > copy stuff around in an easy way). YMMV though I suspect some
> > > > > ppl on the
> > > > > list may have gotten nice results with it.
> > > > >
> > > > > Ric
> > > > > --
> > > > > -----+++++****************************************************
> > > > > *+++++++++-------
> > > > >     ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53
> > > > > 4893722  ----
> > > > > -----+++++****************************************************
> > > > > *+++++++++-------
> > > > >  Time what is time - I wish I knew how to tell You why - It
> > > > > hurts to know -
> > > > >           Aren't we machines - Time what is time -
> > Unlock the door
> > > > >                - And see the truth - Then time is time again
> > > > >                 From: 'Time what is Time' by Blind Guardian
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > Your use of Yahoo! Groups is subject to
> > > > > http://docs.yahoo.com/info/terms/
> > > > >
> > > > >
> > > >
> > > >
> > > >
> > > > Your use of Yahoo! Groups is subject to
> > > http://docs.yahoo.com/info/terms/
> > >
> > >
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to
> > > http://docs.yahoo.com/info/terms/
> > >
> > >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ericsmith at windsor.com  Tue Mar 12 14:21:26 2002
From: ericsmith at windsor.com (Smith, Eric V.)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] C# port of 2.7.2
Message-ID: <1D532F5C75B30A46A78D5107B635DF891701@edzell.windsor.com>

I am the person who did the 2.7.1 port to C#, such as it is.  
I'm thinking of re-porting the 2.7.2a2 build in order to get 
everything back in sync.  But this is a big job and I don't 
want to do it if 2.7.2a2 is likely to undergo many (any?) 
changes before being released.
 
So, does anyone (Ter?) know how "good" 2.7.2a2 is?  I'm 
defining good as "the version downloadable from antlr.org is 
patched for all known bugs and is believed to be all but 
releasable".  Since I ported this by starting with the Java 
code, I'm really only interested in the Java generator.

If it's reasonably good, then I'll start the porting work.  
I'll need to track any fixes subsequently made to 2.7.2a2.

I'd really like to make this easier in the future somehow, 
but the code generator and runtime currently don't lend 
themselves to anything but a complete re-port.  I've got some 
ideas but they're all a tremendous up-front effort for some 
possible time savings in the future.  Kind of a hard sell, 
even to myself.

Eric.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From smolyn at cs.ubc.ca  Tue Mar 12 14:25:01 2002
From: smolyn at cs.ubc.ca (Greg Smolyn)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Ignoring with tree parser redux
Message-ID: <3C8E803D.10204@cs.ubc.ca>

Okay, thanks to Monty "what a guy" Zukowski, I have figured out my problem.

I am unsure whether or not this is a bug with ANTLR, but most likely 
it's because I'm not quite understanding something about tree parsing. :)

Anyways, I tried using the following to unparse only selected elements 
from my AST:

#(NAspectDeclaration  . /*that dot matches declarator*/
       (  (functionDef)=>functionDef
          | .
       )*
)

However, the code this generates will end up with an NPE.  On 
inspection, I looked at the loop it generates and saw that it _does not_ 
create the standard boilerplate for these kinds of loops:
    if (_t==null)  _t=ASTNULL;

when I added this line, the code worked.  However, at Monty's suggestion 
I tried removing the syntactic predicate to get:

#(NAspectDeclaration  . /*that dot matches declarator*/
       (  functionDef
          | .
       )*
)


which worked perfectly.

Technically speaking, the syntactic predicate was overkill.  But is that 
the expected behaviour?  I'm not sure.  Anyways, if you're running into 
a similar problem, try removing the synpreds and see what happens. :)

- greg
University of British Columbia
Software Practices Lab


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Mar 12 14:48:42 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: C# port of 2.7.2
In-Reply-To: <1D532F5C75B30A46A78D5107B635DF891701@edzell.windsor.com>
Message-ID: <a6m0ka+bqvr@eGroups.com>

--- In antlr-interest@y..., "Smith, Eric V." <ericsmith@w...> wrote:
> I am the person who did the 2.7.1 port to C#, such as it is.  
> I'm thinking of re-porting the 2.7.2a2 build in order to get 
> everything back in sync.  But this is a big job and I don't 
> want to do it if 2.7.2a2 is likely to undergo many (any?) 
> changes before being released.
>  
> So, does anyone (Ter?) know how "good" 2.7.2a2 is?  I'm 
> defining good as "the version downloadable from antlr.org is 
> patched for all known bugs and is believed to be all but 
> releasable".  Since I ported this by starting with the Java 
> code, I'm really only interested in the Java generator.
> 
> If it's reasonably good, then I'll start the porting work.  
> I'll need to track any fixes subsequently made to 2.7.2a2.

I'm already working on the 2.7.2a2 port Eric. Along with an updated 
2.7.1 using ideas from the work you were kind enough to share. I'm 
trying to ensure that the debugging stuff is also supported for C#.

> I'd really like to make this easier in the future somehow, 
> but the code generator and runtime currently don't lend 
> themselves to anything but a complete re-port.  I've got some 
> ideas but they're all a tremendous up-front effort for some 
> possible time savings in the future.  Kind of a hard sell, 
> even to myself.

Perhaps if you elaborate?. I must admt I gave up on any big re-orgs 
until I'm more familiar with Antlr's internals.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Mar 12 14:48:39 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: C# port of 2.7.2
In-Reply-To: <1D532F5C75B30A46A78D5107B635DF891701@edzell.windsor.com>
Message-ID: <a6m0k7+2usq@eGroups.com>

--- In antlr-interest@y..., "Smith, Eric V." <ericsmith@w...> wrote:
> I am the person who did the 2.7.1 port to C#, such as it is.  
> I'm thinking of re-porting the 2.7.2a2 build in order to get 
> everything back in sync.  But this is a big job and I don't 
> want to do it if 2.7.2a2 is likely to undergo many (any?) 
> changes before being released.
>  
> So, does anyone (Ter?) know how "good" 2.7.2a2 is?  I'm 
> defining good as "the version downloadable from antlr.org is 
> patched for all known bugs and is believed to be all but 
> releasable".  Since I ported this by starting with the Java 
> code, I'm really only interested in the Java generator.
> 
> If it's reasonably good, then I'll start the porting work.  
> I'll need to track any fixes subsequently made to 2.7.2a2.

I'm already working on the 2.7.2a2 port Eric. Along with an updated 
2.7.1 using ideas from the work you were kind enough to share. I'm 
trying to ensure that the debugging stuff is also supported for C#.

> I'd really like to make this easier in the future somehow, 
> but the code generator and runtime currently don't lend 
> themselves to anything but a complete re-port.  I've got some 
> ideas but they're all a tremendous up-front effort for some 
> possible time savings in the future.  Kind of a hard sell, 
> even to myself.

Perhaps if you elaborate?. I must admt I gave up on any big re-orgs 
until I'm more familiar with Antlr's internals.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ericsmith at windsor.com  Tue Mar 12 15:40:28 2002
From: ericsmith at windsor.com (Smith, Eric V.)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: C# port of 2.7.2
Message-ID: <1D532F5C75B30A46A78D5107B635DF895327@edzell.windsor.com>

> -----Original Message-----
> From: micheal_jor [mailto:open.zone@virgin.net] 
> Sent: Tuesday, March 12, 2002 5:49 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: C# port of 2.7.2
... 
> I'm already working on the 2.7.2a2 port Eric. Along with an updated 
> 2.7.1 using ideas from the work you were kind enough to share. I'm 
> trying to ensure that the debugging stuff is also supported for C#.
...

Wow, excellent.  How far along are you?  Any way I can help?

> > I'd really like to make this easier in the future somehow, 
> > but the code generator and runtime currently don't lend 
> > themselves to anything but a complete re-port.  I've got some 
> > ideas but they're all a tremendous up-front effort for some 
> > possible time savings in the future.  Kind of a hard sell, 
> > even to myself.
> 
> Perhaps if you elaborate?. I must admt I gave up on any big re-orgs 
> until I'm more familiar with Antlr's internals.

I'm thinking something along the lines of the CLR's CodeDOM model.  It's
an abstract code generation model with things like
CodeConditionStatement that represents an "if" statement,
CodeMethodInvocationExpression to call a method, etc.  We'd have to
write it from scratch in Java without using any CLR code, of course.
When we had the interfaces done we'd write the concrete implementations
of the Java, C++, C#, etc. generators.  Then the code generator would
call our CodeDOM interfaces and all generators would benefit from any
improvements to the code calling the CodeDOM.  It's clearly a lot of
work and might require cleaning up the runtime interfaces as well.

Eric.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sagarbiyani at yahoo.com  Tue Mar 12 20:16:58 2002
From: sagarbiyani at yahoo.com (SAGAR BIYANI)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Token generation problem
Message-ID: <20020313041658.92966.qmail@web12502.mail.yahoo.com>

Hi ,
    I have two grammar files. One file containing the
Base grammar and other containing Derived grammar. My
base grammar file import Common Vocab. DerivedLexer
import the BaseParser vocab and export it as 
"DerivedParser" Vocab. In this case token generated in
DerivedParserTokenTypes.txt are incorrect. It doesn't
contain the derived
lexer tokens. But in derived Lexer if I export the
vocab by name other then "DerivedParser" then it
generates  token correctly. I couldn't understand why
it is not working in other case.

Is it a bug ? 
Any help on this will be appreciated.

Thanks,
Sagar

Here the two grammar files code:

Content of Base.g file.

class BaseParser extends Parser;
options {
   importVocab = Common;
}
tokens {
   HINT = "hint";
}

start:
HINT
;

class BaseLexer extends Lexer;
SEMICOLON:';'
;

Content of Derived.g file.

options{
	language="Java";
}

class DerivedParser extends BaseParser;
abcd: HINT
;


class DerivedLexer extends BaseLexer;

options{
   importVocab = BaseParser;	
   exportVocab = DerivedParser;//does't generate token
correctly. MY_TOKEN doesn't come in the generated
token.
   //exportVocab = DerivedParser1;//Generate tokens
correctly.
}

MY_TOKEN:
"mytoken"
;

Common file content :
Common    // output token vocab name
PLSQL_OPEN=4
PLSQL_CLOSE=5
SQL_STATEMENT_START=6
SEMICOLON=7


__________________________________________________
Do You Yahoo!?
Try FREE Yahoo! Mail - the world's greatest free email!
http://mail.yahoo.com/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Tue Mar 12 22:37:03 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] What's coming for 2.8 (was Re: Build Question)
In-Reply-To: <20020312162312.G680@cs.utwente.nl>
Message-ID: <a6ms2f+8nab@eGroups.com>

In response to Ric's and Mike Tiller's comments, I thought that I'd 
post something on the AST construction extensions and tree grammar 
generation.  This stuff all works now, and I'm in the process of 
jumping through the necessary hoops so that I can release the code.  
If we get really lucky, Ter will manage to finish his code generation 
stuff in time for a 2.8 release.

C++/C# support will require under 100 lines of new code to support the 
extensions, excluding the translocation support which takes about 500 
LOC.  That enables language neutral AST rewriting.

My current code base is based on 2.7.1; Ter and I plan to upgrade to a 
2.7.2 base before releasing 2.8.

More detail:
As Ter noted a few months back, I have been working on a tree grammar 
generation phase for ANTLR.  Since that is nearing completion, now 
seems a good time for a status report and request input.

Tree grammar generation involves a transformation of loop 
structures--()+ and ()*--containing root elements (elements marked 
with a caret) into recursive rules.  Additionally, alternatives need 
to be split out and subtree structure must be tracked.

The tree rewriting required to transform an input grammar tree into an 
output grammar tree is rather demanding on ANTLR's tree rewrite 
support. In the course of development, I have had to fix a number of 
misfeatures.  BANG (!) did not work when applied to parenthesized 
expressions, including ()+ and ()* and ()? blocks.  Annotations--? and 
!--did not behave quite as expected in tree grammars.
	#( ROOT! A B )
led to the output tree
	#( A B )
rather than the A B list that might have been expected.  Further, ^ 
had scope limited to the current tree structure within a rule rather 
than having rule-level scope.
	#( A #( B C? D ) )
would generate
	#( A #( C #( B D ) ) )
and not
	#( C #( A #( B D ) ) )
These have been fixed.

Additionally, roots are limited to single values in 2.7--ranges and 
alternatives are not supported.  This may get fixed this in time for 
the 2.8.0 release.

ANTLR tree restructuring via annotations is powerful, but spartan.  I 
found that I needed a facility for reordering AST nodes and explicitly 
respecifying trees within rule definitions.  This led to the idea of 
extending the ANTLR meta-language to include generic restructuring.  
The added facilities would include support for long distance 
transposition of tree elements--while not needed for the current 
application, it is essential in other contexts.

The syntactic approach that I settled on was to mirror the normal tree 
grammar--#( ... )--and add extensions as needed.  #{ ... } is a "build 
tree" construct (identifiers and tree expressions within #{ ... } 
define an AST construction rather than grammar elements to be matched) 
and is intended to be mnemonic, with the braces suggestive of an 
action syntax.  Tree construction may be conditional; { ... }? 
delineates construction predicates when building trees--the analogy to 
semantic predicates should be clear.  Additionally, "COPY" (duplicate 
and insert duplicate into tree and "REUSE" (insert "as is"--usually 
used as an optimization to avoid the overhead of AST node allocation) 
are keywords which precede AST node descriptors.  "RETURN" is used to 
restart tree construction--a better name could probably be found, but 
the usual usage is #{ RETURN #( A B C ) } to specify the tree returned 
from a rule.

One feature that I have found useful in other contexts is to 
translocate (or duplicate) a subtree to another location.  To support 
this, an isolated string literal ("literal") marks an insertion point; 
assigning a value to a string literal ("lit" = #( A B C )) marks the 
data to be translocated.  Scoping is fairly simple:  if an insertion 
point is encountered before an initial assignment of data to that 
insertion point, then subsequent assignments will be to that insertion 
point until a new insertion point is encountered.  Similarly, if an 
assignment precedes the first insertion point for that string, then 
the insertion point is used to resolve insertion of the preceding 
assignments and subsequent assignments will be made to the next 
insertion point.  Insertions are always done in line:  there are no 
special notations for "insert as root" or "insert as child".   Any 
such rearrangements are made in subsequent AST transformation passes.

The simplest loop-to-recursion transformation for tree grammars is
	foo : ( A B? C )+ ;
to
	foo : #( B foo1 C ) ;
	foo1 : #( B foo1 C A )
	         | A
		;
but they can quickly become complex when alternative roots or nested 
loops are involved.  The tree grammar generation code has been torture 
tested and seems to handle all possible cases, including support for 
the tree rewriting extensions (except for the translocation extension, 
which requires significant effort to support in generated tree 
grammars).

--Loring Craymer


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From kts81932 at yahoo.co.kr  Wed Mar 13 02:45:38 2002
From: kts81932 at yahoo.co.kr (kts81932)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] NullPointerExption error in verilog.g
Message-ID: <a6naki+uigv@eGroups.com>

HI..

recently, l learn about antlr-2.7.1.
to use antlr-2.7.1, dowonload verilog.g file
(http://www.antlr.org/resources.html) 
successfully compile it..(in vc++)..

i add TreeWalker to verilog.g file
and compile it.. below error occur 

#$%%*&@# internal error: java.lang.NullPointerException

fist time, i can not find where this error occur
finally i found that..

delay :
        POUND NUMBER | 
	POUND identifier |
        POUND LPAREN mintypmax_expression
	        ( COMMA mintypmax_expression
		  ( COMMA mintypmax_expression )?
		)?
	      RPAREN
        ;
mintypmax_expression :
        expression ( COLON expression COLON expression )?
        ;

to avoid error occurrence how can i change this grammer into 
TreeWalker??

Thanks...


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Wed Mar 13 02:51:52 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] NullPointerExption error in verilog.g
In-Reply-To: <a6naki+uigv@eGroups.com>; from kts81932@yahoo.co.kr on Wed, Mar 13, 2002 at 10:45:38AM -0000
References: <a6naki+uigv@eGroups.com>
Message-ID: <20020313115152.M680@cs.utwente.nl>

Hi,

Could you try the 2.7.2 prerelease?

Ric

On Wed, Mar 13, 2002 at 10:45:38AM -0000, kts81932 wrote:
> recently, l learn about antlr-2.7.1.
> to use antlr-2.7.1, dowonload verilog.g file
> (http://www.antlr.org/resources.html) 
> successfully compile it..(in vc++)..
> 
> i add TreeWalker to verilog.g file
> and compile it.. below error occur 
> 
> #$%%*&@# internal error: java.lang.NullPointerException
> 
> fist time, i can not find where this error occur
> finally i found that..
> 
> delay :
>         POUND NUMBER | 
> 	POUND identifier |
>         POUND LPAREN mintypmax_expression
> 	        ( COMMA mintypmax_expression
> 		  ( COMMA mintypmax_expression )?
> 		)?
> 	      RPAREN
>         ;
> mintypmax_expression :
>         expression ( COLON expression COLON expression )?
>         ;
> 
> to avoid error occurrence how can i change this grammer into 
> TreeWalker??
> 
> Thanks...
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 

-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From renyedi at yahoo.com  Wed Mar 13 02:43:09 2002
From: renyedi at yahoo.com (Robert)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] C# grammar
Message-ID: <028301c1ca7e$07bad7a0$3000000a@robert>

Hi!

Does anybody know or made a (good) C# grammar in ANTLR?

Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020313/ca44d0f4/attachment.html
From klaren at cs.utwente.nl  Wed Mar 13 03:12:54 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] What's coming for 2.8 (was Re: Build Question)
In-Reply-To: <a6ms2f+8nab@eGroups.com>; from lgc@mail1.jpl.nasa.gov on Wed, Mar 13, 2002 at 06:37:03AM -0000
References: <20020312162312.G680@cs.utwente.nl> <a6ms2f+8nab@eGroups.com>
Message-ID: <20020313121254.P680@cs.utwente.nl>

Hi,

On Wed, Mar 13, 2002 at 06:37:03AM -0000, lgcraymer wrote:
> C++/C# support will require under 100 lines of new code to support the 
> extensions, excluding the translocation support which takes about 500 
> LOC.  That enables language neutral AST rewriting.

Sounds very good. This probably also means that the current action.g
xxxCodeGenerator interface was thoroughly revised? (this would completely
overjoy me ;) )

The changes need porting to C++ still I presume?

> My current code base is based on 2.7.1; Ter and I plan to upgrade to a 
> 2.7.2 base before releasing 2.8.

This means we are going to jump from 2.7.2a1 to 2.8 ?

> !--did not behave quite as expected in tree grammars.
> 	#( ROOT! A B )
> led to the output tree
> 	#( A B )
> rather than the A B list that might have been expected.  Further, ^ 
> had scope limited to the current tree structure within a rule rather 
> than having rule-level scope.
> 	#( A #( B C D ) )
> would generate
> 	#( A #( C #( B D ) ) )
> and not
> 	#( C #( A #( B D ) ) )
> These have been fixed.

Cool.

Sounds good all the extensions/changes. I'm still a bit in the unclear as
to the exact syntax (maybe a few examples..) but I trust it will be a huge
improvement.

Well done!

Is there already a branch available in the repository with these changes?

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Wed Mar 13 06:26:50 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] What's coming for 2.8 (was Re: Build Questio
	n)
Message-ID: <170826586F3BD511910D0200C110AAA801C582D9@memail03.bco-home.com>

> Additionally, "COPY" (duplicate 
> and insert duplicate into tree and "REUSE" (insert "as is"--usually 
> used as an optimization to avoid the overhead of AST node allocation) 
> are keywords which precede AST node descriptors.  

Wow, this means we won't always rebuild the entire tree when buildAST=true
is on?  Very nice for multi-pass translators.

Have you given any thought to emitting a tree back to source code?  Most of
the ignored elements of the parser grammar are things like ";".  Seems like
there might be a way to specialize your tree grammar generator into a tree
grammar emitter generator which would insert actions to output the ignored
tokens as the tree is walked.  Warnings if you are ignoring something like
ID which can't be reconstructed.  Between that and keeping a stack of output
tokens to push and pop inversely to the ^ operator in the parser would be
most of what you need.  The final thing would be an annotation for indenting
or dedenting (in the parser) which would be propagated to the tree emitter.

> #( ROOT! A B )
> led to the output tree
>	#( A B )
> rather than the A B list that might have been expected.

Hmmm, I'm not sure I would expect the list.  But I guess if I wanted the
tree I would do #( ROOT! A^ B), right?  I can see that the inverse (assuming
a tree) could be problematic.

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pc_poppe at hotmail.com  Wed Mar 13 07:12:49 2002
From: pc_poppe at hotmail.com (poppe chris)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] if-else
Message-ID: <F175l9riaa5rYh8QGIT0000efff@hotmail.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020313/54a516c2/attachment.html
From sinan.karasu at boeing.com  Wed Mar 13 09:47:05 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Antlr 2.7.2a2 and NetBeans
References: <1D532F5C75B30A46A78D5107B635DF895327@edzell.windsor.com>
Message-ID: <3C8F9099.E14FA088@boeing.com>



I am currently trying to revamp the antlr module in netbeans.

What they have done esentially is take antlr.g and modify it to
suit their prupose. Looking thru it it appears that what is really
needed is a simple grammar inheritance. So here is a modest proposal
for a simple way to do that. 

The following code snippet ( other than the ignored bodies for
a couple of methods) shgould be the complete .g file for
antlreditor.g

/// ---begin------------
header {
/*
 * ............bunch of netbeans comments
 */
package org.netbeans.modules.antlr.editor.g;
}


class ANTLREditorParser extends ANTLRParser;


{
	SecondaryFileHandler behavior;

	public void reportError(String s) {
		behaviour.reportError(s);
	}
	
	public ANTLRParser(
		TokenBuffer tokenBuf, 
		SecondaryFileHandler behavior_
			) {
			super(tokenBuf, 1);
			tokenNames = _tokenNames;
			behavior = behavior_;
	}

	public static void dump (PrintStream out, SecondaryFileHandler
behavior)
	{
		// some code here...
	}

	public static void scan (String filename)
	{
		// some more code here.....
	}

	public static void main (String[] args)
	{
	// some some more more code here......
	}
}
	
// ---end---------

However looking thru antlr.g in 2.7.2a2 	


The following lines cause a little grief ( who wrote this stuff
anyway?).

Specifically the problems re that the messages should be directed to the
editor infrastructure in netbeans. I can do that by overriding
reportError
method, and I can modify the lines that talks to antlrTool.error(),
antlrTool.warning(). However. If theselines were changed to call

error() , and warning() , then I can override them without any
modification
to the antlr. g...

Ric, Ter, any comments???

Sinan


// ----------problematic lines------------
//				reportError("line "+ex.line+": JAVADOC comments may only prefix
rules and grammars");
				antlrTool.error("JAVADOC comments may only prefix rules and
grammars", getFilename(), ex.getLine(), ex.getColumn());
---------
				antlrTool.error(ex.getMessage(), getFilename(), ex.getLine(),
ex.getColumn());
//				reportError("rule classDef trapped:\n"+ex.toString());
			antlrTool.error(ex.getMessage(), getFilename(), ex.getLine(),
ex.getColumn());
//			reportError("rule classDef trapped:\n"+ex.toString());
----------
			antlrTool.warning("did you forget to terminate previous rule?",
getFilename(), label.getLine(), label.getColumn());


----------	
		antlrTool.error("Malformed range line ", getFilename(), c1.getLine(),
c1.getColumn());
		
----------
 			antlrTool.warning("use 'class X extends Parser'", getFilename(),
idTok.getLine(), idTok.getColumn());
//			System.out.println("warning: line " +
//				idTok.getLine() + ": use 'class X extends Parser'");

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed Mar 13 10:15:22 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: Problem with token names that are also keywords 
 in target language (e.g. C#)
References: <a6l2nr+if56@eGroups.com>
Message-ID: <3C8F973A.CB3C58B6@boeing.com>

micheal_jor wrote:
> 
> --- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:
> 
> > If this is some example files you have ported to C# then I'd say
> change the
> > examples. Doing a global prefixing for everything java/c++ just
> because C#
> > does something different seems not practical to me. Or do you mean
> some of
> > the variable names which are generated by some of the generic parts
> of
> > antlr?
> >
> > Or it may be that I'm completely missing the point.
> 
> The culprit grammar files are the existing examples (e.g. Java
> grammar) supplied with ANTLR. Some of the variables names that are
> generated in the Parser are keywords in C#. This could happen to some
> other language in the future too I would guess....

Isn't the intent of mangleLiteralPrefix exactly this?

options {
	mangleLiteralPrefix = "TK_";
}


Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed Mar 13 10:51:45 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Antlr 2.7.2a2 and NetBeans
References: <1D532F5C75B30A46A78D5107B635DF895327@edzell.windsor.com> <3C8F9099.E14FA088@boeing.com>
Message-ID: <3C8F9FC1.1A8C3771@boeing.com>


 One tiny itty bitty problem..

 a derived grammar with no rules (just overridden methods) causes

------------------

java antlr.Tool -glib ~/Antlr/antlr/antlr.g antlrSyntax.g
ANTLR Parser Generator   Version 2.7.2a2 (20020112-1)   1989-2002
jGuru.com
antlrSyntax.g:243:2: unexpected token: null


------------------

granted int this case one could write a hand-written java class,
but just to be future compatible.....


-----example --xxx.g-----------------------------------
class ANTLRSyntaxParser extends ANTLRParser;
--------------------------------------------

does not work....

-----example --xxx.g-----------------------------------
class ANTLRSyntaxParser extends ANTLRParser;
dummy:;
--------------------------------------------

does.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Wed Mar 13 10:55:01 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] How to plan a translation project
Message-ID: <170826586F3BD511910D0200C110AAA801C582DD@memail03.bco-home.com>

Howdy folks,
	I just wrote a new guide to planning a translation project.  Check
it out at http://www.codetransform.com/planning.html.  Let me know what you
think.

Monty Zukowski
Code Transformation Systems

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Wed Mar 13 11:02:30 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] What's coming for 2.8 (was Re: Build Question)
In-Reply-To: <20020313121254.P680@cs.utwente.nl>
Message-ID: <a6o7o6+61tk@eGroups.com>

--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:
> Hi,
> 
> On Wed, Mar 13, 2002 at 06:37:03AM -0000, lgcraymer wrote:
> > C++/C# support will require under 100 lines of new code to support 
the 
> > extensions, excluding the translocation support which takes about 
500 
> > LOC.  That enables language neutral AST rewriting.
> 
> Sounds very good. This probably also means that the current action.g
> xxxCodeGenerator interface was thoroughly revised? (this would 
completely
> overjoy me ;) )

No such luck--that will have to wait for 3.0.  Basically, I added a 
few classes to support "tree actions" and about 30 lines of code in 
JavaCodeGenerator to interpret the actions.  

> The changes need porting to C++ still I presume?

Yes--something like 50 LOC in CppCodeGenerator, and then another 500 
LOC for the translocation support library--I have jUnit test code 
which covers that code, so the translation to C++ might be done 
quickly.

> > My current code base is based on 2.7.1; Ter and I plan to upgrade 
to a 
> > 2.7.2 base before releasing 2.8.
> 
> This means we are going to jump from 2.7.2a1 to 2.8 ?

More likely at least a 2.7.2b release will precede 2.8.0a--I have to 
jump through a few hoops to release my code (and I may not be able to 
release through the jGuru site--stay tuned) and that will take a 
little time.


> Well done!

Thanks!  This is about the first third of what it takes to 
dramatically speed up ANTLR development--the second third is Ter's 
code generation support, and the third component would be a 
refactoring browser/interactive grammar analyzer tool.  I'd dearly 
like to see something like that done for 3.0.

> Is there already a branch available in the repository with these 
changes?

No--I have to work through intellectual property issues with JPL/NASA 
before I can formally release the code in some fashion.

--Loring


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Wed Mar 13 11:29:50 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] What's coming for 2.8 (was Re: Build Questio n)
In-Reply-To: <170826586F3BD511910D0200C110AAA801C582D9@memail03.bco-home.com>
Message-ID: <a6o9be+kg1b@eGroups.com>

--- In antlr-interest@y..., mzukowski@b... wrote:
> > Additionally, "COPY" (duplicate 
> > and insert duplicate into tree and "REUSE" (insert "as 
is"--usually 
> > used as an optimization to avoid the overhead of AST node 
allocation) 
> > are keywords which precede AST node descriptors.  
> 
> Wow, this means we won't always rebuild the entire tree when 
buildAST=true
> is on?  Very nice for multi-pass translators.

Yes, and you can recognize it with a wildcard (.) to shortcut the 
parsing.  This is a first cut at optimizing AST generation.  The next 
is to disallow tree construction in actions (construct trees "only" at 
the grammar level) so that a list of AST nodes to be allocated and 
tree structuring ops so that only nodes used in the constructed tree 
are allocated--that will have to wait for 3.0.

> Have you given any thought to emitting a tree back to source code?  
Most of
> the ignored elements of the parser grammar are things like ";".  
Seems like
> there might be a way to specialize your tree grammar generator into 
a tree
> grammar emitter generator which would insert actions to output the 
ignored
> tokens as the tree is walked.  Warnings if you are ignoring 
something like
> ID which can't be reconstructed.  Between that and keeping a stack 
of output
> tokens to push and pop inversely to the ^ operator in the parser 
would be
> most of what you need.  The final thing would be an annotation for 
indenting
> or dedenting (in the parser) which would be propagated to the tree 
emitter.

Yes, but only in passing.  Ter has some ideas (some incomplete, and 
some implemented in the jGuru site) on code generation, and I think 
that they need to be implemented before we (the community) tackle 3.0 
just to make it easy.  Bug him for the details.

> 
> > #( ROOT! A B )
> > led to the output tree
> >	#( A B )
> > rather than the A B list that might have been expected.
> 
> Hmmm, I'm not sure I would expect the list.  But I guess if I wanted 
the
> tree I would do #( ROOT! A^ B), right?  I can see that the inverse 
(assuming
> a tree) could be problematic.

Right--you need some way to flatten the tree.  In fact,
     #( r:ROOT! #{ r } A B )
does a conversion of tree to list.

> Monty

--Loring


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From kts81932 at yahoo.co.kr  Thu Mar 14 02:03:20 2002
From: kts81932 at yahoo.co.kr (kts81932)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: NullPointerExption error in verilog.g
In-Reply-To: <20020313115152.M680@cs.utwente.nl>
Message-ID: <a6psh8+ahnt@eGroups.com>

Hi..
i try the 2.7.2 prerelease...
same error occured..


mintypmax_expression :
        expression ( COLON expression COLON expression )?
        ;
this grammer occur NullPointerExeption..

hmmm 
how can change this parser grammer into TreeWalker grammer..?? 


--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:
> Hi,
> 
> Could you try the 2.7.2 prerelease?
> 
> Ric




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Thu Mar 14 10:14:01 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: NullPointerExption error in verilog.g
Message-ID: <170826586F3BD511910D0200C110AAA801C582E7@memail03.bco-home.com>

You can see a working parser and tree parser in the GCC translation
framework.  Follow the links from www.codetransform.com/gcc.html.  In
particular you can see the parser with the tree construction annotations and
actions, and then the tree parser rules needed to parse the tree.

Monty

> -----Original Message-----
> From: kts81932 [mailto:kts81932@yahoo.co.kr]
> Sent: Thursday, March 14, 2002 2:03 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: NullPointerExption error in verilog.g
> 
> 
> Hi..
> i try the 2.7.2 prerelease...
> same error occured..
> 
> 
> mintypmax_expression :
>         expression ( COLON expression COLON expression )?
>         ;
> this grammer occur NullPointerExeption..
> 
> hmmm 
> how can change this parser grammer into TreeWalker grammer..?? 
> 
> 
> --- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:
> > Hi,
> > 
> > Could you try the 2.7.2 prerelease?
> > 
> > Ric
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Mar 14 16:07:41 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: C# port of 2.7.2
In-Reply-To: <1D532F5C75B30A46A78D5107B635DF895327@edzell.windsor.com>
Message-ID: <a6re0d+u99p@eGroups.com>

--- In antlr-interest@y..., "Smith, Eric V." <ericsmith@w...> wrote:

> > I'm already working on the 2.7.2a2 port Eric. Along with an 
updated 
> > 2.7.1 using ideas from the work you were kind enough to share. 
I'm 
> > trying to ensure that the debugging stuff is also supported for 
C#.
> ...
> 
> Wow, excellent.  How far along are you?  Any way I can help?

I am well advanced but, I am having to constantly re-evaluate what 
can be accomplished in the time I can afford without ending up 
porting all of ANTLR to C# (it wouldn't take much more effort believe 
me) ;-)

The class interdependency graph is really bad. To support the Tool 
class for instance requires porting over 20-25 other classes that I 
have no need for otherwise. Including CodeGenerator (which depends on 
another boatload of classes). 

I hope ANTLR develops into a system build out of co-operating 
interfaces (I almost started to refactor ANTLR blind along those 
lines but given my relative lack of familiarity with it's deepest 
secrets and my reluctance to do this in Java, I came to my senses).

> > Perhaps if you elaborate?. I must admt I gave up on any big re-
orgs 
> > until I'm more familiar with Antlr's internals.
> 
> I'm thinking something along the lines of the CLR's CodeDOM model.  
It's
> an abstract code generation model with things like
> CodeConditionStatement that represents an "if" statement,

That would be really useful but I fear ANTLR itself needs to be re-
architected as a system of co-operating entities modelled as 
interfaces and not as classes. Having to support 20 "accidental" 
referenced interfaces is a walk in the park compared to 20 non-
trivial classes. Especially if you don't actually *use* the classes 
for anything.

> It's clearly a lot of
> work and might require cleaning up the runtime interfaces as well.

Definitely!. I hope I am able to return to this with a view to 
actually doing something in the near future.

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri Mar 15 00:53:52 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: C# port of 2.7.2
In-Reply-To: <a6re0d+u99p@eGroups.com>; from open.zone@virgin.net on Fri, Mar 15, 2002 at 12:07:41AM -0000
References: <1D532F5C75B30A46A78D5107B635DF895327@edzell.windsor.com> <a6re0d+u99p@eGroups.com>
Message-ID: <20020315095351.Z680@cs.utwente.nl>

Hi,

On Fri, Mar 15, 2002 at 12:07:41AM -0000, micheal_jor wrote:
> I hope ANTLR develops into a system build out of co-operating 
> interfaces (I almost started to refactor ANTLR blind along those 
> lines but given my relative lack of familiarity with it's deepest 
> secrets and my reluctance to do this in Java, I came to my senses).

This was also one of the things that struck me when starting hacking on
antlr. Internally it's a bit of a mess. The fact that there's no separation
between antlr and it's java runtime is also a PITA.

I think that for antlr 3 or maybe for 2.8 we already should try to clean
parts of this up.

Ric

PS Currently a little bit less swamped.. but have to do a talk next
week which will probably be about antlr, though so not so much time to do
hacking, but I'll try to do some things in between..)
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
	  Innovation makes enemies of all those who prospered under the old
	regime, and only lukewarm support is forthcoming from those who would
					prosper under the new. --- Niccolò Machiavelli


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From renyedi at yahoo.com  Fri Mar 15 00:53:03 2002
From: renyedi at yahoo.com (Robert Enyedi)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Antlr 2.7.2a2 and NetBeans
References: <1D532F5C75B30A46A78D5107B635DF895327@edzell.windsor.com> <3C8F9099.E14FA088@boeing.com>
Message-ID: <050901c1cc01$2c288090$3000000a@robert>

Hi, Sinan

Do you have a Netbeans module for Antlr 2.7.1 already built?

If so, could you tell me please where I can find it?

Robert

----- Original Message -----
From: "Sinan" <sinan.karasu@boeing.com>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, March 13, 2002 7:47 PM
Subject: [antlr-interest] Antlr 2.7.2a2 and NetBeans


>
>
> I am currently trying to revamp the antlr module in netbeans.
>
> What they have done esentially is take antlr.g and modify it to
> suit their prupose. Looking thru it it appears that what is really
> needed is a simple grammar inheritance. So here is a modest proposal
> for a simple way to do that.
>
> The following code snippet ( other than the ignored bodies for
> a couple of methods) shgould be the complete .g file for
> antlreditor.g
>
> /// ---begin------------
> header {
> /*
>  * ............bunch of netbeans comments
>  */
> package org.netbeans.modules.antlr.editor.g;
> }
>
>
> class ANTLREditorParser extends ANTLRParser;
>
>
> {
> SecondaryFileHandler behavior;
>
> public void reportError(String s) {
> behaviour.reportError(s);
> }
>
> public ANTLRParser(
> TokenBuffer tokenBuf,
> SecondaryFileHandler behavior_
> ) {
> super(tokenBuf, 1);
> tokenNames = _tokenNames;
> behavior = behavior_;
> }
>
> public static void dump (PrintStream out, SecondaryFileHandler
> behavior)
> {
> // some code here...
> }
>
> public static void scan (String filename)
> {
> // some more code here.....
> }
>
> public static void main (String[] args)
> {
> // some some more more code here......
> }
> }
>
> // ---end---------
>
> However looking thru antlr.g in 2.7.2a2
>
>
> The following lines cause a little grief ( who wrote this stuff
> anyway?).
>
> Specifically the problems re that the messages should be directed to the
> editor infrastructure in netbeans. I can do that by overriding
> reportError
> method, and I can modify the lines that talks to antlrTool.error(),
> antlrTool.warning(). However. If theselines were changed to call
>
> error() , and warning() , then I can override them without any
> modification
> to the antlr. g...
>
> Ric, Ter, any comments???
>
> Sinan
>
>
> // ----------problematic lines------------
> // reportError("line "+ex.line+": JAVADOC comments may only prefix
> rules and grammars");
> antlrTool.error("JAVADOC comments may only prefix rules and
> grammars", getFilename(), ex.getLine(), ex.getColumn());
> ---------
> antlrTool.error(ex.getMessage(), getFilename(), ex.getLine(),
> ex.getColumn());
> // reportError("rule classDef trapped:\n"+ex.toString());
> antlrTool.error(ex.getMessage(), getFilename(), ex.getLine(),
> ex.getColumn());
> // reportError("rule classDef trapped:\n"+ex.toString());
> ----------
> antlrTool.warning("did you forget to terminate previous rule?",
> getFilename(), label.getLine(), label.getColumn());
>
>
> ----------
> antlrTool.error("Malformed range line ", getFilename(), c1.getLine(),
> c1.getColumn());
>
> ----------
>   antlrTool.warning("use 'class X extends Parser'", getFilename(),
> idTok.getLine(), idTok.getColumn());
> // System.out.println("warning: line " +
> // idTok.getLine() + ": use 'class X extends Parser'");
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>


_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jeff_c_lin at yahoo.com  Mon Mar 18 21:37:12 2002
From: jeff_c_lin at yahoo.com (jeff_c_lin)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] CircularQueue compilation question, please help.
Message-ID: <a76iq8+1u2i@eGroups.com>

Hi,

I have a question about the way CircularQueue is defined. It has a private copy contructor and private assignment operator but they are not defined anywhere (no CircularQueue.cpp). What's the purpose of these and why don't they cause compilation error? 

I'm trying to compile antlr classes as an DLL, and I'm getting C4661 warning message. I instantiate CircularQueue when I see it used in as an class member. For example, class InputBuffer has a CircularQueue<int> member. According the MS Knowledge base, I need to instantiate a template class in order to export it from an DLL. So after InputBuffer class declaration, I do "template class DLLIMEXPORT CircularQueue<int>", but the compiler warns that CircularQueue's member functions are not defined. I'm surprised it's not an error. Anyone knows what's going on here? How do I get rid of the warning messages? 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Mar 19 01:35:11 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] CircularQueue compilation question, please help.
In-Reply-To: <a76iq8+1u2i@eGroups.com>; from jeff_c_lin@yahoo.com on Tue, Mar 19, 2002 at 05:37:12AM -0000
References: <a76iq8+1u2i@eGroups.com>
Message-ID: <20020319103511.B26460@cs.utwente.nl>

Hi,

On Tue, Mar 19, 2002 at 05:37:12AM -0000, jeff_c_lin wrote:
> I have a question about the way CircularQueue is defined. It has a private
> copy contructor and private assignment operator but they are not defined
> anywhere (no CircularQueue.cpp). What's the purpose of these and why don't
> they cause compilation error?

This prevents unintended use of default copy/assignment
constructor/operators. As long as the constructor/operator is not used
there is no problem. In the case of CircularQueue it might not be necessary
to do this, I disabled all copy assignment constructors for classes that do
not explicitly support them.

> I'm trying to compile antlr classes as an DLL, and I'm getting C4661
> warning message. I instantiate CircularQueue when I see it used in as an
> class member. For example, class InputBuffer has a CircularQueue<int>
> member. According the MS Knowledge base, I need to instantiate a template
> class in order to export it from an DLL. So after InputBuffer class
> declaration, I do "template class DLLIMEXPORT CircularQueue<int>", but the
> compiler warns that CircularQueue's member functions are not defined. I'm
> surprised it's not an error. Anyone knows what's going on here? How do I
> get rid of the warning messages?

Ignore them or use the appropriate #pragma or whatever MSVC uses. Depending
on the version of antlr, the version of windows and the version of MSVC
(and the STL you use) you may not succceed building a dll. Search the
archives for some discussions on the subject (you may have to switch to
STLPort).

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
				  of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Tue Mar 19 08:31:52 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Antlr 2.7.2a2 and NetBeans
References: <1D532F5C75B30A46A78D5107B635DF895327@edzell.windsor.com> <3C8F9099.E14FA088@boeing.com> <050901c1cc01$2c288090$3000000a@robert>
Message-ID: <3C9767F8.31EA45F0@boeing.com>

Robert Enyedi wrote:
> 
> Hi, Sinan
> 
> Do you have a Netbeans module for Antlr 2.7.1 already built?
> 
> If so, could you tell me please where I can find it?
> 
> Robert

Yes I do. ( I built it with 2.7.2a2 but it should work for 2.7.1 ...

I'll put it up at an ftp site tonight and let you knwo where it is. 

It more than likely will be at ftp://bozuk.org , but first I gotta set
up
an anonymous/guest account....

I have 2 versions built. 

1) Fixed the current version so that it compiles with 2.7.2a2
2) Made a new version that is built on 2.7.2a2

The second one required some fixes to 2.7.2a2. I wanted to use
antlr.g from Ter/Ric unmodified. Unfortunately some methods were not
cleanly overridable. Total changes are about 10 lines. I'll feed them to
Ter today.

Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed Mar 20 09:35:42 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Antlr 2.7.2a2 and NetBeans
References: <1D532F5C75B30A46A78D5107B635DF895327@edzell.windsor.com> <3C8F9099.E14FA088@boeing.com> <050901c1cc01$2c288090$3000000a@robert>
Message-ID: <3C98C86E.3676A411@boeing.com>

Robert Enyedi wrote:
> 
> Hi, Sinan
> 
> Do you have a Netbeans module for Antlr 2.7.1 already built?
> 
> If so, could you tell me please where I can find it?
> 
> Robert
> 

Ok, you should be able to download it (them)  from

ftp://bozuk.org/pub/netbeans/

Sinan

PS: read README

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From wiggjd at sbu.ac.uk  Wed Mar 20 09:41:44 2002
From: wiggjd at sbu.ac.uk (David Wigg)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] ANTLR and guarded predicates
Message-ID: <3C98C9D8.18BF2347@sbu.ac.uk>

We are trying to convert a grammar file written for PCCTS to use with
ANTLR to produce C++ code (so that all our own embedded code can stay in
C/C++).

We appear to find that guarded predicates do not actually work in the
same way in PCCTS and ANTLR which is causing us grief as we cannot find
an easy way round the problem.

We refer to the paper "ANTLR 2 Meta-Language" which implies that if we
have

production: (syntax guard)=>{semantic test}? another_production
          | some_other_production
          ;

that the syntax guard will be tested first and if true then the semantic
test second. In fact our experience is the reverse and this is not
necessarily the required result because the semantic test may only be
appropriate for the actual syntax guarded. If the semantic test is
selected first before the syntax guard and the semantic test is
inappropriate for the syntax guarded then the result will be wrong.

Please could someone confirm or otherwise our understanding of what
happens in practice (as seen in a specific case) and if we are correct
could someone explain how we might obtain the operation we require that
the semantic test is only carried out for the correct tokens (in the
syntax guard)?

Ideally, of course, we would prefer the actual code to be performed in
the same sequence as shown in the documentation i.e. guard first,
semantic test afterwards. Could this be possible?

Thanks.

David Wigg
South Bank University
London, UK.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From antlr-list at wonderclown.com  Wed Mar 20 09:49:56 2002
From: antlr-list at wonderclown.com (Randall Nortman)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Working around the LALL(k) vs. LL(k) problem?
Message-ID: <20020320174956.GB7994@aerosol>

I'm working on my first ANTLR grammar, and I keep getting bitten by
the fact that ANTLR uses linear approximation of LL(k).  I'm wondering
if there are any general strategies for avoiding or working around
this problem.  Can predicates be used?  As an example, consider the
following relatively simple grammar, which allows both simple
arithmetic expressions and variable declarations:

----- Begin Grammar
block: ((statement)? ";")*; // Possibly empty statements, delimited by ";"

statement: variableDecl | expression;

variableDecl: typeSpec IDENTIFIER (":=" expression)?; // Optional initializer

typeSpec: IDENTIFIER;

expression: term ( ( "+" | "-" ) term)*;

term: factor ( ( "*" | "/" ) factor)*;

factor: IDENTIFIER | LITERAL | ("(" expression ")");
----- End Grammar

I get nondeterminism on the 'statement' rule, because the parser can't
tell the difference between a variableDecl and an expression for an
input of (IDENTIFIER IDENTIFIER ";").  Clearly, that should be parsed
as a variable declaration, because an expression requires IDENTIFIERs
to be separated by operators.  But because of linear approximation,
ANTLR doesn't see that.  What's the best way to fix this problem?

On a related note, I'm designing both the syntax of this language and
the parser together, using ANTLR along the way to catch problems in my
syntax.  However, I feel like I spend as much time trying to figure
out why ANTLR doesn't like a rule as I do developing the syntax
itself.  I never know if an error message from ANTLR is because my
syntax is bad or because I'm just not representing it in a way that
ANTLR likes.  Might there be a better tool for developing the grammar
independent of the parser?  (I want to make sure I have a regular
grammar, which can be parsed without referencing any semantic
information such as symbol tables, so the tool should be able to
validate this.)

Any assistance or insight would be greatly appreciated.

Randall Nortman

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Wed Mar 20 10:06:10 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] ANTLR and guarded predicates
Message-ID: <170826586F3BD511910D0200C110AAA8032B480E@memail03.bco-home.com>

I don't have time to look into why it's not working right now, but you could
certainly get by with a subrule:

production: (syntax guard)=>({semantic test}? another_production)
          | some_other_production
          ;

Also note that PCCTS properly hoisted predicates into calling rules.  ANTLR
does not, you will have to manually hoist the rule yourself, like I did with
the typedef rule in the GCC grammar.

Monty

> -----Original Message-----
> From: David Wigg [mailto:wiggjd@sbu.ac.uk]
> Sent: Wednesday, March 20, 2002 9:42 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] ANTLR and guarded predicates
> 
> 
> We are trying to convert a grammar file written for PCCTS to use with
> ANTLR to produce C++ code (so that all our own embedded code 
> can stay in
> C/C++).
> 
> We appear to find that guarded predicates do not actually work in the
> same way in PCCTS and ANTLR which is causing us grief as we 
> cannot find
> an easy way round the problem.
> 
> We refer to the paper "ANTLR 2 Meta-Language" which implies that if we
> have
> 
> production: (syntax guard)=>{semantic test}? another_production
>           | some_other_production
>           ;
> 
> that the syntax guard will be tested first and if true then 
> the semantic
> test second. In fact our experience is the reverse and this is not
> necessarily the required result because the semantic test may only be
> appropriate for the actual syntax guarded. If the semantic test is
> selected first before the syntax guard and the semantic test is
> inappropriate for the syntax guarded then the result will be wrong.
> 
> Please could someone confirm or otherwise our understanding of what
> happens in practice (as seen in a specific case) and if we are correct
> could someone explain how we might obtain the operation we 
> require that
> the semantic test is only carried out for the correct tokens (in the
> syntax guard)?
> 
> Ideally, of course, we would prefer the actual code to be performed in
> the same sequence as shown in the documentation i.e. guard first,
> semantic test afterwards. Could this be possible?
> 
> Thanks.
> 
> David Wigg
> South Bank University
> London, UK.
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Wed Mar 20 10:03:18 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Working around the LALL(k) vs. LL(k) problem
	?
Message-ID: <170826586F3BD511910D0200C110AAA8032B480D@memail03.bco-home.com>



> -----Original Message-----
> From: Randall Nortman [mailto:antlr-list@wonderclown.com]
> Sent: Wednesday, March 20, 2002 9:50 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Working around the LALL(k) vs. 
> LL(k) problem?
> 
> 
> I'm working on my first ANTLR grammar, and I keep getting bitten by
> the fact that ANTLR uses linear approximation of LL(k).  I'm wondering
> if there are any general strategies for avoiding or working around
> this problem.  Can predicates be used?  As an example, consider the
> following relatively simple grammar, which allows both simple
> arithmetic expressions and variable declarations:
> 
> ----- Begin Grammar
> block: ((statement)? ";")*; // Possibly empty statements, 
> delimited by ";"
> 
> statement: variableDecl | expression;
> 
> variableDecl: typeSpec IDENTIFIER (":=" expression)?; // 
> Optional initializer
> 
> typeSpec: IDENTIFIER;
> 
> expression: term ( ( "+" | "-" ) term)*;
> 
> term: factor ( ( "*" | "/" ) factor)*;
> 
> factor: IDENTIFIER | LITERAL | ("(" expression ")");
> ----- End Grammar
> 
> I get nondeterminism on the 'statement' rule, because the parser can't
> tell the difference between a variableDecl and an expression for an
> input of (IDENTIFIER IDENTIFIER ";").  Clearly, that should be parsed
> as a variable declaration, because an expression requires IDENTIFIERs
> to be separated by operators.  But because of linear approximation,
> ANTLR doesn't see that.  What's the best way to fix this problem?

statement: (IDENTIFIER IDENTIFIER)=>variableDecl | expression;

> On a related note, I'm designing both the syntax of this language and
> the parser together, using ANTLR along the way to catch problems in my
> syntax.  However, I feel like I spend as much time trying to figure
> out why ANTLR doesn't like a rule as I do developing the syntax
> itself.  I never know if an error message from ANTLR is because my
> syntax is bad or because I'm just not representing it in a way that
> ANTLR likes.  Might there be a better tool for developing the grammar
> independent of the parser?  (I want to make sure I have a regular
> grammar, which can be parsed without referencing any semantic
> information such as symbol tables, so the tool should be able to
> validate this.)

If you look at the generated code, it's usually pretty easy to figure out
what antlr is trying to do.  What other problems have been on the antlr side
instead of the bad syntax side?  I'm not familiar enough with other tools to
recommend any alternatives. 

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Wed Mar 20 10:31:31 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Working around the LALL(k) vs. LL(k) problem?
References: <20020320174956.GB7994@aerosol>
Message-ID: <000b01c1d03d$751dbc30$0200a8c0@matthewfnb>

Randall try


statement
          : (variableDecl) => variableDecl
          | expression;

This will look ahead as far as it needs to  to determine if the input is
variableDecl when Antlr sees (variableDecl)=>
and only take that branch if the input matches.  This is one of the
strengths of Antlr.

matthew
----- Original Message -----
From: "Randall Nortman" <antlr-list@wonderclown.com>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, March 21, 2002 4:49 AM
Subject: [antlr-interest] Working around the LALL(k) vs. LL(k) problem?


> I'm working on my first ANTLR grammar, and I keep getting bitten by
> the fact that ANTLR uses linear approximation of LL(k).  I'm wondering
> if there are any general strategies for avoiding or working around
> this problem.  Can predicates be used?  As an example, consider the
> following relatively simple grammar, which allows both simple
> arithmetic expressions and variable declarations:
>
> ----- Begin Grammar
> block: ((statement)? ";")*; // Possibly empty statements, delimited by ";"
>
> statement: variableDecl | expression;
>
> variableDecl: typeSpec IDENTIFIER (":=" expression)?; // Optional
initializer
>
> typeSpec: IDENTIFIER;
>
> expression: term ( ( "+" | "-" ) term)*;
>
> term: factor ( ( "*" | "/" ) factor)*;
>
> factor: IDENTIFIER | LITERAL | ("(" expression ")");
> ----- End Grammar
>
> I get nondeterminism on the 'statement' rule, because the parser can't
> tell the difference between a variableDecl and an expression for an
> input of (IDENTIFIER IDENTIFIER ";").  Clearly, that should be parsed
> as a variable declaration, because an expression requires IDENTIFIERs
> to be separated by operators.  But because of linear approximation,
> ANTLR doesn't see that.  What's the best way to fix this problem?
>
> On a related note, I'm designing both the syntax of this language and
> the parser together, using ANTLR along the way to catch problems in my
> syntax.  However, I feel like I spend as much time trying to figure
> out why ANTLR doesn't like a rule as I do developing the syntax
> itself.  I never know if an error message from ANTLR is because my
> syntax is bad or because I'm just not representing it in a way that
> ANTLR likes.  Might there be a better tool for developing the grammar
> independent of the parser?  (I want to make sure I have a regular
> grammar, which can be parsed without referencing any semantic
> information such as symbol tables, so the tool should be able to
> validate this.)
>
> Any assistance or insight would be greatly appreciated.
>
> Randall Nortman
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Wed Mar 20 10:38:40 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Working around the LALL(k) vs. LL(k) problem
	?
Message-ID: <170826586F3BD511910D0200C110AAA8032B4812@memail03.bco-home.com>

Note that then your syn pred (variableDecl)=> is parsing through the entire
variableDecl rule to completion.  Oftentimes you know the shortest prefix to
disambiguate with, which is the rationale behind my (IDENTIFIER
IDENTIFIER)=> suggestion.  But then as you debug you need to keep in mind
possible changes to the prefixes involved.

Monty

> -----Original Message-----
> From: Matthew Ford [mailto:Matthew.Ford@forward.com.au]
> Sent: Wednesday, March 20, 2002 10:32 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Working around the LALL(k) vs. LL(k)
> problem?
> 
> 
> Randall try
> 
> 
> statement
>           : (variableDecl) => variableDecl
>           | expression;
> 
> This will look ahead as far as it needs to  to determine if 
> the input is
> variableDecl when Antlr sees (variableDecl)=>
> and only take that branch if the input matches.  This is one of the
> strengths of Antlr.
> 
> matthew
> ----- Original Message -----
> From: "Randall Nortman" <antlr-list@wonderclown.com>
> To: <antlr-interest@yahoogroups.com>
> Sent: Thursday, March 21, 2002 4:49 AM
> Subject: [antlr-interest] Working around the LALL(k) vs. 
> LL(k) problem?
> 
> 
> > I'm working on my first ANTLR grammar, and I keep getting bitten by
> > the fact that ANTLR uses linear approximation of LL(k).  
> I'm wondering
> > if there are any general strategies for avoiding or working around
> > this problem.  Can predicates be used?  As an example, consider the
> > following relatively simple grammar, which allows both simple
> > arithmetic expressions and variable declarations:
> >
> > ----- Begin Grammar
> > block: ((statement)? ";")*; // Possibly empty statements, 
> delimited by ";"
> >
> > statement: variableDecl | expression;
> >
> > variableDecl: typeSpec IDENTIFIER (":=" expression)?; // Optional
> initializer
> >
> > typeSpec: IDENTIFIER;
> >
> > expression: term ( ( "+" | "-" ) term)*;
> >
> > term: factor ( ( "*" | "/" ) factor)*;
> >
> > factor: IDENTIFIER | LITERAL | ("(" expression ")");
> > ----- End Grammar
> >
> > I get nondeterminism on the 'statement' rule, because the 
> parser can't
> > tell the difference between a variableDecl and an expression for an
> > input of (IDENTIFIER IDENTIFIER ";").  Clearly, that should 
> be parsed
> > as a variable declaration, because an expression requires 
> IDENTIFIERs
> > to be separated by operators.  But because of linear approximation,
> > ANTLR doesn't see that.  What's the best way to fix this problem?
> >
> > On a related note, I'm designing both the syntax of this 
> language and
> > the parser together, using ANTLR along the way to catch 
> problems in my
> > syntax.  However, I feel like I spend as much time trying to figure
> > out why ANTLR doesn't like a rule as I do developing the syntax
> > itself.  I never know if an error message from ANTLR is because my
> > syntax is bad or because I'm just not representing it in a way that
> > ANTLR likes.  Might there be a better tool for developing 
> the grammar
> > independent of the parser?  (I want to make sure I have a regular
> > grammar, which can be parsed without referencing any semantic
> > information such as symbol tables, so the tool should be able to
> > validate this.)
> >
> > Any assistance or insight would be greatly appreciated.
> >
> > Randall Nortman
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Mar 20 11:02:39 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: C# port of 2.7.2
In-Reply-To: <1D532F5C75B30A46A78D5107B635DF895327@edzell.windsor.com>
Message-ID: <0CB79401-3C35-11D6-9AD2-0030653DE0D6@jguru.com>

Hi Guys, just back from a week off.  2.7.2a2 is close, but not quite 
finished.  Might add a few more things...I should have more time soon.

Also, don't implement a new code generator.  The current thing sucks but 
I am experimenting with a new code gen system myself that I might hack 
into 2.x to make things easier.  OTOH, it might have to wait until 3.0 
(a complete rewrite).

In summary, it might just be easier to work with the crappy code 
generation thing in ANTLR as it stands; C# is basically Java so you 
should no trouble with modifying JavaCodeGenerator.java, right?

Thanks,
Terence

On Tuesday, March 12, 2002, at 03:40  PM, Smith, Eric V. wrote:

>> -----Original Message-----
>> From: micheal_jor [mailto:open.zone@virgin.net]
>> Sent: Tuesday, March 12, 2002 5:49 PM
>> To: antlr-interest@yahoogroups.com
>> Subject: [antlr-interest] Re: C# port of 2.7.2
> ...
>> I'm already working on the 2.7.2a2 port Eric. Along with an updated
>> 2.7.1 using ideas from the work you were kind enough to share. I'm
>> trying to ensure that the debugging stuff is also supported for C#.
> ...
>
> Wow, excellent.  How far along are you?  Any way I can help?
>
>>> I'd really like to make this easier in the future somehow,
>>> but the code generator and runtime currently don't lend
>>> themselves to anything but a complete re-port.  I've got some
>>> ideas but they're all a tremendous up-front effort for some
>>> possible time savings in the future.  Kind of a hard sell,
>>> even to myself.
>>
>> Perhaps if you elaborate?. I must admt I gave up on any big re-orgs
>> until I'm more familiar with Antlr's internals.
>
> I'm thinking something along the lines of the CLR's CodeDOM model.  It's
> an abstract code generation model with things like
> CodeConditionStatement that represents an "if" statement,
> CodeMethodInvocationExpression to call a method, etc.  We'd have to
> write it from scratch in Java without using any CLR code, of course.
> When we had the interfaces done we'd write the concrete implementations
> of the Java, C++, C#, etc. generators.  Then the code generator would
> call our CodeDOM interfaces and all generators would benefit from any
> improvements to the code calling the CodeDOM.  It's clearly a lot of
> work and might require cleaning up the runtime interfaces as well.
>
> Eric.
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Chief Scientist & Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Wed Mar 20 11:02:38 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: ANTLR and guarded predicates
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B480E@memail03.bco-home.com>
Message-ID: <a7amce+3bru@eGroups.com>

--- In antlr-interest@y..., mzukowski@b... wrote:
> I don't have time to look into why it's not working right now, but 
you could
> certainly get by with a subrule:
> 
> production: (syntax guard)=>({semantic test}? another_production)
>           | some_other_production
>           ;
> 
> Also note that PCCTS properly hoisted predicates into calling rules. 
 ANTLR
> does not, you will have to manually hoist the rule yourself, like I 
did with
> the typedef rule in the GCC grammar.
> 
> Monty

ANTLR attaches sempreds to subrules (explicit or implied) internally, 
so Monty's solution should work properly.  Fixing the internals 
without breaking something else might be difficult:  as Ric has 
mentioned in other emails, ANTLR's internal "tree" (custom, 
unfortunately, not AST-based) structure is messy to deal with and 
needs a redesign/rewrite.

--Loring


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Mar 20 11:10:02 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: C# port of 2.7.2
In-Reply-To: <20020315095351.Z680@cs.utwente.nl>
Message-ID: <14A6A2E4-3C36-11D6-9AD2-0030653DE0D6@jguru.com>


On Friday, March 15, 2002, at 12:53  AM, Ric Klaren wrote:

> Hi,
>
> On Fri, Mar 15, 2002 at 12:07:41AM -0000, micheal_jor wrote:
>> I hope ANTLR develops into a system build out of co-operating
>> interfaces (I almost started to refactor ANTLR blind along those
>> lines but given my relative lack of familiarity with it's deepest
>> secrets and my reluctance to do this in Java, I came to my senses).
>
> This was also one of the things that struck me when starting hacking on
> antlr. Internally it's a bit of a mess. The fact that there's no 
> separation
> between antlr and it's java runtime is also a PITA.

That's being pretty polite ;)  The code gen part is heinous. ;)  3.0 
will be a no-new-feature complete rewrite to make this sucker clean.

Ter

> I think that for antlr 3 or maybe for 2.8 we already should try to clean
> parts of this up.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Mar 20 11:07:05 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Antlr 2.7.2a2 and NetBeans
In-Reply-To: <3C8F9099.E14FA088@boeing.com>
Message-ID: <AAEAD210-3C35-11D6-9AD2-0030653DE0D6@jguru.com>

Hi Sinan,

I have noted your request in my list of pre 2.7.2 final things to do...

Ter

On Wednesday, March 13, 2002, at 09:47  AM, Sinan wrote:

>
>
> I am currently trying to revamp the antlr module in netbeans.
>
> What they have done esentially is take antlr.g and modify it to
> suit their prupose. Looking thru it it appears that what is really
> needed is a simple grammar inheritance. So here is a modest proposal
> for a simple way to do that.
>
> The following code snippet ( other than the ignored bodies for
> a couple of methods) shgould be the complete .g file for
> antlreditor.g
>
> /// ---begin------------
> header {
> /*
>  * ............bunch of netbeans comments
>  */
> package org.netbeans.modules.antlr.editor.g;
> }
>
>
> class ANTLREditorParser extends ANTLRParser;
>
>
> {
> 	SecondaryFileHandler behavior;
>
> 	public void reportError(String s) {
> 		behaviour.reportError(s);
> 	}
> 	
> 	public ANTLRParser(
> 		TokenBuffer tokenBuf,
> 		SecondaryFileHandler behavior_
> 			) {
> 			super(tokenBuf, 1);
> 			tokenNames = _tokenNames;
> 			behavior = behavior_;
> 	}
>
> 	public static void dump (PrintStream out, SecondaryFileHandler
> behavior)
> 	{
> 		// some code here...
> 	}
>
> 	public static void scan (String filename)
> 	{
> 		// some more code here.....
> 	}
>
> 	public static void main (String[] args)
> 	{
> 	// some some more more code here......
> 	}
> }
> 	
> // ---end---------
>
> However looking thru antlr.g in 2.7.2a2 	
>
>
> The following lines cause a little grief ( who wrote this stuff
> anyway?).
>
> Specifically the problems re that the messages should be directed to the
> editor infrastructure in netbeans. I can do that by overriding
> reportError
> method, and I can modify the lines that talks to antlrTool.error(),
> antlrTool.warning(). However. If theselines were changed to call
>
> error() , and warning() , then I can override them without any
> modification
> to the antlr. g...
>
> Ric, Ter, any comments???
>
> Sinan
>
>
> // ----------problematic lines------------
> //				reportError("line "+ex.line+": JAVADOC comments may only prefix
> rules and grammars");
> 				antlrTool.error("JAVADOC comments may only prefix rules and
> grammars", getFilename(), ex.getLine(), ex.getColumn());
> ---------
> 				antlrTool.error(ex.getMessage(), getFilename(), ex.getLine(),
> ex.getColumn());
> //				reportError("rule classDef trapped:\n"+ex.toString());
> 			antlrTool.error(ex.getMessage(), getFilename(), ex.getLine(),
> ex.getColumn());
> //			reportError("rule classDef trapped:\n"+ex.toString());
> ----------
> 			antlrTool.warning("did you forget to terminate previous rule?",
> getFilename(), label.getLine(), label.getColumn());
>
>
> ----------	
> 		antlrTool.error("Malformed range line ", getFilename(), c1.getLine(),
> c1.getColumn());
> 		
> ----------
>  			antlrTool.warning("use 'class X extends Parser'", getFilename(),
> idTok.getLine(), idTok.getColumn());
> //			System.out.println("warning: line " +
> //				idTok.getLine() + ": use 'class X extends Parser'");
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Chief Scientist & Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Wed Mar 20 11:09:08 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: ANTLR and guarded predicates
Message-ID: <170826586F3BD511910D0200C110AAA8032B4813@memail03.bco-home.com>

Oh wait, this is going to change the sem pred into a validating predicate
instead of a disambiguating one, isn't it?  My solution may not work.  I
have to do some research on this.  Something in the back of my head says
that the sem pred gets thrown in with the lookahead test instead of waiting
for the syn pred.  I gotta check it out tho.

Monty

> -----Original Message-----
> From: lgcraymer [mailto:lgc@mail1.jpl.nasa.gov]
> Sent: Wednesday, March 20, 2002 11:03 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: ANTLR and guarded predicates
> 
> 
> --- In antlr-interest@y..., mzukowski@b... wrote:
> > I don't have time to look into why it's not working right now, but 
> you could
> > certainly get by with a subrule:
> > 
> > production: (syntax guard)=>({semantic test}? another_production)
> >           | some_other_production
> >           ;
> > 
> > Also note that PCCTS properly hoisted predicates into 
> calling rules. 
>  ANTLR
> > does not, you will have to manually hoist the rule yourself, like I 
> did with
> > the typedef rule in the GCC grammar.
> > 
> > Monty
> 
> ANTLR attaches sempreds to subrules (explicit or implied) internally, 
> so Monty's solution should work properly.  Fixing the internals 
> without breaking something else might be difficult:  as Ric has 
> mentioned in other emails, ANTLR's internal "tree" (custom, 
> unfortunately, not AST-based) structure is messy to deal with and 
> needs a redesign/rewrite.
> 
> --Loring
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed Mar 20 11:38:50 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Antlr 2.7.2a2 and NetBeans
References: <AAEAD210-3C35-11D6-9AD2-0030653DE0D6@jguru.com>
Message-ID: <3C98E54A.C11B6E4D@boeing.com>

Terence Parr wrote:
> 
> Hi Sinan,
> 
> I have noted your request in my list of pre 2.7.2 final things to do...
> 
> Ter
> 


Ter,

 I attached a file called diffs.jar

 The only diffs that are pertinent are the ones about:

 1) antlr.g : put error/warning etc... in local methods
 2) GrammarElement.java : for some reason if the class is not public,
java
	compiler complains about "public static int ..." being not accessible.

 Sinan
 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: diffs.jar
Type: application/java-archive
Size: 9309 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20020320/55083c02/diffs.bin
From parrt at jguru.com  Wed Mar 20 11:41:28 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Antlr 2.7.2a2 and NetBeans
In-Reply-To: <3C98E54A.C11B6E4D@boeing.com>
Message-ID: <78C69643-3C3A-11D6-9AD2-0030653DE0D6@jguru.com>


On Wednesday, March 20, 2002, at 11:38  AM, Sinan wrote:

> Terence Parr wrote:
>>
>> Hi Sinan,
>>
>> I have noted your request in my list of pre 2.7.2 final things to do...
>>
>> Ter
>>
>
>
> Ter,
>
>  I attached a file called diffs.jar

Cool.

>
>  The only diffs that are pertinent are the ones about:
>
>  1) antlr.g : put error/warning etc... in local methods

Can't you just substitute a new tools object that redirects the errors 
where you want?  I set it up that way for the person doing the eclipse 
port I believe.


Ter

>  2) GrammarElement.java : for some reason if the class is not public,
> java
> 	compiler complains about "public static int ..." being not accessible.
>
>  Sinan
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Chief Scientist & Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed Mar 20 11:54:20 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Antlr 2.7.2a2 and NetBeans
References: <78C69643-3C3A-11D6-9AD2-0030653DE0D6@jguru.com>
Message-ID: <3C98E8EC.6A39BC49@boeing.com>

Terence Parr wrote:
[...]
> >  The only diffs that are pertinent are the ones about:
> >
> >  1) antlr.g : put error/warning etc... in local methods
> 
> Can't you just substitute a new tools object that redirects the errors
> where you want?  I set it up that way for the person doing the eclipse
> port I believe.
> 
> Ter

I could probably do that, however the changes I gave you does not break
that. 
The only thing it does is create warning() and error() methods and just
calls
the Tool.error() and Tool.warning() anyway. NetBeans just subtitutes 
behavior.error() and behavior.warning() ( too bad I learned my English
in Turkey.
behaviour()  vs. behavior() caused me hours worth of grief....)


Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jeff_c_lin at yahoo.com  Wed Mar 20 14:54:46 2002
From: jeff_c_lin at yahoo.com (jeff_c_lin)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: CircularQueue compilation question, please help.
In-Reply-To: <20020319103511.B26460@cs.utwente.nl>
Message-ID: <a7b3vm+r1sf@eGroups.com>

Hi Ric,

I managed to compile the dll. Thank you. But when I tried to link the export library with a simple parser, I get a lot of multiple definition errors. Not sure what is happening. Maybe I'll try STLport. If I ever do this successfully, I think I'll post a Antlr DLL HOWTO. :)

--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:
> Hi,
> 
> On Tue, Mar 19, 2002 at 05:37:12AM -0000, jeff_c_lin wrote:
> > I have a question about the way CircularQueue is defined. It has a private
> > copy contructor and private assignment operator but they are not defined
> > anywhere (no CircularQueue.cpp). What's the purpose of these and why don't
> > they cause compilation error?
> 
> This prevents unintended use of default copy/assignment
> constructor/operators. As long as the constructor/operator is not used
> there is no problem. In the case of CircularQueue it might not be necessary
> to do this, I disabled all copy assignment constructors for classes that do
> not explicitly support them.
> 
> > I'm trying to compile antlr classes as an DLL, and I'm getting C4661
> > warning message. I instantiate CircularQueue when I see it used in as an
> > class member. For example, class InputBuffer has a CircularQueue<int>
> > member. According the MS Knowledge base, I need to instantiate a template
> > class in order to export it from an DLL. So after InputBuffer class
> > declaration, I do "template class DLLIMEXPORT CircularQueue<int>", but the
> > compiler warns that CircularQueue's member functions are not defined. I'm
> > surprised it's not an error. Anyone knows what's going on here? How do I
> > get rid of the warning messages?
> 
> Ignore them or use the appropriate #pragma or whatever MSVC uses. Depending
> on the version of antlr, the version of windows and the version of MSVC
> (and the STL you use) you may not succceed building a dll. Search the
> archives for some discussions on the subject (you may have to switch to
> STLPort).
> 
> Cheers,
> 
> Ric
> --
> -----+++++*****************************************************+++++++++-------
>     ---- Ric Klaren ----- klaren@c... ----- +31 53 4893722  ----
> -----+++++*****************************************************+++++++++-------
>   "I don't have anything against Java - it's the best damn implementation
> 				  of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From antlr-list at wonderclown.com  Wed Mar 20 15:11:33 2002
From: antlr-list at wonderclown.com (Randall Nortman)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Working around the LALL(k) vs. LL(k) problem ?
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B480D@memail03.bco-home.com>
References: <170826586F3BD511910D0200C110AAA8032B480D@memail03.bco-home.com>
Message-ID: <20020320231132.GC7994@aerosol>

On Wed, Mar 20, 2002 at 10:03:18AM -0800, mzukowski@bco.com wrote:
> > -----Original Message-----
> > From: Randall Nortman [mailto:antlr-list@wonderclown.com]
> > 
> > I'm working on my first ANTLR grammar, and I keep getting bitten by
> > the fact that ANTLR uses linear approximation of LL(k).  I'm wondering
> > if there are any general strategies for avoiding or working around
> > this problem.  Can predicates be used?
[...]
> 
> statement: (IDENTIFIER IDENTIFIER)=>variableDecl | expression;
> 

Of course!  I was trying to put the predicate on variableDecl instead
of statement.  Sorry, I should have figured that one out on my own.

> > On a related note, I'm designing both the syntax of this language and
> > the parser together, using ANTLR along the way to catch problems in my
> > syntax.  However, I feel like I spend as much time trying to figure
> > out why ANTLR doesn't like a rule as I do developing the syntax
> > itself.  I never know if an error message from ANTLR is because my
> > syntax is bad or because I'm just not representing it in a way that
> > ANTLR likes.  Might there be a better tool for developing the grammar
> > independent of the parser?  (I want to make sure I have a regular
> > grammar, which can be parsed without referencing any semantic
> > information such as symbol tables, so the tool should be able to
> > validate this.)
> 
> If you look at the generated code, it's usually pretty easy to figure out
> what antlr is trying to do.  What other problems have been on the antlr side
> instead of the bad syntax side?  I'm not familiar enough with other tools to
> recommend any alternatives. 

As another example, here's one of the things I ran into early on that
confused me.  It was a case of '(A|B)|C' being different from
'A|B|C'.  The following testcase is an extreme simplification of the
grammar I originally wrote that caused the problem:

  test: (ID | paren) | ID paren;

  paren: "(" test ")";

As such, there is a nondeterminism on 'test'.  Remove the grouping
parenthesis, and it works just fine.  This was very non-intuitive to
me, and took many hours to track down.  (The situation was
considerably more complex in real life, but this is what I eventually
narrowed it down to.)

I'm not knocking ANTLR at all; I think it's a wonderful system.  As I
get used to the way it works, I'm having fewer and fewer problems.
But what I ideally want in this stage of language design is to simply
write straight EBNF (no predicates), and have something to analyze it
and tell me if the grammar is ambiguous or not.  Once I'm sure I've
got a good grammar, then I can worry about how to parse it.  Doing
both at once is a little inconvenient.  (Not to mention that having
redundant information, like the predicate above that solves my
problem, clutters up the grammar, making it harder to read.)

Thanks for the help.

Randall Nortman

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Wed Mar 20 15:35:58 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Working around the LALL(k) vs. LL(k) problem ?
References: <170826586F3BD511910D0200C110AAA8032B480D@memail03.bco-home.com> <20020320231132.GC7994@aerosol>
Message-ID: <004501c1d067$feffa420$0200a8c0@matthewfnb>

It depends what you mean by "ambiguous".
I assume you mean for some given k lookahead the grammar is not "ambiguous".
But you still have to decide what value of k you need and this may change as
your grammar evolves.

Ideally I would like a language that is not "ambiguous" with a lookahead of
1 token.  However as I designed the language for ease of use by the user
(rather then the parser) I found this was not possible.

I think the Antlr's  (   )=> solution is very good.
matthew
----- Original Message -----
From: "Randall Nortman" <antlr-list@wonderclown.com>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, March 21, 2002 10:11 AM
Subject: Re: [antlr-interest] Working around the LALL(k) vs. LL(k) problem ?


> On Wed, Mar 20, 2002 at 10:03:18AM -0800, mzukowski@bco.com wrote:
> > > -----Original Message-----
> > > From: Randall Nortman [mailto:antlr-list@wonderclown.com]
> > >
> > > I'm working on my first ANTLR grammar, and I keep getting bitten by
> > > the fact that ANTLR uses linear approximation of LL(k).  I'm wondering
> > > if there are any general strategies for avoiding or working around
> > > this problem.  Can predicates be used?
> [...]
> >
> > statement: (IDENTIFIER IDENTIFIER)=>variableDecl | expression;
> >
>
> Of course!  I was trying to put the predicate on variableDecl instead
> of statement.  Sorry, I should have figured that one out on my own.
>
> > > On a related note, I'm designing both the syntax of this language and
> > > the parser together, using ANTLR along the way to catch problems in my
> > > syntax.  However, I feel like I spend as much time trying to figure
> > > out why ANTLR doesn't like a rule as I do developing the syntax
> > > itself.  I never know if an error message from ANTLR is because my
> > > syntax is bad or because I'm just not representing it in a way that
> > > ANTLR likes.  Might there be a better tool for developing the grammar
> > > independent of the parser?  (I want to make sure I have a regular
> > > grammar, which can be parsed without referencing any semantic
> > > information such as symbol tables, so the tool should be able to
> > > validate this.)
> >
> > If you look at the generated code, it's usually pretty easy to figure
out
> > what antlr is trying to do.  What other problems have been on the antlr
side
> > instead of the bad syntax side?  I'm not familiar enough with other
tools to
> > recommend any alternatives.
>
> As another example, here's one of the things I ran into early on that
> confused me.  It was a case of '(A|B)|C' being different from
> 'A|B|C'.  The following testcase is an extreme simplification of the
> grammar I originally wrote that caused the problem:
>
>   test: (ID | paren) | ID paren;
>
>   paren: "(" test ")";
>
> As such, there is a nondeterminism on 'test'.  Remove the grouping
> parenthesis, and it works just fine.  This was very non-intuitive to
> me, and took many hours to track down.  (The situation was
> considerably more complex in real life, but this is what I eventually
> narrowed it down to.)
>
> I'm not knocking ANTLR at all; I think it's a wonderful system.  As I
> get used to the way it works, I'm having fewer and fewer problems.
> But what I ideally want in this stage of language design is to simply
> write straight EBNF (no predicates), and have something to analyze it
> and tell me if the grammar is ambiguous or not.  Once I'm sure I've
> got a good grammar, then I can worry about how to parse it.  Doing
> both at once is a little inconvenient.  (Not to mention that having
> redundant information, like the predicate above that solves my
> problem, clutters up the grammar, making it harder to read.)
>
> Thanks for the help.
>
> Randall Nortman
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From antlr-list at wonderclown.com  Wed Mar 20 17:17:38 2002
From: antlr-list at wonderclown.com (antlr-list@wonderclown.com)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Working around the LALL(k) vs. LL(k) problem ?
In-Reply-To: <004501c1d067$feffa420$0200a8c0@matthewfnb>
References: <170826586F3BD511910D0200C110AAA8032B480D@memail03.bco-home.com> <20020320231132.GC7994@aerosol> <004501c1d067$feffa420$0200a8c0@matthewfnb>
Message-ID: <20020321011738.GE7994@aerosol>

On Thu, Mar 21, 2002 at 10:35:58AM +1100, Matthew Ford wrote:
> It depends what you mean by "ambiguous".
> I assume you mean for some given k lookahead the grammar is not "ambiguous".
> But you still have to decide what value of k you need and this may change as
> your grammar evolves.

Actually, I don't want to reference k at all for this purpose.
Syntactic ambiguity of a grammar is independent of method used to
parse the language.  (I'm specifically referring to context-free
grammars; e.g., EBNF.)  A grammar is unambiguous if each string has
only a single corresponding parse tree (aka AST).  (Note that a
grammar might require infinite look-ahead and still be unambiguous.)
If a given string in the language can be parsed into more than one
valid tree, then the grammar is ambiguous.  The infamous
"dangling-else" problem is an example of syntactic ambiguity.  I want
to make sure I avoid such problems in my grammar.  (Of course,
imposing rules that say that an "else" attaches to the nearest "if" is
used to eliminate the ambiguity in practice, but the grammar itself
does not encode these sorts of rules, and is therefore still
ambiguous.)

As another example, the grammars of natural human languages are
typically overflowing with ambiguity.  We determine what the intended
meaning was from context and "common sense".  There are constructed
human languages (e.g., Lojban, http://www.lojban.org) which have
unambiguous grammars.  (I believe that Lojban may require infinite
lookahead, but it is unambiguous, and I believe an EBNF grammar can be
downloaded from somewhere on the above website.  Tools for parsing it
have been written; I'm not sure whether the parsers are top-down or
bottom-up.  It might be interesting to write an ANTLR grammar for it.)

I suspect that ANTLR, for all its power in generating parsers, is
actually not quite the right tool for verifying that a given grammar
is unambiguous.  Because it uses linear approximation, it can see
ambiguity where there is none.  If I'm not mistaken, using predicates
to work around this problem might cause ANTLR to not complain about an
actual ambiguity.

Unfortunately, I don't know of any tools which will validate a
grammar's unambiguity without being tied to a particular parsing
method.  I'm not even sure if such a thing is possible, or
computationally practical.  I do know that grammars can be proven
unambiguous by hand, through formal mathematical proof, but that's
rather time-consuming except for simple grammars.  If anybody knows of
methods for automatic validation, I'd love to hear about them.

Let me reiterate, before I make myself unwelcome on this list, that
I'm not criticizing ANTLR in the slightest.  I think it's great at
what it does.  I'm just wondering if it's great at what I want it to
do -- the right tool for the job, and all that.

Randall Nortman

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From scott at fmsinc.com  Wed Mar 20 23:15:46 2002
From: scott at fmsinc.com (Scott)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: C# port of 2.7.2
Message-ID: <D02359EA481CD311BBBA00104B9834E9D32901@FMS_MAIL>

I'm hesitant to mention this, but I have a custom version of ANTLR 2.7.1
that works for C# and VB.NET. This includes the code generators. I've been
meaning to post this "Real Soon Now", but I've been buried in trying to get
some products out the door. I intended to clean up the code and document
each change I've made, before posting it, but there seems to be enough
interest that I'm willing to post what I have. 

I haven't yet looked at porting this to 2.7.2.xxx, since I can't afford to
break my code base at this point. This is on my list, though. I can't really
afford to do any maintenance for the next few months, but I'm happy to pass
the torch. 

Unfortunately, I made changes to the C# version of the antlr runtime that
break compatibility with the Java version, but make it more in line with the
CLS. Mostly casing, and wrapping getXXX, setXXX into properties. I also
needed to make changes the java based code generator driver to support
namespaces for C# and VB.NET. I also added lazy creation of the _saveIndex
variable to get rid of annoying unused variable warnings.

In addition, I also added a few optimizations to (hopefully) crank up
performance a little bit. The most obvious are that I hard coded Token and
AST creation to work around CreateInstance performance problems, and I added
cache'ing for the LA() members. I also implemented the InputGuessing
optimization mentioned on this list a few months back, since the .NET GC was
hampering performance. There might be few more that I can't remember at this
point. 

The code generators are messy, but they are workable. If anyone is still
interested, I can provide a link to it in a few days. 
 
It's worked well for my purposes, but YMMV.

Thanks,

Scott Ellis
www.fmsinc.com


-----Original Message-----
From: Terence Parr [mailto:parrt@jguru.com] 
Sent: Wednesday, March 20, 2002 2:03 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Re: C# port of 2.7.2

Hi Guys, just back from a week off.  2.7.2a2 is close, but not quite 
finished.  Might add a few more things...I should have more time soon.

Also, don't implement a new code generator.  The current thing sucks but 
I am experimenting with a new code gen system myself that I might hack 
into 2.x to make things easier.  OTOH, it might have to wait until 3.0 
(a complete rewrite).

In summary, it might just be easier to work with the crappy code 
generation thing in ANTLR as it stands; C# is basically Java so you 
should no trouble with modifying JavaCodeGenerator.java, right?

Thanks,
Terence


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tom_kra at hotmail.com  Thu Mar 21 00:36:19 2002
From: tom_kra at hotmail.com (kordeul)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] C++ input
Message-ID: <a7c623+7vik@eGroups.com>

Hi

I'm new to the antlr and I have problem feeding the parser with some 
input (like file or memory char* input). Or I get the 
NoViableAltException exception or the InputBuffer fails during fill
() call inside LA() function (when searching for lookahead).

Can someone write me the code that will feed the parser (lexer) with 
some input? I don't know java, so please use C++.

Thanks Tom


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Thu Mar 21 01:05:20 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] C++ input
In-Reply-To: <a7c623+7vik@eGroups.com>; from tom_kra@hotmail.com on Thu, Mar 21, 2002 at 08:36:19AM -0000
References: <a7c623+7vik@eGroups.com>
Message-ID: <20020321100519.D26460@cs.utwente.nl>

On Thu, Mar 21, 2002 at 08:36:19AM -0000, kordeul wrote:
> I'm new to the antlr and I have problem feeding the parser with some 
> input (like file or memory char* input). Or I get the 
> NoViableAltException exception or the InputBuffer fails during fill
> () call inside LA() function (when searching for lookahead).
> 
> Can someone write me the code that will feed the parser (lexer) with 
> some input? I don't know java, so please use C++.

Look at Main2.cpp of examples/cpp/calc in the 2.7.2a1 distro. That shows
one way (with istringstream) the other way is to grab one of the
CharInputBuffers in the archives. For normal file streams it's just a
matter of instantiating the lexer with it.

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
Wit is cultured insolence. --- Aristotle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tom_kra at hotmail.com  Thu Mar 21 01:28:03 2002
From: tom_kra at hotmail.com (kordeul)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: C++ input
In-Reply-To: <20020321100519.D26460@cs.utwente.nl>
Message-ID: <a7c933+jrsu@eGroups.com>

--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:
> On Thu, Mar 21, 2002 at 08:36:19AM -0000, kordeul wrote:
> > I'm new to the antlr and I have problem feeding the parser with 
some 
> > input (like file or memory char* input). Or I get the 
> > NoViableAltException exception or the InputBuffer fails during 
fill
> > () call inside LA() function (when searching for lookahead).
> > 
> > Can someone write me the code that will feed the parser (lexer) 
with 
> > some input? I don't know java, so please use C++.
> 
> Look at Main2.cpp of examples/cpp/calc in the 2.7.2a1 distro. That 
shows
> one way (with istringstream) the other way is to grab one of the
> CharInputBuffers in the archives. For normal file streams it's 
just a
> matter of instantiating the lexer with it.
> 
> Ric
> --
> -----
+++++*****************************************************+++++++++--
-----
>     ---- Ric Klaren ----- klaren@c... ----- +31 53 4893722  ----
> -----
+++++*****************************************************+++++++++--
-----
> Wit is cultured insolence. --- Aristotle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tom_kra at hotmail.com  Thu Mar 21 01:28:27 2002
From: tom_kra at hotmail.com (kordeul)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: C++ input
In-Reply-To: <20020321100519.D26460@cs.utwente.nl>
Message-ID: <a7c93r+mu8o@eGroups.com>

--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:
> On Thu, Mar 21, 2002 at 08:36:19AM -0000, kordeul wrote:
> > I'm new to the antlr and I have problem feeding the parser with 
some 
> > input (like file or memory char* input). Or I get the 
> > NoViableAltException exception or the InputBuffer fails during 
fill
> > () call inside LA() function (when searching for lookahead).
> > 
> > Can someone write me the code that will feed the parser (lexer) 
with 
> > some input? I don't know java, so please use C++.
> 
> Look at Main2.cpp of examples/cpp/calc in the 2.7.2a1 distro. That 
shows
> one way (with istringstream) the other way is to grab one of the
> CharInputBuffers in the archives. For normal file streams it's 
just a
> matter of instantiating the lexer with it.
> 
> Ric
> --
> -----
+++++*****************************************************+++++++++--
-----
>     ---- Ric Klaren ----- klaren@c... ----- +31 53 4893722  ----
> -----
+++++*****************************************************+++++++++--
-----
> Wit is cultured insolence. --- Aristotle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tom_kra at hotmail.com  Thu Mar 21 01:31:04 2002
From: tom_kra at hotmail.com (kordeul)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: C++ input
In-Reply-To: <20020321100519.D26460@cs.utwente.nl>
Message-ID: <a7c98o+s7uv@eGroups.com>

Hi

I use version 2.7.1 of ANTLR and there's no main2.cpp in the 
cpp/calc example. Can you write the actual code?

Also I forgot to mention: I use Borland C++ Builder 5 if this 
changes something.

BR Tom

--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:
> On Thu, Mar 21, 2002 at 08:36:19AM -0000, kordeul wrote:
> > I'm new to the antlr and I have problem feeding the parser with 
some 
> > input (like file or memory char* input). Or I get the 
> > NoViableAltException exception or the InputBuffer fails during 
fill
> > () call inside LA() function (when searching for lookahead).
> > 
> > Can someone write me the code that will feed the parser (lexer) 
with 
> > some input? I don't know java, so please use C++.
> 
> Look at Main2.cpp of examples/cpp/calc in the 2.7.2a1 distro. That 
shows
> one way (with istringstream) the other way is to grab one of the
> CharInputBuffers in the archives. For normal file streams it's 
just a
> matter of instantiating the lexer with it.
> 
> Ric
> --
> -----
+++++*****************************************************+++++++++--
-----
>     ---- Ric Klaren ----- klaren@c... ----- +31 53 4893722  ----
> -----
+++++*****************************************************+++++++++--
-----
> Wit is cultured insolence. --- Aristotle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Thu Mar 21 01:42:23 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: C++ input
In-Reply-To: <a7c98o+s7uv@eGroups.com>; from tom_kra@hotmail.com on Thu, Mar 21, 2002 at 09:31:04AM -0000
References: <20020321100519.D26460@cs.utwente.nl> <a7c98o+s7uv@eGroups.com>
Message-ID: <20020321104223.F26460@cs.utwente.nl>

On Thu, Mar 21, 2002 at 09:31:04AM -0000, kordeul wrote:
> I use version 2.7.1 of ANTLR and there's no main2.cpp in the
> cpp/calc example. Can you write the actual code?

As I said in the 2.7.2a1 distribution but anyway..

It's stripped from all the fluff (error handling, namespace stuff and some
other details)

int main( int argc, char*argv[] )
{
   // write the argv strings to a ostringstream...
   ostringstream expr;
   for( int i = 1; i < argc; i++ )
   {
		if( i > 1 && i != (argc-1))
			expr << ' ';
       expr << argv[i];
	 }

	 istringstream input(expr.str());  // prepare istringstream with input
	 CalcLexer lexer(input);
	 CalcParser parser(lexer);
    parser.expr();
}

With a file:

ifstream input("somefile.txt");

And then use Lexer and parser as above.

> Also I forgot to mention: I use Borland C++ Builder 5 if this
> changes something.

Dunno if C++ builder has istringstream support if not you'd better search
the archives for the CharInputBuffer stuff.

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
Wit is cultured insolence. --- Aristotle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tom_kra at hotmail.com  Thu Mar 21 01:40:06 2002
From: tom_kra at hotmail.com (kordeul)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: C++ input
In-Reply-To: <a7c623+7vik@eGroups.com>
Message-ID: <a7c9pm+gto8@eGroups.com>

I tried to compile using MS VC++ 6 and it works; it seems it's 
Borland C++ Builder that doesn't like something... Does anyone know 
how to use ANTLR with BCB?

Thanks Tom

--- In antlr-interest@y..., "kordeul" <tom_kra@h...> wrote:
> Hi
> 
> I'm new to the antlr and I have problem feeding the parser with 
some 
> input (like file or memory char* input). Or I get the 
> NoViableAltException exception or the InputBuffer fails during fill
> () call inside LA() function (when searching for lookahead).
> 
> Can someone write me the code that will feed the parser (lexer) 
with 
> some input? I don't know java, so please use C++.
> 
> Thanks Tom


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tom_kra at hotmail.com  Thu Mar 21 02:00:54 2002
From: tom_kra at hotmail.com (kordeul)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: C++ input
In-Reply-To: <20020321104223.F26460@cs.utwente.nl>
Message-ID: <a7cb0m+p7ss@eGroups.com>

Thanks

BCB has all stram support. As I mentioned in my other reply, it 
seems there's some other problem, since the VC works!

BR Tom

--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:
> On Thu, Mar 21, 2002 at 09:31:04AM -0000, kordeul wrote:
> > I use version 2.7.1 of ANTLR and there's no main2.cpp in the
> > cpp/calc example. Can you write the actual code?
> 
> As I said in the 2.7.2a1 distribution but anyway..
> 
> It's stripped from all the fluff (error handling, namespace stuff 
and some
> other details)
> 
> int main( int argc, char*argv[] )
> {
>    // write the argv strings to a ostringstream...
>    ostringstream expr;
>    for( int i = 1; i < argc; i++ )
>    {
> 		if( i > 1 && i != (argc-1))
> 			expr << ' ';
>        expr << argv[i];
> 	 }
> 
> 	 istringstream input(expr.str());  // prepare istringstream 
with input
> 	 CalcLexer lexer(input);
> 	 CalcParser parser(lexer);
>     parser.expr();
> }
> 
> With a file:
> 
> ifstream input("somefile.txt");
> 
> And then use Lexer and parser as above.
> 
> > Also I forgot to mention: I use Borland C++ Builder 5 if this
> > changes something.
> 
> Dunno if C++ builder has istringstream support if not you'd better 
search
> the archives for the CharInputBuffer stuff.
> 
> Ric
> --
> -----
+++++*****************************************************+++++++++--
-----
>     ---- Ric Klaren ----- klaren@c... ----- +31 53 4893722  ----
> -----
+++++*****************************************************+++++++++--
-----
> Wit is cultured insolence. --- Aristotle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From renyedi at yahoo.com  Thu Mar 21 03:06:58 2002
From: renyedi at yahoo.com (Robert Enyedi)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Antlr 2.7.2a2 and NetBeans
References: <1D532F5C75B30A46A78D5107B635DF895327@edzell.windsor.com> <3C8F9099.E14FA088@boeing.com> <050901c1cc01$2c288090$3000000a@robert> <3C9767F8.31EA45F0@boeing.com>
Message-ID: <022801c1d0c8$8c68f590$3000000a@robert>

It would be very nice to have it somewhere. Thanks in advance!

Have you any idea why there's no module in the Files section on the module's
site?

----- Original Message -----
From: "Sinan" <sinan.karasu@boeing.com>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, March 19, 2002 6:31 PM
Subject: Re: [antlr-interest] Antlr 2.7.2a2 and NetBeans


> Robert Enyedi wrote:
> >
> > Hi, Sinan
> >
> > Do you have a Netbeans module for Antlr 2.7.1 already built?
> >
> > If so, could you tell me please where I can find it?
> >
> > Robert
>
> Yes I do. ( I built it with 2.7.2a2 but it should work for 2.7.1 ...
>
> I'll put it up at an ftp site tonight and let you knwo where it is.
>
> It more than likely will be at ftp://bozuk.org , but first I gotta set
> up
> an anonymous/guest account....
>
> I have 2 versions built.
>
> 1) Fixed the current version so that it compiles with 2.7.2a2
> 2) Made a new version that is built on 2.7.2a2
>
> The second one required some fixes to 2.7.2a2. I wanted to use
> antlr.g from Ter/Ric unmodified. Unfortunately some methods were not
> cleanly overridable. Total changes are about 10 lines. I'll feed them to
> Ter today.
>
> Sinan
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>


_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From nikzin at yahoo.co.uk  Thu Mar 21 04:05:25 2002
From: nikzin at yahoo.co.uk (=?iso-8859-1?q?nikhil=20m?=)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] help
Message-ID: <20020321120525.44181.qmail@web12802.mail.yahoo.com>

hi 

anybody got any docs on C++ code generation 
PLS SEND TO ME 


REGARDS 
NIKHIL

__________________________________________________
Do You Yahoo!?
Everything you'll ever need on one web page
from News and Sport to Email and Music Charts
http://uk.my.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Mar 21 06:23:43 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Re: C# port of 2.7.2
In-Reply-To: <D02359EA481CD311BBBA00104B9834E9D32901@FMS_MAIL>
Message-ID: <a7cqdf+r9f3@eGroups.com>

--- In antlr-interest@y..., Scott <scott@f...> wrote:

> The code generators are messy, but they are workable. If anyone is 
still
> interested, I can provide a link to it in a few days. 

I'm interested.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Thu Mar 21 06:24:21 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:43 2004
Subject: [antlr-interest] Working around the LALL(k) vs. LL(k) problem
	 ?
Message-ID: <170826586F3BD511910D0200C110AAA8032B481D@memail03.bco-home.com>

I'm curious why it is important to you to have no syntactic ambiguity.  What
kind of language are you designing?

Monty

> -----Original Message-----
> From: antlr-list@wonderclown.com [mailto:antlr-list@wonderclown.com]
> Sent: Wednesday, March 20, 2002 5:18 PM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Working around the LALL(k) vs. LL(k)
> problem ?
> 
> 
> On Thu, Mar 21, 2002 at 10:35:58AM +1100, Matthew Ford wrote:
> > It depends what you mean by "ambiguous".
> > I assume you mean for some given k lookahead the grammar is 
> not "ambiguous".
> > But you still have to decide what value of k you need and 
> this may change as
> > your grammar evolves.
> 
> Actually, I don't want to reference k at all for this purpose.
> Syntactic ambiguity of a grammar is independent of method used to
> parse the language.  (I'm specifically referring to context-free
> grammars; e.g., EBNF.)  A grammar is unambiguous if each string has
> only a single corresponding parse tree (aka AST).  (Note that a
> grammar might require infinite look-ahead and still be unambiguous.)
> If a given string in the language can be parsed into more than one
> valid tree, then the grammar is ambiguous.  The infamous
> "dangling-else" problem is an example of syntactic ambiguity.  I want
> to make sure I avoid such problems in my grammar.  (Of course,
> imposing rules that say that an "else" attaches to the nearest "if" is
> used to eliminate the ambiguity in practice, but the grammar itself
> does not encode these sorts of rules, and is therefore still
> ambiguous.)
> 
> As another example, the grammars of natural human languages are
> typically overflowing with ambiguity.  We determine what the intended
> meaning was from context and "common sense".  There are constructed
> human languages (e.g., Lojban, http://www.lojban.org) which have
> unambiguous grammars.  (I believe that Lojban may require infinite
> lookahead, but it is unambiguous, and I believe an EBNF grammar can be
> downloaded from somewhere on the above website.  Tools for parsing it
> have been written; I'm not sure whether the parsers are top-down or
> bottom-up.  It might be interesting to write an ANTLR grammar for it.)
> 
> I suspect that ANTLR, for all its power in generating parsers, is
> actually not quite the right tool for verifying that a given grammar
> is unambiguous.  Because it uses linear approximation, it can see
> ambiguity where there is none.  If I'm not mistaken, using predicates
> to work around this problem might cause ANTLR to not complain about an
> actual ambiguity.
> 
> Unfortunately, I don't know of any tools which will validate a
> grammar's unambiguity without being tied to a particular parsing
> method.  I'm not even sure if such a thing is possible, or
> computationally practical.  I do know that grammars can be proven
> unambiguous by hand, through formal mathematical proof, but that's
> rather time-consuming except for simple grammars.  If anybody knows of
> methods for automatic validation, I'd love to hear about them.
> 
> Let me reiterate, before I make myself unwelcome on this list, that
> I'm not criticizing ANTLR in the slightest.  I think it's great at
> what it does.  I'm just wondering if it's great at what I want it to
> do -- the right tool for the job, and all that.
> 
> Randall Nortman
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Thu Mar 21 08:47:35 2002
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Re: C# port of 2.7.2
In-Reply-To: <14A6A2E4-3C36-11D6-9AD2-0030653DE0D6@jguru.com>
References: <20020315095351.Z680@cs.utwente.nl>
	<14A6A2E4-3C36-11D6-9AD2-0030653DE0D6@jguru.com>
Message-ID: <15514.3751.243932.353625@non.non.net>

>>>>> "Terence" == Terence Parr <parrt@jguru.com> writes:
[...]
> That's being pretty polite ;) The code gen part is heinous. ;) 3.0 will
> be a no-new-feature complete rewrite to make this sucker clean.

<ahem>
Hoisting
</ahem>

:-)
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Mar 21 08:55:40 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Re: C# port of 2.7.2
In-Reply-To: <15514.3751.243932.353625@non.non.net>
Message-ID: <79A77054-3CEC-11D6-9202-0030653DE0D6@jguru.com>


On Thursday, March 21, 2002, at 08:47  AM, John D. Mitchell wrote:

>>>>>> "Terence" == Terence Parr <parrt@jguru.com> writes:
> [...]
>> That's being pretty polite ;) The code gen part is heinous. ;) 3.0 will
>> be a no-new-feature complete rewrite to make this sucker clean.
>
> <ahem>
> Hoisting
> </ahem>

Oh no!  It's the hoisting man!  Yeah, that should go in there too ;) and 
perhaps real LL(k) with a timeout facility in case it hits an 
exponential computation landmine. :)

Ter
--
Chief Scientist & Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Mar 21 08:54:29 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Working around the LALL(k) vs. LL(k) problem ?
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B481D@memail03.bco-home.com>
Message-ID: <4F75820E-3CEC-11D6-9202-0030653DE0D6@jguru.com>


On Thursday, March 21, 2002, at 06:24  AM, mzukowski@bco.com wrote:

> I'm curious why it is important to you to have no syntactic ambiguity.  
> What
> kind of language are you designing?

I'll add some random thoughts on ambiguity and nondeterminism.  I need 
to think up a good description for the book anyway (not that this one 
here will be good) ;)

Technically, you want *any* computer language you design to be 
syntactically unambiguous.  Even if-then-else is unambiguous since the 
language manual says "ELSE goes with the most recent IF".  Remember that 
a language is just a valid set of sentences and however you say it is 
ok.  The trouble is when we try to formalize the language specification 
with a grammar.

If I remember properly, it's safe to say that if there is a language 
ambiguity, you will get an ambiguous grammar regardless of the parsing 
strategy (well, if it's an exact spec of the language).  For example, if 
a language says that "a()" is both a method call and a declaration then 
the language itself is ambiguous.  No grammar spec in the world will 
help your language definition.

Even if you have an unambiguous language, your grammar may not be able 
to express what you want--the grammar may be ambiguous.  Some languages 
are just too nasty to specify with simple BNF like meta-languages.  For 
example, the context sensitive languages are not compatible with our BNF 
meta-languages. [context-sensitive language say things like "only allow 
this construct if 30 lines from now you see a period character."]

As Randall points out, the parsing strategy affects the strength of the 
grammatical meta-language.  So, even if you have an unambiguous language 
with an unambiguous grammar, you might not have a (practical) parsing 
strategy that'll handle it.  The proper term to use is "deterministic" 
rather than "ambiguous" I feel when it comes to a specific flavor of 
grammar like LL(k) etc...  Languages and grammars can be ambiguous but 
parsers are nondeterminisitic, hence, you get nondeterminism warnings 
from ANTLR.  ANTLR doesn't know whether they are parsing strategy 
weaknesses, grammar ambiguities, or language ambiguities, but it does 
know that it doesn't know which path to choose at some point ;)  For 
example, IF-THEN-ELSE is nondeterministic for the parser but it's due to 
a grammar ambiguity not a strategy weakness.  Nondeterminism does not 
per force imply ambiguous grammar I don't think since one of the paths 
may lead to an invalid sentence; in that case, it's just a problem of 
the parsing strategy.

Also remember that there are an infinite number of grammars for any 
single language.  You could keep adding extra rules and such with no 
problem.  In fact, you often have to modify the grammar to suit the 
needs of your embedded actions.

Hmm...yep, that got the juices flowing.  Now lets see.  Where did I hide 
that M$ Word disk and my ANTLR book source...


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From drm at xilinx.com  Thu Mar 21 14:03:34 2002
From: drm at xilinx.com (Dennis Marsa)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] rethrowing of exceptions in ANTLR default exception handlers
Message-ID: <3C9A58B6.D6288920@xilinx.com>

Hello,

An ANTLR C++ default exception handler generally looks something
like this:

  catch (RecognitionException& ex) {
    if( inputState->guessing == 0 ) {
      reportError(ex);
      consume();
      consumeUntil(_tokenSet_6);
    } else {
      throw ex;
    }
  }

When guessing, the handler re-throws the exception with
the "throw ex;" statement in the else clause.

"throw ex;" actually throws a copy of ex (even though ex
is a reference).  If the caught exception is actually a
subclass of RecognitionException (e.g. MismatchedTokenException),
the copy made by the "throw ex" will only be a copy of the
RecognitionException part of the original exception.

Thus, the original exception can be sliced to a base class,
possibly losing information from the original exception, when
it is rethrown.

I believe the appropriate fix is to use throw with no operand:

   throw;   // no operand

which by definition rethrows the caught exception (ex)
without copying it.

  catch (RecognitionException& ex) {
    if( inputState->guessing == 0 ) {
      reportError(ex);
      consume();
      consumeUntil(_tokenSet_6);
    } else {
      throw;  // rethrows ex without copying
    }
  }

Attached is a patch against the 2.7.2a2 C++ code generator
that addresses this issue.

Regards,

Dennis
 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
*** CppCodeGenerator.java.orig	Thu Mar 21 14:37:16 2002
--- CppCodeGenerator.java	Thu Mar 21 14:37:31 2002
***************
*** 2267,2273 ****
  				println("} else {");
  				tabs++;
  				// When guessing, rethrow exception
! 				println("throw "+extractIdOfAction(handler.exceptionTypeAndName)+";");
  				tabs--;
  				println("}");
  			}
--- 2267,2273 ----
  				println("} else {");
  				tabs++;
  				// When guessing, rethrow exception
! 				println("throw;");
  				tabs--;
  				println("}");
  			}
***************
*** 3326,3332 ****
  				// When guessing, rethrow exception
  				println("} else {");
  				tabs++;
! 				println("throw ex;");
  				tabs--;
  				println("}");
  			}
--- 3326,3332 ----
  				// When guessing, rethrow exception
  				println("} else {");
  				tabs++;
! 				println("throw;");
  				tabs--;
  				println("}");
  			}
From antlr-list at wonderclown.com  Thu Mar 21 15:14:34 2002
From: antlr-list at wonderclown.com (Randall Nortman)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Ambiguous/Nondeterministic Grammars (Was: Working around the LALL(k) vs. LL(k) problem ?)
In-Reply-To: <4F75820E-3CEC-11D6-9202-0030653DE0D6@jguru.com>
References: <170826586F3BD511910D0200C110AAA8032B481D@memail03.bco-home.com> <4F75820E-3CEC-11D6-9202-0030653DE0D6@jguru.com>
Message-ID: <20020321231434.GI7994@aerosol>

I have found the answer to my own question of whether or not a tool
exists for validating whether or not a general context-free grammar is
unambiguous, and the answer is no.  More information is at the end of
this message, but first let me address other points that have been
raised.  I apologize that this has gotten somewhat lengthy, but I've
learned quite a bit about this over the past few days, and I figure
that it's worth summarizing for others.

On Thu, Mar 21, 2002 at 08:54:29AM -0800, Terence Parr wrote:
> 
> On Thursday, March 21, 2002, at 06:24  AM, mzukowski@bco.com wrote:
> 
> > I'm curious why it is important to you to have no syntactic ambiguity.  
> > What
> > kind of language are you designing?
[...]

Nothing terribly interesting; I'm just reinventing the wheel for fun.
I'm designing a general-purpose OO language, complete with multiple
inheritance, polymorphism, genericity, the whole nine yards.  I don't
expect anybody to use it, I'm just doing it as an exercise, so to
speak.

I want the syntax to have an unambiguous context-free grammar because
that's part of the exercise.  It seems to me that such a syntax is
likely to be more easily readable by humans (as well as machine
parsers), and I'm shooting for a very clean, readable syntax.  It
should be possible to glance at any statement in the language and know
right off the bat (without context) what each part of it means
syntactically.  This implies that the syntax must be expressible
unambiguously in a context-free grammar.

So please note that where I have said "unambiguous" in previous
messages, I have meant it in the sense that the syntax can be
specified in a context-free grammar such as EBNF.  In this message, I
have tried to be explicit about what sort of ambiguity I'm talking
about.  A langauge spec can be perfectly unambiguous, but still be
impossible to specify unambiguously in EBNF.  C/C++ is a good example
of this; one cannot write an unambiguous EBNF grammar of C, but the
langauge spec is, in fact, unambiguous.

> Technically, you want *any* computer language you design to be 
> syntactically unambiguous.  Even if-then-else is unambiguous since the 
> language manual says "ELSE goes with the most recent IF".  Remember that 
> a language is just a valid set of sentences and however you say it is 
> ok.  The trouble is when we try to formalize the language specification 
> with a grammar.
[...]

If-then-else cannot be specified unambiguously in a context-free,
priority/predicate-free grammar, such as EBNF.  That doesn't mean that
the syntax is ambiguous, or that the syntax can't be specified
unambiguously in a context-sensitive grammar (as achieved in ANTLR
using predicates).  But doing so violates my design requirement above:
that each statement be parsable out of context, and without resorting
to putting priorities on the rules of the grammar.  (This is the
approach taken by most parsers in the face of ambiguity: simply say
that in case of ambiguity, rule A overrides rule B.  This is difficult
for humans to remember, and therefore leads to less readable code.)

As an example, the solution to the if-then-else problem, if an
unambiguous context-free grammar is desired, is to require explicit
block terminators in the syntax, as so:

  if condition then
     if condition then
        statement
        statement
     else
        statement
        statement
     end
  end

This is unambiguous in the context-free sense and, IMO, more readable.
Yes, it's more verbose, but I think readability is more imporatant
than brevity for my purposes.  The EBNF version of that is:

if: "if" expression "then" (statement)* ("else" (statement)*)? "end";

Note that "end" cannot be elided in any case.  (Alternatively, a
syntax could use curly braces, as in C, but some way of explicitly
terminating the block must be provided.)

Obviously, if you're writing a grammar for a predefined language spec,
you do not have the luxury of modifying the syntax just to make your
grammar/parser cleaner.  If this is the task at hand, a tool like
ANTLR is definitely what you want, as its predication mechanisms make
it possible to specify a correct grammar for any syntax.  Fortunately,
I'm developing the language spec from scratch, so I do have the luxury
of adapting the syntax spec to make the grammar/parser more elegant.


Which leads me on to the answer to my original question regarding
validation of unambiguity.  I found a tool called Accent
(http://accent.compilertools.net/), and at first I thought it was the
perfect solution to my problem.  It is able to generate a parser for
*any* EBNF grammar.  (By their own admission, these parsers may be
much slower than LL(k) or LR(k) parsers.)  This means it can handle
things that cannot be handled by LL(k) grammars, and things that can't
be handled by LR(k) grammars.  (I mean straight, non-predicated LL(k)
and LR(k) here.  Accent can't do anything that ANTLR can't.)  This
means you can write your grammar without thinking about the parsing
strategy.  Unfortunately, as discussed at
(http://accent.compilertools.net/overview.html), Accent will happily
allow you to create ambiguous grammars, and will generate parsers that
only detect the ambiguity at run-time, when presented with actual
ambiguous input.  (Accent provides an annotation mechanism that serves
the same purpose as ANTLR's predicates; to resolve the
ambiguities/nondeterminisms.)

Following the link on the Accent home page to the ACM article
(http://www.acm.org/crossroads/xrds7-5/bison.html), I found a brief
discussion of ambiguity at the bottom, which claims (with a reference
to an academic paper), that it is impossible to validate the
unambiguity of a general EBNF grammar.  (Specific grammars can be
proven unambiguous by hand, but there's no algorithm for validating
grammars in general.)  They state that you simply have to test your
grammars with lots of different inputs to see if they're ambiguous.

Personally, I'd rather specify it in a predicated LALL(k) or LALR(k)
grammar, which will tell me during parser generation if there's a
nondeterminism, without relying on testing to discover the problems.
(Same reason I prefer statically type-checked languages.)  If you can
write a deterministic LL(k) or LR(k) grammar for the syntax, then the
syntax is guaranteed to be unambiguous in the context-free sense as
well.  However, if you use predicates to get around the limitations of
these parsing strategies, then you've opened that possibility that
your syntax will ambiguous in the context-free sense.  (Even those it
is unambiguous in the general sense.)

So the end result is that I'm out of luck.  I can either shackle
myself to the limitations of unpredicated LL(k) or LR(k) grammars
(which would guarantee context-free unambiguity as well), or use
predicates, knowing that doing so may cause my syntax to be ambiguous
in a context-free grammar.  I think I'm going to choose the latter
option, and just limit the use of predicates as much as possible.

That might be a good point to include in the book.  ;-)

Thanks for all the help, folks.

Randall Nortman

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From renyedi at yahoo.com  Fri Mar 22 00:00:06 2002
From: renyedi at yahoo.com (Robert Enyedi)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Antlr 2.7.2a2 and NetBeans
References: <1D532F5C75B30A46A78D5107B635DF895327@edzell.windsor.com> <3C8F9099.E14FA088@boeing.com> <050901c1cc01$2c288090$3000000a@robert> <3C98C86E.3676A411@boeing.com>
Message-ID: <002101c1d177$9c3d21d0$3000000a@robert>

Thanks a lot, Sinan!

Robert

----- Original Message -----
From: "Sinan" <sinan.karasu@boeing.com>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, March 20, 2002 7:35 PM
Subject: Re: [antlr-interest] Antlr 2.7.2a2 and NetBeans


> Robert Enyedi wrote:
> >
> > Hi, Sinan
> >
> > Do you have a Netbeans module for Antlr 2.7.1 already built?
> >
> > If so, could you tell me please where I can find it?
> >
> > Robert
> >
>
> Ok, you should be able to download it (them)  from
>
> ftp://bozuk.org/pub/netbeans/
>
> Sinan
>
> PS: read README
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>


_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tom_kra at hotmail.com  Fri Mar 22 01:14:00 2002
From: tom_kra at hotmail.com (kordeul)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] string recognition
Message-ID: <a7esko+agq1@eGroups.com>

Hi

In my parser I should be able to recognise strings, where a string 
is the sequence of 0 or more characters included in quotes. I could 
do the recognition inside lexer with

STRING : QUOTE (LETTER|DIGIT|COMMA|.....)* QUOTE ;

but this way I have to define every possible char that can be 
included inside the string. Is there a smarter way of doing this - 
the string is actually any char except whitespace (spaces are 
allowed!)?

I tried this:

WHITESPACE : '\r' | '\n' | '\t' ;
STRING : QUOTE (~(WHITESPACE))* QUOTE ;

but I got ambiguity problem reported from ANTLR during class 
creating.

BR Tom


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Fri Mar 22 02:44:09 2002
From: lloyd at galador.net (lloyd_from_far)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Re: C# port of 2.7.2
In-Reply-To: <D02359EA481CD311BBBA00104B9834E9D32901@FMS_MAIL>
Message-ID: <a7f1tp+pmqt@eGroups.com>

In reply to Scott message (regarding it "beta" C#-ANTLR version) I 
want to say 

I am quite new to ANTLR in fact.
But I had write (by hand) a command ineterpreter in Java (reading 
Java syntax) now I want to make a new version in C#, reading C# 
syntax, but instead of doing it by hand I want to use a generator and 
ANTLR looks quite good (it's the reason of my new interest)

so I am really interested in being one of your beta tester or co-
developper, but I will be quite slow, learning ANTLR in the same 
time...


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Fri Mar 22 05:57:17 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] string recognition
Message-ID: <170826586F3BD511910D0200C110AAA8032B4824@memail03.bco-home.com>

> I tried this:
> 
> WHITESPACE : '\r' | '\n' | '\t' ;
> STRING : QUOTE (~(WHITESPACE))* QUOTE ;
> 
> but I got ambiguity problem reported from ANTLR during class 
> creating.

Which is because QUOTE is part of ~(WHITESPACE).  Try ~(WHITESPACE | QUOTE).
If you allow escaping of a quote you will have to handle that separately.
See, for instance, STRING in the java.g grammar.

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri Mar 22 06:44:07 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] rethrowing of exceptions in ANTLR default exception handlers
In-Reply-To: <3C9A58B6.D6288920@xilinx.com>; from drm@xilinx.com on Thu, Mar 21, 2002 at 03:03:34PM -0700
References: <3C9A58B6.D6288920@xilinx.com>
Message-ID: <20020322154407.G26460@cs.utwente.nl>

Hi,

On Thu, Mar 21, 2002 at 03:03:34PM -0700, Dennis Marsa wrote:
> An ANTLR C++ default exception handler generally looks something
> like this:
> 
>   catch (RecognitionException& ex) {
>     if( inputState->guessing == 0 ) {
>       reportError(ex);
>       consume();
>       consumeUntil(_tokenSet_6);
>     } else {
>       throw ex;
>     }
>   }
> 
> I believe the appropriate fix is to use throw with no operand:
> 
>    throw;   // no operand

Thanks for catching patch is in the repository now.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 'And this 'rebooting' business? Give it a good kicking, do you?' 'Oh, no,
  of course, we ... that is ... well, yes, in fact,' said Ponder. 'Adrian
    goes round the back and ... er ... prods it with his foot. But in a
     technical way,' he added. --- From: Hogfather by Terry Pratchett.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri Mar 22 07:50:13 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Develsnapshot
Message-ID: <20020322165013.H26460@cs.utwente.nl>

Hi,

I just put up another development snapshot (only stuff from me, none of
Terence's) It contains several fixes in the ASTFactory department. Improved
heterogeneous AST support and the throw fix from Dennis Marsa.

http://wwwhome.cs.utwente.nl/~klaren/antlr/

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
				  of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Mar 22 09:42:03 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Develsnapshot
In-Reply-To: <20020322165013.H26460@cs.utwente.nl>
Message-ID: <1EFC581E-3DBC-11D6-A12D-0030653DE0D6@jguru.com>


On Friday, March 22, 2002, at 07:50  AM, Ric Klaren wrote:

> Hi,
>
> I just put up another development snapshot (only stuff from me, none of
> Terence's) It contains several fixes in the ASTFactory department. 
> Improved
> heterogeneous AST support and the throw fix from Dennis Marsa.
>
> http://wwwhome.cs.utwente.nl/~klaren/antlr/

That's also in the main branch of our depot, right Ric?  If so, I should 
get time soon to make a 2.7.2a3 with my fixes.

Ter
--
Chief Scientist & Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri Mar 22 11:53:00 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Develsnapshot
In-Reply-To: <1EFC581E-3DBC-11D6-A12D-0030653DE0D6@jguru.com>; from parrt@jguru.com on Fri, Mar 22, 2002 at 09:42:03AM -0800
References: <20020322165013.H26460@cs.utwente.nl> <1EFC581E-3DBC-11D6-A12D-0030653DE0D6@jguru.com>
Message-ID: <20020322205300.A23216@cs.utwente.nl>

Hi,

On Fri, Mar 22, 2002 at 09:42:03AM -0800, Terence Parr wrote:
> That's also in the main branch of our depot, right Ric?  If so, I should 
> get time soon to make a 2.7.2a3 with my fixes.

Is main branch yah. There's still some ickyness in this C++ wise but I did
not have time yet to track it down. Somewhere something blunders into a
pure virtual function. (or it's a g++ 3.0.4 bug)

Also no MSVC6 fixes in this one. Did not have time to sort through all the
mails about that one.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From avkash_chauhan at yahoo.com  Fri Mar 22 17:45:29 2002
From: avkash_chauhan at yahoo.com (Avkash Chauhan)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Develsnapshot
References: <1EFC581E-3DBC-11D6-A12D-0030653DE0D6@jguru.com>
Message-ID: <007201c1d20c$698e79b0$6501a8c0@tomhawk>

the given link - >>
     http://wwwhome.cs.utwente.nl/~klaren/antlr/

is not working.

Please help.
Thanks.
-avkash


----- Original Message -----
From: "Terence Parr" <parrt@jguru.com>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, March 22, 2002 9:42 AM
Subject: Re: [antlr-interest] Develsnapshot


>
> On Friday, March 22, 2002, at 07:50  AM, Ric Klaren wrote:
>
> > Hi,
> >
> > I just put up another development snapshot (only stuff from me, none of
> > Terence's) It contains several fixes in the ASTFactory department.
> > Improved
> > heterogeneous AST support and the throw fix from Dennis Marsa.
> >
> > http://wwwhome.cs.utwente.nl/~klaren/antlr/
>
> That's also in the main branch of our depot, right Ric?  If so, I should
> get time soon to make a 2.7.2a3 with my fixes.
>
> Ter
> --
> Chief Scientist & Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Sun Mar 24 04:11:17 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Develsnapshot
In-Reply-To: <007201c1d20c$698e79b0$6501a8c0@tomhawk>; from avkash_chauhan@yahoo.com on Fri, Mar 22, 2002 at 05:45:29PM -0800
References: <1EFC581E-3DBC-11D6-A12D-0030653DE0D6@jguru.com> <007201c1d20c$698e79b0$6501a8c0@tomhawk>
Message-ID: <20020324131117.A1508@cs.utwente.nl>

On Fri, Mar 22, 2002 at 05:45:29PM -0800, Avkash Chauhan wrote:
> the given link - >>
>      http://wwwhome.cs.utwente.nl/~klaren/antlr/
> 
> is not working.

It seems there's a problem with the webserver of the faculty. I guess it
will be fixed after the weekend.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From renyedi at yahoo.com  Tue Mar 26 02:38:42 2002
From: renyedi at yahoo.com (Robert Enyedi)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] comments propagation
Message-ID: <008001c1d4b2$69b5bdb0$3000000a@robert>

Hi!

I wonder if there is an elegant way to propagate comments to the parser and then to the syntax tree.

I encountered such a problem when trying to convert between two high level languages. How can I make the comments from the source code to propagate to the target code?

Any suggestions?

Thanks in advance,
Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020326/a3ca3af4/attachment.html
From bogdan_mt at yahoo.com  Tue Mar 26 04:02:57 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] comments propagation
In-Reply-To: <008001c1d4b2$69b5bdb0$3000000a@robert>
Message-ID: <20020326120257.46262.qmail@web14809.mail.yahoo.com>

Hi,

See http://www.antlr.org/fieldguide/whitespace/index.html

Bogdan


--- Robert Enyedi <renyedi@yahoo.com> wrote:
> Hi!
> 
> I wonder if there is an elegant way to propagate comments to the parser
> and then to the syntax tree.
> 
> I encountered such a problem when trying to convert between two high level
> languages. How can I make the comments from the source code to propagate
> to the target code?
> 
> Any suggestions?
> 
> Thanks in advance,
> Robert
> 


__________________________________________________
Do You Yahoo!?
Yahoo! Movies - coverage of the 74th Academy Awards®
http://movies.yahoo.com/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From renyedi at yahoo.com  Tue Mar 26 07:06:42 2002
From: renyedi at yahoo.com (Robert Enyedi)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] comments propagation
References: <20020326120257.46262.qmail@web14809.mail.yahoo.com>
Message-ID: <003301c1d4d7$ed322c30$3000000a@robert>

Thanks. I think this is exactly what I need.

----- Original Message -----
From: "Bogdan Mitu" <bogdan_mt@yahoo.com>
To: <antlr-interest@yahoogroups.com>
Cc: <renyedi@yahoo.com>
Sent: Tuesday, March 26, 2002 2:02 PM
Subject: Re: [antlr-interest] comments propagation


> Hi,
>
> See http://www.antlr.org/fieldguide/whitespace/index.html
>
> Bogdan
>
>
> --- Robert Enyedi <renyedi@yahoo.com> wrote:
> > Hi!
> >
> > I wonder if there is an elegant way to propagate comments to the parser
> > and then to the syntax tree.
> >
> > I encountered such a problem when trying to convert between two high
level
> > languages. How can I make the comments from the source code to propagate
> > to the target code?
> >
> > Any suggestions?
> >
> > Thanks in advance,
> > Robert
> >
>
>
> __________________________________________________
> Do You Yahoo!?
> Yahoo! Movies - coverage of the 74th Academy Awards?
> http://movies.yahoo.com/
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>


_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From renyedi at yahoo.com  Wed Mar 27 03:24:41 2002
From: renyedi at yahoo.com (Robert Enyedi)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] antlr vs. javacc+jjtree tree construction
Message-ID: <010c01c1d582$01a61190$3000000a@robert>

Hi, everyone

I have worked previously with JavaCC and I used JJTree to build syntax trees. By default, it creates a root node for each grammar rule (identified by the constant JJT<RULENAME>) and attaches to it as child nodes the nodes that come from its sub rules.

When I got to use buildAST in ANTLR for the first time, I noticed a fundamental difference: by default it creates a list of token nodes. It is true that if I want the same behavior as in JavaCC, I can use the action {#ruleName=#([NODE_TYPE_NAME],#ruleName);} and define NODE_TYPE_NAME in the tokens section.

But why do I have to do this manually? Isn't there a workaround to automate this task? And, somehow, isn't JJTree's behavior the natural one?

I would really like to discuss this issue with you, guys.

Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020327/a8416e14/attachment.html
From bogdan_mt at yahoo.com  Wed Mar 27 03:47:17 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] antlr vs. javacc+jjtree tree construction
In-Reply-To: <010c01c1d582$01a61190$3000000a@robert>
Message-ID: <20020327114717.41760.qmail@web14807.mail.yahoo.com>

Hi Robert,

In ANTLR you normally use the '^' operator to direct the AST construction.
Sometimes you need to add manually some nodes, but most of the time '^' and
'!' do the job.

Regards,
Bogdan

--- Robert Enyedi <renyedi@yahoo.com> wrote:
> Hi, everyone
> 
> I have worked previously with JavaCC and I used JJTree to build syntax
> trees. By default, it creates a root node for each grammar rule
> (identified by the constant JJT<RULENAME>) and attaches to it as child
> nodes the nodes that come from its sub rules.
> 
> When I got to use buildAST in ANTLR for the first time, I noticed a
> fundamental difference: by default it creates a list of token nodes. It is
> true that if I want the same behavior as in JavaCC, I can use the action
> {#ruleName=#([NODE_TYPE_NAME],#ruleName);} and define NODE_TYPE_NAME in
> the tokens section.
> 
> But why do I have to do this manually? Isn't there a workaround to
> automate this task? And, somehow, isn't JJTree's behavior the natural one?
> 
> I would really like to discuss this issue with you, guys.
> 
> Robert
> 


__________________________________________________
Do You Yahoo!?
Yahoo! Movies - coverage of the 74th Academy Awards®
http://movies.yahoo.com/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From renyedi at yahoo.com  Wed Mar 27 05:23:25 2002
From: renyedi at yahoo.com (Robert Enyedi)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] antlr vs. javacc+jjtree tree construction
References: <20020327114717.41760.qmail@web14807.mail.yahoo.com>
Message-ID: <013a01c1d592$ab5e73c0$3000000a@robert>

Yes, but as far as I know you can apply the '^' operator to a token. So what
if the rule has no tokens?

----- Original Message -----
From: "Bogdan Mitu" <bogdan_mt@yahoo.com>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, March 27, 2002 1:47 PM
Subject: Re: [antlr-interest] antlr vs. javacc+jjtree tree construction


> Hi Robert,
>
> In ANTLR you normally use the '^' operator to direct the AST construction.
> Sometimes you need to add manually some nodes, but most of the time '^'
and
> '!' do the job.
>
> Regards,
> Bogdan
>
> --- Robert Enyedi <renyedi@yahoo.com> wrote:
> > Hi, everyone
> >
> > I have worked previously with JavaCC and I used JJTree to build syntax
> > trees. By default, it creates a root node for each grammar rule
> > (identified by the constant JJT<RULENAME>) and attaches to it as child
> > nodes the nodes that come from its sub rules.
> >
> > When I got to use buildAST in ANTLR for the first time, I noticed a
> > fundamental difference: by default it creates a list of token nodes. It
is
> > true that if I want the same behavior as in JavaCC, I can use the action
> > {#ruleName=#([NODE_TYPE_NAME],#ruleName);} and define NODE_TYPE_NAME in
> > the tokens section.
> >
> > But why do I have to do this manually? Isn't there a workaround to
> > automate this task? And, somehow, isn't JJTree's behavior the natural
one?
> >
> > I would really like to discuss this issue with you, guys.
> >
> > Robert
> >
>
>
> __________________________________________________
> Do You Yahoo!?
> Yahoo! Movies - coverage of the 74th Academy Awards?
> http://movies.yahoo.com/
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>


_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Wed Mar 27 06:12:43 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] antlr vs. javacc+jjtree tree construction
Message-ID: <170826586F3BD511910D0200C110AAA8032B483B@memail03.bco-home.com>

If a rule has no tokens, then what would be in the tree?  What kind of rule
has no tokens?  What does it match?

It sounds like the jjtree approach introduces a new imaginary node type for
every rule.  Much of the time an existing token is more appropriate.  This
keeps the tree a bit more compact as well, making it quicker to tree parse.

Monty

> -----Original Message-----
> From: Robert Enyedi [mailto:renyedi@yahoo.com]
> Sent: Wednesday, March 27, 2002 5:23 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] antlr vs. javacc+jjtree tree 
> construction
> 
> 
> Yes, but as far as I know you can apply the '^' operator to a 
> token. So what
> if the rule has no tokens?
> 
> ----- Original Message -----
> From: "Bogdan Mitu" <bogdan_mt@yahoo.com>
> To: <antlr-interest@yahoogroups.com>
> Sent: Wednesday, March 27, 2002 1:47 PM
> Subject: Re: [antlr-interest] antlr vs. javacc+jjtree tree 
> construction
> 
> 
> > Hi Robert,
> >
> > In ANTLR you normally use the '^' operator to direct the 
> AST construction.
> > Sometimes you need to add manually some nodes, but most of 
> the time '^'
> and
> > '!' do the job.
> >
> > Regards,
> > Bogdan
> >
> > --- Robert Enyedi <renyedi@yahoo.com> wrote:
> > > Hi, everyone
> > >
> > > I have worked previously with JavaCC and I used JJTree to 
> build syntax
> > > trees. By default, it creates a root node for each grammar rule
> > > (identified by the constant JJT<RULENAME>) and attaches 
> to it as child
> > > nodes the nodes that come from its sub rules.
> > >
> > > When I got to use buildAST in ANTLR for the first time, I 
> noticed a
> > > fundamental difference: by default it creates a list of 
> token nodes. It
> is
> > > true that if I want the same behavior as in JavaCC, I can 
> use the action
> > > {#ruleName=#([NODE_TYPE_NAME],#ruleName);} and define 
> NODE_TYPE_NAME in
> > > the tokens section.
> > >
> > > But why do I have to do this manually? Isn't there a workaround to
> > > automate this task? And, somehow, isn't JJTree's behavior 
> the natural
> one?
> > >
> > > I would really like to discuss this issue with you, guys.
> > >
> > > Robert
> > >
> >
> >
> > __________________________________________________
> > Do You Yahoo!?
> > Yahoo! Movies - coverage of the 74th Academy Awards?
> > http://movies.yahoo.com/
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/
>


_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From chuck.siska at nb.conexant.com  Wed Mar 27 09:22:36 2002
From: chuck.siska at nb.conexant.com (Chuck Siska)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] antlr vs. javacc+jjtree tree construction
References: <20020327114717.41760.qmail@web14807.mail.yahoo.com> <013a01c1d592$ab5e73c0$3000000a@robert>
Message-ID: <3CA1FFDC.E77E0AC@nb.conexant.com>

robert --

if you want, you can create a fake token for each such rule and then
use the "^" to make it the root of each grammar rule.  this is
normally done rather sparingly, but if you like it, enjoy.

-- chuck

Robert Enyedi wrote:
> 
> Yes, but as far as I know you can apply the '^' operator to a token. So what
> if the rule has no tokens?
> 
> ----- Original Message -----
> From: "Bogdan Mitu" <bogdan_mt@yahoo.com>
> To: <antlr-interest@yahoogroups.com>
> Sent: Wednesday, March 27, 2002 1:47 PM
> Subject: Re: [antlr-interest] antlr vs. javacc+jjtree tree construction
> 
> > Hi Robert,
> >
> > In ANTLR you normally use the '^' operator to direct the AST construction.
> > Sometimes you need to add manually some nodes, but most of the time '^'
> and
> > '!' do the job.
> >
> > Regards,
> > Bogdan
> >
> > --- Robert Enyedi <renyedi@yahoo.com> wrote:
> > > Hi, everyone
> > >
> > > I have worked previously with JavaCC and I used JJTree to build syntax
> > > trees. By default, it creates a root node for each grammar rule
> > > (identified by the constant JJT<RULENAME>) and attaches to it as child
> > > nodes the nodes that come from its sub rules.
> > >
> > > When I got to use buildAST in ANTLR for the first time, I noticed a
> > > fundamental difference: by default it creates a list of token nodes. It
> is
> > > true that if I want the same behavior as in JavaCC, I can use the action
> > > {#ruleName=#([NODE_TYPE_NAME],#ruleName);} and define NODE_TYPE_NAME in
> > > the tokens section.
> > >
> > > But why do I have to do this manually? Isn't there a workaround to
> > > automate this task? And, somehow, isn't JJTree's behavior the natural
> one?
> > >
> > > I would really like to discuss this issue with you, guys.
> > >
> > > Robert
> > >
> >
> >
> > __________________________________________________
> > Do You Yahoo!?
> > Yahoo! Movies - coverage of the 74th Academy Awards?
> > http://movies.yahoo.com/
> >
> >
> >
> > Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
> >
> 
> _________________________________________________________
> Do You Yahoo!?
> Get your free @yahoo.com address at http://mail.yahoo.com
> 
> 
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/

-- 
                                           |\_/\_.-'""``:-._       
What is life without looking for           . . `; -._      )-;-,_`)
the next cute little bug to play with?     v_,-    _  ),(,.\  ``-' 
                                          _.- _.,-_/ /  ((.'       
-- chuck.siska@conexant.com  `<}:..     ((,.-'   ((,/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Wed Mar 27 09:29:46 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] antlr vs. javacc+jjtree tree construction
Message-ID: <170826586F3BD511910D0200C110AAA8032B483D@memail03.bco-home.com>

Boy, I woke up to early this morning...  

> -----Original Message-----
> From: mzukowski@bco.com [mailto:mzukowski@bco.com]
> Sent: Wednesday, March 27, 2002 6:13 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] antlr vs. javacc+jjtree tree 
> construction
> 
> 
> If a rule has no tokens, then what would be in the tree?  
> What kind of rule
> has no tokens?  What does it match?

It matches other rules, of course.  What jjtree constructs is basically a
parse tree.  Every rule creates a node with children.  With expressions this
can get quite nested and is not needed.  An AST can represent an expression
with a minimum of nodes.  If I have 5*3, my tree would be ("*" 5 3) instead
of (conditionalExpr ( logicalOrExpr ( logicalAndExpr (inclusiveOrExpr
(exclusiveOrExpr (bitAndExpr (equalityExpr (relationalExpr (shiftExpr
(additiveExpr (multExpr 5 3) ) ) ) ) ) ) ) ) ) )

Note that the tree structure will encode the precedence-- (* (+ 5 5) 5)
means something different than (+ (* 5 5) 5) by the way it is nested.

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Mar 27 10:10:24 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] antlr vs. javacc+jjtree tree construction
In-Reply-To: <010c01c1d582$01a61190$3000000a@robert>
Message-ID: <E8A3140C-41AD-11D6-900B-0030653DE0D6@jguru.com>


On Wednesday, March 27, 2002, at 03:24  AM, Robert Enyedi wrote:

> Hi, everyone
> ?
> I have worked previously with JavaCC and I used JJTree to build syntax 
> trees. By default, it creates a root node for each grammar rule 
> (identified by the constant JJT<RULENAME>)?and attaches to it?as child 
> nodes the nodes that come from its sub rules.
> ?
> When I got to use buildAST in?ANTLR for the first time, I noticed a 
> fundamental difference: by default it creates a list of token nodes. It 
> is true that if I want the same behavior as in JavaCC, I can use 
> the?action {#ruleName=#([NODE_TYPE_NAME],#ruleName);} and define 
> NODE_TYPE_NAME in the tokens section.
> ?
> But why do I have to do this manually??Isn't there a workaround to 
> automate this task? And, somehow, isn't JJTree's behavior the natural 
> one?

Hi Robert,

There is a fundamental difference in the kind of tree generated as you 
describe from jjtree vs ANTLR that wasn't clear from the other 
responders.  They focused on how you create trees in ANTLR, but the 
biggest issue is that you are used to creating parse trees not syntax 
trees (ASTs).

A parse tree is a record of the rules (and tokens) used to match some 
input text whereas a syntax tree records the structure of the input and 
is insensitive to the grammar that produced it.  Note that there are an 
infinite number of grammars for any single language and hence every 
gramar will result in a different tree form because of all the 
intermediate rules.  An abstract syntax tree is a far superior 
intermediate form precisely because of this insensitivity and because it 
highlights the structure of the language not the grammar.

It's best to look at an example.  For input 3+4 you really want to use 
the following intermediate form:

+
|  \
3  4

That is, the operator at the root and 3 and 4 as operands (children).  
In ANTLR child-sibling form, you'd have

+
|
3 -- 4

Ok, so now a parse tree.  I'll pick an extremely simple one out of the 
infinite number:

expr
   |
plus
   |  \  \
  3  +  4

Of course, in a real grammar, you'd have about 8 more levels of nesting 
in the grammar and hence in the tree.  All of this is noise and still 
doesn't tell you anything about structure of the input--it only tells 
you what rules are applied to match it (sometimes this is enough to work 
with for simple translations, but they always are simple syntax-directed 
translations.)

The AST approach is better because it is MUCH easier to manipulate them 
not to mention the fact that they are way smaller.

Please let me know if the value of the AST over the parse tree is not 
clear.  I would like to make this into a FAQ entry with a convincing 
argument.

Best regards,
Terence
--
Chief Scientist & Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Wed Mar 27 15:29:40 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Re: antlr vs. javacc+jjtree tree construction
In-Reply-To: <E8A3140C-41AD-11D6-900B-0030653DE0D6@jguru.com>
Message-ID: <a7tkl4+o5cf@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> Of course, in a real grammar, you'd have about 8 more levels of 
nesting 
> in the grammar and hence in the tree.  All of this is noise and 
still 
> doesn't tell you anything about structure of the input--it only 
tells 
> you what rules are applied to match it (sometimes this is enough to 
work 
> with for simple translations, but they always are simple 
syntax-directed 
> translations.)
> 
> The AST approach is better because it is MUCH easier to manipulate 
them 
> not to mention the fact that they are way smaller.
> 
> Please let me know if the value of the AST over the parse tree is 
not 
> clear.  I would like to make this into a FAQ entry with a convincing 
> argument.

Parse trees with rule labels are probably a necessity for LR parsers 
where context is identified from the bottom up, and have value for 
attribute grammar approaches where the nonterminals (rule identifier 
nodes) provide context information for generating output from the 
parse tree.  Basically, JavaCC went with the classic computer science 
approach to tree building while Ter took an alternative route which 
emphasizes tree transformation as a key step in source-to-source 
language translation.

ANTLR's annotation approach for constructing trees is much nicer than 
the conventional approach--nonterminals represent language features 
(like "if" for conditional statement blocks) rather than the grammar 
writer's view of the language.  Why should

foo :  A B C bar ;
bar : D E F ;

generate a different tree than

foobar : A B C D E F ;

by default?

Worse:  it is possible to generate both trees in one grammar.  
Recognizing that a #( foo A B C #(bar D E F) ) tree is the same as
#( foobar A B C D E F ) is just an added burden to the programmer.

With ANTLR, "C" can be identified as an important feature for decoding 
"A B" and "D E F" semantics via the structuring

foobar :  A B^ C^ D E F ;

which results in a tree matched by

tfoo : #( C #( B A ) D E F ) ;

that effectively distinguishes C (root), B A (B as first child of C, A 
as a child of B), and D E F (other children).

Because ANTLR matches trees from the top down, the "rule identifier" 
nodes are unnecessary--they can be considered implicit in the tree 
walker rules.  Also, ANTLR trees can be manipulated from one language 
structure to another--tree transformation is a very clean approach for 
language translation.

--Loring

> Best regards,
> Terence
> --
> Chief Scientist & Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Mar 27 20:08:27 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Re: antlr vs. javacc+jjtree tree construction
In-Reply-To: <a7tkl4+o5cf@eGroups.com>
Message-ID: <748A7ADE-4201-11D6-84F7-0030653DE0D6@jguru.com>

Hi Loring,

I just added your comments to my FAQ entry:

http://www.jguru.com/faq/view.jsp?EID=814505

Ter

On Wednesday, March 27, 2002, at 03:29  PM, lgcraymer wrote:

> ANTLR's annotation approach for constructing trees is much nicer than
> the conventional approach--nonterminals represent language features
> (like "if" for conditional statement blocks) rather than the grammar
> writer's view of the language.  Why should
>
> foo :  A B C bar ;
> bar : D E F ;
>
> generate a different tree than
>
> foobar : A B C D E F ;
>
> by default?
>
> Worse:  it is possible to generate both trees in one grammar.
> Recognizing that a #( foo A B C #(bar D E F) ) tree is the same as
> #( foobar A B C D E F ) is just an added burden to the programmer.
>
> With ANTLR, "C" can be identified as an important feature for decoding
> "A B" and "D E F" semantics via the structuring
>
> foobar :  A B^ C^ D E F ;
>
> which results in a tree matched by
>
> tfoo : #( C #( B A ) D E F ) ;
>
> that effectively distinguishes C (root), B A (B as first child of C, A
> as a child of B), and D E F (other children).
>
> Because ANTLR matches trees from the top down, the "rule identifier"
> nodes are unnecessary--they can be considered implicit in the tree
> walker rules.  Also, ANTLR trees can be manipulated from one language
> structure to another--tree transformation is a very clean approach for
> language translation.
--
Chief Scientist & Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From renyedi at yahoo.com  Thu Mar 28 00:30:51 2002
From: renyedi at yahoo.com (Robert Enyedi)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Re: antlr vs. javacc+jjtree tree construction
References: <748A7ADE-4201-11D6-84F7-0030653DE0D6@jguru.com>
Message-ID: <01bd01c1d632$e0cec280$3000000a@robert>

Hi Terence and Loring,

Thank you very much for your responses. Very useful ones.

I agree with you regarding the differences between parse trees and ASTs. I
didn't think about it until now, but indeed there are some fundamental
differences. I already reconsidered my current AST generation pattern and
managed to simplify it (and more to come).

And I think the FAQ is a well suited place for this issue.

Thanks again,
Robert

----- Original Message -----
From: "Terence Parr" <parrt@jguru.com>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, March 28, 2002 6:08 AM
Subject: Re: [antlr-interest] Re: antlr vs. javacc+jjtree tree construction


> Hi Loring,
>
> I just added your comments to my FAQ entry:
>
> http://www.jguru.com/faq/view.jsp?EID=814505
>
> Ter
>
> On Wednesday, March 27, 2002, at 03:29  PM, lgcraymer wrote:
>
> > ANTLR's annotation approach for constructing trees is much nicer than
> > the conventional approach--nonterminals represent language features
> > (like "if" for conditional statement blocks) rather than the grammar
> > writer's view of the language.  Why should
> >
> > foo :  A B C bar ;
> > bar : D E F ;
> >
> > generate a different tree than
> >
> > foobar : A B C D E F ;
> >
> > by default?
> >
> > Worse:  it is possible to generate both trees in one grammar.
> > Recognizing that a #( foo A B C #(bar D E F) ) tree is the same as
> > #( foobar A B C D E F ) is just an added burden to the programmer.
> >
> > With ANTLR, "C" can be identified as an important feature for decoding
> > "A B" and "D E F" semantics via the structuring
> >
> > foobar :  A B^ C^ D E F ;
> >
> > which results in a tree matched by
> >
> > tfoo : #( C #( B A ) D E F ) ;
> >
> > that effectively distinguishes C (root), B A (B as first child of C, A
> > as a child of B), and D E F (other children).
> >
> > Because ANTLR matches trees from the top down, the "rule identifier"
> > nodes are unnecessary--they can be considered implicit in the tree
> > walker rules.  Also, ANTLR trees can be manipulated from one language
> > structure to another--tree transformation is a very clean approach for
> > language translation.
> --
> Chief Scientist & Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>


_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at http://mail.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Sun Mar 31 02:26:59 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] TreeParser
Message-ID: <005f01c1d89e$a5301a30$acb00ad2@hermes>

Hi fellow ANTLR users...

hmm, I am quite new to ANTLR and, hum, stil inelarning process before real work...
hmm.. what is the real use of TreeParser ?

I have my work/test project under my eyes and wonder why bother with a TreeParser (who need an already parsed AST) when I could make my stuff directly in the Parser ?

thanks !!!

BTW who was speaking of a C# version ?
I am interested !
and I have even begin to make my own C# version (yes, really, translating the core java file to C# file doesn't need real understanding, Vector become ArrayList, Hastable become Hashtable, etc... and, that's it ! and panic(), hmm, well, I think it will throw an ANTRLPanicException (new object of my own...)), but I am interested in a more polished version...
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020331/552ee336/attachment.html
From parrt at jguru.com  Sun Mar 31 14:49:05 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] What's a TreeParser and why do I want one?
In-Reply-To: <005f01c1d89e$a5301a30$acb00ad2@hermes>
Message-ID: <812D833A-44F9-11D6-84F7-0030653DE0D6@jguru.com>


On Sunday, March 31, 2002, at 02:26  AM, Lloyd Dupont wrote:

> Hi fellow ANTLR users...
> ?
> hmm, I am quite new to ANTLR and, hum, stil inelarning process before 
> real work...
> hmm.. what is the real use of TreeParser ?
> ?
> I have my work/test project under my eyes and wonder why bother with a 
> TreeParser (who need an already parsed AST) when I could make my stuff 
> directly in the Parser ?

Hi There,  I just added a (long) FAQ entry to answer this question :)

Ter
--
Chief Scientist & Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sun Mar 31 14:52:13 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] What's a TreeParser and why do I want one?
In-Reply-To: <812D833A-44F9-11D6-84F7-0030653DE0D6@jguru.com>
Message-ID: <F1221EE0-44F9-11D6-84F7-0030653DE0D6@jguru.com>


On Sunday, March 31, 2002, at 02:49  PM, Terence Parr wrote:

>
> On Sunday, March 31, 2002, at 02:26  AM, Lloyd Dupont wrote:
>
>> Hi fellow ANTLR users...
>> ?
>> hmm, I am quite new to ANTLR and, hum, stil inelarning process before
>> real work...
>> hmm.. what is the real use of TreeParser ?
>> ?
>> I have my work/test project under my eyes and wonder why bother with a
>> TreeParser (who need an already parsed AST) when I could make my stuff
>> directly in the Parser ?
>
> Hi There,  I just added a (long) FAQ entry to answer this question :)

oops...here is link:

http://www.jguru.com/faq/view.jsp?EID=818959

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Sun Mar 31 20:40:02 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Is there a detailed technical description of the debugging interfaces/classes?
Message-ID: <a88ob2+6695@eGroups.com>

I would like to support this for the C# code generator but know 
little about it. Alternatively, can someone familiar with it write a 
few lines to describe it's design?

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

