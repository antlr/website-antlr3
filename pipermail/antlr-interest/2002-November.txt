From klaren at cs.utwente.nl  Fri Nov  1 02:31:07 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Solaris
In-Reply-To: <aprl6h+106kb@eGroups.com>; from user_sofia@biris.freeserve.co.uk on Thu, Oct 31, 2002 at 04:19:29PM -0000
References: <aprl6h+106kb@eGroups.com>
Message-ID: <20021101113107.C10936@cs.utwente.nl>

Hi,

On Thu, Oct 31, 2002 at 04:19:29PM -0000, elias_biris wrote:
> I have tried recently to build antlr on Solaris (5.7) using gcc
> (2.95.2 19991024) and jdk 1.3.1. In summary I think that the build
> process needs to be addressed asap and at the least to be documented
> properly. I get all sorts of problems, listed below:

2.7.2a4 => alpha release...

> 1- version 2.7.2a4. All seemed to build ok apart from the make install
> part which fails with an error related to actions of the install-sh
> script. For instance, the jars are all placed on the top level
> directory and make gets confused when trying to call
> '../scripts/install-sh' to put the jars to the designated directory,
> when it should instead call ./scripts/install-sh

Hmm strange. No problems here on solaris. Which make are you using? GNU
Make 3.79.1 works perfectly here.

> Also if you dare do a 'make clean' at any point you loose the jars and
> subsequent make falls over.

There's a bootstrap rule for that. Usually I have an antlrall.jar in a safe
spot for boostrapping. Clean is clean. Common problem with compilers/tools
that are used to build themselves.

> For the existence of the jars themselves, I found the process a bit
> confusing: when I untarred the tarball, there was an antlr.jar at the
> top level directory but subsequent invocations (through the
> out-of-box) Makefile to
> 
> java -cp /user/ebiris/installs/antlr-2.7.2a2/antlrall.jar antlr.Tool 
>  antlr.g
> 
> falls over, since the antlrall.jar is not there. I had to issue a
> mkalljar first to get the jar, and then make would proceed.

Looks like packaging problem. Think the distro should contain antlrall.jar.
Well it's easily build usually.

> Also checking in the accompanying install.html does not help much...

Aye it's hopelessly outdated.

> I hope someone can enlighten me about the compilation errors above ...
> I will try to patch things up but the process for antlr.jar and
> antlrall.jar construction is not very clear to me.

Two ways basically. Use the makefiles and have some stuff done
automatically. Note that makes in subdirectories work (handy if you only
want to rebuild C++ part)

Or use the 'old' build/mkxxjar scripts and do some stuff like make install
manually.

All minor glitches so far.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Xander: "Buffy, we need to do something *now*"
  Angel: "We need a distraction."
  Buffy: "Right."
  Angel: "What are you going to do?"
  Buffy: "I'm going to kill them all. That oughtta distract 'em..."


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From adrian_simionescu at yahoo.com  Fri Nov  1 07:15:14 2002
From: adrian_simionescu at yahoo.com (adrian_simionescu)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Macros Replacement
Message-ID: <apu5q2+oa9a@eGroups.com>

Hello all,

I have to parse the following macro:

Syntax:
 define <macro-name'nonterminal-type> match-string as {"replacement"}

Syntax example:
  
 define <largest'action> "largest <expression> <number>" as {
   if (<number> > <expression>) then {<expression> = <number>};
 };

So, this mean:

 largest x+y**2 5;

Should be replaced with:

 if (5 > x+y**2) then {x+y**2=5};

Everything was so simple till now ;), but I have no ideea how can I solve this problem!

Thanks,
Simi


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Fri Nov  1 07:36:28 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Look Ahead while parsing a tree.
Message-ID: <D8F2E44800D72F488A841D4C9A9972B8092D0F@abyss4.advancedsw.com>

I was wondering if there any way to look ahead while parsing a Tree.  I know
that in a recognizer you can use the LA(1) to test the next token,  can I do
something similar in a tree parser.
 
To give you a context I will explain my need.
 
For the java code:
 
if(m_a.doA() != null)
{
   m_b.doInterB();
}
else if(m_TestB.doB() == 1)
{
   m_a.doA();
}
else
{
   DoItSuper();
}
 
The tree will look like:
 
If
|
 -- EXPR           // The conditional test.
|
 -- { [SLIST]      // The body of the if statement
|
 -- If             // The else if part
     |
      -- EXPR      // The conditional test.
     | 
      -- { [SLIST] // The body of the if statement
     |
      -- { [SLIST  // The else part
 
When processing the tree I can tell if the SLIST is a else-if or a else.
Can any one help me understand?  I am working with the java grammar that
ships the ANTLR.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20021101/9da5db95/attachment.html
From mzukowski at yci.com  Fri Nov  1 07:47:50 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Look Ahead while parsing a tree.
Message-ID: <170826586F3BD511910D0200C110AAA8032B4E98@memail03.bco-home.com>

The lookahead depth k is always one for tree parsers.  Syntactic predicates
work in tree parsers if you need to look deeper than one.  

LA(1) isn't defined, but there is a variable _t which is the current node.
Hence _t.getFirstChild() and _t.getNextSibling() will give you the next
token down or right.  Be sure to handle the case that they return null.

Monty
-----Original Message-----
From: Trey Spiva [mailto:Trey.Spiva@embarcadero.com]
Sent: Friday, November 01, 2002 7:36 AM
To: 'antlr-interest@yahoogroups.com'
Subject: [antlr-interest] Look Ahead while parsing a tree.


I was wondering if there any way to look ahead while parsing a Tree.  I know
that in a recognizer you can use the LA(1) to test the next token,  can I do
something similar in a tree parser.
 
To give you a context I will explain my need.
 
For the java code:
 
if(m_a.doA() != null)
{
   m_b.doInterB();
}
else if(m_TestB.doB() == 1)
{
   m_a.doA();
}
else
{
   DoItSuper();
}
 
The tree will look like:
 
If
|
 -- EXPR           // The conditional test.
|
 -- { [SLIST]      // The body of the if statement
|
 -- If             // The else if part
     |
      -- EXPR      // The conditional test.
     | 
      -- { [SLIST] // The body of the if statement
     |
      -- { [SLIST  // The else part
 
When processing the tree I can tell if the SLIST is a else-if or a else.
Can any one help me understand?  I am working with the java grammar that
ships the ANTLR.

Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From neil.benn at cambridgeantibody.com  Fri Nov  1 08:19:40 2002
From: neil.benn at cambridgeantibody.com (Neil Benn)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Newbie question on ANTLR
Message-ID: <000f01c281c2$7aae3170$5704a8c0@joshua>

Hello,

	I am a new person to ANTLR.  I have made some progress but am
having some problems.  The code beneath is simply to tokenize a CSV
file.  However I am now attempting to recognise a token by splitting a
segment where a comma isn't there when it should be.

	The ANTLR code is:-

class CSVParser extends Parser;

startRule
: (k:KEEP
    {
       System.out.println(k.getText().trim());
    }
  )+
;
//------------------LEXER------------
class CSVLexer extends Lexer;

options{
  k=8;
}

tokens {
  COMMENT = "Comment";
}

DISCARD: ( '\t'
         | ','
         | ':'
         | '\n' {newline();}
         | '\r' '\n' {newline();}
         )+
         {$setType(Token.SKIP);}
;

KEEP: ('\u0020' .. '\u002B' //miss out the comma
      | '\u002D' .. '\u0039'//miss out the colon
      | '\u003B' .. '\u007E')+//go up to end of latin characters and
ASCII punctuation types
; 

	This is attempting to recognise the literal of "Commment"
however when I attempt to compile I get an error detailing:-

Error: line(17), expecting TOKEN_REF, found 'COMMENT'
Error: rule classDef trapped: line(19), expecting RCURLY, found ';'


	As far as I can see I have used the same syntax that comes in
the examples - however I'm not getting anywhere and am not sure what I'm
doing wrong.  

	Any help anyone could provide, I'd most appreciate it and can
return any information on laboratory automation strategy planning at the
same time!

P.S. I've attached the file (one of many formats) I'm trying to parse
(format is out of my control) for completeness - although it's probably
of no use!


Cheers,

Neil Benn
Senior Automation Informatics Scientist

Cambridge Antibody Technology
The Science Park
Melbourn
Cambridgeshire
SG8 6JJ, UK

Telephone: + 44 (0) 1763 263233
Facsimile + 44 (0) 1763 263413
Email: mailto:neil.benn@cambridgeantibody.com
http://www.cambridgeantibody.com

Cambridge Antibody Technology Limited *
Registered Office: The Science Park, Melbourn, Cambridgeshire, SG8 6JJ,
UK
Registered in England and Wales number 2451177
(* Cambridge Antibody Technology Limited is a member of the Cambridge
Antibody Technology Group of Companies)

Confidentiality Note: This information and any attachments is
confidential
and only for use by the individual or entity to whom it has been sent.
Any
unauthorised dissemination, distribution or copying of this message is
strictly prohibited. If you are not the intended recipient please inform
the
sender immediately by reply e-mail and delete this message from your
system.
Thank you for your co-operation.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cormier at u-picardie.fr  Fri Nov  1 10:13:33 2002
From: cormier at u-picardie.fr (christiancormier)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] includeFile example correct file name when error occurs
Message-ID: <apug8d+au9m@eGroups.com>

I am not sure to be right, but it seems that to obtain the right 
included file name when error occurs, needs to add some code like 
this!
Right?
With antlr-2.7.2a4_10-27-2002.jar
in file Main.java
...
mainFileName = args[0]; // main file 
...
in file Lexer.g
public void uponEOF() throws TokenStreamException, 
CharStreamException {
	if ( Main.selector.getCurrentStream() != Main.mainLexer ) {
		Main.selector.pop(); // return to old lexer/stream
		Main.parser.setFilename(Main.mainFileName); // added
...
INCLUDE
	:	"@include" (WS)? f:STRING
		{
		// create lexer to handle include
		String name = f.getText();
		Main.fileName = name; // added
...


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From brian-l-smith at uiowa.edu  Fri Nov  1 12:13:51 2002
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Newbie question on ANTLR
References: <000f01c281c2$7aae3170$5704a8c0@joshua>
Message-ID: <3DC2E07F.9060504@uiowa.edu>

ANTLR 2.7.2a4 does not seem to have a problem with this example. Are you 
sure this is exactly the same thing that you fed into it? Maybe you are 
using an odd character encoding that might cause ANTLR's lexer to get 
confused?

Neil Benn wrote:
> Hello,
> 
> 	I am a new person to ANTLR.  I have made some progress but am
> having some problems.  The code beneath is simply to tokenize a CSV
> file.  However I am now attempting to recognise a token by splitting a
> segment where a comma isn't there when it should be.
> 
> 	The ANTLR code is:-
> 
> class CSVParser extends Parser;
> 
> startRule
> : (k:KEEP
>     {
>        System.out.println(k.getText().trim());
>     }
>   )+
> ;
> //------------------LEXER------------
> class CSVLexer extends Lexer;
> 
> options{
>   k=8;
> }
> 
> tokens {
>   COMMENT = "Comment";
> }
> 
> DISCARD: ( '\t'
>          | ','
>          | ':'
>          | '\n' {newline();}
>          | '\r' '\n' {newline();}
>          )+
>          {$setType(Token.SKIP);}
> ;
> 
> KEEP: ('\u0020' .. '\u002B' //miss out the comma
>       | '\u002D' .. '\u0039'//miss out the colon
>       | '\u003B' .. '\u007E')+//go up to end of latin characters and
> ASCII punctuation types
> ; 
> 
> 	This is attempting to recognise the literal of "Commment"
> however when I attempt to compile I get an error detailing:-
> 
> Error: line(17), expecting TOKEN_REF, found 'COMMENT'
> Error: rule classDef trapped: line(19), expecting RCURLY, found ';'
> 
> 
> 	As far as I can see I have used the same syntax that comes in
> the examples - however I'm not getting anywhere and am not sure what I'm
> doing wrong.  
> 
> 	Any help anyone could provide, I'd most appreciate it and can
> return any information on laboratory automation strategy planning at the
> same time!
> 
> P.S. I've attached the file (one of many formats) I'm trying to parse
> (format is out of my control) for completeness - although it's probably
> of no use!
> 
> 
> Cheers,
> 
> Neil Benn
> Senior Automation Informatics Scientist
> 
> Cambridge Antibody Technology
> The Science Park
> Melbourn
> Cambridgeshire
> SG8 6JJ, UK
> 
> Telephone: + 44 (0) 1763 263233
> Facsimile + 44 (0) 1763 263413
> Email: mailto:neil.benn@cambridgeantibody.com
> http://www.cambridgeantibody.com
> 
> Cambridge Antibody Technology Limited *
> Registered Office: The Science Park, Melbourn, Cambridgeshire, SG8 6JJ,
> UK
> Registered in England and Wales number 2451177
> (* Cambridge Antibody Technology Limited is a member of the Cambridge
> Antibody Technology Group of Companies)
> 
> Confidentiality Note: This information and any attachments is
> confidential
> and only for use by the individual or entity to whom it has been sent.
> Any
> unauthorised dissemination, distribution or copying of this message is
> strictly prohibited. If you are not the intended recipient please inform
> the
> sender immediately by reply e-mail and delete this message from your
> system.
> Thank you for your co-operation.
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Nov  1 14:19:00 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Syntax documentor (was: ANTLR 2.7.3)
In-Reply-To: <A399661DAF14DA46AAB21B088F3887DC066DDC38@vanent14.crystald.net>
Message-ID: <EBF08CC2-EDE7-11D6-A07E-0030653DE0D6@jguru.com>


On Thursday, October 31, 2002, at 02:25  PM, Luke Evans wrote:

> OK... now I know of its existence I want one - what an impetuous 
> society we live in  ;-)
>
> Ter, any chance of snagging the implementation of your documentation 
> stuff?  This has come at a 'good time' as we're thinking about how we 
> document and communicate our language.  We can do this the long way... 
> or we can use the your cool lout generator for our syntax.
>
> We've noticed that this isn't in the current 2.7.2a4 JAR.

It has a dependency to my StringTemplate stuff.  I'll send you the 
stuff directly until I can figure out how to include the jGuru jar (has 
a BSD license).

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Sun Nov  3 13:16:32 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] What does ANTLR use the reserved char codes and Token IDs for?
Message-ID: <aq43ng+hvnt@eGroups.com>

Hi,

ANTLR reserves the following character codes /u0000 to /u0003. What 
are they used for?

On a similar note, the Token IDs 0 to 3 are also reserved. What are 
they used for as well. I mean, if I come across a node in my AST with 
these Token IDs, what does it represent?

Cheers,

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Sun Nov  3 23:11:03 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Changing whitespace significance in the grammar
Message-ID: <aq56i7+hvp4@eGroups.com>

I read about ignoring whitespace in the lexer, but it's not what I need.  If I have a language where whitespace is permitted most places, e.g., between keywords, before and after parentheses, etc., but NOT in a select few places, e.g., between the "</" and the element name in an HTML close-tag, how can I express this in the grammar (not the lexer) without having to put (WS)? peppered all over the grammar except where whitespace is not permitted?

There doesn't seem to be an option for a grammar rule about controling significance of whitespace.

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Nov  4 01:45:00 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] What does ANTLR use the reserved char codes and Token IDs for?
In-Reply-To: <aq43ng+hvnt@eGroups.com>; from open.zone@virgin.net on Sun, Nov 03, 2002 at 09:16:32PM -0000
References: <aq43ng+hvnt@eGroups.com>
Message-ID: <20021104104500.B1454@cs.utwente.nl>

On Sun, Nov 03, 2002 at 09:16:32PM -0000, micheal_jor wrote:
> ANTLR reserves the following character codes /u0000 to /u0003. What 
> are they used for?
> 
> On a similar note, the Token IDs 0 to 3 are also reserved. What are 
> they used for as well. I mean, if I come across a node in my AST with 
> these Token IDs, what does it represent?

Copy-paste:

static const int MIN_USER_TYPE = 4;
static const int NULL_TREE_LOOKAHEAD = 3;
static const int INVALID_TYPE = 0;
static const int EOF_TYPE = 1;
static const int SKIP = -1;

SKIP -> internally used for the skipping of tokens. When you set a token to
        type skip in the lexer.
EOF  -> end of file token.
INVALID_TYPE -> default value for token constructors
NULL_TREE_LOOKAHEAD -> eof kindoff but in treewalkers, used for the
                       ASTNULLtype sentinel.

HTH,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wo das Chaos auf die Ordnung trifft, gewinnt meist das Chaos, weil es
  besser organisiert ist. --- Friedrich Nietzsche


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amejdi at ertonline.gr  Mon Nov  4 07:32:13 2002
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Possible bug in generated code
Message-ID: <3DC692FD.4090103@ertonline.gr>

Hello antlr users.

I faced a problem with the Parser generated by antlr, and have possibly 
dicovered a bug in the code generated.

 From a rule declared as:
if_rule
   :
   IF^ LPAREN! expression RPAREN! statement
   (
       options {
         warnWhenFollowAmbig = false;
       }
       :
       ELSE! statement
   )?
   ;
wich is copied from java.g the code generated is:

	public final void if_rule() throws RecognitionException, 
TokenStreamException {
		
		returnAST = null;
		ASTPair currentAST = new ASTPair();
		AST if_rule_AST = null;
		
		AST tmp52_AST = null;
		if (inputState.guessing==0) {
			tmp52_AST = (AST)astFactory.create(LT(1));
			astFactory.makeASTRoot(currentAST, tmp52_AST);
		}
		match(IF);
		AST tmp53_AST = null;
		tmp53_AST = (AST)astFactory.create(LT(1));
		match(LPAREN);
		expression();
		if (inputState.guessing==0) {
			astFactory.addASTChild(currentAST, returnAST);
		}
		AST tmp54_AST = null;
		tmp54_AST = (AST)astFactory.create(LT(1));
		match(RPAREN);
		statement();
		if (inputState.guessing==0) {
			astFactory.addASTChild(currentAST, returnAST);
		}
		{
		if ((LA(1)==ELSE) && (_tokenSet_0.member(LA(2)))) {
			AST tmp55_AST = null;
			tmp55_AST = (AST)astFactory.create(LT(1));
			match(ELSE);
			statement();
			if (inputState.guessing==0) {
				astFactory.addASTChild(currentAST, returnAST);
			}
		}
		else if ((_tokenSet_6.member(LA(1))) && (_tokenSet_7.member(LA(2)))) {
		}
		else {
			throw new NoViableAltException(LT(1), getFilename());
		}
		
		}
		if_rule_AST = (AST)currentAST.root;
		returnAST = if_rule_AST;
	}

My objection to this code is that the ELSE part is optional,
so why  does this code:
		else if ((_tokenSet_6.member(LA(1))) && (_tokenSet_7.member(LA(2)))) {
		}
		else {
			throw new NoViableAltException(LT(1), getFilename());
		}
exists?
The parser fails to parse a file when after the "if" part is matched an 
EOF Token follows.

To prove my theory I removed the
else if ((_tokenSet_6.member(LA(1))) && ....
line and indead the parser worked just fine.

My version of antlr is antlr-2.7.1 and jdk1.4.


If this is after all a bug and is fixed in antlr-2.7.2
I apologize for mentioning again.

Thanks in advance.
Anakreon



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Nov  4 07:46:01 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Changing whitespace significance in the gram
	mar
Message-ID: <170826586F3BD511910D0200C110AAA8032B4EA8@memail03.bco-home.com>

>There doesn't seem to be an option for a grammar rule about controling
significance of whitespace.

That's right, the parser can't communicate back to the lexer.  I would
recommend that your lexer enforce the white space rules for html tags.  Look
into lexer states/lexer multiplexing in the documentation.

Monty

-----Original Message-----
From: Paul J. Lucas [mailto:dude@darkfigure.org]
Sent: Sunday, November 03, 2002 11:11 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Changing whitespace significance in the
grammar


I read about ignoring whitespace in the lexer, but it's not what I need.  If
I have a language where whitespace is permitted most places, e.g., between
keywords, before and after parentheses, etc., but NOT in a select few
places, e.g., between the "</" and the element name in an HTML close-tag,
how can I express this in the grammar (not the lexer) without having to put
(WS)? peppered all over the grammar except where whitespace is not
permitted?

There doesn't seem to be an option for a grammar rule about controling
significance of whitespace.

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Nov  4 07:52:39 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Possible bug in generated code
Message-ID: <170826586F3BD511910D0200C110AAA8032B4EA9@memail03.bco-home.com>

Could you post the smallest java file that triggers the bug?  This will help
me diagnose it without wild speculation.

Monty

-----Original Message-----
From: Anakreon Mejdi [mailto:amejdi@ertonline.gr]
Sent: Monday, November 04, 2002 7:32 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Possible bug in generated code


Hello antlr users.

I faced a problem with the Parser generated by antlr, and have possibly 
dicovered a bug in the code generated.

 From a rule declared as:
if_rule
   :
   IF^ LPAREN! expression RPAREN! statement
   (
       options {
         warnWhenFollowAmbig = false;
       }
       :
       ELSE! statement
   )?
   ;
wich is copied from java.g the code generated is:

	public final void if_rule() throws RecognitionException, 
TokenStreamException {
		
		returnAST = null;
		ASTPair currentAST = new ASTPair();
		AST if_rule_AST = null;
		
		AST tmp52_AST = null;
		if (inputState.guessing==0) {
			tmp52_AST = (AST)astFactory.create(LT(1));
			astFactory.makeASTRoot(currentAST, tmp52_AST);
		}
		match(IF);
		AST tmp53_AST = null;
		tmp53_AST = (AST)astFactory.create(LT(1));
		match(LPAREN);
		expression();
		if (inputState.guessing==0) {
			astFactory.addASTChild(currentAST, returnAST);
		}
		AST tmp54_AST = null;
		tmp54_AST = (AST)astFactory.create(LT(1));
		match(RPAREN);
		statement();
		if (inputState.guessing==0) {
			astFactory.addASTChild(currentAST, returnAST);
		}
		{
		if ((LA(1)==ELSE) && (_tokenSet_0.member(LA(2)))) {
			AST tmp55_AST = null;
			tmp55_AST = (AST)astFactory.create(LT(1));
			match(ELSE);
			statement();
			if (inputState.guessing==0) {
				astFactory.addASTChild(currentAST,
returnAST);
			}
		}
		else if ((_tokenSet_6.member(LA(1))) &&
(_tokenSet_7.member(LA(2)))) {
		}
		else {
			throw new NoViableAltException(LT(1),
getFilename());
		}
		
		}
		if_rule_AST = (AST)currentAST.root;
		returnAST = if_rule_AST;
	}

My objection to this code is that the ELSE part is optional,
so why  does this code:
		else if ((_tokenSet_6.member(LA(1))) &&
(_tokenSet_7.member(LA(2)))) {
		}
		else {
			throw new NoViableAltException(LT(1),
getFilename());
		}
exists?
The parser fails to parse a file when after the "if" part is matched an 
EOF Token follows.

To prove my theory I removed the
else if ((_tokenSet_6.member(LA(1))) && ....
line and indead the parser worked just fine.

My version of antlr is antlr-2.7.1 and jdk1.4.


If this is after all a bug and is fixed in antlr-2.7.2
I apologize for mentioning again.

Thanks in advance.
Anakreon



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amejdi at ertonline.gr  Mon Nov  4 08:40:42 2002
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Possible bug in generated code
References: <170826586F3BD511910D0200C110AAA8032B4EA9@memail03.bco-home.com>
Message-ID: <3DC6A30A.4050303@ertonline.gr>

Sure.
The attachment is bz2 compressed.
If no bzip2 available I will send it in gzip or plain tar, whatever you 
prefer.

Build the project with: ant compile
run:
java -cp build Main3 <tests/logginCheck.inc



mzukowski@yci.com wrote:

> Could you post the smallest java file that triggers the bug?  This will help
> me diagnose it without wild speculation.
> 
> Monty
> 
> -----Original Message-----
> From: Anakreon Mejdi [mailto:amejdi@ertonline.gr]
> Sent: Monday, November 04, 2002 7:32 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Possible bug in generated code
> 
> 
> Hello antlr users.
> 
> I faced a problem with the Parser generated by antlr, and have possibly 
> dicovered a bug in the code generated.
> 
>  From a rule declared as:
> if_rule
>    :
>    IF^ LPAREN! expression RPAREN! statement
>    (
>        options {
>          warnWhenFollowAmbig = false;
>        }
>        :
>        ELSE! statement
>    )?
>    ;
> wich is copied from java.g the code generated is:
> 
> 	public final void if_rule() throws RecognitionException, 
> TokenStreamException {
> 		
> 		returnAST = null;
> 		ASTPair currentAST = new ASTPair();
> 		AST if_rule_AST = null;
> 		
> 		AST tmp52_AST = null;
> 		if (inputState.guessing==0) {
> 			tmp52_AST = (AST)astFactory.create(LT(1));
> 			astFactory.makeASTRoot(currentAST, tmp52_AST);
> 		}
> 		match(IF);
> 		AST tmp53_AST = null;
> 		tmp53_AST = (AST)astFactory.create(LT(1));
> 		match(LPAREN);
> 		expression();
> 		if (inputState.guessing==0) {
> 			astFactory.addASTChild(currentAST, returnAST);
> 		}
> 		AST tmp54_AST = null;
> 		tmp54_AST = (AST)astFactory.create(LT(1));
> 		match(RPAREN);
> 		statement();
> 		if (inputState.guessing==0) {
> 			astFactory.addASTChild(currentAST, returnAST);
> 		}
> 		{
> 		if ((LA(1)==ELSE) && (_tokenSet_0.member(LA(2)))) {
> 			AST tmp55_AST = null;
> 			tmp55_AST = (AST)astFactory.create(LT(1));
> 			match(ELSE);
> 			statement();
> 			if (inputState.guessing==0) {
> 				astFactory.addASTChild(currentAST,
> returnAST);
> 			}
> 		}
> 		else if ((_tokenSet_6.member(LA(1))) &&
> (_tokenSet_7.member(LA(2)))) {
> 		}
> 		else {
> 			throw new NoViableAltException(LT(1),
> getFilename());
> 		}
> 		
> 		}
> 		if_rule_AST = (AST)currentAST.root;
> 		returnAST = if_rule_AST;
> 	}
> 
> My objection to this code is that the ELSE part is optional,
> so why  does this code:
> 		else if ((_tokenSet_6.member(LA(1))) &&
> (_tokenSet_7.member(LA(2)))) {
> 		}
> 		else {
> 			throw new NoViableAltException(LT(1),
> getFilename());
> 		}
> exists?
> The parser fails to parse a file when after the "if" part is matched an 
> EOF Token follows.
> 
> To prove my theory I removed the
> else if ((_tokenSet_6.member(LA(1))) && ....
> line and indead the parser worked just fine.
> 
> My version of antlr is antlr-2.7.1 and jdk1.4.
> 
> 
> If this is after all a bug and is fixed in antlr-2.7.2
> I apologize for mentioning again.
> 
> Thanks in advance.
> Anakreon
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: asp.tar.bz2
Type: application/octet-stream
Size: 20214 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20021104/e19ae3d1/asp.tar.obj
From amejdi at ertonline.gr  Mon Nov  4 08:44:46 2002
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Possible bug in generated code
References: <170826586F3BD511910D0200C110AAA8032B4EA9@memail03.bco-home.com>
Message-ID: <3DC6A3FE.30302@ertonline.gr>

Sorry, I recommend wrong file for testing.
use java -cp build Main3<tests/test.js


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From neil.benn at cambridgeantibody.com  Mon Nov  4 09:20:01 2002
From: neil.benn at cambridgeantibody.com (Neil Benn)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Parsing Question
Message-ID: <005f01c28426$6895b2e0$5704a8c0@joshua>

Hello,

	I'm attempting to parse something like:-

Comment: User , This is a comment
MachineID: System , fusion1

	I have worked out how to get the token split up with a lexer
that skips commas and newlines.  However I also want the system to
discard the colon character.  However if I use Token.SKIP then it
creates a new token for me - I don't want that - I just want the Lexer
to ignore the : and keep running on the same  token so that the parser
never sees the :.  However I can't work out how to do this.  

	Could anyone let me know of the correct syntax to use here.

	Thanks, in advance for your help.


Cheers,

Neil Benn
Senior Automation Informatics Scientist

Cambridge Antibody Technology
The Science Park
Melbourn
Cambridgeshire
SG8 6JJ, UK

Telephone: + 44 (0) 1763 263233
Facsimile + 44 (0) 1763 263413
Email: mailto:neil.benn@cambridgeantibody.com
http://www.cambridgeantibody.com

Cambridge Antibody Technology Limited *
Registered Office: The Science Park, Melbourn, Cambridgeshire, SG8 6JJ,
UK
Registered in England and Wales number 2451177
(* Cambridge Antibody Technology Limited is a member of the Cambridge
Antibody Technology Group of Companies)

Confidentiality Note: This information and any attachments is
confidential
and only for use by the individual or entity to whom it has been sent.
Any
unauthorised dissemination, distribution or copying of this message is
strictly prohibited. If you are not the intended recipient please inform
the
sender immediately by reply e-mail and delete this message from your
system.
Thank you for your co-operation.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Nov  4 09:28:23 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Parsing Question
Message-ID: <170826586F3BD511910D0200C110AAA8032B4EAA@memail03.bco-home.com>

Something like

RULE: ('a'..'z')* ':'! ('a'..'z')*;

The ! tells it to not add that text to the token.

Monty

-----Original Message-----
From: Neil Benn [mailto:neil.benn@cambridgeantibody.com]
Sent: Monday, November 04, 2002 9:20 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Parsing Question


Hello,

	I'm attempting to parse something like:-

Comment: User , This is a comment
MachineID: System , fusion1

	I have worked out how to get the token split up with a lexer
that skips commas and newlines.  However I also want the system to
discard the colon character.  However if I use Token.SKIP then it
creates a new token for me - I don't want that - I just want the Lexer
to ignore the : and keep running on the same  token so that the parser
never sees the :.  However I can't work out how to do this.  

	Could anyone let me know of the correct syntax to use here.

	Thanks, in advance for your help.


Cheers,

Neil Benn
Senior Automation Informatics Scientist

Cambridge Antibody Technology
The Science Park
Melbourn
Cambridgeshire
SG8 6JJ, UK

Telephone: + 44 (0) 1763 263233
Facsimile + 44 (0) 1763 263413
Email: mailto:neil.benn@cambridgeantibody.com
http://www.cambridgeantibody.com

Cambridge Antibody Technology Limited *
Registered Office: The Science Park, Melbourn, Cambridgeshire, SG8 6JJ,
UK
Registered in England and Wales number 2451177
(* Cambridge Antibody Technology Limited is a member of the Cambridge
Antibody Technology Group of Companies)

Confidentiality Note: This information and any attachments is
confidential
and only for use by the individual or entity to whom it has been sent.
Any
unauthorised dissemination, distribution or copying of this message is
strictly prohibited. If you are not the intended recipient please inform
the
sender immediately by reply e-mail and delete this message from your
system.
Thank you for your co-operation.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dhart999 at yahoo.com  Mon Nov  4 10:45:58 2002
From: dhart999 at yahoo.com (dhart999)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] C++ Functions HELP PLEASE
Message-ID: <aq6f96+5pj5@eGroups.com>

Can someone please help me? I need to write the following functions 
coded SEPARATELY, then write a main program for each of them to test 
them:
1)  Validate Function
2)  Menu Display Function
3)  Function for simple interest
4)  Function for compound interest
5)  Function for loan origination
6)  Rounding function
7)  Output function

PLEASE.. any help will be appreciated.
Thanks,
Doreen



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cela_vei at yahoo.com  Mon Nov  4 13:36:51 2002
From: cela_vei at yahoo.com (cela_vei)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Using Antlr in Solaris with CC
Message-ID: <aq6p9j+gs1i@eGroups.com>

Hi

I have lot of problems getting to use Antlr on Solaris.

Does anyone have instructions how to compile the Antlr and get 
libantlr.a and be able to compile the calc binary in the 
examples/cpp/calc directory?

I am using Solaris and CC compiler.

Thanks
Cela


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From richard.ney at aspect.com  Mon Nov  4 16:20:09 2002
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Fixed unreachable code warnings in C# codegen
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE072270F@sac1exch3.aspect.com>

I modified the section in genBlockFinish to eliminate the break in the
default condition of the case statements if it isn't reachable due to the
throwing of an exception.


	private void genBlockFinish(CSharpBlockFinishingInfo howToFinish,
String noViableAction)
	{

		if (howToFinish.needAnErrorClause &&
			(howToFinish.generatedAnIf ||
howToFinish.generatedSwitch))
		{
			if ( howToFinish.generatedAnIf )
			{
				println("else");
				println("{");
			}
			else
			{
				//if (howToFinish.generatedSwitch)
println("break; /* howToFinish.generatedSwitch */");
				println("{");
			}
			tabs++;
			println(noViableAction);
			//if (howToFinish.generatedSwitch) println("break;
/* howToFinish.generatedSwitch */");
			tabs--;			
			println("}");
		}

		if (howToFinish.postscript != null)
		{
			if (howToFinish.generatedSwitch && noViableAction !=
null)
			{
				// Check to make sure that noViableAction is
only a throw statement
				if (noViableAction.indexOf("throw") == 0 ||
noViableAction.indexOf("goto") == 0)
				{
					// Remove the break statement since
it isn't reachable with a throw exception or goto
					int endOfBreak =
howToFinish.postscript.indexOf("break;") + 6;
					String newPostScript =
howToFinish.postscript.substring(endOfBreak);
					println(newPostScript);
				}
				else
				{
					println(howToFinish.postscript);
				}
			}
			else
			{
				println(howToFinish.postscript);
			}
		}
	}


-Richard

----------------------------------------------------------------------------
------------------------
Richard Ney	Aspect Communications
Principal Software Engineer
http://www.aspect.com <http://www.aspect.com>
Main:  408.325.2200
mailto:richard.ney@aspect.com <mailto:richard.ney@aspect.com>
SJ Office: 408.325.2464
    	Home Office: 916.797.9602
----------------------------------------------------------------------------
------------------------

The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction.
2. An object at rest will always be in the wrong place.
3. The energy required to change either of these states will always be more
than you wish to expend, but never so much as to make the task appear
prospectively impossible.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20021104/a8012155/attachment.html
From richard.ney at aspect.com  Mon Nov  4 16:24:25 2002
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Fix in token type file for Tree Parsers in C# codegen
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECD7F@sac1exch3.aspect.com>

I fixed a bug today dealing with the tree parser codegen. My grammer files
uses all three types: a parser, a lexer and a tree parser. The token file
generated for the tree parser had the correct name but the class name
internally was the same as the token class for the parser. I modified the
code in genTokenTypes. It now generates the class name based on the
TokenManager that is passed in instead of calling getTokenTypesClassName
which accesses the grammer's main TokenManager.

-Richard

/** Generate the token types CSharp file */
	protected void genTokenTypes(TokenManager tm) throws IOException
	{
		// Open the token output CSharp file and set the
currentOutput stream
		// SAS: file open was moved to a method so a subclass can
override
		//      This was mainly for the VAJ interface
		setupOutput(tm.getName() + TokenTypesFileSuffix);

		tabs = 0;

		// Generate the header common to all CSharp files
		genHeader();
		// Do not use printAction because we assume tabs==0
		println(behavior.getHeaderAction(""));

      // Generate the CSharp namespace declaration (if specified)
		if (nameSpace != null)
		{
			nameSpace.emitDeclarations(currentOutput);
		}
		tabs++;

		// Encapsulate the definitions in a class.  This has to be
done as a class because 
		// they are all constants and CSharp inteface  types cannot
contain constants.
		println("public class " + tm.getName() +
TokenTypesFileSuffix);
		println("{");
		tabs++;
		...


----------------------------------------------------------------------------
------------------------
Richard Ney	Aspect Communications
Principal Software Engineer
http://www.aspect.com <http://www.aspect.com>
Main:  408.325.2200
mailto:richard.ney@aspect.com <mailto:richard.ney@aspect.com>
SJ Office: 408.325.2464
    	Home Office: 916.797.9602
----------------------------------------------------------------------------
------------------------

The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction.
2. An object at rest will always be in the wrong place.
3. The energy required to change either of these states will always be more
than you wish to expend, but never so much as to make the task appear
prospectively impossible.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20021104/53f349b6/attachment.html
From richard.ney at aspect.com  Tue Nov  5 00:32:44 2002
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Bug in ANTLR C# Codegen?
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECD80@sac1exch3.aspect.com>

After I posted my fix to the unreachable code warnings I tested the new
ANTLR on some other grammar files and found what appears to be a bug that is
causing a throw exception statement to no get inserted. In this case when
genBlockFinish gets called it is passed a CSharpBlockFinishingInfo class and
what appears to be a valid noViableAction string containing an exception.
What appears strange is that the fields in the howToFinish instance of the
class states that both an IF and SWITCH were generated and the it doesn't
need a Error Clause. Based on the values for those fields the noViableAction
will never get printed to the output file. 

Has anyone else encountered this or is my fix to the warning the only thing
that has exposed this?

-Richard

----------------------------------------------------------------------------
------------------------
Richard Ney	Aspect Communications
Principal Software Engineer
http://www.aspect.com <http://www.aspect.com>
Main:  408.325.2200
mailto:richard.ney@aspect.com <mailto:richard.ney@aspect.com>
SJ Office: 408.325.2464
    	Home Office: 916.797.9602
----------------------------------------------------------------------------
------------------------

The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction.
2. An object at rest will always be in the wrong place.
3. The energy required to change either of these states will always be more
than you wish to expend, but never so much as to make the task appear
prospectively impossible.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20021105/68f0b950/attachment.html
From neil.benn at cambridgeantibody.com  Tue Nov  5 02:55:49 2002
From: neil.benn at cambridgeantibody.com (Neil Benn)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Ignore Whitespace
Message-ID: <007401c284b9$e6c4ab60$5704a8c0@joshua>

Hello,

        I'm sorry to post another newbie question but I stumped!  I'm
looking at the example to ignore whitespace.  The text I'm trying to
tokenise is:-

  Assay:                                                       , std
Alphascreen 384                                          , Description:
, 
  Software:                                                    , Fusion
3.50                                                  , Instrument
Serial:                                           , ---------
  Sample Map:                                                  , demo
, Description:                                                 , 
  Detection Mode:                                              , Alpha
, Shaking:                                                     ,
Disabled
  Plate Type:                                                  , Packard
OptiPlate 384                                        , Temperature
Control:                                         , Off


    If I tokenize this on comma and newline then I will get the tokens I
wish.  However this will also include the whitespace trailing each
comment.  I can get rid of this by calling a trim in the parser but I'm
trying to learn how to do this in the lexer.  I looked at the ignore
whitespace section in the docs but it doesn't seem to ignore the
trailing whitespace.  The code is something like :-

-----------------------------------------------------------
 
class CSVLexer extends Lexer;
 
options{filter=IGNORE;}

DISCARD: ( '\t'
         | ','
         | '\n' {newline();}
         | '\r' '\n' {newline();}
         )+
         {$setType(Token.SKIP);}
;

KEEP 
options { ignore=WS; }
: ( '\u0020' .. '\u002B' 
    | '\u002D' .. '\u0039'
    | '\u003B' .. '\u00FF')+
; 

protected

IGNORE: (':');
WS: (' ' | '\t');

------------------------------------------------

    The code compiles OK but the trailing whitespace dosn't get removed.
Is this issue something I'm best dealing with in the parser or is there
a way I can deal with it in the lexer?

 
    Thanks, in advance for your insistence.
 
Cheers,

Neil Benn
Senior Automation Informatics Scientist

Cambridge Antibody Technology
The Science Park
Melbourn
Cambridgeshire
SG8 6JJ, UK

Telephone: + 44 (0) 1763 263233
Facsimile + 44 (0) 1763 263413
Email:  <mailto:neil.benn@cambridgeantibody.com>
mailto:neil.benn@cambridgeantibody.com
 <http://www.cambridgeantibody.com> http://www.cambridgeantibody.com

Cambridge Antibody Technology Limited *
Registered Office: The Science Park, Melbourn, Cambridgeshire, SG8 6JJ,
UK
Registered in England and Wales number 2451177
(* Cambridge Antibody Technology Limited is a member of the Cambridge
Antibody Technology Group of Companies)

Confidentiality Note: This information and any attachments is
confidential
and only for use by the individual or entity to whom it has been sent.
Any
unauthorised dissemination, distribution or copying of this message is
strictly prohibited. If you are not the intended recipient please inform
the
sender immediately by reply e-mail and delete this message from your
system.
Thank you for your co-operation.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20021105/6423a920/attachment.html
From klaren at cs.utwente.nl  Tue Nov  5 03:04:10 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Using Antlr in Solaris with CC
In-Reply-To: <aq6p9j+gs1i@eGroups.com>; from cela_vei@yahoo.com on Mon, Nov 04, 2002 at 09:36:51PM -0000
References: <aq6p9j+gs1i@eGroups.com>
Message-ID: <20021105120409.G1454@cs.utwente.nl>

Hi,

On Mon, Nov 04, 2002 at 09:36:51PM -0000, cela_vei wrote:
> I have lot of problems getting to use Antlr on Solaris.
> 
> Does anyone have instructions how to compile the Antlr and get 
> libantlr.a and be able to compile the calc binary in the 
> examples/cpp/calc directory?
> 
> I am using Solaris and CC compiler.

Which version of antlr? Which version of CC (CC -V tells this) ? What goes
wrong? Did you read lib/cpp/README it has some tips on different compilers.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amejdi at ertonline.gr  Tue Nov  5 03:20:25 2002
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Ignore Whitespace
References: <007401c284b9$e6c4ab60$5704a8c0@joshua>
Message-ID: <3DC7A979.4030309@ertonline.gr>

If both whitespaces and ':' should be ignored then:
class CSVLexer extends Lexer;

  options{filter=IGNORE;}

preotected IGNORE
:
'\t
| ' '
| '\n' {newline();}
| '\r' '\n' {newline();}
| ':'
;

No need to manually set Token type to SKIP or anything else.
The Parser  will never know that whitespaces existed or tabs or ...

Neil Benn wrote:
> Hello,
> 
>         I'm sorry to post another newbie question but I stumped!  I'm 
> looking at the example to ignore whitespace.  The text I'm trying to 
> tokenise is:-
> 
>   Assay:                                                       , std 
> Alphascreen 384                                          , 
> Description:                                                 , 
>   Software:                                                    , Fusion 
> 3.50                                                  , Instrument 
> Serial:                                           , ---------
>   Sample Map:                                                  , 
> demo                                                         , 
> Description:                                                 , 
>   Detection Mode:                                              , 
> Alpha                                                        , 
> Shaking:                                                     , Disabled
>   Plate Type:                                                  , Packard 
> OptiPlate 384                                        , Temperature 
> Control:                                         , Off
> 
>     If I tokenize this on comma and newline then I will get the tokens I 
> wish.  However this will also include the whitespace trailing each 
> comment.  I can get rid of this by calling a trim in the parser but I'm 
> trying to learn how to do this in the lexer.  I looked at the ignore 
> whitespace section in the docs but it doesn't seem to ignore the 
> trailing whitespace.  The code is something like :-
> 
> -----------------------------------------------------------
>  
> class CSVLexer extends Lexer;
>  
> options{filter=IGNORE;}
> 
> DISCARD: ( '\t'
>          | ','
>          | '\n' {newline();}
>          | '\r' '\n' {newline();}
>          )+
>          {$setType(Token.SKIP);}
> ;
> 
> KEEP
> options { ignore=WS; }
> : ( '\u0020' .. '\u002B'
>     | '\u002D' .. '\u0039'
>     | '\u003B' .. '\u00FF')+
> ;
> 
> protected
> 
> IGNORE: (':');
> WS: (' ' | '\t');
> 
> ------------------------------------------------
> 
>     The code compiles OK but the trailing whitespace dosn't get 
> removed.  Is this issue something I'm best dealing with in the parser or 
> is there a way I can deal with it in the lexer?
> 
>  
>     Thanks, in advance for your insistence.
>  
> Cheers,
> 
> Neil Benn
> Senior Automation Informatics Scientist
> 
> Cambridge Antibody Technology
> The Science Park
> Melbourn
> Cambridgeshire
> SG8 6JJ, UK
> 
> Telephone: + 44 (0) 1763 263233
> Facsimile + 44 (0) 1763 263413
> Email: mailto:neil.benn@cambridgeantibody.com
> http://www.cambridgeantibody.com
> 
> Cambridge Antibody Technology Limited *
> Registered Office: The Science Park, Melbourn, Cambridgeshire, SG8 6JJ, UK
> Registered in England and Wales number 2451177
> (* Cambridge Antibody Technology Limited is a member of the Cambridge
> Antibody Technology Group of Companies)
> 
> Confidentiality Note: This information and any attachments is confidential
> and only for use by the individual or entity to whom it has been sent. Any
> unauthorised dissemination, distribution or copying of this message is
> strictly prohibited. If you are not the intended recipient please inform the
> sender immediately by reply e-mail and delete this message from your system.
> Thank you for your co-operation.
> 
> 
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service 
> <http://docs.yahoo.com/info/terms/>.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Nov  5 03:27:19 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Ignore Whitespace
In-Reply-To: <007401c284b9$e6c4ab60$5704a8c0@joshua>; from neil.benn@cambridgeantibody.com on Tue, Nov 05, 2002 at 10:55:49AM -0000
References: <007401c284b9$e6c4ab60$5704a8c0@joshua>
Message-ID: <20021105122718.H1454@cs.utwente.nl>

Hi,

On Tue, Nov 05, 2002 at 10:55:49AM -0000, Neil Benn wrote:
>     If I tokenize this on comma and newline then I will get the tokens I
> wish.  However this will also include the whitespace trailing each
> comment.  I can get rid of this by calling a trim in the parser but I'm
> trying to learn how to do this in the lexer.

Just call trim in the lexer before returning the token :)

> class CSVLexer extends Lexer;
>
> options{filter=IGNORE;}
>
> DISCARD: ( '\t'
>          | ','
>          | '\n' {newline();}
>          | '\r' '\n' {newline();}
>          )+
>          {$setType(Token.SKIP);}
> ;
>
> KEEP
> options { ignore=WS; }
> : ( '\u0020' .. '\u002B'
      ^^^^^^^ that's a space not ? Gives also non deterministic warning
here. Reading the generated code makes me suspect it does not do the right
thing here. Making this '\u0021' fixes the warning... did not test it though...

>     | '\u002D' .. '\u0039'
>     | '\u003B' .. '\u00FF')+
> ;
>
> protected
>
> IGNORE: (':');
> WS: (' ' | '\t');

Shouldn't WS be protected ?

>     The code compiles OK but the trailing whitespace dosn't get removed.
> Is this issue something I'm best dealing with in the parser or is there
> a way I can deal with it in the lexer?

The eternal answer applies here: 'it depends'. For what you are doing it
could probably work.

Cheers,

Ric

PS I'm not an expert on the use of the ignore thing. Hardly use it myself.
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wo das Chaos auf die Ordnung trifft, gewinnt meist das Chaos, weil es
  besser organisiert ist. --- Friedrich Nietzsche

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From neil.benn at cambridgeantibody.com  Tue Nov  5 03:31:43 2002
From: neil.benn at cambridgeantibody.com (Neil Benn)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Ignore Whitespace
In-Reply-To: <3DC7A979.4030309@ertonline.gr>
Message-ID: <007b01c284be$ea98cb90$5704a8c0@joshua>

Hello,

	I'm very sorry to be a bit hick here but - if I set it to ignore
the : character then it starts a new token.  I don't want it to do that,
I want the token to be returned with the colon character just missing.
For example

Assay:                            ,

	To be returned as (underscores are just there to mark out start
and end of token):

_Assay                             _

	However - if I try to ignore the : then I get :

_Assay_
_                             _

	
	
	Once again thanks for your help!

Cheers,
	

Neil Benn
Senior Automation Informatics Scientist

Cambridge Antibody Technology
The Science Park
Melbourn
Cambridgeshire
SG8 6JJ, UK

Telephone: + 44 (0) 1763 263233
Facsimile + 44 (0) 1763 263413
Email: mailto:neil.benn@cambridgeantibody.com
http://www.cambridgeantibody.com

Cambridge Antibody Technology Limited *
Registered Office: The Science Park, Melbourn, Cambridgeshire, SG8 6JJ,
UK
Registered in England and Wales number 2451177
(* Cambridge Antibody Technology Limited is a member of the Cambridge
Antibody Technology Group of Companies)

Confidentiality Note: This information and any attachments is
confidential
and only for use by the individual or entity to whom it has been sent.
Any
unauthorised dissemination, distribution or copying of this message is
strictly prohibited. If you are not the intended recipient please inform
the
sender immediately by reply e-mail and delete this message from your
system.
Thank you for your co-operation.


-----Original Message-----
From: Anakreon Mejdi [mailto:amejdi@ertonline.gr] 
Sent: 05 November 2002 11:20
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Ignore Whitespace


If both whitespaces and ':' should be ignored then:
class CSVLexer extends Lexer;

  options{filter=IGNORE;}

preotected IGNORE
:
'\t
| ' '
| '\n' {newline();}
| '\r' '\n' {newline();}
| ':'
;

No need to manually set Token type to SKIP or anything else. The Parser
will never know that whitespaces existed or tabs or ...

Neil Benn wrote:
> Hello,
> 
>         I'm sorry to post another newbie question but I stumped!  I'm
> looking at the example to ignore whitespace.  The text I'm trying to 
> tokenise is:-
> 
>   Assay:                                                       , std 
> Alphascreen 384                                          , 
> Description:                                                 , 
>   Software:                                                    ,
Fusion 
> 3.50                                                  , Instrument 
> Serial:                                           , ---------
>   Sample Map:                                                  , 
> demo                                                         , 
> Description:                                                 , 
>   Detection Mode:                                              , 
> Alpha                                                        , 
> Shaking:                                                     ,
Disabled
>   Plate Type:                                                  ,
Packard 
> OptiPlate 384                                        , Temperature 
> Control:                                         , Off
> 
>     If I tokenize this on comma and newline then I will get the tokens

> I
> wish.  However this will also include the whitespace trailing each 
> comment.  I can get rid of this by calling a trim in the parser but
I'm 
> trying to learn how to do this in the lexer.  I looked at the ignore 
> whitespace section in the docs but it doesn't seem to ignore the 
> trailing whitespace.  The code is something like :-
> 
> -----------------------------------------------------------
>  
> class CSVLexer extends Lexer;
>  
> options{filter=IGNORE;}
> 
> DISCARD: ( '\t'
>          | ','
>          | '\n' {newline();}
>          | '\r' '\n' {newline();}
>          )+
>          {$setType(Token.SKIP);}
> ;
> 
> KEEP
> options { ignore=WS; }
> : ( '\u0020' .. '\u002B'
>     | '\u002D' .. '\u0039'
>     | '\u003B' .. '\u00FF')+
> ;
> 
> protected
> 
> IGNORE: (':');
> WS: (' ' | '\t');
> 
> ------------------------------------------------
> 
>     The code compiles OK but the trailing whitespace dosn't get
> removed.  Is this issue something I'm best dealing with in the parser
or 
> is there a way I can deal with it in the lexer?
> 
>  
>     Thanks, in advance for your insistence.
>  
> Cheers,
> 
> Neil Benn
> Senior Automation Informatics Scientist
> 
> Cambridge Antibody Technology
> The Science Park
> Melbourn
> Cambridgeshire
> SG8 6JJ, UK
> 
> Telephone: + 44 (0) 1763 263233
> Facsimile + 44 (0) 1763 263413
> Email: mailto:neil.benn@cambridgeantibody.com
> http://www.cambridgeantibody.com
> 
> Cambridge Antibody Technology Limited *
> Registered Office: The Science Park, Melbourn, Cambridgeshire, SG8 
> 6JJ, UK Registered in England and Wales number 2451177
> (* Cambridge Antibody Technology Limited is a member of the Cambridge 
> Antibody Technology Group of Companies)
> 
> Confidentiality Note: This information and any attachments is 
> confidential and only for use by the individual or entity to whom it 
> has been sent. Any unauthorised dissemination, distribution or copying

> of this message is strictly prohibited. If you are not the intended 
> recipient please inform the sender immediately by reply e-mail and 
> delete this message from your system. Thank you for your co-operation.
> 
> 
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service
> <http://docs.yahoo.com/info/terms/>.



 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amejdi at ertonline.gr  Tue Nov  5 04:08:52 2002
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Ignore Whitespace
References: <007b01c284be$ea98cb90$5704a8c0@joshua>
Message-ID: <3DC7B4D4.2070600@ertonline.gr>

Taking this line as example:
Assay:                                                       , std 
Alphascreen 384                                          , Description: 
                                                 ,

Remove the ':' alternative from the IGNORE rule, also remove rules 
DISCARD and WS

  class CSVLexer extends Lexer;

    options{
	filter=IGNORE;
	caseSensitive = false;	//I asume case doesn't matter
    }	

  preotected IGNORE
  :
  '\t
  | '\n' {newline();}
  | '\r' '\n' {newline();}
  | ','
  ;

protcetd FILTER_SPACES
:
(' ')+
;


protected DATA
:
a .. z
| 0 .. 9
| ' ' (FILTER_SPACES!)?
;

KEEP
  :
  (DATA)+ (':'! | ','!)?
  ;


You can not discard white spaces since data like "Alphascreen 384" would
become Alphascreen384.

The DATA rule will accept the first white space but will discard all the
others.

I don't know if it will work without modifications though.
Anakreon


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From neil.benn at cambridgeantibody.com  Tue Nov  5 04:32:31 2002
From: neil.benn at cambridgeantibody.com (Neil Benn)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Column Identification
Message-ID: <008301c284c7$6932cb10$5704a8c0@joshua>

Hello,

	I'm very sorry to be posting so many questions, I'm afraid I
have another.  I'd also like to thank the people who have responded to
me!

	I'm looking to obtain column and line information for the
parser.  I have line information sorted out but am confused with the
column identification.  Looking at the jdocs for the antlr package
(2.7.0), the Token class has a getter/setter for Column.  However
calling this just results in a zero.  

	Looking at the docs on the antlr documentation page, they seem
to be out of date with my version as it talks about overriding consume
and providing a getColumn method.  
	The getColumn method is already there and looking at the FAQ
asking the same thing - it says - 'do not override consume'.  
	There is a comment later that I need to provide the input stream
in binary mode.  Therefore I have created a FileInputStream which
obtains a stream of bytes and sent this in but to no avail the column
number still sits at one. 

	These conflicting statements have confused me slightly - please
could you let me know the best way to provide column information on the
location of a token.

	Thanks, once again for your assistance.

Cheers,

Neil Benn
Senior Automation Informatics Scientist

Cambridge Antibody Technology
The Science Park
Melbourn
Cambridgeshire
SG8 6JJ, UK

Telephone: + 44 (0) 1763 263233
Facsimile + 44 (0) 1763 263413
Email: mailto:neil.benn@cambridgeantibody.com
http://www.cambridgeantibody.com

Cambridge Antibody Technology Limited *
Registered Office: The Science Park, Melbourn, Cambridgeshire, SG8 6JJ,
UK Registered in England and Wales number 2451177
(* Cambridge Antibody Technology Limited is a member of the Cambridge
Antibody Technology Group of Companies)

Confidentiality Note: This information and any attachments is
confidential and only for use by the individual or entity to whom it has
been sent. Any unauthorised dissemination, distribution or copying of
this message is strictly prohibited. If you are not the intended
recipient please inform the sender immediately by reply e-mail and
delete this message from your system. Thank you for your co-operation.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amejdi at ertonline.gr  Tue Nov  5 05:07:49 2002
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Column Identification
References: <008301c284c7$6932cb10$5704a8c0@joshua>
Message-ID: <3DC7C2A5.10703@ertonline.gr>

I am new in antlr too but will try to help if I can.
In the version of antlr (2.7.1) the column information works fine.
If I call getColumn() from a Token it gives the correct column and the 
Lexer or Parser have done nothing special for that.

If you have an old version try to update antlr.

Neil Benn wrote:
> Hello,
> 
> 	I'm very sorry to be posting so many questions, I'm afraid I
> have another.  I'd also like to thank the people who have responded to
> me!
> 
> 	I'm looking to obtain column and line information for the
> parser.  I have line information sorted out but am confused with the
> column identification.  Looking at the jdocs for the antlr package
> (2.7.0), the Token class has a getter/setter for Column.  However
> calling this just results in a zero.  
> 
> 	Looking at the docs on the antlr documentation page, they seem
> to be out of date with my version as it talks about overriding consume
> and providing a getColumn method.  
> 	The getColumn method is already there and looking at the FAQ
> asking the same thing - it says - 'do not override consume'.  
> 	There is a comment later that I need to provide the input stream
> in binary mode.  Therefore I have created a FileInputStream which
> obtains a stream of bytes and sent this in but to no avail the column
> number still sits at one. 
> 
> 	These conflicting statements have confused me slightly - please
> could you let me know the best way to provide column information on the
> location of a token.
> 
> 	Thanks, once again for your assistance.
> 
> Cheers,
> 
> Neil Benn
> Senior Automation Informatics Scientist
> 
> Cambridge Antibody Technology
> The Science Park
> Melbourn
> Cambridgeshire
> SG8 6JJ, UK
> 
> Telephone: + 44 (0) 1763 263233
> Facsimile + 44 (0) 1763 263413
> Email: mailto:neil.benn@cambridgeantibody.com
> http://www.cambridgeantibody.com
> 
> Cambridge Antibody Technology Limited *
> Registered Office: The Science Park, Melbourn, Cambridgeshire, SG8 6JJ,
> UK Registered in England and Wales number 2451177
> (* Cambridge Antibody Technology Limited is a member of the Cambridge
> Antibody Technology Group of Companies)
> 
> Confidentiality Note: This information and any attachments is
> confidential and only for use by the individual or entity to whom it has
> been sent. Any unauthorised dissemination, distribution or copying of
> this message is strictly prohibited. If you are not the intended
> recipient please inform the sender immediately by reply e-mail and
> delete this message from your system. Thank you for your co-operation.
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From user_sofia at biris.freeserve.co.uk  Tue Nov  5 05:20:14 2002
From: user_sofia at biris.freeserve.co.uk (elias_biris)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] 2 flex lexers 2 antlr parsers -> 1 simple solution?
Message-ID: <aq8gie+411n@eGroups.com>

Hi,

I am having a go at learning antlr, and I am interested in the
flexLexer example that appears in the latest source tarball. What I
would like to know is how could one put together 2 lexers, generated
by flex and corresponding to 2 input streams that are multiplexed? I
already understand how an antlr generated parser for language A can
call the parser of language B, upon finding the initial condition that
triggers recognition to switch to 'the other' language of the 2 ...
it's the lexers that puzzle me.

Specifically, I am puzzled with the input state of the flex lexers. In
the multipleLexer example it is  shown that  using the Antlr generated
lexers such multiplexing of lexers is possible via attachment of the 2
lexers to the same shared input.... However using flex lexers there
are no  Lexer objects (only token-stream wrappers), and there is no
way to get the two token stream wrappers to share input state (they
don't have any)...

I am rather new to the idea of multiplexing, so if anyone has an idea
on how it is possible to multiplex lexers generated by flex, or
pointers for more information, please let me know.

All the best

Elias Biris


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Nov  5 07:30:38 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Re: Bug in ANTLR C# Codegen?
In-Reply-To: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECD80@sac1exch3.aspect.com>
Message-ID: <aq8o6u+l7l9@eGroups.com>

Hi Richard,

> After I posted my fix to the unreachable code warnings I tested the 
new
> ANTLR on some other grammar files and found what appears to be a 
bug that is
> causing a throw exception statement to no get inserted.

Firstly, thank you for the code fixes you contributed for inclusion 
in the C# codegen. I would be grateful if you could send your updated 
CSharpCodeGenerator.java file (and all other affected files) with all 
the fixes incorporated. It is much easier to integrate whole file 
fixes in our environment.

As for the new bug you are reporting, are you testing with ANTLR 
2.7.2a4 ("...the new ANTLR...") ?. If so, please be aware that the C# 
codegen is still being updated for 2.7.2a4. Nevertheless, thanks for 
testing it with the latest version and we are grateful for all early 
adopter test reports.  ;-)

> In this case when
> genBlockFinish gets called it is passed a CSharpBlockFinishingInfo 
class and
> what appears to be a valid noViableAction string containing an 
exception.
> What appears strange is that the fields in the howToFinish instance 
of the
> class states that both an IF and SWITCH were generated and the it 
doesn't
> need a Error Clause. Based on the values for those fields the 
noViableAction
> will never get printed to the output file. 
> 
> Has anyone else encountered this or is my fix to the warning the 
only thing
> that has exposed this?

I certainly haven't come across this before, perhaps others on the 
list have?. Is this behavior present in other langauges -- C++ and/or 
Java?

I would be grateful for a simple grammar file that exposes this 
behaviour. I suspect we would need a grammar file and detailed 
comments that allow us to re-create the behaviour and also explains 
why the behaviour is wrong.

Thanks,

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cela_vei at yahoo.com  Tue Nov  5 09:13:10 2002
From: cela_vei at yahoo.com (cela_vei)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Re: Using Antlr in Solaris with CC
In-Reply-To: <20021105120409.G1454@cs.utwente.nl>
Message-ID: <aq8u76+aagr@eGroups.com>

I am using Antlr 2.7.2.a2. 
Solaris 5.8
Sun WorkShop 6 update 2 C++ 5.3 Patch 111685-06 2002/03/09

The problems I faced where 
1. it was using g++
2. make install would not work 
3. I could not link the objects in examples/cpp/calc.

I finally managed to do everything going through these steps.

1. export CC=cc
2. export CXX=CC
3. ./configure -prefix=$HOME/antlr-2.7.2a2
4. mkalljar
5. cd lib/cpp/src
6. gmake
This generates libantr.a but it does not link correctly.
Create libantlr.a again with the command
CC -xar -o libantr.a ANTLRException.o ...... TreeParser.o

7. cp $HOME/antlr-2.7.2.a2/scripts/install-sh $HOME/antlr-
2.7.2.a2/lib/cpp/scripts

8. cd $HOME/antlr-2.7.2.a2
8. gmake install

The major step is  when you manually make the libantlr.a. 
Specifying RANLIB=-xar does not help. Anyway that was the biggest
clue I need from one of your earliar posts.

If I use g++, gcc I didn't have to go through the special way of
making libantlr.a

Cela

--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:
> Hi,
> 
> On Mon, Nov 04, 2002 at 09:36:51PM -0000, cela_vei wrote:
> > I have lot of problems getting to use Antlr on Solaris.
> > 
> > Does anyone have instructions how to compile the Antlr and get 
> > libantlr.a and be able to compile the calc binary in the 
> > examples/cpp/calc directory?
> > 
> > I am using Solaris and CC compiler.
> 
> Which version of antlr? Which version of CC (CC -V tells this) ? 
What goes
> wrong? Did you read lib/cpp/README it has some tips on different 
compilers.
> 
> Cheers,
> 
> Ric
> -- 
> -----
+++++*****************************************************+++++++++---
----
>     ---- Ric Klaren ----- klaren@c... ----- +31 53 4893722  ----
> -----
+++++*****************************************************+++++++++---
----
>   "I don't have anything against Java - it's the best damn 
implementation
>               of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Nov  5 09:54:13 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] What does ANTLR use the reserved char codes and Token IDs for?
In-Reply-To: <aq43ng+hvnt@eGroups.com>
Message-ID: <985D09A0-F0E7-11D6-A07E-0030653DE0D6@jguru.com>


On Sunday, November 3, 2002, at 01:16  PM, micheal_jor wrote:

> Hi,
>
> ANTLR reserves the following character codes /u0000 to /u0003. What
> are they used for?

Hmm...for char codes I wonder if this will be a problem.  Are these 
valid chars in any unicode set?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From richard.ney at aspect.com  Tue Nov  5 10:38:14 2002
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Re: Bug in ANTLR C# Codegen?
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE0722715@sac1exch3.aspect.com>

Michael,

Here is my CSharpCodeGenerator.java. I have coded around the error I
mentioned here by making sure the noViableOption string is actually going to
get printed to the file. Sorry about the mix-up on version. I have
downloaded 2.7.2a4 but I am currently not using it. I applied the fixes to
the C# codegen for 2.7.2a2. This version also contains a fix to silence the
warning:

warning CS0168: The variable 'pe' is declared but never used 

By adding in a dummy call to pe.getLine(); 

-Richard

-----Original Message-----
From: micheal_jor [mailto:open.zone@virgin.net] 
Sent: Tuesday, November 05, 2002 7:31 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Bug in ANTLR C# Codegen?


Hi Richard,

> After I posted my fix to the unreachable code warnings I tested the
new
> ANTLR on some other grammar files and found what appears to be a
bug that is
> causing a throw exception statement to no get inserted.

Firstly, thank you for the code fixes you contributed for inclusion 
in the C# codegen. I would be grateful if you could send your updated 
CSharpCodeGenerator.java file (and all other affected files) with all 
the fixes incorporated. It is much easier to integrate whole file 
fixes in our environment.

As for the new bug you are reporting, are you testing with ANTLR 
2.7.2a4 ("...the new ANTLR...") ?. If so, please be aware that the C# 
codegen is still being updated for 2.7.2a4. Nevertheless, thanks for 
testing it with the latest version and we are grateful for all early 
adopter test reports.  ;-)

> In this case when
> genBlockFinish gets called it is passed a CSharpBlockFinishingInfo
class and
> what appears to be a valid noViableAction string containing an
exception.
> What appears strange is that the fields in the howToFinish instance
of the
> class states that both an IF and SWITCH were generated and the it
doesn't
> need a Error Clause. Based on the values for those fields the
noViableAction
> will never get printed to the output file.
> 
> Has anyone else encountered this or is my fix to the warning the
only thing
> that has exposed this?

I certainly haven't come across this before, perhaps others on the 
list have?. Is this behavior present in other langauges -- C++ and/or 
Java?

I would be grateful for a simple grammar file that exposes this 
behaviour. I suspect we would need a grammar file and detailed 
comments that allow us to re-create the behaviour and also explains 
why the behaviour is wrong.

Thanks,

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: CSharpCodeGenerator.java
Type: application/octet-stream
Size: 119024 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20021105/8be8bad3/CSharpCodeGenerator.obj
From open.zone at virgin.net  Tue Nov  5 11:11:46 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Re: Bug in ANTLR C# Codegen?
In-Reply-To: <0F9CBE7F81945C4BB7A32BE6E7656EE0722715@sac1exch3.aspect.com>
Message-ID: <aq955i+s00i@eGroups.com>

Hi Richard,

> Michael,
> 
> Here is my CSharpCodeGenerator.java. I have coded around the error I
> mentioned here by making sure the noViableOption string is actually 
going to
> get printed to the file.

Thanks. Are you saying that the file you have attached includes a fix 
for the issue you raised in your original message (in addition to the 
previous two issues) ?

> Sorry about the mix-up on version. I have
> downloaded 2.7.2a4 but I am currently not using it. I applied the 
fixes to
> the C# codegen for 2.7.2a2.

OK. I just thought you had applied the C# codegen to ANTLR 2.7.2a4. 
That's one way to start testing the C# codegen against the latest 
ANTLR version  ;-)

> This version also contains a fix to silence the
> warning:
> 
> warning CS0168: The variable 'pe' is declared but never used 
> 
> By adding in a dummy call to pe.getLine(); 

OK.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gudnabrsam at yahoo.com  Tue Nov  5 11:43:52 2002
From: gudnabrsam at yahoo.com (gudnabrsam)
Date: Mon Dec 20 16:15:07 2004
Subject: [antlr-interest] Re: RTF spec/grammar in (E)BNF
In-Reply-To: <apreli+2sai@eGroups.com>
Message-ID: <aq971o+t4du@eGroups.com>

Does anyone have an opinion on how hard it would be to arrange the 
BNF-based contents of this document into an ANTLR grammar?

-Matt

--- In antlr-interest@y..., "kresimir_saric" <kresimir.saric@b...> 
wrote:
> You can find v1.7 of RTF spec in .DOC format on www.wotsit.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From richard.ney at aspect.com  Tue Nov  5 12:20:03 2002
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Re: Bug in ANTLR C# Codegen?
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECD82@sac1exch3.aspect.com>

Hey Michael,

In a way I applied a fix, I just don't know if it is the right one. I added
code to check and see if noViableOption printed to the output. Now if there
can be a legal case where noViableOption contains a throw statement and the
howToFinish.needAnErrorClause can be false then yes I have updated my fix to
the unreachable code warnings. I just don't know if that is a legal case.

As for using 2.7.2a4 I was looking at adding the C# codegen to it but the
new 2.7.2a4 files I downloaded have a minor difference so my merge tools
consider the two files completely different so I can't see the changes
required to the base ANTLR files to make sure the merge is clean to add the
C# codegen in. I might get to it later but it will require visual inspection
which is slower.

-Richard

-----Original Message-----
From: micheal_jor [mailto:open.zone@virgin.net] 
Sent: Tuesday, November 05, 2002 11:12 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Bug in ANTLR C# Codegen?


Hi Richard,

> Michael,
> 
> Here is my CSharpCodeGenerator.java. I have coded around the error I 
> mentioned here by making sure the noViableOption string is actually
going to
> get printed to the file.

Thanks. Are you saying that the file you have attached includes a fix 
for the issue you raised in your original message (in addition to the 
previous two issues) ?

> Sorry about the mix-up on version. I have
> downloaded 2.7.2a4 but I am currently not using it. I applied the
fixes to
> the C# codegen for 2.7.2a2.

OK. I just thought you had applied the C# codegen to ANTLR 2.7.2a4. 
That's one way to start testing the C# codegen against the latest 
ANTLR version  ;-)

> This version also contains a fix to silence the
> warning:
> 
> warning CS0168: The variable 'pe' is declared but never used
> 
> By adding in a dummy call to pe.getLine();

OK.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gudnabrsam at yahoo.com  Tue Nov  5 12:24:03 2002
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] more on rtf
Message-ID: <20021105202403.61283.qmail@web20422.mail.yahoo.com>

I found an rtf grammar for JavaCC at the JavaCC
grammar repository.  Does anyone have any experience
converting JavaCC grammars for use with ANTLR?

-Matt

__________________________________________________
Do you Yahoo!?
HotJobs - Search new jobs daily now
http://hotjobs.yahoo.com/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Nov  5 13:50:05 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] more on rtf
In-Reply-To: <20021105202403.61283.qmail@web20422.mail.yahoo.com>
Message-ID: <8B39FE43-F108-11D6-A987-0030653DE0D6@jguru.com>


On Tuesday, November 5, 2002, at 12:24  PM, Matt Benson wrote:

> I found an rtf grammar for JavaCC at the JavaCC
> grammar repository.  Does anyone have any experience
> converting JavaCC grammars for use with ANTLR?

Should be very easy as JavaCC and ANTLR share a common parsing 
strategy.  If you need help, let me know.  Go for it :)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From brian-l-smith at uiowa.edu  Tue Nov  5 14:51:56 2002
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] What does ANTLR use the reserved char codes
 and Token IDs for?
References: <985D09A0-F0E7-11D6-A07E-0030653DE0D6@jguru.com>
Message-ID: <3DC84B8C.8050403@uiowa.edu>

They are control codes:

http://www.unicode.org/charts/PDF/U0000.pdf

0 = NULL
1 = START OF HEADING
2 = START OF TEXT
3 = END OF TEXT
4 = END OF TRANSMISSION

- Brian

Terence Parr wrote:
> On Sunday, November 3, 2002, at 01:16  PM, micheal_jor wrote:
> 
> 
>>Hi,
>>
>>ANTLR reserves the following character codes /u0000 to /u0003. What
>>are they used for?
> 
> 
> Hmm...for char codes I wonder if this will be a problem.  Are these 
> valid chars in any unicode set?
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Tue Nov  5 15:22:26 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Re: RTF spec/grammar in (E)BNF
In-Reply-To: <aq971o+t4du@eGroups.com>
Message-ID: <aq9jri+h9ms@eGroups.com>

--- In antlr-interest@y..., "gudnabrsam" <gudnabrsam@y...> wrote:
> Does anyone have an opinion on how hard it would be to arrange the 
> BNF-based contents of this document into an ANTLR grammar?
> 
> -Matt
> 
> --- In antlr-interest@y..., "kresimir_saric" <kresimir.saric@b...> 
> wrote:
> > You can find v1.7 of RTF spec in .DOC format on www.wotsit.org

I gave Spenser Kao the following advice for the 1.6 spec from 
microsoft.com (html):

------------------------------------------------------------------
If you look at the "header" and "document" sections, you will find a 
complete EBNF grammar in unconventional format:

<ruleName>       rule definition

and continuation lines start with an indent.

If you convert the "header" and "Document area" sections to text, you 
should be able to
1.)  extract lines beginning with < and continuation lines for 
rules--you should be able to write a simple ANTLR grammar to skip 
anything that's not a rule and convert the rules to an ANTLR parser 
grammar.

2.)  extract all commands--tokens beginning with \ --to a file.  You 
can build a symbol table with either my rtftable tool or something 
equivalent.

You'll then have to do something about numerical arguments on 
commands--the "N"s--but that should be minor.

-------------------------------------------------------------

Looking at the 1.7 spec, it is possible to directly convert it to text 
and then process it, but that's a little messy.  It looks better to go 
through the document and manually convert each table to text (via the 
"convert to" item on the table menu), then convert the document to 
.txt format and do the above processing.

It should not take more than a few days to develop the filter grammars 
to extract a full RTF .g grammar.  Spenser mentioned a 1.8 version of 
the spec, and I suspect that it is easier to develop the filters for 
the spec itself rather than converting the JavaCC grammar, and the 
filters can be reused for new versions of the spec.

--Loring


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From richard.ney at aspect.com  Tue Nov  5 16:18:47 2002
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] AST utility class for C# users
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECD83@sac1exch3.aspect.com>

For those out there how are using C# and want an easy way to display your
AST trees in a standard TreeView class here is a little utility class. I
felt this was easier than using the ASTFrame classes that came with the C#
codegen library.

using System;
using System.Windows.Forms;
using antlr;
using antlr.collections;

namespace GenericNamespace
{
	/// <summary>
	/// Summary description for AstTreeCollection.
	/// </summary>
	public class AstTreeNode : TreeNode
	{
		public AstTreeNode(AST parentNode)
		{
			string text = (parentNode.getText() == "" ? "Blank"
: parentNode.getText());
			if (text != "")
			{
				this.Text = text;
			}

			// Get the first child of the node.
			AST childNode = parentNode.getFirstChild();

			// While we have elements to work on.
			while (childNode != null)
			{		
				// Walk deeper into the tree
				this.Nodes.Add(new AstTreeNode(childNode));

				// Go to the next sibling in the tree.
				childNode = childNode.getNextSibling();
			}
		}
	}
}


And a piece of sample code using it.


parser.expression();
antlr.CommonAST exprAST = (antlr.CommonAST)parser.getAST();

AstTreeNode treeNode = new AstTreeNode(exprAST);
expressionAST.Nodes.Clear();
expressionAST.Nodes.Add(treeNode);
treeNode.ExpandAll();


----------------------------------------------------------------------------
------------------------
Richard Ney	Aspect Communications
Principal Software Engineer
http://www.aspect.com <http://www.aspect.com>
Main:  408.325.2200
mailto:richard.ney@aspect.com <mailto:richard.ney@aspect.com>
SJ Office: 408.325.2464
    	Home Office: 916.797.9602
----------------------------------------------------------------------------
------------------------

The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction.
2. An object at rest will always be in the wrong place.
3. The energy required to change either of these states will always be more
than you wish to expend, but never so much as to make the task appear
prospectively impossible.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20021105/cd9749e5/attachment.html
From amejdi at ertonline.gr  Wed Nov  6 02:20:01 2002
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:08 2004
Subject: Repost: [antlr-interest] Possible bug in generated code
References: <170826586F3BD511910D0200C110AAA8032B4EA9@memail03.bco-home.com> <3DC6A3FE.30302@ertonline.gr>
Message-ID: <3DC8ECD1.3080704@ertonline.gr>

Few days ago I posted a message for a possible bug in the generated 
code(Java).

Is anybody investigating for this problem?
I'd like to know if it is a bug after all.
If I can help in any whay please let me know.
Anakreon


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Wed Nov  6 05:21:52 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:08 2004
Subject: Repost: [antlr-interest] Possible bug in generated code
In-Reply-To: <3DC8ECD1.3080704@ertonline.gr>; from amejdi@ertonline.gr on Wed, Nov 06, 2002 at 12:20:01PM +0200
References: <170826586F3BD511910D0200C110AAA8032B4EA9@memail03.bco-home.com> <3DC6A3FE.30302@ertonline.gr> <3DC8ECD1.3080704@ertonline.gr>
Message-ID: <20021106142152.P1454@cs.utwente.nl>

Hi,

On Wed, Nov 06, 2002 at 12:20:01PM +0200, Anakreon Mejdi wrote:
> Few days ago I posted a message for a possible bug in the generated 
> code(Java).
> 
> Is anybody investigating for this problem?
> I'd like to know if it is a bug after all.
> If I can help in any whay please let me know.

You might want to check if this 2.7.1 snapshot fixes the problem:

http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-devel-20010304.tar.gz

This is version contains a number of fixes for several bugs in 2.7.1. Let
me grab the opportunity to once more suggest removing or replacing the
2.7.1 tarball on antlr.org.

If you're not using the version of the link above then you're bound to
stumble upon stuff that's 'odd'.

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wo das Chaos auf die Ordnung trifft, gewinnt meist das Chaos, weil es
  besser organisiert ist. --- Friedrich Nietzsche


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amejdi at ertonline.gr  Wed Nov  6 07:18:14 2002
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:08 2004
Subject: Repost: [antlr-interest] Possible bug in generated code
References: <170826586F3BD511910D0200C110AAA8032B4EA9@memail03.bco-home.com> <3DC6A3FE.30302@ertonline.gr> <3DC8ECD1.3080704@ertonline.gr> <20021106142152.P1454@cs.utwente.nl>
Message-ID: <3DC932B6.4070607@ertonline.gr>



Ric Klaren wrote:
> Hi,
> 
> On Wed, Nov 06, 2002 at 12:20:01PM +0200, Anakreon Mejdi wrote:
> 
>>Few days ago I posted a message for a possible bug in the generated 
>>code(Java).
>>
>>Is anybody investigating for this problem?
>>I'd like to know if it is a bug after all.
>>If I can help in any whay please let me know.
> 
> 
> You might want to check if this 2.7.1 snapshot fixes the problem:
> 
> http://wwwhome.cs.utwente.nl/~klaren/antlr/antlr-devel-20010304.tar.gz
> 
> This is version contains a number of fixes for several bugs in 2.7.1. Let
> me grab the opportunity to once more suggest removing or replacing the
> 2.7.1 tarball on antlr.org.
> 
> If you're not using the version of the link above then you're bound to
> stumble upon stuff that's 'odd'.
> 
> Ric

I downloaded the new version.
I have written a TokenStream implementor who stores the tokens into a 
List and removes the first element of the List when nextToken is called
and returns the removed Token.
The reason I wrote this class is debugging.
If nextToken is called but the List is empty a RuntimeException is thrown.
So parsing failed with the new version as well.
However when I passed the JsLexer as TokenStream it did work which seems
odd to me.
When an asp page is parsed the JsParser fails again with message:
line 6:1: unexpected token: null
	at gr.omadak.leviathan.asp.JsParser.if_rule(JsParser.java:910)
	at gr.omadak.leviathan.asp.JsParser.statement(JsParser.java:224)
	at gr.omadak.leviathan.asp.JsParser.start_rule(JsParser.java:111)
	at Main2.main(Main2.java:52)
When the code of the Parser is altered as mentioned in my previus 
posting it doesn't fail.

The new version generates exactly the same code for the optional part of 
the if_rule.
So the failure is what I expected to happen.
I would suggest, someone whou knows how antlr works internally to check
if the code generated is what it should be.
Unfortunatly I can't do it myself since I am a newby in antlr.

Thanks for the suggestion anywhay.

Anakreon.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Wed Nov  6 08:44:39 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] ANTLR & Testing: Experiences and Practices?
Message-ID: <aqbgtn+no5t@eGroups.com>

Hi,

I'm trying to think (and hack) my way to a coherent *automatic* 
testing regime/harness for ANTLR-generated parsers and the C# codegen 
(separately of course). We have parsers in all the languages 
supported by ANTLR - C++, C# and Java.

If you have found a testing solution that works for you - perhaps 
using xUnit and/or Bogdan Mitu's tester.zip - I'll be grateful for a 
description of the solution and perhaps a sample that demonstrates 
how you make it all work for you.

Thanks,

Micheal

PS    What other tools/techniques have you found that make working 
with ANTLR (and parser generators or compiler development in general) 
more fun/efficient/productive?



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Wed Nov  6 09:24:11 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] ANTLR & Testing: Experiences and Practices?
References: <aqbgtn+no5t@eGroups.com>
Message-ID: <000e01c285b9$52f35d40$0200a8c0@NOTEBOOK>


Hi micheal,
Here is V1.1 of CodeSections which will allow you to handle multiple
versions of the code in the same file.
I use it for multiple versions tree walkers and for private/public versions
of C code.  I also use it to optionally add debugging code.

There are two version of CodeSections.  A commandline version and an Ant
version (both in the same src file ofcourse)  See the CodeSections.cs file
for details.


regards
matthew

Mods:
V1.1 27th October 2002 allow alternate names for same code section (see
testin.cs for examples)
V1.0 26th October 2002 initial release


--------------------------
Input File Format
--------------------------
alternative code sections start with
<<id>>=
starting in col1 and followed by alternative code seciton ids or whitespace
and is termimated by a newline
where id is  $ alpha or underscore followed by $ alpha,underscore or digits
(a Java identifier)
spaces are NOT allowed within id or between << id and >>=

sections continue until next section or EOF

<<*>>=
is the default section that is always output

To output other code sections list the id's of the sections to be output in
the arguments

java -jar CodeSections inputFile outFile [ids]*

If there are no ids listed just the <<*>>= sections will be output.

If you ask for an id that does not exist in the input file a warning is
printed on
System.out

See this file and the testin.cs for examples



----- Original Message -----
From: "micheal_jor" <open.zone@virgin.net>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, November 07, 2002 3:44 AM
Subject: [antlr-interest] ANTLR & Testing: Experiences and Practices?


> Hi,
>
> I'm trying to think (and hack) my way to a coherent *automatic*
> testing regime/harness for ANTLR-generated parsers and the C# codegen
> (separately of course). We have parsers in all the languages
> supported by ANTLR - C++, C# and Java.
>
> If you have found a testing solution that works for you - perhaps
> using xUnit and/or Bogdan Mitu's tester.zip - I'll be grateful for a
> description of the solution and perhaps a sample that demonstrates
> how you make it all work for you.
>
> Thanks,
>
> Micheal
>
> PS    What other tools/techniques have you found that make working
> with ANTLR (and parser generators or compiler development in general)
> more fun/efficient/productive?
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: CodeSectionsV1_1.zip
Type: application/x-zip-compressed
Size: 13670 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20021107/349c1795/CodeSectionsV1_1.bin
From tmoog at polhode.com  Wed Nov  6 15:43:39 2002
From: tmoog at polhode.com (Tom Moog)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] 2 flex lexers 2 antlr parsers -> 1 simple
 solution?
In-Reply-To: <aq8gie+411n@eGroups.com>
Message-ID: <Pine.WNT.4.44.0211061743120.1960-100000@polhode3>


Are you talking about antlr 2 or antlr 1 (aka pccts) ?



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From user_sofia at biris.freeserve.co.uk  Wed Nov  6 21:28:19 2002
From: user_sofia at biris.freeserve.co.uk (elias_biris)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Re: 2 flex lexers 2 antlr parsers -> 1 simple solution?
In-Reply-To: <Pine.WNT.4.44.0211061743120.1960-100000@polhode3>
Message-ID: <aqctlj+o9v1@eGroups.com>

--- In antlr-interest@y..., Tom Moog <tmoog@p...> wrote:
> 
> Are you talking about antlr 2 or antlr 1 (aka pccts) ?

antlr 2 (I got 2.7.2a4)

also let me try to make the description a bit clearer: I am not
interested in how I can combine (multiplex) 2 antlr-generated lexers
(this is documented and exemplified in the current versions of antlr
2.7.2aX). I have to have the lexers coming from flex, and if possible
I'd like to have them in separate files  (not combined within 1 lexer
specification, using states). 

Theoretically, I should be able to:

-Create a selector
-Create the 2 lexer wrappers (TokenStreams) and attach them to the
selector
-Select a lexer (token stream) to begin with
-upon hitting a specific set of Tokens, the 1st lexer pushes the
wrapper for the 2nd lexer on the selector stack, and the parser
instantiates the sub-parser and calls the sub-parser's top method
- upon hitting a separate set of tokens, the 2nd lexer pops the
selector stack, and the 1st parser continues


I have verified that the swapping of the lexers and the activation of
the sub-parser occurs fine. But, the yylex function of the 2nd lexer
returns immediately EOF causing an early exit of the 2nd parser. I am
not sure why the yylex returns so quickly. Also I have noticed that if
antlr-generated lexers are used their state can be shared using the
provided LexerSharedInputState class ... How can one share states like
that between flex - lexers?

It's the 1st time I am doing this sort of thing, and the constraint to
avoid lexer states (I want to see if it is possible to do so) makes
things a bit awkward for all I know.

kind regards

Elias Biris


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From richard.ney at aspect.com  Wed Nov  6 23:33:03 2002
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Grammer question
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECD84@sac1exch3.aspect.com>

I have a question on formatting a grammer rule to construct the AST tree a
certain way. Say we have a grammer that allows these constructs

Construct 1) column1 + column2 alias1, column3
Construct 2) (column1 + column2) alias1, column3

Column1, column2 and alias as basic identifiers and the desired tree looks
like

alias1----
   | 	|  
   |	+----------
   |		| 
   |		column1
   |		column2
column3

I figure I can do something with the ^ to make various item root. Also the
parens are option and I don't want them in the tree constuct. Is it possible
to combine ! and ?

-Richard

----------------------------------------------------------------------------
------------------------
Richard Ney	Aspect Communications
Principal Software Engineer
http://www.aspect.com <http://www.aspect.com>
Main:  408.325.2200
mailto:richard.ney@aspect.com <mailto:richard.ney@aspect.com>
SJ Office: 408.325.2464
    	Home Office: 916.797.9602
----------------------------------------------------------------------------
------------------------

The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction.
2. An object at rest will always be in the wrong place.
3. The energy required to change either of these states will always be more
than you wish to expend, but never so much as to make the task appear
prospectively impossible.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20021106/b7ef3899/attachment.html
From pete.forman at westerngeco.com  Thu Nov  7 00:47:33 2002
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] ANTLR & Testing: Experiences and Practices?
In-Reply-To: <aqbgtn+no5t@eGroups.com>
Message-ID: <5.1.1.1.2.20021107082757.01e4fcb0@wgmail2.gatwick.eur.slb.com>

At 2002-11-06 16:44 +0000, micheal_jor wrote:
>If you have found a testing solution that works for you - perhaps
>using xUnit and/or Bogdan Mitu's tester.zip - I'll be grateful for a
>description of the solution and perhaps a sample that demonstrates
>how you make it all work for you.

I run regression tests on the parsers that I've written.  These tests
are done using a commercial package.  In the past I used "make check"
to run them.  The tests are simply feeding input and comparing output.

Here is a bit of a GNUmakefile to illustrate.

check: xml ...

xml: Main.class
         @echo "== starting XML tests"
         fail=0; for f in $(FILES); \
         do $(JAVA) -cp "$(ANTLR_PATH)$(CP_SEP)$(GL_PATH)$(CP_SEP)." \
             Main +filename +lay -xml input/$$f > actual/$$f 2>&1; \
           cmp actual/$$f expected/$$f || fail=1; \
         done; if [ $$fail = 0 ] ; then echo "== XML tests passed"; fi



-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Thu Nov  7 04:33:01 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] bug in grammar inheritance
Message-ID: <058601c28659$da2bcc70$0100a8c0@daemon>


Hi,

ANTLR contains a bug when using grammar inheritance.

When no importVocab is specified then ANTLR copies
the XxxTokenTypes.txt file from the supergrammar 
to the current directory instead of the target directory.

This can be fixed by replacing following code in 
"antlr/preprocessor/Grammar.java":

OLD CODE in method expandInPlace():

String newImportVocabFileName =         
     antlrTool.fileMinusPath(superExportVocabFileName);

NEW CODE in method expandInPlace()::

String newImportVocabFileName =         
     antlrTool.getOutputDirectory() +
     System.getProperty("file.separator") +
     antlrTool.fileMinusPath(superExportVocabFileName);

Silvain



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Nov  7 10:27:24 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] bug in grammar inheritance
In-Reply-To: <058601c28659$da2bcc70$0100a8c0@daemon>
Message-ID: <8FCA21C4-F27E-11D6-A987-0030653DE0D6@jguru.com>

THanks!  I'll look into it.
Ter

On Thursday, November 7, 2002, at 04:33  AM, Silvain Piree wrote:

>
> Hi,
>
> ANTLR contains a bug when using grammar inheritance.
>
> When no importVocab is specified then ANTLR copies
> the XxxTokenTypes.txt file from the supergrammar
> to the current directory instead of the target directory.
>
> This can be fixed by replacing following code in
> "antlr/preprocessor/Grammar.java":
>
> OLD CODE in method expandInPlace():
>
> String newImportVocabFileName =
>      antlrTool.fileMinusPath(superExportVocabFileName);
>
> NEW CODE in method expandInPlace()::
>
> String newImportVocabFileName =
>      antlrTool.getOutputDirectory() +
>      System.getProperty("file.separator") +
>      antlrTool.fileMinusPath(superExportVocabFileName);
>
> Silvain
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Thu Nov  7 09:08:23 2002
From: cintyram at yahoo.com (Sriram Durbha)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Grammer question
In-Reply-To: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECD84@sac1exch3.aspect.com>
Message-ID: <20021107170823.27384.qmail@web40011.mail.yahoo.com>

i had asked a similar question earlier .. and learnt that the last
terminal in a rule that has a caret on it becomes teh root;

i dont know how to achieve the tree structure you have shown in one
rule; but it can be acheived in more than one rule;
also your picture shows that alias has two children, in antlr trees i
think only one child can be there, the other one becomes a siblilng;

so your tree might be like 

A
|
C3 --->[dummy]
          |
          |  
         C1-->C2 

you can have C1
              |
              V
              C2 also;

by writing two rules you can have the grammar like this




rule2 : rule1 alias^ C3 ;
rule1 : ( LPAREN! )?  C1^ PLUS! C2 (RPAREN! )? ;

this will make alias as root and C3 and and rule1 as its siblings; [ or
is it children?]
but rule 1 is a tree in itself in which C1 is root  and C2 its sibling[
child ?] 

hope this helps.. 
/e
cheers
ram

--- "Ney, Richard" <richard.ney@aspect.com> wrote:
> I have a question on formatting a grammer rule to construct the AST
> tree a
> certain way. Say we have a grammer that allows these constructs
> 
> Construct 1) column1 + column2 alias1, column3
> Construct 2) (column1 + column2) alias1, column3
> 
> Column1, column2 and alias as basic identifiers and the desired tree
> looks
> like
> 
> alias1----
>    | 	|  
>    |	+----------
>    |		| 
>    |		column1
>    |		column2
> column3
> 
> I figure I can do something with the ^ to make various item root.
> Also the
> parens are option and I don't want them in the tree constuct. Is it
> possible
> to combine ! and ?
> 
> -Richard
> 
>
----------------------------------------------------------------------------
> ------------------------
> Richard Ney	Aspect Communications
> Principal Software Engineer
> http://www.aspect.com <http://www.aspect.com>
> Main:  408.325.2200
> mailto:richard.ney@aspect.com <mailto:richard.ney@aspect.com>
> SJ Office: 408.325.2464
>     	Home Office: 916.797.9602
>
----------------------------------------------------------------------------
> ------------------------
> 
> The Three Laws of Infernal Dynamics:
> 1. An object in motion will always be headed in the wrong direction.
> 2. An object at rest will always be in the wrong place.
> 3. The energy required to change either of these states will always
> be more
> than you wish to expend, but never so much as to make the task appear
> prospectively impossible.
> 
> 
> 


__________________________________________________
Do you Yahoo!?
U2 on LAUNCH - Exclusive greatest hits videos
http://launch.yahoo.com/u2

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Nov  7 10:31:09 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] new java grammar?
Message-ID: <15E392BA-F27F-11D6-A987-0030653DE0D6@jguru.com>

Howdy...anybody try out my new java grammar and tree parser (in 
2.7.2a4)?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Thu Nov  7 11:46:38 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] "return" in rule code
Message-ID: <aqefuu+7mlp@eGroups.com>

Is it "OK" to have a "return" statement in a rule?

	FOO
		: "foo" { if ( cond ) return; } "bar"
		;

Will the above match only "foo" if cond is true, i.e., abort the matching?

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Nov  7 12:18:42 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] "return" in rule code
In-Reply-To: <aqefuu+7mlp@eGroups.com>
Message-ID: <1BFF5522-F28E-11D6-AC87-0030653DE0D6@jguru.com>

Hi Paul,

I strongly recommend not to do this.  Pretend it's not a method in this 
case and make ANTLR do the "right thing". :)

Ter

On Thursday, November 7, 2002, at 11:46  AM, Paul J. Lucas wrote:

> Is it "OK" to have a "return" statement in a rule?
>
> 	FOO
> 		: "foo" { if ( cond ) return; } "bar"
> 		;
>
> Will the above match only "foo" if cond is true, i.e., abort the 
> matching?
>
> - Paul
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From praveen_c at yahoo.com  Thu Nov  7 14:32:43 2002
From: praveen_c at yahoo.com (praveen_c)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] skipping EOF.
Message-ID: <aqepmb+5a90@eGroups.com>

Hi,

I'm running into an infinite loop because my grammar doesn't detect 
the EOF. Everything else in the grammar works well. The generated 
nextToken() method looks like this:

---code snippet begin---
			try {   // for lexical error handling
				if ((LA(1)=='<') && (LA(2)=='@')) {
					mTAG(true);
					theRetToken=_returnToken;
				}
				else {
					mTOP_TEXT(true);
					theRetToken=_returnToken;
				}
				
				if ( _returnToken==null ) continue 
tryAgain; // found SKIP token
				_ttype = _returnToken.getType();
				_returnToken.setType(_ttype);
				return _returnToken;
			}
			catch (RecognitionException e) {
				throw new 
TokenStreamRecognitionException(e);
			}
---end code snippet---

I think I need a semantic pred. to prevent getting into TOP_TEXT rule 
and somehow return on seeing EOF.

Please advice. Grammar starts below.

---grammar begins-----------
header { package tom; }

class SimpleParser extends Parser;

template: (TOP_TEXT | TAG | INCLUDE | LOOP | END_LOOP)+ EOF;

class SimpleLexer extends Lexer;
options {
    k=2;
    testLiterals=false;
    charVocabulary = '\3'..'\377' | '\u1000'..'\u1fff';
}

{
    public boolean isEndOfText(boolean stopOnAngleBracket) throws 
antlr.CharStreamException {
        char char1 = LA(1);
        if (char1 == '<') {
            char char2 = LA(2);
            if (char2 == '@') { // "<@"
                return true;
            } else if (char2 == '/') { // "</"
                //ignore any white space
                int i = forwardToNonWhiteSpace(3);

                if (
                    (LA(i++) == 'l') &&
                    (LA(i++) == 'o') &&
                    (LA(i++) == 'o') &&
                    (LA(i++) == 'p')
                   ) {
                   
                   //match whitespace.
                   i = forwardToNonWhiteSpace(i);

                   if (LA(i++) == '>') { // "</loop>"
                        return true;
                   } else {
                        return false;
                   }
               } else {
                    return false;
               }
            } else { // it began with '<' but doesn't have anything 
meaningful after that.
                return false;
            }
        } else if (char1 == EOF_CHAR) { //End-of-file reached, can't 
proceed further.
            return true;
        } else if (stopOnAngleBracket && (LA(1)=='>')) {
            return true;
        } else { //doesn't begin with '<', so it's a normal char, not 
a special one.
            return false;
        }
    }

    public int forwardToNonWhiteSpace(int i) throws 
antlr.CharStreamException {
        char c = LA(i);
        while ( (c==' ') || (c == '\t') || (c == '\n') ) {
            i++;
            c = LA(i);
        }
        return i;
    }

    public boolean isEndOfTagText() throws antlr.CharStreamException 
{ //end of <@asdf> or 
        return isEndOfText(true) || (LA(1) == '>');
    }
}

protected
WS : ( ' ' | '\t' | '\n' )* ;

TAG:     (options 
            {
                generateAmbigWarnings=false;
            }:
                "<@" 
                    (
                        (
                            ("include") => INCLUDE { $setType
(INCLUDE); } |
                            ("loop")    => LOOP { $setType(LOOP); } 
                        ) |
                        (
                            //since this a greedy loop, stop on 
seeing the first '>', hence the sem. pred. below.
                            { LA(1) != '>' }? TEXT[ true ]  | TAG 
                        )+
                    )
                '>'
        );

protected
INCLUDE: "include" ( { !isEndOfTagText() }?  TEXT[true] | TAG )*;

protected
LOOP: "loop" ( 
                { !isEndOfTagText() }?  TEXT[true] | 
                TAG 
             )*;

protected
END_LOOP: "</" LOOP '>';

TOP_TEXT: TEXT[ false ];

protected 
TEXT[ boolean stopOnAngleBracket ]:   (END_LOOP) => END_LOOP { 
$setType(END_LOOP); } |
        (
        options 
            {
                generateAmbigWarnings=false;
            }:
            ( { !isEndOfText(stopOnAngleBracket) }? . { if (LA(1)
=='\n') newline(); } )* 
        );

Thanks in advance.

-Praveen


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Thu Nov  7 13:16:11 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Re: "return" in rule code
In-Reply-To: <aqefuu+7mlp@eGroups.com>
Message-ID: <aqel6r+j2pi@eGroups.com>

--- In antlr-interest@y..., "Paul J. Lucas" <dude@d...> wrote:
> Is it "OK" to have a "return" statement in a rule?
> 
> 	FOO
> 		: "foo" { if ( cond ) return; } "bar"
> 		;
> 
> Will the above match only "foo" if cond is true, i.e., abort the 
matching?
> 
> - Paul

Paul--

The right way to do this is with a semantic predicate:

FOO
         :
             "foo"  ( {cond}? "bar" | )
         ;

This is guaranteed to work; using "return" in an action could well 
bypass ANTLR tree construction (right now it doesn't, but it probably 
will in the next big--3.0--release when AST construction is 
optimized).

--Loring


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsc at alum.mit.edu  Thu Nov  7 15:55:06 2002
From: jsc at alum.mit.edu (Jin Choi)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Grammar help question (iCalendar)
Message-ID: <aqeugq+ktoh@eGroups.com>

I'm attempting to write a grammar to parse iCalendar files (rfc2445), and have 
some questions on how best to handle a grammar issue.

There are many variants of lines of the form
FIELD;param1=foo;param2="bar":field value

where the parameters are optional name value pairs, and the field value is 
typed, depending on the type of field you are trying to parse. Some fields take 
nearly arbitrary text, while others are limited to particular strings 
("VERSION:2.0") or are structured, such as timestamps. So, I have something 
like:

version : "VERSION" (params)* ':' "2.0" ;
prodid : "PRODID" (params)* ':' TEXTVALUE ;
params : ';' PARAMNAME '=' (PARAM_VALUE)? (',' PARAM_VALUE)* ;

So here's the problem: I obviously can't define a lexer rule for TEXTVALUE, 
since it would create all kinds of ambiguities. Perhaps I could use a 
multiplexed lexer for this, but it seems like you can only switch the lexer state 
from within a lexer rule, and not from the parser, which is where you know the 
type of value you should be looking for.

I could just define each component as a single token and do all the parsing in 
the lexer, using protected rules. Are there any downsides to that?

How would you write this?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From user_sofia at biris.freeserve.co.uk  Thu Nov  7 22:30:59 2002
From: user_sofia at biris.freeserve.co.uk (elias_biris)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Re: 2 flex lexers 2 antlr parsers -> 1 simple solution?
In-Reply-To: <aqctlj+o9v1@eGroups.com>
Message-ID: <aqfln3+9vb5@eGroups.com>


> I have verified that the swapping of the lexers and the activation of
> the sub-parser occurs fine. But, the yylex function of the 2nd lexer
> returns immediately EOF causing an early exit of the 2nd parser. I am
> not sure why the yylex returns so quickly. Also I have noticed that if
> antlr-generated lexers are used their state can be shared using the
> provided LexerSharedInputState class ... How can one share states like
> that between flex - lexers?
> 


I must be stupid or forgetting the basics in flex:

Flex reads the entire input file, storing it in its internal buffers,
in one go at the beginning of scanning. So, even if the 2 TokenStream
wrappers around the 2 flex lexers are initialized with the same file
pointer (input file), it is the 1st lexer only that reads all the
input leaving nothing for the 2nd lexer (and thus the early EOF and
exit). Using ftell is useless as the position will be always the same
after the 1st lexer reads the input: mthe end of the input file :-)

Are you aware of any file-position tracking facilities in flex? This
way I could reposition the 2nd lexer when it starts reading ... I
cannot find any such thing in the flex docs. I know this is not a flex
list, but I was hoping someone has hit against this wall before (and
if you ever had to browse through the flex mailing list you'd
appreciate the fuss ... it has no searching facilities - unlike the
slick antlr list ;-)

Kind regards,

Elias


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Fri Nov  8 08:53:19 2002
From: cintyram at yahoo.com (Sriram Durbha)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] using parsetree
In-Reply-To: <1BFF5522-F28E-11D6-AC87-0030653DE0D6@jguru.com>
Message-ID: <20021108165319.67662.qmail@web40007.mail.yahoo.com>

hi ,
 how do i match a structure definition with initialisation inside it?

example;
 struct A 
 {
  struct B
   {
     int intinb = 9 ;  // default value
     struct C
     {
        int a[] = {1,2,3,4,5,6} ; // default value
        char b[] = "some array of chars" ; // default value
     }  ccc = DEFAULT ;  // make ccc have all default values
   } bb ; // instead of default values fill with null values 
 } aaa ; // same as for bb  


normally to mathc such a nested declaration i think stacks are used ..
so that a scope can be pushed and popped ;

but now since we have to also match the initialisation values and
assign default values too , we have to create a golden variable which
has all the default values ;
also my approach was to use the parse tree to see if the syntax of the
rhs of any initialisation is correct by using the parse tree; but now
that we have to store the values also and assign them to golden copies
so that all furthur instances of the variables can have default values
..
there are many interesting cases in this , but we get into the details
if  i can do atleast the basic recognition properly ..


so the question is 
a] how to use the parsetree during parse?
   and also how to decorate it with values during parse?
b] if you have a different approach or a suggestion to improve this
approach , please do shar eit ;

thanks
ram






 






__________________________________________________
Do you Yahoo!?
U2 on LAUNCH - Exclusive greatest hits videos
http://launch.yahoo.com/u2

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From feng898 at juno.com  Fri Nov  8 09:22:53 2002
From: feng898 at juno.com (young898)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] source-to-source transformation question
Message-ID: <aqgrtd+t3gd@eGroups.com>

I am learning ANTLR. I'd like to transform the following inputfile to 
the outputfile using ANTLR.

input: Foo.java
public class Foo {
	/** constants are in uppercase */
	public String CONST="aa";
	//public variable will be changed to private
	public int age;
}
output: 
public class Foo {
	/** constants are in uppercase */
	public final static String CONST="aa";
	//public variable will be changed to private
	private int i;
	public int getAge(){
		return age;
	}
	public void setAge(int a){
		age=a;
	}
}
Would anybody show me how to do it using ANTLR?
I know how to do it in Perl or java regular expression package.
I have read java.g and java.tree.g in the ANTLR examples section.  It 
might be possible to modify these files and achieve the result. Would 
anybody show me how to do it? 
Thank you!	

Jay	



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Fri Nov  8 12:16:36 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Two lexers, one parser
Message-ID: <aqh634+jiaa@eGroups.com>

I have two lexers with some common tokens.  I put the lexer into a CommonTokenTypes.txt file.  In lexer1 I do:

	importVocab = Common;
	exportVocab = Lexer1;

and similarly for lexer2.  In the parser I do:

	importVocab = Lexer1;
	importVocab = Lexer2;
	exportVocab = Parser;

However, if I look at the tokens in the *TokenTypes.java files for Lexer1 and Parser, the integer constants for tokens are different.  This would explain why the parser complains about an unexpected token: the numbers don't match so it thinks it's getting the wrong token.

What's the proper way to do this to make sure the integer constants match?

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Sun Nov 10 13:19:03 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Wrong Java code generated for semantic predicates?
Message-ID: <aqmig7+dn33@eGroups.com>

Given an earlier suggestion:

	FOO
		: BAR ( { cond }? BAZ | ) ;

The Java code generated looks for BAZ before it checks the semantic predicate.  I want it to check the semantic predicate immediately after it matches BAR.  The Java code seems wrong to me.

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hrvoje.nezic at envox-lab.hr  Mon Nov 11 00:34:11 2002
From: hrvoje.nezic at envox-lab.hr (Hrvoje Nezic)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Problem with a simple grammar
Message-ID: <001001c2895d$1c0dde70$1301a8c0@envox.local.hr>

Hi, I am relatively new to ANTLR. I have already successfully written
nontrivial grammars. However, I tried a very simple example
(which follows below), and it fails. It parses lines of the form:

    private static final ;

When I give it the input:

    private static final ;
    private static final ;

I get the following error:

    line 1:1: unexpected char: 'p'

Am I doing something wrong or is it a bug?

Thanks,
Hrvoje Nezic

options {

language = "CSharp";

}

class TestParser extends Parser;

test

:

( testLine )*

;

testLine 

:

"private" "static" "final" SEMICOLON

;

class TestLexer extends Lexer;

WS : 

( ' '

| '\t'

| '\n' { newline(); }

| '\r' 

)

{ _ttype = Token.SKIP; }

;

SEMICOLON

:

';'

;



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Nov 11 01:42:26 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Problem with a simple grammar
In-Reply-To: <001001c2895d$1c0dde70$1301a8c0@envox.local.hr>; from hrvoje.nezic@envox-lab.hr on Mon, Nov 11, 2002 at 09:34:11AM +0100
References: <001001c2895d$1c0dde70$1301a8c0@envox.local.hr>
Message-ID: <20021111104225.A26726@cs.utwente.nl>

On Mon, Nov 11, 2002 at 09:34:11AM +0100, Hrvoje Nezic wrote:
> I get the following error:
> 
>     line 1:1: unexpected char: 'p'

Your lexer has no rule to match identifiers.

ID options { testLiterals=true; } : 
	('a'..'z'|'A'..'Z'|'_')('a'..'z'|'A'..'Z'|'_'|DIGIT)*
;

If you have things in one file adding the above rule (or something similar)
will probably make things work. The testLiterals option lets antlr check
for matches in the literals table (e.g. the private etc.) In the global
options you can then turn testLiterals off since they will only get matched
in the ID rule.

HTH,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 'And this 'rebooting' business? Give it a good kicking, do you?' 'Oh, no,
  of course, we ... that is ... well, yes, in fact,' said Ponder. 'Adrian
    goes round the back and ... er ... prods it with his foot. But in a
     technical way,' he added. --- From: Hogfather by Terry Pratchett.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From user_sofia at biris.freeserve.co.uk  Mon Nov 11 01:55:41 2002
From: user_sofia at biris.freeserve.co.uk (elias_biris)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Re: 2 flex lexers 2 antlr parsers -> 1 simple solution?
In-Reply-To: <aqfln3+9vb5@eGroups.com>
Message-ID: <aqnuqu+3542@eGroups.com>


--- In antlr-interest@y..., "elias_biris" <user_sofia@b...> wrote:
> 
> Flex reads the entire input file, storing it in its internal buffers,
> in one go at the beginning of scanning. So, even if the 2 

--
I should have said here that, 'Flex reads as much of the input file as
its internal buffers permit ...' 
--

Apparently there are no easy ways to keep track of the input file
position in flex (apart from tracking the line number)... Things can
get quite hairy when there is preprocessing of the input files.

So, I think that there are 2 alternatives:

1- create a single lexer for the 2/or more languages and separate the
patterns using lexer states ---> Error prone and hard to maintain if
the languages are large/complicated. Also there is no easy way to
subclass a lexer specification in flex and override pattern
definitions (afaik)

2- use the antlr feature for lexer generation. This would provide a
nice clean separation and flexibility for future
extension/maintainance. However, I am working for a lexer that should
efficiently handle EXTREMELY LARGE input files (up to GBs in size), so
I am naturally concerned about the efficiency of the implementation of
the antlr structures/algorithms for scanning such big files. Another
issue is that the languages can have quite intricate patterns (to give
you a clue I am working on SPICE-dialects). I think a pilot prototype
is in order here .... if someone has done work on SPICE definitions
before please let me know.

Many thanks to all that answered to my query, and put up with my
ignorance ;-)

Elias



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pete.forman at westerngeco.com  Mon Nov 11 04:06:58 2002
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] How can I work around approximate LALL limitation?
Message-ID: <5.1.1.1.2.20021111114228.00aeb6b0@wgmail2.gatwick.eur.slb.com>

[apologies for previous partial message]

I've run into a problem which is exemplified thus.

class ExampleParser extends Parser;
options { k = 2;}

table: (INTEGER (SPACE INTEGER)* (SPACE)? NEWLINE)+;


ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
example.g:4: warning: nondeterminism upon
example.g:4:    k==1:SPACE
example.g:4:    k==2:INTEGER
example.g:4:    between alt 1 and exit branch of block

(The problem is the same with 2.7.2a4 (20021027-1))

Now I think that I understand what the problem is.  It is described
in http://www.jguru.com/faq/view.jsp?EID=264825.  What is not obvious
is how to work around it.  Discarding SPACE tokens is not an option in
the full grammar that I want to fix.

Both the following have no errors.
table: (INTEGER (SPACE INTEGER)* SPACE NEWLINE)+;
table: (INTEGER (SPACE INTEGER)* NEWLINE)+;

But this doesn't work.
table: (INTEGER (SPACE INTEGER)* (SPACE NEWLINE|NEWLINE))+;


-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From scott.case at ca.com  Mon Nov 11 06:40:42 2002
From: scott.case at ca.com (Case, Scott)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] How can I work around approximate LALL limitation?
Message-ID: <842DECC949168D4CADABE042DF46AECC012480A7@usilms24.ca.com>

Maybe try this -
table: 
	(INTEGER 
	  ( (SPACE INTEGER)=> SPACE INTEGER
	  | (SPACE NEWLINE)=> SPACE
	  )*
	NEWLINE)+
		;


/*
INTEGER NEWLINE
INTEGER SPACE NEWLINE
INTEGER SPACE INTEGER NEWLINE
INTEGER SPACE INTEGER SPACE NEWLINE
*/

- Scott

-----Original Message-----
From: Pete Forman [mailto:pete.forman@westerngeco.com]
Sent: Monday, November 11, 2002 7:07 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] How can I work around approximate LALL
limitation?


[apologies for previous partial message]

I've run into a problem which is exemplified thus.

class ExampleParser extends Parser;
options { k = 2;}

table: (INTEGER (SPACE INTEGER)* (SPACE)? NEWLINE)+;


ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
example.g:4: warning: nondeterminism upon
example.g:4:    k==1:SPACE
example.g:4:    k==2:INTEGER
example.g:4:    between alt 1 and exit branch of block

(The problem is the same with 2.7.2a4 (20021027-1))

Now I think that I understand what the problem is.  It is described
in http://www.jguru.com/faq/view.jsp?EID=264825.  What is not obvious
is how to work around it.  Discarding SPACE tokens is not an option in
the full grammar that I want to fix.

Both the following have no errors.
table: (INTEGER (SPACE INTEGER)* SPACE NEWLINE)+;
table: (INTEGER (SPACE INTEGER)* NEWLINE)+;

But this doesn't work.
table: (INTEGER (SPACE INTEGER)* (SPACE NEWLINE|NEWLINE))+;


-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From george_hastings at yahoo.com  Mon Nov 11 12:13:17 2002
From: george_hastings at yahoo.com (george_hastings)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Re: Grammar help question (iCalendar)
In-Reply-To: <aqeugq+ktoh@eGroups.com>
Message-ID: <aqp30t+n33k@eGroups.com>

I just began looking at creating an ANTLR-based parser for iCalendar.
I want to work with iCalendar as XML (xCal), but in order to be fully
useful, I need to bridge to iCal. Perhaps we can cooperate on the
development?

G.H.
george_hastings@yahoo.com 

--- In antlr-interest@y..., "Jin Choi" <jsc@a...> wrote:
> I'm attempting to write a grammar to parse iCalendar files
(rfc2445), and have 
> some questions on how best to handle a grammar issue.
> 
> There are many variants of lines of the form
> FIELD;param1=foo;param2="bar":field value
> 
> where the parameters are optional name value pairs, and the field
value is 
> typed, depending on the type of field you are trying to parse. Some
fields take 
> nearly arbitrary text, while others are limited to particular strings 
> ("VERSION:2.0") or are structured, such as timestamps. So, I have
something 
> like:
> 
> version : "VERSION" (params)* ':' "2.0" ;
> prodid : "PRODID" (params)* ':' TEXTVALUE ;
> params : ';' PARAMNAME '=' (PARAM_VALUE)? (',' PARAM_VALUE)* ;
> 
> So here's the problem: I obviously can't define a lexer rule for
TEXTVALUE, 
> since it would create all kinds of ambiguities. Perhaps I could use a 
> multiplexed lexer for this, but it seems like you can only switch
the lexer state 
> from within a lexer rule, and not from the parser, which is where
you know the 
> type of value you should be looking for.
> 
> I could just define each component as a single token and do all the
parsing in 
> the lexer, using protected rules. Are there any downsides to that?
> 
> How would you write this?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsc at alum.mit.edu  Mon Nov 11 14:15:00 2002
From: jsc at alum.mit.edu (Jin Choi)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Re: Grammar help question (iCalendar)
In-Reply-To: <aqp30t+n33k@eGroups.com>
Message-ID: <aqpa54+48et@eGroups.com>

It turns out to be remarkably difficult (for me, anyway) to figure out how to write 
a grammar specification for iCalendar in ANTLR (and in JavaCC, which I've 
also looked into).

As described below, iCalendar has a lot of places where you have something 
like

parameter: FIELDNAME lots_of_stuff TYPEDVALUE

where the value must correspond to a particular type based on the field name. 
You can't just switch off of what it looks like (20021111T183000 looks like a 
datetime stamp, but it might be just a funny looking free text field). You can do 
this by treating every value as plain text and dealing with it semantically 
afterwards, but then what's the point of using a parser.

I'm looking into hand-writing a recursive descent parser for iCalendar; please 
contact me if you make progress with ANTLR or have any suggestions.

On Monday, November 11, 2002, at 03:13 PM, george_hastings wrote:

I just began looking at creating an ANTLR-based parser for iCalendar.
I want to work with iCalendar as XML (xCal), but in order to be fully
useful, I need to bridge to iCal. Perhaps we can cooperate on the
development?

G.H.
george_hastings@yahoo.com

--- In antlr-interest@y..., "Jin Choi" <jsc@a...> wrote:
I'm attempting to write a grammar to parse iCalendar files
(rfc2445), and have
some questions on how best to handle a grammar issue.

There are many variants of lines of the form
FIELD;param1=foo;param2="bar":field value

where the parameters are optional name value pairs, and the field
value is
typed, depending on the type of field you are trying to parse. Some
fields take
nearly arbitrary text, while others are limited to particular strings
("VERSION:2.0") or are structured, such as timestamps. So, I have
something
like:

version : "VERSION" (params)* ':' "2.0" ;
prodid : "PRODID" (params)* ':' TEXTVALUE ;
params : ';' PARAMNAME '=' (PARAM_VALUE)? (',' PARAM_VALUE)* ;

So here's the problem: I obviously can't define a lexer rule for
TEXTVALUE,
since it would create all kinds of ambiguities. Perhaps I could use a
multiplexed lexer for this, but it seems like you can only switch
the lexer state
from within a lexer rule, and not from the parser, which is where
you know the
type of value you should be looking for.

I could just define each component as a single token and do all the
parsing in
the lexer, using protected rules. Are there any downsides to that?

How would you write this?




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Mon Nov 11 15:24:08 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Should dup() and dupXXXX() have shallow or deep clone semantics?
Message-ID: <aqpe6o+t5a0@eGroups.com>

Just wondering aloud about this. I mean should object references 
inside the AST nodes just be copied or should the objects be cloned 
as well?

What about object references to non-ANTLR types like String etc?

I presume each call to dup()/dupXXX() be considered as making a 
separate clone of the object/object-graph so all cloned objects and 
cloned referenced objects must be unique across calls.

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From richard.ney at aspect.com  Mon Nov 11 23:26:01 2002
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Tree-Parser Grammer Question
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECD85@sac1exch3.aspect.com>

I have battled this issue for two days now so I'm at a loss to how to solve
this problem. I created a initial parser for a basic SQL Select. One of my
key rules in the initial parser looks like this:

groupExpression
	: ("avg"^|"max"^|"min"^|"sum"^) OPEN_PAREN! (additiveExpression |
(("all" | "distinct") field_name)) CLOSE_PAREN! (IDENT^)
	| ("count"^ OPEN_PAREN! (("all" | "distinct")? field_name | STAR)
CLOSE_PAREN! (IDENT^)?)
	| additiveExpression (IDENT^)?
	;

The result of this rule is that it builds the tree with the final name of
the column always being to top-most root. I.E.

Select test, count(*), count(*) test from foo;

Results in a tree that looks like

select
	test

	count
		*

	test
		count
			*
from
	foo

Now in my tree parser I have a two rules that look like this:

selectColumn 
	: fieldName (groupExpression)?
	;
	
groupExpression
	: #("avg" mathExpression)
	{
	}
	| #("sum" mathExpression)
	{
	}
	| #("count" ("all" | "distinct")? (fieldName| STAR))
	{
	}
	| #("max" mathExpression)
	{
	}
	| #("min" mathExpression)
	{
	}
	;

These rules handle the 1st and 3rd cases in the select statement but not the
2nd where the count(*) doesn't have an alias. Does anyone have an idea how
to write something like

selectColumn
	: (fieldName)? (groupExpression)?
	;

that is a little less ambiguous?

-Richard

----------------------------------------------------------------------------
------------------------
Richard Ney	Aspect Communications
Principal Software Engineer
http://www.aspect.com <http://www.aspect.com>
Main:  408.325.2200
mailto:richard.ney@aspect.com <mailto:richard.ney@aspect.com>
SJ Office: 408.325.2464
    	Home Office: 916.797.9602
----------------------------------------------------------------------------
------------------------

The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction.
2. An object at rest will always be in the wrong place.
3. The energy required to change either of these states will always be more
than you wish to expend, but never so much as to make the task appear
prospectively impossible.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20021111/6c181b14/attachment.html
From klaren at cs.utwente.nl  Tue Nov 12 02:03:46 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Should dup() and dupXXXX() have shallow or deep clone semantics?
In-Reply-To: <aqpe6o+t5a0@eGroups.com>; from open.zone@virgin.net on Mon, Nov 11, 2002 at 11:24:08PM -0000
References: <aqpe6o+t5a0@eGroups.com>
Message-ID: <20021112110345.G26726@cs.utwente.nl>

On Mon, Nov 11, 2002 at 11:24:08PM -0000, micheal_jor wrote:
> Just wondering aloud about this. I mean should object references
> inside the AST nodes just be copied or should the objects be cloned
> as well?
>
> What about object references to non-ANTLR types like String etc?
>
> I presume each call to dup()/dupXXX() be considered as making a
> separate clone of the object/object-graph so all cloned objects and
> cloned referenced objects must be unique across calls.

C++ mode uses deep copies in these modes. Also string are deep copied. If
you don't clone you may get funny things. (loops, trees that modify by
'themselves' etc.)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pete.forman at westerngeco.com  Tue Nov 12 03:56:45 2002
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] How can I work around approximate LALL limitation?
In-Reply-To: <842DECC949168D4CADABE042DF46AECC012480A7@usilms24.ca.com>
Message-ID: <5.1.1.1.2.20021112114640.03a17ad0@wgmail2.gatwick.eur.slb.com>

At 2002-11-11 09:40 -0500, Case, Scott wrote:
>Maybe try this -
>table:
>         (INTEGER
>           ( (SPACE INTEGER)=> SPACE INTEGER
>           | (SPACE NEWLINE)=> SPACE
>           )*
>         NEWLINE)+
>                 ;

Yes, that works thank you.

One of the syntactic predicates can be removed.

class ExampleParser extends Parser;
options { k = 2;}

table
   : ( INTEGER
       ( (SPACE NEWLINE) => SPACE
       | SPACE INTEGER
       )*
       NEWLINE
     )+
   ;

[The original desired syntax was
  table: (INTEGER (SPACE INTEGER)* (SPACE)? NEWLINE)+;]


-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jbb at acm.org  Tue Nov 12 08:10:26 2002
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] How can I work around approximate LALL limitation?
In-Reply-To: <5.1.1.1.2.20021112114640.03a17ad0@wgmail2.gatwick.eur.slb.com>
	(message from Pete Forman on Tue, 12 Nov 2002 11:56:45 +0000)
References: <5.1.1.1.2.20021112114640.03a17ad0@wgmail2.gatwick.eur.slb.com>
Message-ID: <E18BdcQ-0000jp-00@gecko.home.org>

or maybe this (no predicate, no look ahead)...

class ExampleParser extends Parser;
table: (INTEGER (table_helper)? NEWLINE)+;
table_helper: SPACE ( INTEGER table_helper )?;

[The original desired syntax was
  table: (INTEGER (SPACE INTEGER)* (SPACE)? NEWLINE)+;]

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Nov 12 08:12:05 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Re: Should dup() and dupXXXX() have shallow or deep clone semantics?
In-Reply-To: <20021112110345.G26726@cs.utwente.nl>
Message-ID: <aqr98l+as6g@eGroups.com>

--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:
> On Mon, Nov 11, 2002 at 11:24:08PM -0000, micheal_jor wrote:
> > Just wondering aloud about this. I mean should object references
> > inside the AST nodes just be copied or should the objects be 
cloned
> > as well?
> >
> > What about object references to non-ANTLR types like String etc?
> >
> > I presume each call to dup()/dupXXX() be considered as making a
> > separate clone of the object/object-graph so all cloned objects 
and
> > cloned referenced objects must be unique across calls.
> 
> C++ mode uses deep copies in these modes. Also string are deep 
copied. If
> you don't clone you may get funny things. (loops, trees that modify 
by
> 'themselves' etc.)

OK. I'll have a quick look at how C++ does this. Was this feature 
already present in 2.7.2a2 or should I be looking at 2.7.2a4 only?

I guess I was worried about situations such as:

1. the nodes have direct or indirect links (via object reference 
chains) to really big object graphs such as the symbol table.

2. the nodes have bidirectional links - i.e. parent<->child and 
sibling1<->sibling2..<->..siblingN - that will effectively turn every 
dup()/dupXXX() into a full tree copy.

It's a worry that the use of these methods will incur a severe 
memory/space cost essentially. A deep clone would always deep copy 
all such linked objects too. 

>>From our initial investigations, it seems that implementing deep 
cloning semantics will have to be an all or nothing proposition in C# 
else the level of support needed in *all* classes becomes a real 
headache.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Nov 12 08:25:45 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Tree-Parser Grammer Question
Message-ID: <170826586F3BD511910D0200C110AAA8032B4EBC@memail03.bco-home.com>

It is kind of weird to have optional matches like (IDENT^)? promoted to the
root.  What is your rationale for this?  Your tree rule would look like

selectColumn: #(IDENT groupExpression)
			| groupExpression
	;

Monty

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com]
Sent: Monday, November 11, 2002 11:26 PM
To: 'antlr-interest@yahoogroups.com'
Subject: [antlr-interest] Tree-Parser Grammer Question


I have battled this issue for two days now so I'm at a loss to how to solve
this problem. I created a initial parser for a basic SQL Select. One of my
key rules in the initial parser looks like this:
groupExpression 
        : ("avg"^|"max"^|"min"^|"sum"^) OPEN_PAREN! (additiveExpression |
(("all" | "distinct") field_name)) CLOSE_PAREN! (IDENT^)
        | ("count"^ OPEN_PAREN! (("all" | "distinct")? field_name | STAR)
CLOSE_PAREN! (IDENT^)?) 
        | additiveExpression (IDENT^)? 
        ; 
The result of this rule is that it builds the tree with the final name of
the column always being to top-most root. I.E.
Select test, count(*), count(*) test from foo; 
Results in a tree that looks like 
select 
        test 
        count 
                * 
        test 
                count 
                        * 
from 
        foo 
Now in my tree parser I have a two rules that look like this: 
selectColumn 
        : fieldName (groupExpression)? 
        ; 
        
groupExpression 
        : #("avg" mathExpression) 
        { 
        } 
        | #("sum" mathExpression) 
        { 
        } 
        | #("count" ("all" | "distinct")? (fieldName| STAR)) 
        { 
        } 
        | #("max" mathExpression) 
        { 
        } 
        | #("min" mathExpression) 
        { 
        } 
        ; 
These rules handle the 1st and 3rd cases in the select statement but not the
2nd where the count(*) doesn't have an alias. Does anyone have an idea how
to write something like
selectColumn 
        : (fieldName)? (groupExpression)? 
        ; 
that is a little less ambiguous? 
-Richard 
----------------------------------------------------------------------------
------------------------ 
Richard Ney     Aspect Communications 
Principal Software Engineer 
http://www.aspect.com                           Main:  408.325.2200 
mailto:richard.ney@aspect.com                   SJ Office: 408.325.2464 
        Home Office: 916.797.9602 
----------------------------------------------------------------------------
------------------------ 
The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction.
2. An object at rest will always be in the wrong place.
3. The energy required to change either of these states will always be more
than you wish to expend, but never so much as to make the task appear
prospectively impossible.


Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From richard.ney at aspect.com  Tue Nov 12 08:50:46 2002
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Tree-Parser Grammer Question
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECD87@sac1exch3.aspect.com>

The rational for this was to have the final output name of each column in
the select statement to always be the root. Now based on SQL92 that can be
the column name, an alias, or the group expression. Now I was starting to
look at making the initial parser always add the alias in to the tree.
Anyone have an example of a conditional rule in the parser that can add
stuff into the tree conditionally?

-Richard

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Tuesday, November 12, 2002 8:26 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


It is kind of weird to have optional matches like (IDENT^)? promoted to the
root.  What is your rationale for this?  Your tree rule would look like

selectColumn: #(IDENT groupExpression)
			| groupExpression
	;

Monty

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com]
Sent: Monday, November 11, 2002 11:26 PM
To: 'antlr-interest@yahoogroups.com'
Subject: [antlr-interest] Tree-Parser Grammer Question


I have battled this issue for two days now so I'm at a loss to how to solve
this problem. I created a initial parser for a basic SQL Select. One of my
key rules in the initial parser looks like this: groupExpression 
        : ("avg"^|"max"^|"min"^|"sum"^) OPEN_PAREN! (additiveExpression |
(("all" | "distinct") field_name)) CLOSE_PAREN! (IDENT^)
        | ("count"^ OPEN_PAREN! (("all" | "distinct")? field_name | STAR)
CLOSE_PAREN! (IDENT^)?) 
        | additiveExpression (IDENT^)? 
        ; 
The result of this rule is that it builds the tree with the final name of
the column always being to top-most root. I.E. Select test, count(*),
count(*) test from foo; 
Results in a tree that looks like 
select 
        test 
        count 
                * 
        test 
                count 
                        * 
from 
        foo 
Now in my tree parser I have a two rules that look like this: 
selectColumn 
        : fieldName (groupExpression)? 
        ; 
        
groupExpression 
        : #("avg" mathExpression) 
        { 
        } 
        | #("sum" mathExpression) 
        { 
        } 
        | #("count" ("all" | "distinct")? (fieldName| STAR)) 
        { 
        } 
        | #("max" mathExpression) 
        { 
        } 
        | #("min" mathExpression) 
        { 
        } 
        ; 
These rules handle the 1st and 3rd cases in the select statement but not the
2nd where the count(*) doesn't have an alias. Does anyone have an idea how
to write something like selectColumn 
        : (fieldName)? (groupExpression)? 
        ; 
that is a little less ambiguous? 
-Richard 
----------------------------------------------------------------------------
------------------------ 
Richard Ney     Aspect Communications 
Principal Software Engineer 
http://www.aspect.com                           Main:  408.325.2200 
mailto:richard.ney@aspect.com                   SJ Office: 408.325.2464 
        Home Office: 916.797.9602 
----------------------------------------------------------------------------
------------------------ 
The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction. 2. An
object at rest will always be in the wrong place. 3. The energy required to
change either of these states will always be more than you wish to expend,
but never so much as to make the task appear prospectively impossible.


Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Nov 12 08:55:56 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Re: Should dup() and dupXXXX() have shallow or deep clone semantics?
In-Reply-To: <aqr98l+as6g@eGroups.com>; from open.zone@virgin.net on Tue, Nov 12, 2002 at 04:12:05PM -0000
References: <20021112110345.G26726@cs.utwente.nl> <aqr98l+as6g@eGroups.com>
Message-ID: <20021112175556.J26726@cs.utwente.nl>

Hi,

On Tue, Nov 12, 2002 at 04:12:05PM -0000, micheal_jor wrote:
> OK. I'll have a quick look at how C++ does this. Was this feature
> already present in 2.7.2a2 or should I be looking at 2.7.2a4 only?

2.7.2a2 should have it.. Maybe a small bugfix here and there not sure.

> 1. the nodes have direct or indirect links (via object reference
> chains) to really big object graphs such as the symbol table.

In that case the user would have to supply a good copy constructor that
does the right thing. The dupXXX's in C++ just call the clone method of a
AST and that one generally uses a copy constructor.

> 2. the nodes have bidirectional links - i.e. parent<->child and
> sibling1<->sibling2..<->..siblingN - that will effectively turn every
> dup()/dupXXX() into a full tree copy.

Hmmm standard antlr has no back links. And probably the dup algorithms
can't handle those properly. And I don't know what the use is of dupping to
a level higher than the node you are starting the duplicate with. Generally
when you dup a bit I'd suspect you're only interested in the subtree.

Anyway on a different line of thought the dup methods IMHO don't belong in
the factory anyway. No part of antlr's generated code uses them as well
(AFAIK). It's a bunch of convenience functions. The combination of 2.7.0/1,
dupXXX and heterogeneous ASTs was even pretty much broken anyway (C++ maybe
even other codegen).

> It's a worry that the use of these methods will incur a severe
> memory/space cost essentially. A deep clone would always deep copy
> all such linked objects too.

That's one of the risks of duplicating stuff. Then again ANTLR generated
code doesn't use the dup methods. And it's probably not a good idea to
invest a lot of time in making them 100% idiot proof, they should be
AST/BaseAST/CommonAST proof (well at least that's my view of them), then
again it's not my time ;)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos often breeds life, when order breeds habit.
  --- Henry B. Adams, The Education of Henry Adams


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Nov 12 09:13:20 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Tree-Parser Grammer Question
Message-ID: <170826586F3BD511910D0200C110AAA8032B4EBF@memail03.bco-home.com>

Typically a root is chosen for its structure, not its content.  For instance
a simplistic variable declaration in C would look like #(NDeclarator type ID
(expr)?);  The NDeclarator is an imaginary type, which you might consider
using.  Again I ask why is it important to have the name be the root?
Typically symbols are stored in a symbol table so you can look them up by
scope and and name and that will point you to the right tree.  

What do you envision doing with the tree that makes it important to have the
name first?

Note that your structure for the tree with IDENT as an optional root muddles
things up.  You don't know from the start which of the tree alternatives you
are looking at.  This will slow down your tree traversal as well.  Some
people argue that tree grammars should avoid optional closures totally.
Take for instance a for loop.  In C any of the three expressions are
optional, but for my tree I don't want to decide based on content, so I
added an imaginary NEmptyExpression alternative to my expr rule.  So now a
missing expr in a for loop is forced in as an NEmptyExpression.  Imagine how
to handle the tree grammar if I left those three exprs optional.  It's not
pretty.  My simple tree grammar for "for" is this:

               #( "for"
                expr expr expr
                statement
                )

OK, let's get ready for round two!

Monty

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com]
Sent: Tuesday, November 12, 2002 8:51 AM
To: 'antlr-interest@yahoogroups.com'
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


The rational for this was to have the final output name of each column in
the select statement to always be the root. Now based on SQL92 that can be
the column name, an alias, or the group expression. Now I was starting to
look at making the initial parser always add the alias in to the tree.
Anyone have an example of a conditional rule in the parser that can add
stuff into the tree conditionally?

-Richard

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Tuesday, November 12, 2002 8:26 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


It is kind of weird to have optional matches like (IDENT^)? promoted to the
root.  What is your rationale for this?  Your tree rule would look like

selectColumn: #(IDENT groupExpression)
			| groupExpression
	;

Monty

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com]
Sent: Monday, November 11, 2002 11:26 PM
To: 'antlr-interest@yahoogroups.com'
Subject: [antlr-interest] Tree-Parser Grammer Question


I have battled this issue for two days now so I'm at a loss to how to solve
this problem. I created a initial parser for a basic SQL Select. One of my
key rules in the initial parser looks like this: groupExpression 
        : ("avg"^|"max"^|"min"^|"sum"^) OPEN_PAREN! (additiveExpression |
(("all" | "distinct") field_name)) CLOSE_PAREN! (IDENT^)
        | ("count"^ OPEN_PAREN! (("all" | "distinct")? field_name | STAR)
CLOSE_PAREN! (IDENT^)?) 
        | additiveExpression (IDENT^)? 
        ; 
The result of this rule is that it builds the tree with the final name of
the column always being to top-most root. I.E. Select test, count(*),
count(*) test from foo; 
Results in a tree that looks like 
select 
        test 
        count 
                * 
        test 
                count 
                        * 
from 
        foo 
Now in my tree parser I have a two rules that look like this: 
selectColumn 
        : fieldName (groupExpression)? 
        ; 
        
groupExpression 
        : #("avg" mathExpression) 
        { 
        } 
        | #("sum" mathExpression) 
        { 
        } 
        | #("count" ("all" | "distinct")? (fieldName| STAR)) 
        { 
        } 
        | #("max" mathExpression) 
        { 
        } 
        | #("min" mathExpression) 
        { 
        } 
        ; 
These rules handle the 1st and 3rd cases in the select statement but not the
2nd where the count(*) doesn't have an alias. Does anyone have an idea how
to write something like selectColumn 
        : (fieldName)? (groupExpression)? 
        ; 
that is a little less ambiguous? 
-Richard 
----------------------------------------------------------------------------
------------------------ 
Richard Ney     Aspect Communications 
Principal Software Engineer 
http://www.aspect.com                           Main:  408.325.2200 
mailto:richard.ney@aspect.com                   SJ Office: 408.325.2464 
        Home Office: 916.797.9602 
----------------------------------------------------------------------------
------------------------ 
The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction. 2. An
object at rest will always be in the wrong place. 3. The energy required to
change either of these states will always be more than you wish to expend,
but never so much as to make the task appear prospectively impossible.


Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From richard.ney at aspect.com  Tue Nov 12 09:35:32 2002
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Tree-Parser Grammer Question
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECD88@sac1exch3.aspect.com>

Technically it isn't a must to have the final column name as the root, to me
that was just the easiest way to ensure it was in the same location in the
tree each time. Then when I traverse the tree with the tree grammar I can
then do lookups against stored meta-data and translate the underlying
information about that column into a new column statement in a new select
statement. Basically translating one SQL select into another. 

Now your NEmptyExpression rule looks like an option since the main place
where my tree grammar goes ambigious is due to the fact that a field name is
also an IDENT. If that alias is missing I can place the empty expression, as
I mentioned add an alias parameter to columns that don't have an alias. I
assume you are applying the empty in the initial parser so you get a TOKEN
to specify in the tree grammar. Do you know if any of the examples show the
implementation of a forced node or empty expression?

-Richard

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Tuesday, November 12, 2002 9:13 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


Typically a root is chosen for its structure, not its content.  For instance
a simplistic variable declaration in C would look like #(NDeclarator type ID
(expr)?);  The NDeclarator is an imaginary type, which you might consider
using.  Again I ask why is it important to have the name be the root?
Typically symbols are stored in a symbol table so you can look them up by
scope and and name and that will point you to the right tree.  

What do you envision doing with the tree that makes it important to have the
name first?

Note that your structure for the tree with IDENT as an optional root muddles
things up.  You don't know from the start which of the tree alternatives you
are looking at.  This will slow down your tree traversal as well.  Some
people argue that tree grammars should avoid optional closures totally. Take
for instance a for loop.  In C any of the three expressions are optional,
but for my tree I don't want to decide based on content, so I added an
imaginary NEmptyExpression alternative to my expr rule.  So now a missing
expr in a for loop is forced in as an NEmptyExpression.  Imagine how to
handle the tree grammar if I left those three exprs optional.  It's not
pretty.  My simple tree grammar for "for" is this:

               #( "for"
                expr expr expr
                statement
                )

OK, let's get ready for round two!

Monty

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com]
Sent: Tuesday, November 12, 2002 8:51 AM
To: 'antlr-interest@yahoogroups.com'
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


The rational for this was to have the final output name of each column in
the select statement to always be the root. Now based on SQL92 that can be
the column name, an alias, or the group expression. Now I was starting to
look at making the initial parser always add the alias in to the tree.
Anyone have an example of a conditional rule in the parser that can add
stuff into the tree conditionally?

-Richard

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Tuesday, November 12, 2002 8:26 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


It is kind of weird to have optional matches like (IDENT^)? promoted to the
root.  What is your rationale for this?  Your tree rule would look like

selectColumn: #(IDENT groupExpression)
			| groupExpression
	;

Monty

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com]
Sent: Monday, November 11, 2002 11:26 PM
To: 'antlr-interest@yahoogroups.com'
Subject: [antlr-interest] Tree-Parser Grammer Question


I have battled this issue for two days now so I'm at a loss to how to solve
this problem. I created a initial parser for a basic SQL Select. One of my
key rules in the initial parser looks like this: groupExpression 
        : ("avg"^|"max"^|"min"^|"sum"^) OPEN_PAREN! (additiveExpression |
(("all" | "distinct") field_name)) CLOSE_PAREN! (IDENT^)
        | ("count"^ OPEN_PAREN! (("all" | "distinct")? field_name | STAR)
CLOSE_PAREN! (IDENT^)?) 
        | additiveExpression (IDENT^)? 
        ; 
The result of this rule is that it builds the tree with the final name of
the column always being to top-most root. I.E. Select test, count(*),
count(*) test from foo; 
Results in a tree that looks like 
select 
        test 
        count 
                * 
        test 
                count 
                        * 
from 
        foo 
Now in my tree parser I have a two rules that look like this: 
selectColumn 
        : fieldName (groupExpression)? 
        ; 
        
groupExpression 
        : #("avg" mathExpression) 
        { 
        } 
        | #("sum" mathExpression) 
        { 
        } 
        | #("count" ("all" | "distinct")? (fieldName| STAR)) 
        { 
        } 
        | #("max" mathExpression) 
        { 
        } 
        | #("min" mathExpression) 
        { 
        } 
        ; 
These rules handle the 1st and 3rd cases in the select statement but not the
2nd where the count(*) doesn't have an alias. Does anyone have an idea how
to write something like selectColumn 
        : (fieldName)? (groupExpression)? 
        ; 
that is a little less ambiguous? 
-Richard 
----------------------------------------------------------------------------
------------------------ 
Richard Ney     Aspect Communications 
Principal Software Engineer 
http://www.aspect.com                           Main:  408.325.2200 
mailto:richard.ney@aspect.com                   SJ Office: 408.325.2464 
        Home Office: 916.797.9602 
----------------------------------------------------------------------------
------------------------ 
The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction. 2. An
object at rest will always be in the wrong place. 3. The energy required to
change either of these states will always be more than you wish to expend,
but never so much as to make the task appear prospectively impossible.


Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sunshine at public.kherson.ua  Tue Nov 12 10:21:18 2002
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Tree-Parser Grammer Question
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4EBF@memail03.bco-home.com>
Message-ID: <B9F7133E.1B20F%sunshine@public.kherson.ua>

on 11/12/02 7:13 PM, mzukowski@yci.com at mzukowski@yci.com wrote:

> Note that your structure for the tree with IDENT as an optional root muddles
> things up.  You don't know from the start which of the tree alternatives you
> are looking at.  This will slow down your tree traversal as well.  Some
> people argue that tree grammars should avoid optional closures totally.
> Take for instance a for loop.  In C any of the three expressions are
> optional, but for my tree I don't want to decide based on content, so I
> added an imaginary NEmptyExpression alternative to my expr rule.  So now a
> missing expr in a for loop is forced in as an NEmptyExpression.  Imagine how
> to handle the tree grammar if I left those three exprs optional.  It's not
> pretty.  My simple tree grammar for "for" is this:
> 
>              #( "for"
>               expr expr expr
>               statement
>               )
> 
> OK, let's get ready for round two!

Hi Monty,

I always with great interest read your letters.
You are cool expert on parsing comparing e.g to me. :-)

I wonder

1) if exists any list of such TIPs as you describe above ?

2) if exists any example grammars written by you for public ?

3) May be you can send me/us some grammars that are not secret?
Especially interesting
    -- how you put symbols into symbol table.
    -- what C/c++ classes of symbol table you use
    -- tree parser that *and* its C++ actions.

ANTLR examples have few examples with Tree grammar,
But they do not have trees.

It is cool to see at least one tree grammar of real life project.
Let it cannot be compiled. Simply to see ...

-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list
send a letter to valentina-on@lists.macserve.net
-------------------------------------------------------------


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Nov 12 13:29:28 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Tree-Parser Grammer Question
Message-ID: <170826586F3BD511910D0200C110AAA8032B4EC1@memail03.bco-home.com>

The GCC C grammar has plenty of examples of imaginary nodes
http://www.codetransform.com/gcc.html.  I imagine the Java grammar does too.

> 1) if exists any list of such TIPs as you describe above ?
Not that I know of.  I'm not sure if there was sucha  topic in the faq or
not.

> 2) if exists any example grammars written by you for public ?
http://www.codetransform.com/gcc.html is a complete lexer/parser/tree
grammar/tree emitter.

> 3) May be you can send me/us some grammars that are not secret?
> Especially interesting
>    -- how you put symbols into symbol table.
See the GCC grammar.

>    -- what C/c++ classes of symbol table you use
It is in Java, not C++, but you should get the idea.

>    -- tree parser that *and* its C++ actions.
Unfortunately the tree parser in the above distribution is empty.  A few
months ago I posted a simple transformation using it to swap the if/else
statements.  When Aspect C is done it will be an excellent source of example
transformations.

Monty

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com]
Sent: Tuesday, November 12, 2002 9:36 AM
To: 'antlr-interest@yahoogroups.com'
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


Technically it isn't a must to have the final column name as the root, to me
that was just the easiest way to ensure it was in the same location in the
tree each time. Then when I traverse the tree with the tree grammar I can
then do lookups against stored meta-data and translate the underlying
information about that column into a new column statement in a new select
statement. Basically translating one SQL select into another. 

Now your NEmptyExpression rule looks like an option since the main place
where my tree grammar goes ambigious is due to the fact that a field name is
also an IDENT. If that alias is missing I can place the empty expression, as
I mentioned add an alias parameter to columns that don't have an alias. I
assume you are applying the empty in the initial parser so you get a TOKEN
to specify in the tree grammar. Do you know if any of the examples show the
implementation of a forced node or empty expression?

-Richard

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Tuesday, November 12, 2002 9:13 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


Typically a root is chosen for its structure, not its content.  For instance
a simplistic variable declaration in C would look like #(NDeclarator type ID
(expr)?);  The NDeclarator is an imaginary type, which you might consider
using.  Again I ask why is it important to have the name be the root?
Typically symbols are stored in a symbol table so you can look them up by
scope and and name and that will point you to the right tree.  

What do you envision doing with the tree that makes it important to have the
name first?

Note that your structure for the tree with IDENT as an optional root muddles
things up.  You don't know from the start which of the tree alternatives you
are looking at.  This will slow down your tree traversal as well.  Some
people argue that tree grammars should avoid optional closures totally. Take
for instance a for loop.  In C any of the three expressions are optional,
but for my tree I don't want to decide based on content, so I added an
imaginary NEmptyExpression alternative to my expr rule.  So now a missing
expr in a for loop is forced in as an NEmptyExpression.  Imagine how to
handle the tree grammar if I left those three exprs optional.  It's not
pretty.  My simple tree grammar for "for" is this:

               #( "for"
                expr expr expr
                statement
                )

OK, let's get ready for round two!

Monty

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com]
Sent: Tuesday, November 12, 2002 8:51 AM
To: 'antlr-interest@yahoogroups.com'
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


The rational for this was to have the final output name of each column in
the select statement to always be the root. Now based on SQL92 that can be
the column name, an alias, or the group expression. Now I was starting to
look at making the initial parser always add the alias in to the tree.
Anyone have an example of a conditional rule in the parser that can add
stuff into the tree conditionally?

-Richard

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Tuesday, November 12, 2002 8:26 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


It is kind of weird to have optional matches like (IDENT^)? promoted to the
root.  What is your rationale for this?  Your tree rule would look like

selectColumn: #(IDENT groupExpression)
			| groupExpression
	;

Monty

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com]
Sent: Monday, November 11, 2002 11:26 PM
To: 'antlr-interest@yahoogroups.com'
Subject: [antlr-interest] Tree-Parser Grammer Question


I have battled this issue for two days now so I'm at a loss to how to solve
this problem. I created a initial parser for a basic SQL Select. One of my
key rules in the initial parser looks like this: groupExpression 
        : ("avg"^|"max"^|"min"^|"sum"^) OPEN_PAREN! (additiveExpression |
(("all" | "distinct") field_name)) CLOSE_PAREN! (IDENT^)
        | ("count"^ OPEN_PAREN! (("all" | "distinct")? field_name | STAR)
CLOSE_PAREN! (IDENT^)?) 
        | additiveExpression (IDENT^)? 
        ; 
The result of this rule is that it builds the tree with the final name of
the column always being to top-most root. I.E. Select test, count(*),
count(*) test from foo; 
Results in a tree that looks like 
select 
        test 
        count 
                * 
        test 
                count 
                        * 
from 
        foo 
Now in my tree parser I have a two rules that look like this: 
selectColumn 
        : fieldName (groupExpression)? 
        ; 
        
groupExpression 
        : #("avg" mathExpression) 
        { 
        } 
        | #("sum" mathExpression) 
        { 
        } 
        | #("count" ("all" | "distinct")? (fieldName| STAR)) 
        { 
        } 
        | #("max" mathExpression) 
        { 
        } 
        | #("min" mathExpression) 
        { 
        } 
        ; 
These rules handle the 1st and 3rd cases in the select statement but not the
2nd where the count(*) doesn't have an alias. Does anyone have an idea how
to write something like selectColumn 
        : (fieldName)? (groupExpression)? 
        ; 
that is a little less ambiguous? 
-Richard 
----------------------------------------------------------------------------
------------------------ 
Richard Ney     Aspect Communications 
Principal Software Engineer 
http://www.aspect.com                           Main:  408.325.2200 
mailto:richard.ney@aspect.com                   SJ Office: 408.325.2464 
        Home Office: 916.797.9602 
----------------------------------------------------------------------------
------------------------ 
The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction. 2. An
object at rest will always be in the wrong place. 3. The energy required to
change either of these states will always be more than you wish to expend,
but never so much as to make the task appear prospectively impossible.


Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Tue Nov 12 13:30:11 2002
From: cintyram at yahoo.com (Sriram Durbha)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Tree-Parser Grammer Question
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4EBF@memail03.bco-home.com>
Message-ID: <20021112213011.97664.qmail@web40019.mail.yahoo.com>

hi monty,
 in one of the applicaitons that i am writing [a translator] ,
part of the translation can be syntax directed; [ that is ..  target
code canbe generated directly from the parse action ;]

how ever important ones need ast;

now i am in a difficult position;
1.] the source language does not have a special delimiter ;
2. most of the constructs are optional ;
now i am not able to parse the if else construct;
but would like to know if there are any precautions i have to take
specially so that i can build a good and suitable tree ..

3.
 also i am trying to represent the translation strategy in a neutral
form , so that i can apply representations in that form to different
sets of sources and targets; Has any work been done in this area?

cheers
ram




--- mzukowski@yci.com wrote:
> Typically a root is chosen for its structure, not its content.  For
> instance
> a simplistic variable declaration in C would look like #(NDeclarator
> type ID
> (expr)?);  The NDeclarator is an imaginary type, which you might
> consider
> using.  Again I ask why is it important to have the name be the root?
> Typically symbols are stored in a symbol table so you can look them
> up by
> scope and and name and that will point you to the right tree.  
> 
> What do you envision doing with the tree that makes it important to
> have the
> name first?
> 
> Note that your structure for the tree with IDENT as an optional root
> muddles
> things up.  You don't know from the start which of the tree
> alternatives you
> are looking at.  This will slow down your tree traversal as well. 
> Some
> people argue that tree grammars should avoid optional closures
> totally.
> Take for instance a for loop.  In C any of the three expressions are
> optional, but for my tree I don't want to decide based on content, so
> I
> added an imaginary NEmptyExpression alternative to my expr rule.  So
> now a
> missing expr in a for loop is forced in as an NEmptyExpression. 
> Imagine how
> to handle the tree grammar if I left those three exprs optional. 
> It's not
> pretty.  My simple tree grammar for "for" is this:
> 
>                #( "for"
>                 expr expr expr
>                 statement
>                 )
> 
> OK, let's get ready for round two!
> 
> Monty
> 
> -----Original Message-----
> From: Ney, Richard [mailto:richard.ney@aspect.com]
> Sent: Tuesday, November 12, 2002 8:51 AM
> To: 'antlr-interest@yahoogroups.com'
> Subject: RE: [antlr-interest] Tree-Parser Grammer Question
> 
> 
> The rational for this was to have the final output name of each
> column in
> the select statement to always be the root. Now based on SQL92 that
> can be
> the column name, an alias, or the group expression. Now I was
> starting to
> look at making the initial parser always add the alias in to the
> tree.
> Anyone have an example of a conditional rule in the parser that can
> add
> stuff into the tree conditionally?
> 
> -Richard
> 
> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> Sent: Tuesday, November 12, 2002 8:26 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Tree-Parser Grammer Question
> 
> 
> It is kind of weird to have optional matches like (IDENT^)? promoted
> to the
> root.  What is your rationale for this?  Your tree rule would look
> like
> 
> selectColumn: #(IDENT groupExpression)
> 			| groupExpression
> 	;
> 
> Monty
> 
> -----Original Message-----
> From: Ney, Richard [mailto:richard.ney@aspect.com]
> Sent: Monday, November 11, 2002 11:26 PM
> To: 'antlr-interest@yahoogroups.com'
> Subject: [antlr-interest] Tree-Parser Grammer Question
> 
> 
> I have battled this issue for two days now so I'm at a loss to how to
> solve
> this problem. I created a initial parser for a basic SQL Select. One
> of my
> key rules in the initial parser looks like this: groupExpression 
>         : ("avg"^|"max"^|"min"^|"sum"^) OPEN_PAREN!
> (additiveExpression |
> (("all" | "distinct") field_name)) CLOSE_PAREN! (IDENT^)
>         | ("count"^ OPEN_PAREN! (("all" | "distinct")? field_name |
> STAR)
> CLOSE_PAREN! (IDENT^)?) 
>         | additiveExpression (IDENT^)? 
>         ; 
> The result of this rule is that it builds the tree with the final
> name of
> the column always being to top-most root. I.E. Select test, count(*),
> count(*) test from foo; 
> Results in a tree that looks like 
> select 
>         test 
>         count 
>                 * 
>         test 
>                 count 
>                         * 
> from 
>         foo 
> Now in my tree parser I have a two rules that look like this: 
> selectColumn 
>         : fieldName (groupExpression)? 
>         ; 
>         
> groupExpression 
>         : #("avg" mathExpression) 
>         { 
>         } 
>         | #("sum" mathExpression) 
>         { 
>         } 
>         | #("count" ("all" | "distinct")? (fieldName| STAR)) 
>         { 
>         } 
>         | #("max" mathExpression) 
>         { 
>         } 
>         | #("min" mathExpression) 
>         { 
>         } 
>         ; 
> These rules handle the 1st and 3rd cases in the select statement but
> not the
> 2nd where the count(*) doesn't have an alias. Does anyone have an
> idea how
> to write something like selectColumn 
>         : (fieldName)? (groupExpression)? 
>         ; 
> that is a little less ambiguous? 
> -Richard 
>
----------------------------------------------------------------------------
> ------------------------ 
> Richard Ney     Aspect Communications 
> Principal Software Engineer 
> http://www.aspect.com                           Main:  408.325.2200 
> mailto:richard.ney@aspect.com                   SJ Office:
> 408.325.2464 
>         Home Office: 916.797.9602 
>
----------------------------------------------------------------------------
> ------------------------ 
> The Three Laws of Infernal Dynamics:
> 1. An object in motion will always be headed in the wrong direction.
> 2. An
> object at rest will always be in the wrong place. 3. The energy
> required to
> change either of these states will always be more than you wish to
> expend,
> but never so much as to make the task appear prospectively
> impossible.
> 
> 
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
U2 on LAUNCH - Exclusive greatest hits videos
http://launch.yahoo.com/u2

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Tue Nov 12 13:32:30 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Re: Should dup() and dupXXXX() have shallow or deep clone semantics?
In-Reply-To: <20021112175556.J26726@cs.utwente.nl>
Message-ID: <aqrs1e+q3rp@eGroups.com>


Ric--

My tree rewrite support does use the dup methods, and that will get 
folded in at some point.  They are needed--in some tree grammars, it 
is desirable to recognize anything (".") and then do a dupTree for the 
output copy--and they would otherwise need to be AST methods.

Micheal--

Backward links in a tree (or cross-links, for that matter) are 
incompatible with tree-rewriting and would be bad news for any 
tree-transformaing tree grammar.  Setting them would have to be 
deferred until the final syntax tree is constructed or the developer 
would have to add some significant machinery to deal with them, so 
this is probably a non-issue.

In a implicitly garbage-collected language, the "dup" methods only 
need to support deep cloning of the AST structure (right and down 
fields), I believe.  Any other pointers can probably be 
inherited--they are not part of the tree structure and would be passed 
unchanged through syntax tree transformation unless explicitly 
modified in actions.

I suspect that Ric's reason for cloning other fields in ASTs is 
because of the explicit garbage collection problem--adding smart 
pointers for strings takes up just as much space as does a copy of the 
string object and costs in terms of maintainability.

--Loring

--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:
> Hi,
> 
> On Tue, Nov 12, 2002 at 04:12:05PM -0000, micheal_jor wrote:
> > OK. I'll have a quick look at how C++ does this. Was this feature
> > already present in 2.7.2a2 or should I be looking at 2.7.2a4 only?
> 
> 2.7.2a2 should have it.. Maybe a small bugfix here and there not 
sure.
> 
> > 1. the nodes have direct or indirect links (via object reference
> > chains) to really big object graphs such as the symbol table.
> 
> In that case the user would have to supply a good copy constructor 
that
> does the right thing. The dupXXX's in C++ just call the clone method 
of a
> AST and that one generally uses a copy constructor.
> 
> > 2. the nodes have bidirectional links - i.e. parent<->child and
> > sibling1<->sibling2..<->..siblingN - that will effectively turn 
every
> > dup()/dupXXX() into a full tree copy.
> 
> Hmmm standard antlr has no back links. And probably the dup 
algorithms
> can't handle those properly. And I don't know what the use is of 
dupping to
> a level higher than the node you are starting the duplicate with. 
Generally
> when you dup a bit I'd suspect you're only interested in the 
subtree.
> 
> Anyway on a different line of thought the dup methods IMHO don't 
belong in
> the factory anyway. No part of antlr's generated code uses them as 
well
> (AFAIK). It's a bunch of convenience functions. The combination of 
2.7.0/1,
> dupXXX and heterogeneous ASTs was even pretty much broken anyway 
(C++ maybe
> even other codegen).
> 
> > It's a worry that the use of these methods will incur a severe
> > memory/space cost essentially. A deep clone would always deep copy
> > all such linked objects too.

ANTLR always copies during tree transformation--the memory cost is 
there already.

> 
> That's one of the risks of duplicating stuff. Then again ANTLR 
generated
> code doesn't use the dup methods. And it's probably not a good idea 
to
> invest a lot of time in making them 100% idiot proof, they should be
> AST/BaseAST/CommonAST proof (well at least that's my view of them), 
then
> again it's not my time ;)
> 
> Cheers,
> 
> Ric
> --
> 
-----+++++*****************************************************+++++++
++-------
>     ---- Ric Klaren ----- klaren@c... ----- +31 53 4893722  ----
> 
-----+++++*****************************************************+++++++
++-------
>   Chaos often breeds life, when order breeds habit.
>   --- Henry B. Adams, The Education of Henry Adams


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Nov 12 14:12:36 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Tree-Parser Grammer Question
Message-ID: <170826586F3BD511910D0200C110AAA8032B4EC2@memail03.bco-home.com>

It's really hard to give advice without a specific example.  If you can
parse it you should be able to make an AST of some sort.  Some optional
constructs are able to be handled as I described earlier in this thread, by
making a fixed structure that holds them all and then putting in empty
placeholders as appropriate.  

Representing a translation strategy in a neutral form has been the goal of
many projects outside of antlr, and it is a hard problem to solve.  I think
you'll get further by doing complete translations for two different sources
and targets and then be able to step back and factor the code for the
general cases.  Again if you had specific examples I'd have more to think
about.

Monty

-----Original Message-----
From: Sriram Durbha [mailto:cintyram@yahoo.com]
Sent: Tuesday, November 12, 2002 1:30 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


hi monty,
 in one of the applicaitons that i am writing [a translator] ,
part of the translation can be syntax directed; [ that is ..  target
code canbe generated directly from the parse action ;]

how ever important ones need ast;

now i am in a difficult position;
1.] the source language does not have a special delimiter ;
2. most of the constructs are optional ;
now i am not able to parse the if else construct;
but would like to know if there are any precautions i have to take
specially so that i can build a good and suitable tree ..

3.
 also i am trying to represent the translation strategy in a neutral
form , so that i can apply representations in that form to different
sets of sources and targets; Has any work been done in this area?

cheers
ram




--- mzukowski@yci.com wrote:
> Typically a root is chosen for its structure, not its content.  For
> instance
> a simplistic variable declaration in C would look like #(NDeclarator
> type ID
> (expr)?);  The NDeclarator is an imaginary type, which you might
> consider
> using.  Again I ask why is it important to have the name be the root?
> Typically symbols are stored in a symbol table so you can look them
> up by
> scope and and name and that will point you to the right tree.  
> 
> What do you envision doing with the tree that makes it important to
> have the
> name first?
> 
> Note that your structure for the tree with IDENT as an optional root
> muddles
> things up.  You don't know from the start which of the tree
> alternatives you
> are looking at.  This will slow down your tree traversal as well. 
> Some
> people argue that tree grammars should avoid optional closures
> totally.
> Take for instance a for loop.  In C any of the three expressions are
> optional, but for my tree I don't want to decide based on content, so
> I
> added an imaginary NEmptyExpression alternative to my expr rule.  So
> now a
> missing expr in a for loop is forced in as an NEmptyExpression. 
> Imagine how
> to handle the tree grammar if I left those three exprs optional. 
> It's not
> pretty.  My simple tree grammar for "for" is this:
> 
>                #( "for"
>                 expr expr expr
>                 statement
>                 )
> 
> OK, let's get ready for round two!
> 
> Monty
> 
> -----Original Message-----
> From: Ney, Richard [mailto:richard.ney@aspect.com]
> Sent: Tuesday, November 12, 2002 8:51 AM
> To: 'antlr-interest@yahoogroups.com'
> Subject: RE: [antlr-interest] Tree-Parser Grammer Question
> 
> 
> The rational for this was to have the final output name of each
> column in
> the select statement to always be the root. Now based on SQL92 that
> can be
> the column name, an alias, or the group expression. Now I was
> starting to
> look at making the initial parser always add the alias in to the
> tree.
> Anyone have an example of a conditional rule in the parser that can
> add
> stuff into the tree conditionally?
> 
> -Richard
> 
> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
> Sent: Tuesday, November 12, 2002 8:26 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Tree-Parser Grammer Question
> 
> 
> It is kind of weird to have optional matches like (IDENT^)? promoted
> to the
> root.  What is your rationale for this?  Your tree rule would look
> like
> 
> selectColumn: #(IDENT groupExpression)
> 			| groupExpression
> 	;
> 
> Monty
> 
> -----Original Message-----
> From: Ney, Richard [mailto:richard.ney@aspect.com]
> Sent: Monday, November 11, 2002 11:26 PM
> To: 'antlr-interest@yahoogroups.com'
> Subject: [antlr-interest] Tree-Parser Grammer Question
> 
> 
> I have battled this issue for two days now so I'm at a loss to how to
> solve
> this problem. I created a initial parser for a basic SQL Select. One
> of my
> key rules in the initial parser looks like this: groupExpression 
>         : ("avg"^|"max"^|"min"^|"sum"^) OPEN_PAREN!
> (additiveExpression |
> (("all" | "distinct") field_name)) CLOSE_PAREN! (IDENT^)
>         | ("count"^ OPEN_PAREN! (("all" | "distinct")? field_name |
> STAR)
> CLOSE_PAREN! (IDENT^)?) 
>         | additiveExpression (IDENT^)? 
>         ; 
> The result of this rule is that it builds the tree with the final
> name of
> the column always being to top-most root. I.E. Select test, count(*),
> count(*) test from foo; 
> Results in a tree that looks like 
> select 
>         test 
>         count 
>                 * 
>         test 
>                 count 
>                         * 
> from 
>         foo 
> Now in my tree parser I have a two rules that look like this: 
> selectColumn 
>         : fieldName (groupExpression)? 
>         ; 
>         
> groupExpression 
>         : #("avg" mathExpression) 
>         { 
>         } 
>         | #("sum" mathExpression) 
>         { 
>         } 
>         | #("count" ("all" | "distinct")? (fieldName| STAR)) 
>         { 
>         } 
>         | #("max" mathExpression) 
>         { 
>         } 
>         | #("min" mathExpression) 
>         { 
>         } 
>         ; 
> These rules handle the 1st and 3rd cases in the select statement but
> not the
> 2nd where the count(*) doesn't have an alias. Does anyone have an
> idea how
> to write something like selectColumn 
>         : (fieldName)? (groupExpression)? 
>         ; 
> that is a little less ambiguous? 
> -Richard 
>
----------------------------------------------------------------------------
> ------------------------ 
> Richard Ney     Aspect Communications 
> Principal Software Engineer 
> http://www.aspect.com                           Main:  408.325.2200 
> mailto:richard.ney@aspect.com                   SJ Office:
> 408.325.2464 
>         Home Office: 916.797.9602 
>
----------------------------------------------------------------------------
> ------------------------ 
> The Three Laws of Infernal Dynamics:
> 1. An object in motion will always be headed in the wrong direction.
> 2. An
> object at rest will always be in the wrong place. 3. The energy
> required to
> change either of these states will always be more than you wish to
> expend,
> but never so much as to make the task appear prospectively
> impossible.
> 
> 
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
U2 on LAUNCH - Exclusive greatest hits videos
http://launch.yahoo.com/u2

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From richard.ney at aspect.com  Tue Nov 12 15:56:43 2002
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Tree-Parser Grammer Question
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECD89@sac1exch3.aspect.com>

Monty,

Thanks for the idea of using the imaginary node, by doing that I was able to
shove the column construct and the alias down another level. This of course
made it easy to write a tree grammar that could pull out the alias token (I
also overrode the token type from IDENT to ALIAS) if it existed due to it
being grouped with the column expr under a imaginary root.

This just proves to me the point that sometimes you have to amend the AST
produced a little to make the tree grammar easier to write.

-Richard

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Tuesday, November 12, 2002 1:29 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


The GCC C grammar has plenty of examples of imaginary nodes
http://www.codetransform.com/gcc.html.  I imagine the Java grammar does too.

> 1) if exists any list of such TIPs as you describe above ?
Not that I know of.  I'm not sure if there was sucha  topic in the faq or
not.

> 2) if exists any example grammars written by you for public ?
http://www.codetransform.com/gcc.html is a complete lexer/parser/tree
grammar/tree emitter.

> 3) May be you can send me/us some grammars that are not secret? 
> Especially interesting
>    -- how you put symbols into symbol table.
See the GCC grammar.

>    -- what C/c++ classes of symbol table you use
It is in Java, not C++, but you should get the idea.

>    -- tree parser that *and* its C++ actions.
Unfortunately the tree parser in the above distribution is empty.  A few
months ago I posted a simple transformation using it to swap the if/else
statements.  When Aspect C is done it will be an excellent source of example
transformations.

Monty

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com]
Sent: Tuesday, November 12, 2002 9:36 AM
To: 'antlr-interest@yahoogroups.com'
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


Technically it isn't a must to have the final column name as the root, to me
that was just the easiest way to ensure it was in the same location in the
tree each time. Then when I traverse the tree with the tree grammar I can
then do lookups against stored meta-data and translate the underlying
information about that column into a new column statement in a new select
statement. Basically translating one SQL select into another. 

Now your NEmptyExpression rule looks like an option since the main place
where my tree grammar goes ambigious is due to the fact that a field name is
also an IDENT. If that alias is missing I can place the empty expression, as
I mentioned add an alias parameter to columns that don't have an alias. I
assume you are applying the empty in the initial parser so you get a TOKEN
to specify in the tree grammar. Do you know if any of the examples show the
implementation of a forced node or empty expression?

-Richard

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Tuesday, November 12, 2002 9:13 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


Typically a root is chosen for its structure, not its content.  For instance
a simplistic variable declaration in C would look like #(NDeclarator type ID
(expr)?);  The NDeclarator is an imaginary type, which you might consider
using.  Again I ask why is it important to have the name be the root?
Typically symbols are stored in a symbol table so you can look them up by
scope and and name and that will point you to the right tree.  

What do you envision doing with the tree that makes it important to have the
name first?

Note that your structure for the tree with IDENT as an optional root muddles
things up.  You don't know from the start which of the tree alternatives you
are looking at.  This will slow down your tree traversal as well.  Some
people argue that tree grammars should avoid optional closures totally. Take
for instance a for loop.  In C any of the three expressions are optional,
but for my tree I don't want to decide based on content, so I added an
imaginary NEmptyExpression alternative to my expr rule.  So now a missing
expr in a for loop is forced in as an NEmptyExpression.  Imagine how to
handle the tree grammar if I left those three exprs optional.  It's not
pretty.  My simple tree grammar for "for" is this:

               #( "for"
                expr expr expr
                statement
                )

OK, let's get ready for round two!

Monty

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com]
Sent: Tuesday, November 12, 2002 8:51 AM
To: 'antlr-interest@yahoogroups.com'
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


The rational for this was to have the final output name of each column in
the select statement to always be the root. Now based on SQL92 that can be
the column name, an alias, or the group expression. Now I was starting to
look at making the initial parser always add the alias in to the tree.
Anyone have an example of a conditional rule in the parser that can add
stuff into the tree conditionally?

-Richard

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Tuesday, November 12, 2002 8:26 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


It is kind of weird to have optional matches like (IDENT^)? promoted to the
root.  What is your rationale for this?  Your tree rule would look like

selectColumn: #(IDENT groupExpression)
			| groupExpression
	;

Monty

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com]
Sent: Monday, November 11, 2002 11:26 PM
To: 'antlr-interest@yahoogroups.com'
Subject: [antlr-interest] Tree-Parser Grammer Question


I have battled this issue for two days now so I'm at a loss to how to solve
this problem. I created a initial parser for a basic SQL Select. One of my
key rules in the initial parser looks like this: groupExpression 
        : ("avg"^|"max"^|"min"^|"sum"^) OPEN_PAREN! (additiveExpression |
(("all" | "distinct") field_name)) CLOSE_PAREN! (IDENT^)
        | ("count"^ OPEN_PAREN! (("all" | "distinct")? field_name | STAR)
CLOSE_PAREN! (IDENT^)?) 
        | additiveExpression (IDENT^)? 
        ; 
The result of this rule is that it builds the tree with the final name of
the column always being to top-most root. I.E. Select test, count(*),
count(*) test from foo; 
Results in a tree that looks like 
select 
        test 
        count 
                * 
        test 
                count 
                        * 
from 
        foo 
Now in my tree parser I have a two rules that look like this: 
selectColumn 
        : fieldName (groupExpression)? 
        ; 
        
groupExpression 
        : #("avg" mathExpression) 
        { 
        } 
        | #("sum" mathExpression) 
        { 
        } 
        | #("count" ("all" | "distinct")? (fieldName| STAR)) 
        { 
        } 
        | #("max" mathExpression) 
        { 
        } 
        | #("min" mathExpression) 
        { 
        } 
        ; 
These rules handle the 1st and 3rd cases in the select statement but not the
2nd where the count(*) doesn't have an alias. Does anyone have an idea how
to write something like selectColumn 
        : (fieldName)? (groupExpression)? 
        ; 
that is a little less ambiguous? 
-Richard 
----------------------------------------------------------------------------
------------------------ 
Richard Ney     Aspect Communications 
Principal Software Engineer 
http://www.aspect.com                           Main:  408.325.2200 
mailto:richard.ney@aspect.com                   SJ Office: 408.325.2464 
        Home Office: 916.797.9602 
----------------------------------------------------------------------------
------------------------ 
The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction. 2. An
object at rest will always be in the wrong place. 3. The energy required to
change either of these states will always be more than you wish to expend,
but never so much as to make the task appear prospectively impossible.


Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Nov 12 16:10:10 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Tree-Parser Grammer Question
Message-ID: <170826586F3BD511910D0200C110AAA8032B4ECA@memail03.bco-home.com>

In fact you may find yourself restructuring your grammar to make the trees
the way you want them, particularly if you have subrules you want to use ^
in but you don't want that token to become the rule's root, you only want it
to be the root for the subrule.  In this case you need to factor the subrule
into it's own rule.  That's the motivation for the "labeled subrule"
functionality mentioned in the docs which was never implemented.

Monty

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com]
Sent: Tuesday, November 12, 2002 3:57 PM
To: 'antlr-interest@yahoogroups.com'
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


Monty,

Thanks for the idea of using the imaginary node, by doing that I was able to
shove the column construct and the alias down another level. This of course
made it easy to write a tree grammar that could pull out the alias token (I
also overrode the token type from IDENT to ALIAS) if it existed due to it
being grouped with the column expr under a imaginary root.

This just proves to me the point that sometimes you have to amend the AST
produced a little to make the tree grammar easier to write.

-Richard

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Tuesday, November 12, 2002 1:29 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


The GCC C grammar has plenty of examples of imaginary nodes
http://www.codetransform.com/gcc.html.  I imagine the Java grammar does too.

> 1) if exists any list of such TIPs as you describe above ?
Not that I know of.  I'm not sure if there was sucha  topic in the faq or
not.

> 2) if exists any example grammars written by you for public ?
http://www.codetransform.com/gcc.html is a complete lexer/parser/tree
grammar/tree emitter.

> 3) May be you can send me/us some grammars that are not secret? 
> Especially interesting
>    -- how you put symbols into symbol table.
See the GCC grammar.

>    -- what C/c++ classes of symbol table you use
It is in Java, not C++, but you should get the idea.

>    -- tree parser that *and* its C++ actions.
Unfortunately the tree parser in the above distribution is empty.  A few
months ago I posted a simple transformation using it to swap the if/else
statements.  When Aspect C is done it will be an excellent source of example
transformations.

Monty

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com]
Sent: Tuesday, November 12, 2002 9:36 AM
To: 'antlr-interest@yahoogroups.com'
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


Technically it isn't a must to have the final column name as the root, to me
that was just the easiest way to ensure it was in the same location in the
tree each time. Then when I traverse the tree with the tree grammar I can
then do lookups against stored meta-data and translate the underlying
information about that column into a new column statement in a new select
statement. Basically translating one SQL select into another. 

Now your NEmptyExpression rule looks like an option since the main place
where my tree grammar goes ambigious is due to the fact that a field name is
also an IDENT. If that alias is missing I can place the empty expression, as
I mentioned add an alias parameter to columns that don't have an alias. I
assume you are applying the empty in the initial parser so you get a TOKEN
to specify in the tree grammar. Do you know if any of the examples show the
implementation of a forced node or empty expression?

-Richard

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Tuesday, November 12, 2002 9:13 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


Typically a root is chosen for its structure, not its content.  For instance
a simplistic variable declaration in C would look like #(NDeclarator type ID
(expr)?);  The NDeclarator is an imaginary type, which you might consider
using.  Again I ask why is it important to have the name be the root?
Typically symbols are stored in a symbol table so you can look them up by
scope and and name and that will point you to the right tree.  

What do you envision doing with the tree that makes it important to have the
name first?

Note that your structure for the tree with IDENT as an optional root muddles
things up.  You don't know from the start which of the tree alternatives you
are looking at.  This will slow down your tree traversal as well.  Some
people argue that tree grammars should avoid optional closures totally. Take
for instance a for loop.  In C any of the three expressions are optional,
but for my tree I don't want to decide based on content, so I added an
imaginary NEmptyExpression alternative to my expr rule.  So now a missing
expr in a for loop is forced in as an NEmptyExpression.  Imagine how to
handle the tree grammar if I left those three exprs optional.  It's not
pretty.  My simple tree grammar for "for" is this:

               #( "for"
                expr expr expr
                statement
                )

OK, let's get ready for round two!

Monty

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com]
Sent: Tuesday, November 12, 2002 8:51 AM
To: 'antlr-interest@yahoogroups.com'
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


The rational for this was to have the final output name of each column in
the select statement to always be the root. Now based on SQL92 that can be
the column name, an alias, or the group expression. Now I was starting to
look at making the initial parser always add the alias in to the tree.
Anyone have an example of a conditional rule in the parser that can add
stuff into the tree conditionally?

-Richard

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Tuesday, November 12, 2002 8:26 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Tree-Parser Grammer Question


It is kind of weird to have optional matches like (IDENT^)? promoted to the
root.  What is your rationale for this?  Your tree rule would look like

selectColumn: #(IDENT groupExpression)
			| groupExpression
	;

Monty

-----Original Message-----
From: Ney, Richard [mailto:richard.ney@aspect.com]
Sent: Monday, November 11, 2002 11:26 PM
To: 'antlr-interest@yahoogroups.com'
Subject: [antlr-interest] Tree-Parser Grammer Question


I have battled this issue for two days now so I'm at a loss to how to solve
this problem. I created a initial parser for a basic SQL Select. One of my
key rules in the initial parser looks like this: groupExpression 
        : ("avg"^|"max"^|"min"^|"sum"^) OPEN_PAREN! (additiveExpression |
(("all" | "distinct") field_name)) CLOSE_PAREN! (IDENT^)
        | ("count"^ OPEN_PAREN! (("all" | "distinct")? field_name | STAR)
CLOSE_PAREN! (IDENT^)?) 
        | additiveExpression (IDENT^)? 
        ; 
The result of this rule is that it builds the tree with the final name of
the column always being to top-most root. I.E. Select test, count(*),
count(*) test from foo; 
Results in a tree that looks like 
select 
        test 
        count 
                * 
        test 
                count 
                        * 
from 
        foo 
Now in my tree parser I have a two rules that look like this: 
selectColumn 
        : fieldName (groupExpression)? 
        ; 
        
groupExpression 
        : #("avg" mathExpression) 
        { 
        } 
        | #("sum" mathExpression) 
        { 
        } 
        | #("count" ("all" | "distinct")? (fieldName| STAR)) 
        { 
        } 
        | #("max" mathExpression) 
        { 
        } 
        | #("min" mathExpression) 
        { 
        } 
        ; 
These rules handle the 1st and 3rd cases in the select statement but not the
2nd where the count(*) doesn't have an alias. Does anyone have an idea how
to write something like selectColumn 
        : (fieldName)? (groupExpression)? 
        ; 
that is a little less ambiguous? 
-Richard 
----------------------------------------------------------------------------
------------------------ 
Richard Ney     Aspect Communications 
Principal Software Engineer 
http://www.aspect.com                           Main:  408.325.2200 
mailto:richard.ney@aspect.com                   SJ Office: 408.325.2464 
        Home Office: 916.797.9602 
----------------------------------------------------------------------------
------------------------ 
The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction. 2. An
object at rest will always be in the wrong place. 3. The energy required to
change either of these states will always be more than you wish to expend,
but never so much as to make the task appear prospectively impossible.


Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Tue Nov 12 17:19:51 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Premature lexer matching
Message-ID: <aqs9bn+9stu@eGroups.com>

(Hit return too soon for previous post -- sorry.)

Given the following in the lexer:

	FOO
		: ("foo" "::") => "foo" { $setType( FOO_1 ); }
		| ("foo" '(') => "foo" { $setType( FOO_2 ); }
		| "foo" { $setType( BAR ); }
		;

	BAR
		: ('a'..'z')+
		;

meaning:

	1. If "foo" is followed by "::" then it's really a FOO_1.
	2. If "foo" is followed by '(' then it's really a FOO_2.
	3. Otherwise it's really a BAR.

Given this input:

	foobar()

The lexer incorrectly matches just "foo" even though it's immediately followed by non-whitespace text.  It should match "foobar" as a BAR.
Why does this not do what I want and how can I fix it?

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Tue Nov 12 17:13:49 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:08 2004
Subject: [antlr-interest] Premature lexer matching
Message-ID: <aqs90d+g6md@eGroups.com>




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Tue Nov 12 21:56:06 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Premature lexer matching
References: <aqs9bn+9stu@eGroups.com>
Message-ID: <002201c28ad9$5d246dc0$0300a8c0@daemon>

> Why does this not do what I want and how can I fix it?

You should merge rules FOO and BAR, e.g.

FOO
: ("foo" "::") => "foo" { $setType( FOO_1 ); }
| ("foo" '(') => "foo" { $setType( FOO_2 ); }
| BAR { $setType( BAR ); }
;

private BAR
: ('a'..'z')+
;

Silvain


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pete.forman at westerngeco.com  Wed Nov 13 00:27:06 2002
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] How can I work around approximate LALL limitation?
In-Reply-To: <E18BdcQ-0000jp-00@gecko.home.org>
References: <5.1.1.1.2.20021112114640.03a17ad0@wgmail2.gatwick.eur.slb.com>
 <5.1.1.1.2.20021112114640.03a17ad0@wgmail2.gatwick.eur.slb.com>
Message-ID: <5.1.1.1.2.20021113082510.03a3d3c0@wgmail2.gatwick.eur.slb.com>

At 2002-11-12 11:10 -0500, jbb@acm.org wrote:
>or maybe this (no predicate, no look ahead)...
>
>class ExampleParser extends Parser;
>table: (INTEGER (table_helper)? NEWLINE)+;
>table_helper: SPACE ( INTEGER table_helper )?;
>
>[The original desired syntax was
>   table: (INTEGER (SPACE INTEGER)* (SPACE)? NEWLINE)+;]

That works too. Thanks.

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Wed Nov 13 10:23:10 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Premature lexer matching
In-Reply-To: <002201c28ad9$5d246dc0$0300a8c0@daemon>
Message-ID: <aqu5ae+9mti@eGroups.com>

--- In antlr-interest@y..., "Silvain Piree" <s.piree@e...> wrote:
> You should merge rules FOO and BAR, e.g.
> 
> FOO
> : ("foo" "::") => "foo" { $setType( FOO_1 ); }
> | ("foo" '(') => "foo" { $setType( FOO_2 ); }
> | BAR { $setType( BAR ); }
> ;
> 
> private BAR
> : ('a'..'z')+
> ;

But BAR is a valid token in the grammar; hence it can not be private.

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Wed Nov 13 10:50:53 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Syntactic predicates: ignore the rule
Message-ID: <aqu6ud+dcup@eGroups.com>

ANTLR insists on having an alternate for a rule with a syntactic predicate in the lexer.  Why?  If the syntactic predicate fails, why can't the entire rule not be considered at all?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Nov 13 11:20:06 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Premature lexer matching
In-Reply-To: <aqu5ae+9mti@eGroups.com>
Message-ID: <EB113F2D-F73C-11D6-A513-0030653DE0D6@jguru.com>


On Wednesday, November 13, 2002, at 10:23  AM, Paul J. Lucas wrote:

> --- In antlr-interest@y..., "Silvain Piree" <s.piree@e...> wrote:
>> You should merge rules FOO and BAR, e.g.
>>
>> FOO
>> : ("foo" "::") => "foo" { $setType( FOO_1 ); }
>> | ("foo" '(') => "foo" { $setType( FOO_2 ); }
>> | BAR { $setType( BAR ); }
>> ;
>>
>> private BAR
>> : ('a'..'z')+
>> ;
>
> But BAR is a valid token in the grammar; hence it can not be private.

Yes, but all BAR's will be match properly by entering rule FOO, right?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Nov 13 11:41:26 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Syntactic predicates: ignore the rule
In-Reply-To: <aqu6ud+dcup@eGroups.com>
Message-ID: <E5F56C6D-F73F-11D6-A513-0030653DE0D6@jguru.com>


On Wednesday, November 13, 2002, at 10:50  AM, Paul J. Lucas wrote:

> ANTLR insists on having an alternate for a rule with a syntactic 
> predicate in the lexer.  Why?  If the syntactic predicate fails, why 
> can't the entire rule not be considered at all?
>
Because ANTLR uses predicates to distinguish between alternatives not 
rules.  ANTLR doesn't know how to "hoist" the syntactic predicate into 
nextToken().  Try combining the rules, which usually works.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Wed Nov 13 11:34:14 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Premature lexer matching
In-Reply-To: <EB113F2D-F73C-11D6-A513-0030653DE0D6@jguru.com>
Message-ID: <aqu9fm+jp8k@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> Yes, but all BAR's will be match properly by entering rule FOO, right?

Uhm, right.  OK, never mind.  Now how about the question in message 6660?  :-)

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Nov 13 15:14:04 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Wrong Java code generated for semantic predicates?
In-Reply-To: <aqmig7+dn33@eGroups.com>
Message-ID: <9A4A0422-F75D-11D6-A513-0030653DE0D6@jguru.com>


On Sunday, November 10, 2002, at 01:19  PM, Paul J. Lucas wrote:

> Given an earlier suggestion:
>
> 	FOO
> 		: BAR ( { cond }? BAZ | ) ;
>
> The Java code generated looks for BAZ before it checks the semantic 
> predicate.  I want it to check the semantic predicate immediately 
> after it matches BAR.  The Java code seems wrong to me.

You must check the syntactic context always before executing a sem pred 
so you know if it's valid to do so...not obvious here, but for hoisting 
you must keep the context.  It won't actually enter rule BAZ though. It 
just checks for the lookahead.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hrvoje.nezic at envox-lab.hr  Thu Nov 14 01:14:38 2002
From: hrvoje.nezic at envox-lab.hr (Hrvoje Nezic)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] ANTLR for C++ (MS Visual C++ 6.0)
Message-ID: <002201c28bbe$455c01e0$1301a8c0@envox.local.hr>

I opened antlr.dsw and tried to compile it, but there 
are many warnings and errors. 

Perhaps someone on this list could help me or give 
me a hint. Thanks in advance.

Regards,
Hrvoje Nezic



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ajpb at yahoo.com  Thu Nov 14 05:12:30 2002
From: ajpb at yahoo.com (Addi Jamshidi)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Java to C# translation
In-Reply-To: <9A4A0422-F75D-11D6-A513-0030653DE0D6@jguru.com>
Message-ID: <20021114131230.99989.qmail@web11501.mail.yahoo.com>

I am new to ANTLR (in fact very new)..
I am trying to convert a number of existing Java
classes into C#, and after reading the ANTLR web site
I am under the impression that:

This can be done, and in fact what Mr.  Michael J. has
provided can do this.

If my assumption is correct I have the following
questions (what do I need to run for this to happen?):

1) I did download the antlr-2.7.2a2-CSharp.zip file.
And tried to follow the instructions for building it.
However I have been getting tons of errors (e.g.
classes not found, Load exception errors, etc.). The
doc says to run  build.bat from the antlr top
directory. I have done that, in fact I have tried
running the build files from every directory there is,
and still I get the similar errors.

2) I then downloaded antlr-2.7.0.zip and installed it.
And then unzipped antlr-2.7.2a2-CSharp.zip for its
contained files to be copied in the directory tree
that antlr-2.7.0.zip created. Then I copied all the
build files into the antlr directory (i.e.
antlr-2.7.0\antlr directory), and then tried running
build.bat. 

3) This time it did work better, however I am still
getting 33 errors during the build (some of which I
have included at the bottom of this email)...

So my questions are:

1) Is it true to assume that given a .java file, I can
convert that to C# (completely or partially) using
antlr-2.7.2a2-CSharp.zip?

2) If so how can I use it (i.e. what do I need to run
for this to happen)?

Many thanks in advance,

Addi Jamshidi


P.S - Here are a few of the errors I am getting during
the build per explanation given earlier...


[loading
c:\j2sdk1.4.0\jre\lib\rt.jar(java/lang/IllegalAccessException.class)]
..\antlr\Tool.java:296: cannot resolve symbol
symbol  : method getFormatter  ()
location: interface antlr.FileLineFormatter
       
System.err.println(FileLineFormatter.getFormatter().
                                            ^
..\antlr\Tool.java:382: cannot resolve symbol
symbol  : variable Version
location: class antlr.Tool
                           Version.project_version + "
  1989-2002 jGuru.com");
                           ^
..\antlr\Tool.java:383: cannot resolve symbol
symbol  : variable Version
location: class antlr.Tool
        version = Version.project_version;
                  ^
..\antlr\Tool.java:410: cannot resolve symbol
symbol  : class PreservingFileWriter
location: class antlr.Tool
        return new PrintWriter(new
PreservingFileWriter(outputDir + System.getPr
operty("file.separator") + f));
                                   ^
[loading
c:\j2sdk1.4.0\jre\lib\rt.jar(java/lang/StringBuffer.class)]
..\antlr\Tool.java:571: cannot resolve symbol
symbol  : method getFormatter  ()
location: interface antlr.FileLineFormatter
       
System.err.println(FileLineFormatter.getFormatter().
                                            ^
..\antlr\Tool.java:584: cannot resolve symbol
symbol  : method getFormatter  ()
location: interface antlr.FileLineFormatter
       
System.err.println(FileLineFormatter.getFormatter().
                                            ^
..\antlr\Tool.java:587: cannot resolve symbol
symbol  : method getFormatter  ()
location: interface antlr.FileLineFormatter
           
System.err.println(FileLineFormatter.getFormatter().
                                                ^
..\antlr\Tool.java:600: cannot resolve symbol
symbol  : variable StringUtils
location: class antlr.Tool
            nameSpace = new
NameSpace(StringUtils.stripFrontBack(name, "\"", "\"
"));
                                      ^
[checking antlr.NameSpace]
[loading
c:\j2sdk1.4.0\jre\lib\rt.jar(java/util/AbstractList.class)]
[loading
c:\j2sdk1.4.0\jre\lib\rt.jar(java/util/AbstractCollection.class)]
[checking antlr.DefineGrammarSymbols]
..\antlr\DefineGrammarSymbols.java:20:
antlr.DefineGrammarSymbols should be decl
ared abstract; it does not define
beginSubRule(antlr.Token,int,boolean) in antlr
.DefineGrammarSymbols
public class DefineGrammarSymbols implements
ANTLRGrammarParseBehavior {
       ^
[loading ..\antlr\LexerGrammar.class]
[loading ..\antlr\TokenSymbol.class]
[loading ..\antlr\StringLiteralSymbol.class]
..\antlr\DefineGrammarSymbols.java:129: cannot resolve
symbol
symbol  : method encodeLexerRuleName 
(java.lang.String)
location: class antlr.CodeGenerator
            id =
CodeGenerator.encodeLexerRuleName(id);
                              ^
[loading ..\antlr\SimpleTokenManager.class]
[loading ..\antlr\ImportVocabTokenManager.class]
..\antlr\DefineGrammarSymbols.java:454: cannot resolve
symbol
symbol  : variable StringUtils
location: class antlr.DefineGrammarSymbols
            key =
StringUtils.stripFrontBack(name.getText(), "\"",
"\"");
                  ^
..\antlr\DefineGrammarSymbols.java:497: cannot resolve
symbol
symbol  : method encodeLexerRuleName 
(java.lang.String)
location: class antlr.CodeGenerator
            id =
CodeGenerator.encodeLexerRuleName(id);
                              ^
[loading ..\antlr\GrammarElement.class]
..\antlr\DefineGrammarSymbols.java:565: cannot resolve
symbol
symbol  : variable StringUtils
location: class antlr.DefineGrammarSymbols
                language =
StringUtils.stripBack(StringUtils.stripFront(value.ge
tText(), '"'), '"');
                                                 ^
..\antlr\DefineGrammarSymbols.java:565: cannot resolve
symbol
symbol  : variable StringUtils
location: class antlr.DefineGrammarSymbols
                language =
StringUtils.stripBack(StringUtils.stripFront(value.ge
tText(), '"'), '"');
                           ^
..\antlr\DefineGrammarSymbols.java:576: cannot resolve
symbol
symbol  : variable StringUtils
location: class antlr.DefineGrammarSymbols
                tool.literalsPrefix =
StringUtils.stripFrontBack(value.getText()
, "\"", "\"");
                                      ^
[loading ..\antlr\ParserGrammar.class]
[loading ..\antlr\TreeWalkerGrammar.class]
[checking antlr.Grammar]
[loading ..\antlr\RuleBlock.class]
[loading ..\antlr\AlternativeBlock.class]
[loading ..\antlr\AlternativeElement.class]

__________________________________________________
Do you Yahoo!?
Yahoo! Web Hosting - Let the expert host your site
http://webhosting.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Nov 14 06:23:52 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Java to C# translation
In-Reply-To: <20021114131230.99989.qmail@web11501.mail.yahoo.com>
Message-ID: <ar0blo+n5th@eGroups.com>

Hi Addi,

> I am new to ANTLR (in fact very new)..
> I am trying to convert a number of existing Java
> classes into C#, and after reading the ANTLR web site
> I am under the impression that:
> 
> This can be done, and in fact what Mr.  Michael J. has
> provided can do this.

ANTLR is a tool that can be used to auto-generate a lot of the code - 
lexers, parsers and treeparsers - required for building language 
translation tools such as the Java-to-C# translator you've described 
above but is not a Java-to-C# translator itself.

The ANTLR C# tool - antlr-2.7.2a2-CSharp.zip - on the website is a C# 
code generator for ANTLR - it enables ANTLR to generate lexers, 
parsers and treeparsers in C# (ANTLR already supports Java and C++ 
code generation). The tool is designed to work with the 2.7.2a2 
release of ANTLR only.

> So my questions are:
> 
> 1) Is it true to assume that given a .java file, I can
> convert that to C# (completely or partially) using
> antlr-2.7.2a2-CSharp.zip?

No.

Microsoft does have a tool called the JLCA that can do this but, it 
is an add-on to the VS.NET tool so you will need a copy of 
VisualStudio.NET before you can use it. It isn't perfect but you can 
find it at:

http://msdn.microsoft.com/vstudio/downloads/jca/

> P.S - Here are a few of the errors I am getting during
> the build per explanation given earlier...

These are errors with compiling ANTLR itself. I'm not very familiar 
with antlr-2.7.0 (and it is probably incompatible with the antlr-
2.7.2a2-CSharp.zip codegen in any case). I also wonder if the fact 
that you are using jdk1.4 is significant?

I'll advise downloading ANTLR-2.7.2a2 and trying again.

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gossman at free-source.com  Thu Nov 14 07:07:00 2002
From: gossman at free-source.com (DogbertKarma)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] newbie: help grammar trips on dual use period
Message-ID: <ar0e6k+n1in@eGroups.com>

All,
I'm thinking this should be easy to do, unluckily I'm new enough at
antlr that I'm missing something and I'm hoping that with a little
push from you'all that I can solve this. 

I've got a grammar (not allowed to change it) of the form:

(interface):(base_object).(sub_object)*.(variable) = (value)

so a file of these would look like:

// example comment
ethernet:dog.tail = true
serial:cat.collar.tag = 123.6
ethernet:dog.snout = 12
// another example comment

I keep hanging up on the fact that the (.) period is dual use. It is
both a delimiter and part of the value when the value is a floating
point number.

Thanks,
Matt





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Nov 14 07:15:16 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] ASTFactory initialization inconsistencies in Parser & TreeParser
Message-ID: <ar0em4+kdj5@eGroups.com>

Hi,

Why do ANTLR Parsers initialize their ASTFactory appropriately whilst 
TreeParsers have to operate with an uninitialized factory?. One the 
guys had been investigating the use of reflection to create and use 
arbitary parsers/treeparsers but, the lack of factory initialization 
in generated treeparsers is proving to be somewhat of a pain. The 
factory fails on create()-ing/dup()-ping valid token ID (obtained 
from the Parser by reflection) when treeparser rules are invoked by 
reflection.

While I can simply try to add ASTFactory initialization code to 
treeparsers in the C# codegen and be done with it, I'm curious to why 
the factories aren't initialized currently - any of the current 
codegens. I suspect this might just be a case of "C++ doesn't have 
reflection really and Java's current factory implementation needs no 
initialization". Is this right?

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Thu Nov 14 07:36:22 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] ASTFactory initialization inconsistencies in Parser & TreeParser
In-Reply-To: <ar0em4+kdj5@eGroups.com>; from open.zone@virgin.net on Thu, Nov 14, 2002 at 03:15:16PM -0000
References: <ar0em4+kdj5@eGroups.com>
Message-ID: <20021114163622.U26726@cs.utwente.nl>

Hi,

On Thu, Nov 14, 2002 at 03:15:16PM -0000, micheal_jor wrote:
> Why do ANTLR Parsers initialize their ASTFactory appropriately whilst
> TreeParsers have to operate with an uninitialized factory?.

Which kind of initialization do you mean? You mean the setting of an AST
factory in the treewalker or the initialization of that factory? Both have
to be done manually.

In C++ mode with the rework of the factories I opted to leave out all
initialization, this because it highly depends on the style of the
programmer what is logical.

With the use of a AST superfactory a chain of parser/treeparsers must have
one superfactory (or exact copies). Which will be initialized in several
steps, in each generated (tree)parser an initializeASTFactory() method is
added which adds the AST type data for that parser to the factory. It is up
to the user to ensure things happen in the right order.

Since antlr does not impose an order in import/exportvocabs in a parser
hierarchy it makes no sense to have a default. Since there is no sane
default.

> The factory fails on create()-ing/dup()-ping valid token ID (obtained from
> the Parser by reflection) when treeparser rules are invoked by reflection.

I guess it is bombing out on a lack of factory? If you're adopting the same
super factory strategy used in C++, then I'd check out the C++ examples as
well.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos is found in greatest abundance wherever order is being sought.
  --- Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Thu Nov 14 08:05:33 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] newbie: help grammar trips on dual use perio
	d
Message-ID: <170826586F3BD511910D0200C110AAA8032B4ED4@memail03.bco-home.com>

Seems like when you see a . in a number then it is part of a number, if it
is between other things then it isn't.  See the java grammar's handling of
numbers to see how to deal with it.

Monty

-----Original Message-----
From: DogbertKarma [mailto:gossman@free-source.com]
Sent: Thursday, November 14, 2002 7:07 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] newbie: help grammar trips on dual use period


All,
I'm thinking this should be easy to do, unluckily I'm new enough at
antlr that I'm missing something and I'm hoping that with a little
push from you'all that I can solve this. 

I've got a grammar (not allowed to change it) of the form:

(interface):(base_object).(sub_object)*.(variable) = (value)

so a file of these would look like:

// example comment
ethernet:dog.tail = true
serial:cat.collar.tag = 123.6
ethernet:dog.snout = 12
// another example comment

I keep hanging up on the fact that the (.) period is dual use. It is
both a delimiter and part of the value when the value is a floating
point number.

Thanks,
Matt





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Thu Nov 14 09:39:14 2002
From: cintyram at yahoo.com (Sriram Durbha)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] newbie: help grammar trips on dual use period
In-Reply-To: <ar0e6k+n1in@eGroups.com>
Message-ID: <20021114173914.66273.qmail@web40002.mail.yahoo.com>

 protected  DIGIT :	'0'..'9' ;
 protected EXPONENT :   ( ('e'|'d')('+'|'-')?(DIGIT)+ )   ;
 protected INT            :	(DIGIT) +    ;  /// match the integral part
 123
 protected FLOATING  :   ( '.'  (DIGIT)+ ) ;
 
 NUM   : INT ( FLOATING  ) ? (EXPONENT ) ?     ;      
 
 ID  options { testLiterals=true; }     : ('a'..'z' |
'A'..'Z'|'_')('a'..'z' | 'A'..'Z'|'_'|DIGIT)*   ;

protected DOT : '.' ;
// (interface):(base_object).(sub_object)*.(variable) = (value)
rule : ID COLON ID ( ( DOT ID) + ) ? DOT ID ASSIGN NUM ;

this might give you an idea. but looking at example grammars is very
helpful, so u might want to see those also;
HTH
cheers
ram

--- DogbertKarma <gossman@free-source.com> wrote:
> All,
> I'm thinking this should be easy to do, unluckily I'm new enough at
> antlr that I'm missing something and I'm hoping that with a little
> push from you'all that I can solve this. 
> 
> I've got a grammar (not allowed to change it) of the form:
> 
> (interface):(base_object).(sub_object)*.(variable) = (value)
> 
> so a file of these would look like:
> 
> // example comment
> ethernet:dog.tail = true
> serial:cat.collar.tag = 123.6
> ethernet:dog.snout = 12
> // another example comment
> 
> I keep hanging up on the fact that the (.) period is dual use. It is
> both a delimiter and part of the value when the value is a floating
> point number.
> 
> Thanks,
> Matt
> 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Web Hosting - Let the expert host your site
http://webhosting.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Nov 14 11:55:43 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: ASTFactory initialization inconsistencies in Parser & TreeParser
In-Reply-To: <20021114163622.U26726@cs.utwente.nl>
Message-ID: <ar0v3v+2imr@eGroups.com>

Hi Ric,

> > Why do ANTLR Parsers initialize their ASTFactory appropriately 
whilst
> > TreeParsers have to operate with an uninitialized factory?.
> 
> Which kind of initialization do you mean? You mean the setting of 
an AST
> factory in the treewalker or the initialization of that factory? 
Both have
> to be done manually.

The initialization of the default factory -- pre-loading it with the 
Token-ID-to-ASTNodeType mappings for all the known tokens.

> With the use of a AST superfactory a chain of parser/treeparsers 
must have
> one superfactory (or exact copies). Which will be initialized in 
several
> steps, in each generated (tree)parser an initializeASTFactory() 
method is
> added which adds the AST type data for that parser to the factory. 
It is up
> to the user to ensure things happen in the right order.

OK. This sounds more flexible. initiializeASTFactory() can be called 
after setASTFactory() is called.

> Since antlr does not impose an order in import/exportvocabs in a 
parser
> hierarchy it makes no sense to have a default. Since there is no 
sane
> default.

The sensible default might be to register the closure of all 
importVocab/exportVocab/in-grammar Token IDs in each generated 
lexer/parser/treeparser.

> > The factory fails on create()-ing/dup()-ping valid token ID 
(obtained from
> > the Parser by reflection) when treeparser rules are invoked by 
reflection.
> 
> I guess it is bombing out on a lack of factory? If you're adopting 
the same
> super factory strategy used in C++, then I'd check out the C++ 
examples as
> well.

It's bombing out on account of no Token IDs being registered in the 
default factory.

Cheers,

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ajpb at yahoo.com  Thu Nov 14 19:27:19 2002
From: ajpb at yahoo.com (Addi Jamshidi)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] A SQL Parser written in C#-- Help please!
In-Reply-To: <ar0blo+n5th@eGroups.com>
Message-ID: <20021115032719.83911.qmail@web11503.mail.yahoo.com>

Would anyone know if there is a SQL parser written in
C#?

Basically what I am looking for is for a parser (or a
tool) - written in C# -  that takes as input an SQL
statement (preferably a DB2 SQL statement) and parses
it and generates the parsed tree in terms of XML (or
something similar to that - as long as there is a way
to traverse through the output of the parser and
extract the meta data info constructing that SQL
statement -- such as table names, column names, the
Where clause, etc., etc.)...

Many thanks in advance,



__________________________________________________
Do you Yahoo!?
Yahoo! Web Hosting - Let the expert host your site
http://webhosting.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From richard.ney at aspect.com  Thu Nov 14 20:54:27 2002
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] A SQL Parser written in C#-- Help please!
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE072272C@sac1exch3.aspect.com>

There is the Oracle grammer file on the www.antlr.org site that could be
modified to DB2 SQL. Also writing an ANTLR grammar file for SQL92 shouldn't
be that hard if all you are looking for is a select statement.

-Richard

-----Original Message-----
From: Addi Jamshidi [mailto:ajpb@yahoo.com] 
Sent: Thursday, November 14, 2002 7:27 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] A SQL Parser written in C#-- Help please!


Would anyone know if there is a SQL parser written in
C#?

Basically what I am looking for is for a parser (or a
tool) - written in C# -  that takes as input an SQL
statement (preferably a DB2 SQL statement) and parses
it and generates the parsed tree in terms of XML (or
something similar to that - as long as there is a way
to traverse through the output of the parser and
extract the meta data info constructing that SQL
statement -- such as table names, column names, the
Where clause, etc., etc.)...

Many thanks in advance,



__________________________________________________
Do you Yahoo!?
Yahoo! Web Hosting - Let the expert host your site
http://webhosting.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Thu Nov 14 21:13:49 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Lexer not putting colon back
Message-ID: <Pine.LNX.4.21.0211142056560.29260-100000@oldmac.pauljlucas.org>

	Assume I want to parse a statement of the form:

		let $x := $y

	or:

		LET DOLLAR QNAME ASSIGN DOLLAR QNAME

	where the lexer is defined as:

		tokens { LET; QNAME; }

		protected Digit		: '0'..'9' ;
		protected Letter	: 'A'..'Z' | 'a'..'z' | '_' ;
		protected NCName	: Letter (NCNameChar)* ;
		protected NCNameChar	: Letter | Digit | '.' | '-' ;
		protected QName		: NCName (':' NCName)?  ;
		protected WhiteSpace	: ' ' | '\t' | '\r' | '\n' ;

		ASSIGN	: ":=" ;
		DOLLAR	: '$' ;
		EQUAL	: '=' ;
		S	: (WhiteSpace)+ { $setType( Token.SKIP ); } ;

		Keywords
			: "let"     { $setType( LET ); }
			| QName     { $setType( QNAME ); }
			;

	This works fine as given above.  But if I remove the whitespace
	after the $x like:

		let $x:= $y

	Then it gets it wrong.  An excerpt of the trace output is:

		 > lexer mKeywords; c==x
		  > lexer mQName; c==x
		   > lexer mNCName; c==x
		    > lexer mLetter; c==x
		    < lexer mLetter; c==:
		   < lexer mNCName; c==:
		   > lexer mNCName; c===
		    > lexer mLetter; c===
		    < lexer mLetter; c===
		   < lexer mNCName; c===
		  < lexer mQName; c===
		 < lexer mKeywords; c===
		  < varRef;  > lexer mEQUAL; c===
		 < lexer mEQUAL; c==1
		LA(1)===
		 < startRule; LA(1)===
		exception: line 1:8: unexpected char: '='

	When it encounters the ':', it tries to make it part of a
	QName, e.g, "x:z"; but since the next character is an '=', it
	can't do that.  What it SHOULD do is put the ':' back, return
	'x' as the QNAME, then pick up with ':' as part of ":=".  But
	it doesn't.  Why not?  And how can I fix this so that it
	correctly returns the right tokens regardless of whether
	whitespace is there?

	- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ajpb at yahoo.com  Thu Nov 14 22:22:58 2002
From: ajpb at yahoo.com (Addi Jamshidi)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest]SQL Parser written in C#-- Help please!
In-Reply-To: <0F9CBE7F81945C4BB7A32BE6E7656EE072272C@sac1exch3.aspect.com>
Message-ID: <20021115062258.79625.qmail@web11506.mail.yahoo.com>

Richard:

> Also writing an ANTLR grammar file for SQL92
> shouldn't be that hard if all you are looking for
> is a select
> statement.

Actually I am looking for a complete SQL grammar (not
just the SELECT).

Also the parser I am looking for is required to be
done in C# as it is meant to be used under VS MS .NET
framework.

We have a SQL parser done in Java, and initially I was
going to just covnert the Java code into C# (using
MS's Java-C# convertor). However that parser does more
than just parsing and it is too complicated and kind
of a spagetti code (more than it needs to be leaving
no desire to carry it over to C#).

I am really surprised that no one has done a SQL to
XML parser as I have not yet been able to find one! I
guess I will be the first to do it! :)

In any event, if anyone knows of a tool/parser (in C#)
that takes any given statement and parses it with the
output tree in some form of XML (or similar to that so
it can be traversed), please let me know for which no
words of mine can possibly express how thankful I
would be.


Regards,





--- "Ney, Richard" <richard.ney@aspect.com> wrote:
> There is the Oracle grammer file on the
> www.antlr.org site that could be
> modified to DB2 SQL. Also writing an ANTLR grammar
> file for SQL92 shouldn't
> be that hard if all you are looking for is a select
> statement.
> 
> -Richard
> 
> -----Original Message-----
> From: Addi Jamshidi [mailto:ajpb@yahoo.com] 
> Sent: Thursday, November 14, 2002 7:27 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] A SQL Parser written in
> C#-- Help please!
> 
> 
> Would anyone know if there is a SQL parser written
> in
> C#?
> 
> Basically what I am looking for is for a parser (or
> a
> tool) - written in C# -  that takes as input an SQL
> statement (preferably a DB2 SQL statement) and
> parses
> it and generates the parsed tree in terms of XML (or
> something similar to that - as long as there is a
> way
> to traverse through the output of the parser and
> extract the meta data info constructing that SQL
> statement -- such as table names, column names, the
> Where clause, etc., etc.)...
> 
> Many thanks in advance,
> 
> 
> 
> __________________________________________________
> Do you Yahoo!?
> Yahoo! Web Hosting - Let the expert host your site
> http://webhosting.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Web Hosting - Let the expert host your site
http://webhosting.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ajpb at yahoo.com  Thu Nov 14 23:06:30 2002
From: ajpb at yahoo.com (Addi Jamshidi)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] SQL Parser(C#):Could this work??
In-Reply-To: <20021115062258.79625.qmail@web11506.mail.yahoo.com>
Message-ID: <20021115070630.53252.qmail@web11507.mail.yahoo.com>

Sorry for the bandwidth, but as I am getting the hang
of Antlr I find it rather very impressive...

Going back to my original requirement of having a SQL
parser in C#, I am wondering if I can do the
following:

1) Get the Antlr grammar for Oracle SQL
2) Run  Antlr-csharp parser generator on that SQL
grammar file. The result then should hopefully be a
Csharp SQL parser that I can use and modify to output
XML for me.

My first question: Does above make sense and is this a
right approach?

And my second question.....

So to test Antlr Csharp parser generator, I did the
following:

1) Download Antlr 2.7.2a2 -- unzipped the file
2) Download Antlr-2.7.2a2-CSahrp - unzipped it in the
the antlr-2.7.2a2 directory.

3) Following the instructions I then:
 
a) Set my CLASSPATH to antlr-2.7.2a2 directory, as
well as setting it to include antlr.jar

b) Ran build.bat file (it did go through with success)

4) Just to see how it works, I went to the examples
directory for csharp\Calc. And I typed the following
at the command line:

java antlr.Tool calc.g

and here is what happened:

ANTLR Parser Generator   Version 2.7.2a2 (20020112-1) 
 1989-2002 jGuru.com
panic: Cannot instantiate code-generator:
antlr.CSharpCodeGenerator


So my second question is: What does above error mean?
And What is it that I missed and what do I need to do
so it would generate the CSharp parser for me? 

Many thanks in advance,




__________________________________________________
Do you Yahoo!?
Yahoo! Web Hosting - Let the expert host your site
http://webhosting.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ajpb at yahoo.com  Fri Nov 15 02:16:40 2002
From: ajpb at yahoo.com (Addi Jamshidi)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] SQL CSharp parser:Its working! Thank you..
In-Reply-To: <20021115070630.53252.qmail@web11507.mail.yahoo.com>
Message-ID: <20021115101640.10919.qmail@web11506.mail.yahoo.com>

Sorry for the bandwidth again...
Just wanted to say that I have truly come to
appreciate Antlr. This is really a great tool.

I just used the Antlr SQL grammar that is provided by
Mr. Brent Wiese, and also using the C# parser
generator by Michael J., and it works great! Needed to
do some manual fixing of the generated Csharp code,
but it was minor.. 

So THANK you Michael J., and Brent Wiese.

Now the only thing that is left is to come up with
some sort of a XML schema and have the parser generate
its parsed tree based on that schema.. Any input
and/or help is greatly appreciated. I have zipped up
the SQL CSharp parser (it is about 280KB) and I will
be more than happy to send it to anyone who is
interested in contributing...

The ironic thing about ANTLR is that not too many
people know about it -- or perhaps it is only the
ignorants who do not know about it and come to know of
it purely by accident - as I did... :)

Best Regards,

Addi Jamshidi




__________________________________________________
Do you Yahoo!?
Yahoo! Web Hosting - Let the expert host your site
http://webhosting.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From brian-l-smith at uiowa.edu  Fri Nov 15 02:32:27 2002
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] SQL CSharp parser:Its working! Thank you..
References: <20021115101640.10919.qmail@web11506.mail.yahoo.com>
Message-ID: <3DD4CD3B.5010704@uiowa.edu>

Addi,

Why are you wanting to generate XML? IMO, that is just an extra step 
that will cause you extra work. You should consider creating an ANTLR 
TreeParser to extra the metadata. An ANTLR TreeParser should be simpler 
and easier to maintain than whatever you would use to process your XML. 
You will probably have to do this anyway to generate the XML as far as I 
can tell. Well, maybe you could try to use the built-in AST 
serialization-to-XML mechanism and then writing an XSLT stylesheet....

IMO, XML is a tool to use when you can't find a parser and can't create 
one with reasonable effort, or when you need to communicate with people 
that don't have a parser and you can't give them yours. In your case, 
you have a parser that you seem happy with, and there is no standard SQL 
interchange format that I am aware of; the closest thing I can think of 
off the top of my head is OMG CWM+XMI but there are not many free tools 
for that and XMI is difficult to process by hand. So, I doubt XML will 
have any benefits in this situation; that is probably why you have had 
trouble finding tools for XML-ized SQL.

- Brian


Addi Jamshidi wrote:
> Sorry for the bandwidth again...
> Just wanted to say that I have truly come to
> appreciate Antlr. This is really a great tool.
> 
> I just used the Antlr SQL grammar that is provided by
> Mr. Brent Wiese, and also using the C# parser
> generator by Michael J., and it works great! Needed to
> do some manual fixing of the generated Csharp code,
> but it was minor.. 
> 
> So THANK you Michael J., and Brent Wiese.
> 
> Now the only thing that is left is to come up with
> some sort of a XML schema and have the parser generate
> its parsed tree based on that schema.. Any input
> and/or help is greatly appreciated. I have zipped up
> the SQL CSharp parser (it is about 280KB) and I will
> be more than happy to send it to anyone who is
> interested in contributing...
> 
> The ironic thing about ANTLR is that not too many
> people know about it -- or perhaps it is only the
> ignorants who do not know about it and come to know of
> it purely by accident - as I did... :)
> 
> Best Regards,
> 
> Addi Jamshidi
> 
> 
> 
> 
> __________________________________________________
> Do you Yahoo!?
> Yahoo! Web Hosting - Let the expert host your site
> http://webhosting.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ajpb at yahoo.com  Fri Nov 15 02:50:47 2002
From: ajpb at yahoo.com (Addi Jamshidi)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re:SQL CSharp parser:Its working! Thank you..
In-Reply-To: <3DD4CD3B.5010704@uiowa.edu>
Message-ID: <20021115105047.61471.qmail@web11508.mail.yahoo.com>

Brian,

My reason for XML is so the parser can be used as an
independent multi-language, multi-platform component.
The parser is in C#, and yet there are interfaces from
C++, C, and even Java that would use the component.
They simply send the SQL to be parsed in some form of
a string prsentation, and in turn they will receive a
string that is a description of the parsed tree.
"string" object is the only common thing all languages
and platforms have in common, and XML seems to be the
perfect solution for this ( but of course I maybe
overlooking something - which most likely can very
well be the case)!

Having said that, for now I really dont care much
about making this parser so generalized to be useable
from different languages and platforms. So I am
looking for the best, easiest and "QUICKEST" way of
developing the means to traverse through the parsed
tree and extract the meta data (something that using
XML DOM would otherwise provide)...

> Well, maybe you could try to use the built-in AST 
> serialization-to-XML mechanism 

Can you elaborate on this? This sounds interesting but
not sure if it means what it implies. So I will be
thankful if you can explain this a bit more as what
this would mean and how I can do it?

> consider
> creating an ANTLR 
> TreeParser to extra the metadata. An ANTLR
> TreeParser should be simpler 
> and easier to maintain

Again if I can have more info on this and what this
means and would involve I will be most thankful.. Have
not looked at the documentation on ANTLR, but I assume
this is explained in detail ?? 

Your thoughts on this are greatly appreciated.

Regards,

- Addi


--- Brian Smith <brian-l-smith@uiowa.edu> wrote:
> Addi,
> 
> Why are you wanting to generate XML? IMO, that is
> just an extra step 
> that will cause you extra work. You should consider
> creating an ANTLR 
> TreeParser to extra the metadata. An ANTLR
> TreeParser should be simpler 
> and easier to maintain than whatever you would use
> to process your XML. 
> You will probably have to do this anyway to generate
> the XML as far as I 
> can tell. Well, maybe you could try to use the
> built-in AST 
> serialization-to-XML mechanism and then writing an
> XSLT stylesheet....
> 
> IMO, XML is a tool to use when you can't find a
> parser and can't create 
> one with reasonable effort, or when you need to
> communicate with people 
> that don't have a parser and you can't give them
> yours. In your case, 
> you have a parser that you seem happy with, and
> there is no standard SQL 
> interchange format that I am aware of; the closest
> thing I can think of 
> off the top of my head is OMG CWM+XMI but there are
> not many free tools 
> for that and XMI is difficult to process by hand.
> So, I doubt XML will 
> have any benefits in this situation; that is
> probably why you have had 
> trouble finding tools for XML-ized SQL.
> 
> - Brian
> 
> 
> Addi Jamshidi wrote:
> > Sorry for the bandwidth again...
> > Just wanted to say that I have truly come to
> > appreciate Antlr. This is really a great tool.
> > 
> > I just used the Antlr SQL grammar that is provided
> by
> > Mr. Brent Wiese, and also using the C# parser
> > generator by Michael J., and it works great!
> Needed to
> > do some manual fixing of the generated Csharp
> code,
> > but it was minor.. 
> > 
> > So THANK you Michael J., and Brent Wiese.
> > 
> > Now the only thing that is left is to come up with
> > some sort of a XML schema and have the parser
> generate
> > its parsed tree based on that schema.. Any input
> > and/or help is greatly appreciated. I have zipped
> up
> > the SQL CSharp parser (it is about 280KB) and I
> will
> > be more than happy to send it to anyone who is
> > interested in contributing...
> > 
> > The ironic thing about ANTLR is that not too many
> > people know about it -- or perhaps it is only the
> > ignorants who do not know about it and come to
> know of
> > it purely by accident - as I did... :)
> > 
> > Best Regards,
> > 
> > Addi Jamshidi
> > 
> > 
> > 
> > 
> > __________________________________________________
> > Do you Yahoo!?
> > Yahoo! Web Hosting - Let the expert host your site
> > http://webhosting.yahoo.com
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> > 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Web Hosting - Let the expert host your site
http://webhosting.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From almo at male.ru  Fri Nov 15 02:50:52 2002
From: almo at male.ru (alexander_monakhov)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Bug in ANTLR C# Codegen?
In-Reply-To: <0F9CBE7F81945C4BB7A32BE6E7656EE0722715@sac1exch3.aspect.com>
Message-ID: <ar2jic+mj9t@eGroups.com>

But generated parser does not compile.
There is some '{' and '}' disbalance.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Fri Nov 15 06:49:42 2002
From: cintyram at yahoo.com (Sriram Durbha)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Lexer not putting colon back
In-Reply-To: <Pine.LNX.4.21.0211142056560.29260-100000@oldmac.pauljlucas.org>
Message-ID: <20021115144942.34362.qmail@web40006.mail.yahoo.com>

hi lucas,
i have a similar problem,
 the reason i guess is that antlr is an ll parser,
that is it looks for tokens from left to right and also it takes a
decision to match at the earliest possible opportunity;


with antlr we should be able to use syntactic predicate to make sure
that if the : is followed by QName only it has to match the whole as a
Qname, other wise it should consider the second alt;


hope this helps 
cheers
ram

--- "Paul J. Lucas" <dude@darkfigure.org> wrote:
> 	Assume I want to parse a statement of the form:
> 
> 		let $x := $y
> 
> 	or:
> 
> 		LET DOLLAR QNAME ASSIGN DOLLAR QNAME
> 
> 	where the lexer is defined as:
> 
> 		tokens { LET; QNAME; }
> 
> 		protected Digit		: '0'..'9' ;
> 		protected Letter	: 'A'..'Z' | 'a'..'z' | '_' ;
> 		protected NCName	: Letter (NCNameChar)* ;
> 		protected NCNameChar	: Letter | Digit | '.' | '-' ;
> 		protected QName		: NCName (':' NCName)?  ;
> 		protected WhiteSpace	: ' ' | '\t' | '\r' | '\n' ;
> 
> 		ASSIGN	: ":=" ;
> 		DOLLAR	: '$' ;
> 		EQUAL	: '=' ;
> 		S	: (WhiteSpace)+ { $setType( Token.SKIP ); } ;
> 
> 		Keywords
> 			: "let"     { $setType( LET ); }
> 			| QName     { $setType( QNAME ); }
> 			;
> 
> 	This works fine as given above.  But if I remove the whitespace
> 	after the $x like:
> 
> 		let $x:= $y
> 
> 	Then it gets it wrong.  An excerpt of the trace output is:
> 
> 		 > lexer mKeywords; c==x
> 		  > lexer mQName; c==x
> 		   > lexer mNCName; c==x
> 		    > lexer mLetter; c==x
> 		    < lexer mLetter; c==:
> 		   < lexer mNCName; c==:
> 		   > lexer mNCName; c===
> 		    > lexer mLetter; c===
> 		    < lexer mLetter; c===
> 		   < lexer mNCName; c===
> 		  < lexer mQName; c===
> 		 < lexer mKeywords; c===
> 		  < varRef;  > lexer mEQUAL; c===
> 		 < lexer mEQUAL; c==1
> 		LA(1)===
> 		 < startRule; LA(1)===
> 		exception: line 1:8: unexpected char: '='
> 
> 	When it encounters the ':', it tries to make it part of a
> 	QName, e.g, "x:z"; but since the next character is an '=', it
> 	can't do that.  What it SHOULD do is put the ':' back, return
> 	'x' as the QNAME, then pick up with ':' as part of ":=".  But
> 	it doesn't.  Why not?  And how can I fix this so that it
> 	correctly returns the right tokens regardless of whether
> 	whitespace is there?
> 
> 	- Paul
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Web Hosting - Let the expert host your site
http://webhosting.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri Nov 15 07:52:30 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Lexer not putting colon back
Message-ID: <170826586F3BD511910D0200C110AAA8032B4EE5@memail03.bco-home.com>

Do you have k="2" in your lexer?  You need k to be at least 2 so it will
look far enough ahead to see the = after the :

Monty

-----Original Message-----
From: Paul J. Lucas [mailto:dude@darkfigure.org]
Sent: Thursday, November 14, 2002 9:14 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Lexer not putting colon back


	Assume I want to parse a statement of the form:

		let $x := $y

	or:

		LET DOLLAR QNAME ASSIGN DOLLAR QNAME

	where the lexer is defined as:

		tokens { LET; QNAME; }

		protected Digit		: '0'..'9' ;
		protected Letter	: 'A'..'Z' | 'a'..'z' | '_' ;
		protected NCName	: Letter (NCNameChar)* ;
		protected NCNameChar	: Letter | Digit | '.' | '-' ;
		protected QName		: NCName (':' NCName)?  ;
		protected WhiteSpace	: ' ' | '\t' | '\r' | '\n' ;

		ASSIGN	: ":=" ;
		DOLLAR	: '$' ;
		EQUAL	: '=' ;
		S	: (WhiteSpace)+ { $setType( Token.SKIP ); } ;

		Keywords
			: "let"     { $setType( LET ); }
			| QName     { $setType( QNAME ); }
			;

	This works fine as given above.  But if I remove the whitespace
	after the $x like:

		let $x:= $y

	Then it gets it wrong.  An excerpt of the trace output is:

		 > lexer mKeywords; c==x
		  > lexer mQName; c==x
		   > lexer mNCName; c==x
		    > lexer mLetter; c==x
		    < lexer mLetter; c==:
		   < lexer mNCName; c==:
		   > lexer mNCName; c===
		    > lexer mLetter; c===
		    < lexer mLetter; c===
		   < lexer mNCName; c===
		  < lexer mQName; c===
		 < lexer mKeywords; c===
		  < varRef;  > lexer mEQUAL; c===
		 < lexer mEQUAL; c==1
		LA(1)===
		 < startRule; LA(1)===
		exception: line 1:8: unexpected char: '='

	When it encounters the ':', it tries to make it part of a
	QName, e.g, "x:z"; but since the next character is an '=', it
	can't do that.  What it SHOULD do is put the ':' back, return
	'x' as the QNAME, then pick up with ':' as part of ":=".  But
	it doesn't.  Why not?  And how can I fix this so that it
	correctly returns the right tokens regardless of whether
	whitespace is there?

	- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From richard.ney at aspect.com  Fri Nov 15 09:02:33 2002
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Bug in ANTLR C# Codegen?
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE072272D@sac1exch3.aspect.com>

Not sure which version of my fix you have by I'll post my latest again to
make sure it is available. There was a certain scenerio that I found some
grammars invoked that caused a '{ }' imbalance.



-----Original Message-----
From: alexander_monakhov [mailto:almo@male.ru] 
Sent: Friday, November 15, 2002 2:51 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Bug in ANTLR C# Codegen?


But generated parser does not compile.
There is some '{' and '}' disbalance.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: CSharpCodeGenerator.java
Type: application/octet-stream
Size: 119059 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20021115/c62e596b/CSharpCodeGenerator.obj
From dude at darkfigure.org  Fri Nov 15 10:01:02 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Lexer not putting colon back
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4EE5@memail03.bco-home.com>
Message-ID: <ar3cou+9dk9@eGroups.com>

--- In antlr-interest@y..., mzukowski@y... wrote:
> Do you have k="2" in your lexer?  You need k to be at least 2 so it will
> look far enough ahead to see the = after the :

No value of k makes this work.

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri Nov 15 10:11:40 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Lexer not putting colon back
Message-ID: <170826586F3BD511910D0200C110AAA8032B4EEB@memail03.bco-home.com>

Then use a syntactic predicate

QNAME ((':' ~('='))=>':' QNAME)?

Monty

-----Original Message-----
From: Paul J. Lucas [mailto:dude@darkfigure.org]
Sent: Friday, November 15, 2002 10:01 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Lexer not putting colon back


--- In antlr-interest@y..., mzukowski@y... wrote:
> Do you have k="2" in your lexer?  You need k to be at least 2 so it will
> look far enough ahead to see the = after the :

No value of k makes this work.

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Fri Nov 15 10:16:52 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Lexer not putting colon back
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4EEB@memail03.bco-home.com>
Message-ID: <ar3dmk+kju6@eGroups.com>

--- In antlr-interest@y..., mzukowski@y... wrote:
> Then use a syntactic predicate
> 
> QNAME ((':' ~('='))=>':' QNAME)?

That works; thanks.  But why is it necessary to do this?  The other way really seems like it should have worked.

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri Nov 15 10:52:23 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Lexer not putting colon back
Message-ID: <170826586F3BD511910D0200C110AAA8032B4EEC@memail03.bco-home.com>

I can't really say why it didn't work.  Could you post the generated code
for that rule when k=2?  The lexer analysis has to do some special things to
not analyze too deeply.  If you think of nextToken() as an alternative block
of all un-protected lexer rules, then you would see that the analysis for
your rule doesn't include looking at what is coming as the next complete
token.  If it did look beyond that then you would get a lot more ambiguities
which don't make sense for a lexer.  Ter can correct me here, but I think
that's what is going on.

Monty

-----Original Message-----
From: Paul J. Lucas [mailto:dude@darkfigure.org]
Sent: Friday, November 15, 2002 10:17 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Lexer not putting colon back


--- In antlr-interest@y..., mzukowski@y... wrote:
> Then use a syntactic predicate
> 
> QNAME ((':' ~('='))=>':' QNAME)?

That works; thanks.  But why is it necessary to do this?  The other way
really seems like it should have worked.

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Fri Nov 15 11:28:01 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Lexer not putting colon back
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4EEC@memail03.bco-home.com>
Message-ID: <ar3hs1+uv6s@eGroups.com>

--- In antlr-interest@y..., mzukowski@y... wrote:
> Could you post the generated code for that rule when k=2?

Here's the relevant bit from inside the try block:

        mNCName(false);
        {       
        if ((LA(1)==':')) {
                match(':');
                mNCName(false);
        }       
        else {  
        }       

        }       
        if ( _createToken && _token==null && _ttype!=Token.SKIP ) {
                _token = makeToken(_ttype);
                _token.setText(new String(text.getBuffer(), _begin, text.length()-_begin));
        }       
        _returnToken = _token;                                       



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri Nov 15 12:08:11 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Lexer not putting colon back
Message-ID: <170826586F3BD511910D0200C110AAA8032B4EEE@memail03.bco-home.com>

Yeah, the lexer has no notion of what follows in the next token, so it
thinks there is nothing that could go wrong and doesn't even bother checking
LA(2).  This is a peculiarity of lexers.

Monty

-----Original Message-----
From: Paul J. Lucas [mailto:dude@darkfigure.org]
Sent: Friday, November 15, 2002 11:28 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Lexer not putting colon back


--- In antlr-interest@y..., mzukowski@y... wrote:
> Could you post the generated code for that rule when k=2?

Here's the relevant bit from inside the try block:

        mNCName(false);
        {       
        if ((LA(1)==':')) {
                match(':');
                mNCName(false);
        }       
        else {  
        }       

        }       
        if ( _createToken && _token==null && _ttype!=Token.SKIP ) {
                _token = makeToken(_ttype);
                _token.setText(new String(text.getBuffer(), _begin,
text.length()-_begin));
        }       
        _returnToken = _token;                                       



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Fri Nov 15 17:27:00 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Actions with multiple lexers
Message-ID: <Pine.LNX.4.21.0211151718210.32151-100000@oldmac.pauljlucas.org>

	So I have 2 lexers, a main lexer and a second for scanning a
	sub-language within the first (similar to JavaDoc vs. Java).
	For example:

		let $x := (<a/>) return $x

	The sub-language is XML that starts when a '<' is encountered
	and ends when ')' is encountered.

	The main lexer has semantic actions on many of the rules, for
	example on ')'.  The XML-lexer has also has to return ')' just
	like the JavaDoc lexer has to return "*/".

	The problem is that I need to have the semantic actions of the
	main lexer executed as if it has scanned the ')'.  One ugly
	solution is to duplicate all the semantic actions for tokens in
	common.

	Ideally what I would like would be a way to put the ')' from the
	XML lexer back on the token stream and then, once the lexer is
	popped back to the main lexer, let it rescan the same token.

	Is there a way to do this?  (Or other way to solve this
	problem?)

	- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sat Nov 16 16:15:34 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] importVocab/exportVocab
In-Reply-To: <200208261252.g7QCq8X12592@mailgate5.cinetic.de>
Message-ID: <B0A7DB97-F9C1-11D6-A513-0030653DE0D6@jguru.com>


On Monday, August 26, 2002, at 05:52  AM, Jan Suchotzki wrote:

> Hello,
>
> I would like to export a vocabulary and import it in a package one 
> hierarchy
> level lower. Example:
>
> Directory src:
>
> package: org.test.parser parser-lexer.g        exportVocab test
> package: org.test.parser.tree tree-parser.g  importVocab test
>
> Is this possible? How do I make it?

I had this same problem myself the other day.  I'm not sure how to 
"fix" this as -glib can only refer to a grammar.  I had to make that 
explicit so I knew from which grammar to derive.  For vocabs, do we 
need a new option -vlib that indicates the dir where we should look for 
xxxTokenTypes.txt?

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Sun Nov 17 08:01:24 2002
From: cintyram at yahoo.com (Sriram Durbha)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Lexer not putting colon back
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4EEC@memail03.bco-home.com>
Message-ID: <20021117160124.88325.qmail@web40019.mail.yahoo.com>

hi ter,monty ,

i think this is how LL works... please read my earlier post in this
thread, and correct me if im wrong..
--- mzukowski@yci.com wrote:
> I can't really say why it didn't work.  Could you post the generated
> code
> for that rule when k=2?  The lexer analysis has to do some special
> things to
> not analyze too deeply.  If you think of nextToken() as an
> alternative block
> of all un-protected lexer rules, then you would see that the analysis
> for
> your rule doesn't include looking at what is coming as the next
> complete
> token.  If it did look beyond that then you would get a lot more
> ambiguities
> which don't make sense for a lexer.  Ter can correct me here, but I
> think
> that's what is going on.
> 
> Monty
> 
> -----Original Message-----
> From: Paul J. Lucas [mailto:dude@darkfigure.org]
> Sent: Friday, November 15, 2002 10:17 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Lexer not putting colon back
> 
> 
> --- In antlr-interest@y..., mzukowski@y... wrote:
> > Then use a syntactic predicate
> > 
> > QNAME ((':' ~('='))=>':' QNAME)?
> 
> That works; thanks.  But why is it necessary to do this?  The other
> way
> really seems like it should have worked.
> 
> - Paul
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Web Hosting - Let the expert host your site
http://webhosting.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sun Nov 17 13:29:55 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] heterogeneous AST nodes and AST factory problem
Message-ID: <B71CC2F0-FA73-11D6-A513-0030653DE0D6@jguru.com>

Uh oh...Houston we have a problem...

So, with the heterogeneous trees, you can say:

       tokens {
          PLUS<AST=PLUSNode>;
          ...
         }

and I'm supposed to notify the factory how to build PLUS tree nodes.  
No problem--I can do this in the generated parser's constructor with:

astFactory.setTokenTypeASTNodeType(PLUS, "PLUSNode");
...

where...

	/** Specify an "override" on the Java object created for a
	 *  specific token.
	 *  @since 2.7.2
	 */
	public void setTokenTypeASTNodeType(int tokenType, String className) 
{...}

The problem is, you can't set the AST factory until after the 
constructor executes:

JavaParser p = new JavaParser(lexer);
p.setASTFactory(...);

So, the default factory gets the setTokenTypeASTNodeType() and not your 
new factory.

Should I generate a new constructor for each parser that lets you 
specify the ast factory?  Ick!  But otherwise you are stuck with the 
dfault factory.

Thoughts?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Sun Nov 17 17:54:41 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Bug in ANTLR C# Codegen?
In-Reply-To: <0F9CBE7F81945C4BB7A32BE6E7656EE072272D@sac1exch3.aspect.com>
Message-ID: <ar9h91+ij7r@eGroups.com>

Hi Richard,

Can you give some idea of ow much testing this patch has had please?. 

What about other ANTLR C# users on the list that have tried the 
patch, any issues?

Micheal

> Not sure which version of my fix you have by I'll post my latest 
again to
> make sure it is available. There was a certain scenerio that I 
found some
> grammars invoked that caused a '{ }' imbalance.
> 
> 
> 
> -----Original Message-----
> From: alexander_monakhov [mailto:almo@m...] 
> Sent: Friday, November 15, 2002 2:51 AM
> To: antlr-interest@y...
> Subject: [antlr-interest] Re: Bug in ANTLR C# Codegen?
> 
> 
> But generated parser does not compile.
> There is some '{' and '}' disbalance.
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Sun Nov 17 18:32:15 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Updated C# code generator for ANTLR 2.7.2a2
Message-ID: <ar9jff+ceov@eGroups.com>

This is now available on the ANTLR website.

Some of the features of this version are :

- improved support for heterogenous ASTs

- more flexible/powerful ASTFactory architecture

- Token IDs are now defined as const fields on lexers, parsers and 
treeparsers to approximate Java and C++ behaviour (the 
XXXTokenTypes.cs file is still generated)

- Richard Ney's hashtable ctor bug-fix


Now that you know, please go and try the C# codegen and post any 
issues, feature requests, bugs and patches to the list please. 

Enjoy!

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From andreev at quorum.ru  Mon Nov 18 09:45:20 2002
From: andreev at quorum.ru (alekseyandreev)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Updated C# code generator for ANTLR 2.7.2a2
In-Reply-To: <ar9jff+ceov@eGroups.com>
Message-ID: <arb8vg+hbks@eGroups.com>

I'm sorry, but on ANTLR website 
( http://www.antlr.org/resources/antlr-2.7.2a2-CSharp.zip)
I'v found only old version C# code generator 
( archive size 233,866 bytes )

Where from can I load new update?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From andreev at quorum.ru  Mon Nov 18 10:03:20 2002
From: andreev at quorum.ru (alekseyandreev)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Help me please to correct error
Message-ID: <arba18+r861@eGroups.com>

While I have warning for the grammar?
How shall I change it ? 
Can I get correct grammar without changing 
parentheses positions ?

test :
  (   A B 
    | C D 
  )
  | ( A D )
  ;

warning: nondeterminism upon
    k==1:A
    k==2:D
    k==3:EOF



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From richard.ney at aspect.com  Mon Nov 18 10:43:07 2002
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Bug in ANTLR C# Codegen?
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE0722737@sac1exch3.aspect.com>

Currently I am using the patch on my three primary grammar files. A simple
RHS expression evaluator. A SQL Select parser which revealed the issue where
we were getting the throw statement passed in that wasn't being printed to
the output file based on the options. That was the bug that caused the {}
mismatch since I was only checking for the existence of the throw statement.
This issue was originally raised to me by Daniel Gackle. 

-Richard

-----Original Message-----
From: micheal_jor [mailto:open.zone@virgin.net] 
Sent: Sunday, November 17, 2002 5:55 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Bug in ANTLR C# Codegen?


Hi Richard,

Can you give some idea of ow much testing this patch has had please?. 

What about other ANTLR C# users on the list that have tried the 
patch, any issues?

Micheal

> Not sure which version of my fix you have by I'll post my latest
again to
> make sure it is available. There was a certain scenerio that I
found some
> grammars invoked that caused a '{ }' imbalance.
> 
> 
> 
> -----Original Message-----
> From: alexander_monakhov [mailto:almo@m...]
> Sent: Friday, November 15, 2002 2:51 AM
> To: antlr-interest@y...
> Subject: [antlr-interest] Re: Bug in ANTLR C# Codegen?
> 
> 
> But generated parser does not compile.
> There is some '{' and '}' disbalance.
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Mon Nov 18 11:33:04 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Updated C# code generator for ANTLR 2.7.2a2
In-Reply-To: <arb8vg+hbks@eGroups.com>
Message-ID: <arbf9g+sobt@eGroups.com>

Hi alekseyandreev,

> I'm sorry, but on ANTLR website 
> ( http://www.antlr.org/resources/antlr-2.7.2a2-CSharp.zip)
> I'v found only old version C# code generator 
> ( archive size 233,866 bytes )

My apologies, just checked this out and you are right. Sems my notice 
when out a little early  ;-)

I'll post a notice when this issue has been resolved.

Micheal





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Mon Nov 18 11:45:52 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Help me please to correct error
In-Reply-To: <arba18+r861@eGroups.com>
Message-ID: <arbg1g+jfuf@eGroups.com>

> While I have warning for the grammar?
> How shall I change it ? 
> Can I get correct grammar without changing 
> parentheses positions ?
> 
> test :
>   (   A B 
>     | C D 
>   )
>   | ( A D )
>   ;
> 
> warning: nondeterminism upon
>     k==1:A
>     k==2:D
>     k==3:EOF

This is due to the approximate-LL(k) lookahead issue in ANTLR2 if 
memory serves. 

http://www.jguru.com/faq/view.jsp?EID=264825

http://www.jguru.com/faq/view.jsp?EID=64316

My advise?, check the relevant part of the generated code manually to 
ensure it is indeed doing what you want (and changing it if it 
isn't). That's one of the strengths of ANTLR, the generated code is 
human-readable....

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Mon Nov 18 12:10:43 2002
From: cintyram at yahoo.com (Sriram Durbha)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Help me please to correct error
In-Reply-To: <arba18+r861@eGroups.com>
Message-ID: <20021118201043.73215.qmail@web40006.mail.yahoo.com>

test :( 
       ( A ( B | D ) )
             |
          ( C D )
       )
       ;
may be this will help, actually i did not try this grammar out ,
 but i used leftfactoring to avoid one of the ambiguities, that of
deciding on which A to use to match? 
i dont know more about it, especially why EOF should also be an
alternative when we have two concrete alts;
/e
cheers
ram


--- alekseyandreev <andreev@quorum.ru> wrote:
> While I have warning for the grammar?
> How shall I change it ? 
> Can I get correct grammar without changing 
> parentheses positions ?
> 
> test :
>   (   A B 
>     | C D 
>   )
>   | ( A D )
>   ;
> 
> warning: nondeterminism upon
>     k==1:A
>     k==2:D
>     k==3:EOF
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Web Hosting - Let the expert host your site
http://webhosting.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Mon Nov 18 12:37:29 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Updated ANTLR C# code generator
Message-ID: <arbj29+84sv@eGroups.com>

This is now available on the website. There are two versions as 
follows:

1) The "C# Code Generator" hyperlink will download the C# code 
generator for ANTLR 2.7.2a4 

2) Follow the "download dir" hyperlink to download the C# code 
generator for ANTLR 2.7.2a2.

As always, please keep the experience reports, issues, test 
cases/suites, updates, patches and other contributions coming.

Enjoy!

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Nov 18 11:33:33 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Help me please to correct error
Message-ID: <170826586F3BD511910D0200C110AAA8032B4EF7@memail03.bco-home.com>

This is due to linear approximate lookahead.  See the FAQ or previous posts
about it.  To fix use syntactic predicates like:

test :
 ( (A D)=> A D )
 | (  A B
    | C D
   )
 ;

Look at the generated code and you'll get an idea about why it gives that
warning.

You get bonus points for reducing the problem to a very simple rule!  If you
can't find previous posts let me know and I'll dig some up within a day or
two.  Busy at work here....

Monty

-----Original Message-----
From: alekseyandreev [mailto:andreev@quorum.ru]
Sent: Monday, November 18, 2002 10:03 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Help me please to correct error


While I have warning for the grammar?
How shall I change it ? 
Can I get correct grammar without changing 
parentheses positions ?

test :
  (   A B 
    | C D 
  )
  | ( A D )
  ;

warning: nondeterminism upon
    k==1:A
    k==2:D
    k==3:EOF



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hrvoje.nezic at envox-lab.hr  Tue Nov 19 02:35:50 2002
From: hrvoje.nezic at envox-lab.hr (Hrvoje Nezic)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Problem with ANTLR for C++
Message-ID: <003601c28fb7$6f6df720$1301a8c0@envox.local.hr>

I built and tried the Calc example with ANTLR C++.

When syntax of the input string is correct, it works ok,
but if it is not (like below where there is an erroneous "-" character),
then I get an exception with garbage instead of a meaningful
message:

1+3*10-2
exception: ???????????????????????????????????????????}?@

Perhaps someone could give me a clue why this is happening.

Regards,
Hrvoje Nezic



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hrvoje.nezic at envox-lab.hr  Tue Nov 19 02:49:28 2002
From: hrvoje.nezic at envox-lab.hr (Hrvoje Nezic)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] ANTLR C++ / Unicode / hand-written lexer
Message-ID: <000701c28fb9$5f34e920$1301a8c0@envox.local.hr>

I have a legacy project written in C/C++
using Zyacc. 

I like the concept of ANTLR very much and I thought
I could use it to rewrite the project.

However, I realised there would be some problems.

I need to use Unicode, and as far as I can see,
ANTLR for C++ doesn't support Unicode, as well
as PCCTS. 

Perhaps I could write lexical analyser by hand or use
some other tool, and use ANTLR to generate syntax
analyser and tree parser. Is it possible?

I would appreciate any help.

Regards,
Hrvoje Nezic



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Nov 19 03:29:56 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Problem with ANTLR for C++
In-Reply-To: <003601c28fb7$6f6df720$1301a8c0@envox.local.hr>; from hrvoje.nezic@envox-lab.hr on Tue, Nov 19, 2002 at 11:35:50AM +0100
References: <003601c28fb7$6f6df720$1301a8c0@envox.local.hr>
Message-ID: <20021119122956.C24957@cs.utwente.nl>

Hi,

On Tue, Nov 19, 2002 at 11:35:50AM +0100, Hrvoje Nezic wrote:
> Perhaps someone could give me a clue why this is happening.

I see there's some overrides of what() missing in exception antlr's
hierarchy. I'll see if I can fix that in the repository. A quick fix for
the example is catching a ANTLRException and using the getMessage() method
to get the error message. I'll fix the example as well.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Xander: "Buffy, we need to do something *now*"
  Angel: "We need a distraction."
  Buffy: "Right."
  Angel: "What are you going to do?"
  Buffy: "I'm going to kill them all. That oughtta distract 'em..."


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dani at optsol.ro  Tue Nov 19 04:28:20 2002
From: dani at optsol.ro (DaniCMON)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] antlr java code for c headres (.h) files
Message-ID: <ardap4+8qpo@eGroups.com>

hi,
My problem is a javaParser (so, generates java code) for c++ files 
headers . I need a grammar for that ! Can somebody help me? any 
ideas ?
thanx


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hrvoje.nezic at envox-lab.hr  Tue Nov 19 07:28:45 2002
From: hrvoje.nezic at envox-lab.hr (Hrvoje Nezic)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] C++ unicode example
Message-ID: <000701c28fe0$5e122950$1301a8c0@envox.local.hr>

I tried the unicode example for C++, using Visual C++ 6.0 .

This example doesn't compile.

Compiler splits _tokenSet_0_data_[] array into smaller lines
like this:
    ....  4294967295UL, 429
4967295UL, 4294967295UL, ....

which is not correct.

Also, compiler doesn't recognize characters: '\ufffe'
("unrecognized character escape sequence"). 

Regards,
Hrvoje Nezic



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Nov 19 08:03:45 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] C++ unicode example
In-Reply-To: <000701c28fe0$5e122950$1301a8c0@envox.local.hr>; from hrvoje.nezic@envox-lab.hr on Tue, Nov 19, 2002 at 04:28:45PM +0100
References: <000701c28fe0$5e122950$1301a8c0@envox.local.hr>
Message-ID: <20021119170344.F24957@cs.utwente.nl>

Hi,

On Tue, Nov 19, 2002 at 04:28:45PM +0100, Hrvoje Nezic wrote:
> I tried the unicode example for C++, using Visual C++ 6.0 .

Did you notice the NOT_WORKING file in the directory ;)

C++ mode does not support unicode. An enormous amount of tweaking and work
is needed to fix it generically. There is one patch in the archives that
will fix it somewhat. Also in the archives is a longish thread about
unicode and C++ mode.

In short I don't have the time to make it work. Basically it could be a
antlr 3 item. Since it will be a pain to make in the current version
(probably different codegenerator (or submode for it) needed and a
thoroughly hacked support library).

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wit is cultured insolence. --- Aristotle

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hrvoje.nezic at envox-lab.hr  Tue Nov 19 08:32:32 2002
From: hrvoje.nezic at envox-lab.hr (Hrvoje Nezic)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] C++ unicode example
References: <000701c28fe0$5e122950$1301a8c0@envox.local.hr> <20021119170344.F24957@cs.utwente.nl>
Message-ID: <001b01c28fe9$494ead00$1301a8c0@envox.local.hr>

Generally, it seems to me that it shouldn't be hard
to support Unicode in Visual C++ because it has _TCHAR type,
literal constants L"...." and _T ("....") etc.

I don't know the situation in Unix, and of course, I understand
that it could present lots of problems regarding the current
implementation.

Regards,
Hrvoje

----- Original Message -----
From: "Ric Klaren" <klaren@cs.utwente.nl>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, November 19, 2002 5:03 PM
Subject: Re: [antlr-interest] C++ unicode example


> Hi,
>
> On Tue, Nov 19, 2002 at 04:28:45PM +0100, Hrvoje Nezic wrote:
> > I tried the unicode example for C++, using Visual C++ 6.0 .
>
> Did you notice the NOT_WORKING file in the directory ;)
>
> C++ mode does not support unicode. An enormous amount of tweaking and work
> is needed to fix it generically. There is one patch in the archives that
> will fix it somewhat. Also in the archives is a longish thread about
> unicode and C++ mode.
>
> In short I don't have the time to make it work. Basically it could be a
> antlr 3 item. Since it will be a pain to make in the current version
> (probably different codegenerator (or submode for it) needed and a
> thoroughly hacked support library).
>
> Cheers,
>
> Ric
> --
> -----+++++*****************************************************+++++++++--
-----
>     ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
> -----+++++*****************************************************+++++++++--
-----
>   Wit is cultured insolence. --- Aristotle
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From richard.ney at aspect.com  Tue Nov 19 08:36:45 2002
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Missed the token file fix in C# codegen
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE072273F@sac1exch3.aspect.com>

Michael,

You missed the fix I made to genTokenTypes()in the new version where the
second token class for the tree parser gets the same name as the original
token class if your tree parser is in the same file with your lexer and
parser.

-Richard

----------------------------------------------------------------------------
------------------------
Richard Ney	Aspect Communications
Principal Software Engineer
http://www.aspect.com <http://www.aspect.com>
Main:  408.325.2200
mailto:richard.ney@aspect.com <mailto:richard.ney@aspect.com>
SJ Office: 408.325.2464
    	Home Office: 916.797.9602
----------------------------------------------------------------------------
------------------------

The Three Laws of Infernal Dynamics:
1. An object in motion will always be headed in the wrong direction.
2. An object at rest will always be in the wrong place.
3. The energy required to change either of these states will always be more
than you wish to expend, but never so much as to make the task appear
prospectively impossible.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20021119/29f3b859/attachment.html
From hrvoje.nezic at envox-lab.hr  Tue Nov 19 08:17:32 2002
From: hrvoje.nezic at envox-lab.hr (Hrvoje Nezic)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] C++ unicode example
References: <000701c28fe0$5e122950$1301a8c0@envox.local.hr> <20021119170344.F24957@cs.utwente.nl>
Message-ID: <000801c28fe7$2dc50860$1301a8c0@envox.local.hr>

> C++ mode does not support unicode. An enormous amount of tweaking and work
> is needed to fix it generically. There is one patch in the archives that
> will fix it somewhat. Also in the archives is a longish thread about
> unicode and C++ mode.
> 
> In short I don't have the time to make it work. Basically it could be a
> antlr 3 item. Since it will be a pain to make in the current version
> (probably different codegenerator (or submode for it) needed and a
> thoroughly hacked support library).

Thanks for your help. Unfortunately, I cannot access archives from 
where I work, but I will check them later.

Regards,
Hrvoje Nezic



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Nov 19 08:53:31 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Missed the token file fix in C# codegen
In-Reply-To: <0F9CBE7F81945C4BB7A32BE6E7656EE072273F@sac1exch3.aspect.com>
Message-ID: <ardqab+p41h@eGroups.com>


> You missed the fix I made to genTokenTypes()in the new version 
where the
> second token class for the tree parser gets the same name as the 
original
> token class if your tree parser is in the same file with your lexer 
and
> parser.

Richard,

I'm not sure I understand the issue that the patch is supposed to 
fix. What behaviour does the codegen exhibit currently that you 
believe is wrong?. 

Micheal

PS    Please bear in mind that 2.7.2a4 has _replaced_ 2.7.2a2.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From richard.ney at aspect.com  Tue Nov 19 09:02:45 2002
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Re: Missed the token file fix in C# codegen
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE00ECD8D@sac1exch3.aspect.com>

If I have a lexer, a parser, and a tree parser in the same grammar file. I
have the exportVocab option on the parser and lexer set to Foo. This
generates the token file named FooTokenTypes.cs containing the class
FooTokenTypes. 

For the tree parser FooTreeParser in the same file the importVocab option is
set to Foo. It generates the token file FooTreeParserTokenTypes.cs with the
class FooTokenTypes in it. This causes a compiler error since there is now
two classes with the same name is in two different files. My fix makes it so
the class name for the second file is FooTreeParserTokenTypes.

-Richard

-----Original Message-----
From: micheal_jor [mailto:open.zone@virgin.net] 
Sent: Tuesday, November 19, 2002 8:54 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Missed the token file fix in C# codegen



> You missed the fix I made to genTokenTypes()in the new version
where the
> second token class for the tree parser gets the same name as the
original
> token class if your tree parser is in the same file with your lexer
and
> parser.

Richard,

I'm not sure I understand the issue that the patch is supposed to 
fix. What behaviour does the codegen exhibit currently that you 
believe is wrong?. 

Micheal

PS    Please bear in mind that 2.7.2a4 has _replaced_ 2.7.2a2.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From kevinrule at hotmail.com  Tue Nov 19 21:41:00 2002
From: kevinrule at hotmail.com (kevinrule)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] how to praser a '\' in antlr
Message-ID: <arf79c+7cma@eGroups.com>

hi, all:
can any one tell me how to praser a single '\'(back-slash) character 
in antlr?

a thanks ahead 
Kev


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Tue Nov 19 22:13:26 2002
From: gackle at shaw.ca (Daniel Gackle)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] Does tree parser have to export its own token types?
Message-ID: <NEBBKKODFMOCLEEIOELFOEKPCJAA.gackle@shaw.ca>

Couldn't find an answer in the archives or FAQ, though it seems like an
obvious question.  I have a XXXParser which exports vocabulary XXX yielding
XXXTokenTypes.  I then define a tree parser XXXTreeParser and tell it to
import vocabulary XXX.  This works fine, but XXXTreeParser insists on
generating and using its own XXXTreeParserTokenTypes.  This is the exact
same set of tokens and it seems like needless duplication.  My questions:

(1) Is there a way to get the tree parser to simply reuse XXXTokenTypes?
(2) If not, is there some reason why the second token types class is
necessary?

Thanks,
Daniel




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Tue Nov 19 22:35:57 2002
From: gackle at shaw.ca (Daniel Gackle)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] RE: Does tree parser have to export its own token types?
Message-ID: <NEBBKKODFMOCLEEIOELFGELACJAA.gackle@shaw.ca>

Ack.  I just had the novel idea of checking the documentation
and found a partial answer in the "Token Vocabularies" section.
I now understand that if I put my tree parser, parser and lexer
all in the same file and give them all an "exportVocab = XXX"
option, only one XXXTokenTypes will be generated.

But what if I want them in separate files?  It seems that
importVocab lets you make sure that one grammar has access
to another's tokens, but there's no easy way to stop it
from exporting them to its own token space.  Is that correct?

To reiterate, in my case the new grammar isn't defining any
tokens of its own, so for it to export its own personalized
token space is superfluous.

- Daniel


-----Original Message-----
From: Daniel Gackle [mailto:gackle@shaw.ca]
Sent: Tuesday, November 19, 2002 11:13 PM
To: antlr-interest@yahoogroups.com
Subject: Does tree parser have to export its own token types?


Couldn't find an answer in the archives or FAQ, though it seems like an
obvious question.  I have a XXXParser which exports vocabulary XXX yielding
XXXTokenTypes.  I then define a tree parser XXXTreeParser and tell it to
import vocabulary XXX.  This works fine, but XXXTreeParser insists on
generating and using its own XXXTreeParserTokenTypes.  This is the exact
same set of tokens and it seems like needless duplication.  My questions:

(1) Is there a way to get the tree parser to simply reuse XXXTokenTypes?
(2) If not, is there some reason why the second token types class is
necessary?

Thanks,
Daniel




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Nov 20 00:17:45 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] how to praser a '\' in antlr
In-Reply-To: <arf79c+7cma@eGroups.com>
Message-ID: <8C1058A2-FC60-11D6-B537-0030653DE0D6@jguru.com>


On Tuesday, November 19, 2002, at 09:41  PM, kevinrule wrote:

> hi, all:
> can any one tell me how to praser a single '\'(back-slash) character
> in antlr?

Does '\\' work?

Ter

> --
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Nov 20 00:18:31 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] RE: Does tree parser have to export its own token types?
In-Reply-To: <NEBBKKODFMOCLEEIOELFGELACJAA.gackle@shaw.ca>
Message-ID: <A7E0A028-FC60-11D6-B537-0030653DE0D6@jguru.com>


On Tuesday, November 19, 2002, at 10:35  PM, Daniel Gackle wrote:

> Ack.  I just had the novel idea of checking the documentation
> and found a partial answer in the "Token Vocabularies" section.
> I now understand that if I put my tree parser, parser and lexer
> all in the same file and give them all an "exportVocab = XXX"
> option, only one XXXTokenTypes will be generated.
>
> But what if I want them in separate files?  It seems that
> importVocab lets you make sure that one grammar has access
> to another's tokens, but there's no easy way to stop it
> from exporting them to its own token space.  Is that correct?
>
> To reiterate, in my case the new grammar isn't defining any
> tokens of its own, so for it to export its own personalized
> token space is superfluous.

But that extra file isn't hurting anything is it?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amejdi at ertonline.gr  Wed Nov 20 04:54:48 2002
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:09 2004
Subject: [antlr-interest] RE: Does tree parser have to export its own
 token types?
References: <A7E0A028-FC60-11D6-B537-0030653DE0D6@jguru.com>
Message-ID: <3DDB8618.3060300@ertonline.gr>

Something should exist if it is useful not if it doesn't hurt.
I have a question related with tokens too.
Could the lexer have a tokens section like the Parser has?
The reason I would like this is because from within lexer rules I change
the type of the Token which might an imaginary Token.
The workarounds I found are two.
1) Put lexer and parser in the same file and contribute in the same 
token types.So the imaginary tokens exist for the Lexer too.
The disadvantage is that the lexer and parser have to exist in the same
file.
2)Declare a protected empty lexer rule, example
protected IMAGINARY_TOKEN:;
The rule is never called so no complains from antlr and a new Token type
exists for IMAGINARY_TOKEN.
The disadvantage is that code is generated for the empty rule as well, 
which is a waste of resources.
Terence Parr wrote:
> On Tuesday, November 19, 2002, at 10:35  PM, Daniel Gackle wrote:
> 
> 
>>Ack.  I just had the novel idea of checking the documentation
>>and found a partial answer in the "Token Vocabularies" section.
>>I now understand that if I put my tree parser, parser and lexer
>>all in the same file and give them all an "exportVocab = XXX"
>>option, only one XXXTokenTypes will be generated.
>>
>>But what if I want them in separate files?  It seems that
>>importVocab lets you make sure that one grammar has access
>>to another's tokens, but there's no easy way to stop it
>>from exporting them to its own token space.  Is that correct?
>>
>>To reiterate, in my case the new grammar isn't defining any
>>tokens of its own, so for it to export its own personalized
>>token space is superfluous.
> 
> 
> But that extra file isn't hurting anything is it?
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed Nov 20 07:47:59 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] RE: Does tree parser have to export its own 
	token types?
Message-ID: <170826586F3BD511910D0200C110AAA8032B4F0F@memail03.bco-home.com>

Try it.  I believe you can have a tokens section in a lexer.

Monty

-----Original Message-----
From: Anakreon Mejdi [mailto:amejdi@ertonline.gr]
Sent: Wednesday, November 20, 2002 4:55 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] RE: Does tree parser have to export its
own token types?


Something should exist if it is useful not if it doesn't hurt.
I have a question related with tokens too.
Could the lexer have a tokens section like the Parser has?
The reason I would like this is because from within lexer rules I change
the type of the Token which might an imaginary Token.
The workarounds I found are two.
1) Put lexer and parser in the same file and contribute in the same 
token types.So the imaginary tokens exist for the Lexer too.
The disadvantage is that the lexer and parser have to exist in the same
file.
2)Declare a protected empty lexer rule, example
protected IMAGINARY_TOKEN:;
The rule is never called so no complains from antlr and a new Token type
exists for IMAGINARY_TOKEN.
The disadvantage is that code is generated for the empty rule as well, 
which is a waste of resources.
Terence Parr wrote:
> On Tuesday, November 19, 2002, at 10:35  PM, Daniel Gackle wrote:
> 
> 
>>Ack.  I just had the novel idea of checking the documentation
>>and found a partial answer in the "Token Vocabularies" section.
>>I now understand that if I put my tree parser, parser and lexer
>>all in the same file and give them all an "exportVocab = XXX"
>>option, only one XXXTokenTypes will be generated.
>>
>>But what if I want them in separate files?  It seems that
>>importVocab lets you make sure that one grammar has access
>>to another's tokens, but there's no easy way to stop it
>>from exporting them to its own token space.  Is that correct?
>>
>>To reiterate, in my case the new grammar isn't defining any
>>tokens of its own, so for it to export its own personalized
>>token space is superfluous.
> 
> 
> But that extra file isn't hurting anything is it?
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed Nov 20 07:49:34 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] RE: Does tree parser have to export its own 
	token types?
Message-ID: <170826586F3BD511910D0200C110AAA8032B4F10@memail03.bco-home.com>

The parser generator is naive and always writes a XXXTokenTypes for a .g
file whether it is necessary or not.

Monty

-----Original Message-----
From: Daniel Gackle [mailto:gackle@shaw.ca]
Sent: Tuesday, November 19, 2002 10:36 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] RE: Does tree parser have to export its own
token types?


Ack.  I just had the novel idea of checking the documentation
and found a partial answer in the "Token Vocabularies" section.
I now understand that if I put my tree parser, parser and lexer
all in the same file and give them all an "exportVocab = XXX"
option, only one XXXTokenTypes will be generated.

But what if I want them in separate files?  It seems that
importVocab lets you make sure that one grammar has access
to another's tokens, but there's no easy way to stop it
from exporting them to its own token space.  Is that correct?

To reiterate, in my case the new grammar isn't defining any
tokens of its own, so for it to export its own personalized
token space is superfluous.

- Daniel


-----Original Message-----
From: Daniel Gackle [mailto:gackle@shaw.ca]
Sent: Tuesday, November 19, 2002 11:13 PM
To: antlr-interest@yahoogroups.com
Subject: Does tree parser have to export its own token types?


Couldn't find an answer in the archives or FAQ, though it seems like an
obvious question.  I have a XXXParser which exports vocabulary XXX yielding
XXXTokenTypes.  I then define a tree parser XXXTreeParser and tell it to
import vocabulary XXX.  This works fine, but XXXTreeParser insists on
generating and using its own XXXTreeParserTokenTypes.  This is the exact
same set of tokens and it seems like needless duplication.  My questions:

(1) Is there a way to get the tree parser to simply reuse XXXTokenTypes?
(2) If not, is there some reason why the second token types class is
necessary?

Thanks,
Daniel




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amejdi at ertonline.gr  Wed Nov 20 08:49:24 2002
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] RE: Does tree parser have to export its own
 	token types?
References: <170826586F3BD511910D0200C110AAA8032B4F0F@memail03.bco-home.com>
Message-ID: <3DDBBD14.3020208@ertonline.gr>

mzukowski@yci.com wrote:
> Try it.  I believe you can have a tokens section in a lexer.
> 
> Monty

I did 2 months ago but had an error message.
It could be however a message about an other error which I 
misinterpreted because of my ignorance of antlr.
I will try it again though.

Thanks.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From realistic_programmer at yahoo.com  Wed Nov 20 11:31:47 2002
From: realistic_programmer at yahoo.com (realistic_programmer)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Re: heterogeneous AST nodes and AST factory problem
In-Reply-To: <B71CC2F0-FA73-11D6-A513-0030653DE0D6@jguru.com>
Message-ID: <argnv3+k5ug@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> Uh oh...Houston we have a problem...

<delurk>
So, for the sake of those of us playing along at home, what does this 
mean in terms of the suitability of versions of Antlr?  Let's pretend 
that I am using Antlr for real, honest-to-goodness production work.  
Should I use:

- 2.7.1  (last 'stable' release)

- 2.7.2aX, where X appears to be 5 at the moment

Should I use the latest and greatest 2aX release if I am not using 
Heterogeneous ASTs, and 2.7.1 otherwise?

Inquiring minds want to know.

Cordially,
JimG
</delurk>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From yhhf_dy at yahoo.com  Wed Nov 20 12:19:34 2002
From: yhhf_dy at yahoo.com (Fan Yang)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Re: ANTLR DLL with Visual C++ 6.0 (Java 1.3 grammar and  antlr-2.7.2a2)
In-Reply-To: <001401c19eb4$c9136d40$4a919582@bert>
Message-ID: <argqom+q8bl@eGroups.com>

Hi guys,

I'm trying to generate java parser by using java grammar 1.3(1.18) on 
antlr-2.7.2a2. According to Thomas' suggestion I have got static 
library antlr.lib. then I ran antlr.Tool upon java.g and java.tree.g 
and got cpp and hpp files. So far, so good. but when I try to compile 
this project in order to get java parser, I got following errors. 
Would you please tell me what's the problem and how to fix it. thanks 
a lot.

LINK : warning LNK4098: defaultlib "LIBCMT" conflicts with use of 
other libs; use /NODEFAULTLIB:library

antlr.lib(TreeParser.obj) : error LNK2001: unresolved external 
symbol "public: virtual class std::basic_string<char,struct 
std::char_traits<char>,class std::allocator<char> >  __thiscall 
antlr::ASTNULLType::toStringTree(void)const " (?toStringTree@A
STNULLType@antlr@@UBE?AV?$basic_string@DU?$char_traits@D@std@@V?
$allocator@D@2@@std@@XZ)

antlr.lib(TreeParser.obj) : error LNK2001: unresolved external 
symbol "public: virtual class std::basic_string<char,struct 
std::char_traits<char>,class std::allocator<char> >  __thiscall 
antlr::ASTNULLType::toStringList(void)const " (?toStringList@A
STNULLType@antlr@@UBE?AV?$basic_string@DU?$char_traits@D@std@@V?
$allocator@D@2@@std@@XZ)

antlr.lib(TreeParser.obj) : error LNK2001: unresolved external 
symbol "public: virtual class std::basic_string<char,struct 
std::char_traits<char>,class std::allocator<char> >  __thiscall 
antlr::ASTNULLType::toString(void)const " (?toString@ASTNULLTy
pe@antlr@@UBE?AV?$basic_string@DU?$char_traits@D@std@@V?
$allocator@D@2@@std@@XZ)

antlr.lib(TreeParser.obj) : error LNK2001: unresolved external 
symbol "public: virtual void __thiscall antlr::ASTNULLType::setType
(int)" (?setType@ASTNULLType@antlr@@UAEXH@Z)

antlr.lib(TreeParser.obj) : error LNK2001: unresolved external 
symbol "public: virtual void __thiscall antlr::ASTNULLType::setText
(class std::basic_string<char,struct std::char_traits<char>,class 
std::allocator<char> > const &)" (?setText@ASTNULLTyp
e@antlr@@UAEXABV?$basic_string@DU?$char_traits@D@std@@V?
$allocator@D@2@@std@@@Z)

...

Debug/JavaJourney.exe : fatal error LNK1120: 24 unresolved externals
Error executing link.exe.

JavaParser.exe - 25 error(s), 6 warning(s)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Nov 20 13:52:40 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Re: heterogeneous AST nodes and AST factory problem
In-Reply-To: <argnv3+k5ug@eGroups.com>
Message-ID: <63DC34E4-FCD2-11D6-B537-0030653DE0D6@jguru.com>


On Wednesday, November 20, 2002, at 11:31  AM, realistic_programmer 
wrote:

> --- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
>> Uh oh...Houston we have a problem...
>
> <delurk>
> So, for the sake of those of us playing along at home, what does this
> mean in terms of the suitability of versions of Antlr?  Let's pretend
> that I am using Antlr for real, honest-to-goodness production work.
> Should I use:
>
> - 2.7.1  (last 'stable' release)
>
> - 2.7.2aX, where X appears to be 5 at the moment
>
> Should I use the latest and greatest 2aX release if I am not using
> Heterogeneous ASTs, and 2.7.1 otherwise?
>
> Inquiring minds want to know.

JimG,

howdy.  2.7.2a5 is the answer; particularly if you are not using hetero 
trees.  Almost ready to ship that.  Just trying to finish my semester 
of teaching at USF and will jump all over this.

The question I asked has been resolved in my head after discussions.  I 
will get to it during turkey week :)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Nov 20 12:01:55 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] RE: Does tree parser have to export its own token types?
In-Reply-To: <3DDB8618.3060300@ertonline.gr>
Message-ID: <EB4CFFB5-FCC2-11D6-B537-0030653DE0D6@jguru.com>


On Wednesday, November 20, 2002, at 04:54  AM, Anakreon Mejdi wrote:

> Something should exist if it is useful not if it doesn't hurt.
> I have a question related with tokens too.

At the time you build your grammar you don't know if it will be useful. 
  If you want a parser to derive from that one, you will need it, right? 
  Better to generate unnecessary than adding a switch, wouldn't you say?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Wed Nov 20 13:56:30 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Re: heterogeneous AST nodes and AST factory problem
In-Reply-To: <argnv3+k5ug@eGroups.com>
Message-ID: <arh0ee+5vg5@eGroups.com>


> > Uh oh...Houston we have a problem...
> 
> <delurk>
> So, for the sake of those of us playing along at home, what does 
this 
> mean in terms of the suitability of versions of Antlr?  Let's 
pretend 
> that I am using Antlr for real, honest-to-goodness production work.

Are you having any problems with the version of ANTLR that you are 
using for this production work?

> Should I use:
> 
> - 2.7.1  (last 'stable' release)
> 
> - 2.7.2aX, where X appears to be 5 at the moment

It depends on the question asked above. It's fair to say that 2.7.2a2 
has undergone heavy testing over the course of the year. It certainly 
qualifies as production quality for many people.

I'd advise obtaining a copy of 2.7.1 and 2.7.2a2 at the very least. 
Try 2.7.2a2 on your project and only regress to 2.7.1 if you find a 
problem that 2.7.2a2 introduces. I doubt most people will find any 
such problem.

> Should I use the latest and greatest 2aX release if I am not using 
> Heterogeneous ASTs, and 2.7.1 otherwise?

As for versions later than 2.7.2a2, I'd re-read Ter's post "new Java 
grammar AND 2.7.2a4 10-27-2002 version available" to decide whether 
2.7.2a4 and later versions have a fix for an issue that's holding you 
back. If not, you should try them anyway against a copy of your 
project(s). Any issues you report will help to improve ANTLR for us 
all.

<aside>
Are you using or, have you wanted to use Heterogeneous ASTs with 
ANTLR?
</aside>

Enjoy!,

Micheal

PS   If you try 2.7.2a4+ and find no issues, please consider posting 
a message to that effect with some summary information about the 
project(s) you used ANTLR 2.7.2a4+ with. Knowing what works is as 
important as knowing what doesn't  ;-)



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From vijay at mindspring.com  Wed Nov 20 17:07:01 2002
From: vijay at mindspring.com (dharbari2)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Parsing Java Source
Message-ID: <arhbjl+dda8@eGroups.com>


Hi! 
I am a antlr newbie. I'm looking for a simple example of parsing 
a .java file, making some basic changes (depending on user inputs) 
and saving it as another modified .java file. 
Any pointers would be appreciated.
Thanks

Vijay


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Thu Nov 21 06:45:50 2002
From: cintyram at yahoo.com (Sriram Durbha)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] how to praser a '\' in antlr
In-Reply-To: <arf79c+7cma@eGroups.com>
Message-ID: <20021121144550.1863.qmail@web40011.mail.yahoo.com>

do you mean any where ? or as a continuation character at the end of a
line?


--- kevinrule <kevinrule@hotmail.com> wrote:
> hi, all:
> can any one tell me how to praser a single '\'(back-slash) character 
> in antlr?
> 
> a thanks ahead 
> Kev
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Web Hosting - Let the expert host your site
http://webhosting.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tomdz at cs.tu-berlin.de  Thu Nov 21 09:59:30 2002
From: tomdz at cs.tu-berlin.de (Thomas Dudziak)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Re: ANTLR DLL with Visual C++ 6.0 (Java 1.3 grammar
 and  antlr-2.7.2a2)
Message-ID: <Pine.SOL.4.44.0211211855010.16558-100000@reticuli.cs.tu-berlin.de>

Hi,

I can't check in detail at the moment, but from the errors you posted, it
might be possible that you used different versions of the runtime library
for the antlr library and for the resulting parser (such as static single
threaded vs. dynamic multi threaded). Try setting both to the same version
(probably multithreaded dll) and see if that works.

Ciao, Tom



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From wiggjd at sbu.ac.uk  Fri Nov 22 03:13:51 2002
From: wiggjd at sbu.ac.uk (David Wigg)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Re: how to praser a '\' in antlr
Message-ID: <3DDE116F.1050104@sbu.ac.uk>

I use the following for whitespace which seems to work. I am 
using ANTLR 2.7.1 to generate a parser in C++.

// Whitespace -- ignored
Whitespace	
	:	(	( ' ' |'\t' | '\f' )
		// handle newlines
	|	(	"\r\n"  // MS
		|	'\r'    // Mac
		|	'\n'    // Unix
		)	{ newline(); }
		// handle continuation lines
	|	(	"\\\r\n"  // MS
		|	"\\\r"    // Mac
		|	"\\\n"    // Unix
		)	{ deferredNewline(); }
	)	
	{ _ttype = ANTLR_USE_NAMESPACE(antlr)Token::SKIP; }
	;

David Wigg
Researcher
South Bank University
London, UK.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amejdi at ertonline.gr  Fri Nov 22 04:25:20 2002
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] RE: Does tree parser have to export its own
 token types?
References: <EB4CFFB5-FCC2-11D6-B537-0030653DE0D6@jguru.com>
Message-ID: <3DDE2230.9000408@ertonline.gr>

Yes.
Yesterday I wrote my first tree parser.
It was far easier then I thought.
Anakreon

Terence Parr wrote:
> On Wednesday, November 20, 2002, at 04:54  AM, Anakreon Mejdi wrote:
> 
> 
>>Something should exist if it is useful not if it doesn't hurt.
>>I have a question related with tokens too.
> 
> 
> At the time you build your grammar you don't know if it will be useful. 
>   If you want a parser to derive from that one, you will need it, right? 
>   Better to generate unnecessary than adding a switch, wouldn't you say?
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri Nov 22 05:17:20 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Disconnected from internet for a few days
Message-ID: <20021122141719.J24957@cs.utwente.nl>

Hi,

Since last wednesday, my university was disconnected from the internet, it
now seems that the connection is functional again. So if anyone sent me
anything important since wednesday they better resent it.

It seems the uni is hit by a maniac, wednesday he managed to torch down the
point of presence of the university (our uplink to the internet), and today
he attempted to start a fire in the computer science building (where I
work) :(

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I think we better split up."
  "Good idea. We can do more damage that way."
  --- Ghostbusters


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dromano at attglobal.net  Fri Nov 22 15:23:20 2002
From: dromano at attglobal.net (dvromano)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] skipping input to newline character
Message-ID: <arme98+8mp8@eGroups.com>

I have a line oriented grammar. Under some conditions determined only 
after matching a pattern in the parser, I want to discard the 
reminder of the line. In most cases, the contents of the remainder of 
the line contains arbitrary characters and symbols.

I tried to use: consumeUntil('\n') but I get an occasional 
TokenStreamRecognitionException on a character or symbol not 
expected. In additon, what I presume to be the input character 
pointer does not advance past that point. (not sure exactly how it 
works:-))

How do I advance past the unwanted characters, until the newline 
character is reached, based on a decision made while parsing?  

In JavaCC I would use an alternative scanner (lexer) state to define 
all characters that are not a newline as skip characters. Can I put 
the ANTLR lexer into an alternative state similar to JavaCC? How?

Can't use facilities from the lexer (ie. setting token type 
to 'antlr::Token::SKIP') as the characters/symbols are valid in 
normal context.

Help would be greatly appreciated.




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Fri Nov 22 16:23:19 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Lexer token type problem
Message-ID: <000801c29286$867f2e30$0200a8c0@NOTEBOOK>

Hi all,
I have a lexer with the following rules (and others)

CRNL_PARAGRAPH
 : ('\r' '\n' 'T')=>PARAGRAPH
 | ('\r' '\n' ~('T')) => CRNL ;

protected 
CRNL 
 : '\r' '\n'  
  ;
 
 
protected 
PARAGRAPH
 : "\r\nT" 
 ;


I expected to get token types  PARAGRAPH and CRNL returned but only got CRNL_PARAGRAPH even though the rules PARAGRAPH and CRNL were called.

changing  CRNL_PARAGRAPH to

CRNL_PARAGRAPH
 : ('\r' '\n' 'T')=>PARAGRAPH {$setType(PARAGRAPH);}
 | ('\r' '\n' ~('T')) => CRNL {$setType(CRNL);}
 ;

fixed the problem but I am still not clear why the original version is not valid.

Any comments?

matthew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20021123/c8d901ec/attachment.html
From tomrstrickland at hotmail.com  Mon Nov 25 01:07:00 2002
From: tomrstrickland at hotmail.com (tom strickland)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] hu:?
Message-ID: <F89NgOcljYWDuNePJgz00008bed@hotmail.com>

(We take you now to the Oval Office...)

George:
  Condi! Nice to see you. What's happening?
Condi:
  Sir, I have the report here about the new leader of China.
George:
  Great. Lay it on me.
Condi: Hu is the new leader of China.
George:
  That's what I want to know.
Condi:
  That's what I'm telling you.
George:
  That's what I'm asking you. Who is the new leader of China?
Condi:
  Yes.
George:
  I mean the fellow's name.
Condi:
  Hu.
George:
  The guy in China.
Condi:
  Hu.
George:
  The new leader of China.
Condi:
  Hu.
George:
  The Chinaman!
Condi:
  Hu is leading China.
George:
  Now whaddya' asking me for?
Condi:
  I'm telling you Hu is leading China.
George:
  Well, I'm asking you. Who is leading China?
Condi:
  That's the man's name.
George:
  That's who's name?
Condi:
  Yes.
George:
  Will you or will you not tell me the name of the new leader of
  China?
Condi:
  Yes, sir.
George:
  Yassir? Yassir Arafat is in China? I thought he was in the Middle
  East.
Condi:
  That's correct.
George:
  Then who is in China?
Condi:
  Yes, sir.
George:
  Yassir is in China?
Condi:
  No, sir.
George:
  Then who is?
Condi:
  Yes, sir.
George:
  Yassir?
Condi:
  No, sir.
George:
  Look, Condi. I need to know the name of the new leader of China.
  Get me the Secretary General of the U.N. on the phone.
Condi:
  Kofi?
George:
  No, thanks.
Condi:
  You want Kofi?
George:
  No.
Condi:
  You don't want Kofi.
George:
  No. But now that you mention it, I could use a glass of milk. And
  then get me the U.N.
Condi:
  Yes, sir.
George:
  Not Yassir! The guy at the U.N.
Condi:
  Kofi?
George:
  Milk! Will you please make the call?
Condi:
  And call who?
George:
  Who is the guy at the U.N?
Condi:
  Hu is the guy in China.
George:
  Will you stay out of China?!
Condi:
  Yes, sir.
George:
  And stay out of the Middle East! Just get me the guy at the U.N.
Condi:
  Kofi.
George:
  All right! With cream and two sugars. Now get on the phone.
(Condi picks up the phone.)
Condi:
  Rice, here.
George:
  Rice? Good idea. And a couple of egg rolls, too. Maybe we should
  send some to the guy in China. And the Middle East. Can you get
  Chinese food in the Middle East?


_________________________________________________________________
The new MSN 8: smart spam protection and 2 months FREE*  
http://join.msn.com/?page=features/junkmail


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Nov 25 01:19:37 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Re: heterogeneous AST nodes and AST factory problem
In-Reply-To: <argnv3+k5ug@eGroups.com>; from realistic_programmer@yahoo.com on Wed, Nov 20, 2002 at 07:31:47PM -0000
References: <B71CC2F0-FA73-11D6-A513-0030653DE0D6@jguru.com> <argnv3+k5ug@eGroups.com>
Message-ID: <20021125101935.A14214@cs.utwente.nl>

Hi,

On Wed, Nov 20, 2002 at 07:31:47PM -0000, realistic_programmer wrote:
> So, for the sake of those of us playing along at home, what does this 
> mean in terms of the suitability of versions of Antlr?  Let's pretend 
> that I am using Antlr for real, honest-to-goodness production work.  
> Should I use:
> 
> - 2.7.1  (last 'stable' release)

In 2.7.1 I personally wouldn't use. I'd grab a bugfix develsnapshot from my
antlr pages:

http://wwwhome.cs.utwente.nl/~klaren/antlr (the one before ASTFactory
rework) it contains I think all the serious bugfixes.

> - 2.7.2aX, where X appears to be 5 at the moment

I use 2.7.2aX for my development work, if you're using java then I think
that's the best release to grab. C++ probably as well.

> Should I use the latest and greatest 2aX release if I am not using 
> Heterogeneous ASTs, and 2.7.1 otherwise?

The heterogenous AST implementation in antlr contains quite some
imperfections. Basically I'd advice against using it unless you don't mind
running into (and having to work around) the problems you encounter.

IMHO you won't get hurt if you grab a 2.7.2aX release. Most problems
reported are with 2.7.1 period. (but standard disclaimer applies, no
software is perfect)

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From eric.chastan at netcelo.com  Mon Nov 25 04:23:50 2002
From: eric.chastan at netcelo.com (ericch2003)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Re: Binary files with byte counts
In-Reply-To: <21883.189.742.959284845@eGroups.com>
Message-ID: <art4om+nrbl@eGroups.com>

Hello,

I have the same problem, did you find that predicates are the better
way to manage it ?
Can someone explain me how to use the predicates in this case ?


Thanks in advance .

Eric.



--- In antlr-interest@y..., Jonathan Sergent <sergent@xxx.xxx.xxxx wrote:
> /// Doug Erickson <doug.erickson@P...>:
>  ] If I understand your question correctly, the following solution
is one
>  ] way to do it.  I have a file format that has chunks of variable
length
>  ] of unparsed binary data embedded in parsed text.  In the lexer, I
create
>  ] special tokens that hold the binary data, and syntactic predicates to
>  ] count the bytes as I add it to the buffer.  Maybe it's hunky, but it
>  ] works, so it looks pretty good to me.
> 
> Oops.  Yeah.  I didn't think about semantic predicates inside loops
> to terminate them.  But this seems like what I want.  I'll fiddle with
> it some.
> 
> If other people have ideas, send to me, and I will summarize to the
> list (along with whatever sort of solution I find).
> 
> Thanks.
> 
> 
> -- 
> Jonathan Sergent / sergent@E... / (650) 786-3952


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From a_rueckert at gmx.net  Mon Nov 25 07:07:52 2002
From: a_rueckert at gmx.net (Andreas Rueckert)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Re: Binary files with byte counts
In-Reply-To: <art4om+nrbl@eGroups.com>
References: <art4om+nrbl@eGroups.com>
Message-ID: <02112516093702.00816@hun.bre.de>

Hi!

On Mon, 25 Nov 2002 ericch2003 wrote:
> Hello,
> 
> I have the same problem, did you find that predicates are the better
> way to manage it ?

One problem might be the performance? It depends on your amount of data, but
parsing jar Files with the Classfile grammar could be faster...

--<snip>--

Ciao,
Andreas

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Nov 25 08:14:30 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Lexer token type problem
Message-ID: <170826586F3BD511910D0200C110AAA8032B4F58@memail03.bco-home.com>

The lexer always assigns the token type as the type of the rule.  That way
Numbers don't come out as DIGITs, etc.  Simply $setType() as an action after
PARAGRAPH and CRNL.  It's a little trickier if you need to test for literals
too.  An example of that is in the ID rule of the GCC parser.
http://www.codetransform.com/gcc.html.

Monty

-----Original Message-----
From: Matthew Ford [mailto:Matthew.Ford@forward.com.au]
Sent: Friday, November 22, 2002 4:23 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Lexer token type problem


Hi all,
I have a lexer with the following rules (and others)

CRNL_PARAGRAPH
 : ('\r' '\n' 'T')=>PARAGRAPH
 | ('\r' '\n' ~('T')) => CRNL ;

protected 
CRNL 
 : '\r' '\n'  
  ;
 
 
protected 
PARAGRAPH
 : "\r\nT" 
 ;


I expected to get token types  PARAGRAPH and CRNL returned but only got
CRNL_PARAGRAPH even though the rules PARAGRAPH and CRNL were called.

changing  CRNL_PARAGRAPH to

CRNL_PARAGRAPH
 : ('\r' '\n' 'T')=>PARAGRAPH {$setType(PARAGRAPH);}
 | ('\r' '\n' ~('T')) => CRNL {$setType(CRNL);}
 ;

fixed the problem but I am still not clear why the original version is not
valid.

Any comments?

matthew

Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Mon Nov 25 09:24:35 2002
From: cintyram at yahoo.com (Sriram Durbha)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Lexer token type problem
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4F58@memail03.bco-home.com>
Message-ID: <20021125172435.34025.qmail@web40018.mail.yahoo.com>

hi ,
 i am writing a function that REALizes all numbers in a string and
returns teh putput as a string ,
 ie. if input is :       a = 2 , b =.345 ;
 out put is      :       a = 2.0 , b = 0.345 ;

all other characters should be unmodified;

when i write the grammar like this , i get errors,


file [returns string s] {s = "something" ; }: ( ( (design_unit )+ ) ? )
 EOF ;

... more lines.. 

the code generated is ..  : in TopLevelPArser.hpp

public: void file(
		returns string s
  );

 ..
PLease advise what i have to do, is the returns feature only for tree
grammars??

cheers
ram

 

--- mzukowski@yci.com wrote:
> The lexer always assigns the token type as the type of the rule. 
> That way
> Numbers don't come out as DIGITs, etc.  Simply $setType() as an
> action after
> PARAGRAPH and CRNL.  It's a little trickier if you need to test for
> literals
> too.  An example of that is in the ID rule of the GCC parser.
> http://www.codetransform.com/gcc.html.
> 
> Monty
> 
> -----Original Message-----
> From: Matthew Ford [mailto:Matthew.Ford@forward.com.au]
> Sent: Friday, November 22, 2002 4:23 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Lexer token type problem
> 
> 
> Hi all,
> I have a lexer with the following rules (and others)
> 
> CRNL_PARAGRAPH
>  : ('\r' '\n' 'T')=>PARAGRAPH
>  | ('\r' '\n' ~('T')) => CRNL ;
> 
> protected 
> CRNL 
>  : '\r' '\n'  
>   ;
>  
>  
> protected 
> PARAGRAPH
>  : "\r\nT" 
>  ;
> 
> 
> I expected to get token types  PARAGRAPH and CRNL returned but only
> got
> CRNL_PARAGRAPH even though the rules PARAGRAPH and CRNL were called.
> 
> changing  CRNL_PARAGRAPH to
> 
> CRNL_PARAGRAPH
>  : ('\r' '\n' 'T')=>PARAGRAPH {$setType(PARAGRAPH);}
>  | ('\r' '\n' ~('T')) => CRNL {$setType(CRNL);}
>  ;
> 
> fixed the problem but I am still not clear why the original version
> is not
> valid.
> 
> Any comments?
> 
> matthew
> 
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus  Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Nov 25 11:16:36 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Lexer token type problem
Message-ID: <170826586F3BD511910D0200C110AAA8032B4F5F@memail03.bco-home.com>

returns is fine for parsers and lexers.  What are the errors?

Monty

-----Original Message-----
From: Sriram Durbha [mailto:cintyram@yahoo.com]
Sent: Monday, November 25, 2002 9:25 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Lexer token type problem


hi ,
 i am writing a function that REALizes all numbers in a string and
returns teh putput as a string ,
 ie. if input is :       a = 2 , b =.345 ;
 out put is      :       a = 2.0 , b = 0.345 ;

all other characters should be unmodified;

when i write the grammar like this , i get errors,


file [returns string s] {s = "something" ; }: ( ( (design_unit )+ ) ? )
 EOF ;

... more lines.. 

the code generated is ..  : in TopLevelPArser.hpp

public: void file(
		returns string s
  );

 ..
PLease advise what i have to do, is the returns feature only for tree
grammars??

cheers
ram

 

--- mzukowski@yci.com wrote:
> The lexer always assigns the token type as the type of the rule. 
> That way
> Numbers don't come out as DIGITs, etc.  Simply $setType() as an
> action after
> PARAGRAPH and CRNL.  It's a little trickier if you need to test for
> literals
> too.  An example of that is in the ID rule of the GCC parser.
> http://www.codetransform.com/gcc.html.
> 
> Monty
> 
> -----Original Message-----
> From: Matthew Ford [mailto:Matthew.Ford@forward.com.au]
> Sent: Friday, November 22, 2002 4:23 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Lexer token type problem
> 
> 
> Hi all,
> I have a lexer with the following rules (and others)
> 
> CRNL_PARAGRAPH
>  : ('\r' '\n' 'T')=>PARAGRAPH
>  | ('\r' '\n' ~('T')) => CRNL ;
> 
> protected 
> CRNL 
>  : '\r' '\n'  
>   ;
>  
>  
> protected 
> PARAGRAPH
>  : "\r\nT" 
>  ;
> 
> 
> I expected to get token types  PARAGRAPH and CRNL returned but only
> got
> CRNL_PARAGRAPH even though the rules PARAGRAPH and CRNL were called.
> 
> changing  CRNL_PARAGRAPH to
> 
> CRNL_PARAGRAPH
>  : ('\r' '\n' 'T')=>PARAGRAPH {$setType(PARAGRAPH);}
>  | ('\r' '\n' ~('T')) => CRNL {$setType(CRNL);}
>  ;
> 
> fixed the problem but I am still not clear why the original version
> is not
> valid.
> 
> Any comments?
> 
> matthew
> 
> Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jbb at acm.org  Mon Nov 25 11:55:07 2002
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Lexer token type problem
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4F5F@memail03.bco-home.com>
	(mzukowski@yci.com)
References: <170826586F3BD511910D0200C110AAA8032B4F5F@memail03.bco-home.com>
Message-ID: <E18GPJz-0006xt-00@gecko.home.org>

I am not an expert in Antlr's meta-language, but it seems that the
returns keyword must go outside the []'s.

So I think do this:

file returns [string s] {s = "something" ; }: ( ( (design_unit )+ ) ? )
 EOF ;

instead of this:

file [returns string s] {s = "something" ; }: ( ( (design_unit )+ ) ? )
 EOF ;

Hope this helps....
-- 
	-jbb

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Mon Nov 25 12:00:00 2002
From: cintyram at yahoo.com (Sriram Durbha)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Lexer token type problem
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4F5F@memail03.bco-home.com>
Message-ID: <20021125200000.10105.qmail@web40011.mail.yahoo.com>

hi monty,
 earlier my code was wrong,
 now i corrected it but still i have a strange error;
please see 

http://www.geocities.com/cintyram/antlr/errors/error.html

it works fine when the rule has to return char or int, but not when
string;
also i have included the library #include <string> in teh headers
section along with  iostream.. so no problem due to that ;
please advise,
cheers
ram

--- mzukowski@yci.com wrote:
> returns is fine for parsers and lexers.  What are the errors?
> 
> Monty
> 
> -----Original Message-----
> From: Sriram Durbha [mailto:cintyram@yahoo.com]
> Sent: Monday, November 25, 2002 9:25 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] Lexer token type problem
> 
> 
> hi ,
>  i am writing a function that REALizes all numbers in a string and
> returns teh putput as a string ,
>  ie. if input is :       a = 2 , b =.345 ;
>  out put is      :       a = 2.0 , b = 0.345 ;
> 
> all other characters should be unmodified;
> 
> when i write the grammar like this , i get errors,
> 
> 
> file [returns string s] {s = "something" ; }: ( ( (design_unit )+ ) ?
> )
>  EOF ;
> 
> ... more lines.. 
> 
> the code generated is ..  : in TopLevelPArser.hpp
> 
> public: void file(
> 		returns string s
>   );
> 
>  ..
> PLease advise what i have to do, is the returns feature only for tree
> grammars??
> 
> cheers
> ram
> 
>  
> 
> --- mzukowski@yci.com wrote:
> > The lexer always assigns the token type as the type of the rule. 
> > That way
> > Numbers don't come out as DIGITs, etc.  Simply $setType() as an
> > action after
> > PARAGRAPH and CRNL.  It's a little trickier if you need to test for
> > literals
> > too.  An example of that is in the ID rule of the GCC parser.
> > http://www.codetransform.com/gcc.html.
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: Matthew Ford [mailto:Matthew.Ford@forward.com.au]
> > Sent: Friday, November 22, 2002 4:23 PM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Lexer token type problem
> > 
> > 
> > Hi all,
> > I have a lexer with the following rules (and others)
> > 
> > CRNL_PARAGRAPH
> >  : ('\r' '\n' 'T')=>PARAGRAPH
> >  | ('\r' '\n' ~('T')) => CRNL ;
> > 
> > protected 
> > CRNL 
> >  : '\r' '\n'  
> >   ;
> >  
> >  
> > protected 
> > PARAGRAPH
> >  : "\r\nT" 
> >  ;
> > 
> > 
> > I expected to get token types  PARAGRAPH and CRNL returned but only
> > got
> > CRNL_PARAGRAPH even though the rules PARAGRAPH and CRNL were
> called.
> > 
> > changing  CRNL_PARAGRAPH to
> > 
> > CRNL_PARAGRAPH
> >  : ('\r' '\n' 'T')=>PARAGRAPH {$setType(PARAGRAPH);}
> >  | ('\r' '\n' ~('T')) => CRNL {$setType(CRNL);}
> >  ;
> > 
> > fixed the problem but I am still not clear why the original version
> > is not
> > valid.
> > 
> > Any comments?
> > 
> > matthew
> > 
> > Your use of Yahoo! Groups is subject to the Yahoo! Terms of
> Service. 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
> __________________________________________________
> Do you Yahoo!?
> Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
> http://mailplus.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus  Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dromano at attglobal.net  Mon Nov 25 11:59:25 2002
From: dromano at attglobal.net (dvromano)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] ANTLR grammer documenter
Message-ID: <artvet+v9va@eGroups.com>

Looking for a tool that would take as input an ANTLR grammar and 
automatically generate documention and graphs in a similar fashion as 
Doxygen (http://www.doxygen.org) does - any leads?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Mon Nov 25 12:38:06 2002
From: cintyram at yahoo.com (Sriram Durbha)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Lexer token type problem
In-Reply-To: <E18GPJz-0006xt-00@gecko.home.org>
Message-ID: <20021125203806.21538.qmail@web40008.mail.yahoo.com>

youre right,
 i had made that change too , and got a funny error;
it works if i use a char or int, but fails if i use a string :))

thanks any way;
cheers
ram

 
--- jbb@acm.org wrote:
> I am not an expert in Antlr's meta-language, but it seems that the
> returns keyword must go outside the []'s.
> 
> So I think do this:
> 
> file returns [string s] {s = "something" ; }: ( ( (design_unit )+ ) ?
> )
>  EOF ;
> 
> instead of this:
> 
> file [returns string s] {s = "something" ; }: ( ( (design_unit )+ ) ?
> )
>  EOF ;
> 
> Hope this helps....
> -- 
> 	-jbb
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus  Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From praveen_c at yahoo.com  Mon Nov 25 13:57:02 2002
From: praveen_c at yahoo.com (praveen_c)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] AST rule association.
Message-ID: <aru6be+rmfd@eGroups.com>

I created an AST and I would like to know which rule matched which 
node. While traversing the tree I'd like to use this rule information 
as context info. Not sure if I'm asking the right question. But 
basically I want to differentiate instances of a given Token/AST Node 
based on the rule that matched it. Given an AST how do I find out the 
corresponding rule?

It's probably documented somewhere in the documentation or examples. 
But since I don't exactly know what I'm looking for, it's a bit 
difficult. The only way I can think of, was to subclass and set flags 
on the ASTs using actions.

Thanks,
Praveen.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Nov 25 14:06:57 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] AST rule association.
Message-ID: <170826586F3BD511910D0200C110AAA8032B4F63@memail03.bco-home.com>

>Given an AST how do I find out the corresponding rule?

You put an action in that rule.

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amejdi at ertonline.gr  Tue Nov 26 03:41:25 2002
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Request:External action definitions
References: <170826586F3BD511910D0200C110AAA8032B4F63@memail03.bco-home.com>
Message-ID: <3DE35DE5.8020304@ertonline.gr>

I have an idea which might make antlr better.
Instead of defining the actions in the same file with the grammar
they could be defined in other file(s).

A way this could be achived(not necessarily the best) would be:

RULE:
	'a' .. 'z' { %id; }
	;


rule
	:
	RULE { %some_id; }
	;


tree_rule
	:
		#(r:RULE { %tree_id; System.out.println("RULE matched");  }
	;


In this case antlr.Tool will be fed with the grammar file and the 
file(s)  where actions are defined.

The actions identified with a label (like %id) will be searched among 
the  action  files and the label should be replaced by the content of 
the action.

Example:
	id = {
		System.out.println("Externaly defined action");
	}
		
	tree_id = {
		System.out.println(r.getText());
	}

This could be achieved with regular expressions but would be a primitive
implementation.

I'd like to know what you think about it.
Anakreon
		


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Nov 26 08:10:07 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Request:External action definitions
Message-ID: <170826586F3BD511910D0200C110AAA8032B4F6A@memail03.bco-home.com>

Someone has recently done just this, but I forget who.  I'm sure they will
pipe up.  Look at the files section on the yahoo list site, I think it is
there.

Also noweb can be used for this type of thing too.  Searching for noweb in
the list archives may uncover the one I was thinking of.

Monty

-----Original Message-----
From: Anakreon Mejdi [mailto:amejdi@ertonline.gr]
Sent: Tuesday, November 26, 2002 3:41 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Request:External action definitions


I have an idea which might make antlr better.
Instead of defining the actions in the same file with the grammar
they could be defined in other file(s).

A way this could be achived(not necessarily the best) would be:

RULE:
	'a' .. 'z' { %id; }
	;


rule
	:
	RULE { %some_id; }
	;


tree_rule
	:
		#(r:RULE { %tree_id; System.out.println("RULE matched");  }
	;


In this case antlr.Tool will be fed with the grammar file and the 
file(s)  where actions are defined.

The actions identified with a label (like %id) will be searched among 
the  action  files and the label should be replaced by the content of 
the action.

Example:
	id = {
		System.out.println("Externaly defined action");
	}
		
	tree_id = {
		System.out.println(r.getText());
	}

This could be achieved with regular expressions but would be a primitive
implementation.

I'd like to know what you think about it.
Anakreon
		


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Nov 26 10:04:40 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] ANTLR grammer documenter
In-Reply-To: <artvet+v9va@eGroups.com>
Message-ID: <884F0495-0169-11D7-B537-0030653DE0D6@jguru.com>

Hi.  I am not aware of some a tool at this time.  I am however working 
on something that generates Lout (to get PS, PDF) from grammars and 
trees.  Generates syntax diagrams and tree diagrams (see previous 
entries on this list).  It will be included in 2.7.2 if I can figure 
out how to resolve some license issues (ANTLR is public domain, but my 
string templates used by Lout generator, is BSD license from 
jGuru.com). :(

Regards,
Terence

On Monday, November 25, 2002, at 11:59  AM, dvromano wrote:

> Looking for a tool that would take as input an ANTLR grammar and
> automatically generate documention and graphs in a similar fashion as
> Doxygen (http://www.doxygen.org) does - any leads?
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Nov 26 10:00:35 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Request:External action definitions
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4F6A@memail03.bco-home.com>
Message-ID: <F6A3AB10-0168-11D7-B537-0030653DE0D6@jguru.com>

Hi.  Yes, great idea!  I would call this "aspect oriented programming" 
and is one future enhancement we've considered.  I have been working 
with Monty and Loring on my new ideas for "how to keep those actions 
from screwing up the grammar and making the grammar specific to one 
problem."  The basic idea, assuming we had good tools for this, would 
be to let you "derive" a new grammar from an old grammar and then have 
changes to the original grammar be "pushed" into your modified grammar. 
  Kind of like a "live" cut-n-paste.  In this way, you keep one clean 
grammar that is just the grammar; no actions.  Then to make that 
grammar do something "derive" a new one and add your actions.  Changes 
can be rolled forward to any derived grammar.  Currently we use 
inheritance which is really just compile-time cut-n-paste for grammars; 
but this is less flexible as you have to rewrite every rule just to get 
actions in there.  This strategy is what you do now, right?  You grab a 
grammar and modify it and then curse when the original grammar gets 
updated (such as what happens for any of you with a modified Java 
grammar). ;)

You might call this the 
RCS-based-grammar-derivation-and-composition-method.  <snicker>  Howz 
that for a buzzword!?

Sound interesting?

Terence
PS	Just finishing up my semester here at USF and should get some good 
ANTLR time in now for next month or so to push out 2.7.2 for real!

On Tuesday, November 26, 2002, at 08:10  AM, mzukowski@yci.com wrote:

> Someone has recently done just this, but I forget who.  I'm sure they 
> will
> pipe up.  Look at the files section on the yahoo list site, I think it 
> is
> there.
>
> Also noweb can be used for this type of thing too.  Searching for 
> noweb in
> the list archives may uncover the one I was thinking of.
>
> Monty
>
> -----Original Message-----
> From: Anakreon Mejdi [mailto:amejdi@ertonline.gr]
> Sent: Tuesday, November 26, 2002 3:41 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Request:External action definitions
>
>
> I have an idea which might make antlr better.
> Instead of defining the actions in the same file with the grammar
> they could be defined in other file(s).
>
> A way this could be achived(not necessarily the best) would be:
>
> RULE:
> 	'a' .. 'z' { %id; }
> 	;
>
>
> rule
> 	:
> 	RULE { %some_id; }
> 	;
>
>
> tree_rule
> 	:
> 		#(r:RULE { %tree_id; System.out.println("RULE matched");  }
> 	;
>
>
> In this case antlr.Tool will be fed with the grammar file and the
> file(s)  where actions are defined.
>
> The actions identified with a label (like %id) will be searched among
> the  action  files and the label should be replaced by the content of
> the action.
>
> Example:
> 	id = {
> 		System.out.println("Externaly defined action");
> 	}
> 		
> 	tree_id = {
> 		System.out.println(r.getText());
> 	}
>
> This could be achieved with regular expressions but would be a 
> primitive
> implementation.
>
> I'd like to know what you think about it.
> Anakreon
> 		
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Tue Nov 26 10:25:54 2002
From: cintyram at yahoo.com (Sriram Durbha)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Request:External action definitions
In-Reply-To: <F6A3AB10-0168-11D7-B537-0030653DE0D6@jguru.com>
Message-ID: <20021126182554.88764.qmail@web40004.mail.yahoo.com>

This looks alot like virtual functiuns
so we write an abstract grammar first, with virtualfunctions for
actions,
 and then override them in the derived grammars ;

since i have not used the inheritance feature even now i am at aloss
here, but the general idea looks like this :


if i write a grammar now which might be used with different actions at
a later stage, i want to put place holders for those actions and fill
them later;
so even now if in the action part we simply invoke a virtual function
from a calss called actions, declared in the first part of the grammar,
and  defined in a source file which is also included in the project
so all that the actions part will have is 
 
rule : ...
   {
   action_object_ptr->method_for_this_rule() ;  
    } 
  ;


the action_object_ptr has to be assigned a new object of the required
sub-type ; and its visibility , local ness etc have to be taken care of
.. 

so now i can change the action independently of the grammar ;
also i can override only some of the actions if i have to ;

but when grammar has to change, new situations might arise :)

cheers
ram




--- Terence Parr <parrt@jguru.com> wrote:
> Hi.  Yes, great idea!  I would call this "aspect oriented
> programming" 
> and is one future enhancement we've considered.  I have been working 
> with Monty and Loring on my new ideas for "how to keep those actions 
> from screwing up the grammar and making the grammar specific to one 
> problem."  The basic idea, assuming we had good tools for this, would
> 
> be to let you "derive" a new grammar from an old grammar and then
> have 
> changes to the original grammar be "pushed" into your modified
> grammar. 
>   Kind of like a "live" cut-n-paste.  In this way, you keep one clean
> 
> grammar that is just the grammar; no actions.  Then to make that 
> grammar do something "derive" a new one and add your actions. 
> Changes 
> can be rolled forward to any derived grammar.  Currently we use 
> inheritance which is really just compile-time cut-n-paste for
> grammars; 
> but this is less flexible as you have to rewrite every rule just to
> get 
> actions in there.  This strategy is what you do now, right?  You grab
> a 
> grammar and modify it and then curse when the original grammar gets 
> updated (such as what happens for any of you with a modified Java 
> grammar). ;)
> 
> You might call this the 
> RCS-based-grammar-derivation-and-composition-method.  <snicker>  Howz
> 
> that for a buzzword!?
> 
> Sound interesting?
> 
> Terence
> PS	Just finishing up my semester here at USF and should get some good
> 
> ANTLR time in now for next month or so to push out 2.7.2 for real!
> 
> On Tuesday, November 26, 2002, at 08:10  AM, mzukowski@yci.com wrote:
> 
> > Someone has recently done just this, but I forget who.  I'm sure
> they 
> > will
> > pipe up.  Look at the files section on the yahoo list site, I think
> it 
> > is
> > there.
> >
> > Also noweb can be used for this type of thing too.  Searching for 
> > noweb in
> > the list archives may uncover the one I was thinking of.
> >
> > Monty
> >
> > -----Original Message-----
> > From: Anakreon Mejdi [mailto:amejdi@ertonline.gr]
> > Sent: Tuesday, November 26, 2002 3:41 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Request:External action definitions
> >
> >
> > I have an idea which might make antlr better.
> > Instead of defining the actions in the same file with the grammar
> > they could be defined in other file(s).
> >
> > A way this could be achived(not necessarily the best) would be:
> >
> > RULE:
> > 	'a' .. 'z' { %id; }
> > 	;
> >
> >
> > rule
> > 	:
> > 	RULE { %some_id; }
> > 	;
> >
> >
> > tree_rule
> > 	:
> > 		#(r:RULE { %tree_id; System.out.println("RULE matched");  }
> > 	;
> >
> >
> > In this case antlr.Tool will be fed with the grammar file and the
> > file(s)  where actions are defined.
> >
> > The actions identified with a label (like %id) will be searched
> among
> > the  action  files and the label should be replaced by the content
> of
> > the action.
> >
> > Example:
> > 	id = {
> > 		System.out.println("Externaly defined action");
> > 	}
> > 		
> > 	tree_id = {
> > 		System.out.println(r.getText());
> > 	}
> >
> > This could be achieved with regular expressions but would be a 
> > primitive
> > implementation.
> >
> > I'd like to know what you think about it.
> > Anakreon
> > 		
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Nov 26 12:02:21 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Request:External action definitions
In-Reply-To: <20021126182554.88764.qmail@web40004.mail.yahoo.com>
Message-ID: <F940BAA8-0179-11D7-B537-0030653DE0D6@jguru.com>

Hi.  yes, that method works but has two problems:

1 you need to modify the grammar to have actions that reference methods 
all over or you won't be able to handle new situations

2 you can't define local variables in the rules, which are REALLY 
useful as you get a new copy per rule invocation.

Good summary, ram.

Terence

On Tuesday, November 26, 2002, at 10:25  AM, Sriram Durbha wrote:

> This looks alot like virtual functiuns
> so we write an abstract grammar first, with virtualfunctions for
> actions,
>  and then override them in the derived grammars ;
>
> since i have not used the inheritance feature even now i am at aloss
> here, but the general idea looks like this :
>
>
> if i write a grammar now which might be used with different actions at
> a later stage, i want to put place holders for those actions and fill
> them later;
> so even now if in the action part we simply invoke a virtual function
> from a calss called actions, declared in the first part of the grammar,
> and  defined in a source file which is also included in the project
> so all that the actions part will have is
>
> rule : ...
>    {
>    action_object_ptr->method_for_this_rule() ;
>     }
>   ;
>
>
> the action_object_ptr has to be assigned a new object of the required
> sub-type ; and its visibility , local ness etc have to be taken care of
> ..
>
> so now i can change the action independently of the grammar ;
> also i can override only some of the actions if i have to ;
>
> but when grammar has to change, new situations might arise :)
>
> cheers
> ram
>
>
>
>
> --- Terence Parr <parrt@jguru.com> wrote:
>> Hi.  Yes, great idea!  I would call this "aspect oriented
>> programming"
>> and is one future enhancement we've considered.  I have been working
>> with Monty and Loring on my new ideas for "how to keep those actions
>> from screwing up the grammar and making the grammar specific to one
>> problem."  The basic idea, assuming we had good tools for this, would
>>
>> be to let you "derive" a new grammar from an old grammar and then
>> have
>> changes to the original grammar be "pushed" into your modified
>> grammar.
>>   Kind of like a "live" cut-n-paste.  In this way, you keep one clean
>>
>> grammar that is just the grammar; no actions.  Then to make that
>> grammar do something "derive" a new one and add your actions.
>> Changes
>> can be rolled forward to any derived grammar.  Currently we use
>> inheritance which is really just compile-time cut-n-paste for
>> grammars;
>> but this is less flexible as you have to rewrite every rule just to
>> get
>> actions in there.  This strategy is what you do now, right?  You grab
>> a
>> grammar and modify it and then curse when the original grammar gets
>> updated (such as what happens for any of you with a modified Java
>> grammar). ;)
>>
>> You might call this the
>> RCS-based-grammar-derivation-and-composition-method.  <snicker>  Howz
>>
>> that for a buzzword!?
>>
>> Sound interesting?
>>
>> Terence
>> PS	Just finishing up my semester here at USF and should get some good
>>
>> ANTLR time in now for next month or so to push out 2.7.2 for real!
>>
>> On Tuesday, November 26, 2002, at 08:10  AM, mzukowski@yci.com wrote:
>>
>>> Someone has recently done just this, but I forget who.  I'm sure
>> they
>>> will
>>> pipe up.  Look at the files section on the yahoo list site, I think
>> it
>>> is
>>> there.
>>>
>>> Also noweb can be used for this type of thing too.  Searching for
>>> noweb in
>>> the list archives may uncover the one I was thinking of.
>>>
>>> Monty
>>>
>>> -----Original Message-----
>>> From: Anakreon Mejdi [mailto:amejdi@ertonline.gr]
>>> Sent: Tuesday, November 26, 2002 3:41 AM
>>> To: antlr-interest@yahoogroups.com
>>> Subject: [antlr-interest] Request:External action definitions
>>>
>>>
>>> I have an idea which might make antlr better.
>>> Instead of defining the actions in the same file with the grammar
>>> they could be defined in other file(s).
>>>
>>> A way this could be achived(not necessarily the best) would be:
>>>
>>> RULE:
>>> 	'a' .. 'z' { %id; }
>>> 	;
>>>
>>>
>>> rule
>>> 	:
>>> 	RULE { %some_id; }
>>> 	;
>>>
>>>
>>> tree_rule
>>> 	:
>>> 		#(r:RULE { %tree_id; System.out.println("RULE matched");  }
>>> 	;
>>>
>>>
>>> In this case antlr.Tool will be fed with the grammar file and the
>>> file(s)  where actions are defined.
>>>
>>> The actions identified with a label (like %id) will be searched
>> among
>>> the  action  files and the label should be replaced by the content
>> of
>>> the action.
>>>
>>> Example:
>>> 	id = {
>>> 		System.out.println("Externaly defined action");
>>> 	}
>>> 		
>>> 	tree_id = {
>>> 		System.out.println(r.getText());
>>> 	}
>>>
>>> This could be achieved with regular expressions but would be a
>>> primitive
>>> implementation.
>>>
>>> I'd like to know what you think about it.
>>> Anakreon
>>> 		
>>>
>>>
>>>
>>>
>>> Your use of Yahoo! Groups is subject to
>>> http://docs.yahoo.com/info/terms/
>>>
>>>
>>>
>>>
>>> Your use of Yahoo! Groups is subject to
>>> http://docs.yahoo.com/info/terms/
>>>
>>>
>> --
>> Co-founder, http://www.jguru.com
>> Creator, ANTLR Parser Generator: http://www.antlr.org
>> Lecturer in Comp. Sci., University of San Francisco
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to
>> http://docs.yahoo.com/info/terms/
>>
>>
>
>
> __________________________________________________
> Do you Yahoo!?
> Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
> http://mailplus.yahoo.com
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mtiller at ford.com  Tue Nov 26 12:34:31 2002
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Request:External action definitions
Message-ID: <AF02884D0976D311A014009027A8F1FB1FD5480E@na1fcm10.dearborn.ford.com>

I like this discussion of separating the grammar from the actions.  I've often wished for this.  One other thing worth mentioning.  I find it quite tedious to work with new grammars, lexers and treewalkers because they generate so much stuff that needs to be compiled, etc.

Assume, for the sake of argument, that we complete decoupled the grammar from the actions.  What would be very nice would be a sort of "virtual machine tree walker" system whereby the grammar could be broken down into a special language neutral "byte code" (conceptually a binary representation of the grammar, look-ahead, alternatives, etc) and then you could just create tree walkers in whatever language you wanted.

The "ideal situation" I envision would be have a compiled executable of ANTLR that could take a grammar and generate a machine representation of the recursive descent tree (i.e. the "byte code").  As much of the analysis as possible would be done in this phase.  My hope is that I could then implement a relatively lightweight Python parser that would allow me to parse data files and walk the resulting tree while not having to compile anything or integrate this Python "back end" with any of the grammar analysis capabilities.

This would avoid the need to compile anything.

At first glance, it might appear that this would break all the existing code written in ANTLR.  I have some comments on this, but I'll save the time of typing them because I'm guessing most people think this is completely out to lunch. :-)

The main point here, for me, is to promote language independence, separate the grammar from the actions and avoid the long tool chain (Java to run ANTLR, C++ compiler to compile the resulting parser, SWIG or BOOST to map the C++ code to Python and Python to try out tree walking ideas).

--
Mike

> -----Original Message-----
> From: Terence Parr [mailto:parrt@jguru.com]
> Sent: Tuesday, November 26, 2002 3:02 PM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Request:External action definitions
> 
> 
> Hi.  yes, that method works but has two problems:
> 
> 1 you need to modify the grammar to have actions that 
> reference methods 
> all over or you won't be able to handle new situations
> 
> 2 you can't define local variables in the rules, which are REALLY 
> useful as you get a new copy per rule invocation.
> 
> Good summary, ram.
> 
> Terence
> 
> On Tuesday, November 26, 2002, at 10:25  AM, Sriram Durbha wrote:
> 
> > This looks alot like virtual functiuns
> > so we write an abstract grammar first, with virtualfunctions for
> > actions,
> >  and then override them in the derived grammars ;
> >
> > since i have not used the inheritance feature even now i am at aloss
> > here, but the general idea looks like this :
> >
> >
> > if i write a grammar now which might be used with different 
> actions at
> > a later stage, i want to put place holders for those 
> actions and fill
> > them later;
> > so even now if in the action part we simply invoke a 
> virtual function
> > from a calss called actions, declared in the first part of 
> the grammar,
> > and  defined in a source file which is also included in the project
> > so all that the actions part will have is
> >
> > rule : ...
> >    {
> >    action_object_ptr->method_for_this_rule() ;
> >     }
> >   ;
> >
> >
> > the action_object_ptr has to be assigned a new object of 
> the required
> > sub-type ; and its visibility , local ness etc have to be 
> taken care of
> > ..
> >
> > so now i can change the action independently of the grammar ;
> > also i can override only some of the actions if i have to ;
> >
> > but when grammar has to change, new situations might arise :)
> >
> > cheers
> > ram
> >
> >
> >
> >
> > --- Terence Parr <parrt@jguru.com> wrote:
> >> Hi.  Yes, great idea!  I would call this "aspect oriented
> >> programming"
> >> and is one future enhancement we've considered.  I have 
> been working
> >> with Monty and Loring on my new ideas for "how to keep 
> those actions
> >> from screwing up the grammar and making the grammar specific to one
> >> problem."  The basic idea, assuming we had good tools for 
> this, would
> >>
> >> be to let you "derive" a new grammar from an old grammar and then
> >> have
> >> changes to the original grammar be "pushed" into your modified
> >> grammar.
> >>   Kind of like a "live" cut-n-paste.  In this way, you 
> keep one clean
> >>
> >> grammar that is just the grammar; no actions.  Then to make that
> >> grammar do something "derive" a new one and add your actions.
> >> Changes
> >> can be rolled forward to any derived grammar.  Currently we use
> >> inheritance which is really just compile-time cut-n-paste for
> >> grammars;
> >> but this is less flexible as you have to rewrite every rule just to
> >> get
> >> actions in there.  This strategy is what you do now, 
> right?  You grab
> >> a
> >> grammar and modify it and then curse when the original grammar gets
> >> updated (such as what happens for any of you with a modified Java
> >> grammar). ;)
> >>
> >> You might call this the
> >> RCS-based-grammar-derivation-and-composition-method.  
> <snicker>  Howz
> >>
> >> that for a buzzword!?
> >>
> >> Sound interesting?
> >>
> >> Terence
> >> PS	Just finishing up my semester here at USF and should 
> get some good
> >>
> >> ANTLR time in now for next month or so to push out 2.7.2 for real!
> >>
> >> On Tuesday, November 26, 2002, at 08:10  AM, 
> mzukowski@yci.com wrote:
> >>
> >>> Someone has recently done just this, but I forget who.  I'm sure
> >> they
> >>> will
> >>> pipe up.  Look at the files section on the yahoo list 
> site, I think
> >> it
> >>> is
> >>> there.
> >>>
> >>> Also noweb can be used for this type of thing too.  Searching for
> >>> noweb in
> >>> the list archives may uncover the one I was thinking of.
> >>>
> >>> Monty
> >>>
> >>> -----Original Message-----
> >>> From: Anakreon Mejdi [mailto:amejdi@ertonline.gr]
> >>> Sent: Tuesday, November 26, 2002 3:41 AM
> >>> To: antlr-interest@yahoogroups.com
> >>> Subject: [antlr-interest] Request:External action definitions
> >>>
> >>>
> >>> I have an idea which might make antlr better.
> >>> Instead of defining the actions in the same file with the grammar
> >>> they could be defined in other file(s).
> >>>
> >>> A way this could be achived(not necessarily the best) would be:
> >>>
> >>> RULE:
> >>> 	'a' .. 'z' { %id; }
> >>> 	;
> >>>
> >>>
> >>> rule
> >>> 	:
> >>> 	RULE { %some_id; }
> >>> 	;
> >>>
> >>>
> >>> tree_rule
> >>> 	:
> >>> 		#(r:RULE { %tree_id; System.out.println("RULE 
> matched");  }
> >>> 	;
> >>>
> >>>
> >>> In this case antlr.Tool will be fed with the grammar file and the
> >>> file(s)  where actions are defined.
> >>>
> >>> The actions identified with a label (like %id) will be searched
> >> among
> >>> the  action  files and the label should be replaced by the content
> >> of
> >>> the action.
> >>>
> >>> Example:
> >>> 	id = {
> >>> 		System.out.println("Externaly defined action");
> >>> 	}
> >>> 		
> >>> 	tree_id = {
> >>> 		System.out.println(r.getText());
> >>> 	}
> >>>
> >>> This could be achieved with regular expressions but would be a
> >>> primitive
> >>> implementation.
> >>>
> >>> I'd like to know what you think about it.
> >>> Anakreon
> >>> 		
> >>>
> >>>
> >>>
> >>>
> >>> Your use of Yahoo! Groups is subject to
> >>> http://docs.yahoo.com/info/terms/
> >>>
> >>>
> >>>
> >>>
> >>> Your use of Yahoo! Groups is subject to
> >>> http://docs.yahoo.com/info/terms/
> >>>
> >>>
> >> --
> >> Co-founder, http://www.jguru.com
> >> Creator, ANTLR Parser Generator: http://www.antlr.org
> >> Lecturer in Comp. Sci., University of San Francisco
> >>
> >>
> >>
> >>
> >> Your use of Yahoo! Groups is subject to
> >> http://docs.yahoo.com/info/terms/
> >>
> >>
> >
> >
> > __________________________________________________
> > Do you Yahoo!?
> > Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
> > http://mailplus.yahoo.com
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Tue Nov 26 14:21:04 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Request:External action definitions
References: <170826586F3BD511910D0200C110AAA8032B4F6A@memail03.bco-home.com>
Message-ID: <001601c2959a$1c7188a0$0200a8c0@NOTEBOOK>

Hi Monty,
Were you thinking of my posting on CodeSections.
It does not quite do what is being discussed here.

Using CodeSections
> RULE:
> 'a' .. 'z' { %id; }
> ;
>
would be coded as

<<*>>=
RULE:
'a' .. 'z' {
<<id1>>=
 // code for rule here
<<id2>>=
// code for different action here
<<*>>=
 }
;


All the actions are in the one file and CodeSections just outputs the
sections you want.
Having used this for a little while now the two problems I have found are
i) line numbers don't match the error messages
ii) large action blocks make the code hard to read when there are
alteratives

The solution to  ii) is to use methods instead of large lumps of code

I don't have a solution for i) yet.  Need some way of carrying the original
line numbers to the output file and then
having Antlr resync it error message line counter.

For example if CodeSections was modified to produce output like

//#lineNumber:1
RULE:
'a' .. 'z' {
//#lineNumber:4
// code for rule here
//#lineNumber:8
 }
;

and Antlr recognised //#lineNumber: as a directive to resync it err line
counter then all is well

matthew
----- Original Message -----
From: <mzukowski@yci.com>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, November 27, 2002 3:10 AM
Subject: RE: [antlr-interest] Request:External action definitions


> Someone has recently done just this, but I forget who.  I'm sure they will
> pipe up.  Look at the files section on the yahoo list site, I think it is
> there.
>
> Also noweb can be used for this type of thing too.  Searching for noweb in
> the list archives may uncover the one I was thinking of.
>
> Monty
>
> -----Original Message-----
> From: Anakreon Mejdi [mailto:amejdi@ertonline.gr]
> Sent: Tuesday, November 26, 2002 3:41 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Request:External action definitions
>
>
> I have an idea which might make antlr better.
> Instead of defining the actions in the same file with the grammar
> they could be defined in other file(s).
>
> A way this could be achived(not necessarily the best) would be:
>
> RULE:
> 'a' .. 'z' { %id; }
> ;
>
>
> rule
> :
> RULE { %some_id; }
> ;
>
>
> tree_rule
> :
> #(r:RULE { %tree_id; System.out.println("RULE matched");  }
> ;
>
>
> In this case antlr.Tool will be fed with the grammar file and the
> file(s)  where actions are defined.
>
> The actions identified with a label (like %id) will be searched among
> the  action  files and the label should be replaced by the content of
> the action.
>
> Example:
> id = {
> System.out.println("Externaly defined action");
> }
>
> tree_id = {
> System.out.println(r.getText());
> }
>
> This could be achieved with regular expressions but would be a primitive
> implementation.
>
> I'd like to know what you think about it.
> Anakreon
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amejdi at ertonline.gr  Wed Nov 27 03:02:03 2002
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Request:External action definitions
References: <170826586F3BD511910D0200C110AAA8032B4F6A@memail03.bco-home.com> <001601c2959a$1c7188a0$0200a8c0@NOTEBOOK>
Message-ID: <3DE4A62B.3080805@ertonline.gr>

I searched into the files in Yahoo and found a file named 
annotation-20020416.zip.

It does what I was looking for although it has a different syntax.
That is not a problem, since the syntax I wrote was just an example.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jasonyipwa at yahoo.com  Thu Nov 28 01:42:56 2002
From: jasonyipwa at yahoo.com (Jason Yip)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Expression Tree
In-Reply-To: <3DE4A62B.3080805@ertonline.gr>
Message-ID: <20021128094256.50123.qmail@web12908.mail.yahoo.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: ExpressionTree.zip
Type: application/x-zip-compressed
Size: 6234 bytes
Desc: ExpressionTree.zip
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20021128/00ac2498/ExpressionTree.bin
From klaren at cs.utwente.nl  Thu Nov 28 02:39:42 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Small Poll: Does your C++ compiler support member templates?
Message-ID: <20021128113942.G14214@cs.utwente.nl>

Hi,

I can fix quite a lot of the ugly casting in the C++ codegen with the use
of a member template in the ASTRefCount class.

So my question is for how many people would this break things?

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jasonyipwa at yahoo.com  Fri Nov 29 03:43:44 2002
From: jasonyipwa at yahoo.com (Jason Yip)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Expression Tree failed in some multiple signs case
In-Reply-To: <3DE4A62B.3080805@ertonline.gr>
Message-ID: <20021129114344.29286.qmail@web12904.mail.yahoo.com>


Hi everybody, I was writing a program to covert an expression to an expression tree using stack. But when it comes to multiple signs, my program will fail.
     inputFormula1 = "(-4--12*(3++--30/2))";     inputFormula2 = "(3*2+1^2*(5-2--2*6))";     Assume that plus sign is #, minus sign is ~    In inputFormula1, we can rewrite the inner part as 3+#~~30/2, my code is while (!operatorStack.isEmpty()) {
 stackOperator = (OperatorToken) operatorStack.peek();
 if ( (stackOperator.priority() >= thisOperator.priority()) &&
  (stackOperator.getToken() != OperatorToken.LeftParen) ) {
   // output the operator to the return stack 
   operatorStack.pop();
   returnStack.push(stackOperator);
} else
 break;
     output 3            output 3            output 3#            output 3#~            operator +        operator +#      operator +~        operator +~            output 3#~30        output 3#~30~2        output 3#~30~2/+    operator +~          operator +/                operator     Notice the fourth column, output is 3#~, and the top is stack was being compared with another ~, since they have the same priority, the ~ in the stack is being pushed, and another ~ is being pushed to opeartor stack. When we read 30, it will be pushed to output, like column 5. It will result a ~#3 and a ~30. It is wrong!     So I changed the code to     if ( (stackOperator.priority() > thisOperator.priority())...     The result will be correct.     However, in inputFormula2, it will result 522~--6* instead of 52-2~-6*.     Well, what I was saying is the compare method will fail in some case with multiple signs. But it would work in some other case. What can I do to fix it? Jason 


---------------------------------
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20021129/35690045/attachment.html
From amejdi at ertonline.gr  Fri Nov 29 04:09:33 2002
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Tree parser changes Token type?
References: <20021129114344.29286.qmail@web12904.mail.yahoo.com>
Message-ID: <3DE758FD.6040401@ertonline.gr>

I observed somthing really strange.
The parser changes the type of the Token (which I verified with a 
System.out) but when the tree is printed (with ASTVisitor) the Token 
apears to have the original type.

The mail has two attachments.
The file used for testing and the output of the program.
Here is the rule for the do statement.
do_statement
   { boolean whileFound = false;}
   :
   d:DO^
   (
   /*
     The problem is when
     do while a < 0
         while z > 3
           .....
         wend
         ...
     loop
     can not distinguish betwen do while .. while .. wend loop
     It should be ok
    */
     options {
         warnWhenFollowAmbig = false;
     }
     :
     STATEMENT_END!
     | do_while {whileFound = true; d.setType(DO_WHILE);} (STATEMENT_END!)?
   )?
   (statements)*
   LOOP!
   (
     {!whileFound}? do_while {d.setType(WHILE_DO);}
     |
   )
   {
       System.out.println("DO type is:" + d.getType());
   }
   ;

If interested in investigating the phainomenon I can send all the gramar.

By.
Anakreon

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
Vbs Parser
DO type is:67
found obj_member:eof
found obj_name: rs
found not
found obj_member:bof
found obj_name: rs
found not
found and
found obj_member:Fields
found obj_member:Count
found obj_name: rs
found minus
found obj_member:Fields
found obj_member:Name
found obj_name: rs
found if and expr and statements
ANTLR Tree Parsing RecognitionException Error: 
File Name:<AST>
[-1:-1]
<AST>: unexpected AST node: Do
	at gr.omadak.leviathan.asp.VbsTree.if_statement(VbsTree.java:841)
	at gr.omadak.leviathan.asp.VbsTree.statement(VbsTree.java:354)
	at gr.omadak.leviathan.asp.VbsTree.statements(VbsTree.java:1999)
	at gr.omadak.leviathan.asp.VbsTree.expr_statement(VbsTree.java:1979)
	at gr.omadak.leviathan.asp.VbsTree.if_statement(VbsTree.java:797)
	at gr.omadak.leviathan.asp.VbsTree.statement(VbsTree.java:354)
	at gr.omadak.leviathan.asp.VbsTree.start_rule(VbsTree.java:193)
	at Main2.main(Main2.java:33)


found if and expr and statements
found if
AST

 [73] 
if [23] 
   EXPR [50] 
      iMode [77] 
      = [51] 
      1 [61] 
   if [23] 
      EXPR [50] 
         and [4] 
            not [29] 
               rs [59] 
                  . [63] 
                     eof [60] 
            not [29] 
               rs [59] 
                  . [63] 
                     bof [60] 
      for [21] 
         FOR_INIT [66] 
            = [78] 
               i [77] 
               EXPR [50] 
                  0 [61] 
            to [43] 
               - [90] 
                  rs [59] 
                     . [63] 
                        Fields [60] 
                     . [63] 
                        Count [60] 
                  1 [61] 
         rs [59] 
            . [63] 
               Fields [60] 
               PARAMETERS [56] 
                  EXPR [50] 
                     i [77] 
            . [63] 
               Name [60] 
         next [28] 
      = [78] 
         j [77] 
         0 [61] 
      Do [9] 
         While [46] 
            EXPR [50] 
               Not [29] 
                  rs [59] 
                     . [63] 
                        EOF [60] 
         for [21] 
            FOR_INIT [66] 
               = [78] 
                  i [77] 
                  EXPR [50] 
                     0 [61] 
               to [43] 
                  - [90] 
                     rs [59] 
                        . [63] 
                           Fields [60] 
                        . [63] 
                           Count [60] 
                     1 [61] 
            rs [59] 
               . [63] 
                  Fields [60] 
                  PARAMETERS [56] 
                     EXPR [50] 
                        i [77] 
            next [28] 
         rs [59] 
            . [63] 
               MoveNext [60] 
         = [78] 
            j [77] 
            + [89] 
               j [77] 
               1 [61] 
    

 [73] 
-------------- next part --------------
<%@Language="VBSCript"%>
<%    
    if iMode = 1 then
			if not rs.eof and not rs.bof then
        for i=0 to rs.Fields.Count-1
            rs.Fields(i).Name
        next
        j=0
				Do While Not rs.EOF
            for i=0 to rs.Fields.Count-1
                rs.Fields(i)
            next
            rs.MoveNext()
            j=j+1
				Loop
      end if
		end if
%>    

From parrt at jguru.com  Fri Nov 29 09:56:46 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Tree parser changes Token type?
In-Reply-To: <3DE758FD.6040401@ertonline.gr>
Message-ID: <ED3F9D3D-03C3-11D7-B537-0030653DE0D6@jguru.com>

Howdy.  It looks like you have a problem in the lexer not the parser.  
You probably reference a "Do" somewhere or don't define DO in the lexer.

Terence

On Friday, November 29, 2002, at 04:09  AM, Anakreon Mejdi wrote:

> I observed somthing really strange.
> The parser changes the type of the Token (which I verified with a
> System.out) but when the tree is printed (with ASTVisitor) the Token
> apears to have the original type.
>
> The mail has two attachments.
> The file used for testing and the output of the program.
> Here is the rule for the do statement.
> do_statement
>    { boolean whileFound = false;}
>    :
>    d:DO^
>    (
>    /*
>      The problem is when
>      do while a < 0
>          while z > 3
>            .....
>          wend
>          ...
>      loop
>      can not distinguish betwen do while .. while .. wend loop
>      It should be ok
>     */
>      options {
>          warnWhenFollowAmbig = false;
>      }
>      :
>      STATEMENT_END!
>      | do_while {whileFound = true; d.setType(DO_WHILE);} 
> (STATEMENT_END!)?
>    )?
>    (statements)*
>    LOOP!
>    (
>      {!whileFound}? do_while {d.setType(WHILE_DO);}
>      |
>    )
>    {
>        System.out.println("DO type is:" + d.getType());
>    }
>    ;
>
> If interested in investigating the phainomenon I can send all the 
> gramar.
>
> By.
> Anakreon
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
> Vbs Parser
> DO type is:67
> found obj_member:eof
> found obj_name: rs
> found not
> found obj_member:bof
> found obj_name: rs
> found not
> found and
> found obj_member:Fields
> found obj_member:Count
> found obj_name: rs
> found minus
> found obj_member:Fields
> found obj_member:Name
> found obj_name: rs
> found if and expr and statements
> ANTLR Tree Parsing RecognitionException Error:
> File Name:<AST>
> [-1:-1]
> <AST>: unexpected AST node: Do
> 	at gr.omadak.leviathan.asp.VbsTree.if_statement(VbsTree.java:841)
> 	at gr.omadak.leviathan.asp.VbsTree.statement(VbsTree.java:354)
> 	at gr.omadak.leviathan.asp.VbsTree.statements(VbsTree.java:1999)
> 	at gr.omadak.leviathan.asp.VbsTree.expr_statement(VbsTree.java:1979)
> 	at gr.omadak.leviathan.asp.VbsTree.if_statement(VbsTree.java:797)
> 	at gr.omadak.leviathan.asp.VbsTree.statement(VbsTree.java:354)
> 	at gr.omadak.leviathan.asp.VbsTree.start_rule(VbsTree.java:193)
> 	at Main2.main(Main2.java:33)
>
>
> found if and expr and statements
> found if
> AST
>
>  [73]
> if [23]
>    EXPR [50]
>       iMode [77]
>       = [51]
>       1 [61]
>    if [23]
>       EXPR [50]
>          and [4]
>             not [29]
>                rs [59]
>                   . [63]
>                      eof [60]
>             not [29]
>                rs [59]
>                   . [63]
>                      bof [60]
>       for [21]
>          FOR_INIT [66]
>             = [78]
>                i [77]
>                EXPR [50]
>                   0 [61]
>             to [43]
>                - [90]
>                   rs [59]
>                      . [63]
>                         Fields [60]
>                      . [63]
>                         Count [60]
>                   1 [61]
>          rs [59]
>             . [63]
>                Fields [60]
>                PARAMETERS [56]
>                   EXPR [50]
>                      i [77]
>             . [63]
>                Name [60]
>          next [28]
>       = [78]
>          j [77]
>          0 [61]
>       Do [9]
>          While [46]
>             EXPR [50]
>                Not [29]
>                   rs [59]
>                      . [63]
>                         EOF [60]
>          for [21]
>             FOR_INIT [66]
>                = [78]
>                   i [77]
>                   EXPR [50]
>                      0 [61]
>                to [43]
>                   - [90]
>                      rs [59]
>                         . [63]
>                            Fields [60]
>                         . [63]
>                            Count [60]
>                      1 [61]
>             rs [59]
>                . [63]
>                   Fields [60]
>                   PARAMETERS [56]
>                      EXPR [50]
>                         i [77]
>             next [28]
>          rs [59]
>             . [63]
>                MoveNext [60]
>          = [78]
>             j [77]
>             + [89]
>                j [77]
>                1 [61]
>
>
>  [73]
> <%@Language="VBSCript"%>
> <%
>     if iMode = 1 then
> 			if not rs.eof and not rs.bof then
>         for i=0 to rs.Fields.Count-1
>             rs.Fields(i).Name
>         next
>         j=0
> 				Do While Not rs.EOF
>             for i=0 to rs.Fields.Count-1
>                 rs.Fields(i)
>             next
>             rs.MoveNext()
>             j=j+1
> 				Loop
>       end if
> 		end if
> %>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amejdi at ertonline.gr  Fri Nov 29 10:07:22 2002
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Tree parser changes Token type?
References: <ED3F9D3D-03C3-11D7-B537-0030653DE0D6@jguru.com>
Message-ID: <3DE7ACDA.1070606@ertonline.gr>

There is only one DO in the test file.
The System.out should be for that "DO" only.
In the tree printed, DO has the original type (unmodified) and
the tree structure is the expected one.
If the lexer had a problem with DO how could the parser have matched the
rule do_statement.
In the lexer the DO is defined anyway.

I solved the problem by modifying the tree parser
not #(DO_WHILE... but (#DO ...

If you want the grammar for further investigation I can post it.

Anakreon

Terence Parr wrote:
> Howdy.  It looks like you have a problem in the lexer not the parser.  
> You probably reference a "Do" somewhere or don't define DO in the lexer.
> 
> Terence
> 
> On Friday, November 29, 2002, at 04:09  AM, Anakreon Mejdi wrote:
> 
> 
>>I observed somthing really strange.
>>The parser changes the type of the Token (which I verified with a
>>System.out) but when the tree is printed (with ASTVisitor) the Token
>>apears to have the original type.
>>
>>The mail has two attachments.
>>The file used for testing and the output of the program.
>>Here is the rule for the do statement.
>>do_statement
>>   { boolean whileFound = false;}
>>   :
>>   d:DO^
>>   (
>>   /*
>>     The problem is when
>>     do while a < 0
>>         while z > 3
>>           .....
>>         wend
>>         ...
>>     loop
>>     can not distinguish betwen do while .. while .. wend loop
>>     It should be ok
>>    */
>>     options {
>>         warnWhenFollowAmbig = false;
>>     }
>>     :
>>     STATEMENT_END!
>>     | do_while {whileFound = true; d.setType(DO_WHILE);} 
>>(STATEMENT_END!)?
>>   )?
>>   (statements)*
>>   LOOP!
>>   (
>>     {!whileFound}? do_while {d.setType(WHILE_DO);}
>>     |
>>   )
>>   {
>>       System.out.println("DO type is:" + d.getType());
>>   }
>>   ;
>>
>>If interested in investigating the phainomenon I can send all the 
>>gramar.
>>
>>By.
>>Anakreon
>>
>>
>>
>>Your use of Yahoo! Groups is subject to 
>>http://docs.yahoo.com/info/terms/
>>
>>Vbs Parser
>>DO type is:67
>>found obj_member:eof
>>found obj_name: rs
>>found not
>>found obj_member:bof
>>found obj_name: rs
>>found not
>>found and
>>found obj_member:Fields
>>found obj_member:Count
>>found obj_name: rs
>>found minus
>>found obj_member:Fields
>>found obj_member:Name
>>found obj_name: rs
>>found if and expr and statements
>>ANTLR Tree Parsing RecognitionException Error:
>>File Name:<AST>
>>[-1:-1]
>><AST>: unexpected AST node: Do
>>	at gr.omadak.leviathan.asp.VbsTree.if_statement(VbsTree.java:841)
>>	at gr.omadak.leviathan.asp.VbsTree.statement(VbsTree.java:354)
>>	at gr.omadak.leviathan.asp.VbsTree.statements(VbsTree.java:1999)
>>	at gr.omadak.leviathan.asp.VbsTree.expr_statement(VbsTree.java:1979)
>>	at gr.omadak.leviathan.asp.VbsTree.if_statement(VbsTree.java:797)
>>	at gr.omadak.leviathan.asp.VbsTree.statement(VbsTree.java:354)
>>	at gr.omadak.leviathan.asp.VbsTree.start_rule(VbsTree.java:193)
>>	at Main2.main(Main2.java:33)
>>
>>
>>found if and expr and statements
>>found if
>>AST
>>
>> [73]
>>if [23]
>>   EXPR [50]
>>      iMode [77]
>>      = [51]
>>      1 [61]
>>   if [23]
>>      EXPR [50]
>>         and [4]
>>            not [29]
>>               rs [59]
>>                  . [63]
>>                     eof [60]
>>            not [29]
>>               rs [59]
>>                  . [63]
>>                     bof [60]
>>      for [21]
>>         FOR_INIT [66]
>>            = [78]
>>               i [77]
>>               EXPR [50]
>>                  0 [61]
>>            to [43]
>>               - [90]
>>                  rs [59]
>>                     . [63]
>>                        Fields [60]
>>                     . [63]
>>                        Count [60]
>>                  1 [61]
>>         rs [59]
>>            . [63]
>>               Fields [60]
>>               PARAMETERS [56]
>>                  EXPR [50]
>>                     i [77]
>>            . [63]
>>               Name [60]
>>         next [28]
>>      = [78]
>>         j [77]
>>         0 [61]
>>      Do [9]
>>         While [46]
>>            EXPR [50]
>>               Not [29]
>>                  rs [59]
>>                     . [63]
>>                        EOF [60]
>>         for [21]
>>            FOR_INIT [66]
>>               = [78]
>>                  i [77]
>>                  EXPR [50]
>>                     0 [61]
>>               to [43]
>>                  - [90]
>>                     rs [59]
>>                        . [63]
>>                           Fields [60]
>>                        . [63]
>>                           Count [60]
>>                     1 [61]
>>            rs [59]
>>               . [63]
>>                  Fields [60]
>>                  PARAMETERS [56]
>>                     EXPR [50]
>>                        i [77]
>>            next [28]
>>         rs [59]
>>            . [63]
>>               MoveNext [60]
>>         = [78]
>>            j [77]
>>            + [89]
>>               j [77]
>>               1 [61]
>>
>>
>> [73]
>><%@Language="VBSCript"%>
>><%
>>    if iMode = 1 then
>>			if not rs.eof and not rs.bof then
>>        for i=0 to rs.Fields.Count-1
>>            rs.Fields(i).Name
>>        next
>>        j=0
>>				Do While Not rs.EOF
>>            for i=0 to rs.Fields.Count-1
>>                rs.Fields(i)
>>            next
>>            rs.MoveNext()
>>            j=j+1
>>				Loop
>>      end if
>>		end if
>>%>
>>
>>
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Nov 29 15:40:06 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] submitted AST factory changes to repository
Message-ID: <E3E10B98-03F3-11D7-B537-0030653DE0D6@jguru.com>

Folks,

I think I have fixed up the Java heterogeneous tree stuff and wonder of  
all wondes, I have added a TestASTFactory class in the examples area!   
My previous email + comments:

> 1. #[FOO] always builds an AST node of the default type because
>      the ASTFactory only knows about the default.  In future if you say
>
>      tokens {
>          PLUS<AST=PLUSNode>;
>          ...
>      }
>      then I'll make action #[PLUS] create the right node.  You can also
> say
>      #[ID,"foo","VarNode"] (3rd arg is the type of node to create).

I have modified action.g to handle the 3rd arg.

For 1 and 2 arg #[...] constructors, JavaCodeGenerator has been  
modified to handle snooping the first argument, ID in this case, and  
asking for any specified AST node type.  If a node type is known, it is  
passed as a third arg to create(...).

> 2. dup methods of ASTFactory don't respect the type of the nodes; it
>      uses default node type.  In future, i'll use
> t.getClass().newInstance()
>      to do the dup.

ASTFactory.dup(AST t) now makes sure that the resulting node has the  
same type, t.getClass(), as t.

> 3. hetero tree construction does not call the factory.  E.g.,
>
>      anIntRule : INT<AST=INTNode> ;
>
>      generates
>
>      INTNode v = new INTNode(LT(1));
>
>      but we need to instead generate:
>
>      AST v = (AST)astFactory.create(LT(1),"INTNode");
>
>      where the create(...) method is new and specifies the type to
>      create.  This will use newInstance() instead of "new" by default.

Every reference to INT now generates

INTNode tmp1_AST = null;
tmp1_AST = (INTNode)astFactory.create(LT(1),"INTNode");

not

INTNode tmp1_AST = null;
tmp1_AST = new INTNode(LT(1));

and so does stuff like X<AST=XNode>.

> 4. If you define ID<AST=T> in tokens section then all code in grammar
> "id:ID" should
>      define labels as "T id" not "AST id" nor labelASTType id.

I think it was this way before, but ANTLR definitely uses the most  
specific type it can now.

tokens {
     A<AST=X>;
}

a : A A<AST=Y> ;

generates

             X tmp1_AST = null;
             tmp1_AST = (X)astFactory.create(LT(1),"X");
             ...
             Y tmp2_AST = null;
             tmp2_AST = (Y)astFactory.create(LT(1),"Y");

I have modified the following files:  
----------------------------------------------

         //depot/code/org.antlr/main/main/antlr/ASTFactory.java  # edit

Added mapping from token type to classname for dynamic node  
specification.
ANTLR doesn't use this as it only handles static stuff like #[ID] not  
#[LT(1)].

        public void setTokenTypeASTNodeType(int tokenType, String  
className)

modified all of the create/dup routines to respect type.  Added

        public AST create(int type, String txt, String className)

to handle #[ID,"v","MyNodeType"].

         //depot/code/org.antlr/main/main/antlr/BaseAST.java     # edit

Just edited comment.

         //depot/code/org.antlr/main/main/antlr/JavaCodeGenerator.java    
# edit

Altered the getASTCreateString(...) routines to check for AST node type  
stuff

         //depot/code/org.antlr/main/main/antlr/Parser.java      # edit

Changed a comment

         //depot/code/org.antlr/main/main/antlr/Version.java     # edit
          
//depot/code/org.antlr/main/main/antlr/actions/java/ActionLexer.java     
# edit
          
//depot/code/org.antlr/main/main/antlr/actions/java/ 
ActionLexerTokenTypes.java  # edit
         //depot/code/org.antlr/main/main/antlr/actions/java/action.g     
# edit

Added #[a,b,c] format

          
//depot/code/org.antlr/main/main/examples/java/ASTsupport/ 
ASTType49.java        # add
          
//depot/code/org.antlr/main/main/examples/java/ASTsupport/MyAST.java     
# add
          
//depot/code/org.antlr/main/main/examples/java/ASTsupport/ 
TestASTFactory.java   # add

unit test

          
//depot/code/org.antlr/main/main/examples/java/heteroAST/ 
BinaryOperatorAST.java # edit
          
//depot/code/org.antlr/main/main/examples/java/heteroAST/CalcAST.java    
# edit
          
//depot/code/org.antlr/main/main/examples/java/heteroAST/INTNode.java    
# edit
          
//depot/code/org.antlr/main/main/examples/java/heteroAST/MULTNode.java   
# edit
          
//depot/code/org.antlr/main/main/examples/java/heteroAST/Main.java       
# edit
          
//depot/code/org.antlr/main/main/examples/java/heteroAST/PLUSNode.java   
# edit

Factored some init methods out of specific AST types.

I have uploaded this antlr-2.7.2a6_11-29-2002.jar file to the download  
area if you want to check it out on your grammars.  I think C++, C#,  
Java are now more similar in their treatment of hetero trees; for sure,  
the java hetero tree stuff was just plain broken before.

Next step is C# integration into the main line.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

