From nelson.ana at gmail.com  Sun Jun  1 03:29:09 2008
From: nelson.ana at gmail.com (Ana Nelson)
Date: Sun, 1 Jun 2008 11:29:09 +0100
Subject: [antlr-interest] grammar to latex
In-Reply-To: <4841D15A.4060405@web.de>
References: <48412784.70906@web.de>
	<a7d6d2740805310557n298cb964ta788986d59366bbd@mail.gmail.com>
	<a7d6d2740805311413s68c97cddsd729278d952296ed@mail.gmail.com>
	<4841D15A.4060405@web.de>
Message-ID: <a7d6d2740806010329w2404a173kaabbf85b939f1aa3@mail.gmail.com>

Hi, Felix,

Don't worry, this wasn't your fault. :-) These things are just addictive.
And, when I read your email I wasn't sure if this was exactly what were
looking for so I just did this out of curiosity.

If you want syntax highlighting using fonts rather than colours, this should
be possible to implement in Pygments but it's not supported at the moment,
just bold/italic etc. are. I think it'd just be a case of writing a custom
latex formatter which emitted e.g. \textrm rather than \colorbox.

It would probably be useful to have this option for people needing to
publish in black and white. I might take a quick look, but I don't know if
I'll have time to do this myself.

Anyway, if you think you want to use this you might try installing Pygments,
preferably the development version, and see how you get on with it.

You could alternatively search for a syntax highlighter with font support
already (I don't know if there is one or not) and write a grammar for that.
Or, if you are just looking for very basic decorations, maybe an existing
grammar would be close enough. (I used to use highlight
http://www.andre-simon.de/ and it worked fine, but I never tried modifying a
grammar.)

-Ana


2008/5/31 Felix Dorner <felix_do at web.de>:

> Hei Ana,
>
> gee, I hope I didn't keep you from socializing this weekend... The example
> looks cool. I don' t know pygments, what I really would like is not syntax
> coloring, but fontification, such that terminals (Strings in ' ' would get
> typewriter font, braces and other ebnf specials roman, and all other stuff
> (rules and subrules) italic. Would this be easy too?
>
> Felix
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080601/66211dc1/attachment.html 

From subscriptionlist at yahoo.com  Sun Jun  1 04:13:32 2008
From: subscriptionlist at yahoo.com (Jiiii Uuuuu)
Date: Sun, 1 Jun 2008 04:13:32 -0700 (PDT)
Subject: [antlr-interest] antlr 3.1b - actionscript - commontokenstream error
Message-ID: <897208.19585.qm@web46211.mail.sp1.yahoo.com>

Hi, 

&nbsp;&nbsp;&nbsp; I was trying to use generated actionscript code in the following way, and hit type conversion error, any help please?

-----------------SNIP----------
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; var lexer:myLexer = new myLexer ( new ANTLRStringStream ( input.text + "\r\n" ) );
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; var tokens:CommonTokenStream = CommonTokenStream(lexer);

&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; var parser:myParser = myParser(tokens);
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; parser.prog();
------------------SNIP-----------

TypeError: Error #1034: Type Coercion failed: cannot convert com.jithu::myLexer at 3b964a1 to org.antlr.runtime.CommonTokenStream.
&nbsp;&nbsp;&nbsp; at VirtualLab/AntlrActionScriptTest()
&nbsp;&nbsp;&nbsp; at VirtualLab/___VirtualLab_Button1_click()

Thanks in advance :)

Regards
Jithu




      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080601/81c7cd5a/attachment.html 

From antlr at mirality.co.nz  Sun Jun  1 06:08:01 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 02 Jun 2008 01:08:01 +1200
Subject: [antlr-interest] antlr 3.1b - actionscript - commontokenstream
 error
In-Reply-To: <897208.19585.qm@web46211.mail.sp1.yahoo.com>
References: <897208.19585.qm@web46211.mail.sp1.yahoo.com>
Message-ID: <20080601130808.9852A11ECC0@www.antlr.org>

At 23:13 1/06/2008, Jiiii Uuuuu wrote:
>     I was trying to use generated actionscript code in the 
> following way, and hit type conversion error, any help please?
>
>-----------------SNIP----------
>             var lexer:myLexer = new myLexer ( new 
> ANTLRStringStream ( input.text + "\r\n" ) );
>             var tokens:CommonTokenStream = 
> CommonTokenStream(lexer);
>
>             var parser:myParser = myParser(tokens);
>             parser.prog();
>------------------SNIP-----------
>
>TypeError: Error #1034: Type Coercion failed: cannot convert 
>com.jithu::myLexer at 3b964a1 to org.antlr.runtime.CommonTokenStream.
>     at VirtualLab/AntlrActionScriptTest()
>     at VirtualLab/___VirtualLab_Button1_click()

While I don't know the first thing about ActionScript (so could 
easily be wrong) -- could it be that you didn't say 'new' when 
creating the token stream and the parser, so it thinks it's a type 
conversion instead of a constructor call?


From r.mark.volkmann at gmail.com  Sun Jun  1 20:29:51 2008
From: r.mark.volkmann at gmail.com (Mark Volkmann)
Date: Sun, 1 Jun 2008 22:29:51 -0500
Subject: [antlr-interest] new article on ANTLR
Message-ID: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>

An article I wrote on ANTLR is now available at
http://www.ociweb.com/jnb/jnbJun2008.html.
Feedback is welcomed! I'd be happy to fix any errors anyone finds.

-- 
R. Mark Volkmann
Object Computing, Inc.

From gmdidro at gmail.com  Mon Jun  2 02:04:29 2008
From: gmdidro at gmail.com (=?KOI8-R?B?8MXU0s/XIOHMxcvTwc7E0g==?=)
Date: Mon, 2 Jun 2008 13:04:29 +0400
Subject: [antlr-interest] new article on ANTLR
In-Reply-To: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>
Message-ID: <1dcb5c470806020204u136d86a0mee7adfaf08057250@mail.gmail.com>

Thank you,
the Tree Grammar of full-fledged Tree Parser is the very thing I finding.
Very interesting article.

On 02/06/2008, Mark Volkmann <r.mark.volkmann at gmail.com> wrote:
> An article I wrote on ANTLR is now available at
> http://www.ociweb.com/jnb/jnbJun2008.html.
> Feedback is welcomed! I'd be happy to fix any errors anyone finds.
>
> --
> R. Mark Volkmann
> Object Computing, Inc.
>

From Yury at serdyuk.botik.ru  Mon Jun  2 09:03:13 2008
From: Yury at serdyuk.botik.ru (Yury Serdyuk)
Date: Mon, 02 Jun 2008 20:03:13 +0400
Subject: [antlr-interest] LINQ grammar ( as part of C# 3.0 )
Message-ID: <484419C1.4060306@serdyuk.botik.ru>

Hi !

Does any have an (unambiguous) grammar for LINQ ?
Unfortunately, it's standard representation is ambiguous for ANTLR:

generalExpression : "dummy" | queryBody;
queryBody : selectClause (intoClause)? ;
selectClause : "select" generalExpression;
intoClause : "into" queryBody;

Linq.g:16:17: warning:nondeterminism between alts 1 and 2 of block upon
Linq.g:16:17: k==1:"into"
Linq.g:16:17: k==2:"select"

Is it possible to repair it somehow ?

Thanks.

Yury

From cdoucette at vaultus.com  Mon Jun  2 11:26:30 2008
From: cdoucette at vaultus.com (Doucette, Charles)
Date: Mon, 2 Jun 2008 14:26:30 -0400
Subject: [antlr-interest] antlr 3.1b1 problems with DebugEventSocketProxy?
Message-ID: <A7746824D386F947BBC285F6EC4716B0021311D081@vmtbosmail01.VMTBOSTON.VAULTUS.COM>

I am trying to debug a parser I generated with Antlr 3.1b1, and I'm seeing two at least problems:

This is an error:

java.lang.NullPointerException
at org.antlr.runtime.debug.DebugEventSocketProxy.transmit(DebugEventSocketProxy.java:116)
at org.antlr.runtime.debug.DebugEventSocketProxy.exitRule(DebugEventSocketProxy.java:130)
at com.vaultus.studio.vscript.parser.antlr.vscriptParser.vscript(vscriptParser.java:488)
at com.vaultus.studio.vscript.parser.plugin.VScriptSourceParser.parse(VScriptSourceParser.java:69)

Here's the code sequence that invokes this:

finally {

dbg.exitRule(getGrammarFileName(), "vscript");

decRuleLevel();

if ( getRuleLevel()==0 ) {dbg.terminate();}

}

I haven't yet looked at the Antlr source code to see exactly what is causing this problem.

This is a warning:

java.net.BindException: Address already in use: JVM_Bind
at java.net.PlainSocketImpl.socketBind(Native Method)
at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:359)
at java.net.ServerSocket.bind(ServerSocket.java:319)
at java.net.ServerSocket.<init>(ServerSocket.java:185)
at java.net.ServerSocket.<init>(ServerSocket.java:97)
at org.antlr.runtime.debug.DebugEventSocketProxy.handshake(DebugEventSocketProxy.java:75)
at com.vaultus.studio.vscript.parser.antlr.vscriptParser.<init>(vscriptParser.java:351)
at com.vaultus.studio.vscript.parser.antlr.vscriptParser.<init>(vscriptParser.java:341)
at com.vaultus.studio.vscript.parser.plugin.VScriptSourceParser.parse(VScriptSourceParser.java:62)

Chuck

________________________________

Charles E. Doucette *  617-399-1122 *  Vaultus Mobile Technologies, 263 Summer St., Boston, MA 02210 *  http://www.vaultus.com<http://www.vaultus.com/>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080602/f709927b/attachment.html 

From parrt at cs.usfca.edu  Mon Jun  2 11:33:51 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 2 Jun 2008 11:33:51 -0700
Subject: [antlr-interest] antlr 3.1b1 problems with
	DebugEventSocketProxy?
In-Reply-To: <A7746824D386F947BBC285F6EC4716B0021311D081@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
References: <A7746824D386F947BBC285F6EC4716B0021311D081@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
Message-ID: <49AF2BE2-A5FE-4971-968C-50C497C421B8@cs.usfca.edu>

more than one parser is running...

$ killall java

Ter
On Jun 2, 2008, at 11:26 AM, Doucette, Charles wrote:

> I am trying to debug a parser I generated with Antlr 3.1b1, and I'm  
> seeing two at least problems:
>
> This is an error:
>
> java.lang.NullPointerException
> at  
> org 
> .antlr 
> .runtime 
> .debug.DebugEventSocketProxy.transmit(DebugEventSocketProxy.java:116)
> at  
> org 
> .antlr 
> .runtime 
> .debug.DebugEventSocketProxy.exitRule(DebugEventSocketProxy.java:130)
> at  
> com 
> .vaultus 
> .studio 
> .vscript.parser.antlr.vscriptParser.vscript(vscriptParser.java:488)
> at  
> com 
> .vaultus 
> .studio 
> .vscript 
> .parser.plugin.VScriptSourceParser.parse(VScriptSourceParser.java:69)
>
> Here's the code sequence that invokes this:
> finally {
>
> dbg.exitRule(getGrammarFileName(), "vscript");
>
> decRuleLevel();
>
> if ( getRuleLevel()==0 ) {dbg.terminate();}
>
> }
>
> I haven't yet looked at the Antlr source code to see exactly what is  
> causing this problem.
>
> This is a warning:
>
> java.net.BindException: Address already in use: JVM_Bind
> at java.net.PlainSocketImpl.socketBind(Native Method)
> at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:359)
> at java.net.ServerSocket.bind(ServerSocket.java:319)
> at java.net.ServerSocket.<init>(ServerSocket.java:185)
> at java.net.ServerSocket.<init>(ServerSocket.java:97)
> at  
> org 
> .antlr 
> .runtime 
> .debug.DebugEventSocketProxy.handshake(DebugEventSocketProxy.java:75)
> at  
> com 
> .vaultus 
> .studio.vscript.parser.antlr.vscriptParser.<init>(vscriptParser.java: 
> 351)
> at  
> com 
> .vaultus 
> .studio.vscript.parser.antlr.vscriptParser.<init>(vscriptParser.java: 
> 341)
> at  
> com 
> .vaultus 
> .studio 
> .vscript 
> .parser.plugin.VScriptSourceParser.parse(VScriptSourceParser.java:62)
>
> Chuck
>
> Charles E. Doucette ?  617-399-1122 ?  Vaultus Mobile Technologies,  
> 263 Summer St., Boston, MA 02210 ?  http://www.vaultus.com
>


From open.zone at virgin.net  Mon Jun  2 11:49:51 2008
From: open.zone at virgin.net (Micheal J)
Date: Mon, 2 Jun 2008 19:49:51 +0100
Subject: [antlr-interest] new article on ANTLR
In-Reply-To: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>
Message-ID: <002601c8c4e1$7285dbc0$c404a8c0@marion>


> An article I wrote on ANTLR is now available at 
> http://www.ociweb.com/jnb/jnbJun2008.html.
> Feedback is welcomed! I'd be happy to fix any errors anyone finds.
> 
> --
> R. Mark Volkmann
> Object Computing, Inc.

Haven't read it yet but, looks like a nice in-depth tutorial for the wiki...

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 


From csanders at hoovers.com  Mon Jun  2 11:54:38 2008
From: csanders at hoovers.com (csanders)
Date: Mon, 02 Jun 2008 13:54:38 -0500
Subject: [antlr-interest] new article on ANTLR
In-Reply-To: <002601c8c4e1$7285dbc0$c404a8c0@marion>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>
	<002601c8c4e1$7285dbc0$c404a8c0@marion>
Message-ID: <484441EE.2030308@hoovers.com>

 >  Haven't read it yet but, looks like a nice in-depth tutorial for the 
wiki...

Where it will promptly get lost.  Navigating that wiki is painful to say 
the least.

Really nice article  btw.

Thanks,
Charlie
Micheal J wrote:
>> An article I wrote on ANTLR is now available at 
>> http://www.ociweb.com/jnb/jnbJun2008.html.
>> Feedback is welcomed! I'd be happy to fix any errors anyone finds.
>>
>> --
>> R. Mark Volkmann
>> Object Computing, Inc.
>>     
>
> Haven't read it yet but, looks like a nice in-depth tutorial for the wiki...
>
> Micheal
>
> -----------------------
> The best way to contact me is via the list/forum. My time is very limited. 
>
>   


From cdoucette at vaultus.com  Mon Jun  2 12:00:20 2008
From: cdoucette at vaultus.com (Doucette, Charles)
Date: Mon, 2 Jun 2008 15:00:20 -0400
Subject: [antlr-interest] antlr 3.0.1 error (invoked from antlrworks 1.1.7)
	- OutOfMemory
Message-ID: <A7746824D386F947BBC285F6EC4716B0021311D0B1@vmtbosmail01.VMTBOSTON.VAULTUS.COM>

How can I override the amount of memory used by antlr and/or Java?
I am invoking this from AntlrWorks 1.1.7.

[14:54:30] error(10):  internal error: Can't get property javaCompressedTransition using method get/isJavaCompressedTransition from org.antlr.analysis.DFA instance : java.lang.OutOfMemoryError: Java heap space
java.util.ArrayList.<init>(Unknown Source)
org.antlr.analysis.DFA.getRunLengthEncoding(DFA.java:423)
org.antlr.analysis.DFA.getJavaCompressedTransition(DFA.java:399)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
java.lang.reflect.Method.invoke(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.invokeMethod(ASTExpr.java:563)
org.antlr.stringtemplate.language.ASTExpr.rawGetObjectProperty(ASTExpr.java:513)
org.antlr.stringtemplate.language.ASTExpr.getObjectProperty(ASTExpr.java:420)
org.antlr.stringtemplate.language.ActionEvaluator.attribute(ActionEvaluator.java:346)
org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.java:131)
org.antlr.stringtemplate.language.ActionEvaluator.templateApplication(ActionEvaluator.java:211)
org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.java:121)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:79)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:152)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:742)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:81)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:152)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:81)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:152)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1132)
org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:439)
org.antlr.Tool.processGrammar(Tool.java:347)
________________________________

Charles E. Doucette *  617-399-1122 *  Vaultus Mobile Technologies, 263 Summer St., Boston, MA 02210 *  http://www.vaultus.com<http://www.vaultus.com/>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080602/38e70d7f/attachment.html 

From cdoucette at vaultus.com  Mon Jun  2 13:11:47 2008
From: cdoucette at vaultus.com (Doucette, Charles)
Date: Mon, 2 Jun 2008 16:11:47 -0400
Subject: [antlr-interest] antlr 3.0.1 error (invoked from antlrworks
 1.1.7)	- OutOfMemory
In-Reply-To: <A7746824D386F947BBC285F6EC4716B0021311D0B1@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
References: <A7746824D386F947BBC285F6EC4716B0021311D0B1@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
Message-ID: <A7746824D386F947BBC285F6EC4716B0021311D0E8@vmtbosmail01.VMTBOSTON.VAULTUS.COM>

I answered my own question by changing the Java command used to invoke executable jar files:

HKEY_CLASSES_ROOT\jarfile\shell\open\command

"C:\Java\jdk1.5.0_12\bin\javaw.exe" -Xmx1024m -jar "%1" %*

Chuck

________________________________
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Doucette, Charles
Sent: Monday, June 02, 2008 3:00 PM
To: antlr-interest Interest
Subject: [antlr-interest] antlr 3.0.1 error (invoked from antlrworks 1.1.7) - OutOfMemory

How can I override the amount of memory used by antlr and/or Java?
I am invoking this from AntlrWorks 1.1.7.

[14:54:30] error(10):  internal error: Can't get property javaCompressedTransition using method get/isJavaCompressedTransition from org.antlr.analysis.DFA instance : java.lang.OutOfMemoryError: Java heap space
java.util.ArrayList.<init>(Unknown Source)
org.antlr.analysis.DFA.getRunLengthEncoding(DFA.java:423)
org.antlr.analysis.DFA.getJavaCompressedTransition(DFA.java:399)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
java.lang.reflect.Method.invoke(Unknown Source)
org.antlr.stringtemplate.language.ASTExpr.invokeMethod(ASTExpr.java:563)
org.antlr.stringtemplate.language.ASTExpr.rawGetObjectProperty(ASTExpr.java:513)
org.antlr.stringtemplate.language.ASTExpr.getObjectProperty(ASTExpr.java:420)
org.antlr.stringtemplate.language.ActionEvaluator.attribute(ActionEvaluator.java:346)
org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.java:131)
org.antlr.stringtemplate.language.ActionEvaluator.templateApplication(ActionEvaluator.java:211)
org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.java:121)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:79)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:152)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:742)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:81)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:152)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:722)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:659)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator.java:81)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:152)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1132)
org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:439)
org.antlr.Tool.processGrammar(Tool.java:347)
________________________________

Charles E. Doucette *  617-399-1122 *  Vaultus Mobile Technologies, 263 Summer St., Boston, MA 02210 *  http://www.vaultus.com<http://www.vaultus.com/>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080602/62fb3962/attachment.html 

From cmundi at gmail.com  Mon Jun  2 13:21:36 2008
From: cmundi at gmail.com (C. Mundi)
Date: Mon, 2 Jun 2008 13:21:36 -0700
Subject: [antlr-interest] new article on ANTLR
In-Reply-To: <484441EE.2030308@hoovers.com>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>
	<002601c8c4e1$7285dbc0$c404a8c0@marion> <484441EE.2030308@hoovers.com>
Message-ID: <e794390806021321y76d30099id40133f5250c0a9e@mail.gmail.com>

Ditto on how informative the article is.

Ditto on the role of the wiki.   A massively cross-linked wiki of shifting
content is not a substitute for well written and well edited top-down
structured documentation.

Despite needing more editing than it got, the antlr book is what people
really need.




On Mon, Jun 2, 2008 at 11:54 AM, csanders <csanders at hoovers.com> wrote:

> >  Haven't read it yet but, looks like a nice in-depth tutorial for the
> wiki...
>
> Where it will promptly get lost.  Navigating that wiki is painful to say
> the least.
>
> Really nice article  btw.
>
> Thanks,
> Charlie
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080602/bc064d88/attachment.html 

From cdoucette at vaultus.com  Mon Jun  2 13:31:01 2008
From: cdoucette at vaultus.com (Doucette, Charles)
Date: Mon, 2 Jun 2008 16:31:01 -0400
Subject: [antlr-interest] antlr 3.1b1 problems with
 DebugEventSocketProxy?
In-Reply-To: <49AF2BE2-A5FE-4971-968C-50C497C421B8@cs.usfca.edu>
References: <A7746824D386F947BBC285F6EC4716B0021311D081@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
	<49AF2BE2-A5FE-4971-968C-50C497C421B8@cs.usfca.edu>
Message-ID: <A7746824D386F947BBC285F6EC4716B0021311D0F4@vmtbosmail01.VMTBOSTON.VAULTUS.COM>

For the time being, I have reverted to the current/earlier version of Antlr (i.e. 3.0.1 vs. 3.1b1).

Is not being able to run multiple parsers a new restriction?
If so, is that configurable?
This may impact the code that I am developing.

Thanks,
Chuck

> -----Original Message-----
> From: Terence Parr [mailto:parrt at cs.usfca.edu]
> Sent: Monday, June 02, 2008 2:34 PM
> To: Doucette, Charles
> Cc: antlr-interest Interest
> Subject: Re: [antlr-interest] antlr 3.1b1 problems with
> DebugEventSocketProxy?
>
> more than one parser is running...
>
> $ killall java
>
> Ter
> On Jun 2, 2008, at 11:26 AM, Doucette, Charles wrote:
>
> > I am trying to debug a parser I generated with Antlr 3.1b1, and I'm
> > seeing two at least problems:
> >
> > This is an error:
> >
> > java.lang.NullPointerException
> > at
> > org
> > .antlr
> > .runtime
> >
> .debug.DebugEventSocketProxy.transmit(DebugEventSocketProxy.java:116)
> > at
> > org
> > .antlr
> > .runtime
> >
> .debug.DebugEventSocketProxy.exitRule(DebugEventSocketProxy.java:130)
> > at
> > com
> > .vaultus
> > .studio
> > .vscript.parser.antlr.vscriptParser.vscript(vscriptParser.java:488)
> > at
> > com
> > .vaultus
> > .studio
> > .vscript
> >
> .parser.plugin.VScriptSourceParser.parse(VScriptSourceParser.java:69)
> >
> > Here's the code sequence that invokes this:
> > finally {
> >
> > dbg.exitRule(getGrammarFileName(), "vscript");
> >
> > decRuleLevel();
> >
> > if ( getRuleLevel()==0 ) {dbg.terminate();}
> >
> > }
> >
> > I haven't yet looked at the Antlr source code to see
> exactly what is
> > causing this problem.
> >
> > This is a warning:
> >
> > java.net.BindException: Address already in use: JVM_Bind at
> > java.net.PlainSocketImpl.socketBind(Native Method) at
> > java.net.PlainSocketImpl.bind(PlainSocketImpl.java:359)
> > at java.net.ServerSocket.bind(ServerSocket.java:319)
> > at java.net.ServerSocket.<init>(ServerSocket.java:185)
> > at java.net.ServerSocket.<init>(ServerSocket.java:97)
> > at
> > org
> > .antlr
> > .runtime
> >
> .debug.DebugEventSocketProxy.handshake(DebugEventSocketProxy.java:75)
> > at
> > com
> > .vaultus
> >
> .studio.vscript.parser.antlr.vscriptParser.<init>(vscriptParser.java:
> > 351)
> > at
> > com
> > .vaultus
> >
> .studio.vscript.parser.antlr.vscriptParser.<init>(vscriptParser.java:
> > 341)
> > at
> > com
> > .vaultus
> > .studio
> > .vscript
> >
> .parser.plugin.VScriptSourceParser.parse(VScriptSourceParser.java:62)
> >
> > Chuck
> >
> > Charles E. Doucette *  617-399-1122 *  Vaultus Mobile Technologies,
> > 263 Summer St., Boston, MA 02210 *  http://www.vaultus.com
> >
>
>

From antlr at mirality.co.nz  Mon Jun  2 14:37:02 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 03 Jun 2008 09:37:02 +1200
Subject: [antlr-interest] antlr 3.1b1 problems with
 DebugEventSocketProxy?
In-Reply-To: <A7746824D386F947BBC285F6EC4716B0021311D0F4@vmtbosmail01.VM
	TBOSTON.VAULTUS.COM>
References: <A7746824D386F947BBC285F6EC4716B0021311D081@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
	<49AF2BE2-A5FE-4971-968C-50C497C421B8@cs.usfca.edu>
	<A7746824D386F947BBC285F6EC4716B0021311D0F4@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
Message-ID: <20080602213711.9633111ECA6@www.antlr.org>

At 08:31 3/06/2008, Doucette, Charles wrote:
 >For the time being, I have reverted to the current/earlier 
version
 >of Antlr (i.e. 3.0.1 vs. 3.1b1).
 >
 >Is not being able to run multiple parsers a new restriction?
 >If so, is that configurable?
 >This may impact the code that I am developing.

You can (and always have been able to) run multiple parsers at 
once, but if they're debug parsers (which appears to be the case 
from your mail) then you must set a unique port number for each 
one.  You'll also need multiple copies of ANTLRworks running if 
you need to debug them interleaved.

Debugging multiple parsers simultaneously is bound to make your 
head hurt, though, so I'm not sure if that's really what you were 
trying to do.


From cdoucette at vaultus.com  Mon Jun  2 14:40:08 2008
From: cdoucette at vaultus.com (Doucette, Charles)
Date: Mon, 2 Jun 2008 17:40:08 -0400
Subject: [antlr-interest] antlr 3.1b1 problems with
 DebugEventSocketProxy?
In-Reply-To: <f2ee05bf-7201-4cdc-b904-05e76655b8a6@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
References: <A7746824D386F947BBC285F6EC4716B0021311D081@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
	<49AF2BE2-A5FE-4971-968C-50C497C421B8@cs.usfca.edu>
	<A7746824D386F947BBC285F6EC4716B0021311D0F4@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
	<f2ee05bf-7201-4cdc-b904-05e76655b8a6@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
Message-ID: <A7746824D386F947BBC285F6EC4716B0021311D117@vmtbosmail01.VMTBOSTON.VAULTUS.COM>

I'm actually not trying to debug them per-se.
I did create a separate copy of my grammar which has no parameters, return types, or actions.
I was able to try debugging in Antlrworks with that copy of my grammar.

Now that my grammar appears ok, I am simply trying to test the entire parser.
I suspect the only thing that may need tweaking are my user defined actions.

Does the Antlr generator produce a debug parser by default?
I've only been using the default options.

Chuck

> -----Original Message-----
> From: Gavin Lambert [mailto:antlr at mirality.co.nz]
> Sent: Monday, June 02, 2008 5:37 PM
> To: Doucette, Charles
> Cc: antlr-interest Interest
> Subject: Re: [antlr-interest] antlr 3.1b1 problems with
> DebugEventSocketProxy?
>
> At 08:31 3/06/2008, Doucette, Charles wrote:
>  >For the time being, I have reverted to the current/earlier
> version  >of Antlr (i.e. 3.0.1 vs. 3.1b1).
>  >
>  >Is not being able to run multiple parsers a new restriction?
>  >If so, is that configurable?
>  >This may impact the code that I am developing.
>
> You can (and always have been able to) run multiple parsers
> at once, but if they're debug parsers (which appears to be
> the case from your mail) then you must set a unique port
> number for each one.  You'll also need multiple copies of
> ANTLRworks running if you need to debug them interleaved.
>
> Debugging multiple parsers simultaneously is bound to make
> your head hurt, though, so I'm not sure if that's really what
> you were trying to do.
>
>

From parrt at cs.usfca.edu  Mon Jun  2 15:10:17 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 2 Jun 2008 15:10:17 -0700
Subject: [antlr-interest] new article on ANTLR
In-Reply-To: <e794390806021321y76d30099id40133f5250c0a9e@mail.gmail.com>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>
	<002601c8c4e1$7285dbc0$c404a8c0@marion>
	<484441EE.2030308@hoovers.com>
	<e794390806021321y76d30099id40133f5250c0a9e@mail.gmail.com>
Message-ID: <4424BD46-BE7C-4655-9327-0F5578D39A6B@cs.usfca.edu>


On Jun 2, 2008, at 1:21 PM, C. Mundi wrote:

>
> Ditto on how informative the article is.
>
> Ditto on the role of the wiki.   A massively cross-linked wiki of  
> shifting content is not a substitute for well written and well  
> edited top-down structured documentation.
>
> Despite needing more editing than it got, the antlr book is what  
> people really need.

Hi Charlie, can you identify where I need to improve?  I'm in middle  
of next book.
Thanks,
Ter

From parrt at cs.usfca.edu  Mon Jun  2 15:10:32 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 2 Jun 2008 15:10:32 -0700
Subject: [antlr-interest] antlr 3.1b1 problems with
	DebugEventSocketProxy?
In-Reply-To: <A7746824D386F947BBC285F6EC4716B0021311D0F4@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
References: <A7746824D386F947BBC285F6EC4716B0021311D081@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
	<49AF2BE2-A5FE-4971-968C-50C497C421B8@cs.usfca.edu>
	<A7746824D386F947BBC285F6EC4716B0021311D0F4@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
Message-ID: <48D694B5-C7CF-4C46-93BF-06DF190C17D3@cs.usfca.edu>


On Jun 2, 2008, at 1:31 PM, Doucette, Charles wrote:

> For the time being, I have reverted to the current/earlier version  
> of Antlr (i.e. 3.0.1 vs. 3.1b1).
>
> Is not being able to run multiple parsers a new restriction?

not in debug mode on same server socket.
Ter
>
> If so, is that configurable?
> This may impact the code that I am developing.
>
> Thanks,
> Chuck
>
>> -----Original Message-----
>> From: Terence Parr [mailto:parrt at cs.usfca.edu]
>> Sent: Monday, June 02, 2008 2:34 PM
>> To: Doucette, Charles
>> Cc: antlr-interest Interest
>> Subject: Re: [antlr-interest] antlr 3.1b1 problems with
>> DebugEventSocketProxy?
>>
>> more than one parser is running...
>>
>> $ killall java
>>
>> Ter
>> On Jun 2, 2008, at 11:26 AM, Doucette, Charles wrote:
>>
>>> I am trying to debug a parser I generated with Antlr 3.1b1, and I'm
>>> seeing two at least problems:
>>>
>>> This is an error:
>>>
>>> java.lang.NullPointerException
>>> at
>>> org
>>> .antlr
>>> .runtime
>>>
>> .debug.DebugEventSocketProxy.transmit(DebugEventSocketProxy.java:116)
>>> at
>>> org
>>> .antlr
>>> .runtime
>>>
>> .debug.DebugEventSocketProxy.exitRule(DebugEventSocketProxy.java:130)
>>> at
>>> com
>>> .vaultus
>>> .studio
>>> .vscript.parser.antlr.vscriptParser.vscript(vscriptParser.java:488)
>>> at
>>> com
>>> .vaultus
>>> .studio
>>> .vscript
>>>
>> .parser.plugin.VScriptSourceParser.parse(VScriptSourceParser.java:69)
>>>
>>> Here's the code sequence that invokes this:
>>> finally {
>>>
>>> dbg.exitRule(getGrammarFileName(), "vscript");
>>>
>>> decRuleLevel();
>>>
>>> if ( getRuleLevel()==0 ) {dbg.terminate();}
>>>
>>> }
>>>
>>> I haven't yet looked at the Antlr source code to see
>> exactly what is
>>> causing this problem.
>>>
>>> This is a warning:
>>>
>>> java.net.BindException: Address already in use: JVM_Bind at
>>> java.net.PlainSocketImpl.socketBind(Native Method) at
>>> java.net.PlainSocketImpl.bind(PlainSocketImpl.java:359)
>>> at java.net.ServerSocket.bind(ServerSocket.java:319)
>>> at java.net.ServerSocket.<init>(ServerSocket.java:185)
>>> at java.net.ServerSocket.<init>(ServerSocket.java:97)
>>> at
>>> org
>>> .antlr
>>> .runtime
>>>
>> .debug.DebugEventSocketProxy.handshake(DebugEventSocketProxy.java:75)
>>> at
>>> com
>>> .vaultus
>>>
>> .studio.vscript.parser.antlr.vscriptParser.<init>(vscriptParser.java:
>>> 351)
>>> at
>>> com
>>> .vaultus
>>>
>> .studio.vscript.parser.antlr.vscriptParser.<init>(vscriptParser.java:
>>> 341)
>>> at
>>> com
>>> .vaultus
>>> .studio
>>> .vscript
>>>
>> .parser.plugin.VScriptSourceParser.parse(VScriptSourceParser.java:62)
>>>
>>> Chuck
>>>
>>> Charles E. Doucette *  617-399-1122 *  Vaultus Mobile Technologies,
>>> 263 Summer St., Boston, MA 02210 *  http://www.vaultus.com
>>>
>>
>>


From csanders at hoovers.com  Mon Jun  2 15:27:30 2008
From: csanders at hoovers.com (csanders)
Date: Mon, 02 Jun 2008 17:27:30 -0500
Subject: [antlr-interest] new article on ANTLR
In-Reply-To: <4424BD46-BE7C-4655-9327-0F5578D39A6B@cs.usfca.edu>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>
	<002601c8c4e1$7285dbc0$c404a8c0@marion>
	<484441EE.2030308@hoovers.com>
	<e794390806021321y76d30099id40133f5250c0a9e@mail.gmail.com>
	<4424BD46-BE7C-4655-9327-0F5578D39A6B@cs.usfca.edu>
Message-ID: <484473D2.5050500@hoovers.com>

Terence Parr wrote:
>
> On Jun 2, 2008, at 1:21 PM, C. Mundi wrote:
>
>>
>> Ditto on how informative the article is.
>>
>> Ditto on the role of the wiki.   A massively cross-linked wiki of 
>> shifting content is not a substitute for well written and well edited 
>> top-down structured documentation.
>>
>> Despite needing more editing than it got, the antlr book is what 
>> people really need.
>
> Hi Charlie, can you identify where I need to improve?  I'm in middle 
> of next book.
> Thanks,
> Ter



I'm in the middle of reading your first one! :).  I'm not sure there is 
an easy solution, I will take some time to go through it though and try 
to identify the problem areas.

Thanks,
Charlie

From parrt at cs.usfca.edu  Mon Jun  2 16:03:49 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 2 Jun 2008 16:03:49 -0700
Subject: [antlr-interest] new article on ANTLR
In-Reply-To: <484473D2.5050500@hoovers.com>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>
	<002601c8c4e1$7285dbc0$c404a8c0@marion>
	<484441EE.2030308@hoovers.com>
	<e794390806021321y76d30099id40133f5250c0a9e@mail.gmail.com>
	<4424BD46-BE7C-4655-9327-0F5578D39A6B@cs.usfca.edu>
	<484473D2.5050500@hoovers.com>
Message-ID: <A3D174C1-3E64-4DFC-B98F-4CB719534B90@cs.usfca.edu>


On Jun 2, 2008, at 3:27 PM, csanders wrote:

> Terence Parr wrote:
>>
>> On Jun 2, 2008, at 1:21 PM, C. Mundi wrote:
>>
>>>
>>> Ditto on how informative the article is.
>>>
>>> Ditto on the role of the wiki.   A massively cross-linked wiki of  
>>> shifting content is not a substitute for well written and well  
>>> edited top-down structured documentation.
>>>
>>> Despite needing more editing than it got, the antlr book is what  
>>> people really need.
>>
>> Hi Charlie, can you identify where I need to improve?  I'm in  
>> middle of next book.
>> Thanks,
>> Ter
>
>
>
> I'm in the middle of reading your first one! :).  I'm not sure there  
> is an easy solution, I will take some time to go through it though  
> and try to identify the problem areas.

Ok, let me know if you find anything glaring...it'll take me 4 months  
to write this one.
Ter

From belayda at gmail.com  Mon Jun  2 21:26:06 2008
From: belayda at gmail.com (Bernardo Elayda)
Date: Mon, 2 Jun 2008 21:26:06 -0700
Subject: [antlr-interest] Open source linkers made with Antlr?
Message-ID: <3e5ed32f0806022126o622a420dr749ea5eb2c086024@mail.gmail.com>

Hi,

I'm looking for a good open source linker.

I'd like to use a linker that already has its own linker language and (I
hope) has been used for awhile.  Haven't been successful in googling for
one.
Alternatively, if some one has made a linker with Antlr, would you be
willing to share the source?  I typically develop high-level to low-level
code generators with Antlr.  I'm reaching a point where I need a
full-featured linker.

tia,
Bernardo Elayda
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080602/68f5b05e/attachment.html 

From kevina.choolhun at gmail.com  Tue Jun  3 02:38:39 2008
From: kevina.choolhun at gmail.com (Kevina Choolhun)
Date: Tue, 3 Jun 2008 13:38:39 +0400
Subject: [antlr-interest] Trying to implement a while loop using embedded
	actions in ANTLR
Message-ID: <2373b1b90806030238h4c99927bs824e18bb5931c809@mail.gmail.com>

Hello everybody,

I am new at antlr and have been trying my hand at embedding actions to try
make a while_loop work...

Here is part of my code.

whileStatement
@init{ evaluate = false;}
@after{evaluate=true;}

:
        'while' c1 = cond
            {$c1.value == true}?=>
            {while !($c1.value==true)
            {

            evaluate=true;}
                stat+
             }
             'endwhile'


 It works fine apart from the
("major") fact that it does not iterate, i.e. It enters the loop if
condition is true, process the actions inside the loop and exits, even if
condition is still true...

I have run out of ideas.. well, i am new at antlr and may be missing an
important point somewhere.

Can someone please counsel?

Thank you for your help.

Kevina
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080603/9e57ef6e/attachment.html 

From adam.rpconnelly at googlemail.com  Tue Jun  3 02:58:45 2008
From: adam.rpconnelly at googlemail.com (Adam Connelly)
Date: Tue, 3 Jun 2008 10:58:45 +0100
Subject: [antlr-interest] Trying to implement a while loop using
	embedded actions in ANTLR
In-Reply-To: <2373b1b90806030238h4c99927bs824e18bb5931c809@mail.gmail.com>
References: <2373b1b90806030238h4c99927bs824e18bb5931c809@mail.gmail.com>
Message-ID: <b9a39b060806030258l2a94c2e8p921c7c6218191bd5@mail.gmail.com>

Not 100% on this, but it looks like you have a typo.

'while' c1 = cond
            {$c1.value == true}?=>
            {while !($c1.value==true)
            {

            evaluate=true;}
                stat+
             }
             'endwhile'

Should be

'while' c1 = cond
            {$c1.value == true}?=>
            {while !($c1.value==true)
            {

            evaluate=true;}
             }
             stat+
             'endwhile'

Looks like the stat+ is inside the action.  I think I know what you're
trying to say, but I doubt it will work like that.  I'm actually surprised
it compiles, but then I'm not an ANTLR expert.  Sorry I can't think of a
solution at the moment.

Adam

2008/6/3 Kevina Choolhun <kevina.choolhun at gmail.com>:

>
>
> Hello everybody,
>
> I am new at antlr and have been trying my hand at embedding actions to try
> make a while_loop work...
>
> Here is part of my code.
>
> whileStatement
> @init{ evaluate = false;}
> @after{evaluate=true;}
>
> :
>         'while' c1 = cond
>             {$c1.value == true}?=>
>             {while !($c1.value==true)
>             {
>
>             evaluate=true;}
>                 stat+
>              }
>              'endwhile'
>
>
>  It works fine apart from the
> ("major") fact that it does not iterate, i.e. It enters the loop if
> condition is true, process the actions inside the loop and exits, even if
> condition is still true...
>
> I have run out of ideas.. well, i am new at antlr and may be missing an
> important point somewhere.
>
> Can someone please counsel?
>
> Thank you for your help.
>
> Kevina
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080603/b7f3127d/attachment-0001.html 

From antlr at jazillian.com  Tue Jun  3 08:25:08 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Tue, 03 Jun 2008 11:25:08 -0400
Subject: [antlr-interest] new article on ANTLR
In-Reply-To: <A3D174C1-3E64-4DFC-B98F-4CB719534B90@cs.usfca.edu>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>	<002601c8c4e1$7285dbc0$c404a8c0@marion>	<484441EE.2030308@hoovers.com>	<e794390806021321y76d30099id40133f5250c0a9e@mail.gmail.com>	<4424BD46-BE7C-4655-9327-0F5578D39A6B@cs.usfca.edu>	<484473D2.5050500@hoovers.com>
	<A3D174C1-3E64-4DFC-B98F-4CB719534B90@cs.usfca.edu>
Message-ID: <48456254.4030101@jazillian.com>

Terence Parr wrote:

>>> Hi Charlie, can you identify where I need to improve?  I'm in middle 
>>> of next book.

Terence,
Can you give us any more info on this new book?
Andy

From rdclark at gmail.com  Tue Jun  3 09:15:14 2008
From: rdclark at gmail.com (Richard Clark)
Date: Tue, 3 Jun 2008 09:15:14 -0700
Subject: [antlr-interest] (Slightly OT) Of interest to Interpreter writers
Message-ID: <d3992d900806030915l23052b01mc8c6ee0eb69ca088@mail.gmail.com>

It's a little off-topic re: ANTLR, but of interest to compiler and
interpreter developers. Here's an interesting post on how the WebKit
team just sped up their Javascript interpreter by 60%:

http://webkit.org/blog/189/announcing-squirrelfish/

...Richard

From iank at bearcave.com  Tue Jun  3 09:28:25 2008
From: iank at bearcave.com (Ian Kaplan)
Date: Tue, 3 Jun 2008 09:28:25 -0700
Subject: [antlr-interest] (Slightly OT) Of interest to Interpreter
	writers
In-Reply-To: <d3992d900806030915l23052b01mc8c6ee0eb69ca088@mail.gmail.com>
References: <d3992d900806030915l23052b01mc8c6ee0eb69ca088@mail.gmail.com>
Message-ID: <7f8924df0806030928x32d3f9e4v1384e385800d5d64@mail.gmail.com>

  Thanks for posting the interesting link, Richard.  Squirrelfish looks
interesting.  It sounds like they may be doing good things with their
interpreter.

  This said....

  Reading the posting on the blog, the authors basically say: we used to use
a recursive tree walker that interpreted the syntax tree for JavaScript.  In
our new Way Cool and Innovative JavaScript processor we compile the
JavaScript into byte code.  This amazing innovation produces much faster
JavaScript execution.  It avoid unnecessary function called (yes, you can do
it all in a switch statement contained within a byte code fetch loop).

  I'm sorry, but none of this should have been a surprise.  Perhaps some of
those "stacks of terrible books" mentioned in the article were books on
compiler and interpreter design.

  Perhaps I'm being unfair since I am not familiar with the execution
constraints for JavaScript.  But generating simple, unoptimized, byte code
should not be much slower than generating the syntax tree and, as the
authors not, produce faster execution.

  Ian
  www.bearcave.com

On Tue, Jun 3, 2008 at 9:15 AM, Richard Clark <rdclark at gmail.com> wrote:

> It's a little off-topic re: ANTLR, but of interest to compiler and
> interpreter developers. Here's an interesting post on how the WebKit
> team just sped up their Javascript interpreter by 60%:
>
> http://webkit.org/blog/189/announcing-squirrelfish/
>
> ...Richard
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080603/1556176b/attachment.html 

From antlr at jazillian.com  Tue Jun  3 10:06:09 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Tue, 03 Jun 2008 13:06:09 -0400
Subject: [antlr-interest] (Slightly OT) Of interest to
	Interpreter	writers
In-Reply-To: <7f8924df0806030928x32d3f9e4v1384e385800d5d64@mail.gmail.com>
References: <d3992d900806030915l23052b01mc8c6ee0eb69ca088@mail.gmail.com>
	<7f8924df0806030928x32d3f9e4v1384e385800d5d64@mail.gmail.com>
Message-ID: <48457A01.6050704@jazillian.com>

Ian Kaplan wrote:

>   Perhaps I'm being unfair since I am not familiar with the execution 
> constraints for JavaScript.  But generating simple, unoptimized, byte 
> code should not be much slower than generating the syntax tree and, as 
> the authors not, produce faster execution.

I think you're being perfectly fair. Though the article says
"SquirrelFish owes a lot of its design to some of the latest 
research in the field of efficient virtual machines", they really do seem
to have just figured out that compiled bytecode runs faster than interpreted
source code. Maybe it's the "lazy" runtime compilation that they feel is
leading edge, as that's only been mainstream for a decade or so.

It looks like very nice work, it's just that I don't think it's as new
an innovative as it sounds. I guess nothing is.

From parrt at cs.usfca.edu  Tue Jun  3 11:38:34 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 3 Jun 2008 11:38:34 -0700
Subject: [antlr-interest] Concept for new book [WAS: Re: new article on
	ANTLR]
In-Reply-To: <48456254.4030101@jazillian.com>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>	<002601c8c4e1$7285dbc0$c404a8c0@marion>	<484441EE.2030308@hoovers.com>	<e794390806021321y76d30099id40133f5250c0a9e@mail.gmail.com>	<4424BD46-BE7C-4655-9327-0F5578D39A6B@cs.usfca.edu>	<484473D2.5050500@hoovers.com>
	<A3D174C1-3E64-4DFC-B98F-4CB719534B90@cs.usfca.edu>
	<48456254.4030101@jazillian.com>
Message-ID: <D3AFA612-0E8C-4613-8B7B-4C203E7BD788@cs.usfca.edu>

Hi Andy,

Sure. The book is rapidly evolving as I write material. I also decided  
not to write a textbook after this book, which means I can put some of  
that material into this one. That said, the publisher has asked me to  
do a short 250 page book; shorter than the current book.

It's focus will be on language implementation problem solving. I am  
trying to identify a language application taxonomy as well as most  
common language implementation patterns.

I'm going to show how to build interpreters, translators, generators,  
and so on. Almost like a cookbook but it is more of a problem solving  
book rather than trying to replace existing interpreters, for example.  
it will talk about how things work.

I'm currently writing a really interesting section, in my view, on how  
to precisely establish boundaries between implementation patterns and  
the words compiler and interpreter. :) This will allow me to make a  
precise taxonomy and list of their implementation patterns. For  
example, many programmers cannot answer the question "Is Java compiled  
or interpreted?" with any sort of precision (it's both of course, but  
when does everything happen?)

I will have an extensive section on symbol tables; what they are, why  
we need them, and how to implement them. Also, how to use them during  
semantic analysis.

Presumably, another book to follow that would have more advanced  
patterns.

Ter
On Jun 3, 2008, at 8:25 AM, Andy Tripp wrote:

> Terence Parr wrote:
>
>>>> Hi Charlie, can you identify where I need to improve?  I'm in  
>>>> middle of next book.
>
> Terence,
> Can you give us any more info on this new book?
> Andy


From csanders at hoovers.com  Tue Jun  3 12:19:30 2008
From: csanders at hoovers.com (csanders)
Date: Tue, 03 Jun 2008 14:19:30 -0500
Subject: [antlr-interest] Concept for new book [WAS: Re: new article on
 ANTLR]
In-Reply-To: <D3AFA612-0E8C-4613-8B7B-4C203E7BD788@cs.usfca.edu>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>	<002601c8c4e1$7285dbc0$c404a8c0@marion>	<484441EE.2030308@hoovers.com>	<e794390806021321y76d30099id40133f5250c0a9e@mail.gmail.com>	<4424BD46-BE7C-4655-9327-0F5578D39A6B@cs.usfca.edu>	<484473D2.5050500@hoovers.com>	<A3D174C1-3E64-4DFC-B98F-4CB719534B90@cs.usfca.edu>	<48456254.4030101@jazillian.com>
	<D3AFA612-0E8C-4613-8B7B-4C203E7BD788@cs.usfca.edu>
Message-ID: <48459942.5030704@hoovers.com>

Looking forward to it!  Is this book also going to be in in the 
pragmatic programmer series ?

Terence Parr wrote:
> Hi Andy,
>
> Sure. The book is rapidly evolving as I write material. I also decided 
> not to write a textbook after this book, which means I can put some of 
> that material into this one. That said, the publisher has asked me to 
> do a short 250 page book; shorter than the current book.
>
> It's focus will be on language implementation problem solving. I am 
> trying to identify a language application taxonomy as well as most 
> common language implementation patterns.
>
> I'm going to show how to build interpreters, translators, generators, 
> and so on. Almost like a cookbook but it is more of a problem solving 
> book rather than trying to replace existing interpreters, for example. 
> it will talk about how things work.
>
> I'm currently writing a really interesting section, in my view, on how 
> to precisely establish boundaries between implementation patterns and 
> the words compiler and interpreter. :) This will allow me to make a 
> precise taxonomy and list of their implementation patterns. For 
> example, many programmers cannot answer the question "Is Java compiled 
> or interpreted?" with any sort of precision (it's both of course, but 
> when does everything happen?)
>
> I will have an extensive section on symbol tables; what they are, why 
> we need them, and how to implement them. Also, how to use them during 
> semantic analysis.
>
> Presumably, another book to follow that would have more advanced 
> patterns.
>
> Ter
> On Jun 3, 2008, at 8:25 AM, Andy Tripp wrote:
>
>> Terence Parr wrote:
>>
>>>>> Hi Charlie, can you identify where I need to improve?  I'm in 
>>>>> middle of next book.
>>
>> Terence,
>> Can you give us any more info on this new book?
>> Andy
>


From parrt at cs.usfca.edu  Tue Jun  3 12:27:41 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 3 Jun 2008 12:27:41 -0700
Subject: [antlr-interest] Concept for new book [WAS: Re: new article on
	ANTLR]
In-Reply-To: <48459942.5030704@hoovers.com>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>	<002601c8c4e1$7285dbc0$c404a8c0@marion>	<484441EE.2030308@hoovers.com>	<e794390806021321y76d30099id40133f5250c0a9e@mail.gmail.com>	<4424BD46-BE7C-4655-9327-0F5578D39A6B@cs.usfca.edu>	<484473D2.5050500@hoovers.com>	<A3D174C1-3E64-4DFC-B98F-4CB719534B90@cs.usfca.edu>	<48456254.4030101@jazillian.com>
	<D3AFA612-0E8C-4613-8B7B-4C203E7BD788@cs.usfca.edu>
	<48459942.5030704@hoovers.com>
Message-ID: <1BDD7C4C-1067-4F5D-B807-C27D8B896051@cs.usfca.edu>


On Jun 3, 2008, at 12:19 PM, csanders wrote:

> Looking forward to it!  Is this book also going to be in in the  
> pragmatic programmer series ?

Yep :)

Ter


From parrt at cs.usfca.edu  Tue Jun  3 12:32:18 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 3 Jun 2008 12:32:18 -0700
Subject: [antlr-interest] Talk in Aachen Germany
Message-ID: <C8571DA5-FD89-4D57-857B-A9176B0489D6@cs.usfca.edu>

Hi.  I will be speaking at RWTH soon if you would like to make it to  
this public lecture:

Time:	Friday, 16 June 2008, 13:30
Place:	Seminar area of the computing and communication of center,
office building Seffenter way 23

Terence

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Parr-Kolloq-Ank?ndigung.pdf
Type: application/pdf
Size: 23925 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080603/6d1e41bb/attachment-0001.pdf 
-------------- next part --------------


From antlr at mirality.co.nz  Tue Jun  3 13:34:31 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 04 Jun 2008 08:34:31 +1200
Subject: [antlr-interest] antlr 3.1b1 problems with
 DebugEventSocketProxy?
In-Reply-To: <A7746824D386F947BBC285F6EC4716B0021311D117@vmtbosmail01.VM
	TBOSTON.VAULTUS.COM>
References: <A7746824D386F947BBC285F6EC4716B0021311D081@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
	<49AF2BE2-A5FE-4971-968C-50C497C421B8@cs.usfca.edu>
	<A7746824D386F947BBC285F6EC4716B0021311D0F4@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
	<f2ee05bf-7201-4cdc-b904-05e76655b8a6@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
	<A7746824D386F947BBC285F6EC4716B0021311D117@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
Message-ID: <20080603203439.733D811ED15@www.antlr.org>

At 09:40 3/06/2008, Doucette, Charles wrote:
 >Does the Antlr generator produce a debug parser by default?
 >I've only been using the default options.

No, it doesn't.  Generating a debug parser requires passing the 
-debug command line option.  (ANTLRworks will do this 
automatically when you use the Debug options in the menu, but 
otherwise will only do that if you explicitly ask for a debug 
build.)

So either you're passing in that parameter somewhere or you're 
using older-compiled code.  Because it's definitely heading down 
the debug-mode path in that stack trace.  Maybe there's something 
stray in your CLASSPATH?


From parrt at cs.usfca.edu  Tue Jun  3 14:16:22 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 3 Jun 2008 14:16:22 -0700
Subject: [antlr-interest] Talk in Aachen Germany
In-Reply-To: <C8571DA5-FD89-4D57-857B-A9176B0489D6@cs.usfca.edu>
References: <C8571DA5-FD89-4D57-857B-A9176B0489D6@cs.usfca.edu>
Message-ID: <8BC13557-B3BB-4186-8A8D-8E1F587D6C7A@cs.usfca.edu>

The German translator on the web apparently got it wrong. it's on  
Monday the 16th not Friday. :)
Ter
On Jun 3, 2008, at 12:32 PM, Terence Parr wrote:

> Hi.  I will be speaking at RWTH soon if you would like to make it to  
> this public lecture:
>
> Time:	Friday, 16 June 2008, 13:30
> Place:	Seminar area of the computing and communication of center,
> office building Seffenter way 23
>
> Terence
>
> <Parr-Kolloq-Ank?ndigung.pdf>


From nelson.ana at gmail.com  Tue Jun  3 16:26:20 2008
From: nelson.ana at gmail.com (Ana Nelson)
Date: Wed, 4 Jun 2008 00:26:20 +0100
Subject: [antlr-interest] grammar to latex
In-Reply-To: <a7d6d2740806010329w2404a173kaabbf85b939f1aa3@mail.gmail.com>
References: <48412784.70906@web.de>
	<a7d6d2740805310557n298cb964ta788986d59366bbd@mail.gmail.com>
	<a7d6d2740805311413s68c97cddsd729278d952296ed@mail.gmail.com>
	<4841D15A.4060405@web.de>
	<a7d6d2740806010329w2404a173kaabbf85b939f1aa3@mail.gmail.com>
Message-ID: <a7d6d2740806031626x41bd7c76q454ab5958b813482@mail.gmail.com>

Okay, for anyone who is interested in colour and/or font syntax highlighting
of ANTLR grammars, say if you happen to be writing a book featuring loads of
ANTLR code snippets or something, examples are here (in no particular
order):

(temporary URLs)
http://dev.agent.ie/antlr-python-example.pdf
http://dev.agent.ie/antlr-java-example.pdf
http://dev.agent.ie/antlr-ruby-example.pdf

Adding new target languages takes about 30 seconds. Pygments is just
brilliant. :-)

The grammar's not quite finished yet, and I probably won't get back to it
for a week or two, but it's close enough to get the idea.

I did a quick hack just now to see if I could get typewriter, roman and sans
serif fonts in latex, and it worked. :-) (That's why those PDFs have
horrible unaligned code.) So, Felix, I think this might work for you.

If anyone needs this urgently feel free to contact me off-list, otherwise
I'll post here when the code is suitable for human consumption.

-Ana



2008/6/1 Ana Nelson <nelson.ana at gmail.com>:

> Hi, Felix,
>
> Don't worry, this wasn't your fault. :-) These things are just addictive.
> And, when I read your email I wasn't sure if this was exactly what were
> looking for so I just did this out of curiosity.
>
> If you want syntax highlighting using fonts rather than colours, this
> should be possible to implement in Pygments but it's not supported at the
> moment, just bold/italic etc. are. I think it'd just be a case of writing a
> custom latex formatter which emitted e.g. \textrm rather than \colorbox.
>
> It would probably be useful to have this option for people needing to
> publish in black and white. I might take a quick look, but I don't know if
> I'll have time to do this myself.
>
> Anyway, if you think you want to use this you might try installing
> Pygments, preferably the development version, and see how you get on with
> it.
>
> You could alternatively search for a syntax highlighter with font support
> already (I don't know if there is one or not) and write a grammar for that.
> Or, if you are just looking for very basic decorations, maybe an existing
> grammar would be close enough. (I used to use highlight
> http://www.andre-simon.de/ and it worked fine, but I never tried modifying
> a grammar.)
>
> -Ana
>
>
> 2008/5/31 Felix Dorner <felix_do at web.de>:
>
>> Hei Ana,
>>
>> gee, I hope I didn't keep you from socializing this weekend... The example
>> looks cool. I don' t know pygments, what I really would like is not syntax
>> coloring, but fontification, such that terminals (Strings in ' ' would get
>> typewriter font, braces and other ebnf specials roman, and all other stuff
>> (rules and subrules) italic. Would this be easy too?
>>
>> Felix
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080604/5b23edef/attachment.html 

From rdclark at gmail.com  Tue Jun  3 16:57:07 2008
From: rdclark at gmail.com (Richard Clark)
Date: Tue, 3 Jun 2008 16:57:07 -0700
Subject: [antlr-interest] new article on ANTLR
In-Reply-To: <484441EE.2030308@hoovers.com>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>
	<002601c8c4e1$7285dbc0$c404a8c0@marion> <484441EE.2030308@hoovers.com>
Message-ID: <d3992d900806031657p4a39df40x2c50edd1a234d53@mail.gmail.com>

Hi Charlie,

How would you suggest organizing the Wiki to make it more usable?

...Richard (who has provided several pieces to the wiki and a
suggested top-level organization)

From kevina.choolhun at gmail.com  Wed Jun  4 00:01:08 2008
From: kevina.choolhun at gmail.com (Kevina Choolhun)
Date: Wed, 4 Jun 2008 11:01:08 +0400
Subject: [antlr-interest] Trying to implement a while loop using
	embedded actions in ANTLR
In-Reply-To: <2373b1b90806030311l32e7d0cfh18b6bf2352c04bf3@mail.gmail.com>
References: <2373b1b90806030238h4c99927bs824e18bb5931c809@mail.gmail.com>
	<b9a39b060806030258l2a94c2e8p921c7c6218191bd5@mail.gmail.com>
	<2373b1b90806030311l32e7d0cfh18b6bf2352c04bf3@mail.gmail.com>
Message-ID: <2373b1b90806040001x3f18376eja75ba895791b3e9e@mail.gmail.com>

Thanks Adam ;)

I tried that just in case it could work.. I did not expect it to compile but
it did...

I hope to find a solution soon and should i be able to crack it up.. i will
post it here...

But any help is still welcomed. :)

Kevina


On Tue, Jun 3, 2008 at 1:58 PM, Adam Connelly <
adam.rpconnelly at googlemail.com> wrote:

> Not 100% on this, but it looks like you have a typo.
>
> 'while' c1 = cond
>             {$c1.value == true}?=>
>             {while !($c1.value==true)
>             {
>
>             evaluate=true;}
>                 stat+
>              }
>              'endwhile'
>
> Should be
>
> 'while' c1 = cond
>             {$c1.value == true}?=>
>             {while !($c1.value==true)
>             {
>
>             evaluate=true;}
>              }
>              stat+
>              'endwhile'
>
> Looks like the stat+ is inside the action.  I think I know what you're
> trying to say, but I doubt it will work like that.  I'm actually surprised
> it compiles, but then I'm not an ANTLR expert.  Sorry I can't think of a
> solution at the moment.
>
> Adam
>
> 2008/6/3 Kevina Choolhun <kevina.choolhun at gmail.com>:
>
>
>>
>> Hello everybody,
>>
>> I am new at antlr and have been trying my hand at embedding actions to try
>> make a while_loop work...
>>
>> Here is part of my code.
>>
>> whileStatement
>> @init{ evaluate = false;}
>> @after{evaluate=true;}
>>
>> :
>>         'while' c1 = cond
>>             {$c1.value == true}?=>
>>             {while !($c1.value==true)
>>             {
>>
>>             evaluate=true;}
>>                 stat+
>>              }
>>              'endwhile'
>>
>>
>>  It works fine apart from the
>> ("major") fact that it does not iterate, i.e. It enters the loop if
>> condition is true, process the actions inside the loop and exits, even if
>> condition is still true...
>>
>> I have run out of ideas.. well, i am new at antlr and may be missing an
>> important point somewhere.
>>
>> Can someone please counsel?
>>
>> Thank you for your help.
>>
>> Kevina
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080604/0c1fd2f3/attachment.html 

From JALuber at gmx.de  Wed Jun  4 03:46:56 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 04 Jun 2008 12:46:56 +0200
Subject: [antlr-interest] grammar to latex
In-Reply-To: <a7d6d2740806031626x41bd7c76q454ab5958b813482@mail.gmail.com>
References: <48412784.70906@web.de>
	<a7d6d2740805310557n298cb964ta788986d59366bbd@mail.gmail.com>
	<a7d6d2740805311413s68c97cddsd729278d952296ed@mail.gmail.com>
	<4841D15A.4060405@web.de>
	<a7d6d2740806010329w2404a173kaabbf85b939f1aa3@mail.gmail.com>
	<a7d6d2740806031626x41bd7c76q454ab5958b813482@mail.gmail.com>
Message-ID: <20080604104656.94570@gmx.net>

> Okay, for anyone who is interested in colour and/or font syntax
> highlighting
> of ANTLR grammars, say if you happen to be writing a book featuring loads
> of
> ANTLR code snippets or something, examples are here (in no particular
> order):
> 
> (temporary URLs)
> http://dev.agent.ie/antlr-python-example.pdf
> http://dev.agent.ie/antlr-java-example.pdf
> http://dev.agent.ie/antlr-ruby-example.pdf
> 
> Adding new target languages takes about 30 seconds. Pygments is just
> brilliant. :-)
> 
> The grammar's not quite finished yet, and I probably won't get back to it
> for a week or two, but it's close enough to get the idea.
> 
> I did a quick hack just now to see if I could get typewriter, roman and
> sans
> serif fonts in latex, and it worked. :-) (That's why those PDFs have
> horrible unaligned code.) So, Felix, I think this might work for you.
> 
> If anyone needs this urgently feel free to contact me off-list, otherwise
> I'll post here when the code is suitable for human consumption.
> 
> -Ana

Looking through the files I noticed two problems, all in the Java example. The first is that the labels a1 and a2 aren't formatted correctly. The numbers are red-boxed. Also I haven't figured quite out what the red boxes should show actually. The second problem is that overly long lines don't receive automatic linebreaks. So some text is practically invisible. Can that be helped?

Johannes
> 
> 
> 
> 2008/6/1 Ana Nelson <nelson.ana at gmail.com>:
> 
> > Hi, Felix,
> >
> > Don't worry, this wasn't your fault. :-) These things are just
> addictive.
> > And, when I read your email I wasn't sure if this was exactly what were
> > looking for so I just did this out of curiosity.
> >
> > If you want syntax highlighting using fonts rather than colours, this
> > should be possible to implement in Pygments but it's not supported at
> the
> > moment, just bold/italic etc. are. I think it'd just be a case of
> writing a
> > custom latex formatter which emitted e.g. \textrm rather than \colorbox.
> >
> > It would probably be useful to have this option for people needing to
> > publish in black and white. I might take a quick look, but I don't know
> if
> > I'll have time to do this myself.
> >
> > Anyway, if you think you want to use this you might try installing
> > Pygments, preferably the development version, and see how you get on
> with
> > it.
> >
> > You could alternatively search for a syntax highlighter with font
> support
> > already (I don't know if there is one or not) and write a grammar for
> that.
> > Or, if you are just looking for very basic decorations, maybe an
> existing
> > grammar would be close enough. (I used to use highlight
> > http://www.andre-simon.de/ and it worked fine, but I never tried
> modifying
> > a grammar.)
> >
> > -Ana
> >
> >
> > 2008/5/31 Felix Dorner <felix_do at web.de>:
> >
> >> Hei Ana,
> >>
> >> gee, I hope I didn't keep you from socializing this weekend... The
> example
> >> looks cool. I don' t know pygments, what I really would like is not
> syntax
> >> coloring, but fontification, such that terminals (Strings in ' ' would
> get
> >> typewriter font, braces and other ebnf specials roman, and all other
> stuff
> >> (rules and subrules) italic. Would this be easy too?
> >>
> >> Felix
> >>
> >
> >

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

From felix_do at web.de  Wed Jun  4 05:58:38 2008
From: felix_do at web.de (Felix Dorner)
Date: Wed, 04 Jun 2008 14:58:38 +0200
Subject: [antlr-interest] testing subrules and noviable alt upon eof
Message-ID: <4846917E.4090906@web.de>

Hi,

I am aware of gunit, but since it doesnt support custom AST nodes, I 
won't use it.

My toplevel rule is:

body : statement* EOF

When I try to test subrules (expressions, see below) against input 
snippets, in all cases I get NoViableAlts when the EOF token is 
encountered. For most inputs all input is consumed before the Exception 
(e.g. "3+4" "call()" "variable"), and for all cases that end with 
".anIdentifier" it doesnt even consume this part. Now I dont know if 
this is unavoidable, or if something is wrong with my grammar. The 
problem occurs in the "selectorSequence" rule:

expression   
    : setModifierExpr
    ;

setModifierExpr 
    : conditionalExpression (setModifier^ conditionalExpression)*;

conditionalExpression
    : condAndExpr (OR^ condAndExpr)*;
   
condAndExpr
    : relationalExpression (AND^ relationalExpression)*;

relationalExpression
    : additiveExpression (relationalOp^ additiveExpression)*;

additiveExpression
    : multExpr ((PLUS|MINUS)^ multExpr)*;

multExpr
    : prefixExpression ((MULT|DIV)^ prefixExpression)*;   

prefixExpression
    : prefixOp prefixExpression -> ^(PRE prefixOp prefixExpression)
    | '(' qualifiedName ')' selectorExpression -> ^(CAST qualifiedName 
selectorExpression)
    | selectorExpression
    ;
   

selectorExpression
    : (primaryExpression -> primaryExpression)
      (selectorSequence -> ^(DOT primaryExpression selectorSequence))?
    ;


selectorSequence
    : ('.' ID -> ID) (selectorSequence -> ^(DOT ID selectorSequence))?
    | ('.' ID arguments -> ^(CALL ID arguments))
      (selectorSequence -> ^(DOT ^(CALL ID arguments) selectorSequence))?
    ;

arguments
    : '('expressionList? ')'  -> ^(ARGS expressionList?);

primaryExpression

    : (ID -> ID) (arguments -> ^(CALL ID arguments))? 

From nelson.ana at gmail.com  Wed Jun  4 07:20:53 2008
From: nelson.ana at gmail.com (Ana Nelson)
Date: Wed, 4 Jun 2008 15:20:53 +0100
Subject: [antlr-interest] grammar to latex
In-Reply-To: <20080604104656.94570@gmx.net>
References: <48412784.70906@web.de>
	<a7d6d2740805310557n298cb964ta788986d59366bbd@mail.gmail.com>
	<a7d6d2740805311413s68c97cddsd729278d952296ed@mail.gmail.com>
	<4841D15A.4060405@web.de>
	<a7d6d2740806010329w2404a173kaabbf85b939f1aa3@mail.gmail.com>
	<a7d6d2740806031626x41bd7c76q454ab5958b813482@mail.gmail.com>
	<20080604104656.94570@gmx.net>
Message-ID: <a7d6d2740806040720m48347cbavbb5254ccf9f6ec8b@mail.gmail.com>

The red boxes are where the grammar detects an error in syntax. (As I said,
the grammar isn't quite finished yet, so those should go away, at least for
valid ANTLR files.)

Regarding automatic linebreaks, I don't think it's currently supported in
pygments, but it should be possible to implement. I know for java code it's
almost a necessity, I've done it by hand before and it's no fun.



2008/6/4 Johannes Luber <JALuber at gmx.de>:

> > Okay, for anyone who is interested in colour and/or font syntax
> > highlighting
> > of ANTLR grammars, say if you happen to be writing a book featuring loads
> > of
> > ANTLR code snippets or something, examples are here (in no particular
> > order):
> >
> > (temporary URLs)
> > http://dev.agent.ie/antlr-python-example.pdf
> > http://dev.agent.ie/antlr-java-example.pdf
> > http://dev.agent.ie/antlr-ruby-example.pdf
> >
> > Adding new target languages takes about 30 seconds. Pygments is just
> > brilliant. :-)
> >
> > The grammar's not quite finished yet, and I probably won't get back to it
> > for a week or two, but it's close enough to get the idea.
> >
> > I did a quick hack just now to see if I could get typewriter, roman and
> > sans
> > serif fonts in latex, and it worked. :-) (That's why those PDFs have
> > horrible unaligned code.) So, Felix, I think this might work for you.
> >
> > If anyone needs this urgently feel free to contact me off-list, otherwise
> > I'll post here when the code is suitable for human consumption.
> >
> > -Ana
>
> Looking through the files I noticed two problems, all in the Java example.
> The first is that the labels a1 and a2 aren't formatted correctly. The
> numbers are red-boxed. Also I haven't figured quite out what the red boxes
> should show actually. The second problem is that overly long lines don't
> receive automatic linebreaks. So some text is practically invisible. Can
> that be helped?
>
> Johannes
> >
> >
> >
> > 2008/6/1 Ana Nelson <nelson.ana at gmail.com>:
> >
> > > Hi, Felix,
> > >
> > > Don't worry, this wasn't your fault. :-) These things are just
> > addictive.
> > > And, when I read your email I wasn't sure if this was exactly what were
> > > looking for so I just did this out of curiosity.
> > >
> > > If you want syntax highlighting using fonts rather than colours, this
> > > should be possible to implement in Pygments but it's not supported at
> > the
> > > moment, just bold/italic etc. are. I think it'd just be a case of
> > writing a
> > > custom latex formatter which emitted e.g. \textrm rather than
> \colorbox.
> > >
> > > It would probably be useful to have this option for people needing to
> > > publish in black and white. I might take a quick look, but I don't know
> > if
> > > I'll have time to do this myself.
> > >
> > > Anyway, if you think you want to use this you might try installing
> > > Pygments, preferably the development version, and see how you get on
> > with
> > > it.
> > >
> > > You could alternatively search for a syntax highlighter with font
> > support
> > > already (I don't know if there is one or not) and write a grammar for
> > that.
> > > Or, if you are just looking for very basic decorations, maybe an
> > existing
> > > grammar would be close enough. (I used to use highlight
> > > http://www.andre-simon.de/ and it worked fine, but I never tried
> > modifying
> > > a grammar.)
> > >
> > > -Ana
> > >
> > >
> > > 2008/5/31 Felix Dorner <felix_do at web.de>:
> > >
> > >> Hei Ana,
> > >>
> > >> gee, I hope I didn't keep you from socializing this weekend... The
> > example
> > >> looks cool. I don' t know pygments, what I really would like is not
> > syntax
> > >> coloring, but fontification, such that terminals (Strings in ' ' would
> > get
> > >> typewriter font, braces and other ebnf specials roman, and all other
> > stuff
> > >> (rules and subrules) italic. Would this be easy too?
> > >>
> > >> Felix
> > >>
> > >
> > >
>
> --
> Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
> Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080604/4af0d13f/attachment.html 

From nelson.ana at gmail.com  Wed Jun  4 07:55:07 2008
From: nelson.ana at gmail.com (Ana Nelson)
Date: Wed, 4 Jun 2008 15:55:07 +0100
Subject: [antlr-interest] testing subrules and noviable alt upon eof
In-Reply-To: <4846917E.4090906@web.de>
References: <4846917E.4090906@web.de>
Message-ID: <a7d6d2740806040755w68945ec2ga62b4760530335ec@mail.gmail.com>

I use Ruby's Test::Unit via JRuby so I can do unit tests against actual
compiled grammars. I personally find it almost impossible to write grammars
without tests, and while I have nothing against gUnit I do like that I am
able to test against the "real thing". Also, all features of ANTLR are
automatically supported.

http://dev.agent.ie/svn/antlr/jruby-examples/

Maybe it's possible to write some java wrapping and use a generic java unit
testing framework? Or you could give jruby a whirl. :-)

If you want, if you can send me your complete grammar and some examples,
I'll run it through for you. It won't take long.



2008/6/4 Felix Dorner <felix_do at web.de>:

> Hi,
>
> I am aware of gunit, but since it doesnt support custom AST nodes, I won't
> use it.
>
> My toplevel rule is:
>
> body : statement* EOF
>
> When I try to test subrules (expressions, see below) against input
> snippets, in all cases I get NoViableAlts when the EOF token is encountered.
> For most inputs all input is consumed before the Exception (e.g. "3+4"
> "call()" "variable"), and for all cases that end with ".anIdentifier" it
> doesnt even consume this part. Now I dont know if this is unavoidable, or if
> something is wrong with my grammar. The problem occurs in the
> "selectorSequence" rule:
>
> expression     : setModifierExpr
>   ;
>
> setModifierExpr   : conditionalExpression (setModifier^
> conditionalExpression)*;
>
> conditionalExpression
>   : condAndExpr (OR^ condAndExpr)*;
>  condAndExpr
>   : relationalExpression (AND^ relationalExpression)*;
>
> relationalExpression
>   : additiveExpression (relationalOp^ additiveExpression)*;
>
> additiveExpression
>   : multExpr ((PLUS|MINUS)^ multExpr)*;
>
> multExpr
>   : prefixExpression ((MULT|DIV)^ prefixExpression)*;
> prefixExpression
>   : prefixOp prefixExpression -> ^(PRE prefixOp prefixExpression)
>   | '(' qualifiedName ')' selectorExpression -> ^(CAST qualifiedName
> selectorExpression)
>   | selectorExpression
>   ;
>
> selectorExpression
>   : (primaryExpression -> primaryExpression)
>     (selectorSequence -> ^(DOT primaryExpression selectorSequence))?
>   ;
>
>
> selectorSequence
>   : ('.' ID -> ID) (selectorSequence -> ^(DOT ID selectorSequence))?
>   | ('.' ID arguments -> ^(CALL ID arguments))
>     (selectorSequence -> ^(DOT ^(CALL ID arguments) selectorSequence))?
>   ;
>
> arguments
>   : '('expressionList? ')'  -> ^(ARGS expressionList?);
>
> primaryExpression
>
>   : (ID -> ID) (arguments -> ^(CALL ID arguments))?
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080604/86f6567c/attachment.html 

From brent.yates at gmail.com  Wed Jun  4 08:40:10 2008
From: brent.yates at gmail.com (Brent Yates)
Date: Wed, 4 Jun 2008 11:40:10 -0400
Subject: [antlr-interest] testing subrules and noviable alt upon eof
In-Reply-To: <4846917E.4090906@web.de>
References: <4846917E.4090906@web.de>
Message-ID: <6edc6c380806040840l6255df6ev359dd674e1f02538@mail.gmail.com>

Felix,

I believe that this is a problem with the DFA's produced for rules which end
in conditional alternates.  The DFA's fire the exception if a token is seen
that is not in the expected set for the grammar as a whole.  This makes
calling the rules in isolation a problem.  Dr. Parr is aware of the issue.
The only work around I know of right now is to add "Test" rules for the
problem cases which end in EOF.

Brent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080604/e604ab88/attachment.html 

From csanders at hoovers.com  Wed Jun  4 08:52:28 2008
From: csanders at hoovers.com (csanders)
Date: Wed, 04 Jun 2008 10:52:28 -0500
Subject: [antlr-interest] new article on ANTLR
In-Reply-To: <d3992d900806031657p4a39df40x2c50edd1a234d53@mail.gmail.com>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>	
	<002601c8c4e1$7285dbc0$c404a8c0@marion>
	<484441EE.2030308@hoovers.com>
	<d3992d900806031657p4a39df40x2c50edd1a234d53@mail.gmail.com>
Message-ID: <4846BA3C.3060508@hoovers.com>

Richard Clark wrote:
> Hi Charlie,
>
> How would you suggest organizing the Wiki to make it more usable?
>
> ...Richard (who has provided several pieces to the wiki and a
> suggested top-level organization)
>   

As a new comer to ANTLR going through the wiki, I 'm able to find a lot 
of small specific articles for certain aspects of ANTLR ( which works 
well ) , but I was unable to find a solid 'Here is how you use ANTLR 
from the ground up' type of article for beginners.  The wiki might work 
well for experienced users who know what they are looking for, but for 
newcomers its overwhelming. 

I guess my main complaint is there is no order to the articles, it would 
be great to have a starting point, and a clear trail of articles to 
follow to learn ANTLR.

The book turns out to be exactly what I needed , but Im not suggesting 
putting that online.

ANTLR and parser generation is a complex topic and I'm sure there is no 
easy solution for organizing all the collective knowledge on it, and I 
certainly  appreciate all the work that you and others have put into it, 
so Thanks :).

Charlie

From rdclark at gmail.com  Wed Jun  4 09:05:26 2008
From: rdclark at gmail.com (Richard Clark)
Date: Wed, 4 Jun 2008 09:05:26 -0700
Subject: [antlr-interest] new article on ANTLR
In-Reply-To: <4846BA3C.3060508@hoovers.com>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>
	<002601c8c4e1$7285dbc0$c404a8c0@marion> <484441EE.2030308@hoovers.com>
	<d3992d900806031657p4a39df40x2c50edd1a234d53@mail.gmail.com>
	<4846BA3C.3060508@hoovers.com>
Message-ID: <d3992d900806040905w64f6e1e8k438326f21794e39c@mail.gmail.com>

On Wed, Jun 4, 2008 at 8:52 AM, csanders <csanders at hoovers.com> wrote:

> I guess my main complaint is there is no order to the articles, it would be
> great to have a starting point, and a clear trail of articles to follow to
> learn ANTLR.

I've thought about putting up a "New users README", because it can be
hard to know where to start. Would that help?

...Richard

From parrt at cs.usfca.edu  Wed Jun  4 09:06:58 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 4 Jun 2008 09:06:58 -0700
Subject: [antlr-interest] new article on ANTLR
In-Reply-To: <d3992d900806040905w64f6e1e8k438326f21794e39c@mail.gmail.com>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>
	<002601c8c4e1$7285dbc0$c404a8c0@marion>
	<484441EE.2030308@hoovers.com>
	<d3992d900806031657p4a39df40x2c50edd1a234d53@mail.gmail.com>
	<4846BA3C.3060508@hoovers.com>
	<d3992d900806040905w64f6e1e8k438326f21794e39c@mail.gmail.com>
Message-ID: <40208BFB-3D89-4693-9027-FD1E21D88F17@cs.usfca.edu>

Does:

http://www.antlr.org/wiki/display/ANTLR3/FAQ+-+Getting+Started

Help?  First link in doc section of antlr main page.  We can add to it.

Ter
On Jun 4, 2008, at 9:05 AM, Richard Clark wrote:

> On Wed, Jun 4, 2008 at 8:52 AM, csanders <csanders at hoovers.com> wrote:
>
>> I guess my main complaint is there is no order to the articles, it  
>> would be
>> great to have a starting point, and a clear trail of articles to  
>> follow to
>> learn ANTLR.
>
> I've thought about putting up a "New users README", because it can be
> hard to know where to start. Would that help?
>
> ...Richard


From csanders at hoovers.com  Wed Jun  4 09:32:44 2008
From: csanders at hoovers.com (csanders)
Date: Wed, 04 Jun 2008 11:32:44 -0500
Subject: [antlr-interest] new article on ANTLR
In-Reply-To: <d3992d900806040905w64f6e1e8k438326f21794e39c@mail.gmail.com>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>	
	<002601c8c4e1$7285dbc0$c404a8c0@marion>
	<484441EE.2030308@hoovers.com>	
	<d3992d900806031657p4a39df40x2c50edd1a234d53@mail.gmail.com>	
	<4846BA3C.3060508@hoovers.com>
	<d3992d900806040905w64f6e1e8k438326f21794e39c@mail.gmail.com>
Message-ID: <4846C3AC.3000205@hoovers.com>

If it had an easy to follow ordered collection of articles to read, yes.

Richard Clark wrote:
> On Wed, Jun 4, 2008 at 8:52 AM, csanders <csanders at hoovers.com> wrote:
>
>   
>> I guess my main complaint is there is no order to the articles, it would be
>> great to have a starting point, and a clear trail of articles to follow to
>> learn ANTLR.
>>     
>
> I've thought about putting up a "New users README", because it can be
> hard to know where to start. Would that help?
>
> ...Richard
>   


From dave at badgers-in-foil.co.uk  Wed Jun  4 09:46:13 2008
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Wed, 4 Jun 2008 17:46:13 +0100
Subject: [antlr-interest] testing subrules and noviable alt upon eof
In-Reply-To: <6edc6c380806040840l6255df6ev359dd674e1f02538@mail.gmail.com>
References: <4846917E.4090906@web.de>
	<6edc6c380806040840l6255df6ev359dd674e1f02538@mail.gmail.com>
Message-ID: <20080604164612.GA29020@badgers-in-foil.co.uk>

On Wed, Jun 04, 2008 at 11:40:10AM -0400, Brent Yates wrote:
> I believe that this is a problem with the DFA's produced for rules which end
> in conditional alternates.  The DFA's fire the exception if a token is seen
> that is not in the expected set for the grammar as a whole.  This makes
> calling the rules in isolation a problem.  Dr. Parr is aware of the issue.
> The only work around I know of right now is to add "Test" rules for the
> problem cases which end in EOF.

Another option I've used is to append to the test input a token which
appears in the follow set for the rule.  After invoking the rule in the
unit test, I assert that the next unconsumed token in the input is the
one which I appended.

e.g. something like,

  AS3Parser parser = createParserOn(expr + ")");
  parser.forIter();
  assertRemainingInputIs(parser.getTokenStream(), AS3Parser.RPAREN, expr);

with,

  private static void assertRemainingInputIs(TokenStream input,
                                             int expectedTokenType,
                                             String value)
  {
    assertEquals("Unexpected tokens in input: "+value,
                 expectedTokenType, input.LA(1));
  }

I prefer this, because while it's still a bit messy, it puts the
mess in the tests rather than in the grammar.


ta,
dave

-- 
http://david.holroyd.me.uk/

From csanders at hoovers.com  Wed Jun  4 09:48:30 2008
From: csanders at hoovers.com (csanders)
Date: Wed, 04 Jun 2008 11:48:30 -0500
Subject: [antlr-interest] new article on ANTLR
In-Reply-To: <40208BFB-3D89-4693-9027-FD1E21D88F17@cs.usfca.edu>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>
	<002601c8c4e1$7285dbc0$c404a8c0@marion>
	<484441EE.2030308@hoovers.com>
	<d3992d900806031657p4a39df40x2c50edd1a234d53@mail.gmail.com>
	<4846BA3C.3060508@hoovers.com>
	<d3992d900806040905w64f6e1e8k438326f21794e39c@mail.gmail.com>
	<40208BFB-3D89-4693-9027-FD1E21D88F17@cs.usfca.edu>
Message-ID: <4846C75E.5090901@hoovers.com>

Thats a good jumping off point for sure, but I think it still leaves 
users with a 'Where do I go from here?' feeling.

I think this page plus Richard's 'New users README' file would help 
quite a bit.

Thanks,
Charlie

Terence Parr wrote:
> Does:
>
> http://www.antlr.org/wiki/display/ANTLR3/FAQ+-+Getting+Started
>
> Help?  First link in doc section of antlr main page.  We can add to it.
>
> Ter
> On Jun 4, 2008, at 9:05 AM, Richard Clark wrote:
>
>> On Wed, Jun 4, 2008 at 8:52 AM, csanders <csanders at hoovers.com> wrote:
>>
>>> I guess my main complaint is there is no order to the articles, it 
>>> would be
>>> great to have a starting point, and a clear trail of articles to 
>>> follow to
>>> learn ANTLR.
>>
>> I've thought about putting up a "New users README", because it can be
>> hard to know where to start. Would that help?
>>
>> ...Richard
>


From helink at sandia.gov  Wed Jun  4 09:49:34 2008
From: helink at sandia.gov (Link, Hamilton)
Date: Wed, 4 Jun 2008 10:49:34 -0600
Subject: [antlr-interest] Fixed!  3.1b1 trouble with a CSharp2/AST example
Message-ID: <796FAD48C7891F43A943B67DF279C589277ACBB470@ES04SNLNT.srn.sandia.gov>

Rebuilding the runtime seems to have resolved the problem I was having (that is, with AST generation throwing an error on the polynomial example from the web site).  So, I can only guess that the .net runtime assemblies distributed with 3.1b1 were slightly stale.


To get Antlr 3.1b1 building under Visual Studio Pro 2008,

- you need to add UnwantedTokenException.cs and MissingTokenException.cs to

the "Antlr.Runtime" directory of the Antlr3.Runtime project (they are in

the associated directory)

- you need to add CommonErrorNode.cs to the "Antlr.Runtime.Tree" directory

in the same project.

It should then build fine with no further modifications. Building under VS

will produce .dll and .pdb files in

antlr-3.1b1\runtime\CSharp\Sources\Antlr3.Runtime\obj\Debug

and similar directories for the other libraries.  Using these instead of the 3.1b1-distributed assemblies fixed the errors I was getting.



thanks,

hamilton


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080604/3bd91a37/attachment.html 

From porcelli at uol.com.br  Wed Jun  4 10:25:54 2008
From: porcelli at uol.com.br (Alexandre Porcelli)
Date: Wed, 4 Jun 2008 14:25:54 -0300
Subject: [antlr-interest] Internal error on generating grammar with 3.1b
Message-ID: <ee873c070806041025occ1d55kb2b0acc5b2480b0d@mail.gmail.com>

Hi all,

  I'm trying to convert a valid 3.0.1 grammar to 3.1b... but I got the
following error message during regenerating:

error(10):  internal error:
/Documents/dev/drools/drools-compiler/src/main/resources/org/drools/lang/DRL.g
: java.lang.ClassCastException: org.antlr.analysis.Label
org.antlr.analysis.PredicateLabel.equals(PredicateLabel.java:64)
org.antlr.analysis.NFAToDFAConverter.convertToEOTAcceptState(NFAToDFAConverter.java:928)
org.antlr.analysis.NFAToDFAConverter.findNewDFAStatesAndAddDFATransitions(NFAToDFAConverter.java:240)
org.antlr.analysis.NFAToDFAConverter.convert(NFAToDFAConverter.java:111)
org.antlr.analysis.DFA.<init>(DFA.java:233)
org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1167)
org.antlr.tool.Grammar.createLookaheadDFAs(Grammar.java:931)
org.antlr.tool.Grammar.createLookaheadDFAs(Grammar.java:881)
org.antlr.codegen.Target.performGrammarAnalysis(Target.java:114)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:293)
org.antlr.Tool.generateRecognizer(Tool.java:419)
org.antlr.Tool.process(Tool.java:341)
org.antlr.Tool.main(Tool.java:71)

   I have no idea where is the problem.. 'cos the error message does
not give any hint about it...
   Is this an ANTLR bug? Or am I using an unsupported feature in ANTLRv3.1b?

Regards,
Alexandre Porcelli
-------------- next part --------------
A non-text attachment was scrubbed...
Name: DRL.g
Type: application/octet-stream
Size: 25399 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080604/85699d11/attachment-0001.obj 

From JALuber at gmx.de  Wed Jun  4 10:34:42 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 04 Jun 2008 19:34:42 +0200
Subject: [antlr-interest] Fixed! 3.1b1 trouble with a CSharp2/AST example
In-Reply-To: <796FAD48C7891F43A943B67DF279C589277ACBB470@ES04SNLNT.srn.sandia.gov>
References: <796FAD48C7891F43A943B67DF279C589277ACBB470@ES04SNLNT.srn.sandia.gov>
Message-ID: <20080604173442.97590@gmx.net>

> Rebuilding the runtime seems to have resolved the problem I was having
> (that is, with AST generation throwing an error on the polynomial example from
> the web site).  So, I can only guess that the .net runtime assemblies
> distributed with 3.1b1 were slightly stale.
> 
> 
> To get Antlr 3.1b1 building under Visual Studio Pro 2008,
> 
> - you need to add UnwantedTokenException.cs and MissingTokenException.cs
> to
> 
> the "Antlr.Runtime" directory of the Antlr3.Runtime project (they are in
> 
> the associated directory)
> 
> - you need to add CommonErrorNode.cs to the "Antlr.Runtime.Tree" directory
> 
> in the same project.
> 
> It should then build fine with no further modifications. Building under VS
> 
> will produce .dll and .pdb files in
> 
> antlr-3.1b1\runtime\CSharp\Sources\Antlr3.Runtime\obj\Debug
> 
> and similar directories for the other libraries.  Using these instead of
> the 3.1b1-distributed assemblies fixed the errors I was getting.
> 
> 
> 
> thanks,
> 
> hamilton

Which project file are you using? The VS 2005 should already include all required files, otherwise I have to update the file on the repo. The one for 2003 is outdated, but I don't have VS 2003 anymore so I'll have to use something like Prebuild later. That the newly generated files don't map to the included files has to reasons. The first is that Perforce requires a checkout before you can overwrite a file, even if you don't want to check in the files later. The second is that the runtime assemblies will be distributed in a separate file, so changing things is somewhat useless.

Johannes

Johannes
-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx

From felix_do at web.de  Wed Jun  4 10:55:19 2008
From: felix_do at web.de (Felix Dorner)
Date: Wed, 04 Jun 2008 19:55:19 +0200
Subject: [antlr-interest] testing subrules and noviable alt upon eof
In-Reply-To: <20080604164612.GA29020@badgers-in-foil.co.uk>
References: <4846917E.4090906@web.de>	<6edc6c380806040840l6255df6ev359dd674e1f02538@mail.gmail.com>
	<20080604164612.GA29020@badgers-in-foil.co.uk>
Message-ID: <4846D707.4030209@web.de>


Very nice tricks, thanks to all repliers. I know that with gUnit one can 
also test subrules, probably they also do  Davids "additional token 
trick" in the backyard?

Felix

From brent.yates at gmail.com  Wed Jun  4 10:58:58 2008
From: brent.yates at gmail.com (Brent Yates)
Date: Wed, 4 Jun 2008 13:58:58 -0400
Subject: [antlr-interest] testing subrules and noviable alt upon eof
In-Reply-To: <4846D707.4030209@web.de>
References: <4846917E.4090906@web.de>
	<6edc6c380806040840l6255df6ev359dd674e1f02538@mail.gmail.com>
	<20080604164612.GA29020@badgers-in-foil.co.uk>
	<4846D707.4030209@web.de>
Message-ID: <6edc6c380806041058g298bd7f2na3924a9bcb515e3a@mail.gmail.com>

Unfortunately, gUnit is not able to compensate for Antlr's subrule problems.

Brent

On Wed, Jun 4, 2008 at 1:55 PM, Felix Dorner <felix_do at web.de> wrote:

>
> Very nice tricks, thanks to all repliers. I know that with gUnit one can
> also test subrules, probably they also do  Davids "additional token trick"
> in the backyard?
>
> Felix
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080604/0cb91cc6/attachment.html 

From karthik.abram at neovera.com  Wed Jun  4 12:06:53 2008
From: karthik.abram at neovera.com (Karthik Abram)
Date: Wed, 4 Jun 2008 15:06:53 -0400
Subject: [antlr-interest] new article on ANTLR
In-Reply-To: <4846C75E.5090901@hoovers.com>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>	<002601c8c4e1$7285dbc0$c404a8c0@marion>	<484441EE.2030308@hoovers.com>	<d3992d900806031657p4a39df40x2c50edd1a234d53@mail.gmail.com>	<4846BA3C.3060508@hoovers.com>	<d3992d900806040905w64f6e1e8k438326f21794e39c@mail.gmail.com>	<40208BFB-3D89-4693-9027-FD1E21D88F17@cs.usfca.edu>
	<4846C75E.5090901@hoovers.com>
Message-ID: <00dd01c8c676$26a09d80$73e1d880$@abram@neovera.com>

I think the complexity of languages, antlr and what users are likely to be
using Antlr for is such that you need something like the book to cover both
the little details and the big picture. I for one am thankful for the
availability of the book!

Karthik Abram

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of csanders
Sent: Wednesday, June 04, 2008 12:49 PM
To: Terence Parr
Cc: antlr-interest
Subject: Re: [antlr-interest] new article on ANTLR

Thats a good jumping off point for sure, but I think it still leaves 
users with a 'Where do I go from here?' feeling.

I think this page plus Richard's 'New users README' file would help 
quite a bit.

Thanks,
Charlie

Terence Parr wrote:
> Does:
>
> http://www.antlr.org/wiki/display/ANTLR3/FAQ+-+Getting+Started
>
> Help?  First link in doc section of antlr main page.  We can add to it.
>
> Ter
> On Jun 4, 2008, at 9:05 AM, Richard Clark wrote:
>
>> On Wed, Jun 4, 2008 at 8:52 AM, csanders <csanders at hoovers.com> wrote:
>>
>>> I guess my main complaint is there is no order to the articles, it 
>>> would be
>>> great to have a starting point, and a clear trail of articles to 
>>> follow to
>>> learn ANTLR.
>>
>> I've thought about putting up a "New users README", because it can be
>> hard to know where to start. Would that help?
>>
>> ...Richard
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 5131 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080604/5225effe/attachment.bin 

From csanders at hoovers.com  Wed Jun  4 12:14:34 2008
From: csanders at hoovers.com (csanders)
Date: Wed, 04 Jun 2008 14:14:34 -0500
Subject: [antlr-interest] new article on ANTLR
In-Reply-To: <00dd01c8c676$26a09d80$73e1d880$@abram@neovera.com>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>	<002601c8c4e1$7285dbc0$c404a8c0@marion>	<484441EE.2030308@hoovers.com>	<d3992d900806031657p4a39df40x2c50edd1a234d53@mail.gmail.com>	<4846BA3C.3060508@hoovers.com>	<d3992d900806040905w64f6e1e8k438326f21794e39c@mail.gmail.com>	<40208BFB-3D89-4693-9027-FD1E21D88F17@cs.usfca.edu><4846C75E.5090901@hoovers.com>
	<00dd01c8c676$26a09d80$73e1d880$@abram@neovera.com>
Message-ID: <4846E99A.3000504@hoovers.com>

Agreed, I'm also looking forward to the new one :).

Karthik Abram wrote:
> I think the complexity of languages, antlr and what users are likely to be
> using Antlr for is such that you need something like the book to cover both
> the little details and the big picture. I for one am thankful for the
> availability of the book!
>
> Karthik Abram
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of csanders
> Sent: Wednesday, June 04, 2008 12:49 PM
> To: Terence Parr
> Cc: antlr-interest
> Subject: Re: [antlr-interest] new article on ANTLR
>
> Thats a good jumping off point for sure, but I think it still leaves 
> users with a 'Where do I go from here?' feeling.
>
> I think this page plus Richard's 'New users README' file would help 
> quite a bit.
>
> Thanks,
> Charlie
>
> Terence Parr wrote:
>   
>> Does:
>>
>> http://www.antlr.org/wiki/display/ANTLR3/FAQ+-+Getting+Started
>>
>> Help?  First link in doc section of antlr main page.  We can add to it.
>>
>> Ter
>> On Jun 4, 2008, at 9:05 AM, Richard Clark wrote:
>>
>>     
>>> On Wed, Jun 4, 2008 at 8:52 AM, csanders <csanders at hoovers.com> wrote:
>>>
>>>       
>>>> I guess my main complaint is there is no order to the articles, it 
>>>> would be
>>>> great to have a starting point, and a clear trail of articles to 
>>>> follow to
>>>> learn ANTLR.
>>>>         
>>> I've thought about putting up a "New users README", because it can be
>>> hard to know where to start. Would that help?
>>>
>>> ...Richard
>>>       


From helink at sandia.gov  Wed Jun  4 12:14:55 2008
From: helink at sandia.gov (Hamilton Link)
Date: Wed, 04 Jun 2008 13:14:55 -0600
Subject: [antlr-interest] Fixed! 3.1b1 trouble with a CSharp2/AST example
In-Reply-To: <20080604173442.97590@gmx.net>
References: <796FAD48C7891F43A943B67DF279C589277ACBB470@ES04SNLNT.srn.sandia.gov>
	<20080604173442.97590@gmx.net>
Message-ID: <4846E9AF.3020507@sandia.gov>

Johannes Luber wrote:
>> Rebuilding the runtime seems to have resolved the problem I was having
>> (that is, with AST generation throwing an error on the polynomial example from
>> the web site).  So, I can only guess that the .net runtime assemblies
>> distributed with 3.1b1 were slightly stale.
>>
>>
>> To get Antlr 3.1b1 building under Visual Studio Pro 2008,
>>
>> - you need to add UnwantedTokenException.cs and MissingTokenException.cs
>> to
>>
>> the "Antlr.Runtime" directory of the Antlr3.Runtime project (they are in
>>
>> the associated directory)
>>
>> - you need to add CommonErrorNode.cs to the "Antlr.Runtime.Tree" directory
>>
>> in the same project.
>>
>> It should then build fine with no further modifications. Building under VS
>>
>> will produce .dll and .pdb files in
>>
>> antlr-3.1b1\runtime\CSharp\Sources\Antlr3.Runtime\obj\Debug
>>
>> and similar directories for the other libraries.  Using these instead of
>> the 3.1b1-distributed assemblies fixed the errors I was getting.
>>
>>
>>
>> thanks,
>>
>> hamilton
>>     
>
> Which project file are you using? The VS 2005 should already include all required files, otherwise I have to update the file on the repo. The one for 2003 is outdated, but I don't have VS 2003 anymore so I'll have to use something like Prebuild later. That the newly generated files don't map to the included files has to reasons. The first is that Perforce requires a checkout before you can overwrite a file, even if you don't want to check in the files later. The second is that the runtime assemblies will be distributed in a separate file, so changing things is somewhat useless.
>
> Johannes
>
> Johannes
> --
> GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
> Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx
>
>   

Erm... I may have been using the 2003 version of things.  Yeah, it looks 
like I opened the 2003 .sln file for conversion rather than the 2005 
solution.

h




From parrt at cs.usfca.edu  Wed Jun  4 12:16:59 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 4 Jun 2008 12:16:59 -0700
Subject: [antlr-interest] Internal error on generating grammar with 3.1b
In-Reply-To: <ee873c070806041025occ1d55kb2b0acc5b2480b0d@mail.gmail.com>
References: <ee873c070806041025occ1d55kb2b0acc5b2480b0d@mail.gmail.com>
Message-ID: <88AE2C6B-CA5F-49F1-8761-E45D7729348D@cs.usfca.edu>

Fixed, pushed to repository.  Made pred label equals:

	public boolean equals(Object o) {
		if ( o==null ) {
			return false;
		}
		if ( this == o ) {
			return true; // equals if same object
		}
		if ( !(o instanceof PredicateLabel) ) {
			return false;
		}
		return semanticContext.equals(((PredicateLabel)o).semanticContext);
	}

http://fisheye2.atlassian.com/browse/~raw,r=4990/antlr/src/org/antlr/ 
analysis/PredicateLabel.java

Ter

On Jun 4, 2008, at 10:25 AM, Alexandre Porcelli wrote:

> Hi all,
>
>  I'm trying to convert a valid 3.0.1 grammar to 3.1b... but I got the
> following error message during regenerating:
>
> error(10):  internal error:
> /Documents/dev/drools/drools-compiler/src/main/resources/org/drools/ 
> lang/DRL.g
> : java.lang.ClassCastException: org.antlr.analysis.Label
> org.antlr.analysis.PredicateLabel.equals(PredicateLabel.java:64)
> org 
> .antlr 
> .analysis 
> .NFAToDFAConverter.convertToEOTAcceptState(NFAToDFAConverter.java:928)
> org 
> .antlr 
> .analysis 
> .NFAToDFAConverter 
> .findNewDFAStatesAndAddDFATransitions(NFAToDFAConverter.java:240)
> org.antlr.analysis.NFAToDFAConverter.convert(NFAToDFAConverter.java: 
> 111)
> org.antlr.analysis.DFA.<init>(DFA.java:233)
> org.antlr.tool.Grammar.createLookaheadDFA(Grammar.java:1167)
> org.antlr.tool.Grammar.createLookaheadDFAs(Grammar.java:931)
> org.antlr.tool.Grammar.createLookaheadDFAs(Grammar.java:881)
> org.antlr.codegen.Target.performGrammarAnalysis(Target.java:114)
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:293)
> org.antlr.Tool.generateRecognizer(Tool.java:419)
> org.antlr.Tool.process(Tool.java:341)
> org.antlr.Tool.main(Tool.java:71)
>
>   I have no idea where is the problem.. 'cos the error message does
> not give any hint about it...
>   Is this an ANTLR bug? Or am I using an unsupported feature in  
> ANTLRv3.1b?
>
> Regards,
> Alexandre Porcelli
> <DRL.g>


From parrt at cs.usfca.edu  Wed Jun  4 12:51:33 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 4 Jun 2008 12:51:33 -0700
Subject: [antlr-interest] normalize \n to \n in ST
Message-ID: <9C00F95B-6D3A-44C8-8AFF-573379635894@cs.usfca.edu>

Hi,

I am proposing to normalize the use of \n in templates. If you say \n  
you get \n or \r\n depending on locale.  Actually, maybe we should  
make it a parameter you send to the template group? You might have a  
Web server that should be sensitive to the client locale not the  
server locale, right?

When you say wrap="\n" it would actually generate \r\n on a PC.

When you have a UNIX file with \n line endings, you would still get \r 
\n on a PC.

The problem is that I really should fix this inside ST, but I need to  
send out ANTLR v3.1 shortly. given all of the recent bug fixes, should  
I add this to ST and then release ST 3.2 for use with ANTLR 3.1?

Ter

From cdoucette at vaultus.com  Wed Jun  4 13:13:50 2008
From: cdoucette at vaultus.com (Doucette, Charles)
Date: Wed, 4 Jun 2008 16:13:50 -0400
Subject: [antlr-interest] normalize \n to \n in ST
In-Reply-To: <9C00F95B-6D3A-44C8-8AFF-573379635894@cs.usfca.edu>
References: <9C00F95B-6D3A-44C8-8AFF-573379635894@cs.usfca.edu>
Message-ID: <A7746824D386F947BBC285F6EC4716B0021311D4DB@vmtbosmail01.VMTBOSTON.VAULTUS.COM>

I'm glad you are looking to fix this, as this is affecting me know (as I reported previously).

We prefer to run ANTLR manually only when our grammar changes, and then commit the latest generated parsers and lexers
to our source control system (to be compiled with the rest of the sources). The problem is that
a) our grammar was developed on Windows and has \r\n as line endings
b) the rest of the lexer/parser generated code (from StringTemplate I assume) has only \n as line endings
c) our source control system (SVN) will not accept a file with inconsistent line endings

I can work around this in at least these 2 ways:
1)      Permanently change the line endings in the grammar file to just use \n
        (so it will be consistent with the rest of the generated code)
2)      Normalize the line endings of the parser/lexer each time they are generated
        (this is what I am doing now)

It could be fixed permanently if I could configure StringTemplate and/or ANTLR to
generate lexer/parser code which matches the line endings of my grammar.

FYI, here's a suggested way to configure this.
Subversion has a property called "svn:eol-style" whose value can be:
a) native (automatically determined based on the platform)
b) CRLF
c) LF
d) CR

Chuck

> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
> Sent: Wednesday, June 04, 2008 3:52 PM
> To: stringtemplate-interest
> Cc: Antlr Interest
> Subject: [antlr-interest] normalize \n to \n in ST
>
> Hi,
>
> I am proposing to normalize the use of \n in templates. If
> you say \n you get \n or \r\n depending on locale.  Actually,
> maybe we should make it a parameter you send to the template
> group? You might have a Web server that should be sensitive
> to the client locale not the server locale, right?
>
> When you say wrap="\n" it would actually generate \r\n on a PC.
>
> When you have a UNIX file with \n line endings, you would
> still get \r \n on a PC.
>
> The problem is that I really should fix this inside ST, but I
> need to send out ANTLR v3.1 shortly. given all of the recent
> bug fixes, should I add this to ST and then release ST 3.2
> for use with ANTLR 3.1?
>
> Ter
>

From parrt at cs.usfca.edu  Wed Jun  4 13:16:36 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 4 Jun 2008 13:16:36 -0700
Subject: [antlr-interest] normalize \n to \n in ST
In-Reply-To: <A7746824D386F947BBC285F6EC4716B0021311D4DB@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
References: <9C00F95B-6D3A-44C8-8AFF-573379635894@cs.usfca.edu>
	<A7746824D386F947BBC285F6EC4716B0021311D4DB@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
Message-ID: <8A95158A-2520-45E8-81F5-6067D2B45E9D@cs.usfca.edu>

It turns out that there is an easy way.  new AutoIndentWriter(buf)
uses the default system property for line ending. You can also specify
a second parameter which is the newline string. :)

If you tell ST to use a specific writer for all templates and a group,
make sure that the constructor for that writer sets theline ending as
you wish. A trivial fix, going to start testing it shortly.

  I think that it is best to push out 3.2 ST and use it for ANTLR 3.1
Ter

On Jun 4, 2008, at 1:13 PM, Doucette, Charles wrote:

> I'm glad you are looking to fix this, as this is affecting me know  
> (as I reported previously).
>
> We prefer to run ANTLR manually only when our grammar changes, and  
> then commit the latest generated parsers and lexers
> to our source control system (to be compiled with the rest of the  
> sources). The problem is that
> a) our grammar was developed on Windows and has \r\n as line endings
> b) the rest of the lexer/parser generated code (from StringTemplate  
> I assume) has only \n as line endings
> c) our source control system (SVN) will not accept a file with  
> inconsistent line endings
>
> I can work around this in at least these 2 ways:
> 1)      Permanently change the line endings in the grammar file to  
> just use \n
>        (so it will be consistent with the rest of the generated code)
> 2)      Normalize the line endings of the parser/lexer each time  
> they are generated
>        (this is what I am doing now)
>
> It could be fixed permanently if I could configure StringTemplate  
> and/or ANTLR to
> generate lexer/parser code which matches the line endings of my  
> grammar.
>
> FYI, here's a suggested way to configure this.
> Subversion has a property called "svn:eol-style" whose value can be:
> a) native (automatically determined based on the platform)
> b) CRLF
> c) LF
> d) CR
>
> Chuck
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org
>> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
>> Sent: Wednesday, June 04, 2008 3:52 PM
>> To: stringtemplate-interest
>> Cc: Antlr Interest
>> Subject: [antlr-interest] normalize \n to \n in ST
>>
>> Hi,
>>
>> I am proposing to normalize the use of \n in templates. If
>> you say \n you get \n or \r\n depending on locale.  Actually,
>> maybe we should make it a parameter you send to the template
>> group? You might have a Web server that should be sensitive
>> to the client locale not the server locale, right?
>>
>> When you say wrap="\n" it would actually generate \r\n on a PC.
>>
>> When you have a UNIX file with \n line endings, you would
>> still get \r \n on a PC.
>>
>> The problem is that I really should fix this inside ST, but I
>> need to send out ANTLR v3.1 shortly. given all of the recent
>> bug fixes, should I add this to ST and then release ST 3.2
>> for use with ANTLR 3.1?
>>
>> Ter
>>


From parrt at cs.usfca.edu  Wed Jun  4 13:32:41 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 4 Jun 2008 13:32:41 -0700
Subject: [antlr-interest] normalize \n to \n in ST
In-Reply-To: <A7746824D386F947BBC285F6EC4716B0021311D4DB@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
References: <9C00F95B-6D3A-44C8-8AFF-573379635894@cs.usfca.edu>
	<A7746824D386F947BBC285F6EC4716B0021311D4DB@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
Message-ID: <906F0255-246F-43D1-AA6E-4AFE0D1E7C33@cs.usfca.edu>

Here are 3 of my unit tests. Basically, no matter which you used in  
templates or attributes or options, ST normalizes everything to be the  
newline field of the output writer AutoIndentWriter and its subclass  
NoIndentWriter. Pushing. I guess I need to push 3.2 ST soon :)

Ter

	public void testNewlineNormalizationInTemplateString() throws  
Exception {
		StringTemplate st = new StringTemplate(
				"Foo\r\n"+
				"Bar\n",
				AngleBracketTemplateLexer.class
				);
		StringWriter sw = new StringWriter();
		st.write(new AutoIndentWriter(sw,"\n")); // force \n as newline
		String result = st.toString();
		String expecting ="Foo\nBar\n";     // expect \n in output
		assertEquals(expecting, result);
	}

	public void testNewlineNormalizationInTemplateStringPC() throws  
Exception {
		StringTemplate st = new StringTemplate(
				"Foo\r\n"+
				"Bar\n",
				AngleBracketTemplateLexer.class
				);
		StringWriter sw = new StringWriter();
		st.write(new AutoIndentWriter(sw,"\r\n")); // force \r\n as newline
		String result = st.toString();
		String expecting ="Foo\r\nBar\r\n";     // expect \r\n in output
		assertEquals(expecting, result);
	}

	public void testNewlineNormalizationInAttribute() throws Exception {
		StringTemplate st = new StringTemplate(
				"Foo\r\n"+
				"<name>\n",
				AngleBracketTemplateLexer.class
				);
		st.setAttribute("name", "a\nb\r\nc");
		StringWriter sw = new StringWriter();
		st.write(new AutoIndentWriter(sw,"\n")); // force \n as newline
		String result = st.toString();
		String expecting ="Foo\na\nb\nc\n";     // expect \n in output
		assertEquals(expecting, result);
	}


On Jun 4, 2008, at 1:13 PM, Doucette, Charles wrote:

> I'm glad you are looking to fix this, as this is affecting me know  
> (as I reported previously).
>
> We prefer to run ANTLR manually only when our grammar changes, and  
> then commit the latest generated parsers and lexers
> to our source control system (to be compiled with the rest of the  
> sources). The problem is that
> a) our grammar was developed on Windows and has \r\n as line endings
> b) the rest of the lexer/parser generated code (from StringTemplate  
> I assume) has only \n as line endings
> c) our source control system (SVN) will not accept a file with  
> inconsistent line endings
>
> I can work around this in at least these 2 ways:
> 1)      Permanently change the line endings in the grammar file to  
> just use \n
>        (so it will be consistent with the rest of the generated code)
> 2)      Normalize the line endings of the parser/lexer each time  
> they are generated
>        (this is what I am doing now)
>
> It could be fixed permanently if I could configure StringTemplate  
> and/or ANTLR to
> generate lexer/parser code which matches the line endings of my  
> grammar.
>
> FYI, here's a suggested way to configure this.
> Subversion has a property called "svn:eol-style" whose value can be:
> a) native (automatically determined based on the platform)
> b) CRLF
> c) LF
> d) CR
>
> Chuck
>
>> -----Original Message-----
>> From: antlr-interest-bounces at antlr.org
>> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
>> Sent: Wednesday, June 04, 2008 3:52 PM
>> To: stringtemplate-interest
>> Cc: Antlr Interest
>> Subject: [antlr-interest] normalize \n to \n in ST
>>
>> Hi,
>>
>> I am proposing to normalize the use of \n in templates. If
>> you say \n you get \n or \r\n depending on locale.  Actually,
>> maybe we should make it a parameter you send to the template
>> group? You might have a Web server that should be sensitive
>> to the client locale not the server locale, right?
>>
>> When you say wrap="\n" it would actually generate \r\n on a PC.
>>
>> When you have a UNIX file with \n line endings, you would
>> still get \r \n on a PC.
>>
>> The problem is that I really should fix this inside ST, but I
>> need to send out ANTLR v3.1 shortly. given all of the recent
>> bug fixes, should I add this to ST and then release ST 3.2
>> for use with ANTLR 3.1?
>>
>> Ter
>>


From aleiby.antlr at gmail.com  Wed Jun  4 15:30:15 2008
From: aleiby.antlr at gmail.com (Aaron Leiby)
Date: Wed, 4 Jun 2008 15:30:15 -0700
Subject: [antlr-interest] mismatched cardinality
Message-ID: <621634160806041530w529c5975w1bbf5a478ed29fc1@mail.gmail.com>

I've been working my way through the ANTLR book, and just got to the section
on Rewrite Rule Cardinality.  I'm sure the restriction that "the cardinality
of the elements within suffixed subrules and trees must always be the same
if their cardinality is greater than one" is probably best or maybe even
necessary in this context, but it reminded me of "spreads" in vvvv which are
handled a bit differently.

http://vvvv.org/tiki-index.php?page=Spreads#Connecting_Pins_with_different_slice_counts
http://vvvv.org/tiki-index.php?page=Tutorial+SpreadsII

In that case, if you had something like this:

r : a+ (b c)+ -> ^(a b c)+ ;

Where 'a' matches 0 or 1, 'b' matches only 'B's and 'c' matches only 'C's,
then given the following input:

01 BC BC BC

it would get rewritten as:

0BC 1BC 0BC

since we matched 3 (b c)s and 2 a's, we'd output 3 pairs of BC, and wrap the
a's to match.

While I cannot fathom any situations this would be handy in a language, it
turns out to be very handy in the geometric applications that vvvv was built
for.  I thought I'd bring it up in any case, since it might make a nice
option, or spark some discussion on why that would never be useful in the
problem set that ANTLR is built to solve.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080604/6fb91a3c/attachment.html 

From antlr-list at arizona-software.ch  Wed Jun  4 22:30:46 2008
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Wed, 4 Jun 2008 22:30:46 -0700
Subject: [antlr-interest] ANTLRWorks 1.2b4 available
Message-ID: <7F1ABB87-EC72-4F32-9B79-89FF784718EE@arizona-software.ch>

Hello,

ANTLRWorks 1.2b4 is available for testing at the usual location (www.antlr.org/works) 
. The list of changes can be viewed in the roadmap (http://www.antlr.org:8888/browse/AW?report=com.atlassian.jira.plugin.system.project:roadmap-panel 
). Also, the plugin for IntelliJ is also available for testing.

Regards,

Jean

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080604/763a5125/attachment.html 

From rdclark at gmail.com  Wed Jun  4 23:41:07 2008
From: rdclark at gmail.com (Richard Clark)
Date: Wed, 4 Jun 2008 23:41:07 -0700
Subject: [antlr-interest] new article on ANTLR
In-Reply-To: <2100700567825805479@unknownmsgid>
References: <f0fcc6820806012029u2b004b33q4a86b68e7bfc15a8@mail.gmail.com>
	<002601c8c4e1$7285dbc0$c404a8c0@marion> <484441EE.2030308@hoovers.com>
	<d3992d900806031657p4a39df40x2c50edd1a234d53@mail.gmail.com>
	<4846BA3C.3060508@hoovers.com>
	<d3992d900806040905w64f6e1e8k438326f21794e39c@mail.gmail.com>
	<40208BFB-3D89-4693-9027-FD1E21D88F17@cs.usfca.edu>
	<4846C75E.5090901@hoovers.com> <2100700567825805479@unknownmsgid>
Message-ID: <d3992d900806042341k59543f33kbb0fe02017946264@mail.gmail.com>

On Wed, Jun 4, 2008 at 12:06 PM, Karthik Abram
<karthik.abram at neovera.com> wrote:
> I think the complexity of languages, antlr and what users are likely to be
> using Antlr for is such that you need something like the book to cover both
> the little details and the big picture. I for one am thankful for the
> availability of the book!

I'm also thankful for the book (and bought it while it was still a
"beta book".) At the same time, I've been trying to help have enough
quality documentation out there for free that a newcomer can evaluate
ANTLR.

...Richard

From don_reba at inbox.ru  Thu Jun  5 08:44:40 2008
From: don_reba at inbox.ru (Don Reba)
Date: Thu, 05 Jun 2008 19:44:40 +0400
Subject: [antlr-interest] confused about the trained monkey
Message-ID: <E1K4Hdo-000JKl-00.don_reba-inbox-ru@f55.mail.ru>

antlr-interest at antlr.org

Hello,

I would really appreciate it if someone explained ANTLR's behavior on the following simple example.

I want the grammar to match the string "aa". Disambiguation betwen A and B requires infinite lookahead, but neither token is recursive, so I expect ANTLR to use that helpful trained monkey of its to do it.

In reality, the grammar does not match any string. Peeking in the generated code, I see that A is actually matched to "A EOF", so the first A in the pair can never be seen.

I presume that this has to do with B putting ~EOF in the FOLLOW of A. What confuses me is why ANTLR uses FOLLOW in this case instead of a cyclic DFA.

test
	: A A
	;
A
	: 'a'
	;
B
	: ~'b'+ 'b'
	;

From don_reba at inbox.ru  Thu Jun  5 16:04:46 2008
From: don_reba at inbox.ru (Don Reba)
Date: Fri, 06 Jun 2008 03:04:46 +0400
Subject: [antlr-interest]
	=?windows-1251?q?confused_about_the_trained_monk?=
	=?windows-1251?q?ey?=
In-Reply-To: <1212701230.2739648386@mx66.mail.ru>
References: <1212701230.2739648386@mx66.mail.ru>
Message-ID: <E1K4OVi-000CO8-00.don_reba-inbox-ru@f145.mail.ru>

> When looping constructs are involved, the lexer currently tends to 
> behave as LL(1).  So it's not going to look ahead past all those 
> "not 'b'"s.
> 
> If the left edge of lexer rules (involving loops) is ambiguous, 
> you'll need to manually resolve the ambiguity yourself.  Generally 
> this is done by merging the rules together and adding predicates 
> to do additional lookahead.


Thank you. That explains it. Merging the rules together, then manually emitting the tokens seems like a good solution.

From athusoo at facebook.com  Thu Jun  5 16:42:18 2008
From: athusoo at facebook.com (Ashish Thusoo)
Date: Thu, 5 Jun 2008 16:42:18 -0700
Subject: [antlr-interest] Question on lexer rules
Message-ID: <F519393B6C3C2A40B7E1D01848D073B3D2CC1C@Sf2pmxb04.TheFacebook.com>

Hi,

I am an antlr newbie and am trying to use antlr v3 for recognizing the
following grammar:

--------------------------------------------------
grammar Test;

options
{
output=AST;
ASTLabelType=CommonTree;
backtrack=true;
memoize=true;
}

start
  :
  'Id' qualifiedName |
  'uri' Uri
  ;
  
fragment
Letter
  :
  'a'..'z' | 'A'..'Z'
  ;

qualifiedName
  :
  Id '.' Id
  ;

Uri
  :
  (Letter | '/' | '.')+
  ;

Id
  :
  Letter+
  ;

WS
  :
  (' '|'\r'|'\t'|'\n') {$channel=HIDDEN;}
  ;
-------------------------------------------------

The problem that I have is that the lexel rule Uri subsumes the rule for
Id as well as for qualifiedName. As a result nothing gets tokenized as
Id or a qualifiedName and so the following string 

Id abc.xyz

does not match the grammar. I thought that this would work with
backtracking but it didn't. How do I achieve this with antlr v3? Do I
have to use semantic predicates to achieve this and if so then how do I
turn of the lexical rule for Uri when I see the 'Id' keyword.

Confused...
Ashish

From luca.regini at gmail.com  Thu Jun  5 23:58:07 2008
From: luca.regini at gmail.com (luca regini)
Date: Fri, 6 Jun 2008 08:58:07 +0200
Subject: [antlr-interest] Interest in contributing to C++ target
Message-ID: <64077c280806052358n7ab70e00ta1910fd30228535b@mail.gmail.com>

I'm strongly interested in contributing to the development of the c++
target. I see that this backend is already developed by Jim Idle, I
wonder if there is a possibility to contribute to its work or
collaborate with him.
I am also strongly interested in the new incremental parser that is
supposed to come with the next version of ANLTR. This would allow to
add incremental parsing to some ANTLR code translators we are working
on.
Regards,
Luca Regini

From coddbotherer at googlemail.com  Fri Jun  6 02:45:28 2008
From: coddbotherer at googlemail.com (Artemus Ward)
Date: Fri, 6 Jun 2008 10:45:28 +0100
Subject: [antlr-interest] ANTLRWorks 1.1.7 reliability
Message-ID: <157c5c5c0806060245n26fae758g413229c4815c923d@mail.gmail.com>

I am new to all things ANTLR but I've been having pretty good success
writing a grammar that recognizes my target language.  However I am a
bit unconfident about why ANTLRWorks Interpreter treats certain inputs
the way it does.

I can post the grammer if it helps but perhaps the problem I've got is
easily recognizable just from this description. I have the following
rules:

function_ref
	:	NAME '(' arg_list ')' | NAME '(' ')'  ;

arg_list
	:	exp (',' exp)*  ;

When I provide an input like X(1) and ask to ANTRLWorks to interpret
it as a function_ref, it shows it is parsed as I expect.  But I have
other rules, such as:

exp	:	
		term (('||'|'+'|'-') term)* ;

and term is in turn defined using other rules that eventually include
a function_ref.  According to my grammar the input X(1) can also be
parsed using this rule. But when I ask ANTLRWorks to do that, it shows
a correct derivation except that the closing parenthesis seems not to
be included in the derivation.

So the question I have is whether this is a quirk of the display, or
wether the input has been recognized without consuming all the tokens?
 The latter would of course mean I'm not understanding something.

Art

From dskolovos at gmail.com  Fri Jun  6 06:27:13 2008
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Fri, 06 Jun 2008 14:27:13 +0100
Subject: [antlr-interest] Change type of current AST
Message-ID: <48493B31.7020503@gmail.com>

Hi,

In ANTLR2 I was able to change the type of the current AST like this:

additiveExpression
    :    multiplicativeExpression ((PLUS^|MINUS^) 
multiplicativeExpression {#additiveExpression.setType(OPERATOR);})*
    ;

but I haven't been able to find how to do the same in v3. Any hints?

Cheers,
Dimitrios

From Yury at serdyuk.botik.ru  Fri Jun  6 11:47:54 2008
From: Yury at serdyuk.botik.ru (Yury Serdyuk)
Date: Fri, 06 Jun 2008 22:47:54 +0400
Subject: [antlr-interest] Keywords as identifiers : how to resolve a
	non-determinism ?
Message-ID: <4849865A.4010205@serdyuk.botik.ru>

Hi !

I have tried the example of Terence Parr
(http://www.antlr.org/wiki/pages/viewpage.action?pageId=1741) under 
ANTLR 2.7.5,
but it doesn't work.
Concretely, I have tested the grammar ( for C# output):

> options
> {
>  language = "CSharp";
> }
>
> class SimpleGrammar2Parser   extends  Parser;
>
> options {
>   k = 2;
>   defaultErrorHandler = false;
> }
>
> prog: (stat)+ ;
>
> stat:  keyIF   expr stat
>      | keyCALL ID   SC
>      | SC
>      ;
>
> expr: ID
>     ;
>
> keyIF : {LT(1).getText().Equals("if")}? ID ;
>
> keyCALL : {LT(1).getText().Equals("call")}? ID ;
>
> class SimpleGrammar2Lexer extends Lexer;
>
> options {
>  k = 2;
>  testLiterals=false;
> }
>
> WS    : (  ' '
>           | '\t'
>           | ( options { generateAmbigWarnings = false; }
>               : '\r' '\n'
>               | '\r'
>               | '\n'
>             ) { newline(); }
>          )  {$setType ( Token.SKIP ); }
>       ;
>
> SC : ';';
>
> ID options { testLiterals = true; }
>  :
>   ( 'a'..'z')('a'..'z')*
>  ;

but, of course, there is a nondeterminism between keyIF and keyCALL:

> java antlr.Tool SimpleGrammar2.g
> ANTLR Parser Generator   Version 2.7.5 (20050128)   1989-2005 jGuru.com
> SimpleGrammar2.g:15: warning:nondeterminism between alts 1 and 2 of 
> block upon
> SimpleGrammar2.g:15:     k==1:ID
> SimpleGrammar2.g:15:     k==2:ID


Is it possible to walk around this problem specifically under ANTLR 2.7.5 ?

Thanks.

Yury

From dmzajic at umiacs.umd.edu  Fri Jun  6 12:13:09 2008
From: dmzajic at umiacs.umd.edu (David Zajic)
Date: Fri, 06 Jun 2008 15:13:09 -0400
Subject: [antlr-interest] Naming of java files
Message-ID: <48498C45.2070700@umiacs.umd.edu>

I'm playing the antlr examples in examples-v3 and the xml parsing 
tutorial.  The examples seem to expect that for a lexer in 
<name>Lexer.g, org.antlr.Tool will create a java code file called 
<name>Lexer.java, but the tool really creates a file called 
<name>LexerLexer.java.  The result is that either the .g files must be 
renamed, or the java main classes must be edited to look for 
<name>LexerLexer classes.  Is there a way to control the naming 
conventions so the examples work properly?

    Thanks,
    David Zajic


From parrt at cs.usfca.edu  Fri Jun  6 12:17:33 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 6 Jun 2008 12:17:33 -0700
Subject: [antlr-interest] ANTLRWorks 1.1.7 reliability
In-Reply-To: <157c5c5c0806060245n26fae758g413229c4815c923d@mail.gmail.com>
References: <157c5c5c0806060245n26fae758g413229c4815c923d@mail.gmail.com>
Message-ID: <045837F8-9A0C-4D9F-8D0D-1FAF103A343F@cs.usfca.edu>

try latest beta.
Ter
On Jun 6, 2008, at 2:45 AM, Artemus Ward wrote:

> I am new to all things ANTLR but I've been having pretty good success
> writing a grammar that recognizes my target language.  However I am a
> bit unconfident about why ANTLRWorks Interpreter treats certain inputs
> the way it does.
>
> I can post the grammer if it helps but perhaps the problem I've got is
> easily recognizable just from this description. I have the following
> rules:
>
> function_ref
> 	:	NAME '(' arg_list ')' | NAME '(' ')'  ;
>
> arg_list
> 	:	exp (',' exp)*  ;
>
> When I provide an input like X(1) and ask to ANTRLWorks to interpret
> it as a function_ref, it shows it is parsed as I expect.  But I have
> other rules, such as:
>
> exp	:	
> 		term (('||'|'+'|'-') term)* ;
>
> and term is in turn defined using other rules that eventually include
> a function_ref.  According to my grammar the input X(1) can also be
> parsed using this rule. But when I ask ANTLRWorks to do that, it shows
> a correct derivation except that the closing parenthesis seems not to
> be included in the derivation.
>
> So the question I have is whether this is a quirk of the display, or
> wether the input has been recognized without consuming all the tokens?
> The latter would of course mean I'm not understanding something.
>
> Art


From parrt at cs.usfca.edu  Fri Jun  6 12:18:01 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 6 Jun 2008 12:18:01 -0700
Subject: [antlr-interest] Change type of current AST
In-Reply-To: <48493B31.7020503@gmail.com>
References: <48493B31.7020503@gmail.com>
Message-ID: <E270E02C-1D25-4114-A2F9-11BC1624333B@cs.usfca.edu>

Use $ not #
On Jun 6, 2008, at 6:27 AM, Dimitrios Kolovos wrote:

> Hi,
>
> In ANTLR2 I was able to change the type of the current AST like this:
>
> additiveExpression
>   :    multiplicativeExpression ((PLUS^|MINUS^)  
> multiplicativeExpression {#additiveExpression.setType(OPERATOR);})*
>   ;
>
> but I haven't been able to find how to do the same in v3. Any hints?
>
> Cheers,
> Dimitrios


From parrt at cs.usfca.edu  Fri Jun  6 12:19:28 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 6 Jun 2008 12:19:28 -0700
Subject: [antlr-interest] Naming of java files
In-Reply-To: <48498C45.2070700@umiacs.umd.edu>
References: <48498C45.2070700@umiacs.umd.edu>
Message-ID: <9DEB018C-186B-4CD5-A2BD-C192B1BA3D7A@cs.usfca.edu>

3.1 is more sane this way.
Ter
On Jun 6, 2008, at 12:13 PM, David Zajic wrote:

> I'm playing the antlr examples in examples-v3 and the xml parsing  
> tutorial.  The examples seem to expect that for a lexer in  
> <name>Lexer.g, org.antlr.Tool will create a java code file called  
> <name>Lexer.java, but the tool really creates a file called  
> <name>LexerLexer.java.  The result is that either the .g files must  
> be renamed, or the java main classes must be edited to look for  
> <name>LexerLexer classes.  Is there a way to control the naming  
> conventions so the examples work properly?
>
>   Thanks,
>   David Zajic
>


From dskolovos at gmail.com  Fri Jun  6 13:17:48 2008
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Fri, 06 Jun 2008 21:17:48 +0100
Subject: [antlr-interest] Change type of current AST
In-Reply-To: <E270E02C-1D25-4114-A2F9-11BC1624333B@cs.usfca.edu>
References: <48493B31.7020503@gmail.com>
	<E270E02C-1D25-4114-A2F9-11BC1624333B@cs.usfca.edu>
Message-ID: <48499B6C.90603@gmail.com>

Hi Ter,

Unfortunately, that doesn't seem to work either.

additiveExpression
    :    multiplicativeExpression (('+'|'-')^ multiplicativeExpression 
{$additiveExpression.setType(Operator);})*
    ;

in the parser grammar produces

if ( state.backtracking==0 ) {
    $additiveExpression.setType(Operator);
}

in the parser class.

(I'm using 3.1b in case this makes a difference.)

Cheers,
Dimitrios

Terence Parr wrote:
> Use $ not #
> On Jun 6, 2008, at 6:27 AM, Dimitrios Kolovos wrote:
>
>> Hi,
>>
>> In ANTLR2 I was able to change the type of the current AST like this:
>>
>> additiveExpression
>>   :    multiplicativeExpression ((PLUS^|MINUS^) 
>> multiplicativeExpression {#additiveExpression.setType(OPERATOR);})*
>>   ;
>>
>> but I haven't been able to find how to do the same in v3. Any hints?
>>
>> Cheers,
>> Dimitrios
>
>

From david.beckedorff at gmail.com  Fri Jun  6 13:20:59 2008
From: david.beckedorff at gmail.com (David Beckedorff)
Date: Fri, 6 Jun 2008 16:20:59 -0400
Subject: [antlr-interest] String Template Questions
Message-ID: <1c7463980806061320w1643823fof93a86d9670da540@mail.gmail.com>

Q1.



I have a template hierarchy going, so



       group   WebAppSiLayer : FeatureBase ;





Now in my Java program, I have:



    StringTemplateGroup featureBaseSTG =
StringTemplateGroup.loadGroup("FeatureBase");

    featureBaseSTG.registerRenderer(Object.class, new StFormatRenderer());



    ?



    StringTemplateGroup siLayerSTG =
StringTemplateGroup.loadGroup("WebAppSiLayer", featureBaseSTG);

    siLayerSTG.registerRenderer(Object.class, new StFormatRenderer());





So the question is whether the second registration of my StFormatRenderer
class (implements AttributeRenderer) is actually necessary, since it has
already been registered with the super-template?





Q2.



In ANTLR's Java.stg file, there are, I guess, template interpolations like
<@imports>, <@end>, <@members>, <@preamble>, etc.  What's the purpose of the
'@' characters? What's going on here?





Thanks,

David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080606/e8201193/attachment.html 

From parrt at cs.usfca.edu  Fri Jun  6 13:23:37 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 6 Jun 2008 13:23:37 -0700
Subject: [antlr-interest] Change type of current AST
In-Reply-To: <48499B6C.90603@gmail.com>
References: <48493B31.7020503@gmail.com>
	<E270E02C-1D25-4114-A2F9-11BC1624333B@cs.usfca.edu>
	<48499B6C.90603@gmail.com>
Message-ID: <3A1AE5EE-6D7D-4C23-8A6B-40DB46BD9239@cs.usfca.edu>

Try $tree = or $additiveExpression.tree =  I believe.No doubt you are  
getting an error from antlr below?
Ter
On Jun 6, 2008, at 1:17 PM, Dimitrios Kolovos wrote:

> Hi Ter,
>
> Unfortunately, that doesn't seem to work either.
>
> additiveExpression
>   :    multiplicativeExpression (('+'|'-')^ multiplicativeExpression  
> {$additiveExpression.setType(Operator);})*
>   ;
>
> in the parser grammar produces
>
> if ( state.backtracking==0 ) {
>   $additiveExpression.setType(Operator);
> }
>
> in the parser class.
>
> (I'm using 3.1b in case this makes a difference.)
>
> Cheers,
> Dimitrios
>
> Terence Parr wrote:
>> Use $ not #
>> On Jun 6, 2008, at 6:27 AM, Dimitrios Kolovos wrote:
>>
>>> Hi,
>>>
>>> In ANTLR2 I was able to change the type of the current AST like  
>>> this:
>>>
>>> additiveExpression
>>>  :    multiplicativeExpression ((PLUS^|MINUS^)  
>>> multiplicativeExpression {#additiveExpression.setType(OPERATOR);})*
>>>  ;
>>>
>>> but I haven't been able to find how to do the same in v3. Any hints?
>>>
>>> Cheers,
>>> Dimitrios
>>
>>


From parrt at cs.usfca.edu  Fri Jun  6 13:24:49 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 6 Jun 2008 13:24:49 -0700
Subject: [antlr-interest] String Template Questions
In-Reply-To: <1c7463980806061320w1643823fof93a86d9670da540@mail.gmail.com>
References: <1c7463980806061320w1643823fof93a86d9670da540@mail.gmail.com>
Message-ID: <40EE444C-2994-42C0-AACC-778FEB2DC3BC@cs.usfca.edu>


On Jun 6, 2008, at 1:20 PM, David Beckedorff wrote:

>
> Q1.
>
> I have a template hierarchy going, so
>
>        group   WebAppSiLayer : FeatureBase ;
>
>
> Now in my Java program, I have:
>
>     StringTemplateGroup featureBaseSTG =  
> StringTemplateGroup.loadGroup("FeatureBase");
>     featureBaseSTG.registerRenderer(Object.class, new  
> StFormatRenderer());
>
>     ?
>
>     StringTemplateGroup siLayerSTG =  
> StringTemplateGroup.loadGroup("WebAppSiLayer", featureBaseSTG);
>     siLayerSTG.registerRenderer(Object.class, new StFormatRenderer());
>
>
> So the question is whether the second registration of my  
> StFormatRenderer class (implements AttributeRenderer) is actually  
> necessary, since it has already been registered with the super- 
> template?

Well,You'll have to try it, but I believe I look upwards in the  
hierarchy if I do not see a renderer register.

>
> Q2.
>
> In ANTLR's Java.stg file, there are, I guess, template  
> interpolations like <@imports>, <@end>, <@members>, <@preamble>,  
> etc.  What's the purpose of the '@' characters? What's going on here?
>

That is a template region. Look at that keyword in a search of the doc.
Ter

From dskolovos at gmail.com  Fri Jun  6 13:50:32 2008
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Fri, 06 Jun 2008 21:50:32 +0100
Subject: [antlr-interest] Change type of current AST
In-Reply-To: <3A1AE5EE-6D7D-4C23-8A6B-40DB46BD9239@cs.usfca.edu>
References: <48493B31.7020503@gmail.com>
	<E270E02C-1D25-4114-A2F9-11BC1624333B@cs.usfca.edu>
	<48499B6C.90603@gmail.com>
	<3A1AE5EE-6D7D-4C23-8A6B-40DB46BD9239@cs.usfca.edu>
Message-ID: <4849A318.5020405@gmail.com>

Thanks for your prompt reply. It seems we are getting closer (but still 
no cigar :)

both $tree = and $additiveExpression.tree = produce

if ( state.backtracking==0 ) {
    retval.tree = Operator;
}

which does not seem to change the type of the AST (the getType() returns 
the value of a generated field named T_97). Everything else in the 
grammar seems to be working fine (no warnings, expected ASTs).

Cheers,
Dimitrios


Terence Parr wrote:
> Try $tree = or $additiveExpression.tree =  I believe.No doubt you are 
> getting an error from antlr below?
> Ter
> On Jun 6, 2008, at 1:17 PM, Dimitrios Kolovos wrote:
>
>> Hi Ter,
>>
>> Unfortunately, that doesn't seem to work either.
>>
>> additiveExpression
>>   :    multiplicativeExpression (('+'|'-')^ multiplicativeExpression 
>> {$additiveExpression.setType(Operator);})*
>>   ;
>>
>> in the parser grammar produces
>>
>> if ( state.backtracking==0 ) {
>>   $additiveExpression.setType(Operator);
>> }
>>
>> in the parser class.
>>
>> (I'm using 3.1b in case this makes a difference.)
>>
>> Cheers,
>> Dimitrios
>>
>> Terence Parr wrote:
>>> Use $ not #
>>> On Jun 6, 2008, at 6:27 AM, Dimitrios Kolovos wrote:
>>>
>>>> Hi,
>>>>
>>>> In ANTLR2 I was able to change the type of the current AST like this:
>>>>
>>>> additiveExpression
>>>>  :    multiplicativeExpression ((PLUS^|MINUS^) 
>>>> multiplicativeExpression {#additiveExpression.setType(OPERATOR);})*
>>>>  ;
>>>>
>>>> but I haven't been able to find how to do the same in v3. Any hints?
>>>>
>>>> Cheers,
>>>> Dimitrios
>>>
>>>
>
>

From parrt at cs.usfca.edu  Fri Jun  6 14:26:08 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 6 Jun 2008 14:26:08 -0700
Subject: [antlr-interest] Change type of current AST
In-Reply-To: <4849A318.5020405@gmail.com>
References: <48493B31.7020503@gmail.com>
	<E270E02C-1D25-4114-A2F9-11BC1624333B@cs.usfca.edu>
	<48499B6C.90603@gmail.com>
	<3A1AE5EE-6D7D-4C23-8A6B-40DB46BD9239@cs.usfca.edu>
	<4849A318.5020405@gmail.com>
Message-ID: <24E98F91-6963-47FD-8023-5A74CD7B5FA6@cs.usfca.edu>

Oh, well $tree.type = foo; is what you want.
Ter
On Jun 6, 2008, at 1:50 PM, Dimitrios Kolovos wrote:

> Thanks for your prompt reply. It seems we are getting closer (but  
> still no cigar :)
>
> both $tree = and $additiveExpression.tree = produce
>
> if ( state.backtracking==0 ) {
>   retval.tree = Operator;
> }
>
> which does not seem to change the type of the AST (the getType()  
> returns the value of a generated field named T_97). Everything else  
> in the grammar seems to be working fine (no warnings, expected ASTs).
>
> Cheers,
> Dimitrios
>
>
> Terence Parr wrote:
>> Try $tree = or $additiveExpression.tree =  I believe.No doubt you  
>> are getting an error from antlr below?
>> Ter
>> On Jun 6, 2008, at 1:17 PM, Dimitrios Kolovos wrote:
>>
>>> Hi Ter,
>>>
>>> Unfortunately, that doesn't seem to work either.
>>>
>>> additiveExpression
>>>  :    multiplicativeExpression (('+'|'-')^  
>>> multiplicativeExpression {$additiveExpression.setType(Operator);})*
>>>  ;
>>>
>>> in the parser grammar produces
>>>
>>> if ( state.backtracking==0 ) {
>>>  $additiveExpression.setType(Operator);
>>> }
>>>
>>> in the parser class.
>>>
>>> (I'm using 3.1b in case this makes a difference.)
>>>
>>> Cheers,
>>> Dimitrios
>>>
>>> Terence Parr wrote:
>>>> Use $ not #
>>>> On Jun 6, 2008, at 6:27 AM, Dimitrios Kolovos wrote:
>>>>
>>>>> Hi,
>>>>>
>>>>> In ANTLR2 I was able to change the type of the current AST like  
>>>>> this:
>>>>>
>>>>> additiveExpression
>>>>> :    multiplicativeExpression ((PLUS^|MINUS^)  
>>>>> multiplicativeExpression  
>>>>> {#additiveExpression.setType(OPERATOR);})*
>>>>> ;
>>>>>
>>>>> but I haven't been able to find how to do the same in v3. Any  
>>>>> hints?
>>>>>
>>>>> Cheers,
>>>>> Dimitrios
>>>>
>>>>
>>
>>


From parrt at cs.usfca.edu  Fri Jun  6 14:27:53 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 6 Jun 2008 14:27:53 -0700
Subject: [antlr-interest] Tree Rewrite Caveats
In-Reply-To: <9bfd4b3c0805232021k73302a53n232a3e2f08178922@mail.gmail.com>
References: <9bfd4b3c0805232021k73302a53n232a3e2f08178922@mail.gmail.com>
Message-ID: <08095AF1-E2DF-42CF-BFF6-26C5F86247C8@cs.usfca.edu>


On May 23, 2008, at 8:21 PM, Robin Hamilton-Pennell wrote:

> Hi all,
>
> Been playing around with the tree rewriting stuff in 3.1b1. It's much
> better than the previous test build was. I'm not through with my
> experimentation and likely will find more things, but I thought I'd
> make some notes on a few troubles I ran into, in case it helps anyone
> else.
>
> Firstly (this is probably true of tree parsers in general), if you use
> a custom class as your AST node and the Java target, you will probably
> need to add the method errorNode() in your TreeAdaptor class. This
> will also entail either adding error node utility methods to your AST
> node, or creating a custom subclass of CommonErrorNode. I could be
> completely misguided on this; please say so.
>
> Second, every (sub)rule that you are rewriting must match a tree node,
> I think. This seems obvious in retrospect, but it took me a while to
> figure out. That means that you can't do this:
>
> stmt:
>    expr   ->   expr
>    ;

Really?  Why not?

> However, you can do either of the following (or change your AST
> generation code):
>
> stmt:
>    expr  // omit rewrite rule
>    ;
>
> stmt:
>    // (after changing your AST generation)
>    ^(EXPR expr)   ->   ^(EXPR expr)
>    ;
>
> I should mention that both of these issues involves the rewrite=true
> option. I haven't tested the effects of turning that off, actually.

Can you tell me what goes wrong with the first one?
Ter
>
>
> Again, I could simply be completely misguided on this, in which case,
> please enlighten me.
>
> Thanks,
> Robin


From gmdidro at gmail.com  Fri Jun  6 14:29:35 2008
From: gmdidro at gmail.com (=?KOI8-R?B?8MXU0s/XIOHMxcvTwc7E0g==?=)
Date: Sat, 7 Jun 2008 01:29:35 +0400
Subject: [antlr-interest] Keywords as identifiers : how to resolve a
	non-determinism ?
In-Reply-To: <4849865A.4010205@serdyuk.botik.ru>
References: <4849865A.4010205@serdyuk.botik.ru>
Message-ID: <1dcb5c470806061429n2e1b36fco2595f4b93726ba74@mail.gmail.com>

Could you create tokens' definition for ambitious indentifiers ? I
haven't have understood the moment clearly, but it seems, that such
code works:

Inspired by this post -
http://www.antlr.org/pipermail/antlr-interest/2003-May/003888.html

options
 {
  language = "CSharp";
 }

 class SimpleGrammar2Parser   extends  Parser;

 options {
   k = 2;
   defaultErrorHandler = false;
 }

 prog: (stat)+ ;

 stat:  IF   expr stat
      | CALL ID   SC
      | SC
      ;

 expr: ID
     ;

 class SimpleGrammar2Lexer extends Lexer;

 options {
  k = 2;
  testLiterals=false;
 }

//  TOKENS  !!
tokens
{
 IF="if";
 CALL="call";
}

 WS    : (  ' '
           | '\t'
           | ( options { generateAmbigWarnings = false; }
               : '\r' '\n'
               | '\r'
               | '\n'
             ) { newline(); }
          )  {$setType ( Token.SKIP ); }
       ;

 SC : ';';
 ID options { testLiterals = false; }  /// CHANGED from "true" to
testLiterals = false
  :
   ( 'a'..'z')('a'..'z')*
  ;

> Is it possible to walk around this problem specifically under ANTLR 2.7.5 ?
>
> Thanks.
>
> Yury
>

From dskolovos at gmail.com  Fri Jun  6 14:37:51 2008
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Fri, 06 Jun 2008 22:37:51 +0100
Subject: [antlr-interest] Change type of current AST
In-Reply-To: <24E98F91-6963-47FD-8023-5A74CD7B5FA6@cs.usfca.edu>
References: <48493B31.7020503@gmail.com>
	<E270E02C-1D25-4114-A2F9-11BC1624333B@cs.usfca.edu>
	<48499B6C.90603@gmail.com>
	<3A1AE5EE-6D7D-4C23-8A6B-40DB46BD9239@cs.usfca.edu>
	<4849A318.5020405@gmail.com>
	<24E98F91-6963-47FD-8023-5A74CD7B5FA6@cs.usfca.edu>
Message-ID: <4849AE2F.7090003@gmail.com>

If I set ASTLabelType=CommonType, $tree.type = Operator; it generates

if ( state.backtracking==0 ) {
    ((CommonTree)retval.tree).type = Operator;
}

which is incorrect as CommonTree doesn't have a "type" field

(without an ASTLabelType = it generates

if ( state.backtracking==0 ) {
    ((Object)retval.tree).type = Operator;
}

which is also (profoundly) incorrect
)

Cheers,
Dimitrios

Terence Parr wrote:
> Oh, well $tree.type = foo; is what you want.
> Ter
> On Jun 6, 2008, at 1:50 PM, Dimitrios Kolovos wrote:
>
>> Thanks for your prompt reply. It seems we are getting closer (but 
>> still no cigar :)
>>
>> both $tree = and $additiveExpression.tree = produce
>>
>> if ( state.backtracking==0 ) {
>>   retval.tree = Operator;
>> }
>>
>> which does not seem to change the type of the AST (the getType() 
>> returns the value of a generated field named T_97). Everything else 
>> in the grammar seems to be working fine (no warnings, expected ASTs).
>>
>> Cheers,
>> Dimitrios
>>
>>
>> Terence Parr wrote:
>>> Try $tree = or $additiveExpression.tree =  I believe.No doubt you 
>>> are getting an error from antlr below?
>>> Ter
>>> On Jun 6, 2008, at 1:17 PM, Dimitrios Kolovos wrote:
>>>
>>>> Hi Ter,
>>>>
>>>> Unfortunately, that doesn't seem to work either.
>>>>
>>>> additiveExpression
>>>>  :    multiplicativeExpression (('+'|'-')^ multiplicativeExpression 
>>>> {$additiveExpression.setType(Operator);})*
>>>>  ;
>>>>
>>>> in the parser grammar produces
>>>>
>>>> if ( state.backtracking==0 ) {
>>>>  $additiveExpression.setType(Operator);
>>>> }
>>>>
>>>> in the parser class.
>>>>
>>>> (I'm using 3.1b in case this makes a difference.)
>>>>
>>>> Cheers,
>>>> Dimitrios
>>>>
>>>> Terence Parr wrote:
>>>>> Use $ not #
>>>>> On Jun 6, 2008, at 6:27 AM, Dimitrios Kolovos wrote:
>>>>>
>>>>>> Hi,
>>>>>>
>>>>>> In ANTLR2 I was able to change the type of the current AST like 
>>>>>> this:
>>>>>>
>>>>>> additiveExpression
>>>>>> :    multiplicativeExpression ((PLUS^|MINUS^) 
>>>>>> multiplicativeExpression {#additiveExpression.setType(OPERATOR);})*
>>>>>> ;
>>>>>>
>>>>>> but I haven't been able to find how to do the same in v3. Any hints?
>>>>>>
>>>>>> Cheers,
>>>>>> Dimitrios
>>>>>
>>>>>
>>>
>>>
>
>

From parrt at cs.usfca.edu  Fri Jun  6 14:46:24 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 6 Jun 2008 14:46:24 -0700
Subject: [antlr-interest] Change type of current AST
In-Reply-To: <4849AE2F.7090003@gmail.com>
References: <48493B31.7020503@gmail.com>
	<E270E02C-1D25-4114-A2F9-11BC1624333B@cs.usfca.edu>
	<48499B6C.90603@gmail.com>
	<3A1AE5EE-6D7D-4C23-8A6B-40DB46BD9239@cs.usfca.edu>
	<4849A318.5020405@gmail.com>
	<24E98F91-6963-47FD-8023-5A74CD7B5FA6@cs.usfca.edu>
	<4849AE2F.7090003@gmail.com>
Message-ID: <68964336-73C6-4AFA-94D7-8FA681691AC0@cs.usfca.edu>

Oh, right.  ((Token)$tree.payload).setType(Operator) would do it.
Ter
On Jun 6, 2008, at 2:37 PM, Dimitrios Kolovos wrote:

> If I set ASTLabelType=CommonType, $tree.type = Operator; it generates
>
> if ( state.backtracking==0 ) {
>   ((CommonTree)retval.tree).type = Operator;
> }
>
> which is incorrect as CommonTree doesn't have a "type" field
>
> (without an ASTLabelType = it generates
>
> if ( state.backtracking==0 ) {
>   ((Object)retval.tree).type = Operator;
> }
>
> which is also (profoundly) incorrect
> )
>
> Cheers,
> Dimitrios
>
> Terence Parr wrote:
>> Oh, well $tree.type = foo; is what you want.
>> Ter
>> On Jun 6, 2008, at 1:50 PM, Dimitrios Kolovos wrote:
>>
>>> Thanks for your prompt reply. It seems we are getting closer (but  
>>> still no cigar :)
>>>
>>> both $tree = and $additiveExpression.tree = produce
>>>
>>> if ( state.backtracking==0 ) {
>>>  retval.tree = Operator;
>>> }
>>>
>>> which does not seem to change the type of the AST (the getType()  
>>> returns the value of a generated field named T_97). Everything  
>>> else in the grammar seems to be working fine (no warnings,  
>>> expected ASTs).
>>>
>>> Cheers,
>>> Dimitrios
>>>
>>>
>>> Terence Parr wrote:
>>>> Try $tree = or $additiveExpression.tree =  I believe.No doubt you  
>>>> are getting an error from antlr below?
>>>> Ter
>>>> On Jun 6, 2008, at 1:17 PM, Dimitrios Kolovos wrote:
>>>>
>>>>> Hi Ter,
>>>>>
>>>>> Unfortunately, that doesn't seem to work either.
>>>>>
>>>>> additiveExpression
>>>>> :    multiplicativeExpression (('+'|'-')^  
>>>>> multiplicativeExpression  
>>>>> {$additiveExpression.setType(Operator);})*
>>>>> ;
>>>>>
>>>>> in the parser grammar produces
>>>>>
>>>>> if ( state.backtracking==0 ) {
>>>>> $additiveExpression.setType(Operator);
>>>>> }
>>>>>
>>>>> in the parser class.
>>>>>
>>>>> (I'm using 3.1b in case this makes a difference.)
>>>>>
>>>>> Cheers,
>>>>> Dimitrios
>>>>>
>>>>> Terence Parr wrote:
>>>>>> Use $ not #
>>>>>> On Jun 6, 2008, at 6:27 AM, Dimitrios Kolovos wrote:
>>>>>>
>>>>>>> Hi,
>>>>>>>
>>>>>>> In ANTLR2 I was able to change the type of the current AST  
>>>>>>> like this:
>>>>>>>
>>>>>>> additiveExpression
>>>>>>> :    multiplicativeExpression ((PLUS^|MINUS^)  
>>>>>>> multiplicativeExpression  
>>>>>>> {#additiveExpression.setType(OPERATOR);})*
>>>>>>> ;
>>>>>>>
>>>>>>> but I haven't been able to find how to do the same in v3. Any  
>>>>>>> hints?
>>>>>>>
>>>>>>> Cheers,
>>>>>>> Dimitrios
>>>>>>
>>>>>>
>>>>
>>>>
>>
>>


From dskolovos at gmail.com  Fri Jun  6 15:15:52 2008
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Fri, 6 Jun 2008 23:15:52 +0100
Subject: [antlr-interest] Change type of current AST
In-Reply-To: <68964336-73C6-4AFA-94D7-8FA681691AC0@cs.usfca.edu>
References: <48493B31.7020503@gmail.com>
	<E270E02C-1D25-4114-A2F9-11BC1624333B@cs.usfca.edu>
	<48499B6C.90603@gmail.com>
	<3A1AE5EE-6D7D-4C23-8A6B-40DB46BD9239@cs.usfca.edu>
	<4849A318.5020405@gmail.com>
	<24E98F91-6963-47FD-8023-5A74CD7B5FA6@cs.usfca.edu>
	<4849AE2F.7090003@gmail.com>
	<68964336-73C6-4AFA-94D7-8FA681691AC0@cs.usfca.edu>
Message-ID: <e36faf150806061515j61bf94c3y3a21c209ee4fb733@mail.gmail.com>

Unfortunately this doesn't work as it generates

if ( state.backtracking==0 ) {
  ((Token)((CommonTree)retval.tree).payload).setType(Operator);
}

which doesn't compile as CommonTree doesn't have a payload field...

Cheers,
Dimitrios

On Fri, Jun 6, 2008 at 10:46 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
> Oh, right.  ((Token)$tree.payload).setType(Operator) would do it.
> Ter
> On Jun 6, 2008, at 2:37 PM, Dimitrios Kolovos wrote:
>
>> If I set ASTLabelType=CommonType, $tree.type = Operator; it generates
>>
>> if ( state.backtracking==0 ) {
>>  ((CommonTree)retval.tree).type = Operator;
>> }
>>
>> which is incorrect as CommonTree doesn't have a "type" field
>>
>> (without an ASTLabelType = it generates
>>
>> if ( state.backtracking==0 ) {
>>  ((Object)retval.tree).type = Operator;
>> }
>>
>> which is also (profoundly) incorrect
>> )
>>
>> Cheers,
>> Dimitrios
>>
>> Terence Parr wrote:
>>>
>>> Oh, well $tree.type = foo; is what you want.
>>> Ter
>>> On Jun 6, 2008, at 1:50 PM, Dimitrios Kolovos wrote:
>>>
>>>> Thanks for your prompt reply. It seems we are getting closer (but still
>>>> no cigar :)
>>>>
>>>> both $tree = and $additiveExpression.tree = produce
>>>>
>>>> if ( state.backtracking==0 ) {
>>>>  retval.tree = Operator;
>>>> }
>>>>
>>>> which does not seem to change the type of the AST (the getType() returns
>>>> the value of a generated field named T_97). Everything else in the grammar
>>>> seems to be working fine (no warnings, expected ASTs).
>>>>
>>>> Cheers,
>>>> Dimitrios
>>>>
>>>>
>>>> Terence Parr wrote:
>>>>>
>>>>> Try $tree = or $additiveExpression.tree =  I believe.No doubt you are
>>>>> getting an error from antlr below?
>>>>> Ter
>>>>> On Jun 6, 2008, at 1:17 PM, Dimitrios Kolovos wrote:
>>>>>
>>>>>> Hi Ter,
>>>>>>
>>>>>> Unfortunately, that doesn't seem to work either.
>>>>>>
>>>>>> additiveExpression
>>>>>> :    multiplicativeExpression (('+'|'-')^ multiplicativeExpression
>>>>>> {$additiveExpression.setType(Operator);})*
>>>>>> ;
>>>>>>
>>>>>> in the parser grammar produces
>>>>>>
>>>>>> if ( state.backtracking==0 ) {
>>>>>> $additiveExpression.setType(Operator);
>>>>>> }
>>>>>>
>>>>>> in the parser class.
>>>>>>
>>>>>> (I'm using 3.1b in case this makes a difference.)
>>>>>>
>>>>>> Cheers,
>>>>>> Dimitrios
>>>>>>
>>>>>> Terence Parr wrote:
>>>>>>>
>>>>>>> Use $ not #
>>>>>>> On Jun 6, 2008, at 6:27 AM, Dimitrios Kolovos wrote:
>>>>>>>
>>>>>>>> Hi,
>>>>>>>>
>>>>>>>> In ANTLR2 I was able to change the type of the current AST like
>>>>>>>> this:
>>>>>>>>
>>>>>>>> additiveExpression
>>>>>>>> :    multiplicativeExpression ((PLUS^|MINUS^)
>>>>>>>> multiplicativeExpression {#additiveExpression.setType(OPERATOR);})*
>>>>>>>> ;
>>>>>>>>
>>>>>>>> but I haven't been able to find how to do the same in v3. Any hints?
>>>>>>>>
>>>>>>>> Cheers,
>>>>>>>> Dimitrios
>>>>>>>
>>>>>>>
>>>>>
>>>>>
>>>
>>>
>
>

From parrt at cs.usfca.edu  Fri Jun  6 15:19:25 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 6 Jun 2008 15:19:25 -0700
Subject: [antlr-interest] Change type of current AST
In-Reply-To: <e36faf150806061515j61bf94c3y3a21c209ee4fb733@mail.gmail.com>
References: <48493B31.7020503@gmail.com>
	<E270E02C-1D25-4114-A2F9-11BC1624333B@cs.usfca.edu>
	<48499B6C.90603@gmail.com>
	<3A1AE5EE-6D7D-4C23-8A6B-40DB46BD9239@cs.usfca.edu>
	<4849A318.5020405@gmail.com>
	<24E98F91-6963-47FD-8023-5A74CD7B5FA6@cs.usfca.edu>
	<4849AE2F.7090003@gmail.com>
	<68964336-73C6-4AFA-94D7-8FA681691AC0@cs.usfca.edu>
	<e36faf150806061515j61bf94c3y3a21c209ee4fb733@mail.gmail.com>
Message-ID: <73312C2F-A2AF-4725-84C6-E2E9F64AD14A@cs.usfca.edu>

ok, i'm not going to predict code anymore for you...please start  
reading the source or book or examples:

	/** A single token is the payload */
	public Token token;

try it with that field.
Ter
On Jun 6, 2008, at 3:15 PM, Dimitrios Kolovos wrote:

> Unfortunately this doesn't work as it generates
>
> if ( state.backtracking==0 ) {
>  ((Token)((CommonTree)retval.tree).payload).setType(Operator);
> }
>
> which doesn't compile as CommonTree doesn't have a payload field...
>
> Cheers,
> Dimitrios
>
> On Fri, Jun 6, 2008 at 10:46 PM, Terence Parr <parrt at cs.usfca.edu>  
> wrote:
>> Oh, right.  ((Token)$tree.payload).setType(Operator) would do it.
>> Ter
>> On Jun 6, 2008, at 2:37 PM, Dimitrios Kolovos wrote:
>>
>>> If I set ASTLabelType=CommonType, $tree.type = Operator; it  
>>> generates
>>>
>>> if ( state.backtracking==0 ) {
>>> ((CommonTree)retval.tree).type = Operator;
>>> }
>>>
>>> which is incorrect as CommonTree doesn't have a "type" field
>>>
>>> (without an ASTLabelType = it generates
>>>
>>> if ( state.backtracking==0 ) {
>>> ((Object)retval.tree).type = Operator;
>>> }
>>>
>>> which is also (profoundly) incorrect
>>> )
>>>
>>> Cheers,
>>> Dimitrios
>>>
>>> Terence Parr wrote:
>>>>
>>>> Oh, well $tree.type = foo; is what you want.
>>>> Ter
>>>> On Jun 6, 2008, at 1:50 PM, Dimitrios Kolovos wrote:
>>>>
>>>>> Thanks for your prompt reply. It seems we are getting closer  
>>>>> (but still
>>>>> no cigar :)
>>>>>
>>>>> both $tree = and $additiveExpression.tree = produce
>>>>>
>>>>> if ( state.backtracking==0 ) {
>>>>> retval.tree = Operator;
>>>>> }
>>>>>
>>>>> which does not seem to change the type of the AST (the getType()  
>>>>> returns
>>>>> the value of a generated field named T_97). Everything else in  
>>>>> the grammar
>>>>> seems to be working fine (no warnings, expected ASTs).
>>>>>
>>>>> Cheers,
>>>>> Dimitrios
>>>>>
>>>>>
>>>>> Terence Parr wrote:
>>>>>>
>>>>>> Try $tree = or $additiveExpression.tree =  I believe.No doubt  
>>>>>> you are
>>>>>> getting an error from antlr below?
>>>>>> Ter
>>>>>> On Jun 6, 2008, at 1:17 PM, Dimitrios Kolovos wrote:
>>>>>>
>>>>>>> Hi Ter,
>>>>>>>
>>>>>>> Unfortunately, that doesn't seem to work either.
>>>>>>>
>>>>>>> additiveExpression
>>>>>>> :    multiplicativeExpression (('+'|'-')^  
>>>>>>> multiplicativeExpression
>>>>>>> {$additiveExpression.setType(Operator);})*
>>>>>>> ;
>>>>>>>
>>>>>>> in the parser grammar produces
>>>>>>>
>>>>>>> if ( state.backtracking==0 ) {
>>>>>>> $additiveExpression.setType(Operator);
>>>>>>> }
>>>>>>>
>>>>>>> in the parser class.
>>>>>>>
>>>>>>> (I'm using 3.1b in case this makes a difference.)
>>>>>>>
>>>>>>> Cheers,
>>>>>>> Dimitrios
>>>>>>>
>>>>>>> Terence Parr wrote:
>>>>>>>>
>>>>>>>> Use $ not #
>>>>>>>> On Jun 6, 2008, at 6:27 AM, Dimitrios Kolovos wrote:
>>>>>>>>
>>>>>>>>> Hi,
>>>>>>>>>
>>>>>>>>> In ANTLR2 I was able to change the type of the current AST  
>>>>>>>>> like
>>>>>>>>> this:
>>>>>>>>>
>>>>>>>>> additiveExpression
>>>>>>>>> :    multiplicativeExpression ((PLUS^|MINUS^)
>>>>>>>>> multiplicativeExpression  
>>>>>>>>> {#additiveExpression.setType(OPERATOR);})*
>>>>>>>>> ;
>>>>>>>>>
>>>>>>>>> but I haven't been able to find how to do the same in v3.  
>>>>>>>>> Any hints?
>>>>>>>>>
>>>>>>>>> Cheers,
>>>>>>>>> Dimitrios
>>>>>>>>
>>>>>>>>
>>>>>>
>>>>>>
>>>>
>>>>
>>
>>


From dskolovos at gmail.com  Fri Jun  6 15:39:36 2008
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Fri, 06 Jun 2008 23:39:36 +0100
Subject: [antlr-interest] Change type of current AST
In-Reply-To: <73312C2F-A2AF-4725-84C6-E2E9F64AD14A@cs.usfca.edu>
References: <48493B31.7020503@gmail.com>
	<E270E02C-1D25-4114-A2F9-11BC1624333B@cs.usfca.edu>
	<48499B6C.90603@gmail.com>
	<3A1AE5EE-6D7D-4C23-8A6B-40DB46BD9239@cs.usfca.edu>
	<4849A318.5020405@gmail.com>
	<24E98F91-6963-47FD-8023-5A74CD7B5FA6@cs.usfca.edu>
	<4849AE2F.7090003@gmail.com>
	<68964336-73C6-4AFA-94D7-8FA681691AC0@cs.usfca.edu>
	<e36faf150806061515j61bf94c3y3a21c209ee4fb733@mail.gmail.com>
	<73312C2F-A2AF-4725-84C6-E2E9F64AD14A@cs.usfca.edu>
Message-ID: <4849BCA8.6060905@gmail.com>

I actually have the book in front of me and have spent quite a few hours 
looking at several v3 examples but I can't seem to figure out how to do 
something which looks dead simple (at least from my v2 experience) :(

Just FYI, the .token thing is syntactically ok but $tree at that point 
is null and thus, $tree.token throws an NPE. I'll start looking at the 
generated code to see if I can figure out how I can do it there and then 
copy the solution into the grammar.

In any case thanks a lot for your time and for providing this excellent 
tool for free.

Cheers,
Dimitrios

Terence Parr wrote:
> ok, i'm not going to predict code anymore for you...please start 
> reading the source or book or examples:
>
>     /** A single token is the payload */
>     public Token token;
>
> try it with that field.
> Ter
> On Jun 6, 2008, at 3:15 PM, Dimitrios Kolovos wrote:
>
>> Unfortunately this doesn't work as it generates
>>
>> if ( state.backtracking==0 ) {
>>  ((Token)((CommonTree)retval.tree).payload).setType(Operator);
>> }
>>
>> which doesn't compile as CommonTree doesn't have a payload field...
>>
>> Cheers,
>> Dimitrios
>>
>> On Fri, Jun 6, 2008 at 10:46 PM, Terence Parr <parrt at cs.usfca.edu> 
>> wrote:
>>> Oh, right.  ((Token)$tree.payload).setType(Operator) would do it.
>>> Ter
>>> On Jun 6, 2008, at 2:37 PM, Dimitrios Kolovos wrote:
>>>
>>>> If I set ASTLabelType=CommonType, $tree.type = Operator; it generates
>>>>
>>>> if ( state.backtracking==0 ) {
>>>> ((CommonTree)retval.tree).type = Operator;
>>>> }
>>>>
>>>> which is incorrect as CommonTree doesn't have a "type" field
>>>>
>>>> (without an ASTLabelType = it generates
>>>>
>>>> if ( state.backtracking==0 ) {
>>>> ((Object)retval.tree).type = Operator;
>>>> }
>>>>
>>>> which is also (profoundly) incorrect
>>>> )
>>>>
>>>> Cheers,
>>>> Dimitrios
>>>>
>>>> Terence Parr wrote:
>>>>>
>>>>> Oh, well $tree.type = foo; is what you want.
>>>>> Ter
>>>>> On Jun 6, 2008, at 1:50 PM, Dimitrios Kolovos wrote:
>>>>>
>>>>>> Thanks for your prompt reply. It seems we are getting closer (but 
>>>>>> still
>>>>>> no cigar :)
>>>>>>
>>>>>> both $tree = and $additiveExpression.tree = produce
>>>>>>
>>>>>> if ( state.backtracking==0 ) {
>>>>>> retval.tree = Operator;
>>>>>> }
>>>>>>
>>>>>> which does not seem to change the type of the AST (the getType() 
>>>>>> returns
>>>>>> the value of a generated field named T_97). Everything else in 
>>>>>> the grammar
>>>>>> seems to be working fine (no warnings, expected ASTs).
>>>>>>
>>>>>> Cheers,
>>>>>> Dimitrios
>>>>>>
>>>>>>
>>>>>> Terence Parr wrote:
>>>>>>>
>>>>>>> Try $tree = or $additiveExpression.tree =  I believe.No doubt 
>>>>>>> you are
>>>>>>> getting an error from antlr below?
>>>>>>> Ter
>>>>>>> On Jun 6, 2008, at 1:17 PM, Dimitrios Kolovos wrote:
>>>>>>>
>>>>>>>> Hi Ter,
>>>>>>>>
>>>>>>>> Unfortunately, that doesn't seem to work either.
>>>>>>>>
>>>>>>>> additiveExpression
>>>>>>>> :    multiplicativeExpression (('+'|'-')^ multiplicativeExpression
>>>>>>>> {$additiveExpression.setType(Operator);})*
>>>>>>>> ;
>>>>>>>>
>>>>>>>> in the parser grammar produces
>>>>>>>>
>>>>>>>> if ( state.backtracking==0 ) {
>>>>>>>> $additiveExpression.setType(Operator);
>>>>>>>> }
>>>>>>>>
>>>>>>>> in the parser class.
>>>>>>>>
>>>>>>>> (I'm using 3.1b in case this makes a difference.)
>>>>>>>>
>>>>>>>> Cheers,
>>>>>>>> Dimitrios
>>>>>>>>
>>>>>>>> Terence Parr wrote:
>>>>>>>>>
>>>>>>>>> Use $ not #
>>>>>>>>> On Jun 6, 2008, at 6:27 AM, Dimitrios Kolovos wrote:
>>>>>>>>>
>>>>>>>>>> Hi,
>>>>>>>>>>
>>>>>>>>>> In ANTLR2 I was able to change the type of the current AST like
>>>>>>>>>> this:
>>>>>>>>>>
>>>>>>>>>> additiveExpression
>>>>>>>>>> :    multiplicativeExpression ((PLUS^|MINUS^)
>>>>>>>>>> multiplicativeExpression 
>>>>>>>>>> {#additiveExpression.setType(OPERATOR);})*
>>>>>>>>>> ;
>>>>>>>>>>
>>>>>>>>>> but I haven't been able to find how to do the same in v3. Any 
>>>>>>>>>> hints?
>>>>>>>>>>
>>>>>>>>>> Cheers,
>>>>>>>>>> Dimitrios
>>>>>>>>>
>>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>
>>>>>
>>>
>>>
>
>

From robin at pozytron.com  Fri Jun  6 16:40:36 2008
From: robin at pozytron.com (Robin Hamilton-Pennell)
Date: Fri, 6 Jun 2008 17:40:36 -0600
Subject: [antlr-interest] Tree Rewrite Caveats
In-Reply-To: <08095AF1-E2DF-42CF-BFF6-26C5F86247C8@cs.usfca.edu>
References: <9bfd4b3c0805232021k73302a53n232a3e2f08178922@mail.gmail.com>
	<08095AF1-E2DF-42CF-BFF6-26C5F86247C8@cs.usfca.edu>
Message-ID: <9bfd4b3c0806061640y3b53e048o1145a789e02bda18@mail.gmail.com>

Terence,

Not sure what you mean by "first one," but if you are referring to the
"every (sub)rule that you are rewriting must match a tree node" thing,
here's a little more info.

I've been using the tree rewriting stuff for a bit now, so I
understand it a little better. For my explanation, here's a section of
my grammar that works fine (I've simplified it a lot, only the
relevant portions included):

statement
	: ^(EXPR_STATEMENT expr)					-> ^(EXPR_STATEMENT expr)
	| ^(BLOCK_STATEMENT basicBlock)				-> ^(BLOCK_STATEMENT basicBlock)
	| /*  more statement rules... */
	;
expr	: ^(TYPE expr typeParams)					-> ^(TYPE expr typeParams)
	| /*   more tree rewrite rules... */
	| literal						
	| basicBlock
	| /*   more rule references... */
	;
literal
	: IntLiteral							-> IntLiteral
	| FloatLiteral						-> FloatLiteral
	| BoolLiteral						-> BoolLiteral
	| StringLiteral						-> StringLiteral
	| 'null'								-> 'null'
	| /*   more token references... */
	;

This grammar works fine. Note that it's fine for me to rewrite lexer
(token) references, and tree references, but I don't rewrite rule
references.

If, however, I change expr to rewrite a rule reference:

expr	: ^(TYPE expr typeParams)					-> ^(TYPE expr typeParams)
	| /*   more tree rewrite rules... */
	| literal									-> literal
	| basicBlock
	| /*   more rule references... */
	;

... parsing will always fail with errors like the following:
Exception in thread "main" java.lang.NullPointerException
	at org.antlr.runtime.tree.CommonTreeAdaptor.getChildIndex(CommonTreeAdaptor.java:173)
	at CogTreeRewriter.expr(CogTreeRewriter.java:1469)
	at CogTreeRewriter.expr(CogTreeRewriter.java:1294)
	at CogTreeRewriter.statement(CogTreeRewriter.java:382)
	at CogTreeRewriter.basicBlock(CogTreeRewriter.java:2398)
	at CogTreeRewriter.statement(CogTreeRewriter.java:745)
	at CogTreeRewriter.program(CogTreeRewriter.java:210)

The generated code from around line 1469 looks like this:
                    // AST REWRITE
                    // elements: literal
                    // token labels:
                    // rule labels: retval
                    // token list labels:
                    // rule list labels:
                    retval.tree = root_0;
                    RewriteRuleSubtreeStream stream_retval=new
RewriteRuleSubtreeStream(adaptor,"token
retval",retval!=null?retval.tree:null);

                    root_0 = (CogTree)adaptor.nil();
                    // 91:17: -> literal
                    {
                        adaptor.addChild(root_0, stream_literal.nextTree());

                    }

                    retval.tree = (CogTree)adaptor.rulePostProcessing(root_0);
                    input.replaceChildren(adaptor.getParent(retval.start),
                                          adaptor.getChildIndex(retval.start),
                                          adaptor.getChildIndex(_last),
                                          retval.tree);
                    }
                    break;

If you need any other information, please let me know. I'm happy to help out!

Thanks,
Robin

On Fri, Jun 6, 2008 at 3:27 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
>
> On May 23, 2008, at 8:21 PM, Robin Hamilton-Pennell wrote:
>
>> Hi all,
>>
>> Been playing around with the tree rewriting stuff in 3.1b1. It's much
>> better than the previous test build was. I'm not through with my
>> experimentation and likely will find more things, but I thought I'd
>> make some notes on a few troubles I ran into, in case it helps anyone
>> else.
>>
>> Firstly (this is probably true of tree parsers in general), if you use
>> a custom class as your AST node and the Java target, you will probably
>> need to add the method errorNode() in your TreeAdaptor class. This
>> will also entail either adding error node utility methods to your AST
>> node, or creating a custom subclass of CommonErrorNode. I could be
>> completely misguided on this; please say so.
>>
>> Second, every (sub)rule that you are rewriting must match a tree node,
>> I think. This seems obvious in retrospect, but it took me a while to
>> figure out. That means that you can't do this:
>>
>> stmt:
>>   expr   ->   expr
>>   ;
>
> Really?  Why not?
>
>> However, you can do either of the following (or change your AST
>> generation code):
>>
>> stmt:
>>   expr  // omit rewrite rule
>>   ;
>>
>> stmt:
>>   // (after changing your AST generation)
>>   ^(EXPR expr)   ->   ^(EXPR expr)
>>   ;
>>
>> I should mention that both of these issues involves the rewrite=true
>> option. I haven't tested the effects of turning that off, actually.
>
> Can you tell me what goes wrong with the first one?
> Ter
>>
>>
>> Again, I could simply be completely misguided on this, in which case,
>> please enlighten me.
>>
>> Thanks,
>> Robin
>
>

From dskolovos at gmail.com  Fri Jun  6 16:51:27 2008
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Sat, 7 Jun 2008 00:51:27 +0100
Subject: [antlr-interest] Change type of current AST
In-Reply-To: <4849BCA8.6060905@gmail.com>
References: <48493B31.7020503@gmail.com> <48499B6C.90603@gmail.com>
	<3A1AE5EE-6D7D-4C23-8A6B-40DB46BD9239@cs.usfca.edu>
	<4849A318.5020405@gmail.com>
	<24E98F91-6963-47FD-8023-5A74CD7B5FA6@cs.usfca.edu>
	<4849AE2F.7090003@gmail.com>
	<68964336-73C6-4AFA-94D7-8FA681691AC0@cs.usfca.edu>
	<e36faf150806061515j61bf94c3y3a21c209ee4fb733@mail.gmail.com>
	<73312C2F-A2AF-4725-84C6-E2E9F64AD14A@cs.usfca.edu>
	<4849BCA8.6060905@gmail.com>
Message-ID: <e36faf150806061651m7e09e2b8q1c980bbec7f4f1c2@mail.gmail.com>

I've found that the following works (in case anyone faces a similar
issue in the future):

additiveExpression
	:	multiplicativeExpression (('+'^|'-'^) multiplicativeExpression
		{if (root_0.getToken() != null) root_0.getToken().setType(Operator);})*
	;

I'm sure there is a more elegant way but this will do for now...

Cheers,
Dimitrios

On Fri, Jun 6, 2008 at 11:39 PM, Dimitrios Kolovos <dskolovos at gmail.com> wrote:
> I actually have the book in front of me and have spent quite a few hours
> looking at several v3 examples but I can't seem to figure out how to do
> something which looks dead simple (at least from my v2 experience) :(
>
> Just FYI, the .token thing is syntactically ok but $tree at that point is
> null and thus, $tree.token throws an NPE. I'll start looking at the
> generated code to see if I can figure out how I can do it there and then
> copy the solution into the grammar.
>
> In any case thanks a lot for your time and for providing this excellent tool
> for free.
>
> Cheers,
> Dimitrios
>
> Terence Parr wrote:
>>
>> ok, i'm not going to predict code anymore for you...please start reading
>> the source or book or examples:
>>
>>    /** A single token is the payload */
>>    public Token token;
>>
>> try it with that field.
>> Ter
>> On Jun 6, 2008, at 3:15 PM, Dimitrios Kolovos wrote:
>>
>>> Unfortunately this doesn't work as it generates
>>>
>>> if ( state.backtracking==0 ) {
>>>  ((Token)((CommonTree)retval.tree).payload).setType(Operator);
>>> }
>>>
>>> which doesn't compile as CommonTree doesn't have a payload field...
>>>
>>> Cheers,
>>> Dimitrios
>>>
>>> On Fri, Jun 6, 2008 at 10:46 PM, Terence Parr <parrt at cs.usfca.edu> wrote:
>>>>
>>>> Oh, right.  ((Token)$tree.payload).setType(Operator) would do it.
>>>> Ter
>>>> On Jun 6, 2008, at 2:37 PM, Dimitrios Kolovos wrote:
>>>>
>>>>> If I set ASTLabelType=CommonType, $tree.type = Operator; it generates
>>>>>
>>>>> if ( state.backtracking==0 ) {
>>>>> ((CommonTree)retval.tree).type = Operator;
>>>>> }
>>>>>
>>>>> which is incorrect as CommonTree doesn't have a "type" field
>>>>>
>>>>> (without an ASTLabelType = it generates
>>>>>
>>>>> if ( state.backtracking==0 ) {
>>>>> ((Object)retval.tree).type = Operator;
>>>>> }
>>>>>
>>>>> which is also (profoundly) incorrect
>>>>> )
>>>>>
>>>>> Cheers,
>>>>> Dimitrios
>>>>>
>>>>> Terence Parr wrote:
>>>>>>
>>>>>> Oh, well $tree.type = foo; is what you want.
>>>>>> Ter
>>>>>> On Jun 6, 2008, at 1:50 PM, Dimitrios Kolovos wrote:
>>>>>>
>>>>>>> Thanks for your prompt reply. It seems we are getting closer (but
>>>>>>> still
>>>>>>> no cigar :)
>>>>>>>
>>>>>>> both $tree = and $additiveExpression.tree = produce
>>>>>>>
>>>>>>> if ( state.backtracking==0 ) {
>>>>>>> retval.tree = Operator;
>>>>>>> }
>>>>>>>
>>>>>>> which does not seem to change the type of the AST (the getType()
>>>>>>> returns
>>>>>>> the value of a generated field named T_97). Everything else in the
>>>>>>> grammar
>>>>>>> seems to be working fine (no warnings, expected ASTs).
>>>>>>>
>>>>>>> Cheers,
>>>>>>> Dimitrios
>>>>>>>
>>>>>>>
>>>>>>> Terence Parr wrote:
>>>>>>>>
>>>>>>>> Try $tree = or $additiveExpression.tree =  I believe.No doubt you
>>>>>>>> are
>>>>>>>> getting an error from antlr below?
>>>>>>>> Ter
>>>>>>>> On Jun 6, 2008, at 1:17 PM, Dimitrios Kolovos wrote:
>>>>>>>>
>>>>>>>>> Hi Ter,
>>>>>>>>>
>>>>>>>>> Unfortunately, that doesn't seem to work either.
>>>>>>>>>
>>>>>>>>> additiveExpression
>>>>>>>>> :    multiplicativeExpression (('+'|'-')^ multiplicativeExpression
>>>>>>>>> {$additiveExpression.setType(Operator);})*
>>>>>>>>> ;
>>>>>>>>>
>>>>>>>>> in the parser grammar produces
>>>>>>>>>
>>>>>>>>> if ( state.backtracking==0 ) {
>>>>>>>>> $additiveExpression.setType(Operator);
>>>>>>>>> }
>>>>>>>>>
>>>>>>>>> in the parser class.
>>>>>>>>>
>>>>>>>>> (I'm using 3.1b in case this makes a difference.)
>>>>>>>>>
>>>>>>>>> Cheers,
>>>>>>>>> Dimitrios
>>>>>>>>>
>>>>>>>>> Terence Parr wrote:
>>>>>>>>>>
>>>>>>>>>> Use $ not #
>>>>>>>>>> On Jun 6, 2008, at 6:27 AM, Dimitrios Kolovos wrote:
>>>>>>>>>>
>>>>>>>>>>> Hi,
>>>>>>>>>>>
>>>>>>>>>>> In ANTLR2 I was able to change the type of the current AST like
>>>>>>>>>>> this:
>>>>>>>>>>>
>>>>>>>>>>> additiveExpression
>>>>>>>>>>> :    multiplicativeExpression ((PLUS^|MINUS^)
>>>>>>>>>>> multiplicativeExpression
>>>>>>>>>>> {#additiveExpression.setType(OPERATOR);})*
>>>>>>>>>>> ;
>>>>>>>>>>>
>>>>>>>>>>> but I haven't been able to find how to do the same in v3. Any
>>>>>>>>>>> hints?
>>>>>>>>>>>
>>>>>>>>>>> Cheers,
>>>>>>>>>>> Dimitrios
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>
>>>>>>
>>>>
>>>>
>>
>>
>

From felix_do at web.de  Sat Jun  7 00:09:13 2008
From: felix_do at web.de (Felix Dorner)
Date: Sat, 07 Jun 2008 09:09:13 +0200
Subject: [antlr-interest] origin of <missing ID> node
Message-ID: <484A3419.7090405@web.de>

Hi,

in antlr 3.1b1 my tree adaptor I overwrite

    @Override
    public Object errorNode(TokenStream input, Token start, Token stop,
            RecognitionException e){
        return null;
    }

I anyway get sometimes <missing ID> nodes. Can I turn this off somehow?

Thanks,
Felix

From antlr at mirality.co.nz  Sat Jun  7 00:37:51 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 07 Jun 2008 19:37:51 +1200
Subject: [antlr-interest] Change type of current AST
In-Reply-To: <e36faf150806061651m7e09e2b8q1c980bbec7f4f1c2@mail.gmail.co
 m>
References: <48493B31.7020503@gmail.com> <48499B6C.90603@gmail.com>
	<3A1AE5EE-6D7D-4C23-8A6B-40DB46BD9239@cs.usfca.edu>
	<4849A318.5020405@gmail.com>
	<24E98F91-6963-47FD-8023-5A74CD7B5FA6@cs.usfca.edu>
	<4849AE2F.7090003@gmail.com>
	<68964336-73C6-4AFA-94D7-8FA681691AC0@cs.usfca.edu>
	<e36faf150806061515j61bf94c3y3a21c209ee4fb733@mail.gmail.com>
	<73312C2F-A2AF-4725-84C6-E2E9F64AD14A@cs.usfca.edu>
	<4849BCA8.6060905@gmail.com>
	<e36faf150806061651m7e09e2b8q1c980bbec7f4f1c2@mail.gmail.com>
Message-ID: <20080607073800.62B4B11ED10@www.antlr.org>

At 11:51 7/06/2008, Dimitrios Kolovos wrote:
 >I've found that the following works (in case anyone faces a
 >similar issue in the future):
 >
 >additiveExpression
 >	:	multiplicativeExpression (('+'^|'-'^) 
multiplicativeExpression
 >		{if (root_0.getToken() != null)
 >root_0.getToken().setType(Operator);})*
 >	;
 >
 >I'm sure there is a more elegant way but this will do for now...

How about this:

additiveExpression
   : multiplicativeExpression ((o='+'^|o='-'^) 
multiplicativeExpression
     { $o.setType(Operator); } )*
   ;

(You might need to rearrange the = and ^ a bit.)

Though I'm not entirely sure how either of these will react with 
backtracking.


From aravinda777 at gmail.com  Sat Jun  7 04:12:03 2008
From: aravinda777 at gmail.com (Aravinda Dassanayake)
Date: Sat, 7 Jun 2008 07:12:03 -0400
Subject: [antlr-interest] Aravinda Dassanayake sent you a Friend Request on
	Yaari
Message-ID: <a4e9c177d282555e4102cdc8fa94c32d@localhost.localdomain>

Aravinda Dassanayake wants you to join Yaari!

Is Aravinda your friend?

<a href="http://yaari.com/?controller=user&action=mailregister&friend=1&sign=YaariJLN178VHA162XOX128EBS136">Yes, Aravinda is my friend!</a> <a href="http://yaari.com/?controller=user&action=mailregister&friend=0&sign=YaariJLN178VHA162XOX128EBS136">No, Aravinda isn't my friend.</a>

Please respond or Aravinda may think you said no :(

Thanks,
The Yaari Team
____
If you prefer not to receive this email tell us <a href="http://yaari.com/?controller=absn&action=addoptout&email=antlr-interest at antlr.org">here</a>. If you have any concerns 
regarding the content of this message, please email abuse at yaari.com.  
Yaari LLC, 358 Angier Ave, Atlanta, GA 30312

YaariJLN178VHA162XOX128EBS136

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080607/a787bc4a/attachment.html 

From parrt at cs.usfca.edu  Sat Jun  7 09:54:02 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 7 Jun 2008 09:54:02 -0700
Subject: [antlr-interest] origin of <missing ID> node
In-Reply-To: <484A3419.7090405@web.de>
References: <484A3419.7090405@web.de>
Message-ID: <268A3F33-EBA3-4DD3-9295-C998D884CEAF@cs.usfca.edu>

hi. uh oh...i create that during in-rule recovery...crap.  I'm all  
packed up for europe trip...let me open laptop and add as bug.
Ter
On Jun 7, 2008, at 12:09 AM, Felix Dorner wrote:

> Hi,
>
> in antlr 3.1b1 my tree adaptor I overwrite
>
>   @Override
>   public Object errorNode(TokenStream input, Token start, Token stop,
>           RecognitionException e){
>       return null;
>   }
>
> I anyway get sometimes <missing ID> nodes. Can I turn this off  
> somehow?
>
> Thanks,
> Felix


From parrt at cs.usfca.edu  Sat Jun  7 10:12:52 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 7 Jun 2008 10:12:52 -0700
Subject: [antlr-interest] Tree Rewrite Caveats
In-Reply-To: <9bfd4b3c0806061640y3b53e048o1145a789e02bda18@mail.gmail.com>
References: <9bfd4b3c0805232021k73302a53n232a3e2f08178922@mail.gmail.com>
	<08095AF1-E2DF-42CF-BFF6-26C5F86247C8@cs.usfca.edu>
	<9bfd4b3c0806061640y3b53e048o1145a789e02bda18@mail.gmail.com>
Message-ID: <89324F0A-225B-44D4-9F25-A96D9D25BDE9@cs.usfca.edu>

which line is the exception?  on the _last reference? hmm...must have  
a problem with _last in this case.

Ter
On Jun 6, 2008, at 4:40 PM, Robin Hamilton-Pennell wrote:

> Terence,
>
> Not sure what you mean by "first one," but if you are referring to the
> "every (sub)rule that you are rewriting must match a tree node" thing,
> here's a little more info.
>
> I've been using the tree rewriting stuff for a bit now, so I
> understand it a little better. For my explanation, here's a section of
> my grammar that works fine (I've simplified it a lot, only the
> relevant portions included):
>
> statement
> 	: ^(EXPR_STATEMENT expr)					-> ^(EXPR_STATEMENT expr)
> 	| ^(BLOCK_STATEMENT basicBlock)				-> ^(BLOCK_STATEMENT basicBlock)
> 	| /*  more statement rules... */
> 	;
> expr	: ^(TYPE expr typeParams)					-> ^(TYPE expr typeParams)
> 	| /*   more tree rewrite rules... */
> 	| literal						
> 	| basicBlock
> 	| /*   more rule references... */
> 	;
> literal
> 	: IntLiteral							-> IntLiteral
> 	| FloatLiteral						-> FloatLiteral
> 	| BoolLiteral						-> BoolLiteral
> 	| StringLiteral						-> StringLiteral
> 	| 'null'								-> 'null'
> 	| /*   more token references... */
> 	;
>
> This grammar works fine. Note that it's fine for me to rewrite lexer
> (token) references, and tree references, but I don't rewrite rule
> references.
>
> If, however, I change expr to rewrite a rule reference:
>
> expr	: ^(TYPE expr typeParams)					-> ^(TYPE expr typeParams)
> 	| /*   more tree rewrite rules... */
> 	| literal									-> literal
> 	| basicBlock
> 	| /*   more rule references... */
> 	;
>
> ... parsing will always fail with errors like the following:
> Exception in thread "main" java.lang.NullPointerException
> 	at  
> org 
> .antlr 
> .runtime.tree.CommonTreeAdaptor.getChildIndex(CommonTreeAdaptor.java: 
> 173)
> 	at CogTreeRewriter.expr(CogTreeRewriter.java:1469)
> 	at CogTreeRewriter.expr(CogTreeRewriter.java:1294)
> 	at CogTreeRewriter.statement(CogTreeRewriter.java:382)
> 	at CogTreeRewriter.basicBlock(CogTreeRewriter.java:2398)
> 	at CogTreeRewriter.statement(CogTreeRewriter.java:745)
> 	at CogTreeRewriter.program(CogTreeRewriter.java:210)
>
> The generated code from around line 1469 looks like this:
>                    // AST REWRITE
>                    // elements: literal
>                    // token labels:
>                    // rule labels: retval
>                    // token list labels:
>                    // rule list labels:
>                    retval.tree = root_0;
>                    RewriteRuleSubtreeStream stream_retval=new
> RewriteRuleSubtreeStream(adaptor,"token
> retval",retval!=null?retval.tree:null);
>
>                    root_0 = (CogTree)adaptor.nil();
>                    // 91:17: -> literal
>                    {
>                        adaptor.addChild(root_0,  
> stream_literal.nextTree());
>
>                    }
>
>                    retval.tree =  
> (CogTree)adaptor.rulePostProcessing(root_0);
>                     
> input.replaceChildren(adaptor.getParent(retval.start),
>                                           
> adaptor.getChildIndex(retval.start),
>                                          adaptor.getChildIndex(_last),
>                                          retval.tree);
>                    }
>                    break;
>
> If you need any other information, please let me know. I'm happy to  
> help out!
>
> Thanks,
> Robin
>
> On Fri, Jun 6, 2008 at 3:27 PM, Terence Parr <parrt at cs.usfca.edu>  
> wrote:
>>
>> On May 23, 2008, at 8:21 PM, Robin Hamilton-Pennell wrote:
>>
>>> Hi all,
>>>
>>> Been playing around with the tree rewriting stuff in 3.1b1. It's  
>>> much
>>> better than the previous test build was. I'm not through with my
>>> experimentation and likely will find more things, but I thought I'd
>>> make some notes on a few troubles I ran into, in case it helps  
>>> anyone
>>> else.
>>>
>>> Firstly (this is probably true of tree parsers in general), if you  
>>> use
>>> a custom class as your AST node and the Java target, you will  
>>> probably
>>> need to add the method errorNode() in your TreeAdaptor class. This
>>> will also entail either adding error node utility methods to your  
>>> AST
>>> node, or creating a custom subclass of CommonErrorNode. I could be
>>> completely misguided on this; please say so.
>>>
>>> Second, every (sub)rule that you are rewriting must match a tree  
>>> node,
>>> I think. This seems obvious in retrospect, but it took me a while to
>>> figure out. That means that you can't do this:
>>>
>>> stmt:
>>>  expr   ->   expr
>>>  ;
>>
>> Really?  Why not?
>>
>>> However, you can do either of the following (or change your AST
>>> generation code):
>>>
>>> stmt:
>>>  expr  // omit rewrite rule
>>>  ;
>>>
>>> stmt:
>>>  // (after changing your AST generation)
>>>  ^(EXPR expr)   ->   ^(EXPR expr)
>>>  ;
>>>
>>> I should mention that both of these issues involves the rewrite=true
>>> option. I haven't tested the effects of turning that off, actually.
>>
>> Can you tell me what goes wrong with the first one?
>> Ter
>>>
>>>
>>> Again, I could simply be completely misguided on this, in which  
>>> case,
>>> please enlighten me.
>>>
>>> Thanks,
>>> Robin
>>
>>


From sadnanalmanir at yahoo.com  Sun Jun  8 01:03:25 2008
From: sadnanalmanir at yahoo.com (Mohammad Sadnan Al-Manir)
Date: Sun, 8 Jun 2008 01:03:25 -0700 (PDT)
Subject: [antlr-interest] some questions
Message-ID: <788653.39536.qm@web51906.mail.re2.yahoo.com>

Dear respected everyone

As I am new to ANTLR, probably this questions have been asked before. But it would be great if someone could answer the following basic questions.


1) i am having problem when i want to use backslash and single quote as tokens
one example is like, the parser cannot handle this , even if i use backslash directly, it does not work either.

tokens{BKSLASH = '\' ;
             SGQUOTE = ''' ;}

IRI_REF : '<' (('^' |  SGQUOTE | DBQUOTE | BKSLASH ) ~('\u0000'..'\u0020'))* '>' ;

is there any way to solve the problem?

2) another problem with escape character

the suggested grammar is like 

'\' [tbnrf\"']

which i have written in antlr as 

ECHAR : '\' ( 'b' | 't' | 'n' | 'f' | 'r' | '\"' | '\''| '\');

 is this right? or i have to use double backslash instead of single?

3) The third question is , if i want to convert my parser result into prolog program (its w3c's RIF-BLD to prolog), where can i start?  can i use java  here? if yes, is there any helping guide for this? If not, what other ways are there?

best regards...
al-manir
VIENNA, AUSTRIA


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080608/f4b881df/attachment.html 

From vbar at comp.cz  Sun Jun  8 01:27:55 2008
From: vbar at comp.cz (Vaclav Barta)
Date: Sun, 08 Jun 2008 10:27:55 +0200
Subject: [antlr-interest] How do I set token type in ANTLR 3.1b1?
Message-ID: <484B980B.7080501@comp.cz>

Hi,

I've been trying out ANTLR 3.1b1 with C#, and I'm running into 
trouble... My grammar (available at
http://macroscope.svn.sourceforge.net/viewvc/macroscope/MacroScope/MacroScope.g?revision=2 
) has a rule for numbers:

Number :
	( (Digit)+ ('.' | 'e') ) => (Digit)+ ( '.' (Digit)* (Exponent)? | 
Exponent) { $type = Real; }
	| '.' { $type = DOT; } ( (Digit)+ (Exponent)? { $type = Real; } )?
	| (Digit)+ { $type = Integer; }
	| '0x' ('a'..'f' | Digit)* { $type = HexLiteral; } // "0x" is valid hex 
literal
	;

That works fine with ANTLR 3.0.1, target CSharp. For ANTLR 3.1b1, CSharp 
is unusable (see 
http://www.antlr.org/pipermail/antlr-interest/2008-May/028461.html 
for details). CSharp2 target doesn't have that problem, but has others: 
while $token.text in the grammar must be changed to $token.Text, 
$token.type doesn't work at all: $type in the rule above generates 
compilable code which fails at runtime with NullReferenceException while 
$Type is just copied to the generated code, which therefore doesn't 
compile. What is the correct way to set an explicit token type? Would it 
help if I compiled ANTLR from the latest sources?

	Bye
		Vasek
--
http://www.mangrove.cz/
Open Source integration

From felix_do at web.de  Sun Jun  8 10:32:20 2008
From: felix_do at web.de (Felix Dorner)
Date: Sun, 08 Jun 2008 19:32:20 +0200
Subject: [antlr-interest] Nested Stringtemplate creation inside actions
Message-ID: <484C17A4.6070502@web.de>

Hey,

I've been trying to do something like that:

rule : a b c
           {
               $st = %s1(p1={%s2(p2={...})});
           }

Doesnt seem to like that. Though it works inside rewrite syntax:
          -> s1(p1={%s2...});


The big question is whether I should try to factor out my string 
templates as much as possible, or pay some redundancy for better grammar 
readability.

Felix

From JALuber at gmx.de  Sun Jun  8 15:34:39 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Mon, 09 Jun 2008 00:34:39 +0200
Subject: [antlr-interest] How do I set token type in ANTLR 3.1b1?
In-Reply-To: <484B980B.7080501@comp.cz>
References: <484B980B.7080501@comp.cz>
Message-ID: <20080608223439.248430@gmx.net>

> Hi,
> 
> I've been trying out ANTLR 3.1b1 with C#, and I'm running into 
> trouble... My grammar (available at
> http://macroscope.svn.sourceforge.net/viewvc/macroscope/MacroScope/MacroScope.g?revision=2
> ) has a rule for numbers:
> 
> Number :
> 	( (Digit)+ ('.' | 'e') ) => (Digit)+ ( '.' (Digit)* (Exponent)? | 
> Exponent) { $type = Real; }
> 	| '.' { $type = DOT; } ( (Digit)+ (Exponent)? { $type = Real; } )?
> 	| (Digit)+ { $type = Integer; }
> 	| '0x' ('a'..'f' | Digit)* { $type = HexLiteral; } // "0x" is valid hex 
> literal
> 	;
> 
> That works fine with ANTLR 3.0.1, target CSharp. For ANTLR 3.1b1, CSharp 
> is unusable (see 
> http://www.antlr.org/pipermail/antlr-interest/2008-May/028461.html 
> for details).

Actually, the reason is that a function is missing in CSharpTarget.java. How that happened is a total mystery to me, as I copied the contents from CSharpTarget.java wholly...

> CSharp2 target doesn't have that problem, but has others: 
> while $token.text in the grammar must be changed to $token.Text, 

That isn't supposed to be necessary. I did explicitly test all cases and found that .text is sufficient then (I even changed the wiki text afterwards). Does anyone else have this problem? Really - is this an isolated problem? I once had to use .Text in 3.0.1, too, which prompted my quest to undo this difference. But a search where .Text would be translated failed to show up any result, a test grammar created to replicate this issue worked fine (for whatever reason), and as the runtimes otherwise don't touch the action translation stuff, I doubt that the target choice does affect things. But you could test if Java gives the same problems. I'll test that myself this week, once I get my development workbook back and can recreate my test environment. Due to an unforeseen problem with wildlife it may not be Monday as planned...

> $token.type doesn't work at all: $type in the rule above generates 
> compilable code which fails at runtime with NullReferenceException while 
> $Type is just copied to the generated code, which therefore doesn't 
> compile. What is the correct way to set an explicit token type? Would it 
> help if I compiled ANTLR from the latest sources?
> 
> 	Bye
> 		Vasek

The code should work, and because I don't have my notebook for four weeks already, trunk is still the same as in b1. But you could try it anyways. Still, you could tell more about your environment - maybe somehow it affects ANTLR?

Johannes
-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx

From antlr at mirality.co.nz  Mon Jun  9 01:31:11 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 09 Jun 2008 20:31:11 +1200
Subject: [antlr-interest] How do I set token type in ANTLR 3.1b1?
In-Reply-To: <20080608223439.248430@gmx.net>
References: <484B980B.7080501@comp.cz>
 <20080608223439.248430@gmx.net>
Message-ID: <20080609083122.BDF7A11ECF4@www.antlr.org>

At 10:34 9/06/2008, Johannes Luber wrote:
 >That isn't supposed to be necessary. I did explicitly test all
 >cases and found that .text is sufficient then (I even changed 
the
 >wiki text afterwards). Does anyone else have this problem? 
Really -
 >is this an isolated problem? I once had to use .Text in 3.0.1, 
too,
 >which prompted my quest to undo this difference. But a search 
where
 >.Text would be translated failed to show up any result, a test
 >grammar created to replicate this issue worked fine (for 
whatever
 >reason), and as the runtimes otherwise don't touch the action
 >translation stuff, I doubt that the target choice does affect
 >things. But you could test if Java gives the same problems. I'll 

 >test that myself this week, once I get my development workbook 
back
 >and can recreate my test environment. Due to an unforeseen 
problem
 >with wildlife it may not be Monday as planned...

I've used $x.text successfully in both a combined parser and tree 
parser (build 2008-04-09.18, CSharp2 target).

One thing that I have noticed is that the attribute replacement 
only works to one level -- eg. $a.token and $b.text both work, but 
$a.token.text doesn't.  But that's not a big deal.


From hsivonen at iki.fi  Mon Jun  9 01:38:40 2008
From: hsivonen at iki.fi (Henri Sivonen)
Date: Mon, 9 Jun 2008 11:38:40 +0300
Subject: [antlr-interest] Pretty-printer for Java 5 grammar: Translating
	Java to C++
Message-ID: <B073963C-B859-49E6-AEB3-94440DD83921@iki.fi>

I have two algorithm and primitive-tweaking-intensive Java classes  
that I'd like to translate into C++ classes (and keep maintaining as  
Java source). It seems to me that a sensible way to do this would be  
hacking a Java 5 AST to Java 5 serializer until it outputs C++ instead  
of Java 5 for the subset of Java that my two classes happen to use.

Is there an open-source pretty-printer/serializer for the Antlr Java 5  
grammar? (So that I could use it as a starting point.)

(I don't need general Java class library emulation in C++ or smart  
memory management code generation. However, I do need the ability to  
annotate individual field/argument/local declarations with C++ target  
types when non-obvious substitution is called for and I need the  
ability to have magic comments for not including certain lines in C++  
and adding manually written lines of C++ here and there.)

P.S. I did notice the thread from February 2007, but it didn't appear  
to came to an easy conclusion.
http://www.antlr.org/pipermail/antlr-interest/2007-February/019243.html
-- 
Henri Sivonen
hsivonen at iki.fi
http://hsivonen.iki.fi/



From vbar at comp.cz  Mon Jun  9 02:02:14 2008
From: vbar at comp.cz (Vaclav Barta)
Date: Mon, 09 Jun 2008 11:02:14 +0200
Subject: [antlr-interest] How do I set token type in ANTLR 3.1b1?
In-Reply-To: <20080608223439.248430@gmx.net>
References: <484B980B.7080501@comp.cz> <20080608223439.248430@gmx.net>
Message-ID: <484CF196.3050800@comp.cz>

Johannes Luber wrote:
 >> I've been trying out ANTLR 3.1b1 with C#, and I'm running into
 >> trouble... My grammar (available at
...
 >> That works fine with ANTLR 3.0.1, target CSharp. For ANTLR 3.1b1,
 >> CSharp is unusable (see
 >> http://www.antlr.org/pipermail/antlr-interest/2008-May/028461.html
 >> for details).
 > Actually, the reason is that a function is missing in
 > CSharpTarget.java.  How that happened is a total mystery to me, as I
 > copied the contents from CSharpTarget.java wholly...
Well, that's always a danger with cut&paste... I'm glad to hear the
fix is obvious.

 >> CSharp2 target doesn't have that problem, but has others:
 >> while $token.text in the grammar must be changed to $token.Text,
 > That isn't supposed to be necessary. I did explicitly test all cases
 > and found that .text is sufficient then (I even changed the wiki
Well, I have a counter-example. The files are a bit big for e-mail, so
I put them under http://www.mangrove.cz/antlr-3.1b1-trouble/ . There
are 3 subdirectories: whole is my original grammar (with just the
target changed to CSharp2). Note the use of text in (for example)
MacroScopeLexer.mAsciiStringLiteral() - action { text = ""; } is
translated into

if ( state.backtracking == 0 )
{
    text = "";
}

 > text afterwards). Does anyone else have this problem? Really - is
 > this an isolated problem? I once had to use .Text in 3.0.1, too,
 > which prompted my quest to undo this difference. But a search where
 > .Text would be translated failed to show up any result, a test
 > grammar created to replicate this issue worked fine (for whatever
...but I admit the problem is elusive - when I cut the grammar down to
include just the AsciiStringLiteral rule (available in
http://www.mangrove.cz/antlr-3.1b1-trouble/sample ),
mAsciiStringLiteral() starts using Text... The generated functions
differ more than I expected (since they have the same spec) - apparently 
the more complicated grammar triggers some unusual path...

 > reason), and as the runtimes otherwise don't touch the action
 > translation stuff, I doubt that the target choice does affect
 > things. But you could test if Java gives the same problems. I'll
Well, the Java target generates text - but isn't that correct for
Java? I think the problem is simply that org.antlr.runtime.Lexer has
protected String member text while Antlr.Runtime.Lexer has that data
in an instance of RecognizerSharedState...

 >> $token.type doesn't work at all: $type in the rule above generates
 >> compilable code which fails at runtime with NullReferenceException
 >> while $Type is just copied to the generated code, which therefore
 >> doesn't compile. What is the correct way to set an explicit token
 > The code should work, and because I don't have my notebook for four
 > weeks already, trunk is still the same as in b1. But you could try
Well, it certainly can wait as far as I'm concerned, but it probably
should be fixed before releasing 3.1...

 > it anyways. Still, you could tell more about your environment -
 > maybe somehow it affects ANTLR?  Johannes
Well, just a Vista (bloody unstable, but I don't think that could have 
any influence on ANTLR) with Java 1.6.0_03... My CLASSPATH is

.;C:\proj\macroscope\latest\antlr-3.1b1\lib\antlr-2.7.7.jar;C:\proj\macroscope\latest\antlr-3.1b1\lib\antlr-3.1b1.jar;C:\proj\macroscope\latest\antlr-3.1b1\lib\stringtemplate-3.1.jar;C:\soft\apache-log4j-1.2.15\log4j-1.2.15.jar;C:\soft\commons-logging-1.1.1\commons-logging-1.1.1.jar;C:\PROGRA~1\Java\jdk1.6.0_03\lib\tools.jar;C:\soft\javamail-1.4.1\lib\mailapi.jar;C:\soft\javamail-1.4.1\lib\smtp.jar;C:\soft\commons-codec-1.3\commons-codec-1.3.jar;C:\soft\commons-httpclient-3.1\commons-httpclient-3.1.jar;C:\soft\junit3.8.2\junit.jar;C:\soft\httpunit-1.6.2\lib\httpunit.jar;C:\soft\httpunit-1.6.2\jars\nekohtml.jar;C:\soft\httpunit-1.6.2\jars\Tidy.jar;C:\soft\httpunit-1.6.2\jars\xmlParserAPIs.jar;C:\soft\httpunit-1.6.2\jars\xercesImpl.jar;C:\soft\httpunit-1.6.2\jars\js.jar

- I suppose I could try pruning it, but I'm sceptical that would
change anything...

	Bye
		Vasek
-- 
http://www.mangrove.cz/
Open Source integration

From antlr at mirality.co.nz  Mon Jun  9 02:18:59 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 09 Jun 2008 21:18:59 +1200
Subject: [antlr-interest] How do I set token type in ANTLR 3.1b1?
In-Reply-To: <484CF196.3050800@comp.cz>
References: <484B980B.7080501@comp.cz> <20080608223439.248430@gmx.net>
	<484CF196.3050800@comp.cz>
Message-ID: <20080609091908.4DE7811ED54@www.antlr.org>

At 21:02 9/06/2008, Vaclav Barta wrote:
 >Note the use of text in (for example)
 >MacroScopeLexer.mAsciiStringLiteral() - action { text = ""; } is
 >translated into
 >
 >if ( state.backtracking == 0 )
 >{
 >    text = "";
 >}

That's correct behaviour.  Now if you had written { $text = ""; } 
and it was still outputting 'text = "";' then you might have had 
an argument... ;)

 >when I cut the grammar down to include just the 
AsciiStringLiteral
 >rule (available in 
http://www.mangrove.cz/antlr-3.1b1-trouble/sample ),
 >mAsciiStringLiteral() starts using Text...

Because that's what you wrote.  Unless you use the $ prefix (which 
you're supposed to use whenever you refer to any ANTLR-provided 
parameters, fields, etc) then ANTLR will leave your code 
alone.  It assumes you know what you're doing.


From vbar at comp.cz  Mon Jun  9 03:00:03 2008
From: vbar at comp.cz (Vaclav Barta)
Date: Mon, 09 Jun 2008 12:00:03 +0200
Subject: [antlr-interest] How do I set token type in ANTLR 3.1b1?
In-Reply-To: <200806090919.m599J7bW016587@vega.inec.cz>
References: <484B980B.7080501@comp.cz> <20080608223439.248430@gmx.net>
	<484CF196.3050800@comp.cz>
	<200806090919.m599J7bW016587@vega.inec.cz>
Message-ID: <484CFF23.7050404@comp.cz>

Gavin Lambert wrote:
> Because that's what you wrote.  Unless you use the $ prefix (which 
> you're supposed to use whenever you refer to any ANTLR-provided 
> parameters, fields, etc) then ANTLR will leave your code alone.  It 
> assumes you know what you're doing.
Well, the assumption is clearly incorrect in my case - thanks very much.

	Bye
		Vasek
-- 
http://www.mangrove.cz/
Open Source integration

From kkelley at adobe.com  Mon Jun  9 12:44:07 2008
From: kkelley at adobe.com (Kevin Kelley)
Date: Mon, 09 Jun 2008 12:44:07 -0700
Subject: [antlr-interest] Getting started with Java target?
Message-ID: <C472D617.49%kkelley@adobe.com>

Hello all,

I can?t help but feel like there?s something really obvious that I?m missing
here, but I?m driving myself ragged, so I figured I?d ask.

I have used ANTLRworks (which is nice, by the way) to generate a Java lexer
and parser, and have gotten that code and the ANTLR runtime JAR into a
project of mine.  What I want to do now is to get the tree produced by the
parser.  Unfortunately, the ?how to use the Java runtime? section of the
website is incomplete, and all the examples I can Google my way to seem to
be for ANTLR 2 or to have other problems.

I have a parser, and am giving it the token stream from the lexer and then
invoking the method corresponding to the root rule on the parser, which
presumably parses the token stream.  I think what I want to get out of the
parser is an ?org.antler.runtime.tree.CommonTree? or something similar?but I
can?t for the life of me figure out how to get the tree out of the parser.

Any help would be much appreciated!

Thanks,

Kevin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080609/7e76d907/attachment.html 

From caishaoting at gmail.com  Mon Jun  9 14:12:52 2008
From: caishaoting at gmail.com (Shaoting Cai)
Date: Mon, 9 Jun 2008 14:12:52 -0700
Subject: [antlr-interest] Getting started with Java target?
In-Reply-To: <C472D617.49%kkelley@adobe.com>
References: <C472D617.49%kkelley@adobe.com>
Message-ID: <9b1ada6d0806091412u294de084u700ad7da4992e8a4@mail.gmail.com>

Hi Kevin,

To get the Tree from the parser:

1. set your parser grammar option:
options { output=AST; }

2. get the let the parser run and get the tree from it:
CharStream input = new ANTLRInputStream(System.in);
Lexer lex = new Lexer(input);
CommonTokenStream tokens = new CommonTokenStream(lex);
SLParser parser = new SLParser(tokens);
SLParser. compilationUnit_return r = parser.compilationUnit();
Tree t = (Tree)r.tree;     // or r.getTree();
(referenc: http://antlr.org/wiki/display/CS652/AST+Construction)
note: the compilationUnit is the name of your starting rule

3. if you have a tree grammar, feed the Tree t object to it and walk the AST.

Hope that helps :)
-Shaoting



On Mon, Jun 9, 2008 at 12:44 PM, Kevin Kelley <kkelley at adobe.com> wrote:
> Hello all,
>
> I can't help but feel like there's something really obvious that I'm missing
> here, but I'm driving myself ragged, so I figured I'd ask.
>
> I have used ANTLRworks (which is nice, by the way) to generate a Java lexer
> and parser, and have gotten that code and the ANTLR runtime JAR into a
> project of mine.  What I want to do now is to get the tree produced by the
> parser.  Unfortunately, the "how to use the Java runtime" section of the
> website is incomplete, and all the examples I can Google my way to seem to
> be for ANTLR 2 or to have other problems.
>
> I have a parser, and am giving it the token stream from the lexer and then
> invoking the method corresponding to the root rule on the parser, which
> presumably parses the token stream.  I think what I want to get out of the
> parser is an "org.antler.runtime.tree.CommonTree" or something similar?but I
> can't for the life of me figure out how to get the tree out of the parser.
>
> Any help would be much appreciated!
>
> Thanks,
>
> Kevin

From antlr at mirality.co.nz  Mon Jun  9 14:12:06 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 10 Jun 2008 09:12:06 +1200
Subject: [antlr-interest] Getting started with Java target?
In-Reply-To: <C472D617.49%kkelley@adobe.com>
References: <C472D617.49%kkelley@adobe.com>
Message-ID: <20080609211334.57AE311EB9B@www.antlr.org>

At 07:44 10/06/2008, Kevin Kelley wrote:
>I have used ANTLRworks (which is nice, by the 
>way) to generate a Java lexer and parser, and 
>have gotten that code and the ANTLR runtime JAR 
>into a project of mine.  What I want to do now 
>is to get the tree produced by the 
>parser.  Unfortunately, the ?how to use the Java 
>runtime? section of the website is incomplete, 
>and all the examples I can Google my way to seem 
>to be for ANTLR 2 or to have other problems.
>
>I have a parser, and am giving it the token 
>stream from the lexer and then invoking the 
>method corresponding to the root rule on the 
>parser, which presumably parses the token 
>stream.  I think what I want to get out of the 
>parser is an 
>?org.antler.runtime.tree.CommonTree? or 
>something similar?but I can?t for the life of me 
>figure out how to get the tree out of the parser.

Have you set 'output=AST' in the options?  If 
not, then ANTLR doesn't produce a tree as 
output.  The three output options are as follows:
   - no output: simply executes actions as things are recognised
   - output=template: uses StringTemplate to generate text output
   - output=AST: generates a tree as output

Note that even with 'output=AST' the default tree 
output is flat.  You'll need to add ^ operators 
or rewrite rules to create a structured tree.

The best reference on ANTLR is the ANTLR book; if 
you don't have that, then your next best bet is 
to look at the example scripts (separate zipfile 
on the download page) and at 
http://www.linguamantra.org/.  At this stage the 
wiki isn't much help as a tutorial, though it's 
not bad as a quick reference.


From kkelley at adobe.com  Mon Jun  9 14:21:46 2008
From: kkelley at adobe.com (Kevin Kelley)
Date: Mon, 09 Jun 2008 14:21:46 -0700
Subject: [antlr-interest] Thanks!
Message-ID: <C472ECFA.4E%kkelley@adobe.com>

A big thank you to Gavin, Shaoting, csanders, and everyone else who?s sent
me all manner of tips and advice!  I?ve figured out what I was doing wrong
(I was missing ?options { output = AST }? and operators like ^ to structure
the tree).

Thanks again!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080609/5f873a41/attachment.html 

From michael.gerz at teststep.org  Mon Jun  9 14:50:26 2008
From: michael.gerz at teststep.org (Dr. Michael Gerz)
Date: Mon, 09 Jun 2008 23:50:26 +0200
Subject: [antlr-interest] Invalid rule text
Message-ID: <484DA5A2.1050706@teststep.org>

Hi guys,

this is a cry for help!

In my tree grammar, there is a rule that looks like this:


expressionList
   @after {         System.out.println($expressionList.text); }
    :  
        { System.out.println("Start"); }

        ( expression   { System.out.println($expression.text); }   )+

        { System.out.println("End: "); }
    ;


When this rule is entered, it outputs one or more <expression>'s. 
However, at the end (@after), it only outputs the first element of the 
expressionList.

How is that possible? Shouldn't "$expressionList.text" comprise all 
individual expressions at the end of the rule? Shouldn't I get the 
complete expressionList, when I refer to the rule as follows?

componentCreation
    :    ^(Create Identifier
            (    expressionList
                    -> template 
(id={$Identifier.text},el={$expressionList.text})
                        "((<id>) cm.registerComponent(\"<id>\", new 
<id>(<el>), true))"
            |    /* empty */
                    -> template (id={$Identifier.text})
                        "((<id>) cm.registerComponent(\"<id>\", new 
<id>(), true))"
            )
        )
    ;

In "componentCreation", the code generation for the first template 
fails, because only the first element of expressionList is in <el>. 
Instead, it should be a string like "a, b, c"

BTW: Grammar options are {    k = 1;   ASTLabelType = CommonTree;    
output = template;   rewrite = true; }

Any suggestions? To me this looks like a serious bug in ANTLR...

Thanks in advance!

Michael



From JALuber at gmx.de  Mon Jun  9 16:43:44 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Tue, 10 Jun 2008 01:43:44 +0200
Subject: [antlr-interest] How do I set token type in ANTLR 3.1b1?
In-Reply-To: <484CFF23.7050404@comp.cz>
References: <484B980B.7080501@comp.cz> <20080608223439.248430@gmx.net>
	<484CF196.3050800@comp.cz> <200806090919.m599J7bW016587@vega.inec.cz>
	<484CFF23.7050404@comp.cz>
Message-ID: <20080609234344.320250@gmx.net>

> Gavin Lambert wrote:
> > Because that's what you wrote.  Unless you use the $ prefix (which 
> > you're supposed to use whenever you refer to any ANTLR-provided 
> > parameters, fields, etc) then ANTLR will leave your code alone.  It 
> > assumes you know what you're doing.
> Well, the assumption is clearly incorrect in my case - thanks very much.
> 
> 	Bye
> 		Vasek

So how many of the errors are your fault and how many are ANTLR's? I got lost here.

Johannes
-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

From belayda at gmail.com  Mon Jun  9 19:12:24 2008
From: belayda at gmail.com (Bernardo Elayda)
Date: Mon, 9 Jun 2008 19:12:24 -0700
Subject: [antlr-interest] Invalid rule text
Message-ID: <3e5ed32f0806091912l20d1abc3t564943529e47514@mail.gmail.com>

Hi,
I'm assuming your using Antlr 3.

I think if you make the change I show below, you should get the list you
want:

expressionList
   @after {         System.out.println($s); }
    :
        { System.out.println("Start"); }

        ( s+=expression   { System.out.println($expression.text); }   )+

        { System.out.println("End: "); }
    ;
hth,
Bernardo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080609/9f333f17/attachment.html 

From cdoucette at vaultus.com  Mon Jun  9 20:30:41 2008
From: cdoucette at vaultus.com (Doucette, Charles)
Date: Mon, 9 Jun 2008 23:30:41 -0400
Subject: [antlr-interest] normalize \n to \n in ST
In-Reply-To: <906F0255-246F-43D1-AA6E-4AFE0D1E7C33@cs.usfca.edu>
References: <9C00F95B-6D3A-44C8-8AFF-573379635894@cs.usfca.edu>
	<A7746824D386F947BBC285F6EC4716B0021311D4DB@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
	<906F0255-246F-43D1-AA6E-4AFE0D1E7C33@cs.usfca.edu>
Message-ID: <A7746824D386F947BBC285F6EC4716B002131FD7A7@vmtbosmail01.VMTBOSTON.VAULTUS.COM>

By the way, will this change ultimately resolve the issue with consistent line endings in files generated by ANTLR
(for those of us not using StringTemplate directly)?

Right now I am forced to do this:

> > 2)      Normalize the line endings of the parser/lexer each time
> > they are generated
> >        (this is what I am doing now)

Since this didn't work:

> > 1)      Permanently change the line endings in the grammar file to
> > just use \n
> >        (so it will be consistent with the rest of the
> generated code)

Thanks,
Chuck

> -----Original Message-----
> From: Terence Parr [mailto:parrt at cs.usfca.edu]
> Sent: Wednesday, June 04, 2008 4:33 PM
> To: Doucette, Charles
> Cc: stringtemplate-interest; Antlr Interest
> Subject: Re: [antlr-interest] normalize \n to \n in ST
>
> Here are 3 of my unit tests. Basically, no matter which you
> used in templates or attributes or options, ST normalizes
> everything to be the newline field of the output writer
> AutoIndentWriter and its subclass NoIndentWriter. Pushing. I
> guess I need to push 3.2 ST soon :)
>
> Ter
>
>         public void
> testNewlineNormalizationInTemplateString() throws Exception {
>                 StringTemplate st = new StringTemplate(
>                                 "Foo\r\n"+
>                                 "Bar\n",
>                                 AngleBracketTemplateLexer.class
>                                 );
>                 StringWriter sw = new StringWriter();
>                 st.write(new AutoIndentWriter(sw,"\n")); //
> force \n as newline
>                 String result = st.toString();
>                 String expecting ="Foo\nBar\n";     // expect
> \n in output
>                 assertEquals(expecting, result);
>         }
>
>         public void
> testNewlineNormalizationInTemplateStringPC() throws Exception {
>                 StringTemplate st = new StringTemplate(
>                                 "Foo\r\n"+
>                                 "Bar\n",
>                                 AngleBracketTemplateLexer.class
>                                 );
>                 StringWriter sw = new StringWriter();
>                 st.write(new AutoIndentWriter(sw,"\r\n")); //
> force \r\n as newline
>                 String result = st.toString();
>                 String expecting ="Foo\r\nBar\r\n";     //
> expect \r\n in output
>                 assertEquals(expecting, result);
>         }
>
>         public void testNewlineNormalizationInAttribute()
> throws Exception {
>                 StringTemplate st = new StringTemplate(
>                                 "Foo\r\n"+
>                                 "<name>\n",
>                                 AngleBracketTemplateLexer.class
>                                 );
>                 st.setAttribute("name", "a\nb\r\nc");
>                 StringWriter sw = new StringWriter();
>                 st.write(new AutoIndentWriter(sw,"\n")); //
> force \n as newline
>                 String result = st.toString();
>                 String expecting ="Foo\na\nb\nc\n";     //
> expect \n in output
>                 assertEquals(expecting, result);
>         }
>
>
> On Jun 4, 2008, at 1:13 PM, Doucette, Charles wrote:
>
> > I'm glad you are looking to fix this, as this is affecting
> me know (as
> > I reported previously).
> >
> > We prefer to run ANTLR manually only when our grammar changes, and
> > then commit the latest generated parsers and lexers to our source
> > control system (to be compiled with the rest of the sources). The
> > problem is that
> > a) our grammar was developed on Windows and has \r\n as line endings
> > b) the rest of the lexer/parser generated code (from
> StringTemplate I
> > assume) has only \n as line endings
> > c) our source control system (SVN) will not accept a file with
> > inconsistent line endings
> >
> > I can work around this in at least these 2 ways:
> > 1)      Permanently change the line endings in the grammar file to
> > just use \n
> >        (so it will be consistent with the rest of the
> generated code)
> > 2)      Normalize the line endings of the parser/lexer each time
> > they are generated
> >        (this is what I am doing now)
> >
> > It could be fixed permanently if I could configure StringTemplate
> > and/or ANTLR to generate lexer/parser code which matches the line
> > endings of my grammar.
> >
> > FYI, here's a suggested way to configure this.
> > Subversion has a property called "svn:eol-style" whose value can be:
> > a) native (automatically determined based on the platform)
> > b) CRLF
> > c) LF
> > d) CR
> >
> > Chuck
> >
> >> -----Original Message-----
> >> From: antlr-interest-bounces at antlr.org
> >> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
> >> Sent: Wednesday, June 04, 2008 3:52 PM
> >> To: stringtemplate-interest
> >> Cc: Antlr Interest
> >> Subject: [antlr-interest] normalize \n to \n in ST
> >>
> >> Hi,
> >>
> >> I am proposing to normalize the use of \n in templates. If
> you say \n
> >> you get \n or \r\n depending on locale.  Actually, maybe we should
> >> make it a parameter you send to the template group? You
> might have a
> >> Web server that should be sensitive to the client locale not the
> >> server locale, right?
> >>
> >> When you say wrap="\n" it would actually generate \r\n on a PC.
> >>
> >> When you have a UNIX file with \n line endings, you would
> still get
> >> \r \n on a PC.
> >>
> >> The problem is that I really should fix this inside ST,
> but I need to
> >> send out ANTLR v3.1 shortly. given all of the recent bug fixes,
> >> should I add this to ST and then release ST 3.2 for use with ANTLR
> >> 3.1?
> >>
> >> Ter
> >>
>
>

From vbar at comp.cz  Mon Jun  9 21:45:25 2008
From: vbar at comp.cz (Vaclav Barta)
Date: Tue, 10 Jun 2008 06:45:25 +0200
Subject: [antlr-interest] How do I set token type in ANTLR 3.1b1?
In-Reply-To: <20080609234344.320250@gmx.net>
References: <484B980B.7080501@comp.cz> <20080608223439.248430@gmx.net>
	<484CF196.3050800@comp.cz>
	<200806090919.m599J7bW016587@vega.inec.cz>
	<484CFF23.7050404@comp.cz> <20080609234344.320250@gmx.net>
Message-ID: <484E06E5.10701@comp.cz>

Johannes Luber wrote:
>> Gavin Lambert wrote:
>>> Because that's what you wrote.  Unless you use the $ prefix (which 
>>> you're supposed to use whenever you refer to any ANTLR-provided 
>>> parameters, fields, etc) then ANTLR will leave your code alone.  It 
>>> assumes you know what you're doing.
>> Well, the assumption is clearly incorrect in my case - thanks very much.
> So how many of the errors are your fault and how many are ANTLR's?
> I got lost here.
Handling $text is my error (the simple one :-) ) while handling $type 
remains open - anybody's welcome to convince me it's mine as well, but I 
don't see it...

     Bye
         Vasek
-- 
http://www.mangrove.cz/
Open Source integration


From ld at galador.net  Mon Jun  9 22:15:57 2008
From: ld at galador.net (Lloyd Dupont)
Date: Tue, 10 Jun 2008 14:45:57 +0930
Subject: [antlr-interest] Understanding the "the following token definition
	is unreachable" warning
Message-ID: <02C3A3DBE8324833BD093838088544A9@LloydPC>

In ANTLR v3.0 I just started to create a new grammar (I'm using ANTLR works 1.0)
Here is the whole grammar file:
====
grammar SIPGrammar;

options 
{ 
 language=CSharp;
 output=AST;
}

message : LWS+;


LWS : (WSP* CRLF) => (WSP* CRLF) WSP+
 | WSP+;
protected WSP : ' ' | '\t';
protected CRLF : '\r\n';
====

When I compile it tell me the following warning message:
======
[14:39:47] warning(208): C:\...\SIPGrammar.g:14:11: The following token definitions are unreachable: WSP
======
Now, the position 14:11 is just before W in "protected WSP"
What the heck does that means?

When I try the interpreter everything seems to work out well...
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080610/6aace05d/attachment.html 

From Gerz at fgan.de  Mon Jun  9 23:30:49 2008
From: Gerz at fgan.de (Gerz, Michael)
Date: Tue, 10 Jun 2008 08:30:49 +0200
Subject: [antlr-interest] Invalid rule text
Message-ID: <1FF0CFC89178B64DBD5CF6696750AC4306EEFF@mailserv1.lorien.fkie.fgan.de>

Dear Bernardo,

> I'm assuming you're using Antlr 3.

Yes.

> I think if you make the change I show below, you should get the list 
> you want:

> expressionList
>   @after {         System.out.println($s); }
>    :
>        { System.out.println("Start"); }
>
>        ( s+=expression   { System.out.println($expression.text); }   )+
>
>        { System.out.println("End: "); }
>    ;

Unfortunately, this code does not compile, because "s.start" is invalid (see code below):

I am also wondering whether your proposal would preserve the commas separating the individual expressions in the expressionList (they were part of the input but no token was added to the tree).

Any other suggestions?

Thanks in advance,

Michael

    // $ANTLR start expressionList
    // JavaCodeGenerator.g:620:1: expressionList : (s+= expression )+ ;
    public final JavaCodeGenerator.expressionList_return expressionList() throws RecognitionException {
        JavaCodeGenerator.expressionList_return retval = new JavaCodeGenerator.expressionList_return();
        retval.start = input.LT(1);

        List list_s=null;
        RuleReturnScope s = null;
        try {
            // JavaCodeGenerator.g:622:5: ( (s+= expression )+ )
            // JavaCodeGenerator.g:623:9: (s+= expression )+
            {
             System.out.println("Start"); 
            // JavaCodeGenerator.g:625:9: (s+= expression )+
            int cnt54=0;
            loop54:
            do {
                int alt54=2;
                int LA54_0 = input.LA(1);

                if ( (LA54_0==CastExpression||(LA54_0>=PostfixDecrement && LA54_0<=PrimarySelector)||(LA54_0>=UnaryMinus && LA54_0<=UnaryPlus)||LA54_0==100||LA54_0==107||(LA54_0>=118 && LA54_0<=120)||(LA54_0>=137 && LA54_0<=164)||(LA54_0>=167 && LA54_0<=168)) ) {
                    alt54=1;
                }


                switch (alt54) {
            	case 1 :
            	    // JavaCodeGenerator.g:625:11: s+= expression
            	    {
            	    pushFollow(FOLLOW_expression_in_expressionList2341);
            	    s=expression();

            	    state._fsp--;

            	    if (list_s==null) list_s=new ArrayList();
            	    list_s.add(s.getTemplate());

            	     System.out.println((s!=null?(input.getTokenStream().toString(
            	      input.getTreeAdaptor().getTokenStartIndex(s.start),
            	      input.getTreeAdaptor().getTokenStopIndex(s.start))):null)); 

            	    }
            	    break;

            	default :
            	    if ( cnt54 >= 1 ) break loop54;
                        EarlyExitException eee =
                            new EarlyExitException(54, input);
                        throw eee;
                }
                cnt54++;
            } while (true);

             System.out.println("End: "); 

            }

                     System.out.println(list_s); 
        }
        catch (RecognitionException re) {
            reportError(re);
            recover(input,re);
        }
        finally {
        }
        return retval;
    }
    // $ANTLR end expressionList



************************************************************************
Dr. Michael Gerz 
FGAN e.V.                                       Phone: +49 228 9435-414
Department FKIE/ITF                             Fax: +49 228 9435-685
Neuenahrer Stra?e 20                            E-Mail: gerz at fgan.de 
53343 Wachtberg-Werthhoven, Germany             WWW: www.fgan.de 
 
Forschungsgesellschaft f?r Angewandte Naturwissenschaften e. V. (FGAN) 
Sitz der Gesellschaft: Bonn 
Registergericht: Amtsgericht Bonn VR 2530 
Vorstand: Dr.rer.nat. R. Dornhaus (Vorst.), Prof. Dr. J. Ender (Stellv.)
 


From parrt at cs.usfca.edu  Mon Jun  9 23:53:34 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 10 Jun 2008 08:53:34 +0200
Subject: [antlr-interest] normalize \n to \n in ST
In-Reply-To: <A7746824D386F947BBC285F6EC4716B002131FD7A7@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
References: <9C00F95B-6D3A-44C8-8AFF-573379635894@cs.usfca.edu>
	<A7746824D386F947BBC285F6EC4716B0021311D4DB@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
	<906F0255-246F-43D1-AA6E-4AFE0D1E7C33@cs.usfca.edu>
	<A7746824D386F947BBC285F6EC4716B002131FD7A7@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
Message-ID: <45D74CC4-235C-4DCF-B28A-48D6814247F3@cs.usfca.edu>


On Jun 10, 2008, at 5:30 AM, Doucette, Charles wrote:

> By the way, will this change ultimately resolve the issue with  
> consistent line endings in files generated by ANTLR
> (for those of us not using StringTemplate directly)?

Yes.  v3.1 will use (soon to be release ST 3.2) :)

I'm in amsterdam totally knackered from jetlag at moment...gotta run  
to give a talk at CWI in my sleep. ;)  I hope to kickstart my brain  
this week and make more progress towards release.

ter

From parrt at cs.usfca.edu  Mon Jun  9 23:54:12 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue, 10 Jun 2008 08:54:12 +0200
Subject: [antlr-interest] Understanding the "the following token
	definition is unreachable" warning
In-Reply-To: <02C3A3DBE8324833BD093838088544A9@LloydPC>
References: <02C3A3DBE8324833BD093838088544A9@LloydPC>
Message-ID: <3AE533D5-95A1-4F2D-B644-DC265530EB0B@cs.usfca.edu>

Hi Lloyd, please use fragment not protected.
Ter
On Jun 10, 2008, at 7:15 AM, Lloyd Dupont wrote:

> In ANTLR v3.0 I just started to create a new grammar (I'm using  
> ANTLR works 1.0)
> Here is the whole grammar file:
> ====
> grammar SIPGrammar;
>
> options
> {
>  language=CSharp;
>  output=AST;
> }
>
> message : LWS+;
>
>
> LWS : (WSP* CRLF) => (WSP* CRLF) WSP+
>  | WSP+;
> protected WSP : ' ' | '\t';
> protected CRLF : '\r\n';
> ====
>
> When I compile it tell me the following warning message:
> ======
> [14:39:47] warning(208): C:\...\SIPGrammar.g:14:11: The following  
> token definitions are unreachable: WSP
> ======
> Now, the position 14:11 is just before W in "protected WSP"
> What the heck does that means?
>
> When I try the interpreter everything seems to work out well...
>


From asoka250 at gmail.com  Tue Jun 10 07:20:56 2008
From: asoka250 at gmail.com (ASHOK REDDY)
Date: Tue, 10 Jun 2008 09:20:56 -0500
Subject: [antlr-interest] Dot Grammar conversion from antlr v2 to v3 - regd.
Message-ID: <7b0a1e4b0806100720x19e2e51bg1c1cb69126ea3a2e@mail.gmail.com>

Hello,

As this being my first mail to the list, I like to thank Terrence parr and
all the active members for keeping the list active and informative. As part
of my project requirement, I am trying to convert Graphviz dot grammar (
http://www.antlr.org/grammar/1138116546902/dot/index.html), from antlr v2 to
antlr v3. For this purpose, I downloaded the tar ball (
http://www.antlr.org/wiki/display/ANTLR3/Migrating+from+ANTLR+2+to+ANTLR+3?focusedCommentId=10125322#comment-10125322)
and did as instructed in the Readme file. The conversion for DotParser.g
went well, but I stumbled across some errors in the case of DotLexer.g
grammar file. Can anyone help me in resolving the issue. I got the following
ouput at stdout:-

ashok at ashok-laptop:~/parser/v2v3-0.2/v2v3$ java v3me -combined
./../../DotLexer.g
line 52:13 mismatched character 'r' expecting '''
line 52:19 mismatched character ' ' expecting '''
line 53:13 mismatched character 'i' expecting '''
line 53:21 mismatched character ' ' expecting '''
line 54:13 mismatched character 't' expecting '''
line 54:20 mismatched character ' ' expecting '''
line 55:13 mismatched character 'o' expecting '''
line 55:18 mismatched character ' ' expecting '''
line 56:13 mismatched character 'd' expecting '''
line 56:18 mismatched character ' ' expecting '''
line 57:13 mismatched character '-' expecting '''
line 58:13 mismatched character '>' expecting '''
line 70:27 mismatched character 'r' expecting '''
line 70:33 mismatched character '\n' expecting '''
line 71:29 mismatched character 'i' expecting '''
line 71:37 mismatched character '\n' expecting '''
line 72:28 mismatched character 't' expecting '''
line 72:35 mismatched character '\n' expecting '''
line 73:26 mismatched character 'o' expecting '''
line 73:31 mismatched character '\n' expecting '''
line 74:26 mismatched character 'd' expecting '''
line 74:31 mismatched character '\n' expecting '''
line 86:13 mismatched character '>' expecting '''
line 86:22 mismatched character '>' expecting '''
line 87:13 mismatched character '-' expecting '''
line 87:22 mismatched character '-' expecting '''
line 99:13 mismatched character 'e' expecting '''
line 99:22 mismatched character 'e' expecting '''
line 100:13 mismatched character 'w' expecting '''
line 100:22 mismatched character 'w' expecting '''
line 101:13 mismatched character 'o' expecting '''
line 101:18 mismatched character ' ' expecting '''
line 104:13 mismatched character 'e' expecting '''
line 104:22 mismatched character 'e' expecting '''
line 105:13 mismatched character 'w' expecting '''
line 105:22 mismatched character 'w' expecting '''
line 129:14 mismatched character '\' expecting '''
line 129:18 mismatched character ' ' expecting '''
line 129:25 mismatched character '\' expecting '''
line 130:0 mismatched character ' ' expecting '''
line 150:13 mismatched character '*' expecting '''
line 151:13 mismatched character '/' expecting '''
line 158:9 mismatched character '/' expecting '''
line 165:9 mismatched character '*' expecting '''
line 185:9 mismatched character '/' expecting '''
BR.recoverFromMismatchedToken
line 51:0 mismatched input 'LITERALS' expecting EOF
//;-*- mode: antlr -*-
/*
                        DotParser

    Copyright (C) 2006  Jose San Leandro Armendariz
                        chous at acm-sl.org

    This library is free software; you can redistribute it and/or
    modify it under the terms of the GNU General Public
    License as published by the Free Software Foundation; either
    version 2 of the License, or any later version.

    This library is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
    General Public License for more details.

    You should have received a copy of the GNU General Public
    License along with this library; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307
USA

    Thanks to ACM S.L. for distributing this library under the GPL license.
    Contact info: chous at acm-sl.org
    Postal Address: c/Playa de Lagoa, 1
                    Urb. Valdecabanas
                    Boadilla del monte
                    28660 Madrid
                    Spain

 *****************************************************************************
 *
 * Filename: $RCSfile: DotLexer.g,v $
 *
 * Author: Jose San Leandro Armendariz
 *
 * Description: Clean ANTLR-based lexer according to GraphViz's Dot grammar.
 *
 * See http://www.graphviz.org/doc/info/lang.html
 *
 */



/*options
{
    k=1;
    charVocabulary = '\3'..'\377';
    exportVocab=Dot;
}*/

LITERALS
    :  (  (ph> GRAPH_LITERAL {$setType(GRAPH_LITERAL);}
        | (raph> DIGRAPH_LITERAL {$setType(DIGRAPH_LITERAL);}
        | (ict> STRICT_LITERAL {$setType(STRICT_LITERAL);}
        | (e> NODE_LITERAL {$setType(NODE_LITERAL);}
        | (e> EDGE_LITERAL {$setType(EDGE_LITERAL);}
        | () => EDGEOP_LITERAL {$setType(EDGEOP_LITERAL);}
        | () => EDGEOP_LITERAL {$setType(EDGEOP_LITERAL);}
        | ('{') => O_BRACKET {$setType(O_BRACKET);}
        | ('}') => C_BRACKET {$setType(C_BRACKET);}
        | ('[') => O_SQR_BRACKET {$setType(O_SQR_BRACKET);}
        | (']') => C_SQR_BRACKET {$setType(C_SQR_BRACKET);}
        | (';') => SEMI_COLON {$setType(SEMI_COLON);}
        | ('=') => EQUAL {$setType(EQUAL);}
        | (',') => COMMA {$setType(COMMA);}
        | (':') => COLON {$setType(COLON);}
        | ID {$setType(ID);})
    ;

fragment GRAPH_LITERAL : phragment DIGRAPH_LITERAL : raphragment
STRICT_LITERAL : ictragment NODE_LITERAL : eragment EDGE_LITERAL : efragment
O_BRACKET : '{';
fragment C_BRACKET : '}';
fragment O_SQR_BRACKET : '[';
fragment C_SQR_BRACKET : ']';
fragment SEMI_COLON : ';';
fragment EQUAL : '=';
fragment COMMA : ',';
fragment COLON : ':';

fragment EDGEOP_LITERAL
    :  (  () =>
        | () =>
       )
    ;

fragment ID
    :  (  VALIDSTR
        | NUMBER
        | QUOTEDSTR
        | HTMLSTR
       );

fragment COMPASS_PT
    :  (  () =>
        | () =>
        | (e> NODE_LITERAL
        | 'n'
        | 'e'
        | () =>
        | () =>
        | 's'
        | 'w'
       );

fragment ALPHACHAR
    :  (   'a'..'z'
        |  'A'..'Z'
        |  '_'
       );

fragment VALIDSTR
    :  ALPHACHAR
        (  ALPHACHAR
         |  '0'..'9'
        )*
    ;

fragment NUMBER
    :  ('-')? ('0'..'9')+ ('.' ('0'..'9')+)?
    ;

fragment QUOTEDSTR
    :  '"'
       (  (>       | ~('"')
       )*
       '"'
    ;

fragment HTMLSTR
    :  '<' (~'>')* '>'
    ;

WS
    :
       (   ' '
        |  '\t'
        |  '\r' '\n' { newline(); }
        |  '\n'      { newline(); }
       ) {$setType(Token.SKIP);} //ignore this token
    ;

// Single-line comments
COMMENT
    :  (  () => ML_COMMENT
        | () => SL_COMMENT)
       {$setType(Token.SKIP); newline();}
    ;

// Taken from ANTLR's Java grammar.
// Single-line comments
fragment SL_COMMENT
    :
       (~('\n'|'\r'))* ('\n'|'\r'('\n')?)
       {$setType(Token.SKIP); newline();}
    ;

// multiple-line comments
fragment ML_COMMENT
    :
       (   /*
              '\r' '\n' can be matched in one alternative or by matching
              '\r' in one iteration and '\n' in another.  I am trying to
              handle any flavor of newline that comes in, but the language
              that allows both "\r\n" and "\r" and "\n" to all be valid
              newline is ambiguous.  Consequently, the resulting grammar
              must be ambiguous.  I'm shutting this warning off.
            */
            /*options
            {
                generateAmbigWarnings=false;
            }*/

               {LA(2)!='/'}? '*'
             | '\r' '\n' {newline();}
             | '\r' {newline();}
             | '\n' {newline();}
             | ~('*'|'\n'|'\r')
       )*

       {$setType(Token.SKIP);}
    ;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080610/335e4281/attachment-0001.html 

From antlr at jazillian.com  Tue Jun 10 07:38:35 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Tue, 10 Jun 2008 10:38:35 -0400
Subject: [antlr-interest] Pretty-printer for Java 5 grammar: Translating
 Java to C++
In-Reply-To: <B073963C-B859-49E6-AEB3-94440DD83921@iki.fi>
References: <B073963C-B859-49E6-AEB3-94440DD83921@iki.fi>
Message-ID: <484E91EB.9060205@jazillian.com>

Henri Sivonen wrote:

> Is there an open-source pretty-printer/serializer for the Antlr Java 5 
> grammar? (So that I could use it as a starting point.)

http://www.jazillian.com/antlr/emitter.html

From geraint at transitive.com  Tue Jun 10 09:11:58 2008
From: geraint at transitive.com (Geraint North)
Date: Tue, 10 Jun 2008 17:11:58 +0100
Subject: [antlr-interest] Duplicating and modifying portions of the input
Message-ID: <91930969-CFA4-4B5B-B9DE-2CC18F566D8A@transitive.com>

Hi,

First off, I'd like to thank Terence and anyone else involved in the  
development of ANTLR/ANTLRWorks - I've just picked up ANTLR (v3),  
having looked at ANTLR last back in 2002 (if memory serves me) and I'm  
finding it an absolute joy to use.

I was wondering if I could get some suggestions from the group as to  
how to implement a particular feature in a language I'm developing.

The majority of the language syntax is unimportant, but it is vaguely  
C-like in its language and comment style, with the only major  
difference is the use of a period (".") character within function  
names, as shown in this declaration of the "foo.32" function:

void foo.32( int a )
{
/*
   This is a multi-line comment
*/
   do.thing.32(a);   // Single-line comment, call to the "do.thing.32"  
function.
}

I have a templating mechanism that can be used to shorthand several  
similar methods - hopefully obvious in it's use:

template { SIZE=8,16,32,64 }
void foo.SIZE( int a )
{
  /*
    This is a multi-line comment
  */
   do.thing.SIZE(a);    // Single-line comment
}

The above template code is equivalent to defining four methods, "foo. 
8", "foo.16", "foo.32" and "foo.64", each one calling the appropriate  
"do.thing.*" method.

I currently implement this by parsing the source with ANTLR, and then  
manually walking the AST, performing a deep-copy on function  
declarations found within templates, substituting the symbols where  
appropriate.  I can then pass the AST to a StringTemplate  
implementation to produce something readable, but comments and  
formatting are lost.

However, since the template code can get rather complex (moreso than  
the example I've provided), I would like to provide the user with the  
option to view the "expanded" source code, complete with original  
comments and formatting.

The solution clearly lies somewhere in the realm of a "Rewriter", as  
described in the ANTLR book, but I'm unsure as to how much of my task  
I can automate, and how much I need to do by hand.

It seems that if the simple deep copy of the AST that I am performing  
would also preserve the hidden tokens (does it?), then I should just  
be able to feed to resulting expanded tree into a "null" rewriter, and  
that should produce the expanded test, comments and all - is that  
correct, or do I have to do something to ensure that the token stream  
is also deep copied?

My simple deep copy is just:

public static CommonTree deepCopy( CommonTree tree )
   {
     CommonTree res = (CommonTree)tree.dupNode();
     for ( int i = 0; i < tree.getChildCount(); i++ )
     {
       res.addChild( deepCopy( (CommonTree)tree.getChild(i) ) );
     }
     return res;
   }


Thanks,
Geraint North.

From antlr at mirality.co.nz  Tue Jun 10 13:47:07 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 11 Jun 2008 08:47:07 +1200
Subject: [antlr-interest] Dot Grammar conversion from antlr v2 to v3 -
 regd.
In-Reply-To: <7b0a1e4b0806100720x19e2e51bg1c1cb69126ea3a2e@mail.gmail.co
 m>
References: <7b0a1e4b0806100720x19e2e51bg1c1cb69126ea3a2e@mail.gmail.com>
Message-ID: <20080610204717.0E1B111EDC9@www.antlr.org>

At 02:20 11/06/2008, ASHOK REDDY wrote:
>ashok at ashok-laptop:~/parser/v2v3-0.2/v2v3$ java v3me -combined 
>./../../DotLexer.g

I'm not familiar with the migration program, but should you be 
passing "-combined" for a lexer-only grammar?

>line 52:13 mismatched character 'r' expecting '''

Best guess, it's the charVocabulary line.  It might be trying to 
parse that even though it's in a comment, and ANTLR 3 at least 
doesn't support that kind of escape (as far as I recall).  Try 
deleting that line entirely and see if that helps.

>LITERALS
>     :  (  (ph> GRAPH_LITERAL {$setType(GRAPH_LITERAL);}
>         | (raph> DIGRAPH_LITERAL {$setType(DIGRAPH_LITERAL);}
>         | (ict> STRICT_LITERAL {$setType(STRICT_LITERAL);}
>         | (e> NODE_LITERAL {$setType(NODE_LITERAL);}
>         | (e> EDGE_LITERAL {$setType(EDGE_LITERAL);}
>         | () => EDGEOP_LITERAL {$setType(EDGEOP_LITERAL);}
>         | () => EDGEOP_LITERAL {$setType(EDGEOP_LITERAL);}
>         | ('{') => O_BRACKET {$setType(O_BRACKET);}
>         | ('}') => C_BRACKET {$setType(C_BRACKET);}
>         | ('[') => O_SQR_BRACKET {$setType(O_SQR_BRACKET);}
>         | (']') => C_SQR_BRACKET {$setType(C_SQR_BRACKET);}
>         | (';') => SEMI_COLON {$setType(SEMI_COLON);}
>         | ('=') => EQUAL {$setType(EQUAL);}
>         | (',') => COMMA {$setType(COMMA);}
>         | (':') => COLON {$setType(COLON);}
>         | ID {$setType(ID);})
>     ;

Hopefully it's just the email munching those rules, because what's 
quoted above isn't valid predicate syntax.


From antlr at mirality.co.nz  Tue Jun 10 14:00:19 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 11 Jun 2008 09:00:19 +1200
Subject: [antlr-interest] Duplicating and modifying portions of the input
In-Reply-To: <91930969-CFA4-4B5B-B9DE-2CC18F566D8A@transitive.com>
References: <91930969-CFA4-4B5B-B9DE-2CC18F566D8A@transitive.com>
Message-ID: <20080610210031.25CE311ED95@www.antlr.org>

At 04:11 11/06/2008, Geraint North wrote:
 >It seems that if the simple deep copy of the AST that I am
 >performing would also preserve the hidden tokens (does it?),
 >then I should just be able to feed to resulting expanded tree
 >into a "null" rewriter, and that should produce the expanded
 >test, comments and all - is that correct, or do I have to do
 >something to ensure that the token stream is also deep copied?

Hidden tokens will usually not make it into the AST in the first 
place, so copying the tree won't help you there.

Each AST node carries with it an index into the input token 
stream; hidden tokens are still present in that stream, so when 
writing out the output you can examine adjacent indicies to see if 
they're hidden tokens that you want to output as well.  (You may 
need to look at more than one adjacent token, since you can have 
consecutive comments and there'll probably be whitespace tokens as 
well.)

Not sure if this is the best approach or not, but it ought to 
work.

Another option would be to un-hide the comments and explicitly add 
them to the AST, but that complicates writing parsing rules quite 
a lot, so it's probably not worth it.

And I think there is also a special 'rewrite' mode you can use, 
but I don't really know how that works, since I've never used it 
myself (but I think the "tweak" example grammar demonstrates this).


From open.zone at virgin.net  Tue Jun 10 16:08:22 2008
From: open.zone at virgin.net (Micheal J)
Date: Wed, 11 Jun 2008 00:08:22 +0100
Subject: [antlr-interest] Any more info on the 'Sun-tuned ANTLR v2' website
	link-share?
Message-ID: <001201c8cb4e$e1dd8d60$c404a8c0@marion>


Hi All,

Just saw this in the sharing section of the ANTLR website. Does anyone have
more info about this work by Sun (or is it the Netbeans project)?

Micheal

-----------------------
The best way to contact me is via the list/forum. My time is very limited. 


From jstpierre-antlr at mecheye.net  Tue Jun 10 16:25:08 2008
From: jstpierre-antlr at mecheye.net (ANTLR Mailing List)
Date: Tue, 10 Jun 2008 19:25:08 -0400
Subject: [antlr-interest] Questions: Scopes, Identifiers and more.
Message-ID: <4ff3ab470806101625t14d14c81u457f3cc24fec0da1@mail.gmail.com>

The Grammar I am referring to is attached BELOW (The attachment
scrubbed; attachment1.obj)

The reference compiler I am writing the grammar from is written in
ECMAScript and can be found here:
http://hg.mozilla.org/index.cgi/tamarin-central/file/6582fd7afc59/esc/src/
, most specifically,
http://hg.mozilla.org/index.cgi/tamarin-central/file/6582fd7afc59/esc/src/parse.es

Hello everyone, I am getting while compiling very confusing and the
source lines appear to be incorrect (1.):

[19:02:13] warning(200): Ecma.g:270:18: Decision can match input such
as "{UnsignedIntLiteral, IntLiteral, DecimalLiteral, StringLiteral,
True..LeftBrace, Var..Const, Function, Super..New, Let}" using
multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input

As I remember in previous ANTLRWorks versions, the rule at the source
line would be given additional DFAs to show the two paths that lead to
the token consumption. This is not happening here for some reason.

2. The reference compiler uses singly-linked-lists for its AST
abstraction. I would like to see why ANTLR chose to do the AST
abstraction it did

3. Both compilers need to keep track of block notion for doing code
generation (global, class instance, class static, function). The
reference compiler calls these Ribs and keeps track of them by another
singly-linked-list, which acts like a stack. Is there a way to do
something similar in ANTLR?

4. I need keep track of identifiers vs. keywords, as "else" and "if"
need to be seperated by whitespace, "else" can also be followed by a
right curly brace, "{", and "else5" is a keyword. Is there a way to do
this in ANTLR?

Thanks,
 JP St. Pierre
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Ecma.g
Type: application/octet-stream
Size: 30347 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080610/1f1ec37f/attachment-0001.obj 

From david.benn at astc-design.com  Tue Jun 10 20:27:29 2008
From: david.benn at astc-design.com (David Benn)
Date: Wed, 11 Jun 2008 12:57:29 +0930
Subject: [antlr-interest] [bug?] @after block vs end-of-rule block (C
	runtime)
Message-ID: <484F4621.2070501@astc-design.com>

In ANTLR 3.1b1 with the C runtime, in a tree grammar I have this:

st_def     
scope {
    STEntry* entry;
}
    :
      (type IDENT
      {
          $st_def::entry = symtab->CreateSTEntry($type.text->chars,
                $IDENT.text->chars);
      }

      st_spec?)
      {
          symtab->AddSTEntry($st_def::entry);
      }
    ;

which works fine. I would have thought that an @after block would also 
work in this case

st_def     
scope {
    STEntry* entry;
}
@after {
     symtab->AddSTEntry($st_def::entry);
}
    :
      (type IDENT
      {
          $st_def::entry = symtab->CreateSTEntry($type.text->chars,
                $IDENT.text->chars);
      }

      st_spec?)
    ;

but it doesn't. I get a seg fault under Linux.

Is this because the st_def scope has gone away by the time the @after 
block is called, or is this a bug in the C runtime?

Thanks.

Regards,

David

-- 
David Benn
Australian Semiconductor Technology Company (ASTC) Pty Ltd
76 Waymouth Street
Adelaide 5000, South Australia
ABN:   18 117 392 784
Tel:   +61 8 8231 2782
Mob:   +61 407 261163
Email: david.benn at astc-design.com
Web:   www.astc-design.com


From jimi at temporal-wave.com  Tue Jun 10 21:30:08 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 10 Jun 2008 21:30:08 -0700
Subject: [antlr-interest] [bug?] @after block vs end-of-rule block
	(C	runtime)
In-Reply-To: <484F4621.2070501@astc-design.com>
References: <484F4621.2070501@astc-design.com>
Message-ID: <1213158608.9028.268.camel@jimi>

On Wed, 2008-06-11 at 12:57 +0930, David Benn wrote:

> In ANTLR 3.1b1 with the C runtime, in a tree grammar I have this:
> 


You can't use @after in the C runtime, just do:

rule :
        ( X | Y |Z
        )
        {
            after code
        }

and you should get the same effect. I may decide to support @after (I
will review that tomorrow), but there are some issues to do with
exceptions and so on.

Ji

> st_def     
> scope {
>     STEntry* entry;
> }
>     :
>       (type IDENT
>       {
>           $st_def::entry = symtab->CreateSTEntry($type.text->chars,
>                 $IDENT.text->chars);
>       }
> 
>       st_spec?)
>       {
>           symtab->AddSTEntry($st_def::entry);
>       }
>     ;
> 
> which works fine. I would have thought that an @after block would also 
> work in this case
> 
> st_def     
> scope {
>     STEntry* entry;
> }
> @after {
>      symtab->AddSTEntry($st_def::entry);
> }
>     :
>       (type IDENT
>       {
>           $st_def::entry = symtab->CreateSTEntry($type.text->chars,
>                 $IDENT.text->chars);
>       }
> 
>       st_spec?)
>     ;
> 
> but it doesn't. I get a seg fault under Linux.
> 
> Is this because the st_def scope has gone away by the time the @after 
> block is called, or is this a bug in the C runtime?
> 
> Thanks.
> 
> Regards,
> 
> David
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080610/10b37f8e/attachment.html 

From George.Shannon at raphaelanalytics.com  Tue Jun 10 23:54:22 2008
From: George.Shannon at raphaelanalytics.com (George J. Shannon)
Date: Wed, 11 Jun 2008 01:54:22 -0500
Subject: [antlr-interest] Looking for quick help on compiling Antlr
Message-ID: <0B251BF811054D2F886DD50F54B198DF@raphael01>

I've been having a lot of pretty simple problems with getting the beta
version of 3.1 to compile a grammar.  I would appreciate it if anyone could
offer some suggestions.

When I execute java org.antlr.Tool I receive an error message for class not
found (org.antlr.stringtemplate.StringTemplateErrorListener)  The same
grammar worked fine in 3.0 but I have to migrate to 3.1 to generate a C
version of the grammar parser (3.1b per Jim Idle).

Anyway, I figure maybe something is broke somewhere between StringTemplate
and Antlr, so I take a shot in the dark and run ant build per installation
instructions.

But I get errors about duplicate classes (org.antlr.tool.ANTLRLexer,
org.antlr.tool.ANTLRParser, etc).  I checked class paths etc and everything
seems OK.

Well, OK I'll try another tack; I'll rebuild ANTLRworks to target 3.1b
instead of 3.0.  But a method in an ANTLR 3.0 class is no longer used in 3.1
so it bombs.

I'm basically stuck - and I'm in need of a quick answer so I can get my
prototype off center.

Has anyone else had similar problems?  If so, is there an easy fix?  It's
probably a pretty simple thing but I'm not seeing it outright.

By the way, I'm on XP SP3 with Java 1.6.

Thanks in advance,

Regards,

 

George Shannon

President, Raphael Analytics, Inc.

16 Spur Drive

Fenton, MO 63026

(314) 550-5589 (cell)

 <mailto:George.Shannon at raphaelanalytics.com>
George.Shannon at raphaelanalytics.com

 <http://www.raphaelanalytics.com> www.raphaelanalytics.com

 

The information transmitted is intended only for the person or entity to
which it is addressed and may contain confidential and/or privileged
material.  Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by persons or
entities other than the intended recipient is prohibited.   If you received
this in error, please contact the sender and delete the material from any
computer.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080611/d276ffb7/attachment.html 

From parrt at cs.usfca.edu  Wed Jun 11 00:07:41 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 11 Jun 2008 09:07:41 +0200
Subject: [antlr-interest] Any more info on the 'Sun-tuned ANTLR v2'
	website link-share?
In-Reply-To: <001201c8cb4e$e1dd8d60$c404a8c0@marion>
References: <001201c8cb4e$e1dd8d60$c404a8c0@marion>
Message-ID: <CBA7BABC-4A8A-4409-93DC-DD6E759637AD@cs.usfca.edu>

Sun worked hard for netbeans' C/C++ parser (written in ANTLR) to make  
it parse quickly.  They removed exceptions from backtracking and lots  
of other tricks I employed in v3.  They've done some nice work.   
Should be fully v2 compatible.

Ter

On Jun 11, 2008, at 1:08 AM, Micheal J wrote:

>
> Hi All,
>
> Just saw this in the sharing section of the ANTLR website. Does  
> anyone have
> more info about this work by Sun (or is it the Netbeans project)?
>
> Micheal
>
> -----------------------
> The best way to contact me is via the list/forum. My time is very  
> limited.
>


From parrt at cs.usfca.edu  Wed Jun 11 03:05:15 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 11 Jun 2008 12:05:15 +0200
Subject: [antlr-interest] StringTemplate 3.2 released
Message-ID: <B4A06396-5175-4B56-B091-F414E33C1E32@cs.usfca.edu>

http://www.antlr.org/wiki/display/ST/3.2+Release+Notes

http://www.stringtemplate.org/download.html

Ter

From egor at sun.com  Wed Jun 11 03:12:21 2008
From: egor at sun.com (Egor Ushakov)
Date: Wed, 11 Jun 2008 14:12:21 +0400
Subject: [antlr-interest] [Fwd: Re: Any more info on the 'Sun-tuned ANTLR
 v2' website link-share?]
Message-ID: <484FA505.40309@sun.com>

Michael,

Sun-tuned ANTLR v2 is used in C/C++ Netbeans pack for source parsing:
http://www.netbeans.org/features/cpp/index.html
We implemented several performance fixes in it to improve the 
performance of generated parser and lexer.
Our tests with C/C++ grammar shown ~x3 performance improvement.

Netbeans is fully opensource and so does Sun-tuned ANTLR and grammars.
We just asked Terence to put links on his website. (Thanks!)

Feel free to use it in your projects :)

Egor
Sun Microsystems

Micheal J wrote:
> Hi All,
>
> Just saw this in the sharing section of the ANTLR website. Does anyone have
> more info about this work by Sun (or is it the Netbeans project)?
>
> Micheal
>
> -----------------------
> The best way to contact me is via the list/forum. My time is very limited. 
>
>   




From francis.andre at easynet.fr  Wed Jun 11 06:42:53 2008
From: francis.andre at easynet.fr (Francis ANDRE)
Date: Wed, 11 Jun 2008 15:42:53 +0200
Subject: [antlr-interest] ANTLRv3IDE versus ANTLR Eclipse PLugin(Stanchfield
	)
Message-ID: <484FD65D.4000205@easynet.fr>

Hi

I am trying to use ANTLR v3 with the Eclipse plugin ANTLRv3IDE and Eclipse 
crashes with the traditional error SWT: No more handles just on the SimpleC 
example!!


Before, I was used to work with ANTLR 2.7.7 and the free ANTLR Eclipse plugin 
from Scott Stanchfield with a huge grammar but it is no more supported.


As I have a requirement to use Eclipse 3.3 that ANTLR DT does not support, there 
is no practical IDE for building an ANTLR v3 grammar (except ANTLRWork which is 
out of the scope)

So, I am wondering if anybody is willing to extend the Scott's ANTLR plugin to 
support Eclipse 3.3 and ANTLR v3??

FA


From brent.yates at gmail.com  Wed Jun 11 08:31:06 2008
From: brent.yates at gmail.com (Brent Yates)
Date: Wed, 11 Jun 2008 11:31:06 -0400
Subject: [antlr-interest] Looking for quick help on compiling Antlr
In-Reply-To: <0B251BF811054D2F886DD50F54B198DF@raphael01>
References: <0B251BF811054D2F886DD50F54B198DF@raphael01>
Message-ID: <6edc6c380806110831ra52f288r9cdaf52e52d728ae@mail.gmail.com>

George,

I am using the Antlr3.1b1 release with the C runtime (Windows XP) and it
works just fine so the problem is probably in your classpath / launch
procedure.  I use a batch file to compile my grammars.  Here is an example
that works for me:

@echo off
set
CLASSPATH=E:\UtilityDev\VerilogParser\AntlrWorks\antlr-3.1b1\lib\antlr-2.7.7.jar;E:\UtilityDev\VerilogParser\AntlrWorks\antlr-3.1b1\lib\antlr-3.1b1.jar;E:\UtilityDev\VerilogParser\AntlrWorks\antlr-3.1b1\lib\antlr-runtime-3.1b1.jar;E:\UtilityDev\VerilogParser\AntlrWorks\antlr-3.1b1\lib\gunit-1.0.2.jar;E:\UtilityDev\VerilogParser\AntlrWorks\antlr-3.1b1\lib\stringtemplate-3.1.jar
set cmd=java -Xmx750M org.antlr.Tool SystemVerilog.g
echo %cmd%
rem %cmd%
%cmd% 2>error.txt


My classpath environment variable is set in the batch file to point to each
of the necessary JAR files.

Hope this helps!

Regards,

Brent Yates
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080611/d236c14d/attachment-0001.html 

From andersen at ontologyworks.com  Wed Jun 11 08:51:51 2008
From: andersen at ontologyworks.com (Bill Andersen)
Date: Wed, 11 Jun 2008 11:51:51 -0400
Subject: [antlr-interest] Accumulation of return values (Java)
Message-ID: <FE3CA88A-B458-465E-895D-607403305DE3@ontologyworks.com>

Folks,

Say we have the following (AST) grammar snippet

text_block returns [Term result]
	: ^(TEXT name? phrase*)
		{ $result = new Term(TEXT, $name.result, XXX); }
	;

phrase returns [Term result]
	...

name returns [Term result]
	...

The question is, what ought to go in place of XXX in order to  
accumulate theTerm objects resulting from the recognition of  
individual 'phrase's into a list that can then be passed to the Term  
constructor?  I can't seem to find or figure out a syntax that works.   
Any help appreciated!

	.bill

Bill Andersen
Ontology Works, Inc. (www.ontologyworks.com)
3600 O'Donnell Street, Suite 600
Baltimore, MD 21224
Office: +1.410.675.1201
Cell: +1.443.858.6444
Fax: +1.410.675.1204





From thkarcher at gmx.de  Wed Jun 11 10:28:49 2008
From: thkarcher at gmx.de (Thomas Karcher)
Date: Wed, 11 Jun 2008 19:28:49 +0200
Subject: [antlr-interest] Accumulation of return values (Java)
In-Reply-To: <FE3CA88A-B458-465E-895D-607403305DE3@ontologyworks.com>
References: <FE3CA88A-B458-465E-895D-607403305DE3@ontologyworks.com>
Message-ID: <1213205329.5319.65.camel@localhost>

Hi,

> text_block returns [Term result]
> 	: ^(TEXT name? phrase*)
> 		{ $result = new Term(TEXT, $name.result, XXX); }
> 	;
> The question is, what ought to go in place of XXX in order to  
> accumulate theTerm objects resulting from the recognition of  
> individual 'phrase's into a list that can then be passed to the Term  
> constructor?  I can't seem to find or figure out a syntax that works.   

Did you try something like

?
text_block returns [Term result]
	: ^(TEXT name? phr+=phrase*)
		{ $result = new Term(TEXT, $name.result, $phr); }
	;

Then Term should have a "List" as last parameter type.


Thomas


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Dies ist ein digital signierter Nachrichtenteil
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080611/6933772a/attachment.bin 

From karthik.abram at gmail.com  Wed Jun 11 11:33:31 2008
From: karthik.abram at gmail.com (Karthik Abram)
Date: Wed, 11 Jun 2008 14:33:31 -0400
Subject: [antlr-interest] Bug in Antlr 3.0.1 - imaginary node constructors
Message-ID: <bb6622920806111133q310d0c3dud54f66ed8d1a542a@mail.gmail.com>

When creating an imaginary node with implicit constructor, if you such as:

n=PERSONAL -> ^(ANYNAME[$n, $n.text])


the resulting Parser.java file has an extra comma in the create method call:
root_1 = (Object)adaptor.becomeRoot(adaptor.create(ANYNAME, n,  ,
n.getText()), root_1);


The extra comma goes away if you don't put a space between $n and
$n.text. So this works:

n=PERSONAL -> ^(ANYNAME[$n,$n.text])

From brent.yates at gmail.com  Wed Jun 11 11:40:48 2008
From: brent.yates at gmail.com (Brent Yates)
Date: Wed, 11 Jun 2008 14:40:48 -0400
Subject: [antlr-interest] Looking for quick help on compiling Antlr
In-Reply-To: <6edc6c380806110831ra52f288r9cdaf52e52d728ae@mail.gmail.com>
References: <0B251BF811054D2F886DD50F54B198DF@raphael01>
	<6edc6c380806110831ra52f288r9cdaf52e52d728ae@mail.gmail.com>
Message-ID: <6edc6c380806111140j38f6491bvb28543288901bab8@mail.gmail.com>

George,

I have no embedded actions other than a few counters to resolve
ambiguities.  I use the C code to produce an AST which I then process using
C++ classes.  The C runtime is *very *quick to lex and parse into an AST.  I
convert the ANTLR generated AST into a C++ AST class and extract information
from it using class methods.  It works very well.

The advantage of this flow is that I can use gUnit to validate my grammar
and AST.  I HIGHLY recommend using gUnit (or equivalent) as it will find
errors that otherwise would go unnoticed until you are in the middle of some
critical demo/project.  gUnit will also help you produce efficient AST
structures as you will 'see' the tree produced from each rule as part of
setting up gUnit.  As you make changes to your grammar or the AST rewrite
rules gUnit will validate that you still produce the expected tree structure
- which is critical since your C++ AST class data extraction methods expect
a certain fixed structure and must be sync'ed to the actual AST produced.

Regards,

Brent Yates

On Wed, Jun 11, 2008 at 12:24 PM, George J. Shannon <
George.Shannon at raphaelanalytics.com> wrote:

>  Thanks Brent, that worked great!
>
>
>
> Are you using pure C or C++?  I'm using C++ classes embedded in my grammar
> due to the nature of the information I want to extract.  I haven't gotten
> this to work yet so I'm just seeing if you have tried and what worked, what
> did not, etc.
>
>
>
> Thanks again,
>
>
>
> George
>
>
>
> George Shannon
>
> President, Raphael Analytics, Inc.
>
> 16 Spur Drive
>
> Fenton, MO 63026
>
> (314) 550-5589 (cell)
>
> George.Shannon at raphaelanalytics.com
>
> www.raphaelanalytics.com
>
>
>
> The information transmitted is intended only for the person or entity to
> which it is addressed and may contain confidential and/or privileged
> material.  Any review, retransmission, dissemination or other use of, or
> taking of any action in reliance upon, this information by persons or
> entities other than the intended recipient is prohibited.   If you received
> this in error, please contact the sender and delete the material from any
> computer.
>   ------------------------------
>
> *From:* Brent Yates [mailto:brent.yates at gmail.com]
> *Sent:* Wednesday, June 11, 2008 10:31 AM
> *To:* George J. Shannon
> *Cc:* antlr-interest at antlr.org
> *Subject:* Re: [antlr-interest] Looking for quick help on compiling Antlr
>
>
>
> George,
>
> I am using the Antlr3.1b1 release with the C runtime (Windows XP) and it
> works just fine so the problem is probably in your classpath / launch
> procedure.  I use a batch file to compile my grammars.  Here is an example
> that works for me:
>
> @echo off
> set
> CLASSPATH=E:\UtilityDev\VerilogParser\AntlrWorks\antlr-3.1b1\lib\antlr-2.7.7.jar;E:\UtilityDev\VerilogParser\AntlrWorks\antlr-3.1b1\lib\antlr-3.1b1.jar;E:\UtilityDev\VerilogParser\AntlrWorks\antlr-3.1b1\lib\antlr-runtime-3.1b1.jar;E:\UtilityDev\VerilogParser\AntlrWorks\antlr-3.1b1\lib\gunit-1.0.2.jar;E:\UtilityDev\VerilogParser\AntlrWorks\antlr-3.1b1\lib\stringtemplate-3.1.jar
> set cmd=java -Xmx750M org.antlr.Tool SystemVerilog.g
> echo %cmd%
> rem %cmd%
> %cmd% 2>error.txt
>
>
> My classpath environment variable is set in the batch file to point to each
> of the necessary JAR files.
>
> Hope this helps!
>
> Regards,
>
> Brent Yates
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080611/5cd43407/attachment.html 

From kurama.youko.br at gmail.com  Wed Jun 11 11:53:31 2008
From: kurama.youko.br at gmail.com (Rafael C.P.)
Date: Wed, 11 Jun 2008 15:53:31 -0300
Subject: [antlr-interest] Error Handling in AntLR 3 (beginner)
Message-ID: <d278e3ad0806111153l2df5fd88p2f1050697d1c2929@mail.gmail.com>

Hi! I'm new to AntLR (and, to some extent, to Java as well) and I'd like to
know how to handle errors in AntLR 3. Just an example I'm using to test it:
program
    scope {
        Scope globalScope;
        Scope currentScope;
    }
    @init {
        $program::globalScope = new Scope();
        $program::currentScope = $program::globalScope;
        System.out.println("program start");
        throw new Exception("bla");
    }
    :    declf*
    ;

But I can't throw any exception here, because there isn't a "throws" header
in the method. The actual piece of code requiring it:
declf
    scope {
        FunctionSymbol currentFunction;
    }
    :    ftype IDF {
            if ($program::currentScope.lookup($IDF.text) == null) {
                $declf::currentFunction =
(FunctionSymbol)$program::currentScope.defineFunction($IDF.text,
$ftype.text);
            }
else throw new Exception("Duplicated Entry");


        } args end_declf
    ;

Thanks in advance!

=========
Rafael C.P.
=========
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080611/324cc2ed/attachment.html 

From open.zone at virgin.net  Wed Jun 11 12:06:39 2008
From: open.zone at virgin.net (Micheal J)
Date: Wed, 11 Jun 2008 20:06:39 +0100
Subject: [antlr-interest] Looking for quick help on compiling Antlr
In-Reply-To: <6edc6c380806111140j38f6491bvb28543288901bab8@mail.gmail.com>
References: <0B251BF811054D2F886DD50F54B198DF@raphael01><6edc6c380806110831ra52f288r9cdaf52e52d728ae@mail.gmail.com>
	<6edc6c380806111140j38f6491bvb28543288901bab8@mail.gmail.com>
Message-ID: <000901c8cbf6$48d28a50$c404a8c0@marion>

Hi,
 
You mentioned using gUnit and the C target. Isn't gUnit a Java-target-only
grammar test tool?
 
Micheal


  _____  

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Brent Yates
Sent: 11 June 2008 19:41
To: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Looking for quick help on compiling Antlr


George,

I have no embedded actions other than a few counters to resolve ambiguities.
I use the C code to produce an AST which I then process using C++ classes.
The C runtime is very quick to lex and parse into an AST.  I convert the
ANTLR generated AST into a C++ AST class and extract information from it
using class methods.  It works very well.

The advantage of this flow is that I can use gUnit to validate my grammar
and AST.  I HIGHLY recommend using gUnit (or equivalent) as it will find
errors that otherwise would go unnoticed until you are in the middle of some
critical demo/project.  gUnit will also help you produce efficient AST
structures as you will 'see' the tree produced from each rule as part of
setting up gUnit.  As you make changes to your grammar or the AST rewrite
rules gUnit will validate that you still produce the expected tree structure
- which is critical since your C++ AST class data extraction methods expect
a certain fixed structure and must be sync'ed to the actual AST produced.

Regards,

Brent Yates


On Wed, Jun 11, 2008 at 12:24 PM, George J. Shannon
<George.Shannon at raphaelanalytics.com> wrote:


Thanks Brent, that worked great!

 

Are you using pure C or C++?  I'm using C++ classes embedded in my grammar
due to the nature of the information I want to extract.  I haven't gotten
this to work yet so I'm just seeing if you have tried and what worked, what
did not, etc.

 

Thanks again,

 

George

 

George Shannon

President, Raphael Analytics, Inc.

16 Spur Drive

Fenton, MO 63026

(314) 550-5589 (cell)

 <mailto:George.Shannon at raphaelanalytics.com>
George.Shannon at raphaelanalytics.com

 <http://www.raphaelanalytics.com/> www.raphaelanalytics.com

 

The information transmitted is intended only for the person or entity to
which it is addressed and may contain confidential and/or privileged
material.  Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by persons or
entities other than the intended recipient is prohibited.   If you received
this in error, please contact the sender and delete the material from any
computer.


  _____  


From: Brent Yates [mailto:brent.yates at gmail.com] 
Sent: Wednesday, June 11, 2008 10:31 AM
To: George J. Shannon
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Looking for quick help on compiling Antlr

 

George,

I am using the Antlr3.1b1 release with the C runtime (Windows XP) and it
works just fine so the problem is probably in your classpath / launch
procedure.  I use a batch file to compile my grammars.  Here is an example
that works for me:

@echo off
set
CLASSPATH=E:\UtilityDev\VerilogParser\AntlrWorks\antlr-3.1b1\lib\antlr-2.7.7
.jar;E:\UtilityDev\VerilogParser\AntlrWorks\antlr-3.1b1\lib\antlr-3.1b1.jar;
E:\UtilityDev\VerilogParser\AntlrWorks\antlr-3.1b1\lib\antlr-runtime-3.1b1.j
ar;E:\UtilityDev\VerilogParser\AntlrWorks\antlr-3.1b1\lib\gunit-1.0.2.jar;E:
\UtilityDev\VerilogParser\AntlrWorks\antlr-3.1b1\lib\stringtemplate-3.1.jar
set cmd=java -Xmx750M org.antlr.Tool SystemVerilog.g
echo %cmd%
rem %cmd%
%cmd% 2>error.txt


My classpath environment variable is set in the batch file to point to each
of the necessary JAR files.

Hope this helps!

Regards,

Brent Yates




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080611/f02ff354/attachment.html 

From brent.yates at gmail.com  Wed Jun 11 12:12:57 2008
From: brent.yates at gmail.com (Brent Yates)
Date: Wed, 11 Jun 2008 15:12:57 -0400
Subject: [antlr-interest] Looking for quick help on compiling Antlr
In-Reply-To: <000901c8cbf6$48d28a50$c404a8c0@marion>
References: <0B251BF811054D2F886DD50F54B198DF@raphael01>
	<6edc6c380806110831ra52f288r9cdaf52e52d728ae@mail.gmail.com>
	<6edc6c380806111140j38f6491bvb28543288901bab8@mail.gmail.com>
	<000901c8cbf6$48d28a50$c404a8c0@marion>
Message-ID: <6edc6c380806111212h47990b6aq4590273857d153a8@mail.gmail.com>

On Wed, Jun 11, 2008 at 3:06 PM, Micheal J <open.zone at virgin.net> wrote:

>  Hi,
>
> You mentioned using gUnit and the C target. Isn't gUnit a Java-target-only
> grammar test tool?
>
> Micheal
>

It is.  Since I don't have any embedded actions (at least none that won't
compile in both C and Java - intentionally) all I have to do is change the
grammar file header to make a version that will compile in Java.  I do all
the unit tests using the Java version.  It's not perfect as it won't catch
issues with the C runtime, but so far it has worked well for me.

Brent Yates
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080611/f67c2a8d/attachment.html 

From JALuber at gmx.de  Wed Jun 11 13:02:27 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 11 Jun 2008 22:02:27 +0200
Subject: [antlr-interest] Bug in Antlr 3.0.1 - imaginary node
	constructors
In-Reply-To: <bb6622920806111133q310d0c3dud54f66ed8d1a542a@mail.gmail.com>
References: <bb6622920806111133q310d0c3dud54f66ed8d1a542a@mail.gmail.com>
Message-ID: <20080611200227.320280@gmx.net>

> When creating an imaginary node with implicit constructor, if you such as:
> 
> n=PERSONAL -> ^(ANYNAME[$n, $n.text])
> 
> 
> the resulting Parser.java file has an extra comma in the create method
> call:
> root_1 = (Object)adaptor.becomeRoot(adaptor.create(ANYNAME, n,  ,
> n.getText()), root_1);
> 
> 
> The extra comma goes away if you don't put a space between $n and
> $n.text. So this works:
> 
> n=PERSONAL -> ^(ANYNAME[$n,$n.text])

I'm pretty sure that the newest beta contains a fix for this.

Johannes
-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx

From florent.teichteil at gmail.com  Wed Jun 11 13:23:08 2008
From: florent.teichteil at gmail.com (Florent Teichteil)
Date: Wed, 11 Jun 2008 16:23:08 -0400
Subject: [antlr-interest] [C target] mutiple inclusion of header files
	generated by the parser fails
Message-ID: <43c48b360806111323m15811a35u4a7febc661e5f939@mail.gmail.com>

Multiple inclusion of header files generated by the parser creates
compilation errors due to an inversion in the order of #endif pragmas.

At the end of 'langLexer.h' and 'langParser.h', the following lines:


#endif

#ifdef __cplusplus
}
#endif

/* END - Note:Keep extra line feed to satisfy UNIX systems */


should be replaced by:


#ifdef __cplusplus
}
#endif

#endif

/* END - Note:Keep extra line feed to satisfy UNIX systems */


Otherwise, the C++ compiler complains with the bracket '}'. The error
is obvious because the #ifdef pragmas are defined in the inverse oder
at the beginning of these two files.

Best,
Florent

From jimi at temporal-wave.com  Wed Jun 11 13:40:15 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 11 Jun 2008 13:40:15 -0700
Subject: [antlr-interest] [C target] mutiple inclusion of header
	files	generated by the parser fails
In-Reply-To: <43c48b360806111323m15811a35u4a7febc661e5f939@mail.gmail.com>
References: <43c48b360806111323m15811a35u4a7febc661e5f939@mail.gmail.com>
Message-ID: <1213216815.19308.9.camel@jimi>

On Wed, 2008-06-11 at 16:23 -0400, Florent Teichteil wrote:

> Multiple inclusion of header files generated by the parser creates
> compilation errors due to an inversion in the order of #endif pragmas.
> 
> At the end of 'langLexer.h' and 'langParser.h', the following lines:
> 
> 
> #endif
> 
> #ifdef __cplusplus
> }
> #endif
> 
> /* END - Note:Keep extra line feed to satisfy UNIX systems */
> 
> 
> should be replaced by:
> 
> 
> #ifdef __cplusplus
> }
> #endif
> 
> #endif
> 
> /* END - Note:Keep extra line feed to satisfy UNIX systems */
> 
> 
> Otherwise, the C++ compiler complains with the bracket '}'. The error
> is obvious because the #ifdef pragmas are defined in the inverse oder
> at the beginning of these two files.


Cheers, i wil lfix that, though I am not sure why my own C+++ test is
working :-)

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080611/fa062bf5/attachment-0001.html 

From George.Shannon at raphaelanalytics.com  Wed Jun 11 15:07:55 2008
From: George.Shannon at raphaelanalytics.com (George J. Shannon)
Date: Wed, 11 Jun 2008 17:07:55 -0500
Subject: [antlr-interest] [C target] mutiple inclusion of
	headerfiles	generated by the parser fails
In-Reply-To: <1213216815.19308.9.camel@jimi>
References: <43c48b360806111323m15811a35u4a7febc661e5f939@mail.gmail.com>
	<1213216815.19308.9.camel@jimi>
Message-ID: <9145292C4DE44E3C84FD891BEA62DD4E@raphael01>

Jim: 

 

FYI - I've had a similar experience in that both versions compile fine.

 

Is there a particular requirement for setting up MSVC 2005 to work with the
library?  I've had success when using the library within another library but
not an executable.

 

I created a dll library for my parser using VS 2005 and compiled the
C-generated files (xyzLexer.c and xyzParser.c) as C++ with no compiler
errors or warnings.  There were no compiler errors or warnings per Florent's
note in either case (having the pragmas in the correct or reverse order made
no difference).

 

I consume the parser dll in our main C++ project executable; both are native
C++.

 

However, I have been receiving the following errors for antlr3lexer.h line
101 when using ANTLR functions from the main executable project:

 

error C2059: syntax error : '<L_TYPE_raw>'     c:\Documents and
Settings\RAI\My Documents\Visual Studio
2005\Projects\ControlDiagnosticsToolkit\ControlsLanguageParser\antlr\include
\antlr3lexer.h       101       

 

error C2238: unexpected token(s) preceding ';'      c:\Documents and
Settings\RAI\My Documents\Visual Studio
2005\Projects\ControlDiagnosticsToolkit\ControlsLanguageParser\antlr\include
\antlr3lexer.h       101       

 

To see if there is something related to project templates for a library
versus an executable in MSVS, I stripped out all code in the main executable
program that makes use of the ANTLR C libraries and moved this to my parser
dll.  Both projects now compile OK with no warnings.

 

I also verified that both projects have identical properties with one
exception - the parser dll project inherited _WINDLL preprocessor definition
since it is a lib project.

 

I don't know if this is related but thought I would pass it along if it is
helpful in some way, or maybe a cure for insomnia.

 

Regards,

 

George Shannon

President, Raphael Analytics, Inc.

16 Spur Drive

Fenton, MO 63026

(314) 550-5589 (cell)

 <mailto:George.Shannon at raphaelanalytics.com>
George.Shannon at raphaelanalytics.com

 <http://www.raphaelanalytics.com> www.raphaelanalytics.com

 

The information transmitted is intended only for the person or entity to
which it is addressed and may contain confidential and/or privileged
material.  Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by persons or
entities other than the intended recipient is prohibited.   If you received
this in error, please contact the sender and delete the material from any
computer.

  _____  

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: Wednesday, June 11, 2008 3:40 PM
To: florent.teichteil at gmail.com
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] [C target] mutiple inclusion of headerfiles
generated by the parser fails

 

On Wed, 2008-06-11 at 16:23 -0400, Florent Teichteil wrote: 

 
Multiple inclusion of header files generated by the parser creates
compilation errors due to an inversion in the order of #endif pragmas.
 
At the end of 'langLexer.h' and 'langParser.h', the following lines:
 
 
#endif
 
#ifdef __cplusplus
}
#endif
 
/* END - Note:Keep extra line feed to satisfy UNIX systems */
 
 
should be replaced by:
 
 
#ifdef __cplusplus
}
#endif
 
#endif
 
/* END - Note:Keep extra line feed to satisfy UNIX systems */
 
 
Otherwise, the C++ compiler complains with the bracket '}'. The error
is obvious because the #ifdef pragmas are defined in the inverse oder
at the beginning of these two files.


Cheers, i wil lfix that, though I am not sure why my own C+++ test is
working :-)

Jim 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080611/0b3c76be/attachment.html 

From ld at galador.net  Thu Jun 12 02:20:47 2008
From: ld at galador.net (Lloyd Dupont)
Date: Thu, 12 Jun 2008 18:50:47 +0930
Subject: [antlr-interest] How to use multiple lexer?
Message-ID: <F63A5FBD9E994062BB6A148B3BA14DDB@LloydPC>

I'm following an RFC with a terrible grammar, token are very inconsistent. Apparently I need to change my lexer from line to line to be able to cope with the protocol implementation.

I remember there was such a thing..

How do I use multiple lexer and change them on the fly?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080612/48e9a788/attachment.html 

From geraint at transitive.com  Thu Jun 12 04:41:27 2008
From: geraint at transitive.com (Geraint North)
Date: Thu, 12 Jun 2008 12:41:27 +0100
Subject: [antlr-interest] Duplicating and modifying portions of the input
In-Reply-To: <20080610205832.1F2C9140DC@mx.transitive.com>
References: <91930969-CFA4-4B5B-B9DE-2CC18F566D8A@transitive.com>
	<20080610205832.1F2C9140DC@mx.transitive.com>
Message-ID: <534D7F80-4A17-48C3-8B0D-4A97FE05378B@transitive.com>

Thanks for the suggestion - I've now got something that works well.

What I've done, as I've traversed the AST of the template declaration  
to replace the template parameters with an actual value, is to build  
up a map of "don't print that token, print this CommonTree instead".   
When I want to print out the "instantiated" template, I can iterate  
over the Token Stream from getTokenStartIndex() to  
getTokenStopIndex(), printing out each Token, unless it appears in my  
map, in which case I print out the tokens from the  
getTokenStartIndex() to the getTokenStopIndex() of the tree that the  
placeholder was replaced with.

This has precisely the effect that I was after - printing out the  
template verbatim, with all whitespace and comments preserved but with  
the substitutions made.

Thanks,
Geraint.

On 10 Jun 2008, at 22:00, Gavin Lambert wrote:

> At 04:11 11/06/2008, Geraint North wrote:
> >It seems that if the simple deep copy of the AST that I am
> >performing would also preserve the hidden tokens (does it?),
> >then I should just be able to feed to resulting expanded tree
> >into a "null" rewriter, and that should produce the expanded
> >test, comments and all - is that correct, or do I have to do
> >something to ensure that the token stream is also deep copied?
>
> Hidden tokens will usually not make it into the AST in the first  
> place, so copying the tree won't help you there.
>
> Each AST node carries with it an index into the input token stream;  
> hidden tokens are still present in that stream, so when writing out  
> the output you can examine adjacent indicies to see if they're  
> hidden tokens that you want to output as well.  (You may need to  
> look at more than one adjacent token, since you can have consecutive  
> comments and there'll probably be whitespace tokens as well.)
>
> Not sure if this is the best approach or not, but it ought to work.
>
> Another option would be to un-hide the comments and explicitly add  
> them to the AST, but that complicates writing parsing rules quite a  
> lot, so it's probably not worth it.
>
> And I think there is also a special 'rewrite' mode you can use, but  
> I don't really know how that works, since I've never used it myself  
> (but I think the "tweak" example grammar demonstrates this).
>


From rbernardoteixeira at uol.com.br  Thu Jun 12 07:21:24 2008
From: rbernardoteixeira at uol.com.br (Rafael Bernardo Teixeira)
Date: Thu, 12 Jun 2008 11:21:24 -0300
Subject: [antlr-interest] Bug in AntlrWorks1.2b4
In-Reply-To: <mailman.29385.1213270894.2668.antlr-interest@antlr.org>
References: <mailman.29385.1213270894.2668.antlr-interest@antlr.org>
Message-ID: <485130E4.8040104@uol.com.br>

Hi,

I'm using Antlr and AntlrWorks to teach compilers at State University of 
Rio de Janeiro, in Brazil. You have a very nice tool, thanks.

I constructed an Antlr grammar that generates an intermediated code for 
a single language, and I use the Antlrworks debugger to show the parser 
tree.
But I found that since the 1.2b2 version, all non-terminals captions in 
the tree show the whole path of my grammar file, instead of the rule name.

Thanks
Rafael B. Teixeira

From Waverly.Edwards at genesys.com  Thu Jun 12 08:25:16 2008
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Thu, 12 Jun 2008 11:25:16 -0400
Subject: [antlr-interest] multi-core usage
Message-ID: <FF993752CB890B4EB591BE5450C37BF10125A76D@navamane001.ad.internal.corp>


I have curiosity question.  Can ANTLR take advantage of multi-core
processors.
The only place where I can think it would be possible would be in the
lexer where
you might be able to apply one file per core to be tokenized.  Has
anyone tried?
Again, just curious.


W. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080612/5418b16c/attachment.html 

From lgcraymer at yahoo.com  Thu Jun 12 09:57:28 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Thu, 12 Jun 2008 09:57:28 -0700 (PDT)
Subject: [antlr-interest] multi-core usage
Message-ID: <979.94693.qm@web55905.mail.re3.yahoo.com>

Language processing tends to be single threaded--token sequence matters--and ANTLR generates single thread recognizers.  To take advantage of a multicore/multithread environment, the usual approach (excluding server apps) would be to use the recognizer as a task dispatcher that spawns threads according to recognized (from the token stream) semantics.  There are server applications where multiple recognizers are spawned, one per connection.

--Loring


----- Original Message ----
From: "Edwards, Waverly" <Waverly.Edwards at genesys.com>
To: antlr-interest at antlr.org
Sent: Thursday, June 12, 2008 8:25:16 AM
Subject: [antlr-interest] multi-core usage

multi-core usage 

I have curiosity question.  Can ANTLR take advantage of multi-core processors. 
The only place where I can think it would be possible would be in the lexer where 
you might be able to apply one file per core to be tokenized.  Has anyone tried? 
Again, just curious. 

W.  

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080612/d12c482b/attachment.html 

From antlr at mirality.co.nz  Thu Jun 12 14:10:34 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 13 Jun 2008 09:10:34 +1200
Subject: [antlr-interest] multi-core usage
In-Reply-To: <979.94693.qm@web55905.mail.re3.yahoo.com>
References: <979.94693.qm@web55905.mail.re3.yahoo.com>
Message-ID: <20080612211047.76C0F11ED2B@www.antlr.org>

At 04:57 13/06/2008, Loring Craymer wrote:
>Language processing tends to be single threaded--token sequence 
>matters--and ANTLR generates single thread recognizers.  To take 
>advantage of a multicore/multithread environment, the usual 
>approach (excluding server apps) would be to use the recognizer 
>as a task dispatcher that spawns threads according to recognized 
>(from the token stream) semantics.  There are server applications 
>where multiple recognizers are spawned, one per connection.

Another way to use multiple cores (if you're parsing multiple 
files) would be to create one worker thread per core and have each 
of them run a single-threaded parse on a single file.  Set it up 
so there's a queue of files to be processed and whichever thread 
finishes first pulls off the next file from the queue, so you 
don't get duplication.

This is a much simpler setup to pull off, but it's only really 
useful if you've got a lot of files to process, and they're all 
mostly independent.


From antlr at jazillian.com  Thu Jun 12 14:50:14 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Thu, 12 Jun 2008 17:50:14 -0400
Subject: [antlr-interest] multi-core usage
In-Reply-To: <FF993752CB890B4EB591BE5450C37BF10125A76D@navamane001.ad.internal.corp>
References: <FF993752CB890B4EB591BE5450C37BF10125A76D@navamane001.ad.internal.corp>
Message-ID: <48519A16.2000102@jazillian.com>

I have a mechanism where I spawn multiple threads to parse multiple files.
It speeds things up quite a bit, mostly because doing it single-threaded is
I/O bound. With the multiple threads, file reading and parsing can happen
in parallel.

As for multiple cores, I don't know how much multithreading will help.
>From what I've read, it's not easy to get Java to utilize multiple CPUs.
I would think you'd have to have incredibly huge input for ANTLR to use
a lot of CPU to parse it. Anyway, it's pretty easy to try out multithreading
in Java, so just try it and see what happens.



Edwards, Waverly wrote:
> 
> I have curiosity question.  Can ANTLR take advantage of multi-core 
> processors.
> The only place where I can think it would be possible would be in the 
> lexer where
> you might be able to apply one file per core to be tokenized.  Has 
> anyone tried?
> Again, just curious.
> 
> 
> W.
> 


From sharwell at pixelminegames.com  Thu Jun 12 15:05:59 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Thu, 12 Jun 2008 17:05:59 -0500
Subject: [antlr-interest] multi-core usage
In-Reply-To: <48519A16.2000102@jazillian.com>
References: <FF993752CB890B4EB591BE5450C37BF10125A76D@navamane001.ad.internal.corp>
	<48519A16.2000102@jazillian.com>
Message-ID: <86403CA0939415448BCCB83855EFE09A4FB5C0@Bloodymary.ironwillgames.com>

I'm using a combined grammar with AST output paired with a tree walker
grammar on the CSharp2 target. I spawn 5 threads on a quad-core box and
the parse uses about 65% of the overall processor power while it parses
~2500 files in ~5 seconds.

Breaking the parse into multiple threads provided about a 3:1 speed
increase. Multi-threaded parsing isn't the difficult part; it's
combining the results from the individual threads into one place that
can cause problems if you aren't careful.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Andy Tripp
Sent: Thursday, June 12, 2008 4:50 PM
To: Edwards, Waverly
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] multi-core usage

I have a mechanism where I spawn multiple threads to parse multiple
files.
It speeds things up quite a bit, mostly because doing it single-threaded
is
I/O bound. With the multiple threads, file reading and parsing can
happen
in parallel.

As for multiple cores, I don't know how much multithreading will help.
>From what I've read, it's not easy to get Java to utilize multiple
CPUs.
I would think you'd have to have incredibly huge input for ANTLR to use
a lot of CPU to parse it. Anyway, it's pretty easy to try out
multithreading
in Java, so just try it and see what happens.



Edwards, Waverly wrote:
> 
> I have curiosity question.  Can ANTLR take advantage of multi-core 
> processors.
> The only place where I can think it would be possible would be in the 
> lexer where
> you might be able to apply one file per core to be tokenized.  Has 
> anyone tried?
> Again, just curious.
> 
> 
> W.
> 


From antlr-list at arizona-software.ch  Thu Jun 12 21:32:49 2008
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Thu, 12 Jun 2008 21:32:49 -0700
Subject: [antlr-interest] Bug in AntlrWorks1.2b4
In-Reply-To: <485130E4.8040104@uol.com.br>
References: <mailman.29385.1213270894.2668.antlr-interest@antlr.org>
	<485130E4.8040104@uol.com.br>
Message-ID: <DDAB4AA8-CF07-407E-8A9A-D55BE8EA74A5@arizona-software.ch>

Hi,

Could you send me a screenshot and/or the grammar that you are using?  
I can then take a look at the issue.

Thanks,

Jean

On Jun 12, 2008, at 7:21 AM, Rafael Bernardo Teixeira wrote:

> Hi,
>
> I'm using Antlr and AntlrWorks to teach compilers at State  
> University of Rio de Janeiro, in Brazil. You have a very nice tool,  
> thanks.
>
> I constructed an Antlr grammar that generates an intermediated code  
> for a single language, and I use the Antlrworks debugger to show the  
> parser tree.
> But I found that since the 1.2b2 version, all non-terminals captions  
> in the tree show the whole path of my grammar file, instead of the  
> rule name.
>
> Thanks
> Rafael B. Teixeira


From belayda at gmail.com  Fri Jun 13 00:58:21 2008
From: belayda at gmail.com (Bernardo Elayda)
Date: Fri, 13 Jun 2008 00:58:21 -0700
Subject: [antlr-interest] unexpected token when AST rewrite is used
Message-ID: <3e5ed32f0806130058p77af6974gd0ec0d971c17f503@mail.gmail.com>

Hi,
Why does Antlr 3.0.1 complain that a token is unexpected for the rule called
B which has a single argument:

a : b[0]+ -> ^(MYPROGRAM b[0]+)
   ;

I can only get Antlr to accept the above rule if I do this:

a : b[0] -> ^(MYPROGRAM b+)

Are rules with arguments not allowed as child nodes in an Antlr AST?

tia,
Bernardo Elayda
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080613/37313757/attachment.html 

From parrt at cs.usfca.edu  Fri Jun 13 01:06:57 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 13 Jun 2008 10:06:57 +0200
Subject: [antlr-interest] unexpected token when AST rewrite is used
In-Reply-To: <3e5ed32f0806130058p77af6974gd0ec0d971c17f503@mail.gmail.com>
References: <3e5ed32f0806130058p77af6974gd0ec0d971c17f503@mail.gmail.com>
Message-ID: <1F52A924-313A-4911-8094-B7A5A694DD05@cs.usfca.edu>

I'd suggest trying 3.1b1.
Ter
On Jun 13, 2008, at 9:58 AM, Bernardo Elayda wrote:

> Hi,
> Why does Antlr 3.0.1 complain that a token is unexpected for the  
> rule called B which has a single argument:
>
> a : b[0]+ -> ^(MYPROGRAM b[0]+)
>    ;
>
> I can only get Antlr to accept the above rule if I do this:
>
> a : b[0] -> ^(MYPROGRAM b+)
>
> Are rules with arguments not allowed as child nodes in an Antlr AST?
>
> tia,
> Bernardo Elayda
>


From atlan at gmx.li  Fri Jun 13 01:44:19 2008
From: atlan at gmx.li (Marc Bischof)
Date: Fri, 13 Jun 2008 10:44:19 +0200
Subject: [antlr-interest] can't find template when using gunit with tree
	walking
Message-ID: <200806131044.19843.atlan@gmx.li>

Hej,

I've a problem using gunit with tree walking.

Here is the tree walker rule which calls a template. (Grammar and TreeWalker 
are working fine, I'am trying to use gunit with it)

program  
	:	^(ROOT decls+=declaration+) 
	-> 	list(content_st={$decls})   //template call
	;

When I try to test this with the following gunit testsuite I get an error 
which can't find the template. But I don't understand why. Do you know 
anything about that? Is there a possibility to pass the .stg file to gunit?


gunit Walker walks Grammar;

program walks program:
"namespace lns = \"blub\";" -> ""	//test1


And here is the Error:

java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.antlr.gunit.gUnitExecuter.runTreeParser(gUnitExecuter.java:392)
        at 
org.antlr.gunit.gUnitExecuter.runCorrectParser(gUnitExecuter.java:133)
        at org.antlr.gunit.gUnitExecuter.executeTests(gUnitExecuter.java:149)
        at org.antlr.gunit.gUnitExecuter.execTest(gUnitExecuter.java:92)
        at org.antlr.gunit.Interp.main(Interp.java:62)
Caused by: java.lang.IllegalArgumentException: Can't find template list.st
        at 
org.antlr.stringtemplate.StringTemplateGroup.lookupTemplate(StringTemplateGroup.java:485)
        at 
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:372)
        at 
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:384)
        at 
org.antlr.stringtemplate.StringTemplateGroup.getInstanceOf(StringTemplateGroup.java:392)
        at 
org.apache.ode.simpel.antlr.SimPELWalker.program(SimPELWalker.java:259)


Cheers 
    Marc Bischof

From Waverly.Edwards at genesys.com  Fri Jun 13 08:41:27 2008
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Fri, 13 Jun 2008 11:41:27 -0400
Subject: [antlr-interest] multi-core usage
In-Reply-To: <86403CA0939415448BCCB83855EFE09A4FB5C0@Bloodymary.ironwillgames.com>
References: <FF993752CB890B4EB591BE5450C37BF10125A76D@navamane001.ad.internal.corp>
	<48519A16.2000102@jazillian.com>
	<86403CA0939415448BCCB83855EFE09A4FB5C0@Bloodymary.ironwillgames.com>
Message-ID: <FF993752CB890B4EB591BE5450C37BF10125A864@navamane001.ad.internal.corp>

 
Thanks all for your insights.  It was very interesting.


W.

-----Original Message-----
From: Sam Harwell [mailto:sharwell at pixelminegames.com] 
Sent: Thursday, June 12, 2008 6:06 PM
To: Andy Tripp; Edwards, Waverly
Cc: antlr-interest at antlr.org
Subject: RE: [antlr-interest] multi-core usage

I'm using a combined grammar with AST output paired with a tree walker
grammar on the CSharp2 target. I spawn 5 threads on a quad-core box and
the parse uses about 65% of the overall processor power while it parses
~2500 files in ~5 seconds.

Breaking the parse into multiple threads provided about a 3:1 speed
increase. Multi-threaded parsing isn't the difficult part; it's
combining the results from the individual threads into one place that
can cause problems if you aren't careful.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Andy Tripp
Sent: Thursday, June 12, 2008 4:50 PM
To: Edwards, Waverly
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] multi-core usage

I have a mechanism where I spawn multiple threads to parse multiple
files.
It speeds things up quite a bit, mostly because doing it single-threaded
is I/O bound. With the multiple threads, file reading and parsing can
happen in parallel.

As for multiple cores, I don't know how much multithreading will help.
>From what I've read, it's not easy to get Java to utilize multiple
CPUs.
I would think you'd have to have incredibly huge input for ANTLR to use
a lot of CPU to parse it. Anyway, it's pretty easy to try out
multithreading in Java, so just try it and see what happens.



Edwards, Waverly wrote:
> 
> I have curiosity question.  Can ANTLR take advantage of multi-core 
> processors.
> The only place where I can think it would be possible would be in the 
> lexer where you might be able to apply one file per core to be 
> tokenized.  Has anyone tried?
> Again, just curious.
> 
> 
> W.
> 


From iank at bearcave.com  Fri Jun 13 11:05:45 2008
From: iank at bearcave.com (Ian Kaplan)
Date: Fri, 13 Jun 2008 11:05:45 -0700
Subject: [antlr-interest] multi-core usage and pipeline processing
Message-ID: <7f8924df0806131105t546ba5a7ufa708a79637cf561@mail.gmail.com>

  As has already been noted, the common use of multicores or multiple
systems is parallel make (or ant or maven or what ever).  Multiple files can
be compiled in multiple threads of control.  This makes compilation
parallelizable to the number of files.

  It should also be possible to make use of pipeline parallelism.  As far as
I know, no one has done this because compiling is not generally something
that people are willing to put a lot of effort into speeding up beyond
parallel make.  But it should be possible to create a pipeline that
processes multiple files on a shared memory multi-core.  One state could do
parse and AST construction.  Another state could do control flow/data flow
construction and optimizatoin and another state could do code generation and
target dependent optimization.

  The obvious argument against this is that compilers are already complex
enough without making them into multi-process applications.  This would
probably only be justified for something like logic synthesis compilers that
are generating large net lists (and then you can't store things in memory).

  In summary, at least pipeline parallelism is possible, but it would
probably be a bad idea.

  Ian


On Fri, Jun 13, 2008 at 8:41 AM, Edwards, Waverly <
Waverly.Edwards at genesys.com> wrote:

>
> Thanks all for your insights.  It was very interesting.
>
>
> W.
>
> -----Original Message-----
> From: Sam Harwell [mailto:sharwell at pixelminegames.com]
> Sent: Thursday, June 12, 2008 6:06 PM
> To: Andy Tripp; Edwards, Waverly
> Cc: antlr-interest at antlr.org
> Subject: RE: [antlr-interest] multi-core usage
>
> I'm using a combined grammar with AST output paired with a tree walker
> grammar on the CSharp2 target. I spawn 5 threads on a quad-core box and
> the parse uses about 65% of the overall processor power while it parses
> ~2500 files in ~5 seconds.
>
> Breaking the parse into multiple threads provided about a 3:1 speed
> increase. Multi-threaded parsing isn't the difficult part; it's
> combining the results from the individual threads into one place that
> can cause problems if you aren't careful.
>
> Sam
>
> -----Original Message-----
> From: antlr-interest-bounces at antlr.org
> [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Andy Tripp
> Sent: Thursday, June 12, 2008 4:50 PM
> To: Edwards, Waverly
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] multi-core usage
>
> I have a mechanism where I spawn multiple threads to parse multiple
> files.
> It speeds things up quite a bit, mostly because doing it single-threaded
> is I/O bound. With the multiple threads, file reading and parsing can
> happen in parallel.
>
> As for multiple cores, I don't know how much multithreading will help.
> >From what I've read, it's not easy to get Java to utilize multiple
> CPUs.
> I would think you'd have to have incredibly huge input for ANTLR to use
> a lot of CPU to parse it. Anyway, it's pretty easy to try out
> multithreading in Java, so just try it and see what happens.
>
>
>
> Edwards, Waverly wrote:
> >
> > I have curiosity question.  Can ANTLR take advantage of multi-core
> > processors.
> > The only place where I can think it would be possible would be in the
> > lexer where you might be able to apply one file per core to be
> > tokenized.  Has anyone tried?
> > Again, just curious.
> >
> >
> > W.
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080613/88dca126/attachment-0001.html 

From kris at storefront.com  Fri Jun 13 12:19:35 2008
From: kris at storefront.com (Kris Erickson)
Date: Fri, 13 Jun 2008 12:19:35 -0700
Subject: [antlr-interest] FW: CSharp Target...
Message-ID: <8CEA81A4BCAC0F448755037FEB63CFA23E0CE6@sf-exch1.mha.local>

First of all, let me state that Antlr appears to be an awesome tool.
AntlrWorks is amazing, being able to debug, combining the lexer and
parser, and having a parser for walking the trees.  The Antlr book is
fantastic, the website is at time frustrating, but still and excellent
reference and the short period of time I have spent with the project has
made me start considering DSL's for all sorts of purposes.  However,
trying to work in Csharp has been a bit of a nightmare.  

Initially I was trying to work in Antlr 3.1b1, but getting random errors
that simply did not occur when debugging the parser in Java (as well as
endless compile errors when even attempting to create a debug, but
compiling the "Simple tree-based interpreter" (the first one)
http://www.antlr.org/wiki/display/ANTLR3/Simple+tree-based+interpeter

With the following changes:

4a5
>     language=CSharp2;
13a15,18
> @header {
> using System.Collections.Generic;
> }
> 
16c21
<     List<CommonTree> functionDefinitions = new
ArrayList<CommonTree>();
---
>     public List<CommonTree> functionDefinitions = new 
> List<CommonTree>();
32c37
< 	  functionDefinitions.add($func.tree);
---
> 	  functionDefinitions.Add($func.tree);
68c73
< WS  :   (' '|'\t')+ { skip(); }
---
> WS  :   (' '|'\t')+ { Skip(); }

Results in:

C:\svnprojects\Expression\Expression>java org.antlr.Tool -debug Expr1.g
ANTLR Parser Generator  Version 3.1b1 (May 20, 2008)  1989-2008
error(10):  internal error: Expr1.g : java.util.NoSuchElementException:
no such attribute: n in template context [output File parser
genericParser(...) region__genericParser__members
region__genericParser__members if(grammar.grammarIsRoot)_s ubtemplate
else_subtemplate ctorForRootGrammar createListenerAndHandshake
if(PARSER)_subtemplate]
org.antlr.stringtemplate.StringTemplate.checkNullAttributeAgainstFormalA
rguments(StringTemplate.java:1290)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:814)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
org.antlr.stringtemplate.StringTemplate.getAttribute(StringTemplate.java
:696)
org.antlr.stringtemplate.language.ActionEvaluator.attribute(ActionEvalua
tor.java:360)
org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.j
ava:136)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
.java:84)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
org.antlr.stringtemplate.language.ConditionalExpr.writeSubTemplate(Condi
tionalExpr.java:152)
org.antlr.stringtemplate.language.ConditionalExpr.write(ConditionalExpr.
java:103)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
2)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
.java:86)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
2)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
.java:86)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
org.antlr.stringtemplate.language.ConditionalExpr.write(ConditionalExpr.
java:126)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
org.antlr.stringtemplate.language.ConditionalExpr.writeSubTemplate(Condi
tionalExpr.java:152)
org.antlr.stringtemplate.language.ConditionalExpr.write(ConditionalExpr.
java:103)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
2)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
.java:86)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
2)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
.java:86)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
2)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
.java:86)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
2)
org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
.java:86)
org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1271)
org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:455)
org.antlr.Tool.generateRecognizer(Tool.java:419)
org.antlr.Tool.process(Tool.java:286)
org.antlr.Tool.main(Tool.java:71)

C:\svnprojects\Expression\Expression>

Turning off debug, it compiles but now when it runs, it gets a null
exception in Expr1Parser.cs

char_literal19=(IToken)Match(input,13,FOLLOW_13_in_expr319);
char_literal19_tree = (CommonTree)adaptor.Create(char_literal19);
root_0 = (CommonTree)adaptor.BecomeRoot(char_literal19_tree, root_0);

Because char_literal19 is null.  Input looks good to me: {3+4\n}, so I
don't know why Match is returning null...

Compiling with 3.0.1 works fine.  So I think, great, I'll use 3.0.1,
however trying to run --debug with this.  But I get the same error when
debugging any tree grammer:

In the prog

	int LA1_0 = input.LA(1);

Message: 	"Object reference is not set to an instance of an
object."
Source:  	"Antlr3.Rutime"
StackTrace: "   at Antlr.Runtime.Debug.DebugTreeNodeStream.LA(Int32
i)\r\n   at Eval1.prog() in
C:\\svnprojects\\Expression\\Expression2\\Eval1.cs:line 184\r\n   at
ConsoleApplication1.Program.Main(String[] args) in
C:\\svnprojects\\Expression\\Expression2\\Program.cs:line 22\r\n   at
System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)\r\n
at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence
assemblySecurity, String[] args)\r\n   at
Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()\r\n
at System.Threading.ThreadHelper.ThreadStart_Context(Object state)\r\n
at System.Threading.ExecutionContext.Run(ExecutionContext
executionContext, ContextCallback callback, Object state)\r\n   at
System.Threading.ThreadHelper.ThreadStart()"
TargetSite:  {Int32 LA(Int32)}

So, I was wondering:

1) Is there any version of Antlr with CSharp that run with debug (in the
tree grammar)?
2) Where can I find the sources to the 3.0.1 CSharp runtime so I can
figure out why the DebugTreeNodeStream fails?  I tried finding it at
FishEye but downloading the source from Aug 2007 results only in the
DLL's.
3) Is there any examples of Antlr with CSharp for any projects that use
a Tree Grammar?
4) If the 3.1.b1 is the only version of Antlr that supports the CSharp2
target, and the CSharp2
   target is so broken it won't run against a simple grammar like the
"Simple Tree based interpreter",
   should the all the Wiki examples point to the CSharp2 grammar?  I
spent many hours thinking my
   own grammar had some weird errors because I was getting NULL
exceptions only to find out that
   the 3.1.b1 with CSharp2 is very broken.

Kris

From lgcraymer at yahoo.com  Fri Jun 13 14:20:03 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Fri, 13 Jun 2008 14:20:03 -0700 (PDT)
Subject: [antlr-interest] multi-core usage and pipeline processing
Message-ID: <199815.65323.qm@web55906.mail.re3.yahoo.com>

It should be pointed out that the reason for processing multiple files in parallel is the overhead of opening and closing files.  Without this overhead, the various threads would saturate both disk and memory bandwidth (optimizing disk access leads to large buffers, and competition for memory access results).  When dealing with large files (single file system), though, sequential processing is preferred because disk I/O is the limiting resource and competing file file accesses degrade performance due to frequent long-distance disk seeks.

--Loring


----- Original Message ----
From: Ian Kaplan <iank at bearcave.com>
To: antlr-interest at antlr.org
Sent: Friday, June 13, 2008 11:05:45 AM
Subject: [antlr-interest] multi-core usage and pipeline processing


  As has already been noted, the common use of multicores or multiple systems is parallel make (or ant or maven or what ever).  Multiple files can be compiled in multiple threads of control.  This makes compilation parallelizable to the number of files.

  It should also be possible to make use of pipeline parallelism.  As far as I know, no one has done this because compiling is not generally something that people are willing to put a lot of effort into speeding up beyond parallel make.  But it should be possible to create a pipeline that processes multiple files on a shared memory multi-core.  One state could do parse and AST construction.  Another state could do control flow/data flow construction and optimizatoin and another state could do code generation and target dependent optimization.

  The obvious argument against this is that compilers are already complex enough without making them into multi-process applications.  This would probably only be justified for something like logic synthesis compilers that are generating large net lists (and then you can't store things in memory).

  In summary, at least pipeline parallelism is possible, but it would probably be a bad idea.

  Ian



On Fri, Jun 13, 2008 at 8:41 AM, Edwards, Waverly <Waverly.Edwards at genesys.com> wrote:


Thanks all for your insights.  It was very interesting.


W.

-----Original Message-----
From: Sam Harwell [mailto:sharwell at pixelminegames.com]
Sent: Thursday, June 12, 2008 6:06 PM
To: Andy Tripp; Edwards, Waverly
Cc: antlr-interest at antlr.org
Subject: RE: [antlr-interest] multi-core usage

I'm using a combined grammar with AST output paired with a tree walker
grammar on the CSharp2 target. I spawn 5 threads on a quad-core box and
the parse uses about 65% of the overall processor power while it parses
~2500 files in ~5 seconds.

Breaking the parse into multiple threads provided about a 3:1 speed
increase. Multi-threaded parsing isn't the difficult part; it's
combining the results from the individual threads into one place that
can cause problems if you aren't careful.

Sam

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Andy Tripp
Sent: Thursday, June 12, 2008 4:50 PM
To: Edwards, Waverly
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] multi-core usage

I have a mechanism where I spawn multiple threads to parse multiple
files.
It speeds things up quite a bit, mostly because doing it single-threaded
is I/O bound. With the multiple threads, file reading and parsing can
happen in parallel.

As for multiple cores, I don't know how much multithreading will help.
>From what I've read, it's not easy to get Java to utilize multiple
CPUs.
I would think you'd have to have incredibly huge input for ANTLR to use
a lot of CPU to parse it. Anyway, it's pretty easy to try out
multithreading in Java, so just try it and see what happens.



Edwards, Waverly wrote:
>
> I have curiosity question.  Can ANTLR take advantage of multi-core
> processors.
> The only place where I can think it would be possible would be in the
> lexer where you might be able to apply one file per core to be
> tokenized.  Has anyone tried?
> Again, just curious.
>
>
> W.
>


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080613/00b35125/attachment.html 

From iank at bearcave.com  Fri Jun 13 14:33:03 2008
From: iank at bearcave.com (Ian Kaplan)
Date: Fri, 13 Jun 2008 14:33:03 -0700
Subject: [antlr-interest] multi-core usage and pipeline processing
In-Reply-To: <199815.65323.qm@web55906.mail.re3.yahoo.com>
References: <199815.65323.qm@web55906.mail.re3.yahoo.com>
Message-ID: <7f8924df0806131433g5521cfe3nd4b7e1d79634a11f@mail.gmail.com>

On Fri, Jun 13, 2008 at 2:20 PM, Loring Craymer <lgcraymer at yahoo.com> wrote:

> It should be pointed out that the reason for processing multiple files in
> parallel is the overhead of opening and closing files.  Without this
> overhead, the various threads would saturate both disk and memory bandwidth
> (optimizing disk access leads to large buffers, and competition for memory
> access results).  When dealing with large files (single file system),
> though, sequential processing is preferred because disk I/O is the limiting
> resource and competing file file accesses degrade performance due to
> frequent long-distance disk seeks.
>
> --Loring
>

 I also thought that disk I/O would be the limiting factor.  But I'm not
sure that this is as true as it used to be.  There are the network attached
storage and high speed RAID disk systems which support very high performance
disk access.  We are also starting to see the emergence of flash based
disk.  These factors are starting to change the way databases are looked at.

  Again, I think this is sort of a moot issue since in general, with
parallel make, compiles are fast enough for most people.  Throwing parallel
technology at it doesn't seem to be warranted.  But it's still interesting
to think about how one would do it if it were justified.

  Ian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080613/0610711c/attachment.html 

From rschulz at sonic.net  Fri Jun 13 14:48:33 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Fri, 13 Jun 2008 14:48:33 -0700
Subject: [antlr-interest] multi-core usage and pipeline processing
In-Reply-To: <7f8924df0806131433g5521cfe3nd4b7e1d79634a11f@mail.gmail.com>
References: <199815.65323.qm@web55906.mail.re3.yahoo.com>
	<7f8924df0806131433g5521cfe3nd4b7e1d79634a11f@mail.gmail.com>
Message-ID: <200806131448.33527.rschulz@sonic.net>

On Friday 13 June 2008 14:33, Ian Kaplan wrote:
> On Fri, Jun 13, 2008 at 2:20 PM, Loring Craymer wrote:
> > ...
>
>  I also thought that disk I/O would be the limiting factor. ...
>
>   Again, I think this is sort of a moot issue since in general, with
> parallel make, compiles are fast enough for most people. ...


And just to make sure software designer's lives don't get a chance to 
become boring, we're at the beginning of the introduction  of 
solid-state mass storage with the speed and capacity comparable to that 
of rotating magnetic media but without the seek and rotational 
latencies. Right now these devices are prohibitively expensive for most 
purposes, but undoubtedly that will change, and when it does, many of 
the assumptions on which we built elaborate schemes for avoiding (or 
overlapping) disk I/O will become unwelcome encumbrances.

So it goes...


>   Ian


Randall Schulz

From lgcraymer at yahoo.com  Fri Jun 13 15:17:33 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Fri, 13 Jun 2008 15:17:33 -0700 (PDT)
Subject: [antlr-interest] multi-core usage and pipeline processing
Message-ID: <223020.89935.qm@web55907.mail.re3.yahoo.com>

Randall--

Phase change memory is also going to have us living in glass houses, and brings new life to the idea of "fragile" code ...

--Loring

----- Original Message ----
> From: Randall R Schulz <rschulz at sonic.net>
> To: antlr-interest at antlr.org
> Sent: Friday, June 13, 2008 2:48:33 PM
> Subject: Re: [antlr-interest] multi-core usage and pipeline processing
> 
> On Friday 13 June 2008 14:33, Ian Kaplan wrote:
> > On Fri, Jun 13, 2008 at 2:20 PM, Loring Craymer wrote:
> > > ...
> >
> >  I also thought that disk I/O would be the limiting factor. ...
> >
> >   Again, I think this is sort of a moot issue since in general, with
> > parallel make, compiles are fast enough for most people. ...
> 
> 
> And just to make sure software designer's lives don't get a chance to 
> become boring, we're at the beginning of the introduction  of 
> solid-state mass storage with the speed and capacity comparable to that 
> of rotating magnetic media but without the seek and rotational 
> latencies. Right now these devices are prohibitively expensive for most 
> purposes, but undoubtedly that will change, and when it does, many of 
> the assumptions on which we built elaborate schemes for avoiding (or 
> overlapping) disk I/O will become unwelcome encumbrances.
> 
> So it goes...
> 
> 
> >   Ian
> 
> 
> Randall Schulz



      


From cdoucette at vaultus.com  Fri Jun 13 15:57:43 2008
From: cdoucette at vaultus.com (Doucette, Charles)
Date: Fri, 13 Jun 2008 18:57:43 -0400
Subject: [antlr-interest] automated completion - choosing matching
 productions and the next token
Message-ID: <A7746824D386F947BBC285F6EC4716B002131FDF77@vmtbosmail01.VMTBOSTON.VAULTUS.COM>

I am working on an editor for a language.
I have a grammar definition for a parser that builds a custom AST tree (not a standard Antlr AST tree).
The editor already uses the parser to  automatically flag syntax errors.

Is there any way to automatically determine
a) the current production
b) the current token based on the production
c) semantically choose the appropriate completions based on a) & b) above

The Eclipse Java editor and JDT do this all already, so I know the technology exists.
What I don't know is if it is based on fully automated parser technology (like from Antlr) or if it is based on simple heuristics
(like looking for an identifier after a "." or "=").

Thanks,
Chuck

________________________________

Charles E. Doucette *  617-399-1122 *  Vaultus Mobile Technologies, 263 Summer St., Boston, MA 02210 *  http://www.vaultus.com<http://www.vaultus.com/>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080613/7032d575/attachment.html 

From cmundi at gmail.com  Fri Jun 13 19:40:36 2008
From: cmundi at gmail.com (C. Mundi)
Date: Fri, 13 Jun 2008 19:40:36 -0700
Subject: [antlr-interest] Type discovery for operator overloading?
Message-ID: <e794390806131940v5985104el8a1bb445cfd2976c@mail.gmail.com>

Hi.  Thanks again to tparr and all the great people who make antlr fun =and=
useful!

I'm getting a bit -- ok, a lot -- out of my depth here.  Literature
citations and examples are equally welcome.

I would like to create a DSL with a funny idea of 'multiplication' and the
field(s) on which it operates.

p = 3             // an "integer" assignment in my language
y = 'yeah! '   // a "string" assignment

q = 2 * p
print q          // gives 6

r = p * y
print "She loves me -- " + r   // gives "She loves me -- yeah! yeah! yeah!"

s = y * p
print s       // gives "yeah! yeah! yeah!"

There are two ideas in play here.  First, the multiplication operator has
been overloaded in my "string" class to understand

     ^( MULTIPLY INTEGER STRING )

as well as the familiar

     ^( MULTIPLY  INTEGER  INTEGER )

That does not seem too mysterious to me.

Now in my calculus, multiplication over pairs of one integer and one string
is commutative.  So my tree-walker has to recognize the equivalence of

     ^( MULTIPLY STRING INTEGER )

and

     ^( MULTIPLY INTEGER STRING )

But it seems to me that simply overloading the "left-multiply" method for
both strings and integers is wholly inadequate, because the multiplication
must take into account not only the type of the left-argument, but also the
type of the right-argument, to determine what to do and what type to
return.  This is evident from the fact that 2*3 and 2*'foo' return entirely
different types, but 2*'foo' and 'foo'*2 return the same type (and value in
this case).

How does one approach this?  It seems to me that the answer lies in the
translation output, not in ANTLR itself.  Nonetheless, I am hoping that
perhaps ANTLR provides some tools to support such situations.  I was
thinking LL(2) with a semantic predicate peeking ahead to determine the type
of the second operand.  Am I on the right track here?  Or should I go back
to monkey finishing school?

Three possibilities, none excluding another, occur to me:

1. There is an obvious way to do this, if only I had taken the right classes
at university.
2. There is a non-obvious way to factor this "dynamically typed" grammar
into simpler concepts, which has eluded me.
3. I'm going to groan when someone points out the answer in a FAQ or the
ANTLR book.

Thanks,
c. mundi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080613/e56c4b7c/attachment.html 

From antlr at mirality.co.nz  Fri Jun 13 19:56:14 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 14 Jun 2008 14:56:14 +1200
Subject: [antlr-interest] Type discovery for operator overloading?
In-Reply-To: <e794390806131940v5985104el8a1bb445cfd2976c@mail.gmail.com>
References: <e794390806131940v5985104el8a1bb445cfd2976c@mail.gmail.com>
Message-ID: <20080614025621.C7B7211ECF4@www.antlr.org>

At 14:40 14/06/2008, C. Mundi wrote:
>Now in my calculus, multiplication over pairs of one integer and 
>one string is commutative.  So my tree-walker has to recognize 
>the equivalence of
>
>      ^( MULTIPLY STRING INTEGER )
>
>and
>
>      ^( MULTIPLY INTEGER STRING )
>
>But it seems to me that simply overloading the "left-multiply" 
>method for both strings and integers is wholly inadequate, 
>because the multiplication must take into account not only the 
>type of the left-argument, but also the type of the 
>right-argument, to determine what to do and what type to 
>return.  This is evident from the fact that 2*3 and 2*'foo' 
>return entirely different types, but 2*'foo' and 'foo'*2 return 
>the same type (and value in this case).
>
>How does one approach this?  It seems to me that the answer lies 
>in the translation output, not in ANTLR itself.  Nonetheless, I 
>am hoping that perhaps ANTLR provides some tools to support such 
>situations.  I was thinking LL(2) with a semantic predicate 
>peeking ahead to determine the type of the second operand.  Am I 
>on the right track here?  Or should I go back to monkey finishing 
>school?

Generally speaking, when writing a tree grammar rule you put the 
action to be executed at the end of the rule.  This means that it 
has already seen both terms in the AST, so there's no lookahead 
involved here.  You merely need some way to identify the type of 
each term (which is trivial in the above case, and only slightly 
more complicated in the cases where the terms can be 
sub-ASTs/expressions).

Of course, this approach only works for a strongly typed language 
(ie. one where variables are typed, so that you can statically 
determine whether a given variable name contains a string or an 
integer).  If your language is dynamically typed then you'll have 
to have your runtime multiplication operation work out what types 
its arguments are and how to deal with them accordingly.


From cmundi at gmail.com  Fri Jun 13 20:37:54 2008
From: cmundi at gmail.com (C. Mundi)
Date: Fri, 13 Jun 2008 20:37:54 -0700
Subject: [antlr-interest] Type discovery for operator overloading?
In-Reply-To: <48533355.3e61220a.461d.3123SMTPIN_ADDED@mx.google.com>
References: <e794390806131940v5985104el8a1bb445cfd2976c@mail.gmail.com>
	<48533355.3e61220a.461d.3123SMTPIN_ADDED@mx.google.com>
Message-ID: <e794390806132037t2e4860f6n80d4858442a6bad0@mail.gmail.com>

On Fri, Jun 13, 2008 at 7:56 PM, Gavin Lambert <antlr at mirality.co.nz> wrote:

>
> Generally speaking, when writing a tree grammar rule you put the action to
> be executed at the end of the rule.  This means that it has already seen
> both terms in the AST, so there's no lookahead involved here.  You merely
> need some way to identify the type of each term (which is trivial in the
> above case, and only slightly more complicated in the cases where the terms
> can be sub-ASTs/expressions).
>
> Of course, this approach only works for a strongly typed language (ie. one
> where variables are typed, so that you can statically determine whether a
> given variable name contains a string or an integer).  If your language is
> dynamically typed then you'll have to have your runtime multiplication
> operation work out what types its arguments are and how to deal with them
> accordingly.
>


You're quite right: I entirely neglected to mention that my little language
is dynamically typed.  That was an important bit to leave out.  Dynamic
typing was one of my preliminary user requirements leading me down this
rabbit hole.  But as I begin to appreciate some of the implications, I
wonder if the runtime cleverness we originally sought is worth the added
complexity.  Of course, only my users can answer that.  Your reply has
helped greatly to sharpen my thinking on the subject.  Thank you.

cheers,
c. mundi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080613/8906edf8/attachment.html 

From belayda at gmail.com  Fri Jun 13 20:39:04 2008
From: belayda at gmail.com (Bernardo Elayda)
Date: Fri, 13 Jun 2008 20:39:04 -0700
Subject: [antlr-interest] unexpected token when AST rewrite is used
In-Reply-To: <1F52A924-313A-4911-8094-B7A5A694DD05@cs.usfca.edu>
References: <3e5ed32f0806130058p77af6974gd0ec0d971c17f503@mail.gmail.com>
	<1F52A924-313A-4911-8094-B7A5A694DD05@cs.usfca.edu>
Message-ID: <3e5ed32f0806132039i6e8dc15bqb71c5bb16540603d@mail.gmail.com>

Hi!
I switched to 3.1b1 but still got the same error:
$ java org.antlr.Tool Test.g
ANTLR Parser Generator  Version 3.1b1 (May 20, 2008)  1989-2008
error(100): Test.g:11:27: syntax error: antlr: Test.g:11:27: unexpected
token: 0

Looks like it still doesn't like the rule with the argument as a child node
of a rewrite. I'm including the grammar here.

Any suggestions are welcome.  I'm gonna refactor my grammar.
tia,
Bernardo Elayda
----------------------------
grammar Test;

options {
    output=AST;
}

tokens {
    MYPROGRAM;
}

a : b[0]+ -> ^(MYPROGRAM b[0]+)
  ;

b[int i] : .
         ;

    NUMBER : DIGIT+ ('.' DIGIT+)? ;
IDENTIFIER : ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9')* ;
   COMMENT : '#' (options {greedy=false;} :.)* '\n' {$channel=HIDDEN;} ;
        WS : ('\n'|'\r'|' '|'\t') {$channel=HIDDEN;} ;

fragment DIGIT : '0'..'9' ;


On Fri, Jun 13, 2008 at 1:06 AM, Terence Parr <parrt at cs.usfca.edu> wrote:

> I'd suggest trying 3.1b1.
> Ter
>
> On Jun 13, 2008, at 9:58 AM, Bernardo Elayda wrote:
>
>  Hi,
>> Why does Antlr 3.0.1 complain that a token is unexpected for the rule
>> called B which has a single argument:
>>
>> a : b[0]+ -> ^(MYPROGRAM b[0]+)
>>   ;
>>
>> I can only get Antlr to accept the above rule if I do this:
>>
>> a : b[0] -> ^(MYPROGRAM b+)
>>
>> Are rules with arguments not allowed as child nodes in an Antlr AST?
>>
>> tia,
>> Bernardo Elayda
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080613/65034607/attachment.html 

From antlr at mirality.co.nz  Fri Jun 13 21:03:06 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 14 Jun 2008 16:03:06 +1200
Subject: [antlr-interest] Type discovery for operator overloading?
In-Reply-To: <e794390806132037t2e4860f6n80d4858442a6bad0@mail.gmail.com>
References: <e794390806131940v5985104el8a1bb445cfd2976c@mail.gmail.com>
	<48533355.3e61220a.461d.3123SMTPIN_ADDED@mx.google.com>
	<e794390806132037t2e4860f6n80d4858442a6bad0@mail.gmail.com>
Message-ID: <20080614040312.6C4FD11ED26@www.antlr.org>

At 15:37 14/06/2008, C. Mundi wrote:
>You're quite right: I entirely neglected to mention that my 
>little language is dynamically typed.  That was an important bit 
>to leave out.  Dynamic typing was one of my preliminary user 
>requirements leading me down this rabbit hole.  But as I begin to 
>appreciate some of the implications, I wonder if the runtime 
>cleverness we originally sought is worth the added 
>complexity.  Of course, only my users can answer that.  Your 
>reply has helped greatly to sharpen my thinking on the 
>subject.  Thank you.

I'm not sure "added complexity" is quite right; it's just putting 
the complexity at a different point.  For a statically-typed 
language you can make all the type decisions at "compile time" 
(ie. within ANTLR) -- or defer them until runtime if you 
prefer.  For a dynamically-typed language then you have to make 
the type decisions at runtime.  They're still the same decisions, 
though.

It's probably marginally easier to implement when your host 
language and custom language are both either static- or 
dynamic-typed; if there's a mismatch, you have to do a bit more 
work, but it's usually not too complicated.


From parrt at cs.usfca.edu  Sat Jun 14 00:19:05 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 14 Jun 2008 09:19:05 +0200
Subject: [antlr-interest] automated completion - choosing matching
	productions and the next token
In-Reply-To: <A7746824D386F947BBC285F6EC4716B002131FDF77@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
References: <A7746824D386F947BBC285F6EC4716B002131FDF77@vmtbosmail01.VMTBOSTON.VAULTUS.COM>
Message-ID: <D0E090B4-3E0C-41C3-92DD-DB78A157BFBA@cs.usfca.edu>

I'm supposed to be working on book while traveling but spent a few  
hours yesterday thinking about how useful NFAs of the grammar would  
be at runtime.  As we parse, I could update a ptr into the NFA and  
keep a stack of rulenames etc...  At any moment, one could ask the  
NFA for the set of next valid tokens.  This would make the generated  
code simpler as well since I wouldn't have to precompute all those  
damn bitsets for FOLLOWs (error handling sets).

Would be great for autocompletion and other stuff.

if i could do some lookahead prediction with it, i could also avoid  
generating synpreds as separate classes etc...

I'll try to put this together for 3.2

Ter
On Jun 14, 2008, at 12:57 AM, Doucette, Charles wrote:

> I am working on an editor for a language.
> I have a grammar definition for a parser that builds a custom AST  
> tree (not a standard Antlr AST tree).
> The editor already uses the parser to  automatically flag syntax  
> errors.
>
> Is there any way to automatically determine
> a) the current production
> b) the current token based on the production
> c) semantically choose the appropriate completions based on a) & b)  
> above
>
> The Eclipse Java editor and JDT do this all already, so I know the  
> technology exists.
> What I don't know is if it is based on fully automated parser  
> technology (like from Antlr) or if it is based on simple heuristics
> (like looking for an identifier after a "." or "=").
>
> Thanks,
> Chuck
>
> Charles E. Doucette ?  617-399-1122 ?  Vaultus Mobile Technologies,  
> 263 Summer St., Boston, MA 02210 ?  http://www.vaultus.com
>


From JALuber at gmx.de  Sat Jun 14 10:06:33 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Sat, 14 Jun 2008 19:06:33 +0200
Subject: [antlr-interest] FW: CSharp Target...
In-Reply-To: <8CEA81A4BCAC0F448755037FEB63CFA23E0CE6@sf-exch1.mha.local>
References: <8CEA81A4BCAC0F448755037FEB63CFA23E0CE6@sf-exch1.mha.local>
Message-ID: <20080614170633.316620@gmx.net>

> First of all, let me state that Antlr appears to be an awesome tool.
> AntlrWorks is amazing, being able to debug, combining the lexer and
> parser, and having a parser for walking the trees.  The Antlr book is
> fantastic, the website is at time frustrating, but still and excellent
> reference and the short period of time I have spent with the project has
> made me start considering DSL's for all sorts of purposes.  However,
> trying to work in Csharp has been a bit of a nightmare.  
> 
> Initially I was trying to work in Antlr 3.1b1, but getting random errors
> that simply did not occur when debugging the parser in Java (as well as
> endless compile errors when even attempting to create a debug, but
> compiling the "Simple tree-based interpreter" (the first one)
> http://www.antlr.org/wiki/display/ANTLR3/Simple+tree-based+interpeter
> 
> With the following changes:
> 
> 4a5
> >     language=CSharp2;
> 13a15,18
> > @header {
> > using System.Collections.Generic;
> > }
> > 
> 16c21
> <     List<CommonTree> functionDefinitions = new
> ArrayList<CommonTree>();
> ---
> >     public List<CommonTree> functionDefinitions = new 
> > List<CommonTree>();
> 32c37
> < 	  functionDefinitions.add($func.tree);
> ---
> > 	  functionDefinitions.Add($func.tree);
> 68c73
> < WS  :   (' '|'\t')+ { skip(); }
> ---
> > WS  :   (' '|'\t')+ { Skip(); }
> 
> Results in:
> 
> C:\svnprojects\Expression\Expression>java org.antlr.Tool -debug Expr1.g
> ANTLR Parser Generator  Version 3.1b1 (May 20, 2008)  1989-2008
> error(10):  internal error: Expr1.g : java.util.NoSuchElementException:
> no such attribute: n in template context [output File parser
> genericParser(...) region__genericParser__members
> region__genericParser__members if(grammar.grammarIsRoot)_s ubtemplate
> else_subtemplate ctorForRootGrammar createListenerAndHandshake
> if(PARSER)_subtemplate]
> org.antlr.stringtemplate.StringTemplate.checkNullAttributeAgainstFormalA
> rguments(StringTemplate.java:1290)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:814)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> org.antlr.stringtemplate.StringTemplate.getAttribute(StringTemplate.java
> :696)
> org.antlr.stringtemplate.language.ActionEvaluator.attribute(ActionEvalua
> tor.java:360)
> org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.j
> ava:136)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> .java:84)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ConditionalExpr.writeSubTemplate(Condi
> tionalExpr.java:152)
> org.antlr.stringtemplate.language.ConditionalExpr.write(ConditionalExpr.
> java:103)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> 2)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> .java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> 2)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> .java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ConditionalExpr.write(ConditionalExpr.
> java:126)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ConditionalExpr.writeSubTemplate(Condi
> tionalExpr.java:152)
> org.antlr.stringtemplate.language.ConditionalExpr.write(ConditionalExpr.
> java:103)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> 2)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> .java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> 2)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> .java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> 2)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> .java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> 2)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> .java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1271)
> org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:455)
> org.antlr.Tool.generateRecognizer(Tool.java:419)
> org.antlr.Tool.process(Tool.java:286)
> org.antlr.Tool.main(Tool.java:71)
> 
> C:\svnprojects\Expression\Expression>

This looks like that the genericParser() template is out of sync with the Java target.
> 
> Turning off debug, it compiles but now when it runs, it gets a null
> exception in Expr1Parser.cs
> 
> char_literal19=(IToken)Match(input,13,FOLLOW_13_in_expr319);
> char_literal19_tree = (CommonTree)adaptor.Create(char_literal19);
> root_0 = (CommonTree)adaptor.BecomeRoot(char_literal19_tree, root_0);
> 
> Because char_literal19 is null.  Input looks good to me: {3+4\n}, so I
> don't know why Match is returning null...

This may the same issue already reported to me: <http://www.antlr.org:8888/browse/ANTLR-297>
> 
> Compiling with 3.0.1 works fine.  So I think, great, I'll use 3.0.1,
> however trying to run --debug with this.  But I get the same error when
> debugging any tree grammer:
> 
> In the prog
> 
> 	int LA1_0 = input.LA(1);
> 
> Message: 	"Object reference is not set to an instance of an
> object."
> Source:  	"Antlr3.Rutime"
> StackTrace: "   at Antlr.Runtime.Debug.DebugTreeNodeStream.LA(Int32
> i)\r\n   at Eval1.prog() in
> C:\\svnprojects\\Expression\\Expression2\\Eval1.cs:line 184\r\n   at
> ConsoleApplication1.Program.Main(String[] args) in
> C:\\svnprojects\\Expression\\Expression2\\Program.cs:line 22\r\n   at
> System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)\r\n
> at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence
> assemblySecurity, String[] args)\r\n   at
> Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()\r\n
> at System.Threading.ThreadHelper.ThreadStart_Context(Object state)\r\n
> at System.Threading.ExecutionContext.Run(ExecutionContext
> executionContext, ContextCallback callback, Object state)\r\n   at
> System.Threading.ThreadHelper.ThreadStart()"
> TargetSite:  {Int32 LA(Int32)}

I have never seen this kind of error, so I'm wondering if you mix the 3.0.1 generated code with the libraries of 3.1b1. As those are binary incompatible, this won't work ever. Otherwise, I've got myself the debugger for 3.0.1 running, so I don't believe that there is a bug hidden there causing this problem.
> 
> So, I was wondering:
> 
> 1) Is there any version of Antlr with CSharp that run with debug (in the
> tree grammar)?

Try my suggestions above.

> 2) Where can I find the sources to the 3.0.1 CSharp runtime so I can
> figure out why the DebugTreeNodeStream fails?  I tried finding it at
> FishEye but downloading the source from Aug 2007 results only in the
> DLL's.

No one has the original sources for these assemblies. Long story short: You have to wait until I've fixed the bugs. May take a few days, as I've got to deal with long backlog due to harddrive failure.
> 3) Is there any examples of Antlr with CSharp for any projects that use
> a Tree Grammar?

Yes. Fisheye has more recent examples which may not be released yet officially.

> 4) If the 3.1.b1 is the only version of Antlr that supports the CSharp2
> target, and the CSharp2
>    target is so broken it won't run against a simple grammar like the
> "Simple Tree based interpreter",
>    should the all the Wiki examples point to the CSharp2 grammar?  I
> spent many hours thinking my
>    own grammar had some weird errors because I was getting NULL
> exceptions only to find out that
>    the 3.1.b1 with CSharp2 is very broken.

Sorry about that. My reasoning for pointing to CSharp2 instead CSharp is that CSharp2 is the future and once CSharp is retired someone may find an old example and wonder why things don't work. So I've edited them already in the expectation that 3.1 would be released soon with working CSharp(2) targets. And as the version is 3.1 BETA 1 you have to expect that some things are broken. Granted, my test coverage is far from ideal, but to a certain extent this is a legacy issue. I couldn't fix things as fast as I would like, so I have to rely on other users to find the showstoppers. :(

Johannes
-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

From cmundi at gmail.com  Sat Jun 14 10:38:18 2008
From: cmundi at gmail.com (C. Mundi)
Date: Sat, 14 Jun 2008 10:38:18 -0700
Subject: [antlr-interest] Type discovery for operator overloading?
In-Reply-To: <48534300.02fd220a.535d.ffffde4bSMTPIN_ADDED@mx.google.com>
References: <e794390806131940v5985104el8a1bb445cfd2976c@mail.gmail.com>
	<48533355.3e61220a.461d.3123SMTPIN_ADDED@mx.google.com>
	<e794390806132037t2e4860f6n80d4858442a6bad0@mail.gmail.com>
	<48534300.02fd220a.535d.ffffde4bSMTPIN_ADDED@mx.google.com>
Message-ID: <e794390806141038h805669crc347f32f6ef8c23@mail.gmail.com>

I suspect I will come to see the truth in what you write -- that it is
merely a matter of shifting the complexity, not changing the overall
complexity -- when I get my head fully wrapped around it.  That will come
with time, I suppose.  Thanks for putting me on the path.

c. mundi


On Fri, Jun 13, 2008 at 9:03 PM, Gavin Lambert <antlr at mirality.co.nz> wrote:

> At 15:37 14/06/2008, C. Mundi wrote:
>
>> You're quite right: I entirely neglected to mention that my little
>> language is dynamically typed.  That was an important bit to leave out.
>>  Dynamic typing was one of my preliminary user requirements leading me down
>> this rabbit hole.  But as I begin to appreciate some of the implications, I
>> wonder if the runtime cleverness we originally sought is worth the added
>> complexity.  Of course, only my users can answer that.  Your reply has
>> helped greatly to sharpen my thinking on the subject.  Thank you.
>>
>
> I'm not sure "added complexity" is quite right; it's just putting the
> complexity at a different point.  For a statically-typed language you can
> make all the type decisions at "compile time" (ie. within ANTLR) -- or defer
> them until runtime if you prefer.  For a dynamically-typed language then you
> have to make the type decisions at runtime.  They're still the same
> decisions, though.
>
> It's probably marginally easier to implement when your host language and
> custom language are both either static- or dynamic-typed; if there's a
> mismatch, you have to do a bit more work, but it's usually not too
> complicated.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080614/2ada602c/attachment.html 

From jlist9 at gmail.com  Sat Jun 14 10:53:44 2008
From: jlist9 at gmail.com (JLIST)
Date: Sat, 14 Jun 2008 10:53:44 -0700
Subject: [antlr-interest] How to disable error messages
Message-ID: <11610665178.20080614105344@gmail.com>

Hi,

I'm using Python code generated by Antlr. I'm getting a lot
of errors like this:

line 1:0 no viable alternative at character '\xe6'

The grammar works OK so I'd like to disable these errors from
the console after starting the program. I wonder if there is a
simple way to turn that off from code?

Thanks,
Jack


From pink at odahoda.de  Sat Jun 14 11:10:30 2008
From: pink at odahoda.de (Benjamin Niemann)
Date: Sat, 14 Jun 2008 20:10:30 +0200
Subject: [antlr-interest] How to disable error messages
In-Reply-To: <11610665178.20080614105344@gmail.com>
References: <11610665178.20080614105344@gmail.com>
Message-ID: <543531490806141110p146fe883u3a47d3cc98dd537a@mail.gmail.com>

Hi Jack,

Are you possibly feeding non-ascii data as a byte string into the
parser? If you are parsing non-ascii data, you have to decode it into
a unicode string before handing it off to ANTLR.

And now to surpressing the messages (if you really want that): the
easiest way is probably to override the emitErrorMessage methods of
your lexer and parser classes.

-Ben

On Sat, Jun 14, 2008 at 7:53 PM, JLIST <jlist9 at gmail.com> wrote:
> Hi,
>
> I'm using Python code generated by Antlr. I'm getting a lot
> of errors like this:
>
> line 1:0 no viable alternative at character '\xe6'
>
> The grammar works OK so I'd like to disable these errors from
> the console after starting the program. I wonder if there is a
> simple way to turn that off from code?
>
> Thanks,
> Jack
>
>

From jlist9 at gmail.com  Sat Jun 14 11:46:53 2008
From: jlist9 at gmail.com (JLIST)
Date: Sat, 14 Jun 2008 11:46:53 -0700
Subject: [antlr-interest] How to disable error messages
In-Reply-To: <543531490806141110p146fe883u3a47d3cc98dd537a@mail.gmail.com>
References: <11610665178.20080614105344@gmail.com>
	<543531490806141110p146fe883u3a47d3cc98dd537a@mail.gmail.com>
Message-ID: <865681444.20080614114653@gmail.com>

Hello Benjamin,

Thanks for the quick reply. Indeed, it only happens when
there are UTF-8 characters in the string. I now check if
there is any characters that's greater than 0x7f. If yes,
I'll skip parsing.

Jack

> Are you possibly feeding non-ascii data as a byte string into the
> parser? If you are parsing non-ascii data, you have to decode it into
> a unicode string before handing it off to ANTLR.

> And now to surpressing the messages (if you really want that): the
> easiest way is probably to override the emitErrorMessage methods of
> your lexer and parser classes.

> -Ben

> On Sat, Jun 14, 2008 at 7:53 PM, JLIST <jlist9 at gmail.com> wrote:
>> Hi,
>>
>> I'm using Python code generated by Antlr. I'm getting a lot
>> of errors like this:
>>
>> line 1:0 no viable alternative at character '\xe6'
>>
>> The grammar works OK so I'd like to disable these errors from
>> the console after starting the program. I wonder if there is a
>> simple way to turn that off from code?
>>
>> Thanks,
>> Jack
>>
>>



-- 
Best regards,
 JLIST                            mailto:jlist9 at gmail.com


From simos.lists at googlemail.com  Sat Jun 14 11:49:42 2008
From: simos.lists at googlemail.com (Simos Xenitellis)
Date: Sat, 14 Jun 2008 19:49:42 +0100
Subject: [antlr-interest] How to disable error messages
In-Reply-To: <11610665178.20080614105344@gmail.com>
References: <11610665178.20080614105344@gmail.com>
Message-ID: <485412C6.3060102@googlemail.com>

O/H JLIST ??????:
> Hi,
>
> I'm using Python code generated by Antlr. I'm getting a lot
> of errors like this:
>
> line 1:0 no viable alternative at character '\xe6'
>
> The grammar works OK so I'd like to disable these errors from
> the console after starting the program. I wonder if there is a
> simple way to turn that off from code?
>   
The source of the problem is probably the fact
that Python 2.x defaults to the ASCII encoding for text strings.
Therefore, when you interact with Unicode text,
you get all sort of encoding problems.

You can configure your installation of Python to go for utf-8
/usr/lib/python2.5/site.py:

def setencoding():
    """Set the string encoding used by the Unicode implementation.  The
    default is 'ascii', but if you're willing to experiment, you can
    change this."""
    encoding = "utf-8" # Default value set by _PyUnicode_Init()

This should solve the Unicode problems in a painless way.

Simos


From jimi at temporal-wave.com  Sat Jun 14 13:38:26 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat, 14 Jun 2008 13:38:26 -0700
Subject: [antlr-interest] How to disable error messages
In-Reply-To: <11610665178.20080614105344@gmail.com>
References: <11610665178.20080614105344@gmail.com>
Message-ID: <1213475906.11783.24.camel@jimi>

On Sat, 2008-06-14 at 10:53 -0700, JLIST wrote:

> Hi,
> 
> I'm using Python code generated by Antlr. I'm getting a lot
> of errors like this:
> 
> line 1:0 no viable alternative at character '\xe6'


You are getting these because your lexer is not covering that character
in any token. Perhaps this is a utf input stream? Your lexer should be
able to consumer any character thrown at it, even if it throws it away.
If these characters really are superfluous, then it really is an error,
in which case you want, as the last lexer rule:

UNKNOWN : . { <print message about bad character but perhaps a better
one than the default> ;

Or, if they are are allowed to be in the stream but you just wish to
silently ignore them, then:

ANY    : . { Python equivalent of skip(); } ;

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080614/9a8b6dd8/attachment.html 

From rjack at elegancetech.com  Sat Jun 14 15:16:23 2008
From: rjack at elegancetech.com (Roger Jack)
Date: Sat, 14 Jun 2008 18:16:23 -0400
Subject: [antlr-interest] Antlworks and gunit integration
Message-ID: <000301c8ce6c$4885b090$d99111b0$@com>

I'm new to Antlr, Antlrworks, and gunit (all of which are really cool!), so
I apologize in advance if the answer is obvious.

 

I would like to take a TDD approach to developing a grammar. Therefore, I
would like to create test for a rule (gunit) and then implement the rule in
the grammar. If I have a bug, I would like to debug the gunit test. Is there
some way to debug gunit tests in Antlrworks? If not, then what are gunit
users using to debug grammars?

 

Thanks!

 

Roger Jack

Elegance Technologies

484.431.1775

 <http://www.elegancetech.com> www.elegancetech.com

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080614/b4254745/attachment.html 

From ame01 at gmx.net  Sat Jun 14 17:10:28 2008
From: ame01 at gmx.net (Aurelian Melinte)
Date: Sat, 14 Jun 2008 20:10:28 -0400
Subject: [antlr-interest] Warning(200) for k=1
Message-ID: <1.1.1.20080614195739.00c99c28@127.0.0.1>

Hello,

I am forced to use k=1 for a large C++ grammar - while the grammar has been designed for k=2, Antlr 3.0.1 will run out of memory for anything else but k=1. I

At k=1:  

1) I have a few "(200) alternative unreachable" that I am trying to fix. 
2) If I predicate the alternative, Antlr runs out of memory

I have isolated number 1) in a fragment pasted below, together with the warnings. But for the fragment, number 2) does not occur when I use the predicate, - it does not fixes the issue either. 

You can see the out of memory with the grammar here: http://www.freeshells.ch/~amelinte/CPP_parser.g

Any advice is appreciated.

Regards,
a.

---------------
ANTLR Parser Generator  Version 3.0.1 (August 13, 2007)  1989-2007
warning(200): ./test.g:12:25: Decision can match input such as "{EOF, SCOPE..ID, 'inline'}" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
warning(201): ./test.g:12:25: The following alternatives are unreachable: 2
warning(200): ./test.g:18:3: Decision can match input such as "'inline'" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
warning(200): ./test.g:23:3: Decision can match input such as "SCOPE" using multiple alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
warning(200): ./test.g:32:3: Decision can match input such as "ID" using multiple alternatives: 1, 2, 3
As a result, alternative(s) 2,3 were disabled for that input
warning(201): ./test.g:32:3: The following alternatives are unreachable: 2


---------------


grammar test; 

options
	{
	language = 'C';
	k = 1; 
	}


translation_unit
	:	(external_declaration)*  EOF
	;

external_declaration
	:
		(('inline')? scope_override)=>
		('inline')? scope_override
	;

scope_override
	:
		(SCOPE)? 
		(	
			(ID LESSTHAN template_argument_list GREATERTHAN SCOPE)=>
			ID LESSTHAN template_argument_list GREATERTHAN SCOPE
			('template')?
		|	
			//(ID SCOPE)=> //still warnings
			ID SCOPE
			('template')?
		)*
	;

//template_argument_list
template_argument_list
	:	
		template_argument (COMMA template_argument)*
	;

//template_argument
template_argument
	:
		BITWISEXOREQUAL //just for the sake of example
	;



COMMA           : ',' ;
LESSTHAN        : '<' ;
GREATERTHAN     : '>' ;

LPAREN          : '(' ;
RPAREN          : ')' ;
LCURLY          : '{' ;
RCURLY          : '}' ;

BITWISEXOREQUAL : '^=' ;

SCOPE           : '::'  ;

Whitespace	
	:	
		(	// Ignore space
			Space
		|	// handle newlines
			(	'\r' '\n'	// MS
			|	'\r'		// Mac
			|	'\n'		// Unix 
			)	{newline(ACTX);}
		|	// handle continuation lines
			(	'\\' '\r' '\n'	// MS
			|	'\\' '\r'		// Mac
			|	'\\' '\n'		// Unix 
			)	{printf("CPP_parser.g continuation line detected on line \%d\n",g_SupportData.lineNo);
				deferredNewline(ACTX);}
		)	
		{$channel = HIDDEN;}
	;


Comment  
	:   '/*' (options {greedy=false;} : .)* '*/' {$channel=HIDDEN;}
	;

fragment  
Space
	:	
			(' '|'\t' {tab(ACTX);}|'\f')
	;

CharLiteral
	:	
		'\'' ( Escape | UniversalCharacterName | ~('\''|'\\'|'\n'|'\r') ) '\''
	;

WCharLiteral
	:
		'L' CharLiteral
	;

StringLiteral
	:	
		'"'
		(	Escape
		|	UniversalCharacterName
		|	~('"'|'\\'|'\n'|'\r')
		)*
		'"'
	;

WStringLiteral
	:
		'L' StringLiteral
	;

fragment  
EndOfContinuedLine
	:
		(//options{generateAmbigWarnings = false;}:
			'\\' '\r' '\n'	// MS
		|	'\\' '\r'		// Mac
		|	'\\' '\n'		// Unix 
		)	{deferredNewline(ACTX);}
	;

fragment  
EndOfLine
	:	
		(	//options{generateAmbigWarnings = false;}:
			'\r\n'  // MS
		|	'\r'    // Mac
		|	'\n'    // Unix
		)
	;

fragment  
Escape  
	:	
		'\\'
		( //options{warnWhenFollowAmbig=false;}:
		  'a'
		| 'b'
		| 'f'
		| 'n'
		| 'r'
		| 't'
		| 'v'
		| '"'
		| '\''
		| '\\'
		| '?'
		| ('0'..'3') (/*options{warnWhenFollowAmbig=false;}:*/ Digit (/*options{warnWhenFollowAmbig=false;}:*/ Digit)? )?
		| ('4'..'7') (/*options{warnWhenFollowAmbig=false;}:*/ Digit)?
		| 'x' (/*options{warnWhenFollowAmbig=false;}:*/ HexadecimalDigit)+ //Digit | 'a'..'f' | 'A'..'F')+
		)
	;

// Numeric Constants: 


fragment  
Digit
	:	
		'0'..'9'
	;

fragment  
Decimal
	:	
		('0'..'9')+
	;

fragment  
LongSuffix
	:	'l'
	|	'L'
	;

fragment  
UnsignedSuffix
	:	'u'
	|	'U'
	;

//fragment  
//FloatSuffix
//	:	'f'
//	|	'F'
//	;

fragment  
Exponent
	:	
		('e'|'E') ('+'|'-')? (Digit)+
	;

fragment  
UniversalCharacterName
	:
		'\\u' HexQuad
	|	'\\U' HexQuad HexQuad
	;

fragment  
HexQuad
	:
		HexadecimalDigit HexadecimalDigit HexadecimalDigit HexadecimalDigit 
	;

fragment  
HexadecimalDigit
	:
		('0'..'9'|'a'..'f'|'A'..'F')
	;

fragment  
Vocabulary
	:	
		'\u0003'..'\u0377'
	;

ELLIPSIS
	:
		('...')=> '...'
	;

DECIMALINT
	:
		'1'..'9' (Digit)* (IntegerSuffix)?
	;

OCTALINT
	:
		'0' ('0'..'7')* (IntegerSuffix)?
	;

HEXADECIMALINT
	:
		'0' ('x' | 'X') (HexadecimalDigit)+ (IntegerSuffix)?
	;

FLOATONE
	:
		( (Digit)+ ('.' | 'e' | 'E') )=> 
		(Digit)+
		( '.' (Digit)* (Exponent)?
		| Exponent	// should be FLOATTWO?
		)
	;

FLOATTWO
	:
		'.' (Digit)+ (Exponent)? (FloatSuffix)?
	;

IntegerSuffix
	:
		LongSuffix (UnsignedSuffix)
		UnsignedSuffix (LongSuffix)
	;

FloatSuffix
	:
		('f' | 'F' | 'l' | 'L' )
	;

ID
	//options {testLiterals = true;}
	:	
		(('asm'|'_asm'|'__asm') Whitespace )=>

		('asm'|'_asm'|'__asm') 
			(EndOfLine {deferredNewline(ACTX);}
			|Space
			)+
		(
			LPAREN
				(	EndOfLine {deferredNewline(ACTX);}	
				|	~(')' | '\r' | '\n')
				)*	
			RPAREN {$channel = HIDDEN;}
		|
			LCURLY
				(	EndOfLine {deferredNewline(ACTX);}	
				|	~('}' | '\r' | '\n')
				)*	
			RCURLY {$channel = HIDDEN;}
		|
			// Single line asm statement
			(~('(' | ')' | '{' | '}' | '\n' | '\r' | ' ' | '\t' | '\f'))
			(~('(' | ')' | '{' | '}' | '\n' | '\r'))* (EndOfLine {newline(ACTX);})?
			{$channel = HIDDEN;}
		)
	|	
		('a'..'z'|'A'..'Z'|'_')
		('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
	;





From antlr at mirality.co.nz  Sat Jun 14 21:48:22 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 15 Jun 2008 16:48:22 +1200
Subject: [antlr-interest] Warning(200) for k=1
In-Reply-To: <1.1.1.20080614195739.00c99c28@127.0.0.1>
References: <1.1.1.20080614195739.00c99c28@127.0.0.1>
Message-ID: <20080615044835.C87AA11EBBE@www.antlr.org>

At 12:10 15/06/2008, Aurelian Melinte wrote:
 >I am forced to use k=1 for a large C++ grammar - while the 
grammar
 >has been designed for k=2, Antlr 3.0.1 will run out of memory 
for
 >anything else but k=1. I

I'd start by fixing up your lexer.  And write some unit tests for 
it.

 >OCTALINT
 >	:
 >		'0' ('0'..'7')* (IntegerSuffix)?
 >	;
 >
 >HEXADECIMALINT
 >	:
 >		'0' ('x' | 'X') (HexadecimalDigit)+ (IntegerSuffix)?
 >	;
 >
 >FLOATONE
 >	:
 >		( (Digit)+ ('.' | 'e' | 'E') )=>
 >		(Digit)+
 >		( '.' (Digit)* (Exponent)?
 >		| Exponent	// should be FLOATTWO?
 >		)
 >	;
 >
 >FLOATTWO
 >	:
 >		'.' (Digit)+ (Exponent)? (FloatSuffix)?
 >	;

At k=1 (and when encountering loops, the lexer always behaves like 
it's k=1), these rules are mutually ambiguous.  You should merge 
them into a single rule with appropriate lookahead disambiguation.

Remember, predicates don't choose between rules, they choose 
between alts within a rule.  Or that's how they seem to behave in 
the lexer, at least.

 >IntegerSuffix
 >	:
 >		LongSuffix (UnsignedSuffix)
 >		UnsignedSuffix (LongSuffix)
 >	;
 >
 >FloatSuffix
 >	:
 >		('f' | 'F' | 'l' | 'L' )
 >	;

Surely these should be fragments?


From leon.antlr at mac.com  Sat Jun 14 22:06:42 2008
From: leon.antlr at mac.com (Leon Su)
Date: Sat, 14 Jun 2008 22:06:42 -0700
Subject: [antlr-interest] Antlworks and gunit integration
In-Reply-To: <000301c8ce6c$4885b090$d99111b0$@com>
References: <000301c8ce6c$4885b090$d99111b0$@com>
Message-ID: <46467A1F-AC03-48A8-B2B7-6D95ACACA650@mac.com>

Hi Roger,

Currently gUnit is not integrated into ANTLRWorks; therefore, you  
have to use them separately. You could simply run the gUnit tests  
first. If there's any failure found, open ANTLRWorks's debug mode and  
then copy the failed test's input as the input text into the  
debugger. Then start the debugging process...
Hope this helps :)

Leon

On Jun 14, 2008, at 3:16 PM, Roger Jack wrote:

> I?m new to Antlr, Antlrworks, and gunit (all of which are really  
> cool!), so I apologize in advance if the answer is obvious.
>
> I would like to take a TDD approach to developing a grammar.  
> Therefore, I would like to create test for a rule (gunit) and then  
> implement the rule in the grammar. If I have a bug, I would like to  
> debug the gunit test. Is there some way to debug gunit tests in  
> Antlrworks? If not, then what are gunit users using to debug grammars?
>
> Thanks!
>
> Roger Jack
> Elegance Technologies
> 484.431.1775
> www.elegancetech.com
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080614/7c4c4fa3/attachment.html 

From Vitaliy at dbsophic.com  Sun Jun 15 04:02:42 2008
From: Vitaliy at dbsophic.com (Vitaliy)
Date: Sun, 15 Jun 2008 14:02:42 +0300
Subject: [antlr-interest] Partitioning Antlr grammar into a couple files
Message-ID: <B0DE8B66453D0F4AA67D2A150934999B046FA85A76@ex01.dbsophicHQ.com>

Hi all,

Does anyone has an idea how can a large grammar definition be split between a multiple number of files?
I've defined a pretty large grammar - around 160 rules, spanning over 3000 lines, and growing.
Antlr generated code is huge as well - around 25,000 lines of code for the lexer and the parser each, after optimizations.
It's really hard to test \ manage such a big grammar. Is there a way to split it between a number of files?
Any kind of an import or using directive?

Thanks for your help,
Vitaliy




__________ Information from ESET NOD32 Antivirus, version of virus signature database 3186 (20080613) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From antlr at mirality.co.nz  Sun Jun 15 04:19:13 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 15 Jun 2008 23:19:13 +1200
Subject: [antlr-interest] Partitioning Antlr grammar into a couple files
In-Reply-To: <B0DE8B66453D0F4AA67D2A150934999B046FA85A76@ex01.dbsophicHQ .com>
References: <B0DE8B66453D0F4AA67D2A150934999B046FA85A76@ex01.dbsophicHQ.com>
Message-ID: <20080615111922.CD72611ECA6@www.antlr.org>

At 23:02 15/06/2008, Vitaliy wrote:
 >Does anyone has an idea how can a large grammar definition be 
split
 >between a multiple number of files?
 >I've defined a pretty large grammar - around 160 rules, spanning 

 >over 3000 lines, and growing.
 >Antlr generated code is huge as well - around 25,000 lines of 
code
 >for the lexer and the parser each, after optimizations.
 >It's really hard to test \ manage such a big grammar. Is there a 

 >way to split it between a number of files?
 >Any kind of an import or using directive?

No, but 3.1 supports inheritance, which can accomplish the same 
effect.  I think :)  (I haven't actually used it myself.)


From Vitaliy at dbsophic.com  Sun Jun 15 04:23:59 2008
From: Vitaliy at dbsophic.com (Vitaliy)
Date: Sun, 15 Jun 2008 14:23:59 +0300
Subject: [antlr-interest] Partitioning Antlr grammar into a couple files
In-Reply-To: <20080615111922.CD72611ECA6@www.antlr.org>
References: <B0DE8B66453D0F4AA67D2A150934999B046FA85A76@ex01.dbsophicHQ.com>
	<20080615111922.CD72611ECA6@www.antlr.org>
Message-ID: <B0DE8B66453D0F4AA67D2A150934999B046FA85A77@ex01.dbsophicHQ.com>

I understand that version 3.1 is not released yet?
Do you know when it might be released? Can I achieve this somehow else in the meantime?

Thanks,
Vitaliy

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Gavin Lambert
Sent: Sunday, June 15, 2008 13:19
To: Vitaliy; antlr-interest at antlr.org
Subject: Re: [antlr-interest] Partitioning Antlr grammar into a couple files

At 23:02 15/06/2008, Vitaliy wrote:
 >Does anyone has an idea how can a large grammar definition be
split
 >between a multiple number of files?
 >I've defined a pretty large grammar - around 160 rules, spanning

 >over 3000 lines, and growing.
 >Antlr generated code is huge as well - around 25,000 lines of
code
 >for the lexer and the parser each, after optimizations.
 >It's really hard to test \ manage such a big grammar. Is there a

 >way to split it between a number of files?
 >Any kind of an import or using directive?

No, but 3.1 supports inheritance, which can accomplish the same
effect.  I think :)  (I haven't actually used it myself.)






__________ Information from ESET NOD32 Antivirus, version of virus signature database 3186 (20080613) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com



__________ Information from ESET NOD32 Antivirus, version of virus signature database 3186 (20080613) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From antlr at mirality.co.nz  Sun Jun 15 04:38:32 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sun, 15 Jun 2008 23:38:32 +1200
Subject: [antlr-interest] Partitioning Antlr grammar into a couple files
In-Reply-To: <B0DE8B66453D0F4AA67D2A150934999B046FA85A77@ex01.dbsophicHQ .com>
References: <B0DE8B66453D0F4AA67D2A150934999B046FA85A76@ex01.dbsophicHQ.com>
	<20080615111922.CD72611ECA6@www.antlr.org>
	<B0DE8B66453D0F4AA67D2A150934999B046FA85A77@ex01.dbsophicHQ.com>
Message-ID: <20080615113843.646AC11ECCB@www.antlr.org>

At 23:23 15/06/2008, Vitaliy wrote:
 >I understand that version 3.1 is not released yet?
 >Do you know when it might be released? Can I achieve this 
somehow
 >else in the meantime?

There's a beta version out -- in fact it's mentioned in the very 
first paragraph on the download page.

The final version is running a little behind schedule, but it 
should be out fairly soon as well.


From Vitaliy at dbsophic.com  Sun Jun 15 04:50:37 2008
From: Vitaliy at dbsophic.com (Vitaliy)
Date: Sun, 15 Jun 2008 14:50:37 +0300
Subject: [antlr-interest] Partitioning Antlr grammar into a couple files
In-Reply-To: <20080615113843.646AC11ECCB@www.antlr.org>
References: <B0DE8B66453D0F4AA67D2A150934999B046FA85A76@ex01.dbsophicHQ.com>
	<20080615111922.CD72611ECA6@www.antlr.org>
	<B0DE8B66453D0F4AA67D2A150934999B046FA85A77@ex01.dbsophicHQ.com>
	<20080615113843.646AC11ECCB@www.antlr.org>
Message-ID: <B0DE8B66453D0F4AA67D2A150934999B046FA85A78@ex01.dbsophicHQ.com>

OK, thx.

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Gavin Lambert
Sent: Sunday, June 15, 2008 13:39
To: Vitaliy
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Partitioning Antlr grammar into a couple files

At 23:23 15/06/2008, Vitaliy wrote:
 >I understand that version 3.1 is not released yet?
 >Do you know when it might be released? Can I achieve this
somehow
 >else in the meantime?

There's a beta version out -- in fact it's mentioned in the very
first paragraph on the download page.

The final version is running a little behind schedule, but it
should be out fairly soon as well.






__________ Information from ESET NOD32 Antivirus, version of virus signature database 3186 (20080613) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com



__________ Information from ESET NOD32 Antivirus, version of virus signature database 3186 (20080613) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From 12345alex at gmx.net  Sun Jun 15 05:51:16 2008
From: 12345alex at gmx.net (alexander krohn)
Date: Sun, 15 Jun 2008 14:51:16 +0200
Subject: [antlr-interest] smalltalk grammar
Message-ID: <48551044.4000708@gmx.net>

hi list.

i found an older mail in the archives(12/2007), about problems with a 
smalltalk-grammar based on[1].

unfortunately there were no answers

antlr.org shows a smalltalk 80 grammar for PCCTS, with the comment i 
should be easy to convert to antlr.

is there any existing smalltalk grammar for antlr?

regards,

alexander

[1] http://chronos-st.blogspot.com/2007/12/smalltalk-in-one-page.html



From parrt at cs.usfca.edu  Sun Jun 15 06:14:06 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 15 Jun 2008 15:14:06 +0200
Subject: [antlr-interest] unexpected token when AST rewrite is used
In-Reply-To: <3e5ed32f0806132039i6e8dc15bqb71c5bb16540603d@mail.gmail.com>
References: <3e5ed32f0806130058p77af6974gd0ec0d971c17f503@mail.gmail.com>
	<1F52A924-313A-4911-8094-B7A5A694DD05@cs.usfca.edu>
	<3e5ed32f0806132039i6e8dc15bqb71c5bb16540603d@mail.gmail.com>
Message-ID: <04F24782-8682-419C-ABA1-74AEF5040A83@cs.usfca.edu>

Oh, right. on a rule ref?  What would that mean?  Onlyworks on tokens.
Ter
On Jun 14, 2008, at 5:39 AM, Bernardo Elayda wrote:

> Hi!
> I switched to 3.1b1 but still got the same error:
> $ java org.antlr.Tool Test.g
> ANTLR Parser Generator  Version 3.1b1 (May 20, 2008)  1989-2008
> error(100): Test.g:11:27: syntax error: antlr: Test.g:11:27:  
> unexpected token: 0
>
> Looks like it still doesn't like the rule with the argument as a  
> child node of a rewrite. I'm including the grammar here.
>
> Any suggestions are welcome.  I'm gonna refactor my grammar.
> tia,
> Bernardo Elayda
> ----------------------------
> grammar Test;
>
> options {
>     output=AST;
> }
>
> tokens {
>     MYPROGRAM;
> }
>
> a : b[0]+ -> ^(MYPROGRAM b[0]+)
>   ;
>
> b[int i] : .
>          ;
>
>     NUMBER : DIGIT+ ('.' DIGIT+)? ;
> IDENTIFIER : ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9')* ;
>    COMMENT : '#' (options {greedy=false;} :.)*  
> '\n' {$channel=HIDDEN;} ;
>         WS : ('\n'|'\r'|' '|'\t') {$channel=HIDDEN;} ;
>
> fragment DIGIT : '0'..'9' ;
>
>
> On Fri, Jun 13, 2008 at 1:06 AM, Terence Parr <parrt at cs.usfca.edu>  
> wrote:
> I'd suggest trying 3.1b1.
> Ter
>
> On Jun 13, 2008, at 9:58 AM, Bernardo Elayda wrote:
>
> Hi,
> Why does Antlr 3.0.1 complain that a token is unexpected for the  
> rule called B which has a single argument:
>
> a : b[0]+ -> ^(MYPROGRAM b[0]+)
>   ;
>
> I can only get Antlr to accept the above rule if I do this:
>
> a : b[0] -> ^(MYPROGRAM b+)
>
> Are rules with arguments not allowed as child nodes in an Antlr AST?
>
> tia,
> Bernardo Elayda
>
>
>


From slt60 at hotmail.com  Sun Jun 15 09:27:02 2008
From: slt60 at hotmail.com (Sandra Turner)
Date: Sun, 15 Jun 2008 16:27:02 +0000
Subject: [antlr-interest] Python - rookie questions
Message-ID: <BAY140-W397AB7EF77DFE219A5C602A2AE0@phx.gbl>


I'm trying to create a Python lexer and parser on an Ubuntu 8.04
system.  I've downloaded ANTLR 3.1b1, gone into the
antlr-3.1b1/runtime/Python directory and typed "python setup.py
install" per http://www.antlr.org/wiki/display/ANTLR3/Python+runtime 
.  How do I run antlr?  I looked at the following, but when I do a
locate "org.antlr.Tools", nothing shows up
http://www.antlr.org/wiki/pages/viewpage.action?pageId=729.

I've also downloaded ANTLRWorks Version 1.1.7 an untarred the file.  What do I do to display the GUI?

I've
also download ANTLRWorks Version 1.1.7 on a Windows XP system and run
the SimpleCalc example from
http://www.antlr.org/wiki/display/ANTLR3/Five+minute+introduction+to+ANTLR+3.
 
I was able to select Generate->Generate Code, but when I selected
Debugger->Debug, I got the error "Error while generating the
grammar: (10): internal error: no such group file Dbg.stg."  Any
advice?  Thanks.

_________________________________________________________________
It?s easy to add contacts from Facebook and other social sites through Windows Live? Messenger. Learn how.
https://www.invite2messenger.net/im/?source=TXT_EML_WLH_LearnHow
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080615/b960d9f5/attachment.html 

From plstelltome at gmail.com  Sun Jun 15 09:55:37 2008
From: plstelltome at gmail.com (yes no)
Date: Sun, 15 Jun 2008 23:55:37 +0700
Subject: [antlr-interest] ANTLRv2 grammar to ANTLRv3 conversion error
Message-ID: <175907ac0806150955q2dbac213p69f16dbff634fc31@mail.gmail.com>

Hello, this is my first message to the list.
I just want to convert an ANTLRv2 grammar to ANTLRv3 with, so I've
downloaded and unpacked the v2v3-0.2.tar.gz, copied calc.g to the same
directory and tried

C:\v2v3>java -cp C:\v2v3 v3me calc.g

and this error appeared:
Exception in thread "main" java.lang.NoClassDefFoundError:
org/antlr/runtime/CharStream

Can you tell me why this error occur, and what lib need to be downloaded in
http://www.antlr.org/download/ for this program to run successful??

Thanks so much
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080615/3a4ee53f/attachment.html 

From pink at odahoda.de  Sun Jun 15 10:16:41 2008
From: pink at odahoda.de (Benjamin Niemann)
Date: Sun, 15 Jun 2008 19:16:41 +0200
Subject: [antlr-interest] Python - rookie questions
In-Reply-To: <BAY140-W397AB7EF77DFE219A5C602A2AE0@phx.gbl>
References: <BAY140-W397AB7EF77DFE219A5C602A2AE0@phx.gbl>
Message-ID: <543531490806151016i280e87e3n2255bbbc61bf55e4@mail.gmail.com>

Hi Sandra,

On Sun, Jun 15, 2008 at 6:27 PM, Sandra Turner <slt60 at hotmail.com> wrote:
> I'm trying to create a Python lexer and parser on an Ubuntu 8.04
> system.  I've downloaded ANTLR 3.1b1, gone into the
> antlr-3.1b1/runtime/Python directory and typed "python setup.py
> install" per http://www.antlr.org/wiki/display/ANTLR3/Python+runtime
> .  How do I run antlr?  I looked at the following, but when I do a
> locate "org.antlr.Tools", nothing shows up
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=729.

You have to point your CLASSPATH to the .jar files in the lib folder:
export CLASSPATH=/path/to/lib/antlr-3.1b1.jar:/path/to/lib/antlr-2.7.7.jar:/path/to/lib/stringtemplate-3.1.jar
Then you can invoke antlr using:
java org.antlr.Tool grammar.g

You may want to wrap this up into a little shell script for ease of use.

> I've also downloaded ANTLRWorks Version 1.1.7 an untarred the file.  What do
> I do to display the GUI?

Mm.. ANTLRWorks comes as a .jar file, you don't have to extract this.
Just invoke with:
java -jar antlrworks-1.1.7.jar

> I've
> also download ANTLRWorks Version 1.1.7 on a Windows XP system and run
> the SimpleCalc example from
> http://www.antlr.org/wiki/display/ANTLR3/Five+minute+introduction+to+ANTLR+3.
>
> I was able to select Generate->Generate Code, but when I selected
> Debugger->Debug, I got the error "Error while generating the
> grammar: (10): internal error: no such group file Dbg.stg."  Any
> advice?

The Python target does not yet support debugging from ANTLRWorks, sorry.


HTH

-Ben

From antlr at mirality.co.nz  Sun Jun 15 13:23:16 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 16 Jun 2008 08:23:16 +1200
Subject: [antlr-interest] ANTLRv2 grammar to ANTLRv3 conversion  error
In-Reply-To: <175907ac0806150955q2dbac213p69f16dbff634fc31@mail.gmail.co
 m>
References: <175907ac0806150955q2dbac213p69f16dbff634fc31@mail.gmail.com>
Message-ID: <20080615202330.3E5EA11ECA3@www.antlr.org>

At 04:55 16/06/2008, yes no wrote:
>Hello, this is my first message to the list.
>I just want to convert an ANTLRv2 grammar to ANTLRv3 with, so 
>I've downloaded and unpacked the v2v3-0.2.tar.gz, copied calc.g 
>to the same directory and tried
>
>C:\v2v3>java -cp C:\v2v3 v3me calc.g
>
>and this error appeared:
>Exception in thread "main" java.lang.NoClassDefFoundError: 
>org/antlr/runtime/CharStream

Your classpath is wrong.  You can't specify the folder containing 
the .jar files, you need to specify each individual .jar file.


From developer at erinors.com  Sun Jun 15 13:56:53 2008
From: developer at erinors.com (=?ISO-8859-2?Q?Norbert_S=E1ndor?=)
Date: Sun, 15 Jun 2008 22:56:53 +0200
Subject: [antlr-interest] wiki-like grammar problem
Message-ID: <48558215.7000604@erinors.com>

Hello!

I'm very new to antlr and grammars in general, so sorry in advance if I 
made a usual newbie mistake :).

I try to create a simple wiki-like grammar (absolutely for 
learning/practising purpose).
My first goal was very simple: the parser should parse multi-line text 
with either plain text or bold text (with the syntax **bold text**).
The grammar is at the bottom of this message. The reason I chose gated 
semantic predicate is because later I want to handle italic, underlined, 
etc. text markup in the same rule (at least I think so now ;) ).

I have two problems:
1. It doesn't work :) - I get "FailedPredicateException(text1, 
{!text1::bold}?)" message in the AntlrWorks interpreter. What is the 
correct way to write such a grammar (with the ability to easily add 
italic, underlined, etc. markup later)?
2. For some reason the generated code is invalid if I use "text" as rule 
name. Why is this?

One more question:
3. Is there a grammar available for parsing a wiki-like text? I saw the 
grammar for Wiki Creole but I don't like it, it handles bold, etc. texts 
in a non-natural way.

Thanks for your help in advance!
Regards:
Norbi

--- >8 --- >8 --- >8 --- >8 --- >8 --- >8 --- >8 --- >8 --- >8 --- >8 
--- >8 ---

grammar Text;

options {
   language = Java;
}

STAR    :    '*';
BOLD_MARKUP
   :    STAR STAR;
TEXT_CHAR
   :    'a'..'z' | ' ';
NEWLINE : ( CR )? LF | CR;
fragment CR : '\r';
fragment LF : '\n';

page    :    text1* (NEWLINE | EOF);

text1
   scope
   {
       boolean bold;
   }
   @init
   {
       $text1::bold=false;
   }
     :
       {!$text1::bold}?=> BOLD_MARKUP {$text1::bold=true;} text1 
BOLD_MARKUP {$text1::bold=false;}
   | TEXT_CHAR+
   ;


From ame01 at gmx.net  Sun Jun 15 17:29:10 2008
From: ame01 at gmx.net (Aurelian Melinte)
Date: Sun, 15 Jun 2008 20:29:10 -0400
Subject: [antlr-interest] Warning(200) for k=1
In-Reply-To: <20080615044836.6326gmx1@mx056.gmx.net>
References: <1.1.1.20080614195739.00c99c28@127.0.0.1>
	<1.1.1.20080614195739.00c99c28@127.0.0.1>
Message-ID: <1.1.1.20080615202610.00c0f3a0@pop.gmx.net>


>
>At k=1 (and when encountering loops, the lexer always behaves like it's k=1), these rules are mutually ambiguous.  You should merge them into a single rule with appropriate lookahead disambiguation.


You are right, there is a problem here. And it is not the only one - in ANTLRv2, the lexer had a k=3.

Regards,
a.


From arjode at uni-koblenz.de  Mon Jun 16 02:03:04 2008
From: arjode at uni-koblenz.de (arjode at uni-koblenz.de)
Date: Mon, 16 Jun 2008 11:03:04 +0200 (CEST)
Subject: [antlr-interest] TokenLabelType doesn't work because of "EOF_TOKEN
 = new CommonToken(EOF)"
Message-ID: <1761.212.16.235.86.1213606984.squirrel@mail.uni-koblenz.de>

Hi all,

I try to use my own token class (which extends "CommonToken"). For this
I've set the "TokenLabelType" option and overriden "Lexer.emit()". But
I've got class cast exceptions because the EOF_TOKEN is hardcoded to the
type of "CommonToken" in the "Token" interface.

  public static final Token EOF_TOKEN = new CommonToken(EOF);

This way "Token" depends on "CommonToken" ... looks bad, doesn't it? This
way the "TokenLabelType" option can't work as any cast to "MyTokenType"
can fail (and ANTLR generates such casts in the parser). Or is there
something else I have to do to use my own token type?

Thanks,
Arne


From fridi70 at gmx.de  Mon Jun 16 02:07:16 2008
From: fridi70 at gmx.de (Fridi)
Date: Mon, 16 Jun 2008 11:07:16 +0200
Subject: [antlr-interest] if-then-else rule design question
Message-ID: <48562D44.9030401@gmx.de>

I have to parse a simple specification like

    if condition then <then-action> (else <else-action>)?

If have build lexer, parser and tree parser for C# using AntlrWorks 
1.1.7. For now, that works perfect. But looking at the tree parser, it 
always runs into the the else-action if the else-part is given, although 
the condition is true and the then-action is done.

I have tried to exit the then-action, but that leeds to mismatched 
tokens exceptions - I think that is because the tree parser is kicked 
out of his AST if I manually jump out of the tree.

How can I create a tree parser that conditionally runs into specific 
leaves of the tree only? I have studied the great ANTLR book, but I did 
not find a similar example right now. Thanks in advance for any advise 
or example!

- fridi -

From felix_do at web.de  Mon Jun 16 02:11:45 2008
From: felix_do at web.de (Felix Dorner)
Date: Mon, 16 Jun 2008 11:11:45 +0200
Subject: [antlr-interest] anonymous templete containing "<"
Message-ID: <48562E51.5030102@web.de>

Hi, my emitter at first generates literal templates for binary 
operations, one of which is the "<" comparison.
I get this exception:

line 1:1: unexpected char: '<'
    at 
org.antlr.stringtemplate.language.AngleBracketTemplateLexer.nextToken(AngleBracketTemplateLexer.java:149)

The templates are instanciated like this:

binaryOp
@init {
$st = %{$start.getText()};
}

:
    | PLUS
    | MINUS
    | MULT
    | DIV
    | MOD
    | DIVMOD
    | ADD
    | REM
    | LT
    | GT
    | LEQ
    | GEQ
    | EQ
    | NEQ
    | AND
    | OR
    ;

From l_fengchao at qq.com  Mon Jun 16 03:08:12 2008
From: l_fengchao at qq.com (=?ISO-8859-1?B?Kl5fXio=?=)
Date: Mon, 16 Jun 2008 18:8:12 +0800
Subject: [antlr-interest] can i use antlr to transfer cobol to java?
Message-ID: <tencent_707655CC1F79ADF16D4E8611@qq.com>

recently, i just study compile.
 i am currently confused about antlr.
 can i use antlr to transfer cobol to java?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080616/1a88a78f/attachment.html 

From antlr at mirality.co.nz  Mon Jun 16 05:35:05 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 17 Jun 2008 00:35:05 +1200
Subject: [antlr-interest] if-then-else rule design question
In-Reply-To: <48562D44.9030401@gmx.de>
References: <48562D44.9030401@gmx.de>
Message-ID: <20080616123519.98DA311EB23@www.antlr.org>

At 21:07 16/06/2008, Fridi wrote:
 >How can I create a tree parser that conditionally runs into
 >specific leaves of the tree only? I have studied the great
 >ANTLR book, but I did not find a similar example right now.

I haven't actually used this myself, but from what I remember of a 
discussion a while back, something like this ought to work:

ifelse
   : ^(IFELSE condition
     ( { $condition.value }? => statement . { do($statement); }
     | . statement { do($statement); }
     )
   )
   ;

(You can adapt the idea for other tree structures.  The main point 
is the use of '.' to indicate "don't care".)


From christianhxc at gmail.com  Mon Jun 16 07:46:01 2008
From: christianhxc at gmail.com (=?ISO-8859-1?Q?Christian_Mel=E9ndez?=)
Date: Mon, 16 Jun 2008 08:46:01 -0600
Subject: [antlr-interest] is there any way make loop staments without a tree?
Message-ID: <ebbb7fab0806160746m751fa8c4gb6447615ec8f3dc3@mail.gmail.com>

hi there, i just want to know if ther is possible to make a loop statement
(for and while) without a tree, if it is a way, how??, almost i already
finish the grammar only needs this. Or tell me a way how to do a simple for
or while instruccion, i need to do something like this

if you put

x = 0;
while (x < 5){
 print(x);
 x++;
}

the output is
01234

i just need how to make the loop, how to visit de condition and the
insturccions again

-- 
Saludos Cordiales,
Christian Melendez
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080616/96a6d91e/attachment.html 

From rschulz at sonic.net  Mon Jun 16 08:17:44 2008
From: rschulz at sonic.net (Randall R Schulz)
Date: Mon, 16 Jun 2008 08:17:44 -0700
Subject: [antlr-interest] is there any way make loop staments without a
	tree?
In-Reply-To: <ebbb7fab0806160746m751fa8c4gb6447615ec8f3dc3@mail.gmail.com>
References: <ebbb7fab0806160746m751fa8c4gb6447615ec8f3dc3@mail.gmail.com>
Message-ID: <200806160817.44673.rschulz@sonic.net>

On Monday 16 June 2008 07:46, Christian Mel?ndez wrote:
> hi there, i just want to know if ther is possible to make a loop
> statement (for and while) without a tree, if it is a way, how??,
> almost i already finish the grammar only needs this. Or tell me a way
> how to do a simple for or while instruccion, i need to do something
> like this
>
> if you put
>
> x = 0;
> while (x < 5){
>  print(x);
>  x++;
> }
>
> the output is
> 01234
>
> i just need how to make the loop, how to visit de condition and the
> insturccions again


It may be my imagination, but it seems that we're seeing this sort of 
question a lot lately, and I think it betrays a misunderstanding of 
what a tool like ANTLR can or should be able to do.

ANTLR is a tool for writing _recognizers_ for formally specified 
grammars, not a complete tool for writing compilers, translators or 
interpreters.

In other words, trying to encode the procedural semantics of your 
language using only ANTLR and furthermore doing this in a single pass 
without producing an intermediate representation of the program that 
was decoded during the parsing phase is really not a good idea, to the 
extent it's even possible.

For sufficiently simple translation or transliteration tasks, a 
single-pass ANTLR (or yacc or Javacc, etc.) parser that builds no 
intermediate representation of the input might be feasible. But to 
actually implement some kind of execution model or anything that 
requires information to propagate from one part of the input to another 
(e.g., a language with declarations) really is not something that can 
be done without building an internal representation of the input.

Rather than try to avoid building an AST or some other representation, 
you should just acknowledge that this extra step will make the rest of 
your job a lot easier.


Randall Schulz

From helink at sandia.gov  Mon Jun 16 08:22:14 2008
From: helink at sandia.gov (Hamilton Link)
Date: Mon, 16 Jun 2008 09:22:14 -0600
Subject: [antlr-interest] FW: CSharp Target...
In-Reply-To: <8CEA81A4BCAC0F448755037FEB63CFA23E0CE6@sf-exch1.mha.local>
References: <8CEA81A4BCAC0F448755037FEB63CFA23E0CE6@sf-exch1.mha.local>
Message-ID: <48568526.8070706@sandia.gov>

In case you didn't see my thread from a little while back, I was having 
trouble with 3.1b1 until I rebuilt the java tool AND the .net assemblies 
it was generating code against (I am targeting CSharp2 and generating 
ASTs). I wasn't using the debug features, though. Personally I'd get a 
simple non-debug example working locally and then once you're sure your 
.net assemblies and grammar-generated code are valid and sufficient you 
can try fancier things.

h


Kris Erickson wrote:
> First of all, let me state that Antlr appears to be an awesome tool.
> AntlrWorks is amazing, being able to debug, combining the lexer and
> parser, and having a parser for walking the trees.  The Antlr book is
> fantastic, the website is at time frustrating, but still and excellent
> reference and the short period of time I have spent with the project has
> made me start considering DSL's for all sorts of purposes.  However,
> trying to work in Csharp has been a bit of a nightmare.
>
> Initially I was trying to work in Antlr 3.1b1, but getting random errors
> that simply did not occur when debugging the parser in Java (as well as
> endless compile errors when even attempting to create a debug, but
> compiling the "Simple tree-based interpreter" (the first one)
> http://www.antlr.org/wiki/display/ANTLR3/Simple+tree-based+interpeter
>
> With the following changes:
>
> 4a5
>   
>>     language=CSharp2;
>>     
> 13a15,18
>   
>> @header {
>> using System.Collections.Generic;
>> }
>>
>>     
> 16c21
> <     List<CommonTree> functionDefinitions = new
> ArrayList<CommonTree>();
> ---
>   
>>     public List<CommonTree> functionDefinitions = new
>> List<CommonTree>();
>>     
> 32c37
> <         functionDefinitions.add($func.tree);
> ---
>   
>>         functionDefinitions.Add($func.tree);
>>     
> 68c73
> < WS  :   (' '|'\t')+ { skip(); }
> ---
>   
>> WS  :   (' '|'\t')+ { Skip(); }
>>     
>
> Results in:
>
> C:\svnprojects\Expression\Expression>java org.antlr.Tool -debug Expr1.g
> ANTLR Parser Generator  Version 3.1b1 (May 20, 2008)  1989-2008
> error(10):  internal error: Expr1.g : java.util.NoSuchElementException:
> no such attribute: n in template context [output File parser
> genericParser(...) region__genericParser__members
> region__genericParser__members if(grammar.grammarIsRoot)_s ubtemplate
> else_subtemplate ctorForRootGrammar createListenerAndHandshake
> if(PARSER)_subtemplate]
> org.antlr.stringtemplate.StringTemplate.checkNullAttributeAgainstFormalA
> rguments(StringTemplate.java:1290)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:814)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> org.antlr.stringtemplate.StringTemplate.getAttribute(StringTemplate.java
> :696)
> org.antlr.stringtemplate.language.ActionEvaluator.attribute(ActionEvalua
> tor.java:360)
> org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.j
> ava:136)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> .java:84)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ConditionalExpr.writeSubTemplate(Condi
> tionalExpr.java:152)
> org.antlr.stringtemplate.language.ConditionalExpr.write(ConditionalExpr.
> java:103)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> 2)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> .java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> 2)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> .java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ConditionalExpr.write(ConditionalExpr.
> java:126)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ConditionalExpr.writeSubTemplate(Condi
> tionalExpr.java:152)
> org.antlr.stringtemplate.language.ConditionalExpr.write(ConditionalExpr.
> java:103)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> 2)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> .java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> 2)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> .java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> 2)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> .java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> 2)
> org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> .java:86)
> org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1271)
> org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:455)
> org.antlr.Tool.generateRecognizer(Tool.java:419)
> org.antlr.Tool.process(Tool.java:286)
> org.antlr.Tool.main(Tool.java:71)
>
> C:\svnprojects\Expression\Expression>
>
> Turning off debug, it compiles but now when it runs, it gets a null
> exception in Expr1Parser.cs
>
> char_literal19=(IToken)Match(input,13,FOLLOW_13_in_expr319);
> char_literal19_tree = (CommonTree)adaptor.Create(char_literal19);
> root_0 = (CommonTree)adaptor.BecomeRoot(char_literal19_tree, root_0);
>
> Because char_literal19 is null.  Input looks good to me: {3+4\n}, so I
> don't know why Match is returning null...
>
> Compiling with 3.0.1 works fine.  So I think, great, I'll use 3.0.1,
> however trying to run --debug with this.  But I get the same error when
> debugging any tree grammer:
>
> In the prog
>
>         int LA1_0 = input.LA(1);
>
> Message:        "Object reference is not set to an instance of an
> object."
> Source:         "Antlr3.Rutime"
> StackTrace: "   at Antlr.Runtime.Debug.DebugTreeNodeStream.LA(Int32
> i)\r\n   at Eval1.prog() in
> C:\\svnprojects\\Expression\\Expression2\\Eval1.cs:line 184\r\n   at
> ConsoleApplication1.Program.Main(String[] args) in
> C:\\svnprojects\\Expression\\Expression2\\Program.cs:line 22\r\n   at
> System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)\r\n
> at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence
> assemblySecurity, String[] args)\r\n   at
> Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()\r\n
> at System.Threading.ThreadHelper.ThreadStart_Context(Object state)\r\n
> at System.Threading.ExecutionContext.Run(ExecutionContext
> executionContext, ContextCallback callback, Object state)\r\n   at
> System.Threading.ThreadHelper.ThreadStart()"
> TargetSite:  {Int32 LA(Int32)}
>
> So, I was wondering:
>
> 1) Is there any version of Antlr with CSharp that run with debug (in the
> tree grammar)?
> 2) Where can I find the sources to the 3.0.1 CSharp runtime so I can
> figure out why the DebugTreeNodeStream fails?  I tried finding it at
> FishEye but downloading the source from Aug 2007 results only in the
> DLL's.
> 3) Is there any examples of Antlr with CSharp for any projects that use
> a Tree Grammar?
> 4) If the 3.1.b1 is the only version of Antlr that supports the CSharp2
> target, and the CSharp2
>    target is so broken it won't run against a simple grammar like the
> "Simple Tree based interpreter",
>    should the all the Wiki examples point to the CSharp2 grammar?  I
> spent many hours thinking my
>    own grammar had some weird errors because I was getting NULL
> exceptions only to find out that
>    the 3.1.b1 with CSharp2 is very broken.
>
> Kris
>
>
>   



From garry.iglesias at gmail.com  Mon Jun 16 08:24:51 2008
From: garry.iglesias at gmail.com (Garry Iglesias)
Date: Mon, 16 Jun 2008 11:24:51 -0400
Subject: [antlr-interest] [C Target] Problem with ANTLR 3.1b1 - C code
	generation
Message-ID: <f71c56ff0806160824l15991f44n63c60b2f74620bd7@mail.gmail.com>

  Hi everybody,
  Sorry to disturb you, I've been successfully using ANTLR v3 with JAVA for
3 months now, for one client, and I'm pretty happy with it.

  Now I tried to generate a C++ parser for another project, and I was quite
disapointed by the absence of support for C++ and the very poor support for
C... First I tried the 3.0.1, which was generated 'good' c sources, but I
was stuck with de C/C++ interface, I needed to have more 'C++' inside my
rules, and the 'extern "C" {}' was too restrictive. (Needed a lot of 'glue
code' to interface the C++ classes).
Then I tried to #include my generated parser files in C into some CPP file.
It worked well except a 'cast' problem (which I localized in the C.stg code
generation template...) that was preventing to compile things like : TFoo
tmp = ANTL3_MALLOC(sizeof(TFoo)).
I hesitated to patch the stg and recompile ANTLR (still 3.0.1 at that time).

  When I remember about a recent beta, which I installed immediatly. Nice
:)... But... ;)
  ...But it seems things are worse !!! I still haven't noticed any cast
problem (yet... :) ). But I found some weird bug, which seems to show the
generated code (I assume from the current C .stgs) is buggy. Sorry, I'm
surprised, (maybe it's on my side but I can't understand how...).

  First here is a extract of my grammar source :

[...]
defIndexed
 : INDEXED sz=bitWidth id=identifier '[' cnt=immediateInteger ']'
access=quotedString
 {
  SStringPtr l_pidStr=$id.s;
[...]

[...]
identifier returns [SStringPtr s]
 : quoted=IDENTIFIER
  {
   const char* l_pString=(const char*)($quoted.text->chars);
   $s = newStringFromLimitedString(1+l_pString,strlen(l_pString)-2);
  }
 ;
[...]

  This looks alright for me, I had almost the same rule in my JAVA project
and it works well. (I remind you that this was not a problem on ANTLR
v3.01)...

  Now here is the generated code by ANTLR :

// The 'buggy' rule code :
static MyparserParser_defIndexed_return
defIndexed(pMyparserParser ctx)
{
 [...]
    id=identifier(ctx);
    [...]
    //Here is the generated code for the rule action :
    {
  SStringPtr l_pidStr=( id != NULL ? id.s : NULL ); //!! THis is NOT a
pointer !!
  [...]
[...]
// The indifier rule that seems to works well...
static MyparserParser_identifier_return
identifier(pMyparserParser ctx)
{
    MyparserParser_cpu_identifier_return retval;
[..]
    return retval;
}
  As you can see, the 'identifier' rule implementation returns its result
into a 'by value' struct, whereas the 'defIndexed' rule implementation try
to see if a 'by reference' (some kind of pointer) result exists...
  I would be greatly surprise to be the first one to find this bug, it seems
so straightforward... Did I do something wrong ? Did I miss something ? I'll
have another note as I 'digged' into the C runtime project, the beta version
has several 'vsrulesfiles' directory (all empty but one... :) ), and some
other 'ghost/empties' directory. It seems far more 'work in progress' than
the 3.0.1.

  Also : I'm a 'warning killer maniac' and compile (using Visual C++ 2005),
in warning level 4, warning as error...

  Finally, as a C++ programmer I don't mind you use classes in your
parser... It can be a C target only. Just if it can compile 'embedded' in a
C++ file, or C++ compliant, without warnings. The most important stuff for a
'C++ ANTLR user' (or for me :) ), is to be able to use 'C++' code inside my
rules actions. I don't mind if ANTLR generated code or ANTLR runtime is C++
or not. I need 'my code' to be C++ that's it. :)

  Despite my first contact with the community is to report a bug, great job
to all of you.
  Thank you !

(By the way : ANTLR is a GREAAAT tool, as a long time 'parser geek' I enjoy
it, and it opens more new perspectives to me :) ).

Garry.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080616/38760408/attachment.html 

From christianhxc at gmail.com  Mon Jun 16 08:37:46 2008
From: christianhxc at gmail.com (=?ISO-8859-1?Q?Christian_Mel=E9ndez?=)
Date: Mon, 16 Jun 2008 09:37:46 -0600
Subject: [antlr-interest] is there any way make loop staments
Message-ID: <ebbb7fab0806160837j6d4e5c0x3c1103436f5463f5@mail.gmail.com>

ok, it seems that i will have to use AST for my grammar, thanks for the info
;)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080616/6210add4/attachment.html 

From George.Shannon at raphaelanalytics.com  Mon Jun 16 09:43:03 2008
From: George.Shannon at raphaelanalytics.com (George J. Shannon)
Date: Mon, 16 Jun 2008 11:43:03 -0500
Subject: [antlr-interest] [C Target] Problem with ANTLR 3.1b1 - C
	codegeneration
In-Reply-To: <f71c56ff0806160824l15991f44n63c60b2f74620bd7@mail.gmail.com>
References: <f71c56ff0806160824l15991f44n63c60b2f74620bd7@mail.gmail.com>
Message-ID: <841400A97A7B4F9BBA629134E68A5FC6@raphael01>

I'm just sending out a note in support of Mr. Iglesias' request.

 

Please note that my intent is not to be critical of the C runtime or imply
that the C runtime ought to mimic OO architecture.  I just want to mention
some of the needs we uncovered that relate specifically to C++.  The bottom
line is that it would be very helpful to have a C++ runtime that makes it
possible to mimic instantiating objects and invoking object methods inside
the grammar in the same way it is currently done using the Java version.

 

Specifically I wanted to request support for a C++ runtime library that is
architected for consistency with the object-oriented design of the existing
Java version.  It has been difficult to transition from Java to use the C
runtime.  Due to time constraints it has been necessary for us to back away
from using the C version for the grammar runtime.   

 

I'm not an architect but for example it would be helpful to have a C++
runtime library with classes that mimic the existing Java classes.  This
would appear to make it more reasonable to reuse existing Java
documentation/books, in particular when using the ANTLRworks tool to develop
and debug a grammar, and also when embedding C++ runtime actions into the
grammar.  Then user needs for separate and unique documentation for a C++
version I hope would be minimized at least in comparison to a non OO runtime
such as C.

 

This is just my opinion if of interest.

 

Regards,

 

George Shannon

President, Raphael Analytics, Inc.

16 Spur Drive

Fenton, MO 63026

(314) 550-5589 (cell)

 <mailto:George.Shannon at raphaelanalytics.com>
George.Shannon at raphaelanalytics.com

 <http://www.raphaelanalytics.com> www.raphaelanalytics.com

 

The information transmitted is intended only for the person or entity to
which it is addressed and may contain confidential and/or privileged
material.  Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by persons or
entities other than the intended recipient is prohibited.   If you received
this in error, please contact the sender and delete the material from any
computer.

  _____  

From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Garry Iglesias
Sent: Monday, June 16, 2008 10:25 AM
To: antlr-interest at antlr.org
Subject: [antlr-interest] [C Target] Problem with ANTLR 3.1b1 - C
codegeneration

 

  Hi everybody,
  Sorry to disturb you, I've been successfully using ANTLR v3 with JAVA for
3 months now, for one client, and I'm pretty happy with it.
 
  Now I tried to generate a C++ parser for another project, and I was quite
disapointed by the absence of support for C++ and the very poor support for
C... First I tried the 3.0.1, which was generated 'good' c sources, but I
was stuck with de C/C++ interface, I needed to have more 'C++' inside my
rules, and the 'extern "C" {}' was too restrictive. (Needed a lot of 'glue
code' to interface the C++ classes).
Then I tried to #include my generated parser files in C into some CPP file.
It worked well except a 'cast' problem (which I localized in the C.stg code
generation template...) that was preventing to compile things like : TFoo
tmp = ANTL3_MALLOC(sizeof(TFoo)).
I hesitated to patch the stg and recompile ANTLR (still 3.0.1 at that time).
 
  When I remember about a recent beta, which I installed immediatly. Nice
:)... But... ;)
  ...But it seems things are worse !!! I still haven't noticed any cast
problem (yet... :) ). But I found some weird bug, which seems to show the
generated code (I assume from the current C .stgs) is buggy. Sorry, I'm
surprised, (maybe it's on my side but I can't understand how...).
 
  First here is a extract of my grammar source :
 
[...]
defIndexed
 : INDEXED sz=bitWidth id=identifier '[' cnt=immediateInteger ']'
access=quotedString
 {
  SStringPtr l_pidStr=$id.s;
[...]
 
[...]
identifier returns [SStringPtr s]
 : quoted=IDENTIFIER
  { 
   const char* l_pString=(const char*)($quoted.text->chars);
   $s = newStringFromLimitedString(1+l_pString,strlen(l_pString)-2);
  }
 ;
[...]
 
  This looks alright for me, I had almost the same rule in my JAVA project
and it works well. (I remind you that this was not a problem on ANTLR
v3.01)...
 
  Now here is the generated code by ANTLR :
 
// The 'buggy' rule code :
static MyparserParser_defIndexed_return
defIndexed(pMyparserParser ctx)
{
 [...]
    id=identifier(ctx);
    [...]
    //Here is the generated code for the rule action :
    {
  SStringPtr l_pidStr=( id != NULL ? id.s : NULL ); //!! THis is NOT a
pointer !!
  [...]
[...]
// The indifier rule that seems to works well...
static MyparserParser_identifier_return
identifier(pMyparserParser ctx)
{   
    MyparserParser_cpu_identifier_return retval;
[..]
    return retval;
}

  As you can see, the 'identifier' rule implementation returns its result
into a 'by value' struct, whereas the 'defIndexed' rule implementation try
to see if a 'by reference' (some kind of pointer) result exists...
  I would be greatly surprise to be the first one to find this bug, it seems
so straightforward... Did I do something wrong ? Did I miss something ? I'll
have another note as I 'digged' into the C runtime project, the beta version
has several 'vsrulesfiles' directory (all empty but one... :) ), and some
other 'ghost/empties' directory. It seems far more 'work in progress' than
the 3.0.1.
 
  Also : I'm a 'warning killer maniac' and compile (using Visual C++ 2005),
in warning level 4, warning as error...
 
  Finally, as a C++ programmer I don't mind you use classes in your
parser... It can be a C target only. Just if it can compile 'embedded' in a
C++ file, or C++ compliant, without warnings. The most important stuff for a
'C++ ANTLR user' (or for me :) ), is to be able to use 'C++' code inside my
rules actions. I don't mind if ANTLR generated code or ANTLR runtime is C++
or not. I need 'my code' to be C++ that's it. :)
 
  Despite my first contact with the community is to report a bug, great job
to all of you.
  Thank you !
 
(By the way : ANTLR is a GREAAAT tool, as a long time 'parser geek' I enjoy
it, and it opens more new perspectives to me :) ).

 

Garry.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080616/ef67d344/attachment-0001.html 

From jimi at temporal-wave.com  Mon Jun 16 11:42:01 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Mon, 16 Jun 2008 11:42:01 -0700
Subject: [antlr-interest] [C Target] Problem with ANTLR 3.1b1 - C
	code	generation
In-Reply-To: <f71c56ff0806160824l15991f44n63c60b2f74620bd7@mail.gmail.com>
References: <f71c56ff0806160824l15991f44n63c60b2f74620bd7@mail.gmail.com>
Message-ID: <1213641721.12274.58.camel@jimi>

On Mon, 2008-06-16 at 11:24 -0400, Garry Iglesias wrote:

>   Hi everybody,
>   Sorry to disturb you, I've been successfully using ANTLR v3 with
> JAVA for 3 months now, for one client, and I'm pretty happy with it.
>  
>   Now I tried to generate a C++ parser for another project, and I was
> quite disapointed by the absence of support for C++

.You should use the 3.1 beta which creates C++ compatible C, as posted
in the API documentation, lots of previous posts and so on. Should have
taken you less time to find this out than to write this email.

>  and the very poor support for C...


Well, that will get you a long way. What do you think is so poor abut
it?


>  First I tried the 3.0.1, which was generated 'good' c sources, but I
> was stuck with de C/C++ interface, I needed to have more 'C++' inside
> my rules, and the 'extern "C" {}' was too restrictive. (Needed a lot
> of 'glue code' to interface the C++ classes).

C++ wasn't supported in 3.0.1


> Then I tried to #include my generated parser files in C into some CPP
> file. It worked well except a 'cast' problem (which I localized in the
> C.stg code generation template...) that was preventing to compile
> things like : TFoo tmp = ANTL3_MALLOC(sizeof(TFoo)).
> I hesitated to patch the stg and recompile ANTLR (still 3.0.1 at that
> time).
>  
>   When I remember about a recent beta, which I installed immediatly.
> Nice :)... But... ;)
>   ...But it seems things are worse !!! 


It is a beta, there will be an update and perhaps in fact a release this
week.


> I still haven't noticed any cast problem (yet... :) ).


But it is worse eh?


>  But I found some weird bug, which seems to show the generated code (I
> assume from the current C .stgs) is buggy. Sorry, I'm surprised,
> (maybe it's on my side but I can't understand how...).


You don;t understand anythign about the internal code generation. The
internal code generation doesn't understand anything about the parameter
types you are passing around - when it does not know anything about the
type, it assumes that it needs setting to NULL. I already have this as
an issue to look into to see something can be done for C++ references
Please remember that this is beta and is the C runtime, adapted for use
with C++ in actions. I don't seem to able to recruit anyone to write
regression tests for the C runtime.

>  
>   First here is a extract of my grammar source :
>  
> [...]
> defIndexed
>  : INDEXED sz=bitWidth id=identifier '[' cnt=immediateInteger ']'
> access=quotedString
>  {
>   SStringPtr l_pidStr=$id.s;
> [...]
>  
> [...]
> identifier returns [SStringPtr s]
>  : quoted=IDENTIFIER
>   { 
>    const char* l_pString=(const char*)($quoted.text->chars);
>    $s = newStringFromLimitedString(1+l_pString,strlen(l_pString)-2);
>   }
>  ;
> [...]
>  
>   This looks alright for me, I had almost the same rule in my JAVA
> project and it works well. (I remind you that this was not a problem
> on ANTLR v3.01)...


Java isn't C++. However in this case it is to do with a change made
outside the C that I first implemented then persuaded everyone to back
out of in the other targets because of this kind of problem. It is
ironic that I didn't want that change, and am getting beaten up over the
change because of a bug where this has been accidentally left in there
in this one case. I thought I had removed them all, obviously I have
not. It is beta, and i normally appreciate the help given me to find
things that are undiscovered by myself.

>  
>   Now here is the generated code by ANTLR :
>  
> // The 'buggy' rule code :
> static MyparserParser_defIndexed_return
> defIndexed(pMyparserParser ctx)
> {
>  [...]
>     id=identifier(ctx);
>     [...]
>     //Here is the generated code for the rule action :
>     {
>   SStringPtr l_pidStr=( id != NULL ? id.s : NULL ); //!! THis is NOT a
> pointer !!


Yep - and how do you expect ANTLR to know that then?



> 
> 
>   As you can see, the 'identifier' rule implementation returns its
> result into a 'by value' struct, whereas the 'defIndexed' rule
> implementation try to see if a 'by reference' (some kind of pointer)
> result exists...
>   I would be greatly surprise to be the first one to find this bug, it
> seems so straightforward... Did I do something wrong ?


Yes - you didn't read any of the prior discussing this, automatic
assumptions about types and NULL and the fact that the C rules already
return a struct by value, which contains your return types, hence you
should not do this. Please use the search to find all the information on
this, then you might not be so surprised by everything in the future.
Essentially you are doing the wrong thing, but the code generator is
generic for all targets and cannot know enough about the context of your
parameters to tell you that you are doing the wrong thing. 


>  Did I miss something ? I'll have another note as I 'digged' into the
> C runtime project, the beta version has several 'vsrulesfiles'
> directory (all empty but one... :) ), and some other 'ghost/empties'
> directory. It seems far more 'work in progress' than the 3.0.1.


No, it is just stuff left over in the tar - again this is beta. When
perforce deletes things from the repository it does not delete the local
directories as quite often this is not what is wanted. Hence when
Terence tars up the release, it comes with empty directories. Why does
this make you believe it is a work in progress? Have you read the C API
documentation, or did you just scan through the directories and assume
you would work it out? A legitimate thing to point out is if I have not
included something like where the vsrules files are, in the docs. I may
not have done, I thought I had, but maybe I didn't yet.


>  
>   Also : I'm a 'warning killer maniac' and compile (using Visual C++
> 2005), in warning level 4, warning as error...]


The output code and the C runtime is compiled using gcc 4.2 and Visual
Studio 2008 using the full warning as error flags, so it will pass 2005
warnings, at least when I say it is released. It is very probable that I
have not found all code generation combinations to pass through the C++
compiler cleanly yet. I do appreciate well explained bug reports. In the
docs I just ask for a bit of respect/politeness, but this only works if
people read the docs I guess. Pay me money then you can complain
bitterly to me. 


>  
>   Finally, as a C++ programmer I don't mind you use classes in your
> parser... It can be a C target only. Just if it can compile 'embedded'
> in a C++ file, or C++ compliant, without warnings. 


Well, in previous posts I called for assistance in testing this, though
I don't remember calling for a bunch of abuse and criticism of something
that i have not yet announced full support for and provide for free in
my spare time (which I don't have a lot of at the moment, hence the
short delay in 3.1 release).


> The most important stuff for a 'C++ ANTLR user' (or for me :) ), is to
> be able to use 'C++' code inside my rules actions. I don't mind if
> ANTLR generated code or ANTLR runtime is C++ or not. I need 'my code'
> to be C++ that's it. :)


That is the intent and I believe what people should be aiming for. Some
people like the whole class stuff though, despite the overheads, so I
will be moving more towards this for the next version of ANTLR, just for
C++ people. However, I am going to write up some documentation about why
this isn't necessarily the best move too.

>  
>   Despite my first contact with the community is to report a bug,
> great job to all of you.
>   Thank you !
>  
> (By the way : ANTLR is a GREAAAT tool, as a long time 'parser geek' I
> enjoy it, and it opens more new perspectives to me :) ).


Well, I am just sorry that my poorly supported beta isn't perfect - I
will make sure I run it all by you before I do anything else of course.
>  
> Garry.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080616/8c43c298/attachment.html 

From Achim.Westermann at gmx.de  Mon Jun 16 12:16:17 2008
From: Achim.Westermann at gmx.de (Achim Westermann)
Date: Mon, 16 Jun 2008 21:16:17 +0200
Subject: [antlr-interest] How to specify lexer options without composite
	grammars
Message-ID: <4856BC01.5080701@gmx.de>

Hi list,

I need to specify the lexer option filter.
Within one file it seems impossible to start:

...
lexer grammar myname; -> unexpected token "lexer"

I tried this in order to start an options block for the lexer.

The wiki example for filter lexers shows only a single lexer grammar. So 
  the next try was to use a composite grammar ant import the lexer 
grammar from the parser grammar.
For java this only seems to work when both files are placed in the 
unnamed package. Otherwise the imported lexer grammar is not generated 
(at least i cannot find it, even if renaming the lexer grammar file will 
cause an error).

Does anybody have a clue? Might the package declaration for java be a bug?

kind regards,

Achim

From antlr at mirality.co.nz  Mon Jun 16 12:48:58 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 17 Jun 2008 07:48:58 +1200
Subject: [antlr-interest] How to specify lexer options without composite
 grammars
In-Reply-To: <4856BC01.5080701@gmx.de>
References: <4856BC01.5080701@gmx.de>
Message-ID: <20080616194911.D126011ED07@www.antlr.org>

At 07:16 17/06/2008, Achim Westermann wrote:
 >I need to specify the lexer option filter.
 >Within one file it seems impossible to start:
 >
 >...
 >lexer grammar myname; -> unexpected token "lexer"
 >
 >I tried this in order to start an options block for the lexer.

You can't "restart" a grammar midway through the file.  Each 
grammar file can only contain one grammar.

 >The wiki example for filter lexers shows only a single lexer
 >grammar. So the next try was to use a composite grammar ant
 >import the lexer grammar from the parser grammar.

You can't combine composite grammars and filter lexers at all.  If 
you want to use a filter lexer, then you will have to create one 
"lexer grammar" (in its own file) and one "parser grammar" (in its 
own file), and link them via the vocabulary options.


From Achim.Westermann at gmx.de  Mon Jun 16 13:03:47 2008
From: Achim.Westermann at gmx.de (Achim Westermann)
Date: Mon, 16 Jun 2008 22:03:47 +0200
Subject: [antlr-interest] How to specify lexer options without
	composite	grammars
Message-ID: <4856C723.5020700@gmx.de>

Thank you for your answer!

so what remains open: importing a lexer grammar for java when both 
grammars are not in the root package seems to fail. I am using the ANT 
task for V3. Perhaps this is buggy? At least it works, if I put all 
grammar files into the root directory. The also the java file for the 
lexer is generated.

kind regards,

Achim

From antlr at jazillian.com  Mon Jun 16 14:26:35 2008
From: antlr at jazillian.com (Andy Tripp)
Date: Mon, 16 Jun 2008 17:26:35 -0400
Subject: [antlr-interest] can i use antlr to transfer cobol to java?
In-Reply-To: <tencent_707655CC1F79ADF16D4E8611@qq.com>
References: <tencent_707655CC1F79ADF16D4E8611@qq.com>
Message-ID: <4856DA8B.1060501@jazillian.com>

*^_^* wrote:
> recently, i just study compile.
> i am currently confused about antlr.
> can i use antlr to transfer cobol to java?
>  

Yes, you can use ANTLR to translate from COBOL to Java.
...But only in the same sense that you can use your feet to get from
New York to Los Angeles ;)

My company offers COBOL-to-Java translation as a service.
See http://www.jazillian.com/indexCOBOL.html

From csanders at hoovers.com  Mon Jun 16 14:36:40 2008
From: csanders at hoovers.com (csanders)
Date: Mon, 16 Jun 2008 16:36:40 -0500
Subject: [antlr-interest] can i use antlr to transfer cobol to java?
In-Reply-To: <4856DA8B.1060501@jazillian.com>
References: <tencent_707655CC1F79ADF16D4E8611@qq.com>
	<4856DA8B.1060501@jazillian.com>
Message-ID: <4856DCE8.40001@hoovers.com>

Do you use ANTLR for your service ?  A very cool idea by the way :).

Andy Tripp wrote:
> *^_^* wrote:
>> recently, i just study compile.
>> i am currently confused about antlr.
>> can i use antlr to transfer cobol to java?
>>  
>
> Yes, you can use ANTLR to translate from COBOL to Java.
> ...But only in the same sense that you can use your feet to get from
> New York to Los Angeles ;)
>
> My company offers COBOL-to-Java translation as a service.
> See http://www.jazillian.com/indexCOBOL.html


From JALuber at gmx.de  Mon Jun 16 15:36:27 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Tue, 17 Jun 2008 00:36:27 +0200
Subject: [antlr-interest] anonymous templete containing "<"
In-Reply-To: <48562E51.5030102@web.de>
References: <48562E51.5030102@web.de>
Message-ID: <20080616223627.285350@gmx.net>

> Hi, my emitter at first generates literal templates for binary 
> operations, one of which is the "<" comparison.
> I get this exception:
> 
> line 1:1: unexpected char: '<'
>     at 
> org.antlr.stringtemplate.language.AngleBracketTemplateLexer.nextToken(AngleBracketTemplateLexer.java:149)
> 
> The templates are instanciated like this:
> 
> binaryOp
> @init {
> $st = %{$start.getText()};
> }
> 
> :
>     | PLUS
>     | MINUS
>     | MULT
>     | DIV
>     | MOD
>     | DIVMOD
>     | ADD
>     | REM
>     | LT
>     | GT
>     | LEQ
>     | GEQ
>     | EQ
>     | NEQ
>     | AND
>     | OR
>     ;

You may want to change '<' into '\<' in this case. StringTemplate escapes templates via '<' and '>'.

Johannes
-- 
"Feel free" - 5 GB Mailbox, 50 FreeSMS/Monat ...
Jetzt GMX ProMail testen: http://www.gmx.net/de/go/promail

From JALuber at gmx.de  Mon Jun 16 15:40:04 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Tue, 17 Jun 2008 00:40:04 +0200
Subject: [antlr-interest] FW: CSharp Target...
In-Reply-To: <48568526.8070706@sandia.gov>
References: <8CEA81A4BCAC0F448755037FEB63CFA23E0CE6@sf-exch1.mha.local>
	<48568526.8070706@sandia.gov>
Message-ID: <20080616224004.280420@gmx.net>

> In case you didn't see my thread from a little while back, I was having 
> trouble with 3.1b1 until I rebuilt the java tool AND the .net assemblies 
> it was generating code against (I am targeting CSharp2 and generating 
> ASTs). I wasn't using the debug features, though. Personally I'd get a 
> simple non-debug example working locally and then once you're sure your 
> .net assemblies and grammar-generated code are valid and sufficient you 
> can try fancier things.
> 
> h

I've been notified that at least one bug vanishes once the library is rebuilt. Maybe that solves at least one of your problems.

Johannes
> 
> 
> Kris Erickson wrote:
> > First of all, let me state that Antlr appears to be an awesome tool.
> > AntlrWorks is amazing, being able to debug, combining the lexer and
> > parser, and having a parser for walking the trees.  The Antlr book is
> > fantastic, the website is at time frustrating, but still and excellent
> > reference and the short period of time I have spent with the project has
> > made me start considering DSL's for all sorts of purposes.  However,
> > trying to work in Csharp has been a bit of a nightmare.
> >
> > Initially I was trying to work in Antlr 3.1b1, but getting random errors
> > that simply did not occur when debugging the parser in Java (as well as
> > endless compile errors when even attempting to create a debug, but
> > compiling the "Simple tree-based interpreter" (the first one)
> > http://www.antlr.org/wiki/display/ANTLR3/Simple+tree-based+interpeter
> >
> > With the following changes:
> >
> > 4a5
> >   
> >>     language=CSharp2;
> >>     
> > 13a15,18
> >   
> >> @header {
> >> using System.Collections.Generic;
> >> }
> >>
> >>     
> > 16c21
> > <     List<CommonTree> functionDefinitions = new
> > ArrayList<CommonTree>();
> > ---
> >   
> >>     public List<CommonTree> functionDefinitions = new
> >> List<CommonTree>();
> >>     
> > 32c37
> > <         functionDefinitions.add($func.tree);
> > ---
> >   
> >>         functionDefinitions.Add($func.tree);
> >>     
> > 68c73
> > < WS  :   (' '|'\t')+ { skip(); }
> > ---
> >   
> >> WS  :   (' '|'\t')+ { Skip(); }
> >>     
> >
> > Results in:
> >
> > C:\svnprojects\Expression\Expression>java org.antlr.Tool -debug Expr1.g
> > ANTLR Parser Generator  Version 3.1b1 (May 20, 2008)  1989-2008
> > error(10):  internal error: Expr1.g : java.util.NoSuchElementException:
> > no such attribute: n in template context [output File parser
> > genericParser(...) region__genericParser__members
> > region__genericParser__members if(grammar.grammarIsRoot)_s ubtemplate
> > else_subtemplate ctorForRootGrammar createListenerAndHandshake
> > if(PARSER)_subtemplate]
> > org.antlr.stringtemplate.StringTemplate.checkNullAttributeAgainstFormalA
> > rguments(StringTemplate.java:1290)
> > org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:814)
> > org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> > org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> > org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> > org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> > org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> > org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> > org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> > org.antlr.stringtemplate.StringTemplate.get(StringTemplate.java:812)
> > org.antlr.stringtemplate.StringTemplate.getAttribute(StringTemplate.java
> > :696)
> > org.antlr.stringtemplate.language.ActionEvaluator.attribute(ActionEvalua
> > tor.java:360)
> > org.antlr.stringtemplate.language.ActionEvaluator.expr(ActionEvaluator.j
> > ava:136)
> > org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> > .java:84)
> > org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> > org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> > org.antlr.stringtemplate.language.ConditionalExpr.writeSubTemplate(Condi
> > tionalExpr.java:152)
> > org.antlr.stringtemplate.language.ConditionalExpr.write(ConditionalExpr.
> > java:103)
> > org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> > org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> > org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> > 2)
> > org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> > .java:86)
> > org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> > org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> > org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> > org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> > 2)
> > org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> > .java:86)
> > org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> > org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> > org.antlr.stringtemplate.language.ConditionalExpr.write(ConditionalExpr.
> > java:126)
> > org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> > org.antlr.stringtemplate.language.ConditionalExpr.writeSubTemplate(Condi
> > tionalExpr.java:152)
> > org.antlr.stringtemplate.language.ConditionalExpr.write(ConditionalExpr.
> > java:103)
> > org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> > org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> > org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> > 2)
> > org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> > .java:86)
> > org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> > org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> > org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> > org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> > 2)
> > org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> > .java:86)
> > org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> > org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> > org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> > org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> > 2)
> > org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> > .java:86)
> > org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> > org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> > org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:715)
> > org.antlr.stringtemplate.language.ASTExpr.writeAttribute(ASTExpr.java:65
> > 2)
> > org.antlr.stringtemplate.language.ActionEvaluator.action(ActionEvaluator
> > .java:86)
> > org.antlr.stringtemplate.language.ASTExpr.write(ASTExpr.java:148)
> > org.antlr.stringtemplate.StringTemplate.write(StringTemplate.java:714)
> > org.antlr.codegen.CodeGenerator.write(CodeGenerator.java:1271)
> > org.antlr.codegen.Target.genRecognizerFile(Target.java:94)
> > org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:455)
> > org.antlr.Tool.generateRecognizer(Tool.java:419)
> > org.antlr.Tool.process(Tool.java:286)
> > org.antlr.Tool.main(Tool.java:71)
> >
> > C:\svnprojects\Expression\Expression>
> >
> > Turning off debug, it compiles but now when it runs, it gets a null
> > exception in Expr1Parser.cs
> >
> > char_literal19=(IToken)Match(input,13,FOLLOW_13_in_expr319);
> > char_literal19_tree = (CommonTree)adaptor.Create(char_literal19);
> > root_0 = (CommonTree)adaptor.BecomeRoot(char_literal19_tree, root_0);
> >
> > Because char_literal19 is null.  Input looks good to me: {3+4\n}, so I
> > don't know why Match is returning null...
> >
> > Compiling with 3.0.1 works fine.  So I think, great, I'll use 3.0.1,
> > however trying to run --debug with this.  But I get the same error when
> > debugging any tree grammer:
> >
> > In the prog
> >
> >         int LA1_0 = input.LA(1);
> >
> > Message:        "Object reference is not set to an instance of an
> > object."
> > Source:         "Antlr3.Rutime"
> > StackTrace: "   at Antlr.Runtime.Debug.DebugTreeNodeStream.LA(Int32
> > i)\r\n   at Eval1.prog() in
> > C:\\svnprojects\\Expression\\Expression2\\Eval1.cs:line 184\r\n   at
> > ConsoleApplication1.Program.Main(String[] args) in
> > C:\\svnprojects\\Expression\\Expression2\\Program.cs:line 22\r\n   at
> > System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)\r\n
> > at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence
> > assemblySecurity, String[] args)\r\n   at
> > Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()\r\n
> > at System.Threading.ThreadHelper.ThreadStart_Context(Object state)\r\n
> > at System.Threading.ExecutionContext.Run(ExecutionContext
> > executionContext, ContextCallback callback, Object state)\r\n   at
> > System.Threading.ThreadHelper.ThreadStart()"
> > TargetSite:  {Int32 LA(Int32)}
> >
> > So, I was wondering:
> >
> > 1) Is there any version of Antlr with CSharp that run with debug (in the
> > tree grammar)?
> > 2) Where can I find the sources to the 3.0.1 CSharp runtime so I can
> > figure out why the DebugTreeNodeStream fails?  I tried finding it at
> > FishEye but downloading the source from Aug 2007 results only in the
> > DLL's.
> > 3) Is there any examples of Antlr with CSharp for any projects that use
> > a Tree Grammar?
> > 4) If the 3.1.b1 is the only version of Antlr that supports the CSharp2
> > target, and the CSharp2
> >    target is so broken it won't run against a simple grammar like the
> > "Simple Tree based interpreter",
> >    should the all the Wiki examples point to the CSharp2 grammar?  I
> > spent many hours thinking my
> >    own grammar had some weird errors because I was getting NULL
> > exceptions only to find out that
> >    the 3.1.b1 with CSharp2 is very broken.
> >
> > Kris
> >
> >
> >   
> 

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

From kris at storefront.com  Mon Jun 16 19:06:21 2008
From: kris at storefront.com (Kris Erickson)
Date: Mon, 16 Jun 2008 19:06:21 -0700
Subject: [antlr-interest] FW: CSharp Target...
In-Reply-To: <48568526.8070706@sandia.gov>
References: <8CEA81A4BCAC0F448755037FEB63CFA23E0CE6@sf-exch1.mha.local>
	<48568526.8070706@sandia.gov>
Message-ID: <8CEA81A4BCAC0F448755037FEB63CFA23E0CEF@sf-exch1.mha.local>

Johannes and Hamilton,

Thanks for the help.  Recompiling the runtime .net sources did get this
working (can't quite figure out how to rebuild the Java tool as ant
produces a ton of errors when I try to build the build.xml).  Looking
forward to getting into the fancier things, now the basic stuff is
figured out.

Kris

-----Original Message-----
From: Hamilton Link [mailto:helink at sandia.gov] 
Sent: Monday, June 16, 2008 8:22 AM
To: Kris Erickson
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] FW: CSharp Target...

In case you didn't see my thread from a little while back, I was having
trouble with 3.1b1 until I rebuilt the java tool AND the .net assemblies
it was generating code against (I am targeting CSharp2 and generating
ASTs). I wasn't using the debug features, though. Personally I'd get a
simple non-debug example working locally and then once you're sure your
.net assemblies and grammar-generated code are valid and sufficient you
can try fancier things.

h


Kris Erickson wrote:
> First of all, let me state that Antlr appears to be an awesome tool.
> AntlrWorks is amazing, being able to debug, combining the lexer and 
> parser, and having a parser for walking the trees.  The Antlr book is 
> fantastic, the website is at time frustrating, but still and excellent

> reference and the short period of time I have spent with the project 
> has made me start considering DSL's for all sorts of purposes.  
> However, trying to work in Csharp has been a bit of a nightmare.
>
> Initially I was trying to work in Antlr 3.1b1, but getting random 
> errors that simply did not occur when debugging the parser in Java (as

> well as endless compile errors when even attempting to create a debug,

> but compiling the "Simple tree-based interpreter" (the first one) 
> http://www.antlr.org/wiki/display/ANTLR3/Simple+tree-based+interpeter
>
> With the following changes:
>
> 4a5
>   
>>     language=CSharp2;
>>     

From antlr at mirality.co.nz  Tue Jun 17 00:51:41 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Tue, 17 Jun 2008 19:51:41 +1200
Subject: [antlr-interest] How to specify lexer options without
 composite	grammars
In-Reply-To: <4856C723.5020700@gmx.de>
References: <4856C723.5020700@gmx.de>
Message-ID: <20080617075149.8887311EC97@www.antlr.org>

At 08:03 17/06/2008, Achim Westermann wrote:
 >so what remains open: importing a lexer grammar for java when 
both
 >grammars are not in the root package seems to fail. I am using 
the
 >ANT task for V3. Perhaps this is buggy? At least it works, if I
 >put all grammar files into the root directory. The also the java 

 >file for the lexer is generated.

I'm not all that familiar with Java and packages, but normally 
you'd put the grammar files together regardless of the output 
package.

If you're saying you're having trouble defining the package for 
the lexer half of a combined grammar: you need to use an alternate 
syntax for that:

header {
   package package.name.here;
}
lexer::header {
   package package.name.here;
}

If you have separate lexer and parser, then in order to import the 
vocabulary from the lexer, ANTLR needs to know where the .tokens 
file is when it's building the parser.  The -lib command line 
option controls where it looks for these (and it also looks in the 
output directory as well).


From mimarob at algonet.se  Tue Jun 17 02:05:18 2008
From: mimarob at algonet.se (mimarob at algonet.se)
Date: Tue, 17 Jun 2008 11:05:18 +0200 (CEST)
Subject: [antlr-interest] Newbie C-code generation
Message-ID: <13538636.644811213693518115.JavaMail.root@webmail4.glocalnet.net>

Hello!

I just installed 3.0.1 antlr and also a daily build from 2008-05-25

I then took some example code (cgram.tgz sorry dont know which 
version) 

The cgram examples work great (ok I had to remove some silly  import 
CToken; stuff but that 
was all)

Then I wanted to generate C-code instead of java so I added language 
to the options section in
the GnuCParser.g file :

options {

   language=C;

        k = 2;
        exportVocab = GNUC;
        buildAST = true;

...
}



$ make
java antlr.Tool StdCParser.g
ANTLR Parser Generator   Version 2.7.7 (20060906)   1989-2005

.... lots of antlr output...

StdCParser.g:1354:     k==3:<end-of-token>,'\u0000'..'\u00ff'
StdCParser.g:1354:     between alt 4 and exit branch of block
java antlr.Tool -glib "StdCParser.g" GnuCParser.g
ANTLR Parser Generator   Version 2.7.7 (20060906)   1989-2005
.\expandedGnuCParser.g:15:0: Invalid option: language
Exiting due to errors.
make: *** [GnuCParser.java] Error 1


Do I need to add the C generation module someway?

Do I need to recompile antlr myself for this to work?

I also tried with 

language=Java;

producing the same result

I tried two java releases, jdk1.6.0_06 and j2sdk1.4.2_16 also with the 
same result

Any ideas?




From asoka250 at gmail.com  Tue Jun 17 02:42:00 2008
From: asoka250 at gmail.com (ASHOK REDDY)
Date: Tue, 17 Jun 2008 04:42:00 -0500
Subject: [antlr-interest] start state not found exception - regd.
Message-ID: <7b0a1e4b0806170242h52d28f59j77de2822340b6aa6@mail.gmail.com>

Hello,

I converted a pre-existing  antlr v2 Graphviz Dot grammar into v3 grammar
using the tool given at antlr.org. The conversion was quite successful
without any errors. But when I tried to load in antlr works, it won't
display syntax tree of the rules and gives "Cannot display rule xyz because
start state not found". Enclosed is the converted Dot Grammar file and the
original one. Thankx a lot for the help.

- Regards.
  Ashok.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080617/0b0bc756/attachment-0001.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Dot.g
Type: application/octet-stream
Size: 9926 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080617/0b0bc756/attachment-0002.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Dot-converted.g
Type: application/octet-stream
Size: 9341 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080617/0b0bc756/attachment-0003.obj 

From JALuber at gmx.de  Tue Jun 17 04:34:02 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Tue, 17 Jun 2008 13:34:02 +0200
Subject: [antlr-interest] FW: CSharp Target...
In-Reply-To: <8CEA81A4BCAC0F448755037FEB63CFA23E0CEF@sf-exch1.mha.local>
References: <8CEA81A4BCAC0F448755037FEB63CFA23E0CE6@sf-exch1.mha.local>
	<48568526.8070706@sandia.gov>
	<8CEA81A4BCAC0F448755037FEB63CFA23E0CEF@sf-exch1.mha.local>
Message-ID: <20080617113402.300010@gmx.net>

> Johannes and Hamilton,
> 
> Thanks for the help.  Recompiling the runtime .net sources did get this
> working

All mentioned errors went away?

> (can't quite figure out how to rebuild the Java tool as ant
> produces a ton of errors when I try to build the build.xml).

Did you put antlr-2.7.7.jar and stringtemplate.jar into the lib directory of ANTLR?

Johannes

>  Looking
> forward to getting into the fancier things, now the basic stuff is
> figured out.
> 
> Kris
> 
> -----Original Message-----
> From: Hamilton Link [mailto:helink at sandia.gov] 
> Sent: Monday, June 16, 2008 8:22 AM
> To: Kris Erickson
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] FW: CSharp Target...
> 
> In case you didn't see my thread from a little while back, I was having
> trouble with 3.1b1 until I rebuilt the java tool AND the .net assemblies
> it was generating code against (I am targeting CSharp2 and generating
> ASTs). I wasn't using the debug features, though. Personally I'd get a
> simple non-debug example working locally and then once you're sure your
> .net assemblies and grammar-generated code are valid and sufficient you
> can try fancier things.
> 
> h
> 
> 
> Kris Erickson wrote:
> > First of all, let me state that Antlr appears to be an awesome tool.
> > AntlrWorks is amazing, being able to debug, combining the lexer and 
> > parser, and having a parser for walking the trees.  The Antlr book is 
> > fantastic, the website is at time frustrating, but still and excellent
> 
> > reference and the short period of time I have spent with the project 
> > has made me start considering DSL's for all sorts of purposes.  
> > However, trying to work in Csharp has been a bit of a nightmare.
> >
> > Initially I was trying to work in Antlr 3.1b1, but getting random 
> > errors that simply did not occur when debugging the parser in Java (as
> 
> > well as endless compile errors when even attempting to create a debug,
> 
> > but compiling the "Simple tree-based interpreter" (the first one) 
> > http://www.antlr.org/wiki/display/ANTLR3/Simple+tree-based+interpeter
> >
> > With the following changes:
> >
> > 4a5
> >   
> >>     language=CSharp2;
> >>     

-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/?mc=sv_ext_mf at gmx

From dbenn at computer.org  Tue Jun 17 06:21:20 2008
From: dbenn at computer.org (David Benn)
Date: Tue, 17 Jun 2008 22:51:20 +0930
Subject: [antlr-interest] [C Target] Problem with ANTLR 3.1b1 - C
	codegeneration
In-Reply-To: <841400A97A7B4F9BBA629134E68A5FC6@raphael01>
References: <f71c56ff0806160824l15991f44n63c60b2f74620bd7@mail.gmail.com>
	<841400A97A7B4F9BBA629134E68A5FC6@raphael01>
Message-ID: <D167331D-6A57-416B-995E-192A9FD8C340@computer.org>

As a counterpoint, I just want to say that I am currently using the C  
Runtime for a fairly non-trivial translation task and am satisfied  
enough to continue using it. I am using it for a commercial  
application with a tight timeline.

Apart from lexing and parsing, I am generating and walking an AST  
multiple times, and have wrapped the C lexer, parser, walker calls in  
a C++ class, and embedded some C++ code within tree walker actions.

Pre-ANTLR3, I used the Java and C++ runtimes, but I can't say that the  
ANTLR3 C Runtime took took all that much getting used to, apart from  
the differences in invocation of the generated code, for which there  
are good, commented examples. Some of the changes in ANTLR3 itself  
probably took more getting used to, but that was only because I'd used  
ANTLR2.x for quite awhile. The book helped with that.

Yes, I've found bugs, and reported them, and found Jim to be very  
responsive. No it's not perfect, but as Jim has said, it's beta.

I'd like to thank Jim for all his hard work on the C Runtime so far.  
I've released free software in the past (e.g. a compiler) and I know  
how much work is involved.

Also, a vote of Thanks to Terrence. ANTLR3 has several welcome  
improvements, and the book is good too.

Regards,

David

On 17/06/2008, at 2:13 AM, George J. Shannon wrote:

> I?m just sending out a note in support of Mr. Iglesias? request.
>
> Please note that my intent is not to be critical of the C runtime or  
> imply that the C runtime ought to mimic OO architecture.  I just  
> want to mention some of the needs we uncovered that relate  
> specifically to C++.  The bottom line is that it would be very  
> helpful to have a C++ runtime that makes it possible to mimic  
> instantiating objects and invoking object methods inside the grammar  
> in the same way it is currently done using the Java version.
>
> Specifically I wanted to request support for a C++ runtime library  
> that is architected for consistency with the object-oriented design  
> of the existing Java version.  It has been difficult to transition  
> from Java to use the C runtime.  Due to time constraints it has been  
> necessary for us to back away from using the C version for the  
> grammar runtime.
>
> I?m not an architect but for example it would be helpful to have a C+ 
> + runtime library with classes that mimic the existing Java  
> classes.  This would appear to make it more reasonable to reuse  
> existing Java documentation/books, in particular when using the  
> ANTLRworks tool to develop and debug a grammar, and also when  
> embedding C++ runtime actions into the grammar.  Then user needs for  
> separate and unique documentation for a C++ version I hope would be  
> minimized at least in comparison to a non OO runtime such as C.
>
> This is just my opinion if of interest.
>
> Regards,
>
> George Shannon
> President, Raphael Analytics, Inc.
> 16 Spur Drive
> Fenton, MO 63026
> (314) 550-5589 (cell)
> George.Shannon at raphaelanalytics.com
> www.raphaelanalytics.com
>
> The information transmitted is intended only for the person or  
> entity to which it is addressed and may contain confidential and/or  
> privileged material.  Any review, retransmission, dissemination or  
> other use of, or taking of any action in reliance upon, this  
> information by persons or entities other than the intended recipient  
> is prohibited.   If you received this in error, please contact the  
> sender and delete the material from any computer.
> From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org 
> ] On Behalf Of Garry Iglesias
> Sent: Monday, June 16, 2008 10:25 AM
> To: antlr-interest at antlr.org
> Subject: [antlr-interest] [C Target] Problem with ANTLR 3.1b1 - C  
> codegeneration
>
>   Hi everybody,
>   Sorry to disturb you, I've been successfully using ANTLR v3 with  
> JAVA for 3 months now, for one client, and I'm pretty happy with it.
>
>   Now I tried to generate a C++ parser for another project, and I  
> was quite disapointed by the absence of support for C++ and the very  
> poor support for C... First I tried the 3.0.1, which was generated  
> 'good' c sources, but I was stuck with de C/C++ interface, I needed  
> to have more 'C++' inside my rules, and the 'extern "C" {}' was too  
> restrictive. (Needed a lot of 'glue code' to interface the C++  
> classes).
> Then I tried to #include my generated parser files in C into some  
> CPP file. It worked well except a 'cast' problem (which I localized  
> in the C.stg code generation template...) that was preventing to  
> compile things like : TFoo tmp = ANTL3_MALLOC(sizeof(TFoo)).
> I hesitated to patch the stg and recompile ANTLR (still 3.0.1 at  
> that time).
>
>   When I remember about a recent beta, which I installed immediatly.  
> Nice :)... But... ;)
>   ...But it seems things are worse !!! I still haven't noticed any  
> cast problem (yet... :) ). But I found some weird bug, which seems  
> to show the generated code (I assume from the current C .stgs) is  
> buggy. Sorry, I'm surprised, (maybe it's on my side but I can't  
> understand how...).
>
>   First here is a extract of my grammar source :
>
> [...]
> defIndexed
>  : INDEXED sz=bitWidth id=identifier '[' cnt=immediateInteger ']'  
> access=quotedString
>  {
>   SStringPtr l_pidStr=$id.s;
> [...]
>
> [...]
> identifier returns [SStringPtr s]
>  : quoted=IDENTIFIER
>   {
>    const char* l_pString=(const char*)($quoted.text->chars);
>    $s = newStringFromLimitedString(1+l_pString,strlen(l_pString)-2);
>   }
>  ;
> [...]
>
>   This looks alright for me, I had almost the same rule in my JAVA  
> project and it works well. (I remind you that this was not a problem  
> on ANTLR v3.01)...
>
>   Now here is the generated code by ANTLR :
>
> // The 'buggy' rule code :
> static MyparserParser_defIndexed_return
> defIndexed(pMyparserParser ctx)
> {
>  [...]
>     id=identifier(ctx);
>     [...]
>     //Here is the generated code for the rule action :
>     {
>   SStringPtr l_pidStr=( id != NULL ? id.s : NULL ); //!! THis is NOT  
> a pointer !!
>   [...]
> [...]
> // The indifier rule that seems to works well...
> static MyparserParser_identifier_return
> identifier(pMyparserParser ctx)
> {
>     MyparserParser_cpu_identifier_return retval;
> [..]
>     return retval;
> }
>
>   As you can see, the 'identifier' rule implementation returns its  
> result into a 'by value' struct, whereas the 'defIndexed' rule  
> implementation try to see if a 'by reference' (some kind of pointer)  
> result exists...
>   I would be greatly surprise to be the first one to find this bug,  
> it seems so straightforward... Did I do something wrong ? Did I miss  
> something ? I'll have another note as I 'digged' into the C runtime  
> project, the beta version has several 'vsrulesfiles' directory (all  
> empty but one... :) ), and some other 'ghost/empties' directory. It  
> seems far more 'work in progress' than the 3.0.1.
>
>   Also : I'm a 'warning killer maniac' and compile (using Visual C++  
> 2005), in warning level 4, warning as error...
>
>   Finally, as a C++ programmer I don't mind you use classes in your  
> parser... It can be a C target only. Just if it can compile  
> 'embedded' in a C++ file, or C++ compliant, without warnings. The  
> most important stuff for a 'C++ ANTLR user' (or for me :) ), is to  
> be able to use 'C++' code inside my rules actions. I don't mind if  
> ANTLR generated code or ANTLR runtime is C++ or not. I need 'my  
> code' to be C++ that's it. :)
>
>   Despite my first contact with the community is to report a bug,  
> great job to all of you.
>   Thank you !
>
> (By the way : ANTLR is a GREAAAT tool, as a long time 'parser geek'  
> I enjoy it, and it opens more new perspectives to me :) ).
>
> Garry.

Regards,

David Benn
dbenn at computer.org
0407 261163

"The real voyage of discovery consists not in seeking new landscapes  
but in having new eyes." (Marcel Proust)




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080617/13993db5/attachment-0001.html 

From kris at storefront.com  Tue Jun 17 10:57:55 2008
From: kris at storefront.com (Kris Erickson)
Date: Tue, 17 Jun 2008 10:57:55 -0700
Subject: [antlr-interest] FW: CSharp Target...
In-Reply-To: <20080617113402.300010@gmx.net>
References: <8CEA81A4BCAC0F448755037FEB63CFA23E0CE6@sf-exch1.mha.local><48568526.8070706@sandia.gov>
	<8CEA81A4BCAC0F448755037FEB63CFA23E0CEF@sf-exch1.mha.local>
	<20080617113402.300010@gmx.net>
Message-ID: <8CEA81A4BCAC0F448755037FEB63CFA23E0CF2@sf-exch1.mha.local>

Yes, I had them in my classpath, I didn't have junit.jar (which Hamilton
pointed me to).  
I had to remove $codegen.dir from src.path 

    <path id="src.path">
        <pathelement location="${src.dir}" />
<!--        <pathelement location="${codegen.dir}" />  -->
    </path> 

or I got a ton of duplicate classes like:

[myjavac] C:\Program Files\Antlr\antlr-3.1b1\codegen\ANTLRLexer.java:61:
duplicate class: org.antlr.tool.ANTLRLexer

I also changed /src/org/antlr/codegen/templates/CSharp2/Dbg.stg

$ cat Dbg.stg.diff 
110c110
< public <name>(<inputStreamType> input, DebugEventListener dbg,
RecognizerSharedState state)
---
> public <name>(<inputStreamType> input, IDebugEventListener dbg,
RecognizerSharedState state)
124c124
< public <name>(<inputStreamType> input, DebugEventListener dbg,
RecognizerSharedState state<grammar.delegators:{g|, <g.recognizerName>
<g:delegateName()>}>)
---
> public <name>(<inputStreamType> input, IDebugEventListener dbg,
RecognizerSharedState state<grammar.delegators:{g|, <g.recognizerName>
<g:delegateName()>}>)
133c133
< public <name>(<inputStreamType> input, DebugEventListener dbg)
---
> public <name>(<inputStreamType> input, IDebugEventListener dbg)

And now I don't get compile errors when enabling -debug.

Kris

-----Original Message-----
From: Johannes Luber [mailto:JALuber at gmx.de] 
Sent: Tuesday, June 17, 2008 4:34 AM
To: Kris Erickson
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] FW: CSharp Target...

> Johannes and Hamilton,
> 
> Thanks for the help.  Recompiling the runtime .net sources did get 
> this working

All mentioned errors went away?

> (can't quite figure out how to rebuild the Java tool as ant produces a

> ton of errors when I try to build the build.xml).

Did you put antlr-2.7.7.jar and stringtemplate.jar into the lib
directory of ANTLR?

Johannes


From jimi at temporal-wave.com  Tue Jun 17 12:28:19 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Tue, 17 Jun 2008 12:28:19 -0700
Subject: [antlr-interest] Newbie C-code generation
In-Reply-To: <13538636.644811213693518115.JavaMail.root@webmail4.glocalnet.net>
References: <13538636.644811213693518115.JavaMail.root@webmail4.glocalnet.net>
Message-ID: <1213730899.12274.114.camel@jimi>

On Tue, 2008-06-17 at 11:05 +0200, mimarob at algonet.se wrote:

> Hello!
> 
> I just installed 3.0.1 antlr and also a daily build from 2008-05-25
> 
> I then took some example code (cgram.tgz sorry dont know which 
> version) 
> 
> The cgram examples work great (ok I had to remove some silly  import 
> CToken; stuff but that 
> was all)
> 
> Then I wanted to generate C-code instead of java so I added language 
> to the options section in
> the GnuCParser.g file :
> 
> options {
> 
>    language=C;
> 
>         k = 2;
>         exportVocab = GNUC;
>         buildAST = true;
> 
> ...
> }
> 
> 
> 
> $ make
> java antlr.Tool StdCParser.g
> ANTLR Parser Generator   Version 2.7.7 (20060906)   1989-2005
> 
> .... lots of antlr output...
> 
> StdCParser.g:1354:     k==3:<end-of-token>,'\u0000'..'\u00ff'
> StdCParser.g:1354:     between alt 4 and exit branch of block
> java antlr.Tool -glib "StdCParser.g" GnuCParser.g
> ANTLR Parser Generator   Version 2.7.7 (20060906)   1989-2005
> .\expandedGnuCParser.g:15:0: Invalid option: language
> Exiting due to errors.
> make: *** [GnuCParser.java] Error 1
> 
> 
> Do I need to add the C generation module someway?
> 
> Do I need to recompile antlr myself for this to work?



You are suing ANTLR 2.7.7 not ANTLR 3, so you cannot generate C code.
Remove the pre-installed antlr 2 package from your system and download
the ANTLR 3 atr from the dowloads section of the web site.

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080617/a3775d92/attachment.html 

From victor.panizza at gmail.com  Tue Jun 17 17:17:29 2008
From: victor.panizza at gmail.com (victor panizza)
Date: Tue, 17 Jun 2008 19:17:29 -0500
Subject: [antlr-interest] Free Text mixed with rules
Message-ID: <25261aff0806171717v24d0af30y4f8b90b65890681c@mail.gmail.com>

Hello All,

I have the follow issue:

I'm trying to develop a Parse Grammar and a Tree Parse for read PL/SQL
scripts and translate it to DB2 SQL PL. Now, there're many diferences
beetwen thems and this diferences are defined by the rules and some
literals, but there're many things in common like the IF LOGICAL_OPERATION
THEN END IF;

My Idea is create a Node in the tree (using a token like FREE_TEXT) where I
can put each segment of free text like the above and later walk the tree and
get this free text in the same order on they were recongnized. For example:

IF (LAST_DAY(PDATE)!=PDATE) THEN
  PDATEAUX := ADD_MONTHS(PDATE, PMONTHS);
  RETURN ADD_MONTHS(PDATE, PMONTHS);
END IF;

In text tree representation:

(ROOT
          (FREE_TEXT "IF (LAST_DAY(PDATE)!=PDATE) THEN")
          (ASSING "PDATEAUX := PDATE;")
          (FREE_TEXT "RETURN ADD_MONTHS(PDATE, PMONTHS);")
           (FREE_TEXT "END IF;);")
)


Any idea, thanks in advance!!!!

-- 
Saludos,
Victor Panizza
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080617/ed8e128a/attachment.html 

From lgcraymer at yahoo.com  Tue Jun 17 17:49:52 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Tue, 17 Jun 2008 17:49:52 -0700 (PDT)
Subject: [antlr-interest] Free Text mixed with rules
Message-ID: <898270.11982.qm@web55901.mail.re3.yahoo.com>

If you want to recover text in its original format, you might as well use the start and stop markers on the first and last tokens of the "text" sequence from the input stream (ANTLR 3 keeps the text input stream in memory).  At the same time, you are probably best off in going ahead and including an expression grammar in your parser to handle what you are calling "free text"--otherwise, you will have to deal with nested conditionals in your lexer, and that gets very messy.  You can repackage the "text" segments in the output AST as a replacement for the nodes matched by the expression grammar.

--Loring


----- Original Message ----
From: victor panizza <victor.panizza at gmail.com>
To: antlr-interest at antlr.org
Sent: Tuesday, June 17, 2008 5:17:29 PM
Subject: [antlr-interest] Free Text mixed with rules


Hello All, 
 
I have the follow issue:
 
I'm trying to develop a Parse Grammar and a Tree Parse for read PL/SQL scripts and translate it to DB2 SQL PL. Now, there're many diferences beetwen thems and this diferences are defined by the rules and some literals, but there're many things in common like the IF LOGICAL_OPERATION THEN END IF;
 
My Idea is create a Node in the tree (using a token like FREE_TEXT) where I can put each segment of free text like the above and later walk the tree and get this free text in the same order on they were recongnized. For example: 
 
IF (LAST_DAY(PDATE)!=PDATE) THEN
  PDATEAUX := ADD_MONTHS(PDATE, PMONTHS);
  RETURN ADD_MONTHS(PDATE, PMONTHS);
END IF;
 
In text tree representation:
 
(ROOT
          (FREE_TEXT "IF (LAST_DAY(PDATE)!=PDATE) THEN")
          (ASSING "PDATEAUX := PDATE;")
          (FREE_TEXT "RETURN ADD_MONTHS(PDATE, PMONTHS);")
          (FREE_TEXT "END IF;);")
)
 
 
Any idea, thanks in advance!!!!
 
-- 
Saludos,
Victor Panizza 


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080617/3293a387/attachment.html 

From antlr-list at arizona-software.ch  Tue Jun 17 19:16:06 2008
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Tue, 17 Jun 2008 19:16:06 -0700
Subject: [antlr-interest] ANTLRWorks 1.2b5 available (includes ST 3.2 +
	ANTLR 3.1)
Message-ID: <D0683224-6D11-4012-84F3-4B45C2D9DD71@arizona-software.ch>

Hi,

I updated ANTLRWorks to include the proper version of ST and ANTLR.  
Those of you using version 1.2b4 should update to 1.2b5: you will see  
many issues solved because version b4 didn't have the correct version  
of ST packaged with AW. Sorry.

Download links are located at this page:
http://www.antlr.org/works/index.html

Jean


From mimarob at algonet.se  Wed Jun 18 02:08:11 2008
From: mimarob at algonet.se (mimarob at algonet.se)
Date: Wed, 18 Jun 2008 11:08:11 +0200 (CEST)
Subject: [antlr-interest] Ang: Re:  Newbie C-code generation
Message-ID: <22311186.656951213780091956.JavaMail.root@webmail4.glocalnet.net>

Hmm I'm pretty sure I haven't got a pre installed antlr on my system

I downloaded the package from http://www.antlr.org/download/antlr-3.1
b1.tar.gz

Here is my classpath:

.;c:\Documents and Settings\qeribra\cgram\cgram\grammars;c:\Documents 
and Settings\qeribra\antlr\antlr-3.1b1\lib\antlr-3.1b1.jar;c:\Documents 
and Settings\qeribra\antlr\antlr-3.1b1\lib\antlr-2.7.7.jar;c:\Documents 
and Settings\qeribra\antlr\antlr-3.1b1\lib\stringtemplate-3.1.jar;c:
\Documents and Settings\qeribra\antlr\antlr-3.1b1\lib\antlr-runtime-
current.jar;c:\Documents and Settings\qeribra\antlr\antlr-3.1
b1\lib\gunit-1.0.2.jar


When I try to remove the antlr-2.7.7.jar I get the 

java.lang.NoClassDefFoundError: antlr/Tool

error.

I thought the antlr-3.1b1.jar was the new antlr or?


----Ursprungligt meddelande----
Fr?n: jimi at temporal-wave.com
Datum: 2008-jun-17 21:28
Till: "mimarob at algonet.se"<mimarob at algonet.se>
Kopia: <antlr-interest at antlr.org>
?rende: Re: [antlr-interest] Newbie C-code generation

On Tue, 2008-06-17 at 11:05 +0200, mimarob at algonet.se wrote:

> Hello!
> 
> I just installed 3.0.1 antlr and also a daily build from 2008-05-25
> 
> I then took some example code (cgram.tgz sorry dont know which 
> version) 
> 
> The cgram examples work great (ok I had to remove some silly  
import 
> CToken; stuff but that 
> was all)
> 
> Then I wanted to generate C-code instead of java so I added 
language 
> to the options section in
> the GnuCParser.g file :
> 
> options {
> 
>    language=C;
> 
>         k = 2;
>         exportVocab = GNUC;
>         buildAST = true;
> 
> ...
> }
> 
> 
> 
> $ make
> java antlr.Tool StdCParser.g
> ANTLR Parser Generator   Version 2.7.7 (20060906)   1989-2005
> 
> .... lots of antlr output...
> 
> StdCParser.g:1354:     k==3:<end-of-token>,'\u0000'..'\u00ff'
> StdCParser.g:1354:     between alt 4 and exit branch of block
> java antlr.Tool -glib "StdCParser.g" GnuCParser.g
> ANTLR Parser Generator   Version 2.7.7 (20060906)   1989-2005
> .\expandedGnuCParser.g:15:0: Invalid option: language
> Exiting due to errors.
> make: *** [GnuCParser.java] Error 1
> 
> 
> Do I need to add the C generation module someway?
> 
> Do I need to recompile antlr myself for this to work?



You are suing ANTLR 2.7.7 not ANTLR 3, so you cannot generate C code.
Remove the pre-installed antlr 2 package from your system and download
the ANTLR 3 atr from the dowloads section of the web site.

Jim




From JALuber at gmx.de  Wed Jun 18 04:42:32 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 18 Jun 2008 13:42:32 +0200
Subject: [antlr-interest] Ang: Re:  Newbie C-code generation
In-Reply-To: <22311186.656951213780091956.JavaMail.root@webmail4.glocalnet.net>
References: <22311186.656951213780091956.JavaMail.root@webmail4.glocalnet.net>
Message-ID: <20080618114232.60440@gmx.net>

> Hmm I'm pretty sure I haven't got a pre installed antlr on my system
> 
> I downloaded the package from http://www.antlr.org/download/antlr-3.1
> b1.tar.gz
> 
> Here is my classpath:
> 
> .;c:\Documents and Settings\qeribra\cgram\cgram\grammars;c:\Documents 
> and Settings\qeribra\antlr\antlr-3.1b1\lib\antlr-3.1b1.jar;c:\Documents 
> and Settings\qeribra\antlr\antlr-3.1b1\lib\antlr-2.7.7.jar;c:\Documents 
> and Settings\qeribra\antlr\antlr-3.1b1\lib\stringtemplate-3.1.jar;c:
> \Documents and Settings\qeribra\antlr\antlr-3.1b1\lib\antlr-runtime-
> current.jar;c:\Documents and Settings\qeribra\antlr\antlr-3.1
> b1\lib\gunit-1.0.2.jar
> 
> 
> When I try to remove the antlr-2.7.7.jar I get the 
> 
> java.lang.NoClassDefFoundError: antlr/Tool
> 
> error.
> 
> I thought the antlr-3.1b1.jar was the new antlr or?

ANTLR 3 is still dependent on ANTLR 2.7.7. Ter plans to change to self-hosting, but that takes longer than expected.

Johannes
> 
> 
> ----Ursprungligt meddelande----
> Fr?n: jimi at temporal-wave.com
> Datum: 2008-jun-17 21:28
> Till: "mimarob at algonet.se"<mimarob at algonet.se>
> Kopia: <antlr-interest at antlr.org>
> ?rende: Re: [antlr-interest] Newbie C-code generation
> 
> On Tue, 2008-06-17 at 11:05 +0200, mimarob at algonet.se wrote:
> 
> > Hello!
> > 
> > I just installed 3.0.1 antlr and also a daily build from 2008-05-25
> > 
> > I then took some example code (cgram.tgz sorry dont know which 
> > version) 
> > 
> > The cgram examples work great (ok I had to remove some silly  
> import 
> > CToken; stuff but that 
> > was all)
> > 
> > Then I wanted to generate C-code instead of java so I added 
> language 
> > to the options section in
> > the GnuCParser.g file :
> > 
> > options {
> > 
> >    language=C;
> > 
> >         k = 2;
> >         exportVocab = GNUC;
> >         buildAST = true;
> > 
> > ...
> > }
> > 
> > 
> > 
> > $ make
> > java antlr.Tool StdCParser.g
> > ANTLR Parser Generator   Version 2.7.7 (20060906)   1989-2005
> > 
> > .... lots of antlr output...
> > 
> > StdCParser.g:1354:     k==3:<end-of-token>,'\u0000'..'\u00ff'
> > StdCParser.g:1354:     between alt 4 and exit branch of block
> > java antlr.Tool -glib "StdCParser.g" GnuCParser.g
> > ANTLR Parser Generator   Version 2.7.7 (20060906)   1989-2005
> > .\expandedGnuCParser.g:15:0: Invalid option: language
> > Exiting due to errors.
> > make: *** [GnuCParser.java] Error 1
> > 
> > 
> > Do I need to add the C generation module someway?
> > 
> > Do I need to recompile antlr myself for this to work?
> 
> 
> 
> You are suing ANTLR 2.7.7 not ANTLR 3, so you cannot generate C code.
> Remove the pre-installed antlr 2 package from your system and download
> the ANTLR 3 atr from the dowloads section of the web site.
> 
> Jim
> 
> 

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

From JALuber at gmx.de  Wed Jun 18 04:43:17 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 18 Jun 2008 13:43:17 +0200
Subject: [antlr-interest] FW: CSharp Target...
In-Reply-To: <8CEA81A4BCAC0F448755037FEB63CFA23E0CF2@sf-exch1.mha.local>
References: <8CEA81A4BCAC0F448755037FEB63CFA23E0CE6@sf-exch1.mha.local><48568526.8070706@sandia.gov>
	<8CEA81A4BCAC0F448755037FEB63CFA23E0CEF@sf-exch1.mha.local>
	<20080617113402.300010@gmx.net>
	<8CEA81A4BCAC0F448755037FEB63CFA23E0CF2@sf-exch1.mha.local>
Message-ID: <20080618114317.58600@gmx.net>


> Yes, I had them in my classpath, I didn't have junit.jar (which Hamilton
> pointed me to).  
> I had to remove $codegen.dir from src.path 
> 
>     <path id="src.path">
>         <pathelement location="${src.dir}" />
> <!--        <pathelement location="${codegen.dir}" />  -->
>     </path> 
> 
> or I got a ton of duplicate classes like:
> 
> [myjavac] C:\Program Files\Antlr\antlr-3.1b1\codegen\ANTLRLexer.java:61:
> duplicate class: org.antlr.tool.ANTLRLexer
> 
> I also changed /src/org/antlr/codegen/templates/CSharp2/Dbg.stg
> 
> $ cat Dbg.stg.diff 
> 110c110
> < public <name>(<inputStreamType> input, DebugEventListener dbg,
> RecognizerSharedState state)
> ---
> > public <name>(<inputStreamType> input, IDebugEventListener dbg,
> RecognizerSharedState state)
> 124c124
> < public <name>(<inputStreamType> input, DebugEventListener dbg,
> RecognizerSharedState state<grammar.delegators:{g|, <g.recognizerName>
> <g:delegateName()>}>)
> ---
> > public <name>(<inputStreamType> input, IDebugEventListener dbg,
> RecognizerSharedState state<grammar.delegators:{g|, <g.recognizerName>
> <g:delegateName()>}>)
> 133c133
> < public <name>(<inputStreamType> input, DebugEventListener dbg)
> ---
> > public <name>(<inputStreamType> input, IDebugEventListener dbg)
> 
> And now I don't get compile errors when enabling -debug.

Thanks! Fixed that on my comp already. :)

Johannes
> 
> Kris
> 
> -----Original Message-----
> From: Johannes Luber [mailto:JALuber at gmx.de] 
> Sent: Tuesday, June 17, 2008 4:34 AM
> To: Kris Erickson
> Cc: antlr-interest at antlr.org
> Subject: Re: [antlr-interest] FW: CSharp Target...
> 
> > Johannes and Hamilton,
> > 
> > Thanks for the help.  Recompiling the runtime .net sources did get 
> > this working
> 
> All mentioned errors went away?
> 
> > (can't quite figure out how to rebuild the Java tool as ant produces a
> 
> > ton of errors when I try to build the build.xml).
> 
> Did you put antlr-2.7.7.jar and stringtemplate.jar into the lib
> directory of ANTLR?
> 
> Johannes

-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

From antlr at mirality.co.nz  Wed Jun 18 04:53:56 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Wed, 18 Jun 2008 23:53:56 +1200
Subject: [antlr-interest] Ang: Re:  Newbie C-code generation
In-Reply-To: <22311186.656951213780091956.JavaMail.root@webmail4.glocaln
	et.net>
References: <22311186.656951213780091956.JavaMail.root@webmail4.glocalnet.net>
Message-ID: <20080618115408.DC6AA11EBF9@www.antlr.org>

At 21:08 18/06/2008, mimarob at algonet.se wrote:
 >When I try to remove the antlr-2.7.7.jar I get the
 >
 >java.lang.NoClassDefFoundError: antlr/Tool
 >
 >error.
 >
 >I thought the antlr-3.1b1.jar was the new antlr or?

Yeah, but as Johannes said you still need 2.7.7 in your classpath 
for v3 at the moment.

 >> java antlr.Tool StdCParser.g
 >> ANTLR Parser Generator   Version 2.7.7 (20060906)   1989-2005

Here's your problem -- this is the wrong command line.

For v3, you need to use "org.antlr.Tool" instead of "antlr.Tool".


From mimarob at algonet.se  Wed Jun 18 06:10:06 2008
From: mimarob at algonet.se (mimarob at algonet.se)
Date: Wed, 18 Jun 2008 15:10:06 +0200 (CEST)
Subject: [antlr-interest] Newbie C-code generation
Message-ID: <28164238.646921213794606869.JavaMail.root@webmail3.glocalnet.net>

Ok so I was running an old V2 example..

Now the code generation seems to work with the newer examples-v3.tar

Thank you all for your kind tips!

/Erik


----Ursprungligt meddelande----
Fr?n: antlr at mirality.co.nz
Datum: 2008-jun-18 13:53
Till: "mimarob at algonet.se"<mimarob at algonet.se>, <jimi at temporal-wave.
com>
Kopia: <antlr-interest at antlr.org>
?rende: Re: [antlr-interest] Ang: Re:  Newbie C-code generation

At 21:08 18/06/2008, mimarob at algonet.se wrote:
 >When I try to remove the antlr-2.7.7.jar I get the
 >
 >java.lang.NoClassDefFoundError: antlr/Tool
 >
 >error.
 >
 >I thought the antlr-3.1b1.jar was the new antlr or?

Yeah, but as Johannes said you still need 2.7.7 in your classpath 
for v3 at the moment.

 >> java antlr.Tool StdCParser.g
 >> ANTLR Parser Generator   Version 2.7.7 (20060906)   1989-2005

Here's your problem -- this is the wrong command line.

For v3, you need to use "org.antlr.Tool" instead of "antlr.Tool".




From jimi at temporal-wave.com  Wed Jun 18 07:52:37 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed, 18 Jun 2008 07:52:37 -0700
Subject: [antlr-interest] Ang: Re:  Newbie C-code generation
In-Reply-To: <22311186.656951213780091956.JavaMail.root@webmail4.glocalnet.net>
References: <22311186.656951213780091956.JavaMail.root@webmail4.glocalnet.net>
Message-ID: <1213800757.12274.173.camel@jimi>

On Wed, 2008-06-18 at 11:08 +0200, mimarob at algonet.se wrote:

> Hmm I'm pretty sure I haven't got a pre installed antlr on my system
> 
> I downloaded the package from http://www.antlr.org/download/antlr-3.1
> b1.tar.gz
> 



> When I try to remove the antlr-2.7.7.jar I get the 
> 
> java.lang.NoClassDefFoundError: antlr/Tool


Sorry, you do need the old version there because ANTLR itself uses it,
but you are invoking the 2.x version, not the 3.x version. use
org.antlr.Tool to invoke the 3.x version.

> 
> > 
> > $ make
> > java antlr.Tool StdCParser.g

                  ^^^^^^^

> > ANTLR Parser Generator   Version 2.7.7 (20060906)   1989-2005

                                                          ^^^^^^^^^^


Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080618/accc7217/attachment.html 

From dskolovos at gmail.com  Wed Jun 18 09:12:53 2008
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Wed, 18 Jun 2008 17:12:53 +0100
Subject: [antlr-interest] ANTLR 3.1, headers in imported grammars
Message-ID: <48593405.2090205@gmail.com>

In the composite-java example that demonstrates the new "import" feature 
of 3.1 none of the parsers/lexers define @header or @lexer::header and 
as a result all generated classes do not contain a package declaration. 
Now, if I add

@header{package demo;}

and

@lexer::header{package demo;}

in Java.g, the JavaLexer and JavaParser contain the "package demo;" 
declaration but all the other files that are generated from sub-grammars 
(e.g. Java_JavaAnnotations, Java_JavaDecl) do not contain a package 
declaration. To add a package declaration to them I need to go in each 
sub-grammar and add a @header{package demo;}.

Is there a way to get package declarations in files generated by 
sub-grammars only by setting @header{}/@lexer::header{} in the top-level 
grammar?

Cheers,
Dimitrios

From spoulson at explodingcoder.com  Wed Jun 18 10:21:00 2008
From: spoulson at explodingcoder.com (spoulson at explodingcoder.com)
Date: Wed, 18 Jun 2008 13:21:00 -0400 (EDT)
Subject: [antlr-interest] Using lexer rules properly
Message-ID: <4df2c4e.c32747a2acfa38412e2d3fc2f28e919b@www.explodingcoder.com>

Hello all,

This group has graciously helped me before to use ANTLR in a C# project I'm working on.  If you remember, I'm parsing strings that denote datetime syntax for single or recurring events.  So far I've been able to operate properly but it seems I'm having a lexer ambiguity causing me some issues.

I've pasted below a sample working except of my current grammar.  This will accept single datetime ranges in the format: "2008-06-17 14:30:00 lasting T30" for an event on 6/17/2008 at 2:30pm lasting 30 seconds.  My full grammar has many other expression types.  I want to add a new one to describe a cron syntax as "cron 0 * * * *", which for example would recur at the top of every hour.

I decide to add a new lexer rule to parse the individual fields within the cron string:

CRON_TERM: '!'? (UINT | '-' | '/' | '*' | '>' | '<')+;

I also labeled UINT as "fragment" since it's used within another lexer rule.

This tests out great along with a simple parser rule for the cron expression.  However, now the rest of my grammar is broken and the original test case fails in datetime_p with NoViableAltException and matches nothing.  There seems to be an ambiguity between UINT and CRON_TERM that's breaking anywhere else where I parse a number.  It doesn't matter what order I place CRON_TERM, I get the same result.

What am I doing wrong?

Thanks in advance.

----- Cut -----

grammar TimeDeftest1;

options {
   language=CSharp;
   output=AST;
}

once_p returns [OneTimeSchedule value]: (
   start=datetime_p ('lasting' duration=timespan_p)?
);

//
// Time units
//
datetime_p returns [DateTime value]: (
   (y=year_p '-' mo=month_p '-' d=day_p)?
   h=hour24_p ':' m=minute60_p (':' s=second60_p ('.' ms=millisecond1000_p)? )?
);

year_p returns [int value]: UINT { $value = int.Parse($UINT.text); };
month_p returns [int value]: UINT { $value = int.Parse($UINT.text); };
day_p returns [int value]: UINT { $value = int.Parse($UINT.text); };
hour24_p returns [int value]: UINT { $value = int.Parse($UINT.text); };
minute60_p returns [int value]: UINT { $value = int.Parse($UINT.text); };
second60_p returns [int value]: UINT { $value = int.Parse($UINT.text); };
millisecond1000_p returns [int value]: UINT { $value = int.Parse($UINT.text); };
days_p returns [int value]: int_p { $value = int.Parse($int_p.text); };

timespan_p returns [TimeSpan value]: (
   'T' (((d=days_p '.')? h=hours_p ':')? m=minutes_p ':')? s=seconds_p ('.' ms=milliseconds_p)?
);

hours_p returns [int value]: int_p { $value = int.Parse($int_p.text); };
minutes_p returns [int value]: int_p { $value = int.Parse($int_p.text); };
seconds_p returns [int value]: int_p { $value = int.Parse($int_p.text); };
milliseconds_p returns [int value]: int_p { $value = int.Parse($int_p.text); };

int_p: '-'? UINT;

UINT: ('0'..'9')+;

WS: (' '|'\t'|'\r\n'|'\r')+ { $channel = HIDDEN; };



From JALuber at gmx.de  Wed Jun 18 10:54:26 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Wed, 18 Jun 2008 19:54:26 +0200
Subject: [antlr-interest] Using lexer rules properly
In-Reply-To: <4df2c4e.c32747a2acfa38412e2d3fc2f28e919b@www.explodingcoder.com>
References: <4df2c4e.c32747a2acfa38412e2d3fc2f28e919b@www.explodingcoder.com>
Message-ID: <20080618175426.117930@gmx.net>

> Hello all,
> 
> This group has graciously helped me before to use ANTLR in a C# project
> I'm working on.  If you remember, I'm parsing strings that denote datetime
> syntax for single or recurring events.  So far I've been able to operate
> properly but it seems I'm having a lexer ambiguity causing me some issues.
> 
> I've pasted below a sample working except of my current grammar.  This
> will accept single datetime ranges in the format: "2008-06-17 14:30:00 lasting
> T30" for an event on 6/17/2008 at 2:30pm lasting 30 seconds.  My full
> grammar has many other expression types.  I want to add a new one to describe a
> cron syntax as "cron 0 * * * *", which for example would recur at the top
> of every hour.
> 
> I decide to add a new lexer rule to parse the individual fields within the
> cron string:
> 
> CRON_TERM: '!'? (UINT | '-' | '/' | '*' | '>' | '<')+;
> 
> I also labeled UINT as "fragment" since it's used within another lexer
> rule.
> 
> This tests out great along with a simple parser rule for the cron
> expression.  However, now the rest of my grammar is broken and the original test
> case fails in datetime_p with NoViableAltException and matches nothing. 
> There seems to be an ambiguity between UINT and CRON_TERM that's breaking
> anywhere else where I parse a number.  It doesn't matter what order I place
> CRON_TERM, I get the same result.
> 
> What am I doing wrong?
> 
> Thanks in advance.

Adding CRON_TERM results in eating up all those UINT tokens. Try the following:

cron_term: '!'? (UINT | '-' | '/' | '*' | '>' | '<')+;

Johannes

> 
> ----- Cut -----
> 
> grammar TimeDeftest1;
> 
> options {
>    language=CSharp;
>    output=AST;
> }
> 
> once_p returns [OneTimeSchedule value]: (
>    start=datetime_p ('lasting' duration=timespan_p)?
> );
> 
> //
> // Time units
> //
> datetime_p returns [DateTime value]: (
>    (y=year_p '-' mo=month_p '-' d=day_p)?
>    h=hour24_p ':' m=minute60_p (':' s=second60_p ('.'
> ms=millisecond1000_p)? )?
> );
> 
> year_p returns [int value]: UINT { $value = int.Parse($UINT.text); };
> month_p returns [int value]: UINT { $value = int.Parse($UINT.text); };
> day_p returns [int value]: UINT { $value = int.Parse($UINT.text); };
> hour24_p returns [int value]: UINT { $value = int.Parse($UINT.text); };
> minute60_p returns [int value]: UINT { $value = int.Parse($UINT.text); };
> second60_p returns [int value]: UINT { $value = int.Parse($UINT.text); };
> millisecond1000_p returns [int value]: UINT { $value =
> int.Parse($UINT.text); };
> days_p returns [int value]: int_p { $value = int.Parse($int_p.text); };
> 
> timespan_p returns [TimeSpan value]: (
>    'T' (((d=days_p '.')? h=hours_p ':')? m=minutes_p ':')? s=seconds_p
> ('.' ms=milliseconds_p)?
> );
> 
> hours_p returns [int value]: int_p { $value = int.Parse($int_p.text); };
> minutes_p returns [int value]: int_p { $value = int.Parse($int_p.text); };
> seconds_p returns [int value]: int_p { $value = int.Parse($int_p.text); };
> milliseconds_p returns [int value]: int_p { $value =
> int.Parse($int_p.text); };
> 
> int_p: '-'? UINT;
> 
> UINT: ('0'..'9')+;
> 
> WS: (' '|'\t'|'\r\n'|'\r')+ { $channel = HIDDEN; };
> 

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

From parrt at cs.usfca.edu  Wed Jun 18 12:09:53 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed, 18 Jun 2008 20:09:53 +0100
Subject: [antlr-interest] ANTLR 3.1, headers in imported grammars
In-Reply-To: <48593405.2090205@gmail.com>
References: <48593405.2090205@gmail.com>
Message-ID: <AE5872A3-B72E-47C3-8653-08E0CAEB57AC@cs.usfca.edu>

added bug to fix for 3.1

http://www.antlr.org:8888/browse/ANTLR-301

Actually, wait.  So we are saying that the header in root grammar  
should override any in subgrammars?  In this case, there are none so  
it inserts it?  That will be special case.  @members are not  
overridden for example.
Ter
On Jun 18, 2008, at 5:12 PM, Dimitrios Kolovos wrote:

> In the composite-java example that demonstrates the new "import"  
> feature of 3.1 none of the parsers/lexers define @header or  
> @lexer::header and as a result all generated classes do not contain  
> a package declaration. Now, if I add
>
> @header{package demo;}
>
> and
>
> @lexer::header{package demo;}
>
> in Java.g, the JavaLexer and JavaParser contain the "package demo;"  
> declaration but all the other files that are generated from sub- 
> grammars (e.g. Java_JavaAnnotations, Java_JavaDecl) do not contain  
> a package declaration. To add a package declaration to them I need  
> to go in each sub-grammar and add a @header{package demo;}.
>
> Is there a way to get package declarations in files generated by  
> sub-grammars only by setting @header{}/@lexer::header{} in the top- 
> level grammar?
>
> Cheers,
> Dimitrios


From dskolovos at gmail.com  Wed Jun 18 12:43:23 2008
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Wed, 18 Jun 2008 20:43:23 +0100
Subject: [antlr-interest] ANTLR 3.1, headers in imported grammars
In-Reply-To: <AE5872A3-B72E-47C3-8653-08E0CAEB57AC@cs.usfca.edu>
References: <48593405.2090205@gmail.com>
	<AE5872A3-B72E-47C3-8653-08E0CAEB57AC@cs.usfca.edu>
Message-ID: <4859655B.7060106@gmail.com>

Thanks. What I would expect would be that if a sub-grammar doesn't 
specify a header, the header of the top-level grammar is inserted. 
Otherwise, its own header is inserted.

On a remotely related note, I've customized the org.antlr.Tool class for 
my needs so that it supports multiple lib directories (separated by ;) 
so that a grammar can extend a number of sub-grammars located in 
different directories (which is essential for what I'm doing). I'm happy 
to share the modified version if this sounds useful in general.

Cheers,
Dimitrios

Terence Parr wrote:
> added bug to fix for 3.1
>
> http://www.antlr.org:8888/browse/ANTLR-301
>
> Actually, wait.  So we are saying that the header in root grammar 
> should override any in subgrammars?  In this case, there are none so 
> it inserts it?  That will be special case.  @members are not 
> overridden for example.
> Ter
> On Jun 18, 2008, at 5:12 PM, Dimitrios Kolovos wrote:
>
>> In the composite-java example that demonstrates the new "import" 
>> feature of 3.1 none of the parsers/lexers define @header or 
>> @lexer::header and as a result all generated classes do not contain a 
>> package declaration. Now, if I add
>>
>> @header{package demo;}
>>
>> and
>>
>> @lexer::header{package demo;}
>>
>> in Java.g, the JavaLexer and JavaParser contain the "package demo;" 
>> declaration but all the other files that are generated from 
>> sub-grammars (e.g. Java_JavaAnnotations, Java_JavaDecl) do not 
>> contain a package declaration. To add a package declaration to them I 
>> need to go in each sub-grammar and add a @header{package demo;}.
>>
>> Is there a way to get package declarations in files generated by 
>> sub-grammars only by setting @header{}/@lexer::header{} in the 
>> top-level grammar?
>>
>> Cheers,
>> Dimitrios
>
>

From antlr at mirality.co.nz  Wed Jun 18 13:21:05 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 19 Jun 2008 08:21:05 +1200
Subject: [antlr-interest] ANTLR 3.1, headers in imported grammars
In-Reply-To: <AE5872A3-B72E-47C3-8653-08E0CAEB57AC@cs.usfca.edu>
References: <48593405.2090205@gmail.com>
	<AE5872A3-B72E-47C3-8653-08E0CAEB57AC@cs.usfca.edu>
Message-ID: <20080618202116.60DA011ED50@www.antlr.org>

At 07:09 19/06/2008, Terence Parr wrote:
 >added bug to fix for 3.1
 >
 >http://www.antlr.org:8888/browse/ANTLR-301
 >
 >Actually, wait.  So we are saying that the header in root
 >grammar should override any in subgrammars?  In this case,
 >there are none so it inserts it?  That will be special case.
 >@members are not overridden for example.

That might be convenient for things like the package declaration, 
but probably very little else.  Maybe the Java target should adopt 
something similar to C#'s @namespace section specifically for the 
package specification, so it can replicate that and nothing else?

Also: it probably ought to be possible to put the sub-grammars in 
one package and the main grammar in a different one.


From ben.dotte at gmail.com  Wed Jun 18 14:35:42 2008
From: ben.dotte at gmail.com (Ben Dotte)
Date: Wed, 18 Jun 2008 16:35:42 -0500
Subject: [antlr-interest] Begins-with/Ends-with ambiguity
Message-ID: <8a29e7880806181435s3d84805bg1f0968ef8af1849a@mail.gmail.com>

Hi,

I've been developing a search grammar with ANTLR 3 and I'm stuck
trying to figure out how to resolve an ambiguity between begins-with
and ends-with searches. I am a novice at this, so please forgive my
ignorance if the answer is obvious :)

The idea is if the user enters "a *e", it should be interpreted as
"contains 'a' and ends with 'e'". Right now, that expression is
incorrectly interpreted as "starts with 'a' and contains 'e'". So it
is assigning the "*" to the "a" instead of the "e".

This is the parser rule that is supposed to sort these things out:

wildcardSearch
	:	'*' term			-> ^(ENDSWITH term)
	|	(term '*')=> term '*'	-> ^(BEGINSWITH term)
	|	term
	;

The lexer is setup to ignore whitespace, but I guess it does become
significant here, so I'm unsure if I should not ignore whitespace and
somehow account for it in the rules, or if there is some syntactic
predicate I haven't thought of that can resolve this for me.

Any suggestions would be much appreciated.

Thanks,
Ben

From victor.panizza at gmail.com  Wed Jun 18 16:25:09 2008
From: victor.panizza at gmail.com (victor panizza)
Date: Wed, 18 Jun 2008 18:25:09 -0500
Subject: [antlr-interest] Free Text mixed with rules
In-Reply-To: <898270.11982.qm@web55901.mail.re3.yahoo.com>
References: <898270.11982.qm@web55901.mail.re3.yahoo.com>
Message-ID: <25261aff0806181625j3b218902sffcec7a773c8137f@mail.gmail.com>

Hi Loring,

Could you point me to an example??

Thanks in advance!!!

On Tue, Jun 17, 2008 at 7:49 PM, Loring Craymer <lgcraymer at yahoo.com> wrote:

>  If you want to recover text in its original format, you might as well use
> the start and stop markers on the first and last tokens of the "text"
> sequence from the input stream (ANTLR 3 keeps the text input stream in
> memory).  At the same time, you are probably best off in going ahead and
> including an expression grammar in your parser to handle what you are
> calling "free text"--otherwise, you will have to deal with nested
> conditionals in your lexer, and that gets very messy.  You can repackage the
> "text" segments in the output AST as a replacement for the nodes matched by
> the expression grammar.
>
> --Loring
>
>
> ----- Original Message ----
> From: victor panizza <victor.panizza at gmail.com>
> To: antlr-interest at antlr.org
> Sent: Tuesday, June 17, 2008 5:17:29 PM
> Subject: [antlr-interest] Free Text mixed with rules
>
> Hello All,
>
> I have the follow issue:
>
> I'm trying to develop a Parse Grammar and a Tree Parse for read PL/SQL
> scripts and translate it to DB2 SQL PL. Now, there're many diferences
> beetwen thems and this diferences are defined by the rules and some
> literals, but there're many things in common like the IF LOGICAL_OPERATION
> THEN END IF;
>
> My Idea is create a Node in the tree (using a token like FREE_TEXT) where I
> can put each segment of free text like the above and later walk the tree and
> get this free text in the same order on they were recongnized. For example:
>
> IF (LAST_DAY(PDATE)!=PDATE) THEN
>   PDATEAUX := ADD_MONTHS(PDATE, PMONTHS);
>   RETURN ADD_MONTHS(PDATE, PMONTHS);
> END IF;
>
> In text tree representation:
>
> (ROOT
>           (FREE_TEXT "IF (LAST_DAY(PDATE)!=PDATE) THEN")
>           (ASSING "PDATEAUX := PDATE;")
>           (FREE_TEXT "RETURN ADD_MONTHS(PDATE, PMONTHS);")
>            (FREE_TEXT "END IF;);")
> )
>
>
> Any idea, thanks in advance!!!!
>
> --
> Saludos,
> Victor Panizza
>
>


-- 
Saludos,
Victor Panizza
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080618/bb889092/attachment.html 

From wwang at ovt.com  Wed Jun 18 16:32:49 2008
From: wwang at ovt.com (Wei Wang)
Date: Wed, 18 Jun 2008 16:32:49 -0700
Subject: [antlr-interest] antlr3 C# runtime source code
Message-ID: <E7530BC01DB8CE4FBAAA2553A584AA950A22B99D@iris.ovt.com>

Hi,

 

I was wondering where I can download the C# runtime source code for
antlr V3?

 

Thanks,

Wei

 

This e-mail and any attachments thereto may contain private,
confidential, and privileged material for the sole use of the intended
recipient. If you are not the intended recipient, any dissemination,
distribution or copying is strictly prohibited.  If you think that you
have received this e-mail message in error, please contact the sender at
OmniVision Technologies, Inc. immediately and permanently delete the
original and any copies of this e-mail and any attachments thereto.

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080618/86b7c38c/attachment.html 

From fridi70 at gmx.de  Thu Jun 19 00:13:00 2008
From: fridi70 at gmx.de (Fridi)
Date: Thu, 19 Jun 2008 09:13:00 +0200
Subject: [antlr-interest] if-then-else rule design question
In-Reply-To: <20080616123525.22619gmx1@mx002.gmx.net>
References: <48562D44.9030401@gmx.de> <20080616123525.22619gmx1@mx002.gmx.net>
Message-ID: <485A06FC.3070206@gmx.de>

thanks for the reply.
hm, I thought, in analogy to regex, the '.' just consumes anything. 
Maybe I have to change my parser grammar as well.

Gavin Lambert schrieb:
>
> (You can adapt the idea for other tree structures. The main point is 
> the use of '.' to indicate "don't care".)
>


From lgcraymer at yahoo.com  Thu Jun 19 00:43:08 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Thu, 19 Jun 2008 00:43:08 -0700 (PDT)
Subject: [antlr-interest] Free Text mixed with rules
Message-ID: <120119.65245.qm@web55904.mail.re3.yahoo.com>

Ter might have an example, but I don't know of one.  What you need from the runtime is

CommonToken.getStopIndex()
CommonToken.setStopIndex()

Then you track the first token in an expression, ! all following tokens and rule references in expression rules, and record the stop index from the last token in the expression back in the first token.  The sensible approach for finding the last token is probably to have your expression rules return the stop index from the last token/rule invocation found, and then use the final value from the top level expression rule.

--Loring


----- Original Message ----
From: victor panizza <victor.panizza at gmail.com>
To: antlr-interest at antlr.org
Sent: Wednesday, June 18, 2008 4:25:09 PM
Subject: Re: [antlr-interest] Free Text mixed with rules


Hi Loring,
 
Could you point me to an example??
 
Thanks in advance!!!


On Tue, Jun 17, 2008 at 7:49 PM, Loring Craymer <lgcraymer at yahoo.com> wrote:

If you want to recover text in its original format, you might as well use the start and stop markers on the first and last tokens of the "text" sequence from the input stream (ANTLR 3 keeps the text input stream in memory).  At the same time, you are probably best off in going ahead and including an expression grammar in your parser to handle what you are calling "free text"--otherwise, you will have to deal with nested conditionals in your lexer, and that gets very messy.  You can repackage the "text" segments in the output AST as a replacement for the nodes matched by the expression grammar.

--Loring 



----- Original Message ----
From: victor panizza <victor.panizza at gmail.com>
To: antlr-interest at antlr.org
Sent: Tuesday, June 17, 2008 5:17:29 PM
Subject: [antlr-interest] Free Text mixed with rules


Hello All, 
 
I have the follow issue:
 
I'm trying to develop a Parse Grammar and a Tree Parse for read PL/SQL scripts and translate it to DB2 SQL PL. Now, there're many diferences beetwen thems and this diferences are defined by the rules and some literals, but there're many things in common like the IF LOGICAL_OPERATION THEN END IF;
 
My Idea is create a Node in the tree (using a token like FREE_TEXT) where I can put each segment of free text like the above and later walk the tree and get this free text in the same order on they were recongnized. For example: 
 
IF (LAST_DAY(PDATE)!=PDATE) THEN
  PDATEAUX := ADD_MONTHS(PDATE, PMONTHS);
  RETURN ADD_MONTHS(PDATE, PMONTHS);
END IF;
 
In text tree representation:
 
(ROOT
          (FREE_TEXT "IF (LAST_DAY(PDATE)!=PDATE) THEN")
          (ASSING "PDATEAUX := PDATE;")
          (FREE_TEXT "RETURN ADD_MONTHS(PDATE, PMONTHS);")
          (FREE_TEXT "END IF;);")
)
 
 
Any idea, thanks in advance!!!!
 
-- 
Saludos,
Victor Panizza 



-- 
Saludos,
Victor Panizza 


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080619/5434ab58/attachment-0001.html 

From parrt at cs.usfca.edu  Thu Jun 19 01:43:39 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 19 Jun 2008 09:43:39 +0100
Subject: [antlr-interest] ANTLR 3.1, headers in imported grammars
In-Reply-To: <20080618202116.60DA011ED50@www.antlr.org>
References: <48593405.2090205@gmail.com>
	<AE5872A3-B72E-47C3-8653-08E0CAEB57AC@cs.usfca.edu>
	<20080618202116.60DA011ED50@www.antlr.org>
Message-ID: <077CC941-ED66-4173-AC69-195D8BC76348@cs.usfca.edu>

true.  so

@header {...}
@lexer::header

and then

@import::header {...}

???

Makes sense to me...
Ter
On Jun 18, 2008, at 9:21 PM, Gavin Lambert wrote:

> At 07:09 19/06/2008, Terence Parr wrote:
> >added bug to fix for 3.1
> >
> >http://www.antlr.org:8888/browse/ANTLR-301
> >
> >Actually, wait.  So we are saying that the header in root
> >grammar should override any in subgrammars?  In this case,
> >there are none so it inserts it?  That will be special case.
> >@members are not overridden for example.
>
> That might be convenient for things like the package declaration,  
> but probably very little else.  Maybe the Java target should adopt  
> something similar to C#'s @namespace section specifically for the  
> package specification, so it can replicate that and nothing else?
>
> Also: it probably ought to be possible to put the sub-grammars in  
> one package and the main grammar in a different one.
>


From mimarob at algonet.se  Thu Jun 19 03:06:19 2008
From: mimarob at algonet.se (mimarob at algonet.se)
Date: Thu, 19 Jun 2008 12:06:19 +0200 (CEST)
Subject: [antlr-interest] Linker error on TOKENSOURCE .. Newbie story
	continues!
Message-ID: <3455836.669871213869979009.JavaMail.root@webmail4.glocalnet.net>

Hello again!

Thank you all for the advice on the 2.7.7 / 3.0.1 antlr issues.

Now I managed to produce a CParser.c and a CLexer.c.

Being a C-code generation fanatic I think it looks great!

Only problem now, I get a linker error on the macro(?) TOKENSOURCE, 
see below:

Any idea what is going wrong?

I have installed libantlr3c-3.0.1



prompt#  cd examples-v3/C/C
prompt#  ls
C.g       C.vcproj.vspscc  compiler_raden.txt  jimtest.h            
test1.i
C.h       CLexer.java      cpp_symbolpp.h      main.c               
test2.i
C.tokens  CParser.java     files               output
C.vcproj  C__.g            input               parse.exe.stackdump
prompt#  java org.antlr.Tool C.g

prompt#  java org.antlr.Tool C.g
ANTLR Parser Generator  Version 3.0.1 (August 13, 2007)  1989-2007
prompt#  gcc -I. -o parse.exe CLexer.c CParser.c main.c -lantlr3c
main.c: In function `main':
main.c:150: warning: passing arg 2 of 
`antlr3CommonTokenStreamSourceNew' makes pointer from integer without a 
cast
/cygdrive/c/DOCUME~1/qeribra/LOCALS~1/Temp/ccumdZZ3.o:main.c:(.
text+0xcd): undefined reference to `_TOKENSOURCE'
collect2: ld returned 1 exit status
prompt#  





From dskolovos at gmail.com  Thu Jun 19 03:11:09 2008
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Thu, 19 Jun 2008 11:11:09 +0100
Subject: [antlr-interest] ANTLR 3.1, headers in imported grammars
In-Reply-To: <077CC941-ED66-4173-AC69-195D8BC76348@cs.usfca.edu>
References: <48593405.2090205@gmail.com>
	<AE5872A3-B72E-47C3-8653-08E0CAEB57AC@cs.usfca.edu>
	<20080618202116.60DA011ED50@www.antlr.org>
	<077CC941-ED66-4173-AC69-195D8BC76348@cs.usfca.edu>
Message-ID: <485A30BD.6010102@gmail.com>

Hi Ter,

Looks good! Thanks!

Would you also consider adding support for multiple lib directories in 
the org.antlr.Tool class in 3.1?

Cheers,
Dimitrios

Terence Parr wrote:
> true.  so
>
> @header {...}
> @lexer::header
>
> and then
>
> @import::header {...}
>
> ???
>
> Makes sense to me...
> Ter
> On Jun 18, 2008, at 9:21 PM, Gavin Lambert wrote:
>
>> At 07:09 19/06/2008, Terence Parr wrote:
>> >added bug to fix for 3.1
>> >
>> >http://www.antlr.org:8888/browse/ANTLR-301
>> >
>> >Actually, wait.  So we are saying that the header in root
>> >grammar should override any in subgrammars?  In this case,
>> >there are none so it inserts it?  That will be special case.
>> >@members are not overridden for example.
>>
>> That might be convenient for things like the package declaration, but 
>> probably very little else.  Maybe the Java target should adopt 
>> something similar to C#'s @namespace section specifically for the 
>> package specification, so it can replicate that and nothing else?
>>
>> Also: it probably ought to be possible to put the sub-grammars in one 
>> package and the main grammar in a different one.
>>
>
>

From JALuber at gmx.de  Thu Jun 19 05:55:16 2008
From: JALuber at gmx.de (Johannes Luber)
Date: Thu, 19 Jun 2008 14:55:16 +0200
Subject: [antlr-interest] antlr3 C# runtime source code
In-Reply-To: <E7530BC01DB8CE4FBAAA2553A584AA950A22B99D@iris.ovt.com>
References: <E7530BC01DB8CE4FBAAA2553A584AA950A22B99D@iris.ovt.com>
Message-ID: <20080619125516.189860@gmx.net>

> Hi,
> 
>  
> 
> I was wondering where I can download the C# runtime source code for
> antlr V3?

See <http://www.antlr.org/wiki/display/ANTLR3/Antlr+3+CSharp+Target#Antlr3CSharpTarget-SourceCodeandBinaries>.

Johannes
> 
>  
> 
> Thanks,
> 
> Wei
> 
>  
> 
> This e-mail and any attachments thereto may contain private,
> confidential, and privileged material for the sole use of the intended
> recipient. If you are not the intended recipient, any dissemination,
> distribution or copying is strictly prohibited.  If you think that you
> have received this e-mail message in error, please contact the sender at
> OmniVision Technologies, Inc. immediately and permanently delete the
> original and any copies of this e-mail and any attachments thereto.
> 
>  
> 
>  
> 

-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

From parrt at cs.usfca.edu  Thu Jun 19 06:38:50 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 19 Jun 2008 14:38:50 +0100
Subject: [antlr-interest] ANTLR 3.1, headers in imported grammars
In-Reply-To: <485A30BD.6010102@gmail.com>
References: <48593405.2090205@gmail.com>
	<AE5872A3-B72E-47C3-8653-08E0CAEB57AC@cs.usfca.edu>
	<20080618202116.60DA011ED50@www.antlr.org>
	<077CC941-ED66-4173-AC69-195D8BC76348@cs.usfca.edu>
	<485A30BD.6010102@gmail.com>
Message-ID: <F99673DA-1719-45E3-B476-2745BC16A21F@cs.usfca.edu>


On Jun 19, 2008, at 11:11 AM, Dimitrios Kolovos wrote:

> Hi Ter,
>
> Looks good! Thanks!
>
> Would you also consider adding support for multiple lib directories  
> in the org.antlr.Tool class in 3.1?

We definitely need...not sure if 3.1 is right release....i'm hoping  
to get the damn thing out shortly ;)  Still in ireland...Jim Idle has  
a few tweaks to do before we go b2.

Ter

From dskolovos at gmail.com  Thu Jun 19 07:55:47 2008
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Thu, 19 Jun 2008 15:55:47 +0100
Subject: [antlr-interest] ANTLR 3.1, headers in imported grammars
In-Reply-To: <F99673DA-1719-45E3-B476-2745BC16A21F@cs.usfca.edu>
References: <48593405.2090205@gmail.com>
	<AE5872A3-B72E-47C3-8653-08E0CAEB57AC@cs.usfca.edu>
	<20080618202116.60DA011ED50@www.antlr.org>
	<077CC941-ED66-4173-AC69-195D8BC76348@cs.usfca.edu>
	<485A30BD.6010102@gmail.com>
	<F99673DA-1719-45E3-B476-2745BC16A21F@cs.usfca.edu>
Message-ID: <485A7373.7060802@gmail.com>

I understand :)

It's not urgent (at least for me) as I've modified the Tool class to 
support both multiple libs and also prepend the missing package 
declaration in the generated files so I can do my work for now.

BTW, if anyone has the same problem until it is properly fixed, please 
feel free to contact me and I'll be happy to share the modified Tool code.

Cheers,
Dimitrios

Terence Parr wrote:
>
> On Jun 19, 2008, at 11:11 AM, Dimitrios Kolovos wrote:
>
>> Hi Ter,
>>
>> Looks good! Thanks!
>>
>> Would you also consider adding support for multiple lib directories 
>> in the org.antlr.Tool class in 3.1?
>
> We definitely need...not sure if 3.1 is right release....i'm hoping to 
> get the damn thing out shortly ;)  Still in ireland...Jim Idle has a 
> few tweaks to do before we go b2.
>
> Ter
>

From jimi at temporal-wave.com  Thu Jun 19 08:07:34 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 19 Jun 2008 08:07:34 -0700
Subject: [antlr-interest] Linker error on TOKENSOURCE .. Newbie
	story	continues!
In-Reply-To: <3455836.669871213869979009.JavaMail.root@webmail4.glocalnet.net>
References: <3455836.669871213869979009.JavaMail.root@webmail4.glocalnet.net>
Message-ID: <1213888054.8155.3.camel@jimi>

On Thu, 2008-06-19 at 12:06 +0200, mimarob at algonet.se wrote:

> Hello again!
> 
> Thank you all for the advice on the 2.7.7 / 3.0.1 antlr issues.
> 
> Now I managed to produce a CParser.c and a CLexer.c.
> 
> Being a C-code generation fanatic I think it looks great!
> 
> Only problem now, I get a linker error on the macro(?) TOKENSOURCE, 
> see below:
> 
> Any idea what is going wrong?
> 
> I have installed libantlr3c-3.0.1


You want to build the 3.1 source to use the TOKENSOURCE macro :-) and
use ANTLR 3.1.

Download the current 3.1 beta, and unzip it into your home directory.

Locate the dist directoory under runtime/C

Untar the tgz that is in there. 
Run ./configure
make
sudo make install

The link with the 3.1 .so library in /usr/local/lib and use
-I /usr/local/include

Then you will be running with the latest C code and headers and the 3.1
stuff will all be in sync.

This is documented more in the C API documentation (look for the API
docs link on the Antlr home page).
Jim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080619/81c8bcb8/attachment.html 

From ben.dotte at gmail.com  Thu Jun 19 08:25:48 2008
From: ben.dotte at gmail.com (Ben Dotte)
Date: Thu, 19 Jun 2008 10:25:48 -0500
Subject: [antlr-interest] Begins-with/Ends-with ambiguity
In-Reply-To: <8a29e7880806181435s3d84805bg1f0968ef8af1849a@mail.gmail.com>
References: <8a29e7880806181435s3d84805bg1f0968ef8af1849a@mail.gmail.com>
Message-ID: <8a29e7880806190825y6e99956evc22fd3afc3927324@mail.gmail.com>

I think I got this solved now by defining a wildcard rule in the lexer
like this:

TEXT_WITH_WILDCARD
	:	(('*' TEXT)|(TEXT '*')) ;

Then I just handle the difference between begins-with and ends-with in
the AST tree walker. I assume this works because ANTLR is interpreting
the entire thing as a single token (if that's the right word), rather
than trying to match to a parser rule that ignores spaces.

On Wed, Jun 18, 2008 at 4:35 PM, Ben Dotte <ben.dotte at gmail.com> wrote:
> Hi,
>
> I've been developing a search grammar with ANTLR 3 and I'm stuck
> trying to figure out how to resolve an ambiguity between begins-with
> and ends-with searches. I am a novice at this, so please forgive my
> ignorance if the answer is obvious :)
>
> The idea is if the user enters "a *e", it should be interpreted as
> "contains 'a' and ends with 'e'". Right now, that expression is
> incorrectly interpreted as "starts with 'a' and contains 'e'". So it
> is assigning the "*" to the "a" instead of the "e".
>
> This is the parser rule that is supposed to sort these things out:
>
> wildcardSearch
>        :       '*' term                        -> ^(ENDSWITH term)
>        |       (term '*')=> term '*'   -> ^(BEGINSWITH term)
>        |       term
>        ;
>
> The lexer is setup to ignore whitespace, but I guess it does become
> significant here, so I'm unsure if I should not ignore whitespace and
> somehow account for it in the rules, or if there is some syntactic
> predicate I haven't thought of that can resolve this for me.
>
> Any suggestions would be much appreciated.
>
> Thanks,
> Ben
>

From spoulson at explodingcoder.com  Thu Jun 19 09:09:31 2008
From: spoulson at explodingcoder.com (spoulson at explodingcoder.com)
Date: Thu, 19 Jun 2008 12:09:31 -0400 (EDT)
Subject: [antlr-interest] Using lexer rules properly
Message-ID: <7614359.df26473a6c2cd38b2271ac25f6d4bbc5@www.explodingcoder.com>

>---- Original Message ----
>Adding CRON_TERM results in eating up all those UINT tokens. Try the following:
>
>cron_term: '!'? (UINT | '-' | '/' | '*' | '>' | '<')+;
>
>Johannes

I tried that as well, but because I use the WS rule with $channel=hidden, this term eats up all the cron fields as one, then balks when it can't find more.

e.g. It parses "cron * * * * *" with all the *'s as a single cron_term match then fails on NoViableAltException on the next cron_term in the parser rule.

The solution, which I haven't been able to figure out, is to make cron_term disallow the WS rule to interfere between terminals.  I don't expect spaces between any of the matches within cron_term.

Is this possible without changing the WS rule?

Thanks.

Shawn Poulson
spoulson at explodingcoder.com



From siva.kumar at loglogic.com  Thu Jun 19 10:30:11 2008
From: siva.kumar at loglogic.com (siva.kumar at loglogic.com)
Date: Thu, 19 Jun 2008 10:30:11 -0700
Subject: [antlr-interest] Exception in thread "main"
	java.lang.OutOfMemoryError: Java heap space
Message-ID: <117A6478DABB1D4E9509EA7F413AE7890736C565@CTMAIL2.calltower.com>

I have a simple grammar at:

http://pastie.textmate.org/218178

The LOG file that's parsed is of the form:

ABCD="....", EF="aaaa", abcd="1.2.3.4",hostname=a at b.com,

While I build and run this using antlr and java, I get the "Java heap
space" problem on a very large file (70M). I don't have a problem with
smaller files

Other details:

I built this (test.g) as:
	% antlr test.g
	% javac test*.java

I run this as:
	% java testParser <MY-HUGE-FILE> > /dev/null
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space

	% java -version org.antlr.Tool
java version "1.5.0_06"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_06-b05)
Java HotSpot(TM) Server VM (build 1.5.0_06-b05, mixed mode)

	% echo $CLASSPATH
/home/skumar/work/antlr-3.1/antlr-3.1b1/lib/antlr-3.1b1.jar:/home/skumar
/work/antlr-3.1/antlr-3.1b1/lib/gunit-1.0.2.jar:/home/skumar/work/antlr-
3.1/antlr-3.1b1/lib/antlr-2.7.7.jar:/home/skumar/work/antlr-3.1/antlr-3.
1b1/lib/antlr-runtime-3.1b1.jar:/home/skumar/work/antlr-3.1/antlr-3.1b1/
lib/stringtemplate-3.1.jar


	% ls -l /home/skumar/work/antlr-3.1/antlr-3.1b1/lib/*.jar
-rw-r--r--  1 skumar skumar 445288 May 21 10:57
/home/skumar/work/antlr-3.1/antlr-3.1b1/lib/antlr-2.7.7.jar
-rw-r--r--  1 skumar skumar 876354 May 21 10:58
/home/skumar/work/antlr-3.1/antlr-3.1b1/lib/antlr-3.1b1.jar
-rw-r--r--  1 skumar skumar 121722 May 21 10:58
/home/skumar/work/antlr-3.1/antlr-3.1b1/lib/antlr-runtime-3.1b1.jar
-rw-r--r--  1 skumar skumar  40085 May 21 10:57
/home/skumar/work/antlr-3.1/antlr-3.1b1/lib/gunit-1.0.2.jar
-rw-r--r--  1 skumar skumar 171013 May 21 10:57
/home/skumar/work/antlr-3.1/antlr-3.1b1/lib/stringtemplate-3.1.jar


The grammar is quite straight-forward. I don't know how to "release" any
memory after each line is parsed. I'm mainly a C programmer but the Java
code used seems quite straight-forward.

Any help is appreciated. 

Thanks!
-Siva


From jimi at temporal-wave.com  Thu Jun 19 10:37:42 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu, 19 Jun 2008 10:37:42 -0700
Subject: [antlr-interest] Exception in thread
	"main"	java.lang.OutOfMemoryError: Java heap space
In-Reply-To: <117A6478DABB1D4E9509EA7F413AE7890736C565@CTMAIL2.calltower.com>
References: <117A6478DABB1D4E9509EA7F413AE7890736C565@CTMAIL2.calltower.com>
Message-ID: <1213897062.8155.28.camel@jimi>

On Thu, 2008-06-19 at 10:30 -0700, siva.kumar at loglogic.com wrote:

> I have a simple grammar at:
> 
> http://pastie.textmate.org/218178
> 
> The LOG file that's parsed is of the form:
> 
> ABCD="....", EF="aaaa", abcd="1.2.3.4",hostname=a at b.com,
> 
> While I build and run this using antlr and java, I get the "Java heap
> space" problem on a very large file (70M). I don't have a problem with
> smaller files


Try using the -Xincgc option with your runtime, but are you doing
anything that would cause the runtime to try and create huge strings
such as the entire input lots of times in the lexer, or calling the
routine that produces the dot spec for graphviz (that blows up after the
number of nodes gets somewhat large. Or creating objects and  references
and then never freeing up the references to these objects?

You could always switch to the C output, where you could at least find
out where the memory was going to ;-)

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080619/7999584f/attachment.html 

From parrt at cs.usfca.edu  Thu Jun 19 12:06:26 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 19 Jun 2008 20:06:26 +0100
Subject: [antlr-interest] ANTLR 3.1, headers in imported grammars
In-Reply-To: <485A7373.7060802@gmail.com>
References: <48593405.2090205@gmail.com>
	<AE5872A3-B72E-47C3-8653-08E0CAEB57AC@cs.usfca.edu>
	<20080618202116.60DA011ED50@www.antlr.org>
	<077CC941-ED66-4173-AC69-195D8BC76348@cs.usfca.edu>
	<485A30BD.6010102@gmail.com>
	<F99673DA-1719-45E3-B476-2745BC16A21F@cs.usfca.edu>
	<485A7373.7060802@gmail.com>
Message-ID: <F5EDA1FD-3859-4C6B-B958-D1B56ED9BE38@cs.usfca.edu>

i don't check actions so you should be able to do say:

@Dimitrios {...}

and then ref <actions.Dimitrios> or something in the templates.  No  
code change :)

Ter
On Jun 19, 2008, at 3:55 PM, Dimitrios Kolovos wrote:

> I understand :)
>
> It's not urgent (at least for me) as I've modified the Tool class  
> to support both multiple libs and also prepend the missing package  
> declaration in the generated files so I can do my work for now.
>
> BTW, if anyone has the same problem until it is properly fixed,  
> please feel free to contact me and I'll be happy to share the  
> modified Tool code.
>
> Cheers,
> Dimitrios
>
> Terence Parr wrote:
>>
>> On Jun 19, 2008, at 11:11 AM, Dimitrios Kolovos wrote:
>>
>>> Hi Ter,
>>>
>>> Looks good! Thanks!
>>>
>>> Would you also consider adding support for multiple lib  
>>> directories in the org.antlr.Tool class in 3.1?
>>
>> We definitely need...not sure if 3.1 is right release....i'm  
>> hoping to get the damn thing out shortly ;)  Still in  
>> ireland...Jim Idle has a few tweaks to do before we go b2.
>>
>> Ter
>>


From siva.kumar at loglogic.com  Thu Jun 19 14:05:49 2008
From: siva.kumar at loglogic.com (siva.kumar at loglogic.com)
Date: Thu, 19 Jun 2008 14:05:49 -0700
Subject: [antlr-interest] Exception in
	thread"main"	java.lang.OutOfMemoryError: Java heap space
In-Reply-To: <1213897062.8155.28.camel@jimi>
References: <117A6478DABB1D4E9509EA7F413AE7890736C565@CTMAIL2.calltower.com>
	<1213897062.8155.28.camel@jimi>
Message-ID: <117A6478DABB1D4E9509EA7F413AE789073D46C5@CTMAIL2.calltower.com>

Thanks for your suggestion, Jim.

The only place that I use/refer to the objects is in the parser in code:

keyvaluetokens  : ID EQ STRING COMMA
                {
                        String mykey = $ID.text;
                        System.out.println("ID IN TABLE= " + $ID.text + ",VALUE=" + $STRING.text) ;
                }
                ;

(The entire grammar is at:
http://pastie.textmate.org/218178
)

Will try to switch to C and see what happens. :-)

Thanks,
-Siva

________________________________________
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: Thursday, June 19, 2008 10:38 AM
To: antlr-interest at antlr.org
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Exception in thread"main" java.lang.OutOfMemoryError: Java heap space

On Thu, 2008-06-19 at 10:30 -0700, siva.kumar at loglogic.com wrote: 

I have a simple grammar at:

http://pastie.textmate.org/218178

The LOG file that's parsed is of the form:

ABCD="....", EF="aaaa", abcd="1.2.3.4",hostname=a at b.com,

While I build and run this using antlr and java, I get the "Java heap
space" problem on a very large file (70M). I don't have a problem with
smaller files

Try using the -Xincgc option with your runtime, but are you doing anything that would cause the runtime to try and create huge strings such as the entire input lots of times in the lexer, or calling the routine that produces the dot spec for graphviz (that blows up after the number of nodes gets somewhat large. Or creating objects and? references and then never freeing up the references to these objects?

You could always switch to the C output, where you could at least find out where the memory was going to ;-)

Jim 

From antlr at mirality.co.nz  Fri Jun 20 02:14:46 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 20 Jun 2008 21:14:46 +1200
Subject: [antlr-interest] if-then-else rule design question
In-Reply-To: <485A06FC.3070206@gmx.de>
References: <48562D44.9030401@gmx.de> <20080616123525.22619gmx1@mx002.gmx.net>
	<485A06FC.3070206@gmx.de>
Message-ID: <20080620091456.E5DC011ECD8@www.antlr.org>

At 19:13 19/06/2008, Fridi wrote:
 >hm, I thought, in analogy to regex, the '.' just consumes
 >anything.

That's right.  Which means it can consume an entire subtree 
without actually invoking any rules for it, which is what it 
sounded like you wanted.

 >Maybe I have to change my parser grammar as well.

I'm not sure why.  You shouldn't be trying to evaluate expressions 
at the parser level.


From antlr at mirality.co.nz  Fri Jun 20 02:21:56 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 20 Jun 2008 21:21:56 +1200
Subject: [antlr-interest] Begins-with/Ends-with ambiguity
In-Reply-To: <8a29e7880806190825y6e99956evc22fd3afc3927324@mail.gmail.co
 m>
References: <8a29e7880806181435s3d84805bg1f0968ef8af1849a@mail.gmail.com>
	<8a29e7880806190825y6e99956evc22fd3afc3927324@mail.gmail.com>
Message-ID: <20080620092205.0ABF811ED5C@www.antlr.org>

At 03:25 20/06/2008, Ben Dotte wrote:
 >I think I got this solved now by defining a wildcard rule in
 >the lexer like this:
 >
 >TEXT_WITH_WILDCARD
 >	:	(('*' TEXT)|(TEXT '*')) ;
 >
 >Then I just handle the difference between begins-with and 
ends-with
 >in the AST tree walker. I assume this works because ANTLR is
 >interpreting the entire thing as a single token (if that's the
 >right word), rather than trying to match to a parser rule that
 >ignores spaces.

That's right.  Although you need to be careful when you're using a 
rule (TEXT, in this case) as both a terminal and a 
non-terminal.  It can introduce ambiguity (especially for the 
suffix case, or if *s are permitted elsewhere).

The other way to solve this problem (as you guessed earlier) is to 
make whitespace significant again.


From antlr at mirality.co.nz  Fri Jun 20 02:26:17 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 20 Jun 2008 21:26:17 +1200
Subject: [antlr-interest] Using lexer rules properly
In-Reply-To: <7614359.df26473a6c2cd38b2271ac25f6d4bbc5@www.explodingcode r.com>
References: <7614359.df26473a6c2cd38b2271ac25f6d4bbc5@www.explodingcoder.com>
Message-ID: <20080620092624.AAD4411E9C2@www.antlr.org>

At 04:09 20/06/2008, spoulson at explodingcoder.com wrote:
 >e.g. It parses "cron * * * * *" with all the *'s as a single
 >cron_term match then fails on NoViableAltException on the next
 >cron_term in the parser rule.
 >
 >The solution, which I haven't been able to figure out, is to 
make
 >cron_term disallow the WS rule to interfere between 
terminals.  I
 >don't expect spaces between any of the matches within cron_term.
 >
 >Is this possible without changing the WS rule?

Why don't you want to change the WS rule?  Doing that would make 
this problem significantly easier.

There's nothing magical about skipping whitespace, and in many 
cases it's actually counterproductive to do so.  I don't know why 
people in general seem so anti-WS :)


From dskolovos at gmail.com  Fri Jun 20 03:15:51 2008
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Fri, 20 Jun 2008 11:15:51 +0100
Subject: [antlr-interest] ANTLR 3.1, headers in imported grammars
In-Reply-To: <F5EDA1FD-3859-4C6B-B958-D1B56ED9BE38@cs.usfca.edu>
References: <48593405.2090205@gmail.com>
	<AE5872A3-B72E-47C3-8653-08E0CAEB57AC@cs.usfca.edu>
	<20080618202116.60DA011ED50@www.antlr.org>
	<077CC941-ED66-4173-AC69-195D8BC76348@cs.usfca.edu>
	<485A30BD.6010102@gmail.com>
	<F99673DA-1719-45E3-B476-2745BC16A21F@cs.usfca.edu>
	<485A7373.7060802@gmail.com>
	<F5EDA1FD-3859-4C6B-B958-D1B56ED9BE38@cs.usfca.edu>
Message-ID: <485B8357.4040004@gmail.com>

Thanks for the tip! I'll stick to what I have for now but this is good 
to know!

Cheers,
Dimitrios

Terence Parr wrote:
> i don't check actions so you should be able to do say:
>
> @Dimitrios {...}
>
> and then ref <actions.Dimitrios> or something in the templates.  No 
> code change :)
>
> Ter
> On Jun 19, 2008, at 3:55 PM, Dimitrios Kolovos wrote:
>
>> I understand :)
>>
>> It's not urgent (at least for me) as I've modified the Tool class to 
>> support both multiple libs and also prepend the missing package 
>> declaration in the generated files so I can do my work for now.
>>
>> BTW, if anyone has the same problem until it is properly fixed, 
>> please feel free to contact me and I'll be happy to share the 
>> modified Tool code.
>>
>> Cheers,
>> Dimitrios
>>
>> Terence Parr wrote:
>>>
>>> On Jun 19, 2008, at 11:11 AM, Dimitrios Kolovos wrote:
>>>
>>>> Hi Ter,
>>>>
>>>> Looks good! Thanks!
>>>>
>>>> Would you also consider adding support for multiple lib directories 
>>>> in the org.antlr.Tool class in 3.1?
>>>
>>> We definitely need...not sure if 3.1 is right release....i'm hoping 
>>> to get the damn thing out shortly ;)  Still in ireland...Jim Idle 
>>> has a few tweaks to do before we go b2.
>>>
>>> Ter
>>>
>
>

From dskolovos at gmail.com  Fri Jun 20 05:20:36 2008
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Fri, 20 Jun 2008 13:20:36 +0100
Subject: [antlr-interest] setTreeAdaptor and delegates
Message-ID: <485BA094.5070303@gmail.com>

Hi,

In the composite grammar (3.1.b) that I'm working on, I need to set the 
TreeAdaptor of the generated parser to a custom one. I expected that 
setting the TreeAdaptor to the top-level parser would also propagate it 
in the delegates but this doesn't seem to be the case.

If implementing such a TreeAdaptor-propagating behaviour would be too 
much of a problem, it would be nice to at least have a field (e.g. 
"delegates") that contains a collection of all the delegates in the 
generated parser (in addition to the individual fields) so that one can 
implement this propagating behaviour in a recursive manner using a 
generic algorithm that doesn't need to know the names of each delegate. 
(Such a generic algorithm would also require the getTreeAdaptor() and 
setTreeAdaptor() methods to be moved to a core base-class such as Parser 
or Base Recognizer)

I've managed to do this using a custom base-class and reflection, but I 
thought this may be a useful enhancement for future versions of ANTLR. 
Any ideas?

Cheers,
Dimitrios

From r_reitzi at cs.uni-kl.de  Fri Jun 20 05:52:52 2008
From: r_reitzi at cs.uni-kl.de (Raphael Reitzig)
Date: Fri, 20 Jun 2008 14:52:52 +0200
Subject: [antlr-interest] To match or not to match
Message-ID: <25f4411f87108021ee12fec848bf32ef@mail.frhk.de>

Hello!

I am quite a novice to ANTLR as well as language parsing at all, so perhaps
I dug in a bit to quickly (got The Book the day before yesterday). Anyway,
I try to build a grammar I need for a job at university and get some
strange results I do not understand. I hope file appendings work on the
list.

Using ANTLRWorks' Interpreter, I try to match the following sentence
against rule 'atom':

Min(4,3)=x

It works perfectly. It should match rule 'property' as well (last
alternative: 'property : ( atom ) => atom;'), but trying that yields
FailedPredicateException. (I (think I) need the predicates to help LL(*)
along with multiple '('s in a row.) Exactly why does the predicate become
false _if_ the checked sequence _is_ an atom?

Matching Min(4,3) alone against 'term' I expect to work, for it did,
matching the statement given above against 'atom'. However, it fails
without exception, aparently not recognizing ',' correctly.

I would not be surprised I if made a (simple?) systematic error. Can you
help me?

Greetings from Germany

Raphael Reitzig


From kenneth.domino at domemtech.com  Fri Jun 20 07:11:23 2008
From: kenneth.domino at domemtech.com (Kenneth Domino)
Date: Fri, 20 Jun 2008 10:11:23 -0400
Subject: [antlr-interest] Api question.
Message-ID: <39E283F2BFA8452CB42F219049675A7C@pc2008>

Is there an API in the runtime to access the grammar during a parse?  I'm 
interested in knowing the rule and point in the rule corresponding to the 
action routine, making the action routine aware about the grammar itself. 
For example, an AST encoding "Expr:  Expr # { code(GiveMeMarkedUpAST()); } 
'+' Expr | Expr '-' Expr" would mean that the action "code()" is within the 
Expr rule, the first alternative.  This information is returned by the 
runtime code "GiveMeMarkedUpAST()".  The "#" would indicate the location of 
the parse action, like the dot used in LR items.  I could create a scheme to 
inform my action routine this information but I'm looking to see if Antlr 
can provide knowledge about the grammar in the form of an AST to the action. 


From ben.dotte at gmail.com  Fri Jun 20 07:33:01 2008
From: ben.dotte at gmail.com (Ben Dotte)
Date: Fri, 20 Jun 2008 09:33:01 -0500
Subject: [antlr-interest] Begins-with/Ends-with ambiguity
In-Reply-To: <485b76bd.1d3e400a.22dc.6f10SMTPIN_ADDED@mx.google.com>
References: <8a29e7880806181435s3d84805bg1f0968ef8af1849a@mail.gmail.com>
	<8a29e7880806190825y6e99956evc22fd3afc3927324@mail.gmail.com>
	<485b76bd.1d3e400a.22dc.6f10SMTPIN_ADDED@mx.google.com>
Message-ID: <8a29e7880806200733i411c4d4fofdb72dd73ec8040c@mail.gmail.com>

Thanks for confirming my suspicions. The lexer rule has held up so far
but I really need to get some unit tests written so these ambiguities
quit sneaking up on me!

On Fri, Jun 20, 2008 at 4:21 AM, Gavin Lambert <antlr at mirality.co.nz> wrote:
> At 03:25 20/06/2008, Ben Dotte wrote:
>>I think I got this solved now by defining a wildcard rule in
>>the lexer like this:
>>
>>TEXT_WITH_WILDCARD
>>       :       (('*' TEXT)|(TEXT '*')) ;
>>
>>Then I just handle the difference between begins-with and ends-with
>>in the AST tree walker. I assume this works because ANTLR is
>>interpreting the entire thing as a single token (if that's the
>>right word), rather than trying to match to a parser rule that
>>ignores spaces.
>
> That's right.  Although you need to be careful when you're using a rule
> (TEXT, in this case) as both a terminal and a non-terminal.  It can
> introduce ambiguity (especially for the suffix case, or if *s are permitted
> elsewhere).
>
> The other way to solve this problem (as you guessed earlier) is to make
> whitespace significant again.
>
>

From r_reitzi at cs.uni-kl.de  Fri Jun 20 08:19:33 2008
From: r_reitzi at cs.uni-kl.de (Raphael Reitzig)
Date: Fri, 20 Jun 2008 17:19:33 +0200
Subject: [antlr-interest] To match or not to match
In-Reply-To: <25f4411f87108021ee12fec848bf32ef@mail.frhk.de>
References: <25f4411f87108021ee12fec848bf32ef@mail.frhk.de>
Message-ID: <90ab8c830c1dca8e7a9a7d8871d9eb3f@mail.frhk.de>

Apparantly, attachments won't work. Sorry for that. 

You can find the grammar file here: 
http://raphael.frhk.de/files/property.g 

For those afraid of viruses or such: 

***** 

grammar property;

start 
	:	property EOF;

property //options { backtrack=true; memoize=true; }
	:	NOT '(' property ')'
	|	( ALL | GLOB | SOME | FIN | NEXT)+ '(' property ')'
	|	'(' property ( (AND | OR) property )+ ')'
	|	('(' atom ')')  => '(' atom ')' 
	|	( atom ) => atom;
	
atom
	:	term (EQ | NEQ | LES | GRT | LEQ | GEQ) term;

term
	:	'(' term (PLUS | MINUS | MULT| DIV | MOD) term ')'
	|	(MIN | MAX) '(' term ',' term ')'
	|	(MINUS)? INT
	|	(MINUS)? VAR
	|	MINUS '(' term ')';

INT 	:	('0'..'9')+;
VAR 	:	('a'..'z') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_')*;

ALL	:	'A';
SOME 	:	'E';
GLOB	:	'G';
FIN 	:	'F';
NEXT		:	'X';

UNTIL 	:	'U';
IMPL 	:	'->';
AND 	:	'&';
OR 	:	'|';
NOT 	:	'!';

PLUS 	:	'+';
MINUS 	:	'-'; 
MULT 	:	'*';
DIV 	:	'/';
MOD 	:	'%';

MIN 	:	'Min';
MAX 	:	'Max';

EQ 	:	'=';
NEQ 	:	'!=';
LES 	:	'<';
GRT 	:	'>';
LEQ 	:	 '<=';
GEQ 	:	 '>=';

WS 	:	(' ' | '\t' | '\n' | '\r')+ { skip(); };

*****

On Fri, 20 Jun 2008 14:52:52 +0200, Raphael Reitzig <r_reitzi at cs.uni-kl.de>
wrote:
> Hello!
> 
> I am quite a novice to ANTLR as well as language parsing at all, so
> perhaps
> I dug in a bit to quickly (got The Book the day before yesterday).
Anyway,
> I try to build a grammar I need for a job at university and get some
> strange results I do not understand. I hope file appendings work on the
> list.
> 
> Using ANTLRWorks' Interpreter, I try to match the following sentence
> against rule 'atom':
> 
> Min(4,3)=x
> 
> It works perfectly. It should match rule 'property' as well (last
> alternative: 'property : ( atom ) => atom;'), but trying that yields
> FailedPredicateException. (I (think I) need the predicates to help LL(*)
> along with multiple '('s in a row.) Exactly why does the predicate become
> false _if_ the checked sequence _is_ an atom?
> 
> Matching Min(4,3) alone against 'term' I expect to work, for it did,
> matching the statement given above against 'atom'. However, it fails
> without exception, aparently not recognizing ',' correctly.
> 
> I would not be surprised I if made a (simple?) systematic error. Can you
> help me?
> 
> Greetings from Germany
> 
> Raphael Reitzig


From siva.kumar at loglogic.com  Fri Jun 20 10:37:23 2008
From: siva.kumar at loglogic.com (siva.kumar at loglogic.com)
Date: Fri, 20 Jun 2008 10:37:23 -0700
Subject: [antlr-interest] Exception
	inthread"main"	java.lang.OutOfMemoryError: Java heap space
In-Reply-To: <117A6478DABB1D4E9509EA7F413AE789073D46C5@CTMAIL2.calltower.com>
References: <117A6478DABB1D4E9509EA7F413AE7890736C565@CTMAIL2.calltower.com><1213897062.8155.28.camel@jimi>
	<117A6478DABB1D4E9509EA7F413AE789073D46C5@CTMAIL2.calltower.com>
Message-ID: <117A6478DABB1D4E9509EA7F413AE789073D5198@CTMAIL2.calltower.com>

Okay, this was my mistake. I was using code that I got from some sample grammar and was using:

        testLexer lex = new testLexer(new ANTLRFileStream(args[0]));

According to the documentation for ANTLRFileStream:

  This is a char buffer stream that is loaded from a file all at once when 
  you construct the object. This looks very much like an ANTLReader or 
  ANTLRInputStream, but it's a special case since we know the exact size of 
  the object to load. We can avoid lots of data copying.

So the code was trying to load the entire file before parsing it.

Surprisingly, the almost equivalent C code, ran for some time before core-dumping:

    pANTLR3_INPUT_STREAM           input;
    ptestLexer               lex;
    pANTLR3_COMMON_TOKEN_STREAM    tokens;
    ptestParser              parser;

    input  = antlr3AsciiFileStreamNew          ((pANTLR3_UINT8)argv[1]);
    lex    = testLexerNew                (input);
    tokens = antlr3CommonTokenStreamSourceNew  (ANTLR3_SIZE_HINT, TOKENSOURCE(lex));
    parser = testParserNew               (tokens);

    parser  ->logfile(parser);


Thanks,
-Siva

-----Original Message-----
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Siva Kumar (siva.kumar at loglogic.com)
Sent: Thursday, June 19, 2008 2:06 PM
To: Jim Idle; antlr-interest at antlr.org
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Exception inthread"main" java.lang.OutOfMemoryError: Java heap space

Thanks for your suggestion, Jim.

The only place that I use/refer to the objects is in the parser in code:

keyvaluetokens  : ID EQ STRING COMMA
                {
                        String mykey = $ID.text;
                        System.out.println("ID IN TABLE= " + $ID.text + ",VALUE=" + $STRING.text) ;
                }
                ;

(The entire grammar is at:
http://pastie.textmate.org/218178
)

Will try to switch to C and see what happens. :-)

Thanks,
-Siva

________________________________________
From: antlr-interest-bounces at antlr.org [mailto:antlr-interest-bounces at antlr.org] On Behalf Of Jim Idle
Sent: Thursday, June 19, 2008 10:38 AM
To: antlr-interest at antlr.org
Cc: antlr-interest at antlr.org
Subject: Re: [antlr-interest] Exception in thread"main" java.lang.OutOfMemoryError: Java heap space

On Thu, 2008-06-19 at 10:30 -0700, siva.kumar at loglogic.com wrote: 

I have a simple grammar at:

http://pastie.textmate.org/218178

The LOG file that's parsed is of the form:

ABCD="....", EF="aaaa", abcd="1.2.3.4",hostname=a at b.com,

While I build and run this using antlr and java, I get the "Java heap
space" problem on a very large file (70M). I don't have a problem with
smaller files

Try using the -Xincgc option with your runtime, but are you doing anything that would cause the runtime to try and create huge strings such as the entire input lots of times in the lexer, or calling the routine that produces the dot spec for graphviz (that blows up after the number of nodes gets somewhat large. Or creating objects and? references and then never freeing up the references to these objects?

You could always switch to the C output, where you could at least find out where the memory was going to ;-)

Jim 

From hfrequency at gmail.com  Fri Jun 20 12:43:09 2008
From: hfrequency at gmail.com (Cesar Otero)
Date: Fri, 20 Jun 2008 15:43:09 -0400
Subject: [antlr-interest] Problem with python runtime example (stdin)
Message-ID: <b61746e50806201243i36cea146o4129928b4fb63a8f@mail.gmail.com>

Greetings to everyone!

I recently stumbled onto this wiki entry "Book Examples Modified for Python"

http://www.antlr.org/wiki/pages/viewpage.action?pageId=4554829

Generating the grammar files works just fine. But, when I go to
execute the test.py I get the following error message:

####

Traceback (most recent call last):
  File "C:/grammars/test.py", line 8, in <module>
    char_stream = antlr3.ANTLRInputStream(sys.stdin)
  File "C:\Python25\lib\site-packages\antlr_python_runtime-3.0.1-py2.5.egg\antlr3\streams.py",
line 534, in __init__
    data = file.read()
AttributeError: read

####

Any ideas?

Regards,
hf

From parrt at cs.usfca.edu  Fri Jun 20 12:48:06 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 20 Jun 2008 20:48:06 +0100
Subject: [antlr-interest] setTreeAdaptor and delegates
In-Reply-To: <485BA094.5070303@gmail.com>
References: <485BA094.5070303@gmail.com>
Message-ID: <CB4863E0-9CBC-440E-A658-5255AEA397EE@cs.usfca.edu>

INteresting....i wonder if you'd ever want the delegates to have  
different tree ctors.

I guess the setTreeAdaptor should announce.  Hmm...i wonder what else  
falls into same category.  Added:

http://www.antlr.org:8888/browse/ANTLR-302

Ter
On Jun 20, 2008, at 1:20 PM, Dimitrios Kolovos wrote:

> In the composite grammar (3.1.b) that I'm working on, I need to set  
> the TreeAdaptor of the generated parser to a custom one. I expected  
> that setting the TreeAdaptor to the top-level parser would also  
> propagate it in the delegates but this doesn't seem to be the case.
>
> If implementing such a TreeAdaptor-propagating behaviour would be  
> too much of a problem, it would be nice to at least have a field  
> (e.g. "delegates") that contains a collection of all the delegates  
> in the generated parser (in addition to the individual fields) so  
> that one can implement this propagating behaviour in a recursive  
> manner using a generic algorithm that doesn't need to know the  
> names of each delegate. (Such a generic algorithm would also  
> require the getTreeAdaptor() and setTreeAdaptor() methods to be  
> moved to a core base-class such as Parser or Base Recognizer)


From pink at odahoda.de  Fri Jun 20 13:42:59 2008
From: pink at odahoda.de (Benjamin Niemann)
Date: Fri, 20 Jun 2008 22:42:59 +0200
Subject: [antlr-interest] Problem with python runtime example (stdin)
In-Reply-To: <b61746e50806201243i36cea146o4129928b4fb63a8f@mail.gmail.com>
References: <b61746e50806201243i36cea146o4129928b4fb63a8f@mail.gmail.com>
Message-ID: <543531490806201342p49328c58he18981a69e340456@mail.gmail.com>

Hi Cesar,

On Fri, Jun 20, 2008 at 9:43 PM, Cesar Otero <hfrequency at gmail.com> wrote:
> Greetings to everyone!
>
> I recently stumbled onto this wiki entry "Book Examples Modified for Python"
>
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=4554829
>
> Generating the grammar files works just fine. But, when I go to
> execute the test.py I get the following error message:
>
> ####
>
> Traceback (most recent call last):
>  File "C:/grammars/test.py", line 8, in <module>
>    char_stream = antlr3.ANTLRInputStream(sys.stdin)
>  File "C:\Python25\lib\site-packages\antlr_python_runtime-3.0.1-py2.5.egg\antlr3\streams.py",
> line 534, in __init__
>    data = file.read()
> AttributeError: read
>
> ####

That is indeed very strange. Looks like your sys.stdin is not a file object?!?!
Can you post your test.py?

-Ben

From dskolovos at gmail.com  Fri Jun 20 13:53:13 2008
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Fri, 20 Jun 2008 21:53:13 +0100
Subject: [antlr-interest] setTreeAdaptor and delegates
In-Reply-To: <CB4863E0-9CBC-440E-A658-5255AEA397EE@cs.usfca.edu>
References: <485BA094.5070303@gmail.com>
	<CB4863E0-9CBC-440E-A658-5255AEA397EE@cs.usfca.edu>
Message-ID: <485C18B9.9070304@gmail.com>

Since you asked :) there is another thing related to reuse that may (or 
may) not need be improved.

I need to collect all parse errors generated during parsing (instead of 
just printing them which is the default behaviour). To do that I've 
added a @rulecatch in my top-level grammar and an ArrayList in the 
@members. Again, I'd expect that the @rulecatch would propagate to the 
imported grammars (which is not the case).

Also I hoped that the delegate would have a standard-name field e.g. 
parentParser which I could use to add the errors caught in sub-grammars 
to the ArrayList of the parent parser. I can still do this (again via 
reflection) but it would help if the parent parser had a fixed name in 
the delegate.

Cheers,
Dimitrios

Terence Parr wrote:
> INteresting....i wonder if you'd ever want the delegates to have 
> different tree ctors.
>
> I guess the setTreeAdaptor should announce.  Hmm...i wonder what else 
> falls into same category.  Added:
>
> http://www.antlr.org:8888/browse/ANTLR-302
>
> Ter
> On Jun 20, 2008, at 1:20 PM, Dimitrios Kolovos wrote:
>
>> In the composite grammar (3.1.b) that I'm working on, I need to set 
>> the TreeAdaptor of the generated parser to a custom one. I expected 
>> that setting the TreeAdaptor to the top-level parser would also 
>> propagate it in the delegates but this doesn't seem to be the case.
>>
>> If implementing such a TreeAdaptor-propagating behaviour would be too 
>> much of a problem, it would be nice to at least have a field (e.g. 
>> "delegates") that contains a collection of all the delegates in the 
>> generated parser (in addition to the individual fields) so that one 
>> can implement this propagating behaviour in a recursive manner using 
>> a generic algorithm that doesn't need to know the names of each 
>> delegate. (Such a generic algorithm would also require the 
>> getTreeAdaptor() and setTreeAdaptor() methods to be moved to a core 
>> base-class such as Parser or Base Recognizer)
>
>

From parrt at cs.usfca.edu  Fri Jun 20 13:58:23 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 20 Jun 2008 21:58:23 +0100
Subject: [antlr-interest] setTreeAdaptor and delegates
In-Reply-To: <485C18B9.9070304@gmail.com>
References: <485BA094.5070303@gmail.com>
	<CB4863E0-9CBC-440E-A658-5255AEA397EE@cs.usfca.edu>
	<485C18B9.9070304@gmail.com>
Message-ID: <91C67CA7-9298-434D-8DE8-58927DABDE4A@cs.usfca.edu>


On Jun 20, 2008, at 9:53 PM, Dimitrios Kolovos wrote:

> Since you asked :) there is another thing related to reuse that may  
> (or may) not need be improved.
>
> I need to collect all parse errors generated during parsing  
> (instead of just printing them which is the default behaviour). To  
> do that I've added a @rulecatch in my top-level grammar and an  
> ArrayList in the @members. Again, I'd expect that the @rulecatch  
> would propagate to the imported grammars (which is not the case).

Hmm...well you could want it to be different.  Hm....what about all  
the other action names and any future ones?  Is there a general way  
we could handle this?  Maybe:

@delegates::header {...}
@delegates::rulecatch {...}

??

> Also I hoped that the delegate would have a standard-name field  
> e.g. parentParser which I could use to add the errors caught in sub- 
> grammars to the ArrayList of the parent parser. I can still do this  
> (again via reflection) but it would help if the parent parser had a  
> fixed name in the delegate.

A good point.  added:

http://www.antlr.org:8888/browse/ANTLR-303

Ter
PS	signing off from Galway, Ireland...10pm my time.  I'm traveling  
over next 3 days (ugh) to get home to San Francisco.

From hfrequency at gmail.com  Fri Jun 20 14:01:57 2008
From: hfrequency at gmail.com (Cesar Otero)
Date: Fri, 20 Jun 2008 17:01:57 -0400
Subject: [antlr-interest] Problem with python runtime example (stdin)
In-Reply-To: <543531490806201342p49328c58he18981a69e340456@mail.gmail.com>
References: <b61746e50806201243i36cea146o4129928b4fb63a8f@mail.gmail.com>
	<543531490806201342p49328c58he18981a69e340456@mail.gmail.com>
Message-ID: <b61746e50806201401x12212de8v9e5a6ee8af7bf73d@mail.gmail.com>

Hi Ben:

Thanks for the reply! Here's the test.py as an attachment. (This is
maybe the third time in my life that I post to a newsgroup, I'm
assuming that's how I post a file...)

Just in case here is the code:

import sys
import antlr3
import antlr3.tree
from ExprLexer import ExprLexer
from ExprParser import ExprParser
from Eval import Eval

char_stream = antlr3.ANTLRInputStream(sys.stdin)
lexer = ExprLexer(char_stream)
tokens = antlr3.CommonTokenStream(lexer)
parser = ExprParser(tokens)
r = parser.prog()

# this is the root of the AST
root = r.tree

nodes = antlr3.tree.CommonTreeNodeStream(root)
nodes.setTokenStream(tokens)
eval = Eval(nodes)
eval.prog()

This is a copy-paste of the code from
http://www.antlr.org/wiki/pages/viewpage.action?pageId=4554829.

Regards,
Cesar

On Fri, Jun 20, 2008 at 4:42 PM, Benjamin Niemann <pink at odahoda.de> wrote:
> Hi Cesar,
>
> On Fri, Jun 20, 2008 at 9:43 PM, Cesar Otero <hfrequency at gmail.com> wrote:
>> Greetings to everyone!
>>
>> I recently stumbled onto this wiki entry "Book Examples Modified for Python"
>>
>> http://www.antlr.org/wiki/pages/viewpage.action?pageId=4554829
>>
>> Generating the grammar files works just fine. But, when I go to
>> execute the test.py I get the following error message:
>>
>> ####
>>
>> Traceback (most recent call last):
>>  File "C:/grammars/test.py", line 8, in <module>
>>    char_stream = antlr3.ANTLRInputStream(sys.stdin)
>>  File "C:\Python25\lib\site-packages\antlr_python_runtime-3.0.1-py2.5.egg\antlr3\streams.py",
>> line 534, in __init__
>>    data = file.read()
>> AttributeError: read
>>
>> ####
>
> That is indeed very strange. Looks like your sys.stdin is not a file object?!?!
> Can you post your test.py?
>
> -Ben
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.py
Type: text/x-python
Size: 520 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080620/6be6f4e1/attachment.py 

From hfrequency at gmail.com  Fri Jun 20 14:31:40 2008
From: hfrequency at gmail.com (Cesar Otero)
Date: Fri, 20 Jun 2008 17:31:40 -0400
Subject: [antlr-interest] Problem with python runtime example (stdin)
In-Reply-To: <b61746e50806201401x12212de8v9e5a6ee8af7bf73d@mail.gmail.com>
References: <b61746e50806201243i36cea146o4129928b4fb63a8f@mail.gmail.com>
	<543531490806201342p49328c58he18981a69e340456@mail.gmail.com>
	<b61746e50806201401x12212de8v9e5a6ee8af7bf73d@mail.gmail.com>
Message-ID: <b61746e50806201431i3e6c480bl26196b9b3e511244@mail.gmail.com>

Hi again:

I think I have an idea of what the problem is.

sys.stdin is suppose to be for standard input, correct? But checking
the object in python, I get that stdin is a an rpcProxy object.

Regards,
Cesar

On Fri, Jun 20, 2008 at 5:01 PM, Cesar Otero <hfrequency at gmail.com> wrote:
> Hi Ben:
>
> Thanks for the reply! Here's the test.py as an attachment. (This is
> maybe the third time in my life that I post to a newsgroup, I'm
> assuming that's how I post a file...)
>
> Just in case here is the code:
>
> import sys
> import antlr3
> import antlr3.tree
> from ExprLexer import ExprLexer
> from ExprParser import ExprParser
> from Eval import Eval
>
> char_stream = antlr3.ANTLRInputStream(sys.stdin)
> lexer = ExprLexer(char_stream)
> tokens = antlr3.CommonTokenStream(lexer)
> parser = ExprParser(tokens)
> r = parser.prog()
>
> # this is the root of the AST
> root = r.tree
>
> nodes = antlr3.tree.CommonTreeNodeStream(root)
> nodes.setTokenStream(tokens)
> eval = Eval(nodes)
> eval.prog()
>
> This is a copy-paste of the code from
> http://www.antlr.org/wiki/pages/viewpage.action?pageId=4554829.
>
> Regards,
> Cesar
>
> On Fri, Jun 20, 2008 at 4:42 PM, Benjamin Niemann <pink at odahoda.de> wrote:
>> Hi Cesar,
>>
>> On Fri, Jun 20, 2008 at 9:43 PM, Cesar Otero <hfrequency at gmail.com> wrote:
>>> Greetings to everyone!
>>>
>>> I recently stumbled onto this wiki entry "Book Examples Modified for Python"
>>>
>>> http://www.antlr.org/wiki/pages/viewpage.action?pageId=4554829
>>>
>>> Generating the grammar files works just fine. But, when I go to
>>> execute the test.py I get the following error message:
>>>
>>> ####
>>>
>>> Traceback (most recent call last):
>>>  File "C:/grammars/test.py", line 8, in <module>
>>>    char_stream = antlr3.ANTLRInputStream(sys.stdin)
>>>  File "C:\Python25\lib\site-packages\antlr_python_runtime-3.0.1-py2.5.egg\antlr3\streams.py",
>>> line 534, in __init__
>>>    data = file.read()
>>> AttributeError: read
>>>
>>> ####
>>
>> That is indeed very strange. Looks like your sys.stdin is not a file object?!?!
>> Can you post your test.py?
>>
>> -Ben
>>
>

From hfrequency at gmail.com  Fri Jun 20 14:51:57 2008
From: hfrequency at gmail.com (Cesar Otero)
Date: Fri, 20 Jun 2008 17:51:57 -0400
Subject: [antlr-interest] Problem with python runtime example (stdin)
In-Reply-To: <b61746e50806201431i3e6c480bl26196b9b3e511244@mail.gmail.com>
References: <b61746e50806201243i36cea146o4129928b4fb63a8f@mail.gmail.com>
	<543531490806201342p49328c58he18981a69e340456@mail.gmail.com>
	<b61746e50806201401x12212de8v9e5a6ee8af7bf73d@mail.gmail.com>
	<b61746e50806201431i3e6c480bl26196b9b3e511244@mail.gmail.com>
Message-ID: <b61746e50806201451i6f1143c8o920cb55786773d5a@mail.gmail.com>

OK, my python installation is acting screwy :-(

Running the same program under either dos or python win, it works just
fine. But, if I run the program with Tkinter, the sys.stdin returns an
rpcProxy object. So, it's definitely not an antlr issue.

Thanks again for the feedback Ben!

Regards,
Cesar

On Fri, Jun 20, 2008 at 5:31 PM, Cesar Otero <hfrequency at gmail.com> wrote:
> Hi again:
>
> I think I have an idea of what the problem is.
>
> sys.stdin is suppose to be for standard input, correct? But checking
> the object in python, I get that stdin is a an rpcProxy object.
>
> Regards,
> Cesar
>
> On Fri, Jun 20, 2008 at 5:01 PM, Cesar Otero <hfrequency at gmail.com> wrote:
>> Hi Ben:
>>
>> Thanks for the reply! Here's the test.py as an attachment. (This is
>> maybe the third time in my life that I post to a newsgroup, I'm
>> assuming that's how I post a file...)
>>
>> Just in case here is the code:
>>
>> import sys
>> import antlr3
>> import antlr3.tree
>> from ExprLexer import ExprLexer
>> from ExprParser import ExprParser
>> from Eval import Eval
>>
>> char_stream = antlr3.ANTLRInputStream(sys.stdin)
>> lexer = ExprLexer(char_stream)
>> tokens = antlr3.CommonTokenStream(lexer)
>> parser = ExprParser(tokens)
>> r = parser.prog()
>>
>> # this is the root of the AST
>> root = r.tree
>>
>> nodes = antlr3.tree.CommonTreeNodeStream(root)
>> nodes.setTokenStream(tokens)
>> eval = Eval(nodes)
>> eval.prog()
>>
>> This is a copy-paste of the code from
>> http://www.antlr.org/wiki/pages/viewpage.action?pageId=4554829.
>>
>> Regards,
>> Cesar
>>
>> On Fri, Jun 20, 2008 at 4:42 PM, Benjamin Niemann <pink at odahoda.de> wrote:
>>> Hi Cesar,
>>>
>>> On Fri, Jun 20, 2008 at 9:43 PM, Cesar Otero <hfrequency at gmail.com> wrote:
>>>> Greetings to everyone!
>>>>
>>>> I recently stumbled onto this wiki entry "Book Examples Modified for Python"
>>>>
>>>> http://www.antlr.org/wiki/pages/viewpage.action?pageId=4554829
>>>>
>>>> Generating the grammar files works just fine. But, when I go to
>>>> execute the test.py I get the following error message:
>>>>
>>>> ####
>>>>
>>>> Traceback (most recent call last):
>>>>  File "C:/grammars/test.py", line 8, in <module>
>>>>    char_stream = antlr3.ANTLRInputStream(sys.stdin)
>>>>  File "C:\Python25\lib\site-packages\antlr_python_runtime-3.0.1-py2.5.egg\antlr3\streams.py",
>>>> line 534, in __init__
>>>>    data = file.read()
>>>> AttributeError: read
>>>>
>>>> ####
>>>
>>> That is indeed very strange. Looks like your sys.stdin is not a file object?!?!
>>> Can you post your test.py?
>>>
>>> -Ben
>>>
>>
>

From mig.marques at gmail.com  Sat Jun 21 09:50:47 2008
From: mig.marques at gmail.com (Miguel Marques)
Date: Sat, 21 Jun 2008 17:50:47 +0100
Subject: [antlr-interest] Grammar Problem With Custom Nodes
In-Reply-To: <9e64853e0806210938r4d3e7216h1f2f1127288e8517@mail.gmail.com>
References: <9e64853e0806210938r4d3e7216h1f2f1127288e8517@mail.gmail.com>
Message-ID: <9e64853e0806210950p551182f9qf5258f53ff69d103@mail.gmail.com>

Hello,
This is a small snippet of my grammar:

ident_list  : (R0+=ident -> $R0)
                ( ',' R0+=ident -> ^(TOKN_IDENT_LIST<Ident_List>  ident+ )
                 )* ;

ident   : T0=IDENT  -> ^( IDENT<VarIdent> ) ;

As you can see, I'm using custom nodes.

For the input  "x" I get a VarIdent object. Everything is ok so far.

For the input "x,y,z" I get a <Ident_List> with x,y,z as child's but they do
not belong to VarIdent class as I wanted.

Ident_List(root) -> [CommonTree(x), CommonTree(y)]

How can I tell that the "ident+" should produce a list of idents as childs
of Ident_List instanced as objects of the class VarIdent?

Ident_List(root) -> [VarIdent(x),VarIdent(y)]


thanks,
Miguel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080621/100b291f/attachment-0001.html 

From mig.marques at gmail.com  Sun Jun 22 10:44:42 2008
From: mig.marques at gmail.com (Miguel Marques)
Date: Sun, 22 Jun 2008 18:44:42 +0100
Subject: [antlr-interest] Grammar Problem With Custom Nodes
In-Reply-To: <9e64853e0806210950p551182f9qf5258f53ff69d103@mail.gmail.com>
References: <9e64853e0806210938r4d3e7216h1f2f1127288e8517@mail.gmail.com>
	<9e64853e0806210950p551182f9qf5258f53ff69d103@mail.gmail.com>
Message-ID: <27ED39CA-B80E-4806-B5FE-C3D7D4B5B967@gmail.com>

Hy again,

Another thing that I've noticed, if my input is "x,y" I get an  
Ident_List ( VarIdent(x) VarIdent(y)) which is correct. If my input is  
"x,y,z" I get an Ident_list ( CommonToken(x), CommonToken(y),  
CommonToken(z)).

My problem seems to be only with list of idents with length longer  
than 2.

thanks,
Miguel

On 2008/06/21, at 17:50, Miguel Marques wrote:

>
> Hello,
>
> This is a small snippet of my grammar:
>
> ident_list  : (R0+=ident -> $R0)
>                 ( ',' R0+=ident -> ^(TOKN_IDENT_LIST<Ident_List>   
> ident+ )
>                  )* ;
>
> ident   : T0=IDENT  -> ^( IDENT<VarIdent> ) ;
>
> As you can see, I'm using custom nodes.
>
> For the input  "x" I get a VarIdent object. Everything is ok so far.
>
> For the input "x,y,z" I get a <Ident_List> with x,y,z as child's but  
> they do not belong to VarIdent class as I wanted.
>
> Ident_List(root) -> [CommonTree(x), CommonTree(y)]
>
> How can I tell that the "ident+" should produce a list of idents as  
> childs of Ident_List instanced as objects of the class VarIdent?
>
> Ident_List(root) -> [VarIdent(x),VarIdent(y)]
>
>
> thanks,
> Miguel
>


From brent.yates at gmail.com  Sun Jun 22 11:59:24 2008
From: brent.yates at gmail.com (Brent Yates)
Date: Sun, 22 Jun 2008 14:59:24 -0400
Subject: [antlr-interest] C codegen change request: Expose TokenNames array
Message-ID: <6edc6c380806221159l7be66539i153b3744412346fd@mail.gmail.com>

Jim,

I would like to request a minor addition to the C codegen string template.
I would like the generated parser code to expose the TokenNames array.
Currently this array can only be accessed from actions in the rule code.  I
would like to be able to get to it via a straight C function call external
to a parser instance.  The reason I need this is for diagnostic display.  In
addition to retrieving a pointer to the array, I need to know the size of
the array.

Currently I modify the C.stg file and add the following lines:

This block is placed just after the context structure generation in the
header section (around line 692).

<if(PARSER)>
// Returns a pointer to the TokenNames array
ANTLR3_API pANTLR3_UINT8* <name>TokenNamesArray();
// Returns the number of elements in the TokenNames array
ANTLR3_API ANTLR3_UINT32 <name>TokenNamesArraySize();
<endif>

This block is placed just after the getTokenNames function code (around line
1395).

<if(PARSER)>
// Returns a pointer to the TokenNames array
pANTLR3_UINT8* <name>TokenNamesArray()
    {
    return(<grammar.composite.rootGrammar.recognizerName>TokenNames);
    }
// Returns the number of elements in the TokenNames array
ANTLR3_UINT32 <name>TokenNamesArraySize()
    {
    return(<length(tokenNames)>+4);
    }
<endif>

Thanks!

Brent Yates
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080622/4b355d3e/attachment.html 

From antlr at mirality.co.nz  Sun Jun 22 13:47:33 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 23 Jun 2008 08:47:33 +1200
Subject: [antlr-interest] C codegen change request: Expose TokenNames
 array
In-Reply-To: <6edc6c380806221159l7be66539i153b3744412346fd@mail.gmail.co
 m>
References: <6edc6c380806221159l7be66539i153b3744412346fd@mail.gmail.com>
Message-ID: <20080622204746.7D5AE11ECAB@www.antlr.org>

At 06:59 23/06/2008, Brent Yates wrote:
>// Returns a pointer to the TokenNames array
>pANTLR3_UINT8* <name>TokenNamesArray()
>     {
> 
>return(<grammar.composite.rootGrammar.recognizerName>TokenNames);
>     }

... which is exactly what getTokenNames does.  Why redefine it?

>// Returns the number of elements in the TokenNames array
>ANTLR3_UINT32 <name>TokenNamesArraySize()
>     {
>     return(<length(tokenNames)>+4);
>     }

A more robust implementation would be:

static ANTLR3_UINT32 getTokenCount(void)
{
     return 
sizeof(<grammar.composite.rootGrammar.recognizerName>TokenNames) / 
sizeof(<grammar.composite.rootGrammar.recognizerName>TokenNames[0]);
}

Then all they need is to be linked in as overridable class methods 
of ANTLR3_PARSER.  Or even the base recogniser, in fact.  (Also, 
the array pointer is already accessible through 
yourParser->pParser->rec->state->tokenNames; it might be simpler 
to similarly expose the token count rather than make an actual 
method for it.)  Alternatively, the TokenNames table could just be 
made null-terminated, so that the size of the table is 
discoverable given a pointer to it.  (Though that's not quite as 
tidy.)


And incidentally, Jim: why isn't an empty parameter list specified 
as 'void' in the C templates?  The meaning of "()" differs between 
C and C++, so it's better to be explicit.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080623/343fb382/attachment.html 

From brent.yates at gmail.com  Sun Jun 22 14:09:04 2008
From: brent.yates at gmail.com (Brent Yates)
Date: Sun, 22 Jun 2008 17:09:04 -0400
Subject: [antlr-interest] C codegen change request: Expose TokenNames
	array
In-Reply-To: <485eba72.1917400a.7237.ffffa616SMTPIN_ADDED@mx.google.com>
References: <6edc6c380806221159l7be66539i153b3744412346fd@mail.gmail.com>
	<485eba72.1917400a.7237.ffffa616SMTPIN_ADDED@mx.google.com>
Message-ID: <6edc6c380806221409g7e8d25efhd914f493a5922830@mail.gmail.com>

Gavin,


> ... which is exactly what getTokenNames does.  Why redefine it?
>

getTokenNames is static and can't be called external to a parser instance.


> A more robust implementation would be...
>

Either method for calculating the size should work.  The C.stg uses the
"<length(tokenNames)>+4" to set the size of the array, but your suggestion
is safer.


> Also, the array pointer is already accessible through
> yourParser->pParser->rec->state->tokenNames
>

I have used this, but find it very awkward.  Since I was suggesting a
change, I thought I would clean things up a little ;)  Also, this method
requires a parser instance.  What I am looking for is the equivalent of a
static class method.


> ; it might be simpler to similarly expose the token count rather than make
> an actual method for it.)  Alternatively, the TokenNames table could just be
> made null-terminated, so that the size of the table is discoverable given a
> pointer to it.  (Though that's not quite as tidy.)
>

My idea was to not mess with getTokenNames, but to add two simple functions
which return the necessary information.  These methods could be called
outside of any parser instance.  Again, this is just for diagnostic and tool
use.  They are not required to parse successfully.

Regards,

Brent Yates
[image: Close] Read more >>   Options >>
[image: Visit Answers.com] <http://www.answers.com?initiator=FFANS>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080622/636fd969/attachment.html 

From jimi at temporal-wave.com  Sun Jun 22 15:15:32 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 22 Jun 2008 15:15:32 -0700
Subject: [antlr-interest] C codegen change request: Expose
	TokenNames	array
In-Reply-To: <6edc6c380806221159l7be66539i153b3744412346fd@mail.gmail.com>
References: <6edc6c380806221159l7be66539i153b3744412346fd@mail.gmail.com>
Message-ID: <1214172932.18119.75.camel@jimi>

On Sun, 2008-06-22 at 14:59 -0400, Brent Yates wrote:

> Jim,
> 
> I would like to request a minor addition to the C codegen string
> template. 


This is in fact part of changes I am making (slowly because I have
contract work I have to complete ;-), for the 3.1 error recovery
changes.

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080622/ddfc374c/attachment.html 

From jimi at temporal-wave.com  Sun Jun 22 15:19:14 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Sun, 22 Jun 2008 15:19:14 -0700
Subject: [antlr-interest] C codegen change request: Expose
	TokenNames	array
In-Reply-To: <20080622204716.2057E1134857@msf1.dnsmadeeasy.com>
References: <6edc6c380806221159l7be66539i153b3744412346fd@mail.gmail.com>
	<20080622204716.2057E1134857@msf1.dnsmadeeasy.com>
Message-ID: <1214173154.18119.79.camel@jimi>

On Mon, 2008-06-23 at 08:47 +1200, Gavin Lambert wrote:

> At 06:59 23/06/2008, Brent Yates wrote:
> 
> > // Returns a pointer to the TokenNames array
> > pANTLR3_UINT8* <name>TokenNamesArray()
> >     {
> > 
> > return(<grammar.composite.rootGrammar.recognizerName>TokenNames);
> >     }
> 
> 
> ... which is exactly what getTokenNames does.  Why redefine it?
> 
> 
> > // Returns the number of elements in the TokenNames array
> > ANTLR3_UINT32 <name>TokenNamesArraySize()
> >     {
> >     return(<length(tokenNames)>+4);
> >     }
> 
> 
> A more robust implementation would be:
> 
> static ANTLR3_UINT32 getTokenCount(void)
> {
>     return
> sizeof(<grammar.composite.rootGrammar.recognizerName>TokenNames) /
> sizeof(<grammar.composite.rootGrammar.recognizerName>TokenNames[0]);
> }
> 
> Then all they need is to be linked in as overridable class methods of
> ANTLR3_PARSER.  Or even the base recogniser, in fact.  (Also, the
> array pointer is already accessible through
> yourParser->pParser->rec->state->tokenNames; it might be simpler to
> similarly expose the token count rather than make an actual method for
> it.)  Alternatively, the TokenNames table could just be made
> null-terminated, so that the size of the table is discoverable given a
> pointer to it.  (Though that's not quite as tidy.)


Originally I just used the deferences too, as it wasn't used by the Java
example error routines and so on and I wanted to see the token table.
But as this is now used a lot in the new recovery code, and error
messages, I decided to implement the function anyway as it is probably
more obvious.

> 
> 
> And incidentally, Jim: why isn't an empty parameter list specified as
> 'void' in the C templates?  The meaning of "()" differs between C and
> C++, so it's better to be explicit.


I usually do code that way in fact, but I will double check all that
before the next release.

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080622/9dc43fe9/attachment.html 

From tyoung1 at tx.rr.com  Sun Jun 22 16:14:44 2008
From: tyoung1 at tx.rr.com (Ted Young)
Date: Sun, 22 Jun 2008 18:14:44 -0500
Subject: [antlr-interest] Greedy Issues
Message-ID: <007301c8d4bd$c223c250$6401a8c0@isis>

Good day everyone,

 

I am having issues with the greedy option (I think).

 

My input is:

 

+t pt +t foo !

 

 

The +t indicates the writing system (in this case transliteration).  An
alternative is +s which is Hieroglyphic.  I would like to group together all
characters within each writing system.  So my preferred output is:

 

(SEQUENCE (LINE (PHRASE TRANSLITERATION p t) (PHRASE TRANSLITERATION f o
o)))

 

 

If I use the following code I get the results as expected:

 

options {

  language = Java;

  output = AST;

  ASTLabelType = CommonTree;

  backtrack = true;

  memoize = true;

}

 

mdc

  : line* EOF

    -> ^(SEQUENCE line*)

  ;

 

line

  : languageMarker seperator* endOfLine

    -> ^(LINE)

  | languageMarker span (languageMarker span)* endOfLine

    -> ^(LINE span+)

  ;

  

languageMarker

  : '+' 's' seperator { writingSystem = WritingSystem.HIEROGLYPHS; }

  | '+' 't' seperator { writingSystem = WritingSystem.TRANSLITERATION; }

  ;

 

endOfLine

  : '!' (seperator+ | EOF)

  | seperator* EOF

  ;

 

span

  : { writingSystem.isAlphabetic() }?=> text* seperator

    -> ^(PHRASE PHRASE[writingSystem.name()] text*)

  | { !writingSystem.isAlphabetic() }?=> //word //(seperator! word)*
seperator!

  ;

 

text options { greedy=false; }

  : (SPACE '+')=>{false}?=>.

  | .

  ;

 

seperator

  : SPACE

  | UNDERSCORE

  ;

  

affixSeperator

  : EQUAL 

  //| DASH

  ;

 

UNDERSCORE: '_';

EQUAL: '=';

DASH: '@';

 

SPACE: (' ' | '\t' | '\r'? '\n');

CHAR: 'A'..'Z' | 'a'..'z';

DIGIT: '0'..'9';

 

 

If I restore the line:

 

//| DASH

 

Then my output gets turned into:

 

(SEQUENCE (LINE (PHRASE TRANSLITERATION p t   + t   f o o)))

 

It seems as if the greedy modifier no longer operates when this completely
unrelated (and currently unused) alternation is enabled.

 

I am using ANTLR 3.1b1.  I cannot use ANTLR3.0 because use of the greedy
option causes sporadic null pointer exceptions during generation.

 

 

 

To give you some perspective this is a transcription language called MdC
used to transcribe ancient Egyptian texts.  I have actually spent all day
(approximately 6 hours) trying for the life of me to figure out how to parse
a sequence of characters without actually consuming the end tokens.
Effectively, what I want is a negative lookahead expression which is what I
am trying to do in "text".

 

For example:

 

+s dwa r:a-ra:Z1 +t dwa ra +s nfr !

 

 

Needs to be groups such as:

 

(SEQUENCE (LINE (WORD dwa r:a-ra:Z1) (PHRASE TRANSLITERATION dwa ra) (WORD
nfr)))

 

 

As you can see, I have disabled all of the WORD parsing in order to simplify
the example.  That I have no trouble with the WORDs since it is very clear
what composes a word.  In the case of transliteration I ultimately need to
suck up all characters until I reach 

 

' !' | ' +'

 

(each preceded with a space) Without actually consuming those tokens (they
need to be handled higher up the parse tree).

 

Thank you for your help,

 

Ted

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080622/2bb048fb/attachment-0001.html 

From Gerz at fgan.de  Mon Jun 23 05:25:15 2008
From: Gerz at fgan.de (Gerz, Michael)
Date: Mon, 23 Jun 2008 14:25:15 +0200
Subject: [antlr-interest] Invalid rule text
In-Reply-To: <484DA5A2.1050706@teststep.org>
References: <484DA5A2.1050706@teststep.org>
Message-ID: <1FF0CFC89178B64DBD5CF6696750AC430A964C@mailserv1.lorien.fkie.fgan.de>

Hello again!

> In my tree grammar, there is a rule that looks like this:
> 
> 
> expressionList
>    @after { System.out.println($expressionList.text); }
>     :  
>         ( expression   { System.out.println($expression.text); }   )+
>    ;
>
>
> When this rule is entered, it outputs one or more <expression>'s. 
> However, at the end (i.e. in @after), it only outputs the first
element of 
> the expressionList.

I finally realized what the problem is:

expressionList does not have a root token but instead consists of a list
of tokens!

Is there any chance to warn the user if he wants to access the text of a
rule that apparently has no root token? I can imagine I am not the only
one stumbling over this problem...

Best regards,

Michael


From sharwell at pixelminegames.com  Mon Jun 23 05:54:41 2008
From: sharwell at pixelminegames.com (Sam Harwell)
Date: Mon, 23 Jun 2008 07:54:41 -0500
Subject: [antlr-interest] C# target build warnings in generated files:
	solution
Message-ID: <86403CA0939415448BCCB83855EFE09A4FB6E2@Bloodymary.ironwillgames.com>

I know I saw a message regarding this in the past. Here's a solution.
Add the following to your grammar file.

@lexer::header {
// The variable 'variable' is assigned but its value is never used.
#pragma warning disable 168, 219
// Unreachable code detected.
#pragma warning disable 162
}
@parser::header {
// The variable 'variable' is assigned but its value is never used
#pragma warning disable 168, 219
// Unreachable code detected
#pragma warning disable 162
}

Sam

From nelson.ana at gmail.com  Mon Jun 23 09:04:35 2008
From: nelson.ana at gmail.com (Ana Nelson)
Date: Mon, 23 Jun 2008 17:04:35 +0100
Subject: [antlr-interest] the # symbol in target language blocks
Message-ID: <a7d6d2740806230904t73b199aco1ab246cf5da5f9f4@mail.gmail.com>

Hi,

I have been trying to parse ANTLRv3.g using somethiing other than
ANTLR (I know, I know, but I have my reasons).

Things were going very smoothly until I started hitting the "#" symbol
within target language blocks for actions, for example "#notSet" in
this excerpt:

notSet
@init {
    int line = LT(1).getLine();
    int col = LT(1).getColumn();
    GrammarAST subrule=null;
}
    :    n='~'^
        (    notTerminal
        |   block
        )
        {#notSet.setLine(line); #notSet.setColumn(col);}
    ;


So after some digging I think this is referring to AST action
translation in ANTLR v2:

http://www.antlr2.org/doc/trees.html#_bb9

"In parsers and tree parsers with buildAST set to true, ANTLR will
translate portions of user actions in order to make it easier to build
ASTs within actions. In particular, the following constructs starting
with '#' will be translated: "

So, is this use of # within a target language block just a holdover
from version 2 because ANTLR still uses version 2 internally?

From canjren at yahoo.com  Mon Jun 23 15:01:58 2008
From: canjren at yahoo.com (Can Zhen)
Date: Mon, 23 Jun 2008 15:01:58 -0700 (PDT)
Subject: [antlr-interest] Should I use Antlr v2.7 or v3.0?
Message-ID: <912079.23089.qm@web39702.mail.mud.yahoo.com>

I recently started to learn Antlr, and hope to use it in one of my projects. I am not sure whether I should use v3.0 or the old version. I would like to reuse some of the existing grammars such as the SQL grammar. But it seems like most of those grammars were written to work with v2.7 instead of v3.0. Any suggestions? Thanks!

       
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080623/c90cd13d/attachment.html 

From belayda at gmail.com  Mon Jun 23 16:39:09 2008
From: belayda at gmail.com (Bernardo Elayda)
Date: Mon, 23 Jun 2008 16:39:09 -0700
Subject: [antlr-interest] Should I use Antlr v2.7 or v3.0?---Use antlr 3.x!
Message-ID: <3e5ed32f0806231639y6345da7aucc09a72d30dfbd2f@mail.gmail.com>

Hi,

Here are the reason's why I use Antlr 3.1b1:

(1) there's a very good book out there on Antlr 3.x
(2) The new tree re-write rules in Antlr 3.1b1 are very handy and will save
application space.
(3) Many bugs in Antlr 2.x are fixed in Antlr 3.x.

Sure, you could use Antlr 2.x and leverage the older grammars.  In my
experience, it's better to use the syntax and use a grammar you make
yourself.
With a grammar written by someone else, you can find your self struggling to
accept/understand some of their grammar rules.

hth,
Bernardo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080623/9eda3b8d/attachment.html 

From r_reitzi at cs.uni-kl.de  Tue Jun 24 02:26:30 2008
From: r_reitzi at cs.uni-kl.de (Raphael Reitzig)
Date: Tue, 24 Jun 2008 11:26:30 +0200
Subject: [antlr-interest] To match or not to match
In-Reply-To: <90ab8c830c1dca8e7a9a7d8871d9eb3f@mail.frhk.de>
References: <25f4411f87108021ee12fec848bf32ef@mail.frhk.de>
	<90ab8c830c1dca8e7a9a7d8871d9eb3f@mail.frhk.de>
Message-ID: <351b30368fa4ad7bace3ae90cbb03eea@mail.frhk.de>

Hello again!

I think I got a couple of steps farther. However, some behaviour of ANTLR
is hazarding me.

Please consider the (updated) grammer at
http://raphael.frhk.de/files/property.g . Note that for rule property, the
first symbols of all alternatives are pairwise different. The grammar works
nice without any additional stuff, i.e. reading the following inputs

(1) : (5*(x+2))=0
(2) : [x=5 | [y=3 U z=5]]

Now try uncommenting line 3, turning backtracking on. I would expect
nothing to change, for backtracking wasn't necessary at all.
However, neither input is recognized using backtracking. To be more
precise, ANTLR failes in evaluating the (implicit) syntactic predicates.
This is unsettling, because it proved seconds earlier that there is exactly
one alternativ of rule property matching each input!

Is this, now, a bug in ANTLR or am I, still, too unskilled? ?(

Sunny German greetings

Raphael

On Fri, 20 Jun 2008 17:19:33 +0200, Raphael Reitzig <r_reitzi at cs.uni-kl.de>
wrote:
> Apparantly, attachments won't work. Sorry for that.
> 
> You can find the grammar file here:
> http://raphael.frhk.de/files/property.g
> 
> For those afraid of viruses or such:
> 
> *****
> 
> grammar property;
> 
> start
> 	:	property EOF;
> 
> property //options { backtrack=true; memoize=true; }
> 	:	NOT '(' property ')'
> 	|	( ALL | GLOB | SOME | FIN | NEXT)+ '(' property ')'
> 	|	'(' property ( (AND | OR) property )+ ')'
> 	|	('(' atom ')')  => '(' atom ')'
> 	|	( atom ) => atom;
> 
> atom
> 	:	term (EQ | NEQ | LES | GRT | LEQ | GEQ) term;
> 
> term
> 	:	'(' term (PLUS | MINUS | MULT| DIV | MOD) term ')'
> 	|	(MIN | MAX) '(' term ',' term ')'
> 	|	(MINUS)? INT
> 	|	(MINUS)? VAR
> 	|	MINUS '(' term ')';
> 
> INT 	:	('0'..'9')+;
> VAR 	:	('a'..'z') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_')*;
> 
> ALL	:	'A';
> SOME 	:	'E';
> GLOB	:	'G';
> FIN 	:	'F';
> NEXT		:	'X';
> 
> UNTIL 	:	'U';
> IMPL 	:	'->';
> AND 	:	'&';
> OR 	:	'|';
> NOT 	:	'!';
> 
> PLUS 	:	'+';
> MINUS 	:	'-';
> MULT 	:	'*';
> DIV 	:	'/';
> MOD 	:	'%';
> 
> MIN 	:	'Min';
> MAX 	:	'Max';
> 
> EQ 	:	'=';
> NEQ 	:	'!=';
> LES 	:	'<';
> GRT 	:	'>';
> LEQ 	:	 '<=';
> GEQ 	:	 '>=';
> 
> WS 	:	(' ' | '\t' | '\n' | '\r')+ { skip(); };
> 
> *****
> 
> On Fri, 20 Jun 2008 14:52:52 +0200, Raphael Reitzig
> <r_reitzi at cs.uni-kl.de>
> wrote:
>> Hello!
>>
>> I am quite a novice to ANTLR as well as language parsing at all, so
>> perhaps
>> I dug in a bit to quickly (got The Book the day before yesterday).
> Anyway,
>> I try to build a grammar I need for a job at university and get some
>> strange results I do not understand. I hope file appendings work on the
>> list.
>>
>> Using ANTLRWorks' Interpreter, I try to match the following sentence
>> against rule 'atom':
>>
>> Min(4,3)=x
>>
>> It works perfectly. It should match rule 'property' as well (last
>> alternative: 'property : ( atom ) => atom;'), but trying that yields
>> FailedPredicateException. (I (think I) need the predicates to help LL(*)
>> along with multiple '('s in a row.) Exactly why does the predicate
> become
>> false _if_ the checked sequence _is_ an atom?
>>
>> Matching Min(4,3) alone against 'term' I expect to work, for it did,
>> matching the statement given above against 'atom'. However, it fails
>> without exception, aparently not recognizing ',' correctly.
>>
>> I would not be surprised I if made a (simple?) systematic error. Can you
>> help me?
>>
>> Greetings from Germany
>>
>> Raphael Reitzig


From sam.kuper at uclmail.net  Tue Jun 24 07:12:16 2008
From: sam.kuper at uclmail.net (Sam Kuper)
Date: Tue, 24 Jun 2008 15:12:16 +0100
Subject: [antlr-interest] Antlr syntax reference
Message-ID: <4126b3450806240712w47c86c98r4b8dfb0fa56d1f6b@mail.gmail.com>

Dear all,

I am looking for an exhaustive guide to Antlr 3.0.1 syntax (I am using
AntlrWorks 1.1.7); I'll explain why. My grammar so far looks like this:

grammar DCP;
options {
    language=Python;
}
dcp     : DOCUMENT* EOF;
DOCUMENT    : HEADERS;
HEADERS    : YEAR_HEADER MONTH_HEADER ;
YEAR_HEADER    : '*Y 18\n';
MONTH_HEADER    : '*M October\n';

Notice that in this grammar, I have used \n to denote new lines. But
although I have not declared what \n is, Antlr's lexical analyser recognises
that it denotes a newline; in other words, \n is a pre-defined token in
Antlr grammar. I'm guessing there are others, and I want to be conscious of
them as I work, but I have so far been unable to find a document that lists
all the pre-defined tokens in Antlr's grammar. Presumably one exists
somewhere. If you know where, please could you tell me?

Many thanks,

Sam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080624/9798a251/attachment.html 

From r_reitzi at cs.uni-kl.de  Tue Jun 24 09:03:53 2008
From: r_reitzi at cs.uni-kl.de (Raphael Reitzig)
Date: Tue, 24 Jun 2008 18:03:53 +0200
Subject: [antlr-interest] Antlr syntax reference
In-Reply-To: <4126b3450806240712w47c86c98r4b8dfb0fa56d1f6b@mail.gmail.com>
References: <4126b3450806240712w47c86c98r4b8dfb0fa56d1f6b@mail.gmail.com>
Message-ID: <14ad766d842fa1e292d93b3ac016fe89@mail.frhk.de>

Hi Sam!

I am not sure what you mean by "Antlr's lexical analyser recognises that it
denotes a newline". Do you mean "ANTLR recognizes '\n' where I have a line
break in my input"?

If so, this is nothing special. In any ASCII file, which is a linear list
of characters of 8 Bit each, a line break is encoded by a special symbol.
For Unix, this is '\n'. So, your text editor puts a '\n' in your text if
you type ENTER and shows it to you as a line break, hiding existence of
'\n' from you. Thus, ANTLR _really_ finds the character '\n' in your input
and does nothing but following your rules.

Note that for different OS' the linebreak character is different. I. e.,
for Unix it's '\n' (or LF, line feed), whereas Mac uses '\r' (CR, carriage
return). Windows uses both at once. Refer to
http://en.wikipedia.org/wiki/Linebreak for mor details. To get your grammar
working for inputs created on either system, you may want to encode a
linebreak in ANTLR with a token rule like
LINEBREAK : '\n' | '\r' |'\r\n';

In general, I strongly recommend Terence Parr's book about ANTLR. It may
not adress this special issue, but it explains most (all?) aspects of ANTLR
in a entertaining way.

I hope I did not misunderstand your question.

Raphael

On Tue, 24 Jun 2008 15:12:16 +0100, "Sam Kuper" <sam.kuper at uclmail.net>
wrote:
> Dear all,
> 
> I am looking for an exhaustive guide to Antlr 3.0.1 syntax (I am using
> AntlrWorks 1.1.7); I'll explain why. My grammar so far looks like this:
> 
> grammar DCP;
> options {
>     language=Python;
> }
> dcp     : DOCUMENT* EOF;
> DOCUMENT    : HEADERS;
> HEADERS    : YEAR_HEADER MONTH_HEADER ;
> YEAR_HEADER    : '*Y 18\n';
> MONTH_HEADER    : '*M October\n';
> 
> Notice that in this grammar, I have used \n to denote new lines. But
> although I have not declared what \n is, Antlr's lexical analyser
> recognises
> that it denotes a newline; in other words, \n is a pre-defined token in
> Antlr grammar. I'm guessing there are others, and I want to be conscious
> of
> them as I work, but I have so far been unable to find a document that
> lists
> all the pre-defined tokens in Antlr's grammar. Presumably one exists
> somewhere. If you know where, please could you tell me?
> 
> Many thanks,
> 
> Sam


From vbar at comp.cz  Tue Jun 24 10:29:52 2008
From: vbar at comp.cz (Vaclav Barta)
Date: Tue, 24 Jun 2008 19:29:52 +0200
Subject: [antlr-interest] Should I use Antlr v2.7 or v3.0?
In-Reply-To: <912079.23089.qm@web39702.mail.mud.yahoo.com>
References: <912079.23089.qm@web39702.mail.mud.yahoo.com>
Message-ID: <200806241929.54712.vbar@comp.cz>

On Tuesday 24 June 2008 00:01:58 Can Zhen wrote:
> I recently started to learn Antlr, and hope to use it in one of my
> projects. I am not sure whether I should use v3.0 or the old version. I
> would like to reuse some of the existing grammars such as the SQL grammar.
> But it seems like most of those grammars were written to work with v2.7
> instead of v3.0. Any suggestions? Thanks!
I've ported the SQL grammar for 2.7 to 3.0 (although I have to admit it 
doesn't work for 3.1b1) - it's available (with project-specific actions, but 
you can easily remove those) at 
http://macroscope.svn.sourceforge.net/viewvc/macroscope/MacroScope/MacroScope.g?view=markup
.

	Bye
		Vasek
--
http://www.mangrove.cz/
Open Source integration



From sam.kuper at uclmail.net  Tue Jun 24 11:39:52 2008
From: sam.kuper at uclmail.net (Sam Kuper)
Date: Tue, 24 Jun 2008 19:39:52 +0100
Subject: [antlr-interest] Antlr syntax reference
In-Reply-To: <543531490806241041y29b7c08bwa1b49300bd4ef0e5@mail.gmail.com>
References: <4126b3450806240712w47c86c98r4b8dfb0fa56d1f6b@mail.gmail.com>
	<543531490806241041y29b7c08bwa1b49300bd4ef0e5@mail.gmail.com>
Message-ID: <4126b3450806241139ia1e67aaj8e3eb690725278ff@mail.gmail.com>

Dear Benjamin,

2008/6/24 Benjamin Niemann <pink at odahoda.de>:

> EOF is the only predefined token here. There are a few others, but
> they only appear when working with tree parsers.
> They all have in common that they do not match any of the input characters.


Thank you; however, \n is not defined in my grammar, so presumably it is
defined in Antlr somewhere.


> Since you are using Python, an easy way to see which tokens your lexer
> match is to use
>
> python DCPLexer.py <input.txt
>
> or
>
> python DCPLexer.py
> [enter input, then hit CTLR-D]
>
>  (under UNIX, Windows might be slightly differently) and it will just
> dump a list of matched tokens.


I'm running this under Windows. I'm afraid I didn't get any output from
either of those commands.


> The only special thing about \n is that it is always used to track the
> line/column information which is attached to the tokens. But there's
> no magic or special handing when it comes to matching tokens.


It would be good to know more about this. I haven't found anything very
helpful on the Antlr site or wiki yet.

And regarding the exhaustive guide: As far as I can tell the wiki
> should contain everything in a 'reference guide' style, i.e. all
> information regarding syntax, symbols etc. is in there. But for a
> deeper guide to the semantics, you should probably have a look at the
> book.


Thanks for the suggestions; I've already consulted both. I will continue
looking, but since searches (I have the book in PDF) haven't turned up
anything much, I think I've probably covered the existing bases. This kind
of surprises me, because it means everyone using Antlr either just "gets"
the syntax (I don't; though I "get" some of it), or they are essentially
reverse-engineering undocumented parts of the syntax and learning as they go
(which is a lot more effort than just consulting a spec sheet; I would have
thought Terence Parr was against this sort of effort).

I'd be grateful for further suggestions if you have any. Many thanks,

Sam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080624/bd4bba25/attachment.html 

From sam.kuper at uclmail.net  Tue Jun 24 11:41:13 2008
From: sam.kuper at uclmail.net (Sam Kuper)
Date: Tue, 24 Jun 2008 19:41:13 +0100
Subject: [antlr-interest] Antlr syntax reference
In-Reply-To: <4126b3450806241118q5cbd5ec8q3b5620a24cc88be8@mail.gmail.com>
References: <4126b3450806240712w47c86c98r4b8dfb0fa56d1f6b@mail.gmail.com>
	<14ad766d842fa1e292d93b3ac016fe89@mail.frhk.de>
	<4126b3450806241118q5cbd5ec8q3b5620a24cc88be8@mail.gmail.com>
Message-ID: <4126b3450806241141u78d48a91j676844222c41bb53@mail.gmail.com>

Hi Raphael,

Thanks for the quick reply. I think you have misunderstood my issue, so I
will clarify. Why does '\n' in the grammar match a newline in the input,
rather than matching '\n' in input? It can only be because the string '\n'
has a special meaning in Antlr. (For comparison, if I search for '\n' in a
text editor, it will match '\n' but not a newline.)

Where can I find a list of all such strings? The closest to a specification
document for Antlr syntax is at
http://www.antlr.org/wiki/display/ANTLR3/Grammars but it doesn't mention the
\n rule.

What I want is something like the HTML 4.01 specification (
http://www.w3.org/TR/html401/) but for Antlr; i.e. an exhaustive document
that mentions everything in the syntax, in a human-readable format. Is there
a document like this anywhere to be found? I bought Terence Parr's Antlr
book from Pragmatic but it doesn't seem to have this either.

(NB. I hope that Antlr is platform independent enough that this won't
matter, but just for info: I am prototyping on Windows, but intend to deploy
to a Linux system.)

Many thanks,

Sam

2008/6/24 Raphael Reitzig <r_reitzi at cs.uni-kl.de>:

> Hi Sam!
>
> I am not sure what you mean by "Antlr's lexical analyser recognises that it
> denotes a newline". Do you mean "ANTLR recognizes '\n' where I have a line
> break in my input"?
>
> If so, this is nothing special. In any ASCII file, which is a linear list
> of characters of 8 Bit each, a line break is encoded by a special symbol.
> For Unix, this is '\n'. So, your text editor puts a '\n' in your text if
> you type ENTER and shows it to you as a line break, hiding existence of
> '\n' from you. Thus, ANTLR _really_ finds the character '\n' in your input
> and does nothing but following your rules.
>
> Note that for different OS' the linebreak character is different. I. e.,
> for Unix it's '\n' (or LF, line feed), whereas Mac uses '\r' (CR, carriage
> return). Windows uses both at once. Refer to
> http://en.wikipedia.org/wiki/Linebreak for mor details. To get your
> grammar
> working for inputs created on either system, you may want to encode a
> linebreak in ANTLR with a token rule like
> LINEBREAK : '\n' | '\r' |'\r\n';
>
> In general, I strongly recommend Terence Parr's book about ANTLR. It may
> not adress this special issue, but it explains most (all?) aspects of ANTLR
> in a entertaining way.
>
> I hope I did not misunderstand your question.
>
> Raphael
>
> On Tue, 24 Jun 2008 15:12:16 +0100, "Sam Kuper" <sam.kuper at uclmail.net>
> wrote:
> > Dear all,
> >
> > I am looking for an exhaustive guide to Antlr 3.0.1 syntax (I am using
> > AntlrWorks 1.1.7); I'll explain why. My grammar so far looks like this:
> >
> > grammar DCP;
> > options {
> >     language=Python;
> > }
> > dcp     : DOCUMENT* EOF;
> > DOCUMENT    : HEADERS;
> > HEADERS    : YEAR_HEADER MONTH_HEADER ;
> > YEAR_HEADER    : '*Y 18\n';
> > MONTH_HEADER    : '*M October\n';
> >
> > Notice that in this grammar, I have used \n to denote new lines. But
> > although I have not declared what \n is, Antlr's lexical analyser
> > recognises
> > that it denotes a newline; in other words, \n is a pre-defined token in
> > Antlr grammar. I'm guessing there are others, and I want to be conscious
> > of
> > them as I work, but I have so far been unable to find a document that
> > lists
> > all the pre-defined tokens in Antlr's grammar. Presumably one exists
> > somewhere. If you know where, please could you tell me?
> >
> > Many thanks,
> >
> > Sam
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080624/e1dbd148/attachment-0001.html 

From sdvormwa at mtu.edu  Tue Jun 24 11:46:07 2008
From: sdvormwa at mtu.edu (Steven D. Vormwald)
Date: Tue, 24 Jun 2008 14:46:07 -0400
Subject: [antlr-interest] Antlr syntax reference
In-Reply-To: <4126b3450806240712w47c86c98r4b8dfb0fa56d1f6b@mail.gmail.com>
References: <4126b3450806240712w47c86c98r4b8dfb0fa56d1f6b@mail.gmail.com>
Message-ID: <486140EF.7060702@mtu.edu>

Sam Kuper wrote:
> Dear all,
>
> I am looking for an exhaustive guide to Antlr 3.0.1 syntax (I am using 
> AntlrWorks 1.1.7); I'll explain why. My grammar so far looks like this:
>
> grammar DCP;
> options {
>     language=Python;
> }
> dcp     : DOCUMENT* EOF;
> DOCUMENT    : HEADERS;
> HEADERS    : YEAR_HEADER MONTH_HEADER ;
> YEAR_HEADER    : '*Y 18\n';
> MONTH_HEADER    : '*M October\n';
>
> Notice that in this grammar, I have used \n to denote new lines. But 
> although I have not declared what \n is, Antlr's lexical analyser 
> recognises that it denotes a newline; in other words, \n is a 
> pre-defined token in Antlr grammar. I'm guessing there are others, and 
> I want to be conscious of them as I work, but I have so far been 
> unable to find a document that lists all the pre-defined tokens in 
> Antlr's grammar. Presumably one exists somewhere. If you know where, 
> please could you tell me?
>
> Many thanks,
>
> Sam
I could be wrong about this, but I believe ANTLR recognizes the same 
character escapes in strings that java does:

'\n' is newline
'\r' is carriage return
'\t' is tab
'\uXXXX' is the unicode character at codepoint XXXX (in hex)
'\\' is backslash

and so on.  From http://www.antlr.org/wiki/display/ANTLR3/Grammars 
(Lexer Rules section), you can see examples of the '\t' and '\uXXXX' 
being used.  I don't think this is a rule, as much as a convention for 
inserting "special" characters in strings.

Steven Vormwald


From sam.kuper at uclmail.net  Tue Jun 24 11:59:42 2008
From: sam.kuper at uclmail.net (Sam Kuper)
Date: Tue, 24 Jun 2008 19:59:42 +0100
Subject: [antlr-interest] Antlr syntax reference
In-Reply-To: <486140EF.7060702@mtu.edu>
References: <4126b3450806240712w47c86c98r4b8dfb0fa56d1f6b@mail.gmail.com>
	<486140EF.7060702@mtu.edu>
Message-ID: <4126b3450806241159uc66cf97m29ba998db131d22c@mail.gmail.com>

Dear Steven,

2008/6/24 Steven D. Vormwald <sdvormwa at mtu.edu>:

> I could be wrong about this, but I believe ANTLR recognizes the same
> character escapes in strings that java does:
>
> '\n' is newline
> '\r' is carriage return
> '\t' is tab
> '\uXXXX' is the unicode character at codepoint XXXX (in hex)
> '\\' is backslash
>
> and so on.  From http://www.antlr.org/wiki/display/ANTLR3/Grammars (Lexer
> Rules section), you can see examples of the '\t' and '\uXXXX' being used.  I
> don't think this is a rule, as much as a convention for inserting "special"
> characters in strings.
>

Right you are. Thought I'd already searched for '\n' on
http://www.antlr.org/wiki/display/ANTLR3/Grammars - I must have searched for
'/n' - oops (I've obviously been having a long day... :-/ ).

Thanks for picking this up for me! It's answered my request :)

Sam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080624/97af2eed/attachment.html 

From pseban12 at gmail.com  Wed Jun 25 08:28:33 2008
From: pseban12 at gmail.com (Peter Seban)
Date: Wed, 25 Jun 2008 17:28:33 +0200
Subject: [antlr-interest] Help for a newbie please!
Message-ID: <f8e54d5f0806250828y43d5a63anc12eab13921dd447@mail.gmail.com>

Dear All,

I'm a newbie in antlr.
I have tried this example grammar by input text:

apples= 100 * peaches;             // this is a simple expression
*apples= 100 * peaches;           //  this is a comment line

, but it doesn't work.

The grammar:
--------------------


grammar expr_test;
options{
   output=AST;
   ASTLabelType=CommonTree;
}
query  :
          ex1=expr1  { System.out.println("[EXPRESSION_1] \n"+$ex1.text); }
        | ex2=expr2  { System.out.println("[EXPRESSION_2] \n"+$ex2.text); }
       ;
expr1
       :
       terms '=' terms multiplication terms ';'
       ;

expr2
       :
       asterisk ~('\r'|'\n')* ';'
       ;
terms  :
       WCHAR*
       ;
asterisk
       :
       {input.LT(-1).getText().toLowerCase().equals("\n")}?
       {input.LT(0).getText().toLowerCase().equals(";")}?
       {input.LT(1).getText().toLowerCase().equals("*")}? '*'
       ;

multiplication
       :
       {input.LT(1).getText().toLowerCase().equals("*")}? '*'
       ;

WS     : (' '|'\t'|'\r'|'\n')+ {skip();};
WCHAR  : ~('*'|'='|'('| ')'|'"'|' '|'\t'|'\n'|'\r'|'#'| ';')*;

/*
Test it :
---------
apples= 100 * peaches;
*apples= 100 * peaches;
*/

The generated output is:
-----------------------------------

[EXPRESSION_1]
apples=100*peaches;

Why do'nt generated:
------------------------------
[EXPRESSION_2]
*apples=100*peaches;

too?

Thank you all for your kind tips!
Peter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080625/38deda6b/attachment.html 

From thkarcher at gmx.de  Wed Jun 25 09:26:16 2008
From: thkarcher at gmx.de (Thomas Karcher)
Date: Wed, 25 Jun 2008 18:26:16 +0200
Subject: [antlr-interest] GUnit for CSharp
Message-ID: <1214411177.4033.49.camel@localhost>

Hi,

is there something like gunit (i. e. grammar unit tests) for the CSharp
target?

If not, I guess "normal" C# unit tests like NUnit will do it ...


Thanks,
Thomas


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Dies ist ein digital signierter Nachrichtenteil
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080625/b6481609/attachment.bin 

From r_reitzi at cs.uni-kl.de  Wed Jun 25 09:27:51 2008
From: r_reitzi at cs.uni-kl.de (Raphael Reitzig)
Date: Wed, 25 Jun 2008 18:27:51 +0200
Subject: [antlr-interest] Help for a newbie please!
Message-ID: <ef853a55f65763f642fa7b4d71e67b6d@mail.frhk.de>

Hi Peter!

You do not have any recursion in your grammar. The first expression
matches, but then, there is no rule available for the second line.

Try adding something like that as starting rule:

querylist : query (('\r'|'\n'|'\r\n')* query)* EOF;

Good luck

Raphael

On Wed, 25 Jun 2008 17:28:33 +0200, "Peter Seban" <pseban12 at gmail.com>
wrote:
> Dear All,
>
> I'm a newbie in antlr.
> I have tried this example grammar by input text:
>
> apples= 100 * peaches;             // this is a simple expression
> *apples= 100 * peaches;           //  this is a comment line
>
> , but it doesn't work.
>
> The grammar:
> --------------------
>
>
> grammar expr_test;
> options{
>    output=AST;
>    ASTLabelType=CommonTree;
> }
> query  :
>           ex1=expr1  { System.out.println("[EXPRESSION_1] \n"+$ex1.text);
> }
>         | ex2=expr2  { System.out.println("[EXPRESSION_2] \n"+$ex2.text);
> }
>        ;
> expr1
>        :
>        terms '=' terms multiplication terms ';'
>        ;
>
> expr2
>        :
>        asterisk ~('\r'|'\n')* ';'
>        ;
> terms  :
>        WCHAR*
>        ;
> asterisk
>        :
>        {input.LT(-1).getText().toLowerCase().equals("\n")}?
>        {input.LT(0).getText().toLowerCase().equals(";")}?
>        {input.LT(1).getText().toLowerCase().equals("*")}? '*'
>        ;
>
> multiplication
>        :
>        {input.LT(1).getText().toLowerCase().equals("*")}? '*'
>        ;
>
> WS     : (' '|'\t'|'\r'|'\n')+ {skip();};
> WCHAR  : ~('*'|'='|'('| ')'|'"'|' '|'\t'|'\n'|'\r'|'#'| ';')*;
>
> /*
> Test it :
> ---------
> apples= 100 * peaches;
> *apples= 100 * peaches;
> */
>
> The generated output is:
> -----------------------------------
>
> [EXPRESSION_1]
> apples=100*peaches;
>
> Why do'nt generated:
> ------------------------------
> [EXPRESSION_2]
> *apples=100*peaches;
>
> too?
>
> Thank you all for your kind tips!
> Peter


From jeroen at pbemengine.nl  Wed Jun 25 10:02:19 2008
From: jeroen at pbemengine.nl (Jeroen Steenbeeke)
Date: Wed, 25 Jun 2008 19:02:19 +0200
Subject: [antlr-interest] ANTLR3 Maven2 plugin, strange errors
Message-ID: <48627A1B.9000108@pbemengine.nl>

Hey everyone,

I am currently in the process of generating the source for a Tree
Grammar for Java (basically Dieter Habelitz' grammar with my own
processing stuff added in code blocks).

When using the command line or when running the generation through Ant
(with <java> tasks) everything works out fine, but for some reason I
can't get it to work with the ANTLR3 plugin for Maven2.

I've added the pom.xml file and Maven's output as attachments. For some
reason the ANTLR plugin manages to get into an infinite recursion that
causes OutOfMemoryErrors. I've tried increasing the available heapspace
with the -Xmx JVM option but to no avail - the generator simply freezes
even with over 1GB of heap space.

What could be causing these problems? Is Maven perhaps using an
incorrect version of ANTLR?

Or would it be better to simply report this as a bug to the Maven2
plugin developers?

Cheers,

Jeroen Steenbeeke
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: error.txt
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20080625/23a3fc34/attachment.txt 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pom.xml
Type: text/xml
Size: 1139 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080625/23a3fc34/attachment.xml 

From sunshine at public.kherson.ua  Wed Jun 25 11:45:40 2008
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Wed, 25 Jun 2008 21:45:40 +0300
Subject: [antlr-interest] Advice on ANTLR 2.7.3 enabling position of token
Message-ID: <C4886D04.9E2F8%sunshine@public.kherson.ua>

Hi All,

Let me remind that we develop SQL parser for our Valentina database engine.
We still using ANTLR 2.x (waiting for release of ANTLR 3.1 to switch).

I know that in ANTLR 3.x added handy feature that each token know its
    styrt/end position in the original text.

Is it possible implement this feature for ANTLR 2.x ?

We have long time wait for 3.x switch but not catch urgent case to solve it
using 2.x.


Problem is that when we parse string that contains FEW SQL commands, we
sometimes must be able get command itself to store it. We need this for
Stored Procedures and Triggers for example.

So when I have single string as

"
CREATE PROCEDURE proc1
BEGIN
   // some text of procedure 1
END


CREATE PROCEDURE proc1
BEGIN
   // some text of procedure 2
END
"


I must be able get from parser only

CREATE PROCEDURE proc1
BEGIN
   // some text of procedure 1
END


Any clues how I can improve ANTLR 2.x for this?
    * may be add own subclass of Token ?
        and self store there position when Lexer create token?
    

-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]




From siva.kumar at loglogic.com  Wed Jun 25 14:49:44 2008
From: siva.kumar at loglogic.com (siva.kumar at loglogic.com)
Date: Wed, 25 Jun 2008 14:49:44 -0700
Subject: [antlr-interest] Trying to convert a file-oriented lexer to a
	line-oriented one
Message-ID: <117A6478DABB1D4E9509EA7F413AE78907567DF3@CTMAIL2.calltower.com>

Hi everyone,

                   I've looked for examples of using a lexer in a
line-oriented fashion but can't seem to find one.

 

Most grammar examples, use this:

 

grammar  test;

 

public static void main(String[] args) throws Exception {

        testLexer lex = new testLexer(new ANTLRFileStream(args[0]));

        CommonTokenStream tokens = new CommonTokenStream(lex);

 

        testParser parser = new testParser(tokens);

 

        try {

            parser.line();

        } catch (RecognitionException e)  {

            e.printStackTrace();

        }

    }

 

I looked at the Java API classes at:
http://www.antlr.org/api/Java/annotated.html

 

But I'm having some trouble figuring out how to call the lexer on each
line that I've read from the file.

 

What I am essentially trying to do is:

 

            Open a file 

            While lines exist

                        Get a line

                        Call the Parser

 

 

Any help is appreciated.

Thanks,

-Siva

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080625/1bf4fb47/attachment.html 

From espina.edgar at gmail.com  Wed Jun 25 17:20:53 2008
From: espina.edgar at gmail.com (Edgar Espina)
Date: Wed, 25 Jun 2008 21:20:53 -0300
Subject: [antlr-interest] ANTLR IDE 1.0.0beta6 available
Message-ID: <92b42db60806251720q71676140yf2d86744c795f9d7@mail.gmail.com>

Hi All,

  ANTLR IDE 1.0.0beta6 is available for download at
http://antlrv3ide.sourceforge.net/.

New features includes:
  - ANTLR Interpreter (likes ANTLRWorks)
  - ANTLR Documentation View
  - ANTLR Console and bugs fixed.

Best Regards,

Edgar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080625/cd30df0e/attachment.html 

From g.vandeglind at beinformed.nl  Wed Jun 25 23:23:41 2008
From: g.vandeglind at beinformed.nl (Gerard van de Glind)
Date: Thu, 26 Jun 2008 08:23:41 +0200
Subject: [antlr-interest] strict parsing
Message-ID: <35AC19B502E98D42879AFA71FAD9CDCC2D1F5F@UTEX01.be-value.nl>

Hi there,

 

I have a grammar that recognizes simple arithmetic expressions.

So something like 'x + 2' is a valid expression.

However the expression '[x + 2' is also accepted, in my log file I see
the following message:

 

line 1:0 no viable alternative at character '['

 

'[' is not valid token in my grammar, so it's ignored.

I want to make my grammar stricter that it doesn't accept these kind of
expressions anymore.

Does anyone have a clue how I can do this?

 

Thanks for your help!

 

Cheers,

Gerard

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/9e21ea3f/attachment.html 

From tbrandonau at gmail.com  Wed Jun 25 23:58:39 2008
From: tbrandonau at gmail.com (Thomas Brandon)
Date: Thu, 26 Jun 2008 16:58:39 +1000
Subject: [antlr-interest] strict parsing
In-Reply-To: <35AC19B502E98D42879AFA71FAD9CDCC2D1F5F@UTEX01.be-value.nl>
References: <35AC19B502E98D42879AFA71FAD9CDCC2D1F5F@UTEX01.be-value.nl>
Message-ID: <ebc876d70806252358m36257fb0i2dde3077e69df9d@mail.gmail.com>

You want to override the error reporting routines from the BaseRecognizer
class. I believe the wiki has an example showing which methods you need to
override. You could have them throw a exception (you can't add a throws
clause so it needs to be a runtime exception) to drop out of parsing
immediately. Or you may be better to record errors and then abort further
analysis if there are errors. That way you can report multiple errors in one
go rather than having to go through the errors one at a time. The drawback
to this is that you may have multiple error messages resulting from a single
underlying error. Or you could combine the two and throw an exception for
some types of error and simply record others.

Tom.

On Thu, Jun 26, 2008 at 4:23 PM, Gerard van de Glind <
g.vandeglind at beinformed.nl> wrote:

>  Hi there,
>
>
>
> I have a grammar that recognizes simple arithmetic expressions.
>
> So something like 'x + 2' is a valid expression.
>
> However the expression '[x + 2' is also accepted, in my log file I see the
> following message:
>
>
>
> line 1:0 no viable alternative at character '['
>
>
>
> '[' is not valid token in my grammar, so it's ignored.
>
> I want to make my grammar stricter that it doesn't accept these kind of
> expressions anymore.
>
> Does anyone have a clue how I can do this?
>
>
>
> Thanks for your help!
>
>
>
> Cheers,
>
> Gerard
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/89bfe0a2/attachment.html 

From antlr at mirality.co.nz  Thu Jun 26 00:50:48 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 26 Jun 2008 19:50:48 +1200
Subject: [antlr-interest] strict parsing
In-Reply-To: <35AC19B502E98D42879AFA71FAD9CDCC2D1F5F@UTEX01.be-value.nl>
References: <35AC19B502E98D42879AFA71FAD9CDCC2D1F5F@UTEX01.be-value.nl>
Message-ID: <20080626075101.0A81911ECD4@www.antlr.org>

At 18:23 26/06/2008, Gerard van de Glind wrote:
>I have a grammar that recognizes simple arithmetic expressions.
>So something like 'x + 2' is a valid expression.
>However the expression '[x + 2' is also accepted, in my log file 
>I see the following message:
>
>line 1:0 no viable alternative at character '['
>
>'[' is not valid token in my grammar, so it's ignored.
>I want to make my grammar stricter that it doesn't accept these 
>kind of expressions anymore.

If a '[' is an illegal character in your language, then you could 
start with this:

ILLEGAL: .;

(Make sure that this is the last lexer rule in the grammar file!)

This will recognise any character not otherwise mentioned as a 
token called ILLEGAL, and (since the parser will never expect this 
token) will generate an error in the parser when 
encountered.  This will let you centralise your error-handling 
code.


From antlr at mirality.co.nz  Thu Jun 26 01:02:39 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 26 Jun 2008 20:02:39 +1200
Subject: [antlr-interest] Trying to convert a file-oriented lexer to a
 line-oriented one
In-Reply-To: <117A6478DABB1D4E9509EA7F413AE78907567DF3@CTMAIL2.calltower .com>
References: <117A6478DABB1D4E9509EA7F413AE78907567DF3@CTMAIL2.calltower.com>
Message-ID: <20080626080249.D88E811EC81@www.antlr.org>

At 09:49 26/06/2008, siva.kumar at loglogic.com wrote:
>I've looked for examples of using a lexer in a line-oriented 
>fashion but can't seem to find one.
[...]
>But I'm having some trouble figuring out how to call the lexer on 
>each line that I've read from the file.

ANTLR isn't really designed to operate in that manner; it wants to 
suck up all the input and tokenise it before parsing begins.

There was some discussion on the list a while back (and this wiki 
page: 
http://www.antlr.org/wiki/pages/viewpage.action?pageId=7929859) 
about making it lazy-load input for cases where the input stream 
is long-running (eg. interactive input), but I'm not sure how far 
it got.

>What I am essentially trying to do is:
>
>             Open a file
>             While lines exist
>                         Get a line
>                         Call the Parser

Why do you need to do this (especially if it's already in a file, 
and not using a slow/incomplete connection)?  Why can't you parse 
the entire file in one go?  Even if each line represents a 
separate expression or command or something, you can just make the 
top-level rule accept an arbitrary number of these separated by 
newlines.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/2f88bcf8/attachment-0001.html 

From antlr at mirality.co.nz  Thu Jun 26 01:14:37 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 26 Jun 2008 20:14:37 +1200
Subject: [antlr-interest] Help for a newbie please!
In-Reply-To: <f8e54d5f0806250828y43d5a63anc12eab13921dd447@mail.gmail.co
 m>
References: <f8e54d5f0806250828y43d5a63anc12eab13921dd447@mail.gmail.com>
Message-ID: <20080626081447.4FE5811ED4A@www.antlr.org>

At 03:28 26/06/2008, Peter Seban wrote:
>I'm a newbie in antlr.
>I have tried this example grammar by input text:
>
>apples= 100 * peaches;             // this is a simple expression
>*apples= 100 * peaches;           //  this is a comment line
[...]
>expr2
>        :
>        asterisk ~('\r'|'\n')* ';'
>        ;

This is not going to do what you think it will do.  Firstly, this 
will introduce new lexer rules for '\r' and '\n', and then accept 
any sequence of tokens that aren't one of those two.  You probably 
should be using a lexer rule instead.  (Lexer rules have an 
initial capital letter.)

>asterisk
>        :
>        {input.LT(-1).getText().toLowerCase().equals("\n")}?
>        {input.LT(0).getText().toLowerCase().equals(";")}?
>        {input.LT(1).getText().toLowerCase().equals("*")}? '*'
>        ;

Why are you calling toLowerCase() when you're comparing against 
characters that aren't case-sensitive?

Also, your chain of predicates doesn't match your example 
input.  You appear to have the \n and ; reversed.  (Also, you 
should consider cases such as when the comment is the first 
expression.)

>multiplication
>        :
>        {input.LT(1).getText().toLowerCase().equals("*")}? '*'
>        ;

Why are you using this predicate?

>WS     : (' '|'\t'|'\r'|'\n')+ {skip();};

This is ambiguous with the '\r' and '\n' implicit rules created by 
using string constants in the expr2 rule.  Yet more reason why 
expr2 ought to be a lexer rule instead.  (Having said that, you're 
still going to get ambiguity problems between this and the 
multiplication expressions, so you'll need to put in some code to 
detect and generate either a comment token or a multiplication 
token as appropriate.  Do you really really need to use * as a 
comment indicator?)

>WCHAR  : ~('*'|'='|'('| ')'|'"'|' '|'\t'|'\n'|'\r'|'#'| ';')*;

It is illegal to define a lexer rule that can match zero 
characters (because this can generate infinite loops).  Change the 
* to a +.


From hengchon at gmail.com  Thu Jun 26 01:17:28 2008
From: hengchon at gmail.com (Heng Chon TAN)
Date: Thu, 26 Jun 2008 09:17:28 +0100
Subject: [antlr-interest] error on parsing some Java source code -
	mismatched character '<EOF>' expecting '\n'
Message-ID: <204F1092-717F-496B-8F0E-3A5D34504929@gmail.com>

Hello everyone,

I'm a novice to parser tool and especially Antlr. I have been spending  
the last week trying to figure out how Antlr works and how I can  
modify the grammar to work on my project. I have some difficulty now  
and I have nowhere to turn to... Therefore I hope someone on this list  
can point me in the direction.

I started with, Java 1.5 grammar for ANTLR v3 - http://www.antlr.org/grammar/1152141644268/Java.g 
, build a main test class and compiles perfectly. I did modified the  
grammar a bit internally.

This is the main class content:
> ANTLRInputStream input = new ANTLRInputStream(inputStream);
> JavaLexer lexer = new JavaLexer(input);
> CommonTokenStream tokens = new CommonTokenStream(lexer);
> JavaParser parser = new JavaParser(tokens);
> parser.compilationUnit()


This is the grammar that I have modified (Please find in the  
attachment, I removed most part of the comments to reduce the size of  
this mail):


It was able to compile and it runs well on most files. However, for  
some of the Java files, I get some funny error, as below:

> line 1:1214 mismatched character '<EOF>' expecting '\n'
> constructor:DebugBag
> line 1:771 mismatched input 'else' expecting '}'
> voidmethod:setUp
> line 0:-1 mismatched input '<EOF>' expecting '}'
> class:DebugBag


Could somebody please guide me on which part of the grammar could have  
causes the exception above?
Another thing to point out is that the grammar is able to recognise  
most of the declarations except the getNext() method. I have tried all  
possible possibilities trying to capture the output from the grammar  
but I just can't find the right grammar section which dealt with this.  
Hopefully someone could point out at which section in the grammar  
handles the getNext() method with a throw keyword.

The code for the DebugBag is as follow:

> package bingo.game;
>
> import java.util.*;
>
> import bingo.shared.*;
>
> class DebugBag implements BagOfBalls {
>
>     static final int ROW = 1;
>     static final int COLUMN = 2;
>     static final int DIAGONAL = 3;
>     static final int REVERSEDIAGONAL = 4;
>
>     static final int rowOrColNumber = 1;
>
>     private Stack balls = new Stack();
>
>     DebugBag() {
>     }
>
>     void setUp(Card c, int callThis) {
> 	if (callThis == ROW) {
> 	    for (int i = 0; i < Card.SIZE; i ++)
> 	        balls.push(c.boardValues[i][rowOrColNumber]);
> 	} else if (callThis == COLUMN) {
> 	    for (int i = 0; i < Card.SIZE; i ++)
> 	        balls.push(c.boardValues[rowOrColNumber][i]);
> 	} else if (callThis == DIAGONAL) {
> 	    for (int i = 0; i < Card.SIZE; i ++)
> 	        balls.push(c.boardValues[i][i]);
> 	} else if (callThis == REVERSEDIAGONAL) {
> 	    balls.push(c.boardValues[0][4]);
> 	    balls.push(c.boardValues[1][3]);
> 	    // don't need to push the free space which is in (2,2)
> 	    balls.push(c.boardValues[3][1]);
> 	    balls.push(c.boardValues[4][0]);
> 	}
>     }
>
>     public BingoBall getNext() throws NoMoreBallsException {
> 	if (balls.size() > 0) {
> 	    return (BingoBall)balls.pop();
> 	} else {
> 	    throw new NoMoreBallsException();
> 	}
>     }
> }
>


Appreciate if someone could give a hand here. Thank you very much!




regards,

Heng Chon TAN

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/d1878be2/attachment-0002.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Java.g
Type: application/octet-stream
Size: 20093 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/d1878be2/attachment-0001.obj 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/d1878be2/attachment-0003.html 

From helene.chagnot at gmail.com  Thu Jun 26 02:19:02 2008
From: helene.chagnot at gmail.com (=?ISO-8859-1?Q?H=E9l=E8ne_Chagnot?=)
Date: Thu, 26 Jun 2008 11:19:02 +0200
Subject: [antlr-interest] Catch errors and stop token stream creation
In-Reply-To: <216df3580806260213w7c2ca333udb353b9918a738f0@mail.gmail.com>
References: <216df3580806260213w7c2ca333udb353b9918a738f0@mail.gmail.com>
Message-ID: <216df3580806260219l3718ececoaeab36e9e1aa9207@mail.gmail.com>

Hi,

Working with ANTLR 3.1b1, we would like to capture unrecognised tokens
passed to the lexer to immediately stop parsing when incorrect text is
entered.
We tried to implement recoverFromMismatchedSet() method but it is never
called. Here is an example grammar:

grammar Example;

options {
    output = AST;
}

@header {
    package main.antlr;
}
@lexer::header {
    package main.antlr;
}

@lexer::rulecatch {

    catch (RecognitionException re) {
        System.out.println("RecognitionException");
        reportError(re);
    }

}
@lexer::members {

    protected void mismatch(IntStream input, int ttype, BitSet follow)
throws RecognitionException {
        System.out.println("mismatch");
        throw new MismatchedTokenException(ttype, input);
    }

    public Object recoverFromMismatchedSet(IntStream input,
RecognitionException e, BitSet follow) throws RecognitionException {
        System.out.println("recoverFromMismatchedSet");
        throw e;
    }
}

b : a*;
a : LETTER | NUMBER;

LETTER : 'A'..'Z';
NUMBER : '0'..'9';


When running this grammar with "ABCDEFghiJKL123", here is the output that we
get:

line 1:6 no viable alternative at character 'g'
line 1:7 no viable alternative at character 'h'
line 1:8 no viable alternative at character 'i'

When printing the token stream sent to the parser, we get the following:

ABCDEFJKL123

How can we stop parsing when text is not recognised ?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/0dfa9a67/attachment.html 

From pseban12 at gmail.com  Thu Jun 26 02:19:05 2008
From: pseban12 at gmail.com (Peter Seban)
Date: Thu, 26 Jun 2008 11:19:05 +0200
Subject: [antlr-interest] Help for a newbie please!
Message-ID: <f8e54d5f0806260219s63be9b60vcdda812ff46be11e@mail.gmail.com>

Dear All,

Thanks for expert answers, I'm corrected my grammar, It' s OK.

Best regards!

Peter

2008/6/25 <antlr-interest-request at antlr.org>:

> Send antlr-interest mailing list submissions to
>        antlr-interest at antlr.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>        http://www.antlr.org/mailman/listinfo/antlr-interest
> or, via email, send a message with subject or body 'help' to
>        antlr-interest-request at antlr.org
>
> You can reach the person managing the list at
>        antlr-interest-owner at antlr.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of antlr-interest digest..."
>
>
> Today's Topics:
>
>   1. Help for a newbie please! (Peter Seban)
>   2. GUnit for CSharp (Thomas Karcher)
>   3. Re: Help for a newbie please! (Raphael Reitzig)
>   4. ANTLR3 Maven2 plugin, strange errors (Jeroen Steenbeeke)
>   5. Advice on ANTLR 2.7.3 enabling position of token (Ruslan Zasukhin)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Wed, 25 Jun 2008 17:28:33 +0200
> From: "Peter Seban" <pseban12 at gmail.com>
> Subject: [antlr-interest] Help for a newbie please!
> To: antlr-interest at antlr.org
> Message-ID:
>        <f8e54d5f0806250828y43d5a63anc12eab13921dd447 at mail.gmail.com>
> Content-Type: text/plain; charset="iso-8859-1"
>
> Dear All,
>
> I'm a newbie in antlr.
> I have tried this example grammar by input text:
>
> apples= 100 * peaches;             // this is a simple expression
> *apples= 100 * peaches;           //  this is a comment line
>
> , but it doesn't work.
>
> The grammar:
> --------------------
>
>
> grammar expr_test;
> options{
>   output=AST;
>   ASTLabelType=CommonTree;
> }
> query  :
>          ex1=expr1  { System.out.println("[EXPRESSION_1] \n"+$ex1.text); }
>        | ex2=expr2  { System.out.println("[EXPRESSION_2] \n"+$ex2.text); }
>       ;
> expr1
>       :
>       terms '=' terms multiplication terms ';'
>       ;
>
> expr2
>       :
>       asterisk ~('\r'|'\n')* ';'
>       ;
> terms  :
>       WCHAR*
>       ;
> asterisk
>       :
>       {input.LT(-1).getText().toLowerCase().equals("\n")}?
>       {input.LT(0).getText().toLowerCase().equals(";")}?
>       {input.LT(1).getText().toLowerCase().equals("*")}? '*'
>       ;
>
> multiplication
>       :
>       {input.LT(1).getText().toLowerCase().equals("*")}? '*'
>       ;
>
> WS     : (' '|'\t'|'\r'|'\n')+ {skip();};
> WCHAR  : ~('*'|'='|'('| ')'|'"'|' '|'\t'|'\n'|'\r'|'#'| ';')*;
>
> /*
> Test it :
> ---------
> apples= 100 * peaches;
> *apples= 100 * peaches;
> */
>
> The generated output is:
> -----------------------------------
>
> [EXPRESSION_1]
> apples=100*peaches;
>
> Why do'nt generated:
> ------------------------------
> [EXPRESSION_2]
> *apples=100*peaches;
>
> too?
>
> Thank you all for your kind tips!
> Peter
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> http://www.antlr.org/pipermail/antlr-interest/attachments/20080625/38deda6b/attachment-0001.html
>
> ------------------------------
>
> Message: 2
> Date: Wed, 25 Jun 2008 18:26:16 +0200
> From: Thomas Karcher <thkarcher at gmx.de>
> Subject: [antlr-interest] GUnit for CSharp
> To: antlr-interest at antlr.org
> Message-ID: <1214411177.4033.49.camel at localhost>
> Content-Type: text/plain; charset="us-ascii"
>
> Hi,
>
> is there something like gunit (i. e. grammar unit tests) for the CSharp
> target?
>
> If not, I guess "normal" C# unit tests like NUnit will do it ...
>
>
> Thanks,
> Thomas
>
>
> -------------- next part --------------
> A non-text attachment was scrubbed...
> Name: not available
> Type: application/pgp-signature
> Size: 189 bytes
> Desc: Dies ist ein digital signierter Nachrichtenteil
> Url :
> http://www.antlr.org/pipermail/antlr-interest/attachments/20080625/b6481609/attachment-0001.bin
>
> ------------------------------
>
> Message: 3
> Date: Wed, 25 Jun 2008 18:27:51 +0200
> From: Raphael Reitzig <r_reitzi at cs.uni-kl.de>
> Subject: Re: [antlr-interest] Help for a newbie please!
> To: antlr-interest at antlr.org
> Message-ID: <ef853a55f65763f642fa7b4d71e67b6d at mail.frhk.de>
> Content-Type: text/plain; charset="UTF-8"
>
> Hi Peter!
>
> You do not have any recursion in your grammar. The first expression
> matches, but then, there is no rule available for the second line.
>
> Try adding something like that as starting rule:
>
> querylist : query (('\r'|'\n'|'\r\n')* query)* EOF;
>
> Good luck
>
> Raphael
>
> On Wed, 25 Jun 2008 17:28:33 +0200, "Peter Seban" <pseban12 at gmail.com>
> wrote:
> > Dear All,
> >
> > I'm a newbie in antlr.
> > I have tried this example grammar by input text:
> >
> > apples= 100 * peaches;             // this is a simple expression
> > *apples= 100 * peaches;           //  this is a comment line
> >
> > , but it doesn't work.
> >
> > The grammar:
> > --------------------
> >
> >
> > grammar expr_test;
> > options{
> >    output=AST;
> >    ASTLabelType=CommonTree;
> > }
> > query  :
> >           ex1=expr1  { System.out.println("[EXPRESSION_1] \n"+$ex1.text);
> > }
> >         | ex2=expr2  { System.out.println("[EXPRESSION_2] \n"+$ex2.text);
> > }
> >        ;
> > expr1
> >        :
> >        terms '=' terms multiplication terms ';'
> >        ;
> >
> > expr2
> >        :
> >        asterisk ~('\r'|'\n')* ';'
> >        ;
> > terms  :
> >        WCHAR*
> >        ;
> > asterisk
> >        :
> >        {input.LT(-1).getText().toLowerCase().equals("\n")}?
> >        {input.LT(0).getText().toLowerCase().equals(";")}?
> >        {input.LT(1).getText().toLowerCase().equals("*")}? '*'
> >        ;
> >
> > multiplication
> >        :
> >        {input.LT(1).getText().toLowerCase().equals("*")}? '*'
> >        ;
> >
> > WS     : (' '|'\t'|'\r'|'\n')+ {skip();};
> > WCHAR  : ~('*'|'='|'('| ')'|'"'|' '|'\t'|'\n'|'\r'|'#'| ';')*;
> >
> > /*
> > Test it :
> > ---------
> > apples= 100 * peaches;
> > *apples= 100 * peaches;
> > */
> >
> > The generated output is:
> > -----------------------------------
> >
> > [EXPRESSION_1]
> > apples=100*peaches;
> >
> > Why do'nt generated:
> > ------------------------------
> > [EXPRESSION_2]
> > *apples=100*peaches;
> >
> > too?
> >
> > Thank you all for your kind tips!
> > Peter
>
>
>
> ------------------------------
>
> Message: 4
> Date: Wed, 25 Jun 2008 19:02:19 +0200
> From: Jeroen Steenbeeke <jeroen at pbemengine.nl>
> Subject: [antlr-interest] ANTLR3 Maven2 plugin, strange errors
> To: antlr-interest at antlr.org
> Message-ID: <48627A1B.9000108 at pbemengine.nl>
> Content-Type: text/plain; charset="iso-8859-1"
>
> Hey everyone,
>
> I am currently in the process of generating the source for a Tree
> Grammar for Java (basically Dieter Habelitz' grammar with my own
> processing stuff added in code blocks).
>
> When using the command line or when running the generation through Ant
> (with <java> tasks) everything works out fine, but for some reason I
> can't get it to work with the ANTLR3 plugin for Maven2.
>
> I've added the pom.xml file and Maven's output as attachments. For some
> reason the ANTLR plugin manages to get into an infinite recursion that
> causes OutOfMemoryErrors. I've tried increasing the available heapspace
> with the -Xmx JVM option but to no avail - the generator simply freezes
> even with over 1GB of heap space.
>
> What could be causing these problems? Is Maven perhaps using an
> incorrect version of ANTLR?
>
> Or would it be better to simply report this as a bug to the Maven2
> plugin developers?
>
> Cheers,
>
> Jeroen Steenbeeke
> -------------- next part --------------
> An embedded and charset-unspecified text was scrubbed...
> Name: error.txt
> Url:
> http://www.antlr.org/pipermail/antlr-interest/attachments/20080625/23a3fc34/attachment-0001.txt
> -------------- next part --------------
> A non-text attachment was scrubbed...
> Name: pom.xml
> Type: text/xml
> Size: 1139 bytes
> Desc: not available
> Url :
> http://www.antlr.org/pipermail/antlr-interest/attachments/20080625/23a3fc34/attachment-0001.xml
>
> ------------------------------
>
> Message: 5
> Date: Wed, 25 Jun 2008 21:45:40 +0300
> From: Ruslan Zasukhin <sunshine at public.kherson.ua>
> Subject: [antlr-interest] Advice on ANTLR 2.7.3 enabling position of
>        token
> To: "antlr-interest at antlr.org" <antlr-interest at antlr.org>
> Message-ID: <C4886D04.9E2F8%sunshine at public.kherson.ua<C4886D04.9E2F8%25sunshine at public.kherson.ua>
> >
> Content-Type: text/plain;       charset="US-ASCII"
>
> Hi All,
>
> Let me remind that we develop SQL parser for our Valentina database engine.
> We still using ANTLR 2.x (waiting for release of ANTLR 3.1 to switch).
>
> I know that in ANTLR 3.x added handy feature that each token know its
>    styrt/end position in the original text.
>
> Is it possible implement this feature for ANTLR 2.x ?
>
> We have long time wait for 3.x switch but not catch urgent case to solve it
> using 2.x.
>
>
> Problem is that when we parse string that contains FEW SQL commands, we
> sometimes must be able get command itself to store it. We need this for
> Stored Procedures and Triggers for example.
>
> So when I have single string as
>
> "
> CREATE PROCEDURE proc1
> BEGIN
>   // some text of procedure 1
> END
>
>
> CREATE PROCEDURE proc1
> BEGIN
>   // some text of procedure 2
> END
> "
>
>
> I must be able get from parser only
>
> CREATE PROCEDURE proc1
> BEGIN
>   // some text of procedure 1
> END
>
>
> Any clues how I can improve ANTLR 2.x for this?
>    * may be add own subclass of Token ?
>        and self store there position when Lexer create token?
>
>
> --
> Best regards,
>
> Ruslan Zasukhin
> VP Engineering and New Technology
> Paradigma Software, Inc
>
> Valentina - Joining Worlds of Information
> http://www.paradigmasoft.com
>
> [I feel the need: the need for speed]
>
>
>
>
>
> ------------------------------
>
> _______________________________________________
> antlr-interest mailing list
> antlr-interest at antlr.org
> http://www.antlr.org/mailman/listinfo/antlr-interest
>
>
> End of antlr-interest Digest, Vol 43, Issue 54
> **********************************************
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/e503b457/attachment-0001.html 

From antlr at mirality.co.nz  Thu Jun 26 02:46:37 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Thu, 26 Jun 2008 21:46:37 +1200
Subject: [antlr-interest] Catch errors and stop token stream  creation
In-Reply-To: <216df3580806260219l3718ececoaeab36e9e1aa9207@mail.gmail.co
 m>
References: <216df3580806260213w7c2ca333udb353b9918a738f0@mail.gmail.com>
	<216df3580806260219l3718ececoaeab36e9e1aa9207@mail.gmail.com>
Message-ID: <20080626094643.11A5411ECE5@www.antlr.org>

At 21:19 26/06/2008, H?l?ne Chagnot wrote:
>Working with ANTLR 3.1b1, we would like to 
>capture unrecognised tokens passed to the lexer 
>to immediately stop parsing when incorrect text is entered.

Did you look at this?
   http://www.antlr.org/wiki/pages/viewpage.action?pageId=5341217


From antlr-interest at antlr.org  Thu Jun 26 02:53:49 2008
From: antlr-interest at antlr.org (VIAGRA  Official Site)
Date: Thu, 26 Jun 2008 02:53:49 -0700 (PDT)
Subject: [antlr-interest] Dear antlr-interest@antlr.org June 83% 0FF
Message-ID: <20080626055408.15684.qmail@AMT-INOMARKI>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/4129395b/attachment.html 

From AndrevdM at pyrogenesis.co.za  Thu Jun 26 03:02:05 2008
From: AndrevdM at pyrogenesis.co.za (=?iso-8859-1?Q?Andr=E9_van_der_Merwe?=)
Date: Thu, 26 Jun 2008 12:02:05 +0200
Subject: [antlr-interest] AST optimizations
Message-ID: <E7035321714C624BA01ADCBA6F99CADF0102E87093ED@mercury.pyrogenesis.co.za>

Hi all,

I'm trying to figure out what is the best way to do AST changes and optimizations.

I assume that for some (most?) optimisations a tree rewrite grammar will not be powerful enough (e.g. for deciding on eager/lazy loading based on function use). So what is the best way of making these types of changes (assume that the changes can be significant) to an AST? I can think of a few options

1) Use the ANTLR AST and add and remove nodes from it. (I've got no idea how I'd create new nodes though as you need an IToken)
2) Build a custom AST from the ANTLR AST and make modifications to it. (This way I can have different classes for each AST node)

I'm leaning towards option two as I think that would give me the greatest flexibility but I'd like to hear what others are doing.



If I do go with option two I can think of a few issues
1) Can I still generate code using string template and an ANTLR tree grammar? (I think I've read something about using tree adapters for this...)
2) I'll need to store the ITokens in my new AST so that I can do my own error reporting.


Are there any simple examples of this? I guess I could look at the BOO source (I'm pretty sure they use option 2) but it would nice to have a simpler example to start with.


Thanks in advance.


Andre
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/aa11d49f/attachment.html 

From Vinayagamoorthy.Gnanasegaran at statkraft.com  Thu Jun 26 05:58:26 2008
From: Vinayagamoorthy.Gnanasegaran at statkraft.com (Gnanasegaran Vinayagamoorthy)
Date: Thu, 26 Jun 2008 14:58:26 +0200
Subject: [antlr-interest] A simple question in my antlr code. Is it a antlr
 code bug or some thing wrong with my code
Message-ID: <0A30507D97F63849BAFA654D0D66907A284465AB@EXCHEVS01.nordic.energycorp.com>

I am a new antlr user. I have made a simple code to decode a string. Here comes the code.

*********************************************************************************************************
grammar test;

options {
            language = Java;
}

@parser::members {
            String month = "NONE";
}

generateName
            :           columnkey SEPARATOR namekey SEPARATOR dateKey SEPARATOR;

columnkey :  (   '5'         {System.out.println("digit1 : " + "5");}     |
                                    '6'         {}          |
                        '7'         {}          |
                        '8'         {}          |
                        '9'         {}          |
                        '10'       {}          |
                        '12'       {}
            );

namekey : KEY digit_key  ('M' {System.out.println("Char : " + "M");} | 'Q' {} | 'Y'{});

digit_key :        ( '2'{System.out.println("digit2 : " + "2");} | '4'{});

dateKey : monthKey yearKey({System.out.println("Finished"); });

monthKey
            : MONTH_LABEL_EN ({month = $MONTH_LABEL_EN.text; System.out.println("month : " +  month); } );

yearKey            : YEAR_TWO_DIGIT(
            {System.out.println("year : " +  $YEAR_TWO_DIGIT.text);}
);

DIG:'0'..'9';
MONTH_LABEL_EN : ('JAN' | 'FEB' | 'MAR' | 'APR' | 'MAY' | 'JUN' | 'JUL' | 'AUG' | 'SEP' | 'OCT' | 'NOV' | 'DEC');
SEPARATOR : ';';
KEY : ('FT') ;
YEAR_TWO_DIGIT : DIG+;


When I test the method "yearKey" with a value "10;" it gives me "mismatched input '10'" error. Number '10' is used in method "columnkey". Is it any thing wrong in my code or a bug in antlr. Can anybody help me in this.

Regards,
Seagr

Gnanasegaran Vinayagamoorthy
System developer, GTSS

_ _ DIRECT +47 24 06 70 16
_ _ MOBILE +47 95 85 62 56
_ _ SWITCHBOARD +47 24 06 70 00

Statkraft Energi AS
Lilleakerveien 6, P.O. Box 200 Lilleaker, 0216 Oslo, Norway
www.statkraft.com<http://www.statkraft.com/>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/0f0e466e/attachment-0001.html 

From antlr at mirality.co.nz  Thu Jun 26 06:17:05 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 27 Jun 2008 01:17:05 +1200
Subject: [antlr-interest] A simple question in my antlr code. Is it a
 antlr code bug or some thing wrong with my code
In-Reply-To: <0A30507D97F63849BAFA654D0D66907A284465AB@EXCHEVS01.nordic.
	energycorp.com>
References: <0A30507D97F63849BAFA654D0D66907A284465AB@EXCHEVS01.nordic.energycorp.com>
Message-ID: <20080626131714.9C8EA11ED6E@www.antlr.org>

At 00:58 27/06/2008, Gnanasegaran Vinayagamoorthy wrote:
>I am a new antlr user. I have made a simple code to decode a 
>string. Here comes the code.
[...]
>columnkey :  (   '5'         {System.out.println("digit1 : " + 
>"5");}     |
>                                     '6'         {}          |
>                         '7'         {}          |
>                         '8'         {}          |
>                         '9'         {}          |
>                         '10'       {}          |
>                         '12'       {}
>             );

When you use a quoted string constant in a parser rule (not a 
lexer rule) like this, it implicitly creates a token (ie. a lexer 
rule) that recognises that specific character sequence.  If you're 
not careful, this can introduce significant ambiguity, and is 
often not what you actually want (though it is occasionally useful 
for keywords or structural punctuation).

My general advice (at least when starting out) is to maintain 
strict separation between lexer and parser -- *never* use a quoted 
constant in a parser rule.  If you want to guarantee that you 
can't get them mixed up, then avoid the combined grammar entirely 
and just make separate lexer and parser grammars.


From csanders at hoovers.com  Thu Jun 26 06:21:00 2008
From: csanders at hoovers.com (csanders)
Date: Thu, 26 Jun 2008 08:21:00 -0500
Subject: [antlr-interest] ANTLR IDE 1.0.0beta6 available
In-Reply-To: <92b42db60806251720q71676140yf2d86744c795f9d7@mail.gmail.com>
References: <92b42db60806251720q71676140yf2d86744c795f9d7@mail.gmail.com>
Message-ID: <486397BC.4050708@hoovers.com>

Great!  Exactly what I needed.

Edgar Espina wrote:
> Hi All,
>
>   ANTLR IDE 1.0.0beta6 is available for download at 
> http://antlrv3ide.sourceforge.net/.
>  
> New features includes:
>   - ANTLR Interpreter (likes ANTLRWorks)
>   - ANTLR Documentation View
>   - ANTLR Console and bugs fixed.
>
> Best Regards,
>
> Edgar 
>  
>  


From AndrevdM at pyrogenesis.co.za  Thu Jun 26 06:33:54 2008
From: AndrevdM at pyrogenesis.co.za (=?iso-8859-1?Q?Andr=E9_van_der_Merwe?=)
Date: Thu, 26 Jun 2008 15:33:54 +0200
Subject: [antlr-interest] A simple question in my antlr code. Is it a
 antlr code bug or some thing wrong with my code
In-Reply-To: <0A30507D97F63849BAFA654D0D66907A284465AB@EXCHEVS01.nordic.energycorp.com>
References: <0A30507D97F63849BAFA654D0D66907A284465AB@EXCHEVS01.nordic.energycorp.com>
Message-ID: <E7035321714C624BA01ADCBA6F99CADF0102E8709404@mercury.pyrogenesis.co.za>

I'm also fairly new to ANTLR so I definitely stand to be corrected...

You are implicitly creating tokens in your rules. Your columnKey rule is going to match the numbers 5, 7, 8, 10 etc. DIGIT will then match any integer that *has not already been matched* this is why you are getting the error.


Consider this grammar based on yours

        -----------------------------------
        yearKey : year_two_digit;
        swallow : '10';

        year_two_digit : number;
        number: DIG+;

        DIG: ('0'..'9');
        -----------------------------------


Here DIG will never match 10 as it was already matched by swallow. Rules higher up get run before ones lower down. If you generate the code for this grammar you will be able to see what is going on

        -----------------------------------
      public void mTokens() throws RecognitionException {
        int alt1=2;
        int LA1_0 = input.LA(1);

        if ( (LA1_0=='1') ) {
            int LA1_1 = input.LA(2);

            if ( (LA1_1=='0') ) {
                alt1=1;
            }
            else {
                alt1=2;}
        }

        switch (alt1) {
           ...
        -----------------------------------

The if block is a DFA that is looking for 10 and then returning a swallow token (alt1=1) else it returns a DIG (alt1=2)


If I can make two suggestions; get used to looking at the generated code you can learn a lot about how ANTLR works from it. Secondly consider getting the ANTLR book it really is fantastic.


Andre


>
>From: Gnanasegaran Vinayagamoorthy
>
>I am a new antlr user. I have made a simple code to decode a string.
>...

From helene.chagnot at gmail.com  Thu Jun 26 07:05:22 2008
From: helene.chagnot at gmail.com (=?ISO-8859-1?Q?H=E9l=E8ne_Chagnot?=)
Date: Thu, 26 Jun 2008 16:05:22 +0200
Subject: [antlr-interest] Catch errors and stop token stream creation
In-Reply-To: <48636583.1917400a.6416.ffffc924SMTPIN_ADDED@mx.google.com>
References: <216df3580806260213w7c2ca333udb353b9918a738f0@mail.gmail.com>
	<216df3580806260219l3718ececoaeab36e9e1aa9207@mail.gmail.com>
	<48636583.1917400a.6416.ffffc924SMTPIN_ADDED@mx.google.com>
Message-ID: <216df3580806260705l4f572e88j195666347233c149@mail.gmail.com>

Thanks Gavin for your reply, that achieves the desired result.

It seems like rather a contrived way to exit from unrecognised text however
: is there not an option that can be set to exit immediately when this
occurs ?

Thanks.



On Thu, Jun 26, 2008 at 11:46 AM, Gavin Lambert <antlr at mirality.co.nz>
wrote:

> At 21:19 26/06/2008, H?l?ne Chagnot wrote:
>
>> Working with ANTLR 3.1b1, we would like to capture unrecognised tokens
>> passed to the lexer to immediately stop parsing when incorrect text is
>> entered.
>>
>
> Did you look at this?
>  http://www.antlr.org/wiki/pages/viewpage.action?pageId=5341217
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/3a3fe144/attachment.html 

From siva.kumar at loglogic.com  Thu Jun 26 08:19:57 2008
From: siva.kumar at loglogic.com (siva.kumar at loglogic.com)
Date: Thu, 26 Jun 2008 08:19:57 -0700
Subject: [antlr-interest] Trying to convert a file-oriented lexer to a
	line-oriented one
In-Reply-To: <L01SLCSMTP01zzmZ4pV0000a2fd@L01SLCSMTP01.calltower.com>
References: <117A6478DABB1D4E9509EA7F413AE78907567DF3@CTMAIL2.calltower.com>
	<L01SLCSMTP01zzmZ4pV0000a2fd@L01SLCSMTP01.calltower.com>
Message-ID: <117A6478DABB1D4E9509EA7F413AE789075684FA@CTMAIL2.calltower.com>

Hi Gavin,
         Thank you for taking the time to answer this question.

I did try to read in the entire file originally. With really large files, I got this problem:
     % java testParser <MY-HUGE-FILE> > /dev/null Exception in thread "main" java.lang.OutOfMemoryError: Java heap space

This was with the following Java code:
  public static void main(String[] args) throws Exception {
??????? testLexer lex = new testLexer(new ANTLRFileStream(args[0]));
??????? CommonTokenStream tokens = new CommonTokenStream(lex);

??????? testParser parser = new testParser(tokens);

??????? try {
??????????? parser.line();
??????? } catch (RecognitionException e)? {
??????????? e.printStackTrace();
??????? }
  }


Interestingly enough, I didn't get to read even a single line (the entire file was being read before feeding it to the lexer).

The "equivalent" C code was:

  int main(int argc, char * argv[])
  {

    pANTLR3_INPUT_STREAM           input;
    ptestLexer               lex;
    pANTLR3_COMMON_TOKEN_STREAM    tokens;
    ptestParser              parser;

    input  = antlr3AsciiFileStreamNew          ((pANTLR3_UINT8)argv[1]);
    lex    = testLexerNew                (input);
    tokens = antlr3CommonTokenStreamSourceNew  (ANTLR3_SIZE_HINT, TOKENSOURCE(lex));
    parser = testParserNew               (tokens);

    parser  ->logfile(parser);

    // Must manually clean up
    //
    parser ->free(parser);
    tokens ->free(tokens);
    lex    ->free(lex);
    input  ->close(input);

    return(0);
  }


This does read many lines before core-dumping. It appears that the Java and C implementation of the FileStream is somewhat different?


So I was trying to read just one line at a time.

Thanks,

-Siva

________________________________________
From: Gavin Lambert [mailto:antlr at mirality.co.nz] 
Sent: Thursday, June 26, 2008 1:03 AM
To: Siva Kumar (siva.kumar at loglogic.com); antlr-interest at antlr.org
Subject: Re: [antlr-interest] Trying to convert a file-oriented lexer to a line-oriented one

At 09:49 26/06/2008, siva.kumar at loglogic.com wrote:

I've looked for examples of using a lexer in a line-oriented fashion but can't seem to find one.
[...]

But I'm having some trouble figuring out how to call the lexer on each line that I've read from the file.

ANTLR isn't really designed to operate in that manner; it wants to suck up all the input and tokenise it before parsing begins.

There was some discussion on the list a while back (and this wiki page: http://www.antlr.org/wiki/pages/viewpage.action?pageId=7929859) about making it lazy-load input for cases where the input stream is long-running (eg. interactive input), but I'm not sure how far it got.


What I am essentially trying to do is:
?
??????????? Open a file 
??????????? While lines exist
??????????????????????? Get a line
??????????????????????? Call the Parser

Why do you need to do this (especially if it's already in a file, and not using a slow/incomplete connection)?? Why can't you parse the entire file in one go?? Even if each line represents a separate expression or command or something, you can just make the top-level rule accept an arbitrary number of these separated by newlines.

From dave at badgers-in-foil.co.uk  Thu Jun 26 08:45:47 2008
From: dave at badgers-in-foil.co.uk (David Holroyd)
Date: Thu, 26 Jun 2008 16:45:47 +0100
Subject: [antlr-interest] ANTLR3 Maven2 plugin, strange errors
In-Reply-To: <48627A1B.9000108@pbemengine.nl>
References: <48627A1B.9000108@pbemengine.nl>
Message-ID: <20080626154547.GA31454@badgers-in-foil.co.uk>

On Wed, Jun 25, 2008 at 07:02:19PM +0200, Jeroen Steenbeeke wrote:
> Hey everyone,
> 
> I am currently in the process of generating the source for a Tree
> Grammar for Java (basically Dieter Habelitz' grammar with my own
> processing stuff added in code blocks).
> 
> When using the command line or when running the generation through Ant
> (with <java> tasks) everything works out fine, but for some reason I
> can't get it to work with the ANTLR3 plugin for Maven2.
> 
> I've added the pom.xml file and Maven's output as attachments. For some
> reason the ANTLR plugin manages to get into an infinite recursion that
> causes OutOfMemoryErrors. I've tried increasing the available heapspace
> with the -Xmx JVM option but to no avail - the generator simply freezes
> even with over 1GB of heap space.
> 
> What could be causing these problems? Is Maven perhaps using an
> incorrect version of ANTLR?
> 
> Or would it be better to simply report this as a bug to the Maven2
> plugin developers?

It would possibly be more correct to ask on the Mojo users mailing list,
but I am subscribed to this list too.

The maven plugin uses ANTLR 3.0.1, as found over here,

  http://repo1.maven.org/maven2/org/antlr/antlr/3.0.1/

I'll try and have a look at the problem.  Would it be possible for you
to send me the actual grammar?


ta,
dave

-- 
http://david.holroyd.me.uk/

From canjren at yahoo.com  Thu Jun 26 09:03:45 2008
From: canjren at yahoo.com (Can Zhen)
Date: Thu, 26 Jun 2008 09:03:45 -0700 (PDT)
Subject: [antlr-interest] Get java.lang.NoClassDefFoundError when working
	with StringTemplate 3.0?
Message-ID: <553667.32510.qm@web39705.mail.mud.yahoo.com>


I used the example on page 220 of the book "The Definitive ANTLR Reference" to test Antlr 3.0.1 with StringTemplate 3.0. I put the generated lexer and parser java class into the src folder of my project and created a test program to test it. But it failed with?java.lang.NoClassDefFoundError.? It failed when executing the following codes in the parser:
protected StringTemplateGroup templateLib =
new StringTemplateGroup("CMinusParserTemplates", AngleBracketTemplateLexer.class);
?
I already added the antlr and stringtemplate jar files as external jar files on Eclipse. Any ideas why it failed?
?
Thanks!


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/a74959e7/attachment.html 

From parrt at cs.usfca.edu  Thu Jun 26 09:08:15 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 26 Jun 2008 09:08:15 -0700
Subject: [antlr-interest] ANTLR pub in Ireland
Message-ID: <4F306AEA-448F-4DAB-B00E-B3561A31AA05@cs.usfca.edu>

http://www.antlr.org/wiki/display/ANTLR3/2008/06/26/ANTLR+pub+in+Ireland

From darach at gmail.com  Thu Jun 26 09:37:32 2008
From: darach at gmail.com (Darach Ennis)
Date: Thu, 26 Jun 2008 17:37:32 +0100
Subject: [antlr-interest] ANTLR pub in Ireland
In-Reply-To: <4F306AEA-448F-4DAB-B00E-B3561A31AA05@cs.usfca.edu>
References: <4F306AEA-448F-4DAB-B00E-B3561A31AA05@cs.usfca.edu>
Message-ID: <ECA566C3-2960-4077-BB23-F8DC0F69518C@gmail.com>

Hi Ter,

That is actually 'The Angler'. That 't' is an Irish/Gaelic styled  
'G'. :)

Regards,

Darach.

On 26 Jun 2008, at 17:08, Terence Parr <parrt at cs.usfca.edu> wrote:

> http://www.antlr.org/wiki/display/ANTLR3/2008/06/26/ANTLR+pub+in+Ireland

From parrt at cs.usfca.edu  Thu Jun 26 09:55:49 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 26 Jun 2008 09:55:49 -0700
Subject: [antlr-interest] ANTLR pub in Ireland
In-Reply-To: <ECA566C3-2960-4077-BB23-F8DC0F69518C@gmail.com>
References: <4F306AEA-448F-4DAB-B00E-B3561A31AA05@cs.usfca.edu>
	<ECA566C3-2960-4077-BB23-F8DC0F69518C@gmail.com>
Message-ID: <CAC29C94-6958-4B18-AD7D-B5E18E408624@cs.usfca.edu>

crap!  Yeah, the fish makes more sense now!  Dang it!  ok, Angler is  
gaelic for ANTLR then :)
Ter
On Jun 26, 2008, at 9:37 AM, Darach Ennis wrote:

> Hi Ter,
>
> That is actually 'The Angler'. That 't' is an Irish/Gaelic styled  
> 'G'. :)
>
> Regards,
>
> Darach.
>
> On 26 Jun 2008, at 17:08, Terence Parr <parrt at cs.usfca.edu> wrote:
>
>> http://www.antlr.org/wiki/display/ANTLR3/2008/06/26/ANTLR+pub+in+Ireland


From nelson.ana at gmail.com  Thu Jun 26 10:51:41 2008
From: nelson.ana at gmail.com (Ana Nelson)
Date: Thu, 26 Jun 2008 18:51:41 +0100
Subject: [antlr-interest] ANTLR pub in Ireland
In-Reply-To: <CAC29C94-6958-4B18-AD7D-B5E18E408624@cs.usfca.edu>
References: <4F306AEA-448F-4DAB-B00E-B3561A31AA05@cs.usfca.edu>
	<ECA566C3-2960-4077-BB23-F8DC0F69518C@gmail.com>
	<CAC29C94-6958-4B18-AD7D-B5E18E408624@cs.usfca.edu>
Message-ID: <a7d6d2740806261051j599ec3dx31c9375d27f3bea@mail.gmail.com>

Of course, with more notice, we would have organized a meetup in The
Stag's Head.



2008/6/26 Terence Parr <parrt at cs.usfca.edu>:
> crap!  Yeah, the fish makes more sense now!  Dang it!  ok, Angler is gaelic
> for ANTLR then :)
> Ter
> On Jun 26, 2008, at 9:37 AM, Darach Ennis wrote:
>
>> Hi Ter,
>>
>> That is actually 'The Angler'. That 't' is an Irish/Gaelic styled 'G'. :)
>>
>> Regards,
>>
>> Darach.
>>
>> On 26 Jun 2008, at 17:08, Terence Parr <parrt at cs.usfca.edu> wrote:
>>
>>> http://www.antlr.org/wiki/display/ANTLR3/2008/06/26/ANTLR+pub+in+Ireland
>
>

From parrt at cs.usfca.edu  Thu Jun 26 10:53:45 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 26 Jun 2008 10:53:45 -0700
Subject: [antlr-interest] ANTLR pub in Ireland
In-Reply-To: <a7d6d2740806261051j599ec3dx31c9375d27f3bea@mail.gmail.com>
References: <4F306AEA-448F-4DAB-B00E-B3561A31AA05@cs.usfca.edu>
	<ECA566C3-2960-4077-BB23-F8DC0F69518C@gmail.com>
	<CAC29C94-6958-4B18-AD7D-B5E18E408624@cs.usfca.edu>
	<a7d6d2740806261051j599ec3dx31c9375d27f3bea@mail.gmail.com>
Message-ID: <370C739F-66B9-4359-B4F2-5B8B8F295A77@cs.usfca.edu>


On Jun 26, 2008, at 10:51 AM, Ana Nelson wrote:

> Of course, with more notice, we would have organized a meetup in The
> Stag's Head.

True!  Next time I'll send plenty of notice so the appropriate locale  
and libations can be arranged.

Ter

From jeroen at pbemengine.nl  Thu Jun 26 10:54:01 2008
From: jeroen at pbemengine.nl (Jeroen Steenbeeke)
Date: Thu, 26 Jun 2008 19:54:01 +0200
Subject: [antlr-interest] ANTLR3 Maven2 plugin, strange errors
In-Reply-To: <20080626154547.GA31454@badgers-in-foil.co.uk>
References: <48627A1B.9000108@pbemengine.nl>
	<20080626154547.GA31454@badgers-in-foil.co.uk>
Message-ID: <4863D7B9.20509@pbemengine.nl>

> It would possibly be more correct to ask on the Mojo users mailing list,
> but I am subscribed to this list too.
>
> The maven plugin uses ANTLR 3.0.1, as found over here,
>
>   http://repo1.maven.org/maven2/org/antlr/antlr/3.0.1/
>
> I'll try and have a look at the problem.  Would it be possible for you
> to send me the actual grammar?
>
>
> ta,
> dave
>

Unfortunately I'm not at liberty to share the exact grammar, but mine is
derived from the one Dieter Habelitz wrote and posted on the ANTLR site:

http://www.antlr.org/grammar/1207932239307/Java1_5Grammars/Java.g
http://www.antlr.org/grammar/1207932239307/Java1_5Grammars/JavaTreeParser.g

I just tried, and his original tree grammar (so JavaTreeParser.g) has
the exact same problem as my version (which is basically his version
with some added code blocks and rule returns/parameters).

Cheers, Jeroen

From darach at gmail.com  Thu Jun 26 11:20:49 2008
From: darach at gmail.com (Darach Ennis)
Date: Thu, 26 Jun 2008 19:20:49 +0100
Subject: [antlr-interest] ANTLR pub in Ireland
In-Reply-To: <370C739F-66B9-4359-B4F2-5B8B8F295A77@cs.usfca.edu>
References: <4F306AEA-448F-4DAB-B00E-B3561A31AA05@cs.usfca.edu>
	<ECA566C3-2960-4077-BB23-F8DC0F69518C@gmail.com>
	<CAC29C94-6958-4B18-AD7D-B5E18E408624@cs.usfca.edu>
	<a7d6d2740806261051j599ec3dx31c9375d27f3bea@mail.gmail.com>
	<370C739F-66B9-4359-B4F2-5B8B8F295A77@cs.usfca.edu>
Message-ID: <A6C56DDD-30F4-43C0-8E85-56EA4FF9009F@gmail.com>

Stags head... Count me in!

Regards,

Darach.

On 26 Jun 2008, at 18:53, Terence Parr <parrt at cs.usfca.edu> wrote:

>
> On Jun 26, 2008, at 10:51 AM, Ana Nelson wrote:
>
>> Of course, with more notice, we would have organized a meetup in The
>> Stag's Head.
>
> True!  Next time I'll send plenty of notice so the appropriate  
> locale and libations can be arranged.
>
> Ter

From micke at online.no  Thu Jun 26 11:32:39 2008
From: micke at online.no (Michael Fogeborg)
Date: Thu, 26 Jun 2008 20:32:39 +0200 (MEST)
Subject: [antlr-interest] ColonAssign vs Label Colon vs Colon
Message-ID: <19534086.512841214505159661.JavaMail.adm-moff@moffice8.nsc.no>

I have:

grammar Foo;

COLON	: ':' ;
IDENT	: 'A'..'Z' ;
ASSIGN	: ID ':=' ID ;
LABEL	: IDENT COLON ;

The Lexer gets lost on the COLON and I can't get this working...
( Well, it does work if a introduce whitespace around the tokens 
  but that is not what I want ) 

Any hints ?


From r_reitzi at cs.uni-kl.de  Thu Jun 26 12:20:33 2008
From: r_reitzi at cs.uni-kl.de (Raphael Reitzig)
Date: Thu, 26 Jun 2008 21:20:33 +0200
Subject: [antlr-interest] To match or not to match
In-Reply-To: <351b30368fa4ad7bace3ae90cbb03eea@mail.frhk.de>
References: <25f4411f87108021ee12fec848bf32ef@mail.frhk.de>
	<90ab8c830c1dca8e7a9a7d8871d9eb3f@mail.frhk.de>
	<351b30368fa4ad7bace3ae90cbb03eea@mail.frhk.de>
Message-ID: <f4921b4d07fbc70c96bc294acd118378@mail.frhk.de>

Hi!

I got it.

ANTLRWorks' Interpreter is not able to backtrack. In Debugging mode, it
works completely satisfying.

Now I know what to look for, it was a matter of minutes to google that
piece of information. Doh.

Regards

Raphael

On Tue, 24 Jun 2008 11:26:30 +0200, Raphael Reitzig <r_reitzi at cs.uni-kl.de>
wrote:
> Hello again!
> 
> I think I got a couple of steps farther. However, some behaviour of ANTLR
> is hazarding me.
> 
> Please consider the (updated) grammer at
> http://raphael.frhk.de/files/property.g . Note that for rule property,
the
> first symbols of all alternatives are pairwise different. The grammar
> works
> nice without any additional stuff, i.e. reading the following inputs
> 
> (1) : (5*(x+2))=0
> (2) : [x=5 | [y=3 U z=5]]
> 
> Now try uncommenting line 3, turning backtracking on. I would expect
> nothing to change, for backtracking wasn't necessary at all.
> However, neither input is recognized using backtracking. To be more
> precise, ANTLR failes in evaluating the (implicit) syntactic predicates.
> This is unsettling, because it proved seconds earlier that there is
> exactly
> one alternativ of rule property matching each input!
> 
> Is this, now, a bug in ANTLR or am I, still, too unskilled? ?(
> 
> Sunny German greetings
> 
> Raphael
> 
> On Fri, 20 Jun 2008 17:19:33 +0200, Raphael Reitzig
> <r_reitzi at cs.uni-kl.de>
> wrote:
>> Apparantly, attachments won't work. Sorry for that.
>>
>> You can find the grammar file here:
>> http://raphael.frhk.de/files/property.g
>>
>> For those afraid of viruses or such:
>>
>> *****
>>
>> grammar property;
>>
>> start
>> 	:	property EOF;
>>
>> property //options { backtrack=true; memoize=true; }
>> 	:	NOT '(' property ')'
>> 	|	( ALL | GLOB | SOME | FIN | NEXT)+ '(' property ')'
>> 	|	'(' property ( (AND | OR) property )+ ')'
>> 	|	('(' atom ')')  => '(' atom ')'
>> 	|	( atom ) => atom;
>>
>> atom
>> 	:	term (EQ | NEQ | LES | GRT | LEQ | GEQ) term;
>>
>> term
>> 	:	'(' term (PLUS | MINUS | MULT| DIV | MOD) term ')'
>> 	|	(MIN | MAX) '(' term ',' term ')'
>> 	|	(MINUS)? INT
>> 	|	(MINUS)? VAR
>> 	|	MINUS '(' term ')';
>>
>> INT 	:	('0'..'9')+;
>> VAR 	:	('a'..'z') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_')*;
>>
>> ALL	:	'A';
>> SOME 	:	'E';
>> GLOB	:	'G';
>> FIN 	:	'F';
>> NEXT		:	'X';
>>
>> UNTIL 	:	'U';
>> IMPL 	:	'->';
>> AND 	:	'&';
>> OR 	:	'|';
>> NOT 	:	'!';
>>
>> PLUS 	:	'+';
>> MINUS 	:	'-';
>> MULT 	:	'*';
>> DIV 	:	'/';
>> MOD 	:	'%';
>>
>> MIN 	:	'Min';
>> MAX 	:	'Max';
>>
>> EQ 	:	'=';
>> NEQ 	:	'!=';
>> LES 	:	'<';
>> GRT 	:	'>';
>> LEQ 	:	 '<=';
>> GEQ 	:	 '>=';
>>
>> WS 	:	(' ' | '\t' | '\n' | '\r')+ { skip(); };
>>
>> *****
>>
>> On Fri, 20 Jun 2008 14:52:52 +0200, Raphael Reitzig
>> <r_reitzi at cs.uni-kl.de>
>> wrote:
>>> Hello!
>>>
>>> I am quite a novice to ANTLR as well as language parsing at all, so
>>> perhaps
>>> I dug in a bit to quickly (got The Book the day before yesterday).
>> Anyway,
>>> I try to build a grammar I need for a job at university and get some
>>> strange results I do not understand. I hope file appendings work on the
>>> list.
>>>
>>> Using ANTLRWorks' Interpreter, I try to match the following sentence
>>> against rule 'atom':
>>>
>>> Min(4,3)=x
>>>
>>> It works perfectly. It should match rule 'property' as well (last
>>> alternative: 'property : ( atom ) => atom;'), but trying that yields
>>> FailedPredicateException. (I (think I) need the predicates to help
> LL(*)
>>> along with multiple '('s in a row.) Exactly why does the predicate
>> become
>>> false _if_ the checked sequence _is_ an atom?
>>>
>>> Matching Min(4,3) alone against 'term' I expect to work, for it did,
>>> matching the statement given above against 'atom'. However, it fails
>>> without exception, aparently not recognizing ',' correctly.
>>>
>>> I would not be surprised I if made a (simple?) systematic error. Can
> you
>>> help me?
>>>
>>> Greetings from Germany
>>>
>>> Raphael Reitzig


From antlr at mirality.co.nz  Thu Jun 26 12:56:49 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Fri, 27 Jun 2008 07:56:49 +1200
Subject: [antlr-interest] ColonAssign vs Label Colon vs Colon
In-Reply-To: <19534086.512841214505159661.JavaMail.adm-moff@moffice8.nsc .no>
References: <19534086.512841214505159661.JavaMail.adm-moff@moffice8.nsc.no>
Message-ID: <20080626195658.08EA611EDDB@www.antlr.org>

At 06:32 27/06/2008, Michael Fogeborg wrote:
 >COLON	: ':' ;
 >IDENT	: 'A'..'Z' ;
 >ASSIGN	: ID ':=' ID ;
 >LABEL	: IDENT COLON ;
 >
 >The Lexer gets lost on the COLON and I can't get this working...

This is because you're mixing leaf rules (COLON and IDENT) with 
non-leaf rules (LABEL and ASSIGN).  (And ASSIGN is using an 
unlisted rule, but I'm assuming that's a typo.)

ASSIGN definitely looks like it should be in the parser, not the 
lexer, as whitespace ought to be permitted around the ':=' sign, 
and it's much easier to deal with multiple IDs there.  The same 
could also be true for LABEL -- most languages that do labels this 
way do permit whitespace to be between the identifier and the 
colon.

If you really want to match it via a lexer rule, though, then 
you'll need to merge the rules and manually disambiguate:

/* this exists only to create the token name; it'll never be 
called so the content is unimportant */
fragment LABEL: IDENT COLON;

IDENT
   : ('A'..'Z')  /* should that be ('A'..'Z')+ or did you really 
want single-character identifiers? */
     ((COLON) => COLON { $type = LABEL; })?
   ;

(In this case you probably don't actually need the syntactic 
predicate, but I usually prefer to put it in anyway, for symmetry 
with the cases where you do need it.)


From lgcraymer at yahoo.com  Thu Jun 26 13:16:55 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Thu, 26 Jun 2008 13:16:55 -0700 (PDT)
Subject: [antlr-interest] AST optimizations
Message-ID: <967247.57860.qm@web55902.mail.re3.yahoo.com>

Heterogeneous ASTs (your option 2) is part of the solution, but the analysis usually involves data structures constructed from a tree walk, not just the trees.  Symbol tables and directed graphs are common data structures for analysis.  Usually the directed graphs reference nodes in the tree (and sometimes vice versa) so that the next tree transformation can incorporate the analysis findings.  Don't fixate on the AST:  look at the analysis algorithms first, then figure out how to capture the results in a syntax tree.

--Loring




----- Original Message ----
From: Andr? van der Merwe <AndrevdM at pyrogenesis.co.za>
To: "antlr-interest at antlr.org" <antlr-interest at antlr.org>
Sent: Thursday, June 26, 2008 3:02:05 AM
Subject: [antlr-interest] AST optimizations

 
Hi
all,
 
I?m
trying to figure out what is the best way to do AST changes and optimizations. 
 
I
assume that for some (most?) optimisations a tree rewrite grammar will not be
powerful enough (e.g. for deciding on eager/lazy loading based on function
use). So what is the best way of making these types of changes (assume that the
changes can be significant) to an AST? I can think of a few options
 
1)
Use the ANTLR AST and add and remove nodes from it. (I?ve got no idea how
I?d create new nodes though as you need an IToken) 
2)
Build a custom AST from the ANTLR AST and make modifications to it. (This way I
can have different classes for each AST node)
 
I?m
leaning towards option two as I think that would give me the greatest flexibility
but I?d like to hear what others are doing. 
 
 
 
If
I do go with option two I can think of a few issues
1)
Can I still generate code using string template and an ANTLR tree grammar? (I
think I?ve read something about using tree adapters for this...)
2)
I?ll need to store the ITokens in my new AST so that I can do my own
error reporting.
 
 
Are
there any simple examples of this? I guess I could look at the BOO source (I?m
pretty sure they use option 2) but it would nice to have a simpler example to
start with.
 
 
Thanks
in advance.
 
 
Andre


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080626/a0e149c6/attachment.html 

From sumanto at gmail.com  Thu Jun 26 14:10:16 2008
From: sumanto at gmail.com (Sumanto Biswas)
Date: Thu, 26 Jun 2008 14:10:16 -0700
Subject: [antlr-interest] ETA on ANTLR 3.1?
Message-ID: <6c9aae640806261410n34eebc84i7f91c1256bdd4730@mail.gmail.com>

Hi,

>From http://www.antlr.org/wiki/display/ANTLR3/2008/05/20 I can see
that ANTLR 3.1 was expected in early June 2008.

We need to make a decision on whether to use 3.0.1 or 3.1, so I wanted
to know what is the ETA on the release ANTLR 3.1. I would prefer 3.1
if its on horizon because of many fixes, specially error reporting
fixes.

Regards,
Sumanto

From parrt at cs.usfca.edu  Thu Jun 26 15:06:32 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu, 26 Jun 2008 15:06:32 -0700
Subject: [antlr-interest] ETA on ANTLR 3.1?
In-Reply-To: <6c9aae640806261410n34eebc84i7f91c1256bdd4730@mail.gmail.com>
References: <6c9aae640806261410n34eebc84i7f91c1256bdd4730@mail.gmail.com>
Message-ID: <DA6C9C5E-6C62-4DA5-9AE1-C995AC075138@cs.usfca.edu>

Hi...Jim Idle needs to tweak C target and he's loaded with consulting  
at the moment...don't worry...i can't hold off much longer as I need  
to get back to my book...Jim said he can work on it soon.
Ter
On Jun 26, 2008, at 2:10 PM, Sumanto Biswas wrote:

> Hi,
>
>> From http://www.antlr.org/wiki/display/ANTLR3/2008/05/20 I can see
> that ANTLR 3.1 was expected in early June 2008.
>
> We need to make a decision on whether to use 3.0.1 or 3.1, so I wanted
> to know what is the ETA on the release ANTLR 3.1. I would prefer 3.1
> if its on horizon because of many fixes, specially error reporting
> fixes.
>
> Regards,
> Sumanto


From tvial at octo.com  Fri Jun 27 02:55:56 2008
From: tvial at octo.com (Thomas Vial)
Date: Fri, 27 Jun 2008 11:55:56 +0200
Subject: [antlr-interest] gUnit freezing when choking on invalid input
Message-ID: <475086500806270255l1617fcedscf19e3680cbc42ea@mail.gmail.com>

Hi all,


I am experiencing an annoying issue with gUnit freezing when parsing
of test input fails. Here is my test case, with ANTLR v3.0 and gUnit
1.0.1.

----------[Expr.g]----------------------
grammar Expr;

options {
	output=AST;
}

tokens {
	PROG;
}

@header {
package com.expr;
}

@lexer::header {
package com.expr;
}

program:
	(expr ';')*							-> ^(PROG expr*)
;

// The following rules are deliberately incorrect
// Should be expr1 ('+' expr1)* and expr2 ('*' expr2)*
// for a real expression parser :-)
expr:
	expr1 '+' expr1						-> ^('+' expr1 expr1)
;

expr1:
	expr2 '*' expr2						-> ^('*' expr2 expr2)
;

expr2:
	INTEGER								-> INTEGER
|	'(' expr ')'						-> expr
;


INTEGER:
	('0'..'9')+
;
-------------------------------------------


----------[Expr.testsuite]-----------
gunit Expr;

@header {
package com.expr;
}

expr:
	"1+2"				-> (+ 1 2)
-------------------------------------------


With this input, gUnit freezes indefinitely. When feeding the parser
directly, I get "line 0:-1 mismatched input '<EOF>' expecting '*'",
which is correct wrt the badly written grammar (see comments above
rules expr and expr1). However gUnit does not see the error and gets
stuck. I have noticed, by looking at the JUnit code that gUnit
generates with the -o option (the JUnit version of the test freezes,
too), that it internally uses threads to pass input to the parser and
retrieve its output. The issue might have something to do some thread
starving on a reader.

This is annoying when run from the command line: the whole test suite
freezes, so you have to execute the parser against every test by hand
to track the actual error. This also makes gUnit unusable in
continuous integration scenarii.

Another oddity is that gUnit behaves as expected, i.e. reporting the
error, when the AST construction is done inline:
-------------------------------------------
expr:
	expr1 '+'^ expr1
;

expr1:
	expr2 '*'^ expr2
;
-------------------------------------------

Shouldn't both construction methods be equivalent?




Any insights on these issues?

Thanks!

Thomas

From fat.bold.cyclop at gmail.com  Fri Jun 27 03:22:29 2008
From: fat.bold.cyclop at gmail.com (fat bold cyclop)
Date: Fri, 27 Jun 2008 12:22:29 +0200
Subject: [antlr-interest]  ab? b?a
Message-ID: <1ee982a50806270322o7f1b055dqae8f1f2d16f3acaf@mail.gmail.com>

I am working on grammar for Shogi (Japanese chess) game record. I am
not very experienced but I do my best ;-)

First of all, there are many points in the game record where
whitespace (WS) could occur. Because I wanted keep the grammar
human readable I chose to ignore WSs.

Secondly, I want the parser to distinguish between:
"ab a", "a ba" and "ab ba"

((In "real life" the game record will hava information about piece
rank (b). In Shogi a piece can be promoted
which is indicated by prefixing it's name with plus sign (a). So a
pawn's symbol is "P" and promoted pawn is "+P".
An unpromoted piece (under certain circumstances) after it's move can
pe promoted. Which is,
unfortunately for me, also indicated by '+'. A move in which a pawn
gets promoted is postfixed with '+'.
The game record can contain entry: "P4c+ +P1a". This means: first pawn
moves to 4c square and gets promoted.
The second pawn, a promoted pawn goes to 4c.))

So I have the following part in my grammar (simplified):
ab? b?a

Ignoring WS introduces nondeterminism. The parser can't distinguish
"ab a" from "a ba"
I know I could switch off ignoring WS but it forces me to put WS in
many places of my grammar,
making less readable.

Can I use any predicate to hint the parser the right choice?
For example for my ab? b?a: "if you find b and the next symbol is a
then you found ba ", or
"if you find b and the previous token was WS then it cannot belong to ab".

Or maybe there is a way of grouping/rearranging the grammar?

Any help is welcomed.

Best regards,
fbc



grammar problem;
tokens {DOT = '.'; PAWN_SYMBOL = 'P'; PROMOTION_SIGN = '+';}

// PARSER RULES ---------------------------------
move 	 : DOT moveData moveData;	
moveData : pieceRank PROMOTION_SIGN?;
pieceRank  : PROMOTION_SIGN? PAWN_SYMBOL;

// LEXER RULES ---------------------------------
WHITESPACE  : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+  { $channel = HIDDEN; } ;

From tvial at octo.com  Fri Jun 27 03:30:02 2008
From: tvial at octo.com (Thomas Vial)
Date: Fri, 27 Jun 2008 12:30:02 +0200
Subject: [antlr-interest] ab? b?a
In-Reply-To: <1ee982a50806270322o7f1b055dqae8f1f2d16f3acaf@mail.gmail.com>
References: <1ee982a50806270322o7f1b055dqae8f1f2d16f3acaf@mail.gmail.com>
Message-ID: <475086500806270330j61f9eae3ja591f7f2aac7e254@mail.gmail.com>

Hi,

Try without the "$channel = HIDDEN" (thus leaving the lexer rule
alone), and using it explicitely in your parser rules.
I don't know anything about Shogi, but I think your WS acts just like
a ';' separator in C or Java. Maybe a top-level rule:

moves: move (WHITESPACE* move)*;

The WS makes sense separating move no. 1 from move no. 2, and may be
ignored in the parser actions.

Thomas



On Fri, Jun 27, 2008 at 12:22 PM, fat bold cyclop
<fat.bold.cyclop at gmail.com> wrote:
> I am working on grammar for Shogi (Japanese chess) game record. I am
> not very experienced but I do my best ;-)
>
> First of all, there are many points in the game record where
> whitespace (WS) could occur. Because I wanted keep the grammar
> human readable I chose to ignore WSs.
>
> Secondly, I want the parser to distinguish between:
> "ab a", "a ba" and "ab ba"
>
> ((In "real life" the game record will hava information about piece
> rank (b). In Shogi a piece can be promoted
> which is indicated by prefixing it's name with plus sign (a). So a
> pawn's symbol is "P" and promoted pawn is "+P".
> An unpromoted piece (under certain circumstances) after it's move can
> pe promoted. Which is,
> unfortunately for me, also indicated by '+'. A move in which a pawn
> gets promoted is postfixed with '+'.
> The game record can contain entry: "P4c+ +P1a". This means: first pawn
> moves to 4c square and gets promoted.
> The second pawn, a promoted pawn goes to 4c.))
>
> So I have the following part in my grammar (simplified):
> ab? b?a
>
> Ignoring WS introduces nondeterminism. The parser can't distinguish
> "ab a" from "a ba"
> I know I could switch off ignoring WS but it forces me to put WS in
> many places of my grammar,
> making less readable.
>
> Can I use any predicate to hint the parser the right choice?
> For example for my ab? b?a: "if you find b and the next symbol is a
> then you found ba ", or
> "if you find b and the previous token was WS then it cannot belong to ab".
>
> Or maybe there is a way of grouping/rearranging the grammar?
>
> Any help is welcomed.
>
> Best regards,
> fbc
>
>
>
> grammar problem;
> tokens {DOT = '.'; PAWN_SYMBOL = 'P'; PROMOTION_SIGN = '+';}
>
> // PARSER RULES ---------------------------------
> move     : DOT moveData moveData;
> moveData : pieceRank PROMOTION_SIGN?;
> pieceRank  : PROMOTION_SIGN? PAWN_SYMBOL;
>
> // LEXER RULES ---------------------------------
> WHITESPACE  : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+  { $channel = HIDDEN; } ;
>



-- 
..........................................................
Thomas VIAL
OCTO Technology
..........................................................
50, Avenue des Champs-Elys?es
75008 Paris
T?l : (33) 1 58 56 10 00
Fax : (33) 1 58 56 10 01
GSM : (33) 6 28 50 07 64
Web : http://www.octo.com/
..........................................................

From fat.bold.cyclop at gmail.com  Fri Jun 27 05:43:36 2008
From: fat.bold.cyclop at gmail.com (fat bold cyclop)
Date: Fri, 27 Jun 2008 14:43:36 +0200
Subject: [antlr-interest] ab? b?a
In-Reply-To: <475086500806270330j61f9eae3ja591f7f2aac7e254@mail.gmail.com>
References: <1ee982a50806270322o7f1b055dqae8f1f2d16f3acaf@mail.gmail.com>
	<475086500806270330j61f9eae3ja591f7f2aac7e254@mail.gmail.com>
Message-ID: <1ee982a50806270543r41fbdb3cr740593030faf9fdc@mail.gmail.com>

Thanks for the answer.
> The WS makes sense separating move no. 1 from move no. 2, and may be
> ignored in the parser actions.
I could switch off ignoring WS but it forces me to put WS in many
places of my grammar, making less readable. That's because there are
lots of places I shoud also put WS in my grammar.
Besides I'd love to learn new tricks, if there are any for this situation.

Of course, if I find nothing else, I'll go for your solution.

Regards,
fbc

From gevik at xs4all.nl  Fri Jun 27 06:15:38 2008
From: gevik at xs4all.nl (Gevik Babakhani)
Date: Fri, 27 Jun 2008 15:15:38 +0200
Subject: [antlr-interest] C target examples fail
Message-ID: <000601c8d857$e4afcce0$ae0f66a0$@nl>

I am trying to compile the C/C++ examples in Visual Studio 2008. The
compilation fails with many errors.

What am I doing wrong here?

 

c:\antlr\runtime\c\include\antlr3cyclicdfa.h(37) : warning C4510:
'ANTLR3_CYCLIC_DFA_struct' : default constructor could not be generated

        c:\antlr\runtime\c\include\antlr3cyclicdfa.h(13) : see declaration
of 'ANTLR3_CYCLIC_DFA_struct'

c:\antlr\runtime\c\include\antlr3cyclicdfa.h(37) : warning C4512:
'ANTLR3_CYCLIC_DFA_struct' : assignment operator could not be generated

        c:\antlr\runtime\c\include\antlr3cyclicdfa.h(13) : see declaration
of 'ANTLR3_CYCLIC_DFA_struct'

c:\antlr\runtime\c\include\antlr3cyclicdfa.h(37) : warning C4610: struct
'ANTLR3_CYCLIC_DFA_struct' can never be instantiated - user defined
constructor required

c:\antlr\examples-v3\c\c\main.c(150) : error C3861: 'TOKENSOURCE':
identifier not found

CParser.c

c:\antlr\runtime\c\include\antlr3cyclicdfa.h(37) : warning C4510:
'ANTLR3_CYCLIC_DFA_struct' : default constructor could not be generated

        c:\antlr\runtime\c\include\antlr3cyclicdfa.h(13) : see declaration
of 'ANTLR3_CYCLIC_DFA_struct'

c:\antlr\runtime\c\include\antlr3cyclicdfa.h(37) : warning C4512:
'ANTLR3_CYCLIC_DFA_struct' : assignment operator could not be generated

        c:\antlr\runtime\c\include\antlr3cyclicdfa.h(13) : see declaration
of 'ANTLR3_CYCLIC_DFA_struct'

c:\antlr\runtime\c\include\antlr3cyclicdfa.h(37) : warning C4610: struct
'ANTLR3_CYCLIC_DFA_struct' can never be instantiated - user defined
constructor required

c:\antlr\examples-v3\c\c\cparser.c(2317) : error C2440: '=' : cannot convert
from 'void *' to 'pCParser_Symbols_SCOPE'

        Conversion from 'void*' to pointer to non-'void' requires an
explicit cast

c:\antlr\examples-v3\c\c\cparser.c(2334) : error C2440: '=' : cannot convert
from 'void *' to 'pCParser_Symbols_SCOPE'

        Conversion from 'void*' to pointer to non-'void' requires an
explicit cast

c:\antlr\examples-v3\c\c\cparser.c(2361) : error C2440: '=' : cannot convert
from 'void *' to 'pCParser_Symbols_SCOPE'

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080627/54182804/attachment.html 

From Waverly.Edwards at genesys.com  Fri Jun 27 11:13:01 2008
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Fri, 27 Jun 2008 14:13:01 -0400
Subject: [antlr-interest] empty right hand side
Message-ID: <FF993752CB890B4EB591BE5450C37BF1012D78C7@navamane001.ad.internal.corp>


What would and empty right hand side look like in an ANTLR grammar?

While I've been desperately attempting to stand on my own two feet and
be able to determine a first and follow set from a grammar, I've read
and
have been told that determining these sets only become difficult when 
you have an empty production.  What would that look like?  It may sound
a bit silly but at no time have I ever seen an empty right-hand sides 
(conventionally written using the Greek letter epsilon) in an ANTLR
grammar.


Thank you very much for your time,


W.  

(if you see this message twice, I apologize.)

From parrt at cs.usfca.edu  Fri Jun 27 11:32:38 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri, 27 Jun 2008 11:32:38 -0700
Subject: [antlr-interest] empty right hand side
In-Reply-To: <FF993752CB890B4EB591BE5450C37BF1012D78C7@navamane001.ad.internal.corp>
References: <FF993752CB890B4EB591BE5450C37BF1012D78C7@navamane001.ad.internal.corp>
Message-ID: <D75C6DDA-1989-4CD0-8F0C-52DB952BD0AC@cs.usfca.edu>

x? is same as (x|).  As a rule, you see:

r : x
   |
   ;

Use nothing to represent "nothing" :)
Ter
On Jun 27, 2008, at 11:13 AM, Edwards, Waverly wrote:

>
> What would and empty right hand side look like in an ANTLR grammar?
>
> While I've been desperately attempting to stand on my own two feet and
> be able to determine a first and follow set from a grammar, I've read
> and
> have been told that determining these sets only become difficult when
> you have an empty production.  What would that look like?  It may  
> sound
> a bit silly but at no time have I ever seen an empty right-hand sides
> (conventionally written using the Greek letter epsilon) in an ANTLR
> grammar.
>
>
> Thank you very much for your time,
>
>
> W.
>
> (if you see this message twice, I apologize.)


From leon.antlr at mac.com  Fri Jun 27 11:39:15 2008
From: leon.antlr at mac.com (Leon Su)
Date: Fri, 27 Jun 2008 11:39:15 -0700
Subject: [antlr-interest] gUnit freezing when choking on invalid input
In-Reply-To: <475086500806270255l1617fcedscf19e3680cbc42ea@mail.gmail.com>
References: <475086500806270255l1617fcedscf19e3680cbc42ea@mail.gmail.com>
Message-ID: <6B480DD8-8DB8-496E-865F-773D1535DA90@mac.com>

Hi Thomas,

I ran the same test with ANTLR 3.1b + gUnit 1.0.2, and it works well  
without freezing issue.
That could be a potential bug on the old version(1.0.1) of gUnit.  
I'll take a look on it later today.
Thanks for the report.

Leon

On Jun 27, 2008, at 2:55 AM, Thomas Vial wrote:

> Hi all,
>
>
> I am experiencing an annoying issue with gUnit freezing when parsing
> of test input fails. Here is my test case, with ANTLR v3.0 and gUnit
> 1.0.1.
>
> ----------[Expr.g]----------------------
> grammar Expr;
>
> options {
> 	output=AST;
> }
>
> tokens {
> 	PROG;
> }
>
> @header {
> package com.expr;
> }
>
> @lexer::header {
> package com.expr;
> }
>
> program:
> 	(expr ';')*							-> ^(PROG expr*)
> ;
>
> // The following rules are deliberately incorrect
> // Should be expr1 ('+' expr1)* and expr2 ('*' expr2)*
> // for a real expression parser :-)
> expr:
> 	expr1 '+' expr1						-> ^('+' expr1 expr1)
> ;
>
> expr1:
> 	expr2 '*' expr2						-> ^('*' expr2 expr2)
> ;
>
> expr2:
> 	INTEGER								-> INTEGER
> |	'(' expr ')'						-> expr
> ;
>
>
> INTEGER:
> 	('0'..'9')+
> ;
> -------------------------------------------
>
>
> ----------[Expr.testsuite]-----------
> gunit Expr;
>
> @header {
> package com.expr;
> }
>
> expr:
> 	"1+2"				-> (+ 1 2)
> -------------------------------------------
>
>
> With this input, gUnit freezes indefinitely. When feeding the parser
> directly, I get "line 0:-1 mismatched input '<EOF>' expecting '*'",
> which is correct wrt the badly written grammar (see comments above
> rules expr and expr1). However gUnit does not see the error and gets
> stuck. I have noticed, by looking at the JUnit code that gUnit
> generates with the -o option (the JUnit version of the test freezes,
> too), that it internally uses threads to pass input to the parser and
> retrieve its output. The issue might have something to do some thread
> starving on a reader.
>
> This is annoying when run from the command line: the whole test suite
> freezes, so you have to execute the parser against every test by hand
> to track the actual error. This also makes gUnit unusable in
> continuous integration scenarii.
>
> Another oddity is that gUnit behaves as expected, i.e. reporting the
> error, when the AST construction is done inline:
> -------------------------------------------
> expr:
> 	expr1 '+'^ expr1
> ;
>
> expr1:
> 	expr2 '*'^ expr2
> ;
> -------------------------------------------
>
> Shouldn't both construction methods be equivalent?
>
>
>
>
> Any insights on these issues?
>
> Thanks!
>
> Thomas


From Waverly.Edwards at genesys.com  Fri Jun 27 11:49:51 2008
From: Waverly.Edwards at genesys.com (Edwards, Waverly)
Date: Fri, 27 Jun 2008 14:49:51 -0400
Subject: [antlr-interest] empty right hand side
In-Reply-To: <D75C6DDA-1989-4CD0-8F0C-52DB952BD0AC@cs.usfca.edu>
References: <FF993752CB890B4EB591BE5450C37BF1012D78C7@navamane001.ad.internal.corp>
	<D75C6DDA-1989-4CD0-8F0C-52DB952BD0AC@cs.usfca.edu>
Message-ID: <FF993752CB890B4EB591BE5450C37BF1012D78D5@navamane001.ad.internal.corp>


Aaaaah, I understand.


Thank you,


W. 

-----Original Message-----
From: antlr-interest-bounces at antlr.org
[mailto:antlr-interest-bounces at antlr.org] On Behalf Of Terence Parr
Sent: Friday, June 27, 2008 2:33 PM
To: antlr-interest Interest
Subject: Re: [antlr-interest] empty right hand side

x? is same as (x|).  As a rule, you see:

r : x
   |
   ;

Use nothing to represent "nothing" :)
Ter
On Jun 27, 2008, at 11:13 AM, Edwards, Waverly wrote:

>
> What would and empty right hand side look like in an ANTLR grammar?
>
> While I've been desperately attempting to stand on my own two feet and

> be able to determine a first and follow set from a grammar, I've read 
> and have been told that determining these sets only become difficult 
> when you have an empty production.  What would that look like?  It may

> sound a bit silly but at no time have I ever seen an empty right-hand 
> sides (conventionally written using the Greek letter epsilon) in an 
> ANTLR grammar.
>
>
> Thank you very much for your time,
>
>
> W.
>
> (if you see this message twice, I apologize.)


From nelson.ana at gmail.com  Fri Jun 27 15:42:28 2008
From: nelson.ana at gmail.com (Ana Nelson)
Date: Fri, 27 Jun 2008 23:42:28 +0100
Subject: [antlr-interest] grammar to latex
In-Reply-To: <a7d6d2740806040720m48347cbavbb5254ccf9f6ec8b@mail.gmail.com>
References: <48412784.70906@web.de>
	<a7d6d2740805310557n298cb964ta788986d59366bbd@mail.gmail.com>
	<a7d6d2740805311413s68c97cddsd729278d952296ed@mail.gmail.com>
	<4841D15A.4060405@web.de>
	<a7d6d2740806010329w2404a173kaabbf85b939f1aa3@mail.gmail.com>
	<a7d6d2740806031626x41bd7c76q454ab5958b813482@mail.gmail.com>
	<20080604104656.94570@gmx.net>
	<a7d6d2740806040720m48347cbavbb5254ccf9f6ec8b@mail.gmail.com>
Message-ID: <a7d6d2740806271542p6c1fc7c4mbd49183df29ef016@mail.gmail.com>

Okay, I think I've worked out the last few kinks in the pygments
grammar. Examples are (temporarily) here:

http://ananelson.com/tmp/antlr-actionscript/
http://ananelson.com/tmp/antlr-c/
http://ananelson.com/tmp/antlr-csharp/
http://ananelson.com/tmp/antlr-java/
http://ananelson.com/tmp/antlr-python/

If you have any valid ANTLR v3 grammars that you think might be useful
test grammars, especially ones with a different target language,
please send them on to me, or if you prefer you can run pygments
yourself. My grammar is here with basic installation instructions:
http://pastie.org/223723

I did decide to just limit the grammar to ANTLR v3 for simplicity's
sake. Sorry if this puts anyone out but if anyone else wants to add v2
support it shouldn't be that hard, I won't get to it anytime soon
though.

While I was working on this, I came across a Ruby syntax highlighter
called Ultraviolet which, by virtue of the fact that it uses TextMate
bundles, also has ANTLR support:
http://ultraviolet.rubyforge.org/

I haven't used Ultraviolet so I can't give any useful comparisons.


A few of the C Sharp grammars do have 1 error in them, in lines such as this:

@header {
    #pragma warning disable 0219
}

The # before pragma is showing up as an error. Maybe someone can tell
me, is that valid C sharp? If so then I think the C Sharp grammar
might need a tweak.




2008/6/4 Ana Nelson <nelson.ana at gmail.com>:
> The red boxes are where the grammar detects an error in syntax. (As I said,
> the grammar isn't quite finished yet, so those should go away, at least for
> valid ANTLR files.)
>
> Regarding automatic linebreaks, I don't think it's currently supported in
> pygments, but it should be possible to implement. I know for java code it's
> almost a necessity, I've done it by hand before and it's no fun.
>
>
>
> 2008/6/4 Johannes Luber <JALuber at gmx.de>:
>>
>> > Okay, for anyone who is interested in colour and/or font syntax
>> > highlighting
>> > of ANTLR grammars, say if you happen to be writing a book featuring
>> > loads
>> > of
>> > ANTLR code snippets or something, examples are here (in no particular
>> > order):
>> >
>> > (temporary URLs)
>> > http://dev.agent.ie/antlr-python-example.pdf
>> > http://dev.agent.ie/antlr-java-example.pdf
>> > http://dev.agent.ie/antlr-ruby-example.pdf
>> >
>> > Adding new target languages takes about 30 seconds. Pygments is just
>> > brilliant. :-)
>> >
>> > The grammar's not quite finished yet, and I probably won't get back to
>> > it
>> > for a week or two, but it's close enough to get the idea.
>> >
>> > I did a quick hack just now to see if I could get typewriter, roman and
>> > sans
>> > serif fonts in latex, and it worked. :-) (That's why those PDFs have
>> > horrible unaligned code.) So, Felix, I think this might work for you.
>> >
>> > If anyone needs this urgently feel free to contact me off-list,
>> > otherwise
>> > I'll post here when the code is suitable for human consumption.
>> >
>> > -Ana
>>
>> Looking through the files I noticed two problems, all in the Java example.
>> The first is that the labels a1 and a2 aren't formatted correctly. The
>> numbers are red-boxed. Also I haven't figured quite out what the red boxes
>> should show actually. The second problem is that overly long lines don't
>> receive automatic linebreaks. So some text is practically invisible. Can
>> that be helped?
>>
>> Johannes
>> >
>> >
>> >
>> > 2008/6/1 Ana Nelson <nelson.ana at gmail.com>:
>> >
>> > > Hi, Felix,
>> > >
>> > > Don't worry, this wasn't your fault. :-) These things are just
>> > addictive.
>> > > And, when I read your email I wasn't sure if this was exactly what
>> > > were
>> > > looking for so I just did this out of curiosity.
>> > >
>> > > If you want syntax highlighting using fonts rather than colours, this
>> > > should be possible to implement in Pygments but it's not supported at
>> > the
>> > > moment, just bold/italic etc. are. I think it'd just be a case of
>> > writing a
>> > > custom latex formatter which emitted e.g. \textrm rather than
>> > > \colorbox.
>> > >
>> > > It would probably be useful to have this option for people needing to
>> > > publish in black and white. I might take a quick look, but I don't
>> > > know
>> > if
>> > > I'll have time to do this myself.
>> > >
>> > > Anyway, if you think you want to use this you might try installing
>> > > Pygments, preferably the development version, and see how you get on
>> > with
>> > > it.
>> > >
>> > > You could alternatively search for a syntax highlighter with font
>> > support
>> > > already (I don't know if there is one or not) and write a grammar for
>> > that.
>> > > Or, if you are just looking for very basic decorations, maybe an
>> > existing
>> > > grammar would be close enough. (I used to use highlight
>> > > http://www.andre-simon.de/ and it worked fine, but I never tried
>> > modifying
>> > > a grammar.)
>> > >
>> > > -Ana
>> > >
>> > >
>> > > 2008/5/31 Felix Dorner <felix_do at web.de>:
>> > >
>> > >> Hei Ana,
>> > >>
>> > >> gee, I hope I didn't keep you from socializing this weekend... The
>> > example
>> > >> looks cool. I don' t know pygments, what I really would like is not
>> > syntax
>> > >> coloring, but fontification, such that terminals (Strings in ' '
>> > >> would
>> > get
>> > >> typewriter font, braces and other ebnf specials roman, and all other
>> > stuff
>> > >> (rules and subrules) italic. Would this be easy too?
>> > >>
>> > >> Felix
>> > >>
>> > >
>> > >
>>
>> --
>> Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
>> Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger
>
>

From jimi at temporal-wave.com  Fri Jun 27 17:26:22 2008
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri, 27 Jun 2008 17:26:22 -0700
Subject: [antlr-interest] grammar to latex
Message-ID: <1214612782.25089.48.camel@jimi>

?On Fri, 2008-06-27 at 23:42 +0100, Ana Nelson wrote: 

> Okay, I think I've worked out the last few kinks in the pygments
> grammar. Examples are (temporarily) here:
> 



> 
> A few of the C Sharp grammars do have 1 error in them, in lines such as this:
> 
> @header {
>     #pragma warning disable 0219
> }
> 
> The # before pragma is showing up as an error. Maybe someone can tell
> me, is that valid C sharp? 


It is, but strictly speaking the # should be at column position zero. If
you use VS 2008 you will find that it auto moves the # to the first
column. 

If you are interested in C#, then you can view my online C# parser at
www.temporal-wave.com where there is a nice example of an AST for C#
too. Go on, you know you guys want to!!! ;-)

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080627/dcca40cd/attachment.html 

From lgcraymer at yahoo.com  Fri Jun 27 17:49:22 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Fri, 27 Jun 2008 17:49:22 -0700 (PDT)
Subject: [antlr-interest] Showcase your apps!  (was:  grammar to latex)
In-Reply-To: <1214612782.25089.48.camel@jimi>
Message-ID: <992357.67094.qm@web55902.mail.re3.yahoo.com>

Jim--

You should add a pointer to the "showcase" section on antlr.org for your C# parser (and other stuff)--that's what the "showcase" is for.  And Ter should probably have an ANTLR 3 showcase page that has a pointer to the ANTLR 2 page instead of lumping everything together.

BTW, for others with commercial apps that use ANTLR:  shouldn't you showcase your apps as well?  It's free advertising, and Ter gets to take some well-deserved credit for how ANTLR is used.

--Loring


--- On Fri, 6/27/08, Jim Idle <jimi at temporal-wave.com> wrote:

> From: Jim Idle <jimi at temporal-wave.com>
> Subject: Re: [antlr-interest] grammar to latex
> To: "antlr-interest" <antlr-interest at antlr.org>
> Date: Friday, June 27, 2008, 5:26 PM
> ?On Fri, 2008-06-27 at 23:42 +0100, Ana Nelson wrote: 
> 
> > Okay, I think I've worked out the last few kinks
> in the pygments
> > grammar. Examples are (temporarily) here:
> > 
> 
> 
> 
> > 
> > A few of the C Sharp grammars do have 1 error in them,
> in lines such as this:
> > 
> > @header {
> >     #pragma warning disable 0219
> > }
> > 
> > The # before pragma is showing up as an error. Maybe
> someone can tell
> > me, is that valid C sharp? 
> 
> 
> It is, but strictly speaking the # should be at column
> position zero. If
> you use VS 2008 you will find that it auto moves the # to
> the first
> column. 
> 
> If you are interested in C#, then you can view my online C#
> parser at
> www.temporal-wave.com where there is a nice example of an
> AST for C#
> too. Go on, you know you guys want to!!! ;-)
> 
> Jim


      


From sumanto at gmail.com  Fri Jun 27 17:50:45 2008
From: sumanto at gmail.com (Sumanto Biswas)
Date: Fri, 27 Jun 2008 17:50:45 -0700
Subject: [antlr-interest] Exception while trying to generate Java classes
	for lexer
Message-ID: <6c9aae640806271750q2bab1114ga1d155c29cf916a0@mail.gmail.com>

Hi,

I have a parser-lexer combination. I used to have it together, but
separated them so that I could have better control over options and
also for better readability.

When the lexer was part of parser, it generated fine. However, I took
the lexer out of the parser, and tried to generate them separately,
the parser just generated the parser.java file. When I tried to
generate from lexer, I got the exception stack trace pasted below.

The lexer is pasted below the stack trace and also attached.

Thanks in advance,
Sumanto

================================================================
ANTLR Parser Generator  Version 3.1b1 (May 20, 2008)  1989-2008
error(100): soslLexerRules.g:0:0: syntax error: buildnfa: <AST>:0:0:
unexpected AST node: synpred133_soslLexerRules
error(100): soslLexerRules.g:0:0: syntax error: buildnfa:
<AST>:184:10: expecting EOA, found '..'
error(100): soslLexerRules.g:0:0: syntax error: buildnfa: <AST>:
expecting EOA, found '<empty tree>'
error(10):  internal error: soslLexerRules.g : java.lang.NullPointerException
org.antlr.tool.NFAFactory.build_Astar(NFAFactory.java:570)
org.antlr.tool.TreeToNFAConverter.ebnf(TreeToNFAConverter.java:1937)
org.antlr.tool.TreeToNFAConverter.element(TreeToNFAConverter.java:1261)
org.antlr.tool.TreeToNFAConverter.alternative(TreeToNFAConverter.java:1008)
org.antlr.tool.TreeToNFAConverter.block(TreeToNFAConverter.java:803)
org.antlr.tool.TreeToNFAConverter.ebnf(TreeToNFAConverter.java:1989)
org.antlr.tool.TreeToNFAConverter.element(TreeToNFAConverter.java:1261)
org.antlr.tool.TreeToNFAConverter.alternative(TreeToNFAConverter.java:1008)
org.antlr.tool.TreeToNFAConverter.block(TreeToNFAConverter.java:803)
org.antlr.tool.TreeToNFAConverter.rule(TreeToNFAConverter.java:586)
org.antlr.tool.TreeToNFAConverter.rules(TreeToNFAConverter.java:412)
org.antlr.tool.TreeToNFAConverter.grammarSpec(TreeToNFAConverter.java:366)
org.antlr.tool.TreeToNFAConverter.grammar(TreeToNFAConverter.java:159)
org.antlr.tool.Grammar.buildNFA(Grammar.java:858)
org.antlr.tool.CompositeGrammar.createNFAs(CompositeGrammar.java:362)
org.antlr.Tool.process(Tool.java:284)
org.antlr.Tool.main(Tool.java:71)
================================================================

================================================================
lexer grammar soslLexerRules;


options {
	backtrack=true;
	memoize=true;
	filter=true;
	// k=2;
	// charVocabulary='\u0000'..'\uFFFE';  // support full unicode
}

@header {
import java.util.HashMap;
}


@members {
    private boolean _scanningQuery = false;

    public boolean isScanningQuery() {
        return _scanningQuery;
    }

    public void setScanningQuery(boolean scanningQuery) {
        _scanningQuery = scanningQuery;
    }

}




EQUAL 			: '=' ;
NOT_EQUAL 		: '!=' ;
LESS_THAN 		: '<' ;
LESS_THAN_OR_EQUAL 	: '<=' ;
GREATER_THAN 		: '>' ;
GREATER_THAN_OR_EQUAL 	: '>=' ;
LPAREN 			: '(' ;
RPAREN 			: ')' ;
COLON   		: ':' ;
COMMA 			: ',' ;


LITERAL : { isScanningQuery() }? '"'
    (SEARCH_CHAR
        | ' '
        | '\t'
        | '\n'
        | '\r')*
     '"'
   ;

SEARCH_TERM : { isScanningQuery() }? SEARCH_CHAR2 ( SEARCH_CHAR )*
    ;

LCURLY  : '{' { setScanningQuery(true); }
    ;

RCURLY  : '}' { setScanningQuery(false); }
    ;

// ----------------------------------------------------
// Following are parser tokens
// ----------------------------------------------------
FIND 		: 	{ !isScanningQuery() }? ('f'|'F') ('i'|'I') ('n'|'N') ('d'|'D') ;
LIMIT 		 : 	{ !isScanningQuery() }? ('l'|'L') ('i'|'I') ('m'|'M')
('i'|'I') ('t'|'T') ;
IN 		 : 	{ !isScanningQuery() }? ('i'|'I') ('n'|'N') ;
CONVERTCURRENCY	 :	{ !isScanningQuery() }? 'convertCurrency' ;
AMOUNT 		 : 	{ !isScanningQuery() }? 'Amount' ;
TOLABEL 	 : 	{ !isScanningQuery() }? 'toLabel' ;
ALL		 :	{ !isScanningQuery() }? 'ALL' ;
FIELDS		 :	{ !isScanningQuery() }? 'FIELDS' ;
NAME		 :	{ !isScanningQuery() }? 'NAME' ;
EMAIL		 :	{ !isScanningQuery() }? 'EMAIL' ;
PHONE		 :	{ !isScanningQuery() }? 'PHONE' ;
RETURNING	 : 	{ !isScanningQuery() }? ('r'|'R') ('e'|'E') ('t'|'T')
('u'|'U') ('r'|'R') ('n'|'N') ('i'|'I') ('n'|'N') ('g'|'G') ;
ORDER		 :	{ !isScanningQuery() }? ('o'|'O') ('r'|'R') ('d'|'D')
('e'|'E') ('r'|'R') ;
BY		 :	{ !isScanningQuery() }? ('b'|'B') ('y'|'Y') ;
ASC		 :	{ !isScanningQuery() }? 'ASC' ;
DESC		 :	{ !isScanningQuery() }? 'DESC' ;
NULLS		 :	{ !isScanningQuery() }? 'NULLS' ;
FIRST		 :	{ !isScanningQuery() }? ('f'|'F') ('i'|'I') ('r'|'R')
('s'|'S') ('t'|'T') ;
LAST		 :	{ !isScanningQuery() }? ('l'|'L') ('a'|'A') ('s'|'S') ('t'|'T') ;
WITH		 :	{ !isScanningQuery() }? ('w'|'W') ('i'|'I') ('t'|'T') ('h'|'H') ;
DIVISION	 :	{ !isScanningQuery() }? ('d'|'D') ('i'|'I') ('v'|'V')
('i'|'I') ('s'|'S') ('i'|'I') ('o'|'O') ('n'|'N') ;
AND_SCAN	 :	{ isScanningQuery() }?  ('a'|'A') ('n'|'N') ('d'|'D') ;
OR_SCAN 	 :	{ isScanningQuery() }?  ('o'|'O') ('r'|'R') ;
NOT_SCAN	 :	{ isScanningQuery() }?  ('n'|'N') ('o'|'O') ('t'|'T') ;
AND		 :	{ !isScanningQuery() }? ('a'|'A') ('n'|'N') ('d'|'D') ;
OR 		 :	{ !isScanningQuery() }? ('o'|'O') ('r'|'R') ;
NOT		 :	{ !isScanningQuery() }? ('n'|'N') ('o'|'O') ('t'|'T') ;
WHERE		 :	{ !isScanningQuery() }? ('w'|'W') ('h'|'H') ('e'|'E')
('r'|'R') ('e'|'E') ;
LIKE		 :	{ !isScanningQuery() }? ('l'|'L') ('i'|'I') ('k'|'K') ('e'|'E') ;
NULL		 :	{ !isScanningQuery() }? ('n'|'N') ('u'|'U') ('l'|'L') ('l'|'L') ;
TRUE		 :	{ !isScanningQuery() }? ('t'|'T') ('r'|'R') ('u'|'U') ('e'|'E') ;
FALSE		 :	{ !isScanningQuery() }? ('f'|'F') ('a'|'A') ('l'|'L')
('s'|'S') ('e'|'E') ;
INCLUDES	 :	{ !isScanningQuery() }? ('i'|'I') ('n'|'N') ('c'|'C')
('l'|'L') ('u'|'U') ('d'|'D') ('e'|'E') ('s'|'S') ;
EXCLUDES	 :	{ !isScanningQuery() }? ('e'|'E') ('x'|'X') ('c'|'C')
('l'|'L') ('u'|'U') ('d'|'D') ('e'|'E') ('s'|'S') ;
YESTERDAY	 :	{ !isScanningQuery() }? 'YESTERDAY' ;
TODAY 		 :	{ !isScanningQuery() }? 'TODAY' ;
TOMORROW 	 :	{ !isScanningQuery() }? 'TOMORROW' ;
LAST_WEEK 	 :	{ !isScanningQuery() }? 'LAST_WEEK' ;
THIS_WEEK 	 :	{ !isScanningQuery() }? 'THIS_WEEK' ;
NEXT_WEEK 	 :	{ !isScanningQuery() }? 'NEXT_WEEK' ;
LAST_MONTH 	 :	{ !isScanningQuery() }? 'LAST_MONTH' ;
THIS_MONTH 	 :	{ !isScanningQuery() }? 'THIS_MONTH' ;
NEXT_MONTH 	 :	{ !isScanningQuery() }? 'NEXT_MONTH' ;
LAST_90_DAYS 	 :	{ !isScanningQuery() }? 'LAST_90_DAYS' ;
NEXT_90_DAYS 	 :	{ !isScanningQuery() }? 'NEXT_90_DAYS' ;
LAST_N_DAYS 	 :	{ !isScanningQuery() }? 'LAST_N_DAYS' ;
NEXT_N_DAYS 	 :	{ !isScanningQuery() }? 'NEXT_N_DAYS' ;
THIS_QUARTER 	 :	{ !isScanningQuery() }? 'THIS_QUARTER' ;
LAST_QUARTER 	 :	{ !isScanningQuery() }? 'LAST_QUARTER' ;
NEXT_QUARTER 	 :	{ !isScanningQuery() }? 'NEXT_QUARTER' ;
THIS_YEAR 	 :	{ !isScanningQuery() }? 'THIS_YEAR' ;
LAST_YEAR 	 :	{ !isScanningQuery() }? 'LAST_YEAR' ;
NEXT_YEAR 	 :	{ !isScanningQuery() }? 'NEXT_YEAR' ;
NEXT_N_YEARS 	 :	{ !isScanningQuery() }? 'NEXT_N_YEARS' ;
LAST_N_YEARS 	 :	{ !isScanningQuery() }? 'LAST_N_YEARS' ;
THIS_FISCAL_QUARTER 	 :	{ !isScanningQuery() }? 'THIS_FISCAL_QUARTER' ;
LAST_FISCAL_QUARTER 	 :	{ !isScanningQuery() }? 'LAST_FISCAL_QUARTER' ;
NEXT_FISCAL_QUARTER 	 :	{ !isScanningQuery() }? 'NEXT_FISCAL_QUARTER' ;
NEXT_N_QUARTERS 	 :	{ !isScanningQuery() }? 'NEXT_N_QUARTERS' ;
LAST_N_QUARTERS 	 :	{ !isScanningQuery() }? 'LAST_N_QUARTERS' ;
THIS_FISCAL_YEAR 	 :	{ !isScanningQuery() }? 'THIS_FISCAL_YEAR' ;
LAST_FISCAL_YEAR 	 :	{ !isScanningQuery() }? 'LAST_FISCAL_YEAR' ;
NEXT_FISCAL_YEAR 	 :	{ !isScanningQuery() }? 'NEXT_FISCAL_YEAR' ;
NEXT_N_FISCAL_YEARS 	 :	{ !isScanningQuery() }? 'NEXT_N_FISCAL_YEARS' ;
LAST_N_FISCAL_YEARS 	 :	{ !isScanningQuery() }? 'LAST_N_FISCAL_YEARS' ;
NEXT_N_FISCAL_QUARTERS	 :	{ !isScanningQuery() }? 'NEXT_N_FISCAL_QUARTERS' ;
LAST_N_FISCAL_QUARTERS 	 :	{ !isScanningQuery() }? 'LAST_N_FISCAL_QUARTERS' ;
// ----------------------------------------------------
// ----------------------------------------------------

WS	 :	(' '
	|	'\t'
	|	'\n'
	|	'\r')
		{ skip();   }
	;
	


ID     : { !isScanningQuery() }? ( LETTER (LETTER | '_' | DIGIT)*);

PARAM  : { isScanningQuery() }? '$' LETTER (LETTER | '_' | DIGIT)*;

NUMBER  : { !isScanningQuery() }? DIGIT+ ;


QUOTE_DATA  : '\'' ( SEARCH_CHAR )+ '\'' ;


fragment
DATETIME : DATE ('t'|'T') HOUR ':' MINUTE ':' SECOND (('z'|'Z') |
(('+' |'-') HOUR ':' MINUTE))
    ;

fragment
DATE : ( DIGIT DIGIT DIGIT DIGIT ) '-' ( '0' '1'..'9' | '1' ('0' | '1'
| '2') ) '-'  ( '0' '1'..'9' | '1'..'2' DIGIT | '3' ('0' | '1') )
    ;

fragment
HOUR : '0'..'1' DIGIT | '2' '0'..'3'
    ;

fragment
MINUTE : '0'..'5' DIGIT
    ;

fragment
SECOND : '0'..'5' DIGIT | '60'
    ;


POSINTEGER  : DIGIT+
    ;

fragment
DIGIT : '0'..'9'
    ;

fragment
LETTER : 'a'..'z' | 'A'..'Z'
    ;
	
// same as SEARCH_CHAR, but won't match a $
fragment
SEARCH_CHAR2 :
    ( '\\&'
    | '\\|'
    | '\\!'
    | '\\{'
    | '\\}'
    | '\\['
    | '\\]'
    | '\\('
    | '\\)'
    | '\\^'
    | '\\~'
    | '\\:'
    | '\\\\'
    | '\\\''
    | '\\\"' //  asd
    | '\\+'
    | '\\-'
    | '\\?'
    | '\\*'
    |
   ~( ' '              // don't allow white space
    | '\t'             // don't allow white space
    | '\n'             // don't allow white space
    | '\r'             // don't allow white space
    | '&'              // reserved char per spec
    | '|'              // reserved char per spec
    | '!'              // reserved char per spec
    | '{'              // reserved char per spec
    | '}'              // reserved char per spec
    | '['              // reserved char per spec
    | ']'              // reserved char per spec
    | '('              // reserved char per spec (from 10.0)
    | ')'              // reserved char per spec (from 10.0)
    | '?'              // reserved char per spec (from 10.0)
    | '^'              // reserved char per spec
    | '~'              // reserved char per spec
    | ':'              // reserved char per spec
    | '\\'             // reserved char per spec
    | '\''             // reserved char per spec
    | '\"'             // not reserved, but treating as reserved for
better parsing behavior.
    | '+'              // reserved char per spec
    | '-'              // reserved char per spec
    | '$'              // reserved for params
    ) )
    ;

// FIND_VAL : 'f' 'i' 'n' 'd'
//    ;


fragment
SEARCH_CHAR :
    ( '\\&'
    | '\\|'
    | '\\!'
    | '\\{'
    | '\\}'
    | '\\['
    | '\\]'
    | '\\('
    | '\\)'
    | '\\^'
    | '\\~'
    | '\\:'
    | '\\\\'
    | '\\\''
    | '\\\"'
    | '\\+'
    | '\\-'
    | '\\?'
// --    | '\\*'
    |
   ~( ' '              // don't allow white space
    | '\t'             // don't allow white space
    | '\n'             // don't allow white space
    | '\r'             // don't allow white space
    | '&'              // reserved char per spec
    | '|'              // reserved char per spec
    | '!'              // reserved char per spec
    | '{'              // reserved char per spec
    | '}'              // reserved char per spec
    | '['              // reserved char per spec
    | ']'              // reserved char per spec
    | '('              // reserved char per spec (from 10.0)
    | ')'              // reserved char per spec (from 10.0)
    | '?'              // reserved char per spec (from 10.0)
    | '^'              // reserved char per spec
    | '~'              // reserved char per spec
    | ':'              // reserved char per spec
    | '\\'             // reserved char per spec
    | '\''             // reserved char per spec
    | '\"'             // not reserved, but treating as reserved for
better parsing behavior.
    | '+'              // reserved char per spec
    | '-'              // reserved char per spec
    ) )
    ;
================================================================
-------------- next part --------------
A non-text attachment was scrubbed...
Name: soslLexerRules.g
Type: application/octet-stream
Size: 9674 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20080627/a73fe018/attachment-0001.obj 

From antlr at mirality.co.nz  Fri Jun 27 19:01:48 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 28 Jun 2008 14:01:48 +1200
Subject: [antlr-interest] ab? b?a
In-Reply-To: <1ee982a50806270322o7f1b055dqae8f1f2d16f3acaf@mail.gmail.co
 m>
References: <1ee982a50806270322o7f1b055dqae8f1f2d16f3acaf@mail.gmail.com>
Message-ID: <20080628020155.C401911EC69@www.antlr.org>

At 22:22 27/06/2008, fat bold cyclop wrote:
 >Secondly, I want the parser to distinguish between:
 >"ab a", "a ba" and "ab ba"

You can resolve these in the lexer (by making them distinct 
tokens):

AB: 'ab';
BA: 'ba';
A: 'a';
B: 'b';

(Make sure you list the more specific ones first.)

As long as these are "direct" rules (no loops or optional clauses; 
alts are ok though) then ANTLR should sort out the ambiguity for 
you.  And this way you're guaranteed that if an AB token appears 
then it was an 'a' followed by a 'b' with no whitespace in 
between.

 >The game record can contain entry: "P4c+ +P1a". This means: 
first
 >pawn moves to 4c square and gets promoted.
 >The second pawn, a promoted pawn goes to 4c.))

That's a little trickier.  But you should be able to do it with a 
bit of predicate magic:

fragment POSTPROMOTE: '+';

PREPROMOTE
   : ( '+' (' '|'\t'|'\r'|'\n'|EOF) ) => '+' { $type = 
POSTPROMOTE; }
   | '+'
   ;

This should generate a POSTPROMOTE token where a + appears 
followed by whitespace (or end of file) and a PREPROMOTE token in 
all other cases.


From antlr at mirality.co.nz  Fri Jun 27 19:06:06 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 28 Jun 2008 14:06:06 +1200
Subject: [antlr-interest] empty right hand side
In-Reply-To: <D75C6DDA-1989-4CD0-8F0C-52DB952BD0AC@cs.usfca.edu>
References: <FF993752CB890B4EB591BE5450C37BF1012D78C7@navamane001.ad.internal.corp>
	<D75C6DDA-1989-4CD0-8F0C-52DB952BD0AC@cs.usfca.edu>
Message-ID: <20080628020611.5061411ECF1@www.antlr.org>

At 06:32 28/06/2008, Terence Parr wrote:
 >x? is same as (x|).  As a rule, you see:
 >
 >r : x
 >   |
 >   ;
 >
 >Use nothing to represent "nothing" :)

Some people put a comment in for this:

r
   :  x
   |  /* epsilon */
   ;

(Or 'nothing' in place of 'epsilon'.  Depends how formal you're 
feeling!)

Usually though there's no need to have empty alts (because using ? 
is more convenient) -- one exception is where you want to attach 
an action for the case when the first alternative is *not* present.


From antlr at mirality.co.nz  Fri Jun 27 19:13:09 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Sat, 28 Jun 2008 14:13:09 +1200
Subject: [antlr-interest] ab? b?a
In-Reply-To: <20080628020155.C401911EC69@www.antlr.org>
References: <1ee982a50806270322o7f1b055dqae8f1f2d16f3acaf@mail.gmail.com>
	<20080628020155.C401911EC69@www.antlr.org>
Message-ID: <20080628021404.A911D11ECA6@www.antlr.org>

Mere moments ago, I wrote:
 >fragment POSTPROMOTE: '+';
 >
 >PREPROMOTE
 >   : ( '+' (' '|'\t'|'\r'|'\n'|EOF) ) => '+' { $type =
 >POSTPROMOTE; }
 >   | '+'
 >   ;

Actually, riffing on my other post:  another way to write this 
(which is a little more complicated in the grammar, but should 
produce slightly cleaner target code):

fragment POSTPROMOTE: '+';

PREPROMOTE
   : '+'
     ( (' '|'\t'|'\r'|'\n'|EOF) => /*epsilon*/ { $type = 
POSTPROMOTE; } )?
   ;


From fat.bold.cyclop at gmail.com  Sat Jun 28 03:08:34 2008
From: fat.bold.cyclop at gmail.com (fat bold cyclop)
Date: Sat, 28 Jun 2008 12:08:34 +0200
Subject: [antlr-interest] ab? b?a
In-Reply-To: <48659e6c.4b9d220a.2b46.015eSMTPIN_ADDED@mx.google.com>
References: <1ee982a50806270322o7f1b055dqae8f1f2d16f3acaf@mail.gmail.com>
	<20080628020155.C401911EC69@www.antlr.org>
	<48659e6c.4b9d220a.2b46.015eSMTPIN_ADDED@mx.google.com>
Message-ID: <1ee982a50806280308o554a80ape590e4e4be8a65ec@mail.gmail.com>

> fragment POSTPROMOTE: '+';
>
> PREPROMOTE
>  : '+'
>    ( (' '|'\t'|'\r'|'\n'|EOF) => /*epsilon*/ { $type = POSTPROMOTE; } )?
>  ;
Thanks a lot.
I am certainly going to try this out, although I don't really understand it ;-)

I was browsing antlr wiki for some articles/tutorials about
predicates. Do you know any?

Regards,
fbc

From parrt at cs.usfca.edu  Sat Jun 28 07:32:57 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 28 Jun 2008 07:32:57 -0700
Subject: [antlr-interest] origin of <missing ID> node
In-Reply-To: <484A3419.7090405@web.de>
References: <484A3419.7090405@web.de>
Message-ID: <14B39135-32EF-47DC-8BED-D759494F5431@cs.usfca.edu>

Hi Felix, you can override a method in BaseRecognizer...a comment is  
in the code.
Ter
On Jun 7, 2008, at 12:09 AM, Felix Dorner wrote:

> Hi,
>
> in antlr 3.1b1 my tree adaptor I overwrite
>
>   @Override
>   public Object errorNode(TokenStream input, Token start, Token stop,
>           RecognitionException e){
>       return null;
>   }
>
> I anyway get sometimes <missing ID> nodes. Can I turn this off  
> somehow?
>
> Thanks,
> Felix


From tvial at octo.com  Sat Jun 28 07:40:02 2008
From: tvial at octo.com (Thomas Vial)
Date: Sat, 28 Jun 2008 16:40:02 +0200
Subject: [antlr-interest] gUnit freezing when choking on invalid input
In-Reply-To: <CCA536A3-6D3E-44BE-B347-62A7F63F38AB@mac.com>
References: <475086500806270255l1617fcedscf19e3680cbc42ea@mail.gmail.com>
	<CCA536A3-6D3E-44BE-B347-62A7F63F38AB@mac.com>
Message-ID: <475086500806280740o3f4d372cj442e162fea0a915@mail.gmail.com>

Wow that was quick :-)
I'll give it a try and post the results here. Thanks a lot for your
reactivity!

What I love with gUnit is the clean syntax: input --> expected result,
especially with ASTs. It's just what unit testing is for: testing code of
course AND documenting it with examples.

Thomas

PS : hope you don't mind my replying to the mailing list, so that everybody
can try too


On Sat, Jun 28, 2008 at 5:17 AM, Leon Su <leonsu at mac.com> wrote:

> Hi, I've  updated the gunit-1.0.1.jar on the wiki download page.
> Please let me know if there's any other issue.
> Thanks.
>
> Leon
>
> On Jun 27, 2008, at 2:55 AM, Thomas Vial wrote:
>
>  Hi all,
>>
>>
>> I am experiencing an annoying issue with gUnit freezing when parsing
>> of test input fails. Here is my test case, with ANTLR v3.0 and gUnit
>> 1.0.1.
>>
>> ----------[Expr.g]----------------------
>> grammar Expr;
>>
>> options {
>>        output=AST;
>> }
>>
>> tokens {
>>        PROG;
>> }
>>
>> @header {
>> package com.expr;
>> }
>>
>> @lexer::header {
>> package com.expr;
>> }
>>
>> program:
>>        (expr ';')*                                                     ->
>> ^(PROG expr*)
>> ;
>>
>> // The following rules are deliberately incorrect
>> // Should be expr1 ('+' expr1)* and expr2 ('*' expr2)*
>> // for a real expression parser :-)
>> expr:
>>        expr1 '+' expr1                                         -> ^('+'
>> expr1 expr1)
>> ;
>>
>> expr1:
>>        expr2 '*' expr2                                         -> ^('*'
>> expr2 expr2)
>> ;
>>
>> expr2:
>>        INTEGER                                                         ->
>> INTEGER
>> |       '(' expr ')'                                            -> expr
>> ;
>>
>>
>> INTEGER:
>>        ('0'..'9')+
>> ;
>> -------------------------------------------
>>
>>
>> ----------[Expr.testsuite]-----------
>> gunit Expr;
>>
>> @header {
>> package com.expr;
>> }
>>
>> expr:
>>        "1+2"                           -> (+ 1 2)
>> -------------------------------------------
>>
>>
>> With this input, gUnit freezes indefinitely. When feeding the parser
>> directly, I get "line 0:-1 mismatched input '<EOF>' expecting '*'",
>> which is correct wrt the badly written grammar (see comments above
>> rules expr and expr1). However gUnit does not see the error and gets
>> stuck. I have noticed, by looking at the JUnit code that gUnit
>> generates with the -o option (the JUnit version of the test freezes,
>> too), that it internally uses threads to pass input to the parser and
>> retrieve its output. The issue might have something to do some thread
>> starving on a reader.
>>
>> This is annoying when run from the command line: the whole test suite
>> freezes, so you have to execute the parser against every test by hand
>> to track the actual error. This also makes gUnit unusable in
>> continuous integration scenarii.
>>
>> Another oddity is that gUnit behaves as expected, i.e. reporting the
>> error, when the AST construction is done inline:
>> -------------------------------------------
>> expr:
>>        expr1 '+'^ expr1
>> ;
>>
>> expr1:
>>        expr2 '*'^ expr2
>> ;
>> -------------------------------------------
>>
>> Shouldn't both construction methods be equivalent?
>>
>>
>>
>>
>> Any insights on these issues?
>>
>> Thanks!
>>
>> Thomas
>>
>
>


-- 
..........................................................
Thomas VIAL
OCTO Technology
..........................................................
50, Avenue des Champs-Elys?es
75008 Paris
T?l : (33) 1 58 56 10 00
Fax : (33) 1 58 56 10 01
GSM : (33) 6 28 50 07 64
Web : http://www.octo.com/
..........................................................
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080628/3478a416/attachment.html 

From jaluber at gmx.de  Sat Jun 28 08:10:57 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sat, 28 Jun 2008 17:10:57 +0200
Subject: [antlr-interest] grammar to latex
In-Reply-To: <1214612782.25089.48.camel@jimi>
References: <1214612782.25089.48.camel@jimi>
Message-ID: <48665481.6090701@gmx.de>

Jim Idle schrieb:
> ?On Fri, 2008-06-27 at 23:42 +0100, Ana Nelson wrote:
>> Okay, I think I've worked out the last few kinks in the pygments
>> grammar. Examples are (temporarily) here:
>>
> 
>>
>> A few of the C Sharp grammars do have 1 error in them, in lines such as this:
>>
>> @header {
>>     #pragma warning disable 0219
>> }
>>
>> The # before pragma is showing up as an error. Maybe someone can tell
>> me, is that valid C sharp? 
> 
> It is, but strictly speaking the # should be at column position zero. If 
> you use VS 2008 you will find that it auto moves the # to the first column.

Actually, the whitespace before # is okay. Another possibility is that 
Ana is using a C# 1 compiler. C# 1 doesn't know pragma and some other 
preprocessor constructs added in C# 2. BTW, which grammars do you refer 
to, Ana?

Johannes
> 
> If you are interested in C#, then you can view my online C# parser at 
> www.temporal-wave.com <http://www.temporal-wave.com> where there is a 
> nice example of an AST for C# too. Go on, you know you guys want to!!! ;-)
> 
> Jim


From nelson.ana at gmail.com  Sat Jun 28 08:14:43 2008
From: nelson.ana at gmail.com (Ana Nelson)
Date: Sat, 28 Jun 2008 16:14:43 +0100
Subject: [antlr-interest] grammar to latex
In-Reply-To: <48665481.6090701@gmx.de>
References: <1214612782.25089.48.camel@jimi> <48665481.6090701@gmx.de>
Message-ID: <a7d6d2740806280814m5f3e0167o18d8570592977db2@mail.gmail.com>

Johannes:
Any target language code gets "delegated" to the pygments grammar for
that language. So this is an issue with the pygments C# grammar. I
have submitted a ticket to let them know about this, I'll update it
with the v1/v2 distinction, that makes more sense.

Jim:
That's a very nice online interactive C# parser. :-) Have you thought
about adding some syntax highlighting to it? ;-)

I know nothing about C# by the way, they were just convenient test
grammars and I'm trying to test this with different languages.



2008/6/28 Johannes Luber <jaluber at gmx.de>:
> Jim Idle schrieb:
>>
>> ?On Fri, 2008-06-27 at 23:42 +0100, Ana Nelson wrote:
>>>
>>> Okay, I think I've worked out the last few kinks in the pygments
>>> grammar. Examples are (temporarily) here:
>>>
>>
>>>
>>> A few of the C Sharp grammars do have 1 error in them, in lines such as
>>> this:
>>>
>>> @header {
>>>    #pragma warning disable 0219
>>> }
>>>
>>> The # before pragma is showing up as an error. Maybe someone can tell
>>> me, is that valid C sharp?
>>
>> It is, but strictly speaking the # should be at column position zero. If
>> you use VS 2008 you will find that it auto moves the # to the first column.
>
> Actually, the whitespace before # is okay. Another possibility is that Ana
> is using a C# 1 compiler. C# 1 doesn't know pragma and some other
> preprocessor constructs added in C# 2. BTW, which grammars do you refer to,
> Ana?
>
> Johannes
>>
>> If you are interested in C#, then you can view my online C# parser at
>> www.temporal-wave.com <http://www.temporal-wave.com> where there is a nice
>> example of an AST for C# too. Go on, you know you guys want to!!! ;-)
>>
>> Jim
>
>

From nelson.ana at gmail.com  Sat Jun 28 09:04:59 2008
From: nelson.ana at gmail.com (Ana Nelson)
Date: Sat, 28 Jun 2008 17:04:59 +0100
Subject: [antlr-interest] grammar to latex
In-Reply-To: <a7d6d2740806280814m5f3e0167o18d8570592977db2@mail.gmail.com>
References: <1214612782.25089.48.camel@jimi> <48665481.6090701@gmx.de>
	<a7d6d2740806280814m5f3e0167o18d8570592977db2@mail.gmail.com>
Message-ID: <a7d6d2740806280904m2c253a05t1033558edec26593@mail.gmail.com>

I've also been thinking about the line wrapping issue raised earlier.

I don't see any real reason why this has to be part of the syntax
highlighter. In fact, I think it makes more sense to run a pretty
printer/indenter on the source code separately, then put the modified
code through the syntax highlighter. For one thing, this would mean
you could compile the modified code and make sure it was still valid.

I did some searching and there seems to be some inexpensive commercial
products which do this, maybe some open source ones too. Or, maybe
this would be a nice ANTLR project for someone. :-)



2008/6/28 Ana Nelson <nelson.ana at gmail.com>:
> Johannes:
> Any target language code gets "delegated" to the pygments grammar for
> that language. So this is an issue with the pygments C# grammar. I
> have submitted a ticket to let them know about this, I'll update it
> with the v1/v2 distinction, that makes more sense.
>
> Jim:
> That's a very nice online interactive C# parser. :-) Have you thought
> about adding some syntax highlighting to it? ;-)
>
> I know nothing about C# by the way, they were just convenient test
> grammars and I'm trying to test this with different languages.
>
>
>
> 2008/6/28 Johannes Luber <jaluber at gmx.de>:
>> Jim Idle schrieb:
>>>
>>> ?On Fri, 2008-06-27 at 23:42 +0100, Ana Nelson wrote:
>>>>
>>>> Okay, I think I've worked out the last few kinks in the pygments
>>>> grammar. Examples are (temporarily) here:
>>>>
>>>
>>>>
>>>> A few of the C Sharp grammars do have 1 error in them, in lines such as
>>>> this:
>>>>
>>>> @header {
>>>>    #pragma warning disable 0219
>>>> }
>>>>
>>>> The # before pragma is showing up as an error. Maybe someone can tell
>>>> me, is that valid C sharp?
>>>
>>> It is, but strictly speaking the # should be at column position zero. If
>>> you use VS 2008 you will find that it auto moves the # to the first column.
>>
>> Actually, the whitespace before # is okay. Another possibility is that Ana
>> is using a C# 1 compiler. C# 1 doesn't know pragma and some other
>> preprocessor constructs added in C# 2. BTW, which grammars do you refer to,
>> Ana?
>>
>> Johannes
>>>
>>> If you are interested in C#, then you can view my online C# parser at
>>> www.temporal-wave.com <http://www.temporal-wave.com> where there is a nice
>>> example of an AST for C# too. Go on, you know you guys want to!!! ;-)
>>>
>>> Jim
>>
>>
>

From parrt at cs.usfca.edu  Sat Jun 28 09:44:01 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat, 28 Jun 2008 09:44:01 -0700
Subject: [antlr-interest] Exception while trying to generate Java
	classes for lexer
In-Reply-To: <6c9aae640806271750q2bab1114ga1d155c29cf916a0@mail.gmail.com>
References: <6c9aae640806271750q2bab1114ga1d155c29cf916a0@mail.gmail.com>
Message-ID: <609C8730-503B-4CCE-AB45-3CBF5FCD5600@cs.usfca.edu>

Added bug:

http://www.antlr.org:8888/browse/ANTLR-305

Ter

From coddbotherer at googlemail.com  Sat Jun 28 13:43:30 2008
From: coddbotherer at googlemail.com (Artemus Ward)
Date: Sat, 28 Jun 2008 21:43:30 +0100
Subject: [antlr-interest] Syntactic predicates elude me
Message-ID: <157c5c5c0806281343u7a8bf5cdx1981bc34a507c5b7@mail.gmail.com>

I am a newbie and for a couple of weeks I've been banging my head on
something simple that I'm just not getting.

I just cannot figure out how to write a syntactic predicate.  I'm
testing in ANTLRWorks and I always get an error reported like:
FailedPredicateException(rulename,{synpredN}?).

What puzzles me is that the predicate that is reported is always the
one I expected would succeed based on the input I provide.  If I
provide an input that should match (say) the third predicate it will
report the third predicate as the error.

I'm using ANTLR 3.0.1 and ANTLRWorks 1.1.7.

Art

From r_reitzi at cs.uni-kl.de  Sat Jun 28 14:34:00 2008
From: r_reitzi at cs.uni-kl.de (Raphael Reitzig)
Date: Sat, 28 Jun 2008 23:34:00 +0200
Subject: [antlr-interest] Syntactic predicates elude me
In-Reply-To: <157c5c5c0806281343u7a8bf5cdx1981bc34a507c5b7@mail.gmail.com>
References: <157c5c5c0806281343u7a8bf5cdx1981bc34a507c5b7@mail.gmail.com>
Message-ID: <473f88a4c839c1e123f159f0a217baff@mail.frhk.de>

Hi!

I had a similar problem. ANTLRWorks' interpreter cannot evaluate
predicates. Try debugging it. The Debugger actually works with the created
and compiled classes and thus is able to work with predicates.

Greets

Raphael

On Sat, 28 Jun 2008 21:43:30 +0100, "Artemus Ward"
<coddbotherer at googlemail.com> wrote:
> I am a newbie and for a couple of weeks I've been banging my head on
> something simple that I'm just not getting.
> 
> I just cannot figure out how to write a syntactic predicate.  I'm
> testing in ANTLRWorks and I always get an error reported like:
> FailedPredicateException(rulename,{synpredN}?).
> 
> What puzzles me is that the predicate that is reported is always the
> one I expected would succeed based on the input I provide.  If I
> provide an input that should match (say) the third predicate it will
> report the third predicate as the error.
> 
> I'm using ANTLR 3.0.1 and ANTLRWorks 1.1.7.
> 
> Art


From coddbotherer at googlemail.com  Sun Jun 29 03:31:24 2008
From: coddbotherer at googlemail.com (Artemus Ward)
Date: Sun, 29 Jun 2008 11:31:24 +0100
Subject: [antlr-interest] Syntactic predicates elude me
In-Reply-To: <473f88a4c839c1e123f159f0a217baff@mail.frhk.de>
References: <157c5c5c0806281343u7a8bf5cdx1981bc34a507c5b7@mail.gmail.com>
	<473f88a4c839c1e123f159f0a217baff@mail.frhk.de>
Message-ID: <157c5c5c0806290331l1d05b867i1a4b4fb679601146@mail.gmail.com>

2008/6/28 Raphael Reitzig <r_reitzi at cs.uni-kl.de>:
> Hi!
>
> I had a similar problem. ANTLRWorks' interpreter cannot evaluate
> predicates. Try debugging it. The Debugger actually works with the created
> and compiled classes and thus is able to work with predicates.

Hell.  I have wasted two weeks because I felt it was arrogant to think
the problem wasn't just my own lack of understanding. I am not happy.
What about backtracking?  Does ANTLRWorks support that?

Art

> On Sat, 28 Jun 2008 21:43:30 +0100, "Artemus Ward"
> <coddbotherer at googlemail.com> wrote:
>> I am a newbie and for a couple of weeks I've been banging my head on
>> something simple that I'm just not getting.
>>
>> I just cannot figure out how to write a syntactic predicate.  I'm
>> testing in ANTLRWorks and I always get an error reported like:
>> FailedPredicateException(rulename,{synpredN}?).
>>
>> What puzzles me is that the predicate that is reported is always the
>> one I expected would succeed based on the input I provide.  If I
>> provide an input that should match (say) the third predicate it will
>> report the third predicate as the error.
>>
>> I'm using ANTLR 3.0.1 and ANTLRWorks 1.1.7.
>>
>> Art
>
>

From r_reitzi at cs.uni-kl.de  Sun Jun 29 07:40:06 2008
From: r_reitzi at cs.uni-kl.de (Raphael Reitzig)
Date: Sun, 29 Jun 2008 16:40:06 +0200
Subject: [antlr-interest] Syntactic predicates elude me
In-Reply-To: <157c5c5c0806290331l1d05b867i1a4b4fb679601146@mail.gmail.com>
References: <157c5c5c0806281343u7a8bf5cdx1981bc34a507c5b7@mail.gmail.com>
	<473f88a4c839c1e123f159f0a217baff@mail.frhk.de>
	<157c5c5c0806290331l1d05b867i1a4b4fb679601146@mail.gmail.com>
Message-ID: <f31bf7430e646ee41d810b3646443a24@mail.frhk.de>

For backtracking is done through implicitly placed predicates for all
rules, no. 

However, I found the debug mode to be satisfying. It is not as responsive
as the interpreteter, for you have to generate and compile code, but it can
show you the produced AST as well as the parse tree. 

I understand your feeling, I had the same ;) Though I spent only days, not
weeks, confusing a bunch of fellow students as well :D

Raphael 

On Sun, 29 Jun 2008 11:31:24 +0100, "Artemus Ward"
<coddbotherer at googlemail.com> wrote:
> 2008/6/28 Raphael Reitzig <r_reitzi at cs.uni-kl.de>:
>> Hi!
>>
>> I had a similar problem. ANTLRWorks' interpreter cannot evaluate
>> predicates. Try debugging it. The Debugger actually works with the
> created
>> and compiled classes and thus is able to work with predicates.
> 
> Hell.  I have wasted two weeks because I felt it was arrogant to think
> the problem wasn't just my own lack of understanding. I am not happy.
> What about backtracking?  Does ANTLRWorks support that?
> 
> Art
> 
>> On Sat, 28 Jun 2008 21:43:30 +0100, "Artemus Ward"
>> <coddbotherer at googlemail.com> wrote:
>>> I am a newbie and for a couple of weeks I've been banging my head on
>>> something simple that I'm just not getting.
>>>
>>> I just cannot figure out how to write a syntactic predicate.  I'm
>>> testing in ANTLRWorks and I always get an error reported like:
>>> FailedPredicateException(rulename,{synpredN}?).
>>>
>>> What puzzles me is that the predicate that is reported is always the
>>> one I expected would succeed based on the input I provide.  If I
>>> provide an input that should match (say) the third predicate it will
>>> report the third predicate as the error.
>>>
>>> I'm using ANTLR 3.0.1 and ANTLRWorks 1.1.7.
>>>
>>> Art
>>
>>


From gmdidro at gmail.com  Sun Jun 29 08:16:08 2008
From: gmdidro at gmail.com (=?KOI8-R?B?8MXU0s/XIOHMxcvTwc7E0g==?=)
Date: Sun, 29 Jun 2008 19:16:08 +0400
Subject: [antlr-interest] Encoding of grammar files
Message-ID: <1dcb5c470806290816r37e740f9h4353af5e2e05b004@mail.gmail.com>

Hello,

I want to add comments in my grammar files (.g) in Russian.

But it's seems to me, that antlr 3.0.1 have never been in the country
of vodka and bears :)

grammar test;

options{ output = AST; ASTLabelType=CommonTree; language = CSharp; }

//?????? ????! -- Comment in Russian
program : 'program';

>java -classpath "D:\antlr\antlr-3.0.1\lib\antlr-2.7.7.jar;D:\antlr\antlr-3.0
.1\lib\antlr-3.0.1.jar;D:\antlr\antlr-3.0.1\lib\antlr-runtime-3.0.1.jar;D:\antlr
\antlr-3.0.1\lib\stringtemplate-3.1b1.jar;" org.antlr.Tool test.g

ANTLR Parser Generator  Version 3.0.1 (August 13, 2007)  1989-2007
error(10):  internal error: test.g : test.g:10:3: unexpected char: 0x41F
org.antlr.tool.ANTLRLexer.nextToken(ANTLRLexer.java:321)
antlr.TokenStreamRewriteEngine.nextToken(TokenStreamRewriteEngine.java:161)
antlr.TokenBuffer.fill(TokenBuffer.java:69)
antlr.TokenBuffer.LA(TokenBuffer.java:80)
antlr.LLkParser.LA(LLkParser.java:52)
org.antlr.tool.ANTLRParser.grammar(ANTLRParser.java:338)
org.antlr.tool.Grammar.setGrammarContent(Grammar.java:521)
org.antlr.tool.Grammar.<init>(Grammar.java:456)
org.antlr.Tool.getGrammar(Tool.java:331)
org.antlr.Tool.process(Tool.java:267)
org.antlr.Tool.main(Tool.java:70)

How to change the encoding of input .g-files and tell antlr about it ?
Thank you,
Petrov Alexander

From coddbotherer at googlemail.com  Sun Jun 29 08:39:56 2008
From: coddbotherer at googlemail.com (Artemus Ward)
Date: Sun, 29 Jun 2008 16:39:56 +0100
Subject: [antlr-interest] Syntactic predicates elude me
In-Reply-To: <ba1a74964452f56b77502169f575a5dd@mail.frhk.de>
References: <157c5c5c0806281343u7a8bf5cdx1981bc34a507c5b7@mail.gmail.com>
	<473f88a4c839c1e123f159f0a217baff@mail.frhk.de>
	<157c5c5c0806290331l1d05b867i1a4b4fb679601146@mail.gmail.com>
	<ba1a74964452f56b77502169f575a5dd@mail.frhk.de>
Message-ID: <157c5c5c0806290839r58bb4b38y85a11fcb01292733@mail.gmail.com>

2008/6/29 Raphael Reitzig <raphael at frhk.de>:
> For backtracking is done through implicitly placed predicates for all
> rules, no.
>
> However, I found the debug mode to be satisfying. It is not as responsive
> as the interpreteter, for you have to generate and compile code, but it can
> show you the produced AST as well as the parse tree.

Many, many thanks Raphael!  Since you put me straight on this I have
accomplished more in the last two hours than the last two weeks!  All
my code has suddenly started working as I'd hoped.

I think I like ANTLRWorks well enough when it works to forgive this
incident, but really, the interpreter seems more of a booby-trap than
a feature just now. It should pop up a warning when you try to use it.

Art

From jaluber at gmx.de  Sun Jun 29 08:58:17 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Sun, 29 Jun 2008 17:58:17 +0200
Subject: [antlr-interest] Encoding of grammar files
In-Reply-To: <1dcb5c470806290816r37e740f9h4353af5e2e05b004@mail.gmail.com>
References: <1dcb5c470806290816r37e740f9h4353af5e2e05b004@mail.gmail.com>
Message-ID: <4867B119.9000206@gmx.de>

?????? ????????? schrieb:
> Hello,
> 
> I want to add comments in my grammar files (.g) in Russian.
> 
> But it's seems to me, that antlr 3.0.1 have never been in the country
> of vodka and bears :)
> 
> grammar test;
> 
> options{ output = AST; ASTLabelType=CommonTree; language = CSharp; }
> 
> //?????? ????! -- Comment in Russian
> program : 'program';
> 
>> java -classpath "D:\antlr\antlr-3.0.1\lib\antlr-2.7.7.jar;D:\antlr\antlr-3.0
> .1\lib\antlr-3.0.1.jar;D:\antlr\antlr-3.0.1\lib\antlr-runtime-3.0.1.jar;D:\antlr
> \antlr-3.0.1\lib\stringtemplate-3.1b1.jar;" org.antlr.Tool test.g
> 
> ANTLR Parser Generator  Version 3.0.1 (August 13, 2007)  1989-2007
> error(10):  internal error: test.g : test.g:10:3: unexpected char: 0x41F
> org.antlr.tool.ANTLRLexer.nextToken(ANTLRLexer.java:321)
> antlr.TokenStreamRewriteEngine.nextToken(TokenStreamRewriteEngine.java:161)
> antlr.TokenBuffer.fill(TokenBuffer.java:69)
> antlr.TokenBuffer.LA(TokenBuffer.java:80)
> antlr.LLkParser.LA(LLkParser.java:52)
> org.antlr.tool.ANTLRParser.grammar(ANTLRParser.java:338)
> org.antlr.tool.Grammar.setGrammarContent(Grammar.java:521)
> org.antlr.tool.Grammar.<init>(Grammar.java:456)
> org.antlr.Tool.getGrammar(Tool.java:331)
> org.antlr.Tool.process(Tool.java:267)
> org.antlr.Tool.main(Tool.java:70)
> 
> How to change the encoding of input .g-files and tell antlr about it ?
> Thank you,
> Petrov Alexander

Currently ANTLR is implemented in ANTLR 2.7.7 which doesn't accept 
anything beyound ASCII. Until ANTLR has been bootstrapped there is no 
way to avoid this issue.

Johannes

From parrt at cs.usfca.edu  Sun Jun 29 10:25:22 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun, 29 Jun 2008 10:25:22 -0700
Subject: [antlr-interest] Syntactic predicates elude me
In-Reply-To: <f31bf7430e646ee41d810b3646443a24@mail.frhk.de>
References: <157c5c5c0806281343u7a8bf5cdx1981bc34a507c5b7@mail.gmail.com>
	<473f88a4c839c1e123f159f0a217baff@mail.frhk.de>
	<157c5c5c0806290331l1d05b867i1a4b4fb679601146@mail.gmail.com>
	<f31bf7430e646ee41d810b3646443a24@mail.frhk.de>
Message-ID: <7808B71F-BED0-4E12-AB60-481BAF9AC4DE@cs.usfca.edu>

New AW starts with a warning dialog.
Ter
On Jun 29, 2008, at 7:40 AM, Raphael Reitzig wrote:

> For backtracking is done through implicitly placed predicates for all
> rules, no.
>
> However, I found the debug mode to be satisfying. It is not as  
> responsive
> as the interpreteter, for you have to generate and compile code, but  
> it can
> show you the produced AST as well as the parse tree.
>
> I understand your feeling, I had the same ;) Though I spent only  
> days, not
> weeks, confusing a bunch of fellow students as well :D
>
> Raphael
>
> On Sun, 29 Jun 2008 11:31:24 +0100, "Artemus Ward"
> <coddbotherer at googlemail.com> wrote:
>> 2008/6/28 Raphael Reitzig <r_reitzi at cs.uni-kl.de>:
>>> Hi!
>>>
>>> I had a similar problem. ANTLRWorks' interpreter cannot evaluate
>>> predicates. Try debugging it. The Debugger actually works with the
>> created
>>> and compiled classes and thus is able to work with predicates.
>>
>> Hell.  I have wasted two weeks because I felt it was arrogant to  
>> think
>> the problem wasn't just my own lack of understanding. I am not happy.
>> What about backtracking?  Does ANTLRWorks support that?
>>
>> Art
>>
>>> On Sat, 28 Jun 2008 21:43:30 +0100, "Artemus Ward"
>>> <coddbotherer at googlemail.com> wrote:
>>>> I am a newbie and for a couple of weeks I've been banging my head  
>>>> on
>>>> something simple that I'm just not getting.
>>>>
>>>> I just cannot figure out how to write a syntactic predicate.  I'm
>>>> testing in ANTLRWorks and I always get an error reported like:
>>>> FailedPredicateException(rulename,{synpredN}?).
>>>>
>>>> What puzzles me is that the predicate that is reported is always  
>>>> the
>>>> one I expected would succeed based on the input I provide.  If I
>>>> provide an input that should match (say) the third predicate it  
>>>> will
>>>> report the third predicate as the error.
>>>>
>>>> I'm using ANTLR 3.0.1 and ANTLRWorks 1.1.7.
>>>>
>>>> Art
>>>
>>>
>


From r_reitzi at cs.uni-kl.de  Sun Jun 29 14:12:21 2008
From: r_reitzi at cs.uni-kl.de (Raphael Reitzig)
Date: Sun, 29 Jun 2008 23:12:21 +0200
Subject: [antlr-interest] =?utf-8?q?Identifiers_are_not_local_to_alternati?=
	=?utf-8?q?ves=3F?=
In-Reply-To: <7808B71F-BED0-4E12-AB60-481BAF9AC4DE@cs.usfca.edu>
References: <157c5c5c0806281343u7a8bf5cdx1981bc34a507c5b7@mail.gmail.com>
	<473f88a4c839c1e123f159f0a217baff@mail.frhk.de>
	<157c5c5c0806290331l1d05b867i1a4b4fb679601146@mail.gmail.com>
	<f31bf7430e646ee41d810b3646443a24@mail.frhk.de>
	<7808B71F-BED0-4E12-AB60-481BAF9AC4DE@cs.usfca.edu>
Message-ID: <7d0c0edaa35749c5075f5118f61d2b9c@mail.frhk.de>

Hi!

Please consider the following (pathological) grammar:

***

grammar Test;

test 
	:	v=a { System.out.println($v.s); }
	|	v=b { System.out.println($v.i); };
	
a returns [String s]	:	'A'  { $s = "a"; };
b returns [Integer i]	:	'B' { $i = 9; };

***

To me, ANTLR's syntax is suggesting that the identifier 'v' is declared
once in the first and once in the second alternative of rule 'test'. In the
generated code, however, this is not the case. Although grammar checking
(using ANTLRWorks here) succeeds, I am confronted with a not very helpful
error message during code generation:

*** error(116): Test.g:4:8: unknown attribute for rule b: s

4.8 does not point to any sensible location, at least not if you do not
know what to look for. Or am I counting in the wrong way? ?(

It turns out that 'v' is declared once for method 'test()', thus getting
one type it occurs with (here: Integer. Why, String occurs earlies?).
Requesting an attribute the first type does not have from it, leads to the
error, of course. But again, the error message is confusing, for nowhere is
attribute 's' on a 'b' rule accessed. The call I see in line 4 is 's' on a
rule 'a', which should succeed, not expecting v having the type of the
_later_ declaration.

I boldly suggest that one of the following measures be taken:

* enrich static grammar analysis and report the error at (grammar!)
development time (I am not sure wether this affects ANTLR or ANTLRWorks)
* pinpoint this type of error more precisely during code generation and
generate a more fitting error message
* recognise this type of error during code generation and introduce one
variable per type involved
* move declaration of those variable inside the "case"-Blocks, rendering
them kind of alternative-local.

I favor the latter alternative.

Greetings

Raphael

PS: Fireworks for Spain. In Kaiserslautern, Germany. World's strange.


From antlr at mirality.co.nz  Sun Jun 29 14:30:02 2008
From: antlr at mirality.co.nz (Gavin Lambert)
Date: Mon, 30 Jun 2008 09:30:02 +1200
Subject: [antlr-interest] Identifiers are not local to alternati  ves?
In-Reply-To: <7d0c0edaa35749c5075f5118f61d2b9c@mail.frhk.de>
References: <157c5c5c0806281343u7a8bf5cdx1981bc34a507c5b7@mail.gmail.com>
	<473f88a4c839c1e123f159f0a217baff@mail.frhk.de>
	<157c5c5c0806290331l1d05b867i1a4b4fb679601146@mail.gmail.com>
	<f31bf7430e646ee41d810b3646443a24@mail.frhk.de>
	<7808B71F-BED0-4E12-AB60-481BAF9AC4DE@cs.usfca.edu>
	<7d0c0edaa35749c5075f5118f61d2b9c@mail.frhk.de>
Message-ID: <20080629213009.541B311ECC5@www.antlr.org>

At 09:12 30/06/2008, Raphael Reitzig wrote:
 >*** error(116): Test.g:4:8: unknown attribute for rule b: s
 >
 >4.8 does not point to any sensible location, at least not if you 
do
 >not know what to look for. Or am I counting in the wrong way? ?(

Line 4 column 8 is just after the opening { in the "v=a" line, so 
it's certainly *close* to the error.

 >* move declaration of those variable inside the "case"-Blocks,
 >rendering them kind of alternative-local.

There is a reason why this is done that way.  You might want to 
have code like this:

test
   :  (v=a | v=b) { DoSomething($v.x); }
   ;

(Where both 'a' and 'b' return the same type.)

Having said that, the way the internal code generation works tends 
to make the types incompatible anyway (the actual return from 'a' 
will be an 'a_return_struct' and the return from 'b' will be a 
'b_return_struct', which aren't compatible), so the above isn't 
always feasible either.  Another example (which does work 
currently):

test
   :  (v=a b c | d v=a c) { DoSomething($v.x); }
   ;


From lgcraymer at yahoo.com  Sun Jun 29 22:29:28 2008
From: lgcraymer at yahoo.com (Loring Craymer)
Date: Sun, 29 Jun 2008 22:29:28 -0700 (PDT)
Subject: [antlr-interest] Encoding of grammar files
Message-ID: <234147.65394.qm@web55912.mail.re3.yahoo.com>

Try replacing the charVocabulary line in antlr.g with

charVocabulary='\u0000'..'\uFFFE';and rebuilding ANTLR 3 from source.

That should work; if not, I'm quite sure that Ter can be bribed with vodka and beer.

--Loring




----- Original Message ----
> From: ?????? ????????? <gmdidro at gmail.com>
> To: antlr-interest at antlr.org
> Sent: Sunday, June 29, 2008 8:16:08 AM
> Subject: [antlr-interest] Encoding of grammar files
> 
> Hello,
> 
> I want to add comments in my grammar files (.g) in Russian.
> 
> But it's seems to me, that antlr 3.0.1 have never been in the country
> of vodka and bears :)
> 
> grammar test;
> 
> options{ output = AST; ASTLabelType=CommonTree; language = CSharp; }
> 
> //?????? ????! -- Comment in Russian
> program : 'program';
> 
> >java -classpath "D:\antlr\antlr-3.0.1\lib\antlr-2.7.7.jar;D:\antlr\antlr-3.0
> .1\lib\antlr-3.0.1.jar;D:\antlr\antlr-3.0.1\lib\antlr-runtime-3.0.1.jar;D:\antlr
> \antlr-3.0.1\lib\stringtemplate-3.1b1.jar;" org.antlr.Tool test.g
> 
> ANTLR Parser Generator  Version 3.0.1 (August 13, 2007)  1989-2007
> error(10):  internal error: test.g : test.g:10:3: unexpected char: 0x41F
> org.antlr.tool.ANTLRLexer.nextToken(ANTLRLexer.java:321)
> antlr.TokenStreamRewriteEngine.nextToken(TokenStreamRewriteEngine.java:161)
> antlr.TokenBuffer.fill(TokenBuffer.java:69)
> antlr.TokenBuffer.LA(TokenBuffer.java:80)
> antlr.LLkParser.LA(LLkParser.java:52)
> org.antlr.tool.ANTLRParser.grammar(ANTLRParser.java:338)
> org.antlr.tool.Grammar.setGrammarContent(Grammar.java:521)
> org.antlr.tool.Grammar.(Grammar.java:456)
> org.antlr.Tool.getGrammar(Tool.java:331)
> org.antlr.Tool.process(Tool.java:267)
> org.antlr.Tool.main(Tool.java:70)
> 
> How to change the encoding of input .g-files and tell antlr about it ?
> Thank you,
> Petrov Alexander



      


From AndrevdM at pyrogenesis.co.za  Mon Jun 30 02:19:29 2008
From: AndrevdM at pyrogenesis.co.za (=?iso-8859-1?Q?Andr=E9_van_der_Merwe?=)
Date: Mon, 30 Jun 2008 11:19:29 +0200
Subject: [antlr-interest] += in a tree grammar
Message-ID: <E7035321714C624BA01ADCBA6F99CADF0102FF75DE8E@mercury.pyrogenesis.co.za>

Hi,

I'm trying to build a heterogeneous AST from a tree grammar but I can't get a list of nodes using +=.

Firstly I building the AST in the tree grammar for two reasons
 1) Its easier as I'm working with a simplified/normalised tree (i.e. not a parse tree).
 2) My parser code can be reused for other purposes, i.e. I just create a new tree walker and leave the parser as is.


What I'm trying to do is create nodes for each parameter in a method call. Here is my (simplified) parser grammar
   program
      :   IDENTIFIER LPAREN parameters* RPAREN   -> ^(CALL IDENTIFIER parameters?)
      ;
   parameters
      :   INT (COMMA INT)* -> INT+
      ;

And my tree grammar
   program
      :   ^(CALL IDENTIFIER (e+=INT)*)
      {
         object obj1 = $e;
         object obj2 = e;
      };


I've tried everything but I can't get this to work.



Using 3.1 beta 1: I can't even parse this "someMethod( 1, 2 )" as I get an RewriteEarlyExitException. The same parser works in 3.0.1
   root_0 = (CommonTree)adaptor.GetNilNode();
   // 20:21: -> ( INT )+
   {
   if ( !(stream_INT.HasNext()) ) {
     throw new RewriteEarlyExitException();
----


Using 3.0.1 with the tree grammar's output = AST generates the correct code for the '+=' but the rest of the code does not compile as the generated tree is passing CommonTree objects to the adapter's Create() method not ITokens. [I know that 3.0.1 does not support tree to tree grammars so I'm not surprised]
----


Using 3.0.1 with the tree grammar's output = template compiles but then the '+=' is concatenating templates
   if (list_e == null)
      list_e = new ArrayList();

   list_e.Add(e.Template);
----



Any ideas? I don't want to have to move all my code into the parser but it is beginning to look like the only option :( Is there perhaps a later beta available or can I download the latest source somewhere?


Thanks

Andre

From tvial at octo.com  Mon Jun 30 06:00:26 2008
From: tvial at octo.com (Thomas Vial)
Date: Mon, 30 Jun 2008 15:00:26 +0200
Subject: [antlr-interest] gUnit freezing when choking on invalid input
In-Reply-To: <411E1F4C-994A-4D07-A164-E9F1B740448F@mac.com>
References: <475086500806270255l1617fcedscf19e3680cbc42ea@mail.gmail.com>
	<CCA536A3-6D3E-44BE-B347-62A7F63F38AB@mac.com>
	<475086500806280740o3f4d372cj442e162fea0a915@mail.gmail.com>
	<411E1F4C-994A-4D07-A164-E9F1B740448F@mac.com>
Message-ID: <475086500806300600t18d280a4yadd6e0d8d29afca0@mail.gmail.com>

Hi,

I have tested your fix and it works perfectly.

Many thanks again!! All the more useful as I'm not ready to go with ANTLR
3.1b yet.

Thomas



On Sat, Jun 28, 2008 at 8:06 PM, Leon Su <leonsu at mac.com> wrote:

>
> On Jun 28, 2008, at 7:40 AM, Thomas Vial wrote:
>
> Wow that was quick :-)
> I'll give it a try and post the results here. Thanks a lot for your
> reactivity!
>
> What I love with gUnit is the clean syntax: input --> expected result,
> especially with ASTs. It's just what unit testing is for: testing code of
> course AND documenting it with examples.
>
>
> Cool. I'm planning to work on the next version of gUnit and will make it
> more robust and usable :)
>
> Thomas
>
> PS : hope you don't mind my replying to the mailing list, so that everybody
> can try too
>
>
> Sure. It's good to share your thought or questions on the mail list. That
> also helps me debug and improve gUnit
>
> Leon
>
>
> On Sat, Jun 28, 2008 at 5:17 AM, Leon Su <leonsu at mac.com> wrote:
>
>> Hi, I've  updated the gunit-1.0.1.jar on the wiki download page.
>> Please let me know if there's any other issue.
>> Thanks.
>>
>> Leon
>>
>> On Jun 27, 2008, at 2:55 AM, Thomas Vial wrote:
>>
>>  Hi all,
>>>
>>>
>>> I am experiencing an annoying issue with gUnit freezing when parsing
>>> of test input fails. Here is my test case, with ANTLR v3.0 and gUnit
>>> 1.0.1.
>>>
>>> ----------[Expr.g]----------------------
>>> grammar Expr;
>>>
>>> options {
>>>        output=AST;
>>> }
>>>
>>> tokens {
>>>        PROG;
>>> }
>>>
>>> @header {
>>> package com.expr;
>>> }
>>>
>>> @lexer::header {
>>> package com.expr;
>>> }
>>>
>>> program:
>>>        (expr ';')*                                                     ->
>>> ^(PROG expr*)
>>> ;
>>>
>>> // The following rules are deliberately incorrect
>>> // Should be expr1 ('+' expr1)* and expr2 ('*' expr2)*
>>> // for a real expression parser :-)
>>> expr:
>>>        expr1 '+' expr1                                         -> ^('+'
>>> expr1 expr1)
>>> ;
>>>
>>> expr1:
>>>        expr2 '*' expr2                                         -> ^('*'
>>> expr2 expr2)
>>> ;
>>>
>>> expr2:
>>>        INTEGER                                                         ->
>>> INTEGER
>>> |       '(' expr ')'                                            -> expr
>>> ;
>>>
>>>
>>> INTEGER:
>>>        ('0'..'9')+
>>> ;
>>> -------------------------------------------
>>>
>>>
>>> ----------[Expr.testsuite]-----------
>>> gunit Expr;
>>>
>>> @header {
>>> package com.expr;
>>> }
>>>
>>> expr:
>>>        "1+2"                           -> (+ 1 2)
>>> -------------------------------------------
>>>
>>>
>>> With this input, gUnit freezes indefinitely. When feeding the parser
>>> directly, I get "line 0:-1 mismatched input '<EOF>' expecting '*'",
>>> which is correct wrt the badly written grammar (see comments above
>>> rules expr and expr1). However gUnit does not see the error and gets
>>> stuck. I have noticed, by looking at the JUnit code that gUnit
>>> generates with the -o option (the JUnit version of the test freezes,
>>> too), that it internally uses threads to pass input to the parser and
>>> retrieve its output. The issue might have something to do some thread
>>> starving on a reader.
>>>
>>> This is annoying when run from the command line: the whole test suite
>>> freezes, so you have to execute the parser against every test by hand
>>> to track the actual error. This also makes gUnit unusable in
>>> continuous integration scenarii.
>>>
>>> Another oddity is that gUnit behaves as expected, i.e. reporting the
>>> error, when the AST construction is done inline:
>>> -------------------------------------------
>>> expr:
>>>        expr1 '+'^ expr1
>>> ;
>>>
>>> expr1:
>>>        expr2 '*'^ expr2
>>> ;
>>> -------------------------------------------
>>>
>>> Shouldn't both construction methods be equivalent?
>>>
>>>
>>>
>>>
>>> Any insights on these issues?
>>>
>>> Thanks!
>>>
>>> Thomas
>>>
>>
>>
>
>
> --
> ..........................................................
> Thomas VIAL
> OCTO Technology
> ..........................................................
> 50, Avenue des Champs-Elys?es
> 75008 Paris
> T?l : (33) 1 58 56 10 00
> Fax : (33) 1 58 56 10 01
> GSM : (33) 6 28 50 07 64
> Web : http://www.octo.com/
> ..........................................................
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080630/1d3017d9/attachment.html 

From gikas.gikas at gmail.com  Mon Jun 30 12:08:59 2008
From: gikas.gikas at gmail.com (Gikas Gikas)
Date: Mon, 30 Jun 2008 15:08:59 -0400
Subject: [antlr-interest] Internal error when generating grammar with 3.1b
	(ANTLRWorks 1.2b5)
Message-ID: <C48EA78B.2CEC%gikas.gikas@gmail.com>

Hi all,

I have no clue what?s causing this error ? seems like a bug... Anyone has
seen this before?  
The grammar checks fine with ANTLRWorks Grammar -> Check Grammar.

[14:50:34] error(10):  internal error:
/Users/gg/EclipseProjects/com.atente.edgeplus.core/src/com/atente/edgeplus/c
ore/ast/parser/internal/EdgePlus.g : java.lang.IndexOutOfBoundsException:
Index: 13, Size: 13
java.util.ArrayList.RangeCheck(ArrayList.java:546)
java.util.ArrayList.get(ArrayList.java:321)
org.antlr.misc.IntervalSet.addAll(IntervalSet.java:197)
org.antlr.analysis.LookaheadSet.orInPlace(LookaheadSet.java:56)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:270)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
org.antlr.analysis.LL1Analyzer.FIRST(LL1Analyzer.java:150)
org.antlr.tool.Grammar.FIRST(Grammar.java:2914)
org.antlr.codegen.CodeGenerator.generateLocalFOLLOW(CodeGenerator.java:572)
org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:2074)
org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1683)
org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1287)
org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:1063)
org.antlr.codegen.CodeGenTreeWalker.ebnf(CodeGenTreeWalker.java:1846)
org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java:1679)
org.antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java:1287)
org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:1063)
org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:779)
org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:570)
org.antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java:512)
org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java:330)
org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:426)
org.antlr.Tool.generateRecognizer(Tool.java:419)
org.antlr.Tool.process(Tool.java:286)
org.antlr.works.generate.CodeGenerate.generate(Unknown Source)
org.antlr.works.generate.CodeGenerate.run(Unknown Source)
java.lang.Thread.run(Thread.java:613)

Regards,
Gikas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080630/007f1f9e/attachment.html 

From aheller at gmx.at  Mon Jun 30 12:23:21 2008
From: aheller at gmx.at (Arnulf Heller)
Date: Mon, 30 Jun 2008 21:23:21 +0200
Subject: [antlr-interest] FSM codegen
Message-ID: <20080630192323.USZK3587.viefep16-int.chello.at@edge02.upc.biz>

hi group,

is anyone aware of a system translating some formal specification of 
finite state machines to C++ code? using ANTLR3 + stringtemplate?
I found ECharts in the grammars list but that uses ANTLR2, python for 
code emission and seems to be an overkill for my purposes ...

thx,
ah


From parrt at cs.usfca.edu  Mon Jun 30 12:44:23 2008
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon, 30 Jun 2008 12:44:23 -0700
Subject: [antlr-interest] Internal error when generating grammar with
	3.1b (ANTLRWorks 1.2b5)
In-Reply-To: <C48EA78B.2CEC%gikas.gikas@gmail.com>
References: <C48EA78B.2CEC%gikas.gikas@gmail.com>
Message-ID: <C77EF15D-F004-43ED-A96B-BD777191FF69@cs.usfca.edu>

Weird...Are you able to mail me directly or grammar so that I can look  
at it?
Thanks!
Ter
On Jun 30, 2008, at 12:08 PM, Gikas Gikas wrote:

> Hi all,
>
> I have no clue what?s causing this error ? seems like a bug...  
> Anyone has seen this before?
> The grammar checks fine with ANTLRWorks Grammar -> Check Grammar.
>
> [14:50:34] error(10):  internal error: /Users/gg/EclipseProjects/ 
> com.atente.edgeplus.core/src/com/atente/edgeplus/core/ast/parser/ 
> internal/EdgePlus.g : java.lang.IndexOutOfBoundsException: Index:  
> 13, Size: 13
> java.util.ArrayList.RangeCheck(ArrayList.java:546)
> java.util.ArrayList.get(ArrayList.java:321)
> org.antlr.misc.IntervalSet.addAll(IntervalSet.java:197)
> org.antlr.analysis.LookaheadSet.orInPlace(LookaheadSet.java:56)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:270)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:268)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer._FIRST(LL1Analyzer.java:239)
> org.antlr.analysis.LL1Analyzer.FIRST(LL1Analyzer.java:150)
> org.antlr.tool.Grammar.FIRST(Grammar.java:2914)
> org 
> .antlr.codegen.CodeGenerator.generateLocalFOLLOW(CodeGenerator.java: 
> 572)
> org.antlr.codegen.CodeGenTreeWalker.atom(CodeGenTreeWalker.java:2074)
> org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java: 
> 1683)
> org 
> .antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java: 
> 1287)
> org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:1063)
> org.antlr.codegen.CodeGenTreeWalker.ebnf(CodeGenTreeWalker.java:1846)
> org.antlr.codegen.CodeGenTreeWalker.element(CodeGenTreeWalker.java: 
> 1679)
> org 
> .antlr.codegen.CodeGenTreeWalker.alternative(CodeGenTreeWalker.java: 
> 1287)
> org.antlr.codegen.CodeGenTreeWalker.block(CodeGenTreeWalker.java:1063)
> org.antlr.codegen.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:779)
> org.antlr.codegen.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:570)
> org 
> .antlr.codegen.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java: 
> 512)
> org.antlr.codegen.CodeGenTreeWalker.grammar(CodeGenTreeWalker.java: 
> 330)
> org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:426)
> org.antlr.Tool.generateRecognizer(Tool.java:419)
> org.antlr.Tool.process(Tool.java:286)
> org.antlr.works.generate.CodeGenerate.generate(Unknown Source)
> org.antlr.works.generate.CodeGenerate.run(Unknown Source)
> java.lang.Thread.run(Thread.java:613)
>
> Regards,
> Gikas


From david.beckedorff at gmail.com  Mon Jun 30 14:28:51 2008
From: david.beckedorff at gmail.com (David Beckedorff)
Date: Mon, 30 Jun 2008 17:28:51 -0400
Subject: [antlr-interest] String Template Puzzle
Message-ID: <1c7463980806301428n554de028l8c1b5d4d846ba10e@mail.gmail.com>

Dear String Templaters,

I have a ST template that generates a SQL update statement::

dtoSqlMap(service,dto) ::= <<
...
update $dto.tableName$
set $dto.fields : { f |
  $f.dbColName$ = #$f.name;format="ilc"$:$f.dbColType$#};
separator=","$           <== "ilc" means to format the initial letter
lowercase
where current of c1;
...
>>

which in a specific case generates the following code:

update DP_JRNL_ENTRY
set
  DP_JRNL_ENTRY_ID = #id:NUMERIC,
  OWNR_PERS_NTL_ID = #ownerId:VARCHAR,
  OWNR_DP_TYPE_CD = #ownerDpType:VARCHAR,
  ATHR_PERS_NTL_ID = #authorId:VARCHAR,
  ATHR_PERS_SRC_ID = #authorSourceId:NUMERIC,
  SBJ_AREA_ID = #subjectAreaId:NUMERIC,
  DP_GOAL_TYPE_CD = #goalTypeCode:VARCHAR,
  DP_JRNL_TITLE_TX = #title:VARCHAR,
  DP_JRNL_ENTRY_TX = #entry:CLOB,
  DP_JRNL_CRTN_DT = #createDate:DATE,
  DP_JRNL_UPDT_DT = #modifiedDate:DATE,
  DP_JRNL_STRT_DT = #startDate:DATE,
  DP_JRNL_END_DT = #endDate:DATE,
  DP_JRNL_ACHV_DT = #achievementDate:DATE,
  VER_NBR = #version:NUMERIC
where current of c1;


However, I want to suppress the DP_JRNL_ENTRY_ID and VER_NBR fields. The
former is implied by "where current of c1" and the latter is updated by a
trigger, so should be omitted from the update statement. But they are valid
fields of the Data Transfer Object (DTO).

It appears that the $if(...)$ construct allows to test for the presence of
an attribute or the value of a boolean. But I don't think it allows to test
for:  if  ( $f.dbColName$ == "DP_JRNL_ENTRY_ID" ).

Is there some other way to accomplish this?

Thanks,
David




-- 
----------------------------------

David Beckedorff
57 Emerson Rd.
Wellesley, MA  02481

Home:  (781) 235-0061
Cell:  (781) 820-0567
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080630/ee8ec431/attachment.html 

From jaluber at gmx.de  Mon Jun 30 14:55:06 2008
From: jaluber at gmx.de (Johannes Luber)
Date: Mon, 30 Jun 2008 23:55:06 +0200
Subject: [antlr-interest] String Template Puzzle
In-Reply-To: <1c7463980806301428n554de028l8c1b5d4d846ba10e@mail.gmail.com>
References: <1c7463980806301428n554de028l8c1b5d4d846ba10e@mail.gmail.com>
Message-ID: <4869563A.9030801@gmx.de>

David Beckedorff schrieb:
> Dear String Templaters,
>  
> I have a ST template that generates a SQL update statement::
>  
> dtoSqlMap(service,dto) ::= <<
> ...
> update $dto.tableName$
> set $dto.fields : { f |
>   $f.dbColName$ = #$f.name 
> <http://f.name>;format="ilc"$:$f.dbColType$#}; separator=","$           
> <== "ilc" means to format the initial letter lowercase
> where current of c1;
> ...
>  >>
>  
> which in a specific case generates the following code:
>  
> update DP_JRNL_ENTRY
> set
>   DP_JRNL_ENTRY_ID = #id:NUMERIC,
>   OWNR_PERS_NTL_ID = #ownerId:VARCHAR,
>   OWNR_DP_TYPE_CD = #ownerDpType:VARCHAR,
>   ATHR_PERS_NTL_ID = #authorId:VARCHAR,
>   ATHR_PERS_SRC_ID = #authorSourceId:NUMERIC,
>   SBJ_AREA_ID = #subjectAreaId:NUMERIC,
>   DP_GOAL_TYPE_CD = #goalTypeCode:VARCHAR,
>   DP_JRNL_TITLE_TX = #title:VARCHAR,
>   DP_JRNL_ENTRY_TX = #entry:CLOB,
>   DP_JRNL_CRTN_DT = #createDate:DATE,
>   DP_JRNL_UPDT_DT = #modifiedDate:DATE,
>   DP_JRNL_STRT_DT = #startDate:DATE,
>   DP_JRNL_END_DT = #endDate:DATE,
>   DP_JRNL_ACHV_DT = #achievementDate:DATE,
>   VER_NBR = #version:NUMERIC         
> where current of c1;
>  
>  
> However, I want to suppress the DP_JRNL_ENTRY_ID and VER_NBR fields. The 
> former is implied by "where current of c1" and the latter is updated by 
> a trigger, so should be omitted from the update statement. But they are 
> valid fields of the Data Transfer Object (DTO).
>  
> It appears that the $if(...)$ construct allows to test for the presence 
> of an attribute or the value of a boolean. But I don't think it allows 
> to test for:  if  ( $f.dbColName$ == "DP_JRNL_ENTRY_ID" ).
>  
> Is there some other way to accomplish this?
>  
> Thanks,
> David

Create a new attribute IsdbColNameJournalEntry.

Johannes

From sumanto at gmail.com  Mon Jun 30 15:25:07 2008
From: sumanto at gmail.com (Sumanto Biswas)
Date: Mon, 30 Jun 2008 15:25:07 -0700
Subject: [antlr-interest] Access to lexer warning/error messages after
	parsing
Message-ID: <6c9aae640806301525n5dbfd366l6305de1b1dc3f32c@mail.gmail.com>

Hi,

Many times the lexer gives warnings but tries to continue. When the
parser is not able to handle, then we get exception.

As an example, for an input for my lexer-parser, from the parser I get
NoViableAltException, with the following (formatted) information
:"Mesg: Line number:0, Column no:-1, Message:no viable alternative at
input '<EOF>'". Earlier the lexer had given the following warning:
"line 1:17 mismatched character '}' expecting '"'".

If I use antlr within a product, the lexer warning seems to be much
better to show since its clear and the line and column nos are correct
with respect to the input. But the messages are in the error stream,
and not stored somewhere. So I have to do something like what is
pasted below.

I think it would be nice to have a list of structures which contain
the line no, column no, and the error message, and the exception so
that programmatically it would be easy to get that to see warnings
generated. Maybe something like 'getWarnings()' on the lexer.

Regards,
Sumanto

==========================================================
@lexer::members {
  private List<String> messages = new ArrayList<String>();

  public void displayRecognitionError(String[] tokenNames,
RecognitionException e) {
    String hdr = getErrorHeader(e);
    String msg = getErrorMessage(e, tokenNames);
    messages.add(hdr+" "+msg);
  }
	
  public List<String> getMessages() {
    return messages;
  }

  // And other methods to get line no/column no as needed.
}
==========================================================

From cvrebert+antlr at gmail.com  Mon Jun 30 16:45:30 2008
From: cvrebert+antlr at gmail.com (Chris Rebert)
Date: Mon, 30 Jun 2008 16:45:30 -0700
Subject: [antlr-interest] FSM codegen
In-Reply-To: <20080630192323.USZK3587.viefep16-int.chello.at@edge02.upc.biz>
References: <20080630192323.USZK3587.viefep16-int.chello.at@edge02.upc.biz>
Message-ID: <47c890dc0806301645p2d2c639cw92ed4fb4c69033f1@mail.gmail.com>

There's the Ragel State Machine Compiler (
http://research.cs.queensu.ca/~thurston/ragel/ ). It compiles FSM
definitions written in a DSL into C or C++ (among other target
languages).
It shouldn't be too hard to write some stringtemplates to generate the
FSM definition programmatically.

- Chris

On Mon, Jun 30, 2008 at 12:23 PM, Arnulf Heller <aheller at gmx.at> wrote:
> hi group,
>
> is anyone aware of a system translating some formal specification of finite
> state machines to C++ code? using ANTLR3 + stringtemplate?
> I found ECharts in the grammars list but that uses ANTLR2, python for code
> emission and seems to be an overkill for my purposes ...
>
> thx,
> ah
>
>

From horvath.tamas at siemens.com  Mon Jun 30 22:38:55 2008
From: horvath.tamas at siemens.com (Horvath, Tamas 2)
Date: Tue, 1 Jul 2008 07:38:55 +0200
Subject: [antlr-interest] A question regarding autotools
In-Reply-To: <894080F53735B04D862B96A3FC3BB43E02595F49@budgw09a.ww300.siemens.net>
References: <894080F53735B04D862B96A3FC3BB43E02595F49@budgw09a.ww300.siemens.net>
Message-ID: <894080F53735B04D862B96A3FC3BB43E02595F4A@budgw09a.ww300.siemens.net>

Hi all!
 
I've searched the whole Internet for an example how to use the ANTLR in GNU Autotools.
I saw that there is a SUFFIXES variable that can be used to call the antlr 2.* to compile the <something>.g file to C++ sources, but this is not a way to go since the autotools supposes that it will generate a <something>.o file.
Maybe the BUILT_SOURCES can be used somehow.. But how?
I already found a way to find an apropriate java, and to build a variable "ANTRL=java -cp ... antlr.Tool" through Configure.in... But I have problems to call the antlr and compile my project with the new cpp files.
If someone can help me please answer.
 
Thanks,
Tam?s
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080701/5ca47260/attachment.html 

From camerons at microsoft.com  Mon Jun 30 23:54:17 2008
From: camerons at microsoft.com (Cameron Skinner)
Date: Mon, 30 Jun 2008 23:54:17 -0700
Subject: [antlr-interest] lexer superClass option
Message-ID: <E77E96B6A3DEE24CB77E4F7130C910DA6BE1487FB9@NA-EXMSG-C117.redmond.corp.microsoft.com>

Is there a way to use the superClass option either in a combined grammar or a stand-alone lexer grammar using 3.01?

Regards,

Cameron
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20080630/40631d6d/attachment.html 

From r_reitzi at cs.uni-kl.de  Mon Jun 30 23:54:43 2008
From: r_reitzi at cs.uni-kl.de (Raphael Reitzig)
Date: Tue, 01 Jul 2008 08:54:43 +0200
Subject: [antlr-interest] Access to lexer warning/error messages after
	parsing
In-Reply-To: <6c9aae640806301525n5dbfd366l6305de1b1dc3f32c@mail.gmail.com>
References: <6c9aae640806301525n5dbfd366l6305de1b1dc3f32c@mail.gmail.com>
Message-ID: <1a92904d9130f0673605df7c51603394@mail.frhk.de>

Hi!

I second that for I am about to write something quite similar. System.err
is no good in a user oriented GUI application.

I can think of two possibilties to integrate such behaviour in ANTLR:
* grammar option like "warnMode", i.e. with values "console" and "collect".
I'd like to have _one_ exceptions thrown if there ocurred any error while
parsing.
* possibility to set output stream for error messages via grammar option:
@errors { System.err } (default)
Implementation of either should be no obstacle (*guess*).

Greetings,
Raphael

On Mon, 30 Jun 2008 15:25:07 -0700, "Sumanto Biswas" <sumanto at gmail.com>
wrote:
> Hi,
> 
> Many times the lexer gives warnings but tries to continue. When the
> parser is not able to handle, then we get exception.
> 
> As an example, for an input for my lexer-parser, from the parser I get
> NoViableAltException, with the following (formatted) information
> :"Mesg: Line number:0, Column no:-1, Message:no viable alternative at
> input '<EOF>'". Earlier the lexer had given the following warning:
> "line 1:17 mismatched character '}' expecting '"'".
> 
> If I use antlr within a product, the lexer warning seems to be much
> better to show since its clear and the line and column nos are correct
> with respect to the input. But the messages are in the error stream,
> and not stored somewhere. So I have to do something like what is
> pasted below.
> 
> I think it would be nice to have a list of structures which contain
> the line no, column no, and the error message, and the exception so
> that programmatically it would be easy to get that to see warnings
> generated. Maybe something like 'getWarnings()' on the lexer.
> 
> Regards,
> Sumanto
> 
> ==========================================================
> @lexer::members {
>   private List<String> messages = new ArrayList<String>();
> 
>   public void displayRecognitionError(String[] tokenNames,
> RecognitionException e) {
>     String hdr = getErrorHeader(e);
>     String msg = getErrorMessage(e, tokenNames);
>     messages.add(hdr+" "+msg);
>   }
> 
>   public List<String> getMessages() {
>     return messages;
>   }
> 
>   // And other methods to get line no/column no as needed.
> }
> ==========================================================


