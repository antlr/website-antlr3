From amejdi at ertonline.gr  Mon Dec  2 03:15:57 2002
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Tree parser changes Token type?
References: <ED3F9D3D-03C3-11D7-B537-0030653DE0D6@jguru.com> <3DE7ACDA.1070606@ertonline.gr>
Message-ID: <3DEB40ED.4020507@ertonline.gr>

Mea Culpa!
instead of d.setType(WHILE_DO); should write #d.setType(WHILE_DO);
The Token's type was changed but the AST node created for token d
has the original type of d which is DO.

Anakreon Mejdi wrote:
> There is only one DO in the test file.
> The System.out should be for that "DO" only.
> In the tree printed, DO has the original type (unmodified) and
> the tree structure is the expected one.
> If the lexer had a problem with DO how could the parser have matched the
> rule do_statement.
> In the lexer the DO is defined anyway.
> 
> I solved the problem by modifying the tree parser
> not #(DO_WHILE... but (#DO ...
> 
> If you want the grammar for further investigation I can post it.
> 
> Anakreon
> 
> Terence Parr wrote:
> 
>>Howdy.  It looks like you have a problem in the lexer not the parser.  
>>You probably reference a "Do" somewhere or don't define DO in the lexer.
>>
>>Terence
>>
>>On Friday, November 29, 2002, at 04:09  AM, Anakreon Mejdi wrote:
>>
>>
>>
>>>I observed somthing really strange.
>>>The parser changes the type of the Token (which I verified with a
>>>System.out) but when the tree is printed (with ASTVisitor) the Token
>>>apears to have the original type.
>>>
>>>The mail has two attachments.
>>>The file used for testing and the output of the program.
>>>Here is the rule for the do statement.
>>>do_statement
>>>  { boolean whileFound = false;}
>>>  :
>>>  d:DO^
>>>  (
>>>  /*
>>>    The problem is when
>>>    do while a < 0
>>>        while z > 3
>>>          .....
>>>        wend
>>>        ...
>>>    loop
>>>    can not distinguish betwen do while .. while .. wend loop
>>>    It should be ok
>>>   */
>>>    options {
>>>        warnWhenFollowAmbig = false;
>>>    }
>>>    :
>>>    STATEMENT_END!
>>>    | do_while {whileFound = true; d.setType(DO_WHILE);} 
>>>(STATEMENT_END!)?
>>>  )?
>>>  (statements)*
>>>  LOOP!
>>>  (
>>>    {!whileFound}? do_while {d.setType(WHILE_DO);}
>>>    |
>>>  )
>>>  {
>>>      System.out.println("DO type is:" + d.getType());
>>>  }
>>>  ;
>>>
>>>If interested in investigating the phainomenon I can send all the 
>>>gramar.
>>>
>>>By.
>>>Anakreon
>>>
>>>
>>>
>>>Your use of Yahoo! Groups is subject to 
>>>http://docs.yahoo.com/info/terms/
>>>
>>>Vbs Parser
>>>DO type is:67
>>>found obj_member:eof
>>>found obj_name: rs
>>>found not
>>>found obj_member:bof
>>>found obj_name: rs
>>>found not
>>>found and
>>>found obj_member:Fields
>>>found obj_member:Count
>>>found obj_name: rs
>>>found minus
>>>found obj_member:Fields
>>>found obj_member:Name
>>>found obj_name: rs
>>>found if and expr and statements
>>>ANTLR Tree Parsing RecognitionException Error:
>>>File Name:<AST>
>>>[-1:-1]
>>><AST>: unexpected AST node: Do
>>>	at gr.omadak.leviathan.asp.VbsTree.if_statement(VbsTree.java:841)
>>>	at gr.omadak.leviathan.asp.VbsTree.statement(VbsTree.java:354)
>>>	at gr.omadak.leviathan.asp.VbsTree.statements(VbsTree.java:1999)
>>>	at gr.omadak.leviathan.asp.VbsTree.expr_statement(VbsTree.java:1979)
>>>	at gr.omadak.leviathan.asp.VbsTree.if_statement(VbsTree.java:797)
>>>	at gr.omadak.leviathan.asp.VbsTree.statement(VbsTree.java:354)
>>>	at gr.omadak.leviathan.asp.VbsTree.start_rule(VbsTree.java:193)
>>>	at Main2.main(Main2.java:33)
>>>
>>>
>>>found if and expr and statements
>>>found if
>>>AST
>>>
>>>[73]
>>>if [23]
>>>  EXPR [50]
>>>     iMode [77]
>>>     = [51]
>>>     1 [61]
>>>  if [23]
>>>     EXPR [50]
>>>        and [4]
>>>           not [29]
>>>              rs [59]
>>>                 . [63]
>>>                    eof [60]
>>>           not [29]
>>>              rs [59]
>>>                 . [63]
>>>                    bof [60]
>>>     for [21]
>>>        FOR_INIT [66]
>>>           = [78]
>>>              i [77]
>>>              EXPR [50]
>>>                 0 [61]
>>>           to [43]
>>>              - [90]
>>>                 rs [59]
>>>                    . [63]
>>>                       Fields [60]
>>>                    . [63]
>>>                       Count [60]
>>>                 1 [61]
>>>        rs [59]
>>>           . [63]
>>>              Fields [60]
>>>              PARAMETERS [56]
>>>                 EXPR [50]
>>>                    i [77]
>>>           . [63]
>>>              Name [60]
>>>        next [28]
>>>     = [78]
>>>        j [77]
>>>        0 [61]
>>>     Do [9]
>>>        While [46]
>>>           EXPR [50]
>>>              Not [29]
>>>                 rs [59]
>>>                    . [63]
>>>                       EOF [60]
>>>        for [21]
>>>           FOR_INIT [66]
>>>              = [78]
>>>                 i [77]
>>>                 EXPR [50]
>>>                    0 [61]
>>>              to [43]
>>>                 - [90]
>>>                    rs [59]
>>>                       . [63]
>>>                          Fields [60]
>>>                       . [63]
>>>                          Count [60]
>>>                    1 [61]
>>>           rs [59]
>>>              . [63]
>>>                 Fields [60]
>>>                 PARAMETERS [56]
>>>                    EXPR [50]
>>>                       i [77]
>>>           next [28]
>>>        rs [59]
>>>           . [63]
>>>              MoveNext [60]
>>>        = [78]
>>>           j [77]
>>>           + [89]
>>>              j [77]
>>>              1 [61]
>>>
>>>
>>>[73]
>>><%@Language="VBSCript"%>
>>><%
>>>   if iMode = 1 then
>>>			if not rs.eof and not rs.bof then
>>>       for i=0 to rs.Fields.Count-1
>>>           rs.Fields(i).Name
>>>       next
>>>       j=0
>>>				Do While Not rs.EOF
>>>           for i=0 to rs.Fields.Count-1
>>>               rs.Fields(i)
>>>           next
>>>           rs.MoveNext()
>>>           j=j+1
>>>				Loop
>>>     end if
>>>		end if
>>>%>
>>>
>>>
>>--
>>Co-founder, http://www.jguru.com
>>Creator, ANTLR Parser Generator: http://www.antlr.org
>>Lecturer in Comp. Sci., University of San Francisco
>>
>>
>> 
>>
>>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
>>
>>
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Mon Dec  2 19:22:49 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Look-ahead changes when rules lifted up
Message-ID: <ash829+87lu@eGroups.com>

Given:

	elementConstructor
		: XML_TAG_START { pushContentLexer(); } QNAME attributeList
           (xmlEmptyElement | xmlNonEmptyElement) { popLexer(); } ;

	xmlEmptyElement
		: XML_EMPTY_ELEMENT_END ;

	xmlNonEmptyElement
		: XML_END_TAG (elementContent)*
		  XML_END_TAG_START QNAME (S)? XML_TAG_END ;

where:

	XML_TAG_START: '<' ;
	XML_EMPTY_ELEMENT_END: "/>" ;
	XML_END_TAG: '>' ;
	XML_END_TAG_START: "</" ;

with sufficient look-ahead, this doesn't work properly.  When parsing:

	<a></a>, <b/>
	      ^______________here

it needlessly looks-ahead at the ',' even though looking at the '>' alone is sufficient.  The trouble is that the ',' is parsed in the wrong lexer (it hasn't been popped yet).

If, however, I move the popLexer() action code out of the
elementConstructor rule and (redundantly) into the xmlEmptyElement and
xmlNonEmptyElement rules as in:

	xmlEmptyElement
		: XML_EMPTY_ELEMENT_END { popLexer(); } ;

	xmlNonEmptyElement
		: XML_END_TAG (elementContent)*
		  XML_END_TAG_START QNAME (S)? XML_TAG_END { popLexer(); } ;

then everything works fine: it no longer looks ahead past the '>' at
the ',', the lexer is popped, and the previous lexer returns the comma
correctly.

Why should moving the action code make a difference?  This is really
annoying and took dumb-luck and lot of trial-and-error to figure out
how to work around this.

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Mon Dec  2 22:13:28 2002
From: gackle at shaw.ca (Daniel Gackle)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Can't build antlr-2.7.2a4-CSharp
Message-ID: <NEBBKKODFMOCLEEIOELFIENACJAA.gackle@shaw.ca>

I am trying to upgrade from the antlr-2.7.2a2 version of the C# codegen to
antlr-2.7.2a4.  I can't get it to build.  I've tried with 5 different
releases of antlr-2.7.2.a2 through 2.7.2.a6.  The most common error seems to
be:

  CSharpCodeGenerator.java:46: antlr.CSharpCodeGenerator
  should be declared abstract; it does not define
processActionForTreeSpecifiers
  (java.lang.String,int,antlr.RuleBlock,antlr.ActionTransInfo) in
antlr.CodeGenerator

Can anyone assist?  What version of regular antlr is antlr-2.7.2a4 C#
supposed to go with?

The reason I want to upgrade is because of the improved support for
heterogeneous ASTs.  Can anyone (Michael? :) explain:

  * what these improvements actually were;
  * what version they were added to?

I ask the latter because the version of antlr-2.7.2a2-CSharp.zip on the
website is quite different from the one I downloaded several months ago, and
most of the AST changes seem to be in it.  But I have only taken a
superficial look.

Thanks,
Daniel


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Dec  3 05:29:24 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Re: Can't build antlr-2.7.2a4-CSharp
In-Reply-To: <NEBBKKODFMOCLEEIOELFIENACJAA.gackle@shaw.ca>
Message-ID: <asibjk+mshb@eGroups.com>

--- In antlr-interest@y..., Daniel Gackle <gackle@s...> wrote:
> I am trying to upgrade from the antlr-2.7.2a2 version of the C# 
codegen to
> antlr-2.7.2a4.  I can't get it to build.  I've tried with 5 
different
> releases of antlr-2.7.2.a2 through 2.7.2.a6.  The most common error 
seems to
> be:
> 
>   CSharpCodeGenerator.java:46: antlr.CSharpCodeGenerator
>   should be declared abstract; it does not define
> processActionForTreeSpecifiers
>   (java.lang.String,int,antlr.RuleBlock,antlr.ActionTransInfo) in
> antlr.CodeGenerator
> 
> Can anyone assist?

That is strange. I am aware of quite a few people/organizations using 
2.7.2a4/C# and they got it from the website. Could this be a case of 
mixing ANTLR versions?. ANTLR C# 2.7.2a4 is NOT compatible with 
earlier ANTLR versions. Your projects and grammar files should be 
fine however.

> What version of regular antlr is antlr-2.7.2a4 C#
> supposed to go with?

ANTLR 2.7.2a4. It proably would work for 2.7.2a5 and 2.7.2a6 as well 
but I haven't tested either scenario [ nor do I intend to  ;-) ]. An 
update to the latest ANTLR release is in the works....

> The reason I want to upgrade is because of the improved support for
> heterogeneous ASTs.  Can anyone (Michael? :) explain:
> 
>   * what these improvements actually were;

If you decide to use heterogeneous ASTs as described in the ANTLR ref 
manual, you will find that you are now able to. Previous versions of 
ANTLR/C# didn't support this capability.

[WARNING: TreeParsers and hetero ASTs do not play well together 
particulartly if you have set additional node pointers such as 
parentNode and previousNode (and maybe other pointers too). This is 
due to the semi-deep cloning semantics employed by ANTLR. You will 
need to wait until after your final TreeParser transformation before 
setting such node links.]

>   * what version they were added to?

You should be using the latest version - currently 2.7.2a4 for C#. 
Work is underway on a 2.7.2a6 release of ANTLR/C# too.

> I ask the latter because the version of antlr-2.7.2a2-CSharp.zip on 
the
> website is quite different from the one I downloaded several months 
ago, and
> most of the AST changes seem to be in it.  But I have only taken a
> superficial look.

Many of the AST changes are indeed in it. It was released as a 
service to exisiting 2.7.2a2 users because it 2.7.2a2 had been around 
for so long.

You should be looking at 2.7.2a4 now and 2.7.2a6 once it is released 
since no fixes are offered for older releases and support will 
probably begin with "Are you using the latest version with all the 
bug fixes, patches and cool features Daniel....."

Cheers!,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Philip.Hunt at advent-comm.co.uk  Tue Dec  3 07:58:07 2002
From: Philip.Hunt at advent-comm.co.uk (Philip Hunt)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Is this stylistically good Antlr code?
Message-ID: <F095685D00FAD41181940002B306BF57D91E40@EXCHANGE>


I am starting to use Antlr. As an exercise, I have written an expression
calculator that does 4 functions plus parentheses. It works, but I'm not
sure whether it is well-written.

Could someone look at it please, and tell me whether it is stylistically
good 
Antlr code? The code follows:


/* philcalc.g = Phil's example calculator parser */
/*------------------------------------------------------------------*/

class CalcLexer extends Lexer;

protected DIGIT: '0'..'9';

INT: (DIGIT)+;

ADD_OP : '+' | '-';

MUL_OP : '*' | '/' ;

CR : '\n' | '\r' ;

WS : (' '|'\t') { _ttype = Token.SKIP; };


/*------------------------------------------------------------------*/
class CalcParser extends Parser;


stmt returns [float f=0]:
f=expr nl;

nl : (CR)*;

expr returns [float f=0]: 
f=addexpr ;

addexpr returns [float f=0]: {float m=0;}
f=mulexpr
(s:ADD_OP m=mulexpr
{
   if (s.getText().equals("+")){
      f += m;
   } else {
      f -= m;   
   }
}
)* ;

mulexpr returns [float f=0]: {float t=0;}
f=term
(s:MUL_OP t=term 
{
   if (s.getText().equals("*")){
      f *= t;
   } else {
      f /= t;
   }
}
)* ;

term returns [float f=0]: 
"(" f=expr ")"
| 
f=atom ;

atom returns [float f=0]: 
s:INT { f = (float)Integer.parseInt(s.getText()); }
;

/*------------------------------------------------------------------*/


-- 
Philip Hunt, <Philip.Hunt@advent-comm.co.uk>
This message is intended for the addressee only. It must not be disclosed
to, altered, copied or used by anyone other than the addressee(s). If you
have received this message in error, please notify our email administrator
at   postmaster@advent-comm.co.uk <mailto:postmaster@advent-comm.co.uk> and
destroy the message, removing it completely from your computer system. 
Thank you for your assistance. 

Mail Virus Warning
-------------------------------

This email and any attachment are believed to be free from viruses which
might affect any system into which they are received or opened, it is the
responsibility of the recipient to ensure that they are virus free.
 Advent Communications accepts no liability whatsoever for any direct,
indirect or consequential loss or damage arising in any way from receipt,
opening or use.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20021203/7b34c344/attachment.html
From Philip.Hunt at advent-comm.co.uk  Tue Dec  3 08:30:34 2002
From: Philip.Hunt at advent-comm.co.uk (Philip Hunt)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] lexical nondeterminism warning
Message-ID: <F095685D00FAD41181940002B306BF57D91E41@EXCHANGE>



I have a grammar, and when run Antlr on it, I get several warnings of
the form:
"warning: lexical nondeterminism between rules XXX and YYY on ..."

I know what is causing these warnings (I am using '-' to mean lots of
different 
things) and i am OK with them. Is there any way I can switch the warnings
off,
so that I only get the warnings that might indicate something is wrong?

I have tried:

   option { generateAmbigWarnings = true; }

but this doesn't work because this option is only allowed in parser rules, 
and I am using it in lexer rules.

-- 
Philip Hunt, <Philip.Hunt@advent-comm.co.uk>

This message is intended for the addressee only. It must not be disclosed
to, altered, copied or used by anyone other than the addressee(s). If you
have received this message in error, please notify our email administrator
at   postmaster@advent-comm.co.uk <mailto:postmaster@advent-comm.co.uk> and
destroy the message, removing it completely from your computer system. 
Thank you for your assistance. 

Mail Virus Warning
-------------------------------

This email and any attachment are believed to be free from viruses which
might affect any system into which they are received or opened, it is the
responsibility of the recipient to ensure that they are virus free.
 Advent Communications accepts no liability whatsoever for any direct,
indirect or consequential loss or damage arising in any way from receipt,
opening or use.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20021203/c5679a59/attachment.html
From mzukowski at yci.com  Tue Dec  3 08:41:12 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:10 2004
Subject: [antlr-interest] Is this stylistically good Antlr code?
Message-ID: <170826586F3BD511910D0200C110AAA8032B4F92@memail03.bco-home.com>

Typically you would use the token type to tell whether it was PLUS or MINUS
instead of testing the text itself.

PLUS: "+"
MINUS:"-"

addexpr returns [float f=0]: {float m=0;} 
           	f=mulexpr 
		(PLUS m=mulexpr { f += m; }
		| MINUS m=mulexpr { f -=m; }
		)* ; 

Otherwise it looks good to me.

Monty


-----Original Message-----
From: Philip Hunt [mailto:Philip.Hunt@advent-comm.co.uk]
Sent: Tuesday, December 03, 2002 7:58 AM
To: 'antlr-interest@yahoogroups.com'
Subject: [antlr-interest] Is this stylistically good Antlr code?




I am starting to use Antlr. As an exercise, I have written an expression 
calculator that does 4 functions plus parentheses. It works, but I'm not 
sure whether it is well-written. 
Could someone look at it please, and tell me whether it is stylistically
good 
Antlr code? The code follows: 


/* philcalc.g = Phil's example calculator parser */ 
/*------------------------------------------------------------------*/ 
class CalcLexer extends Lexer; 
protected DIGIT: '0'..'9'; 
INT: (DIGIT)+; 
ADD_OP : '+' | '-'; 
MUL_OP : '*' | '/' ; 
CR : '\n' | '\r' ; 
WS : (' '|'\t') { _ttype = Token.SKIP; }; 


/*------------------------------------------------------------------*/ 
class CalcParser extends Parser; 


stmt returns [float f=0]: 
f=expr nl; 
nl : (CR)*; 
expr returns [float f=0]: 
f=addexpr ; 
addexpr returns [float f=0]: {float m=0;} 
f=mulexpr 
(s:ADD_OP m=mulexpr 
{ 
   if (s.getText().equals("+")){ 
      f += m; 
   } else { 
      f -= m;   
   } 
} 
)* ; 
mulexpr returns [float f=0]: {float t=0;} 
f=term 
(s:MUL_OP t=term 
{ 
   if (s.getText().equals("*")){ 
      f *= t; 
   } else { 
      f /= t; 
   } 
} 
)* ; 
term returns [float f=0]: 
"(" f=expr ")" 
| 
f=atom ; 
atom returns [float f=0]: 
s:INT { f = (float)Integer.parseInt(s.getText()); } 
; 
/*------------------------------------------------------------------*/ 


-- 
Philip Hunt, <Philip.Hunt@advent-comm.co.uk> 
This message is intended for the addressee only. It must not be disclosed
to, altered, copied or used by anyone other than the addressee(s). If you
have received this message in error, please notify our email administrator
at   postmaster@advent-comm.co.uk <mailto:postmaster@advent-comm.co.uk> and
destroy the message, removing it completely from your computer system.
Thank you for your assistance. 

Mail Virus Warning
-------------------------------

This email and any attachment are believed to be free from viruses which
might affect any system into which they are received or opened, it is the
responsibility of the recipient to ensure that they are virus free.
 Advent Communications accepts no liability whatsoever for any direct,
indirect or consequential loss or damage arising in any way from receipt,
opening or use.

Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Dec  3 08:22:18 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Look-ahead changes when rules lifted up
Message-ID: <170826586F3BD511910D0200C110AAA8032B4F8F@memail03.bco-home.com>

You can't go changing lexers from the parser.  The parser has already
recieved k more tokens beyond the token you are looking at in the parser.
You must switch lexers from the lexer.

Monty

-----Original Message-----
From: Paul J. Lucas [mailto:dude@darkfigure.org]
Sent: Monday, December 02, 2002 7:23 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Look-ahead changes when rules lifted up


Given:

	elementConstructor
		: XML_TAG_START { pushContentLexer(); } QNAME attributeList
           (xmlEmptyElement | xmlNonEmptyElement) { popLexer(); } ;

	xmlEmptyElement
		: XML_EMPTY_ELEMENT_END ;

	xmlNonEmptyElement
		: XML_END_TAG (elementContent)*
		  XML_END_TAG_START QNAME (S)? XML_TAG_END ;

where:

	XML_TAG_START: '<' ;
	XML_EMPTY_ELEMENT_END: "/>" ;
	XML_END_TAG: '>' ;
	XML_END_TAG_START: "</" ;

with sufficient look-ahead, this doesn't work properly.  When parsing:

	<a></a>, <b/>
	      ^______________here

it needlessly looks-ahead at the ',' even though looking at the '>' alone is
sufficient.  The trouble is that the ',' is parsed in the wrong lexer (it
hasn't been popped yet).

If, however, I move the popLexer() action code out of the
elementConstructor rule and (redundantly) into the xmlEmptyElement and
xmlNonEmptyElement rules as in:

	xmlEmptyElement
		: XML_EMPTY_ELEMENT_END { popLexer(); } ;

	xmlNonEmptyElement
		: XML_END_TAG (elementContent)*
		  XML_END_TAG_START QNAME (S)? XML_TAG_END { popLexer(); } ;

then everything works fine: it no longer looks ahead past the '>' at
the ',', the lexer is popped, and the previous lexer returns the comma
correctly.

Why should moving the action code make a difference?  This is really
annoying and took dumb-luck and lot of trial-and-error to figure out
how to work around this.

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cela_vei at yahoo.com  Tue Dec  3 14:24:49 2002
From: cela_vei at yahoo.com (cela_vei)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Combining Antlr2.7a2 and PCCTS 1.33
Message-ID: <asjavh+fcea@eGroups.com>

Is it possible to use a mix of old and new grammer files?

I am using to PCCTS 1.33 to decode a text message. The structure
of the message is a list of headers followed by a body.

Headers

Body.


I already have Antlr parsing for the headers written in PCCTS1.33.

Now I want to parse the body with Antlr2.7a2.

Has anyone tried such an experiment?

Thanks
Cela


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Dec  3 13:35:56 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: Look-ahead changes when rules lifted up
Message-ID: <170826586F3BD511910D0200C110AAA8032B4F9D@memail03.bco-home.com>

> And how exactly does one do that (given that all the examples in the
documentation show changing lexers from the parser, e.g., Java/JavaDoc)?

Really?  The javadoc example in the examples/java/multiLexer only switches
lexers from a lexer.  Show me where the docs tell about switching lexers
from the parser.  There is a hard and fast rule that the parser can not talk
back to a lexer, so maybe the docs need changed to stress this point even
more.

>That aside, it doesn't answer my question since there should be no reason
why moving the code should change the behavior.

Moving the code changes what has been requested in the lookahead buffer.
Tokens are pulled on demand.

>Even that aside, for the '>' token, there is no reason it needs to
look-ahead at all since no other token starts with '>', i.e., it doesn't
need to look past it to disambiguate it.

But that is not how parsers work.  Rules are not methods.  They are not
independent of each other.  In fact they are dependent in ways that may seem
arbitrary until you understand lookahead computations.  Read Ter's thesis
for a good introduction to what is going on behind the scenes.


Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Tue Dec  3 11:24:47 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: Look-ahead changes when rules lifted up
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4F8F@memail03.bco-home.com>
Message-ID: <asj0dv+dkcc@eGroups.com>

--- In antlr-interest@y..., mzukowski@y... wrote:
> You can't go changing lexers from the parser.  The parser has already
> recieved k more tokens beyond the token you are looking at in the parser.
> You must switch lexers from the lexer.

And how exactly does one do that (given that all the examples in the documentation show changing lexers from the parser, e.g., Java/JavaDoc)?

That aside, it doesn't answer my question since there should be no reason why moving the code should change the behavior.

Even that aside, for the '>' token, there is no reason it needs to look-ahead at all since no other token starts with '>', i.e., it doesn't need to look past it to disambiguate it.

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Tue Dec  3 23:14:12 2002
From: gackle at shaw.ca (Daniel Gackle)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] 2.7.2a4 ANTLR/C# - build ok, panic shutdown
In-Reply-To: <1038945769.360.90939.m12@yahoogroups.com>
Message-ID: <NEBBKKODFMOCLEEIOELFGENECJAA.gackle@shaw.ca>

Micheal,

First, thanks for the reply.  I followed your advice, went back to 2.7.2a4
for ANTLR/C#, and got it to build.  It turns out my mistake was in trying to
compile the C# codegen files by themselves, using commands like "javac
CSharp*.java".  A simple "javac *.java" works fine.

Second, I think I have a bug to report.  Once I got 2.7.2a4 to build, my
code that worked fine with 2.7.2a2 wouldn't even run.  It simply
disappeared, no exception, no crash, no nothing.  What changed between
versions?  Well, 2.7.2a2 used Activator.CreateInstance to create a custom
token type.  This required me to send in an assembly-qualified name for my
type, like this:

  myLexer.setTokenObjectClass("MyClass.CustomToken,MyAssembly")

2.7.2a4 switched to Assembly.CreateInstance.  That doesn't work with
assembly-qualified names.  As a result, the tokens weren't getting created,
and panic() was getting called instead.  By taking the assembly bit off the
type name, like this:

  myLexer.setTokenObjectClass("MyClass.CustomToken")

I got the code to run.  That, however, is not the bug.  The bug has to do
with the panic routine:

  public virtual void  panic(string s)
  {
     Console.Error.WriteLine("CharScanner; panic: " + s);
     Environment.Exit(1);
  }

The problem with this is that my program is a GUI app, not a console one.
So the error message never gets displayed and the call to Environment.Exit
shuts down the whole program without any warning.  This cost me several
hours of painstakingly stepping through code, trying to pinpoint exactly
where the runtime was (as I thought) crashing in some strange way.  This
code may work for console apps but is a very non-standard way to handle
errors in a GUI.  IMHO it would be much better to throw an exception.  If
the client doesn't catch it, at least the .NET runtime will throw up its
default exception handler, guaranteeing that the error will be displayed in
some form.  (Other ANTLR errors are dealt with in this way and my code
handles them fine.)

Third, I must apologize for misspelling your name for the past 6 months.  I
don't know why I didn't notice it before!

Regards,
Daniel


-----Original Message-----

Message: 3
   Date: Tue, 03 Dec 2002 13:29:24 -0000
   From: "micheal_jor" <open.zone@virgin.net>
Subject: Re: Can't build antlr-2.7.2a4-CSharp

>> What version of regular antlr is antlr-2.7.2a4 C#
>> supposed to go with?

>ANTLR 2.7.2a4. It proably would work for 2.7.2a5 and 2.7.2a6 as well
>but I haven't tested either scenario [ nor do I intend to  ;-) ]. An
>update to the latest ANTLR release is in the works....



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From richard.ney at aspect.com  Tue Dec  3 23:52:10 2002
From: richard.ney at aspect.com (Ney, Richard)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] 2.7.2a4 ANTLR/C# - build ok, panic shutdown
Message-ID: <0F9CBE7F81945C4BB7A32BE6E7656EE0722799@sac1exch3.aspect.com>

Daniel,

Why don't you just write an override method for the panic? In it you could
throw your own exception. Most of the error handlers for ANTLR C# are
console based and require an override method for customization.

-Richard

-----Original Message-----
From: Daniel Gackle [mailto:gackle@shaw.ca] 
Sent: Tuesday, December 03, 2002 11:14 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] 2.7.2a4 ANTLR/C# - build ok, panic shutdown


Micheal,

First, thanks for the reply.  I followed your advice, went back to 2.7.2a4
for ANTLR/C#, and got it to build.  It turns out my mistake was in trying to
compile the C# codegen files by themselves, using commands like "javac
CSharp*.java".  A simple "javac *.java" works fine.

Second, I think I have a bug to report.  Once I got 2.7.2a4 to build, my
code that worked fine with 2.7.2a2 wouldn't even run.  It simply
disappeared, no exception, no crash, no nothing.  What changed between
versions?  Well, 2.7.2a2 used Activator.CreateInstance to create a custom
token type.  This required me to send in an assembly-qualified name for my
type, like this:

  myLexer.setTokenObjectClass("MyClass.CustomToken,MyAssembly")

2.7.2a4 switched to Assembly.CreateInstance.  That doesn't work with
assembly-qualified names.  As a result, the tokens weren't getting created,
and panic() was getting called instead.  By taking the assembly bit off the
type name, like this:

  myLexer.setTokenObjectClass("MyClass.CustomToken")

I got the code to run.  That, however, is not the bug.  The bug has to do
with the panic routine:

  public virtual void  panic(string s)
  {
     Console.Error.WriteLine("CharScanner; panic: " + s);
     Environment.Exit(1);
  }

The problem with this is that my program is a GUI app, not a console one. So
the error message never gets displayed and the call to Environment.Exit
shuts down the whole program without any warning.  This cost me several
hours of painstakingly stepping through code, trying to pinpoint exactly
where the runtime was (as I thought) crashing in some strange way.  This
code may work for console apps but is a very non-standard way to handle
errors in a GUI.  IMHO it would be much better to throw an exception.  If
the client doesn't catch it, at least the .NET runtime will throw up its
default exception handler, guaranteeing that the error will be displayed in
some form.  (Other ANTLR errors are dealt with in this way and my code
handles them fine.)

Third, I must apologize for misspelling your name for the past 6 months.  I
don't know why I didn't notice it before!

Regards,
Daniel


-----Original Message-----

Message: 3
   Date: Tue, 03 Dec 2002 13:29:24 -0000
   From: "micheal_jor" <open.zone@virgin.net>
Subject: Re: Can't build antlr-2.7.2a4-CSharp

>> What version of regular antlr is antlr-2.7.2a4 C#
>> supposed to go with?

>ANTLR 2.7.2a4. It proably would work for 2.7.2a5 and 2.7.2a6 as well 
>but I haven't tested either scenario [ nor do I intend to  ;-) ]. An 
>update to the latest ANTLR release is in the works....



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Wed Dec  4 04:58:50 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: 2.7.2a4 ANTLR/C# - build ok, panic shutdown
In-Reply-To: <NEBBKKODFMOCLEEIOELFGENECJAA.gackle@shaw.ca>
Message-ID: <asku6a+sk1h@eGroups.com>

Hi Daniel,

> First, thanks for the reply.  I followed your advice, went back to 
2.7.2a4
> for ANTLR/C#, and got it to build.  It turns out my mistake was in 
trying to
> compile the C# codegen files by themselves, using commands 
like "javac
> CSharp*.java".  A simple "javac *.java" works fine.

The following files in the ANTLR root directory are provided just for 
this purpose:

build.bat
build-actions.bat
build-codegen.bat

The csharp-runtime.html document in the 'doc' directory has further 
information about their building ANTLR/C#.

<SNIP>

> That doesn't work with
> assembly-qualified names.  As a result, the tokens weren't getting 
created,
> and panic() was getting called instead.  By taking the assembly bit 
off the
> type name, like this:
> 
>   myLexer.setTokenObjectClass("MyClass.CustomToken")
> 
> I got the code to run.

This should have been included in the release announcement for 
2.7.2a4 and the updated 2.7.2a2. My apologies to ANTLR/C# users if it 
wasn't.

> That, however, is not the bug.  The bug has to do
> with the panic routine:
> 
>   public virtual void  panic(string s)
>   {
>      Console.Error.WriteLine("CharScanner; panic: " + s);
>      Environment.Exit(1);
>   }

You are correct that Environment.Exit is bad for GUI apps. I'll look 
into this. In the meantime you can override the method as Richard 
suggests in his reply.

Cheers!,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Wed Dec  4 15:31:46 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: 2.7.2a4 ANTLR/C# - build ok, panic shutdown
In-Reply-To: <asm1tl+p01d@eGroups.com>
Message-ID: <asm392+g6o7@eGroups.com>

Daniel,

> Overriding panic() is certainly a workaround, and indeed was the 
> first thing I did after discovering the problem.  However, I don't 
> really see that as the point.  The important thing is whether a 
> library should handle fatal errors by shutting down the calling 
> application without warning!

Not ideally but it works [ ;-) ], it's due for revision real soon 
anyways.

> A further problem with overriding panic() is that while you can do 
> this for lexers, you cannot do it for parsers or tree parsers, 
where 
> it is a static method.
> 
> By the way, Micheal, just for curiosity I also built the C# codegen 
> with Antlr 2.7.2a6.  I was able to do so quite easily, and my unit 
> tests all passed without modification (unlike the upgrade from 
> 2.7.2a2 to 2.7.2a4).

I did mention that it should be possible. There are a few problems 
with doing that (some of which you've already encountered but you can 
certainly do useful work with it).

Care to talk a little about these unit tests and the tools/harness 
you employ for them. About your ANTLR-related testing in general in 
fact.

> In fact, the discrepancies between the C# and 
> the main Antlr branch are now quite few, which bodes well for 
merging 
> the two streams.

I'm not sure I follow you here. What discrepancies are you referring 
to?

> What I wasn't able to get working in Antlr 2.7.2a6 was that third 
> parameter that Terence added to the AST constructor syntax: #
> [FOO, "Foo", "FooNode"] (or something like that!)  I couldn't get 
> that to work either with Java or C# (having ported Terence's 
changes 
> to the C# action.g).  Antlr rejects the third parameter with a 
syntax 
> error saying "unexpected ','".  Is there something else one needs 
to 
> do, to get Antlr to use the new action.g?

Quite a bit more. ANTLR/C# 2.7.2a6 would debut as soon as it's all 
done.

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Wed Dec  4 15:08:37 2002
From: gackle at shaw.ca (slightlynew)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: 2.7.2a4 ANTLR/C# - build ok, panic shutdown
In-Reply-To: <asku6a+sk1h@eGroups.com>
Message-ID: <asm1tl+p01d@eGroups.com>

Hi Micheal & Richard,

Overriding panic() is certainly a workaround, and indeed was the 
first thing I did after discovering the problem.  However, I don't 
really see that as the point.  The important thing is whether a 
library should handle fatal errors by shutting down the calling 
application without warning!

A further problem with overriding panic() is that while you can do 
this for lexers, you cannot do it for parsers or tree parsers, where 
it is a static method.

By the way, Micheal, just for curiosity I also built the C# codegen 
with Antlr 2.7.2a6.  I was able to do so quite easily, and my unit 
tests all passed without modification (unlike the upgrade from 
2.7.2a2 to 2.7.2a4).  In fact, the discrepancies between the C# and 
the main Antlr branch are now quite few, which bodes well for merging 
the two streams.

What I wasn't able to get working in Antlr 2.7.2a6 was that third 
parameter that Terence added to the AST constructor syntax: #
[FOO, "Foo", "FooNode"] (or something like that!)  I couldn't get 
that to work either with Java or C# (having ported Terence's changes 
to the C# action.g).  Antlr rejects the third parameter with a syntax 
error saying "unexpected ','".  Is there something else one needs to 
do, to get Antlr to use the new action.g?

Daniel


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Wed Dec  4 22:35:38 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: Ignoring comments in syntactic predicates
In-Reply-To: <Pine.LNX.4.21.0212042224460.20385-100000@oldmac.pauljlucas.org>
Message-ID: <asms3q+skvs@eGroups.com>

--- In antlr-interest@y..., "Paul J. Lucas" <dude@d...> wrote:
> 	The problem above is, even with k > 1, that the look-ahead
> 	token of '{' is the same as the start and is reported as
> 	ambiguous.

I meant to write:

	... '{' is the same as the start OF A COMMENT ...

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Wed Dec  4 22:24:25 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: Look-ahead changes when rules lifted up
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4F9D@memail03.bco-home.com>
Message-ID: <asmrep+p21p@eGroups.com>

--- In antlr-interest@y..., mzukowski@y... wrote:
> Really?  The javadoc example in the examples/java/multiLexer only
> switches lexers from a lexer.

After checking again, I see that the rules are in fact lexer rules.  My mistake.

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dude at darkfigure.org  Wed Dec  4 22:33:22 2002
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Ignoring comments in syntactic predicates
Message-ID: <Pine.LNX.4.21.0212042224460.20385-100000@oldmac.pauljlucas.org>

	I have rules like:

		ELEMENT options { ignore = IGNORE; }
		    : ("element" '{')=> "element"
		    | "element"
		    ;
		
		IGNORE : (WS | COMMENT) ;

		COMMENT
		    : "{--" ( options { greedy = false; } : . )* "--}" {
		      	$setType( Token.SKIP );
		      }
		    ;

	i.e., "element" when followed by '{' is treated differently than
	"element" when not followed by '{'.  Comments should not matter,
	so:

		element {-- comment --} { ...

	should be treated the same as:

		element { ...

	The problem above is, even with k > 1, that the look-ahead
	token of '{' is the same as the start and is reported as
	ambiguous.

	Is there a way to get rid of the ambiguity?

	- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Dec  4 21:57:29 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: 2.7.2a4 ANTLR/C# - build ok, panic shutdown
In-Reply-To: <asm1tl+p01d@eGroups.com>
Message-ID: <700B6DA8-0816-11D7-B537-0030653DE0D6@jguru.com>


On Wednesday, December 4, 2002, at 03:08  PM, slightlynew wrote:
> What I wasn't able to get working in Antlr 2.7.2a6 was that third
> parameter that Terence added to the AST constructor syntax: #
> [FOO, "Foo", "FooNode"] (or something like that!)  I couldn't get
> that to work either with Java or C# (having ported Terence's changes
> to the C# action.g).  Antlr rejects the third parameter with a syntax
> error saying "unexpected ','".  Is there something else one needs to
> do, to get Antlr to use the new action.g?

Hmm...the latest version should have that.  I could have sworn I tested 
that.  I updated this java/action.g rule:

protected
AST_CONSTRUCTOR!
         :       '[' (WS)? x:AST_CTOR_ELEMENT (WS)?
                 (',' (WS)? y:AST_CTOR_ELEMENT (WS)? )?
                 (',' (WS)? z:AST_CTOR_ELEMENT (WS)? )? ']'
                 {
                 String args = x.getText();
                 if ( y!=null ) {
                         args += ","+y.getText();
                 }
                 if ( z!=null ) {
                         args += ","+z.getText();
                 }
                 $setText(generator.getASTCreateString(null,args));
                 }
         ;

To allow the 3rd arg.  Hmm....

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From andreev at quorum.ru  Thu Dec  5 01:30:09 2002
From: andreev at quorum.ru (alekseyandreev)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Help me please to improve lexer
Message-ID: <asn6b1+lmu0@eGroups.com>

My lexer grammar looks like this:

START options { ignore WS; } 
   : "aaa"{do();} "bbb"{do();} "ccc"{do();}
   | "ddd"{do();} "eee"{do();}
   | "fff"{do();}  XXX {do();}
   |  YYY {do();}
   ;
XXX options { ignore WS; } 
   : "iii"{do();} "jjj"{do();}
   | "kkk"{do();}
   ;
YYY options { ignore WS; } 
   : "lll"{do();} "mmm"{do();}
   | "nnn"{do();}
   ;

Is there any opportunity to remove actions {do();}
after every element and have analogue behavior?

Aleksey


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hrvoje.nezic at envox-lab.hr  Thu Dec  5 05:36:21 2002
From: hrvoje.nezic at envox-lab.hr (Hrvoje Nezic)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] #setType (C++)
Message-ID: <000c01c29c63$50354940$1301a8c0@envox.local.hr>

Is it possible to use #setType in C++?
 
In options I declared:
    buildAST = true;

and then tried to use #setType in rules:

unaryExpr
:    
    PLUS^ { #PLUS.setType(UNARY_PLUS); } ...
    ...
;

This is translated into:

    antlr::RefAST tmp19_AST = antlr::nullAST;
    tmp19_AST.setType(UNARY_PLUS);

and cannot be compiled, because ASTRefCount doesn't have 
the setType method (RefAST is defined as ASTRefCount<AST>).

Is there a workaround for this, or am I doing something wrong?

Regards,
Hrvoje Nezic



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Thu Dec  5 06:02:43 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] #setType (C++)
In-Reply-To: <000c01c29c63$50354940$1301a8c0@envox.local.hr>; from hrvoje.nezic@envox-lab.hr on Thu, Dec 05, 2002 at 02:36:21PM +0100
References: <000c01c29c63$50354940$1301a8c0@envox.local.hr>
Message-ID: <20021205150243.J2603@cs.utwente.nl>

Hi,

On Thu, Dec 05, 2002 at 02:36:21PM +0100, Hrvoje Nezic wrote:
> Is it possible to use #setType in C++?
>  
> In options I declared:
>     buildAST = true;
> 
> and then tried to use #setType in rules:
> 
> unaryExpr
> :    
>     PLUS^ { #PLUS.setType(UNARY_PLUS); } ...
>     ...
> ;
> 
> This is translated into:
> 
>     antlr::RefAST tmp19_AST = antlr::nullAST;
>     tmp19_AST.setType(UNARY_PLUS);
> 
> and cannot be compiled, because ASTRefCount doesn't have 
> the setType method (RefAST is defined as ASTRefCount<AST>).
> 
> Is there a workaround for this, or am I doing something wrong?

Shouldn't you use #PLUS->setType( .. ) ? Due to the Refcounter you need to
use -> operator in stead of the dot.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 "Don't call me stupid." "Oh, right. To call you stupid would be an insult
    to stupid people. I've known sheep that could outwit you! I've worn
              dresses with higher IQs!" --- A Fish Called Wanda

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Thu Dec  5 06:34:02 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] #setType (C++)
Message-ID: <D8F2E44800D72F488A841D4C9A9972B8092D76@abyss4.advancedsw.com>

The syntax should be:

unaryExpr
:    
    p:PLUS^ { #p->setType(UNARY_PLUS); } ...
    ...
;

-----Original Message-----
From: Hrvoje Nezic [mailto:hrvoje.nezic@envox-lab.hr] 
Sent: Thursday, December 05, 2002 6:36 AM
To: ANTLR mailing list
Subject: [antlr-interest] #setType (C++)

Is it possible to use #setType in C++?
 
In options I declared:
    buildAST = true;

and then tried to use #setType in rules:

unaryExpr
:    
    PLUS^ { #PLUS.setType(UNARY_PLUS); } ...
    ...
;

This is translated into:

    antlr::RefAST tmp19_AST = antlr::nullAST;
    tmp19_AST.setType(UNARY_PLUS);

and cannot be compiled, because ASTRefCount doesn't have 
the setType method (RefAST is defined as ASTRefCount<AST>).

Is there a workaround for this, or am I doing something wrong?

Regards,
Hrvoje Nezic



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hrvoje.nezic at envox-lab.hr  Thu Dec  5 06:14:45 2002
From: hrvoje.nezic at envox-lab.hr (Hrvoje Nezic)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] #setType (C++)
References: <000c01c29c63$50354940$1301a8c0@envox.local.hr>
Message-ID: <000701c29c68$ae7c78c0$1301a8c0@envox.local.hr>

Ok, I realised that I have to use #PLUS->setType instead of
#PLUS.setType.

----- Original Message -----
From: "Hrvoje Nezic" <hrvoje.nezic@envox-lab.hr>
To: "ANTLR mailing list" <antlr-interest@yahoogroups.com>
Sent: Thursday, December 05, 2002 2:36 PM
Subject: [antlr-interest] #setType (C++)


> Is it possible to use #setType in C++?
>
> In options I declared:
>     buildAST = true;
>
> and then tried to use #setType in rules:
>
> unaryExpr
> :
>     PLUS^ { #PLUS.setType(UNARY_PLUS); } ...
>     ...
> ;
>
> This is translated into:
>
>     antlr::RefAST tmp19_AST = antlr::nullAST;
>     tmp19_AST.setType(UNARY_PLUS);
>
> and cannot be compiled, because ASTRefCount doesn't have
> the setType method (RefAST is defined as ASTRefCount<AST>).
>
> Is there a workaround for this, or am I doing something wrong?
>
> Regards,
> Hrvoje Nezic
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Thu Dec  5 08:12:24 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Help me please to improve lexer
Message-ID: <170826586F3BD511910D0200C110AAA8032B4FAE@memail03.bco-home.com>

You could override the match() rule, that gets called on everything, but you
would have to figure out in there whether you were doing WS or not.  Look at
your generated code to see what I mean.

Monty

-----Original Message-----
From: alekseyandreev [mailto:andreev@quorum.ru]
Sent: Thursday, December 05, 2002 1:30 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Help me please to improve lexer


My lexer grammar looks like this:

START options { ignore WS; } 
   : "aaa"{do();} "bbb"{do();} "ccc"{do();}
   | "ddd"{do();} "eee"{do();}
   | "fff"{do();}  XXX {do();}
   |  YYY {do();}
   ;
XXX options { ignore WS; } 
   : "iii"{do();} "jjj"{do();}
   | "kkk"{do();}
   ;
YYY options { ignore WS; } 
   : "lll"{do();} "mmm"{do();}
   | "nnn"{do();}
   ;

Is there any opportunity to remove actions {do();}
after every element and have analogue behavior?

Aleksey


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Thu Dec  5 18:04:58 2002
From: gackle at shaw.ca (slightlynew)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: 2.7.2a4 ANTLR/C# - build ok, panic shutdown
In-Reply-To: <asm392+g6o7@eGroups.com>
Message-ID: <asp0ka+2jjd@eGroups.com>

Micheal,

> Care to talk a little about these unit tests and the tools/harness
> you employ for them. About your ANTLR-related testing in general in
> fact.

Sure.  I'm using NUnit 2.0.  I write unit tests to exercise whatever 
production code I write.  The unit tests are in a separate project, 
which I find to be easiest for a number of reasons; for example, 
the production code doesn't have to ship with a dependency on the 
test framework.

The unit tests' job is, of course, to catch errors and verify that 
the code is behaving correctly.  But over time they grow into a 
comprehensive test suite that (usually) fails immediately when some 
aspect of the program is broken.  Knowing right away whether 
something's been messed up is remarkably freeing to the developer.  A 
good analogy is that of a safety net underneath a tightrope walker.  
You can go faster and try riskier things without fear.  In 
particular, upgrading something from one version to the next becomes 
relatively low-risk and painless.

In terms of ANTLR, the unit tests call my lexer and parser with 
various expressions, statements, and so on, verifying that the well-
formed stuff is parsed as expected, while the invalid stuff generates 
the expected errors. I try to imagine weird things that might go 
wrong and then write tests that will fail in those cases.  It's not 
complicated.

Many people think that systematic unit testing means taking a 
productivity hit in exchange for greater quality, because of the time 
it takes to write the tests.  But actually, in my experience, it 
*saves* time.  That's because there's far less manually stepping 
through code, troubleshooting weird integration issues, etc.
And, the time you're saving is largely in the drudgery aspects of 
programming.  That means you spend a higher percentage of your time 
coding, which is the fun part of programming.  So it turns out that 
systematic unit testing gives greater productivity, better quality, 
and more fun, all at the same time.  I'm not sure I could claim that 
for any other programming practice I've tried.

The picture is different with an already-existing large system with 
no unit tests.  In that case, it may not make sense to go back and 
write, say, a unit test for every public method.  But you can still 
use xUnit to write higher-level functional tests that give you good 
coverage, and many of the above benefits.

- Daniel

--- In antlr-interest@y..., "micheal_jor" <open.zone@v...> wrote:
> Daniel,
> 
> > Overriding panic() is certainly a workaround, and indeed was the 
> > first thing I did after discovering the problem.  However, I 
don't 
> > really see that as the point.  The important thing is whether a 
> > library should handle fatal errors by shutting down the calling 
> > application without warning!
> 
> Not ideally but it works [ ;-) ], it's due for revision real soon 
> anyways.
> 
> > A further problem with overriding panic() is that while you can 
do 
> > this for lexers, you cannot do it for parsers or tree parsers, 
> where 
> > it is a static method.
> > 
> > By the way, Micheal, just for curiosity I also built the C# 
codegen 
> > with Antlr 2.7.2a6.  I was able to do so quite easily, and my 
unit 
> > tests all passed without modification (unlike the upgrade from 
> > 2.7.2a2 to 2.7.2a4).
> 
> I did mention that it should be possible. There are a few problems 
> with doing that (some of which you've already encountered but you 
can 
> certainly do useful work with it).
> 
> Care to talk a little about these unit tests and the tools/harness 
> you employ for them. About your ANTLR-related testing in general in 
> fact.
> 
> > In fact, the discrepancies between the C# and 
> > the main Antlr branch are now quite few, which bodes well for 
> merging 
> > the two streams.
> 
> I'm not sure I follow you here. What discrepancies are you 
referring 
> to?
> 
> > What I wasn't able to get working in Antlr 2.7.2a6 was that third 
> > parameter that Terence added to the AST constructor syntax: #
> > [FOO, "Foo", "FooNode"] (or something like that!)  I couldn't get 
> > that to work either with Java or C# (having ported Terence's 
> changes 
> > to the C# action.g).  Antlr rejects the third parameter with a 
> syntax 
> > error saying "unexpected ','".  Is there something else one needs 
> to 
> > do, to get Antlr to use the new action.g?
> 
> Quite a bit more. ANTLR/C# 2.7.2a6 would debut as soon as it's all 
> done.
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Thu Dec  5 18:01:03 2002
From: gackle at shaw.ca (slightlynew)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: 2.7.2a4 ANTLR/C# - build ok, panic shutdown
In-Reply-To: <700B6DA8-0816-11D7-B537-0030653DE0D6@jguru.com>
Message-ID: <asp0cv+h6sk@eGroups.com>

Ter,

> I updated this java/action.g rule [...]
> To allow the 3rd arg.  Hmm....

Oh no, that's definitely there.  Let me try to express this more 
clearly.  I tried two separate things, one with Java Antlr and one 
with C#.  Neither worked.

(1) For C#, I ported your changes to java/action.g to 
csharp/action.g.  In other words, I added your new AST_CONSTRUCTOR 
rule to the C# version.  This didn't work, but I didn't really expect 
it to, because Micheal had already implied it wouldn't until the 
2.7.2a6 C# codegen comes out.  And he has since confirmed that.

(2) For Java, I didn't have to change action.g at all, because you'd 
already done so.  I was just trying to use it.  I modified a grammar 
to pass a third argument to an AST constructor, and then tried to run 
java Antlr on it.  It didn't work.  In fact, I got the same syntax 
error as with the C#: "unexpected ','".  This was why I asked, "Is 
there something else one needs to do, to get Antlr to use the new 
action.g?"  The answer is "yes" in the C# case because 2.7.2a6 isn't 
out yet.  But what about the Java case?

Maybe there are some crossed wires and I wasn't really using the Java 
2.7.2a6 codegen... but I definitely changed my grammar to 
say "Language = Java" instead of C#.

- Daniel

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> 
> On Wednesday, December 4, 2002, at 03:08  PM, slightlynew wrote:
> > What I wasn't able to get working in Antlr 2.7.2a6 was that third
> > parameter that Terence added to the AST constructor syntax: #
> > [FOO, "Foo", "FooNode"] (or something like that!)  I couldn't get
> > that to work either with Java or C# (having ported Terence's 
changes
> > to the C# action.g).  Antlr rejects the third parameter with a 
syntax
> > error saying "unexpected ','".  Is there something else one needs 
to
> > do, to get Antlr to use the new action.g?
> 
> Hmm...the latest version should have that.  I could have sworn I 
tested 
> that.  I updated this java/action.g rule:
> 
> protected
> AST_CONSTRUCTOR!
>          :       '[' (WS)? x:AST_CTOR_ELEMENT (WS)?
>                  (',' (WS)? y:AST_CTOR_ELEMENT (WS)? )?
>                  (',' (WS)? z:AST_CTOR_ELEMENT (WS)? )? ']'
>                  {
>                  String args = x.getText();
>                  if ( y!=null ) {
>                          args += ","+y.getText();
>                  }
>                  if ( z!=null ) {
>                          args += ","+z.getText();
>                  }
>                  $setText(generator.getASTCreateString(null,args));
>                  }
>          ;
> 
> To allow the 3rd arg.  Hmm....
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From avoelker at yahoo.com  Thu Dec  5 17:22:59 2002
From: avoelker at yahoo.com (Andrew Voelker)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: Help me please to improve lexer
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4FAE@memail03.bco-home.com>
Message-ID: <asou5j+p0b9@eGroups.com>

Try the following:

START options { ignore WS; } :
("aaa" "bbb" "ccc" | "ddd" "eee" | "fff" XXX | YYY) { do(); };

XXX options { ignore WS; } :
("iii" "jjj" | "kkk"} { do(); };

YYY options { ignore WS; } :
("lll" "mmmm" | "nnnn") { do(); };

-avoelker

> -----Original Message-----
> From: alekseyandreev [mailto:andreev@q...]
> Sent: Thursday, December 05, 2002 1:30 AM
> To: antlr-interest@y...
> Subject: [antlr-interest] Help me please to improve lexer
> 
> 
> My lexer grammar looks like this:
> 
> START options { ignore WS; } 
>    : "aaa"{do();} "bbb"{do();} "ccc"{do();}
>    | "ddd"{do();} "eee"{do();}
>    | "fff"{do();}  XXX {do();}
>    |  YYY {do();}
>    ;
> XXX options { ignore WS; } 
>    : "iii"{do();} "jjj"{do();}
>    | "kkk"{do();}
>    ;
> YYY options { ignore WS; } 
>    : "lll"{do();} "mmm"{do();}
>    | "nnn"{do();}
>    ;
> 
> Is there any opportunity to remove actions {do();}
> after every element and have analogue behavior?
> 
> Aleksey
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Dec  5 20:39:03 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: 2.7.2a4 ANTLR/C# - build ok, panic shutdown
In-Reply-To: <asp0cv+h6sk@eGroups.com>
Message-ID: <A58CE442-08D4-11D7-AE75-0030653DE0D6@jguru.com>

Hi Daniel,

Just tried this

/tmp $ java antlr.Tool t.g
ANTLR Parser Generator   Version 2.7.2a6 (20021130-1)   1989-2002 
jGuru.com
/tmp $ cat t.g
class P extends Parser;

a : A {#[a,b,c];}
   ;

Perhaps you grabbed 11-29's version not the 30th :)

Ter

On Thursday, December 5, 2002, at 06:01  PM, slightlynew wrote:

> Ter,
>
>> I updated this java/action.g rule [...]
>> To allow the 3rd arg.  Hmm....
>
> Oh no, that's definitely there.  Let me try to express this more
> clearly.  I tried two separate things, one with Java Antlr and one
> with C#.  Neither worked.
>
> (1) For C#, I ported your changes to java/action.g to
> csharp/action.g.  In other words, I added your new AST_CONSTRUCTOR
> rule to the C# version.  This didn't work, but I didn't really expect
> it to, because Micheal had already implied it wouldn't until the
> 2.7.2a6 C# codegen comes out.  And he has since confirmed that.
>
> (2) For Java, I didn't have to change action.g at all, because you'd
> already done so.  I was just trying to use it.  I modified a grammar
> to pass a third argument to an AST constructor, and then tried to run
> java Antlr on it.  It didn't work.  In fact, I got the same syntax
> error as with the C#: "unexpected ','".  This was why I asked, "Is
> there something else one needs to do, to get Antlr to use the new
> action.g?"  The answer is "yes" in the C# case because 2.7.2a6 isn't
> out yet.  But what about the Java case?
>
> Maybe there are some crossed wires and I wasn't really using the Java
> 2.7.2a6 codegen... but I definitely changed my grammar to
> say "Language = Java" instead of C#.
>
> - Daniel
>
> --- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
>>
>> On Wednesday, December 4, 2002, at 03:08  PM, slightlynew wrote:
>>> What I wasn't able to get working in Antlr 2.7.2a6 was that third
>>> parameter that Terence added to the AST constructor syntax: #
>>> [FOO, "Foo", "FooNode"] (or something like that!)  I couldn't get
>>> that to work either with Java or C# (having ported Terence's
> changes
>>> to the C# action.g).  Antlr rejects the third parameter with a
> syntax
>>> error saying "unexpected ','".  Is there something else one needs
> to
>>> do, to get Antlr to use the new action.g?
>>
>> Hmm...the latest version should have that.  I could have sworn I
> tested
>> that.  I updated this java/action.g rule:
>>
>> protected
>> AST_CONSTRUCTOR!
>>          :       '[' (WS)? x:AST_CTOR_ELEMENT (WS)?
>>                  (',' (WS)? y:AST_CTOR_ELEMENT (WS)? )?
>>                  (',' (WS)? z:AST_CTOR_ELEMENT (WS)? )? ']'
>>                  {
>>                  String args = x.getText();
>>                  if ( y!=null ) {
>>                          args += ","+y.getText();
>>                  }
>>                  if ( z!=null ) {
>>                          args += ","+z.getText();
>>                  }
>>                  $setText(generator.getASTCreateString(null,args));
>>                  }
>>          ;
>>
>> To allow the 3rd arg.  Hmm....
>>
>> Ter
>> --
>> Co-founder, http://www.jguru.com
>> Creator, ANTLR Parser Generator: http://www.antlr.org
>> Lecturer in Comp. Sci., University of San Francisco
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Thu Dec  5 21:30:31 2002
From: gackle at shaw.ca (slightlynew)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Heterogeneous AST nodes (was: 2.7.2a4 ANTLR/C# - build ok, panic shutdown)
In-Reply-To: <A58CE442-08D4-11D7-AE75-0030653DE0D6@jguru.com>
Message-ID: <aspcln+mkqc@eGroups.com>

> Perhaps you grabbed 11-29's version not the 30th :)

Yeah, or made a dumber error than that!

If I do get it to work I'll let you know.  I might just wait for the 
C# version since my work is in C# these days.

By the way, I have a question about heterogeneous ASTs that relates 
to the "third arg".  From recent posts I gather that the generated 
code used to do something like this (I'm simplifying here):

  ASTNode n = new MyTypeOfNode();

and that this has been changed to something like this:

  ASTNode n = getASTFactory().createInstance("MyTypeOfNode");

Internally, the factory appears to be using reflection to go from the 
string type name to a new object of that type.  (I should qualify 
that I'm talking about the C# code, and assuming that the Java code 
does something similar.)

Isn't creating an object in this way significantly more expensive?  
If you're creating, say, thousands of nodes of many different types, 
wouldn't one expect slower performance?  Given that the type 
information *is* known at compile time, why pay the overhead of run-
time object creation?  

This isn't an argument against using a factory.  The factory could do 
a big switch statement (or the equivalent) on the name, like this:

case "MyTypeOfNode":
  return new MyTypeOfNode();

and then resort to the run-time way at the end:

default:
  return createInstance("MyTypeOfNode");

Although, come to think of it, it's not obvious to me exactly what 
the advantage of the factory approach is in this context?

Any comments?

Ciao,
Daniel


--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> Hi Daniel,
> 
> Just tried this
> 
> /tmp $ java antlr.Tool t.g
> ANTLR Parser Generator   Version 2.7.2a6 (20021130-1)   1989-2002 
> jGuru.com
> /tmp $ cat t.g
> class P extends Parser;
> 
> a : A {#[a,b,c];}
>    ;
> 
> Perhaps you grabbed 11-29's version not the 30th :)
> 
> Ter
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Thu Dec  5 21:35:57 2002
From: gackle at shaw.ca (slightlynew)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: 2.7.2a4 ANTLR/C# - build ok, panic shutdown
In-Reply-To: <asm392+g6o7@eGroups.com>
Message-ID: <aspcvt+oppv@eGroups.com>

Micheal, I realized I forgot to answer this:

> > In fact, the discrepancies between the C# and 
> > the main Antlr branch are now quite few
> 
> I'm not sure I follow you here. What discrepancies
> are you referring to?

Simply the fact that file diffs between the .java files in the C# 
distribution and their counterparts in the regular Antlr distribution 
reveal fewer differences than there used to be.

DG


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hrvoje.nezic at envox-lab.hr  Fri Dec  6 03:23:42 2002
From: hrvoje.nezic at envox-lab.hr (Hrvoje Nezic)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Tree Parsers (C++)
Message-ID: <001701c29d19$f307c0b0$1301a8c0@envox.local.hr>

I have a legacy project written in C/C++ using 
Zyacc (a variant of Yacc). The language I have to parse 
accepts Unicode characters in identifiers.

Because ANTLR for C++ currently doesn't support Unicode,
I had to write my own lexer (actually, I modified existing one).

I wrote MyTokenStream and MyCommonToken classes.
MyCommonToken includes information about the token
in form of a C union.

I cannot just redefine getText because this method returns
ordinary string, and my token information is not a string,
but a complex structure.

I would like to be able to have access to this structure
in my tree parser, perhaps like this:

expr   // tree parser expr
:
     id : IDENT { do_something_with (id->my_token_information) ; }
;

Actually, I need to access MyCommonToken objects
within the tree parser, but I don't know how to achieve this.

I would appreciate your help.

Regards,
Hrvoje Nezic



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Fri Dec  6 03:23:48 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: 2.7.2a4 ANTLR/C# - build ok, panic shutdown
In-Reply-To: <aspcvt+oppv@eGroups.com>
Message-ID: <asq1c4+akct@eGroups.com>

> Micheal, I realized I forgot to answer this:
> 
> > > In fact, the discrepancies between the C# and 
> > > the main Antlr branch are now quite few
> > 
> > I'm not sure I follow you here. What discrepancies
> > are you referring to?
> 
> Simply the fact that file diffs between the .java files in the C# 
> distribution and their counterparts in the regular Antlr 
distribution 
> reveal fewer differences than there used to be.

He...he...he. Didn't think anyone noticed  ;-)

Mostly down to coding style and bracket placement mon ami. I finally 
made some time to restore the ANTLR coding style in the CSharp*.java 
files.

The coding style was changed - in private copies - while finding our 
way around ANTLR but, when the changes were all done, there were no 
volunteers to change it back.....until I got wiped out suspiciously 
fast in an Empire Earth tie-breaker so...  ;-)

Cheers!,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dpenton at arrowsash.com  Fri Dec  6 12:47:41 2002
From: dpenton at arrowsash.com (davidjpenton2002)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] A couple of questions regarding literals and unicode
Message-ID: <asr2dd+33rn@eGroups.com>

Greetings.  I am struggling a little with getting literals recognized.
I seem to have problems getting non-alphabetic characters to be
recognized in literals. For example:

class P extends Parser;

startRule
  :  "<?xml" SOMETHING
  ;

class L extends Lexer;
options
{
  charVocabulary="\003'..'\377';
}

SOMETHING : "abcd";

The inclusion of the non-alphabetic characters "<?" in the literal
seems to cause problems.

As you might guess, I am trying to parse some xml.  So this leads to a
more general question. Does antlr handle unicode?  The info on the
website does not seem to make it clear whether it does or not.

Thanks.

- Dave Penton -


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Dec  6 13:51:32 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] A couple of questions regarding literals and unicode
In-Reply-To: <asr2dd+33rn@eGroups.com>
Message-ID: <E2365134-0964-11D7-AE75-0030653DE0D6@jguru.com>


On Friday, December 6, 2002, at 12:47  PM, davidjpenton2002 wrote:

> Greetings.  I am struggling a little with getting literals recognized.
> I seem to have problems getting non-alphabetic characters to be
> recognized in literals. For example:
>
> class P extends Parser;
>
> startRule
>   :  "<?xml" SOMETHING
>   ;
>
> class L extends Lexer;
> options
> {
>   charVocabulary="\003'..'\377';
> }
>
> SOMETHING : "abcd";
>
> The inclusion of the non-alphabetic characters "<?" in the literal
> seems to cause problems.

The literals in the parser are tested in the lexer, but you have to 
have a rule that matches those char.  <? is not matched by any rule so 
the lexer cannot return that token.

>
> As you might guess, I am trying to parse some xml.  So this leads to a
> more general question. Does antlr handle unicode?  The info on the
> website does not seem to make it clear whether it does or not.

It does and I'm thinking of making enhancements real quick before 2.7.2 
comes out.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Dec  6 13:30:27 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Heterogeneous AST nodes (was: 2.7.2a4 ANTLR/C# - build ok, panic shutdown)
In-Reply-To: <aspcln+mkqc@eGroups.com>
Message-ID: <EFCA4FE6-0961-11D7-AE75-0030653DE0D6@jguru.com>


On Thursday, December 5, 2002, at 09:30  PM, slightlynew wrote:

>> Perhaps you grabbed 11-29's version not the 30th :)
>
> Yeah, or made a dumber error than that!
>
> If I do get it to work I'll let you know.  I might just wait for the
> C# version since my work is in C# these days.

The 30th version has the C# integrated :)  Try it out :)

>
> By the way, I have a question about heterogeneous ASTs that relates
> to the "third arg".  From recent posts I gather that the generated
> code used to do something like this (I'm simplifying here):
>
>   ASTNode n = new MyTypeOfNode();
>
> and that this has been changed to something like this:
>
>   ASTNode n = getASTFactory().createInstance("MyTypeOfNode");
>

Yep.

> Internally, the factory appears to be using reflection to go from the
> string type name to a new object of that type.  (I should qualify
> that I'm talking about the C# code, and assuming that the Java code
> does something similar.)

Correct.

> Isn't creating an object in this way significantly more expensive?
> If you're creating, say, thousands of nodes of many different types,
> wouldn't one expect slower performance?

Yes.  Oddly, the java version runs faster than before for homogeneous 
creation (the only real test I had), which I didn't bother to 
investigate.  It uses the reflection thing too I believe.

>  Given that the type
> information *is* known at compile time, why pay the overhead of run-
> time object creation?

Consistency for one.  Flexibility for two: no point in a factory if you 
don't use ;)

> This isn't an argument against using a factory.  The factory could do
> a big switch statement (or the equivalent) on the name, like this:
>
> case "MyTypeOfNode":
>   return new MyTypeOfNode();

I'd have to generate it though.  You are free to build your own that 
does this though.  Literally I tried to add an IF to check for the 
CommonAST type and then do "new CommonAST" and it was slower!

> and then resort to the run-time way at the end:
>
> default:
>   return createInstance("MyTypeOfNode");
>
> Although, come to think of it, it's not obvious to me exactly what
> the advantage of the factory approach is in this context?

Only that you can track or otherwise play with the node creation w/o 
changing the generated code.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dpenton at arrowsash.com  Fri Dec  6 14:18:28 2002
From: dpenton at arrowsash.com (davidjpenton2002)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: A couple of questions regarding literals and unicode
In-Reply-To: <E2365134-0964-11D7-AE75-0030653DE0D6@jguru.com>
Message-ID: <asr7nk+4m8j@eGroups.com>

Duh...now I feel silly. That seems pretty obvious. 

I misunderstood what I saw in other sample grammars.  In grammars I
looked at to teach myself antlr, I saw that there was no *exact*
lexical rule corresponding to a parser literal in many cases.  But I
suppose that in such cases the *whole point* is that another (more
general) lexer rule matches the literal, thereby necessitating an
option to cause a check against the literal table.  Is that it?

I guess I'll ask if I can get my ditch-digging job back, or else maybe
I just need more sleep :-)

Thanks!

- Dave -

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> 
> On Friday, December 6, 2002, at 12:47  PM, davidjpenton2002 wrote:
> 
> > Greetings.  I am struggling a little with getting literals recognized.
> > I seem to have problems getting non-alphabetic characters to be
> > recognized in literals. For example:
> >
> > class P extends Parser;
> >
> > startRule
> >   :  "<?xml" SOMETHING
> >   ;
> >
> > class L extends Lexer;
> > options
> > {
> >   charVocabulary="\003'..'\377';
> > }
> >
> > SOMETHING : "abcd";
> >
> > The inclusion of the non-alphabetic characters "<?" in the literal
> > seems to cause problems.
> 
> The literals in the parser are tested in the lexer, but you have to 
> have a rule that matches those char.  <? is not matched by any rule so 
> the lexer cannot return that token.
> 
> >
> > As you might guess, I am trying to parse some xml.  So this leads to a
> > more general question. Does antlr handle unicode?  The info on the
> > website does not seem to make it clear whether it does or not.
> 
> It does and I'm thinking of making enhancements real quick before 2.7.2 
> comes out.
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Fri Dec  6 17:18:20 2002
From: gackle at shaw.ca (slightlynew <gackle@shaw.ca>)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: Heterogeneous AST nodes (was: 2.7.2a4 ANTLR/C# - build ok, panic shutdown)
In-Reply-To: <EFCA4FE6-0961-11D7-AE75-0030653DE0D6@jguru.com>
Message-ID: <asri8s+ahbv@eGroups.com>

Ter,

Ok, I buy all of that.  

What you're saying is consistent with the famous "3 commandments" of 
optimization anyway.  The only way to know for sure if X is slower or 
faster than Y is to measure it.  With that in mind, I will do some 
measuring when I get to the appropriate stage, and in the meantime 
use the factory.

Daniel

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
wrote:
> 
> On Thursday, December 5, 2002, at 09:30  PM, slightlynew wrote:
> 
> >> Perhaps you grabbed 11-29's version not the 30th :)
> >
> > Yeah, or made a dumber error than that!
> >
> > If I do get it to work I'll let you know.  I might just wait for 
the
> > C# version since my work is in C# these days.
> 
> The 30th version has the C# integrated :)  Try it out :)
> 
> >
> > By the way, I have a question about heterogeneous ASTs that 
relates
> > to the "third arg".  From recent posts I gather that the generated
> > code used to do something like this (I'm simplifying here):
> >
> >   ASTNode n = new MyTypeOfNode();
> >
> > and that this has been changed to something like this:
> >
> >   ASTNode n = getASTFactory().createInstance("MyTypeOfNode");
> >
> 
> Yep.
> 
> > Internally, the factory appears to be using reflection to go from 
the
> > string type name to a new object of that type.  (I should qualify
> > that I'm talking about the C# code, and assuming that the Java 
code
> > does something similar.)
> 
> Correct.
> 
> > Isn't creating an object in this way significantly more expensive?
> > If you're creating, say, thousands of nodes of many different 
types,
> > wouldn't one expect slower performance?
> 
> Yes.  Oddly, the java version runs faster than before for 
homogeneous 
> creation (the only real test I had), which I didn't bother to 
> investigate.  It uses the reflection thing too I believe.
> 
> >  Given that the type
> > information *is* known at compile time, why pay the overhead of 
run-
> > time object creation?
> 
> Consistency for one.  Flexibility for two: no point in a factory if 
you 
> don't use ;)
> 
> > This isn't an argument against using a factory.  The factory 
could do
> > a big switch statement (or the equivalent) on the name, like this:
> >
> > case "MyTypeOfNode":
> >   return new MyTypeOfNode();
> 
> I'd have to generate it though.  You are free to build your own 
that 
> does this though.  Literally I tried to add an IF to check for the 
> CommonAST type and then do "new CommonAST" and it was slower!
> 
> > and then resort to the run-time way at the end:
> >
> > default:
> >   return createInstance("MyTypeOfNode");
> >
> > Although, come to think of it, it's not obvious to me exactly what
> > the advantage of the factory approach is in this context?
> 
> Only that you can track or otherwise play with the node creation 
w/o 
> changing the generated code.
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sat Dec  7 10:33:09 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: A couple of questions regarding literals and unicode
In-Reply-To: <asr7nk+4m8j@eGroups.com>
Message-ID: <559C50FA-0A12-11D7-AE75-0030653DE0D6@jguru.com>


On Friday, December 6, 2002, at 02:18  PM, davidjpenton2002 wrote:

> Duh...now I feel silly. That seems pretty obvious.

Not so obvious ;)

> I misunderstood what I saw in other sample grammars.  In grammars I
> looked at to teach myself antlr, I saw that there was no *exact*
> lexical rule corresponding to a parser literal in many cases.  But I
> suppose that in such cases the *whole point* is that another (more
> general) lexer rule matches the literal, thereby necessitating an
> option to cause a check against the literal table.  Is that it?

Yep...happens by default in auto generated nextToken if you don't 
specify a rule to do it.

>
> I guess I'll ask if I can get my ditch-digging job back, or else maybe
> I just need more sleep :-)

Sometimes I wish I were putting on roofs for a living still.  But then 
I remember how hot it is on a roof in the summer so I wish I were 
loading boxcars again.  But then I remember how tired I got so I figure 
I'll just stick with the computer gig ;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From development at hunsicker.de  Sun Dec  8 05:44:46 2002
From: development at hunsicker.de (Marco Hunsicker)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Changes in ASTFactory breaks custom AST classes
Message-ID: <02353323.20021208144446@hunsicker.de>

Hi all,

I've just updated to the current ANTLR distro (2.7.2a6-20021130) and
noticed that my dereived ASTFactory did not work as expected anymore
(I only use the Java stuff). I took a look at antlr.ASTFactory.java
and realized that the dup(AST) method changed (of course, the whole
class was expanded, but this is the one change that has bitten me).


2.7.2a2 looked like
<pre>
public AST dup(AST t) {
    return create(t); // if t==null, create returns null}
}
</pre>


2.7.2a6 does
<pre>
public AST dup(AST t) {
    if ( t==null ) {
        return null;
    }
    // don't just call
    AST dup_t = create(t.getClass());
    dup_t.initialize(t.getType(), t.getText());
                  // ^
                  // why not use initialize(t) ???
    return dup_t;
}
</pre>
  

The problem (at least for me) lies in the fact that the duplicated
node gets only initialized with the type and text! All other
information stored in the original node is lost. I now simply
override dup(AST) too, changing it back to the old behavior (I only
use homogenous trees) but I'd rather expect dup(AST) to initialize the
duplicated node via dup_t.initialize(t) or am I missing something here?

Another minor thing I've noticed is that the new "classHeaderPrefix"
option (cool!) has been only implemented for lexers. I hope this is
not intentional?

BTW, I don't like constant interfaces and added a new option
"useTokenPrefix=true|false" to avoid this technique. If specified, the
lexer/parser classes don't implement a constant interface, but rather
use tokens prefixed with the xxxTokenClass name (e.g. IDENT becomes
JavaTokenTypes.IDENT). All token constants are defined in an immutable
class. Maybe these (simple) changes could be merged into the public
code base? (I could send you the patched antlr.Grammar.java and
antlr.JavaCodeGenerator.java, if appreciated).

Anyway, many thanks for creating such an exceptional piece of
software. Love it!

-- 
Best regards,
 Marco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Dec  9 02:16:41 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Changes in ASTFactory breaks custom AST classes
In-Reply-To: <02353323.20021208144446@hunsicker.de>; from development@hunsicker.de on Sun, Dec 08, 2002 at 02:44:46PM +0100
References: <02353323.20021208144446@hunsicker.de>
Message-ID: <20021209111639.A20865@cs.utwente.nl>

Hi,

On Sun, Dec 08, 2002 at 02:44:46PM +0100, Marco Hunsicker wrote:
> class was expanded, but this is the one change that has bitten me).
> 
> 
> 2.7.2a2 looked like
> <pre>
> public AST dup(AST t) {
>     return create(t); // if t==null, create returns null}
> }
> </pre>
> 
> 
> 2.7.2a6 does
> <pre>
> public AST dup(AST t) {
>     if ( t==null ) {
>         return null;
>     }
>     // don't just call
>     AST dup_t = create(t.getClass());
>     dup_t.initialize(t.getType(), t.getText());
>                   // ^
>                   // why not use initialize(t) ???
>     return dup_t;
> }
> </pre>
>   
> 
> The problem (at least for me) lies in the fact that the duplicated
> node gets only initialized with the type and text! All other
> information stored in the original node is lost. I now simply
> override dup(AST) too, changing it back to the old behavior (I only
> use homogenous trees) but I'd rather expect dup(AST) to initialize the
> duplicated node via dup_t.initialize(t) or am I missing something here?

Hmmm I really think that should not be an initialize in there. A (near)
complete copy of the object should be made (in C++ mode I use a clone
method for it that goes through the copy constructor. Dunno if the java
clone does the same thing) The semantics of the clone in C++ are to copy
the object except for the down/right links.

This breaks all tree duplication in java mode. Terence?

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wit is cultured insolence. --- Aristotle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From murat.oezcan at isis-papyrus.com  Mon Dec  9 04:52:09 2002
From: murat.oezcan at isis-papyrus.com (gurkowsky2000 <murat.oezcan@isis-papyrus.com>)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] serialization and IOStreams
Message-ID: <at23lp+hed1@eGroups.com>

hi there,

i am currently developing a small language in C++, where the parser 
is generated by antlr, and the commands are my classes which are 
based on the BaseAST. since these are small programs in a distributed 
environment, i need to get the generated trees serialized. is there 
anybody who did something like this and would be ready to share 
experiences with me?

i must add, that i am trying to avoid altering the base classes which 
are delivered with antlr. this would make it difficult for me to keep 
with the newer versions of antlr. perhaps this could be included in 
the base classes as an extension? at least the operators "<<" 
and ">>" could be overriden- perhaps the easiest way of enabling a 
generic serialization (?) 

thank you very much in advance for the help

murat


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Dec  9 06:08:48 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] serialization and IOStreams
In-Reply-To: <at23lp+hed1@eGroups.com>; from murat.oezcan@isis-papyrus.com on Mon, Dec 09, 2002 at 12:52:09PM -0000
References: <at23lp+hed1@eGroups.com>
Message-ID: <20021209150847.D20865@cs.utwente.nl>

Hi,

On Mon, Dec 09, 2002 at 12:52:09PM -0000, gurkowsky2000 <murat.oezcan@isis-papyrus.com> wrote:
> i am currently developing a small language in C++, where the parser
> is generated by antlr, and the commands are my classes which are
> based on the BaseAST. since these are small programs in a distributed
> environment, i need to get the generated trees serialized. is there
> anybody who did something like this and would be ready to share
> experiences with me?

> i must add, that i am trying to avoid altering the base classes which
> are delivered with antlr. this would make it difficult for me to keep
> with the newer versions of antlr. perhaps this could be included in
> the base classes as an extension? at least the operators "<<"
> and ">>" could be overriden- perhaps the easiest way of enabling a
> generic serialization (?)

There's some rough-ish stuff to write out trees in XML in the classes.
Compile with ANTLR_SUPPORT_XML defined then in your derived classes
override the toStream methods to customize your output.

operator<< works by calling the derived classes toStream methods (pretty
common way to do these kindoff things).

operator>> is a bit of a different problem. Think it's not possible to
implement reading in the sense of a operator>> since things have to got
through the ASTFactory to work in the most general heterogenous AST case.
Look at ASTFactory::LoadAST and friends. In practice the XML stuff mostly
works but it still needs work/docu for the general case. 

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "You know how to use that thing?" [pointing to the sword]
  "Sure.. The pointy end goes into the other guy."
  --- The Mask of Zorro


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From murat.oezcan at isis-papyrus.com  Mon Dec  9 06:44:15 2002
From: murat.oezcan at isis-papyrus.com (=?US-ASCII?Q?Murat_Ozcan?=)
Date: Mon Dec 20 16:15:11 2004
Subject: AW: [antlr-interest] serialization and IOStreams
In-Reply-To: <29CFF177F892D011BFA400A024E548BFE1B269@OBELIX>
Message-ID: <29CFF177F892D011BFA400A024E548BFE098AE@OBELIX>

thank you for the quick answer- but i think i can't really follow you. is
the ANTLR_SUPPORT_XML a new feature- i am using currently version 2.7.1, and
it doesn't seem to have any of the features you mentioned (in C++ libraries
at least) the alpha version 2.7.2 on the other hand, doesn't seem to have
the C++ header files. i guess they are not yet updated or something.

i also looked for the methods you mentioned in ASTFactory- well, again in
the C++ version those methods simply don't exist. is there a newer version
than 2.7.2.a5 (which i also took a look at, but as mentioned this one
doesn't seem to have the C++ libraries, i.e. the header files and so on)

thank you in advance for your patience

murat

-----Ursprungliche Nachricht-----
Von: Ric Klaren [mailto:klaren@cs.utwente.nl]
Gesendet: Montag, 09. Dezember 2002 15:09
An: antlr-interest@yahoogroups.com
Betreff: Re: [antlr-interest] serialization and IOStreams


Hi,

On Mon, Dec 09, 2002 at 12:52:09PM -0000, gurkowsky2000
<murat.oezcan@isis-papyrus.com> wrote:
> i am currently developing a small language in C++, where the parser
> is generated by antlr, and the commands are my classes which are
> based on the BaseAST. since these are small programs in a distributed
> environment, i need to get the generated trees serialized. is there
> anybody who did something like this and would be ready to share
> experiences with me?

> i must add, that i am trying to avoid altering the base classes which
> are delivered with antlr. this would make it difficult for me to keep
> with the newer versions of antlr. perhaps this could be included in
> the base classes as an extension? at least the operators "<<"
> and ">>" could be overriden- perhaps the easiest way of enabling a
> generic serialization (?)

There's some rough-ish stuff to write out trees in XML in the classes.
Compile with ANTLR_SUPPORT_XML defined then in your derived classes
override the toStream methods to customize your output.

operator<< works by calling the derived classes toStream methods (pretty
common way to do these kindoff things).

operator>> is a bit of a different problem. Think it's not possible to
implement reading in the sense of a operator>> since things have to got
through the ASTFactory to work in the most general heterogenous AST case.
Look at ASTFactory::LoadAST and friends. In practice the XML stuff mostly
works but it still needs work/docu for the general case.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++----
---
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++----
---
  "You know how to use that thing?" [pointing to the sword]
  "Sure.. The pointy end goes into the other guy."
  --- The Mask of Zorro




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Dec  9 07:49:32 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] serialization and IOStreams
In-Reply-To: <29CFF177F892D011BFA400A024E548BFE098AE@OBELIX>; from murat.oezcan@isis-papyrus.com on Mon, Dec 09, 2002 at 03:44:15PM +0100
References: <29CFF177F892D011BFA400A024E548BFE1B269@OBELIX> <29CFF177F892D011BFA400A024E548BFE098AE@OBELIX>
Message-ID: <20021209164932.E20865@cs.utwente.nl>

Hi,

On Mon, Dec 09, 2002 at 03:44:15PM +0100, Murat Ozcan wrote:
> thank you for the quick answer- but i think i can't really follow you. is
> the ANTLR_SUPPORT_XML a new feature- i am using currently version 2.7.1, and
> it doesn't seem to have any of the features you mentioned (in C++ libraries
> at least) the alpha version 2.7.2 on the other hand, doesn't seem to have
> the C++ header files. i guess they are not yet updated or something.

2.7.1 is a release I cannot really recommend using. There are a few serious
bugs in it. Grab at least the pre-astfactory devel release from
http://wwwhome.cs.utwente.nl/~klaren/antlr

2.7.2 prerelease stuff should all have this stuff. Hmm just checked the
latest snapshots are incomplete. Although the C++ stuff seems to be there
in the lib/cpp directory. But parts of the makefiles are missing. I'll put
up a tarball of the current repository at the above page.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 "Don't call me stupid." "Oh, right. To call you stupid would be an insult
    to stupid people. I've known sheep that could outwit you! I've worn
              dresses with higher IQs!" --- A Fish Called Wanda


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Dec  9 12:13:12 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Changes in ASTFactory breaks custom AST classes
In-Reply-To: <02353323.20021208144446@hunsicker.de>
Message-ID: <A4D813F2-0BB2-11D7-B92F-0030653DE0D6@jguru.com>


On Sunday, December 8, 2002, at 05:44  AM, Marco Hunsicker wrote:

> Hi all,
>
> I've just updated to the current ANTLR distro (2.7.2a6-20021130) and
> noticed that my dereived ASTFactory did not work as expected anymore

Damn...

> (I only use the Java stuff). I took a look at antlr.ASTFactory.java
> and realized that the dup(AST) method changed (of course, the whole
> class was expanded, but this is the one change that has bitten me).
>
>
> 2.7.2a2 looked like
> <pre>
> public AST dup(AST t) {
>     return create(t); // if t==null, create returns null}
> }
> </pre>
>
>
> 2.7.2a6 does
> <pre>
> public AST dup(AST t) {
>     if ( t==null ) {
>         return null;
>     }
>     // don't just call
>     AST dup_t = create(t.getClass());
>     dup_t.initialize(t.getType(), t.getText());
>                   // ^
>                   // why not use initialize(t) ???
>     return dup_t;
> }
> </pre>

Ah!  Right...should be as you say...cut-n-paste + stupidity error ;)

> The problem (at least for me) lies in the fact that the duplicated
> node gets only initialized with the type and text! All other
> information stored in the original node is lost. I now simply
> override dup(AST) too, changing it back to the old behavior (I only
> use homogenous trees) but I'd rather expect dup(AST) to initialize the
> duplicated node via dup_t.initialize(t) or am I missing something here?

Nope...you're right.

> Another minor thing I've noticed is that the new "classHeaderPrefix"
> option (cool!) has been only implemented for lexers. I hope this is
> not intentional?

Ah.  Thanks...i'll fix.

> Anyway, many thanks for creating such an exceptional piece of
> software. Love it!

You are most welcome!

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Dec  9 12:14:26 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Changes in ASTFactory breaks custom AST classes
In-Reply-To: <20021209111639.A20865@cs.utwente.nl>
Message-ID: <D0C99245-0BB2-11D7-B92F-0030653DE0D6@jguru.com>


On Monday, December 9, 2002, at 02:16  AM, Ric Klaren wrote:
>> The problem (at least for me) lies in the fact that the duplicated
>> node gets only initialized with the type and text! All other
>> information stored in the original node is lost. I now simply
>> override dup(AST) too, changing it back to the old behavior (I only
>> use homogenous trees) but I'd rather expect dup(AST) to initialize the
>> duplicated node via dup_t.initialize(t) or am I missing something 
>> here?
>
> Hmmm I really think that should not be an initialize in there. A (near)
> complete copy of the object should be made (in C++ mode I use a clone
> method for it that goes through the copy constructor. Dunno if the java
> clone does the same thing) The semantics of the clone in C++ are to 
> copy
> the object except for the down/right links.

The only problem is that in java, clone will dup the thing bit-by-bit 
and then I'll have to wack the pointers to null and also it won't go 
thru the create() method of the factory.  Gotta be consistent I'd say.  
Make sense?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Dec 10 03:12:19 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Changes in ASTFactory breaks custom AST classes
In-Reply-To: <D0C99245-0BB2-11D7-B92F-0030653DE0D6@jguru.com>; from parrt@jguru.com on Mon, Dec 09, 2002 at 12:14:26PM -0800
References: <20021209111639.A20865@cs.utwente.nl> <D0C99245-0BB2-11D7-B92F-0030653DE0D6@jguru.com>
Message-ID: <20021210121218.F20865@cs.utwente.nl>

Hi,

On Mon, Dec 09, 2002 at 12:14:26PM -0800, Terence Parr wrote:
> On Monday, December 9, 2002, at 02:16  AM, Ric Klaren wrote:
> >> The problem (at least for me) lies in the fact that the duplicated
> >> node gets only initialized with the type and text! All other
> >> information stored in the original node is lost. I now simply
> >> override dup(AST) too, changing it back to the old behavior (I only
> >> use homogenous trees) but I'd rather expect dup(AST) to initialize the
> >> duplicated node via dup_t.initialize(t) or am I missing something
> >> here?
> >
> > Hmmm I really think that should not be an initialize in there.

Forget silly me I should read then reply ;)

> The only problem is that in java, clone will dup the thing bit-by-bit
> and then I'll have to wack the pointers to null and also it won't go
> thru the create() method of the factory.

Yeah, that's why the copy constructor in C++ does not copy the left/right
pointers.

> Gotta be consistent I'd say. Make sense?

Hmmm C++ mode does not go through create for the dups but does straight
clones. Consistency is a point yes. Then again I don't really like the dups
in the factory. I'll have a look one of these days.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Before they invented drawing boards, what did they go back to?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Dec 10 05:06:24 2002
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: Changes in ASTFactory breaks custom AST classes
In-Reply-To: <20021210121218.F20865@cs.utwente.nl>
Message-ID: <at4osg+qr92@eGroups.com>

> > The only problem is that in java, clone will dup the thing bit-by-
bit
> > and then I'll have to wack the pointers to null and also it won't 
go
> > thru the create() method of the factory.
> 
> Yeah, that's why the copy constructor in C++ does not copy the 
left/right
> pointers.

ASTFactory in C# uses copy constructors as well but the down/right 
pointers are copied due to my [misguided?] believe that since only 
dupTree()/dupList() use dup() and, they already set the down/right 
pointers, there's no problem there. I'll change this to ignore these 
fields (or perhaps simply reset them in dup() after the full clone. 
What do you think?

As for going through a create(), we are cloning an instance rather 
than creating one right....

> > Gotta be consistent I'd say. Make sense?
> 
> Hmmm C++ mode does not go through create for the dups but does 
straight
> clones. Consistency is a point yes. Then again I don't really like 
the dups
> in the factory. I'll have a look one of these days.

Cloning-by-copy-construction ensures that the semantics of cloning 
(specified in the copy constructor chain) are separated from the 
semantics of initialization (specified in initialize() methods) -- 
e.g. clone() wouldn't normally copy any AST node pointers (including 
down/right) to avoid aliasing issues with tree parser transformations 
but initialize() might normally copy such nodes (but not down/right).

The semi-deep cloning semantics of dupXXX() are trouble enough to be 
worth isolating in my opinion.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From vaida_morkute at hotmail.com  Wed Dec 11 01:16:20 2002
From: vaida_morkute at hotmail.com (Vaida Morkute)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] error in my rule...
Message-ID: <F185da5zt2EVn52cifn00006b5c@hotmail.com>

Hello,

Could you help me to understand what is wrong in my rule:

query!
	:SELECT! a:selection_list
             {## = #([QUERY, "query"], #(SELECT, a));}
         (WHERE! b:where_list
             {## = #([QUERY, "query"], #(SELECT, a),#(WHERE, b));})?
	;

As output I want to get an AST of the form:
	#(QUERY #(SELECT a) #(WHERE b)), where
	QUERY is imaginary note and WHERE is optional.

How could I rewrite this rule?


After the compilation I get the following errors:

BandParser.java:63: cannot resolve symbol
symbol  : variable tmp1_AST
location: class band.BandParser
query_AST = (AST)astFactory.make( (new 
ASTArray(2)).add(astFactory.create(QUERY,"query")).add((AST)a
stFactory.make( (new ASTArray(2)).add(tmp1_AST).add(a_AST))));
                                      ^
BandParser.java:75: cannot resolve symbol
symbol  : variable tmp2_AST
location: class band.BandParser
query_AST = (AST)astFactory.make( (new 
ASTArray(3)).add(astFactory.create(QUERY,"query")).add((AST)astFactory.make( 
(new ASTArray(2)).add(SELECT).add(a_AST))).add((AST)astFactory.make( (new 
ASTArray(2)).add(tmp2_AST).add(b_AST))));
                ^
BandParser.java:75: add(antlr.collections.AST) in 
antlr.collections.impl.ASTArray cannot be applied to (int)
query_AST = (AST)astFactory.make( (new 
ASTArray(3)).add(astFactory.create(QUERY,"query")).add((AST)astFactory.make( 
(new ASTArray(2)).add(SELECT).add(a_AST))).add((AST)astFactory.make( (new    
                      ASTArray(2)).add(tmp2_AST).add(b_AST))));
^

I am stuck at this place :( ... I would appreciate your help very much,

Vaida :)

_________________________________________________________________
The new MSN 8: smart spam protection and 2 months FREE*  
http://join.msn.com/?page=features/junkmail


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Wed Dec 11 05:14:41 2002
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: error in my rule...
In-Reply-To: <F185da5zt2EVn52cifn00006b5c@hotmail.com>
Message-ID: <at7do1+65r3@eGroups.com>

> Could you help me to understand what is wrong in my rule:
> 
> query!
> 	:SELECT! a:selection_list
>              {## = #([QUERY, "query"], #(SELECT, a));}
>          (WHERE! b:where_list
>              {## = #([QUERY, "query"], #(SELECT, a),#(WHERE, b));})?
> 	;
> 
> As output I want to get an AST of the form:
> 	#(QUERY #(SELECT a) #(WHERE b)), where
> 	QUERY is imaginary note and WHERE is optional.
> 
> How could I rewrite this rule?

Your sample above could be rewritten as shown below (unlabelled rule 
references don't work properly if memory serves):

query!
	: s:SELECT! a:selection_list
          { ## = #([QUERY, "query"], #(#s, a)); }
          (  w:WHERE! b:where_list
             { ## = #([QUERY, "query"], #(#s, a), #(#w, b)); } 
          )?
	;

Cheers!,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Wed Dec 11 06:29:31 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] error in my rule...
Message-ID: <D8F2E44800D72F488A841D4C9A9972B8092D9A@abyss4.advancedsw.com>



> Could you help me to understand what is wrong in my rule:
> 
> query!
> 	:SELECT! a:selection_list
>              {## = #([QUERY, "query"], #(SELECT, a));}
>          (WHERE! b:where_list
>              {## = #([QUERY, "query"], #(SELECT, a),#(WHERE, b));})?
> 	;
> 
> As output I want to get an AST of the form:
> 	#(QUERY #(SELECT a) #(WHERE b)), where
> 	QUERY is imaginary note and WHERE is optional.
> 
> How could I rewrite this rule?

I believe that the AST declaration should be:

query!
	:SELECT! a:selection_list (WHERE! b:where_list )?

      {#query = #(#[QUERY, "QUERY"],
                  #([SELECT, "SELECT"], a),
                  #([WHERE, "WHERE"], b));
	;

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From vaida_morkute at hotmail.com  Wed Dec 11 06:41:51 2002
From: vaida_morkute at hotmail.com (vaida_mo <vaida_morkute@hotmail.com>)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: error in my rule...
In-Reply-To: <D8F2E44800D72F488A841D4C9A9972B8092D9A@abyss4.advancedsw.com>
Message-ID: <at7irf+q16g@eGroups.com>

Hi,

Thank you for the help. The rule suggested by Micheal helped me to
achieve the result I was looking for.

> query!
> 	:SELECT! a:selection_list (WHERE! b:where_list )?
> 
>       {#query = #(#[QUERY, "QUERY"],
>                   #([SELECT, "SELECT"], a),
>                   #([WHERE, "WHERE"], b));
> 	;

AST construction in the above rule does not evaluate the cases when
WHERE part is missing.

Regards,

Vaida :)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Lynda.brenock at xylogy.com  Wed Dec 11 21:00:02 2002
From: Lynda.brenock at xylogy.com (lyndabrenock <Lynda.brenock@xylogy.com>)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Missing files for CPP lib
Message-ID: <at954i+cgbm@eGroups.com>

Hi,

I'm missing 9 files for the static CPP library.

The files that I'm missing are
ANTLRException.cpp
AST.cpp
CommonASTNode.cpp
CommonASTNodeWithHiddenTokens.cpp
LexerSharedInputState
ParserException
ParserSharedInputState
ScannedException
TreeParserSharedInputState

Are these files required? Where do I find them as they weren't 
included when I downloaded the zip file.

TIA
Lynda


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From manojpurayidathil at yahoo.com  Fri Dec 13 01:49:06 2002
From: manojpurayidathil at yahoo.com (ManojPurayidathil <manojpurayidathil@yahoo.com>)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Newbie Question.
Message-ID: <atcaei+10b95@eGroups.com>

Hi,
    I am new to ANTLR. This is my understanding of compiler compilers.
They aid in generating code that parses (character) input based on
grammar rules. What is done with the parsed information is handled by
(embedded) action code snippets.
    Am I correct? If so, ANTLR is no different. Correct?
    If I am worng, could someone correct me?
Thanks in advance!
Manoj Joseph


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Philip.Hunt at advent-comm.co.uk  Fri Dec 13 01:50:47 2002
From: Philip.Hunt at advent-comm.co.uk (Philip Hunt)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Newbie Question.
Message-ID: <F095685D00FAD41181940002B306BF57D91E54@EXCHANGE>

You are correct.

-- 
Philip Hunt, <Philip.Hunt@advent-comm.co.uk>
(I apologize in advance for legalese disclaimer, which I have no contol
over)





> -----Original Message-----
> From: ManojPurayidathil <manojpurayidathil@yahoo.com>
> [mailto:manojpurayidathil@yahoo.com]
> Sent: Friday, 13 December, 2002 9:49 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Newbie Question.
> 
> 
> Hi,
>     I am new to ANTLR. This is my understanding of compiler compilers.
> They aid in generating code that parses (character) input based on
> grammar rules. What is done with the parsed information is handled by
> (embedded) action code snippets.
>     Am I correct? If so, ANTLR is no different. Correct?
>     If I am worng, could someone correct me?
> Thanks in advance!
> Manoj Joseph
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
This message is intended for the addressee only. It must not be disclosed
to, altered, copied or used by anyone other than the addressee(s). If you
have received this message in error, please notify our email administrator
at   postmaster@advent-comm.co.uk <mailto:postmaster@advent-comm.co.uk> and
destroy the message, removing it completely from your computer system. 
Thank you for your assistance. 

Mail Virus Warning
-------------------------------

This email and any attachment are believed to be free from viruses which
might affect any system into which they are received or opened, it is the
responsibility of the recipient to ensure that they are virus free.
 Advent Communications accepts no liability whatsoever for any direct,
indirect or consequential loss or damage arising in any way from receipt,
opening or use.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20021213/f299290b/attachment.html
From klaren at cs.utwente.nl  Fri Dec 13 02:05:10 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Missing files for CPP lib
In-Reply-To: <at954i+cgbm@eGroups.com>; from Lynda.brenock@xylogy.com on Thu, Dec 12, 2002 at 05:00:02AM -0000
References: <at954i+cgbm@eGroups.com>
Message-ID: <20021213110510.A2998@cs.utwente.nl>

Hi,

On Thu, Dec 12, 2002 at 05:00:02AM -0000, lyndabrenock <Lynda.brenock@xylogy.com> wrote:
> I'm missing 9 files for the static CPP library.

I guess that you are using the .dsw .dsp files? These are a little out of
date. Just re-add the .cpp files from the src directory and the header
files from the antlr directory. (except for the dll.cpp) DLL builds are
broken on msvc.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Innovation makes enemies of all those who prospered under the old
   regime, and only lukewarm support is forthcoming from those who would
               prosper under the new. --- Niccol Machiavelli


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri Dec 13 05:13:18 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Re: Changes in ASTFactory breaks custom AST classes
In-Reply-To: <at4osg+qr92@eGroups.com>; from open.zone@virgin.net on Tue, Dec 10, 2002 at 01:06:24PM -0000
References: <20021210121218.F20865@cs.utwente.nl> <at4osg+qr92@eGroups.com>
Message-ID: <20021213141317.D2998@cs.utwente.nl>

Hi,

On Tue, Dec 10, 2002 at 01:06:24PM -0000, micheal_jor <open.zone@virgin.net> wrote:
> ASTFactory in C# uses copy constructors as well but the down/right
> pointers are copied due to my [misguided?] believe that since only
> dupTree()/dupList() use dup() and, they already set the down/right
> pointers, there's no problem there. I'll change this to ignore these
> fields (or perhaps simply reset them in dup() after the full clone.
> What do you think?

This was also my first implementation. There were problems with it exact
circumstances I'd have to look up. But it went wrong somewhere. Of course
this may depend a bit on actual implementations YMMV etc. In general it
doesn't make sense to copy the down/right pointers since they will point
into another tree. And doing a recursive copy is probably also not what you
want (in the general case).

> As for going through a create(), we are cloning an instance rather
> than creating one right....

This is also a bit more my feel about it. It may be that this is a 'taste'
question. So far I don't really feel like routing the C++ clone's through
the initialize stuff. In general in C++ doing clone's via copy constructors
is the right-thing (tm), so I'll go with what a C++ user expects from these
beasts. We'll probably see more digression between C++ and Java in the
future anyway.

> > > Gotta be consistent I'd say. Make sense?
> >
> > Hmmm C++ mode does not go through create for the dups but does straight
> > clones. Consistency is a point yes. Then again I don't really like the dups
> > in the factory. I'll have a look one of these days.
>
> Cloning-by-copy-construction ensures that the semantics of cloning
> (specified in the copy constructor chain) are separated from the
> semantics of initialization (specified in initialize() methods) --
> e.g. clone() wouldn't normally copy any AST node pointers (including
> down/right) to avoid aliasing issues with tree parser transformations
> but initialize() might normally copy such nodes (but not down/right).
>
> The semi-deep cloning semantics of dupXXX() are trouble enough to be
> worth isolating in my opinion.

I'm thinking of putting them into the antlr namespace as normal functions.
They're not really factory things.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "You know how to use that thing?" [pointing to the sword]
  "Sure.. The pointy end goes into the other guy."
  --- The Mask of Zorro


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From elias at biris.freeserve.co.uk  Fri Dec 13 06:31:57 2002
From: elias at biris.freeserve.co.uk (elias_biris <elias@biris.freeserve.co.uk>)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Getting text from variable length matches?
Message-ID: <atcr0t+87ot@eGroups.com>

I am sure that this has been discussed in the past, but my searches in
the archives and the faq did not come up with a quick response:

In my C++ parser I have rules that match 1+ or 0+ or 0/1 things ie

rule1 returns [string final_match]
     : l1:LEXER_TOKEN_A (rule2)+ l2:LEXER_TOKEN_A

rule2 returns [string match]
     : l3:LEXER_TOKEN_B (l4:LEXER_TOKEN_C)? 
     | l5:LEXER_TOKEN_B (l6:LEXER_TOKEN_D)*


Ambiguities and antlr-syntax errors aside (the above just give a
flavor of the thing I want to do, they do not make a syntacticaly
correct grammar spec), how can I get the strings matched by the ()+,
()*, or ()? patterns above? Do I have to build the strings using the
labels for handles to getText(), or is there an  easier (more direct)
way to do this? I am doing this all in C++ but I would be open to
suggestions from Java people if they have any tips.

All tips will be gratefully appreciated :-)

Kind regards

Elias
      


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From wiggjd at sbu.ac.uk  Fri Dec 13 06:42:13 2002
From: wiggjd at sbu.ac.uk (David Wigg)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Guarded Predicates
Message-ID: <3DF9F1C5.6030803@sbu.ac.uk>

Guarded predicates do not appear to do what I expected from them 
as described in the ANTLR documentation (which seemed sensible 
and intuitively correct).

It says the following;

ANTLR provides a guarded predicate to allow you to specify the 
lookahead context under which a predicate should be evaluated. 
The syntax is:

(lookahead-context-for-predicate)=>{predicate}?

A guarded predicate is useful in situations where the semantic 
predicate should be hoisted into the prediction decision only 
when the lookahead is consistent with some context. For example:

a   :   (ID)=>{isType(LT(1))}? (ID|INT)
     |   ID
     ;

Here, the predicate is only applicable when an ID is found on 
the input stream. It should not be evaluated when an INT is found.


So, in the case illustrated above if an INT was next the guarded 
predicate would not be evaluated and parsing would continue 
within the first alternative to (ID|INT).

In fact as far as I can see the effect of the current 
implementation is that unless the predicate is true parsing will 
not fall through to the rest of the alternative anyway.

It's quite simple to put the above rule in a .g file to compile 
it and to examine the resulting generated code.

I find it rather ominous that I have only been able to find any 
examples of guarded predicates in TinyBasic.g in the java 
examples. Does this mean that other people have found that 
guarded predicates don't work?

Needless to say I have not found anything about this in the 
FAQs. "No results found" was the response to a search for "Guarded".

David.








abstract_declarator
   :  (SCOPE|ID)=> {qualifiedItemIsOneOf(qiPtrMember)}?
      ptr_operator abstract_declarator {declaratorPointerTo();}
   |  LPAREN abstract_declarator RPAREN
      (abstract_declarator_suffix)+
   |  (LSQUARE (constant_expression )? RSQUARE  {declaratorArray();}
      )+
   |  /* empty */
   ;


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Dec 13 10:33:11 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Guarded Predicates
In-Reply-To: <3DF9F1C5.6030803@sbu.ac.uk>
Message-ID: <55A86F9A-0EC9-11D7-B92F-0030653DE0D6@jguru.com>

Yeah, I have a note to look into this...are you using Java output?  
Does it look like ANTLR generates something for the guard?

Ter

On Friday, December 13, 2002, at 06:42  AM, David Wigg wrote:

> Guarded predicates do not appear to do what I expected from them
> as described in the ANTLR documentation (which seemed sensible
> and intuitively correct).
>
> It says the following;
>
> ANTLR provides a guarded predicate to allow you to specify the
> lookahead context under which a predicate should be evaluated.
> The syntax is:
>
> (lookahead-context-for-predicate)=>{predicate}?
>
> A guarded predicate is useful in situations where the semantic
> predicate should be hoisted into the prediction decision only
> when the lookahead is consistent with some context. For example:
>
> a   :   (ID)=>{isType(LT(1))}? (ID|INT)
>      |   ID
>      ;
>
> Here, the predicate is only applicable when an ID is found on
> the input stream. It should not be evaluated when an INT is found.
>
>
> So, in the case illustrated above if an INT was next the guarded
> predicate would not be evaluated and parsing would continue
> within the first alternative to (ID|INT).
>
> In fact as far as I can see the effect of the current
> implementation is that unless the predicate is true parsing will
> not fall through to the rest of the alternative anyway.
>
> It's quite simple to put the above rule in a .g file to compile
> it and to examine the resulting generated code.
>
> I find it rather ominous that I have only been able to find any
> examples of guarded predicates in TinyBasic.g in the java
> examples. Does this mean that other people have found that
> guarded predicates don't work?
>
> Needless to say I have not found anything about this in the
> FAQs. "No results found" was the response to a search for "Guarded".
>
> David.
>
>
>
>
>
>
>
>
> abstract_declarator
>    :  (SCOPE|ID)=> {qualifiedItemIsOneOf(qiPtrMember)}?
>       ptr_operator abstract_declarator {declaratorPointerTo();}
>    |  LPAREN abstract_declarator RPAREN
>       (abstract_declarator_suffix)+
>    |  (LSQUARE (constant_expression )? RSQUARE  {declaratorArray();}
>       )+
>    |  /* empty */
>    ;
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dewing at apple.com  Fri Dec 13 14:14:07 2002
From: dewing at apple.com (David Ewing)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Guarded Predicates
In-Reply-To: <55A86F9A-0EC9-11D7-B92F-0030653DE0D6@jguru.com>
Message-ID: <BA1FA9BF.310E4%dewing@apple.com>

on 12/13/02 11:33 AM, Terence Parr at parrt@jguru.com wrote:

> Yeah, I have a note to look into this...are you using Java output?
> Does it look like ANTLR generates something for the guard?

David's using C++ output (your favorite ;-). I've got an example of what
looks like bogus code to me too. I'll send it to you off-line.

Dave

> 
> On Friday, December 13, 2002, at 06:42  AM, David Wigg wrote:
> 
>> Guarded predicates do not appear to do what I expected from them
>> as described in the ANTLR documentation (which seemed sensible
>> and intuitively correct).
>> 
>> It says the following;
>> 
>> ANTLR provides a guarded predicate to allow you to specify the
>> lookahead context under which a predicate should be evaluated.
>> The syntax is:
>> 
>> (lookahead-context-for-predicate)=>{predicate}?
>> 
>> A guarded predicate is useful in situations where the semantic
>> predicate should be hoisted into the prediction decision only
>> when the lookahead is consistent with some context. For example:
>> 
>> a   :   (ID)=>{isType(LT(1))}? (ID|INT)
>>      |   ID
>>      ;
>> 
>> Here, the predicate is only applicable when an ID is found on
>> the input stream. It should not be evaluated when an INT is found.
>> 
>> 
>> So, in the case illustrated above if an INT was next the guarded
>> predicate would not be evaluated and parsing would continue
>> within the first alternative to (ID|INT).
>> 
>> In fact as far as I can see the effect of the current
>> implementation is that unless the predicate is true parsing will
>> not fall through to the rest of the alternative anyway.
>> 
>> It's quite simple to put the above rule in a .g file to compile
>> it and to examine the resulting generated code.
>> 
>> I find it rather ominous that I have only been able to find any
>> examples of guarded predicates in TinyBasic.g in the java
>> examples. Does this mean that other people have found that
>> guarded predicates don't work?
>> 
>> Needless to say I have not found anything about this in the
>> FAQs. "No results found" was the response to a search for "Guarded".
>> 
>> David.
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> abstract_declarator
>>    :  (SCOPE|ID)=> {qualifiedItemIsOneOf(qiPtrMember)}?
>>       ptr_operator abstract_declarator {declaratorPointerTo();}
>>    |  LPAREN abstract_declarator RPAREN
>>       (abstract_declarator_suffix)+
>>    |  (LSQUARE (constant_expression )? RSQUARE  {declaratorArray();}
>>       )+
>>    |  /* empty */
>>    ;
>> 
>> 
>> 
>> 
>> Your use of Yahoo! Groups is subject to
>> http://docs.yahoo.com/info/terms/
>> 
>> 
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
> 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Dec 13 17:35:08 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Guarded Predicates
In-Reply-To: <BA1FA9BF.310E4%dewing@apple.com>
Message-ID: <47830694-0F04-11D7-B92F-0030653DE0D6@jguru.com>

Houston...we have a problem with guarded predicates....um...they don't 
exist in the antlr.g grammar!  I'll look back at the revision history 
to see if I ever had that in there. :(  Ugh.  Anyway, it looks like 
ANTLR is generating incorrectly a syn pred.  The guard should be a 
simple set of tokens to check before evaluating the pred.

I'll let you know what I dig up.

Ter

On Friday, December 13, 2002, at 02:14  PM, David Ewing wrote:

> on 12/13/02 11:33 AM, Terence Parr at parrt@jguru.com wrote:
>
>> Yeah, I have a note to look into this...are you using Java output?
>> Does it look like ANTLR generates something for the guard?
>
> David's using C++ output (your favorite ;-). I've got an example of 
> what
> looks like bogus code to me too. I'll send it to you off-line.
>
> Dave
>
>>
>> On Friday, December 13, 2002, at 06:42  AM, David Wigg wrote:
>>
>>> Guarded predicates do not appear to do what I expected from them
>>> as described in the ANTLR documentation (which seemed sensible
>>> and intuitively correct).
>>>
>>> It says the following;
>>>
>>> ANTLR provides a guarded predicate to allow you to specify the
>>> lookahead context under which a predicate should be evaluated.
>>> The syntax is:
>>>
>>> (lookahead-context-for-predicate)=>{predicate}?
>>>
>>> A guarded predicate is useful in situations where the semantic
>>> predicate should be hoisted into the prediction decision only
>>> when the lookahead is consistent with some context. For example:
>>>
>>> a   :   (ID)=>{isType(LT(1))}? (ID|INT)
>>>      |   ID
>>>      ;
>>>
>>> Here, the predicate is only applicable when an ID is found on
>>> the input stream. It should not be evaluated when an INT is found.
>>>
>>>
>>> So, in the case illustrated above if an INT was next the guarded
>>> predicate would not be evaluated and parsing would continue
>>> within the first alternative to (ID|INT).
>>>
>>> In fact as far as I can see the effect of the current
>>> implementation is that unless the predicate is true parsing will
>>> not fall through to the rest of the alternative anyway.
>>>
>>> It's quite simple to put the above rule in a .g file to compile
>>> it and to examine the resulting generated code.
>>>
>>> I find it rather ominous that I have only been able to find any
>>> examples of guarded predicates in TinyBasic.g in the java
>>> examples. Does this mean that other people have found that
>>> guarded predicates don't work?
>>>
>>> Needless to say I have not found anything about this in the
>>> FAQs. "No results found" was the response to a search for "Guarded".
>>>
>>> David.
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> abstract_declarator
>>>    :  (SCOPE|ID)=> {qualifiedItemIsOneOf(qiPtrMember)}?
>>>       ptr_operator abstract_declarator {declaratorPointerTo();}
>>>    |  LPAREN abstract_declarator RPAREN
>>>       (abstract_declarator_suffix)+
>>>    |  (LSQUARE (constant_expression )? RSQUARE  {declaratorArray();}
>>>       )+
>>>    |  /* empty */
>>>    ;
>>>
>>>
>>>
>>>
>>> Your use of Yahoo! Groups is subject to
>>> http://docs.yahoo.com/info/terms/
>>>
>>>
>> --
>> Co-founder, http://www.jguru.com
>> Creator, ANTLR Parser Generator: http://www.antlr.org
>> Lecturer in Comp. Sci., University of San Francisco
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to 
>> http://docs.yahoo.com/info/terms/
>>
>>
>>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Dec 13 18:05:08 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Guarded Predicates
In-Reply-To: <BA1FA9BF.310E4%dewing@apple.com>
Message-ID: <7864E080-0F08-11D7-B92F-0030653DE0D6@jguru.com>

Ok, looks like

>>> (lookahead-context-for-predicate)=>{predicate}?

never existed in the antlr.g grammar!  I cannot remember now if I've 
implemented that, but it is definitely not there now nor in the first 
rev of antlr.g that I see in the depot ;)

Ok, so since this is the first we've seen of this, I'm changing the 
documentation to suit ;) so I can get the 2.7.2 release out soon.

Just add the LA(1) test in the predicate for now manually.

Regards,
Terence

On Friday, December 13, 2002, at 02:14  PM, David Ewing wrote:

> on 12/13/02 11:33 AM, Terence Parr at parrt@jguru.com wrote:
>
>> Yeah, I have a note to look into this...are you using Java output?
>> Does it look like ANTLR generates something for the guard?
>
> David's using C++ output (your favorite ;-). I've got an example of 
> what
> looks like bogus code to me too. I'll send it to you off-line.
>
> Dave
>
>>
>> On Friday, December 13, 2002, at 06:42  AM, David Wigg wrote:
>>
>>> Guarded predicates do not appear to do what I expected from them
>>> as described in the ANTLR documentation (which seemed sensible
>>> and intuitively correct).
>>>
>>> It says the following;
>>>
>>> ANTLR provides a guarded predicate to allow you to specify the
>>> lookahead context under which a predicate should be evaluated.
>>> The syntax is:
>>>
>>> (lookahead-context-for-predicate)=>{predicate}?
>>>
>>> A guarded predicate is useful in situations where the semantic
>>> predicate should be hoisted into the prediction decision only
>>> when the lookahead is consistent with some context. For example:
>>>
>>> a   :   (ID)=>{isType(LT(1))}? (ID|INT)
>>>      |   ID
>>>      ;
>>>
>>> Here, the predicate is only applicable when an ID is found on
>>> the input stream. It should not be evaluated when an INT is found.
>>>
>>>
>>> So, in the case illustrated above if an INT was next the guarded
>>> predicate would not be evaluated and parsing would continue
>>> within the first alternative to (ID|INT).
>>>
>>> In fact as far as I can see the effect of the current
>>> implementation is that unless the predicate is true parsing will
>>> not fall through to the rest of the alternative anyway.
>>>
>>> It's quite simple to put the above rule in a .g file to compile
>>> it and to examine the resulting generated code.
>>>
>>> I find it rather ominous that I have only been able to find any
>>> examples of guarded predicates in TinyBasic.g in the java
>>> examples. Does this mean that other people have found that
>>> guarded predicates don't work?
>>>
>>> Needless to say I have not found anything about this in the
>>> FAQs. "No results found" was the response to a search for "Guarded".
>>>
>>> David.
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> abstract_declarator
>>>    :  (SCOPE|ID)=> {qualifiedItemIsOneOf(qiPtrMember)}?
>>>       ptr_operator abstract_declarator {declaratorPointerTo();}
>>>    |  LPAREN abstract_declarator RPAREN
>>>       (abstract_declarator_suffix)+
>>>    |  (LSQUARE (constant_expression )? RSQUARE  {declaratorArray();}
>>>       )+
>>>    |  /* empty */
>>>    ;
>>>
>>>
>>>
>>>
>>> Your use of Yahoo! Groups is subject to
>>> http://docs.yahoo.com/info/terms/
>>>
>>>
>> --
>> Co-founder, http://www.jguru.com
>> Creator, ANTLR Parser Generator: http://www.antlr.org
>> Lecturer in Comp. Sci., University of San Francisco
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to 
>> http://docs.yahoo.com/info/terms/
>>
>>
>>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sat Dec 14 12:51:46 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] implemented your suggestion for AST factory
Message-ID: <DBBCDC8D-0FA5-11D7-B92F-0030653DE0D6@jguru.com>

Loring,

Re: hetero tree mapping (Java mode)...

I have altered the Java code generator so that it generates a call to a 
new ASTFactory(Hashtable) ctor.  The generated parser has this:

         protected void buildTokenTypeASTClassMap() {
                 tokenTypeToASTClassMap = new Hashtable();
                 tokenTypeToASTClassMap.put(new Integer(ID), 
IDNode.class);
                 ...
         };

then does this in the parser ctor:

   buildTokenTypeASTClassMap();
   astFactory = new ASTFactory(getTokenTypeToASTClassMap());

The TreeParser stuff I left alone as you can get the AST factory out of 
the parser and set in the TreeParser manually upon its creation if you 
are doing tree transforms.  I don't want 
duplicate-possibly-slightly-different copies of the mapping running 
around.

All seems backward compatible.  The Hashtable mapping is there for your 
homegrown ASTFactory if you want it via Parser method:

	/** If the user specifies a tokens{} section with heterogeneous
	 *  AST node types, then ANTLR generates code to fill
	 *  this mapping.
	 */
	public Hashtable getTokenTypeToASTClassMap() {
		return tokenTypeToASTClassMap;
	}

Oh, I fixed that problem where I was initializing a node during dup 
from the text not the ast.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sat Dec 14 13:08:43 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Changes in ASTFactory breaks custom AST classes
In-Reply-To: <02353323.20021208144446@hunsicker.de>
Message-ID: <3A5CB2DA-0FA8-11D7-B92F-0030653DE0D6@jguru.com>


On Sunday, December 8, 2002, at 05:44  AM, Marco Hunsicker wrote:

> Hi all,
>
> I've just updated to the current ANTLR distro (2.7.2a6-20021130) and
> noticed that my dereived ASTFactory did not work as expected anymore
> (I only use the Java stuff). I took a look at antlr.ASTFactory.java
> and realized that the dup(AST) method changed (of course, the whole
> class was expanded, but this is the one change that has bitten me).
>

Fixed to call initialize(AST).

> Another minor thing I've noticed is that the new "classHeaderPrefix"
> option (cool!) has been only implemented for lexers. I hope this is
> not intentional?

Added prefix to all grammars so you can say:

class TP extends TreeParser;

options {
         classHeaderPrefix="public abstract";
}
...

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Sat Dec 14 14:33:41 2002
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Are there any 'complete' open source compilers/front-ends built with ANTLR?
Message-ID: <atgbk5+clmj@eGroups.com>

Hi All,

I am looking for a complete compiler (or just the front-end without 
code generation) that includes an ANTLR lexer/parser, symbol table 
and context checking code.

I imagine it would be something like the pascal.g or java.g grammars 
that Ter provides with ANTLR, augmented with a symbol table and code 
to perform additional semantic- and context-checking as specified by 
some language spec.

Cheers,

Michael



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From amejdi at ertonline.gr  Mon Dec 16 01:36:46 2002
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Getting text from variable length matches?
References: <atcr0t+87ot@eGroups.com>
Message-ID: <3DFD9EAE.5060107@ertonline.gr>

If rules receive paramaters in ANTLR (I think they do I would pass a 
StringBuffer object as parammeter.A String wouldn't do because is 
imunable,You can't modify a String)
In java I would do:
  rule2 returns [StringBuffer match] <=Make this parameter
: l3:LEXER_TOKEN_B {match.append(l3.getText();} (l4:LEXER_TOKEN_C 
{match.append(l4.getText();})?
       | l5:LEXER_TOKEN_B {match.append(l5.getText();}(l6:LEXER_TOKEN_D 
{match.append(l6.getText();})*

  rule1 returns [String final_match]
       { StringBuffer sb = new StringBuffer(); }
	: l1:LEXER_TOKEN_A (rule2[sb])+ l2:LEXER_TOKEN_A
sb would contain the string matched by rule2.
This is just the idea.
The implementation should be quite different.

elias_biris wrote:
> I am sure that this has been discussed in the past, but my searches in
> the archives and the faq did not come up with a quick response:
> 
> In my C++ parser I have rules that match 1+ or 0+ or 0/1 things ie
> 
> rule1 returns [string final_match]
>      : l1:LEXER_TOKEN_A (rule2)+ l2:LEXER_TOKEN_A
> 
> rule2 returns [string match]
>      : l3:LEXER_TOKEN_B (l4:LEXER_TOKEN_C)? 
>      | l5:LEXER_TOKEN_B (l6:LEXER_TOKEN_D)*
> 
> 
> Ambiguities and antlr-syntax errors aside (the above just give a
> flavor of the thing I want to do, they do not make a syntacticaly
> correct grammar spec), how can I get the strings matched by the ()+,
> ()*, or ()? patterns above? Do I have to build the strings using the
> labels for handles to getText(), or is there an  easier (more direct)
> way to do this? I am doing this all in C++ but I would be open to
> suggestions from Java people if they have any tips.
> 
> All tips will be gratefully appreciated :-)
> 
> Kind regards
> 
> Elias
>       
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Dec 16 08:43:30 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Are there any 'complete' open source compile
	rs/front-ends built with ANTLR?
Message-ID: <170826586F3BD511910D0200C110AAA8032B4FD4@memail03.bco-home.com>

The only thing I know of that may be close it the AspectC project based on
my GCC framework http://www.codetransform.com/gcc.html.  I haven't heard any
news about that project for a while so I don't know how close they are to
releasing it or if they did release and it slipped under my radar.  The GCC
framework itself has everything below except the additional semantic and
context checking.

Monty

-----Original Message-----
From: micheal_jor <open.zone@virgin.net> [mailto:open.zone@virgin.net]
Sent: Saturday, December 14, 2002 2:34 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Are there any 'complete' open source
compilers/front-ends built with ANTLR?


Hi All,

I am looking for a complete compiler (or just the front-end without 
code generation) that includes an ANTLR lexer/parser, symbol table 
and context checking code.

I imagine it would be something like the pascal.g or java.g grammars 
that Ter provides with ANTLR, augmented with a symbol table and code 
to perform additional semantic- and context-checking as specified by 
some language spec.

Cheers,

Michael



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From steven.f.hurt at lmco.com  Mon Dec 16 11:46:52 2002
From: steven.f.hurt at lmco.com (Steven Hurt)
Date: Mon Dec 20 16:15:11 2004
Subject: [antlr-interest] Exceptions in C# backend
Message-ID: <3DFE2DAC.1030200@lmco.com>

I'm having some problems getting the example code from 
antlr-2.7.2a6_11-30-2002.jar to function correctly. I have tried to 
match up all of the version numbers on the releases, SDK etc to ensure a 
correct configuration per previous postings.

I have downloaded and tested a number of other applications and only the 
antlr runtime seems to have this problem. If this issue is the same as 
previous postings concerning the C# backend I'm missing the 
relationship. We are looking at moving to C# so our experience level 
with .Net may be the fundamental issue.

This example is the csharp directory under calc.

> Unhandled Exception: System.IO.FileNotFoundException: File or assembly 
> name Syst
> em, or one of its dependencies, was not found.
> File name: "System"
>    at antlr.Parser..ctor()
>    at antlr.LLkParser..ctor(TokenStream lexer, Int32 k_) in 
> C:\ANTLR\antlr_2_7_2
> a6\lib\csharp\antlr\LLkParser.cs:line 44
>    at CalcParser..ctor(TokenStream lexer, Int32 k) in 
> C:\MetalWorks\cs\calc\Calc
> Parser.cs:line 54
>    at CalcParser..ctor(TokenStream lexer) in 
> C:\MetalWorks\cs\calc\CalcParser.cs
> :line 59
>    at Calc.Main(String[] args) in C:\MetalWorks\cs\calc\Calc.cs:line 19
>
> Fusion log follows:
> === Pre-bind state information ===
> LOG: DisplayName = System, Version=1.0.2411.0, Culture=neutral, 
> PublicKeyToken=b
> 77a5c561934e089
>  (Fully-specified)
> LOG: Appbase = C:\MetalWorks\cs\calc\bin\
> LOG: Initial PrivatePath = NULL
> Calling assembly : antlr.runtime, Version=2.7.2.26283, 
> Culture=neutral, PublicKe
> yToken=null.
> ===
>
> LOG: Publisher policy file is not found.
> LOG: Host configuration file not found.
> LOG: Using machine configuration file from 
> C:\WINNT\Microsoft.NET\Framework\v1.0
> .3705\config\machine.config.
> LOG: Post-policy reference: System, Version=1.0.2411.0, 
> Culture=neutral, PublicK
> eyToken=b77a5c561934e089
> LOG: Attempting download of new URL 
> file:///C:/MetalWorks/cs/calc/bin/System.DLL
> .
> LOG: Attempting download of new URL 
> file:///C:/MetalWorks/cs/calc/bin/System/Sys
> tem.DLL.
> LOG: Attempting download of new URL 
> file:///C:/MetalWorks/cs/calc/bin/System.EXE
> .
> LOG: Attempting download of new URL 
> file:///C:/MetalWorks/cs/calc/bin/System/Sys
> tem.EXE.

Thx


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From nwestreb at arrowsash.com  Mon Dec 16 12:06:41 2002
From: nwestreb at arrowsash.com (davidjpenton2002 <nwestreb@arrowsash.com>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] a couple of questions regarding antlr 2.7.1 reference manual
Message-ID: <atlboh+10jm3@eGroups.com>

Greetings all.  I am using antlr for a project at work, and am 
encountering some difficulties.  I want to make sure that I 
have "RTFM" but I am a little confused by a few things in "TFM" :-)

First, what does "hoisting" mean, e.g. "a predicate that would be 
hoisted into the prediction expression" etc. (metalang.html p.15).  
Is this a term of art in compiler generation, or have I missed the 
definition of this term in the manual somewhere? Not uderstanding 
what it means is impeding my grasp of semantic predicates.

Second, I am a little baffled about constructs such as the following 
in semantic actions, again from p.15 of the metalanguage doc (pdf 
version):

stat: {isTypeName(LT(1))}? ...etc.

What I don't understand is, what are things like LT(1) and LA(1)? It 
appears that they are have something to do with lookahead, but at the 
point I encounter them in the manual, it is not clear if they are 
made available by antlr, or are user-defined things, etc.

Thanks for bearing with me as I struggle my way from newbie to 
seasoned antlr user.  I have a fair bit of experience with yacc, cup, 
etc. but not with antlr.

- David Penton -


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From nwestreb at arrowsash.com  Mon Dec 16 12:13:15 2002
From: nwestreb at arrowsash.com (davidjpenton2002 <nwestreb@arrowsash.com>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] DTD Grammar
Message-ID: <atlc4r+nb2i@eGroups.com>

I decided to make this a separate post from my technical questions 
about antlr.

I am working on a parser for XML 1.0 DTD's.  The XML 1.0 
Recommendation defines XML version 1.0 using EBNF productions.  I 
have stripped these directly out of the XML version of the 
recommendation itself with a tiny morsel of XSLT, and am busy 
converting the EBNF to an antlr grammar.

My objective is to create an antlr grammar that leaves the EBNF 
productions from the XML Recommendation intact as much as possible, 
i.e. I don't want to have to refactor the grammar to an equivalent 
one. I do not yet know if this is possible.

The real question is: does anyone know of an existing antlr DTD 
grammar?  I don't see one on the antlr website, nor have my searches 
turned anything up.  But then, sometimes I cannot find my own 
eyeglasses when I come out of the shower. I can usually locate my 
butt if I use both hands, but so far - no antlr DTD grammar.

Thanks.

- David -


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From nwestreb at arrowsash.com  Mon Dec 16 12:58:15 2002
From: nwestreb at arrowsash.com (davidjpenton2002 <nwestreb@arrowsash.com>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] what is a "protected" rule
Message-ID: <atlep7+j46m@eGroups.com>

Does the reference manual define what a "protected" lexer rule is? I 
find a somewhat oblique implication that it is a rule that is only 
accessed by another lexer rule (not by the parser), but nothing 
definitive in the manual.  Is that correct?

- David Penton -


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Dec 16 13:55:10 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] what is a "protected" rule
In-Reply-To: <atlep7+j46m@eGroups.com>
Message-ID: <0C41B664-1141-11D7-B92F-0030653DE0D6@jguru.com>


On Monday, December 16, 2002, at 12:58  PM, davidjpenton2002 
<nwestreb@arrowsash.com> wrote:

> Does the reference manual define what a "protected" lexer rule is? I
> find a somewhat oblique implication that it is a rule that is only
> accessed by another lexer rule (not by the parser), but nothing
> definitive in the manual.  Is that correct?

Here is the appropriate FAQ entry :)

http://www.jguru.com/faq/view.jsp?EID=125

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Dec 16 14:00:37 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] a couple of questions regarding antlr 2.7.1 reference manual
In-Reply-To: <atlboh+10jm3@eGroups.com>
Message-ID: <CEFD5124-1141-11D7-B92F-0030653DE0D6@jguru.com>


On Monday, December 16, 2002, at 12:06  PM, davidjpenton2002 
<nwestreb@arrowsash.com> wrote:
> First, what does "hoisting" mean, e.g. "a predicate that would be
> hoisted into the prediction expression" etc. (metalang.html p.15).
> Is this a term of art in compiler generation, or have I missed the
> definition of this term in the manual somewhere? Not uderstanding
> what it means is impeding my grasp of semantic predicates.

http://www.jguru.com/faq/view.jsp?EID=25327

It means to test expression in prediction expression, but antlr only 
hoists a distance of 0 at the moment; meaning expression is only 
hoisted into enclosing expression--not out of the rule for example.

>
> Second, I am a little baffled about constructs such as the following
> in semantic actions, again from p.15 of the metalanguage doc (pdf
> version):
>
> stat: {isTypeName(LT(1))}? ...etc.
>
> What I don't understand is, what are things like LT(1) and LA(1)? It

LA(1) next token of lookahead...LT(1) next Token objct of lookahead.

> appears that they are have something to do with lookahead, but at the
> point I encounter them in the manual, it is not clear if they are
> made available by antlr, or are user-defined things, etc.

ANTLR provides them.  Take a look at the Parser.java file etc... and 
you'll see these definitions.

>
> Thanks for bearing with me as I struggle my way from newbie to
> seasoned antlr user.  I have a fair bit of experience with yacc, cup,
> etc. but not with antlr.

Welcome :)

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Dec 16 14:51:22 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] unicode support
Message-ID: <E64810BE-1148-11D7-B92F-0030653DE0D6@jguru.com>

Folks,

At this point, I think ANTLR unicode support looks like this:

1. use a UTF-8 decoder or whatever with Java to get a Reader to give to 
"new Lexer(reader)".
2. use '\u...' characters in your grammar to match unicode chars and a 
unicode range like '\u0000'..'\uFFFE' in charVocabulary option.
3. ANTLR 2.7.2 generates bitsets in a better way so that classes don't 
explode with static data (JDK 1.4 wouldn't load some classes for 
example).

A few things that would be interesting to add:

Allow you to reference sets like JAVA_IDENTIFIER or LATIN_... and then 
characters like 'GREATER-THAN SIGN' and 'APOSTROPHE-QUOTE'.  The later 
would be easy: just a hashtable lookup if I can find the unicode char 
index in Java somewhere ;)  The former is harder as there is nothing in 
Java's Character.java class that lets me get a set of chars for say 
GREEK_EXTENDED.  Anybody know a good library that would give me a set 
of chars from these char class names?  I've just found:

http://oss.software.ibm.com/icu/userguide/unicodeSet.html

which might work.  It seems to have a UnicodeSet, but the problem is 
that ANTLR would then depend on this other library that we have no 
control over. ;(  Anybody have a solution?  We need a mapping like:

GREEK_EXTENDED -> set of chars

and the character mapping like:

APOSTROPHE-QUOTE -> char

I can convert a table to Java with a shell script probably if we can 
find a convenient table.

These ideas would work for charVocabulary and for just referencing them 
in lexer grammars.

If this is easy to do, I'll try to pop it into 2.7.2 before I release.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From devel at hunsicker.de  Mon Dec 16 14:49:06 2002
From: devel at hunsicker.de (Marco Hunsicker)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Changes in ASTFactory breaks custom AST classes
In-Reply-To: <3A5CB2DA-0FA8-11D7-B92F-0030653DE0D6@jguru.com>
References: <3A5CB2DA-0FA8-11D7-B92F-0030653DE0D6@jguru.com>
Message-ID: <9225815290.20021216234906@hunsicker.de>

Hello Terence,

>> [...]

Terence> Fixed to call initialize(AST).

>> Another minor thing I've noticed is that the new
>> "classHeaderPrefix" option (cool!) has been only implemented for
>> lexers. I hope this is not intentional? 

Terence> Added prefix to all grammars so you can say:

Terence> class TP extends TreeParser;

Terence> options {
Terence>          classHeaderPrefix="public abstract";
Terence> }


Excellent. Thanks for your fast reaction. One reason why I've chosen
ANTLR over JavaCC was the liveliness and responsiveness of its
community :)

-- 
Best regards,
 Marco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gackle at shaw.ca  Mon Dec 16 15:30:34 2002
From: gackle at shaw.ca (gackle@shaw.ca)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] ANTLR Eclipse plugin - problems with latest version
Message-ID: <72e4ee72b450.72b45072e4ee@shaw.ca>

Torsten, are you there?  Your most excellent Eclipse plugin for ANTLR appears to not work with 2.7.2a6.  I get a cryptic error, something like "Build failed.  Antlr\Tool", when trying to compile my grammar, an also the Outline window doesn't work.  :(

Regards,
Daniel


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From j_scandaliaris at yahoo.es  Mon Dec 16 15:33:40 2002
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Antlr reporting differences between 2.7.1 and 2.7.2a6
Message-ID: <002101c2a55b$950895d0$03001aac@zoys>

Hi,
	I just wanted to point out some differences in the reporting
done by antlr in 2.7.2a6 compared to 2.7.1. So far I have seen it only
upon nondeterminism between different lexer rules. The two versions
applied to the same grammar give:
2.7.1
ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
warning: lexical nondeterminism between rules DECIMAL_LITERAL and
BASED_LITERAL upon ...
2.7.2a6
ANTLR Parser Generator   Version 2.7.2a6 (20021130-1)   1989-2002
jGuru.com
D:\cvswork\vhdl_parser\VHDLparser.g: warning:null ...
	Now, I am not an antlr expert, so this messages actually help me
a lot (and I make lots of mistakes.) Is this behavior known to
everybody, or is it a little bug that slipped in? I must say that I
noticed differences in reporting only in this particular case (i.e.
nondeterminism between DIFFERENT lexical rules). If the nondeterminism
is between alternatives of the same rule, messages are OK.
	I know this might be a minor thing, but I wanted to raise the
point even so. When I get this messages I just re-run the older version
over the grammar to see where the problem actually is.
	Thanks,

Jorge
	


_______________________________________________________________
Copa del Mundo de la FIFA 2002
El nico lugar de Internet con vdeos de los 64 partidos. 
Apntante ya! en http://fifaworldcup.yahoo.com/fc/es/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Mon Dec 16 16:10:45 2002
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: Exceptions in C# backend
In-Reply-To: <3DFE2DAC.1030200@lmco.com>
Message-ID: <atlq25+7bqm@eGroups.com>

Hi Steven,

> I'm having some problems getting the example code from 
> antlr-2.7.2a6_11-30-2002.jar to function correctly. I have tried to 
> match up all of the version numbers on the releases, SDK etc to 
ensure a 
> correct configuration per previous postings.

The latest version of ANTLR for which a tested C# codegen exists is 
2.7.2a4. The hope is that ANTLR/C# 2.7.2a6 will be available soon.

Cheers!,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tima at intalio.com  Mon Dec 16 16:33:41 2002
From: tima at intalio.com (Tim Anderson)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] unicode support
In-Reply-To: <E64810BE-1148-11D7-B92F-0030653DE0D6@jguru.com>
Message-ID: <AHEMLCHGJOKOCPPFEOIHAEHMENAA.tima@intalio.com>

> From: Terence Parr [mailto:parrt@jguru.com]
>
>
> A few things that would be interesting to add:
>
> Allow you to reference sets like JAVA_IDENTIFIER or LATIN_... and then
> characters like 'GREATER-THAN SIGN' and 'APOSTROPHE-QUOTE'.  The later

That would be cool. For the OpenJMS selector grammar I currently have
protected rules corresponding to the Character.isJavaIdentifierStart() and
Character.isJavaIdentifierPart() methods - being able to replace these
long (and non-obvious) rules would be great.

> would be easy: just a hashtable lookup if I can find the unicode char
> index in Java somewhere ;)  The former is harder as there is nothing in
> Java's Character.java class that lets me get a set of chars for say
> GREEK_EXTENDED.  Anybody know a good library that would give me a set
> of chars from these char class names?  I've just found:

You could derive them using Character.UnicodeBlock, and a bit of brute
force i.e, iterate through all possible chars, invoking
UnicodeBlock.of(char),
and populate a set corresponding to the returned UnicodeBlock.

Regards,

Tim


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From brian-l-smith at uiowa.edu  Mon Dec 16 20:15:17 2002
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Antlr reporting differences between 2.7.1 and
 2.7.2a6
In-Reply-To: <002101c2a55b$950895d0$03001aac@zoys>
References: <002101c2a55b$950895d0$03001aac@zoys>
Message-ID: <3DFEA4D5.6060004@uiowa.edu>

Jorge,

This looks like something I might have caused. Do you know if it works 
with any 2.7.2 versions? My patches went in after 2.7.2a4. I'd 
appreciate it if you could send me an example grammar that has this 
problem. Even if I didn't cause it I can probably fix it.

Thanks,
Brian

Jorge Scandaliaris wrote:
> 2.7.1
> ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
> warning: lexical nondeterminism between rules DECIMAL_LITERAL and
> BASED_LITERAL upon ...
> 2.7.2a6
> ANTLR Parser Generator   Version 2.7.2a6 (20021130-1)   1989-2002
> jGuru.com
> D:\cvswork\vhdl_parser\VHDLparser.g: warning:null ...


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From j_scandaliaris at yahoo.es  Tue Dec 17 01:08:34 2002
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Antlr reporting differences between 2.7.1 and 2.7.2a6
In-Reply-To: <3DFEA4D5.6060004@uiowa.edu>
Message-ID: <000201c2a5ab$e4bd0a20$03001aac@zoys>

Brian,
	Thanks for your prompt reply. You were right. It works ok with
2.7.a4, I've just tried it. Attached is a portion of the grammar I am
working on (a VHDL parser), where you can see the problem. You should
get:
ANTLR Parser Generator   Version 2.7.2a4 (20021027-1)   1989-2002
jGuru.com
warning: lexical nondeterminism between rules DECIMAL_LITERAL and
BASED_LITERAL
	I haven't figured out yet why I get the warning, but that's not
the point here anyway.
	Regards,

Jorge

> Jorge,
> 
> This looks like something I might have caused. Do you know if it works
> with any 2.7.2 versions? My patches went in after 2.7.2a4. I'd
> appreciate it if you could send me an example grammar that has this
> problem. Even if I didn't cause it I can probably fix it.
> 
> Thanks,
> Brian
> 
> Jorge Scandaliaris wrote:
> > 2.7.1
> > ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
> > warning: lexical nondeterminism between rules DECIMAL_LITERAL and
> > BASED_LITERAL upon ...
> > 2.7.2a6
> > ANTLR Parser Generator   Version 2.7.2a6 (20021130-1)   1989-2002
> > jGuru.com
> > D:\cvswork\vhdl_parser\VHDLparser.g: warning:null ...


___________________________________________________
Yahoo! Sorteos
Consulta si tu nmero ha sido premiado en
Yahoo! Sorteos http://loteria.yahoo.es

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From j_scandaliaris at yahoo.es  Tue Dec 17 01:13:58 2002
From: j_scandaliaris at yahoo.es (Jorge Scandaliaris)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Antlr reporting differences between 2.7.1 and 2.7.2a6
In-Reply-To: <3DFEA4D5.6060004@uiowa.edu>
Message-ID: <000301c2a5ac$a5d7daa0$03001aac@zoys>

Sorry, I left the attachment out in the previous message. 
Jorge

Brian,
	Thanks for your prompt reply. You were right. It works ok with
2.7.a4, I've just tried it. Attached is a portion of the grammar I am
working on (a VHDL parser), where you can see the problem. You should
get:
ANTLR Parser Generator   Version 2.7.2a4 (20021027-1)   1989-2002
jGuru.com
warning: lexical nondeterminism between rules DECIMAL_LITERAL and
BASED_LITERAL
	I haven't figured out yet why I get the warning, but that's not
the point here anyway.
	Regards,

Jorge

> Jorge,
> 
> This looks like something I might have caused. Do you know if it works
> with any 2.7.2 versions? My patches went in after 2.7.2a4. I'd
> appreciate it if you could send me an example grammar that has this
> problem. Even if I didn't cause it I can probably fix it.
> 
> Thanks,
> Brian
> 
> Jorge Scandaliaris wrote:
> > 2.7.1
> > ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
> > warning: lexical nondeterminism between rules DECIMAL_LITERAL and
> > BASED_LITERAL upon ...
> > 2.7.2a6
> > ANTLR Parser Generator   Version 2.7.2a6 (20021130-1)   1989-2002
> > jGuru.com
> > D:\cvswork\vhdl_parser\VHDLparser.g: warning:null ...

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.g
Type: application/octet-stream
Size: 1149 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20021217/4f46476b/test.obj
From parrt at jguru.com  Tue Dec 17 01:32:44 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: Exceptions in C# backend
In-Reply-To: <atlq25+7bqm@eGroups.com>
Message-ID: <7F572AA9-11A2-11D7-B92F-0030653DE0D6@jguru.com>


On Monday, December 16, 2002, at 04:10  PM, micheal_jor 
<open.zone@virgin.net> wrote:

> Hi Steven,
>
>> I'm having some problems getting the example code from
>> antlr-2.7.2a6_11-30-2002.jar to function correctly. I have tried to
>> match up all of the version numbers on the releases, SDK etc to
> ensure a
>> correct configuration per previous postings.
>
> The latest version of ANTLR for which a tested C# codegen exists is
> 2.7.2a4. The hope is that ANTLR/C# 2.7.2a6 will be available soon.

2.7.2a6 has the C# codegen, right?  Did I forget to include that?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Dec 17 01:32:09 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] unicode support
In-Reply-To: <AHEMLCHGJOKOCPPFEOIHAEHMENAA.tima@intalio.com>
Message-ID: <6A746C3F-11A2-11D7-B92F-0030653DE0D6@jguru.com>


On Monday, December 16, 2002, at 04:33  PM, Tim Anderson wrote:

>> From: Terence Parr [mailto:parrt@jguru.com]
>>
>>
>> A few things that would be interesting to add:
>>
>> Allow you to reference sets like JAVA_IDENTIFIER or LATIN_... and then
>> characters like 'GREATER-THAN SIGN' and 'APOSTROPHE-QUOTE'.  The later
>
> That would be cool. For the OpenJMS selector grammar I currently have
> protected rules corresponding to the Character.isJavaIdentifierStart() 
> and
> Character.isJavaIdentifierPart() methods - being able to replace these
> long (and non-obvious) rules would be great.

Yep, those obvious ones for ID and such would be easy but would it be 
worth it just to do those?

>
>> would be easy: just a hashtable lookup if I can find the unicode char
>> index in Java somewhere ;)  The former is harder as there is nothing 
>> in
>> Java's Character.java class that lets me get a set of chars for say
>> GREEK_EXTENDED.  Anybody know a good library that would give me a set
>> of chars from these char class names?  I've just found:
>
> You could derive them using Character.UnicodeBlock, and a bit of brute
> force i.e, iterate through all possible chars, invoking
> UnicodeBlock.of(char),
> and populate a set corresponding to the returned UnicodeBlock.

Again though we'd have to do it for every char class...I guess that 
ain't bad ;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pete.forman at westerngeco.com  Tue Dec 17 01:12:13 2002
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] unicode support
In-Reply-To: <E64810BE-1148-11D7-B92F-0030653DE0D6@jguru.com>
Message-ID: <5.1.1.1.2.20021217090958.03be4a18@wgmail2.gatwick.eur.slb.com>

At 2002-12-16 14:51 -0800, Terence Parr wrote:
>I can convert a table to Java with a shell script probably if we can
>find a convenient table.

http://www.unicode.org/Public/UNIDATA/ReadMe.txt

That is for the current version, i.e. Unicode 3.2.  You might wish to
stick at version 3.0 which is the last 16 bit version.  Current
Unicode uses 21 bits but Java does not grok it.

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Dec 17 07:25:55 2002
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: Exceptions in C# backend
In-Reply-To: <7F572AA9-11A2-11D7-B92F-0030653DE0D6@jguru.com>
Message-ID: <atnfm3+kkcj@eGroups.com>


> > The latest version of ANTLR for which a tested C# codegen exists 
is
> > 2.7.2a4. The hope is that ANTLR/C# 2.7.2a6 will be available soon.
> 
> 2.7.2a6 has the C# codegen, right?  Did I forget to include that?
> 

It has the latest C# codegen - currently 2.7.2a4.

Micheal





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Dec 17 07:45:58 2002
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: unicode support
In-Reply-To: <5.1.1.1.2.20021217090958.03be4a18@wgmail2.gatwick.eur.slb.com>
Message-ID: <atngrm+bllk@eGroups.com>

--- In antlr-interest@yahoogroups.com, Pete Forman <pete.forman@w...> 
wrote:
> At 2002-12-16 14:51 -0800, Terence Parr wrote:
> >I can convert a table to Java with a shell script probably if we 
can
> >find a convenient table.
> 
> http://www.unicode.org/Public/UNIDATA/ReadMe.txt
> 
> That is for the current version, i.e. Unicode 3.2.  You might wish 
to
> stick at version 3.0 which is the last 16 bit version.  Current
> Unicode uses 21 bits but Java does not grok it.

What worked for me in the past:

I imported the http://www.unicode.org/Public/3.1-Update/UnicodeData-
3.1.0.txt text file into a database and wrote simple queries to dump 
the list of char-values and char-ranges for each UnicodeCategory. I 
used MS SQL Server and MS Access as a prototyping-friendly front end 
to write all the queries/formatting code.

In any case, this strategy should work with other RDBMSes as long as 
what you want is the char-values and char-ranges of the 
UnicodeCategory-ies. Otherwise Character.getType(char ch) should tell 
you what UnicodeCategory a given char belongs to.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From howardk at fatdog.com  Tue Dec 17 10:10:05 2002
From: howardk at fatdog.com (howardckatz <howardk@fatdog.com>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Lexical states and XQuery revisited
Message-ID: <atnp9t+olhu@eGroups.com>

Has anybody implemented anything at all complicated using lexical 
states? I'm looking at the XQuery grammar, and it's heavily dependent 
on the use of lexical states, as is XPath 2.0. 

I tried implementing XQuery in antlr about a year ago and it was 
beyond me because of this issue. I ended up going to JavaCC, which 
handles lexical states quite easily. However I'd like to give antlr 
another try if anybody has any good pointers for me.

Thanks,
Howard



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From steven.f.hurt at lmco.com  Tue Dec 17 11:24:23 2002
From: steven.f.hurt at lmco.com (steve hurt)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: Exceptions in C# backend
References: <atlq25+7bqm@eGroups.com>
Message-ID: <3DFF79E7.E1CC5E0B@lmco.com>

Micheal;

We have tried every release available for download on the ANTLR site (related to
c#) before we sent out the original message. I have also gone back and installed
every patch from MS that I can find to see if the problem is in our machine
configurations. We have also tried various machines with the full SDK and VS
installed to ensure it's not just a localized machine issue. So I have tried to
eliminate all of the issues at the user level before sending out a message.

What we did find is that 2.7.2a4 builds fine with nant but not VS. so there may
be some issues lurking in the various baselines. I only point that out in an
effort to make a future release much cleaner (I am a strong supporter of all the
work that has been done so I don't want that to come across as a strong
criticism).

Unless someone else can see an obvious problem we will attempt to dig into the
issue using a different methodology but I wanted to cover as many of the simple
errors as possible before doing that.

SH

"micheal_jor " wrote:

> Hi Steven,
>
> > I'm having some problems getting the example code from
> > antlr-2.7.2a6_11-30-2002.jar to function correctly. I have tried to
> > match up all of the version numbers on the releases, SDK etc to
> ensure a
> > correct configuration per previous postings.
>
> The latest version of ANTLR for which a tested C# codegen exists is
> 2.7.2a4. The hope is that ANTLR/C# 2.7.2a6 will be available soon.
>
> Cheers!,
>
> Micheal
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/

--


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: steven.f.hurt.vcf
Type: text/x-vcard
Size: 231 bytes
Desc: Card for steve hurt
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20021217/d40c37f4/steven.f.hurt.vcf
From nwestreb at arrowsash.com  Tue Dec 17 12:22:48 2002
From: nwestreb at arrowsash.com (davidjpenton2002 <nwestreb@arrowsash.com>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] help me to understand nondeterminism warnings please
Message-ID: <ato12o+9nhp@eGroups.com>

I would very much appreciate tips on understanding nondeterminism 
warnings from antlr.  I suppose it is probably not appropriate to 
just dump a grammar into a post and ask y'all to debug it, so, I'll 
only include the relevant snippets (which may be insufficient to 
identify the problem, I guess).

As I would like to gain a fairly complete grasp of antlr, I expect 
that replies to this post be to point me in the right direction in 
the FAQ, the reference manual, or other sources. Such advice would be 
much appreciated.

Anyway, here is what I get:

*** antlr output: ***

ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
grammar.g:137: warning: nondeterminism upon
grammar.g:137: 	k==1:S
grammar.g:137: 	k==2:S
grammar.g:137: 	between alt 1 and exit branch of block
grammar.g:92: warning: nondeterminism upon
grammar.g:92: 	k==1:S
grammar.g:92: 	k==2:S
grammar.g:92: 	between alt 1 and exit branch of block

  ***

Here is the rule at line 137:

notationType
    :  "NOTATION" S LEFTPAREN (S)? name 
       ((S)? VERTICALBAR (S)? name)*
       (S)? RIGHTPAREN 
    ;

And here is the production at line 92:

enumeration
    : LEFTPAREN (S)? nmtoken
      ((S)? VERTICALBAR (S)? nmtoken)* (S)? RIGHTPAREN
    ;

and, if it helps, the lexer rule for S is:

S : (' ' | '\t' | '\n' | '\r')+;

I don't really understand what the ambiguity is, which is probably 
just another way of saying I do not yet understand antlr and LL(k) 
parsing yet. More specifically, I don't know how to read the warning 
message.  What are 'alt 1' and the 'exit branch'?

The nondeterminism seems to exist regardless of k.  I guess I don't 
really know if I should expect to spot the problem by looking only at 
the rules at the line numbers reported by antlr, or if I must think 
more globally, i.e. look at the rules that include or are included by 
the offending rules as reported by antlr?

My attempt to sort this out entailed stripping my grammar down to the 
offending rules (the ones above), the rules that refer to them, and 
the related lexer rules.  This produced the odd (to me) effect of 
causing the problem to go away, i.e. no more warnings.

How should I approach getting an understanding of this?



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jlambert at nwlink.com  Tue Dec 17 12:49:59 2002
From: jlambert at nwlink.com (John Lambert)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] unicode support
In-Reply-To: <E64810BE-1148-11D7-B92F-0030653DE0D6@jguru.com>
Message-ID: <000301c2a60d$de1c2f90$3900610a@arthur2>


I would also recommend the use of ICU, I think this is now the de facto
standard
package for both C++ and java.
It would also be quite probable that anyone producing a Unicode application
would
already be using the ICU package.


Please allow the full Unicode 3.2 specification range, it can be represented
in any
of 3 formats:
UCS2, UTF16 and UTF8.

UTF8 is probably the best format for input/output but internally you may
wish to convert
to UCS2 in the C++ code at least.

There is also the format '\U00000000' to '\U001FFFFF' for the non BMP range.

John Lambert


-----Original Message-----
From: Terence Parr [mailto:parrt@jguru.com]
Sent: Monday, December 16, 2002 2:51 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] unicode support


Folks,

At this point, I think ANTLR unicode support looks like this:

1. use a UTF-8 decoder or whatever with Java to get a Reader to give to
"new Lexer(reader)".
2. use '\u...' characters in your grammar to match unicode chars and a
unicode range like '\u0000'..'\uFFFE' in charVocabulary option.
3. ANTLR 2.7.2 generates bitsets in a better way so that classes don't
explode with static data (JDK 1.4 wouldn't load some classes for
example).

A few things that would be interesting to add:

Allow you to reference sets like JAVA_IDENTIFIER or LATIN_... and then
characters like 'GREATER-THAN SIGN' and 'APOSTROPHE-QUOTE'.  The later
would be easy: just a hashtable lookup if I can find the unicode char
index in Java somewhere ;)  The former is harder as there is nothing in
Java's Character.java class that lets me get a set of chars for say
GREEK_EXTENDED.  Anybody know a good library that would give me a set
of chars from these char class names?  I've just found:

http://oss.software.ibm.com/icu/userguide/unicodeSet.html

which might work.  It seems to have a UnicodeSet, but the problem is
that ANTLR would then depend on this other library that we have no
control over. ;(  Anybody have a solution?  We need a mapping like:

GREEK_EXTENDED -> set of chars

and the character mapping like:

APOSTROPHE-QUOTE -> char

I can convert a table to Java with a shell script probably if we can
find a convenient table.

These ideas would work for charVocabulary and for just referencing them
in lexer grammars.

If this is easy to do, I'll try to pop it into 2.7.2 before I release.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From steven.f.hurt at lmco.com  Tue Dec 17 13:06:43 2002
From: steven.f.hurt at lmco.com (steve hurt)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: Exceptions in C# backend
References: <ato32q+vq00@eGroups.com>
Message-ID: <3DFF91E3.881061E8@lmco.com>



"micheal_jor " wrote:

> Hi Steven,
>
> > Micheal;
> >
> > We have tried every release available for download on the ANTLR
> site (related to
> > c#) before we sent out the original message.
>
> Very odd. The 'calc' example is a tested example, but you are saying
> it doesn't work on 2.7.2a2 and 2.7.2a4?. I should mention that the
> NAnt build files aren't always reliable. Can you build the "antlr.net-
> 2.7.2a4.sln" solution?. It includes the most tested example - "java"

If you are referring to the solution file under lib\csharp it won't build on any
system we have. That was a major concern that we might have a bad system
configuration or install. In the version we downloaded there are no errors in
the unzip process. In the panel under JavaParser items like the JavaLexer.cs,
TokenTypes etc are all incorrect. So we have tried building just the runtime
portion to see if we have a versioning issue. When we do that we get System.Byte
is not defined or imported. We thought about combining files that are missing
from other version but that gets to be problematic even if it works.

We have had no problems compiling and running sample code from the net or books
so it's not an obvious issue.

>
>
> > What we did find is that 2.7.2a4 builds fine with nant but not VS.
> so there may
> > be some issues lurking in the various baselines.
>
> OK. Now I know that your experiences are exceptional and very odd
> indeed. Both ANTLR/C# versions 2.7.2a2 and 2.7.2a4 are tested with
> VS.NET and Nant on .NET v1.0 Steven. We have built ANTLR/C# using the
> actual files on the website.

I agree thats why we used one system running downloaded MSDN components and
another with components from the product CD's (e.g. no association to MSDN).
These aren't even in the same location and different engineers doing the build
with the same results.

>
>
> I would suggest looking again at your VS.NET installation/environment
> but, I don't really know what you should be looking out for. Have you
> tried deleting the bin and obj sub-directories under the lib/csharp
> directory and doing a full rebuild again.

See above. I have also been looking at all of the net tools and nothing this
ugly seems to stick out.


>
>
> > Unless someone else can see an obvious problem we will attempt to
> dig into the
> > issue using a different methodology but I wanted to cover as many
> of the simple
> > errors as possible before doing that.
>
> Well, I've put down a to-do to re-check and update the NAnt files for
> the supported examples for the 2.7.2a6 release too.
>
> Micheal
>
> PS    What kind of projects do you use ANTLR for?

I have multiple tools that were all in Java for building analysis tools, source
and runtime, source to source translation and a few other concepts.


>
>
> PPS   What system produced the output messages included with your
> previous posting?. I thought it looked interesting at the time but
> forgot to ask in my reply  ;-)

We have identical results on a gateway laptop and another running on IBM
Netvista P4's. The netvista is brand new the gateway is a couple of years old.
Both have all of the service packs (as best we can tell with MS) installed both
are running windows 2000.

I agree that this feels like a user Net configuration problem but the chances of
two machines having identical issues has it's own challenge.

>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/

--



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: steven.f.hurt.vcf
Type: text/x-vcard
Size: 231 bytes
Desc: Card for steve hurt
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20021217/9d3b6014/steven.f.hurt.vcf
From jlambert at nwlink.com  Tue Dec 17 13:31:06 2002
From: jlambert at nwlink.com (John Lambert)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] unicode support
In-Reply-To: <000301c2a60d$de1c2f90$3900610a@arthur2>
Message-ID: <000601c2a613$9c78b120$3900610a@arthur2>

oops! I meant UCS4 not UCS2 (16bit)

JOhn

-----Original Message-----
From: John Lambert [mailto:jlambert@nwlink.com]
Sent: Tuesday, December 17, 2002 12:50 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] unicode support



I would also recommend the use of ICU, I think this is now the de facto
standard
package for both C++ and java.
It would also be quite probable that anyone producing a Unicode application
would
already be using the ICU package.


Please allow the full Unicode 3.2 specification range, it can be represented
in any
of 3 formats:
UCS2, UTF16 and UTF8.

UTF8 is probably the best format for input/output but internally you may
wish to convert
to UCS2 in the C++ code at least.

There is also the format '\U00000000' to '\U001FFFFF' for the non BMP range.

John Lambert


-----Original Message-----
From: Terence Parr [mailto:parrt@jguru.com]
Sent: Monday, December 16, 2002 2:51 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] unicode support


Folks,

At this point, I think ANTLR unicode support looks like this:

1. use a UTF-8 decoder or whatever with Java to get a Reader to give to
"new Lexer(reader)".
2. use '\u...' characters in your grammar to match unicode chars and a
unicode range like '\u0000'..'\uFFFE' in charVocabulary option.
3. ANTLR 2.7.2 generates bitsets in a better way so that classes don't
explode with static data (JDK 1.4 wouldn't load some classes for
example).

A few things that would be interesting to add:

Allow you to reference sets like JAVA_IDENTIFIER or LATIN_... and then
characters like 'GREATER-THAN SIGN' and 'APOSTROPHE-QUOTE'.  The later
would be easy: just a hashtable lookup if I can find the unicode char
index in Java somewhere ;)  The former is harder as there is nothing in
Java's Character.java class that lets me get a set of chars for say
GREEK_EXTENDED.  Anybody know a good library that would give me a set
of chars from these char class names?  I've just found:

http://oss.software.ibm.com/icu/userguide/unicodeSet.html

which might work.  It seems to have a UnicodeSet, but the problem is
that ANTLR would then depend on this other library that we have no
control over. ;(  Anybody have a solution?  We need a mapping like:

GREEK_EXTENDED -> set of chars

and the character mapping like:

APOSTROPHE-QUOTE -> char

I can convert a table to Java with a shell script probably if we can
find a convenient table.

These ideas would work for charVocabulary and for just referencing them
in lexer grammars.

If this is easy to do, I'll try to pop it into 2.7.2 before I release.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/





Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Dec 17 12:56:58 2002
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: Exceptions in C# backend
In-Reply-To: <3DFF79E7.E1CC5E0B@lmco.com>
Message-ID: <ato32q+vq00@eGroups.com>

Hi Steven,

> Micheal;
> 
> We have tried every release available for download on the ANTLR 
site (related to
> c#) before we sent out the original message.

Very odd. The 'calc' example is a tested example, but you are saying 
it doesn't work on 2.7.2a2 and 2.7.2a4?. I should mention that the 
NAnt build files aren't always reliable. Can you build the "antlr.net-
2.7.2a4.sln" solution?. It includes the most tested example - "java"

> What we did find is that 2.7.2a4 builds fine with nant but not VS. 
so there may
> be some issues lurking in the various baselines.

OK. Now I know that your experiences are exceptional and very odd 
indeed. Both ANTLR/C# versions 2.7.2a2 and 2.7.2a4 are tested with 
VS.NET and Nant on .NET v1.0 Steven. We have built ANTLR/C# using the 
actual files on the website. 

I would suggest looking again at your VS.NET installation/environment 
but, I don't really know what you should be looking out for. Have you 
tried deleting the bin and obj sub-directories under the lib/csharp 
directory and doing a full rebuild again.

> Unless someone else can see an obvious problem we will attempt to 
dig into the
> issue using a different methodology but I wanted to cover as many 
of the simple
> errors as possible before doing that.

Well, I've put down a to-do to re-check and update the NAnt files for 
the supported examples for the 2.7.2a6 release too.

Micheal

PS    What kind of projects do you use ANTLR for?

PPS   What system produced the output messages included with your 
previous posting?. I thought it looked interesting at the time but 
forgot to ask in my reply  ;-)



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Dec 17 15:33:46 2002
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: Exceptions in C# backend
In-Reply-To: <3DFF91E3.881061E8@lmco.com>
Message-ID: <atoc8q+j41f@eGroups.com>

Hi Steven,

> > Can you build the "antlr.net-
> > 2.7.2a4.sln" solution?. It includes the most tested example -
 "java"
> 
> If you are referring to the solution file under lib\csharp it won't 
build on any
> system we have. That was a major concern that we might have a bad 
system
> configuration or install. In the version we downloaded there are no 
errors in
> the unzip process. In the panel under JavaParser items like the 
JavaLexer.cs,
> TokenTypes etc are all incorrect.

The "missing" files are ANTLR generated files. They are generated by 
running NAnt in the examples\csharp\java directory. This invokes 
ANTLR itself - as specified in the NAnt java.build file - against the 
java.g and java.tree.g files in the directory to generate 
JavaLexer.cs, JavaRecognizer.cs,...etc.

> So we have tried building just the runtime
> portion to see if we have a versioning issue. When we do that we 
get System.Byte
> is not defined or imported. We thought about combining files that 
are missing
> from other version but that gets to be problematic even if it works.

'System.Byte' and it's alias 'byte' aren't used anywhere in the 
antlr.runtime source files. Even if they were, it wouldn't be a 
problem since VS.NET loads System.dll by default since no programs 
would run without the types in the System namespace.

> We have had no problems compiling and running sample code from the 
net or books
> so it's not an obvious issue.

What edition of VS.NET are you using?

> > PPS   What system produced the output messages included with your
> > previous posting?. I thought it looked interesting at the time but
> > forgot to ask in my reply  ;-)
> 
> We have identical results on a gateway laptop and another running 
on IBM
> Netvista P4's.

<SNIP>

I meant software system. What build/logging package was used?. Sorry 
for the confusion.

Cheers!,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Dec 17 16:20:38 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] help me to understand nondeterminism warnings please
In-Reply-To: <ato12o+9nhp@eGroups.com>
Message-ID: <88B1A18C-121E-11D7-B92F-0030653DE0D6@jguru.com>


On Tuesday, December 17, 2002, at 12:22  PM, davidjpenton2002 
<nwestreb@arrowsash.com> wrote:

> I would very much appreciate tips on understanding nondeterminism
> warnings from antlr.  I suppose it is probably not appropriate to
> just dump a grammar into a post and ask y'all to debug it, so, I'll
> only include the relevant snippets (which may be insufficient to
> identify the problem, I guess).
>
> As I would like to gain a fairly complete grasp of antlr, I expect
> that replies to this post be to point me in the right direction in
> the FAQ, the reference manual, or other sources. Such advice would be
> much appreciated.
>
> Anyway, here is what I get:
>
> *** antlr output: ***
>
> ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
> grammar.g:137: warning: nondeterminism upon
> grammar.g:137: 	k==1:S
> grammar.g:137: 	k==2:S
> grammar.g:137: 	between alt 1 and exit branch of block
> grammar.g:92: warning: nondeterminism upon
> grammar.g:92: 	k==1:S
> grammar.g:92: 	k==2:S
> grammar.g:92: 	between alt 1 and exit branch of block
>
>   ***
>
> Here is the rule at line 137:
>
> notationType
>     :  "NOTATION" S LEFTPAREN (S)? name
>        ((S)? VERTICALBAR (S)? name)*

The S might start this production or the next one...ANTLR doesn't know 
which to match with k=1.  k=2 might solve it.

>        (S)? RIGHTPAREN
>     ;
>
> And here is the production at line 92:
>
> enumeration
>     : LEFTPAREN (S)? nmtoken
>       ((S)? VERTICALBAR (S)? nmtoken)* (S)? RIGHTPAREN
>     ;
>
> and, if it helps, the lexer rule for S is:
>
> S : (' ' | '\t' | '\n' | '\r')+;
>
> I don't really understand what the ambiguity is, which is probably
> just another way of saying I do not yet understand antlr and LL(k)
> parsing yet. More specifically, I don't know how to read the warning
> message.  What are 'alt 1' and the 'exit branch'?

Exit branch of the loop or optional branch of an optional subrule.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Dec 17 16:52:28 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: unicode support
In-Reply-To: <atngrm+bllk@eGroups.com>
Message-ID: <FB771316-1222-11D7-B92F-0030653DE0D6@jguru.com>


On Tuesday, December 17, 2002, at 07:45  AM, micheal_jor 
<open.zone@virgin.net> wrote:

> --- In antlr-interest@yahoogroups.com, Pete Forman <pete.forman@w...>
> wrote:
>> At 2002-12-16 14:51 -0800, Terence Parr wrote:
>>> I can convert a table to Java with a shell script probably if we
> can
>>> find a convenient table.
>>
>> http://www.unicode.org/Public/UNIDATA/ReadMe.txt
>>
>> That is for the current version, i.e. Unicode 3.2.  You might wish
> to
>> stick at version 3.0 which is the last 16 bit version.  Current
>> Unicode uses 21 bits but Java does not grok it.
>
> What worked for me in the past:
>
> I imported the http://www.unicode.org/Public/3.1-Update/UnicodeData-
> 3.1.0.txt text file into a database and wrote simple queries to dump
> the list of char-values and char-ranges for each UnicodeCategory. I
> used MS SQL Server and MS Access as a prototyping-friendly front end
> to write all the queries/formatting code.

Yep, that table would be easy to convert into char defs.  It would take 
time and space to load that hashtable each time I start up antlr though 
just in case somebody referenced

'ORIYA LETTER DDHA'

but it would be pretty cool.  Could do it on demand if they reference 
any 'blah' that is not a single char.  I'd load the table and look it 
up.  Any ideas making this faster?  It's 12000 hashtable entries ;)  
Technically the charVocabulary could limit what I had to load, but...

Heh, what if I built the hashtable and then serialized it via Java?  It 
used to be horribly slow (and there are version issues), but would that 
load fast enough?  Just thinking of the 0-initialization of all that 
data makes me think it will be slow.

Is it ok if I use

http://www.unicode.org/Public/3.2-Update/UnicodeData-3.2.0.txt

instead of 3.1?

> In any case, this strategy should work with other RDBMSes as long as
> what you want is the char-values and char-ranges of the
> UnicodeCategory-ies. Otherwise Character.getType(char ch) should tell
> you what UnicodeCategory a given char belongs to.

That seems to be the strategy that people use.  For example, SableCC's 
Java grammar has this:

     unicode_letter =
         [0x0041..0x005a] | [0x0061..0x007a] | [0x00aa..0x00aa] | 
[0x00b5..0x00b5] |
         [0x00ba..0x00ba] | [0x00c0..0x00d6] | [0x00d8..0x00f6] | 
[0x00f8..0x01f5] |
	...

I think they ran 1..0xFFFF into isLetter(...) and got the ranges.  If I 
defined this one alone or isLetterOrDigit it would be a big improvement 
;)

Ok, so how is this for a plan.

1. Walk thru and update manual in prep for 2.7.2 (just cleaning up best 
I can for quick release).

2. If I have the stomach before release of 2.7.2, I try to add *simple* 
UNICODE support.  Here is how sets could be done.  If you reference a 
word like SPACE_SEPARATOR and there is no rule with that name in the 
lexer, it will assume it is a Unicode set and try to load it 
(intersected with charVocabulary???).  I'd prefer a syntactic indicator 
that you meant a unicode set rather than a rule, but I can't think of 
anything obvious at the moment.  Anyway, "load" means lookahead Java 
class antlr.unicode.SPACE_SEPARATOR which is a BitSet subclass.  If 
found, make an instance and just use it.  Nothing else in ANTLR will 
care or notice.  All code generators will still work (at least for 
generating char sets in the output lexers).  Pretty cool, eh?  This 
way, I can provide a few simple sets like LETTER_DIGIT and you all are 
free to define antlr.unicode.MY_FAVORITE_UNICODE_SET w/o having to 
touch the antlr source code.  Just place that in your CLASSPATH.  I'll 
provide the tool to pull stuff out of the unicode table for 
convenience.  THis mechanism makes the classloader the "hashtable" to 
map set name to bit set.  Clever, no?

The last question I have is "how do I know the complete set for a 
UnicodeSet like Mongolian"?  I can use Character.getType(...) to find 
out the *category*, but what about the vocabulary sets like Mongolian?  
It doesn't seem as simple as pulling out the first word from the name 
in the file:

18A8;MONGOLIAN LETTER MANCHU ALI GALI BHA;Lo;0;L;;;;;N;;;;;
18A9;MONGOLIAN LETTER ALI GALI DAGALGA;Mn;228;NSM;;;;;N;;;;;
1E00;LATIN CAPITAL LETTER A WITH RING BELOW;Lu;0;L;0041 
0325;;;;N;;;;1E01;

Since LATIN is way lower than 1E00...i've no idea what a "RING BELOW" 
is either ;)  How can I find the complete set of chars for a language?  
Ah ha!

http://www.unicode.org/Public/UNIDATA/Blocks.txt

has a list:

# Blocks-3.2.0.txt
# Correlated with Unicode 3.2
# Start Code..End Code; Block Name
0000..007F; Basic Latin
0080..00FF; Latin-1 Supplement
0100..017F; Latin Extended-A
0180..024F; Latin Extended-B
0250..02AF; IPA Extensions
02B0..02FF; Spacing Modifier Letters
0300..036F; Combining Diacritical Marks
0370..03FF; Greek and Coptic
0400..04FF; Cyrillic
0500..052F; Cyrillic Supplementary
0530..058F; Armenian
0590..05FF; Hebrew
0600..06FF; Arabic
0700..074F; Syriac
0780..07BF; Thaana
0900..097F; Devanagari
0980..09FF; Bengali
0A00..0A7F; Gurmukhi
...

So, this list is so small that ranges for a single language can be put 
into a quicky hashtable.  you could say

options {
	charVocabulary = THAI;
}

However, how do you limit digits to, say, THAI letters?

ID : (THAI)+ ; // includes too much!

Hmm...might need to introduce an intersection operator that let you say:

ID : (THAI & LETTER)* (THAI & (LETTER|DIGIT))+ ;

Uh...getting complicated.  How about I provide the tool to let you 
predefine THAI_LETTER and THAI_DIGIT given the THAI range from this 
table and the Character.isDigit method etc... from Java??  That will 
work to start ;)

Please comment on the above ramblings if you think I'm on the wrong or 
right track. :)

If we get this right, we'll be the first free parser generator that 
gets this UNICODE "right" I'd say ;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From brian-l-smith at uiowa.edu  Tue Dec 17 16:57:05 2002
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Antlr reporting differences between 2.7.1 and
 2.7.2a6
In-Reply-To: <000301c2a5ac$a5d7daa0$03001aac@zoys>
References: <000301c2a5ac$a5d7daa0$03001aac@zoys>
Message-ID: <3DFFC7E1.80804@uiowa.edu>

Jorge,

Thank you for the prompt reply with the testcase. This was caused by my 
changes. I have attached new version of antlr.DefaultToolErrorHandler 
that fixes the problem. You can compile it with javac -classpath . 
antlr\DefaultToolErrorHandler.java in the ANTLR home directory.

In addition, this version also moves the "between alts X and Y or block" 
message to the first line of the message, instead of putting it on its 
own line. I don't know if the asthetics are better or not, but it should 
help in environments like Visual Studio/Ecplise/NetBeans that have a 
very short and wide window for error messages.

Terence, if there are no objections then please apply the changes that 
are in this new version.

- Brian


Jorge Scandaliaris wrote:
> Sorry, I left the attachment out in the previous message. 
> Jorge
> 
> Brian,
> 	Thanks for your prompt reply. You were right. It works ok with
> 2.7.a4, I've just tried it. Attached is a portion of the grammar I am
> working on (a VHDL parser), where you can see the problem. You should
> get:
> ANTLR Parser Generator   Version 2.7.2a4 (20021027-1)   1989-2002
> jGuru.com
> warning: lexical nondeterminism between rules DECIMAL_LITERAL and
> BASED_LITERAL
> 	I haven't figured out yet why I get the warning, but that's not
> the point here anyway.




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
package antlr;

/* ANTLR Translator Generator
 * Project led by Terence Parr at http://www.jGuru.com
 * Software rights: http://www.antlr.org/RIGHTS.html
 *
 * $Id: //depot/code/org.antlr/main/main/antlr/DefaultToolErrorHandler.java#7 $
 */

import antlr.collections.impl.BitSet;

class DefaultToolErrorHandler implements ToolErrorHandler {
    DefaultToolErrorHandler(antlr.Tool tool) {
        antlrTool = tool;
    }
    private final antlr.Tool antlrTool;

    CharFormatter javaCharFormatter = new JavaCharFormatter();

    /** Dump token/character sets to a string array suitable for
     * {@link antlr.Tool.warning(String[], String, int, int)
     * @param output The array that will contain the token/character set dump,
     *               one element per k (lookahead) value
     * @param outputStartIndex The index into <code>output</code> that the
     *                         dump should start at.
     * @param lexicalAnalysis  true for lexical rule
     * @param depth  The depth of the ambiguity
     * @param sets  An array of bitsets containing the ambiguities
     */
    private void dumpSets(String[] output,
                          int outputStartIndex,
                          Grammar grammar,
                          boolean lexicalAnalysis,
                          int depth,
                          Lookahead[] sets) {
        StringBuffer line = new StringBuffer(100);
        for (int i = 1; i <= depth; i++) {
            line.append("k==").append(i).append(':');
            if (lexicalAnalysis) {
                String bits = sets[i].fset.toStringWithRanges(",", javaCharFormatter);
                if (sets[i].containsEpsilon()) {
                    line.append("<end-of-token>");
                    if (bits.length() > 0) {
                        line.append(',');
                    }
                }
                line.append(bits);
            } else {
                line.append(sets[i].fset.toString(",", grammar.tokenManager.getVocabulary()));
            }
            output[outputStartIndex++] = line.toString();
            line.setLength(0);
        }
    }

    /** Issue a warning about ambiguity between a alternates
     * @param blk  The block being analyzed
     * @param lexicalAnalysis  true for lexical rule
     * @param depth  The depth of the ambiguity
     * @param sets  An array of bitsets containing the ambiguities
     * @param altIdx1  The zero-based index of the first ambiguous alternative
     * @param altIdx2  The zero-based index of the second ambiguous alternative
     */
    public void warnAltAmbiguity(Grammar grammar,
                                 AlternativeBlock blk,
                                 boolean lexicalAnalysis,
                                 int depth,
                                 Lookahead[] sets,
                                 int altIdx1,
                                 int altIdx2) {
        final StringBuffer line = new StringBuffer(100);
        if (blk instanceof RuleBlock && ((RuleBlock)blk).isLexerAutoGenRule()) {
            Alternative ai = blk.getAlternativeAt(altIdx1);
            Alternative aj = blk.getAlternativeAt(altIdx2);
            RuleRefElement rri = (RuleRefElement)ai.head;
            RuleRefElement rrj = (RuleRefElement)aj.head;
            String ri = CodeGenerator.reverseLexerRuleName(rri.targetRule);
            String rj = CodeGenerator.reverseLexerRuleName(rrj.targetRule);
            line.append("lexical nondeterminism between rules ");
            line.append(ri).append(" and ").append(rj).append(" upon");
        } else {
            if (lexicalAnalysis)
                line.append("lexical ");
            line.append("nondeterminism between alts ");
            line.append(altIdx1 + 1).append(" and ");
            line.append(altIdx2 + 1).append(" of block upon");
        }
        final String [] output = new String [depth + 1];;
        output[0] = line.toString();
        dumpSets(output, 1, grammar, lexicalAnalysis, depth, sets);
        antlrTool.warning(output, grammar.getFilename(), blk.getLine(), blk.getColumn());

    }

    /** Issue a warning about ambiguity between an alternate and exit path.
     * @param blk  The block being analyzed
     * @param lexicalAnalysis  true for lexical rule
     * @param depth  The depth of the ambiguity
     * @param sets  An array of bitsets containing the ambiguities
     * @param altIdx  The zero-based index of the ambiguous alternative
     */
    public void warnAltExitAmbiguity(Grammar grammar,
                                     BlockWithImpliedExitPath blk,
                                     boolean lexicalAnalysis,
                                     int depth,
                                     Lookahead[] sets,
                                     int altIdx
                                     ) {
        String [] output = new String[depth + 2];
        output[0] = (lexicalAnalysis ? "lexical " : "") + "nondeterminism upon";
        dumpSets(output, 1, grammar, lexicalAnalysis, depth, sets);
        output[depth + 1] = "between alt " + (altIdx + 1) + " and exit branch of block";
        antlrTool.warning(output, grammar.getFilename(), blk.getLine(), blk.getColumn());
    }
}
From parrt at jguru.com  Tue Dec 17 17:17:32 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Antlr reporting differences between 2.7.1 and 2.7.2a6
In-Reply-To: <3DFFC7E1.80804@uiowa.edu>
Message-ID: <7BC74E1C-1226-11D7-B92F-0030653DE0D6@jguru.com>


On Tuesday, December 17, 2002, at 04:57  PM, Brian Smith wrote:

> Jorge,
>
> Thank you for the prompt reply with the testcase. This was caused by my
> changes. I have attached new version of antlr.DefaultToolErrorHandler
> that fixes the problem. You can compile it with javac -classpath .
> antlr\DefaultToolErrorHandler.java in the ANTLR home directory.
>
> In addition, this version also moves the "between alts X and Y or 
> block"
> message to the first line of the message, instead of putting it on its
> own line. I don't know if the asthetics are better or not, but it 
> should
> help in environments like Visual Studio/Ecplise/NetBeans that have a
> very short and wide window for error messages.

that is a good change :)

> Terence, if there are no objections then please apply the changes that
> are in this new version.

In mainline :)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From brian-l-smith at uiowa.edu  Tue Dec 17 18:17:38 2002
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: unicode support
In-Reply-To: <FB771316-1222-11D7-B92F-0030653DE0D6@jguru.com>
References: <FB771316-1222-11D7-B92F-0030653DE0D6@jguru.com>
Message-ID: <3DFFDAC2.5090100@uiowa.edu>

> <open.zone@virgin.net> wrote:
>>>stick at version 3.0 which is the last 16 bit version.  Current
>>>Unicode uses 21 bits but Java does not grok it.

They can be converted to surrogate pairs, I guess.

Terence Parr wrote:
> Yep, that table would be easy to convert into char defs.  It would take 
> time and space to load that hashtable each time I start up antlr though 
> just in case somebody referenced
> 
> 'ORIYA LETTER DDHA'
> 
> but it would be pretty cool.  Could do it on demand if they reference 
> any 'blah' that is not a single char.  I'd load the table and look it 
> up.  Any ideas making this faster?  It's 12000 hashtable entries ;)  
> Technically the charVocabulary could limit what I had to load, but...

Is charVocabulary useful? My understanding is that it is purely an 
optimization technique. But, I thought that ANTLR has a new way of doing 
token set optimizations now?

Anyway, I think that providing support for 'ORIYA LETTER DDHA' is a bit 
over the top for now. My understanding is that many people would be 
satisfied if Unicode general catagories, Unicode blocks, and maybe 
Unicode directionality catagories were supported. Then, I believe that 
you wouldn't have to worry so much about these optimizations.

With the technique described below, you could have one grammar file for 
each unicode block (or really, whatever catagorization you want). For 
example, the 'OriyaLexer' grammar would contain all 'Oriya ***' rules 
and 'ThaiLexer' would contain map all 'Thai ****' letters to rules.

> I think they ran 1..0xFFFF into isLetter(...) and got the ranges.  If I 
> defined this one alone or isLetterOrDigit it would be a big improvement 
> ;)

I very much agree.

> 2. If I have the stomach before release of 2.7.2, I try to add *simple* 
> UNICODE support.  Here is how sets could be done.  If you reference a 
> word like SPACE_SEPARATOR and there is no rule with that name in the 
> lexer, it will assume it is a Unicode set and try to load it 
> (intersected with charVocabulary???).  I'd prefer a syntactic indicator 
> that you meant a unicode set rather than a rule, but I can't think of 
> anything obvious at the moment.  Anyway, "load" means lookahead Java 

I like the thought of unicode catagories, etc. as rules. IMO, ANTLR 
should treat the Unicode stuff just like another lexical grammar. Then 
you can just import the "UnicodeGeneralCatagories" grammar into your own 
grammar when you need it.

I guess the problem is that ANTLR does not provide a way for grammar A 
to reuse multiple grammars at once. For example, I would like to say:

class MyLexer imports UnicodeGeneralGatagories, XMLCatagories;

And then have MyLexer be able to use rules from UnicodeGeneralCatagories 
and XMLCatagories, just as though it extended both of them at once.

Then, you could just generate a single UnicodeGeneralCatgories.g that 
defined a bunch of protected rules, one for each catagory.

I think this more general mechanism (replacing or augmenting grammar 
inheritance with grammar importation) would also have other benefits and 
would be useful both in parsers and lexers. It would basically mean that 
we would be creating reusable grammar libraries. Currently you can 
somewhat do that with grammar inheritance but you are limited to reusing 
one grammar at a time.

> class antlr.unicode.SPACE_SEPARATOR which is a BitSet subclass.  If 
> found, make an instance and just use it.  Nothing else in ANTLR will 
> care or notice.  All code generators will still work (at least for 
> generating char sets in the output lexers).  Pretty cool, eh?  This 
> way, I can provide a few simple sets like LETTER_DIGIT and you all are 
> free to define antlr.unicode.MY_FAVORITE_UNICODE_SET w/o having to 
> touch the antlr source code.  Just place that in your CLASSPATH.  I'll 
> provide the tool to pull stuff out of the unicode table for 
> convenience.  THis mechanism makes the classloader the "hashtable" to 
> map set name to bit set.  Clever, no?

Yes, but it would be best if I could define MY_FAVORITE_UNICODE_SET 
using an ANTLR grammar specification. Otherwise, you will have to define 
MY_FAVORITE_UNICODE_SET using Java, even if you are using the C# or C++ 
generators? It seems odd.

> The last question I have is "how do I know the complete set for a 
> UnicodeSet like Mongolian"?  I can use Character.getType(...) to find 
> 
> Since LATIN is way lower than 1E00...i've no idea what a "RING BELOW" 
> is either ;)  How can I find the complete set of chars for a language?  
> Ah ha!
> 
> http://www.unicode.org/Public/UNIDATA/Blocks.txt
 >
> So, this list is so small that ranges for a single language can be put 
> into a quicky hashtable.  you could say
> 
> options {
> 	charVocabulary = THAI;
> }

Again, in most cases I have seen, I have to set the charVocabularity to 
always be all of Unicode. Lexers simply don't do what you expect them to 
if they are given a character outside the charVocabulary. Therefore, the 
only real way to make your lexer robust is to ensure that the input does 
not ever contain characters outside the charVocabulary. And the easiest 
and most robust way to do that is to set charVocabulary as large as 
possible (i.e. all characters).

> 
> However, how do you limit digits to, say, THAI letters?
> 
> ID : (THAI)+ ; // includes too much!
> 
> Hmm...might need to introduce an intersection operator that let you say:
> 
> ID : (THAI & LETTER)* (THAI & (LETTER|DIGIT))+ ;

This seems like a very useful thing to have, not just for unicode 
support but for lexer (and parser?) rules in general. I think SableCC 
also has subtraction.

> Uh...getting complicated.  How about I provide the tool to let you 
> predefine THAI_LETTER and THAI_DIGIT given the THAI range from this 
> table and the Character.isDigit method etc... from Java??  That will 
> work to start ;)

I like the intersection operator better. Anyway, I think that in the 
short term there is not much demand for this "Tha Letter" scenerio, and 
there are workarounds (especially if the unicode block/catagory support 
is added) that could be used until the intersection operator is implemented.

- Brian







 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From glindholm at yahoo.com  Tue Dec 17 22:21:08 2002
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] help me to understand nondeterminism warnings please
In-Reply-To: <ato12o+9nhp@eGroups.com>
Message-ID: <20021218062108.45793.qmail@web12405.mail.yahoo.com>

I would suggest having your lexer throw away all the white space (S
rule).  In most languages the white space is not significant except
to separate tokens.
Use the { $setType(Token.SKIP); } command to have the lexer discard
all the whitespace characters.

S : (' ' | '\t' | '\n' | '\r')+ { $setType(Token.SKIP); };

Then remove all the 'S's from your parser.
This would greatly simplify your grammer as you wouldn't have (S)? 
between every token. And... the nondeterminism will likely go 
away or be clearer.

(If you need to perserve the whitespace for generation later you
can use the Hidden token stream mechanism.)

I know this doesn't really answer your question but it's good
advice and if you search this group for "nondeterminism" you will
find hundreds of similar questions and occasionally a helpful
answer :)

Greg


--- "davidjpenton2002 <nwestreb@arrowsash.com>"
<nwestreb@arrowsash.com> wrote:
> I would very much appreciate tips on understanding nondeterminism 
> warnings from antlr.  I suppose it is probably not appropriate to 
> just dump a grammar into a post and ask y'all to debug it, so, I'll 
> only include the relevant snippets (which may be insufficient to 
> identify the problem, I guess).
> 
> As I would like to gain a fairly complete grasp of antlr, I expect 
> that replies to this post be to point me in the right direction in 
> the FAQ, the reference manual, or other sources. Such advice would be
> 
> much appreciated.
> 
> Anyway, here is what I get:
> 
> *** antlr output: ***
> 
> ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
> grammar.g:137: warning: nondeterminism upon
> grammar.g:137: 	k==1:S
> grammar.g:137: 	k==2:S
> grammar.g:137: 	between alt 1 and exit branch of block
> grammar.g:92: warning: nondeterminism upon
> grammar.g:92: 	k==1:S
> grammar.g:92: 	k==2:S
> grammar.g:92: 	between alt 1 and exit branch of block
> 
>   ***
> 
> Here is the rule at line 137:
> 
> notationType
>     :  "NOTATION" S LEFTPAREN (S)? name 
>        ((S)? VERTICALBAR (S)? name)*
>        (S)? RIGHTPAREN 
>     ;
> 
> And here is the production at line 92:
> 
> enumeration
>     : LEFTPAREN (S)? nmtoken
>       ((S)? VERTICALBAR (S)? nmtoken)* (S)? RIGHTPAREN
>     ;
> 
> and, if it helps, the lexer rule for S is:
> 
> S : (' ' | '\t' | '\n' | '\r')+;
> 
> I don't really understand what the ambiguity is, which is probably 
> just another way of saying I do not yet understand antlr and LL(k) 
> parsing yet. More specifically, I don't know how to read the warning 
> message.  What are 'alt 1' and the 'exit branch'?
> 
> The nondeterminism seems to exist regardless of k.  I guess I don't 
> really know if I should expect to spot the problem by looking only at
> 
> the rules at the line numbers reported by antlr, or if I must think 
> more globally, i.e. look at the rules that include or are included by
> 
> the offending rules as reported by antlr?
> 
> My attempt to sort this out entailed stripping my grammar down to the
> 
> offending rules (the ones above), the rules that refer to them, and 
> the related lexer rules.  This produced the odd (to me) effect of 
> causing the problem to go away, i.e. no more warnings.
> 
> How should I approach getting an understanding of this?
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From v_vivekg at yahoo.com  Wed Dec 18 00:49:42 2002
From: v_vivekg at yahoo.com (v_vivekg <v_vivekg@yahoo.com>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] How to make this work ??
Message-ID: <atpcr6+2aol@eGroups.com>

Hi all,

I have binary and hex digits defined as follows :

protected
BDIG		: ('0'|'1') ;
protected
HDIG		:	(options {warnWhenFollowAmbig = false;} :('0'..'9') )
			|	('A'..'F')
			|	('a'..'f')
			;

and Binary String and Hex String defined as follows in the lexer

B_STRING : "'"   (BDIG)+  "'B"  ;
H_STRING : "'"   (HDIG)+  "'H"  ;

Now the problem is that this definition is not able to
parse the string of type '01010111'H . The code goes into
binary string parsing and gives error that 'B was expected
but 'H was found instead.
I tried with semantic and syntatic predicates with lot of
options but unable to make this work.

Kindly help on how this simple thing can be made to work.










 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pete.forman at westerngeco.com  Wed Dec 18 00:43:43 2002
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] unicode support
In-Reply-To: <000601c2a613$9c78b120$3900610a@arthur2>
References: <000301c2a60d$de1c2f90$3900610a@arthur2>
Message-ID: <5.1.1.1.2.20021218082217.03bdf890@wgmail2.gatwick.eur.slb.com>

At 2002-12-17 13:31 -0800, John Lambert wrote:
>oops! I meant UCS4 not UCS2 (16bit)
>
>JOhn
>
>-----Original Message-----
>From: John Lambert [mailto:jlambert@nwlink.com]
>Sent: Tuesday, December 17, 2002 12:50 PM
>To: antlr-interest@yahoogroups.com
>Subject: RE: [antlr-interest] unicode support
>
>
>
>I would also recommend the use of ICU, I think this is now the de
>facto standard package for both C++ and java.
>It would also be quite probable that anyone producing a Unicode
>application would already be using the ICU package.
>
>
>Please allow the full Unicode 3.2 specification range, it can be
>represented in any of 3 formats:
>UCS2, UTF16 and UTF8.

UCS-4 is from ISO/IEC 10646.  In Unicode UTF-32 is a better format to
avoid variable length encoding though the differences are minor.

http://www.unicode.org/unicode/reports/tr19/

That said, UTF-16 is probably the best format for us within the
program.

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pete.forman at westerngeco.com  Wed Dec 18 01:26:52 2002
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: unicode support
In-Reply-To: <FB771316-1222-11D7-B92F-0030653DE0D6@jguru.com>
References: <atngrm+bllk@eGroups.com>
Message-ID: <5.1.1.1.2.20021218092540.03be95b8@wgmail2.gatwick.eur.slb.com>

At 2002-12-17 16:52 -0800, Terence Parr wrote:
>but it would be pretty cool.  Could do it on demand if they reference
>any 'blah' that is not a single char.  I'd load the table and look it
>up.  Any ideas making this faster?  It's 12000 hashtable entries ;)
>Technically the charVocabulary could limit what I had to load, but...

How about using a perfect hash?

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From j_scandaliaris at yahoo.es  Wed Dec 18 02:58:20 2002
From: j_scandaliaris at yahoo.es (=?iso-8859-1?q?jorge=20scandaliaris?=)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Antlr reporting differences between 2.7.1 and 2.7.2a6
Message-ID: <20021218105820.28151.qmail@web21504.mail.yahoo.com>

----- Original Message -----
From: "Brian Smith" <brian-l-smith@uiowa.edu>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, December 18, 2002 1:57 AM
Subject: Re: [antlr-interest] Antlr reporting differences between 2.7.1 and
2.7.2a6


> Jorge,
>
> Thank you for the prompt reply with the testcase. This was caused by my
> changes. I have attached new version of antlr.DefaultToolErrorHandler
> that fixes the problem. You can compile it with javac -classpath .
> antlr\DefaultToolErrorHandler.java in the ANTLR home directory.
>
> In addition, this version also moves the "between alts X and Y or block"
> message to the first line of the message, instead of putting it on its
> own line. I don't know if the asthetics are better or not, but it should
> help in environments like Visual Studio/Ecplise/NetBeans that have a
> very short and wide window for error messages.
>
> Terence, if there are no objections then please apply the changes that
> are in this new version.
>
> - Brian

Good! Now it looks nice! Thanks again. I am surprised (nicely) of the
reactiveness of people in this group. I am glad I chose antlr!

Jorge


---------------------------------
Yahoo! Sorteos
Consulta si tu n?mero ha sido premiado
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20021218/2a78e361/attachment.html
From djplists at arrowsash.com  Wed Dec 18 06:55:45 2002
From: djplists at arrowsash.com (David Penton)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] help me to understand nondeterminism warnings
	please
In-Reply-To: <20021218062108.45793.qmail@web12405.mail.yahoo.com>
References: <20021218062108.45793.qmail@web12405.mail.yahoo.com>
Message-ID: <1040223346.2506.2.camel@linux2>

Thanks Greg. I shall give that a try.

- Dave -

On Wed, 2002-12-18 at 01:21, Greg Lindholm wrote:
> I would suggest having your lexer throw away all the white space (S
> rule).  In most languages the white space is not significant except
> to separate tokens.
> Use the { $setType(Token.SKIP); } command to have the lexer discard
> all the whitespace characters.
> 
> S : (' ' | '\t' | '\n' | '\r')+ { $setType(Token.SKIP); };
> 
> Then remove all the 'S's from your parser.
> This would greatly simplify your grammer as you wouldn't have (S)? 
> between every token. And... the nondeterminism will likely go 
> away or be clearer.
> 
> (If you need to perserve the whitespace for generation later you
> can use the Hidden token stream mechanism.)
> 
> I know this doesn't really answer your question but it's good
> advice and if you search this group for "nondeterminism" you will
> find hundreds of similar questions and occasionally a helpful
> answer :)
> 
> Greg
> 
> 
> --- "davidjpenton2002 <nwestreb@arrowsash.com>"
> <nwestreb@arrowsash.com> wrote:
> > I would very much appreciate tips on understanding nondeterminism 
> > warnings from antlr.  I suppose it is probably not appropriate to 
> > just dump a grammar into a post and ask y'all to debug it, so, I'll 
> > only include the relevant snippets (which may be insufficient to 
> > identify the problem, I guess).
> > 
> > As I would like to gain a fairly complete grasp of antlr, I expect 
> > that replies to this post be to point me in the right direction in 
> > the FAQ, the reference manual, or other sources. Such advice would be
> > 
> > much appreciated.
> > 
> > Anyway, here is what I get:
> > 
> > *** antlr output: ***
> > 
> > ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
> > grammar.g:137: warning: nondeterminism upon
> > grammar.g:137: 	k==1:S
> > grammar.g:137: 	k==2:S
> > grammar.g:137: 	between alt 1 and exit branch of block
> > grammar.g:92: warning: nondeterminism upon
> > grammar.g:92: 	k==1:S
> > grammar.g:92: 	k==2:S
> > grammar.g:92: 	between alt 1 and exit branch of block
> > 
> >   ***
> > 
> > Here is the rule at line 137:
> > 
> > notationType
> >     :  "NOTATION" S LEFTPAREN (S)? name 
> >        ((S)? VERTICALBAR (S)? name)*
> >        (S)? RIGHTPAREN 
> >     ;
> > 
> > And here is the production at line 92:
> > 
> > enumeration
> >     : LEFTPAREN (S)? nmtoken
> >       ((S)? VERTICALBAR (S)? nmtoken)* (S)? RIGHTPAREN
> >     ;
> > 
> > and, if it helps, the lexer rule for S is:
> > 
> > S : (' ' | '\t' | '\n' | '\r')+;
> > 
> > I don't really understand what the ambiguity is, which is probably 
> > just another way of saying I do not yet understand antlr and LL(k) 
> > parsing yet. More specifically, I don't know how to read the warning 
> > message.  What are 'alt 1' and the 'exit branch'?
> > 
> > The nondeterminism seems to exist regardless of k.  I guess I don't 
> > really know if I should expect to spot the problem by looking only at
> > 
> > the rules at the line numbers reported by antlr, or if I must think 
> > more globally, i.e. look at the rules that include or are included by
> > 
> > the offending rules as reported by antlr?
> > 
> > My attempt to sort this out entailed stripping my grammar down to the
> > 
> > offending rules (the ones above), the rules that refer to them, and 
> > the related lexer rules.  This produced the odd (to me) effect of 
> > causing the problem to go away, i.e. no more warnings.
> > 
> > How should I approach getting an understanding of this?
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
> __________________________________________________
> Do you Yahoo!?
> Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
> http://mailplus.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed Dec 18 08:35:35 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] How to make this work ??
Message-ID: <170826586F3BD511910D0200C110AAA8032B4FDF@memail03.bco-home.com>

Like this:

protected
BDIG		: ('0'|'1') ;
protected
HDIG		:	(options {warnWhenFollowAmbig = false;} :('0'..'9')
)
			|	('A'..'F')
			|	('a'..'f')
			;

protected B_STRING : "'"   (BDIG)+  "'B"  ;
protected H_STRING : "'"   (HDIG)+  "'H"  ;

BIN_OR_HEX_STRING: (B_STRING)=>B_STRING {$setType(B_STRING);}
			 | H_STRING {$setType(H_STRING);}
			 ;

Monty

-----Original Message-----
From: v_vivekg <v_vivekg@yahoo.com> [mailto:v_vivekg@yahoo.com]
Sent: Wednesday, December 18, 2002 12:50 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] How to make this work ??


Hi all,

I have binary and hex digits defined as follows :

protected
BDIG		: ('0'|'1') ;
protected
HDIG		:	(options {warnWhenFollowAmbig = false;} :('0'..'9')
)
			|	('A'..'F')
			|	('a'..'f')
			;

and Binary String and Hex String defined as follows in the lexer

B_STRING : "'"   (BDIG)+  "'B"  ;
H_STRING : "'"   (HDIG)+  "'H"  ;

Now the problem is that this definition is not able to
parse the string of type '01010111'H . The code goes into
binary string parsing and gives error that 'B was expected
but 'H was found instead.
I tried with semantic and syntatic predicates with lot of
options but unable to make this work.

Kindly help on how this simple thing can be made to work.










 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From wiggjd at sbu.ac.uk  Wed Dec 18 08:50:24 2002
From: wiggjd at sbu.ac.uk (David Wigg)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] ANTLR Option warnWhenFollowAmbig
Message-ID: <3E00A750.3090504@sbu.ac.uk>

We have been converting a grammar file from using PCCTS to using 
ANTLR 2.7.1.

I am now trying to remove ALL warnings resulting from generation 
of the grammar file, but I don't seem to be able to get rid of 
the one shown below using "options {warnWhenFollowAmbig = 
false;}:" in class_specifier rule shown below.

As you will see, I have replaced "#pragma approx" outside the 
brackets with "options {warnWhenFollowAmbig = false;}:" within 
the brackets which seems to work elsewhere.

However, having read 
http://www.antlr.org/doc/options.html#warnWhenFollowAmbig
I am beginning to wonder if it is always possible to turn 
unwanted warnings off as it may depend on the structure of the 
rule. I hope not, as I think we should be able to remove all 
unwanted warnings.

Please could someone clarify the situation and, if at all 
possible, let me know how I could get this warning turned off.

Thanks.

David.

CPP_parser.g:697: warning: nondeterminism upon
CPP_parser.g:697: 	k==1:ID
CPP_parser.g:697: 	k==2:COLON
CPP_parser.g:697: 	between alts 1 and 3 of block

class_specifier[DeclSpecifier ds] returns 
[CPPParser::TypeSpecifier ts]
{char *saveClass;}
	:	("struct"	{ts=tsSTRUCT;}
		|"union"	{ts=tsUNION;}
		|"class" 	{ts=tsCLASS;classDefinition= 1;in_class_def = true;}
		)
		//#pragma approx // indicate that ambig between alts 1 and 3 is ok
		(options {warnWhenFollowAmbig = false;}:
			(id:ID
			{saveClass = enclosingClass;
			enclosingClass = 
symbols->strdup(const_cast<char*>((id->getText()).data()));
			}
			( base_clause )?
			LCURLY	
			{beginClassDefinition(ts, (id->getText()).data()); 
in_class_def = true;}
			(member_declaration)*
			{endClassDefinition();in_class_def = false;}
			RCURLY
			{enclosingClass = saveClass;struct_flag = 1;}
			)
		|
			(LCURLY	
			{saveClass = enclosingClass; enclosingClass = "__anonymous";}
			{beginClassDefinition(ts, "anonymous");}
			(member_declaration)*
			{endClassDefinition();}
			RCURLY
			{enclosingClass = saveClass;struct_flag = 1;}
			)
		|	(
			tag:ID
			(options {warnWhenFollowAmbig = false;}:
			LESSTHAN template_argument_list GREATERTHAN
			)?
			{id_type = ID_VAR_NAME; // DW 3/4/01
			classForwardDeclaration(ts, ds, (tag->getText()).data());
			})
		)
	;



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed Dec 18 08:53:38 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] help me to understand nondeterminism warning
	s please
Message-ID: <170826586F3BD511910D0200C110AAA8032B4FE1@memail03.bco-home.com>

Start reading your generated code.  Take a look at some rules and you will
see tests like:

		if ((((LA(1) >= '0' && LA(1) <= '9')) &&
(_tokenSet_2.member(LA(2))) && (true))) {
			int _m340 = mark();
			synPredMatched340 = true;
			inputState.guessing++;
			try {
				....

The if statement is the lookahead test.  This rule is looking for a number
followed by a digit or '.' or 'e' or 'E'.  Those are in the _tokenSet_2.
You can prohibit creating the token set by using the option
codeGenBitsetTestThreshold = 999999; which says to make token sets only if
they have more than 999999 members.  However, you can't avoid bitsets for
negation rules like ~('1'..'9').  The "&& (true)" is an artifact of the code
generation and will be optimized away....

Also read the first chapter of Ter's draft book, look for "building parsers
by hand" on the www.antlr.org site.

Start asking questions like "why does this rule create this lookahead test?"

Monty


-----Original Message-----
From: davidjpenton2002 <nwestreb@arrowsash.com>
[mailto:nwestreb@arrowsash.com]
Sent: Tuesday, December 17, 2002 12:23 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] help me to understand nondeterminism warnings
please


I would very much appreciate tips on understanding nondeterminism 
warnings from antlr.  I suppose it is probably not appropriate to 
just dump a grammar into a post and ask y'all to debug it, so, I'll 
only include the relevant snippets (which may be insufficient to 
identify the problem, I guess).

As I would like to gain a fairly complete grasp of antlr, I expect 
that replies to this post be to point me in the right direction in 
the FAQ, the reference manual, or other sources. Such advice would be 
much appreciated.

Anyway, here is what I get:

*** antlr output: ***

ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
grammar.g:137: warning: nondeterminism upon
grammar.g:137: 	k==1:S
grammar.g:137: 	k==2:S
grammar.g:137: 	between alt 1 and exit branch of block
grammar.g:92: warning: nondeterminism upon
grammar.g:92: 	k==1:S
grammar.g:92: 	k==2:S
grammar.g:92: 	between alt 1 and exit branch of block

  ***

Here is the rule at line 137:

notationType
    :  "NOTATION" S LEFTPAREN (S)? name 
       ((S)? VERTICALBAR (S)? name)*
       (S)? RIGHTPAREN 
    ;

And here is the production at line 92:

enumeration
    : LEFTPAREN (S)? nmtoken
      ((S)? VERTICALBAR (S)? nmtoken)* (S)? RIGHTPAREN
    ;

and, if it helps, the lexer rule for S is:

S : (' ' | '\t' | '\n' | '\r')+;

I don't really understand what the ambiguity is, which is probably 
just another way of saying I do not yet understand antlr and LL(k) 
parsing yet. More specifically, I don't know how to read the warning 
message.  What are 'alt 1' and the 'exit branch'?

The nondeterminism seems to exist regardless of k.  I guess I don't 
really know if I should expect to spot the problem by looking only at 
the rules at the line numbers reported by antlr, or if I must think 
more globally, i.e. look at the rules that include or are included by 
the offending rules as reported by antlr?

My attempt to sort this out entailed stripping my grammar down to the 
offending rules (the ones above), the rules that refer to them, and 
the related lexer rules.  This produced the odd (to me) effect of 
causing the problem to go away, i.e. no more warnings.

How should I approach getting an understanding of this?



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From suresh_easwar at acml.com  Wed Dec 18 13:37:43 2002
From: suresh_easwar at acml.com (seaswar <suresh_easwar@acml.com>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] grammar ambiguity
Message-ID: <atqpr7+i2v6@eGroups.com>

How do I get rid of the ambiguities in the following.:

class FooParser extends Parser;
options {k = 4;}
id3DList: id3D (COMMA id3D)*;
id2DList: id2D (COMMA id2D)*;
id3D: id2D | ID DOT ID DOT ID
id2D: ID | ID DOT ID;

class FooLexer extends Lexer;
options {k = 2;}
ID: ( 'a'..'z' )+;
COMMA:',';
DOT:'.';

the warnings I get are:
test6.g:5: warning: nondeterminism upon
test6.g:5:         k==1:ID
test6.g:5:         k==2:DOT
test6.g:5:         k==3:ID
test6.g:5:         k==4:DOT
test6.g:5:         between alts 1 and 2 of block


Thanks
Suresh


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed Dec 18 13:50:00 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] grammar ambiguity
Message-ID: <170826586F3BD511910D0200C110AAA8032B4FE6@memail03.bco-home.com>

First you look at the generated code and analyze the lookahead tests in
question.  Then you read the FAQ or email archives about linear approximate
lookahead.  Then go back to your lookahead tests and see if the ambiguity is
a result of linear approximation, it probably is.  Then fix it with a
syntactic predicate.

Monty

-----Original Message-----
From: seaswar <suresh_easwar@acml.com> [mailto:suresh_easwar@acml.com]
Sent: Wednesday, December 18, 2002 1:38 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] grammar ambiguity


How do I get rid of the ambiguities in the following.:

class FooParser extends Parser;
options {k = 4;}
id3DList: id3D (COMMA id3D)*;
id2DList: id2D (COMMA id2D)*;
id3D: id2D | ID DOT ID DOT ID
id2D: ID | ID DOT ID;

class FooLexer extends Lexer;
options {k = 2;}
ID: ( 'a'..'z' )+;
COMMA:',';
DOT:'.';

the warnings I get are:
test6.g:5: warning: nondeterminism upon
test6.g:5:         k==1:ID
test6.g:5:         k==2:DOT
test6.g:5:         k==3:ID
test6.g:5:         k==4:DOT
test6.g:5:         between alts 1 and 2 of block


Thanks
Suresh


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jbb at acm.org  Wed Dec 18 14:07:01 2002
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] grammar ambiguity
In-Reply-To: <atqpr7+i2v6@eGroups.com> (suresh_easwar@acml.com)
References: <atqpr7+i2v6@eGroups.com>
Message-ID: <E18OmLF-0000AZ-00@gecko.home.org>

How 'bout:

class FooParser extends Parser;
//options {k = 4;}
id3DList: id3D (COMMA id3D)*;
id2DList: id2D (COMMA id2D)*;
id3D: ID ( DOT ID ( DOT ID )? )?;
id2D: ID ( DOT ID )?;

class FooLexer extends Lexer;
options {k = 2;}
ID: ( 'a'..'z' )+;
COMMA:',';
DOT:'.';


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From cintyram at yahoo.com  Wed Dec 18 14:49:46 2002
From: cintyram at yahoo.com (Sriram Durbha)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] unicode support
In-Reply-To: <5.1.1.1.2.20021218082217.03bdf890@wgmail2.gatwick.eur.slb.com>
Message-ID: <20021218224946.39812.qmail@web40014.mail.yahoo.com>

hi,
  if i were to write a parser based tool [ which im pretty much likely
to do] this spring/summer for an indian language [telugu]
i would want the following features ,
1. to be abel to clearly specify which charecter set and encoding  , i
assume the document is in, as you might know , there are quite a few
options here , and most documents possibly written by south indians
will have multiple languages , as  some of us who got educated in
english medium dont know the appropriate words to use in telugu :))

2. i am learning about how to render telugu and other fonts , looks
like the tool set will include freetype, some open type fonts, and ICU
;
   i want to allow programming in native languages .. all this resource
bundling and stuiff is way too much for simple applications which can
be handled other wise also , i mena if i know that my application will
be used by only telugu or only ORIYA ppl, all time i wnat to be able to
do it like i develop applications for english readers now ; and i want
a parser with which i can easily parse all the data files etc ..
 the problem with telugu and such languages is one character in telugu
is in most cases a composite of many unicode characters 
 example is ksha ; yeah thats one letter :)
or  shtra  this also one letter ; but it is almost impossible to write
all this in a lexer to be passed as one token, unless the document
format allows for character spacing characters too!! that would bloat
the document like crazy .. 
but once i figure out how to render the stuff on to the screen, i want
to be able to write an antlr grammar in a telugu editor and run java
antlr.Tool on that texttel.g file

this file can be read by a telugu knowing person , who has also learnt
antlr ;
but internally all the characters including the keywords etc will be
represented as unicode characters ..
since i will use such an editor i will expect it to set the appropriate
variables like charVocabulary for me, or atleast put them in a place
where i can see and copy , on how exactly that editor will know the
values .. may be we should follow one or one of all of the approaches
in teh preceeding discussion

cheers
ram



__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From djplists at arrowsash.com  Wed Dec 18 20:52:53 2002
From: djplists at arrowsash.com (David Penton)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Token Streams, multiple lexers - how does lexer access selector?
Message-ID: <1040273575.2241.10.camel@linux2>

I am busy trying to set up multiple lexers to mimic lex/flex lexer
states.

In the antlr reference manual chapter on Token Streams, under Multiple
Lexers, the following example lexer fragment is given to "switch to the
JavaDoc lexer":

JAVADOC_OPEN
    :   "/**" {selector.push("doclexer");}
    ;

My question is: how does the lexer java class generated by antlr know
about selector, which is an antlr.TokenStreamSelector?  I mean, other
than editing the generated lexer class source files manually.  I don't
see anything that is intended to do this automatically, nor do I see a
way to embed code in the generated parser or lexer files. Thus the
reference the method call "selector.push(...)" prevents my lexer class
from compiling unless I edit it manually to have a selector instance
variable and an accessor method to set it.

Thanks.

- Dave Penton -






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed Dec 18 23:15:10 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Token Streams, multiple lexers - how does lexer access selector?
In-Reply-To: <1040273575.2241.10.camel@linux2>
Message-ID: <9C524EC0-1321-11D7-B92F-0030653DE0D6@jguru.com>

On Wednesday, December 18, 2002, at 08:52  PM, David Penton wrote:

> I am busy trying to set up multiple lexers to mimic lex/flex lexer
> states.

Often you don't need states as it's just another rule in ANTLR.  I use 
multiple lexers only for embedded languages like javadoc.

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Thu Dec 19 02:05:34 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Token Streams, multiple lexers - how does lexer access selector?
In-Reply-To: <1040273575.2241.10.camel@linux2>; from djplists@arrowsash.com on Wed, Dec 18, 2002 at 11:52:53PM -0500
References: <1040273575.2241.10.camel@linux2>
Message-ID: <20021219110532.A18583@cs.utwente.nl>

On Wed, Dec 18, 2002 at 11:52:53PM -0500, David Penton wrote:
> My question is: how does the lexer java class generated by antlr know
> about selector, which is an antlr.TokenStreamSelector?  I mean, other
> than editing the generated lexer class source files manually.  I don't
> see anything that is intended to do this automatically, nor do I see a
> way to embed code in the generated parser or lexer files. Thus the
> reference the method call "selector.push(...)" prevents my lexer class
> from compiling unless I edit it manually to have a selector instance
> variable and an accessor method to set it.

See the multiLexer example, that lists one way. If you want to add code to
the generated classes, make them look like this:

header {
// into the generated header file..
}

{
// for c++ mode this goes into the generated cpp file. For java I don't
// know of hand.
}
class DemoJavaLexer extends Lexer;
options {
        k=2;
        importVocab = Common;
        exportVocab = Java;
}
tokens {
        INT="int";
}
{
// this gets inserted into the class.. so here you can add custom 
// constructors, methods, attributes. etc.
}

START: .... ;

This is also hidden somewhere in the docs...

HTH,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "You know how to use that thing?" [pointing to the sword]
  "Sure.. The pointy end goes into the other guy."
  --- The Mask of Zorro


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From djplists at arrowsash.com  Thu Dec 19 04:49:46 2002
From: djplists at arrowsash.com (David Penton)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Token Streams, multiple lexers - how does
	lexer access selector?
In-Reply-To: <20021219110532.A18583@cs.utwente.nl>
References: <1040273575.2241.10.camel@linux2> 
	<20021219110532.A18583@cs.utwente.nl>
Message-ID: <1040302188.1216.49.camel@linux2>

Thanks Ric.  That is what I was looking for.  Eventually I shall get
familiar with the documentation.  I find it a little hard to find things
in it so far, but antlr is so useful that I intend to stick with it.

- Dave -

On Thu, 2002-12-19 at 05:05, Ric Klaren wrote:
> On Wed, Dec 18, 2002 at 11:52:53PM -0500, David Penton wrote:
> > My question is: how does the lexer java class generated by antlr know
> > about selector, which is an antlr.TokenStreamSelector?  I mean, other
> > than editing the generated lexer class source files manually.  I don't
> > see anything that is intended to do this automatically, nor do I see a
> > way to embed code in the generated parser or lexer files. Thus the
> > reference the method call "selector.push(...)" prevents my lexer class
> > from compiling unless I edit it manually to have a selector instance
> > variable and an accessor method to set it.
> 
> See the multiLexer example, that lists one way. If you want to add code to
> the generated classes, make them look like this:
> 
> header {
> // into the generated header file..
> }
> 
> {
> // for c++ mode this goes into the generated cpp file. For java I don't
> // know of hand.
> }
> class DemoJavaLexer extends Lexer;
> options {
>         k=2;
>         importVocab = Common;
>         exportVocab = Java;
> }
> tokens {
>         INT="int";
> }
> {
> // this gets inserted into the class.. so here you can add custom 
> // constructors, methods, attributes. etc.
> }
> 
> START: .... ;
> 
> This is also hidden somewhere in the docs...
> 
> HTH,
> 
> Ric
> --
> -----+++++*****************************************************+++++++++-------
>     ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
> -----+++++*****************************************************+++++++++-------
>   "You know how to use that thing?" [pointing to the sword]
>   "Sure.. The pointy end goes into the other guy."
>   --- The Mask of Zorro
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From suresh_easwar at acml.com  Thu Dec 19 06:55:11 2002
From: suresh_easwar at acml.com (seaswar <suresh_easwar@acml.com>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: grammar ambiguity
In-Reply-To: <E18OmLF-0000AZ-00@gecko.home.org>
Message-ID: <atsmkf+bpin@eGroups.com>

That works. Thanks!
--- In antlr-interest@yahoogroups.com, jbb@a... wrote:
> How 'bout:
> 
> class FooParser extends Parser;
> //options {k = 4;}
> id3DList: id3D (COMMA id3D)*;
> id2DList: id2D (COMMA id2D)*;
> id3D: ID ( DOT ID ( DOT ID )? )?;
> id2D: ID ( DOT ID )?;
> 
> class FooLexer extends Lexer;
> options {k = 2;}
> ID: ( 'a'..'z' )+;
> COMMA:',';
> DOT:'.';


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From djplists at arrowsash.com  Thu Dec 19 07:15:49 2002
From: djplists at arrowsash.com (davidjpenton2002 <djplists@arrowsash.com>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: Token Streams, multiple lexers - how does lexer access selector?
In-Reply-To: <9C524EC0-1321-11D7-B92F-0030653DE0D6@jguru.com>
Message-ID: <atsnr5+10e9j@eGroups.com>

I may be able to avoid multiple lexers with work, but for now I find 
it conceptually clearer to use them (maybe because I am familiar with 
using lex states).

Is it "safe" to push and pop lexers using a selector object (as in 
the example in the ref manual) from within a parser action instead of 
from within a lexer rule?

- Dave -

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
wrote:
> On Wednesday, December 18, 2002, at 08:52  PM, David Penton wrote:
> 
> > I am busy trying to set up multiple lexers to mimic lex/flex lexer
> > states.
> 
> Often you don't need states as it's just another rule in ANTLR.  I 
use 
> multiple lexers only for embedded languages like javadoc.
> 
> Terence
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Thu Dec 19 07:21:57 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: Token Streams, multiple lexers - how does lexer access selector?
In-Reply-To: <atsnr5+10e9j@eGroups.com>; from djplists@arrowsash.com on Thu, Dec 19, 2002 at 03:15:49PM -0000
References: <9C524EC0-1321-11D7-B92F-0030653DE0D6@jguru.com> <atsnr5+10e9j@eGroups.com>
Message-ID: <20021219162156.B18583@cs.utwente.nl>

Hi,

On Thu, Dec 19, 2002 at 03:15:49PM -0000, davidjpenton2002 <djplists@arrowsash.com> wrote:
> Is it "safe" to push and pop lexers using a selector object (as in
> the example in the ref manual) from within a parser action instead of 
> from within a lexer rule?

It's unsafe to do from parser. In some situations you might get away with
it, but it's something that will break very easily. Think guns and feet
with holes in them.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 "Don't call me stupid." "Oh, right. To call you stupid would be an insult
    to stupid people. I've known sheep that could outwit you! I've worn
              dresses with higher IQs!" --- A Fish Called Wanda


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Thu Dec 19 08:05:23 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Token Streams, multiple lexers - how does le
	xer access selector?
Message-ID: <170826586F3BD511910D0200C110AAA8032B4FE7@memail03.bco-home.com>

Look at the examples\java\multiLexer example.  You have to create the
selector instance variable yourself or provide a public static class that
can hold it.

Monty

-----Original Message-----
From: David Penton [mailto:djplists@arrowsash.com]
Sent: Wednesday, December 18, 2002 8:53 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Token Streams, multiple lexers - how does
lexer access selector?


I am busy trying to set up multiple lexers to mimic lex/flex lexer
states.

In the antlr reference manual chapter on Token Streams, under Multiple
Lexers, the following example lexer fragment is given to "switch to the
JavaDoc lexer":

JAVADOC_OPEN
    :   "/**" {selector.push("doclexer");}
    ;

My question is: how does the lexer java class generated by antlr know
about selector, which is an antlr.TokenStreamSelector?  I mean, other
than editing the generated lexer class source files manually.  I don't
see anything that is intended to do this automatically, nor do I see a
way to embed code in the generated parser or lexer files. Thus the
reference the method call "selector.push(...)" prevents my lexer class
from compiling unless I edit it manually to have a selector instance
variable and an accessor method to set it.

Thanks.

- Dave Penton -






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Thu Dec 19 08:15:16 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: Token Streams, multiple lexers - how doe
	s lexer access selector?
Message-ID: <170826586F3BD511910D0200C110AAA8032B4FE8@memail03.bco-home.com>

In particular the lexer is always at least k tokens ahead of the parser.  So
instead of telling the lexer "I see a Y so switch lexers on the next token I
see," you are saying "I see a Y so switch lexing on your next token which is
at least k but possibly many more tokens ahead of what I just matched."
There is a chance that the parser hasn't requested a new token from the
lexer yet, so buffering may give the illusion that the lexer is less than k
tokens ahead when it is told to switch.  But with syntactic predicates you
could conceptually lex the entire file before you actually commit to parsing
a particular alternative.  That's why the call it "infinite lookahead."

Monty

-----Original Message-----
From: Ric Klaren [mailto:klaren@cs.utwente.nl]
Sent: Thursday, December 19, 2002 7:22 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Re: Token Streams, multiple lexers - how
does lexer access selector?


Hi,

On Thu, Dec 19, 2002 at 03:15:49PM -0000, davidjpenton2002
<djplists@arrowsash.com> wrote:
> Is it "safe" to push and pop lexers using a selector object (as in
> the example in the ref manual) from within a parser action instead of 
> from within a lexer rule?

It's unsafe to do from parser. In some situations you might get away with
it, but it's something that will break very easily. Think guns and feet
with holes in them.

Ric
-- 
-----+++++*****************************************************+++++++++----
---
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++----
---
 "Don't call me stupid." "Oh, right. To call you stupid would be an insult
    to stupid people. I've known sheep that could outwit you! I've worn
              dresses with higher IQs!" --- A Fish Called Wanda


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From djplists at arrowsash.com  Thu Dec 19 13:51:39 2002
From: djplists at arrowsash.com (David Penton)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Token Streams, multiple lexers - how does
	lexer access selector?
In-Reply-To: 
	<170826586F3BD511910D0200C110AAA8032B4FE7@memail03.bco-home.com>
References: <170826586F3BD511910D0200C110AAA8032B4FE7@memail03.bco-home.com>
Message-ID: <1040334700.1211.3.camel@linux2>

Thanks.

I'm jut learning my way around the documentation & examples.

I am a bit abashed to realize, now that I read your email and look at
the example, that my question was really a java question rather than an
antlr question - of course, a public static selector in Main would be
accessible from a lexer.

As a former college prof of mine one said "There is such a thing as a
stupid question.  Please be afraid to ask such questions."

- Dave -
On Thu, 2002-12-19 at 11:05, mzukowski@yci.com wrote:
> Look at the examples\java\multiLexer example.  You have to create the
> selector instance variable yourself or provide a public static class that
> can hold it.
> 
> Monty
> 
> -----Original Message-----
> From: David Penton [mailto:djplists@arrowsash.com]
> Sent: Wednesday, December 18, 2002 8:53 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Token Streams, multiple lexers - how does
> lexer access selector?
> 
> 
> I am busy trying to set up multiple lexers to mimic lex/flex lexer
> states.
> 
> In the antlr reference manual chapter on Token Streams, under Multiple
> Lexers, the following example lexer fragment is given to "switch to the
> JavaDoc lexer":
> 
> JAVADOC_OPEN
>     :   "/**" {selector.push("doclexer");}
>     ;
> 
> My question is: how does the lexer java class generated by antlr know
> about selector, which is an antlr.TokenStreamSelector?  I mean, other
> than editing the generated lexer class source files manually.  I don't
> see anything that is intended to do this automatically, nor do I see a
> way to embed code in the generated parser or lexer files. Thus the
> reference the method call "selector.push(...)" prevents my lexer class
> from compiling unless I edit it manually to have a selector instance
> variable and an accessor method to set it.
> 
> Thanks.
> 
> - Dave Penton -
> 
> 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hastur4711 at bigfoot.com  Fri Dec 20 12:04:05 2002
From: hastur4711 at bigfoot.com (beeh1973 <hastur4711@bigfoot.com>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Problem with Heterogenous AST antlr 2.7.2a6
Message-ID: <atvt3l+ln63@eGroups.com>

hi,

i tried to use my grammar with antlr 2.7.2a6. i used it with version 
2.7.2a2 before without problems.

i use heterogenous AST Construction
AST Classes are in some package.

header {
   package org.mydomain;
}

tokens {
   EXIST <AST=ExistOperator>;
}

[...]

i have a corresponding class org.mydomain.ExistOperator

while Parsing something ASTFactory tries to create a ExistOperator 
which fails with a RuntimeError occurs.

1) testExistOperator(TCLTest)
java.lang.IllegalArgumentException: Invalid class or can't make 
instance, ExistOperator
	at antlr.ASTFactory.createUsingCtor(ASTFactory.java:237)
	at antlr.ASTFactory.create(ASTFactory.java:194)
	at TCLParser.exist(TCLParser.java:826)
        [...]

it seems to me that ASTFactory is trying to create an instance of 
ExistOperator while it should create an instance of 
org.mydomain.ExistOperator.

adding the package name to the call to ASTFactory in TCLParser avoids 
the exception. 

is this a bug or am i missing something?

regards,
  alphonse bendt



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Fri Dec 20 18:27:38 2002
From: open.zone at virgin.net (micheal_jor <open.zone@virgin.net>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: Problem with Heterogenous AST antlr 2.7.2a6
In-Reply-To: <atvt3l+ln63@eGroups.com>
Message-ID: <au0jiq+noqb@eGroups.com>

--- In antlr-interest@yahoogroups.com, "beeh1973 <hastur4711@b...>" 
<hastur4711@b...> wrote:
> hi,
> 
> i tried to use my grammar with antlr 2.7.2a6. i used it with 
version 
> 2.7.2a2 before without problems.
> 
> i use heterogenous AST Construction
> AST Classes are in some package.
> 
> header {
>    package org.mydomain;
> }
> 
> tokens {
>    EXIST <AST=ExistOperator>;
> }
> 
> [...]
> 
> i have a corresponding class org.mydomain.ExistOperator

So the class is really called "org.mydomain.ExistOperator"

Have you tried the following?
    tokens {
       EXIST <AST=org.mydomain.ExistOperator>;
    }

I'm not sure whether your example with just the classname should work 
as well. Ter?

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From v_vivekg at yahoo.com  Fri Dec 20 21:50:20 2002
From: v_vivekg at yahoo.com (v_vivekg <v_vivekg@yahoo.com>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] How to make this work ?? Again
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4FDF@memail03.bco-home.com>
Message-ID: <au0ves+837u@eGroups.com>

Thanks Monty,

That really worked. And I still wonder how. In my parser rules I call 
B_STRING or H_STRING and not BIN_OR_HEX_STRING as defined in lexer 
and it still works. Ok this solves one problem. I have two more 
problems to resolve related to ASN.1 grammar posted on antlr site.. 
Kindly help me out with them. 


Problem1 :

I want to use syntatic predicates in the parser. Like for a rule
with embedded code as 

type returns [Object obj]		
{obj = null;}
	:	(obj = built_in_type)
	|	(obj = defined_type)		
	|	(obj = useful_type)		
	|	(obj = selection_type ) 		
	|	(obj = type_from_Object )		
	|	(obj = value_set_from_objects)	
	|       (obj = type_and_constraint )		
	|	(obj = type_with_constraint)	
	|	(obj = macros_type)
        ;

How can I check for the correct type using predicates. ??
In the parser only type will be called .


Problem 2 :
In lexer I had declared tokens as

tokens { 
TOK1_ID = "TOK1" ;
TOK1_ID = "TOK1" ;
}

and UpperCase and Lower Case identifiers as

----------
UPPER	
options {testLiterals = false;}
	:   ('A'..'Z') 
		(options {warnWhenFollowAmbig = false;}
	:	( 'a'..'z' | 'A'..'Z' |'-' | '0'..'9' ))* 	;

LOWER
options {testLiterals = false;}
	:	('a'..'z') 
		(options {warnWhenFollowAmbig = false;}
	:	( 'a'..'z' | 'A'..'Z' |'-' | '0'..'9' ))* 	;

---------

testLiteral Option is set to true in the lexer. 
The problem is that while parsing if antlr finds a Keyword
in place of an ID there is an error.
I would like that in the parser when I specify LOWER or UPPER I should
get whatsoever is there , even if it is a token defined in the lexer.
How can this be done. I tried reversing the testLiterals option as 
well but it does not work.

I am sure these are very trival problem, I searched for an example
in this group and on google as well, but am still not able to solve
them.

Thanks for help

Regards
Vivek









--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Like this:
> 
> protected
> BDIG		: ('0'|'1') ;
> protected
> HDIG		:	(options {warnWhenFollowAmbig = false;} :
('0'..'9')
> )
> 			|	('A'..'F')
> 			|	('a'..'f')
> 			;
> 
> protected B_STRING : "'"   (BDIG)+  "'B"  ;
> protected H_STRING : "'"   (HDIG)+  "'H"  ;
> 
> BIN_OR_HEX_STRING: (B_STRING)=>B_STRING {$setType(B_STRING);}
> 			 | H_STRING {$setType(H_STRING);}
> 			 ;
> 
> Monty
> 
> -----Original Message-----
> From: v_vivekg <v_vivekg@y...> [mailto:v_vivekg@y...]
> Sent: Wednesday, December 18, 2002 12:50 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] How to make this work ??
> 
> 
> Hi all,
> 
> I have binary and hex digits defined as follows :
> 
> protected
> BDIG		: ('0'|'1') ;
> protected
> HDIG		:	(options {warnWhenFollowAmbig = false;} :
('0'..'9')
> )
> 			|	('A'..'F')
> 			|	('a'..'f')
> 			;
> 
> and Binary String and Hex String defined as follows in the lexer
> 
> B_STRING : "'"   (BDIG)+  "'B"  ;
> H_STRING : "'"   (HDIG)+  "'H"  ;
> 
> Now the problem is that this definition is not able to
> parse the string of type '01010111'H . The code goes into
> binary string parsing and gives error that 'B was expected
> but 'H was found instead.
> I tried with semantic and syntatic predicates with lot of
> options but unable to make this work.
> 
> Kindly help on how this simple thing can be made to work.
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sat Dec 21 00:48:02 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: Problem with Heterogenous AST antlr 2.7.2a6
In-Reply-To: <au0jiq+noqb@eGroups.com>
Message-ID: <E9DA591B-14C0-11D7-B92F-0030653DE0D6@jguru.com>


On Friday, December 20, 2002, at 06:27  PM, micheal_jor 
<open.zone@virgin.net> wrote:

> --- In antlr-interest@yahoogroups.com, "beeh1973 <hastur4711@b...>"
> <hastur4711@b...> wrote:
>> hi,
>>
>> i tried to use my grammar with antlr 2.7.2a6. i used it with
> version
>> 2.7.2a2 before without problems.
>>
>> i use heterogenous AST Construction
>> AST Classes are in some package.
>>
>> header {
>>    package org.mydomain;
>> }
>>
>> tokens {
>>    EXIST <AST=ExistOperator>;
>> }
>>
>> [...]
>>
>> i have a corresponding class org.mydomain.ExistOperator
>
> So the class is really called "org.mydomain.ExistOperator"
>
> Have you tried the following?
>     tokens {
>        EXIST <AST=org.mydomain.ExistOperator>;
>     }
>
> I'm not sure whether your example with just the classname should work
> as well. Ter?

You should have to use the full classname unless your parser is in the 
org.mydomain package (in Java).

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hastur4711 at bigfoot.com  Sat Dec 21 07:01:16 2002
From: hastur4711 at bigfoot.com (beeh1973 <hastur4711@bigfoot.com>)
Date: Mon Dec 20 16:15:12 2004
Subject: [antlr-interest] Re: Problem with Heterogenous AST antlr 2.7.2a6
In-Reply-To: <E9DA591B-14C0-11D7-B92F-0030653DE0D6@jguru.com>
Message-ID: <au1vns+t6tk@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
wrote:
	
> > So the class is really called "org.mydomain.ExistOperator"
> >
> > Have you tried the following?
> >     tokens {
> >        EXIST <AST=org.mydomain.ExistOperator>;
> >     }
> >
> > I'm not sure whether your example with just the classname should 
work
> > as well. Ter?

it worked with antlr 2.7.2a2

> You should have to use the full classname unless your parser is in 
the
> org.mydomain package (in Java).
it is in the same package

i compared the code generated by v2.7.2a2 and v2.7.2.a6

v2.7.2a2 generates
...
ExistOperator tmp35_AST = null;
tmp35_AST = new ExistOperator(LT(1));
...

v2.7.2a6 generates:
...
ExistOperator tmp35_AST = null;
tmp35_AST = (ExistOperator)astFactory.create(LT(1),"ExistOperator");
...

as far as i understand the change.

v2.7.2a2: if parser and astclasses
reside in the same package you can use unqualified names in the 
grammar.

v2.7.2a6: you need to use full qulified classnames for astclasses in 
the
grammar.

right?

so i am changing my grammar.

thanks,
   alphonse





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sat Dec 21 10:19:21 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] Re: Problem with Heterogenous AST antlr 2.7.2a6
In-Reply-To: <au1vns+t6tk@eGroups.com>
Message-ID: <BA48BA30-1510-11D7-B92F-0030653DE0D6@jguru.com>


On Saturday, December 21, 2002, at 07:01  AM, beeh1973 
<hastur4711@bigfoot.com> wrote:

> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...>
> wrote:
> 	
>>> So the class is really called "org.mydomain.ExistOperator"
>>>
>>> Have you tried the following?
>>>     tokens {
>>>        EXIST <AST=org.mydomain.ExistOperator>;
>>>     }
>>>
>>> I'm not sure whether your example with just the classname should
> work
>>> as well. Ter?
>
> it worked with antlr 2.7.2a2
>
>> You should have to use the full classname unless your parser is in
> the
>> org.mydomain package (in Java).
> it is in the same package
>
> i compared the code generated by v2.7.2a2 and v2.7.2.a6
>
> v2.7.2a2 generates
> ...
> ExistOperator tmp35_AST = null;
> tmp35_AST = new ExistOperator(LT(1));
> ...
>
> v2.7.2a6 generates:
> ...
> ExistOperator tmp35_AST = null;
> tmp35_AST = (ExistOperator)astFactory.create(LT(1),"ExistOperator");
> ...
>
> as far as i understand the change.
>
> v2.7.2a2: if parser and astclasses
> reside in the same package you can use unqualified names in the
> grammar.
>
> v2.7.2a6: you need to use full qulified classnames for astclasses in
> the
> grammar.
>
> right?
>
> so i am changing my grammar.

Hi.  Makes sense.  Yep, the ASTFactory now creates them not the parser. 
  Ah ha!  I'll add to doc.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sje at sigma-inc.com  Sun Dec 22 08:19:55 2002
From: sje at sigma-inc.com (seaswar <sje@sigma-inc.com>)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] Lexer non-determinism
Message-ID: <au4onb+9hi3@eGroups.com>

I posted this on the jGuru forum but got no reply. Perhaps I'll have 
better luck here.

I don't understand why the following is ambiguous for k=2 but notfor 
k=3. I checked the generated code (java, antlr 2.7.1) and it looks 
right. So I turned of the warning. But I would still like to 
understand why there is a warning in the first place. No warning is 
generated for k=3.

class TestLexer extends Lexer;

options { k = 2; }

MULTI_LINE_COMMENT
    :    "/*"
         (    { LA(2) != '/' }? '*'
         |    ( "\r\n" | '\n') { newline(); }
         |   ~( '*' | '\r' | '\n')
         )*
         "*/" { $setType(Token.SKIP); }
    ;

ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
com/qsi/parser/test/test9.g:7: warning: lexical nondeterminism upon
com/qsi/parser/test/test9.g:7:  k==1:'*'
com/qsi/parser/test/test9.g:7:  k==2:'/'
com/qsi/parser/test/test9.g:7:  between alt 1 and exit branch of block



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sun Dec 22 12:56:43 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] Lexer non-determinism
In-Reply-To: <au4onb+9hi3@eGroups.com>
Message-ID: <E07F5B64-15EF-11D7-9AA5-0030653DE0D6@jguru.com>


On Sunday, December 22, 2002, at 08:19  AM, seaswar <sje@sigma-inc.com> 
wrote:

> I posted this on the jGuru forum but got no reply. Perhaps I'll have
> better luck here.
>
> I don't understand why the following is ambiguous for k=2 but notfor
> k=3. I checked the generated code (java, antlr 2.7.1) and it looks
> right. So I turned of the warning. But I would still like to
> understand why there is a warning in the first place. No warning is
> generated for k=3.
>
> class TestLexer extends Lexer;
>
> options { k = 2; }
>
> MULTI_LINE_COMMENT
>     :    "/*"
>          (    { LA(2) != '/' }? '*'
>          |    ( "\r\n" | '\n') { newline(); }
>          |   ~( '*' | '\r' | '\n')
>          )*
>          "*/" { $setType(Token.SKIP); }
>     ;
>
> ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
> com/qsi/parser/test/test9.g:7: warning: lexical nondeterminism upon
> com/qsi/parser/test/test9.g:7:  k==1:'*'
> com/qsi/parser/test/test9.g:7:  k==2:'/'
> com/qsi/parser/test/test9.g:7:  between alt 1 and exit branch of block

The predicate should hush the warning I think; perhaps 2.7.2 does.  
Anyway, check the java grammar to see what it does.

Thanks,
Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sje at sigma-inc.com  Sun Dec 22 13:52:16 2002
From: sje at sigma-inc.com (seaswar <sje@sigma-inc.com>)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] Re: Lexer non-determinism
In-Reply-To: <E07F5B64-15EF-11D7-9AA5-0030653DE0D6@jguru.com>
Message-ID: <au5c6g+o8th@eGroups.com>

The behaviour is the same using 2.7.2. I still get the warning. I 
expected the predicate to hush the warning. The code generated looks 
right but it insists on generating the warning for k=2 but not for 
k=3.

The java grammar has k=4. Thus no warning is generated.

Suresh

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
wrote:
> 
> On Sunday, December 22, 2002, at 08:19  AM, seaswar <sje@s...> 
> wrote:
> 
> > I posted this on the jGuru forum but got no reply. Perhaps I'll 
have
> > better luck here.
> >
> > I don't understand why the following is ambiguous for k=2 but 
notfor
> > k=3. I checked the generated code (java, antlr 2.7.1) and it looks
> > right. So I turned of the warning. But I would still like to
> > understand why there is a warning in the first place. No warning 
is
> > generated for k=3.
> >
> > class TestLexer extends Lexer;
> >
> > options { k = 2; }
> >
> > MULTI_LINE_COMMENT
> >     :    "/*"
> >          (    { LA(2) != '/' }? '*'
> >          |    ( "\r\n" | '\n') { newline(); }
> >          |   ~( '*' | '\r' | '\n')
> >          )*
> >          "*/" { $setType(Token.SKIP); }
> >     ;
> >
> > ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
> > com/qsi/parser/test/test9.g:7: warning: lexical nondeterminism 
upon
> > com/qsi/parser/test/test9.g:7:  k==1:'*'
> > com/qsi/parser/test/test9.g:7:  k==2:'/'
> > com/qsi/parser/test/test9.g:7:  between alt 1 and exit branch of 
block
> 
> The predicate should hush the warning I think; perhaps 2.7.2 does.  
> Anyway, check the java grammar to see what it does.
> 
> Thanks,
> Terence
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sun Dec 22 14:02:52 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] ANTLR Option warnWhenFollowAmbig
In-Reply-To: <3E00A750.3090504@sbu.ac.uk>
Message-ID: <1DD0E5EF-15F9-11D7-9AA5-0030653DE0D6@jguru.com>

Hi David,

If you are certain that there is no problem, you can use the option 
that shuts all warnings off.  Perhaps you should try "greedy=true" 
instead.

Ter

On Wednesday, December 18, 2002, at 08:50  AM, David Wigg wrote:

> We have been converting a grammar file from using PCCTS to using
> ANTLR 2.7.1.
>
> I am now trying to remove ALL warnings resulting from generation
> of the grammar file, but I don't seem to be able to get rid of
> the one shown below using "options {warnWhenFollowAmbig =
> false;}:" in class_specifier rule shown below.
>
> As you will see, I have replaced "#pragma approx" outside the
> brackets with "options {warnWhenFollowAmbig = false;}:" within
> the brackets which seems to work elsewhere.
>
> However, having read
> http://www.antlr.org/doc/options.html#warnWhenFollowAmbig
> I am beginning to wonder if it is always possible to turn
> unwanted warnings off as it may depend on the structure of the
> rule. I hope not, as I think we should be able to remove all
> unwanted warnings.
>
> Please could someone clarify the situation and, if at all
> possible, let me know how I could get this warning turned off.
>
> Thanks.
>
> David.
>
> CPP_parser.g:697: warning: nondeterminism upon
> CPP_parser.g:697: 	k==1:ID
> CPP_parser.g:697: 	k==2:COLON
> CPP_parser.g:697: 	between alts 1 and 3 of block
>
> class_specifier[DeclSpecifier ds] returns
> [CPPParser::TypeSpecifier ts]
> {char *saveClass;}
> 	:	("struct"	{ts=tsSTRUCT;}
> 		|"union"	{ts=tsUNION;}
> 		|"class" 	{ts=tsCLASS;classDefinition= 1;in_class_def = true;}
> 		)
> 		//#pragma approx // indicate that ambig between alts 1 and 3 is ok
> 		(options {warnWhenFollowAmbig = false;}:
> 			(id:ID
> 			{saveClass = enclosingClass;
> 			enclosingClass =
> symbols->strdup(const_cast<char*>((id->getText()).data()));
> 			}
> 			( base_clause )?
> 			LCURLY	
> 			{beginClassDefinition(ts, (id->getText()).data());
> in_class_def = true;}
> 			(member_declaration)*
> 			{endClassDefinition();in_class_def = false;}
> 			RCURLY
> 			{enclosingClass = saveClass;struct_flag = 1;}
> 			)
> 		|
> 			(LCURLY	
> 			{saveClass = enclosingClass; enclosingClass = "__anonymous";}
> 			{beginClassDefinition(ts, "anonymous");}
> 			(member_declaration)*
> 			{endClassDefinition();}
> 			RCURLY
> 			{enclosingClass = saveClass;struct_flag = 1;}
> 			)
> 		|	(
> 			tag:ID
> 			(options {warnWhenFollowAmbig = false;}:
> 			LESSTHAN template_argument_list GREATERTHAN
> 			)?
> 			{id_type = ID_VAR_NAME; // DW 3/4/01
> 			classForwardDeclaration(ts, ds, (tag->getText()).data());
> 			})
> 		)
> 	;
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sun Dec 22 15:32:19 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] 2.7.2 release candidate 1
Message-ID: <9CE9055E-1605-11D7-9AA5-0030653DE0D6@jguru.com>

Folks,

Due to a priority 0 system interrupt (family medical emergency), I've 
decided to just clean up the doc and release 2.7.2 after people have 
had a chance to verify it's ok.  I have added an antlr-2.7.2-rc1.tar.gz 
file in the http://www.antlr.org/download area if you want to try it.

I may have screwed up the C# integration and this tarball is full of 
messy stuff (I literally just tar'd up the dir and there are lots of 
random little junk files etc...).

Anyway, please let me know if this release works on your grammars.  
Let's finally release this thing!  BTW, the doc/antlr272release.html 
file wasn't updated in time for the tarball I made.  I should have the 
doc done this week or so.

I'll do the unicode enhancement soon and I think we'll have a python 
code generator in January :)

Hooray!

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From corno at dds.nl  Sun Dec 22 15:42:04 2002
From: corno at dds.nl (corno@dds.nl)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] question about example 'ANTLR masquerading as SED'
Message-ID: <1040600524.3e064dcc0fee3@webmail.dds.nl>

Hi all,

The following example is from the reference manual.

class T extends Lexer;
options {
  k=2;
  filter=IGNORE;
  charVocabulary = '\3'..'\177';
}

protected
IGNORE
  :  ( "\r\n" | '\r' | '\n' )
     {newline(); System.out.println("");}
  |  c:. {System.out.print(c);}
  ;


but it gives a warning about nondeterminism. However, when I comment out the 
last code block (behind c:.), there's no warning, which seems strange to me as 
it does not alter the logic (or does it).
Can anybody tell me:
a) Why this is
b) If this can be ignored
c) If not, how this can be solved

TIA,

Corno

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sun Dec 22 23:12:02 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] question about example 'ANTLR masquerading as SED'
In-Reply-To: <1040600524.3e064dcc0fee3@webmail.dds.nl>
Message-ID: <D5B0B61E-1645-11D7-9AA5-0030653DE0D6@jguru.com>


On Sunday, December 22, 2002, at 03:42  PM, corno@dds.nl wrote:

> Hi all,
>
> The following example is from the reference manual.
>
> class T extends Lexer;
> options {
>   k=2;
>   filter=IGNORE;
>   charVocabulary = '\3'..'\177';
> }
>
> protected
> IGNORE
>   :  ( "\r\n" | '\r' | '\n' )
>      {newline(); System.out.println("");}
>   |  c:. {System.out.print(c);}
>   ;
>
>
> but it gives a warning about nondeterminism. However, when I comment 
> out the
> last code block (behind c:.), there's no warning, which seems strange 
> to me as
> it does not alter the logic (or does it).

It alters the logic because if you remove it takes out the alt that 
says "match anything (else)".  "anything" matches the newline stuff 
also so it's ambiguous.  You can shut off the warning if you want 
though with a subrule option.  Or, just ignore the warning ;)

Terence

> Can anybody tell me:
> a) Why this is
> b) If this can be ignored
> c) If not, how this can be solved
>
> TIA,
>
> Corno
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Dec 23 09:24:56 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] How to make this work ?? Again
Message-ID: <170826586F3BD511910D0200C110AAA8032B4FF3@memail03.bco-home.com>

Look at the generated code for your original, and then mine.  Note that
non-protected rules in lexer get thrown into a method called nextToken(),
look at the logic in there.

For question 1, assuming that your types are giving you nondeterminisms you
need to figure out which ones are ambiguous (look at the error message and
the generated code) and then add a predicate to one of them like:

type returns [Object obj]		
{obj = null;}
	:	(built_in_type)=>(obj = built_in_type)
	|	(obj = defined_type)		
...

Question 2 is trickier.  It's the "what if my keywords can also be
identifiers?" question discussed in the FAQ at
http://www.jguru.com/faq/view.jsp?EID=140.  The deal is that the parser
can't talk back to the lexer, so you need to either figure out how to have
the lexer solve the problem or have the parser be able to change keywords
back to identifiers.  A more specific example with sample input would be a
good place to start that discussion.

Monty

-----Original Message-----
From: v_vivekg <v_vivekg@yahoo.com> [mailto:v_vivekg@yahoo.com]
Sent: Friday, December 20, 2002 9:50 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] How to make this work ?? Again


Thanks Monty,

That really worked. And I still wonder how. In my parser rules I call 
B_STRING or H_STRING and not BIN_OR_HEX_STRING as defined in lexer 
and it still works. Ok this solves one problem. I have two more 
problems to resolve related to ASN.1 grammar posted on antlr site.. 
Kindly help me out with them. 


Problem1 :

I want to use syntatic predicates in the parser. Like for a rule
with embedded code as 

type returns [Object obj]		
{obj = null;}
	:	(obj = built_in_type)
	|	(obj = defined_type)		
	|	(obj = useful_type)		
	|	(obj = selection_type ) 		
	|	(obj = type_from_Object )		
	|	(obj = value_set_from_objects)	
	|       (obj = type_and_constraint )		
	|	(obj = type_with_constraint)	
	|	(obj = macros_type)
        ;

How can I check for the correct type using predicates. ??
In the parser only type will be called .


Problem 2 :
In lexer I had declared tokens as

tokens { 
TOK1_ID = "TOK1" ;
TOK1_ID = "TOK1" ;
}

and UpperCase and Lower Case identifiers as

----------
UPPER	
options {testLiterals = false;}
	:   ('A'..'Z') 
		(options {warnWhenFollowAmbig = false;}
	:	( 'a'..'z' | 'A'..'Z' |'-' | '0'..'9' ))* 	;

LOWER
options {testLiterals = false;}
	:	('a'..'z') 
		(options {warnWhenFollowAmbig = false;}
	:	( 'a'..'z' | 'A'..'Z' |'-' | '0'..'9' ))* 	;

---------

testLiteral Option is set to true in the lexer. 
The problem is that while parsing if antlr finds a Keyword
in place of an ID there is an error.
I would like that in the parser when I specify LOWER or UPPER I should
get whatsoever is there , even if it is a token defined in the lexer.
How can this be done. I tried reversing the testLiterals option as 
well but it does not work.

I am sure these are very trival problem, I searched for an example
in this group and on google as well, but am still not able to solve
them.

Thanks for help

Regards
Vivek









--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Like this:
> 
> protected
> BDIG		: ('0'|'1') ;
> protected
> HDIG		:	(options {warnWhenFollowAmbig = false;} :
('0'..'9')
> )
> 			|	('A'..'F')
> 			|	('a'..'f')
> 			;
> 
> protected B_STRING : "'"   (BDIG)+  "'B"  ;
> protected H_STRING : "'"   (HDIG)+  "'H"  ;
> 
> BIN_OR_HEX_STRING: (B_STRING)=>B_STRING {$setType(B_STRING);}
> 			 | H_STRING {$setType(H_STRING);}
> 			 ;
> 
> Monty
> 
> -----Original Message-----
> From: v_vivekg <v_vivekg@y...> [mailto:v_vivekg@y...]
> Sent: Wednesday, December 18, 2002 12:50 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] How to make this work ??
> 
> 
> Hi all,
> 
> I have binary and hex digits defined as follows :
> 
> protected
> BDIG		: ('0'|'1') ;
> protected
> HDIG		:	(options {warnWhenFollowAmbig = false;} :
('0'..'9')
> )
> 			|	('A'..'F')
> 			|	('a'..'f')
> 			;
> 
> and Binary String and Hex String defined as follows in the lexer
> 
> B_STRING : "'"   (BDIG)+  "'B"  ;
> H_STRING : "'"   (HDIG)+  "'H"  ;
> 
> Now the problem is that this definition is not able to
> parse the string of type '01010111'H . The code goes into
> binary string parsing and gives error that 'B was expected
> but 'H was found instead.
> I tried with semantic and syntatic predicates with lot of
> options but unable to make this work.
> 
> Kindly help on how this simple thing can be made to work.
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon Dec 23 09:26:20 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] How to make this work ?? Again
Message-ID: <170826586F3BD511910D0200C110AAA8032B4FF4@memail03.bco-home.com>

Also see http://www.codetransform.com/filterexample.html for another
strategy for dealing with question #2.

Monty

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com]
Sent: Monday, December 23, 2002 9:25 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] How to make this work ?? Again
	
...

Question 2 is trickier.  It's the "what if my keywords can also be
identifiers?" question discussed in the FAQ at
http://www.jguru.com/faq/view.jsp?EID=140.  The deal is that the parser
can't talk back to the lexer, so you need to either figure out how to have
the lexer solve the problem or have the parser be able to change keywords
back to identifiers.  A more specific example with sample input would be a
good place to start that discussion.
...

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tyuri at il.ibm.com  Wed Dec 25 04:32:22 2002
From: tyuri at il.ibm.com (tsoglin <tyuri@il.ibm.com>)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] an antlr parser for C++ ?
Message-ID: <auc8gm+ksj1@eGroups.com>

I wonder if is there an ANTLR parser for C++ ? (I mean parser for C++ 
language, not parser written in C++).

I know there is one for C, but I didn't find anything for C++.

Thanks.
Yuri.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tyuri at il.ibm.com  Wed Dec 25 04:54:02 2002
From: tyuri at il.ibm.com (Yuri Tsoglin <tyuri@il.ibm.com>)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] an ANTLR parser for C++ ?
Message-ID: <auc9pa+a3m0@eGroups.com>

I wonder if is there an ANTLR parser for C++ ? (I mean parser for C++ 
language, not parser written in C++).

I know there is one for C, but I didn't find anything for C++.

Thanks.
Yuri.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From a_rueckert at gmx.net  Wed Dec 25 06:07:54 2002
From: a_rueckert at gmx.net (Andreas Rueckert)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] an ANTLR parser for C++ ?
In-Reply-To: <auc9pa+a3m0@eGroups.com>
References: <auc9pa+a3m0@eGroups.com>
Message-ID: <02122515085002.00770@hun.bre.de>

Hi!

On Mit, 25 Dez 2002 "Yuri Tsoglin wrote:
> I wonder if is there an ANTLR parser for C++ ? (I mean parser for C++ 
> language, not parser written in C++).
> 
> I know there is one for C, but I didn't find anything for C++.

I think, David Wigg <wiggjd@sbu.ac.uk>  is working on this?
Look for his mails on this list.

Ciao,
Andreas

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Thu Dec 26 11:32:27 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] 2.7.2 release candidate 1
Message-ID: <170826586F3BD511910D0200C110AAA8054020BC@memail03.bco-home.com>

With that change to the casting of tree building expressions the cgram
testsuite compiles and runs fine.

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Thu Dec 26 11:34:39 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] 2.7.2 release candidate 1
Message-ID: <170826586F3BD511910D0200C110AAA8054020BE@memail03.bco-home.com>

Oops, wrong address.  FYI I found a casting bug in rc1 with the cgram
distribution, should be an easy fix.  Hope everyone else tries it out on
their projects to catch these little things....

Monty

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com]
Sent: Thursday, December 26, 2002 11:32 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] 2.7.2 release candidate 1


With that change to the casting of tree building expressions the cgram
testsuite compiles and runs fine.

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gudnabrsam at yahoo.com  Fri Dec 27 08:39:31 2002
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] PL-SQL
Message-ID: <20021227163931.34914.qmail@web20420.mail.yahoo.com>

Does anyone have a PL-SQL grammar they can share?

Thanks,
Matt

__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Dec 27 11:45:47 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] PL-SQL
In-Reply-To: <20021227163931.34914.qmail@web20420.mail.yahoo.com>
Message-ID: <CB8C0D79-19D3-11D7-893C-0030653DE0D6@jguru.com>


On Friday, December 27, 2002, at 08:39  AM, Matt Benson wrote:

> Does anyone have a PL-SQL grammar they can share?
>
Will this help?

http://www.antlr.org/grammars/ORACLE-7-SQL/

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gudnabrsam at yahoo.com  Fri Dec 27 13:08:31 2002
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] PL-SQL
In-Reply-To: <CB8C0D79-19D3-11D7-893C-0030653DE0D6@jguru.com>
Message-ID: <20021227210831.69938.qmail@web20416.mail.yahoo.com>

I've looked at this grammar, and it would probably be
a good starting point for an Oracle PL/SQL grammar,
but the cold hard truth concerning me and Antlr is
that I am pretty much illiterate where grammars are
concerned.  I don't have any relevant background and
the Antlr documentation, while probably adequate for
those better educated than I, is little comfort to me.
 If I am ever destined to understand EBNF and/or Antlr
grammar construction, it will only be after many hours
of intense study, and unfortunately I just don't have
them right now.  So I thought I'd check with the rest
of the world.

-Matt

--- Terence Parr <parrt@jguru.com> wrote:
> 
> On Friday, December 27, 2002, at 08:39  AM, Matt
> Benson wrote:
> 
> > Does anyone have a PL-SQL grammar they can share?
> >
> Will this help?
> 
> http://www.antlr.org/grammars/ORACLE-7-SQL/
> 
> Terence
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator:
> http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Dec 27 14:19:04 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] added "getting started" document + tutorials
Message-ID: <3524FBB6-19E9-11D7-893C-0030653DE0D6@jguru.com>

Folks,

Added a getting started document:

http://www.antlr.org/doc/getting-started.html

available now and in the future 2.7.2 doc, which I'm working on right 
now.

Added a link from home page to the doc.

What else should go in the getting started doc?

When people return from vacation first week of January and test 
2.7.2rc1, we should be able to release 2.7.2!

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From macromliu at yahoo.com.cn  Sat Dec 28 08:37:50 2002
From: macromliu at yahoo.com.cn (macromliu <macromliu@yahoo.com.cn>)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] How to feed in the lexer via char*
Message-ID: <aukk0u+3dph@eGroups.com>


 I have to use the ANTLR in Visual C++ 6.0(SP5) with MFC support,

and I am using the ANTLR 2.7.0 (since i can not download the 2.7.1 
from the linkes in www.antlr.org, and can not compile the 2.7.1a 
sucessfully),

 but i meet a problem, the string to be lexered and pasered is 
resident in the file or buffer( char*) , so how can i feed the lexer?

 i have read the previous paper about how to feed the lexer via buf,
and also get the example --main2.cpp in calc (ANTLR 2.7.2a5 ), 
according to the example, i add two line at the beginning of cpp 
files.

#include <iostream>
#include <sstream>

and the lexer part's code like this...
CFile input("input.txt", CFile::modeRead);
char *buf = (char*)malloc(input.GetLength() + 1);
input.Read(buf, input.GetLength());
	
PassCondition passCond;
FILE *stream = freopen( "C:\\GMSSqlerror.txt", "w", stderr );

istringstream input(buf);

ANTLR_USING_NAMESPACE(std)
ANTLR_USING_NAMESPACE(antlr)
try {
   GMSPassLexer lexer(buf);
   GMSPassLexer lexer(input);
   lexer.setFilename("<arguments>");
   TokenBuffer buffer(lexer);
   GMSPassParser parser(buffer);
   parser.setFilename("<arguments>");
   parser.startParser(&passCond);
} catch(exception& e) {
   fprintf(stderr, "exception: ",  e.what());
}



and i got the following compile erro:

line(113) : error C2065: 'istringstream' : undeclared identifier
line(113) : error C2146: syntax error : missing ';' before  
identifier 'input'
line(113) : error C2064: term does not evaluate to a function
line(119) : error C2664: '__thiscall GMSPassLexer::GMSPassLexer(class 
std::basic_istream<char,struct std::char_traits<char> > &)' : cannot 
convert parameter 1 from 'class CFile' to 'class 
std::basic_istream<char,struct std::char_traits<char> > &' A 
reference that is not to 'const' cannot be bound to a non-lvalue 


so, what is wrong with it.....


how to solve this problem?
could anyone give me a tips??

:-)




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sun Dec 29 11:34:23 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] PL-SQL
In-Reply-To: <20021227210831.69938.qmail@web20416.mail.yahoo.com>
Message-ID: <88C1007A-1B64-11D7-893C-0030653DE0D6@jguru.com>


On Friday, December 27, 2002, at 01:08  PM, Matt Benson wrote:

> I've looked at this grammar, and it would probably be
> a good starting point for an Oracle PL/SQL grammar,
> but the cold hard truth concerning me and Antlr is
> that I am pretty much illiterate where grammars are
> concerned.  I don't have any relevant background and
> the Antlr documentation, while probably adequate for
> those better educated than I, is little comfort to me.

Howdy.  Have you seen my new getting started doc?

http://www.antlr.org/doc/getting-started.html

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From macromliu at yahoo.com.cn  Sun Dec 29 15:44:19 2002
From: macromliu at yahoo.com.cn (macromliu <macromliu@yahoo.com.cn>)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] Build the static Lib for ANTLR2.7.2rc1 under VC6.0(sp5)
Message-ID: <auo1cj+2ojr@eGroups.com>



 i have tried to use the ANTLR to do something.....

 and read many message to compile the ANTLR2.7.2 RC1

 here is the steps:

  1. create a new W32 Static Libaray project with the name ANTLR in 
this folder lib\cpp folder, click next
  2. check the MFC(it enable the RTTI)
  3. and all .cpp .hpp files to the project
  4. set the realease, and debug configurea
     and ANTLR_EXPORTS to the Preprecessor
  5. in file BaseASP.cpp and AST.hpp
    modify the 
    ANTLR_API AST* const nullASTptr=0;    line to 
    ANTLR_API AST* nullASTptr=0;
  
   :- or we got a compile error...

  6. compile...


now you can refer to examples\cpp\calc\main2.cpp to see how to 
paser the string via istringtream 

 :-)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From gudnabrsam at yahoo.com  Mon Dec 30 07:23:19 2002
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] PL-SQL
In-Reply-To: <88C1007A-1B64-11D7-893C-0030653DE0D6@jguru.com>
Message-ID: <20021230152319.121.qmail@web20414.mail.yahoo.com>

I have noted its existence and I appreciate it.  I
will let you know if it helps me.

Thanks,
Matt

--- Terence Parr <parrt@jguru.com> wrote:
> 
> On Friday, December 27, 2002, at 01:08  PM, Matt
> Benson wrote:
> 
> > I've looked at this grammar, and it would probably
> be
> > a good starting point for an Oracle PL/SQL
> grammar,
> > but the cold hard truth concerning me and Antlr is
> > that I am pretty much illiterate where grammars
> are
> > concerned.  I don't have any relevant background
> and
> > the Antlr documentation, while probably adequate
> for
> > those better educated than I, is little comfort to
> me.
> 
> Howdy.  Have you seen my new getting started doc?
> 
> http://www.antlr.org/doc/getting-started.html
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator:
> http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From corno at dds.nl  Mon Dec 30 13:53:58 2002
From: corno at dds.nl (corno@dds.nl)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] line information
Message-ID: <1041285238.3e10c076f2fa9@webmail.dds.nl>

Hi all,

I've been browsing through the documentation and the code of ANTLR 2.7.1 but 
nowhere I've seen an example on how to show line information when I'm parsing 
trees. What I want to know is from which line on the source document a 
token/AST originated. If it's possible I'll probably have to call getLine() on 
some object, I just don't know which one.
Can anybody help me?

TIA,

Corno


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Dec 30 14:26:46 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] line information
In-Reply-To: <1041285238.3e10c076f2fa9@webmail.dds.nl>
Message-ID: <C80497A4-1C45-11D7-893C-0030653DE0D6@jguru.com>


On Monday, December 30, 2002, at 01:53  PM, corno@dds.nl wrote:

> Hi all,
>
> I've been browsing through the documentation and the code of ANTLR 
> 2.7.1 but
> nowhere I've seen an example on how to show line information when I'm 
> parsing
> trees. What I want to know is from which line on the source document a
> token/AST originated. If it's possible I'll probably have to call 
> getLine() on
> some object, I just don't know which one.
> Can anybody help me?

Hi.  I think the right answer is to have ANTLR provide a new version of 
the CommonAST that holds the actual token object it was created from.  
This way you know everything including column info about whence a node. 
  ANTLR normally invokes:

		tmp5_AST = astFactory.create(LT(1));

(where LT(1) is a Token object) to create a node unless you 
specifically reference #[Type,"Text"] in your actions.

Somebody has a class like this I believe.  Can they speak up?  :)

I can create one pretty easily for 2.7.2.  This is really a necessary 
addition I'd say.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Dec 30 14:27:40 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:13 2004
Subject: [antlr-interest] 2.7.2 doc about finished
Message-ID: <E87CF563-1C45-11D7-893C-0030653DE0D6@jguru.com>

Folks,

I'm done with the 2.7.2 doc and release notes.  Just adding a glossary. 
  Then I will address the few rc1 compatibility problems and any others 
that show up after new years vacation.

We are almost there!

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

