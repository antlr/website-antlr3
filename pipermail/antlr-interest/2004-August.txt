From parrt at cs.usfca.edu  Sun Aug  1 13:02:27 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Re: another way to preserve token order in ASTs
In-Reply-To: <cehhqu+p8ov@eGroups.com>
References: <cehhqu+p8ov@eGroups.com>
Message-ID: <B6BCFF38-E3F5-11D8-A2DD-000A95891192@cs.usfca.edu>


On Jul 31, 2004, at 6:42 PM, thrutchy wrote:

> Yep, already read that.  I like the method I have below because:

Ooops...Sorry.

> - changes were minimal (override one method in an AST)
> - AST nodes need no additional data (but I need one extra node per
> root - you could argue which is best)
> - I knew how to also preserve whitespace
> - it made more sense to me

Those are good reasons.  I had trouble dealing with tokens not put into 
the tree.  How can I spit them back out!?

> I think the way I really would like to have done this would be to have
> a "left" children pointer in addition to current children pointer and
> sibling pointer.  With AST nodes like that, these rules:

Yeah, double link would be nice.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Sun Aug  1 13:05:35 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Re: ANTLR 3.0 status: got nongreedy loops going
In-Reply-To: <cehk52+bp3g@eGroups.com>
References: <cehk52+bp3g@eGroups.com>
Message-ID: <269D3322-E3F6-11D8-A2DD-000A95891192@cs.usfca.edu>


On Jul 31, 2004, at 7:22 PM, thrutchy wrote:

> A few things about greediness:
>
> - how about supporting regex-like "?" modifier (greedy=false):
>
> CMT : "/*" ( . )*? "*/" ;

you mean instead of the verbose greedy=false?  Well, ? means optional 
in my meta-language.

> - in antlr 2.7.4 warnings and docs, it says greediness doesn't make
> sense with the optional ()? construct, but it does (regex's use ??).

Greedy is more about finding longest match in normal regexs, but it 
requires backtracking.  I use it to indicate how to resolve a 
deterministic lookahead decision.

> greedy=true would be the same as warnWhenFollowAbiguous=false, and
> non-greedy would be the same as not matching the optional construct if
> it matches what's next.

I'm hoping that there will just generally be less bitching from antlr 
unless there is something that really needs your attention :)

> - also, the java regex "+" greedy=true modifier would be nice:
>
> "if" LPAREN expr RPAREN stat ( "else" stat )?+

That means to match greedily (the default) and shut up about it right?

> I find the majority of times I use options it can be boiled down to
> greediness, so the regex shorthands would be nice.

I see...  Well, i'm really tempted to simply turn off warning emanating 
from subrules vs "what follows".  It will always default to greedy 
anyway, so might as well just ignore the warning.

Ter

>
> Eric
>
>
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
>> Howdy,
>>
>> Spent 3 days thinking this week and one hour coding to get nongreedy
>> loops going properly.  ANTLR lexers are much easier to specify now.
>> For example, here is a sample grammar I'm working with:
>>
>> lexer grammar L;
>>
>> IF : "if" ;
>> ID : ('a'..'z')+ ;
>> WS : (' '|'\n')+ ;
>> CMT : "/*" ( greedy=false : . )* "*/" ;
>>
>> It properly deals with IF vs ID and it handles the CMT rule properly.
>> It stops when reading when it sees "*/".  Here is the test example:
>>
>> java TestLexer "bbd if /* * / ** foo */ abc"
>>
>> [bbd/65538,0:0]
>> [ /65539,0:0]
>> [if/65536,0:0]
>> [ /65539,0:0]
>> [/* * / ** foo *//65540,0:0]
>> [ /65539,0:0]
>> [abc/65538,0:0]
>>
>> TestLexer is just a loop that prints out Token objects.
>>
>>          IntegerStream charStream = new ANTLRStringStream(args[0]);
>>          L lexer = new L(charStream);
>>          Token t = lexer.nextToken();
>>          while ( t.getType()!= IntegerStream.EOF ) {
>>                  System.out.println(t.toString());
>>                  t = lexer.nextToken();
>>          }
>>
>> I feel confident that soon I'll be able to handle the Java grammar. :)
>>
>> BTW, org.antlr.runtime.* is only 370 lines of code so far. :)
>>
>> runtime/ANTLRStringStream.java
>> runtime/CommonToken.java
>> runtime/CommonTokenStream.java
>> runtime/DFA.java
>> runtime/IntegerStream.java
>> runtime/Lexer.java
>> runtime/Parser.java
>> runtime/Token.java
>> runtime/TokenSource.java
>> runtime/TokenStream.java
>>
>> L8R,
>> Ter
>> --
>> CS Professor & Grad Director, University of San Francisco
>> Creator, ANTLR Parser Generator, http://www.antlr.org
>> Cofounder, http://www.jguru.com
>> Cofounder, http://www.knowspam.net enjoy email again!
>> Cofounder, http://www.peerscope.com pure link sharing
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Sun Aug  1 15:15:49 2004
From: eric_mahurin at yahoo.com (thrutchy)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Re: another way to preserve token order in ASTs
In-Reply-To: <B6BCFF38-E3F5-11D8-A2DD-000A95891192@cs.usfca.edu>
Message-ID: <cejq2l+44gl@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> 
> On Jul 31, 2004, at 6:42 PM, thrutchy wrote:
> 
> > - changes were minimal (override one method in an AST)
> > - AST nodes need no additional data (but I need one extra node per
> > root - you could argue which is best)
> > - I knew how to also preserve whitespace
> > - it made more sense to me
> 
> Those are good reasons.  I had trouble dealing with tokens not put into 
> the tree.  How can I spit them back out!?

I'm just avoiding the problem!  I'm not going to put in any "!" into
the parser.  I guess you could merge them in with the hiddenTokens,
but I didn't want mix real tokens with whitespace/comments and I
didn't see a nice way to override the "!".  My plan is to make a new
base AST that will have just "right", "down", a simple string for the
"hiddenAfter" (or maybe a byte array or even do some huffman
encoding), so putting real token text in the hiddenAfter strings
probably wouldn't be a good idea.

> > I think the way I really would like to have done this would be to have
> > a "left" children pointer in addition to current children pointer and
> > sibling pointer.  With AST nodes like that, these rules:
> 
> Yeah, double link would be nice.

A bidirectional link list for the children would be another solution -
just point the root to the point in the list where it was removed.  I
was talking about having the root point to 2 unidirectional link lists
of children - left list and right list.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Sun Aug  1 16:13:44 2004
From: eric_mahurin at yahoo.com (thrutchy)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Re: ANTLR 3.0 status: got nongreedy loops going
In-Reply-To: <269D3322-E3F6-11D8-A2DD-000A95891192@cs.usfca.edu>
Message-ID: <cejtf8+gtqo@eGroups.com>

I'm basically suggesting syntax similar to what in java.util.regex (
http://java.sun.com/docs/books/tutorial/extra/regex/quant.html ). 
Here's a little table:

new      old
---      ---
(x)??    {i=0} ( options{greedy=false;}: {!i}? x {++i;} )*
(x)*?    ( options{greedy=false;}: x )*
(x)+?    ( options{greedy=false;}: x )+
(x)?+    ( options{warnWhenFollowAbiguous=false};}: x )?
(x)*+    ( options{greedy=true;}: x )*
(x)++    ( options{greedy=true;}: x )+

As you can see, it's a hack now to do a non-greedy/reluctant
conditional.  I faked a ( )? using a ( )*.

You can reuse ?/+ as suffixes since if they follow ?/*/+ they would
make no since otherwise.  Also, it's nice to reuse stuff from an
existing standard.  In this case regex.

If you are thinking about backtracking with any of these, you could
use a "*" suffix to ?/*/+ to mean do backtracking, since we've already
used ?/+ suffixes.  If you did that, you'd have quite a bit of options
just for loop:

rule     result when something can match x or y
----     --------------------------------------
(x)* y   Warn (or error?) of ambiguity
(x)*? y  use y (non-greedy/reluctant w/o backtracking)
(x)*+ y  use x (regex possessive)
(x)** y  prefer x but use y if it fails later (regex default)
(x)*?* y prefer y but use x if it fails later (regex reluctant)

Feel free to ignore my ramblings above about backtracking since there
probably isn't much usefulness for it :)  I just thought I mention it
since we are on the topic of greediness and backtracking is a related
thing.

I definitely don't think you should make turn off the ambiguity
warnings.  Overall I find them useful.

Eric

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> 
> On Jul 31, 2004, at 7:22 PM, thrutchy wrote:
> 
> > A few things about greediness:
> >
> > - how about supporting regex-like "?" modifier (greedy=false):
> >
> > CMT : "/*" ( . )*? "*/" ;
> 
> you mean instead of the verbose greedy=false?  Well, ? means optional 
> in my meta-language.
> 
> > - in antlr 2.7.4 warnings and docs, it says greediness doesn't make
> > sense with the optional ()? construct, but it does (regex's use ??).
> 
> Greedy is more about finding longest match in normal regexs, but it 
> requires backtracking.  I use it to indicate how to resolve a 
> deterministic lookahead decision.
> 
> > greedy=true would be the same as warnWhenFollowAbiguous=false, and
> > non-greedy would be the same as not matching the optional construct if
> > it matches what's next.
> 
> I'm hoping that there will just generally be less bitching from antlr 
> unless there is something that really needs your attention :)
> 
> > - also, the java regex "+" greedy=true modifier would be nice:
> >
> > "if" LPAREN expr RPAREN stat ( "else" stat )?+
> 
> That means to match greedily (the default) and shut up about it right?
> 
> > I find the majority of times I use options it can be boiled down to
> > greediness, so the regex shorthands would be nice.
> 
> I see...  Well, i'm really tempted to simply turn off warning emanating 
> from subrules vs "what follows".  It will always default to greedy 
> anyway, so might as well just ignore the warning.
> 
> Ter
> 
> >
> > Eric
> >
> >
> > --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...>
wrote:
> >> Howdy,
> >>
> >> Spent 3 days thinking this week and one hour coding to get nongreedy
> >> loops going properly.  ANTLR lexers are much easier to specify now.
> >> For example, here is a sample grammar I'm working with:
> >>
> >> lexer grammar L;
> >>
> >> IF : "if" ;
> >> ID : ('a'..'z')+ ;
> >> WS : (' '|'\n')+ ;
> >> CMT : "/*" ( greedy=false : . )* "*/" ;
> >>
> >> It properly deals with IF vs ID and it handles the CMT rule properly.
> >> It stops when reading when it sees "*/".  Here is the test example:
> >>
> >> java TestLexer "bbd if /* * / ** foo */ abc"
> >>
> >> [bbd/65538,0:0]
> >> [ /65539,0:0]
> >> [if/65536,0:0]
> >> [ /65539,0:0]
> >> [/* * / ** foo *//65540,0:0]
> >> [ /65539,0:0]
> >> [abc/65538,0:0]
> >>
> >> TestLexer is just a loop that prints out Token objects.
> >>
> >>          IntegerStream charStream = new ANTLRStringStream(args[0]);
> >>          L lexer = new L(charStream);
> >>          Token t = lexer.nextToken();
> >>          while ( t.getType()!= IntegerStream.EOF ) {
> >>                  System.out.println(t.toString());
> >>                  t = lexer.nextToken();
> >>          }
> >>
> >> I feel confident that soon I'll be able to handle the Java
grammar. :)
> >>
> >> BTW, org.antlr.runtime.* is only 370 lines of code so far. :)
> >>
> >> runtime/ANTLRStringStream.java
> >> runtime/CommonToken.java
> >> runtime/CommonTokenStream.java
> >> runtime/DFA.java
> >> runtime/IntegerStream.java
> >> runtime/Lexer.java
> >> runtime/Parser.java
> >> runtime/Token.java
> >> runtime/TokenSource.java
> >> runtime/TokenStream.java
> >>
> >> L8R,
> >> Ter
> >> --
> >> CS Professor & Grad Director, University of San Francisco
> >> Creator, ANTLR Parser Generator, http://www.antlr.org
> >> Cofounder, http://www.jguru.com
> >> Cofounder, http://www.knowspam.net enjoy email again!
> >> Cofounder, http://www.peerscope.com pure link sharing
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
> Cofounder, http://www.peerscope.com pure link sharing



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From i.maier at gmx.de  Mon Aug  2 06:53:28 2004
From: i.maier at gmx.de (Ingo Maier)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Bug in antlr.g?
Message-ID: <1091454808.1617.12.camel@zaphod>

Hi there,

in the ACTION lexer rule a CommonToken is instantiated directly:

CommonToken t = new CommonToken(_ttype,$getText);
t.setLine(actionLine);
t.setColumn(actionColumn);
$setToken(t);

Shouldn't this be:

Token t = makeToken(_ttype);
t.setText($getText);
t.setLine(actionLine);
t.setColumn(actionColumn);
$setToken(t);

?

Otherwise, different token types cannot be used, e.g. with
TokenStreamRewriteEngine which needs TokenWithIndex.

Thanks,
Ingo




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From khamenya at mail.ru  Mon Aug  2 04:46:27 2004
From: khamenya at mail.ru (Neurosurg)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Re: strong error recovery
In-Reply-To: <60198314-E246-11D8-8AC1-000393B5606C@codetransform.com>
Message-ID: <cel9ij+ptet@eGroups.com>

Monty,

thank you for your reply,

--- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> wrote:
> Ok, so what on earth are you parsing?  Why the garbage in there?
> 
> top: ((expr)=>expr | .)*;
> 
> Using a syntactic predicate as above will do the trick.  It will be 
> slow, but it will find every valid expression and advance one token at 
> a time if it wasn't an expression.

hm, it does work, but partly. 

Indeed, e.g. the following

+5+5 

is ok, i.e. 5+5 is extracted, but this 

5+5+

is just skipped, i.e. nothing extracted.

Note: I've used calc.g grammar example as basis to 
test your idea.

best regards,
Valery



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From khamenya at mail.ru  Mon Aug  2 05:18:32 2004
From: khamenya at mail.ru (Neurosurg)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] interactive envionments and non-delayed rule reduction
Message-ID: <celbeo+mkea@eGroups.com>

Hi all,

in interactive environments, the input expression should be 
parsed and evaluated right after, say, the enter is pressed.
Parser is not expected to wait for the further following input.
This is not what we get if we consider in the pasted below
grammar taken after calc.g from antlr examples.
After the first expression is provided, semicolon is given
and even end-of-line (EOL) is entered -- still no reduction 
according to expr rule is done. The output is given only 
after some next expression is given.

----------------------------------
top
	: (expr)*
	;

expr	:	mexpr (PLUS^ mexpr)* SEMI! EOL {
			CalcTreeWalker walker;
			float r = walker.expr(#expr);
			std::cout << "value is " << r << std::endl;
	}
	;

mexpr	:	atom (STAR^ atom)* ;

atom:	INT ;
----------------------------------

any good hints/links? 
(RTFMed, STFWed, sorry if missed smth)
thanks,
Valery




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From jm_newton at yahoo.co.uk  Mon Aug  2 06:15:15 2004
From: jm_newton at yahoo.co.uk (jm_newton)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Re: Code generation error?
In-Reply-To: <20040727134116.GA15549@cs.utwente.nl>
Message-ID: <celep3+q2a9@eGroups.com>

Hi,
sorry for the slow reply - just been on holiday...

Correcting the grammer got rid of the java statement in the generated
c++ code so thats a good start. 

I've also rebuilt ANTLR with your suggested fix and tried it on my
original grammer which resulted in compilable c++.

The only question I've got left now is how your fix gets into the
ANTLR src tree? Is there a bug tracking system I submit it to or does
the fact it is discussed here result in the change being incorporated
into the next release?

JM

--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> wrote:
> Hi,
> 
> On Tue, Jul 27, 2004 at 12:56:40PM -0000, jm_newton wrote:
> > STRING : !QUOTE ('a'..'z')* !QUOTE
> >        ;
> 
> First off I think you intend:
> 
> STRING : QUOTE! ('a'..'z')* QUOTE! ;
> 
> > which results in the following generated c++ code. Unfourtunately in
> > the middle of that lot is the statement text.setLength(). setLength()
> > is not a valid member function of std::basic_string so compilation
> > fails...
> 
> Nevertheless you caught something that's been in the codegen since
ages...
> congrats :)
> 
> The fix is easy though replace the only occurence of
> text.setLength(_saveIndex) in CppCodegenerator.java with a
> text.erase(_saveIndex) and rebuild antlr.
> 
> > I'm not sure if I'm trying to do the impossible with my parser or
> > found a real problem here. Environment:
> > cantlr -> 2.7.4 from WWW site
> > antlr-2.7.4
> 
> Not the impossible, if rebuilding of antlr is not an option then the (I
> hope) corrected rule above does not trigger the bug.
> 
> Thanks for the report!
> 
> Ric
> --
>
-----+++++*****************************************************+++++++++-------
>     ---- Ric Klaren ----- j.klaren@u... ----- +31 53 4893755  ----
>
-----+++++*****************************************************+++++++++-------
>   "You can't expect to wield supreme executive power just because some
>    watery tot throws a sword at you!"
>   --- Monty Python and the Holy Grail



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From joanpujol at gmail.com  Mon Aug  2 08:31:11 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Lexer error?
Message-ID: <d2d18a104080208311d51d848@mail.gmail.com>

It's very strange.
I don't know if I forget something but this doesn't work for me:

class LexerAnalyzer extends Lexer;

options {
k=2;
}



OPMINOROREQUAL:"<=";
ASSIGN:	":="|"<-";

Antlr give me this error message:

ANTLR Parser Generator   Version 2.7.4   1989-2004 jGuru.com
 gram?tiques\l?xic.g: warning:lexical nondeterminism between rules
OPMINOROREQUAL and ASSIGN upon
gram?tiques\l?xic.g:     k==1:'<'
gram?tiques\l?xic.g:     k==2:'='


I have lookahead of two symbols, isn't it. I don't know because the
Lexer has a nondeterminism.

Cheers,


-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Mon Aug  2 09:01:15 2004
From: eric_mahurin at yahoo.com (thrutchy)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Token doesn't minimally need a type
Message-ID: <celogb+pl17@eGroups.com>

If you make a Token class that is specific to a particular type, then
I see no reason that "int type" is needed (it is a constant).  I'm
overriding it with "static int type".  I'm hoping that this will
allocate a type an underlying non-static "int type" per object of this
new class - I don't know enough about java to answer that question.

Next time around it would probably be better to have Token as an
interface rather than a base class.

It sure would be nice if we had multiple inheritance in java.  I would
like to make a class that inherits from a Token and an AST.  Since I'm
mainly concerned about efficiency with AST's maybe I'll make all my
Token classes also implement AST and then use them for both.  We'll
see how it turns out...

Eric




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From jlst at gettysgroup.com  Mon Aug  2 08:51:17 2004
From: jlst at gettysgroup.com (Jamie Herre)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] ANTLR 3.0 question about common actions
In-Reply-To: <7AE0A93F-E0F9-11D8-A2DD-000A95891192@cs.usfca.edu>
References: <5E3FD2E1-E0D3-11D8-A2DD-000A95891192@cs.usfca.edu> <6BF2A9A8-E0D7-11D8-BFCF-000393B5606C@codetransform.com> <7AE0A93F-E0F9-11D8-A2DD-000A95891192@cs.usfca.edu>
Message-ID: <CABCF49A-E49B-11D8-BB94-000A95CDDFF4@gettysgroup.com>


On Jul 28, 2004, at 5:51 PM, Terence Parr wrote:

> lexer grammar(target="Java")
> ....
> NEWLINE : '\n' {if (some-condition) <skip()>;} ;
>
> where <skip()> is a reference to the template called skip in your
> output templates.  It just gets replaced and ANTLR couldn't care less.
> The "Java.stg" file would contain all the stuff one would need to look
> at.

I think this is a great idea.  I'm wondering whether maybe different 
quoting styles could be available for actions. E.g.  This would allow 
old-schoolers to suit themselves and also provide a alternate mode with 
some of the extra punctuation removed.

  // Normal action syntax
NEWLINE : '\n' {if (some-condition) <skip()>;} ;

// Pure target language code
NEWLINE : '\n' %c{if (some-condition) 
callSkipInJavaObjectWithContext();} ;

// Pure ANTRL pseudo-code
NEWLINE : '\n' %a{if (some-condition) skip();} ;

// which would be expanded into
NEWLINE : '\n' {<if(<boolexpr(some-condition)>)> <skip()>;} ;

Ideally, one could write meaningful actions with no target language 
code at all.

Hopefully ANTLR could generate the whole parser in using pseudo-code 
and then expand it into the target language as a last step.

Yikes, a parser generator for code transformation based on code 
transformation.

-Jamie




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Mon Aug  2 09:33:00 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Re: strong error recovery
In-Reply-To: <cel9ij+ptet@eGroups.com>
References: <cel9ij+ptet@eGroups.com>
Message-ID: <9E8A6170-E4A1-11D8-8AC1-000393B5606C@codetransform.com>

On Aug 2, 2004, at 4:46 AM, Neurosurg wrote:

> 5+5+
>
> is just skipped, i.e. nothing extracted.

Indeed.  ANTLR knows that the plus is supposed to be part of an 
expression and when nothing good follows it it throws an exception 
(check the generated code).  Perhaps you should define an exception 
handler in your expression rule that catches the exception and swallows 
it so that the good part of the expression is preserved.

This is certainly a task that ANTLR is not designed for.

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Mon Aug  2 09:34:54 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] interactive envionments and non-delayed rule reduction
In-Reply-To: <celbeo+mkea@eGroups.com>
References: <celbeo+mkea@eGroups.com>
Message-ID: <E28E41C3-E4A1-11D8-8AC1-000393B5606C@codetransform.com>

Feed the parser one complete line at a time using a StringStream or 
equivalent.  Then the end of the line will really be EOF and ANTLR will 
know that no more is coming.

Monty

On Aug 2, 2004, at 5:18 AM, Neurosurg wrote:

> Hi all,
>
> in interactive environments, the input expression should be
> parsed and evaluated right after, say, the enter is pressed.
> Parser is not expected to wait for the further following input.
> This is not what we get if we consider in the pasted below
> grammar taken after calc.g from antlr examples.
> After the first expression is provided, semicolon is given
> and even end-of-line (EOL) is entered -- still no reduction
> according to expr rule is done. The output is given only
> after some next expression is given.
>
> ----------------------------------
> top
> 	: (expr)*
> 	;
>
> expr	:	mexpr (PLUS^ mexpr)* SEMI! EOL {
> 			CalcTreeWalker walker;
> 			float r = walker.expr(#expr);
> 			std::cout << "value is " << r << std::endl;
> 	}
> 	;
>
> mexpr	:	atom (STAR^ atom)* ;
>
> atom:	INT ;
> ----------------------------------
>
> any good hints/links?
> (RTFMed, STFWed, sorry if missed smth)
> thanks,
> Valery
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Mon Aug  2 09:36:30 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Lexer error?
In-Reply-To: <d2d18a104080208311d51d848@mail.gmail.com>
References: <d2d18a104080208311d51d848@mail.gmail.com>
Message-ID: <1B9203C0-E4A2-11D8-8AC1-000393B5606C@codetransform.com>

In the lexer common prefixes must be factored into the same rule.

Monty

On Aug 2, 2004, at 8:31 AM, Joan Pujol wrote:

> It's very strange.
> I don't know if I forget something but this doesn't work for me:
>
> class LexerAnalyzer extends Lexer;
>
> options {
> k=2;
> }
>
>
>
> OPMINOROREQUAL:"<=";
> ASSIGN:	":="|"<-";
>
> Antlr give me this error message:
>
> ANTLR Parser Generator   Version 2.7.4   1989-2004 jGuru.com
>  gram?tiques\l?xic.g: warning:lexical nondeterminism between rules
> OPMINOROREQUAL and ASSIGN upon
> gram?tiques\l?xic.g:     k==1:'<'
> gram?tiques\l?xic.g:     k==2:'='
>
>
> I have lookahead of two symbols, isn't it. I don't know because the
> Lexer has a nondeterminism.
>
> Cheers,
>
>
> -- 
> Joan Jes?s Pujol Espinar
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From johnj1984 at yahoo.com  Mon Aug  2 09:38:03 2004
From: johnj1984 at yahoo.com (johnj1984)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Semantic Predicates and SemanticExceptions
Message-ID: <celqlb+6okl@eGroups.com>

Hello Folks, I have a question about the useage of Semantic 
Predicates and SemanticExceptions.

I have the following (simplified) source text:

 TClass1.someProcedureDeclaration {...};
 TClass1.someProcedureDeclaration {...};
 TClass2.someProcedureDeclaration {...};
 TClass2.someProcedureDeclaration {...};
 
 This gets parsed by a rule
   ruleClassDeclaration
   	: (ruleProcedureDeclarationPart) *
   	;
   	
   ruleProcedureDeclarationPart
   	:  { stillInClass(LT(3).getText()) }? 
   		SEMI! ruleProcedureOrFunctionDeclaration
		   
		exception 
			catch [RecognitionException ex] {
		   		reportError("non-class 
procedure/function exception:"+ex.toString());
		   	}
   	;
   	
   Where stillInClass(String className) is a custom function that 
checks if the procedure's class (TClass1, TClass2, etc) has changed.  
This function is used in the semantic predicate 
{ stillInClass(LT(3).getText()) }? 
   
   My problem is how do I correctly perform the semantic check & 
catch its exception: The semantic check throws a
   semantic exception when the class name switches from TClass1 to 
TClass2 -- But how do I handle the exception? If I catch the exception
   where it is thrown, in ruleProcedureDeclarationPart, then I enter 
an infinite loop when the semantic check fails, where the parser 
attempts to reevaluate the same failed text ad infinitum.
   On the other hand, if I catch the exception in the while loop as 
follows, I also get the same infinite loop:
   
   ruleClassDeclaration
   	: (ruleProcedureDeclarationPart
   		exception 
			catch [RecognitionException ex] {
		   		reportError("non-class 
procedure/function exception:"+ex.toString());
		   	}
   	   ) *
   	;
   	
   Finally, if I catch the exception outside the while loop in 
ruleClassDeclaration, then all the previously matched 
ruleProcedureDeclarationParts are thrown away, since essentially the 
whole class declaration throws an exception.
   
   So... How can I check the semantic validity of a rule and use that 
semantic check to break out of a loop, while still keepting the prior 
matches?
   Essentially I need to tell the parser that when my semantic check 
fails, it should backtrack from the failed evaluation only, 
successfully exit the rules its matched so far, and reparse the 
failed text from somewhere higher in its rule hierarchy.
   
   Does this make sense? Should I not be using semantic predicates 
but some kind of syntactic predicate instead? Any pointers welcome!
   
   Thanks in advance!
   
   
   
   
  



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Mon Aug  2 09:44:15 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Bug in antlr.g?
In-Reply-To: <1091454808.1617.12.camel@zaphod>
References: <1091454808.1617.12.camel@zaphod>
Message-ID: <309F85F8-E4A3-11D8-AA3E-000393BB647E@cs.usfca.edu>

Hi. :)

Well, this is antlr itself, right?  so it is fine using purely 
commontoken...it's in the generated parsers that it needs to be 
sensitive I would say.

Ter

On Aug 2, 2004, at 6:53 AM, Ingo Maier wrote:

> Hi there,
>
> in the ACTION lexer rule a CommonToken is instantiated directly:
>
> CommonToken t = new CommonToken(_ttype,$getText);
> t.setLine(actionLine);
> t.setColumn(actionColumn);
> $setToken(t);
>
> Shouldn't this be:
>
> Token t = makeToken(_ttype);
> t.setText($getText);
> t.setLine(actionLine);
> t.setColumn(actionColumn);
> $setToken(t);
>
> ?
>
> Otherwise, different token types cannot be used, e.g. with
> TokenStreamRewriteEngine which needs TokenWithIndex.
>
> Thanks,
> Ingo
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Mon Aug  2 10:04:43 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Semantic Predicates and SemanticExceptions
In-Reply-To: <celqlb+6okl@eGroups.com>
References: <celqlb+6okl@eGroups.com>
Message-ID: <0CA4B40C-E4A6-11D8-8AC1-000393B5606C@codetransform.com>

On Aug 2, 2004, at 9:38 AM, johnj1984 wrote:

>    Essentially I need to tell the parser that when my semantic check
> fails, it should backtrack from the failed evaluation only,
> successfully exit the rules its matched so far, and reparse the
> failed text from somewhere higher in its rule hierarchy.

To achieve backtracking you need to use syntactic predicates, up at the 
point where you want to backtrack to.  Something like this:

    ruleClassDeclaration
    	: ((ruleProcedureDeclarationPart)=>ruleProcedureDeclarationPart) *
    	;

Ignore the warning about a superfluous syntactic predicate, it's wrong.

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Mon Aug  2 10:26:20 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Semantic Predicates and SemanticExceptions
In-Reply-To: <0CA4B40C-E4A6-11D8-8AC1-000393B5606C@codetransform.com>
References: <celqlb+6okl@eGroups.com> <0CA4B40C-E4A6-11D8-8AC1-000393B5606C@codetransform.com>
Message-ID: <11A39D48-E4A9-11D8-8AC1-000393B5606C@codetransform.com>

By the way you need to keep your semantic predicates in place so the 
exception is thrown that the syntactic predicate catches.

Monty

On Aug 2, 2004, at 10:04 AM, Monty Zukowski wrote:

> On Aug 2, 2004, at 9:38 AM, johnj1984 wrote:
>
>>    Essentially I need to tell the parser that when my semantic check
>> fails, it should backtrack from the failed evaluation only,
>> successfully exit the rules its matched so far, and reparse the
>> failed text from somewhere higher in its rule hierarchy.
>
> To achieve backtracking you need to use syntactic predicates, up at the
> point where you want to backtrack to.  Something like this:
>
>     ruleClassDeclaration
>     	: ((ruleProcedureDeclarationPart)=>ruleProcedureDeclarationPart) *
>     	;
>
> Ignore the warning about a superfluous syntactic predicate, it's wrong.
>
> Monty
>
> ANTLR & Java Consultant -- http://www.codetransform.com
> ANSI C/GCC transformation toolkit --
> http://www.codetransform.com/gcc.html
> Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From johnj1984 at yahoo.com  Mon Aug  2 12:27:01 2004
From: johnj1984 at yahoo.com (johnj1984)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Re: Semantic Predicates and SemanticExceptions
In-Reply-To: <11A39D48-E4A9-11D8-8AC1-000393B5606C@codetransform.com>
Message-ID: <cem4i5+v9og@eGroups.com>

<<
ruleClassDeclaration
  : ((ruleProcedureDeclarationPart)=>ruleProcedureDeclarationPart) *
  ;
>>

   This works exactly like I need it to... Thanks Monty for all the 
support!

   -jj


--- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> 
wrote:
> By the way you need to keep your semantic predicates in place so 
the 
> exception is thrown that the syntactic predicate catches.
> 
> Monty
> 
> On Aug 2, 2004, at 10:04 AM, Monty Zukowski wrote:
> 
> > On Aug 2, 2004, at 9:38 AM, johnj1984 wrote:
> >
> >>    Essentially I need to tell the parser that when my semantic 
check
> >> fails, it should backtrack from the failed evaluation only,
> >> successfully exit the rules its matched so far, and reparse the
> >> failed text from somewhere higher in its rule hierarchy.
> >
> > To achieve backtracking you need to use syntactic predicates, up 
at the
> > point where you want to backtrack to.  Something like this:
> >
> >     ruleClassDeclaration
> >     	: ((ruleProcedureDeclarationPart)
=>ruleProcedureDeclarationPart) *
> >     	;
> >
> > Ignore the warning about a superfluous syntactic predicate, it's 
wrong.
> >
> > Monty
> >
> > ANTLR & Java Consultant -- http://www.codetransform.com
> > ANSI C/GCC transformation toolkit --
> > http://www.codetransform.com/gcc.html
> > Embrace the Decay -- 
http://www.codetransform.com/EmbraceDecay.html
> >
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> >



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From joanpujol at gmail.com  Mon Aug  2 12:55:39 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] About Paraphrases
Message-ID: <d2d18a104080212556e4310b2@mail.gmail.com>

Hi,

I put paraphrase in my lexer rules:

OPPO options{paraphrase="a open bracket '('";}:				'(';

But when the parser throws a NoViableAlt exception the paraphrase
isn't displayed.
I debug a little and I see that the token that launch the exception is
the correct (OPPO). But the exception uses the getText method and
display's  '(' instead of the paraphrase.

I'm doing something wrong? Or I have to do something else?

And another question, can I define paraphrase for imaginary tokens?

-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From jlst at gettysgroup.com  Mon Aug  2 09:14:40 2004
From: jlst at gettysgroup.com (Jamie Herre)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] 3.0 multiple language support
In-Reply-To: <FC3906D4-E345-11D8-A2DD-000A95891192@cs.usfca.edu>
References: <ccg3c6+huoj@eGroups.com> <Pine.NEB.4.60.0407310126190.14356@panix5.panix.com> <FC3906D4-E345-11D8-A2DD-000A95891192@cs.usfca.edu>
Message-ID: <0ECBF40D-E49F-11D8-BB94-000A95CDDFF4@gettysgroup.com>

On Jul 31, 2004, at 4:04 PM, Terence Parr wrote:

> On Jul 30, 2004, at 10:38 PM, Tom Moog wrote:
>
>>
>> The problem of maintaining one grammar with language
>> dependent actions may be partly due to our inclination
>> to think of grammars as simple text files.  Imagine that
>> we used a text editor which could maintain multiple
>> versions of a file.  Such things exist for technical
>> documentation.  I remember reading that this was used
>> for airplane maintenance manuals so that common
>> features were updated for all airplanes, while
>> new models could have custom sections.  A printout
>> was customized according to the model selected.
>
> Yes, this is what we've considered for an IDE: use revision control not
> inheritance to change actions.  You are essentially forking a new
> branch.  Changes can be pushed forward with diff3 like behavior. :)
>

Although I don't have a good idea in mind of how it should be done, I 
have various reasons for wanting ANTLR to be able to do code weaving.

Multiple target languages;
Break up giant .g files;
Help for editors;
Make the grammar easier to read by relocating big actions.

It seems like the LHS could be used as a signature for weaving in 
actions from alternate grammars in a manner similar to the mixin 
pattern.  There's no super, the mixed in grammar overwrites methods for 
each LHS it implements.  I guess that's basically how inheritance works 
now but with multiple mixins.  If you overwrite an existing rule, it 
becomes inaccessible and is forever known as the new rule.

There might also be a special LHS syntax for overwriting just the 
action.  Like,

NEWLINE:: { gotit(); } ;

So that you could write out a grammar with no actions and mix in the 
actions from elsewhere.  This would allow .g files to be used as 
documentation as-is with implementation maintained elsewhere.








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Mon Aug  2 13:23:53 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Re: Bug in antlr.g?
In-Reply-To: <309F85F8-E4A3-11D8-AA3E-000393BB647E@cs.usfca.edu>
Message-ID: <cem7sp+d6bp@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> Hi. :)
> 
> Well, this is antlr itself, right?  so it is fine using purely 
> commontoken...it's in the generated parsers that it needs to be 

Ter--

Ingo may still have a point that should be remembered for ANTLR 3. 
antlr.g could be a starting point for other tools that work on antlr
grammars.

--Loring

> sensitive I would say.
> 
> Ter
> 
> On Aug 2, 2004, at 6:53 AM, Ingo Maier wrote:
> 
> > Hi there,
> >
> > in the ACTION lexer rule a CommonToken is instantiated directly:
> >
> > CommonToken t = new CommonToken(_ttype,$getText);
> > t.setLine(actionLine);
> > t.setColumn(actionColumn);
> > $setToken(t);
> >
> > Shouldn't this be:
> >
> > Token t = makeToken(_ttype);
> > t.setText($getText);
> > t.setLine(actionLine);
> > t.setColumn(actionColumn);
> > $setToken(t);
> >
> > ?
> >
> > Otherwise, different token types cannot be used, e.g. with
> > TokenStreamRewriteEngine which needs TokenWithIndex.
> >
> > Thanks,
> > Ingo
> >
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From mtiller at ford.com  Mon Aug  2 13:24:29 2004
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] 3.0 multiple language support
Message-ID: <FD35CB8B26F9534E86D1AC31F401AB340483FC75@na1fcm52.dearborn.ford.com>

> From: Terence Parr [mailto:parrt@cs.usfca.edu]
> Subject: Re: [antlr-interest] 3.0 multiple language support
> 
> 
> On Jul 30, 2004, at 10:38 PM, Tom Moog wrote:
> 
> >
> > The problem of maintaining one grammar with language
> > dependent actions may be partly due to our inclination
> > to think of grammars as simple text files.  Imagine that
> > we used a text editor which could maintain multiple
> > versions of a file.  Such things exist for technical
> > documentation.  I remember reading that this was used
> > for airplane maintenance manuals so that common
> > features were updated for all airplanes, while
> > new models could have custom sections.  A printout
> > was customized according to the model selected.
> 
> Yes, this is what we've considered for an IDE: use revision control
not
> inheritance to change actions.  You are essentially forking a new
> branch.  Changes can be pushed forward with diff3 like behavior. :)

Is it April 1st already?  Geez, I guess it isn't.  Well in that case I
have to assume you are serious so I'd like to cast a vote against using
version control to handle language-independence.  Apart from the fact
that inheritance and/or macros are a much better solution, consider how
you would do *real version control* under such circumstances...branches
on branches?!?  Yikes!

> Ter

--
Mike



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From mtiller at ford.com  Mon Aug  2 13:37:22 2004
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Re: Bug in antlr.g?
Message-ID: <FD35CB8B26F9534E86D1AC31F401AB3404023AC6@na1fcm52.dearborn.ford.com>


> -----Original Message-----
> From: lgcraymer [mailto:lgc@mail1.jpl.nasa.gov]
> Sent: Monday, August 02, 2004 4:24 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Bug in antlr.g?
> 
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...>
wrote:
> > Hi. :)
> >
> > Well, this is antlr itself, right?  so it is fine using purely
> > commontoken...it's in the generated parsers that it needs to be
> 
> Ter--
> 
> Ingo may still have a point that should be remembered for ANTLR 3.
> antlr.g could be a starting point for other tools that work on antlr
> grammars.
> 
> --Loring

Not to mention the fact that people may look at antlr.g for examples of
how to do things (and that, as the author, you should lead by example
:-).

--
Mike



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Mon Aug  2 14:43:34 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Re: Bug in antlr.g?
In-Reply-To: <FD35CB8B26F9534E86D1AC31F401AB3404023AC6@na1fcm52.dearborn.ford.com>
References: <FD35CB8B26F9534E86D1AC31F401AB3404023AC6@na1fcm52.dearborn.ford.com>
Message-ID: <00F89A6E-E4CD-11D8-A2DD-000A95891192@cs.usfca.edu>


On Aug 2, 2004, at 1:37 PM, Tiller, Michael (M.M.) wrote:
> Not to mention the fact that people may look at antlr.g for examples of
> how to do things (and that, as the author, you should lead by example
> :-).

Uh oh!  Busted! ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Mon Aug  2 14:49:55 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Re: 3.0 multiple language support
In-Reply-To: <FD35CB8B26F9534E86D1AC31F401AB340483FC75@na1fcm52.dearborn.ford.com>
Message-ID: <cemcu3+47k8@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Tiller, Michael \(M.M.\)"
<mtiller@f...> wrote:
> > Yes, this is what we've considered for an IDE: use revision control
> not
> > inheritance to change actions.  You are essentially forking a new
> > branch.  Changes can be pushed forward with diff3 like behavior. :)
> 
> Is it April 1st already?  Geez, I guess it isn't.  Well in that case I
> have to assume you are serious so I'd like to cast a vote against using
> version control to handle language-independence.  Apart from the fact

Mike--

Ter's answer dealt with pushing changes "sideways" to cover migrating
grammar modifications across "action variants" (for want of a better
term); we're talking two-dimensional (time and action variants)
version control here, with the primary version under traditional CM. 
When Tom was talking versions, he was talking "action variants", not a
set of temporally sequenced modifications.

--Loring

> that inheritance and/or macros are a much better solution, consider how
> you would do *real version control* under such circumstances...branches
> on branches?!?  Yikes!
> 
> > Ter
> 
> --
> Mike



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From anthony at omegadev.net  Mon Aug  2 13:48:58 2004
From: anthony at omegadev.net (Anthony Williams)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Good Beginners Tutorial
In-Reply-To: <d2d18a104080212556e4310b2@mail.gmail.com>
Message-ID: <!~!AAAAAIX+MCXnmENLi8lOjngHRpNEDSAA@omegadev.net>

Hi,
	I'm looking for a good tutorial to Antlr but one which covers things
in slightly more depth than the majority of the "evaluation" style examples
but don't assume you know everything. More specifically I'm looking for
anything which could help with writing a parser for a C-like scripting
language where I would like to parse the content of a script file into a
tree which I can walk through using .NET. I don't want Antlr to do any fancy
translating or tree-walking by itself, just a simple parser which will split
out function names and the contents of functions etc.

Thank you in advance,
Anthony Williams


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: winmail.dat
Type: application/ms-tnef
Size: 1642 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040802/f727edc1/winmail.bin
From rhalin at yahoo.com  Mon Aug  2 15:57:48 2004
From: rhalin at yahoo.com (rhalin)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Grammer wont compile, any pointers?
Message-ID: <cemgtc+g1oi@eGroups.com>

I'm having almost this exact same problem.  Antlr 2.7.2 on Slackware 
Linux running KDevelop.  Grammer compiles and links fine in Visual 
Studio 6 in Windows (antlr 2.7.1).  The examples also compile fine.  
I'm linking against the antlr.a library.  Since the examples compile, 
I'm thinking I'm missing a compiler flag somewhere, any ideas?  Any 
help would be appreciated.

-Rhalin

--- In antlr-interest@yahoogroups.com, "Oliver Haines" 
error : 'CharScanner.hpp:114: undefined reference' ... ??? msg 11897
<xlrg2002@y...> wrote:
> Hi,
> 
> I try to test antlr for c++. If I compile my simple app I get this 
errors:
> 
> cd "/home/graemer/Projekte/antlr/debug" && WANT_AUTOCONF_2_5="1"
> WANT_AUTOMAKE_1_6="1" make -k -j1  
> *make all-recursive 
> *Making all in src 
> *g++ -DHAVE_CONFIG_H -I. -I/home/graemer/Projekte/antlr/src -I..
> -I/usr/local/include -O0 -g3 -c
> /home/graemer/Projekte/antlr/src/antlr.cpp 
> */bin/sh ../libtool --mode=link g++ -O0 -g3 -L/usr/local/lib -lantlr
> -o antlr antlr.o  
> *g++ -O0 -g3 -o antlr antlr.o -L/usr/local/lib -lantlr 
> *antlr.o(.text+0x24): In function `main': 
> */usr/local/include/antlr/CharScanner.hpp:114: undefined reference 
to
> `CalcLexer::CalcLexer[in-charge](std::basic_istream<char,
> std::char_traits<char> >&)' 
> *antlr.o(.text+0x36):/usr/local/include/antlr/CharScanner.hpp:233:
> undefined reference to
> `CalcParser::CalcParser[in-charge](antlr::TokenStream&)' 
> *antlr.o(.text+0x41):/usr/local/include/antlr/CharScanner.hpp:309:
> undefined reference to `CalcParser::expr()' 
> *antlr.o(.gnu.linkonce.t._ZN9CalcLexerD1Ev+0xb): In function
> `CalcLexer::~CalcLexer [in-charge]()': 
> */usr/local/include/antlr/CharScanner.hpp:241: undefined reference 
to
> `vtable for CalcLexer' 
> *antlr.o(.gnu.linkonce.t._ZNK10CalcParser12getTokenNameEi+0x2c): In
> function `CalcParser::getTokenName(int) const': 
> */usr/local/include/antlr/CharScanner.hpp:163: undefined reference 
to
> `CalcParser::tokenNames' 
> *antlr.o(.gnu.linkonce.t._ZNK10CalcParser13getTokenNamesEv+0x4): In
> function `CalcParser::getTokenNames() const': 
> */usr/local/include/antlr/CharScanner.hpp:240: undefined reference 
to
> `CalcParser::tokenNames' 
> *collect2: ld returned 1 exit status 
> *make[2]: *** [antlr] Error 1 
> *make[2]: Target `all' not remade because of errors. 
> *make[1]: *** [all-recursive] Error 1 
> *make: *** [all-recursive-am] Error 2 
> *make: Target `all' not remade because of errors. 
> **** Exited with status: 2 ***
> 
> 
> I'm using kdevelop 3 and linux.
> 
> the simple grammar:
> 
> options
> {
> language="Cpp";
> }
> 
> // Lexer
> class CalcLexer extends Lexer;
> 
> options {
>     k=2; // needed for newline junk
>     charVocabulary='\u0000'..'\u007F'; // allow ascii
> }
> 
> LPAREN: '(' ;
> RPAREN: ')' ;
> PLUS  : '+' ;
> MINUS : '-' ;
> STAR  : '*' ;
> INT   : ('0'..'9')+ ;
> WS    : ( ' '
>         | '\r' '\n'
>         | '\n'
>         | '\t'
>         )
>         {$setType(antlr::Token.SKIP);}
>       ;
> 
> // Parser
> class CalcParser extends Parser;
> 
> options {
>         buildAST=true;
> }
> 
> expr:   mexpr ((PLUS^|MINUS^) mexpr)*
>     ;
> 
> mexpr
>     :   atom (STAR^ atom)*
>     ;
> 
> atom:   INT
>     |   LPAREN! expr RPAREN!
>     ;
>     
> // AST-Walker
> class CalcTreeWalker extends TreeParser;
> 
> options {
>     importVocab=CalcLexer;
> }
> 
> expr returns [int r=0]
> { int a,b; }
>     :   #(PLUS  a=expr b=expr)  {r = a+b;}
>     |   #(MINUS a=expr b=expr)  {r = a-b;}   
>     |   #(STAR  a=expr b=expr)  {r = a*b;}
>     |   i:INT                   {r = atof(i->getText().c_str());}
>     ;
> 
> Please help!
> thx,
> Oliver



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rhalin at yahoo.com  Mon Aug  2 17:14:40 2004
From: rhalin at yahoo.com (rhalin)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Re: error : 'CharScanner.hpp:114: undefined reference' ... ???
In-Reply-To: <20040802231014.GB12872@cs.utwente.nl>
Message-ID: <cemldg+357d@eGroups.com>

checked on the config, and its finding it.  For reference, I 
installed antlr on a copy of slackware 9.0, it's only been up and 
running for a week, no preexisting version of antlr that I'm aware 
of, and no upgrades on the gcc or anything like that, went right from 
installing antlr to trying to compile my project, but no luck.  I'll 
keep poking around, see if I can come at something, thanks for the 
help!

-Rhalin

--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> wrote:
> On Mon, Aug 02, 2004 at 10:35:16PM -0000, rhalin wrote:
> > I'm having this exact same problem right now (many undefined 
> > references).  Antlr 2.7.2.  My grammer works in Windows Visual 
C++ 
> > just fine on Antlr 2.7.1, but when I port it over to Slackware 
Linux 
> > under KDevelop, I get errors just like this.  The examples 
compile.  
> > I'm compiling and linking to the library.  Not sure what else I 
could 
> > be missing.  Any help would be appreciated!
> 
> - check that both antlr library and project are built with the same 
version
>   of g++ (if more than one are installed or the version was 
upgraded)
> - verify that the antlr lib is built with the same #defines as the 
project
>   (I could suspect that this might be a case of getting problems 
with vtables)
> - verify that the antlr includes find antlrs config.hpp and not 
something
>   generated by autoconf. put a #warning or #error in it to check
> 
> KDevelop I don't know anything about more interesting is the 
underlying
> gcc/g++ version and the used binutils (ld)
> 
> If the examples of antlr compile and work then it's probably 
something
> obscure in the makefiles kdevelop generates.
> 
> Cheers,
> 
> Ric
> 
> > --- In antlr-interest@yahoogroups.com, "Oliver Haines" 
> > <xlrg2002@y...> wrote:
> > > Hi,
> > > 
> > > I try to test antlr for c++. If I compile my simple app I get 
this 
> > errors:
> > > 
> > > cd "/home/graemer/Projekte/antlr/debug" && WANT_AUTOCONF_2_5="1"
> > > WANT_AUTOMAKE_1_6="1" make -k -j1  
> > > *make all-recursive 
> > > *Making all in src 
> > > *g++ -DHAVE_CONFIG_H -I. -I/home/graemer/Projekte/antlr/src -I..
> > > -I/usr/local/include -O0 -g3 -c
> > > /home/graemer/Projekte/antlr/src/antlr.cpp 
> > > */bin/sh ../libtool --mode=link g++ -O0 -g3 -L/usr/local/lib -
lantlr
> > > -o antlr antlr.o  
> > > *g++ -O0 -g3 -o antlr antlr.o -L/usr/local/lib -lantlr 
> > > *antlr.o(.text+0x24): In function `main': 
> > > */usr/local/include/antlr/CharScanner.hpp:114: undefined 
reference 
> > to
> > > `CalcLexer::CalcLexer[in-charge](std::basic_istream<char,
> > > std::char_traits<char> >&)' 
> > > *antlr.o
(.text+0x36):/usr/local/include/antlr/CharScanner.hpp:233:
> > > undefined reference to
> > > `CalcParser::CalcParser[in-charge](antlr::TokenStream&)' 
> > > *antlr.o
(.text+0x41):/usr/local/include/antlr/CharScanner.hpp:309:
> > > undefined reference to `CalcParser::expr()' 
> > > *antlr.o(.gnu.linkonce.t._ZN9CalcLexerD1Ev+0xb): In function
> > > `CalcLexer::~CalcLexer [in-charge]()': 
> > > */usr/local/include/antlr/CharScanner.hpp:241: undefined 
reference 
> > to
> > > `vtable for CalcLexer' 
> > > *antlr.o
(.gnu.linkonce.t._ZNK10CalcParser12getTokenNameEi+0x2c): In
> > > function `CalcParser::getTokenName(int) const': 
> > > */usr/local/include/antlr/CharScanner.hpp:163: undefined 
reference 
> > to
> > > `CalcParser::tokenNames' 
> > > *antlr.o
(.gnu.linkonce.t._ZNK10CalcParser13getTokenNamesEv+0x4): In
> > > function `CalcParser::getTokenNames() const': 
> > > */usr/local/include/antlr/CharScanner.hpp:240: undefined 
reference 
> > to
> > > `CalcParser::tokenNames' 
> > > *collect2: ld returned 1 exit status 
> > > *make[2]: *** [antlr] Error 1 
> > > *make[2]: Target `all' not remade because of errors. 
> > > *make[1]: *** [all-recursive] Error 1 
> > > *make: *** [all-recursive-am] Error 2 
> > > *make: Target `all' not remade because of errors. 
> > > **** Exited with status: 2 ***
> > > 
> > > 
> > > I'm using kdevelop 3 and linux.
> > > 
> > > the simple grammar:
> > > 
> > > options
> > > {
> > > language="Cpp";
> > > }
> > > 
> > > // Lexer
> > > class CalcLexer extends Lexer;
> > > 
> > > options {
> > >     k=2; // needed for newline junk
> > >     charVocabulary='\u0000'..'\u007F'; // allow ascii
> > > }
> > > 
> > > LPAREN: '(' ;
> > > RPAREN: ')' ;
> > > PLUS  : '+' ;
> > > MINUS : '-' ;
> > > STAR  : '*' ;
> > > INT   : ('0'..'9')+ ;
> > > WS    : ( ' '
> > >         | '\r' '\n'
> > >         | '\n'
> > >         | '\t'
> > >         )
> > >         {$setType(antlr::Token.SKIP);}
> > >       ;
> > > 
> > > // Parser
> > > class CalcParser extends Parser;
> > > 
> > > options {
> > >         buildAST=true;
> > > }
> > > 
> > > expr:   mexpr ((PLUS^|MINUS^) mexpr)*
> > >     ;
> > > 
> > > mexpr
> > >     :   atom (STAR^ atom)*
> > >     ;
> > > 
> > > atom:   INT
> > >     |   LPAREN! expr RPAREN!
> > >     ;
> > >     
> > > // AST-Walker
> > > class CalcTreeWalker extends TreeParser;
> > > 
> > > options {
> > >     importVocab=CalcLexer;
> > > }
> > > 
> > > expr returns [int r=0]
> > > { int a,b; }
> > >     :   #(PLUS  a=expr b=expr)  {r = a+b;}
> > >     |   #(MINUS a=expr b=expr)  {r = a-b;}   
> > >     |   #(STAR  a=expr b=expr)  {r = a*b;}
> > >     |   i:INT                   {r = atof(i->getText().c_str
());}
> > >     ;
> > > 
> > > Please help!
> > > thx,
> > > Oliver
> > 
> 
> -- 
> -----
+++++*****************************************************+++++++++---
----
>     ---- Ric Klaren ----- j.klaren@u... ----- +31 53 4893755  ----
> -----
+++++*****************************************************+++++++++---
----
>   "Of all the things I've lost I miss my mind the most --- Ozzy 
Osbourne



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From kaffiene at xtra.co.nz  Mon Aug  2 18:53:39 2004
From: kaffiene at xtra.co.nz (Peter Ashford)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Please help a newbie!
Message-ID: <410EF023.3000903@xtra.co.nz>

Hi All,

I'm a newbie to ANTLR, although I've used Flex and Bison on several 
occassions.  I'm trying to write a parser for a simple scripting 
language which can handle basic functions (I'm going to add variables 
and built in functions, but that's about it)

I've implemented a treeparser for the AST stuff, but I'm not sure how 
the normal parser and the tree parser should interact.  When I run the 
parser with the input "result = 12 * 3" I get the following error:

line 1:1: unexpected token: result
 ( * 3 )
<AST>: unexpected AST node: <ASTNULL>

I'm hoping someone can explain what I'm doing wrong (is using a tree 
parser what I want to be doing at all???)
TIA,

Peter.


Here is the entire grammar:


//-------------------------------------------------------------------------------------------------------
options {
    language="Cpp";    
}

//=======================================================================
class MyParser extends Parser;

options {
    buildAST=true;
}

script : (line)+
       ;
      
line   : EOL  
       | RESULT EQ expr EOL
       ;

expr   : mexpr ((PLUS^|MINUS^) mexpr)*
       ;

mexpr  : atom ((MULT^|DIV^) atom)*
       ;

atom   : NUMBER
       | LPAREN! expr RPAREN!
       ;


//============================================================
class MyTreeParser extends TreeParser;

options {
    importVocab=MyParser;
}

expr returns [float r=0]
{ float a,b; }
    :   #(PLUS  a=expr b=expr)  {r = a+b;}
    |   #(MINUS a=expr b=expr)  {r = a-b;}   
    |   #(MULT  a=expr b=expr)  {r = a*b;}
    |   #(DIV   a=expr b=expr)  {r = a/b;}
    |   n:NUMBER                {r = (float) atof(n->getText().c_str());}
    ;

 
//=======================================================================
class MyLexer extends Lexer;

options {
    k=2; // needed for newline junk
    charVocabulary='\u0000'..'\u007F'; // allow ascii
}

LPAREN : '(' ;
RPAREN : ')' ;
PLUS   : '+' ;
MINUS  : '-' ;
MULT   : '*' ;
DIV    : '/' ;
EQ     : '=' ;

RESULT : "result";

protected
DIGIT  : ('0'..'9');

protected
ALPHA  : ('a'..'z' 'A'..'Z');

NUMBER : (DIGIT)+ ( | ('.' (DIGIT)*));

ID     : (ALPHA) (ALPHA|DIGIT)*;

STRING : '"'! (~'"') '"'!;

COMMENT: "//" (~'\n')* '\n' {_ttype = 
ANTLR_USE_NAMESPACE(antlr)Token::SKIP;}
         ;

WS     : ( ' '
         | '\r' '\n'
         | '\n'
         | '\t'
         )
         {_ttype = ANTLR_USE_NAMESPACE(antlr)Token::SKIP;}
         ;    




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From robin at debreuil.com  Mon Aug  2 23:24:14 2004
From: robin at debreuil.com (Robin Debreuil)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Re: 3.0 multiple language support
References: <cemcu3+47k8@eGroups.com>
Message-ID: <004d01c47922$82832be0$0100a8c0@xpbaby>

One tiny thing that could really go a long way is to change the wording of
getType() currently used. In C# GetType() is an object member, so having
that there unmodified means these two names only differ by case. This means
it isn't CLS compliant (some languages aren't case sensitive, like VB). This
means that while you can black box call the antlr.runtime.dll, but you can't
do things like subclass AST for example, which otherwise you could. So other
languages can only use grammars already created, they can't really use antlr
itself.

I know it isn't that big a deal to work around once you know your way around
antlr, but it is a pretty intimidating first step to have to take. After
that, you still have things like java naming conventions/styles that make
things a bit akward, it might be nice if all that was abstracted somehow and
could be set per language  (as per this conversation I know).

Cheers,
Robin



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From i.maier at gmx.de  Tue Aug  3 06:41:54 2004
From: i.maier at gmx.de (Ingo Maier)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Re: Bug in antlr.g?
In-Reply-To: <cem7sp+d6bp@eGroups.com>
References: <cem7sp+d6bp@eGroups.com>
Message-ID: <1091540514.1617.3.camel@zaphod>

Am Mo, den 02.08.2004 schrieb lgcraymer um 16:23:
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> > Hi. :)
> > 
> > Well, this is antlr itself, right?  so it is fine using purely 
> > commontoken...it's in the generated parsers that it needs to be 
> 
> Ter--
> 
> Ingo may still have a point that should be remembered for ANTLR 3. 
> antlr.g could be a starting point for other tools that work on antlr
> grammars.

This is exactly what I had in mind ;)

Ingo



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From i.maier at gmx.de  Tue Aug  3 08:10:37 2004
From: i.maier at gmx.de (Ingo Maier)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Token.SKIP vs. filters
Message-ID: <1091545837.1617.19.camel@zaphod>

Hi again,

I have a general question about the use of Token.SKIP in grammars.
Wouldn't it be advisable to do without them? I mean, one could use
filters instead, right? Any tradeoffs there? I am quite new to ANTLR, so
please be patient :)

Maybe someone wants to take an existing grammar but needs some tokens
which are "Token.SKIP"ped. Then he has to modify the grammar (erase
those Token.SKIPs) which I don't regard as good. He has to keep track
with further modifications to the original grammar etc... the well known
problem.

So, what do you think about Token.SKIP vs. filters?

Ingo



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From yjargudo at tiscali.es  Tue Aug  3 03:59:40 2004
From: yjargudo at tiscali.es (yjargudo)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] A simple question
Message-ID: <cenr6s+81km@eGroups.com>

hello,

I need to parse a file twice. In each parsing I have to use the same
grammar only with different antlr actions added.

What I have to do?

I tried the following but It doesn't works

CPPLexer lex=new CPPLexer(anInputStream);
lex.setTokenObjectClass("antlr.CommonHiddenStreamToken");
TokenStreamHiddenTokenFilter filter=new 
        TokenStreamHiddenTokenFilter(lex);
filter.hide(CPPParser.Comment);
filter.hide(CPPParser.CPPComment);
parser = new CPPParser(filter);
parser.translation_unit(this);


CPPLexer2 lex2=new CPPLexer2(anInputStream);
lex2.setTokenObjectClass("antlr.CommonHiddenStreamToken");
TokenStreamHiddenTokenFilter filter2=new 
       TokenStreamHiddenTokenFilter(lex2);
filter2.hide(CPPParser2.Comment);
filter2.hide(CPPParser2.CPPComment);
parser2 = new CPPParser2(filter2);
parser2.translation_unit(this);


Thanks a lot,

Yolanda



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Tue Aug  3 04:45:47 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] ANTLR 3.0 question about common actions
In-Reply-To: <6BF2A9A8-E0D7-11D8-BFCF-000393B5606C@codetransform.com>
References: <5E3FD2E1-E0D3-11D8-A2DD-000A95891192@cs.usfca.edu> <6BF2A9A8-E0D7-11D8-BFCF-000393B5606C@codetransform.com>
Message-ID: <20040803114547.GH12872@cs.utwente.nl>

Hi,

On Wed, Jul 28, 2004 at 01:48:04PM -0700, Monty Zukowski wrote:
> > So, the main question is: how can we make standard actions in order to
> > avoid retargeting issues and yet allow for free-form actions,
> > especially those that predicate standard actions?
>
> Currently you have an escape mechanism that says "this is all target
> language, but pick out the tree stuff and $ stuff," and offers Ric the
> opportunity to complain how ugly this is :)

Seems I got the point acros ;)

Most of the peave I got with the current implementation is that in the
codegen you have no clue what treebuilding actions are inside the action.
With the current interface you have to kludge a lot around to get an idea
of what stuff to actually generate (I dislike generating too much) also
some cases require additional rudimentary parsing on some of the strings
coming from the action parser making things quite fragile, both from a
maintenance point of view and also as user you sometimes get surprised with
oddities in things happening there.

I can very well live with target language code in the actions it just gives
the biggest amount of flexibility. I have worked for a short while with
tools that have a very limited syntax for actions (basically only function
calls) this really drives you nuts (silly nothing saying naming schemes
etc). I've also used gui's for this kindoff stuff (next gen of the
aforementioned tool) this sucked even worse.

In a sense I'm a bit sceptic with language agnostic stuff. But I've said
that before. Antlr 2 style action parsing is quite acceptable in ANTLR 3 as
far as I'm concerned. As long as a better api between the action parser and
the rest of antlr is possible. Generating code from an AST or something
similar would be ok. One prescan of the action code to see what should be
declared and then another pass to actually write stuff out. The AST code
could just contain tree building constructs interspersed with special
tokens that just collect the target language around the tree building
constructs.

With respect to this if actions in target language are supported it should
be possible to override some syntax per language. The choice of the '#' for
many things is somewhat inconvenient for C++ and C codegen (e.g. it
interferes with the preprocessor in C++ mode or actually the other way
around, we'd have to define a few things as illegal to get around it if we
use '#').

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  Chaos often breeds life, when order breeds habit.
  --- Henry B. Adams, The Education of Henry Adams



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Tue Aug  3 04:51:17 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] ANTLR 3.0 question about common actions
In-Reply-To: <BFA546C7-E0F2-11D8-A2DD-000A95891192@cs.usfca.edu>
References: <FD35CB8B26F9534E86D1AC31F401AB340483FC69@na1fcm52.dearborn.ford.com> <BFA546C7-E0F2-11D8-A2DD-000A95891192@cs.usfca.edu>
Message-ID: <20040803115117.GI12872@cs.utwente.nl>

Hi,

On Wed, Jul 28, 2004 at 05:03:40PM -0700, Terence Parr wrote:
> >  It seems like this would be nearly impossible
> > to make target language neutral.  Taking the ideas from SLK a step
> > further, perhaps you could have a different notation for semantic
> > predicates (which should return a Boolean type in the target language)
> > from actions.
> 
> I've thought that perhaps standard actions go in {...} and language 
> specific actions go in <<...>>.  Just a thought.

Might I propose to use something similar to with apache and various
embedded languages in webpages. Have a default language for {...} and use
{c++...} for c++ {c#...} for c# and to be symmetric {java ... } for java.
No extra 'glyphs' a bit more verbose but very survivable (going on my
experience with php that is). This would also allow mixing target code in
the same .g file.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  Xander: "Buffy, we need to do something *now*"
  Angel: "We need a distraction."
  Buffy: "Right."
  Angel: "What are you going to do?"
  Buffy: "I'm going to kill them all. That oughtta distract 'em..."



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From khamenya at mail.ru  Tue Aug  3 07:37:03 2004
From: khamenya at mail.ru (Neurosurg)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Re: interactive envionments and non-delayed rule reduction
In-Reply-To: <E28E41C3-E4A1-11D8-8AC1-000393B5606C@codetransform.com>
Message-ID: <ceo7uf+jv4f@eGroups.com>

Hi Monty

--- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> wrote:
> Feed the parser one complete line at a time using a StringStream or 
> equivalent.  Then the end of the line will really be EOF and ANTLR will 
> know that no more is coming.

hm, well, but that does not allow for multiline input like this:

 (3+
     4)*5

Actually not every EOL should invoke calculation, but only those EOL,
which finish a valid complete expression. This is actually the case meant.

Thank you.
--
Valery



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From sk at z.pl  Tue Aug  3 08:08:32 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] 3.0 multiple language support
In-Reply-To: <FD35CB8B26F9534E86D1AC31F401AB340483FC75@na1fcm52.dearborn.ford.com>
References: <FD35CB8B26F9534E86D1AC31F401AB340483FC75@na1fcm52.dearborn.ford.com>
Message-ID: <410FAA70.50209@softax.pl>

Tiller, Michael (M.M.) wrote:
>>>The problem of maintaining one grammar with language
>>>dependent actions may be partly due to our inclination
>>>to think of grammars as simple text files.  Imagine that
>>>we used a text editor which could maintain multiple
>>>versions of a file.  Such things exist for technical
>>>documentation.  I remember reading that this was used
>>>for airplane maintenance manuals so that common
>>>features were updated for all airplanes, while
>>>new models could have custom sections.  A printout
>>>was customized according to the model selected.
>>
>>Yes, this is what we've considered for an IDE: use revision control
>>not
>>inheritance to change actions.  You are essentially forking a new
>>branch.  Changes can be pushed forward with diff3 like behavior. :)
> 
> 
> Is it April 1st already?  Geez, I guess it isn't.  Well in that case I
> have to assume you are serious so I'd like to cast a vote against using
> version control to handle language-independence.  Apart from the fact
> that inheritance and/or macros are a much better solution, consider how
> you would do *real version control* under such circumstances...branches
> on branches?!?  Yikes!
> 

How about allowing different language versions of the same action in the 
same file? Something like:

my_prod
   : my_subpod %C{ /* here C action comes */  }
               %J{ /* here java action goes */ }
               %P{ /* here python action goes */ }

???
Just my 0,03PLN

rgds
-- 
Sebastian Kaliszewski


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rd_clark at sbcglobal.net  Tue Aug  3 08:13:48 2004
From: rd_clark at sbcglobal.net (Richard Clark)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Please help a newbie!
In-Reply-To: <410EF023.3000903@xtra.co.nz>
References: <410EF023.3000903@xtra.co.nz>
Message-ID: <B835DF26-E55F-11D8-8B04-000A95AF74F0@nextquestion.net>

Hi Peter,

   The short answer is that your tree parser has to match what comes out 
of your parser. SInce you added "result = " parsing to the parser, you 
have to add the same to your tree parser.

try something like this:

class MyTreeParser extends TreeParser;

options {
     importVocab=MyParser;
}

script
	:	(line)*
	;

line
	{ float r; }
	:	#( ASSIGN RESULT r=expr)
		{ printf("result = %f\n", r); }
	;

expr returns [float r=0]
{ float a,b; }
>     :   #(PLUS  a=expr b=expr)  {r = a+b;}
>     |   #(MINUS a=expr b=expr)  {r = a-b;}
>     |   #(MULT  a=expr b=expr)  {r = a*b;}
>     |   #(DIV   a=expr b=expr)  {r = a/b;}
>     |   n:NUMBER                {r = (float) 
> atof(n->getText().c_str());
>  ;

// --- cut here ---

I would also suggest two changes to your parser:
1) You don't need to keep the EOL tokens in your tree, so you can use 
"!" to leave them out.
2) You also may want to elevate that EQ to the head of its subtree to 
have your trees all be in a consistent format
#( OP arg1 arg2 )

> line   : EOL!
>        | RESULT EQ expr EOL!  // generates #( RESULT EQ expr )
>        ;

or, to rearrange the tree (and I'm collapsing it all to one line):

line
	: (RESULT EQ^ expr)? EOL! // generates #( EQ RESULT expr )
	;


Hope this helps :)

  ...Richard



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rd_clark at sbcglobal.net  Tue Aug  3 08:32:20 2004
From: rd_clark at sbcglobal.net (Richard Clark)
Date: Mon Dec 20 16:17:07 2004
Subject: [antlr-interest] Please help a newbie!
In-Reply-To: <B835DF26-E55F-11D8-8B04-000A95AF74F0@nextquestion.net>
References: <410EF023.3000903@xtra.co.nz> <B835DF26-E55F-11D8-8B04-000A95AF74F0@nextquestion.net>
Message-ID: <4F2833EC-E562-11D8-8B04-000A95AF74F0@nextquestion.net>

Correction to my answer:

> line
> 	{ float r; }
> 	:	#( RESULT EQ r=expr)
> 		{ printf("result = %f\n", r); }
> 	;


I've been using ASSIGN for assignment statements so long that it just 
came rolling off my fingers.

  ...R

On Aug 3, 2004, at 8:13, Richard Clark wrote:
>
> line
> 	{ float r; }
> 	:	#( ASSIGN RESULT r=expr)
> 		{ printf("result = %f\n", r); }
> 	;



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Tue Aug  3 09:23:41 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Re: interactive envionments and non-delayed rule reduction
In-Reply-To: <ceo7uf+jv4f@eGroups.com>
References: <ceo7uf+jv4f@eGroups.com>
Message-ID: <7BAD7CBA-E569-11D8-8B1E-000393B5606C@codetransform.com>

Well, if you don't have a line continuation character then try parsing 
the string and if it fails wait for the next string to see if it 
finishes.

What do you do if they type this?

(3 + 4)
   *5

Monty


On Aug 3, 2004, at 7:37 AM, Neurosurg wrote:

> Hi Monty
>
> --- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> 
> wrote:
>> Feed the parser one complete line at a time using a StringStream or
>> equivalent.  Then the end of the line will really be EOF and ANTLR 
>> will
>> know that no more is coming.
>
> hm, well, but that does not allow for multiline input like this:
>
>  (3+
>      4)*5
>
> Actually not every EOL should invoke calculation, but only those EOL,
> which finish a valid complete expression. This is actually the case 
> meant.
>
> Thank you.
> --
> Valery
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From mtiller at ford.com  Tue Aug  3 09:55:32 2004
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] 3.0 multiple language support
Message-ID: <FD35CB8B26F9534E86D1AC31F401AB340483FC7B@na1fcm52.dearborn.ford.com>



> -----Original Message-----
> From: Sebastian Kaliszewski [mailto:sk@z.pl]
> Subject: Re: [antlr-interest] 3.0 multiple language support
> 
> Tiller, Michael (M.M.) wrote:
> >>>The problem of maintaining one grammar with language
> >>>dependent actions may be partly due to our inclination
> >>>to think of grammars as simple text files.  Imagine that
> >>>we used a text editor which could maintain multiple
> >>>versions of a file.  Such things exist for technical
> >>>documentation.  I remember reading that this was used
> >>>for airplane maintenance manuals so that common
> >>>features were updated for all airplanes, while
> >>>new models could have custom sections.  A printout
> >>>was customized according to the model selected.
> >>
> >>Yes, this is what we've considered for an IDE: use revision control
> >>not
> >>inheritance to change actions.  You are essentially forking a new
> >>branch.  Changes can be pushed forward with diff3 like behavior. :)
> >
> >
> > Is it April 1st already?  Geez, I guess it isn't.  Well in that case
I
> > have to assume you are serious so I'd like to cast a vote against
using
> > version control to handle language-independence.  Apart from the
fact
> > that inheritance and/or macros are a much better solution, consider
how
> > you would do *real version control* under such
circumstances...branches
> > on branches?!?  Yikes!
> >
> 
> How about allowing different language versions of the same action in
the
> same file? Something like:
> 
> my_prod
>    : my_subpod %C{ /* here C action comes */  }
>                %J{ /* here java action goes */ }
>                %P{ /* here python action goes */ }

Of the options I have seen so far, I prefer the one where the grammar
just has macros and the actions themselves are specified outside the
grammar, e.g.

some_rule
   : a:A "," b:B << process_some_rule(a,b); >>

And then you could weave together an action file with a grammar file.
So you might have a C++ action file:

void process_some_rule(A *a, B* b)
{
  /* Do something very general in this language */
}

With this approach, the only thing you need to formalize are the calling
conventions (how names and arguments map between the macro language and
the action language).  One nice consequence of this would be that, for a
given grammar, you could automatically generate the interface and/or
function prototypes for it (based on the content of the grammar and the
conventions).  Furthermore, what is nice about this approach is that the
macro language only needs to be able to express a few basic, common,
abstract things (function calls, argument passing, perhaps method
invocations, etc) and not be a whole new general purpose language.

It seems like this scales in many nice ways.  For example, the fact that
a macro is a semantic or syntactic predicate could be resolved pretty
easily from context and its return type could be inferred (Boolean?).  I
suspect there are many other examples of how these actions could be
treated as high-level, declarative information that could be analyzed
for consistency checking and/or to generate "wrapper" code.

--
Mike



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From yjargudo at tiscali.es  Tue Aug  3 10:05:30 2004
From: yjargudo at tiscali.es (yjargudo)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Another question. Please help me
Message-ID: <ceogkq+tuqv@eGroups.com>

Hello,

I'm parsing c++ files and I need to treat includes. I'm try to use
TokenStreamSelector.The problem is that I need to use TokenStreamFilter
too, in order to hide cpp comments. How can I merge this two things?

Thanks 

Yolanda



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Tue Aug  3 10:34:06 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] 3.0 multiple language support
In-Reply-To: <FD35CB8B26F9534E86D1AC31F401AB340483FC7B@na1fcm52.dearborn.ford.com>
References: <FD35CB8B26F9534E86D1AC31F401AB340483FC7B@na1fcm52.dearborn.ford.com>
Message-ID: <20040803173406.GO12872@cs.utwente.nl>

On Tue, Aug 03, 2004 at 12:55:32PM -0400, Tiller, Michael (M.M.) wrote:
> Of the options I have seen so far, I prefer the one where the grammar
> just has macros and the actions themselves are specified outside the
> grammar, e.g.
> 
> some_rule
>    : a:A "," b:B << process_some_rule(a,b); >>
> 
> And then you could weave together an action file with a grammar file.
> So you might have a C++ action file:
> 
> void process_some_rule(A *a, B* b)
> {
>   /* Do something very general in this language */
> }

Problem is that this leads to really silly naming schemes when the rule
becomes complex. Separate stuff for before a closure, stuff for inside a
closure. Then add a few more closures to a rule and you'll have a nice
piece of code you'd not want to touch with a 10ft pole. You'd get lost in
the functioncalls, the rule itself and lose the overview of what it
actually does (as also happens with the one graphical grammar editor I've
seen so far).

A special editor could help but I don't see that as a real option I
*really* like plain textfiles for writing my grammars. Making a really good
editor would take an enormous effort bigger than writing just antlr3 is my
guess. So have something running that is handeditable first is a good idea.

How many people are actively using one grammar cross language? Is this
really worth the effort?

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From khamenya at mail.ru  Tue Aug  3 11:48:44 2004
From: khamenya at mail.ru (Neurosurg)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Re: interactive envionments and non-delayed rule reduction
In-Reply-To: <7BAD7CBA-E569-11D8-8B1E-000393B5606C@codetransform.com>
Message-ID: <ceommc+c79r@eGroups.com>

--- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> wrote:
> What do you do if they type this?
> 
> (3 + 4)
>    *5

(3+4) ==> reduce, and calculate

then 

*5 --> error

It is very similar to what we have in R or, say, in Scheme.





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Tue Aug  3 13:10:11 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Re: A simple question
In-Reply-To: <cenr6s+81km@eGroups.com>
Message-ID: <ceorf3+68bd@eGroups.com>

This is the type of situation where trees make the most sense. 
Parsing twice is slower (significantly) and not nearly as clean as
having two versions of a tree walker.

--Loring


--- In antlr-interest@yahoogroups.com, "yjargudo" <yjargudo@t...> wrote:
> hello,
> 
> I need to parse a file twice. In each parsing I have to use the same
> grammar only with different antlr actions added.
> 
> What I have to do?
> 
> I tried the following but It doesn't works
> 
> CPPLexer lex=new CPPLexer(anInputStream);
> lex.setTokenObjectClass("antlr.CommonHiddenStreamToken");
> TokenStreamHiddenTokenFilter filter=new 
>         TokenStreamHiddenTokenFilter(lex);
> filter.hide(CPPParser.Comment);
> filter.hide(CPPParser.CPPComment);
> parser = new CPPParser(filter);
> parser.translation_unit(this);
> 
> 
> CPPLexer2 lex2=new CPPLexer2(anInputStream);
> lex2.setTokenObjectClass("antlr.CommonHiddenStreamToken");
> TokenStreamHiddenTokenFilter filter2=new 
>        TokenStreamHiddenTokenFilter(lex2);
> filter2.hide(CPPParser2.Comment);
> filter2.hide(CPPParser2.CPPComment);
> parser2 = new CPPParser2(filter2);
> parser2.translation_unit(this);
> 
> 
> Thanks a lot,
> 
> Yolanda



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rbo at acm.org  Tue Aug  3 13:57:42 2004
From: rbo at acm.org (Rodrigo B. de Oliveira)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] 3.0 multiple language support
In-Reply-To: <20040803173406.GO12872@cs.utwente.nl>
References: <FD35CB8B26F9534E86D1AC31F401AB340483FC7B@na1fcm52.dearborn.ford.com> <20040803173406.GO12872@cs.utwente.nl>
Message-ID: <410FFC46.80802@acm.org>

Ric Klaren wrote:

>On Tue, Aug 03, 2004 at 12:55:32PM -0400, Tiller, Michael (M.M.) wrote:
>  
>
>>Of the options I have seen so far, I prefer the one where the grammar
>>just has macros and the actions themselves are specified outside the
>>grammar, e.g.
>>
>>some_rule
>>   : a:A "," b:B << process_some_rule(a,b); >>
>>
>>And then you could weave together an action file with a grammar file.
>>So you might have a C++ action file:
>>
>>void process_some_rule(A *a, B* b)
>>{
>>  /* Do something very general in this language */
>>}
>>    
>>
>
>Problem is that this leads to really silly naming schemes when the rule
>becomes complex. Separate stuff for before a closure, stuff for inside a
>closure. Then add a few more closures to a rule and you'll have a nice
>piece of code you'd not want to touch with a 10ft pole. You'd get lost in
>the functioncalls, the rule itself and lose the overview of what it
>actually does (as also happens with the one graphical grammar editor I've
>seen so far).
>  
>

Yes. Crazy stuff.

Sorry for getting late on the thread but have you already considered the 
idea of an action language?

By action language I mean a very simple language with basic constructs 
that could then be translated to whatever
language the generated parser will be in.

I don't know how you're planning code generation to be but maybe the 
asp.net codedom might serve you as a
good model?

asp.net pages too support multiple target languages and what they 
basically do there is to have the general asp.net parser
to just build an ast, the ast is then handled over to the appropriate 
language component that should then translate it
 to the apropriate source code form.

I understand this somewhat

>A special editor could help but I don't see that as a real option I
>*really* like plain textfiles for writing my grammars.
>
I wouldnt use antlr if it required some sort of special editor and I 
guess most coders wouldnt as well.

>How many people are actively using one grammar cross language? Is this
>really worth the effort?
>
>  
>

I'm just not using a cross language grammar because of the efforts 
involved. I'd love to be able to use my grammar
(target language is c#) as a start point to a java-based eclipse plugin 
but I cant (unless I use ikvm).

Rodrigo




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rbo at acm.org  Tue Aug  3 14:05:15 2004
From: rbo at acm.org (Rodrigo B. de Oliveira)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] 3.0 multiple language support
In-Reply-To: <410FFC46.80802@acm.org>
References: <FD35CB8B26F9534E86D1AC31F401AB340483FC7B@na1fcm52.dearborn.ford.com> <20040803173406.GO12872@cs.utwente.nl> <410FFC46.80802@acm.org>
Message-ID: <410FFE0B.2000400@acm.org>

Rodrigo B. de Oliveira wrote:

> ...
>
>I don't know how you're planning code generation to be but maybe the 
>asp.net codedom might serve you as a
>good model?
>
>asp.net pages too support multiple target languages and what they 
>basically do there is to have the general asp.net parser
>to just build an ast, the ast is then handled over to the appropriate 
>language component that should then translate it
> to the apropriate source code form.
>
>I understand this somewhat
>  
>
I meant to say:

I understand this somewhat restricts what can be achieved within the actions
since one is no longer in the realm of its favorite programming language 
- but maybe this is
a good thing - not being able to add too much complexity to what happens 
inside the actions -?

Rodrigo


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From kaffiene at xtra.co.nz  Tue Aug  3 14:18:25 2004
From: kaffiene at xtra.co.nz (Peter Ashford)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Please help a newbie!
In-Reply-To: <B835DF26-E55F-11D8-8B04-000A95AF74F0@nextquestion.net>
References: <410EF023.3000903@xtra.co.nz> <B835DF26-E55F-11D8-8B04-000A95AF74F0@nextquestion.net>
Message-ID: <41100121.6040206@xtra.co.nz>

Richard Clark wrote:

>Hi Peter,
>
>   The short answer is that your tree parser has to match what comes out 
>of your parser. SInce you added "result = " parsing to the parser, you 
>have to add the same to your tree parser.
>
>  
>
<snip>

>Hope this helps :)
>
>  ...Richard
>  
>

Yes! Thank you so much for your help.  ANTLR appears very powerful it's 
just taking me a while to grok how all the elements fit together (the 
idea of two parsers is a real eye opener coming from a flex/bison 
background)

Thanks for the info :o)

Peter.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rd_clark at sbcglobal.net  Tue Aug  3 14:34:45 2004
From: rd_clark at sbcglobal.net (Richard Clark)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Please help a newbie!
In-Reply-To: <41100121.6040206@xtra.co.nz>
References: <410EF023.3000903@xtra.co.nz> <B835DF26-E55F-11D8-8B04-000A95AF74F0@nextquestion.net> <41100121.6040206@xtra.co.nz>
Message-ID: <EFEB4DDD-E594-11D8-8990-000A95AF74F0@nextquestion.net>

You're welcome.

I should add that you don't _really_ need a tree walker; you could do 
the calculations right inside your parser and omit the tree-walking 
step. Tree walkers are nice if you have to rearrange a tree (e.g. as a 
step in translating one language to another, or optimizing away certain 
constructs) or if you have to take the same parser output and perform 
several different actions with it (e.g. a 2-pass compiler where the 
first pass gathers symbols and the second pass generates the code -- 
you might choose to implement each pass as a tree walker.)

  ...Richard



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From bujinwang at yahoo.com  Tue Aug  3 13:58:43 2004
From: bujinwang at yahoo.com (bujinwang)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] JavaScript grammar file?
Message-ID: <ceoua3+svq9@eGroups.com>

Anyone got a clue where I can find it?

Thanks,
Burt




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From sivaji_93061073 at yahoo.com  Tue Aug  3 11:53:44 2004
From: sivaji_93061073 at yahoo.com (sivaji kondapalli)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] please help me
Message-ID: <20040803185344.49330.qmail@web60606.mail.yahoo.com>

hi,
now i am trying to convert given asp to jsp , hence please if any one of u have asp grammar let me  know asap;its very urgent
 
regards,
sivajik

		
---------------------------------
Do you Yahoo!?
Yahoo! Mail - 50x more storage than other providers!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040803/d5967101/attachment.html
From joanpujol at gmail.com  Tue Aug  3 14:41:51 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Help with non determinism and syntactic, semantic predicates
Message-ID: <d2d18a104080314416d2e70ea@mail.gmail.com>

Hi,

My language have a multiple assigment instruction:

<ident1,ident2,...> := <expr1,expr2,...>

And I have conflicts with the '>' of the final of multiple assigment,
because it conflicts with the '>' of greater than.

I have tried this:

exp1:	exp2 (
		{insidemultipleassigment}? (OPGREATER (NEWLINE|SEMICOLON))=> //nothing
		|((OPGREATER^|OPMINOR^...) exp2)*;

and the multiple assigment ends with:
multipleassigment: ..... expresionlist;
expresionlist: expresion moreexpresions;
moreexpresions: OPGREATER! 
		| COLON! expresion moreexpresions; 


and antlr give me a nondeterminism with alternative 1 of exp1 and exit block.

Any ideas?


I have used the diagnostic option an I see:

Rule 1:
....
Rule Reference: exp2
	Start of alternative block.
	Warning: This alternative block is non-deterministic
	Start of an alternative block.
	The lookahead set for this block is:
	{"falgorisme", "fconst", "fvar", "llavors", "altrament", 
	"fsi", "fcas", "fmentre", "fins", "fper", "fer", 
	"pas", OPMESPETITIGUAL, OPMESPETIT, OPIGUAL, NL, IDENTIFICADOR, 
	OPPT, OPDIFERENT, OPGREATER, OPMESGRANIGUAL, SEPARADORCAS,   SEMICOLON,COLON }
	This block has multiple alternatives:
					
	Alternate(1) will be taken IF:
	The lookahead set: {	"falgorisme", "fconst", "fvar", "llavors", "altrament", 
	"fsi", "fcas", "fmentre", "fins", "fper", "fer","pas", NL, IDENTIFICADOR,
        OPPT, OPGREATER, SEPARADORCAS, 	SEMICOLON, COLON
	 }
	is matched, AND the semantic predicate:
	  insidemultipleassigment	is true, AND the syntactic predicate:
		Start of alternative block.
		Start of an alternative block.													The lookahead set for
this block is:														{ OPGREATER }


Why ANTLR computes a very large lookahead if the syntactic predicate
have only one symbol?

Cheers,

-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From xdecoret at free.fr  Tue Aug  3 14:43:35 2004
From: xdecoret at free.fr (xdecoret)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Solving non determinism
Message-ID: <cep0u7+cflr@eGroups.com>

Hi,

I cannot solve a non determinism problem with my grammar:

ANTLR Parser Generator   Version 2.7.3   1989-2004 jGuru.com
foo.g:72: warning:nondeterminism upon
foo.g:72:     k==1:NAME
foo.g:72:     k==2:EQUAL
foo.g:72:     k==3:NAME,STRING,VALUE
foo.g:72:     k==4:COMA,POUND
foo.g:72:     k==5:NAME,STRING,VALUE
foo.g:72:     between alt 1 and exit branch of block

I do not understand why antlr 2.7.3 complains.

I copy the .g file below (this is a parser for bibtex format). Note
that if I use the commented line for fieldValue productions rule, the
problem does not show up. 

anyother comment about the grammar is also welcome.

header {
}		
options {
    language="Cpp";
    genHashLines = false;
}

//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
//%%%%%%        PARSER                              %%%%%%%%%%    
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

{
}
class entriesparser extends Parser;
options {
    k=5;
    buildAST = false;
    defaultErrorHandler=false;
}
{
}
parseFile
{
    string i;
    string s;
}
    :
        {
            braceStartsValue_ = false;
        }
        (entry | stringdef)* EOF
    ;
stringdef
{
    string i;
    string s;
}
    : STRINGDEF LPARENTHESIS i=id EQUAL
        {
            braceStartsValue_ = true;
        }
        s=fieldValue RPARENTHESIS
        {
            braceStartsValue_ = false;
        }
    | STRINGDEF LBRACE i=id EQUAL
        {
            braceStartsValue_ = true;
        }
        s=fieldValue RBRACE
        {
            braceStartsValue_ = false;
        }        
    ;
entry
{
    string k;
}
    : t:TYPE LBRACE k=key COMA
        {
            braceStartsValue_ = true;
        }
        fields
        {
            braceStartsValue_ = false;
        }
        RBRACE
    ;
fields
    : (field COMA)* field (COMA)?
    ;
field
{
    string i;
    string v;
}
    : i=id EQUAL v=fieldValue
    ;
fieldValue returns [std::string v]
{
    string p;
    string q;
}
    : (p=fieldValuePart POUND {v += p;})* q=fieldValuePart {v += q; }
//     : q=fieldValuePart {v += q; }
    ;
fieldValuePart returns [std::string v]
    : t0:NAME
        {
            v = t0->getText();
        }
    | t1:STRING { v = t1->getText(); }
    | t2:VALUE  { v = t2->getText(); }      
    ;
key returns [std::string v]
    : t:NAME
        {
            v = string(t->getText());
        }
    ;
id returns [std::string v]
    : t:NAME
        {
            v = string(t->getText());
        }
    ;
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
//%%%%%%        LEXER                               %%%%%%%%%%    
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

{
}
class entrieslexer extends Lexer;
options {
    k=3;
    defaultErrorHandler=false;
    caseSensitive=false;
    charVocabulary='\3'..'\377';
}
{
}
POUND : '#'
    ;
LPARENTHESIS : '('
    ;
RPARENTHESIS : ')'
    ;
RBRACE : '}'
    ;
COMA : ','
    ;
EQUAL : '='
    ;
NAME
    : ('a'..'z'|'0'..'9'|'_'|'-'|'\''|':'|'.')+ 
    ;
protected
ESC
    : '\\' ~('\n')
    ;
protected
STRING_INTERNAL
    : ( ('\\' ~('\n'))=> ESC
        | ( '\r' { newline(); }
            | '\n' { newline(); }
            | '\\' '\n'   { newline(); }
            )
        | ~( '"' | '\r' | '\n' | '\\' )
        )*
    ;
STRING: '"' t:STRING_INTERNAL '"'
        {
            $setText(t->getText());
        }
    ;
protected
LBRACE : '{'
    ;
protected
VALUE_INTERNAL
    : ((~('{'|'}'|'\n')) | '\n' { newline(); } | VALUE)*
    ;
protected
VALUE
    : ('{' VALUE_INTERNAL '}')
    ;
LBRACE_OR_VALUE
    : { parser_->braceStartsValue() }? t:VALUE
        {
            $setType(VALUE);
            string s = t->getText().substr(1,t->getText().size()-2);
            $setText(s);
        }
    | LBRACE
        {
            $setType(LBRACE);
        }
;
// The \r\n below is to parse DOS file end of lines
WS
    : ( ' ' | '\t' | ('\n'| "\r\n") { newline(); })
        {
            $setType(ANTLR_USE_NAMESPACE(antlr)Token::SKIP);
        }
	;
protected
TYPE_INTERNAL
    : ('a'..'z')+
    ;
protected
TYPE
    : '@' t:TYPE_INTERNAL
        {
            $setText(t->getText());
        }
    ;
protected
STRINGDEF
    : "@string"
    ;

STRINGDEF_OR_TYPE
    : ("@string") => STRINGDEF
        {
            $setType(STRINGDEF);
        }
    | ('@') => t:TYPE
        {
            $setType(TYPE);
            $setText(t->getText());
        }
    ;





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From kaffiene at xtra.co.nz  Tue Aug  3 15:06:56 2004
From: kaffiene at xtra.co.nz (Peter Ashford)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Please help a newbie!
In-Reply-To: <EFEB4DDD-E594-11D8-8990-000A95AF74F0@nextquestion.net>
References: <410EF023.3000903@xtra.co.nz> <B835DF26-E55F-11D8-8B04-000A95AF74F0@nextquestion.net> <41100121.6040206@xtra.co.nz> <EFEB4DDD-E594-11D8-8990-000A95AF74F0@nextquestion.net>
Message-ID: <41100C80.3010905@xtra.co.nz>

Richard Clark wrote:

>You're welcome.
>
>I should add that you don't _really_ need a tree walker; you could do 
>the calculations right inside your parser and omit the tree-walking 
>step. Tree walkers are nice if you have to rearrange a tree (e.g. as a 
>step in translating one language to another, or optimizing away certain 
>constructs) or if you have to take the same parser output and perform 
>several different actions with it (e.g. a 2-pass compiler where the 
>first pass gathers symbols and the second pass generates the code -- 
>you might choose to implement each pass as a tree walker.)
>
>  ...Richard
>
>
>  
>

Ah... I did wonder if I might have been using the AST gratutiously just 
because I didn't understand the basics properly :o)  If I can bug you 
some more - how would I go about parsing the expressions without using 
the tree?

TIA

Peter.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From xdecoret at free.fr  Tue Aug  3 15:48:04 2004
From: xdecoret at free.fr (xdecoret)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] trying to understand greedy option
Message-ID: <cep4n4+q7u0@eGroups.com>

This post is following my earlier one on non-determinism. It seems I
can shut the warning up by using a option {greedy=true;} but then I
run into another problem. Here is a simple grammar 

header {
}		
options {
    language="Cpp";
    genHashLines = false;
}

//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
//%%%%%%        PARSER                              %%%%%%%%%%    
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

{
}
class barparser extends Parser;
options {
    k=5;
    buildAST = false;
    defaultErrorHandler=false;
}
{
}
parseFile
    : (field COMA)* field (COMA)?
    ;
field
    : id EQUAL fieldValue
    ;
fieldValue 
    : (fieldValuePart PLUS)* fieldValuePart 
    ;
fieldValuePart 
    : STRING
    | NAME
    ;
id
    : NAME
    ;
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
//%%%%%%        LEXER                               %%%%%%%%%%    
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

{
}
class barlexer extends Lexer;
options {
    k=3;
    defaultErrorHandler=false;
    caseSensitive=false;
    charVocabulary='\3'..'\377';
}
{
}
PLUS : '+'
    ;
COMA : ','
    ;
EQUAL : '='
    ;
NAME
    : ('a'..'z'|'0'..'9'|'_'|'-'|'\''|':'|'.')+ 
    ;
protected
ESC
    : '\\' ~('\n')
    ;
protected
STRING_INTERNAL
    : ( ('\\' ~('\n'))=> ESC
        | ( '\r' { newline(); }
            | '\n' { newline(); }
            | '\\' '\n'   { newline(); }
            )
        | ~( '"' | '\r' | '\n' | '\\' )
        )*
    ;
STRING: '"' t:STRING_INTERNAL '"'
        {
            $setText(t->getText());
        }
    ;
// The \r\n below is to parse DOS file end of lines
WS
    : ( ' ' | '\t' | ('\n'| "\r\n") { newline(); })
        {
            $setType(ANTLR_USE_NAMESPACE(antlr)Token::SKIP);
        }
	;

Antlr-izing it, I get a warning about non-determinism that I can solve
 with :

fieldValue 
    : (options {greedy=true;} : fieldValuePart PLUS)* fieldValuePart 
    ;


But then, I can parse the following file:

value = toto,
value = "toto",
value = "toto" + tata + "titi" + tutu,
value = lastone

But I cannot parse the same input if I remove the last line ?!?!

Any explanations to help me understand?



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rd_clark at sbcglobal.net  Tue Aug  3 16:02:48 2004
From: rd_clark at sbcglobal.net (Richard Clark)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] JavaScript grammar file?
In-Reply-To: <ceoua3+svq9@eGroups.com>
References: <ceoua3+svq9@eGroups.com>
Message-ID: <3D1F94DB-E5A1-11D8-907E-000A95AF74F0@nextquestion.net>

I have most of a ECMA-262 grammar written (all but the regular 
expression syntax), which covers JavaScript 1. I'm willing to share it, 
but you have to realize that it's only been tested lightly and I cannot 
offer support on it.

What were you wanting to do with it?

  ...Richard

On Aug 3, 2004, at 13:58, bujinwang wrote:

> Anyone got a clue where I can find it?
>
> Thanks,
> Burt



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rd_clark at sbcglobal.net  Tue Aug  3 16:05:21 2004
From: rd_clark at sbcglobal.net (Richard Clark)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Please help a newbie!
In-Reply-To: <41100C80.3010905@xtra.co.nz>
References: <410EF023.3000903@xtra.co.nz> <B835DF26-E55F-11D8-8B04-000A95AF74F0@nextquestion.net> <41100121.6040206@xtra.co.nz> <EFEB4DDD-E594-11D8-8990-000A95AF74F0@nextquestion.net> <41100C80.3010905@xtra.co.nz>
Message-ID: <980DEE24-E5A1-11D8-907E-000A95AF74F0@nextquestion.net>


On Aug 3, 2004, at 15:06, Peter Ashford wrote:

> Ah... I did wonder if I might have been using the AST gratutiously just
> because I didn't understand the basics properly :o)  If I can bug you
> some more - how would I go about parsing the expressions without using
> the tree?
>

Look at Terrence's "beginner's tutorial" -- it shows an expression 
parser w/o a tree walker.
<http://www.cs.usfca.edu/~parrt/course/652/lectures/antlr.html>

...Richard



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From xdecoret at free.fr  Tue Aug  3 16:08:01 2004
From: xdecoret at free.fr (xdecoret)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Re: trying to understand greedy option
In-Reply-To: <cep4n4+q7u0@eGroups.com>
Message-ID: <cep5sh+peh3@eGroups.com>

> 
> But then, I can parse the following file:
> 
> value = toto,
> value = "toto",
> value = "toto" + tata + "titi" + tutu,
> value = lastone
> 
> But I cannot parse the same input if I remove the last line ?!?!
> 

I can get my parser to parse the desired format if I change it
slightly into:

parseFile
    : fields
    ;
fields
    : field (COMA)?
    | field COMA fields 
    ;
field
    : id EQUAL fieldValue
    ;
fieldValue 
    : (fieldValuePart PLUS)* fieldValuePart
    ;
fieldValuePart 
    : STRING
    | NAME
    ;
id
    : NAME
    ;

But then I cannot place a greedy option to sop the warning.

> Any explanations to help me understand?

and I don't understand what has changed ;-) The rewriting seems
equivalent to me!



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Tue Aug  3 16:16:36 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Re: trying to understand greedy option
In-Reply-To: <cep4n4+q7u0@eGroups.com>
Message-ID: <cep6cl+dpjo@eGroups.com>

In this:

> parseFile
>     : (field COMA)* field (COMA)?
>     ;

the (field COMA)* eats up everything if you set greedy=true (which is
the default - with warnings) because "field" can have an infinite
length.  You must remember, antlr doesn't have backtracking like
regular expressions.  You can simulate the effect of backtracking with
syntactic predicates, like this:

parseFile
    : ( (field COMMA field) => field COMA )* field (COMA)?
    ;

You'll get other warnings about these being superfluous, but these are
bogus.

The better and simple solution is to refactor.  Try doing this type of
thing:

parseFile
    : field (COMA field)* (COMA)?
    ;

Eric

--- In antlr-interest@yahoogroups.com, "xdecoret" <xdecoret@f...> wrote:
> This post is following my earlier one on non-determinism. It seems I
> can shut the warning up by using a option {greedy=true;} but then I
> run into another problem. Here is a simple grammar 
> 
> header {
> }		
> options {
>     language="Cpp";
>     genHashLines = false;
> }
> 
> //%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
> //%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
> //%%%%%%        PARSER                              %%%%%%%%%%    
> //%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
> //%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
> 
> {
> }
> class barparser extends Parser;
> options {
>     k=5;
>     buildAST = false;
>     defaultErrorHandler=false;
> }
> {
> }
> parseFile
>     : (field COMA)* field (COMA)?
>     ;
> field
>     : id EQUAL fieldValue
>     ;
> fieldValue 
>     : (fieldValuePart PLUS)* fieldValuePart 
>     ;
> fieldValuePart 
>     : STRING
>     | NAME
>     ;
> id
>     : NAME
>     ;
> //%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
> //%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
> //%%%%%%        LEXER                               %%%%%%%%%%    
> //%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
> //%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
> 
> {
> }
> class barlexer extends Lexer;
> options {
>     k=3;
>     defaultErrorHandler=false;
>     caseSensitive=false;
>     charVocabulary='\3'..'\377';
> }
> {
> }
> PLUS : '+'
>     ;
> COMA : ','
>     ;
> EQUAL : '='
>     ;
> NAME
>     : ('a'..'z'|'0'..'9'|'_'|'-'|'\''|':'|'.')+ 
>     ;
> protected
> ESC
>     : '\\' ~('\n')
>     ;
> protected
> STRING_INTERNAL
>     : ( ('\\' ~('\n'))=> ESC
>         | ( '\r' { newline(); }
>             | '\n' { newline(); }
>             | '\\' '\n'   { newline(); }
>             )
>         | ~( '"' | '\r' | '\n' | '\\' )
>         )*
>     ;
> STRING: '"' t:STRING_INTERNAL '"'
>         {
>             $setText(t->getText());
>         }
>     ;
> // The \r\n below is to parse DOS file end of lines
> WS
>     : ( ' ' | '\t' | ('\n'| "\r\n") { newline(); })
>         {
>             $setType(ANTLR_USE_NAMESPACE(antlr)Token::SKIP);
>         }
> 	;
> 
> Antlr-izing it, I get a warning about non-determinism that I can solve
>  with :
> 
> fieldValue 
>     : (options {greedy=true;} : fieldValuePart PLUS)* fieldValuePart 
>     ;
> 
> 
> But then, I can parse the following file:
> 
> value = toto,
> value = "toto",
> value = "toto" + tata + "titi" + tutu,
> value = lastone
> 
> But I cannot parse the same input if I remove the last line ?!?!
> 
> Any explanations to help me understand?



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rd_clark at sbcglobal.net  Tue Aug  3 16:17:47 2004
From: rd_clark at sbcglobal.net (Richard Clark)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Re: trying to understand greedy option
In-Reply-To: <cep5sh+peh3@eGroups.com>
References: <cep5sh+peh3@eGroups.com>
Message-ID: <5525F940-E5A3-11D8-907E-000A95AF74F0@nextquestion.net>

I think it would be better to write fields as:

fields
	:	field (COMA field)*
	;

Then a comma unambiguously begins a new field assignment.

The problem with your old declaration:
> fields
>     : field (COMA)?
>     | field COMA fields
>     ;

is that it expands to:
fields
	: field
	| field COMA
	| field COMA fields
	;

which is clearly ambiguous. If you turn on "greedy" to clear the 
warning, ANTLR will go for the longest match it thinks it can get, 
which is "field COMA fields" and will die if you have a trailing comma 
without a field assignment following.

  ...Richard



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Tue Aug  3 19:46:25 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Re: interactive envionments and non-delayed rule reduction
In-Reply-To: <ceommc+c79r@eGroups.com>
References: <ceommc+c79r@eGroups.com>
Message-ID: <7A2DA1F1-E5C0-11D8-8B1E-000393B5606C@codetransform.com>

Then my suggestion will work.  Parse a single line, if it fails wait 
for the next line, put them together and try again.

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Aug 3, 2004, at 11:48 AM, Neurosurg wrote:

> --- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> 
> wrote:
>> What do you do if they type this?
>>
>> (3 + 4)
>>    *5
>
> (3+4) ==> reduce, and calculate
>
> then
>
> *5 --> error
>
> It is very similar to what we have in R or, say, in Scheme.
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From kaffiene at xtra.co.nz  Tue Aug  3 20:32:12 2004
From: kaffiene at xtra.co.nz (Peter Ashford)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Please help a newbie!
In-Reply-To: <980DEE24-E5A1-11D8-907E-000A95AF74F0@nextquestion.net>
References: <410EF023.3000903@xtra.co.nz> <B835DF26-E55F-11D8-8B04-000A95AF74F0@nextquestion.net> <41100121.6040206@xtra.co.nz> <EFEB4DDD-E594-11D8-8990-000A95AF74F0@nextquestion.net> <41100C80.3010905@xtra.co.nz> <980DEE24-E5A1-11D8-907E-000A95AF74F0@nextquestion.net>
Message-ID: <411058BC.8000206@xtra.co.nz>

Richard Clark wrote:

>On Aug 3, 2004, at 15:06, Peter Ashford wrote:
>
>  
>
>>Ah... I did wonder if I might have been using the AST gratutiously just
>>because I didn't understand the basics properly :o)  If I can bug you
>>some more - how would I go about parsing the expressions without using
>>the tree?
>>
>>    
>>
>
>Look at Terrence's "beginner's tutorial" -- it shows an expression 
>parser w/o a tree walker.
><http://www.cs.usfca.edu/~parrt/course/652/lectures/antlr.html>
>
>...Richard
>  
>

Thanks for that - I've gone through an refactored my grammar to only use 
the one parser and it works fine (a bit simpler too for my simple 
purposes :o))

And so now I 've reached my next problem :o)

I've added variable assignments to the grammar but they don't work.  The 
scanner reports unexpected char on the first character of an identifier 
(e.g. "myval = 123" => "line 1:1: unexpected char 'm'")

I noticed the documentation talks about the testLiterals options, but 
I've used that and it doesn 't seem to help.

- here's the parser rule:

    assign
    { float f; }
            : i:ID EQ f=f_expr                 { assignTo(i->getText(),
    f); }
            ;


And here's the lexer rule:

    protected
    ALPHA  : ('a'..'z' 'A'..'Z');

    ID
    options {
      paraphrase = "an identifier";
      testLiterals = true;
    }
           : ALPHA (ALPHA | DIGIT)*;


The whole grammar is printed below:

---------------------------------------------------------------------------

header {
    extern void assignTo(std::string id, float value);   
}

options {
    language="Cpp";   
    genHashLines = true;  
}


//=======================================================================
class MyParser extends Parser;

script returns [std::string value]
{std::string s; }
        : (assign)* s=result               { value = s; }     
        ;
     
assign
{ float f; }
        : i:ID EQ f=f_expr                 { assignTo(i->getText(), f); }
        ;

result returns [std::string value]
{float f;}
        : RESULT EQ f=f_expr               { char buf[127];
                                             sprintf(buf,"%f", f);
                                             value = std::string(buf); }
        ;

f_expr returns [float value=0]
{float f;}
        : value=f_mexpr
          (   PLUS  f=f_mexpr              { value += f; }
            | MINUS f=f_mexpr              { value -= f; }
          )*
        ; 


f_mexpr returns [float value=0]
{ float f; }
        : value=f_atom (   MULT f=f_atom   { value *= f;} 
                         | DIV  f=f_atom   { value /= f;}
                       )*
        ;
       
f_atom returns [float value=0]  
{ float f; }
        : n:NUMBER                         { value = (float) 
atof(n->getText().c_str()); }
        | LPAREN f=f_expr RPAREN           { value = f; }
        ;

 
//=======================================================================
class MyLexer extends Lexer;

options {
    k=2;                               // needed for newline junk
    charVocabulary='\u0000'..'\u007F'; // allow ascii
    testLiterals=false;
}

LPAREN : '(' ;
RPAREN : ')' ;
PLUS   : '+' ;
MINUS  : '-' ;
MULT   : '*' ;
DIV    : '/' ;
EQ     : '=' ;

RESULT : "result";

protected
DIGIT  : ('0'..'9');

protected
ALPHA  : ('a'..'z' 'A'..'Z');

NUMBER
options {
  paraphrase = "a number";
}
       : (DIGIT)+ ( | ('.' (DIGIT)*));

ID
options {
  paraphrase = "an identifier";
  testLiterals = true;
}
       : ALPHA (ALPHA | DIGIT)*;

STRING
options {
  paraphrase = "a quoted string";
}
       : '"'! (~'"') '"'!;

COMMENT: "//" (~'\n')* '\n' {_ttype = 
ANTLR_USE_NAMESPACE(antlr)Token::SKIP;}
         ;

WS     : ( ' '
         | '\r' '\n'
         | '\n'
         | '\t'
         )
         {_ttype = ANTLR_USE_NAMESPACE(antlr)Token::SKIP;}
         ;   


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040804/7f0ff038/attachment.html
From rd_clark at sbcglobal.net  Tue Aug  3 20:41:25 2004
From: rd_clark at sbcglobal.net (Richard Clark)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Re: interactive envionments and non-delayed rule reduction
In-Reply-To: <7A2DA1F1-E5C0-11D8-8B1E-000393B5606C@codetransform.com>
References: <ceommc+c79r@eGroups.com> <7A2DA1F1-E5C0-11D8-8B1E-000393B5606C@codetransform.com>
Message-ID: <295D2C94-E5C8-11D8-907E-000A95AF74F0@nextquestion.net>


On Aug 3, 2004, at 19:46, Monty Zukowski wrote:

> Then my suggestion will work.  Parse a single line, if it fails wait
> for the next line, put them together and try again.

Um, Monty, are you sure? I've been thinking about this and wondering 
how I'd structure it if I did this.

Try this scenario:

(3 + 4
)
*5

The first (3+4 throws a RecognitionException (incomplete expression). 
Adding the ) makes it OK. But then *5 throws a recognition expression, 
and no number of added lines will fix it.

I wonder if this would work: leave the EOL tokens in and use them to 
mark the end of an expression. If you get a recognition expression, and 
the token is an EOL, append the next line and retry the whole thing. If 
you get a recognition expression and the token is _not_ an EOL, report 
and error and flush the input buffer.

What do you think?

  ...Richard



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rd_clark at sbcglobal.net  Tue Aug  3 20:47:26 2004
From: rd_clark at sbcglobal.net (Richard Clark)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Please help a newbie!
In-Reply-To: <411058BC.8000206@xtra.co.nz>
References: <410EF023.3000903@xtra.co.nz> <B835DF26-E55F-11D8-8B04-000A95AF74F0@nextquestion.net> <41100121.6040206@xtra.co.nz> <EFEB4DDD-E594-11D8-8990-000A95AF74F0@nextquestion.net> <41100C80.3010905@xtra.co.nz> <980DEE24-E5A1-11D8-907E-000A95AF74F0@nextquestion.net> <411058BC.8000206@xtra.co.nz>
Message-ID: <00771A7E-E5C9-11D8-907E-000A95AF74F0@nextquestion.net>

Some of this just takes a Zen approach: becoming one with the 
documentation. Try adding # in front of the var names in the action 
(and look at the generated code to see what ANTLR does with it.)


assign
  { float f; }
  ??????? : i:ID EQ f=f_expr???????????????? { assignTo(#i->getText(), 
#f); }
  ??????? ;

  ...R



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From kaffiene at xtra.co.nz  Tue Aug  3 22:00:18 2004
From: kaffiene at xtra.co.nz (Peter Ashford)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Please help a newbie!
In-Reply-To: <00771A7E-E5C9-11D8-907E-000A95AF74F0@nextquestion.net>
References: <410EF023.3000903@xtra.co.nz> <B835DF26-E55F-11D8-8B04-000A95AF74F0@nextquestion.net> <41100121.6040206@xtra.co.nz> <EFEB4DDD-E594-11D8-8990-000A95AF74F0@nextquestion.net> <41100C80.3010905@xtra.co.nz> <980DEE24-E5A1-11D8-907E-000A95AF74F0@nextquestion.net> <411058BC.8000206@xtra.co.nz> <00771A7E-E5C9-11D8-907E-000A95AF74F0@nextquestion.net>
Message-ID: <41106D62.5010204@xtra.co.nz>

Richard Clark wrote:

>Some of this just takes a Zen approach: becoming one with the 
>documentation. Try adding # in front of the var names in the action 
>(and look at the generated code to see what ANTLR does with it.)
>
>
>assign
>  { float f; }
>          : i:ID EQ f=f_expr                 { assignTo(#i->getText(), 
>#f); }
>          ;
>
>  ...R
>
>  
>

I appologise for being a pain - but adding the hash just makes the code 
not compile because MSVC .NET thinks it's a preprocessor command.

I have been stepping through the generated code and what I find is the 
parser skipping over all of the possiblities (keywords, comments etc) 
and throwing the no valid alternative exception rather than scanning as 
an identifier


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From kibab at icehouse.net  Tue Aug  3 23:16:42 2004
From: kibab at icehouse.net (Kaleb Pederson)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] JavaScript grammar file?
In-Reply-To: <ceoua3+svq9@eGroups.com>
References: <ceoua3+svq9@eGroups.com>
Message-ID: <200408032316.44483.kibab@icehouse.net>

The specs are publicly available for the LR grammar if you do a search on ECMA 
Script.  Richard Clark also sent an e-mail to the list mentioning that he was 
working on a project using the ECMAScript-262 grammar that he was going to 
release when he finished his project.

However, I have a mostly complete one from a long time ago that I haven't 
finished.  I did most of the LR->LL conversion and it now compiles, but there 
are quite a few warnings that I haven't yet had the time to look into (and it 
doesn't look like I will in the near future at all).  I would be willing to 
post the grammar, but as I mentioned its not complete.  It still lacks any 
AST building code.  But hey, if you have lots of Javascript files lying 
around, you could try it out and see what it parses.

--Kaleb

On Tuesday 03 August 2004 1:58 pm, bujinwang wrote:
> Anyone got a clue where I can find it?
>
> Thanks,
> Burt


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From yjargudo at tiscali.es  Wed Aug  4 03:59:58 2004
From: yjargudo at tiscali.es (yjargudo)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Re: A simple question
In-Reply-To: <ceorf3+68bd@eGroups.com>
Message-ID: <ceqfje+isu0@eGroups.com>

The problem is that I want to avoid built AST.

There's another way to get the two parsings?

Yolanda

--- In antlr-interest@yahoogroups.com, "lgcraymer"  wrote:
> This is the type of situation where trees make the most sense. 
> Parsing twice is slower (significantly) and not nearly as clean as
> having two versions of a tree walker.
> 
> --Loring
> 
> 
> --- In antlr-interest@yahoogroups.com, "yjargudo"  wrote:
> > hello,
> > 
> > I need to parse a file twice. In each parsing I have to use the same
> > grammar only with different antlr actions added.
> > 
> > What I have to do?
> > 
> > I tried the following but It doesn't works
> > 
> > CPPLexer lex=new CPPLexer(anInputStream);
> > lex.setTokenObjectClass("antlr.CommonHiddenStreamToken");
> > TokenStreamHiddenTokenFilter filter=new 
> >         TokenStreamHiddenTokenFilter(lex);
> > filter.hide(CPPParser.Comment);
> > filter.hide(CPPParser.CPPComment);
> > parser = new CPPParser(filter);
> > parser.translation_unit(this);
> > 
> > 
> > CPPLexer2 lex2=new CPPLexer2(anInputStream);
> > lex2.setTokenObjectClass("antlr.CommonHiddenStreamToken");
> > TokenStreamHiddenTokenFilter filter2=new 
> >        TokenStreamHiddenTokenFilter(lex2);
> > filter2.hide(CPPParser2.Comment);
> > filter2.hide(CPPParser2.CPPComment);
> > parser2 = new CPPParser2(filter2);
> > parser2.translation_unit(this);
> > 
> > 
> > Thanks a lot,
> > 
> > Yolanda



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From sk at z.pl  Wed Aug  4 05:29:42 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] 3.0 multiple language support
In-Reply-To: <FD35CB8B26F9534E86D1AC31F401AB340483FC7B@na1fcm52.dearborn.ford.com>
References: <FD35CB8B26F9534E86D1AC31F401AB340483FC7B@na1fcm52.dearborn.ford.com>
Message-ID: <4110D6B6.8060207@softax.pl>

Tiller, Michael (M.M.) wrote:
>>How about allowing different language versions of the same action in
>>the same file? Something like:
>>
>>my_prod
>>   : my_subpod %C{ /* here C action comes */  }
>>               %J{ /* here java action goes */ }
>>               %P{ /* here python action goes */ }
> 
> 
> Of the options I have seen so far, I prefer the one where the grammar
> just has macros and the actions themselves are specified outside the
> grammar, e.g.
> 
> some_rule
>    : a:A "," b:B << process_some_rule(a,b); >>
> 
> And then you could weave together an action file with a grammar file.
> So you might have a C++ action file:
> 
> void process_some_rule(A *a, B* b)
> {
>   /* Do something very general in this language */
> }
> 

I really don't like this. Actions (esp. predicates) are part of the grammar. 
Separating them makes code much harder to read, analyse and maitain, as one 
has to jump around the code text.
Macros might be a nice idea, but they should be intermixable with the 
parser/lexer definition in the same file.

rgds
-- 
Sebastian Kaliszewski



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From tomdz at first.gmd.de  Wed Aug  4 06:10:47 2004
From: tomdz at first.gmd.de (Thomas Dudziak)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] 3.0 multiple language support
In-Reply-To: <4110D6B6.8060207@softax.pl>
References: <FD35CB8B26F9534E86D1AC31F401AB340483FC7B@na1fcm52.dearborn.ford.com> <4110D6B6.8060207@softax.pl>
Message-ID: <4110E057.3000604@first.fhg.de>

Sebastian Kaliszewski wrote:

>Tiller, Michael (M.M.) wrote:
>  
>
>>>How about allowing different language versions of the same action in
>>>the same file? Something like:
>>>
>>>my_prod
>>>  : my_subpod %C{ /* here C action comes */  }
>>>              %J{ /* here java action goes */ }
>>>              %P{ /* here python action goes */ }
>>>      
>>>
>>Of the options I have seen so far, I prefer the one where the grammar
>>just has macros and the actions themselves are specified outside the
>>grammar, e.g.
>>
>>some_rule
>>   : a:A "," b:B << process_some_rule(a,b); >>
>>
>>And then you could weave together an action file with a grammar file.
>>So you might have a C++ action file:
>>
>>void process_some_rule(A *a, B* b)
>>{
>>  /* Do something very general in this language */
>>}
>>
>>    
>>
>
>I really don't like this. Actions (esp. predicates) are part of the grammar. 
>Separating them makes code much harder to read, analyse and maitain, as one 
>has to jump around the code text.
>Macros might be a nice idea, but they should be intermixable with the 
>parser/lexer definition in the same file.
>  
>
I find Michaels solution much easier to maintain. Imagine the Java 
grammar with embedded actions for all supported languages - it will 
surely be not readable anymore. Defining labels, e.g. 
"process_some_rule" is far better IMO. You can simply add all 
information as parameters that is required by the action. The net result 
is that the grammars themselves are target-language-independent 
(remember the newbie asking about a Java version for the SQL grammar ?) 
and you have the action in a concise form, perhaps in a single class. Or 
Antlr generates abstract method declarations (for C++/C#/Java) in the 
parser that the developer has to override in a concrete parser subclass 
(template and hook).
There are a few situations where this might seem like overkill (e.g. 
maintaining and using a counter for a ()* subrule that shall be 
traversed like 20 times), but there might be better ways to handle these 
situations (e.g. defining syntax for it - say, ()[20] - and letting 
Antlr work out the details).

Tom



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Wed Aug  4 07:15:15 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Re: interactive envionments and non-delayed rule reduction
In-Reply-To: <295D2C94-E5C8-11D8-907E-000A95AF74F0@nextquestion.net>
References: <ceommc+c79r@eGroups.com> <7A2DA1F1-E5C0-11D8-8B1E-000393B5606C@codetransform.com> <295D2C94-E5C8-11D8-907E-000A95AF74F0@nextquestion.net>
Message-ID: <B4AA93BA-E620-11D8-8B1E-000393B5606C@codetransform.com>

On Aug 3, 2004, at 8:41 PM, Richard Clark wrote:

>
> On Aug 3, 2004, at 19:46, Monty Zukowski wrote:
>
>> Then my suggestion will work.  Parse a single line, if it fails wait
>> for the next line, put them together and try again.
>
> Um, Monty, are you sure? I've been thinking about this and wondering
> how I'd structure it if I did this.
>
> Try this scenario:
>
> (3 + 4
> )
> *5
>
> The first (3+4 throws a RecognitionException (incomplete expression).
> Adding the ) makes it OK. But then *5 throws a recognition expression,
> and no number of added lines will fix it.
>
> I wonder if this would work: leave the EOL tokens in and use them to
> mark the end of an expression. If you get a recognition expression, and
> the token is an EOL, append the next line and retry the whole thing. If
> you get a recognition expression and the token is _not_ an EOL, report
> and error and flush the input buffer.
>
> What do you think?
>
>
I think I already asked Valery about that scenario.  It's supposed to 
fail on the *5.

>> What do you do if they type this?
>>
>> (3 + 4)
>>    *5
>
> (3+4) ==> reduce, and calculate
>
> then
>
> *5 --> error
>
> It is very similar to what we have in R or, say, in Scheme.

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From tjs_tjs4 at yahoo.com  Tue Aug  3 21:17:49 2004
From: tjs_tjs4 at yahoo.com (tjs)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] modifying expression grammar ; unexpected token null
Message-ID: <cepo1d+2g5v@eGroups.com>

I am trying to modify the Expression grammar given in the 
JS Mill's tutorial (as of this time down;
http://supportweb.cs.bham.ac.uk/documentation/tuto
rials/docsystem/build/tutorials/antlr/antlrhome.html)

I have 1 main goal here:
To make it so you don't need parantheses around the top expression
I did this by recrusively defining an expression as the same as in the
tutorial (fairly straightforward), and instead of

| expr

on the atom rule, I used

| (LPAREN^ expr RPAREN!) 

Which is the way the Java grammars I've look at handle expressions.
All this grammar does is parse math expressions and enforce
parantheses (for example, 2+2 outputs 4.0, and (1-3)*4 outputs -8, or
it SHOULD anyway). Again, I modified the ORIGINAL grammar.

My PROBLEM is that when I feed it input (in the form of a text file
that is only 3 characters in length, it gives me the following error:

line 1:4 unexpected token: null
 ( + 2 )
(AST): unexpected end of subtree

My interpretation of this is that it is trying to read the 4th
character of the input (which doesn't exist, hence null) and then the
AST doesn't understand why it can't find the end of the subtree, it
apparently also thinks it needs another token when it shouldn't. I
can't figure out why it wants a 4th character or any other problem.

The following are 1. the input text 2. the grammar 3. the ORIGINAL
grammar ( which does work properly, but you need to do (2+2) instead
of 2+2, because it makes you use parantheses around everything ), 4.
the way in which I load the text file into the lexer

finally, before you think i am a "Newbie" who doesn't deserve any
help, i have read 50+ pages of ANTLR documentation, searched
everything in /docs and this forum, experimented with this grammar for
over 4 hours, looked at Java grammars to see how they handled
expressions, and wrote a very crude expression parser that was very
messy before to graph functions (its messiness is part of the reason i
am using ANTLR to redo it). i just can't figure out my dumb problem,
that's all. also, if you help me i'll give you credit in my program
for correcting my dumb mistakes!

------- 1. input text
2+2

(this is only 3 characters, no newlines, or anything else)

------- 2. my expression grammar

class ExpressionParser extends Parser;
options { buildAST=true; }

expr     :  sumExpr ;
sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ;
prodExpr : powExpr ((MUL^|DIV^|MOD^) powExpr)* ;
powExpr  : atom (POW^ atom)? ;
atom     : INT | (LPAREN^ expr RPAREN!) ;

class ExpressionLexer extends Lexer;

LPAREN : '(';
FUNCSIN : 's';
RPAREN : ')';
PLUS  : '+' ;
MINUS : '-' ;
MUL   : '*' ;
DIV   : '/' ;
MOD   : '%' ;
POW   : '^' ;
SEMI  : ';' ;
protected DIGIT : '0'..'9' ;
INT   : (DIGIT)+ ;

{import java.lang.Math;}
class ExpressionTreeWalker extends TreeParser;

expr returns [double r]
  { double a,b; r=0; }

  : #(PLUS  a=expr b=expr)  { r=a+b; }
  | #(MINUS a=expr b=expr)  { r=a-b; }
  | #(MUL   a=expr b=expr)  { r=a*b; }
  | #(DIV   a=expr b=expr)  { r=a/b; }
  | #(MOD   a=expr b=expr)  { r=a%b; }
  | #(POW   a=expr b=expr)  { r=Math.pow(a,b); }
  | #(LPAREN a=expr) { r=a;}
  | i:INT { r=(double)Integer.parseInt(i.getText()); }
  ;
    
------ 3. the original grammar from Mill's tutorial (working, but noly
when the input is (2+2)  not 2+2 )

class ExpressionParser extends Parser;
options { buildAST=true; }

expr     : (LPAREN^ sumExpr RPAREN!) ;
sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ;
prodExpr : powExpr ((MUL^|DIV^|MOD^) powExpr)* ;
powExpr  : atom (POW^ atom)? ;
atom     : INT | expr ;

class ExpressionLexer extends Lexer;

LPAREN : '(';
RPAREN : ')';
PLUS  : '+' ;
MINUS : '-' ;
MUL   : '*' ;
DIV   : '/' ;
MOD   : '%' ;
POW   : '^' ;
SEMI  : ';' ;
protected DIGIT : '0'..'9' ;
INT   : (DIGIT)+ ;


{import java.lang.Math;}
class ExpressionTreeWalker extends TreeParser;

expr returns [double r]
  { double a,b; r=0; }

  : #(PLUS  a=expr b=expr)  { r=a+b; }
  | #(MINUS a=expr b=expr)  { r=a-b; }
  | #(MUL   a=expr b=expr)  { r=a*b; }
  | #(DIV   a=expr b=expr)  { r=a/b; }
  | #(MOD   a=expr b=expr)  { r=a%b; }
  | #(POW   a=expr b=expr)  { r=Math.pow(a,b); }
  | #(LPAREN a=expr) { r=a;}
  | i:INT { r=(double)Integer.parseInt(i.getText()); }
  ;
 
---- 4. excerpt from my test program

ExpressionLexer lexer = new ExpressionLexer(new DataInputStream(
new FileInputStream("C:\\antlr\\EXPRINPUT.txt"))); 
ExpressionParser parser = new ExpressionParser(lexer);
    




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From jbb at acm.org  Wed Aug  4 07:49:09 2004
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Solving non determinism
In-Reply-To: <cep0u7+cflr@eGroups.com> (message from xdecoret on Tue, 03 Aug
	2004 21:43:35 +0000)
References: <cep0u7+cflr@eGroups.com>
Message-ID: <E1BsN4n-0008BB-00@gecko>

Greetings!

On Tue, 03 Aug 2004 21:43:35 +0000, xdecoret wrote:
>I cannot solve a non determinism problem with my grammar:
>
>ANTLR Parser Generator   Version 2.7.3   1989-2004 jGuru.com
>foo.g:72: warning:nondeterminism upon
>foo.g:72:     k==1:NAME
>foo.g:72:     k==2:EQUAL
>foo.g:72:     k==3:NAME,STRING,VALUE
>foo.g:72:     k==4:COMA,POUND
>foo.g:72:     k==5:NAME,STRING,VALUE
>foo.g:72:     between alt 1 and exit branch of block
>
>I do not understand why antlr 2.7.3 complains.
>
>I copy the .g file below (this is a parser for bibtex format). Note
>that if I use the commented line for fieldValue productions rule, the
>problem does not show up. 
>
...grammar snipped...

I have four suggested changes for your BibTex grammar. They all relate
to transforming the grammar into LL form, e.g left factoring and
eliminating left recursion.

1) change your fields rule (line 71) from:

fields
    : (field COMA)* field (COMA)?
    ;

to be:

fields
    : field ( COMA ( fields )? )?
    ;

[Note: this change directly addresses the nondeterminism you asked about.
       with this change your nondeterminism is solved, you won't need
       my other suggested changes. but I hope they will be of use to
       you anyway...]

2) change your fieldValue rule (line 81) from:


fieldValue returns [std::string v]
{
    string p;
    string q;
}
    : (p=fieldValuePart POUND {v += p;})* q=fieldValuePart {v += q; }
//     : q=fieldValuePart {v += q; }
    ;

to be:

fieldValue returns [std::string v]
{
    string p;
}
    : p=fieldValuePart {v += p;} (POUND q=fieldValuePart {v += p;})*
    ;

3) left factor your stringdef rule (line 35) by changing it from:

stringdef
{
    string i;
    string s;
}
    : STRINGDEF LPARENTHESIS i=id EQUAL
        {
            braceStartsValue_ = true;
        }
        s=fieldValue RPARENTHESIS
        {
            braceStartsValue_ = false;
        }
    | STRINGDEF LBRACE i=id EQUAL
        {
            braceStartsValue_ = true;
        }
        s=fieldValue RBRACE
        {
            braceStartsValue_ = false;
        }        
    ;

to be:

stringdef
{
    string i;
    string s;
}
    : STRINGDEF
	( LPARENTHESIS i=id EQUAL
	    {
		braceStartsValue_ = true;
	    }
	    s=fieldValue RPARENTHESIS
	    {
		braceStartsValue_ = false;
	    }
	| LBRACE i=id EQUAL
	    {
		braceStartsValue_ = true;
	    }
	    s=fieldValue RBRACE
	    {
		braceStartsValue_ = false;
	    }
	)
    ;

4) lastly remove the "k = 5;" from the parser options, no lookahead is
   needed any more.


Hope this helps...
	John B. Brodie (jbb@acm.org)


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From sk at z.pl  Wed Aug  4 08:55:37 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] 3.0 multiple language support
In-Reply-To: <4110E057.3000604@first.fhg.de>
References: <FD35CB8B26F9534E86D1AC31F401AB340483FC7B@na1fcm52.dearborn.ford.com> <4110D6B6.8060207@softax.pl> <4110E057.3000604@first.fhg.de>
Message-ID: <411106F9.2010007@softax.pl>

Thomas Dudziak wrote:
>>I really don't like this. Actions (esp. predicates) are part of the grammar. 
>>Separating them makes code much harder to read, analyse and maitain, as one 
>>has to jump around the code text.
>>Macros might be a nice idea, but they should be intermixable with the 
>>parser/lexer definition in the same file.
> 
> I find Michaels solution much easier to maintain. Imagine the Java 
> grammar with embedded actions for all supported languages - it will 
> surely be not readable anymore.

I'm not seeing that as unreadable. But spreading code doing particular 
(simple) thing among many places in different files is.
Besides it's easy to filter actions in all but particular language out (if 
syntax is clear, like: {c++: /* rule here */}). There could be even such 
action filter tool acompanying ANTLR distribution.


> Defining labels, e.g. 
> "process_some_rule" is far better IMO.

If someone needs to do some more complicated processing which is logically 
separate one should put that processing into additional function/procedure 
-- this is a prime good coding rule in all general purpose languages. But 
for simple stuff this makes no sense. Simple stuff should be done inline.
And from my experience most of the in-grammar actions are such simple stuff.

The separate actions proposition would for example enforce me to do 
something like that:

NEW_LINE
   : "\n" { process_new_line() }

And then in separate file:
process_new_line()
{
   my_line_count++;
   nextLine();
}


No, thanks... I vote strongly against such a nonsense.


> You can simply add all 
> information as parameters that is required by the action. The net result 
> is that the grammars themselves are target-language-independent 

And in what percentage of uses we need that?


> (remember the newbie asking about a Java version for the SQL grammar ?) 

That newbie still needs actions for the grammar. And it's easier to look at 
the code where (mostly simple one liners) actions are placed together with 
production rules, not in separate files. Like this is one of the advantages 
of most contemporary languages over C & C++ -- no stupid separatre headers 
to declare stuff which will be unrolled in another file.


> and you have the action in a concise form, perhaps in a single class. Or 
> Antlr generates abstract method declarations (for C++/C#/Java) in the 
> parser that the developer has to override in a concrete parser subclass 
> (template and hook).

Sorry, but one of the prime advantages of recursive descent parsing is that 
actions can be precisely placed, and together with generated code combined 
into whole methods.


> There are a few situations where this might seem like overkill

This is overkill in vast majority of situations not just few!


> (e.g. 
> maintaining and using a counter for a ()* subrule that shall be 
> traversed like 20 times), but there might be better ways to handle these 
> situations (e.g. defining syntax for it - say, ()[20] - and letting 
> Antlr work out the details).

And have yet another uncompheresible language loaded with [*&%(|\`@#@$ and 
stuff, i.e. "executable line noise". No, thanks...

rgds
-- 
Sebastian Kaliszewski



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From bujinwang at yahoo.com  Wed Aug  4 08:54:29 2004
From: bujinwang at yahoo.com (bujinwang)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Re: JavaScript grammar file?
In-Reply-To: <3D1F94DB-E5A1-11D8-907E-000A95AF74F0@nextquestion.net>
Message-ID: <cer0rl+m14f@eGroups.com>

Hi Richard,

Although it's not full, I would like to try it out and if possible I 
will complete it. You could send it to my yahoo email:

bujinwang@yahoo.com

Thanks,
Burt

--- In antlr-interest@yahoogroups.com, Richard Clark <rd_clark@s...> 
wrote:
> I have most of a ECMA-262 grammar written (all but the regular 
> expression syntax), which covers JavaScript 1. I'm willing to 
share it, 
> but you have to realize that it's only been tested lightly and I 
cannot 
> offer support on it.
> 
> What were you wanting to do with it?
> 
>   ...Richard
> 
> On Aug 3, 2004, at 13:58, bujinwang wrote:
> 
> > Anyone got a clue where I can find it?
> >
> > Thanks,
> > Burt



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From tomdz at first.gmd.de  Wed Aug  4 09:43:42 2004
From: tomdz at first.gmd.de (Thomas Dudziak)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] 3.0 multiple language support
In-Reply-To: <411106F9.2010007@softax.pl>
References: <FD35CB8B26F9534E86D1AC31F401AB340483FC7B@na1fcm52.dearborn.ford.com> <4110D6B6.8060207@softax.pl> <4110E057.3000604@first.fhg.de> <411106F9.2010007@softax.pl>
Message-ID: <4111123E.5030602@first.fhg.de>

Sebastian Kaliszewski wrote:

>>>I really don't like this. Actions (esp. predicates) are part of the grammar. 
>>>Separating them makes code much harder to read, analyse and maitain, as one 
>>>has to jump around the code text.
>>>Macros might be a nice idea, but they should be intermixable with the 
>>>parser/lexer definition in the same file.
>>
>>I find Michaels solution much easier to maintain. Imagine the Java 
>>grammar with embedded actions for all supported languages - it will 
>>surely be not readable anymore.
> 
> 
> I'm not seeing that as unreadable. But spreading code doing particular 
> (simple) thing among many places in different files is.
> Besides it's easy to filter actions in all but particular language out (if 
> syntax is clear, like: {c++: /* rule here */}). There could be even such 
> action filter tool acompanying ANTLR distribution.

This is the "with the proper tool" argument that was given before.

  >>Defining labels, e.g.
>>"process_some_rule" is far better IMO.
> 
> 
> If someone needs to do some more complicated processing which is logically 
> separate one should put that processing into additional function/procedure 
> -- this is a prime good coding rule in all general purpose languages. But 
> for simple stuff this makes no sense. Simple stuff should be done inline.
> And from my experience most of the in-grammar actions are such simple stuff.
> 
> The separate actions proposition would for example enforce me to do 
> something like that:
> 
> NEW_LINE
>    : "\n" { process_new_line() }
> 
> And then in separate file:
> process_new_line()
> {
>    my_line_count++;
>    nextLine();
> }
> 
> 
> No, thanks... I vote strongly against such a nonsense.

Right, but this is precisely what I was talking about when I said that 
most of these "one-liners" are actually things that are far better 
handled by ANTLR itself. We still have to invoke newline when parsing 
line delimiters which is nothing I would like to have to worry about. 
These are the typical one-liners (newline, set token type etc.) that 
should not have to be in the target language at all (and sometimes 
aren't, already).

>>You can simply add all 
>>information as parameters that is required by the action. The net result 
>>is that the grammars themselves are target-language-independent 
> 
> 
> And in what percentage of uses we need that?

Erm, often ? Thats the point of supporting multiple target languages, or 
not ? Currently every grammar has to be adapted to the various target 
languages which results in different quality because grammar patches for 
one target language have to be ported to other versions even though they 
most of the time have nothing to do with the embedded actions.

>>(remember the newbie asking about a Java version for the SQL grammar ?) 
> 
> 
> That newbie still needs actions for the grammar. And it's easier to look at 
> the code where (mostly simple one liners) actions are placed together with 
> production rules, not in separate files. Like this is one of the advantages 
> of most contemporary languages over C & C++ -- no stupid separatre headers 
> to declare stuff which will be unrolled in another file.

Having to provide a separate file for the action implementation is about 
the only disadvantage of this approach, but I think its providing

>>and you have the action in a concise form, perhaps in a single class. Or 
>>Antlr generates abstract method declarations (for C++/C#/Java) in the 
>>parser that the developer has to override in a concrete parser subclass 
>>(template and hook).
> 
> 
> Sorry, but one of the prime advantages of recursive descent parsing is that 
> actions can be precisely placed, and together with generated code combined 
> into whole methods.

And ? How the weaving is implemented is another matter - it could be 
done via "macro expansion", or via method calls or whatnot.

>>There are a few situations where this might seem like overkill
> 
> 
> This is overkill in vast majority of situations not just few!
> 
> 
> 
>>(e.g. 
>>maintaining and using a counter for a ()* subrule that shall be 
>>traversed like 20 times), but there might be better ways to handle these 
>>situations (e.g. defining syntax for it - say, ()[20] - and letting 
>>Antlr work out the details).
> 
> 
> And have yet another uncompheresible language loaded with [*&%(|\`@#@$ and 
> stuff, i.e. "executable line noise". No, thanks...

Actually, this is used in a quite a few EBNF grammars (and regexp 
stuff). And btw, in comparison to the tree generation stuff, this is 
quite easily understandable even to newbies.

IMO, it would be best to support both strategies ?! And the grammars 
that come with ANTLR, which contain few actions anyway, should be 
language independent.

Tom


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From joanpujol at gmail.com  Wed Aug  4 10:22:20 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] modifying expression grammar ; unexpected token null
In-Reply-To: <cepo1d+2g5v@eGroups.com>
References: <cepo1d+2g5v@eGroups.com>
Message-ID: <d2d18a10408041022767ea07b@mail.gmail.com>

Your grammar works well.
I test it. You have problems in your main program.

This main program is command line and works well:

import java.io.DataInputStream;
import antlr.collections.AST;
import antlr.debug.misc.ASTFrame;

public class Main {
    public static void main(String[] args) {
	try {
	
      ExpressionLexer lexer = new ExpressionLexer(new
DataInputStream(System.in));
      ExpressionParser parser = new ExpressionParser(lexer);
      ExpressionTreeWalker treeparser= new ExpressionTreeWalker();
 
	while(true) {
	parser.expr();
	AST ast=parser.getAST();
	if(ast!=null) {
	  ASTFrame frame = new ASTFrame("calc", ast);
	  frame.setVisible(true);
	  double resultat = treeparser.expr(ast);
	  System.out.println("resultat:" + resultat);
	}
      }
	} catch(Exception e) {
	    System.err.println("exception: "+e);
	}
    }
}

Cheers,

On Wed, 04 Aug 2004 04:17:49 -0000, tjs <tjs_tjs4@yahoo.com> wrote:
> I am trying to modify the Expression grammar given in the
> JS Mill's tutorial (as of this time down;
> http://supportweb.cs.bham.ac.uk/documentation/tuto
> rials/docsystem/build/tutorials/antlr/antlrhome.html)
> 
> I have 1 main goal here:
> To make it so you don't need parantheses around the top expression
> I did this by recrusively defining an expression as the same as in the
> tutorial (fairly straightforward), and instead of
> 
> | expr
> 
> on the atom rule, I used
> 
> | (LPAREN^ expr RPAREN!)
> 
> Which is the way the Java grammars I've look at handle expressions.
> All this grammar does is parse math expressions and enforce
> parantheses (for example, 2+2 outputs 4.0, and (1-3)*4 outputs -8, or
> it SHOULD anyway). Again, I modified the ORIGINAL grammar.
> 
> My PROBLEM is that when I feed it input (in the form of a text file
> that is only 3 characters in length, it gives me the following error:
> 
> line 1:4 unexpected token: null
>  ( + 2 )
> (AST): unexpected end of subtree
> 
> My interpretation of this is that it is trying to read the 4th
> character of the input (which doesn't exist, hence null) and then the
> AST doesn't understand why it can't find the end of the subtree, it
> apparently also thinks it needs another token when it shouldn't. I
> can't figure out why it wants a 4th character or any other problem.
> 
> The following are 1. the input text 2. the grammar 3. the ORIGINAL
> grammar ( which does work properly, but you need to do (2+2) instead
> of 2+2, because it makes you use parantheses around everything ), 4.
> the way in which I load the text file into the lexer
> 
> finally, before you think i am a "Newbie" who doesn't deserve any
> help, i have read 50+ pages of ANTLR documentation, searched
> everything in /docs and this forum, experimented with this grammar for
> over 4 hours, looked at Java grammars to see how they handled
> expressions, and wrote a very crude expression parser that was very
> messy before to graph functions (its messiness is part of the reason i
> am using ANTLR to redo it). i just can't figure out my dumb problem,
> that's all. also, if you help me i'll give you credit in my program
> for correcting my dumb mistakes!
> 
> ------- 1. input text
> 2+2
> 
> (this is only 3 characters, no newlines, or anything else)
> 
> ------- 2. my expression grammar
> 
> class ExpressionParser extends Parser;
> options { buildAST=true; }
> 
> expr     :  sumExpr ;
> sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ;
> prodExpr : powExpr ((MUL^|DIV^|MOD^) powExpr)* ;
> powExpr  : atom (POW^ atom)? ;
> atom     : INT | (LPAREN^ expr RPAREN!) ;
> 
> class ExpressionLexer extends Lexer;
> 
> LPAREN : '(';
> FUNCSIN : 's';
> RPAREN : ')';
> PLUS  : '+' ;
> MINUS : '-' ;
> MUL   : '*' ;
> DIV   : '/' ;
> MOD   : '%' ;
> POW   : '^' ;
> SEMI  : ';' ;
> protected DIGIT : '0'..'9' ;
> INT   : (DIGIT)+ ;
> 
> {import java.lang.Math;}
> class ExpressionTreeWalker extends TreeParser;
> 
> expr returns [double r]
>   { double a,b; r=0; }
> 
>   : #(PLUS  a=expr b=expr)  { r=a+b; }
>   | #(MINUS a=expr b=expr)  { r=a-b; }
>   | #(MUL   a=expr b=expr)  { r=a*b; }
>   | #(DIV   a=expr b=expr)  { r=a/b; }
>   | #(MOD   a=expr b=expr)  { r=a%b; }
>   | #(POW   a=expr b=expr)  { r=Math.pow(a,b); }
>   | #(LPAREN a=expr) { r=a;}
>   | i:INT { r=(double)Integer.parseInt(i.getText()); }
>   ;
> 
> ------ 3. the original grammar from Mill's tutorial (working, but noly
> when the input is (2+2)  not 2+2 )
> 
> class ExpressionParser extends Parser;
> options { buildAST=true; }
> 
> expr     : (LPAREN^ sumExpr RPAREN!) ;
> sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ;
> prodExpr : powExpr ((MUL^|DIV^|MOD^) powExpr)* ;
> powExpr  : atom (POW^ atom)? ;
> atom     : INT | expr ;
> 
> class ExpressionLexer extends Lexer;
> 
> LPAREN : '(';
> RPAREN : ')';
> PLUS  : '+' ;
> MINUS : '-' ;
> MUL   : '*' ;
> DIV   : '/' ;
> MOD   : '%' ;
> POW   : '^' ;
> SEMI  : ';' ;
> protected DIGIT : '0'..'9' ;
> INT   : (DIGIT)+ ;
> 
> {import java.lang.Math;}
> class ExpressionTreeWalker extends TreeParser;
> 
> expr returns [double r]
>   { double a,b; r=0; }
> 
>   : #(PLUS  a=expr b=expr)  { r=a+b; }
>   | #(MINUS a=expr b=expr)  { r=a-b; }
>   | #(MUL   a=expr b=expr)  { r=a*b; }
>   | #(DIV   a=expr b=expr)  { r=a/b; }
>   | #(MOD   a=expr b=expr)  { r=a%b; }
>   | #(POW   a=expr b=expr)  { r=Math.pow(a,b); }
>   | #(LPAREN a=expr) { r=a;}
>   | i:INT { r=(double)Integer.parseInt(i.getText()); }
>   ;
> 
> ---- 4. excerpt from my test program
> 
> ExpressionLexer lexer = new ExpressionLexer(new DataInputStream(
> new FileInputStream("C:\\antlr\\EXPRINPUT.txt")));
> ExpressionParser parser = new ExpressionParser(lexer);
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 


-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From mtiller at ford.com  Wed Aug  4 10:29:35 2004
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] 3.0 multiple language support
Message-ID: <FD35CB8B26F9534E86D1AC31F401AB340483FC7F@na1fcm52.dearborn.ford.com>

I want to clarify one thing.  In the current ANTLR, there already is a
special action language for building trees.  I don't have a problem with
that and I'm not suggesting that *it* be moved into a macro and put in
another file.  My point is this...it is fine to have an action language
that does all the *common* things (e.g. building trees, skipping tokens,
changing token types, etc).  But by externalizing everything that is
more complicated (looping over symbols in a symbol table, working with
specialized data structures, etc) you gain several things:

1) Language independence - The action language should have a clear
mapping to all target languages.  That mapping should include,
conceptually, the ability to do basic things like call functions/methods
in the target languages.

2) Improved readability - Sure you want the ability to put simple things
right there in the rules and you would degrade readability if you moved
those kinds of things.  But when you move more complicated stuff out of
the grammar, I think that is a good thing.

3) Not inventing another general-purpose programming language.

Based on the response to this thread, it seems like different people
would approach this kind of thing in different ways.  So it seems like
the best solution is to be as flexible as possible.  I think a basic
action language could be used to handle most grammar related actions.
For people who need to support multiple languages I think the macro
approach makes sense.  For those who still want language specific
actions in the grammar, I never objected to having that as well.

--
Mike

> -----Original Message-----
> From: Sebastian Kaliszewski [mailto:sk@z.pl]
> Sent: Wednesday, August 04, 2004 11:56 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] 3.0 multiple language support
> 
> Thomas Dudziak wrote:
> >>I really don't like this. Actions (esp. predicates) are part of the
> grammar.
> >>Separating them makes code much harder to read, analyse and maitain,
as
> one
> >>has to jump around the code text.
> >>Macros might be a nice idea, but they should be intermixable with
the
> >>parser/lexer definition in the same file.
> >
> > I find Michaels solution much easier to maintain. Imagine the Java
> > grammar with embedded actions for all supported languages - it will
> > surely be not readable anymore.
> 
> I'm not seeing that as unreadable. But spreading code doing particular
> (simple) thing among many places in different files is.
> Besides it's easy to filter actions in all but particular language out
(if
> syntax is clear, like: {c++: /* rule here */}). There could be even
such
> action filter tool acompanying ANTLR distribution.
> 
> 
> > Defining labels, e.g.
> > "process_some_rule" is far better IMO.
> 
> If someone needs to do some more complicated processing which is
logically
> separate one should put that processing into additional
function/procedure
> -- this is a prime good coding rule in all general purpose languages.
But
> for simple stuff this makes no sense. Simple stuff should be done
inline.
> And from my experience most of the in-grammar actions are such simple
> stuff.
> 
> The separate actions proposition would for example enforce me to do
> something like that:
> 
> NEW_LINE
>    : "\n" { process_new_line() }
> 
> And then in separate file:
> process_new_line()
> {
>    my_line_count++;
>    nextLine();
> }
> 
> 
> No, thanks... I vote strongly against such a nonsense.
> 
> 
> > You can simply add all
> > information as parameters that is required by the action. The net
result
> > is that the grammars themselves are target-language-independent
> 
> And in what percentage of uses we need that?
> 
> 
> > (remember the newbie asking about a Java version for the SQL grammar
?)
> 
> That newbie still needs actions for the grammar. And it's easier to
look
> at
> the code where (mostly simple one liners) actions are placed together
with
> production rules, not in separate files. Like this is one of the
> advantages
> of most contemporary languages over C & C++ -- no stupid separatre
headers
> to declare stuff which will be unrolled in another file.
> 
> 
> > and you have the action in a concise form, perhaps in a single
class. Or
> > Antlr generates abstract method declarations (for C++/C#/Java) in
the
> > parser that the developer has to override in a concrete parser
subclass
> > (template and hook).
> 
> Sorry, but one of the prime advantages of recursive descent parsing is
> that
> actions can be precisely placed, and together with generated code
combined
> into whole methods.
> 
> 
> > There are a few situations where this might seem like overkill
> 
> This is overkill in vast majority of situations not just few!
> 
> 
> > (e.g.
> > maintaining and using a counter for a ()* subrule that shall be
> > traversed like 20 times), but there might be better ways to handle
these
> > situations (e.g. defining syntax for it - say, ()[20] - and letting
> > Antlr work out the details).
> 
> And have yet another uncompheresible language loaded with [*&%(|\`@#@$
and
> stuff, i.e. "executable line noise". No, thanks...
> 
> rgds
> --
> Sebastian Kaliszewski
> 
> 
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From mstudman at gmx.net  Wed Aug  4 12:25:34 2004
From: mstudman at gmx.net (Michael Studman)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Problem with vocabs, inheritance and literals
Message-ID: <000701c47a58$d0f7fbc0$85485651@Baboo>

Hi.

 

I'm working on adapting the Java 1.5 grammar I submitted to antlr.org
for the Checkstyle project. Checkstyle has java 1.3 and 1.4 grammars
where 1.4 lexer/recognizer derives from 1.3 lexer/recognizer; this is
how I've adapted the 1.5 grammar - by deriving from 1.4 and overriding
rules where necessary.

 

The problem I'm having is that the "enum" literal referenced in the 1.5
grammar is not added to the literal map in lexer's generated constructor
and consequently is mistaken by the lexer for an IDENT with value
"enum".

 

I'm pretty sure it's got to do with my flawed understanding of
vocabularies and inheritance so here's a description of the grammars and
vocabs and how they relate to each other:

 

In java.g there is:

class GeneratedJavaRecognizer extends Parser;

 

options {

            exportVocab=GeneratedJava;

.

}

.

 

class GeneratedJavaLexer extends Lexer;

 

options {

            exportVocab=GeneratedJava;

.

}

.

 

In java14.g there is:

 

class GeneratedJava14Recognizer extends GeneratedJavaRecognizer;

 

options {

            exportVocab=GeneratedJava14;

.

}

.

 

class GeneratedJava14Lexer extends GeneratedJavaLexer;

 

options {

            exportVocab=GeneratedJava14;

.

}

.

 

And in java15.g there is:

 

class GeneratedJava15Recognizer extends GeneratedJavar14Recognizer;

 

options {

            exportVocab=GeneratedJava15;

.

}

.

 

class GeneratedJava15Lexer extends GeneratedJava14Lexer;

 

options {

            exportVocab=GeneratedJava15;

.

}

.

 

 

This causes the GeneratedJava15TokenTypes.txt and the
GeneratedJava15TokenTypes.java both to have a LITERAL_enum entry but, as
I said the GeneratedJava15Lexer constructor doesn't register this as a
literal.

 

If I change the GeneratedJava15Lexer's definition to:

 

class GeneratedJava15Lexer extends GeneratedJava14Lexer;

 

options {

            importVocab=GeneratedJava15;

.

}

.

 

the problem goes away (the lexer registers the literal) but this seems
counter intuitive to my understanding of how vocabs work within files
and through inheritance. Incidentally, this change also causes a
GenerateJava15LexerTokenTypes.txt/.java file to be created - presumably
because the export vocab of the lexer defaults to its own name.

 

Any advice is appreciated.

 

Regards,

Michael.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040804/a3d7b3c8/attachment.html
From joanpujol at gmail.com  Wed Aug  4 13:26:19 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Nondeterminism and syntantic/semantic predicates info
Message-ID: <d2d18a104080413263b26c6b9@mail.gmail.com>

Yesterday I post a message named Help with non determinism and
syntactic, semantic predicates.
Today I have been battling quite a lot with the grammar, reading the
-diagnostic description and I think that with the syntactic and
semantic predicates the grammar is not ambiguous.

I have been reading documentation, and I haven't found anything about
how ANTLR decide if a rule is ambiguous or not when you use syntactic
and semantic predicates.
Is somewhere some information about this?
And it is possible that ANTLR is not enough intelligent and give me
nondeterminism warnings when the gramar is well determined?

A lot of thanks in advance.

-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From bharath at starthis.com  Wed Aug  4 14:16:09 2004
From: bharath at starthis.com (Bharath Sundararaman)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Parse tree problem.
In-Reply-To: <FD35CB8B26F9534E86D1AC31F401AB340483FC7F@na1fcm52.dearborn.ford.com>
Message-ID: <000401c47a68$43b688c0$03020a0a@starthis.com>

Hi all,

class TinyCParser extends Parser("ParseTreeDebugParser"); or
Parser("antlr.ParseTreeDebugParser"); or even Parser(ParseTreeDebugParser);
--> gives me an error saying "SEMICOLON expected after Parser". Anybody else
came across this problem? I use ANTLR 2.7.3, by the way and I am following
the tutorial on http://www.antlr.org about parse trees.

Thanks!

Bharath.

-----Original Message-----
From: Tiller, Michael (M.M.) [mailto:mtiller@ford.com] 
Sent: Wednesday, August 04, 2004 12:30 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] 3.0 multiple language support


I want to clarify one thing.  In the current ANTLR, there already is a
special action language for building trees.  I don't have a problem with
that and I'm not suggesting that *it* be moved into a macro and put in
another file.  My point is this...it is fine to have an action language that
does all the *common* things (e.g. building trees, skipping tokens, changing
token types, etc).  But by externalizing everything that is more complicated
(looping over symbols in a symbol table, working with specialized data
structures, etc) you gain several things:

1) Language independence - The action language should have a clear mapping
to all target languages.  That mapping should include, conceptually, the
ability to do basic things like call functions/methods in the target
languages.

2) Improved readability - Sure you want the ability to put simple things
right there in the rules and you would degrade readability if you moved
those kinds of things.  But when you move more complicated stuff out of the
grammar, I think that is a good thing.

3) Not inventing another general-purpose programming language.

Based on the response to this thread, it seems like different people would
approach this kind of thing in different ways.  So it seems like the best
solution is to be as flexible as possible.  I think a basic action language
could be used to handle most grammar related actions. For people who need to
support multiple languages I think the macro approach makes sense.  For
those who still want language specific actions in the grammar, I never
objected to having that as well.

--
Mike

> -----Original Message-----
> From: Sebastian Kaliszewski [mailto:sk@z.pl]
> Sent: Wednesday, August 04, 2004 11:56 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] 3.0 multiple language support
> 
> Thomas Dudziak wrote:
> >>I really don't like this. Actions (esp. predicates) are part of the
> grammar.
> >>Separating them makes code much harder to read, analyse and maitain,
as
> one
> >>has to jump around the code text.
> >>Macros might be a nice idea, but they should be intermixable with
the
> >>parser/lexer definition in the same file.
> >
> > I find Michaels solution much easier to maintain. Imagine the Java 
> > grammar with embedded actions for all supported languages - it will 
> > surely be not readable anymore.
> 
> I'm not seeing that as unreadable. But spreading code doing particular
> (simple) thing among many places in different files is. Besides it's 
> easy to filter actions in all but particular language out
(if
> syntax is clear, like: {c++: /* rule here */}). There could be even
such
> action filter tool acompanying ANTLR distribution.
> 
> 
> > Defining labels, e.g.
> > "process_some_rule" is far better IMO.
> 
> If someone needs to do some more complicated processing which is
logically
> separate one should put that processing into additional
function/procedure
> -- this is a prime good coding rule in all general purpose languages.
But
> for simple stuff this makes no sense. Simple stuff should be done
inline.
> And from my experience most of the in-grammar actions are such simple 
> stuff.
> 
> The separate actions proposition would for example enforce me to do 
> something like that:
> 
> NEW_LINE
>    : "\n" { process_new_line() }
> 
> And then in separate file:
> process_new_line()
> {
>    my_line_count++;
>    nextLine();
> }
> 
> 
> No, thanks... I vote strongly against such a nonsense.
> 
> 
> > You can simply add all
> > information as parameters that is required by the action. The net
result
> > is that the grammars themselves are target-language-independent
> 
> And in what percentage of uses we need that?
> 
> 
> > (remember the newbie asking about a Java version for the SQL grammar
?)
> 
> That newbie still needs actions for the grammar. And it's easier to
look
> at
> the code where (mostly simple one liners) actions are placed together
with
> production rules, not in separate files. Like this is one of the 
> advantages of most contemporary languages over C & C++ -- no stupid 
> separatre
headers
> to declare stuff which will be unrolled in another file.
> 
> 
> > and you have the action in a concise form, perhaps in a single
class. Or
> > Antlr generates abstract method declarations (for C++/C#/Java) in
the
> > parser that the developer has to override in a concrete parser
subclass
> > (template and hook).
> 
> Sorry, but one of the prime advantages of recursive descent parsing is 
> that actions can be precisely placed, and together with generated code
combined
> into whole methods.
> 
> 
> > There are a few situations where this might seem like overkill
> 
> This is overkill in vast majority of situations not just few!
> 
> 
> > (e.g.
> > maintaining and using a counter for a ()* subrule that shall be 
> > traversed like 20 times), but there might be better ways to handle
these
> > situations (e.g. defining syntax for it - say, ()[20] - and letting 
> > Antlr work out the details).
> 
> And have yet another uncompheresible language loaded with [*&%(|\`@#@$
and
> stuff, i.e. "executable line noise". No, thanks...
> 
> rgds
> --
> Sebastian Kaliszewski
> 
> 
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 



 
Yahoo! Groups Links



 




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From joanpujol at gmail.com  Wed Aug  4 14:23:13 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Parse tree problem.
In-Reply-To: <000401c47a68$43b688c0$03020a0a@starthis.com>
References: <000401c47a68$43b688c0$03020a0a@starthis.com>
Message-ID: <d2d18a104080414234a942506@mail.gmail.com>

Use this:
class ParserName extends Parser("antlr.debug.ParseTreeDebugParser");

You missed the debug word in the packet name.

Cheers,

On Wed, 4 Aug 2004 16:16:09 -0500, Bharath Sundararaman
<bharath@starthis.com> wrote:
> Hi all,
> 
> class TinyCParser extends Parser("ParseTreeDebugParser"); or
> Parser("antlr.ParseTreeDebugParser"); or even Parser(ParseTreeDebugParser);
> --> gives me an error saying "SEMICOLON expected after Parser". Anybody else
> came across this problem? I use ANTLR 2.7.3, by the way and I am following
> the tutorial on http://www.antlr.org about parse trees.
> 
> Thanks!
> 
> Bharath.
> 
> -----Original Message-----
> From: Tiller, Michael (M.M.) [mailto:mtiller@ford.com]
> Sent: Wednesday, August 04, 2004 12:30 PM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] 3.0 multiple language support
> 
> I want to clarify one thing.  In the current ANTLR, there already is a
> special action language for building trees.  I don't have a problem with
> that and I'm not suggesting that *it* be moved into a macro and put in
> another file.  My point is this...it is fine to have an action language that
> does all the *common* things (e.g. building trees, skipping tokens, changing
> token types, etc).  But by externalizing everything that is more complicated
> (looping over symbols in a symbol table, working with specialized data
> structures, etc) you gain several things:
> 
> 1) Language independence - The action language should have a clear mapping
> to all target languages.  That mapping should include, conceptually, the
> ability to do basic things like call functions/methods in the target
> languages.
> 
> 2) Improved readability - Sure you want the ability to put simple things
> right there in the rules and you would degrade readability if you moved
> those kinds of things.  But when you move more complicated stuff out of the
> grammar, I think that is a good thing.
> 
> 3) Not inventing another general-purpose programming language.
> 
> Based on the response to this thread, it seems like different people would
> approach this kind of thing in different ways.  So it seems like the best
> solution is to be as flexible as possible.  I think a basic action language
> could be used to handle most grammar related actions. For people who need to
> support multiple languages I think the macro approach makes sense.  For
> those who still want language specific actions in the grammar, I never
> objected to having that as well.
> 
> --
> Mike
> 
> > -----Original Message-----
> > From: Sebastian Kaliszewski [mailto:sk@z.pl]
> > Sent: Wednesday, August 04, 2004 11:56 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: Re: [antlr-interest] 3.0 multiple language support
> >
> > Thomas Dudziak wrote:
> > >>I really don't like this. Actions (esp. predicates) are part of the
> > grammar.
> > >>Separating them makes code much harder to read, analyse and maitain,
> as
> > one
> > >>has to jump around the code text.
> > >>Macros might be a nice idea, but they should be intermixable with
> the
> > >>parser/lexer definition in the same file.
> > >
> > > I find Michaels solution much easier to maintain. Imagine the Java
> > > grammar with embedded actions for all supported languages - it will
> > > surely be not readable anymore.
> >
> > I'm not seeing that as unreadable. But spreading code doing particular
> > (simple) thing among many places in different files is. Besides it's
> > easy to filter actions in all but particular language out
> (if
> > syntax is clear, like: {c++: /* rule here */}). There could be even
> such
> > action filter tool acompanying ANTLR distribution.
> >
> >
> > > Defining labels, e.g.
> > > "process_some_rule" is far better IMO.
> >
> > If someone needs to do some more complicated processing which is
> logically
> > separate one should put that processing into additional
> function/procedure
> > -- this is a prime good coding rule in all general purpose languages.
> But
> > for simple stuff this makes no sense. Simple stuff should be done
> inline.
> > And from my experience most of the in-grammar actions are such simple
> > stuff.
> >
> > The separate actions proposition would for example enforce me to do
> > something like that:
> >
> > NEW_LINE
> >    : "\n" { process_new_line() }
> >
> > And then in separate file:
> > process_new_line()
> > {
> >    my_line_count++;
> >    nextLine();
> > }
> >
> >
> > No, thanks... I vote strongly against such a nonsense.
> >
> >
> > > You can simply add all
> > > information as parameters that is required by the action. The net
> result
> > > is that the grammars themselves are target-language-independent
> >
> > And in what percentage of uses we need that?
> >
> >
> > > (remember the newbie asking about a Java version for the SQL grammar
> ?)
> >
> > That newbie still needs actions for the grammar. And it's easier to
> look
> > at
> > the code where (mostly simple one liners) actions are placed together
> with
> > production rules, not in separate files. Like this is one of the
> > advantages of most contemporary languages over C & C++ -- no stupid
> > separatre
> headers
> > to declare stuff which will be unrolled in another file.
> >
> >
> > > and you have the action in a concise form, perhaps in a single
> class. Or
> > > Antlr generates abstract method declarations (for C++/C#/Java) in
> the
> > > parser that the developer has to override in a concrete parser
> subclass
> > > (template and hook).
> >
> > Sorry, but one of the prime advantages of recursive descent parsing is
> > that actions can be precisely placed, and together with generated code
> combined
> > into whole methods.
> >
> >
> > > There are a few situations where this might seem like overkill
> >
> > This is overkill in vast majority of situations not just few!
> >
> >
> > > (e.g.
> > > maintaining and using a counter for a ()* subrule that shall be
> > > traversed like 20 times), but there might be better ways to handle
> these
> > > situations (e.g. defining syntax for it - say, ()[20] - and letting
> > > Antlr work out the details).
> >
> > And have yet another uncompheresible language loaded with [*&%(|\`@#@$
> and
> > stuff, i.e. "executable line noise". No, thanks...
> >
> > rgds
> > --
> > Sebastian Kaliszewski
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> 
> 
> Yahoo! Groups Links
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 


-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rd_clark at sbcglobal.net  Wed Aug  4 14:23:31 2004
From: rd_clark at sbcglobal.net (Richard Clark)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] ANTLR 2.x or 3 feature request re: input buffers (source available)
Message-ID: <891346B6-E65C-11D8-BA68-000A95AF74F0@nextquestion.net>

I've been working on an Eclipse editor based on ANTLR and would like to 
request a small change in how the Lexer gets its input.

At the moment, there's an abstract InputBuffer class that is subclassed 
by CharBuffer and ByteBuffer. InputBuffer's design assumes it's getting 
input from a sequential device (via the fill command) and puts the 
result into a queue to allow limited backtracking.

However, if I'm building an editor, I already have a big fat juicy 
character buffer in memory -- it's awkward and inefficient to have to 
emulate a character-at-a-time sequential device just to feed 
InputBuffer.

So here's my request:
1) Refactor InputBuffer to use an abstracted "character source" 
interface and move the queue management stuff into a subclass.
2) Refactor CharQueue to use the new character source interface
2) Make CharBuffer and ByteBuffer subclasses of the queue-managing 
buffer.

This allows those of us who already have big buffers in memory to give 
the lexer direct read access to the buffer through a simple shim. This 
simplifies the code, saves memory, and eliminates a possible coherency 
issue.

I've already modified a private copy to do all this and would be happy 
to contribute the code back. My modified version defines an 
ICharacterSource interface w/ elementAt(idx) and length(), pushes the 
sequential-input assumption down to QueuedInputBuffer, and includes an 
example ConstantStringInputBuffer that can be fed a string when 
instantiated (which also simplifies unit testing. :))

  Any takers?

  ...Richard


  



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From kaffiene at xtra.co.nz  Wed Aug  4 14:36:58 2004
From: kaffiene at xtra.co.nz (Peter Ashford)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Please help a newbie!
In-Reply-To: <41106D62.5010204@xtra.co.nz>
References: <410EF023.3000903@xtra.co.nz> <B835DF26-E55F-11D8-8B04-000A95AF74F0@nextquestion.net> <41100121.6040206@xtra.co.nz> <EFEB4DDD-E594-11D8-8990-000A95AF74F0@nextquestion.net> <41100C80.3010905@xtra.co.nz> <980DEE24-E5A1-11D8-907E-000A95AF74F0@nextquestion.net> <411058BC.8000206@xtra.co.nz> <00771A7E-E5C9-11D8-907E-000A95AF74F0@nextquestion.net> <41106D62.5010204@xtra.co.nz>
Message-ID: <411156FA.3050002@xtra.co.nz>

Peter Ashford wrote:

>Richard Clark wrote:
>
>  
>
>>Some of this just takes a Zen approach: becoming one with the 
>>documentation. Try adding # in front of the var names in the action 
>>(and look at the generated code to see what ANTLR does with it.)
>>
>>
>>assign
>> { float f; }
>>         : i:ID EQ f=f_expr                 { assignTo(#i->getText(), 
>>#f); }
>>         ;
>>
>> ...R
>>
>> 
>>
>>    
>>
>
>I appologise for being a pain - but adding the hash just makes the code 
>not compile because MSVC .NET thinks it's a preprocessor command.
>
>I have been stepping through the generated code and what I find is the 
>parser skipping over all of the possiblities (keywords, comments etc) 
>and throwing the no valid alternative exception rather than scanning as 
>an identifier
>
>
> 
>

I've got it!  The problem was my alpha class - I had

    protected
    ALPHA  : ('a'..'z'  'A'..'Z');

I should have had:

    protected
    ALPHA  : ('a'..'z' | 'A'..'Z');

And so identifiers ( ALPHA (ALPHA | DIGIT)*; ) weren't being matched 
because they didn't match the incorrect ALPHA pattern.

Richard - thanks very much for your help tracking this problem down.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From bharath at starthis.com  Wed Aug  4 14:50:15 2004
From: bharath at starthis.com (Bharath Sundararaman)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Parse tree problem.
In-Reply-To: <d2d18a104080414234a942506@mail.gmail.com>
Message-ID: <000401c47a6d$06dfa300$03020a0a@starthis.com>

Sorry Joan, it was a typo in my email. I did try "antlr.debug.." and I got
the same error.

Thanks for your reply, though.

Bharath.

-----Original Message-----
From: Joan Pujol [mailto:joanpujol@gmail.com] 
Sent: Wednesday, August 04, 2004 4:23 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Parse tree problem.


Use this:
class ParserName extends Parser("antlr.debug.ParseTreeDebugParser");

You missed the debug word in the packet name.

Cheers,

On Wed, 4 Aug 2004 16:16:09 -0500, Bharath Sundararaman
<bharath@starthis.com> wrote:
> Hi all,
> 
> class TinyCParser extends Parser("ParseTreeDebugParser"); or 
> Parser("antlr.ParseTreeDebugParser"); or even 
> Parser(ParseTreeDebugParser);
> --> gives me an error saying "SEMICOLON expected after Parser". 
> --> Anybody else
> came across this problem? I use ANTLR 2.7.3, by the way and I am 
> following the tutorial on http://www.antlr.org about parse trees.
> 
> Thanks!
> 
> Bharath.
> 
> -----Original Message-----
> From: Tiller, Michael (M.M.) [mailto:mtiller@ford.com]
> Sent: Wednesday, August 04, 2004 12:30 PM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] 3.0 multiple language support
> 
> I want to clarify one thing.  In the current ANTLR, there already is a 
> special action language for building trees.  I don't have a problem 
> with that and I'm not suggesting that *it* be moved into a macro and 
> put in another file.  My point is this...it is fine to have an action 
> language that does all the *common* things (e.g. building trees, 
> skipping tokens, changing token types, etc).  But by externalizing 
> everything that is more complicated (looping over symbols in a symbol 
> table, working with specialized data structures, etc) you gain several 
> things:
> 
> 1) Language independence - The action language should have a clear 
> mapping to all target languages.  That mapping should include, 
> conceptually, the ability to do basic things like call 
> functions/methods in the target languages.
> 
> 2) Improved readability - Sure you want the ability to put simple 
> things right there in the rules and you would degrade readability if 
> you moved those kinds of things.  But when you move more complicated 
> stuff out of the grammar, I think that is a good thing.
> 
> 3) Not inventing another general-purpose programming language.
> 
> Based on the response to this thread, it seems like different people 
> would approach this kind of thing in different ways.  So it seems like 
> the best solution is to be as flexible as possible.  I think a basic 
> action language could be used to handle most grammar related actions. 
> For people who need to support multiple languages I think the macro 
> approach makes sense.  For those who still want language specific 
> actions in the grammar, I never objected to having that as well.
> 
> --
> Mike
> 
> > -----Original Message-----
> > From: Sebastian Kaliszewski [mailto:sk@z.pl]
> > Sent: Wednesday, August 04, 2004 11:56 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: Re: [antlr-interest] 3.0 multiple language support
> >
> > Thomas Dudziak wrote:
> > >>I really don't like this. Actions (esp. predicates) are part of 
> > >>the
> > grammar.
> > >>Separating them makes code much harder to read, analyse and 
> > >>maitain,
> as
> > one
> > >>has to jump around the code text.
> > >>Macros might be a nice idea, but they should be intermixable with
> the
> > >>parser/lexer definition in the same file.
> > >
> > > I find Michaels solution much easier to maintain. Imagine the Java 
> > > grammar with embedded actions for all supported languages - it 
> > > will surely be not readable anymore.
> >
> > I'm not seeing that as unreadable. But spreading code doing 
> > particular
> > (simple) thing among many places in different files is. Besides it's
> > easy to filter actions in all but particular language out
> (if
> > syntax is clear, like: {c++: /* rule here */}). There could be even
> such
> > action filter tool acompanying ANTLR distribution.
> >
> >
> > > Defining labels, e.g.
> > > "process_some_rule" is far better IMO.
> >
> > If someone needs to do some more complicated processing which is
> logically
> > separate one should put that processing into additional
> function/procedure
> > -- this is a prime good coding rule in all general purpose 
> > languages.
> But
> > for simple stuff this makes no sense. Simple stuff should be done
> inline.
> > And from my experience most of the in-grammar actions are such 
> > simple stuff.
> >
> > The separate actions proposition would for example enforce me to do 
> > something like that:
> >
> > NEW_LINE
> >    : "\n" { process_new_line() }
> >
> > And then in separate file:
> > process_new_line()
> > {
> >    my_line_count++;
> >    nextLine();
> > }
> >
> >
> > No, thanks... I vote strongly against such a nonsense.
> >
> >
> > > You can simply add all
> > > information as parameters that is required by the action. The net
> result
> > > is that the grammars themselves are target-language-independent
> >
> > And in what percentage of uses we need that?
> >
> >
> > > (remember the newbie asking about a Java version for the SQL 
> > > grammar
> ?)
> >
> > That newbie still needs actions for the grammar. And it's easier to
> look
> > at
> > the code where (mostly simple one liners) actions are placed 
> > together
> with
> > production rules, not in separate files. Like this is one of the 
> > advantages of most contemporary languages over C & C++ -- no stupid 
> > separatre
> headers
> > to declare stuff which will be unrolled in another file.
> >
> >
> > > and you have the action in a concise form, perhaps in a single
> class. Or
> > > Antlr generates abstract method declarations (for C++/C#/Java) in
> the
> > > parser that the developer has to override in a concrete parser
> subclass
> > > (template and hook).
> >
> > Sorry, but one of the prime advantages of recursive descent parsing 
> > is that actions can be precisely placed, and together with generated 
> > code
> combined
> > into whole methods.
> >
> >
> > > There are a few situations where this might seem like overkill
> >
> > This is overkill in vast majority of situations not just few!
> >
> >
> > > (e.g.
> > > maintaining and using a counter for a ()* subrule that shall be 
> > > traversed like 20 times), but there might be better ways to handle
> these
> > > situations (e.g. defining syntax for it - say, ()[20] - and 
> > > letting Antlr work out the details).
> >
> > And have yet another uncompheresible language loaded with 
> > [*&%(|\`@#@$
> and
> > stuff, i.e. "executable line noise". No, thanks...
> >
> > rgds
> > --
> > Sebastian Kaliszewski
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> 
> 
> Yahoo! Groups Links
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 


-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links



 




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Wed Aug  4 15:02:01 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] ANTLR 2.x or 3 feature request re: input buffers (source available)
In-Reply-To: <891346B6-E65C-11D8-BA68-000A95AF74F0@nextquestion.net>
References: <891346B6-E65C-11D8-BA68-000A95AF74F0@nextquestion.net>
Message-ID: <E9FE4916-E661-11D8-A2DD-000A95891192@cs.usfca.edu>


On Aug 4, 2004, at 2:23 PM, Richard Clark wrote:

> I've been working on an Eclipse editor based on ANTLR and would like to
> request a small change in how the Lexer gets its input.
>
> At the moment, there's an abstract InputBuffer class that is subclassed
> by CharBuffer and ByteBuffer. InputBuffer's design assumes it's getting
> input from a sequential device (via the fill command) and puts the
> result into a queue to allow limited backtracking.
>
> However, if I'm building an editor, I already have a big fat juicy
> character buffer in memory -- it's awkward and inefficient to have to
> emulate a character-at-a-time sequential device just to feed
> InputBuffer.

The new ANTLR 3.0 mechanism will make exactly this assumption.  
Sequential devices will be the "poor cousin" this time. ;)  With 
memory-mapped I/O and such, this is a good assumption especially with 
systems that have 1G ram ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!
Cofounder, http://www.peerscope.com pure link sharing





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From bharath at starthis.com  Wed Aug  4 15:10:34 2004
From: bharath at starthis.com (Bharath Sundararaman)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Bunch of debug issues.
In-Reply-To: <1091243316.21782.4.camel@workstation.mn.mtu.net>
Message-ID: <000201c47a6f$dd8f4890$03020a0a@starthis.com>

Hi all,

I already posted one of the problems I came across when I attempted to debug
my grammar. Here's some more. If I get answers to either of these, life
would be much easier :). Yes I did STFW and the antlr_interest message
archive.

1) Class xyz extends extends Parser("antlr.debug.ParseTreeDebugParser");
gives an error "expecting SEMI found '("antlr.debug.ParseTreeDebugParser")'
2) When I compile my grammar with -traceTreeWalker option, (ANT task with
traceTreeWalker = "yes") I get an error saying "traceTreeParser" command is
invalid.
3) I downloaded parseview.zip and copied the two folders parseview, debug
onto antlr installation. I compiled the grammar with -debug option (ANT
task: debug="yes") and it did not bring up the applet.

Any answers will be greatly appreciated.

Thanks much,

Bharath.
'For the love of debugging!'.

-----Original Message-----
From: Jon Schewe [mailto:jpschewe@mtu.net] 
Sent: Friday, July 30, 2004 10:09 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] I am planning to write a beautifier for
Java(jaboby..)


On Fri, 2004-07-30 at 09:50, thirumalaikv wrote:
> Hi
> I am planning to write a beautifier for Java, which will 
> automatically beautify the code based on certain rules. I have 

Any particular reason the ones that currently exist don't fit your needs?
You might be better off enhancing an existing one, rather than starting from
scratch.

> 1. I want Special Tokens(spaces, comments, javadocs,...) part of the
> Token 

You'll probably want to have two Parsers here, one for the Java code and one
for the Javadoc comments.

> 2. I would like to know how to add/remove tokens/nodes of AST/Token.

I seem to remember this is in the tree construction documentation for antlr,
but could be mistaken.

> 3. Java 1.3.1 grammar

One can be found on the antlr website, although it tosses comments, which is
why I suggested two parsers in 1.
 
-- 
Jon Schewe | http://mtu.net/~jpschewe
GPG signature at http://mtu.net/~jpschewe/gpg.sig.html
For I am convinced that neither death nor life, neither angels 
nor demons, neither the present nor the future, nor any 
powers, neither height nor depth, nor anything else in all 
creation, will be able to separate us from the love of God that 
is in Christ Jesus our Lord. - Romans 8:38-39




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Wed Aug  4 15:38:37 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:08 2004
Subject: [antlr-interest] Nondeterminism and syntantic/semantic predicates info
In-Reply-To: <d2d18a104080413263b26c6b9@mail.gmail.com>
References: <d2d18a104080413263b26c6b9@mail.gmail.com>
Message-ID: <068B9C3D-E667-11D8-8B1E-000393B5606C@codetransform.com>

On Aug 4, 2004, at 1:26 PM, Joan Pujol wrote:

> And it is possible that ANTLR is not enough intelligent and give me
> nondeterminism warnings when the gramar is well determined?

Some nondeterminisms are acceptable, for instance the if/else 
ambiguity.  It truly is non-deterministic.  However, the code that 
ANTLR generates handles it the way you would expect.  Being 
nondeterministic means that ANTLR can't predict which alternative to 
choose because of overlapping lookahead sets.

You could give Ter's PhD Thesis a read (on antlr.org,) it sure gives a 
lot of detail on lookahead computations.

Inspecting the code is the best bet.  If you can tell that it will do 
the right thing then you can ignore the warning.

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From kaffiene at xtra.co.nz  Wed Aug  4 17:39:41 2004
From: kaffiene at xtra.co.nz (Peter Ashford)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Expressions
Message-ID: <411181CD.9030505@xtra.co.nz>

Whats the recommended way to handle expressions when you can have 
several different kinds of expression (I'm wanting float, string and 
boolean expressions)?

TIA


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From tjs_tjs4 at yahoo.com  Wed Aug  4 21:18:14 2004
From: tjs_tjs4 at yahoo.com (tjs)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: modifying expression grammar ; unexpected token null
In-Reply-To: <cepo1d+2g5v@eGroups.com>
Message-ID: <cesce6+uofa@eGroups.com>

I still get a null token error
I tried to redefine the grammar like this, using only sumExpr as the
root, but it still seems to try to read more input than it is given:

class ExpressionParser extends Parser;
options { buildAST=true; }

//expr     : (LPAREN^ sumExpr RPAREN!) ;
sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ;
prodExpr : powExpr ((MUL^|DIV^|MOD^) powExpr)* ;
powExpr  : atom (POW^ atom)? ;
atom     : (LPAREN^ sumExpr RPAREN!) | INT;

class ExpressionLexer extends Lexer;

LPAREN : '(';
RPAREN : ')';
PLUS  : '+' ;
MINUS : '-' ;
MUL   : '*' ;
DIV   : '/' ;
MOD   : '%' ;
POW   : '^' ;
SEMI  : ';' ;
protected DIGIT : '0'..'9' ;
INT   : (DIGIT)+ ;


{import java.lang.Math;}
class ExpressionTreeWalker extends TreeParser;

sumExpr returns [double r]
  { double a,b; r=0; }

  : #(PLUS  a=sumExpr b=sumExpr)  { r=a+b; }
  | #(MINUS a=sumExpr b=sumExpr)  { r=a-b; }
  | #(MUL   a=sumExpr b=sumExpr)  { r=a*b; }
  | #(DIV   a=sumExpr b=sumExpr)  { r=a/b; }
  | #(MOD   a=sumExpr b=sumExpr)  { r=a%b; }
  | #(POW   a=sumExpr b=sumExpr)  { r=Math.pow(a,b); }
  | #(LPAREN a=sumExpr) { r=a;}
  | i:INT { r=(double)Integer.parseInt(i.getText()); }
  ;
    




--- In antlr-interest@yahoogroups.com, "tjs" <tjs_tjs4@y...> wrote:
> I am trying to modify the Expression grammar given in the 
> JS Mill's tutorial (as of this time down;
> http://supportweb.cs.bham.ac.uk/documentation/tuto
> rials/docsystem/build/tutorials/antlr/antlrhome.html)
> 
> I have 1 main goal here:
> To make it so you don't need parantheses around the top expression
> I did this by recrusively defining an expression as the same as in the
> tutorial (fairly straightforward), and instead of
> 
> | expr
> 
> on the atom rule, I used
> 
> | (LPAREN^ expr RPAREN!) 
> 
> Which is the way the Java grammars I've look at handle expressions.
> All this grammar does is parse math expressions and enforce
> parantheses (for example, 2+2 outputs 4.0, and (1-3)*4 outputs -8, or
> it SHOULD anyway). Again, I modified the ORIGINAL grammar.
> 
> My PROBLEM is that when I feed it input (in the form of a text file
> that is only 3 characters in length, it gives me the following error:
> 
> line 1:4 unexpected token: null
>  ( + 2 )
> (AST): unexpected end of subtree
> 
> My interpretation of this is that it is trying to read the 4th
> character of the input (which doesn't exist, hence null) and then the
> AST doesn't understand why it can't find the end of the subtree, it
> apparently also thinks it needs another token when it shouldn't. I
> can't figure out why it wants a 4th character or any other problem.
> 
> The following are 1. the input text 2. the grammar 3. the ORIGINAL
> grammar ( which does work properly, but you need to do (2+2) instead
> of 2+2, because it makes you use parantheses around everything ), 4.
> the way in which I load the text file into the lexer
> 
> finally, before you think i am a "Newbie" who doesn't deserve any
> help, i have read 50+ pages of ANTLR documentation, searched
> everything in /docs and this forum, experimented with this grammar for
> over 4 hours, looked at Java grammars to see how they handled
> expressions, and wrote a very crude expression parser that was very
> messy before to graph functions (its messiness is part of the reason i
> am using ANTLR to redo it). i just can't figure out my dumb problem,
> that's all. also, if you help me i'll give you credit in my program
> for correcting my dumb mistakes!
> 
> ------- 1. input text
> 2+2
> 
> (this is only 3 characters, no newlines, or anything else)
> 
> ------- 2. my expression grammar
> 
> class ExpressionParser extends Parser;
> options { buildAST=true; }
> 
> expr     :  sumExpr ;
> sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ;
> prodExpr : powExpr ((MUL^|DIV^|MOD^) powExpr)* ;
> powExpr  : atom (POW^ atom)? ;
> atom     : INT | (LPAREN^ expr RPAREN!) ;
> 
> class ExpressionLexer extends Lexer;
> 
> LPAREN : '(';
> FUNCSIN : 's';
> RPAREN : ')';
> PLUS  : '+' ;
> MINUS : '-' ;
> MUL   : '*' ;
> DIV   : '/' ;
> MOD   : '%' ;
> POW   : '^' ;
> SEMI  : ';' ;
> protected DIGIT : '0'..'9' ;
> INT   : (DIGIT)+ ;
> 
> {import java.lang.Math;}
> class ExpressionTreeWalker extends TreeParser;
> 
> expr returns [double r]
>   { double a,b; r=0; }
> 
>   : #(PLUS  a=expr b=expr)  { r=a+b; }
>   | #(MINUS a=expr b=expr)  { r=a-b; }
>   | #(MUL   a=expr b=expr)  { r=a*b; }
>   | #(DIV   a=expr b=expr)  { r=a/b; }
>   | #(MOD   a=expr b=expr)  { r=a%b; }
>   | #(POW   a=expr b=expr)  { r=Math.pow(a,b); }
>   | #(LPAREN a=expr) { r=a;}
>   | i:INT { r=(double)Integer.parseInt(i.getText()); }
>   ;
>     
> ------ 3. the original grammar from Mill's tutorial (working, but noly
> when the input is (2+2)  not 2+2 )
> 
> class ExpressionParser extends Parser;
> options { buildAST=true; }
> 
> expr     : (LPAREN^ sumExpr RPAREN!) ;
> sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ;
> prodExpr : powExpr ((MUL^|DIV^|MOD^) powExpr)* ;
> powExpr  : atom (POW^ atom)? ;
> atom     : INT | expr ;
> 
> class ExpressionLexer extends Lexer;
> 
> LPAREN : '(';
> RPAREN : ')';
> PLUS  : '+' ;
> MINUS : '-' ;
> MUL   : '*' ;
> DIV   : '/' ;
> MOD   : '%' ;
> POW   : '^' ;
> SEMI  : ';' ;
> protected DIGIT : '0'..'9' ;
> INT   : (DIGIT)+ ;
> 
> 
> {import java.lang.Math;}
> class ExpressionTreeWalker extends TreeParser;
> 
> expr returns [double r]
>   { double a,b; r=0; }
> 
>   : #(PLUS  a=expr b=expr)  { r=a+b; }
>   | #(MINUS a=expr b=expr)  { r=a-b; }
>   | #(MUL   a=expr b=expr)  { r=a*b; }
>   | #(DIV   a=expr b=expr)  { r=a/b; }
>   | #(MOD   a=expr b=expr)  { r=a%b; }
>   | #(POW   a=expr b=expr)  { r=Math.pow(a,b); }
>   | #(LPAREN a=expr) { r=a;}
>   | i:INT { r=(double)Integer.parseInt(i.getText()); }
>   ;
>  
> ---- 4. excerpt from my test program
> 
> ExpressionLexer lexer = new ExpressionLexer(new DataInputStream(
> new FileInputStream("C:\\antlr\\EXPRINPUT.txt"))); 
> ExpressionParser parser = new ExpressionParser(lexer);



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Wed Aug  4 23:45:32 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Expressions
In-Reply-To: <411181CD.9030505@xtra.co.nz>
References: <411181CD.9030505@xtra.co.nz>
Message-ID: <0C116671-E6AB-11D8-9C3B-000393B5606C@codetransform.com>

The java grammar or my C grammar both handle those kinds of expressions 
and more.  Take a look at either of them.

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Aug 4, 2004, at 5:39 PM, Peter Ashford wrote:

> Whats the recommended way to handle expressions when you can have
> several different kinds of expression (I'm wanting float, string and
> boolean expressions)?
>
> TIA
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Wed Aug  4 23:44:22 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: modifying expression grammar ; unexpected token null
In-Reply-To: <cesce6+uofa@eGroups.com>
References: <cesce6+uofa@eGroups.com>
Message-ID: <E27BADA1-E6AA-11D8-9C3B-000393B5606C@codetransform.com>

Try building with -traceParser or -traceLexer or -traceTreeParser, 
depending on what you want to see detail for.  That should help you 
step through the code and see why it is giving you that error.

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Aug 4, 2004, at 9:18 PM, tjs wrote:

> I still get a null token error
> I tried to redefine the grammar like this, using only sumExpr as the
> root, but it still seems to try to read more input than it is given:
>
> class ExpressionParser extends Parser;
> options { buildAST=true; }
>
> //expr     : (LPAREN^ sumExpr RPAREN!) ;
> sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ;
> prodExpr : powExpr ((MUL^|DIV^|MOD^) powExpr)* ;
> powExpr  : atom (POW^ atom)? ;
> atom     : (LPAREN^ sumExpr RPAREN!) | INT;
>
> class ExpressionLexer extends Lexer;
>
> LPAREN : '(';
> RPAREN : ')';
> PLUS  : '+' ;
> MINUS : '-' ;
> MUL   : '*' ;
> DIV   : '/' ;
> MOD   : '%' ;
> POW   : '^' ;
> SEMI  : ';' ;
> protected DIGIT : '0'..'9' ;
> INT   : (DIGIT)+ ;
>
>
> {import java.lang.Math;}
> class ExpressionTreeWalker extends TreeParser;
>
> sumExpr returns [double r]
>   { double a,b; r=0; }
>
>   : #(PLUS  a=sumExpr b=sumExpr)  { r=a+b; }
>   | #(MINUS a=sumExpr b=sumExpr)  { r=a-b; }
>   | #(MUL   a=sumExpr b=sumExpr)  { r=a*b; }
>   | #(DIV   a=sumExpr b=sumExpr)  { r=a/b; }
>   | #(MOD   a=sumExpr b=sumExpr)  { r=a%b; }
>   | #(POW   a=sumExpr b=sumExpr)  { r=Math.pow(a,b); }
>   | #(LPAREN a=sumExpr) { r=a;}
>   | i:INT { r=(double)Integer.parseInt(i.getText()); }
>   ;
>
>
>
>
>
> --- In antlr-interest@yahoogroups.com, "tjs" <tjs_tjs4@y...> wrote:
>> I am trying to modify the Expression grammar given in the
>> JS Mill's tutorial (as of this time down;
>> http://supportweb.cs.bham.ac.uk/documentation/tuto
>> rials/docsystem/build/tutorials/antlr/antlrhome.html)
>>
>> I have 1 main goal here:
>> To make it so you don't need parantheses around the top expression
>> I did this by recrusively defining an expression as the same as in the
>> tutorial (fairly straightforward), and instead of
>>
>> | expr
>>
>> on the atom rule, I used
>>
>> | (LPAREN^ expr RPAREN!)
>>
>> Which is the way the Java grammars I've look at handle expressions.
>> All this grammar does is parse math expressions and enforce
>> parantheses (for example, 2+2 outputs 4.0, and (1-3)*4 outputs -8, or
>> it SHOULD anyway). Again, I modified the ORIGINAL grammar.
>>
>> My PROBLEM is that when I feed it input (in the form of a text file
>> that is only 3 characters in length, it gives me the following error:
>>
>> line 1:4 unexpected token: null
>>  ( + 2 )
>> (AST): unexpected end of subtree
>>
>> My interpretation of this is that it is trying to read the 4th
>> character of the input (which doesn't exist, hence null) and then the
>> AST doesn't understand why it can't find the end of the subtree, it
>> apparently also thinks it needs another token when it shouldn't. I
>> can't figure out why it wants a 4th character or any other problem.
>>
>> The following are 1. the input text 2. the grammar 3. the ORIGINAL
>> grammar ( which does work properly, but you need to do (2+2) instead
>> of 2+2, because it makes you use parantheses around everything ), 4.
>> the way in which I load the text file into the lexer
>>
>> finally, before you think i am a "Newbie" who doesn't deserve any
>> help, i have read 50+ pages of ANTLR documentation, searched
>> everything in /docs and this forum, experimented with this grammar for
>> over 4 hours, looked at Java grammars to see how they handled
>> expressions, and wrote a very crude expression parser that was very
>> messy before to graph functions (its messiness is part of the reason i
>> am using ANTLR to redo it). i just can't figure out my dumb problem,
>> that's all. also, if you help me i'll give you credit in my program
>> for correcting my dumb mistakes!
>>
>> ------- 1. input text
>> 2+2
>>
>> (this is only 3 characters, no newlines, or anything else)
>>
>> ------- 2. my expression grammar
>>
>> class ExpressionParser extends Parser;
>> options { buildAST=true; }
>>
>> expr     :  sumExpr ;
>> sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ;
>> prodExpr : powExpr ((MUL^|DIV^|MOD^) powExpr)* ;
>> powExpr  : atom (POW^ atom)? ;
>> atom     : INT | (LPAREN^ expr RPAREN!) ;
>>
>> class ExpressionLexer extends Lexer;
>>
>> LPAREN : '(';
>> FUNCSIN : 's';
>> RPAREN : ')';
>> PLUS  : '+' ;
>> MINUS : '-' ;
>> MUL   : '*' ;
>> DIV   : '/' ;
>> MOD   : '%' ;
>> POW   : '^' ;
>> SEMI  : ';' ;
>> protected DIGIT : '0'..'9' ;
>> INT   : (DIGIT)+ ;
>>
>> {import java.lang.Math;}
>> class ExpressionTreeWalker extends TreeParser;
>>
>> expr returns [double r]
>>   { double a,b; r=0; }
>>
>>   : #(PLUS  a=expr b=expr)  { r=a+b; }
>>   | #(MINUS a=expr b=expr)  { r=a-b; }
>>   | #(MUL   a=expr b=expr)  { r=a*b; }
>>   | #(DIV   a=expr b=expr)  { r=a/b; }
>>   | #(MOD   a=expr b=expr)  { r=a%b; }
>>   | #(POW   a=expr b=expr)  { r=Math.pow(a,b); }
>>   | #(LPAREN a=expr) { r=a;}
>>   | i:INT { r=(double)Integer.parseInt(i.getText()); }
>>   ;
>>
>> ------ 3. the original grammar from Mill's tutorial (working, but noly
>> when the input is (2+2)  not 2+2 )
>>
>> class ExpressionParser extends Parser;
>> options { buildAST=true; }
>>
>> expr     : (LPAREN^ sumExpr RPAREN!) ;
>> sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ;
>> prodExpr : powExpr ((MUL^|DIV^|MOD^) powExpr)* ;
>> powExpr  : atom (POW^ atom)? ;
>> atom     : INT | expr ;
>>
>> class ExpressionLexer extends Lexer;
>>
>> LPAREN : '(';
>> RPAREN : ')';
>> PLUS  : '+' ;
>> MINUS : '-' ;
>> MUL   : '*' ;
>> DIV   : '/' ;
>> MOD   : '%' ;
>> POW   : '^' ;
>> SEMI  : ';' ;
>> protected DIGIT : '0'..'9' ;
>> INT   : (DIGIT)+ ;
>>
>>
>> {import java.lang.Math;}
>> class ExpressionTreeWalker extends TreeParser;
>>
>> expr returns [double r]
>>   { double a,b; r=0; }
>>
>>   : #(PLUS  a=expr b=expr)  { r=a+b; }
>>   | #(MINUS a=expr b=expr)  { r=a-b; }
>>   | #(MUL   a=expr b=expr)  { r=a*b; }
>>   | #(DIV   a=expr b=expr)  { r=a/b; }
>>   | #(MOD   a=expr b=expr)  { r=a%b; }
>>   | #(POW   a=expr b=expr)  { r=Math.pow(a,b); }
>>   | #(LPAREN a=expr) { r=a;}
>>   | i:INT { r=(double)Integer.parseInt(i.getText()); }
>>   ;
>>
>> ---- 4. excerpt from my test program
>>
>> ExpressionLexer lexer = new ExpressionLexer(new DataInputStream(
>> new FileInputStream("C:\\antlr\\EXPRINPUT.txt")));
>> ExpressionParser parser = new ExpressionParser(lexer);
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From tom at psy.unsw.edu.au  Thu Aug  5 01:37:43 2004
From: tom at psy.unsw.edu.au (Thomas Brandon)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: ANTLR 3.0 question about common actions
In-Reply-To: <7AE0A93F-E0F9-11D8-A2DD-000A95891192@cs.usfca.edu>
Message-ID: <cesrkn+9850@eGroups.com>

While considering actions you might think about the syntax of 
actions, especially if you are planning to break backwards 
compatibility in this area. This is a bit of a nasty area in the 
Antlr parser\lexer. As action blocks can include arbitrary text 
(from the point of view of the Antlr parser which is ideally target-
language specific), some tricky handling of them is required. 
Currently the Antlr lexer looks for the matching end marker (']' for 
arg actions, '}' for normal actions) with special handling for 
nested target-language blocks using []\{} and appearances in 
comments and strings.
This means the current Antlr grammar is somewhat target language 
specific, limited to languages with C++ style comments (// single 
line, /* */ multi-line) and chars\strings ('' and "", pretty 
universal). Consider for instance a VB code generator with ';' as 
comment delimeter (not likely to be a problem).
And care must be taken with delimeters inside actions, for instance, 
using '<' and '>' for templated actions as Ter suggest would seem 
problematic. What do you do about "{if (some-condition) <somefunc
(i>x)>;}".
Having more complex action delimeters would seem to be a good 
idea, "<a:skip()>" ('a' for action) while more verbose is less 
likely to clash with a desired target language expression.

Tom.
--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
wrote:
> 
> On Jul 28, 2004, at 1:48 PM, Monty Zukowski wrote:
> > Currently you have an escape mechanism that says "this is all 
target
> > language
<snip>
> NEWLINE : '\n' {if (some-condition) <skip()>;} ;
<snip> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
> Cofounder, http://www.peerscope.com pure link sharing



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From tom at psy.unsw.edu.au  Thu Aug  5 02:28:24 2004
From: tom at psy.unsw.edu.au (Thomas Brandon)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: ANTLR 3.0 question about common actions
In-Reply-To: <cesrkn+9850@eGroups.com>
Message-ID: <cesujo+e89l@eGroups.com>

The suggested syntax would not work, the end delimeter must be made 
more complex as well, "<a:skip():>" would be less likely to clash.

Tom.
--- In antlr-interest@yahoogroups.com, "Thomas Brandon" <tom@p...> 
wrote:
<snip>
> And care must be taken with delimeters inside actions, for 
instance, 
> using '<' and '>' for templated actions as Ter suggest would seem 
> problematic. What do you do about "{if (some-condition) <somefunc
> (i>x)>;}".
> Having more complex action delimeters would seem to be a good 
> idea, "<a:skip()>" ('a' for action) while more verbose is less 
> likely to clash with a desired target language expression.
> 
> Tom.
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
> wrote:
> > 
> > On Jul 28, 2004, at 1:48 PM, Monty Zukowski wrote:
> > > Currently you have an escape mechanism that says "this is all 
> target
> > > language
> <snip>
> > NEWLINE : '\n' {if (some-condition) <skip()>;} ;
> <snip> 
> > Ter
> > --
> > CS Professor & Grad Director, University of San Francisco
> > Creator, ANTLR Parser Generator, http://www.antlr.org
> > Cofounder, http://www.jguru.com
> > Cofounder, http://www.knowspam.net enjoy email again!
> > Cofounder, http://www.peerscope.com pure link sharing



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From khamenya at mail.ru  Thu Aug  5 02:57:18 2004
From: khamenya at mail.ru (Neurosurg)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: interactive envionments and non-delayed rule reduction
In-Reply-To: <B4AA93BA-E620-11D8-8B1E-000393B5606C@codetransform.com>
Message-ID: <cet09u+alur@eGroups.com>

--- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> wrote:
> 
> I think I already asked Valery about that scenario.  It's supposed to 
> fail on the *5.

right.

--
V.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From sk at z.pl  Thu Aug  5 04:57:00 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Expressions
In-Reply-To: <411181CD.9030505@xtra.co.nz>
References: <411181CD.9030505@xtra.co.nz>
Message-ID: <4112208C.4080003@softax.pl>

Peter Ashford wrote:
> Whats the recommended way to handle expressions when you can have 
> several different kinds of expression (I'm wanting float, string and 
> boolean expressions)?

Standard way is to parse everything just as expression and only in one of 
the following compilation phase -- type determination & checking -- check if 
the expressions are well typed (well formed).
Types are part of semantics not syntax, and typically doing (even partial) 
semantic checks in syntactic phase (lexer/parser) in not a good idea.

rgds
-- 
Sebastian Kaliszewski


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From yjargudo at tiscali.es  Thu Aug  5 06:56:54 2004
From: yjargudo at tiscali.es (yjargudo)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] please answer me!!!!!!
Message-ID: <ceteb6+p03t@eGroups.com>

Hello,

Please answer me!!!

I have two problems that I don't know how to solve them:

1-

I'm parsing c++ files and I need to treat includes. I'm try to use
TokenStreamSelector.The problem is that I need to use TokenStreamFilter
too, in order to hide cpp comments. How can I merge this two things
when I put the code to start antlr parser and lexer?


2-
 I want to parse twice a source file with the same grammar (only antlr
actions changes).Loring tell me to use trees but I want to avoid it.
There's another way?


Thanks

Yolanda



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From kdaling at uos.de  Thu Aug  5 02:34:03 2004
From: kdaling at uos.de (kdaling71)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] [] in commentary
Message-ID: <cesuub+jovf@eGroups.com>

Hi all,

I am using the following lines to get comments in my grammar:

SL_COMMENT :
    "//"
    (~'\n')* '\n'
    { _ttype = Token.SKIP; newline(); }
    ;

When I now put a comment with squared brackets in my file like

// This is [a] comment

I get an error message:

expecting '\n' found [

Comments with other symbols like () oder {} are allowed.
Does anybody has an idea what the problem is?

Thanks


Klaus Dalinghaus

---------------------------------------------------------------
Institute of Cognitive Science, University of Osnabr?ck
Kolpingstra?e 7, 49069 Osnabr?ck
Tel.: +49-(0)-541-969-4797   Fax.: +49-(0)-541-969-6229
http://www.cogsci.uni-osnabrueck.de/~kdaling







Here is my complete grammar

class FPParseParser extends Parser;

// options for the parser
options {
    buildAST = true;    // uses CommonAST by default
    defaultErrorHandler = false;
}


fuzzyProgram
    :    ( prefixStatement ) ? ( operatorDefinition ) * ( clauseBlock ) +
    ;

prefixStatement
    :    PREFIX^ IDENTIFIER SEMI!
    ;

operatorDefinition
    :    OPERATOR^ IDENTIFIER EQUALS! IDENTIFIER LEFTBRACKET! (
operatorArgumentList ) ? RIGHTBRACKET! SEMI!
    ;

operatorArgumentList
    :    IDENTIFIER ( COMMA^ IDENTIFIER ) *
    ;

clauseBlock
    :    clause SEMI^
    ;

clause
    :    conclusion LEFTARROW^ premiseOp
    ;

premiseOp
    :    simplePremise
    |    multiPremise
    |   
    ;

simplePremise
    :    premiseList PIPE^ operator
    ;

multiPremise
    :     LEFTCURLY^ premise RIGHTCURLY! PIPE! operator
    ;

premiseList
    :    premise ( COMMA^ premise )*
    ;

conclusion
    :    IDENTIFIER
    ;

premise
    :    IDENTIFIER
    ;

operator
    :    IDENTIFIER
    ;

class FPParseLexer extends Lexer;


options{
    defaultErrorHandler = false;
}

tokens{
    PREFIX = "prefix";
    OPERATOR = "operator";
}

WS    :    (' '
    |    '\t'
    |    '\n'
    |    '\r')
        { _ttype = Token.SKIP; }
    ;

SL_COMMENT :
    "//"
    (~'\n')* '\n'
    { _ttype = Token.SKIP; newline(); }
    ;


EQUALS:            '=';

LEFTARROW:        "<-";

LEFTCURLY:        '{';

RIGHTCURLY:        '}';

LEFTBRACKET:    '(';

RIGHTBRACKET:    ')';

SEMI:            ';';

COMMA:            ',';

PIPE:            "|";

IDENTIFIER
options {
    testLiterals = true;
    paraphrase = "an identifier";
}
    :    ('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'.'|'-')+
    ;







 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From beckersheinzsb at yahoo.com  Thu Aug  5 07:10:07 2004
From: beckersheinzsb at yahoo.com (beckersheinzsb)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Lexer rules for numbers and intervals
Message-ID: <cetf3v+kpet@eGroups.com>

Hello

I have the following rules in my lexer:

protected
DOT     :   '.'        ;

protected
DIGIT   :   '0'..'9'   ;

NUMBER  : (DOT (DIGIT)+)
        | (DIGIT)+ (DOT (DIGIT)*)?;


This piece works fine but now i want to add intervals, e.g. 5..9
If I try to define a rule like

INTERVAL_SIGN  : DOT DOT ;

I get a nondeterminism.

I see that it is difficult to distinguish between the second subrule 
of NUMBER and an interval 5..9 (NUMBER INTERVAL_SIGN NUMBER). Do I 
have to left-factor? 
Or is there a possibility to achieve that the lexer recognizes two 
following dots as an interval sign at all?

Could you please give me a hint

thanks a lot
greets

heinz





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From serge.bogdanov at intel.com  Thu Aug  5 07:16:45 2004
From: serge.bogdanov at intel.com (Sergey Bogdanov)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: please answer me!!!!!!
In-Reply-To: <ceteb6+p03t@eGroups.com>
Message-ID: <cetfgd+drer@eGroups.com>

--- In antlr-interest@yahoogroups.com, "yjargudo" <yjargudo@t...> 
wrote:
> Hello,
> 
> Please answer me!!!
> 
> I have two problems that I don't know how to solve them:
> 
> 1-
> 
> I'm parsing c++ files and I need to treat includes. I'm try to use
> TokenStreamSelector.The problem is that I need to use 
TokenStreamFilter
> too, in order to hide cpp comments. How can I merge this two things
> when I put the code to start antlr parser and lexer?
> 
 Would you concider an option of running 'cpp' before parsing?

> 
> 2-
>  I want to parse twice a source file with the same grammar (only 
antlr
> actions changes).Loring tell me to use trees but I want to avoid 
it.
> There's another way?
> 

Building trees is probably the most eficient way to do it. Other 
wise you need big 'if' statements around your actions and a global 
pass number.

> 
> Thanks
> 
> Yolanda



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From kdaling at uos.de  Thu Aug  5 01:30:12 2004
From: kdaling at uos.de (Klaus Dalinghaus)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] [] in commentary
Message-ID: <4111F014.5040308@uos.de>

Hi all,

I am using the following lines to get comments in my grammar:

SL_COMMENT :
	"//"
	(~'\n')* '\n'
	{ _ttype = Token.SKIP; newline(); }
	;

When I now put a comment with squared brackets in my file like

// This is [a] comment

I get an error message:

expecting '\n' found [

Comments with other symbols like () oder {} are allowed.
Does anybody has an idea what the problem is?

Thanks


Klaus Dalinghaus

---------------------------------------------------------------
Institute of Cognitive Science, University of Osnabr?ck
Kolpingstra?e 7, 49069 Osnabr?ck
Tel.: +49-(0)-541-969-4797   Fax.: +49-(0)-541-969-6229
http://www.cogsci.uni-osnabrueck.de/~kdaling







Here is my complete grammar

class FPParseParser extends Parser;

// options for the parser
options {
	buildAST = true;	// uses CommonAST by default
	defaultErrorHandler = false;
}


fuzzyProgram
	:	( prefixStatement ) ? ( operatorDefinition ) * ( clauseBlock ) +
	;

prefixStatement
	:	PREFIX^ IDENTIFIER SEMI!
	;

operatorDefinition
	:	OPERATOR^ IDENTIFIER EQUALS! IDENTIFIER LEFTBRACKET! ( 
operatorArgumentList ) ? RIGHTBRACKET! SEMI!
	;

operatorArgumentList
	:	IDENTIFIER ( COMMA^ IDENTIFIER ) *
	;

clauseBlock
	:	clause SEMI^
	;

clause
	:	conclusion LEFTARROW^ premiseOp
	;

premiseOp
	:	simplePremise
	|	multiPremise
	|	
	;

simplePremise
	:	premiseList PIPE^ operator
	;

multiPremise
	:	 LEFTCURLY^ premise RIGHTCURLY! PIPE! operator
	;

premiseList
	:	premise ( COMMA^ premise )*
	;

conclusion
	:	IDENTIFIER
	;

premise
	:	IDENTIFIER
	;

operator
	:	IDENTIFIER
	;

class FPParseLexer extends Lexer;


options{
	defaultErrorHandler = false;
}

tokens{
	PREFIX = "prefix";
	OPERATOR = "operator";
}

WS	:	(' '
	|	'\t'
	|	'\n'
	|	'\r')
		{ _ttype = Token.SKIP; }
	;

SL_COMMENT :
	"//"
	(~'\n')* '\n'
	{ _ttype = Token.SKIP; newline(); }
	;


EQUALS:			'=';

LEFTARROW:		"<-";

LEFTCURLY:		'{';

RIGHTCURLY:		'}';

LEFTBRACKET:	'(';

RIGHTBRACKET:	')';

SEMI:			';';

COMMA:			',';

PIPE:			"|";

IDENTIFIER
options {
	testLiterals = true;
	// a paraphrase used for error messages
	paraphrase = "an identifier";
}
('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'.'|'-')*
	:	('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'.'|'-')+
	;






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From madcapmaggie at yahoo.com  Thu Aug  5 07:23:26 2004
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] [] in commentary
In-Reply-To: <cesuub+jovf@eGroups.com>
Message-ID: <20040805142326.38427.qmail@web13708.mail.yahoo.com>

Yes, you need to tell antlr which characters are
allowed in your grammar -- otherwise it just assumes
that only the ones you've got specifically are valid.
You want something like:
    charVocabulary='\3'..'\377';
in your lexer options section.

Peggy

--- kdaling71 <kdaling@uos.de> wrote:

> Hi all,
> 
> I am using the following lines to get comments in my
> grammar:
> 
> SL_COMMENT :
>     "//"
>     (~'\n')* '\n'
>     { _ttype = Token.SKIP; newline(); }
>     ;
> 
> When I now put a comment with squared brackets in my
> file like
> 
> // This is [a] comment
> 
> I get an error message:
> 
> expecting '\n' found [
> 
> Comments with other symbols like () oder {} are
> allowed.
> Does anybody has an idea what the problem is?
> 
> Thanks
> 
> 
> Klaus Dalinghaus
> 
>
---------------------------------------------------------------
> Institute of Cognitive Science, University of
> Osnabrck
> Kolpingstrae 7, 49069 Osnabrck
> Tel.: +49-(0)-541-969-4797   Fax.:
> +49-(0)-541-969-6229
> http://www.cogsci.uni-osnabrueck.de/~kdaling
> 
> 
> 
> 
> 
> 
> 
> Here is my complete grammar
> 
> class FPParseParser extends Parser;
> 
> // options for the parser
> options {
>     buildAST = true;    // uses CommonAST by default
>     defaultErrorHandler = false;
> }
> 
> 
> fuzzyProgram
>     :    ( prefixStatement ) ? ( operatorDefinition
> ) * ( clauseBlock ) +
>     ;
> 
> prefixStatement
>     :    PREFIX^ IDENTIFIER SEMI!
>     ;
> 
> operatorDefinition
>     :    OPERATOR^ IDENTIFIER EQUALS! IDENTIFIER
> LEFTBRACKET! (
> operatorArgumentList ) ? RIGHTBRACKET! SEMI!
>     ;
> 
> operatorArgumentList
>     :    IDENTIFIER ( COMMA^ IDENTIFIER ) *
>     ;
> 
> clauseBlock
>     :    clause SEMI^
>     ;
> 
> clause
>     :    conclusion LEFTARROW^ premiseOp
>     ;
> 
> premiseOp
>     :    simplePremise
>     |    multiPremise
>     |   
>     ;
> 
> simplePremise
>     :    premiseList PIPE^ operator
>     ;
> 
> multiPremise
>     :     LEFTCURLY^ premise RIGHTCURLY! PIPE!
> operator
>     ;
> 
> premiseList
>     :    premise ( COMMA^ premise )*
>     ;
> 
> conclusion
>     :    IDENTIFIER
>     ;
> 
> premise
>     :    IDENTIFIER
>     ;
> 
> operator
>     :    IDENTIFIER
>     ;
> 
> class FPParseLexer extends Lexer;
> 
> 
> options{
>     defaultErrorHandler = false;
> }
> 
> tokens{
>     PREFIX = "prefix";
>     OPERATOR = "operator";
> }
> 
> WS    :    (' '
>     |    '\t'
>     |    '\n'
>     |    '\r')
>         { _ttype = Token.SKIP; }
>     ;
> 
> SL_COMMENT :
>     "//"
>     (~'\n')* '\n'
>     { _ttype = Token.SKIP; newline(); }
>     ;
> 
> 
> EQUALS:            '=';
> 
> LEFTARROW:        "<-";
> 
> LEFTCURLY:        '{';
> 
> RIGHTCURLY:        '}';
> 
> LEFTBRACKET:    '(';
> 
> RIGHTBRACKET:    ')';
> 
> SEMI:            ';';
> 
> COMMA:            ',';
> 
> PIPE:            "|";
> 
> IDENTIFIER
> options {
>     testLiterals = true;
>     paraphrase = "an identifier";
> }
>     :    ('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'.'|'-')+
>     ;
> 
> 
> 
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>     antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 
> 



		
__________________________________
Do you Yahoo!?
New and Improved Yahoo! Mail - Send 10MB messages!
http://promotions.yahoo.com/new_mail 


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Thu Aug  5 07:25:36 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] [] in commentary
In-Reply-To: <4111F014.5040308@uos.de>
References: <4111F014.5040308@uos.de>
Message-ID: <5146A903-E6EB-11D8-9C3B-000393B5606C@codetransform.com>

See the documentation about the charVocabulary option. 
http://www.antlr.org/doc/options.html#_bb14

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Aug 5, 2004, at 1:30 AM, Klaus Dalinghaus wrote:

> Hi all,
>
> I am using the following lines to get comments in my grammar:
>
> SL_COMMENT :
> 	"//"
> 	(~'\n')* '\n'
> 	{ _ttype = Token.SKIP; newline(); }
> 	;
>
> When I now put a comment with squared brackets in my file like
>
> // This is [a] comment
>
> I get an error message:
>
> expecting '\n' found [
>
> Comments with other symbols like () oder {} are allowed.
> Does anybody has an idea what the problem is?
>
> Thanks
>
>
> Klaus Dalinghaus
>
> ---------------------------------------------------------------
> Institute of Cognitive Science, University of Osnabr?ck
> Kolpingstra?e 7, 49069 Osnabr?ck
> Tel.: +49-(0)-541-969-4797   Fax.: +49-(0)-541-969-6229
> http://www.cogsci.uni-osnabrueck.de/~kdaling
>
>
>
>
>
>
>
> Here is my complete grammar
>
> class FPParseParser extends Parser;
>
> // options for the parser
> options {
> 	buildAST = true;	// uses CommonAST by default
> 	defaultErrorHandler = false;
> }
>
>
> fuzzyProgram
> 	:	( prefixStatement ) ? ( operatorDefinition ) * ( clauseBlock ) +
> 	;
>
> prefixStatement
> 	:	PREFIX^ IDENTIFIER SEMI!
> 	;
>
> operatorDefinition
> 	:	OPERATOR^ IDENTIFIER EQUALS! IDENTIFIER LEFTBRACKET! (
> operatorArgumentList ) ? RIGHTBRACKET! SEMI!
> 	;
>
> operatorArgumentList
> 	:	IDENTIFIER ( COMMA^ IDENTIFIER ) *
> 	;
>
> clauseBlock
> 	:	clause SEMI^
> 	;
>
> clause
> 	:	conclusion LEFTARROW^ premiseOp
> 	;
>
> premiseOp
> 	:	simplePremise
> 	|	multiPremise
> 	|	
> 	;
>
> simplePremise
> 	:	premiseList PIPE^ operator
> 	;
>
> multiPremise
> 	:	 LEFTCURLY^ premise RIGHTCURLY! PIPE! operator
> 	;
>
> premiseList
> 	:	premise ( COMMA^ premise )*
> 	;
>
> conclusion
> 	:	IDENTIFIER
> 	;
>
> premise
> 	:	IDENTIFIER
> 	;
>
> operator
> 	:	IDENTIFIER
> 	;
>
> class FPParseLexer extends Lexer;
>
>
> options{
> 	defaultErrorHandler = false;
> }
>
> tokens{
> 	PREFIX = "prefix";
> 	OPERATOR = "operator";
> }
>
> WS	:	(' '
> 	|	'\t'
> 	|	'\n'
> 	|	'\r')
> 		{ _ttype = Token.SKIP; }
> 	;
>
> SL_COMMENT :
> 	"//"
> 	(~'\n')* '\n'
> 	{ _ttype = Token.SKIP; newline(); }
> 	;
>
>
> EQUALS:			'=';
>
> LEFTARROW:		"<-";
>
> LEFTCURLY:		'{';
>
> RIGHTCURLY:		'}';
>
> LEFTBRACKET:	'(';
>
> RIGHTBRACKET:	')';
>
> SEMI:			';';
>
> COMMA:			',';
>
> PIPE:			"|";
>
> IDENTIFIER
> options {
> 	testLiterals = true;
> 	// a paraphrase used for error messages
> 	paraphrase = "an identifier";
> }
> ('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'.'|'-')*
> 	:	('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'.'|'-')+
> 	;
>
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From madcapmaggie at yahoo.com  Thu Aug  5 07:33:31 2004
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Lexer rules for numbers and intervals
In-Reply-To: <cetf3v+kpet@eGroups.com>
Message-ID: <20040805143331.77427.qmail@web13702.mail.yahoo.com>


Yes,

I added:

protected DOT_DOT:  "..";
to the lexer and

interval:
   variable DOT_DOT variable
to the parser
This works fine for variables.
I ended up with:

(   integer DOT DOT integer ) => integer DOT DOT
integer

for the integer ranges. 

Peggy

--- beckersheinzsb <beckersheinzsb@yahoo.com> wrote:

> Hello
> 
> I have the following rules in my lexer:
> 
> protected
> DOT     :   '.'        ;
> 
> protected
> DIGIT   :   '0'..'9'   ;
> 
> NUMBER  : (DOT (DIGIT)+)
>         | (DIGIT)+ (DOT (DIGIT)*)?;
> 
> 
> This piece works fine but now i want to add
> intervals, e.g. 5..9
> If I try to define a rule like
> 
> INTERVAL_SIGN  : DOT DOT ;
> 
> I get a nondeterminism.
> 
> I see that it is difficult to distinguish between
> the second subrule 
> of NUMBER and an interval 5..9 (NUMBER INTERVAL_SIGN
> NUMBER). Do I 
> have to left-factor? 
> Or is there a possibility to achieve that the lexer
> recognizes two 
> following dots as an interval sign at all?
> 
> Could you please give me a hint
> 
> thanks a lot
> greets
> 
> heinz
> 
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>     antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 
> 



		
__________________________________
Do you Yahoo!?
Yahoo! Mail - 50x more storage than other providers!
http://promotions.yahoo.com/new_mail


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From beckersheinzsb at yahoo.com  Thu Aug  5 07:59:07 2004
From: beckersheinzsb at yahoo.com (beckersheinzsb)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: Lexer rules for numbers and intervals
In-Reply-To: <20040805143331.77427.qmail@web13702.mail.yahoo.com>
Message-ID: <cethvr+776s@eGroups.com>

thanks for your effort

but the problem is, that I've not only integers but also floating 
point values which use the dot as decimal point.

That means that 1.5..4.6 should also be possible.

If I try to pars 5..6 the lexer splits this into 5. and .6
and then then the parser throws an exception.

Heinz

--- In antlr-interest@yahoogroups.com, Peggy Fieland 
<madcapmaggie@y...> wrote:
> 
> Yes,
> 
> I added:
> 
> protected DOT_DOT:  "..";
> to the lexer and
> 
> interval:
>    variable DOT_DOT variable
> to the parser
> This works fine for variables.
> I ended up with:
> 
> (   integer DOT DOT integer ) => integer DOT DOT
> integer
> 
> for the integer ranges. 
> 
> Peggy
> 
> --- beckersheinzsb <beckersheinzsb@y...> wrote:
> 
> > Hello
> > 
> > I have the following rules in my lexer:
> > 
> > protected
> > DOT     :   '.'        ;
> > 
> > protected
> > DIGIT   :   '0'..'9'   ;
> > 
> > NUMBER  : (DOT (DIGIT)+)
> >         | (DIGIT)+ (DOT (DIGIT)*)?;
> > 
> > 
> > This piece works fine but now i want to add
> > intervals, e.g. 5..9
> > If I try to define a rule like
> > 
> > INTERVAL_SIGN  : DOT DOT ;
> > 
> > I get a nondeterminism.
> > 
> > I see that it is difficult to distinguish between
> > the second subrule 
> > of NUMBER and an interval 5..9 (NUMBER INTERVAL_SIGN
> > NUMBER). Do I 
> > have to left-factor? 
> > Or is there a possibility to achieve that the lexer
> > recognizes two 
> > following dots as an interval sign at all?
> > 
> > Could you please give me a hint
> > 
> > thanks a lot
> > greets
> > 
> > heinz
> > 
> > 
> > 
> > 
> > 
> >  
> > Yahoo! Groups Links
> > 
> > 
> >     antlr-interest-unsubscribe@yahoogroups.com
> > 
> >  
> > 
> > 
> 
> 
> 
> 		
> __________________________________
> Do you Yahoo!?
> Yahoo! Mail - 50x more storage than other providers!
> http://promotions.yahoo.com/new_mail



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From madcapmaggie at yahoo.com  Thu Aug  5 08:23:09 2004
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: Lexer rules for numbers and intervals
In-Reply-To: <cethvr+776s@eGroups.com>
Message-ID: <20040805152309.43041.qmail@web13705.mail.yahoo.com>

Try doing the same thing for floating numbers that I
did for integers.
I also had to add some extra cases like
  (integer dot dot integer) => integer dot dot
integer,

etc before I got everything to work.

Check the generated code for the parser.


--- beckersheinzsb <beckersheinzsb@yahoo.com> wrote:

> thanks for your effort
> 
> but the problem is, that I've not only integers but
> also floating 
> point values which use the dot as decimal point.
> 
> That means that 1.5..4.6 should also be possible.
> 
> If I try to pars 5..6 the lexer splits this into 5.
> and .6
> and then then the parser throws an exception.
> 
> Heinz
> 
> --- In antlr-interest@yahoogroups.com, Peggy Fieland
> 
> <madcapmaggie@y...> wrote:
> > 
> > Yes,
> > 
> > I added:
> > 
> > protected DOT_DOT:  "..";
> > to the lexer and
> > 
> > interval:
> >    variable DOT_DOT variable
> > to the parser
> > This works fine for variables.
> > I ended up with:
> > 
> > (   integer DOT DOT integer ) => integer DOT DOT
> > integer
> > 
> > for the integer ranges. 
> > 
> > Peggy
> > 
> > --- beckersheinzsb <beckersheinzsb@y...> wrote:
> > 
> > > Hello
> > > 
> > > I have the following rules in my lexer:
> > > 
> > > protected
> > > DOT     :   '.'        ;
> > > 
> > > protected
> > > DIGIT   :   '0'..'9'   ;
> > > 
> > > NUMBER  : (DOT (DIGIT)+)
> > >         | (DIGIT)+ (DOT (DIGIT)*)?;
> > > 
> > > 
> > > This piece works fine but now i want to add
> > > intervals, e.g. 5..9
> > > If I try to define a rule like
> > > 
> > > INTERVAL_SIGN  : DOT DOT ;
> > > 
> > > I get a nondeterminism.
> > > 
> > > I see that it is difficult to distinguish
> between
> > > the second subrule 
> > > of NUMBER and an interval 5..9 (NUMBER
> INTERVAL_SIGN
> > > NUMBER). Do I 
> > > have to left-factor? 
> > > Or is there a possibility to achieve that the
> lexer
> > > recognizes two 
> > > following dots as an interval sign at all?
> > > 
> > > Could you please give me a hint
> > > 
> > > thanks a lot
> > > greets
> > > 
> > > heinz
> > > 
> > > 
> > > 
> > > 
> > > 
> > >  
> > > Yahoo! Groups Links
> > > 
> > > 
> > >     antlr-interest-unsubscribe@yahoogroups.com
> > > 
> > >  
> > > 
> > > 
> > 
> > 
> > 
> > 		
> > __________________________________
> > Do you Yahoo!?
> > Yahoo! Mail - 50x more storage than other
> providers!
> > http://promotions.yahoo.com/new_mail
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>     antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 
> 



		
__________________________________
Do you Yahoo!?
Read only the mail you want - Yahoo! Mail SpamGuard.
http://promotions.yahoo.com/new_mail 


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From joanpujol at gmail.com  Thu Aug  5 08:26:16 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Nondeterminism and syntantic/semantic predicates info
In-Reply-To: <068B9C3D-E667-11D8-8B1E-000393B5606C@codetransform.com>
References: <d2d18a104080413263b26c6b9@mail.gmail.com> <068B9C3D-E667-11D8-8B1E-000393B5606C@codetransform.com>
Message-ID: <d2d18a104080508264ca84f46@mail.gmail.com>

On Wed, 4 Aug 2004 15:38:37 -0700, Monty Zukowski
<monty@codetransform.com> wrote:
> On Aug 4, 2004, at 1:26 PM, Joan Pujol wrote:


> Some nondeterminisms are acceptable, for instance the if/else
> ambiguity.  It truly is non-deterministic.  However, the code that
> ANTLR generates handles it the way you would expect.  Being
> nondeterministic means that ANTLR can't predict which alternative to
> choose because of overlapping lookahead sets.
Yes, my grammar is nondeterministic (i think)
multiple_assignment: "<" identlist ">"  "=" <" expresionlist ">"
The non determinism is with the ">" of the final of
multiple_assignment and the ">" operator of greater of expression.

But I have put some semantical predicate in the grammar. And what I
want to know is the logic that ANTLR uses when you put semantic
predicates:

Ohh, a semantic predicate, no problem with nondeterminism, the user solve it.

or

A semantic predicate, well It seems that is well but anyway I am going
to give a warning to the user to be sure.


> You could give Ter's PhD Thesis a read (on antlr.org,) it sure gives a
> lot of detail on lookahead computations.
I will try to look it. But I don't know if I am to much newbie to understand it.


> Inspecting the code is the best bet.  If you can tell that it will do
> the right thing then you can ignore the warning.
OK, a lot of thanks, If that I have done and it seems that the code is good.

Cheers,

-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From madcapmaggie at yahoo.com  Thu Aug  5 07:26:42 2004
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: modifying expression grammar ; unexpected token null
In-Reply-To: <cesce6+uofa@eGroups.com>
Message-ID: <20040805142642.64465.qmail@web13701.mail.yahoo.com>

You are missing the case for unary plus and minus:

    | (PLUS^ | MINUS^) expression

as one of the options at the lowest level should do
it.

Peggy
  
--- tjs <tjs_tjs4@yahoo.com> wrote:

> I still get a null token error
> I tried to redefine the grammar like this, using
> only sumExpr as the
> root, but it still seems to try to read more input
> than it is given:
> 
> class ExpressionParser extends Parser;
> options { buildAST=true; }
> 
> //expr     : (LPAREN^ sumExpr RPAREN!) ;
> sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ;
> prodExpr : powExpr ((MUL^|DIV^|MOD^) powExpr)* ;
> powExpr  : atom (POW^ atom)? ;
> atom     : (LPAREN^ sumExpr RPAREN!) | INT;
> 
> class ExpressionLexer extends Lexer;
> 
> LPAREN : '(';
> RPAREN : ')';
> PLUS  : '+' ;
> MINUS : '-' ;
> MUL   : '*' ;
> DIV   : '/' ;
> MOD   : '%' ;
> POW   : '^' ;
> SEMI  : ';' ;
> protected DIGIT : '0'..'9' ;
> INT   : (DIGIT)+ ;
> 
> 
> {import java.lang.Math;}
> class ExpressionTreeWalker extends TreeParser;
> 
> sumExpr returns [double r]
>   { double a,b; r=0; }
> 
>   : #(PLUS  a=sumExpr b=sumExpr)  { r=a+b; }
>   | #(MINUS a=sumExpr b=sumExpr)  { r=a-b; }
>   | #(MUL   a=sumExpr b=sumExpr)  { r=a*b; }
>   | #(DIV   a=sumExpr b=sumExpr)  { r=a/b; }
>   | #(MOD   a=sumExpr b=sumExpr)  { r=a%b; }
>   | #(POW   a=sumExpr b=sumExpr)  { r=Math.pow(a,b);
> }
>   | #(LPAREN a=sumExpr) { r=a;}
>   | i:INT { r=(double)Integer.parseInt(i.getText());
> }
>   ;
>     
> 
> 
> 
> 
> --- In antlr-interest@yahoogroups.com, "tjs"
> <tjs_tjs4@y...> wrote:
> > I am trying to modify the Expression grammar given
> in the 
> > JS Mill's tutorial (as of this time down;
> > http://supportweb.cs.bham.ac.uk/documentation/tuto
> >
>
rials/docsystem/build/tutorials/antlr/antlrhome.html)
> > 
> > I have 1 main goal here:
> > To make it so you don't need parantheses around
> the top expression
> > I did this by recrusively defining an expression
> as the same as in the
> > tutorial (fairly straightforward), and instead of
> > 
> > | expr
> > 
> > on the atom rule, I used
> > 
> > | (LPAREN^ expr RPAREN!) 
> > 
> > Which is the way the Java grammars I've look at
> handle expressions.
> > All this grammar does is parse math expressions
> and enforce
> > parantheses (for example, 2+2 outputs 4.0, and
> (1-3)*4 outputs -8, or
> > it SHOULD anyway). Again, I modified the ORIGINAL
> grammar.
> > 
> > My PROBLEM is that when I feed it input (in the
> form of a text file
> > that is only 3 characters in length, it gives me
> the following error:
> > 
> > line 1:4 unexpected token: null
> >  ( + 2 )
> > (AST): unexpected end of subtree
> > 
> > My interpretation of this is that it is trying to
> read the 4th
> > character of the input (which doesn't exist, hence
> null) and then the
> > AST doesn't understand why it can't find the end
> of the subtree, it
> > apparently also thinks it needs another token when
> it shouldn't. I
> > can't figure out why it wants a 4th character or
> any other problem.
> > 
> > The following are 1. the input text 2. the grammar
> 3. the ORIGINAL
> > grammar ( which does work properly, but you need
> to do (2+2) instead
> > of 2+2, because it makes you use parantheses
> around everything ), 4.
> > the way in which I load the text file into the
> lexer
> > 
> > finally, before you think i am a "Newbie" who
> doesn't deserve any
> > help, i have read 50+ pages of ANTLR
> documentation, searched
> > everything in /docs and this forum, experimented
> with this grammar for
> > over 4 hours, looked at Java grammars to see how
> they handled
> > expressions, and wrote a very crude expression
> parser that was very
> > messy before to graph functions (its messiness is
> part of the reason i
> > am using ANTLR to redo it). i just can't figure
> out my dumb problem,
> > that's all. also, if you help me i'll give you
> credit in my program
> > for correcting my dumb mistakes!
> > 
> > ------- 1. input text
> > 2+2
> > 
> > (this is only 3 characters, no newlines, or
> anything else)
> > 
> > ------- 2. my expression grammar
> > 
> > class ExpressionParser extends Parser;
> > options { buildAST=true; }
> > 
> > expr     :  sumExpr ;
> > sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ;
> > prodExpr : powExpr ((MUL^|DIV^|MOD^) powExpr)* ;
> > powExpr  : atom (POW^ atom)? ;
> > atom     : INT | (LPAREN^ expr RPAREN!) ;
> > 
> > class ExpressionLexer extends Lexer;
> > 
> > LPAREN : '(';
> > FUNCSIN : 's';
> > RPAREN : ')';
> > PLUS  : '+' ;
> > MINUS : '-' ;
> > MUL   : '*' ;
> > DIV   : '/' ;
> > MOD   : '%' ;
> > POW   : '^' ;
> > SEMI  : ';' ;
> > protected DIGIT : '0'..'9' ;
> > INT   : (DIGIT)+ ;
> > 
> > {import java.lang.Math;}
> > class ExpressionTreeWalker extends TreeParser;
> > 
> > expr returns [double r]
> >   { double a,b; r=0; }
> > 
> >   : #(PLUS  a=expr b=expr)  { r=a+b; }
> >   | #(MINUS a=expr b=expr)  { r=a-b; }
> >   | #(MUL   a=expr b=expr)  { r=a*b; }
> >   | #(DIV   a=expr b=expr)  { r=a/b; }
> >   | #(MOD   a=expr b=expr)  { r=a%b; }
> >   | #(POW   a=expr b=expr)  { r=Math.pow(a,b); }
> >   | #(LPAREN a=expr) { r=a;}
> >   | i:INT {
> r=(double)Integer.parseInt(i.getText()); }
> >   ;
> >     
> > ------ 3. the original grammar from Mill's
> tutorial (working, but noly
> > when the input is (2+2)  not 2+2 )
> > 
> > class ExpressionParser extends Parser;
> > options { buildAST=true; }
> > 
> > expr     : (LPAREN^ sumExpr RPAREN!) ;
> > sumExpr  : prodExpr ((PLUS^|MINUS^) prodExpr)* ;
> > prodExpr : powExpr ((MUL^|DIV^|MOD^) powExpr)* ;
> > powExpr  : atom (POW^ atom)? ;
> > atom     : INT | expr ;
> > 
> > class ExpressionLexer extends Lexer;
> > 
> > LPAREN : '(';
> > RPAREN : ')';
> > PLUS  : '+' ;
> > MINUS : '-' ;
> > MUL   : '*' ;
> > DIV   : '/' ;
> > MOD   : '%' ;
> 
=== message truncated ===



		
__________________________________
Do you Yahoo!?
Yahoo! Mail - 50x more storage than other providers!
http://promotions.yahoo.com/new_mail


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From kaffiene at xtra.co.nz  Thu Aug  5 13:56:45 2004
From: kaffiene at xtra.co.nz (Peter Ashford)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Expressions
In-Reply-To: <4112208C.4080003@softax.pl>
References: <411181CD.9030505@xtra.co.nz> <4112208C.4080003@softax.pl>
Message-ID: <41129F0D.6060009@xtra.co.nz>

Sebastian Kaliszewski wrote:

>Peter Ashford wrote:
>  
>
>>Whats the recommended way to handle expressions when you can have 
>>several different kinds of expression (I'm wanting float, string and 
>>boolean expressions)?
>>    
>>
>
>Standard way is to parse everything just as expression and only in one of 
>the following compilation phase -- type determination & checking -- check if 
>the expressions are well typed (well formed).
>Types are part of semantics not syntax, and typically doing (even partial) 
>semantic checks in syntactic phase (lexer/parser) in not a good idea.
>
>rgds
>  
>
Okay, thanks for that.  My application is a simple scripting language 
which can do simple formulas.  I was thinking of having all of the 
expression rules return a VariableInfo class which stored any possible 
value and could perform the basic expression operations on it (add, 
minus, div, mult etc) - my idea being to handle the semantic issues 
within the VariableInfo class (it will check types, throw exceptions for 
mismatches, perform arithmetic options if legal)

Does that sound like a basically sane approach to take?


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Thu Aug  5 15:24:24 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] ANTLR 3.0 status: can handle pascal.g now :)
Message-ID: <3469578C-E72E-11D8-A2DD-000A95891192@cs.usfca.edu>

Howdy folks,

A bit of success today.  I wanted to get at least one existing grammar 
to work thru the new ANTLR 3.0 before school started on 26 August.  I'm 
a little ahead of schedule. :)

I almost got java.g working, but had trouble with the syntactic 
predicates.  I went to pascal.g instead.  Minimal changes...nothing 
significant changed to run thru 3.0.

The good news is that w/o any optimizations of any kind, 3.0 seems to 
be faster than 2.7.4's parsers/lexers.  To run 5600 lines of pascal 
thru both, yields:

ANTLR 3.0: 5.73s
ANTLR 2.7.4: 7.72s

with interpreted mode only.  With the on-the-fly compiler running, we 
get:

ANTLR 3.0: 2.0s
ANTLR 2.7.4: 3.2s

I have not tried to optimize the output in the slightest so hopefully, 
3.0's generated recognizers will get much faster.  These numbers make 
3.0 about 25% faster or more.  It's hard to tell where it will really 
end up.

PS: i'm following the discussion concerning generic actions etc... in 
grammars.  I'm thinking hard about it before responding...

L8R,
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rd_clark at sbcglobal.net  Thu Aug  5 21:21:10 2004
From: rd_clark at sbcglobal.net (Richard Clark)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: ANTLR+Eclipse
In-Reply-To: <FD35CB8B26F9534E86D1AC31F401AB3404023A51@na1fcm52.dearborn.ford.com>
Message-ID: <cev0vm+m5us@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Tiller, Michael \(M.M.\)" <mtiller@f...> wrote:
> I was wondering if anybody had ever tried to use ANTLR to implement a
> scanner in Eclipse. [snip]

I've gotten a great start on this yesterday and today. In particular, I was able to replace the 
rule-based partition scanner with one driven by an ANTLR-generated lexer. It's still going 
to need some work to be more robust in the face of lexing errors (e.g. illegal characters in 
the input), but I'm working on it. :)

> It seems like all that would be required would be to interface the lexer
> to the Eclipse representation of a document (so you could scan the
> characters in the document) ...

Done. I had to create my own plug-compatible replacement for the InputBuffer class (as 
indicated by yesterday's post re: in-memory I/O.) I also created a "lexer token" wrapper to 
bridge between ANTLR's tokens and Eclipse's IToken. 

> ... and then somehow tuck the results away so
> that subsequent calls to specialized token scanners, etc. wouldn't even
> look at the document but would instead just return information based on
> walking the AST.

A syntax-based editor would need both the low-level lexer tokens *and* the AST as the 
AST is (by definition) distilled and re-organized from the tokens. The AST could drive the 
Outline panel, provide syntax checking and refactoring support, etc.

Once I have the lexer-partitioning interface working robustly, even with bad input, I can 
move on and start experimenting binding in the AST. Still, it's pretty cool to have 
automatic code coloration running off an ANTLR lexer with only about 8 hours of work.

 ...Richard




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rd_clark at sbcglobal.net  Thu Aug  5 22:42:15 2004
From: rd_clark at sbcglobal.net (Richard Clark)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] 3.0 feature change request re: exceptions
Message-ID: <cev5nn+47gc@eGroups.com>

I've been working on automatic error recovery in my Eclipse editor (read: when the lexer 
chokes, package up the offending character in an error token) and noticed some problems 
with RecognitionException and its children.

In particular, MismatchedCharException and NoViableAltForCharException both deal with 
single-character lexer problems, but duplicate each other's code so I have to write if-
then-else chains using instanceof to tell them apart and extract the mismatched character.

It would be better to do this:
- RecognitionException
-- LexerRecognitionException
--- MismatchedCharException
--- NoViableAltForCharException

and put common getters into LexerRecognitionException, e.g. getFoundCharacter()

That would greatly simplify error processing and still be backward compatible.

 ...Richard




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From sk at z.pl  Fri Aug  6 08:53:25 2004
From: sk at z.pl (Sebastian Kaliszewski)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Expressions
In-Reply-To: <41129F0D.6060009@xtra.co.nz>
References: <411181CD.9030505@xtra.co.nz> <4112208C.4080003@softax.pl> <41129F0D.6060009@xtra.co.nz>
Message-ID: <4113A975.1060403@softax.pl>

Peter Ashford wrote:
> Okay, thanks for that.  My application is a simple scripting language 
> which can do simple formulas.  I was thinking of having all of the 
> expression rules return a VariableInfo class which stored any possible 
> value and could perform the basic expression operations on it (add, 
> minus, div, mult etc) - my idea being to handle the semantic issues 
> within the VariableInfo class (it will check types, throw exceptions for 
> mismatches, perform arithmetic options if legal)
> 
> Does that sound like a basically sane approach to take?

Yes, it seems prefectly reasonable.

rgds
-- 
Sebastian Kaliszewski


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From mtiller at ford.com  Fri Aug  6 12:11:23 2004
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: ANTLR+Eclipse
Message-ID: <FD35CB8B26F9534E86D1AC31F401AB3404023AEF@na1fcm52.dearborn.ford.com>

Please keep us posted on your progress.  It would be great if you could
share what you have as well.  I general purpose framework for creating
ANTLR based editors (with all the bells and whistles you describe like
outlining, etc) would be a really great contribution in my opinion.

--
Mike

> -----Original Message-----
> From: Richard Clark [mailto:rd_clark@sbcglobal.net]
> Sent: Friday, August 06, 2004 12:21 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: ANTLR+Eclipse
> 
> --- In antlr-interest@yahoogroups.com, "Tiller, Michael \(M.M.\)"
> <mtiller@f...> wrote:
> > I was wondering if anybody had ever tried to use ANTLR to implement
a
> > scanner in Eclipse. [snip]
> 
> I've gotten a great start on this yesterday and today. In particular,
I
> was able to replace the
> rule-based partition scanner with one driven by an ANTLR-generated
lexer.
> It's still going
> to need some work to be more robust in the face of lexing errors (e.g.
> illegal characters in
> the input), but I'm working on it. :)
> 
> > It seems like all that would be required would be to interface the
lexer
> > to the Eclipse representation of a document (so you could scan the
> > characters in the document) ...
> 
> Done. I had to create my own plug-compatible replacement for the
> InputBuffer class (as
> indicated by yesterday's post re: in-memory I/O.) I also created a
"lexer
> token" wrapper to
> bridge between ANTLR's tokens and Eclipse's IToken.
> 
> > ... and then somehow tuck the results away so
> > that subsequent calls to specialized token scanners, etc. wouldn't
even
> > look at the document but would instead just return information based
on
> > walking the AST.
> 
> A syntax-based editor would need both the low-level lexer tokens *and*
the
> AST as the
> AST is (by definition) distilled and re-organized from the tokens. The
AST
> could drive the
> Outline panel, provide syntax checking and refactoring support, etc.
> 
> Once I have the lexer-partitioning interface working robustly, even
with
> bad input, I can
> move on and start experimenting binding in the AST. Still, it's pretty
> cool to have
> automatic code coloration running off an ANTLR lexer with only about 8
> hours of work.
> 
>  ...Richard
> 
> 
> 
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rd_clark at sbcglobal.net  Fri Aug  6 12:48:45 2004
From: rd_clark at sbcglobal.net (Richard Clark)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: ANTLR+Eclipse
In-Reply-To: <FD35CB8B26F9534E86D1AC31F401AB3404023AEF@na1fcm52.dearborn.ford.com>
References: <FD35CB8B26F9534E86D1AC31F401AB3404023AEF@na1fcm52.dearborn.ford.com>
Message-ID: <A0B7DCEE-E7E1-11D8-90F3-000A95AF74F0@nextquestion.net>


On Aug 6, 2004, at 12:11, Tiller, Michael ((M.M.)) wrote:

> Please keep us posted on your progress.  It would be great if you could
> share what you have as well.

That's my plan :) I have uses for this for some other projects, and 
it's generic enough code that it would make sense to put it out there 
in the same fashion as ANTLR is out there.

  ...Richard



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From vthiruma1 at chn.cognizant.com  Sat Aug  7 05:49:29 2004
From: vthiruma1 at chn.cognizant.com (Veerasamy, Thirumalai (Cognizant))
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] I am planning to write a beautifier for Java (jaboby..)
Message-ID: <2E9DFD070E1DDF4997BF43D8C52AECE30B0BEAA6@ctsintcosxub.cts.com>


Hi Jon,

   As you said, I am not planning to write a new
formatter. I am planning to rewrite the jaloby code
with different formatting engine. Since jaloby used
the ANTLR, I wanted to know the following things.

   I will try out the tree construction documenation.
I downloaded the full pdf but couldn't locate the
part. let me check it out again

Regards
Thiru


Jon Schewe <jpschewe@mtu.net
<http://us.f132.mail.yahoo.com/ym/Compose?To=jpschewe@mtu.net&YY=99080&o
rder=down&sort=date&pos=0&view=a&head=b> > wrote:On Fri, 2004-07-30
at 09:50, thirumalaikv wrote:
> Hi
> I am planning to write a beautifier for Java, which
will
> automatically beautify the code based on certain
rules. I have

Any particular reason the ones that currently exist
don't fit your
needs? You might be better off enhancing an existing
one, rather than
starting from scratch.

> 1. I want Special Tokens(spaces, comments,
javadocs,...) part of the
> Token

You'll probably want to have two Parsers here, one for
the Java code and
one for the Javadoc comments.

> 2. I would like to know how to add/remove
tokens/nodes of AST/Token.

I seem to remember this is in the tree construction
documentation for
antlr, but could be mistaken.

> 3. Java 1.3.1 grammar

One can be found on the antlr website, although it
tosses comments,
which is why I suggested two parsers in 1


This e-mail and any files transmitted with it are for the sole use of the intended recipient(s) and may contain confidential and privileged information.
If you are not the intended recipient, please contact the sender by reply e-mail and destroy all copies of the original message.
Any unauthorised review, use, disclosure, dissemination, forwarding, printing or copying of this email or any action taken in reliance on this e-mail is strictly
prohibited and may be unlawful.

  Visit us at http://www.cognizant.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040807/365d39af/attachment.html
From oliver at zeigermann.de  Sat Aug  7 07:03:46 2004
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] XML transformation support for 3.0
Message-ID: <4114E142.2080704@zeigermann.de>

Folks!

ANTLR 3.0 seems to actually make it and I am looking forward to it. It 
was once discussed to add XML transformation support to ANTLR. If 
Terence and the rest of the ANTLR community still are interested I can 
help with that.

I have added XML transformation support to 2.x and it turned out to be a 
very poweful, yet a bit less convenient alternative to XSLT.

Now, as ANTLR 3.0 might allow interpreted *and* compiled parsing and - 
if things go well ;) - will allow for a standard syntax for AST 
construction etc. it will suit nearly perfect for XML transformations. 
The interpreted thing with only standard syntax for AST creation for 
simply ad hoc transformations and the compiled version for complex and 
performance critical stuff.

What do I want from you:
(1) Is the time right to start a discussion about it now?
(2) Is anybody interested in this in the first place?

Oliver



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From jean-louis.boulanger at hds.utc.fr  Sat Aug  7 08:22:47 2004
From: jean-louis.boulanger at hds.utc.fr (Boulanger Jean-Louis)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] XML transformation support for 3.0
In-Reply-To: <4114E142.2080704@zeigermann.de>
References: <4114E142.2080704@zeigermann.de>
Message-ID: <1091892167.4114f3c768a1e@mail.hds.utc.fr>

Hello

XML is a very important way for ANTLR and ANTLR 3.0.
One of interest thing, is the posibility to write an AST to XML and to read an
XML file for "regenerate" the AST.

boulanger jl

Quoting Oliver Zeigermann <oliver@zeigermann.de>:

> Folks!
> 
> ANTLR 3.0 seems to actually make it and I am looking forward to it. It 
> was once discussed to add XML transformation support to ANTLR. If 
> Terence and the rest of the ANTLR community still are interested I can 
> help with that.
> 
> I have added XML transformation support to 2.x and it turned out to be a 
> very poweful, yet a bit less convenient alternative to XSLT.
> 
> Now, as ANTLR 3.0 might allow interpreted *and* compiled parsing and - 
> if things go well ;) - will allow for a standard syntax for AST 
> construction etc. it will suit nearly perfect for XML transformations. 
> The interpreted thing with only standard syntax for AST creation for 
> simply ad hoc transformations and the compiled version for complex and 
> performance critical stuff.
> 
> What do I want from you:
> (1) Is the time right to start a discussion about it now?
> (2) Is anybody interested in this in the first place?
> 
> Oliver
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 




-------------------------------------------------
Laboratoire Heudiasyc. UMR CNRS 6599
http://www.hds.utc.fr


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From xdecoret at free.fr  Sat Aug  7 15:42:02 2004
From: xdecoret at free.fr (xdecoret)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] selector do not exist in C++ mode
Message-ID: <cf3lrq+qubq@eGroups.com>

Hi, I am trying to understand the multiplexing of lexers but I am
stuck because when I try to get the example of the documentation (but
translated to C++ not Java), it tells me that selector.push("mylexer")
is not a method of the lexer.

Does anybody have an example of multiplexing in C++?





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Sun Aug  8 14:54:56 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] XML transformation support for 3.0
In-Reply-To: <4114E142.2080704@zeigermann.de>
References: <4114E142.2080704@zeigermann.de>
Message-ID: <96381FDC-E985-11D8-A2DD-000A95891192@cs.usfca.edu>


On Aug 7, 2004, at 7:03 AM, Oliver Zeigermann wrote:

> Folks!
>
> ANTLR 3.0 seems to actually make it and I am looking forward to it. It
> was once discussed to add XML transformation support to ANTLR. If
> Terence and the rest of the ANTLR community still are interested I can
> help with that.
>
> I have added XML transformation support to 2.x and it turned out to be 
> a
> very poweful, yet a bit less convenient alternative to XSLT.
>
> Now, as ANTLR 3.0 might allow interpreted *and* compiled parsing and -
> if things go well ;) - will allow for a standard syntax for AST
> construction etc. it will suit nearly perfect for XML transformations.
> The interpreted thing with only standard syntax for AST creation for
> simply ad hoc transformations and the compiled version for complex and
> performance critical stuff.

Hi,

I hope to make ANTLR's trees be XML compatible or compliant or 
convertible etc... (there is an unfortunately method naming/return type 
issue). XML is just a tree so I expect to support XML transformations 
in that sense.  You'll never see anything like xpath or whatever come 
from me, however....What kind of transformations were you thinking 
about?

For sure, we should have a standard XML parser and generator, though, 
right?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Sun Aug  8 14:57:46 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: 3.0 multiple language support
In-Reply-To: <004d01c47922$82832be0$0100a8c0@xpbaby>
References: <cemcu3+47k8@eGroups.com> <004d01c47922$82832be0$0100a8c0@xpbaby>
Message-ID: <FB80F88A-E985-11D8-A2DD-000A95891192@cs.usfca.edu>


On Aug 2, 2004, at 11:24 PM, Robin Debreuil wrote:

> One tiny thing that could really go a long way is to change the 
> wording of
> getType() currently used. In C# GetType() is an object member, so 
> having
> that there unmodified means these two names only differ by case. This 
> means
> it isn't CLS compliant (some languages aren't case sensitive, like 
> VB). This
> means that while you can black box call the antlr.runtime.dll, but you 
> can't
> do things like subclass AST for example, which otherwise you could. So 
> other
> languages can only use grammars already created, they can't really use 
> antlr
> itself.
>
> I know it isn't that big a deal to work around once you know your way 
> around
> antlr, but it is a pretty intimidating first step to have to take. 
> After
> that, you still have things like java naming conventions/styles that 
> make
> things a bit akward, it might be nice if all that was abstracted 
> somehow and
> could be set per language  (as per this conversation I know).

Seems like a standard action (outside of a language-specific action 
block) such as newline and skip and settype would be useful.  Then 
those could be translated to the target language via templates.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Sun Aug  8 15:00:39 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] 3.0 multiple language support
In-Reply-To: <FD35CB8B26F9534E86D1AC31F401AB340483FC7B@na1fcm52.dearborn.ford.com>
References: <FD35CB8B26F9534E86D1AC31F401AB340483FC7B@na1fcm52.dearborn.ford.com>
Message-ID: <624A5E47-E986-11D8-A2DD-000A95891192@cs.usfca.edu>


On Aug 3, 2004, at 9:55 AM, Tiller, Michael (M.M.) wrote:
> Of the options I have seen so far, I prefer the one where the grammar
> just has macros and the actions themselves are specified outside the
> grammar, e.g.
>
> some_rule
>    : a:A "," b:B << process_some_rule(a,b); >>
>
> And then you could weave together an action file with a grammar file.
> So you might have a C++ action file:
>
> void process_some_rule(A *a, B* b)
> {
>   /* Do something very general in this language */
> }

Hi Mike,

The only problem with this approach is that you cannot access variables 
/ attributes of the invoking rule w/o passing them in.  Sometimes you 
need to create locals (due to requirements of recursion) that are 
currently unavailable and then modify the action event trigger 
interface, thereby invaliding all existing grammars.

> With this approach, the only thing you need to formalize are the 
> calling
> conventions (how names and arguments map between the macro language and
> the action language).  One nice consequence of this would be that, for 
> a
> given grammar, you could automatically generate the interface and/or
> function prototypes for it (based on the content of the grammar and the
> conventions).

Well action placement is very important as well.  You cannot put action 
triggers at every location.  Every time I've tried this approach it 
works "ok" for one application but not for more than that.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Sun Aug  8 15:02:06 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] 3.0 multiple language support
In-Reply-To: <20040803173406.GO12872@cs.utwente.nl>
References: <FD35CB8B26F9534E86D1AC31F401AB340483FC7B@na1fcm52.dearborn.ford.com> <20040803173406.GO12872@cs.utwente.nl>
Message-ID: <964BE392-E986-11D8-A2DD-000A95891192@cs.usfca.edu>


On Aug 3, 2004, at 10:34 AM, Ric Klaren wrote:
> How many people are actively using one grammar cross language? Is this
> really worth the effort?

An important question.  i would be highly satisfied if, as a first 
attempt, we got it so we could build lexers independent of a language 
and also build trees independent of the language.  ANTLR 2.x sort of 
allows this for simple trees.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Sun Aug  8 15:03:12 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] 3.0 multiple language support
In-Reply-To: <410FFC46.80802@acm.org>
References: <FD35CB8B26F9534E86D1AC31F401AB340483FC7B@na1fcm52.dearborn.ford.com> <20040803173406.GO12872@cs.utwente.nl> <410FFC46.80802@acm.org>
Message-ID: <BD76FD8B-E986-11D8-A2DD-000A95891192@cs.usfca.edu>


On Aug 3, 2004, at 1:57 PM, Rodrigo B. de Oliveira wrote:
> Sorry for getting late on the thread but have you already considered 
> the
> idea of an action language?
>
> By action language I mean a very simple language with basic constructs
> that could then be translated to whatever
> language the generated parser will be in.

Yep, I called this NIL: neutral imperative language in my notes ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Sun Aug  8 15:10:38 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] 3.0 multiple language support
In-Reply-To: <FD35CB8B26F9534E86D1AC31F401AB340483FC7F@na1fcm52.dearborn.ford.com>
References: <FD35CB8B26F9534E86D1AC31F401AB340483FC7F@na1fcm52.dearborn.ford.com>
Message-ID: <C783710A-E987-11D8-A2DD-000A95891192@cs.usfca.edu>

On Aug 4, 2004, at 10:29 AM, Tiller, Michael (M.M.) wrote:
> Based on the response to this thread, it seems like different people
> would approach this kind of thing in different ways.  So it seems like
> the best solution is to be as flexible as possible.  I think a basic
> action language could be used to handle most grammar related actions.
> For people who need to support multiple languages I think the macro
> approach makes sense.  For those who still want language specific
> actions in the grammar, I never objected to having that as well.

Yep, flexibility will remain key.  I think it is fruitless to try to 
make a grammar with extremely complicated actions like a full pascal->C 
translator language independent. At best, we can hope for a 
tree-building grammar possibly with symbol table management actions 
for, in this example, pascal.  Then have some templates/example 
pascal-AST tree walker grammars people can use for their specific 
application (such as C translation).  This puts the 
application-specific code out of the way of the most re-usable 
component, the parser/tree-builder pascal.g.  The tree walkers will 
mostly be application specific so there is no point worrying about 
making them language independent.

As a tactical issue, I wonder if having two kinds of actions is 
appropriate, one for a simple target independent action-language and 
one for language specific stuff.  Perhaps <<language specific>> and 
{antlr actions like newline}.  Just thinking out loud.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From charlweed at yahoo.com  Sun Aug  8 15:09:11 2004
From: charlweed at yahoo.com (charlweed)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] antlr.TokenWithIndex (and others) should be an interface
Message-ID: <cf68a7+b227@eGroups.com>

Hi,
I love TokenStreamRewriteEngine but it uses antlr.TokenWithIndex, and
TokenWithIndex is neither an interface nor an Adbstract class. I
already use a token that is a subclass of CommonHiddenStreamToken, but
I want to also use it in TokenStreamRewriteEngine.

The only solution was to re-implement TokenStreamRewriteEngine , and
replace all the references to antlr.TokenWithIndex with a reference to
an iterface with the same signature.

So it seems to me that almost all the Token classes should be
interfaces, and there should be a handful of default implementations.
That way we can easily extend tokens without the hassle of re-coding
other classes in antlr.

Charlweed



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Sun Aug  8 15:22:40 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] antlr.TokenWithIndex (and others) should be an interface
In-Reply-To: <cf68a7+b227@eGroups.com>
References: <cf68a7+b227@eGroups.com>
Message-ID: <759FB32C-E989-11D8-A2DD-000A95891192@cs.usfca.edu>


On Aug 8, 2004, at 3:09 PM, charlweed wrote:

> Hi,
> I love TokenStreamRewriteEngine but it uses antlr.TokenWithIndex, and
> TokenWithIndex is neither an interface nor an Adbstract class. I
> already use a token that is a subclass of CommonHiddenStreamToken, but
> I want to also use it in TokenStreamRewriteEngine.
>
> The only solution was to re-implement TokenStreamRewriteEngine , and
> replace all the references to antlr.TokenWithIndex with a reference to
> an iterface with the same signature.

Ack...you're right...for existing token definitions this would be hard; 
well, ones that subclass the hidden stream stuff.

I might ask, however, if it's necessary to use both the rewrite engine 
and the hidden channel stuff.

> So it seems to me that almost all the Token classes should be
> interfaces, and there should be a handful of default implementations.
> That way we can easily extend tokens without the hassle of re-coding
> other classes in antlr.

In many cases this makes sense.  I wonder how many people add 
properties to the token object.  I ask this because I'm thinking of 
(germane to our discussions of antlr common actions) making it easy 
within a grammar to specify both AST and token properties.  ANTLR would 
generate a specific impl of AST or Token (interfaces) that had all your 
goodies.  In this way, ANTLR actions would know if there was in fact a 
xxx property in the AST they are accessing etc...

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From charlweed at yahoo.com  Sun Aug  8 16:06:15 2004
From: charlweed at yahoo.com (charlweed)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: antlr.TokenWithIndex (and others) should be an interface
In-Reply-To: <759FB32C-E989-11D8-A2DD-000A95891192@cs.usfca.edu>
Message-ID: <cf6bl7+jngq@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...>
wrote:

> I might ask, however, if it's necessary to use both the rewrite
engine 
> and the hidden channel stuff.

I think I'll always need to know exacly where a token came from. My
project adds lots of source manipulation to NetBeans
(http://www.netbeans.org). It has lots of Java semantics hard coded
in, plus it needs context within the edited document. I'm pleased
about replacing the hideous and brittle AST manipulations with rewrite
rules in the grammar, but currently the whole codebase is completely
dependent on the hidden channel stuff, and its a bear to test the
validity of the re-generated code.

> In many cases this makes sense.  I wonder how many people add 
> properties to the token object.  I ask this because I'm thinking of 
> (germane to our discussions of antlr common actions) making it easy 
> within a grammar to specify both AST and token properties.  ANTLR
would 
> generate a specific impl of AST or Token (interfaces) that had all
your 
> goodies.  In this way, ANTLR actions would know if there was in
fact a 
> xxx property in the AST they are accessing etc...
> 
This sounds like it would be great! IDEs like NetBeans, are
extendable, but the most useful thing one wants to do involves
processing the source code. This requires parsing the code, and novel
manipulations on the code structures. There are all kinds of
properties one would want to assign to tokens or ASTs, but within
different contexts. It seems to me that specifying both AST and token
properties within subclass of a grammar would make it much easier to
make refactoring tools, metrics tools, "beanifiers", etc, and I'm
interested in those.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Sun Aug  8 16:52:07 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: 3.0 multiple language support
In-Reply-To: <964BE392-E986-11D8-A2DD-000A95891192@cs.usfca.edu>
Message-ID: <cf6eb7+ckt7@eGroups.com>

This is somewhat of a "chicken and egg" question.  I would very much
like to be able to use one grammar with multiple target
languages--that would make it easier to migrate some key applications
to Java from C++, and to be able to develop other stuff in Java and
migrate it to C++--Java development tools are so much better than the
C++ tools that this would be faster.  I also note that one of the
common questions posted by newbies is "is there a Java version of
Wigg's C++ grammar?"

--Loring


--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> 
> On Aug 3, 2004, at 10:34 AM, Ric Klaren wrote:
> > How many people are actively using one grammar cross language? Is this
> > really worth the effort?
> 
> An important question.  i would be highly satisfied if, as a first 
> attempt, we got it so we could build lexers independent of a language 
> and also build trees independent of the language.  ANTLR 2.x sort of 
> allows this for simple trees.
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From atripp at comcast.net  Sun Aug  8 21:38:43 2004
From: atripp at comcast.net (atripp54321)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: 3.0 multiple language support
In-Reply-To: <20040803173406.GO12872@cs.utwente.nl>
Message-ID: <cf6v4j+1cjl@eGroups.com>

Ric,
Just curious... what is that graphical grammar editor 
that you mentioned?

Thanks,
Andy



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From oliver at zeigermann.de  Mon Aug  9 00:13:02 2004
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] XML transformation support for 3.0
In-Reply-To: <96381FDC-E985-11D8-A2DD-000A95891192@cs.usfca.edu>
References: <4114E142.2080704@zeigermann.de> <96381FDC-E985-11D8-A2DD-000A95891192@cs.usfca.edu>
Message-ID: <411723FE.3040902@zeigermann.de>

Terence Parr wrote:

> On Aug 7, 2004, at 7:03 AM, Oliver Zeigermann wrote:
> 
> 
>>Folks!
>>
>>ANTLR 3.0 seems to actually make it and I am looking forward to it. It
>>was once discussed to add XML transformation support to ANTLR. If
>>Terence and the rest of the ANTLR community still are interested I can
>>help with that.
>>
>>I have added XML transformation support to 2.x and it turned out to be 
>>a
>>very poweful, yet a bit less convenient alternative to XSLT.
>>
>>Now, as ANTLR 3.0 might allow interpreted *and* compiled parsing and -
>>if things go well ;) - will allow for a standard syntax for AST
>>construction etc. it will suit nearly perfect for XML transformations.
>>The interpreted thing with only standard syntax for AST creation for
>>simply ad hoc transformations and the compiled version for complex and
>>performance critical stuff.
> 
> 
> Hi,
> 
> I hope to make ANTLR's trees be XML compatible or compliant or 
> convertible etc... (there is an unfortunately method naming/return type 

Not sure if we talk about the same thing here. Are you talking about 
ASTs supporting DOM interfaces or such? Why that? I'd say do not bother 
about compatibility with XML APIs. If someone wants DOM simply let him 
write an adapter. If someone wants PDOM? Same thing...


> issue). XML is just a tree so I expect to support XML transformations 
> in that sense.  You'll never see anything like xpath or whatever come 
> from me, however....What kind of transformations were you thinking 
> about?

Of course you can easily transform *generic* XML without any problem, 
but also without the most benefit. In generic XML you would have token 
types like "start element", "end element" and "text".

To make use of the full power of ANTLR you would have to have a token 
type for *each* element possible in the XML to transform. This is a bit 
harder to do, but leads to great (and I repeat myself *great*) 
transaformation power both in obviousness and brevity of code certainly 
unmatched by XSLT or any other XML/SGML transformation language I can 
across.

If desired I can give an example how a generic and a specific grammar 
would look like, omitted it here to keep the post small...

> For sure, we should have a standard XML parser and generator, though, 
> right?

Standard XML parsers can interface to SAX, DOM and some to a new 
straming API. Would be best to interface ANTLR to all of them. Would be 
great if we not only had it interface to ASTs, but also to token 
streams. I can go into detail if anyone is interested.

Oliver


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From oliver at zeigermann.de  Mon Aug  9 00:47:28 2004
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: 2004 ANTLR Workshop; Oct 7-8, USF
In-Reply-To: <65DD2436-DB55-11D8-8CBE-000A95891192@cs.usfca.edu>
Message-ID: <cf7a6g+dgvq@eGroups.com>

I was a bit off line lately, but this sounds interesting.

I would like to take the opportunety to tell you people about XML and
why it is a natural fit with ANTLR. I know Terence is no friend of XML
and this will make it hard. However, I know my position is almost
identical to his and I it is my obligation to make this clear ;)

Position: XML is a human read, machine read/write format.

I life on the other side of the globe and this will make my attendance
very unlikely. Maybe I can write something down and someone else takes
care of it there? Maybe even talks about it there?

Just a quick idea...

Oliver

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> Howdy folks,
> 
> I'll do a more formal announcement next week, but I just received word 
> that we have received ACM "in cooperation" status for this year's ANTLR 
> workshop!  So, reserve Oct 7-8 for a total geekfest. :)  Recall that 
> it's at University of San Francisco.  I have gotten valet parking set 
> up for the first day, Thursday.  Friday is easy parking; I'll just get 
> car placards for people that are coming.  Weather should be awesome!
> 
> You can either just plain attend or you can make a presentation.  Heck, 
> you could even submit a "position" paper in lieu of presentation if 
> you're uninterested in speaking.  The committee:
> 
> Terence Parr, USF
> Loring Craymer, JPL
> Monty Zukowski
> Sriram Srinivasan
> 
> will review submissions for appropriateness etc... :)
> 
> Admission/parking will be free, by the way, but limited to about 40 
> people.
> 
> Best regards,
> Terence
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!
> Cofounder, http://www.peerscope.com pure link sharing



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Mon Aug  9 01:47:12 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: 3.0 multiple language support
In-Reply-To: <cf6v4j+1cjl@eGroups.com>
References: <20040803173406.GO12872@cs.utwente.nl> <cf6v4j+1cjl@eGroups.com>
Message-ID: <20040809084711.GA7275@cs.utwente.nl>

On Mon, Aug 09, 2004 at 04:38:43AM -0000, atripp54321 wrote:
> Just curious... what is that graphical grammar editor 
> that you mentioned?

http://fmt.cs.utwente.nl/tools/slade/

It was the tool used for compiler construction courses before the lecturer
switched to antlr. I'm not sure if the version for download is the same
version I worked with or a later one.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  There are 10 kinds of people - those that understand binary and
  those that don't. --- Unknown



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From gudnabrsam at yahoo.com  Mon Aug  9 07:14:49 2004
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] XML transformation support for 3.0
In-Reply-To: <411723FE.3040902@zeigermann.de>
Message-ID: <20040809141449.17673.qmail@web20423.mail.yahoo.com>

For what it's worth, Oliver's XPA package really does
make it nice and easy to specify an XML grammar using
ANTLR EBNF.

-Matt

--- Oliver Zeigermann <oliver@zeigermann.de> wrote:

> Terence Parr wrote:
> 
> > On Aug 7, 2004, at 7:03 AM, Oliver Zeigermann
> wrote:
> > 
> > 
> >>Folks!
> >>
> >>ANTLR 3.0 seems to actually make it and I am
> looking forward to it. It
> >>was once discussed to add XML transformation
> support to ANTLR. If
> >>Terence and the rest of the ANTLR community still
> are interested I can
> >>help with that.
> >>
> >>I have added XML transformation support to 2.x and
> it turned out to be 
> >>a
> >>very poweful, yet a bit less convenient
> alternative to XSLT.
> >>
> >>Now, as ANTLR 3.0 might allow interpreted *and*
> compiled parsing and -
> >>if things go well ;) - will allow for a standard
> syntax for AST
> >>construction etc. it will suit nearly perfect for
> XML transformations.
> >>The interpreted thing with only standard syntax
> for AST creation for
> >>simply ad hoc transformations and the compiled
> version for complex and
> >>performance critical stuff.
> > 
> > 
> > Hi,
> > 
> > I hope to make ANTLR's trees be XML compatible or
> compliant or 
> > convertible etc... (there is an unfortunately
> method naming/return type 
> 
> Not sure if we talk about the same thing here. Are
> you talking about 
> ASTs supporting DOM interfaces or such? Why that?
> I'd say do not bother 
> about compatibility with XML APIs. If someone wants
> DOM simply let him 
> write an adapter. If someone wants PDOM? Same
> thing...
> 
> 
> > issue). XML is just a tree so I expect to support
> XML transformations 
> > in that sense.  You'll never see anything like
> xpath or whatever come 
> > from me, however....What kind of transformations
> were you thinking 
> > about?
> 
> Of course you can easily transform *generic* XML
> without any problem, 
> but also without the most benefit. In generic XML
> you would have token 
> types like "start element", "end element" and
> "text".
> 
> To make use of the full power of ANTLR you would
> have to have a token 
> type for *each* element possible in the XML to
> transform. This is a bit 
> harder to do, but leads to great (and I repeat
> myself *great*) 
> transaformation power both in obviousness and
> brevity of code certainly 
> unmatched by XSLT or any other XML/SGML
> transformation language I can 
> across.
> 
> If desired I can give an example how a generic and a
> specific grammar 
> would look like, omitted it here to keep the post
> small...
> 
> > For sure, we should have a standard XML parser and
> generator, though, 
> > right?
> 
> Standard XML parsers can interface to SAX, DOM and
> some to a new 
> straming API. Would be best to interface ANTLR to
> all of them. Would be 
> great if we not only had it interface to ASTs, but
> also to token 
> streams. I can go into detail if anyone is
> interested.
> 
> Oliver
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>     antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 
> 



		
__________________________________
Do you Yahoo!?
New and Improved Yahoo! Mail - Send 10MB messages!
http://promotions.yahoo.com/new_mail 


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From kaffiene at xtra.co.nz  Mon Aug  9 15:16:14 2004
From: kaffiene at xtra.co.nz (Peter Ashford)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] probably simple question
Message-ID: <4117F7AE.1020100@xtra.co.nz>

Hi,

I've gone over the docs but I don't get how to fix lexical 
nondeterminism between keywords and identifiers.  My (relevant) lexer 
rules are printed below.  I keep getting nondetemrinism between ID and 
RESULT on the characters 'r' 'e' - oh, k is set to 2.  I've mucked 
around with the test literals feature and that doesn't seem to help.

Someone please put a dumb newbie out of his misery :o)

thanks,
Peter.

-----------------------------------
protected
DIGIT  : ('0'..'9');

protected
ALPHA  : ('a'..'z' | 'A'..'Z');

RESULT   : "result";

ID
options {
  paraphrase   = "an identifier";
  testLiterals = true;
}
       : ALPHA (ALPHA | DIGIT)*;


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From charlweed at yahoo.com  Mon Aug  9 15:32:07 2004
From: charlweed at yahoo.com (charlweed)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] I just want to know what the previous token was...
Message-ID: <cf8u17+o8pn@eGroups.com>

I hope this is an intermediate question and not an obvious newbie stumble.
I've read the manual and the FAQ and I just don't have a handle on
syntactic predicates for looking backwards.

I think I merely want to know what the PREVIOUS token actually was, so
I can rewrite the stream.

For example in Java source, I want to replace an identifier with a
getter. However, if the identifier is the operand of a decrement or
increment unary operator, I want to leave it alone:

j = _i ;// becomes j = getI();
_i++; // stays the same. Easy to detect, just look ahead.
--_i; // stays the same. I need to look back to see if the previous
Token is an INC or DEC

The easiest place to put my re-write method is within the identPrimary
rule. But at that point, I need to know if the previous token was an
INC or DEC and must therefore be unmodified. If I add a re-write
method within the rule for pre-increment or decrement, then I need
lots of logic to enable and disable the rewrite at identPrimary.

So, um
 what can I do?

Thanks,

Charlweed




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From jbb at acm.org  Mon Aug  9 15:30:07 2004
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] probably simple question
In-Reply-To: <4117F7AE.1020100@xtra.co.nz> (message from Peter Ashford on Tue,
	10 Aug 2004 10:16:14 +1200)
References: <4117F7AE.1020100@xtra.co.nz>
Message-ID: <E1BuIed-0004vX-00@gecko>

Mr. Ashford :-

Try:

-----------------------------------
tokens {
   RESULT="result";
}

protected
DIGIT  : ('0'..'9');

protected
ALPHA  : ('a'..'z' | 'A'..'Z');

ID
options {
  paraphrase   = "an identifier";
  testLiterals = true;
}
       : ALPHA (ALPHA | DIGIT)*;
-----------------------------------

That is, place your keywords into a tokens{} block and not in a lexer rule.
(I think the tokens{} block has to appear before any rules, but can't
remember for sure right now...)

Hope this helps...
	John B. Brodie


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From k2k2e6 at yahoo.com  Mon Aug  9 13:57:11 2004
From: k2k2e6 at yahoo.com (kitu kitu)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Parser rule's token list
Message-ID: <cf8of7+rjcr@eGroups.com>

Hi,

Is it possible to get a list of tokens as well as text equivalent
which a particular recognized parser rule has used? I am pretty sure
there is a function to get it, but I cannot seem to be able to find it
in the documentation or examples.

Thanks
-Pawan




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From bharath at starthis.com  Mon Aug  9 14:36:29 2004
From: bharath at starthis.com (Bharath Sundararaman)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Semantic analysis: implementation?
In-Reply-To: <759FB32C-E989-11D8-A2DD-000A95891192@cs.usfca.edu>
Message-ID: <000201c47e58$eefce730$03020a0a@starthis.com>

Hi all,

Is there any example language for which there is complete semantic analysis
implemented in ANTLR? I looked at PASCAL's symbol table and I found it a
great starting point. However, a complete example for any language would be
most helpful. For example, I am having problems with checking types with a
particular range (eg. -10 to +10) and so on.

Thanks!

Bharath.

-----Original Message-----
From: Terence Parr [mailto:parrt@cs.usfca.edu] 
Sent: Sunday, August 08, 2004 5:23 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] antlr.TokenWithIndex (and others) should be an
interface



On Aug 8, 2004, at 3:09 PM, charlweed wrote:

> Hi,
> I love TokenStreamRewriteEngine but it uses antlr.TokenWithIndex, and 
> TokenWithIndex is neither an interface nor an Adbstract class. I 
> already use a token that is a subclass of CommonHiddenStreamToken, but 
> I want to also use it in TokenStreamRewriteEngine.
>
> The only solution was to re-implement TokenStreamRewriteEngine , and 
> replace all the references to antlr.TokenWithIndex with a reference to 
> an iterface with the same signature.

Ack...you're right...for existing token definitions this would be hard; 
well, ones that subclass the hidden stream stuff.

I might ask, however, if it's necessary to use both the rewrite engine 
and the hidden channel stuff.

> So it seems to me that almost all the Token classes should be 
> interfaces, and there should be a handful of default implementations. 
> That way we can easily extend tokens without the hassle of re-coding 
> other classes in antlr.

In many cases this makes sense.  I wonder how many people add 
properties to the token object.  I ask this because I'm thinking of 
(germane to our discussions of antlr common actions) making it easy 
within a grammar to specify both AST and token properties.  ANTLR would 
generate a specific impl of AST or Token (interfaces) that had all your 
goodies.  In this way, ANTLR actions would know if there was in fact a 
xxx property in the AST they are accessing etc...

Ter
--
CS Professor & Grad Director, University of San Francisco Creator, ANTLR
Parser Generator, http://www.antlr.org Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links



 




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From charlweed at yahoo.com  Mon Aug  9 15:43:17 2004
From: charlweed at yahoo.com (charlweed)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Anything wrong with LT(-1); ? I want to get the previous token.
Message-ID: <cf8um5+l5nt@eGroups.com>

I think I merely want to know what the PREVIOUS token actually was, so
I can rewrite the stream. I tries LT(-1) and I was surprized that it
seemed to work!
However, is this a Bad Idea? I'm I going to run into some odd bugs by
using negitive arguments?

I want ther previous token because I want to replace an identifier
with a getter. However, if the identifier is the operand of a
decrement or increment unary operator, I want to leave it alone:

j = _i ;// becomes j = getI();
_i++; // stays the same. Easy to detect, just look ahead.
--_i; // stays the same. I need to look back to see if the previous
Token is an INC or DEC

The easiest place to put my re-write method is within the identPrimary
rule. But at that point, I need to know if the previous token was an
INC or DEC and must therefore be unmodified. If I add a re-write
method within the rule for pre-increment or decrement, then I need
lots of logic to enable and disable the rewrite at identPrimary.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From charlweed at yahoo.com  Mon Aug  9 16:13:20 2004
From: charlweed at yahoo.com (charlweed)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Re: Anything wrong with LT(-1); ? I want to get the previous token.
In-Reply-To: <cf8um5+l5nt@eGroups.com>
Message-ID: <cf90eg+3h2t@eGroups.com>

BTW the argument that works for LT seems to be zero, not -1;




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From k2k2e6 at yahoo.com  Mon Aug  9 15:47:26 2004
From: k2k2e6 at yahoo.com (kitu kitu)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Problem with EOF and infinite recursion
Message-ID: <cf8utu+j71b@eGroups.com>

I have the following grammar and for certain large inputs, I keep on
getting stack overflow. I am assuming that it is due to left recursion
in my grammar. Also, I cannot seem to tell Antlr how to deal with the
EOF. Also DOT keeps on giving me non-determinism problem even though
the code seems to run.

-Pawan

Here is the sample grammar:

class MyParser extends Parser;

options { k=2; buildAST=true; }

wholeinput:  toklist  EOF!
		;

toklist:  Number toklist
		| floating toklist
		| ALPHA toklist
		| WS toklist
		| PUNCT toklist
		| NEWLINE toklist
		| OTHER toklist
		;

floating: Number DOT Number
		| DOT Number
	;



class GeneratedLexer extends Lexer;

options { k=2; filter=true; }


ALPHA   : ('a'..'z'|'A'..'Z')+
        ;
        
        	  
Number : ('0'..'9')+ 
	   ;
	   	           
WS     :
    (' '| '\t')+
  ;
  
NEWLINE :
	('\r' | '\n' | "\r\n" )
	;
	
OTHER :
	('\u0000'..'\u0008' | '\u000B'..'\u000C' | '\u000E'..'\u001F' |
'\u007F')+
	;
	
DOT :
	('\u002E')
		;
        
PUNCT :
	('\u0021'..'\u002D' |'\u002F' | '\u003A'..'\u0040' |
'\u005B'..'\u0060' | '\u007B'..'\u007E')
	;






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rech at iese.fhg.de  Wed Aug 11 07:09:19 2004
From: rech at iese.fhg.de (=?iso-8859-1?B?SvZyZyBSZWNo?=)
Date: Mon Dec 20 16:17:09 2004
Subject: [antlr-interest] Parallel source code parsing?
Message-ID: <cfd9af+fd0f@eGroups.com>

Hi,
  I'm parsing sourcecode and need to extract the "normal" sourcecode 
as well as the AST from the code. Now I have the problem that while 
I can parse the code I additionally need to extract the code in raw 
ASCII without re-calculating the code from the AST.
 
For example, the result should look like this:
<Class name="c1" modifiers="a">
  <Inline-Class name="ic1" modifiers="a, b">
    ** SourceCode of Inline-Class with or without method code) **
  </Inline-Class>
  <Method name="meth1" modifiers="a, b">
    ** SourceCode of Method meth1 **
  </Method>
  ** SourceCode of Class c1 (with or without code from meth1) **
</Class>

Is it possible to copy code from the document during parsing and 
feed it to two different (sub-)parsers (e.g., one for AST generation 
and one for source extraction)? 
Has anyone a idea or solution that could help me?

Bye,
Joerg.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From gudnabrsam at yahoo.com  Wed Aug 11 07:22:35 2004
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Parallel source code parsing?
In-Reply-To: <cfd9af+fd0f@eGroups.com>
Message-ID: <20040811142235.45073.qmail@web20425.mail.yahoo.com>

FWIW, I wouldn't think it would be too difficult to
implement a TokenStream that could feed the same
tokens to >1 client.

-Matt

--- Jrg Rech <rech@iese.fhg.de> wrote:

> Hi,
>   I'm parsing sourcecode and need to extract the
> "normal" sourcecode 
> as well as the AST from the code. Now I have the
> problem that while 
> I can parse the code I additionally need to extract
> the code in raw 
> ASCII without re-calculating the code from the AST.
>  
> For example, the result should look like this:
> <Class name="c1" modifiers="a">
>   <Inline-Class name="ic1" modifiers="a, b">
>     ** SourceCode of Inline-Class with or without
> method code) **
>   </Inline-Class>
>   <Method name="meth1" modifiers="a, b">
>     ** SourceCode of Method meth1 **
>   </Method>
>   ** SourceCode of Class c1 (with or without code
> from meth1) **
> </Class>
> 
> Is it possible to copy code from the document during
> parsing and 
> feed it to two different (sub-)parsers (e.g., one
> for AST generation 
> and one for source extraction)? 
> Has anyone a idea or solution that could help me?
> 
> Bye,
> Joerg.
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
>     antlr-interest-unsubscribe@yahoogroups.com
> 
>  
> 
> 



		
__________________________________
Do you Yahoo!?
Yahoo! Mail - 50x more storage than other providers!
http://promotions.yahoo.com/new_mail


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Wed Aug 11 07:42:47 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Parallel source code parsing?
In-Reply-To: <cfd9af+fd0f@eGroups.com>
References: <cfd9af+fd0f@eGroups.com>
Message-ID: <20040811144247.GB8433@cs.utwente.nl>

On Wed, Aug 11, 2004 at 02:09:19PM -0000, J?rg Rech wrote:
>   I'm parsing sourcecode and need to extract the "normal" sourcecode
> as well as the AST from the code. Now I have the problem that while
> I can parse the code I additionally need to extract the code in raw
> ASCII without re-calculating the code from the AST.
>
> For example, the result should look like this:
> <Class name="c1" modifiers="a">
>   <Inline-Class name="ic1" modifiers="a, b">
>     ** SourceCode of Inline-Class with or without method code) **
>   </Inline-Class>
>   <Method name="meth1" modifiers="a, b">
>     ** SourceCode of Method meth1 **
>   </Method>
>   ** SourceCode of Class c1 (with or without code from meth1) **
> </Class>
>
> Is it possible to copy code from the document during parsing and
> feed it to two different (sub-)parsers (e.g., one for AST generation
> and one for source extraction)?
> Has anyone a idea or solution that could help me?

With some tinkering with the inputbuffers/lexer and token classes you might
get file offsets recorded in the tokens. Carrying the offsets over to the
AST should be trivial. Then when generating the 'xml' open the file another
time and read the chunks directly from the input file into place. At least
that's an idea when you don't need to parse the code again for some other
purpose.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
 "Don't call me stupid." "Oh, right. To call you stupid would be an insult
    to stupid people. I've known sheep that could outwit you! I've worn
              dresses with higher IQs!" --- A Fish Called Wanda



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Wed Aug 11 11:59:06 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] rooting a parser rule rather than a token
Message-ID: <cfdq9q+uf1m@eGroups.com>

I'm not sure why, but antlr doesn't currently allow you to make a call
to a rule from another rule an AST root.  So, you can't do something
like this:

binary_expression : primary (binary_operator^ primary)* ;

I haven't yet dove into the antlr code generation to completely fix
this issue, but you can get around this issue with these changes:


1. Instead of using "^" to root the rule, discard it using "!" and
then put in this action: {astFactory.makeASTRoot(currentAST,
returnAST);}.  For example, the above rule would become:

binary_expression : primary (
    binary_operator! {astFactory.makeASTRoot(currentAST, returnAST);}
    primary
)* ;


2. If your rule you want to root contains more than one token and it
can be at the beginning of the rule calling it, there is a bug in the
routine makeASTRoot in ASTFactory.java.  Change "currentAST.child =
currentAST.root;" to "currentAST.child = root.getFirstChild();" to fix
the problem.  I did this in a copy of ASTFactory.java in my local
antlr directory instead of changing the source.


3. This simple fix doesn't handle the case where the the rule you want
to root is a list of 2 or more tokens (i.e. has 2 or more tokens and
is unrooted).  I can't think of a case where you'd want to root such a
rule, but if you did want to do this, make these changes in
ASTFactory.java:

a. In addASTChild, change "currentAST.root.setFirstChild(child);" to:
    currentAST.child = currentAST.root;
    currentAST.advanceChildToEnd();
    currentAST.child.setFirstChild(child);

b. In makeASTRoot, change "currentAST.child = currentAST.root;" to:
    currentAST.child = root;
    currentAST.advanceChildToEnd();
    currentAST.child = currentAST.child.getFirstChild();

These changes *should* be backwards compatible.  It also allows you to
make AST's that have separate left and right/normal children pointers
to preserve token order.

Anybody want to figure out how to antlr code generation do the right
thing for using "^" with a rule instead of a token?  It's probably
trivial.

I have more AST suggestions, so expect another message...

Eric




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From bharath at starthis.com  Wed Aug 11 12:52:03 2004
From: bharath at starthis.com (Bharath Sundararaman)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] A simple Type related question.
In-Reply-To: <1091243316.21782.4.camel@workstation.mn.mtu.net>
Message-ID: <000401c47fdc$acf8b690$03020a0a@starthis.com>

Hi all,

If you had the following statement in your code: "int a := 100000000;" and
you wanted to prompt an error, how can it be done? I use the
integer.parseInt() method to check the range but I have a LONG INTEGER which
can go upto 2^64, which means I cant use Integer.parseInt() to check its
range. Also, how do I check real values? I have a REAL and a LONG REAL and
I'm not sure how to check if the values assigned to them will be acceptable.

Thanks,

Bharath.

-----Original Message-----
From: Jon Schewe [mailto:jpschewe@mtu.net] 
Sent: Friday, July 30, 2004 10:09 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] I am planning to write a beautifier for
Java(jaboby..)


On Fri, 2004-07-30 at 09:50, thirumalaikv wrote:
> Hi
> I am planning to write a beautifier for Java, which will 
> automatically beautify the code based on certain rules. I have 

Any particular reason the ones that currently exist don't fit your needs?
You might be better off enhancing an existing one, rather than starting from
scratch.

> 1. I want Special Tokens(spaces, comments, javadocs,...) part of the
> Token 

You'll probably want to have two Parsers here, one for the Java code and one
for the Javadoc comments.

> 2. I would like to know how to add/remove tokens/nodes of AST/Token.

I seem to remember this is in the tree construction documentation for antlr,
but could be mistaken.

> 3. Java 1.3.1 grammar

One can be found on the antlr website, although it tosses comments, which is
why I suggested two parsers in 1.
 
-- 
Jon Schewe | http://mtu.net/~jpschewe
GPG signature at http://mtu.net/~jpschewe/gpg.sig.html
For I am convinced that neither death nor life, neither angels 
nor demons, neither the present nor the future, nor any 
powers, neither height nor depth, nor anything else in all 
creation, will be able to separate us from the love of God that 
is in Christ Jesus our Lord. - Romans 8:38-39




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Wed Aug 11 13:35:52 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] AST enhancements
Message-ID: <cfdvv8+qb1q@eGroups.com>

While I'm thinking about it, here is a list of things that would be
nice to have regarding AST's:

1. Allow for sub-rules to have there own root rather than always
rooting the super-rule.  This is described in the documentation as
labeled sub-rules, but apparently is not implemented.  Right now to
get the right AST struture you have to partition the rules to get the
right roots.

2. Allow rule references in addtion to token references to be rooted.
 This feature was described in my previous message.  Right now you may
have to flatten the rules to get the right roots.

3. Have a standard interface for separating/storing/retrieving
children to the left vs. right of the root so that token order can be
easily preserved.  Right now with the way ASTFactory does things, the
current interface can be used to get the token order correct, but the
"addChild" definition must be changed (insert child at beginning
instead of end).  Instead, I think the interface and ASTFactory should
assume that the AST's keep order, but the implementation wouldn't have
to.  Maybe all that is needed is a redefinition of addChild (insert to
the left of the left children), and a few methods which return
separate left and right children lists (non-ordered ASTs would return
the whole list or nothing for these).

4. Consider using a more generic "List" like interface storing sibling
lists.  This way you can have implementations other than linked lists
and you can get easy random access.

5. Add some symbol table stuff.  It would be nice to be able to easily
store symbol table data in the AST.  I haven't thought through the
details yet, but I was thinking you'd have some suffix to say you
wanted something to be a key in a symbol table and the "children" ASTs
would be the value for this entry.  This could work similar to the "^"
 AST operator, but instead of making a root with children, it would
make a map entry.

Eric





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From plsk_9 at hotmail.com  Wed Aug 11 14:03:48 2004
From: plsk_9 at hotmail.com (npettersson)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Line number information
Message-ID: <cfe1jk+crlt@eGroups.com>

Hi

I'm a new user of ANTLR and have been working with it for a few month 
now.

I've been parsing C#-code and generating AST's but I don't know how to 
get the row numbers included as nodes in the AST?

Can someone show me a simple example on how to do this?

kind regards/ Niklas




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Wed Aug 11 14:14:41 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Re: rooting a parser rule rather than a token
In-Reply-To: <cfdq9q+uf1m@eGroups.com>
Message-ID: <cfe281+bq44@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Eric Mahurin"
<eric_mahurin@y...> wrote:
> I'm not sure why, but antlr doesn't currently allow you to make a call
> to a rule from another rule an AST root.  So, you can't do something
> like this:
> 
> binary_expression : primary (binary_operator^ primary)* ;
> 
That's a feature, not a bug.  It prevents you from losing any children
of the binary_operator root AST.  We did talk about this particular
topic at the cabal, and ANTLR 3 may provide a different approach.

--Loring



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Wed Aug 11 15:12:42 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Re: AST enhancements
In-Reply-To: <cfdvv8+qb1q@eGroups.com>
Message-ID: <cfe5kq+g3au@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Eric Mahurin"
<eric_mahurin@y...> wrote:
> While I'm thinking about it, here is a list of things that would be
> nice to have regarding AST's:
> 
> 1. Allow for sub-rules to have there own root rather than always
> rooting the super-rule.  This is described in the documentation as
> labeled sub-rules, but apparently is not implemented.  Right now to
> get the right AST struture you have to partition the rules to get the
> right roots.
> 

Labeled subrules may or may not be supported in ANTLR 3.  I have
machinery that could support that (if our intellectual property office
ever gets around to giving me permission to release an ANTLR 2.8), but
my rewrite syntax provides an alternative which Ter thought he
preferred at the cabal.

> 2. Allow rule references in addtion to token references to be rooted.
>  This feature was described in my previous message.  Right now you may
> have to flatten the rules to get the right roots.
> 
> 3. Have a standard interface for separating/storing/retrieving
> children to the left vs. right of the root so that token order can be
> easily preserved.  Right now with the way ASTFactory does things, the
> current interface can be used to get the token order correct, but the
> "addChild" definition must be changed (insert child at beginning
> instead of end).  Instead, I think the interface and ASTFactory should
> assume that the AST's keep order, but the implementation wouldn't have
> to.  Maybe all that is needed is a redefinition of addChild (insert to
> the left of the left children), and a few methods which return
> separate left and right children lists (non-ordered ASTs would return
> the whole list or nothing for these).

That's a major interface change which ain't going to happen.  A better
alternative is provided by Ter's TokenStreamRewriteEngine

> 
> 4. Consider using a more generic "List" like interface storing sibling
> lists.  This way you can have implementations other than linked lists
> and you can get easy random access.
> 

Why would you need random access as a generic capability?  Besides,
this can be done on a custom basis already.  Consider having AST nodes
with List and index fields (getNextSibling and getFirstChild would set
the index values).

> 5. Add some symbol table stuff.  It would be nice to be able to easily

Under consideration, as is an attribute syntax.  I, personally, am not
in favor of direct symbol table support--it adds to the work of
supporting a new target language--but think that an attribute syntax
makes sense.

--Loring

> store symbol table data in the AST.  I haven't thought through the
> details yet, but I was thinking you'd have some suffix to say you
> wanted something to be a key in a symbol table and the "children" ASTs
> would be the value for this entry.  This could work similar to the "^"
>  AST operator, but instead of making a root with children, it would
> make a map entry.
> 
> Eric



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Wed Aug 11 15:32:13 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Re: rooting a parser rule rather than a token
In-Reply-To: <cfe281+bq44@eGroups.com>
Message-ID: <cfe6pd+aogp@eGroups.com>

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> --- In antlr-interest@yahoogroups.com, "Eric Mahurin"
> <eric_mahurin@y...> wrote:
> > I'm not sure why, but antlr doesn't currently allow you to make a call
> > to a rule from another rule an AST root.  So, you can't do something
> > like this:
> > 
> > binary_expression : primary (binary_operator^ primary)* ;
> > 
> That's a feature, not a bug.  It prevents you from losing any children
> of the binary_operator root AST.  We did talk about this particular
> topic at the cabal, and ANTLR 3 may provide a different approach.
> 
> --Loring

In the code from the last message, no children should be lost.  Here
are a few examples of what it does:

x: A y^ E ;

y           equivalent-x
-----       ------------
B|C|D       A (B^|C^|D^) E
B C^ D      A B C^ D E
B C D       b C d ; b : A B^ ; d : E^ B

The current ANTLR seemed to be close to handling all but the last case
and that last one (rooting a rule where the root of that rule has
siblings) is probably not very useful.  I do find myself doing the
other two enough.

This seems like a natural definition for a rooted rule.  Do you see
anything wrong with it?

- Eric




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Wed Aug 11 17:12:00 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Re: AST enhancements
In-Reply-To: <cfe5kq+g3au@eGroups.com>
Message-ID: <cfeckg+grk1@eGroups.com>

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> --- In antlr-interest@yahoogroups.com, "Eric Mahurin"
> <eric_mahurin@y...> wrote:
> > 3. Have a standard interface for separating/storing/retrieving
> > children to the left vs. right of the root so that token order can be
> > easily preserved.  Right now with the way ASTFactory does things, the
> > current interface can be used to get the token order correct, but the
> > "addChild" definition must be changed (insert child at beginning
> > instead of end).  Instead, I think the interface and ASTFactory should
> > assume that the AST's keep order, but the implementation wouldn't have
> > to.  Maybe all that is needed is a redefinition of addChild (insert to
> > the left of the left children), and a few methods which return
> > separate left and right children lists (non-ordered ASTs would return
> > the whole list or nothing for these).
> 
> That's a major interface change which ain't going to happen.  A better
> alternative is provided by Ter's TokenStreamRewriteEngine


I'm not sure how TokenStreamRewriteEngine helps preserve token order
withn an AST structure.

The minimal interface change to implement this is to change the
documentation for addChild to say (leftmost) instead of (rightmost). 
In the ASTFactory, addChild is used to insert children that preceded a
root (is left of) and setFirstChild/setNextSibling is used for
children that come after (is right of).  Right now, addChild is only
used with the root being a simple node (no children/siblings), so
inserting at the leftmost or rightmost position won't matter.  This
change is also needed to root rules rather than tokens because the
child order would get screwed up.

I guess other methods to differentiate left and right children could
just be added to classes that do this.  I guess the minimal thing woud
be just a method to return the number of children to the left of the root.

What I'm concerned about for this is that the way I'm preserving token
order I'm depending on the way ASTFactory call the AST methods.  I'm
depending on addChild being used to add children that precede the root
and setFirstChild/setNextSibling being used for children that follow
the root.  If this will continue to be the case for future antlr's I'm OK.


> > 4. Consider using a more generic "List" like interface storing sibling
> > lists.  This way you can have implementations other than linked lists
> > and you can get easy random access.
> > 
> 
> Why would you need random access as a generic capability?  Besides,
> this can be done on a custom basis already.  Consider having AST nodes
> with List and index fields (getNextSibling and getFirstChild would set
> the index values).

I don't get what you mean by this last sentence.  If you had
get/setNextChild I would see how, but they would have side-effects
(changing the current index).

This was a low priority thing on my list.  The problem is if I wanted
to implement the AST sibling list with a ArrayList or such for
performance reasons.  I may want to have random access to a set of
siblings instead of having to walk the list using getNextSibling. 
With this interface you would have no get/setNextSibling and
get/setFirstChild.  Instead you would have:

public List getChildren();
public setChildren(List children); // list of AST's

You could use all of the List methods to manipulate the children list.
   If you used a LinkedList, it would basically boil down to what you
have now, but with the additional List methods at your disposal.

This is a major interface change and don't expect you to do it, but I
thought I'd mention it.

> > 5. Add some symbol table stuff.  It would be nice to be able to easily
> 
> Under consideration, as is an attribute syntax.  I, personally, am not
> in favor of direct symbol table support--it adds to the work of
> supporting a new target language--but think that an attribute syntax
> makes sense.


I agree that it does complicate things and it may be difficult to come
up with something generic enough, but consider that anytime you parse
a language that has variables, you'll probably need to make some kind
of symbol table.  And there will probably be some kind of scoping to
the variables, so putting this into the AST structure which should
alreay be structured according to the scoping might be a good idea.


> 
> --Loring
> 
> > store symbol table data in the AST.  I haven't thought through the
> > details yet, but I was thinking you'd have some suffix to say you
> > wanted something to be a key in a symbol table and the "children" ASTs
> > would be the value for this entry.  This could work similar to the "^"
> >  AST operator, but instead of making a root with children, it would
> > make a map entry.
> > 
> > Eric




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Wed Aug 11 17:40:01 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Re: Line number information
In-Reply-To: <cfe1jk+crlt@eGroups.com>
Message-ID: <cfee91+c204@eGroups.com>

It looks like the generated code makes AST nodes by calling the
initialize method using a Token.  I'm not sure why the other
initialize/constructor methods are even there as they aren't as
flexible.  You should be able to just make an AST class that either a)
subclasses CommonAST, add line/column ints, and have initialize set
those, or b) subclass BaseAST and put a whole token in there.

You'll find multiple examples of overriding the default AST in the
antlr examples directories.

--- In antlr-interest@yahoogroups.com, "npettersson" <plsk_9@h...> wrote:
> Hi
> 
> I'm a new user of ANTLR and have been working with it for a few month 
> now.
> 
> I've been parsing C#-code and generating AST's but I don't know how to 
> get the row numbers included as nodes in the AST?
> 
> Can someone show me a simple example on how to do this?
> 
> kind regards/ Niklas



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From oobles at hotmail.com  Wed Aug 11 17:52:34 2004
From: oobles at hotmail.com (ooobles)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] XPA and ANTLR
Message-ID: <cfef0i+popi@eGroups.com>


Hi all,

It's been a while since I've got to play with ANTLR in a new way. 
I've been happily making up new grammars for a while now. :)  I now
have the new challenge of parsing XML. After writing a 1200line parser
that reads over a dom4j tree, I decided there must be a better way. 
Thankfully, I found XPA and have started writing a tree walker for
reading XML Schemas (XSD).

One thing I find with tree walkers is that I can't be sure if I missed
nodes in the tree.  A tree walker can silently skip child nodes
because the grammar has already been met.  Is there any way to force
the parser to report an error when additional nodes have been found in
the tree?

I've been using one of the XPA examples to write the tree parser (see
below). It *seems* to read XSD, but I'm quite sure it is skipping
some elements.

As an aside, has anyone already written an XSD parser that generates a
 nice internal model? :)  I'm guessing I'll need to do a few passes
over the XSD files to resolve all the data types, groups, elements, etc.

Thanks,
David.

PS I read over a few other messages mentioning that there arn't many
fans of XML here.  I'm definately not a fan either, but when you
work in a group that only does XML, you don't get much choice. :) 

-------------- XSD Tree Parser ----------------

class ComponentTreeParser extends TreeParser;
options 
{
   buildAST = true;
   ASTLabelType = "XMLAST";
}

// enable wildcard processing for xtal and 
// set wildcard element type to "<wildcard>"
tokens 
{
    "<wildcard>";
}

schema : #(c:"<xsd:schema>" ( schemaImport | schemaInclude	| element |
complexType | complexContent | groupDef )* )
    ;

schemaImport : imp:"<xsd:import>" 
	;

schemaInclude : inc:"<xsd:include>"
	;	

groupDef: #("<xsd:group>" sequence )
	;

annotation: #("<xsd:annotation>" documentation )
	;	

documentation: "<xsd:documentation>"
	;

complexType: #( "<xsd:complexType>"  ( annotation | sequence |
attribute | simpleContent | complexContent )* )
	;

complexContent: #( "<xsd:complxContent>" extension )
	;

simpleContent: #( "<xsd:simpleContent>" extension )
	;
	
extension: #( "<xsd:extension>" ( attribute | sequence ) )
	;
	
sequence: #( "<xsd:sequence>" ( sequence | element | choice | groupRef
)* )
	;
	
choice: #( "<xsd:choice>" ( element | sequence )* )
	;	

groupRef: "<xsd:group>" 	
	;
	
attribute: #( "<xsd:attribute>" (simpleType)? )
	;	
	
simpleType: #( "<xsd:simpleType>" restriction )	
	;
	
restriction: #( "<xsd:restriction>" enumeration )
	;
	
enumeration: "<xsd:enumeration>"	
	;






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Wed Aug 11 19:29:00 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] XPA and ANTLR
In-Reply-To: <cfef0i+popi@eGroups.com>
References: <cfef0i+popi@eGroups.com>
Message-ID: <5EF5068E-EC07-11D8-B774-000393B5606C@codetransform.com>

The best way I know to see that the tree parser is complete is to parse 
to a tree and then back to text and do a diff.

The only other way I could think of is to make your own node type with 
a flag for if it is visited.  Override match() to set the flag and then 
traverse the whole tree looking for any unset nodes.

Monty


On Aug 11, 2004, at 5:52 PM, ooobles wrote:

>
> Hi all,
>
> It's been a while since I've got to play with ANTLR in a new way.
> I've been happily making up new grammars for a while now. :)  I now
> have the new challenge of parsing XML. After writing a 1200line parser
> that reads over a dom4j tree, I decided there must be a better way.
> Thankfully, I found XPA and have started writing a tree walker for
> reading XML Schemas (XSD).
>
> One thing I find with tree walkers is that I can't be sure if I missed
> nodes in the tree.  A tree walker can silently skip child nodes
> because the grammar has already been met.  Is there any way to force
> the parser to report an error when additional nodes have been found in
> the tree?
>
> I've been using one of the XPA examples to write the tree parser (see
> below). It *seems* to read XSD, but I'm quite sure it is skipping
> some elements.
>
> As an aside, has anyone already written an XSD parser that generates a
>  nice internal model? :)  I'm guessing I'll need to do a few passes
> over the XSD files to resolve all the data types, groups, elements, 
> etc.
>
> Thanks,
> David.
>
> PS I read over a few other messages mentioning that there arn't many
> fans of XML here.  I'm definately not a fan either, but when you
> work in a group that only does XML, you don't get much choice. :)
>
> -------------- XSD Tree Parser ----------------
>
> class ComponentTreeParser extends TreeParser;
> options
> {
>    buildAST = true;
>    ASTLabelType = "XMLAST";
> }
>
> // enable wildcard processing for xtal and
> // set wildcard element type to "<wildcard>"
> tokens
> {
>     "<wildcard>";
> }
>
> schema : #(c:"<xsd:schema>" ( schemaImport | schemaInclude	| element |
> complexType | complexContent | groupDef )* )
>     ;
>
> schemaImport : imp:"<xsd:import>"
> 	;
>
> schemaInclude : inc:"<xsd:include>"
> 	;	
>
> groupDef: #("<xsd:group>" sequence )
> 	;
>
> annotation: #("<xsd:annotation>" documentation )
> 	;	
>
> documentation: "<xsd:documentation>"
> 	;
>
> complexType: #( "<xsd:complexType>"  ( annotation | sequence |
> attribute | simpleContent | complexContent )* )
> 	;
>
> complexContent: #( "<xsd:complxContent>" extension )
> 	;
>
> simpleContent: #( "<xsd:simpleContent>" extension )
> 	;
> 	
> extension: #( "<xsd:extension>" ( attribute | sequence ) )
> 	;
> 	
> sequence: #( "<xsd:sequence>" ( sequence | element | choice | groupRef
> )* )
> 	;
> 	
> choice: #( "<xsd:choice>" ( element | sequence )* )
> 	;	
>
> groupRef: "<xsd:group>" 	
> 	;
> 	
> attribute: #( "<xsd:attribute>" (simpleType)? )
> 	;	
> 	
> simpleType: #( "<xsd:simpleType>" restriction )	
> 	;
> 	
> restriction: #( "<xsd:restriction>" enumeration )
> 	;
> 	
> enumeration: "<xsd:enumeration>"	
> 	;
>
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From msearles at base16.com  Wed Aug 11 15:43:08 2004
From: msearles at base16.com (Michael Searles)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] ANTLR status wrt Visual C++ 6.0
Message-ID: <cfe7ds+5isf@eGroups.com>

Can ANTLR be used with Microsoft Visual C++ 6.0? (I'm running on Win 
2000)

Issues:

I've downloaded from antlr-20040315.tar.gz from

http://wwwhome.cs.utwente.nl/~klaren/antlr/

and after creating a project manually as described in the README file, 
I can build the DLL, but it whines about not supported on old MSVC's.

#if ( _MSC_VER < 1300 )
# error "DLL Build not supported on old MSVC's"
// Ok it seems to be possible with STLPort in stead of the vanilla 
MSVC STL
// implementation. This needs some work though. (and don't try it if 
you're
// not that familiar with compilers/building C++ DLL's in windows)
#endif


Does anyone know if it's safe to build the DLL with VC++ 6.0?  If I 
comment out
this line, it compiles without errors. Question is, will the resulting 
DLL be OK?

Next Issue...

When I build calc.g (using antlr.jar from the antlr-20040315 directory 
-- using Java j2sdk1.4.2_04), the C++ code that's generated, when I 
then attempt to compile it with VC++ 6.0, these errors occur...

Compiling...
CalcTreeWalker.cpp
CalcTreeWalker.cpp(39) : error C2065: '_retTree' : undeclared 
identifier
CalcTreeWalker.cpp(87) : error C2679: binary '=' : no operator defined 
which takes a right-hand operand of type 'class antlr::
ASTRefCount<class antlr::AST>' (or there is no acceptable conversion)
CalcParser.cpp
CalcParser.cpp(34) : error C2065: 'returnAST' : undeclared identifier
(many more follow.)

Are these issues something that I'm doing wrong, or is the 
Windows/Visual C++ 6.0 environment not supported or unstable at this 
time?

I'm just getting started on trying to use ANTLR for a project, and if 
this environment is in limbo, I will have to take another approach.

Can anyone offer suggestions?  Is anyone using ANTLR on Windows 2000, 
with VC++ 6.0 without issues?

Thanks.

Michael 






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Wed Aug 11 21:18:43 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Re: AST enhancements (forgot one)
In-Reply-To: <cfdvv8+qb1q@eGroups.com>
Message-ID: <cfer33+5pbq@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Eric Mahurin"
<eric_mahurin@y...> wrote:
> While I'm thinking about it, here is a list of things that would be
> nice to have regarding AST's:
> 
> 1. Allow for sub-rules to have there own root rather than always
> rooting the super-rule.  This is described in the documentation as
> labeled sub-rules, but apparently is not implemented.  Right now to
> get the right AST struture you have to partition the rules to get the
> right roots.
> 
> 2. Allow rule references in addtion to token references to be rooted.
>  This feature was described in my previous message.  Right now you may
> have to flatten the rules to get the right roots.
> 
> 3. Have a standard interface for separating/storing/retrieving
> children to the left vs. right of the root so that token order can be
> easily preserved.  Right now with the way ASTFactory does things, the
> current interface can be used to get the token order correct, but the
> "addChild" definition must be changed (insert child at beginning
> instead of end).  Instead, I think the interface and ASTFactory should
> assume that the AST's keep order, but the implementation wouldn't have
> to.  Maybe all that is needed is a redefinition of addChild (insert to
> the left of the left children), and a few methods which return
> separate left and right children lists (non-ordered ASTs would return
> the whole list or nothing for these).
> 
> 4. Consider using a more generic "List" like interface storing sibling
> lists.  This way you can have implementations other than linked lists
> and you can get easy random access.
> 
> 5. Add some symbol table stuff.  It would be nice to be able to easily
> store symbol table data in the AST.  I haven't thought through the
> details yet, but I was thinking you'd have some suffix to say you
> wanted something to be a key in a symbol table and the "children" ASTs
> would be the value for this entry.  This could work similar to the "^"
>  AST operator, but instead of making a root with children, it would
> make a map entry.


6. Make it simple to add extra tokens to the AST structure.  It seems
like the majority (all?) of the time you resort to the # actions for
making AST's, you just end up putting in extra tokens in.  Those #
actions seem hacky (and limited) anyways (like the $ stuff) - why not
just directly support inserting extra tokens.  So, instead of:

decl : ( TYPE ID )+ { #decl = #([DECL,"decl"], #decl); } ;

you could do:

decl : [DECL,"decl"]^ ( TYPE ID )+ ;

Maybe go ahead and just support an AST constructor call here to give
all the flexibility.  Doing it this new way seems much more
understandable.  That # stuff seems very ugly since it is merged in
with Java and has syntax nothing like java (at least the $ stuff is
closer).




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From oliver at zeigermann.de  Thu Aug 12 00:55:49 2004
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] XPA and ANTLR
In-Reply-To: <cfef0i+popi@eGroups.com>
References: <cfef0i+popi@eGroups.com>
Message-ID: <411B2285.70201@zeigermann.de>

Hi David,

which tokens do you think are skipped?

Anyway, you could also try to use the XPA token parser. There you can be 
very sure nothing is missed as you will have to consume each and every 
token.

Oliver

ooobles wrote:

> Hi all,
> 
> It's been a while since I've got to play with ANTLR in a new way. 
> I've been happily making up new grammars for a while now. :)  I now
> have the new challenge of parsing XML. After writing a 1200line parser
> that reads over a dom4j tree, I decided there must be a better way. 
> Thankfully, I found XPA and have started writing a tree walker for
> reading XML Schemas (XSD).
> 
> One thing I find with tree walkers is that I can't be sure if I missed
> nodes in the tree.  A tree walker can silently skip child nodes
> because the grammar has already been met.  Is there any way to force
> the parser to report an error when additional nodes have been found in
> the tree?
> 
> I've been using one of the XPA examples to write the tree parser (see
> below). It *seems* to read XSD, but I'm quite sure it is skipping
> some elements.
> 
> As an aside, has anyone already written an XSD parser that generates a
>  nice internal model? :)  I'm guessing I'll need to do a few passes
> over the XSD files to resolve all the data types, groups, elements, etc.
> 
> Thanks,
> David.
> 
> PS I read over a few other messages mentioning that there arn't many
> fans of XML here.  I'm definately not a fan either, but when you
> work in a group that only does XML, you don't get much choice. :) 
> 
> -------------- XSD Tree Parser ----------------
> 
> class ComponentTreeParser extends TreeParser;
> options 
> {
>    buildAST = true;
>    ASTLabelType = "XMLAST";
> }
> 
> // enable wildcard processing for xtal and 
> // set wildcard element type to "<wildcard>"
> tokens 
> {
>     "<wildcard>";
> }
> 
> schema : #(c:"<xsd:schema>" ( schemaImport | schemaInclude	| element |
> complexType | complexContent | groupDef )* )
>     ;
> 
> schemaImport : imp:"<xsd:import>" 
> 	;
> 
> schemaInclude : inc:"<xsd:include>"
> 	;	
> 
> groupDef: #("<xsd:group>" sequence )
> 	;
> 
> annotation: #("<xsd:annotation>" documentation )
> 	;	
> 
> documentation: "<xsd:documentation>"
> 	;
> 
> complexType: #( "<xsd:complexType>"  ( annotation | sequence |
> attribute | simpleContent | complexContent )* )
> 	;
> 
> complexContent: #( "<xsd:complxContent>" extension )
> 	;
> 
> simpleContent: #( "<xsd:simpleContent>" extension )
> 	;
> 	
> extension: #( "<xsd:extension>" ( attribute | sequence ) )
> 	;
> 	
> sequence: #( "<xsd:sequence>" ( sequence | element | choice | groupRef
> )* )
> 	;
> 	
> choice: #( "<xsd:choice>" ( element | sequence )* )
> 	;	
> 
> groupRef: "<xsd:group>" 	
> 	;
> 	
> attribute: #( "<xsd:attribute>" (simpleType)? )
> 	;	
> 	
> simpleType: #( "<xsd:simpleType>" restriction )	
> 	;
> 	
> restriction: #( "<xsd:restriction>" enumeration )
> 	;
> 	
> enumeration: "<xsd:enumeration>"	
> 	;
> 
> 
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 
> 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Thu Aug 12 02:50:19 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] ANTLR status wrt Visual C++ 6.0
In-Reply-To: <cfe7ds+5isf@eGroups.com>
References: <cfe7ds+5isf@eGroups.com>
Message-ID: <20040812095019.GA3065@cs.utwente.nl>

On Wed, Aug 11, 2004 at 10:43:08PM -0000, Michael Searles wrote:
> Can ANTLR be used with Microsoft Visual C++ 6.0? (I'm running on Win
> 2000)
>
> Issues:
>
> I've downloaded from antlr-20040315.tar.gz from

Note that the 2.7.4 release is newer than this snapshot. AFAIK 2.7.4 should
work ok using a static linking and DLL's should be ok with MSVC 7+.

> and after creating a project manually as described in the README file,
> I can build the DLL, but it whines about not supported on old MSVC's.
>
> #if ( _MSC_VER < 1300 )
> # error "DLL Build not supported on old MSVC's"
> // Ok it seems to be possible with STLPort in stead of the vanilla
> MSVC STL
> // implementation. This needs some work though. (and don't try it if
> you're
> // not that familiar with compilers/building C++ DLL's in windows)
> #endif
>
> Does anyone know if it's safe to build the DLL with VC++ 6.0?  If I
> comment out this line, it compiles without errors. Question is, will the
> resulting DLL be OK?

Read the comment I'd say.... Grab MSVC 7+ if you don't want headache.
Alternatively using a static library should work ok (at least some people
said it was ok). In the odd case that microsoft did some serious fixing in
a service pack you might give it a try and report back. You can remove the
#error there and fix up dll.cpp and hope you can build an example with the
result (don't ask me how I'm no expert with microsoft compilers and dll's)

> Next Issue...
>
> When I build calc.g (using antlr.jar from the antlr-20040315 directory
> -- using Java j2sdk1.4.2_04), the C++ code that's generated, when I
> then attempt to compile it with VC++ 6.0, these errors occur...
>
> Compiling...
> CalcTreeWalker.cpp
> CalcTreeWalker.cpp(39) : error C2065: '_retTree' : undeclared
> identifier
> CalcTreeWalker.cpp(87) : error C2679: binary '=' : no operator defined
> which takes a right-hand operand of type 'class antlr::
> ASTRefCount<class antlr::AST>' (or there is no acceptable conversion)
> CalcParser.cpp
> CalcParser.cpp(34) : error C2065: 'returnAST' : undeclared identifier
> (many more follow.)
>
> Are these issues something that I'm doing wrong, or is the
> Windows/Visual C++ 6.0 environment not supported or unstable at this
> time?

Try 2.7.4 first I'd say. Although this particular output does not ring a
bell.. If 2.7.4 gives these errors as well then it would help to see some
generated code. _retTree is an attribute of the treewalker class. By any
chance you got multiple antlr versions installed it looks like it could be
a mixup in support lib and antlr version used to generate the cpp file.

> I'm just getting started on trying to use ANTLR for a project, and if
> this environment is in limbo, I will have to take another approach.
>
> Can anyone offer suggestions?  Is anyone using ANTLR on Windows 2000,
> with VC++ 6.0 without issues?

Check out lib/cpp/README in the distro for the latest notes with microsoft
compilers.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  Wo das Chaos auf die Ordnung trifft, gewinnt meist das Chaos, weil es
  besser organisiert ist. --- Friedrich Nietzsche



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From antlr-interest at yahoogroups.com  Thu Aug 12 06:54:11 2004
From: antlr-interest at yahoogroups.com (antlr-interest@yahoogroups.com)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] New file uploaded to antlr-interest
Message-ID: <1092318851.726.55069.w22@yahoogroups.com>


Hello,

This email message is a notification to let you know that
a file has been uploaded to the Files area of the antlr-interest 
group.

  File        : /rooted_rule.tgz 
  Uploaded by : thrutchy <eric_mahurin@yahoo.com> 
  Description : Patches to support rooting rules (java only) 

You can access this file at the URL:
http://groups.yahoo.com/group/antlr-interest/files/rooted_rule.tgz 

To learn more about file sharing for your group, please visit:
http://help.yahoo.com/help/us/groups/files

Regards,

thrutchy <eric_mahurin@yahoo.com>
 





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Thu Aug 12 07:40:53 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Re: rooting a parser rule rather than a token
In-Reply-To: <cfdq9q+uf1m@eGroups.com>
Message-ID: <cffvhl+2iq4@eGroups.com>

I also changed antlr.g and other necessary files for being able to
root rules directly.  Everthing is in a tar file in the file section.
 I only completed the Java stuff.  Maybe someone might want to put
these in the next 2.x ANTLR release :)  Are these changes acceptable,
Terrance?

--- In antlr-interest@yahoogroups.com, "Eric Mahurin"
<eric_mahurin@y...> wrote:
> I'm not sure why, but antlr doesn't currently allow you to make a call
> to a rule from another rule an AST root.  So, you can't do something
> like this:
> 
> binary_expression : primary (binary_operator^ primary)* ;
> 
> I haven't yet dove into the antlr code generation to completely fix
> this issue, but you can get around this issue with these changes:
> 
> 
> 1. Instead of using "^" to root the rule, discard it using "!" and
> then put in this action: {astFactory.makeASTRoot(currentAST,
> returnAST);}.  For example, the above rule would become:
> 
> binary_expression : primary (
>     binary_operator! {astFactory.makeASTRoot(currentAST, returnAST);}
>     primary
> )* ;
> 
> 
> 2. If your rule you want to root contains more than one token and it
> can be at the beginning of the rule calling it, there is a bug in the
> routine makeASTRoot in ASTFactory.java.  Change "currentAST.child =
> currentAST.root;" to "currentAST.child = root.getFirstChild();" to fix
> the problem.  I did this in a copy of ASTFactory.java in my local
> antlr directory instead of changing the source.
> 
> 
> 3. This simple fix doesn't handle the case where the the rule you want
> to root is a list of 2 or more tokens (i.e. has 2 or more tokens and
> is unrooted).  I can't think of a case where you'd want to root such a
> rule, but if you did want to do this, make these changes in
> ASTFactory.java:
> 
> a. In addASTChild, change "currentAST.root.setFirstChild(child);" to:
>     currentAST.child = currentAST.root;
>     currentAST.advanceChildToEnd();
>     currentAST.child.setFirstChild(child);
> 
> b. In makeASTRoot, change "currentAST.child = currentAST.root;" to:
>     currentAST.child = root;
>     currentAST.advanceChildToEnd();
>     currentAST.child = currentAST.child.getFirstChild();
> 
> These changes *should* be backwards compatible.  It also allows you to
> make AST's that have separate left and right/normal children pointers
> to preserve token order.
> 
> Anybody want to figure out how to antlr code generation do the right
> thing for using "^" with a rule instead of a token?  It's probably
> trivial.
> 
> I have more AST suggestions, so expect another message...
> 
> Eric



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From msearles at base16.com  Thu Aug 12 10:42:14 2004
From: msearles at base16.com (Michael Searles)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Re: ANTLR status wrt Visual C++ 6.0
In-Reply-To: <20040812095019.GA3065@cs.utwente.nl>
Message-ID: <cfga5m+h87s@eGroups.com>

thanks for the reply Ric.

> Try 2.7.4 first I'd say. Although this particular output does not 
ring a
> bell.. If 2.7.4 gives these errors as well then it would help to see 
some
> generated code. _retTree is an attribute of the treewalker class.

ok, I've got 2.7.4 now.

_retTree and returnAST are commented out in the distro.

antlr-2.7.4\antlr-2.7.4\lib\cpp\antlr\TreeParser.hpp:

/* Where did this rule leave off parsing; avoids a return parameter */
//RefAST _retTree;
/* AST return value for a rule is squirreled away here */
//RefAST returnAST;

and _retTree is commented out in:
antlr-2.7.4\antlr-2.7.4\lib\cpp\antlr\Parser.hpp:

//	/// AST return value for a rule is squirreled away here
//	RefAST returnAST;

are these supposed to be commented out?

The 2.7.4 antlr.jar is generating code that expects them.

generated CalcParser.cpp:

void CalcParser::expr() {
	returnAST = ANTLR_USE_NAMESPACE(antlr)nullAST;
.
.

generated CalcTreeWalker.cpp:

float  CalcTreeWalker::expr(ANTLR_USE_NAMESPACE(antlr)RefAST _t) {
.
.
.
    _t = _retTree;







 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Thu Aug 12 18:32:38 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] OrderedAST plus other sub-classes
Message-ID: <cfh5nm+ork2@eGroups.com>

I just uploaded a tar-file (ordered_AST.tgz) of some useful AST classes:

OrderedAST extends BaseAST: maintains which children are to the left
of the root and which are to the right.  The writeTo method writes out
the text of the AST nodes in the correct order.  writeTo uses the
method getSeparator (returns a new line in this class) between text of
the AST nodes.

TokenAST extends OrderedAST: puts a whole token in the AST node. 
getLine and getColumn now do something.  getSeparator returns a
concatenation of hiddenAfter text.

SeparatedAST extends OrderedAST: adds a separator field which defaults
to coming from a concatenation of the hiddenAfter tokens
(CommonHiddenStreamToken).

LiteralAST extends SeparatedAST: maintains a static lookup table so
that each object doesn't need to store the token text because it is
assumed to be fixed per type for tokens using this AST class.

FixedAST extends SeparatedAST: assumes that for each class that
inherits this, the token type is fixed.  Only one token type is needed
per class rather than per object.

RealAST/IdenAST/UnsignedAST/StringAST extends FixedAST: Stores the
data in a more usable format rather than the raw incoming format.

Since most token types have fixed strings, I use LiteralAST as a
default and use AST classes specific to a token type the others.

Eric




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From oobles at hotmail.com  Thu Aug 12 18:45:04 2004
From: oobles at hotmail.com (ooobles)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Tree Parser and removing nodes.
Message-ID: <cfh6f0+9k9k@eGroups.com>


I have a tree parser which I'd like to automatically create basically
the same output tree with a few modifications. One of the changes is
to move a list of child AST's into a parent list.

eg. I have token A:(B|C)*; and C:(B)*;

A
  B
  C
    B
    B
  B

I'd like to remove occurances of C and leave

A
  B
  B
  B
  B

with the children of B moved up to become children of A.

I'm assuming this has a simple answer that I'm not seeing?



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From oobles at hotmail.com  Thu Aug 12 19:05:01 2004
From: oobles at hotmail.com (ooobles)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Re: XPA and ANTLR
In-Reply-To: <411B2285.70201@zeigermann.de>
Message-ID: <cfh7kd+fl7g@eGroups.com>

Hi Oliver,

Nice work on XPA!  I looked at the token parser, but it looks like I'd
need to do more work to find start and end tags, etc.  I really like
SAXDrivenASTParser giving me an AST ready to use.

After I turned off some of my debug, I noticed that the parser does
print out error statements saying that additional nodes are found in
the tree.  I was able to hunt down a few extra tokens I had skipped in
the grammar I posted.  eg.  MaxLength and MinLength in restrictions. 
But its difficult to locate the exact location this way.


On processing the actual Schema, I've made some progress.  To get the
Schema into a more generic form I've started writing multiple tree
walkers which rearrange the tree.  For instance, I've been able to
remove all "groupDef" and "groupRef" tokens from the tree by capturing
groupDef subtrees and reinserting them at groupRef points.

Eventually I will run into some recursion problems with the AST
refering back to itself.  I assume I will need to handle this problem
manually in my grammers?

I'm also having a few problems with cutting out AST elements from the
tree while doing this method.  I wrote another message about that.

Thanks for your help,
David.


> Hi David,
> 
> which tokens do you think are skipped?
> 
> Anyway, you could also try to use the XPA token parser. There you
can be 
> very sure nothing is missed as you will have to consume each and every 
> token.
> 
> Oliver
> 
> ooobles wrote:
> 
> > Hi all,
> > 
> > It's been a while since I've got to play with ANTLR in a new way. 
> > I've been happily making up new grammars for a while now. :)  I now
> > have the new challenge of parsing XML. After writing a 1200line parser
> > that reads over a dom4j tree, I decided there must be a better way. 
> > Thankfully, I found XPA and have started writing a tree walker for
> > reading XML Schemas (XSD).
> > 
> > One thing I find with tree walkers is that I can't be sure if I missed
> > nodes in the tree.  A tree walker can silently skip child nodes
> > because the grammar has already been met.  Is there any way to force
> > the parser to report an error when additional nodes have been found in
> > the tree?
> > 
> > I've been using one of the XPA examples to write the tree parser (see
> > below). It *seems* to read XSD, but I'm quite sure it is skipping
> > some elements.
> > 
> > As an aside, has anyone already written an XSD parser that generates a
> >  nice internal model? :)  I'm guessing I'll need to do a few passes
> > over the XSD files to resolve all the data types, groups,
elements, etc.
> > 
> > Thanks,
> > David.
> > 
> > PS I read over a few other messages mentioning that there arn't many
> > fans of XML here.  I'm definately not a fan either, but when you
> > work in a group that only does XML, you don't get much choice. :) 
> > 
> > -------------- XSD Tree Parser ----------------
> > 
> > class ComponentTreeParser extends TreeParser;
> > options 
> > {
> >    buildAST = true;
> >    ASTLabelType = "XMLAST";
> > }
> > 
> > // enable wildcard processing for xtal and 
> > // set wildcard element type to "<wildcard>"
> > tokens 
> > {
> >     "<wildcard>";
> > }
> > 
> > schema : #(c:"<xsd:schema>" ( schemaImport | schemaInclude	| element |
> > complexType | complexContent | groupDef )* )
> >     ;
> > 
> > schemaImport : imp:"<xsd:import>" 
> > 	;
> > 
> > schemaInclude : inc:"<xsd:include>"
> > 	;	
> > 
> > groupDef: #("<xsd:group>" sequence )
> > 	;
> > 
> > annotation: #("<xsd:annotation>" documentation )
> > 	;	
> > 
> > documentation: "<xsd:documentation>"
> > 	;
> > 
> > complexType: #( "<xsd:complexType>"  ( annotation | sequence |
> > attribute | simpleContent | complexContent )* )
> > 	;
> > 
> > complexContent: #( "<xsd:complxContent>" extension )
> > 	;
> > 
> > simpleContent: #( "<xsd:simpleContent>" extension )
> > 	;
> > 	
> > extension: #( "<xsd:extension>" ( attribute | sequence ) )
> > 	;
> > 	
> > sequence: #( "<xsd:sequence>" ( sequence | element | choice | groupRef
> > )* )
> > 	;
> > 	
> > choice: #( "<xsd:choice>" ( element | sequence )* )
> > 	;	
> > 
> > groupRef: "<xsd:group>" 	
> > 	;
> > 	
> > attribute: #( "<xsd:attribute>" (simpleType)? )
> > 	;	
> > 	
> > simpleType: #( "<xsd:simpleType>" restriction )	
> > 	;
> > 	
> > restriction: #( "<xsd:restriction>" enumeration )
> > 	;
> > 	
> > enumeration: "<xsd:enumeration>"	
> > 	;
> > 
> > 
> > 
> > 
> > 
> > 
> >  
> > Yahoo! Groups Links
> > 
> > 
> > 
> >  
> > 
> >



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From oobles at hotmail.com  Thu Aug 12 19:13:18 2004
From: oobles at hotmail.com (ooobles)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Re: Tree Parser and removing nodes.
In-Reply-To: <cfh6f0+9k9k@eGroups.com>
Message-ID: <cfh83u+3h4c@eGroups.com>

I just realised that HTML doesn't draw trees very well.  The trees
below were supposed to look like.

 A
 |-B
 |-C
 | |-B
 | |-B
 |-B

and

 A
 |-B
 |-B
 |-B
 |-B

I want to write a tree parser which will construct the second AST from
the first AST.

Thanks again,
David.

> 
> I have a tree parser which I'd like to automatically create basically
> the same output tree with a few modifications. One of the changes is
> to move a list of child AST's into a parent list.
> 
> eg. I have token A:(B|C)*; and C:(B)*;
> 
> A
>   B
>   C
>     B
>     B
>   B
> 
> I'd like to remove occurances of C and leave
> 
> A
>   B
>   B
>   B
>   B
> 
> with the children of B moved up to become children of A.
> 
> I'm assuming this has a simple answer that I'm not seeing?



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Thu Aug 12 22:18:41 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Tree Parser and removing nodes.
In-Reply-To: <cfh6f0+9k9k@eGroups.com>
References: <cfh6f0+9k9k@eGroups.com>
Message-ID: <3D55456F-ECE8-11D8-A0C5-000393B5606C@codetransform.com>

a: #(A (B | c));
c: #(C! (B)*);

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Aug 12, 2004, at 6:45 PM, ooobles wrote:

>
> I have a tree parser which I'd like to automatically create basically
> the same output tree with a few modifications. One of the changes is
> to move a list of child AST's into a parent list.
>
> eg. I have token A:(B|C)*; and C:(B)*;
>
> A
>   B
>   C
>     B
>     B
>   B
>
> I'd like to remove occurances of C and leave
>
> A
>   B
>   B
>   B
>   B
>
> with the children of B moved up to become children of A.
>
> I'm assuming this has a simple answer that I'm not seeing?
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From beckersheinzsb at yahoo.com  Fri Aug 13 01:25:48 2004
From: beckersheinzsb at yahoo.com (beckersheinzsb)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] TokenStreamRecognitionException class members
Message-ID: <cfhtuc+1n5n@eGroups.com>

Hello

Why is the member "recog" (of type RecognitionException) of the class 
TokenStreamRecognitionException in the java implementation declared 
as public an in the c++ implementation declared as private?
I use antlr with c++ and should know how to get the line and column 
information out of the TokenStreamRecognitionException.
I see no possibility to get this information out if it, except 
botching it out of the return value of toString(). 
Has anybody an idea for a nice solution?

greets

Heinz




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Fri Aug 13 02:10:55 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Re: Tree Parser and removing nodes.
In-Reply-To: <3D55456F-ECE8-11D8-A0C5-000393B5606C@codetransform.com>
Message-ID: <cfi0iv+1mks@eGroups.com>

--- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> wrote:
> a: #(A (B | c));
> c: #(C! (B)*);

Believe it or not, 2.7.1 would convert c to 
( #( B (B)* ) )?

2.7.2 will throw an exception.

--Loring

> 
> Monty
> 
> ANTLR & Java Consultant -- http://www.codetransform.com
> ANSI C/GCC transformation toolkit -- 
> http://www.codetransform.com/gcc.html
> Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html
> 
> On Aug 12, 2004, at 6:45 PM, ooobles wrote:
> 
> >
> > I have a tree parser which I'd like to automatically create basically
> > the same output tree with a few modifications. One of the changes is
> > to move a list of child AST's into a parent list.
> >
> > eg. I have token A:(B|C)*; and C:(B)*;
> >
> > A
> >   B
> >   C
> >     B
> >     B
> >   B
> >
> > I'd like to remove occurances of C and leave
> >
> > A
> >   B
> >   B
> >   B
> >   B
> >
> > with the children of B moved up to become children of A.
> >
> > I'm assuming this has a simple answer that I'm not seeing?
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> >



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Fri Aug 13 02:20:23 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] TokenStreamRecognitionException class members
In-Reply-To: <cfhtuc+1n5n@eGroups.com>
References: <cfhtuc+1n5n@eGroups.com>
Message-ID: <20040813092023.GA16232@cs.utwente.nl>

On Fri, Aug 13, 2004 at 08:25:48AM -0000, beckersheinzsb wrote:
> Why is the member "recog" (of type RecognitionException) of the class 
> TokenStreamRecognitionException in the java implementation declared 
> as public an in the c++ implementation declared as private?
> I use antlr with c++ and should know how to get the line and column 
> information out of the TokenStreamRecognitionException.
> I see no possibility to get this information out if it, except 
> botching it out of the return value of toString(). 
> Has anybody an idea for a nice solution?

Fix the TokenStreamRecognitionException.hpp with a few proxy methods that
relay the getFilename/Line/Column to the underlying RecognitionException
then send me a patch and I'll put in the next release ;)

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Fri Aug 13 02:30:06 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Re: ANTLR status wrt Visual C++ 6.0
In-Reply-To: <cfga5m+h87s@eGroups.com>
References: <20040812095019.GA3065@cs.utwente.nl> <cfga5m+h87s@eGroups.com>
Message-ID: <20040813093006.GB16232@cs.utwente.nl>

On Thu, Aug 12, 2004 at 05:42:14PM -0000, Michael Searles wrote:
> ok, I've got 2.7.4 now.
>
> _retTree and returnAST are commented out in the distro.

It seriously looks like you're mixing a support lib from one version of
antlr with a codegenerator of another.

retTree and returnAST should be generated in the CalcTreeParser.hpp

> are these supposed to be commented out?

Yup.

> The 2.7.4 antlr.jar is generating code that expects them.

But also should generate them in the generated class. Verify that in the
top of the generated files the version number from the antlr that generated
them is 2.7.4.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "Of all the things I've lost I miss my mind the most --- Ozzy Osbourne


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Fri Aug 13 09:25:35 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Re: Tree Parser and removing nodes.
In-Reply-To: <cfi0iv+1mks@eGroups.com>
References: <cfi0iv+1mks@eGroups.com>
Message-ID: <677E2466-ED45-11D8-B67C-000393B5606C@codetransform.com>

On Aug 13, 2004, at 2:10 AM, lgcraymer wrote:

> --- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> 
> wrote:
>> a: #(A (B | c));
>> c: #(C! (B)*);
>
> Believe it or not, 2.7.1 would convert c to
> ( #( B (B)* ) )?
>
> 2.7.2 will throw an exception.
>
Will 2.7.4 also, I assume?

Maybe this:

a: #(A (B | c));
c!: #(C (b:B {##=##(null, ##, b);})*

Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Fri Aug 13 13:46:33 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Re: Tree Parser and removing nodes.
In-Reply-To: <677E2466-ED45-11D8-B67C-000393B5606C@codetransform.com>
Message-ID: <cfj9b9+tgk6@eGroups.com>

--- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> wrote:
> On Aug 13, 2004, at 2:10 AM, lgcraymer wrote:
> 
> > --- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> 
> > wrote:
> >> a: #(A (B | c));
> >> c: #(C! (B)*);
> >
> > Believe it or not, 2.7.1 would convert c to
> > ( #( B (B)* ) )?
> >
> > 2.7.2 will throw an exception.
> >
> Will 2.7.4 also, I assume?

Yes.  It is fixed in my code base so that your original answer will be
correct for 2.8--whenever the bureaucracy here finally gives me the
go-ahead to release.  It is about time for me to ping them again--I
made my request back in March!

--Loring

> 
> Maybe this:
> 
> a: #(A (B | c));
> c!: #(C (b:B {##=##(null, ##, b);})*
> 
> Monty



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From antlr-interest-accept-C0bUWD8MseEfem=jN5H5mO4 at yahoogroups.com  Sat Aug 14 05:27:20 2004
From: antlr-interest-accept-C0bUWD8MseEfem=jN5H5mO4 at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:10 2004
Subject: MODERATE -- mail@martin-probst.com posted to antlr-interest
Message-ID: <1092486440.384.98402.m21@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  mail@martin-probst.com 

The message summary:
--------------------
FROM: mail@martin-probst.com 
DATE: Sat, 14 Aug 2004 14:26:52 +0200 
SUBJECT: C++ and Unicode 

Hello, I'm about to start writing a parser which has to 
support Unicode. I want to use ANTLR for this task and the 
output has to be Unicode. I was quite surprised to see that 
currently Unicode with C++ and ANTLR is not really 
supported. The only thing I found about it is the patch or 
special distribution (?) by Ric Klaren. 

Can somebody point me to information about the current 
status of C++ Unicode support in ANTLR? Is the Unicode 
version on this page: 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=266 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-C0bUWD8MseEfem=jN5H5mO4@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: Martin Probst <mail@martin-probst.com>
Subject: C++ and Unicode
Date: Sat, 14 Aug 2004 14:26:52 +0200
Size: 1728
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20040814/f436c293/attachment.mht
From mail at martin-probst.com  Sat Aug 14 05:26:52 2004
From: mail at martin-probst.com (Martin Probst)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] C++ and Unicode
Message-ID: <1092486412.9145.9.camel@perseus>

Hello,
I'm about to start writing a parser which has to support Unicode. I want
to use ANTLR for this task and the output has to be Unicode. I was quite
surprised to see that currently Unicode with C++ and ANTLR is not really
supported. The only thing I found about it is the patch or special
distribution (?) by Ric Klaren.

Can somebody point me to information about the current status of C++
Unicode support in ANTLR? Is the Unicode version on this page:
<http://wwwhome.cs.utwente.nl/~klaren/antlr/right.html> in a usable
state or more some kind of development?

Regards,
Martin Probst




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From i.maier at gmx.de  Sun Aug 15 17:06:46 2004
From: i.maier at gmx.de (Ingo Maier)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Default error handler, generated _token_set_n
Message-ID: <1092614806.4081.8.camel@zaphod>


Hi,

the default parser error handler seems to catch RecognitionExceptions
and then calls consumeUntil() with an auto generated BitSet as argument
(_token_set_n). I guess these BitSets contain some hint to synchronizing
tokens?  But how exactly? I couldn't fiddle out by myself nor found it
in the docs.

Thanks,
Ingo



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From i.maier at gmx.de  Sun Aug 15 19:06:13 2004
From: i.maier at gmx.de (Ingo Maier)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Rewind one token?
Message-ID: <1092621972.4081.15.camel@zaphod>

Hi,

is there a possibility to rewind one single (or a specified amount of)
token(s) in a Lexer? I found the mark()/rewind() mechanism in
TokenBuffer, but unfortunalety I don't have the possibility to set a
mark.

Thanks,
Ingo



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From antlr-interest-accept-roYjKSjkXN2SW4LmltpEvzU at yahoogroups.com  Sun Aug 15 13:48:02 2004
From: antlr-interest-accept-roYjKSjkXN2SW4LmltpEvzU at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:10 2004
Subject: MODERATE -- gcd78@yahoo.com.ar posted to antlr-interest
Message-ID: <1092602882.209.14046.m21@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  gcd78@yahoo.com.ar 

The message summary:
--------------------
FROM: gcd78@yahoo.com.ar 
DATE: Sun, 15 Aug 2004 17:48:01 -0300 (ART) 
SUBJECT: parserOCL (c#) 

Hello, 

I have to determine if an expression ocl is syntactically 
correct, using c #, 

OclLexer.cs, OclParser.cs,... 

Then I generate a Test.cs that receives an oclFile and it 
determines if the syntax of the expressions ocl it is 
correct. That steps have to make and that requirements are 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=267 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-roYjKSjkXN2SW4LmltpEvzU@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: =?iso-8859-1?q?Carlos=20Diego=20Garcia?= <gcd78@yahoo.com.ar>
Subject: parserOCL (c#)
Date: Sun, 15 Aug 2004 17:48:01 -0300 (ART)
Size: 1429
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20040815/0a62423d/attachment.mht
From parrt at cs.usfca.edu  Sun Aug 15 15:04:06 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Default error handler, generated _token_set_n
In-Reply-To: <1092614806.4081.8.camel@zaphod>
References: <1092614806.4081.8.camel@zaphod>
Message-ID: <06FFCFAA-EF07-11D8-B3EA-000A95891192@cs.usfca.edu>


On Aug 15, 2004, at 5:06 PM, Ingo Maier wrote:

>
> Hi,
>
> the default parser error handler seems to catch RecognitionExceptions
> and then calls consumeUntil() with an auto generated BitSet as argument
> (_token_set_n). I guess these BitSets contain some hint to 
> synchronizing
> tokens?  But how exactly? I couldn't fiddle out by myself nor found it
> in the docs.

Hi :)

It's the FOLLOW(r) where r is the rule you are in.  For example, if the 
FOLLOW(expr) is {',', ';', '}'} then that is a could list of tokens to 
look for in order to resynch after an error in an expression. :)  
Simplest reasonable strategy, but it works wonders. ;)

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From gcd78 at yahoo.com.ar  Sun Aug 15 13:48:01 2004
From: gcd78 at yahoo.com.ar (=?iso-8859-1?q?Carlos=20Diego=20Garcia?=)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] parserOCL (c#)
Message-ID: <20040815204802.85468.qmail@web52707.mail.yahoo.com>

Hello, 

I have to determine if an expression ocl is
syntactically correct, using c #,  
  
OclLexer.cs,   
OclParser.cs,...  
  
Then I generate a Test.cs that  receives an oclFile
and it determines if the syntax of the expressions ocl
it is correct.   
That steps have to make and that requirements are
necessary.  
  
thank you  
  
Diego

Correo Yahoo! - 6 MB, tecnolog?a antispam ?gratis! 
 Suscribite ya http://correo.yahoo.com.ar/



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Sun Aug 15 19:49:24 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Rewind one token?
In-Reply-To: <1092621972.4081.15.camel@zaphod>
References: <1092621972.4081.15.camel@zaphod>
Message-ID: <E1E93E58-EF2E-11D8-B347-000393B5606C@codetransform.com>

That mechanism is for the use of syntactic predicates.  See the 
documentation on that.

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Aug 15, 2004, at 7:06 PM, Ingo Maier wrote:

> Hi,
>
> is there a possibility to rewind one single (or a specified amount of)
> token(s) in a Lexer? I found the mark()/rewind() mechanism in
> TokenBuffer, but unfortunalety I don't have the possibility to set a
> mark.
>
> Thanks,
> Ingo
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From i.maier at gmx.de  Mon Aug 16 06:03:42 2004
From: i.maier at gmx.de (Ingo Maier)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Rewind one token?
In-Reply-To: <E1E93E58-EF2E-11D8-B347-000393B5606C@codetransform.com>
References: <1092621972.4081.15.camel@zaphod>
	 <E1E93E58-EF2E-11D8-B347-000393B5606C@codetransform.com>
Message-ID: <1092661421.1778.14.camel@zaphod>

Am So, den 15.08.2004 schrieb Monty Zukowski um 22:49:
> That mechanism is for the use of syntactic predicates.  See the 
> documentation on that.
> 
> Monty

Well, my question seemed to be misleading. I don't want to know where
mark/rewind is used (a call hierarchy check tells me that, I use eclipse
:)). I want to know, if there is a possibility to
rewind/backtrack/whatever an already read token? 

I use two lexers on the same stream with a multiplexer. First lexer
starts. When it passes a specific token (sequence) to the parser, lexers
will be switched. But the tokens already read by the first lexer and
indicating the switch will be needed by the second one.

Any ideas how to do that?

Thanks,
Ingo



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Mon Aug 16 01:54:07 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Rewind one token?
In-Reply-To: <1092661421.1778.14.camel@zaphod>
References: <1092621972.4081.15.camel@zaphod> <E1E93E58-EF2E-11D8-B347-000393B5606C@codetransform.com> <1092661421.1778.14.camel@zaphod>
Message-ID: <20040816085407.GA32083@cs.utwente.nl>

On Mon, Aug 16, 2004 at 09:03:42AM -0400, Ingo Maier wrote:
> Well, my question seemed to be misleading. I don't want to know where
> mark/rewind is used (a call hierarchy check tells me that, I use eclipse
> :)). I want to know, if there is a possibility to
> rewind/backtrack/whatever an already read token? 
> 
> I use two lexers on the same stream with a multiplexer. First lexer
> starts. When it passes a specific token (sequence) to the parser, lexers
> will be switched. But the tokens already read by the first lexer and
> indicating the switch will be needed by the second one.
> 
> Any ideas how to do that?

Call mark at the start of the switch sequence then switch to the other
lexer and rewind directly at the start of the second lexer (e.g. pass the
mark id and call rewind in the init action of the startrule)?

I'm not sure wether you do but.. it sounds like you switch lexers from the
parser. In general this does not work (especially if there's some
predicates in the parser (mark/rewind again)) (just checking)

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  Xander: "Buffy, we need to do something *now*"
  Angel: "We need a distraction."
  Buffy: "Right."
  Angel: "What are you going to do?"
  Buffy: "I'm going to kill them all. That oughtta distract 'em..."



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Mon Aug 16 02:09:32 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] C++ and Unicode
In-Reply-To: <1092486412.9145.9.camel@perseus>
References: <1092486412.9145.9.camel@perseus>
Message-ID: <20040816090932.GB32083@cs.utwente.nl>

Hi,

On Sat, Aug 14, 2004 at 02:26:52PM +0200, Martin Probst wrote:
> I'm about to start writing a parser which has to support Unicode. I want
> to use ANTLR for this task and the output has to be Unicode. I was quite
> surprised to see that currently Unicode with C++ and ANTLR is not really
> supported. The only thing I found about it is the patch or special
> distribution (?) by Ric Klaren.
> 
> Can somebody point me to information about the current status of C++
> Unicode support in ANTLR? Is the Unicode version on this page:
> <http://wwwhome.cs.utwente.nl/~klaren/antlr/right.html> in a usable
> state or more some kind of development?

The patch on my page is a hack there's a better approach detailed a while
ago by Mark Lentczner.

See this thread:

http://groups.yahoo.com/group/antlr-interest/messages/11772

I also got another 'hack' that makes the C++ part read UTF8 and store it in
the backend in std::string but UTF8 encoded. The framework for that can be
adapted quite easily to deal with other input encodings and output
encodings.

I'm waiting for some patches Mark promised me a while back. After that I'll
release a new snapshot with 2.7.4 bugfixes, the C++ port of the
TokenStreamRewriteEngine, UnicodeCharBuffer and UnicodeCharScanner. Also a
new reference counter will be used for tokens (for starters). Character
literals are limited to \ufffe though due to the ANTLR 2 analysis engine.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
   Words fly like arrows
      as if we knew what was right and wrong. --- Chuang Tsu



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From sunshine at public.kherson.ua  Mon Aug 16 02:36:16 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] C++ and Unicode
In-Reply-To: <20040816090932.GB32083@cs.utwente.nl>
Message-ID: <BD465AC0.21E32%sunshine@public.kherson.ua>

On 8/16/04 12:09 PM, "Ric Klaren" <klaren@cs.utwente.nl> wrote:

> Hi,
> 
> On Sat, Aug 14, 2004 at 02:26:52PM +0200, Martin Probst wrote:
>> I'm about to start writing a parser which has to support Unicode. I want
>> to use ANTLR for this task and the output has to be Unicode. I was quite
>> surprised to see that currently Unicode with C++ and ANTLR is not really
>> supported. The only thing I found about it is the patch or special
>> distribution (?) by Ric Klaren.
>> 
>> Can somebody point me to information about the current status of C++
>> Unicode support in ANTLR? Is the Unicode version on this page:
>> <http://wwwhome.cs.utwente.nl/~klaren/antlr/right.html> in a usable
>> state or more some kind of development?
> 
> The patch on my page is a hack there's a better approach detailed a while
> ago by Mark Lentczner.
> 
> See this thread:
> 
> http://groups.yahoo.com/group/antlr-interest/messages/11772
> 
> I also got another 'hack' that makes the C++ part read UTF8 and store it in
> the backend in std::string but UTF8 encoded. The framework for that can be
> adapted quite easily to deal with other input encodings and output
> encodings.
> 
> I'm waiting for some patches Mark promised me a while back. After that I'll
> release a new snapshot with 2.7.4 bugfixes, the C++ port of the
> TokenStreamRewriteEngine, UnicodeCharBuffer and UnicodeCharScanner. Also a
> new reference counter will be used for tokens (for starters). Character
> literals are limited to \ufffe though due to the ANTLR 2 analysis engine.

Hi Rick,

Yes we also think that UTF8 should be the first step to unicode world.
And it looks to be relatively easy step.

For example for our SQL grammar, we have:

A) keywords -- always English

B) identifiers -- we want/can extract them as UTF8 strings, which later we
will self convert to UTF16. Identifiers this is e.g. Name of table or field.

C) string constants --

    fld = 'affjsdfhjkfhjksdhf '

It also can be extracted in UTF8, and later we will convert it to UF16.

We need convert to UTFq6, because we use IBV ICU library, so all our
internal algorithms work in UTF16.

Yes, Please make UTF8 support. At least partial excluding keywords.


-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Mon Aug 16 02:29:54 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Re: Rewind one token?
In-Reply-To: <1092661421.1778.14.camel@zaphod>
Message-ID: <cfpuqi+3m6h@eGroups.com>

The reasonable solution is probably to add a token buffer to both
lexers (same buffer).  Take a look at the Python grammar (at
www.antlr.org) for an example of a token buffered lexer.  For your
problem, a circular buffer with fixed length would make sense.

--Loring



--- In antlr-interest@yahoogroups.com, Ingo Maier <i.maier@g...> wrote:
> Am So, den 15.08.2004 schrieb Monty Zukowski um 22:49:
> > That mechanism is for the use of syntactic predicates.  See the 
> > documentation on that.
> > 
> > Monty
> 
> Well, my question seemed to be misleading. I don't want to know where
> mark/rewind is used (a call hierarchy check tells me that, I use eclipse
> :)). I want to know, if there is a possibility to
> rewind/backtrack/whatever an already read token? 
> 
> I use two lexers on the same stream with a multiplexer. First lexer
> starts. When it passes a specific token (sequence) to the parser, lexers
> will be switched. But the tokens already read by the first lexer and
> indicating the switch will be needed by the second one.
> 
> Any ideas how to do that?
> 
> Thanks,
> Ingo



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Mon Aug 16 02:57:50 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] C++ and Unicode
In-Reply-To: <BD465AC0.21E32%sunshine@public.kherson.ua>
References: <20040816090932.GB32083@cs.utwente.nl> <BD465AC0.21E32%sunshine@public.kherson.ua>
Message-ID: <20040816095750.GC32083@cs.utwente.nl>

On Mon, Aug 16, 2004 at 12:36:16PM +0300, Ruslan Zasukhin wrote:
> Yes we also think that UTF8 should be the first step to unicode world.
> And it looks to be relatively easy step.

I got it it going and indeed it was easier as I expected. But there's
probably still a few 'sore' spots where wrong assumptions are made or the
codegenerator needs tweaking. Generating grammars with a big charVocab is
slow due to the bitset generating. Also the space bitsets currently take is
a bit too much. I guess I can get a nice initial reduction by stripping
leading/trailing zero's of the bitsets.

> For example for our SQL grammar, we have:
>
> A) keywords -- always English

I did not test literal table testing yet. But since this is all contained
in one or two methods it will be easy to override/tweak.

> B) identifiers -- we want/can extract them as UTF8 strings, which later we
> will self convert to UTF16. Identifiers this is e.g. Name of table or field.
>
> C) string constants --
>
>     fld = 'affjsdfhjkfhjksdhf '
>
> It also can be extracted in UTF8, and later we will convert it to UF16.
>
> We need convert to UTFq6, because we use IBV ICU library, so all our
> internal algorithms work in UTF16.

Currently I use a custom CharBuffer that decodes UTF8 to integers. Changing
it to do autodetecting or UTF16 is easy. Inside the lexer
(UnicodeCharScanner baseclass) most checks are done in 32 bit int values.
Since antlr builds the strings that are passed to the parser per character
you only have to override one append method to do the encoding for the
backend. Just to have something there I encode the 32 bit values back to
UTF8 and store them in a std::string storing them into UTF16 would be near
trivial I guess ;)

I hope I can release this stuff soon so some people who actually use this
stuff can see what it does and what needs tweaking/fixing.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
     Innovation makes enemies of all those who prospered under the old
   regime, and only lukewarm support is forthcoming from those who would
               prosper under the new. --- Niccol? Machiavelli



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From i.maier at gmx.de  Mon Aug 16 09:21:04 2004
From: i.maier at gmx.de (Ingo Maier)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Rewind one token?
In-Reply-To: <20040816085407.GA32083@cs.utwente.nl>
References: <1092621972.4081.15.camel@zaphod>
	 <E1E93E58-EF2E-11D8-B347-000393B5606C@codetransform.com>
	 <1092661421.1778.14.camel@zaphod>  <20040816085407.GA32083@cs.utwente.nl>
Message-ID: <1092673262.1620.21.camel@zaphod>

On Mon, 2004-08-16 at 04:54, Ric Klaren wrote:
> On Mon, Aug 16, 2004 at 09:03:42AM -0400, Ingo Maier wrote:
> > Well, my question seemed to be misleading. I don't want to know where
> > mark/rewind is used (a call hierarchy check tells me that, I use eclipse
> > :)). I want to know, if there is a possibility to
> > rewind/backtrack/whatever an already read token? 
> > 
> > I use two lexers on the same stream with a multiplexer. First lexer
> > starts. When it passes a specific token (sequence) to the parser, lexers
> > will be switched. But the tokens already read by the first lexer and
> > indicating the switch will be needed by the second one.
> > 
> > Any ideas how to do that?
> 
> Call mark at the start of the switch sequence then switch to the other
> lexer and rewind directly at the start of the second lexer (e.g. pass the
> mark id and call rewind in the init action of the startrule)?
> 
> I'm not sure wether you do but.. it sounds like you switch lexers from the
> parser. In general this does not work (especially if there's some
> predicates in the parser (mark/rewind again)) (just checking)

Well, sorry, I think I was on the wrong level. The second lexer should
get a chance to "rescan" the last tokens, read by the first lexer. It
might get totally different tokens from the same input sequence. This
have to be done on the level of a CharBuffer or InputBuffer, probably.
So, I want to put back the last tokens, character by character.

Just to clarify, I want to do the following:

1) give parser1/lexer1 a try
2) when they fail, put back all tokens since failure, can be several due
to lookahead etc
3) give parser2/lexer2 a try, beginning from the point of failure, as if
nothing happened before

I hope this makes it clearer,
Ingo



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From sunshine at public.kherson.ua  Mon Aug 16 04:22:36 2004
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] C++ and Unicode
In-Reply-To: <20040816095750.GC32083@cs.utwente.nl>
Message-ID: <BD4673AC.21E52%sunshine@public.kherson.ua>

On 8/16/04 12:57 PM, "Ric Klaren" <klaren@cs.utwente.nl> wrote:

> On Mon, Aug 16, 2004 at 12:36:16PM +0300, Ruslan Zasukhin wrote:
>> Yes we also think that UTF8 should be the first step to unicode world.
>> And it looks to be relatively easy step.
> 
> I got it it going and indeed it was easier as I expected. But there's
> probably still a few 'sore' spots where wrong assumptions are made or the
> codegenerator needs tweaking. Generating grammars with a big charVocab is
> slow due to the bitset generating. Also the space bitsets currently take is
> a bit too much. I guess I can get a nice initial reduction by stripping
> leading/trailing zero's of the bitsets.

Yes, you can make such bitset class easy enough.

I wonder which char set you use?
    32000 chars ?


-- 
Best regards,
Ruslan Zasukhin      [ I feel the need...the need for speed ]
-------------------------------------------------------------
e-mail: ruslan@paradigmasoft.com
web: http://www.paradigmasoft.com

To subscribe to the Valentina mail list go to:
http://lists.macserve.net/mailman/listinfo/valentina
-------------------------------------------------------------



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Mon Aug 16 08:40:22 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Rewind one token?
In-Reply-To: <1092673262.1620.21.camel@zaphod>
References: <1092621972.4081.15.camel@zaphod> <E1E93E58-EF2E-11D8-B347-000393B5606C@codetransform.com> <1092661421.1778.14.camel@zaphod>  <20040816085407.GA32083@cs.utwente.nl> <1092673262.1620.21.camel@zaphod>
Message-ID: <959D9D12-EF9A-11D8-B347-000393B5606C@codetransform.com>

Giving different rules a try is exactly what syntactic predicates are 
for.  Perhaps if you could post a small example that shows the problem 
we can help out.

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Aug 16, 2004, at 9:21 AM, Ingo Maier wrote:

> On Mon, 2004-08-16 at 04:54, Ric Klaren wrote:
>> On Mon, Aug 16, 2004 at 09:03:42AM -0400, Ingo Maier wrote:
>>> Well, my question seemed to be misleading. I don't want to know where
>>> mark/rewind is used (a call hierarchy check tells me that, I use 
>>> eclipse
>>> :)). I want to know, if there is a possibility to
>>> rewind/backtrack/whatever an already read token?
>>>
>>> I use two lexers on the same stream with a multiplexer. First lexer
>>> starts. When it passes a specific token (sequence) to the parser, 
>>> lexers
>>> will be switched. But the tokens already read by the first lexer and
>>> indicating the switch will be needed by the second one.
>>>
>>> Any ideas how to do that?
>>
>> Call mark at the start of the switch sequence then switch to the other
>> lexer and rewind directly at the start of the second lexer (e.g. pass 
>> the
>> mark id and call rewind in the init action of the startrule)?
>>
>> I'm not sure wether you do but.. it sounds like you switch lexers 
>> from the
>> parser. In general this does not work (especially if there's some
>> predicates in the parser (mark/rewind again)) (just checking)
>
> Well, sorry, I think I was on the wrong level. The second lexer should
> get a chance to "rescan" the last tokens, read by the first lexer. It
> might get totally different tokens from the same input sequence. This
> have to be done on the level of a CharBuffer or InputBuffer, probably.
> So, I want to put back the last tokens, character by character.
>
> Just to clarify, I want to do the following:
>
> 1) give parser1/lexer1 a try
> 2) when they fail, put back all tokens since failure, can be several 
> due
> to lookahead etc
> 3) give parser2/lexer2 a try, beginning from the point of failure, as 
> if
> nothing happened before
>
> I hope this makes it clearer,
> Ingo
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From joanpujol at gmail.com  Mon Aug 16 09:38:16 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Labeled subrules work? and mailing list archives
Message-ID: <d2d18a10408160938687d96ef@mail.gmail.com>

Labeled subrules work?

I have a rule like:

rule: ...   t:(basictype:IDENT) {
  
}

And I use #t inside the action. ANTLR don't give me any error or
warning (searching in google I see that releases notes of 2.7.2 says
added warning for subrules??)

But when I examine the code I see that nothing is assigned to t.
If I use t:(basictype) also nothing and if I use t:basictype all OK.


Well, the question is, labeled subrules doesn't work? Or I'm doing
something wrong.

Also  I would like to know how finished the request to put the mailing
list archives avaiable in some place. Because I think that a
searchable mailing list archive will make a big benefit to the
comunity. Specially to the newbie comunity like me :P

Cheers,

-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Mon Aug 16 09:57:36 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Labeled subrules work? and mailing list archives
In-Reply-To: <d2d18a10408160938687d96ef@mail.gmail.com>
References: <d2d18a10408160938687d96ef@mail.gmail.com>
Message-ID: <5FB7A5E2-EFA5-11D8-B347-000393B5606C@codetransform.com>

On Aug 16, 2004, at 9:38 AM, Joan Pujol wrote:

> Labeled subrules work?

No.  You will have to refactor into different rules.

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From antlr-interest-accept-1KqwHFc59Np0ugzWkolyS90 at yahoogroups.com  Mon Aug 16 15:07:19 2004
From: antlr-interest-accept-1KqwHFc59Np0ugzWkolyS90 at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:10 2004
Subject: MODERATE -- mail@martin-probst.com posted to antlr-interest
Message-ID: <1092694039.392.77522.m5@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  mail@martin-probst.com 

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=268 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-1KqwHFc59Np0ugzWkolyS90@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: Martin Probst <mail@martin-probst.com>
Subject: Re: [antlr-interest] C++ and Unicode
Date: Tue, 17 Aug 2004 00:07:11 +0200
Size: 4351
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20040816/6484a61d/attachment.mht
From mail at martin-probst.com  Mon Aug 16 15:07:11 2004
From: mail at martin-probst.com (Martin Probst)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] C++ and Unicode
In-Reply-To: <20040816095750.GC32083@cs.utwente.nl>
References: <20040816090932.GB32083@cs.utwente.nl>
	 <BD465AC0.21E32%sunshine@public.kherson.ua>
	 <20040816095750.GC32083@cs.utwente.nl>
Message-ID: <1092694030.8785.15.camel@perseus>

Hello,
thanks for your help. I've already thought of the possibility of
"emulating" an UTF-8 aware lexer with the current ANTLR release though
it seems some kind of unclean to me (even though it's not really that
much more work I guess). 
I would love to try out any Unicode-aware releases. If you can supply
some, I would like to test it with an XQuery grammar.

Regards,
Martin Probst

Am Mo, den 16.08.2004 schrieb Ric Klaren um 11:57:
> On Mon, Aug 16, 2004 at 12:36:16PM +0300, Ruslan Zasukhin wrote:
> > Yes we also think that UTF8 should be the first step to unicode world.
> > And it looks to be relatively easy step.
> 
> I got it it going and indeed it was easier as I expected. But there's
> probably still a few 'sore' spots where wrong assumptions are made or the
> codegenerator needs tweaking. Generating grammars with a big charVocab is
> slow due to the bitset generating. Also the space bitsets currently take is
> a bit too much. I guess I can get a nice initial reduction by stripping
> leading/trailing zero's of the bitsets.
> 
> > For example for our SQL grammar, we have:
> >
> > A) keywords -- always English
> 
> I did not test literal table testing yet. But since this is all contained
> in one or two methods it will be easy to override/tweak.
> 
> > B) identifiers -- we want/can extract them as UTF8 strings, which later we
> > will self convert to UTF16. Identifiers this is e.g. Name of table or field.
> >
> > C) string constants --
> >
> >     fld = 'affjsdfhjkfhjksdhf '
> >
> > It also can be extracted in UTF8, and later we will convert it to UF16.
> >
> > We need convert to UTFq6, because we use IBV ICU library, so all our
> > internal algorithms work in UTF16.
> 
> Currently I use a custom CharBuffer that decodes UTF8 to integers. Changing
> it to do autodetecting or UTF16 is easy. Inside the lexer
> (UnicodeCharScanner baseclass) most checks are done in 32 bit int values.
> Since antlr builds the strings that are passed to the parser per character
> you only have to override one append method to do the encoding for the
> backend. Just to have something there I encode the 32 bit values back to
> UTF8 and store them in a std::string storing them into UTF16 would be near
> trivial I guess ;)
> 
> I hope I can release this stuff soon so some people who actually use this
> stuff can see what it does and what needs tweaking/fixing.
> 
> Cheers,
> 
> Ric
> --
> -----+++++*****************************************************+++++++++-------
>     ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
> -----+++++*****************************************************+++++++++-------
>      Innovation makes enemies of all those who prospered under the old
>    regime, and only lukewarm support is forthcoming from those who would
>                prosper under the new. --- Niccol? Machiavelli
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 
> 




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Mon Aug 16 15:57:29 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] ANTLR2004 workshop formal announcement
Message-ID: <A69731AC-EFD7-11D8-B3EA-000A95891192@cs.usfca.edu>

Howdy folks,

Well, it's time for another workshop.  Please visit:

http://www.cs.usfca.edu/ANTLR2004.shtml

for details.  Oct 7-8, 2004 at USF here in San Francisco.  Limited to 
first 35 to register.  Gonna be a hoot!  Ric Klaren, the C++ code 
generator guy, might even be able to make it!

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From charlweed at yahoo.com  Mon Aug 16 16:03:08 2004
From: charlweed at yahoo.com (charlweed)
Date: Mon Dec 20 16:17:10 2004
Subject: [antlr-interest] Lables for tokens cause "cannot resolve symbol" errors
Message-ID: <cfrefc+ou2l@eGroups.com>

Hi,
I'm trying to mod a Java grammer, but when ever I try to create  a
lable for a token, I get a "cannot resolve symbol" chen I compile the
JavaRecogniser. AST lables work fine. Is there some odd config that is
messed up somewhere?

In the eample below, note that the identifier assignmentTokens_AST IS
generated, but plain assignmentTokens is not.....


expression
	:  assignmentTokens :assignmentExpression
	   {
           #expression = #(#[EXPR,"EXPR"],#expression);                   
           _engine.wrapWithSetter((IndexedToken)assignmentTokens);
           }
	;


	public final void expression() throws RecognitionException,
TokenStreamException {
		
		returnAST = null;
		ASTPair currentAST = new ASTPair();
		AST expression_AST = null;
		AST assignmentTokens_AST = null;
		
		assignmentExpression();
		assignmentTokens_AST = (AST)returnAST;
		astFactory.addASTChild(currentAST, returnAST);
		if ( inputState.guessing==0 ) {
			expression_AST = (AST)currentAST.root;
			
			expression_AST = (AST)astFactory.make( (new
ASTArray(2)).add(astFactory.create(EXPR,"EXPR")).add(expression_AST));
			_engine.wrapWithSetter((IndexedToken)assignmentTokens);/*"cannot
resolve symbol" Error!*/
			
			currentAST.root = expression_AST;
			currentAST.child = expression_AST!=null
&&expression_AST.getFirstChild()!=null ?
				expression_AST.getFirstChild() : expression_AST;
			currentAST.advanceChildToEnd();
		}
		expression_AST = (AST)currentAST.root;
		returnAST = expression_AST;
	}



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From sriram.kumar at nomissolutions.com  Mon Aug 16 17:19:52 2004
From: sriram.kumar at nomissolutions.com (kumarsriram)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Expression Parser - identifying invalid expressions
Message-ID: <cfriv8+md2l@eGroups.com>

Hi,

I'm writing a glorified formula parser and borrowed some of the 
concepts from java.g bundled with the examples in antlr. I'm pretty 
new to the world of parsers, so pardon my ignorance.

I have the following sub-rules for conditional, relational, 
multiplicative, additive expressions that handle simple formulae.

The trouble is, my parser doesn't seem to catch invalid cases. For 
example, if there's a conditional expression of the 
form "expr1>expr2 & expr3<expr4" it doesn't throw an exception to 
indicate that "&" is invalid (it must be "&&"). It just takes the 
first predicate "expr1>expr2" and matches it against a "relExpr" 
rule and proceeds further.

So I wrote an explicit look ahead as follows:

// logical or (||)  
condExpr
	:(logicalAndExpression VAR )=>logicalAndExpression (LOR^ 
expr2:logicalAndExpression)+ 
	| logicalAndExpression
	;
    }
// logical and (&&)  
logicalAndExpression
	:(equalityExpr VAR)=>(expr1:equalityExpr) (LAND^ 
equalityExpr)+
	| equalityExpr
	;
    }

Is there any other simpler way of specifying the same? Otherwise, I 
need to perform an explicit lookahead in every rule.

Regards,
Sriram


The complete grammar is:

class MyParser extends Parser;
options {
	buildAST = true;
	k=1;
}

// logical or (||)  
condExpr
	:(logicalAndExpression VAR )=>logicalAndExpression (LOR^ 
expr2:logicalAndExpression)+ 
	| logicalAndExpression
	;
	exception
	catch [RecognitionException ex] {
       throw ex;
    }
// logical and (&&)  
logicalAndExpression
	:(equalityExpr VAR)=>(expr1:equalityExpr) (LAND^ 
equalityExpr)+
	| equalityExpr
	;
    }
// logical and (&&) 
equalityExpr
	:(relExpr (NOT_EQUAL^ | JAVA_EQUAL^))=> relExpr ((NOT_EQUAL^ 
| JAVA_EQUAL^) relExpr)* 
	| relExpr
	;
    }
// boolean relational expressions 
relExpr
	:	addExpr	 (GT^|GT_EQ^|LT^|LT_EQ^addExpr))*
	;
		
// binary addition/subtraction 
addExpr
	:	multExpr ((PLUS^ | MINUS^) multExpr)*
	;

// multiplication/division/modulo 
multExpr
	:	unaryExpr ((STAR^ | DIV^ | MOD^ ) unaryExpr)*
	;

unaryExpr
	:	MINUS^ unaryExpr
	|	PLUS^ unaryExpr
	|	unaryExprNotPlusMinus
	;

unaryExprNotPlusMinus
	:	LNOT^ unaryExpr
	|	postfixExpr
	;

postfixExpr:
	(id:VAR LPAREN)=>
		// Matches function call syntax like "pow(a,b)" 
		id2:VAR^
		(
 	      	parenArgs
		)?
	|atom;

parenArgs:	
	LPAREN^ (addExpr(COMMA addExpr)*)? RPAREN^;

atom:
	VAR 
	| NUM
	| CHAR_LITERAL
	| STRING_LITERAL
	| INPUT_VAR
	| LPAREN! condExpr RPAREN!;








 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Mon Aug 16 19:28:00 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Re: Expression Parser - identifying invalid expressions
In-Reply-To: <cfriv8+md2l@eGroups.com>
Message-ID: <cfrqfg+fct6@eGroups.com>


How does your lexer define the tokens?  Assuming LOR is "||" and LAND
is "&&", I don't see where the parser below even accepts "|" and "&".

You might consider separating your expressions into logical/boolean
and numeric.  Then call whichever is appropriate dependent on the context.

Eric

p.s. I suggestion not calling a "conditional" expression a logical or
expression.  Most consider a conditional expression to use the
conditional operators "?" and ":".

--- In antlr-interest@yahoogroups.com, "kumarsriram"
<sriram.kumar@n...> wrote:
> Hi,
> 
> I'm writing a glorified formula parser and borrowed some of the 
> concepts from java.g bundled with the examples in antlr. I'm pretty 
> new to the world of parsers, so pardon my ignorance.
> 
> I have the following sub-rules for conditional, relational, 
> multiplicative, additive expressions that handle simple formulae.
> 
> The trouble is, my parser doesn't seem to catch invalid cases. For 
> example, if there's a conditional expression of the 
> form "expr1>expr2 & expr3<expr4" it doesn't throw an exception to 
> indicate that "&" is invalid (it must be "&&"). It just takes the 
> first predicate "expr1>expr2" and matches it against a "relExpr" 
> rule and proceeds further.
> 
> So I wrote an explicit look ahead as follows:
> 
> // logical or (||)  
> condExpr
> 	:(logicalAndExpression VAR )=>logicalAndExpression (LOR^ 
> expr2:logicalAndExpression)+ 
> 	| logicalAndExpression
> 	;
>     }
> // logical and (&&)  
> logicalAndExpression
> 	:(equalityExpr VAR)=>(expr1:equalityExpr) (LAND^ 
> equalityExpr)+
> 	| equalityExpr
> 	;
>     }
> 
> Is there any other simpler way of specifying the same? Otherwise, I 
> need to perform an explicit lookahead in every rule.
> 
> Regards,
> Sriram
> 
> 
> The complete grammar is:
> 
> class MyParser extends Parser;
> options {
> 	buildAST = true;
> 	k=1;
> }
> 
> // logical or (||)  
> condExpr
> 	:(logicalAndExpression VAR )=>logicalAndExpression (LOR^ 
> expr2:logicalAndExpression)+ 
> 	| logicalAndExpression
> 	;
> 	exception
> 	catch [RecognitionException ex] {
>        throw ex;
>     }
> // logical and (&&)  
> logicalAndExpression
> 	:(equalityExpr VAR)=>(expr1:equalityExpr) (LAND^ 
> equalityExpr)+
> 	| equalityExpr
> 	;
>     }
> // logical and (&&) 
> equalityExpr
> 	:(relExpr (NOT_EQUAL^ | JAVA_EQUAL^))=> relExpr ((NOT_EQUAL^ 
> | JAVA_EQUAL^) relExpr)* 
> 	| relExpr
> 	;
>     }
> // boolean relational expressions 
> relExpr
> 	:	addExpr	 (GT^|GT_EQ^|LT^|LT_EQ^addExpr))*
> 	;
> 		
> // binary addition/subtraction 
> addExpr
> 	:	multExpr ((PLUS^ | MINUS^) multExpr)*
> 	;
> 
> // multiplication/division/modulo 
> multExpr
> 	:	unaryExpr ((STAR^ | DIV^ | MOD^ ) unaryExpr)*
> 	;
> 
> unaryExpr
> 	:	MINUS^ unaryExpr
> 	|	PLUS^ unaryExpr
> 	|	unaryExprNotPlusMinus
> 	;
> 
> unaryExprNotPlusMinus
> 	:	LNOT^ unaryExpr
> 	|	postfixExpr
> 	;
> 
> postfixExpr:
> 	(id:VAR LPAREN)=>
> 		// Matches function call syntax like "pow(a,b)" 
> 		id2:VAR^
> 		(
>  	      	parenArgs
> 		)?
> 	|atom;
> 
> parenArgs:	
> 	LPAREN^ (addExpr(COMMA addExpr)*)? RPAREN^;
> 
> atom:
> 	VAR 
> 	| NUM
> 	| CHAR_LITERAL
> 	| STRING_LITERAL
> 	| INPUT_VAR
> 	| LPAREN! condExpr RPAREN!;



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From sriram.kumar at nomissolutions.com  Mon Aug 16 21:21:32 2004
From: sriram.kumar at nomissolutions.com (kumarsriram)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Re: Expression Parser - identifying invalid expressions
In-Reply-To: <cfrqfg+fct6@eGroups.com>
Message-ID: <cfs14c+gkrv@eGroups.com>


Thanks for the response. You are right about the terminology 
(logicalOrExpr instead of condExpr). I was just lazy not to change 
the name. I'm enclosing the lexer definition. 

>> is "&&", I don't see where the parser below even accepts "|" 
and "&".

I don't want to process '&' and '|'. Occurence of these characters 
in a logical (compound) expression must result in an error.


*************************
class MyLexer extends Lexer;

options {
	defaultErrorHandler=false;
	testLiterals=false;
	k=4; 
}

//The following Lexer rule takes care of skipping white space 
characters in the formula
WS:	
	(' ' |'\t'|'\n'|'\r'){ _ttype = Token.SKIP; };

RPAREN:
	')'	;	

LPAREN:
	'('	;

COMMA:
	','	;

PLUS:
	'+';
MINUS:
	'-';

MOD:
	'%';
	
DIV:
	'/';
	
STAR:
	'*';

SEMI:
	';';

DOT:
	'.';

LNOT:
	'!';

GT:
	'>';

LT:
	'<';

JAVA_EQUAL:	 
	"==";

NOT_EQUAL:	
	"!=";

GT_EQ:
	">=";

LT_EQ: 
	"<=";

LAND:
	"&&";

LOR:	
	"||";
	
protected
DIGIT:
	'0'..'9';

NUM:
	(DIGIT)+ (DOT (DIGIT)*)?;


VAR: 
	(scope:ID) (DOT varName:ID)?;

INPUT_VAR: "$" id1:ID (DOT id2:ID)? ;

// character literals
CHAR_LITERAL
	:	'\'' ( ESC | ~('\''|'\n'|'\r'|'\\') ) '\''
	;

// string literals
STRING_LITERAL
	:	'"' (ESC|~('"'|'\\'|'\n'|'\r'))* '"'
	;


protected
ESC
	:	'\\'
		(	'n'
		|	'r'
		|	't'
		|	'b'
		|	'f'
		|	'"'
		|	'\''
		|	'\\'



protected
ID
options {
	testLiterals = false;
}
	:	('a'..'z'|'A'..'Z'|'_') 
('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
	;

	






--- In antlr-interest@yahoogroups.com, "Eric Mahurin" 
<eric_mahurin@y...> wrote:
> How does your lexer define the tokens?  Assuming LOR is "||" and 
LAND
> is "&&", I don't see where the parser below even accepts "|" 
and "&".
> 
> You might consider separating your expressions into logical/boolean
> and numeric.  Then call whichever is appropriate dependent on the 
context.
> 
> Eric
> 
> p.s. I suggestion not calling a "conditional" expression a logical 
or
> expression.  Most consider a conditional expression to use the
> conditional operators "?" and ":".
> 
> --- In antlr-interest@yahoogroups.com, "kumarsriram"
> <sriram.kumar@n...> wrote:
> > Hi,
> > 
> > I'm writing a glorified formula parser and borrowed some of the 
> > concepts from java.g bundled with the examples in antlr. I'm 
pretty 
> > new to the world of parsers, so pardon my ignorance.
> > 
> > I have the following sub-rules for conditional, relational, 
> > multiplicative, additive expressions that handle simple formulae.
> > 
> > The trouble is, my parser doesn't seem to catch invalid cases. 
For 
> > example, if there's a conditional expression of the 
> > form "expr1>expr2 & expr3<expr4" it doesn't throw an exception 
to 
> > indicate that "&" is invalid (it must be "&&"). It just takes 
the 
> > first predicate "expr1>expr2" and matches it against a "relExpr" 
> > rule and proceeds further.
> > 
> > So I wrote an explicit look ahead as follows:
> > 
> > // logical or (||)  
> > condExpr
> > 	:(logicalAndExpression VAR )=>logicalAndExpression (LOR^ 
> > expr2:logicalAndExpression)+ 
> > 	| logicalAndExpression
> > 	;
> >     }
> > // logical and (&&)  
> > logicalAndExpression
> > 	:(equalityExpr VAR)=>(expr1:equalityExpr) (LAND^ 
> > equalityExpr)+
> > 	| equalityExpr
> > 	;
> >     }
> > 
> > Is there any other simpler way of specifying the same? 
Otherwise, I 
> > need to perform an explicit lookahead in every rule.
> > 
> > Regards,
> > Sriram
> > 
> > 
> > The complete grammar is:
> > 
> > class MyParser extends Parser;
> > options {
> > 	buildAST = true;
> > 	k=1;
> > }
> > 
> > // logical or (||)  
> > condExpr
> > 	:(logicalAndExpression VAR )=>logicalAndExpression (LOR^ 
> > expr2:logicalAndExpression)+ 
> > 	| logicalAndExpression
> > 	;
> > 	exception
> > 	catch [RecognitionException ex] {
> >        throw ex;
> >     }
> > // logical and (&&)  
> > logicalAndExpression
> > 	:(equalityExpr VAR)=>(expr1:equalityExpr) (LAND^ 
> > equalityExpr)+
> > 	| equalityExpr
> > 	;
> >     }
> > // logical and (&&) 
> > equalityExpr
> > 	:(relExpr (NOT_EQUAL^ | JAVA_EQUAL^))=> relExpr ((NOT_EQUAL^ 
> > | JAVA_EQUAL^) relExpr)* 
> > 	| relExpr
> > 	;
> >     }
> > // boolean relational expressions 
> > relExpr
> > 	:	addExpr	 (GT^|GT_EQ^|LT^|LT_EQ^addExpr))*
> > 	;
> > 		
> > // binary addition/subtraction 
> > addExpr
> > 	:	multExpr ((PLUS^ | MINUS^) multExpr)*
> > 	;
> > 
> > // multiplication/division/modulo 
> > multExpr
> > 	:	unaryExpr ((STAR^ | DIV^ | MOD^ ) unaryExpr)*
> > 	;
> > 
> > unaryExpr
> > 	:	MINUS^ unaryExpr
> > 	|	PLUS^ unaryExpr
> > 	|	unaryExprNotPlusMinus
> > 	;
> > 
> > unaryExprNotPlusMinus
> > 	:	LNOT^ unaryExpr
> > 	|	postfixExpr
> > 	;
> > 
> > postfixExpr:
> > 	(id:VAR LPAREN)=>
> > 		// Matches function call syntax like "pow(a,b)" 
> > 		id2:VAR^
> > 		(
> >  	      	parenArgs
> > 		)?
> > 	|atom;
> > 
> > parenArgs:	
> > 	LPAREN^ (addExpr(COMMA addExpr)*)? RPAREN^;
> > 
> > atom:
> > 	VAR 
> > 	| NUM
> > 	| CHAR_LITERAL
> > 	| STRING_LITERAL
> > 	| INPUT_VAR
> > 	| LPAREN! condExpr RPAREN!;



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From monty at codetransform.com  Mon Aug 16 21:28:40 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Lables for tokens cause "cannot resolve symbol" errors
In-Reply-To: <cfrefc+ou2l@eGroups.com>
References: <cfrefc+ou2l@eGroups.com>
Message-ID: <EA645B62-F005-11D8-A4AC-000393B5606C@codetransform.com>

A rule could return multiple tokens, so ANTLR doesn't even assign the 
first token to the label, it only allows trees for rule labels.  When 
you match a token in a rule then you can treat it like a token or a 
node depending on if you use the # character in front of the label.

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Aug 16, 2004, at 4:03 PM, charlweed wrote:

> Hi,
> I'm trying to mod a Java grammer, but when ever I try to create  a
> lable for a token, I get a "cannot resolve symbol" chen I compile the
> JavaRecogniser. AST lables work fine. Is there some odd config that is
> messed up somewhere?
>
> In the eample below, note that the identifier assignmentTokens_AST IS
> generated, but plain assignmentTokens is not.....
>
>
> expression
> 	:  assignmentTokens :assignmentExpression
> 	   {
>            #expression = #(#[EXPR,"EXPR"],#expression);
>            _engine.wrapWithSetter((IndexedToken)assignmentTokens);
>            }
> 	;
>
>
> 	public final void expression() throws RecognitionException,
> TokenStreamException {
> 		
> 		returnAST = null;
> 		ASTPair currentAST = new ASTPair();
> 		AST expression_AST = null;
> 		AST assignmentTokens_AST = null;
> 		
> 		assignmentExpression();
> 		assignmentTokens_AST = (AST)returnAST;
> 		astFactory.addASTChild(currentAST, returnAST);
> 		if ( inputState.guessing==0 ) {
> 			expression_AST = (AST)currentAST.root;
> 			
> 			expression_AST = (AST)astFactory.make( (new
> ASTArray(2)).add(astFactory.create(EXPR,"EXPR")).add(expression_AST));
> 			_engine.wrapWithSetter((IndexedToken)assignmentTokens);/*"cannot
> resolve symbol" Error!*/
> 			
> 			currentAST.root = expression_AST;
> 			currentAST.child = expression_AST!=null
> &&expression_AST.getFirstChild()!=null ?
> 				expression_AST.getFirstChild() : expression_AST;
> 			currentAST.advanceChildToEnd();
> 		}
> 		expression_AST = (AST)currentAST.root;
> 		returnAST = expression_AST;
> 	}
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From msearles at base16.com  Mon Aug 16 22:06:34 2004
From: msearles at base16.com (Michael Searles)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Re: ANTLR status wrt Visual C++ 6.0
In-Reply-To: <20040813093006.GB16232@cs.utwente.nl>
Message-ID: <cfs3oq+mq4m@eGroups.com>

Thanks for the reply again Ric.

It turns out that I was running ANTLR from inside Eclipse (2.1.3).  
For some unknown reason, when Eclipse runs ANTLR, the C++ code that's 
generated is different, and doesn't contain the ANTLR version number 
in the source. Building calc.g by calling antlr.jar from a command 
line, produces C++ code that compiles and a header that contains the 
antlr version:

/* $ANTLR 2.7.4: "calc.g" -> "CalcLexer.cpp"$ */

When Eclipse runs antlr, the C++ code that is emitted contains this:

/* $ANTLR : "calc.g" -> "CalcLexer.cpp"$ */

and the files don't compile with the errors I noted in previous posts.


I've checked classpaths in Eclipse, everything looks OK. I also 
temporarily renamed antlr directory to be sure Ecplise was using the 
expected antlr.jar. it was.

For now, I've decided not to pursue using ANTLR due to the 
complexities involved in using it with the Visual C++ 6.0 environment.

Thanks for your help,
Michael


--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> wrote:
> On Thu, Aug 12, 2004 at 05:42:14PM -0000, Michael Searles wrote:
> > ok, I've got 2.7.4 now.
> >
> > _retTree and returnAST are commented out in the distro.
> 
> It seriously looks like you're mixing a support lib from one version 
of
> antlr with a codegenerator of another.
> 
> retTree and returnAST should be generated in the CalcTreeParser.hpp
> 
> > are these supposed to be commented out?
> 
> Yup.
> 
> > The 2.7.4 antlr.jar is generating code that expects them.
> 
> But also should generate them in the generated class. Verify that in 
the
> top of the generated files the version number from the antlr that 
generated
> them is 2.7.4.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From joanpujol at gmail.com  Tue Aug 17 00:32:29 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Two pass semantic analysis
Message-ID: <d2d18a1040817003233461381@mail.gmail.com>


Hi,

I'm writing a compiler for a language similar to Java. It can have
recursive function calls  (A calls B and B calls A), and the same for
classes attributes. And I haven't prototypes like C++.

Do I need obligatorily a two pass compiler to manage the types, don't I?

I have thought this strategy:

I'm using ASTs,

1pass to the AST: When I find a type that I don't know I put it in the
symboltable as unknow type.
And when I find a type that has previosly entered as unknow type I
change the unkow to the type that I have found.
And at the finish of 1pass I have all type ok, haven't it?

2pass: Do the type checking.

Is this a good way to manage this, or is a better strategy?

Cheers,




-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From oobles at hotmail.com  Tue Aug 17 01:39:13 2004
From: oobles at hotmail.com (David Ryan)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] XPA astFactory.dupTree bug?
Message-ID: <cfsg7h+p22b@eGroups.com>

I've started doing some rather nasty re-arranging of my XML data
structures using antlr and XPA.  This has involved expanding the tree
by copying parts of a tree, and then pasting them back into multiple
parts of the tree.  One pass for collecting inputs, and second pass
for paste.

I've discovered that just re-inserting the same AST into multiple
parts of the tree can end in infinite loops.  I'm now trying to
duplicate the AST trees as I put them back into the tree.  The
XMLStartAST does not have an empty constructor to support the
astFactory.dupTree method.

Is there another way to duplicate XMLStartAST trees?  Is this the
right way to go about expanding a tree?

Thanks,
David.

PS Wish I could make the antlr workshop.  Ashame the few thousand km
makes it so difficult to get to. :)  Any Antlarians going to oopsla? 
I'll probably make it there this year.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From oliver at zeigermann.de  Tue Aug 17 06:05:21 2004
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] XPA astFactory.dupTree bug?
In-Reply-To: <cfsg7h+p22b@eGroups.com>
References: <cfsg7h+p22b@eGroups.com>
Message-ID: <41220291.1010307@zeigermann.de>

Tell me what is missing in the XMLStartAST and I will add it. What would 
be the meaning of an empty contructor for XMLStartAST?

Oliver

David Ryan wrote:
> I've started doing some rather nasty re-arranging of my XML data
> structures using antlr and XPA.  This has involved expanding the tree
> by copying parts of a tree, and then pasting them back into multiple
> parts of the tree.  One pass for collecting inputs, and second pass
> for paste.
> 
> I've discovered that just re-inserting the same AST into multiple
> parts of the tree can end in infinite loops.  I'm now trying to
> duplicate the AST trees as I put them back into the tree.  The
> XMLStartAST does not have an empty constructor to support the
> astFactory.dupTree method.
> 
> Is there another way to duplicate XMLStartAST trees?  Is this the
> right way to go about expanding a tree?
> 
> Thanks,
> David.
> 
> PS Wish I could make the antlr workshop.  Ashame the few thousand km
> makes it so difficult to get to. :)  Any Antlarians going to oopsla? 
> I'll probably make it there this year.
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 
> 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Tue Aug 17 06:12:05 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] C++ and Unicode
In-Reply-To: <BD4673AC.21E52%sunshine@public.kherson.ua>
References: <20040816095750.GC32083@cs.utwente.nl> <BD4673AC.21E52%sunshine@public.kherson.ua>
Message-ID: <20040817131205.GC4200@cs.utwente.nl>


On Mon, Aug 16, 2004 at 02:22:36PM +0300, Ruslan Zasukhin wrote:
> I wonder which char set you use?
>     32000 chars ?

Things are limited to 16 bits per character (limitation in ANTLR's analysis
engine, it might be possible to fix that though but it would mean touching
parts of antlr I've never dared touch).

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
     "Evil will always triumph, because Good is dumb." ---  Spaceballs



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From jm_newton at yahoo.co.uk  Tue Aug 17 06:15:43 2004
From: jm_newton at yahoo.co.uk (jm_newton)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Adding state to a TreeParser (C++)
Message-ID: <cft0dv+ld6f@eGroups.com>

Hi,
I'm using ANTLR 2.7.4 to generate c++ code. I've managed to generate
an AST tree via Lexer/Parser and now I'm interested in adding some
state information to my TreeParser which I'm using to 'run' the tree.

Assuming I don't want to modify the files generated by ANTLR the
cleanest way of doing this appears to be extending the TreeParser from
my own base class which is derived from the ANTLR TreeParser. I can
find  examples of this in the documentation for Java
(http://www.antlr.org/doc/metalang.html#_bb6) but none for C++. 

I've tried the following in my .g file:

  class MyTreeParser extends "MyTreeParserState";

where MyTreeParserState is defined as:

  class MyTreeParserState : public antlr::TreeParser
  {
  ...

but this results in the following errors:

  BlobManagement.g:129:39: rule classDef trapped:
  BlobManagement.g:129:39: expecting "Parser", found '"BlobManagement"'
  error: aborting grammar 'BlobManagementLexer' due to errors
  Exiting due to errors.

Does anybody have any experience of trying to extend the C++
TreeParser to add state in this way or are there better ways...





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Tue Aug 17 06:24:03 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Adding state to a TreeParser (C++)
In-Reply-To: <cft0dv+ld6f@eGroups.com>
References: <cft0dv+ld6f@eGroups.com>
Message-ID: <20040817132403.GD4200@cs.utwente.nl>

On Tue, Aug 17, 2004 at 01:15:43PM -0000, jm_newton wrote:
> I'm using ANTLR 2.7.4 to generate c++ code. I've managed to generate
> an AST tree via Lexer/Parser and now I'm interested in adding some
> state information to my TreeParser which I'm using to 'run' the tree.
> 
> Assuming I don't want to modify the files generated by ANTLR the
> cleanest way of doing this appears to be extending the TreeParser from
> my own base class which is derived from the ANTLR TreeParser. I can
> find  examples of this in the documentation for Java
> (http://www.antlr.org/doc/metalang.html#_bb6) but none for C++. 
> 
> I've tried the following in my .g file:
> 
>   class MyTreeParser extends "MyTreeParserState";

Try:  class MyTreeParser extends TreeParser("MyTreeParserState");

> Does anybody have any experience of trying to extend the C++
> TreeParser to add state in this way or are there better ways...

Did you notice the template grammar in doc/cpp-runtime.html it lists all
the spots where you can insert code into the generated file. E.g. how to
add attributes/methods to the generated class (or override methods).

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  Before they invented drawing boards, what did they go back to?



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From jm_newton at yahoo.co.uk  Tue Aug 17 06:30:16 2004
From: jm_newton at yahoo.co.uk (jm_newton)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Re: Adding state to a TreeParser (C++)
In-Reply-To: <cft0dv+ld6f@eGroups.com>
Message-ID: <cft198+ta49@eGroups.com>

Hmm,
Obviously having a bad day.

declaring some suitable memebers in a {} block after the class
definition in the .g file is good enough for me...

--- In antlr-interest@yahoogroups.com, "jm_newton" <jm_newton@y...> wrote:
> Hi,
> I'm using ANTLR 2.7.4 to generate c++ code. I've managed to generate
> an AST tree via Lexer/Parser and now I'm interested in adding some
> state information to my TreeParser which I'm using to 'run' the tree.
> 
> Assuming I don't want to modify the files generated by ANTLR the
> cleanest way of doing this appears to be extending the TreeParser from
> my own base class which is derived from the ANTLR TreeParser. I can
> find  examples of this in the documentation for Java
> (http://www.antlr.org/doc/metalang.html#_bb6) but none for C++. 
> 
> I've tried the following in my .g file:
> 
>   class MyTreeParser extends "MyTreeParserState";
> 
> where MyTreeParserState is defined as:
> 
>   class MyTreeParserState : public antlr::TreeParser
>   {
>   ...
> 
> but this results in the following errors:
> 
>   BlobManagement.g:129:39: rule classDef trapped:
>   BlobManagement.g:129:39: expecting "Parser", found '"BlobManagement"'
>   error: aborting grammar 'BlobManagementLexer' due to errors
>   Exiting due to errors.
> 
> Does anybody have any experience of trying to extend the C++
> TreeParser to add state in this way or are there better ways...



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From antlr-interest-accept-sOBVQEt9ToWL3JAMQ30IK1A at yahoogroups.com  Tue Aug 17 06:40:12 2004
From: antlr-interest-accept-sOBVQEt9ToWL3JAMQ30IK1A at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:11 2004
Subject: MODERATE -- francis.andre@easynet.fr posted to antlr-interest
Message-ID: <1092750012.256.91689.m10@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  francis.andre@easynet.fr 

The message summary:
--------------------
FROM: francis.andre@easynet.fr 
DATE: Tue, 17 Aug 2004 13:39:10 -0000 
SUBJECT: HOWTO: C++ generation: Prefix of generated enum names in ParserTokenType 

Hi Listeners 

I am using ANTLR 2.7.4 for generated parser/lexer in C++. I 
got name clashes between tokens defined as enum values in 
the MyParserTokenTypes and external class names I have to 
use. 

Is there anyway to specify a prefix for the generated enums 
(but not as mangleLiteralprefix) like : 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=269 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-sOBVQEt9ToWL3JAMQ30IK1A@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "Francis ANDRE" <francis.andre@easynet.fr>
Subject: HOWTO: C++ generation: Prefix of generated enum names in ParserTokenType
Date: Tue, 17 Aug 2004 13:39:10 -0000
Size: 1607
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20040817/1f0779f1/attachment.mht
From francis.andre at easynet.fr  Tue Aug 17 06:39:10 2004
From: francis.andre at easynet.fr (Francis ANDRE)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] HOWTO: C++ generation: Prefix of generated enum names in ParserTokenType
Message-ID: <cft1pu+ocv3@eGroups.com>


Hi Listeners

I am using ANTLR 2.7.4 for generated parser/lexer in C++. I got name 
clashes between tokens defined as enum values in the 
MyParserTokenTypes and external class names I have to use.

Is there anyway to specify a prefix for the generated enums (but not 
as mangleLiteralprefix) like :

tokens {
   ABEND	= "ABEND";
}

with a generated ParserTokenTypes as

struct MyParserTokenTypes {
	enum {
		TOKEN_EOF_ = 1,
		TOKEN_ABEND = 4,
....




TIA

Regards

FA




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-eFDnlg5iDuflwn6jjmNuF9Y at yahoogroups.com  Tue Aug 17 07:57:05 2004
From: antlr-interest-accept-eFDnlg5iDuflwn6jjmNuF9Y at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:11 2004
Subject: MODERATE -- olimail at gmx.net posted to antlr-interest
Message-ID: <1092754625.275.74151.m24@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  olimail at gmx.net 

The message summary:
--------------------
FROM: olimail at gmx.net 
DATE: Tue, 17 Aug 2004 14:55:37 -0000 
SUBJECT: abort parsing with special token 

Hello! 

I'm currently creating an ANTLR grammar for target language 
java. My grammar shall have a command "%cancel" to abort 
parsing when this command appears in the InputStream. 

What's probably the best way to tell ANTLR to stopp reading 
from the InputStream? { doCancel(); } ? Perhaps filtering 
the Stream in advance? How? 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=270 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-eFDnlg5iDuflwn6jjmNuF9Y@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "Oliver Leimig" <olimail at gmx.net>
Subject: abort parsing with special token
Date: Tue, 17 Aug 2004 14:55:37 -0000
Size: 1434
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20040817/d9145e7f/attachment.mht
From klaren at cs.utwente.nl  Tue Aug 17 08:06:49 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] abort parsing with special token
In-Reply-To: <cft699+nmbv@eGroups.com>
References: <cft699+nmbv@eGroups.com>
Message-ID: <20040817150648.GF4200@cs.utwente.nl>

On Tue, Aug 17, 2004 at 02:55:37PM -0000, Oliver Leimig wrote:
> I'm currently creating an ANTLR grammar for target language java.  
> My grammar shall have a command "%cancel" to abort parsing when this  
> command appears in the InputStream.  
>   
> What's probably the best way to tell ANTLR to stopp reading from the 
> InputStream?   
> { doCancel(); } ?  
> Perhaps filtering the Stream in advance? How?  

Throw an exception out of it when you encounter the %cancel token.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
   Words fly like arrows
      as if we knew what was right and wrong. --- Chuang Tsu



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From olimail at gmx.net  Tue Aug 17 07:55:37 2004
From: olimail at gmx.net (Oliver Leimig)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] abort parsing with special token
Message-ID: <cft699+nmbv@eGroups.com>

Hello!  
  
I'm currently creating an ANTLR grammar for target language java.  
My grammar shall have a command "%cancel" to abort parsing when this  
command appears in the InputStream.  
  
What's probably the best way to tell ANTLR to stopp reading from the 
InputStream?   
{ doCancel(); } ?  
Perhaps filtering the Stream in advance? How?  
  
Thanx  
Oliver  
  




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From oobles at hotmail.com  Tue Aug 17 17:28:40 2004
From: oobles at hotmail.com (David Ryan)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Re: XPA astFactory.dupTree bug?
In-Reply-To: <41220291.1010307@zeigermann.de>
Message-ID: <cfu7ro+ek00@eGroups.com>


Oliver,

Thanks for the quick response agian.  Looking at the ASTFactory class
in ANTLR, it has the following:  

protected AST create(Class c) {
   AST t = null;
   try {
      t = (AST)c.newInstance(); // make a new one
   }
   catch (Exception e) {
      error("Can't create AST Node " + c.getName());
      return null;
   }
   return t;
}

public AST dup(AST t) {
   if ( t==null ) {
      return null;
   }
   AST dup_t = create(t.getClass());
   dup_t.initialize(t);
   return dup_t;
}

The dup method uses the AST class to create a new instance.  I think
the XMLStartAST requires the following methods.  I haven't had a
chance to try this yet, will give it a go today.

public XMLStartAST() {
   super();
}

public void initialize(AST ast) {
   super.initialize(ast);
   setAttributes(new AttributesImpl(((XMLStartAST)
ast).getAttributes()));
}

Regards,
David.

Oliver Zeigermann wrote:
> Tell me what is missing in the XMLStartAST and I will add it. What
would 
> be the meaning of an empty contructor for XMLStartAST?
> 
> Oliver
> 
> David Ryan wrote:
> > I've started doing some rather nasty re-arranging of my XML data
> > structures using antlr and XPA.  This has involved expanding the
tree
> > by copying parts of a tree, and then pasting them back into
multiple
> > parts of the tree.  One pass for collecting inputs, and second
pass
> > for paste.
> > 
> > I've discovered that just re-inserting the same AST into multiple
> > parts of the tree can end in infinite loops.  I'm now trying to
> > duplicate the AST trees as I put them back into the tree.  The
> > XMLStartAST does not have an empty constructor to support the
> > astFactory.dupTree method.
> > 
> > Is there another way to duplicate XMLStartAST trees?  Is this the
> > right way to go about expanding a tree?
> > 
> > Thanks,
> > David.
> > 
> > PS Wish I could make the antlr workshop.  Ashame the few thousand
km
> > makes it so difficult to get to. :)  Any Antlarians going to
oopsla? 
> > I'll probably make it there this year.
> > 
> > 
> > 
> >  
> > Yahoo! Groups Links
> > 
> > 
> > 
> >  
> > 
> >



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Tue Aug 17 18:59:33 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] StringTemplate generating java and xml article
Message-ID: <3FFE5C23-F0BA-11D8-8B10-000393BB647E@cs.usfca.edu>

Howdy folks,

Check out:

http://www.codegeneration.net/tiki-read_article.php?articleId=65

for a small article I whipped up to describe how StringTemplate can be 
used to generate Java and XML. :)

Ter





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From oliver at zeigermann.de  Tue Aug 17 23:43:05 2004
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Re: XPA astFactory.dupTree bug?
In-Reply-To: <cfu7ro+ek00@eGroups.com>
References: <cfu7ro+ek00@eGroups.com>
Message-ID: <4122FA79.4030308@zeigermann.de>

Hi David,

this looks reasonable. I will add it to XPA and it will be part of the 
next release. In anticipation of that, why not add this code to your 
local copy such that you can start to work with it now?

Oliver

David Ryan wrote:
> Oliver,
> 
> Thanks for the quick response agian.  Looking at the ASTFactory class
> in ANTLR, it has the following:  
> 
> protected AST create(Class c) {
>    AST t = null;
>    try {
>       t = (AST)c.newInstance(); // make a new one
>    }
>    catch (Exception e) {
>       error("Can't create AST Node " + c.getName());
>       return null;
>    }
>    return t;
> }
> 
> public AST dup(AST t) {
>    if ( t==null ) {
>       return null;
>    }
>    AST dup_t = create(t.getClass());
>    dup_t.initialize(t);
>    return dup_t;
> }
> 
> The dup method uses the AST class to create a new instance.  I think
> the XMLStartAST requires the following methods.  I haven't had a
> chance to try this yet, will give it a go today.
> 
> public XMLStartAST() {
>    super();
> }
> 
> public void initialize(AST ast) {
>    super.initialize(ast);
>    setAttributes(new AttributesImpl(((XMLStartAST)
> ast).getAttributes()));
> }
> 
> Regards,
> David.
> 
> Oliver Zeigermann wrote:
> 
>>Tell me what is missing in the XMLStartAST and I will add it. What
> 
> would 
> 
>>be the meaning of an empty contructor for XMLStartAST?
>>
>>Oliver
>>
>>David Ryan wrote:
>>
>>>I've started doing some rather nasty re-arranging of my XML data
>>>structures using antlr and XPA.  This has involved expanding the
> 
> tree
> 
>>>by copying parts of a tree, and then pasting them back into
> 
> multiple
> 
>>>parts of the tree.  One pass for collecting inputs, and second
> 
> pass
> 
>>>for paste.
>>>
>>>I've discovered that just re-inserting the same AST into multiple
>>>parts of the tree can end in infinite loops.  I'm now trying to
>>>duplicate the AST trees as I put them back into the tree.  The
>>>XMLStartAST does not have an empty constructor to support the
>>>astFactory.dupTree method.
>>>
>>>Is there another way to duplicate XMLStartAST trees?  Is this the
>>>right way to go about expanding a tree?
>>>
>>>Thanks,
>>>David.
>>>
>>>PS Wish I could make the antlr workshop.  Ashame the few thousand
> 
> km
> 
>>>makes it so difficult to get to. :)  Any Antlarians going to
> 
> oopsla? 
> 
>>>I'll probably make it there this year.
>>>
>>>
>>>
>>> 
>>>Yahoo! Groups Links
>>>
>>>
>>>
>>> 
>>>
>>>
> 
> 
> 
> 
>  
> Yahoo! Groups Links
> 
> 
> 
>  
> 
> 
> 
> 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From oobles at hotmail.com  Wed Aug 18 00:19:18 2004
From: oobles at hotmail.com (David Ryan)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Re: XPA astFactory.dupTree bug?
In-Reply-To: <4122FA79.4030308@zeigermann.de>
Message-ID: <cfuvtm+jc65@eGroups.com>


Yes, I've done that today.  I can confirm that it's working nicely.

David.

> Hi David,
> 
> this looks reasonable. I will add it to XPA and it will be part of the 
> next release. In anticipation of that, why not add this code to your 
> local copy such that you can start to work with it now?
> 
> Oliver
> 
> David Ryan wrote:
> > Oliver,
> > 
> > Thanks for the quick response agian.  Looking at the ASTFactory class
> > in ANTLR, it has the following:  
> > 
> > protected AST create(Class c) {
> >    AST t = null;
> >    try {
> >       t = (AST)c.newInstance(); // make a new one
> >    }
> >    catch (Exception e) {
> >       error("Can't create AST Node " + c.getName());
> >       return null;
> >    }
> >    return t;
> > }
> > 
> > public AST dup(AST t) {
> >    if ( t==null ) {
> >       return null;
> >    }
> >    AST dup_t = create(t.getClass());
> >    dup_t.initialize(t);
> >    return dup_t;
> > }
> > 
> > The dup method uses the AST class to create a new instance.  I think
> > the XMLStartAST requires the following methods.  I haven't had a
> > chance to try this yet, will give it a go today.
> > 
> > public XMLStartAST() {
> >    super();
> > }
> > 
> > public void initialize(AST ast) {
> >    super.initialize(ast);
> >    setAttributes(new AttributesImpl(((XMLStartAST)
> > ast).getAttributes()));
> > }
> > 
> > Regards,
> > David.
> > 
> > Oliver Zeigermann wrote:
> > 
> >>Tell me what is missing in the XMLStartAST and I will add it. What
> > 
> > would 
> > 
> >>be the meaning of an empty contructor for XMLStartAST?
> >>
> >>Oliver
> >>
> >>David Ryan wrote:
> >>
> >>>I've started doing some rather nasty re-arranging of my XML data
> >>>structures using antlr and XPA.  This has involved expanding the
> > 
> > tree
> > 
> >>>by copying parts of a tree, and then pasting them back into
> > 
> > multiple
> > 
> >>>parts of the tree.  One pass for collecting inputs, and second
> > 
> > pass
> > 
> >>>for paste.
> >>>
> >>>I've discovered that just re-inserting the same AST into multiple
> >>>parts of the tree can end in infinite loops.  I'm now trying to
> >>>duplicate the AST trees as I put them back into the tree.  The
> >>>XMLStartAST does not have an empty constructor to support the
> >>>astFactory.dupTree method.
> >>>
> >>>Is there another way to duplicate XMLStartAST trees?  Is this the
> >>>right way to go about expanding a tree?
> >>>
> >>>Thanks,
> >>>David.
> >>>
> >>>PS Wish I could make the antlr workshop.  Ashame the few thousand
> > 
> > km
> > 
> >>>makes it so difficult to get to. :)  Any Antlarians going to
> > 
> > oopsla? 
> > 
> >>>I'll probably make it there this year.
> >>>
> >>>
> >>>
> >>> 
> >>>Yahoo! Groups Links
> >>>
> >>>
> >>>
> >>> 
> >>>
> >>>
> > 
> > 
> > 
> > 
> >  
> > Yahoo! Groups Links
> > 
> > 
> > 
> >  
> > 
> > 
> > 
> >



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Wed Aug 18 03:29:18 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] HOWTO: C++ generation: Prefix of generated enum names in ParserTokenType
In-Reply-To: <cft1pu+ocv3@eGroups.com>
References: <cft1pu+ocv3@eGroups.com>
Message-ID: <20040818102918.GJ4200@cs.utwente.nl>

On Tue, Aug 17, 2004 at 01:39:10PM -0000, Francis ANDRE wrote:
> I am using ANTLR 2.7.4 for generated parser/lexer in C++. I got name 
> clashes between tokens defined as enum values in the 
> MyParserTokenTypes and external class names I have to use.
> 
> Is there anyway to specify a prefix for the generated enums (but not 
> as mangleLiteralprefix) like :

If you don't want to use mangleLiteralPrefix.
a) manually construct the tokentypes files and importvocab them
b) wrap either clashing part in a different namespace and do the right
   'using' magic or qualify everything.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
 'And this 'rebooting' business? Give it a good kicking, do you?' 'Oh, no,
  of course, we ... that is ... well, yes, in fact,' said Ponder. 'Adrian
    goes round the back and ... er ... prods it with his foot. But in a
     technical way,' he added. --- From: Hogfather by Terry Pratchett.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Wed Aug 18 10:56:58 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Possible Conference Topics RFC
Message-ID: <000F0432-F140-11D8-A4CB-000393B5606C@codetransform.com>

I'm requesting comments on what people are most interested in hearing 
about from me at the upcoming ANTLR conference.


1. ANTLR Tips & Tricks -- brain dump of my "best practices"

2. State of the ANTLR Economy -- what I get requests for as an ANTLR 
contractor

3. Structuring trees to be accessible from the target language (which I 
did for a recent SQL Parser contract)

4. Translation planning -- what you should think about if you are 
seriously considering a translation project

5.  Debugging grammars  -- how to figure out what's going on and what 
those ambiguities really are

6.  How I solved the famous typedef problem in the GCC grammar and 
other lore surrounding predicates

  7.  Code emitting strategies  (may be trumped by Ter's StringTemplate 
stuff)

8. Anything else you think I might be able to address?

Of course I'll be writing this up and posting on my website as well.  
What grabs you?

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rd_clark at sbcglobal.net  Wed Aug 18 11:59:28 2004
From: rd_clark at sbcglobal.net (Richard Clark)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Possible Conference Topics RFC
In-Reply-To: <000F0432-F140-11D8-A4CB-000393B5606C@codetransform.com>
References: <000F0432-F140-11D8-A4CB-000393B5606C@codetransform.com>
Message-ID: <BAC01B4E-F148-11D8-A94B-000A95AF74F0@nextquestion.net>

This probably varies depending on each person's level of experience, 
but my top two would be "Debugging Grammars" and "ANTLR Tips & tricks" 
(which could include a dash of your predicates experience.)

The Tips & Tricks could good fodder for an ANTLR Wiki.

  ...Richard



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From jlst at gettysgroup.com  Wed Aug 18 12:35:00 2004
From: jlst at gettysgroup.com (Jamie Herre)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Possible Conference Topics RFC
In-Reply-To: <000F0432-F140-11D8-A4CB-000393B5606C@codetransform.com>
References: <000F0432-F140-11D8-A4CB-000393B5606C@codetransform.com>
Message-ID: <B20C5383-F14D-11D8-9017-000A95CDDFF4@gettysgroup.com>

FWIW.  My picks are 1 & 3.

On Aug 18, 2004, at 10:56 AM, Monty Zukowski wrote:

> 1. ANTLR Tips & Tricks -- brain dump of my "best practices"
>
> 3. Structuring trees to be accessible from the target language (which I
> did for a recent SQL Parser contract)
>

-J



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From mtiller at ford.com  Wed Aug 18 13:09:42 2004
From: mtiller at ford.com (Tiller, Michael (M.M.))
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Possible Conference Topics RFC
Message-ID: <FD35CB8B26F9534E86D1AC31F401AB3404023B5E@na1fcm52.dearborn.ford.com>

Better support for synthetic nodes (tree construction and token
definitions) and heterogeneous ASTs.

--
Mike

> -----Original Message-----
> From: Monty Zukowski [mailto:monty@codetransform.com]
> Sent: Wednesday, August 18, 2004 1:57 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Possible Conference Topics RFC
> 
> I'm requesting comments on what people are most interested in hearing
> about from me at the upcoming ANTLR conference.
> 
> 
> 1. ANTLR Tips & Tricks -- brain dump of my "best practices"
> 
> 2. State of the ANTLR Economy -- what I get requests for as an ANTLR
> contractor
> 
> 3. Structuring trees to be accessible from the target language (which
I
> did for a recent SQL Parser contract)
> 
> 4. Translation planning -- what you should think about if you are
> seriously considering a translation project
> 
> 5.  Debugging grammars  -- how to figure out what's going on and what
> those ambiguities really are
> 
> 6.  How I solved the famous typedef problem in the GCC grammar and
> other lore surrounding predicates
> 
>   7.  Code emitting strategies  (may be trumped by Ter's
StringTemplate
> stuff)
> 
> 8. Anything else you think I might be able to address?
> 
> Of course I'll be writing this up and posting on my website as well.
> What grabs you?
> 
> Monty
> 
> ANTLR & Java Consultant -- http://www.codetransform.com
> ANSI C/GCC transformation toolkit --
> http://www.codetransform.com/gcc.html
> Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html
> 
> 
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Wed Aug 18 13:15:15 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Possible Conference Topics RFC
In-Reply-To: <FD35CB8B26F9534E86D1AC31F401AB3404023B5E@na1fcm52.dearborn.ford.com>
References: <FD35CB8B26F9534E86D1AC31F401AB3404023B5E@na1fcm52.dearborn.ford.com>
Message-ID: <50F42F0D-F153-11D8-B481-000393B5606C@codetransform.com>

Loring should have a lot to say about that.

Monty

On Aug 18, 2004, at 1:09 PM, Tiller, Michael ((M.M.)) wrote:

> Better support for synthetic nodes (tree construction and token
> definitions) and heterogeneous ASTs.
>
> --
> Mike
>
>> -----Original Message-----
>> From: Monty Zukowski [mailto:monty@codetransform.com]
>> Sent: Wednesday, August 18, 2004 1:57 PM
>> To: antlr-interest@yahoogroups.com
>> Subject: [antlr-interest] Possible Conference Topics RFC
>>
>> I'm requesting comments on what people are most interested in hearing
>> about from me at the upcoming ANTLR conference.
>>
>>
>> 1. ANTLR Tips & Tricks -- brain dump of my "best practices"
>>
>> 2. State of the ANTLR Economy -- what I get requests for as an ANTLR
>> contractor
>>
>> 3. Structuring trees to be accessible from the target language (which
> I
>> did for a recent SQL Parser contract)
>>
>> 4. Translation planning -- what you should think about if you are
>> seriously considering a translation project
>>
>> 5.  Debugging grammars  -- how to figure out what's going on and what
>> those ambiguities really are
>>
>> 6.  How I solved the famous typedef problem in the GCC grammar and
>> other lore surrounding predicates
>>
>>   7.  Code emitting strategies  (may be trumped by Ter's
> StringTemplate
>> stuff)
>>
>> 8. Anything else you think I might be able to address?
>>
>> Of course I'll be writing this up and posting on my website as well.
>> What grabs you?
>>
>> Monty
>>
>> ANTLR & Java Consultant -- http://www.codetransform.com
>> ANSI C/GCC transformation toolkit --
>> http://www.codetransform.com/gcc.html
>> Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html
>>
>>
>>
>>
>> Yahoo! Groups Links
>>
>>
>>
>>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Wed Aug 18 13:54:41 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Re: Possible Conference Topics RFC
In-Reply-To: <50F42F0D-F153-11D8-B481-000393B5606C@codetransform.com>
Message-ID: <cg0fmh+2idj@eGroups.com>

--- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> wrote:
> Loring should have a lot to say about that.

Yes, indeed.  I just hope that I get approval to release 2.8 before
then.  If not, I can at least do a demo to go with the presentation. 
Bring grammars that you want to build trees and tree grammars for!

--Loring

> Monty
> 
> On Aug 18, 2004, at 1:09 PM, Tiller, Michael ((M.M.)) wrote:
> 
> > Better support for synthetic nodes (tree construction and token
> > definitions) and heterogeneous ASTs.
> >
> > --
> > Mike
> >
> >> -----Original Message-----
> >> From: Monty Zukowski [mailto:monty@c...]
> >> Sent: Wednesday, August 18, 2004 1:57 PM
> >> To: antlr-interest@yahoogroups.com
> >> Subject: [antlr-interest] Possible Conference Topics RFC
> >>
> >> I'm requesting comments on what people are most interested in hearing
> >> about from me at the upcoming ANTLR conference.
> >>
> >>
> >> 1. ANTLR Tips & Tricks -- brain dump of my "best practices"
> >>
> >> 2. State of the ANTLR Economy -- what I get requests for as an ANTLR
> >> contractor
> >>
> >> 3. Structuring trees to be accessible from the target language (which
> > I
> >> did for a recent SQL Parser contract)
> >>
> >> 4. Translation planning -- what you should think about if you are
> >> seriously considering a translation project
> >>
> >> 5.  Debugging grammars  -- how to figure out what's going on and what
> >> those ambiguities really are
> >>
> >> 6.  How I solved the famous typedef problem in the GCC grammar and
> >> other lore surrounding predicates
> >>
> >>   7.  Code emitting strategies  (may be trumped by Ter's
> > StringTemplate
> >> stuff)
> >>
> >> 8. Anything else you think I might be able to address?
> >>
> >> Of course I'll be writing this up and posting on my website as well.
> >> What grabs you?
> >>
> >> Monty
> >>
> >> ANTLR & Java Consultant -- http://www.codetransform.com
> >> ANSI C/GCC transformation toolkit --
> >> http://www.codetransform.com/gcc.html
> >> Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html
> >>
> >>
> >>
> >>
> >> Yahoo! Groups Links
> >>
> >>
> >>
> >>
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> >



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From i.maier at gmx.de  Thu Aug 19 06:55:05 2004
From: i.maier at gmx.de (Ingo Maier)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Rewind one token?
In-Reply-To: <959D9D12-EF9A-11D8-B347-000393B5606C@codetransform.com>
References: <1092621972.4081.15.camel@zaphod>
	 <E1E93E58-EF2E-11D8-B347-000393B5606C@codetransform.com>
	 <1092661421.1778.14.camel@zaphod>  <20040816085407.GA32083@cs.utwente.nl>
	 <1092673262.1620.21.camel@zaphod>
	 <959D9D12-EF9A-11D8-B347-000393B5606C@codetransform.com>
Message-ID: <1092923705.1657.13.camel@zaphod>


On Mon, 2004-08-16 at 11:40, Monty Zukowski wrote:
> Giving different rules a try is exactly what syntactic predicates are 
> for.  Perhaps if you could post a small example that shows the problem 
> we can help out.
> 
> Monty

I want to merge two parsers with each having its own lexer. Let's take
OCL and Java as an example. The following input:

context: Foo
inv: 42==42

class Foo {}

Give OCL a try, it parses til (including) "class" because a boolean
operator and additional expressions may follow 42==42. But at "class"
the OCL parser fails. Now, I want to start the Java parser. However, it
needs the "class" token. Not as a token, but as a character sequence
because the Java lexer may produce a different token out of it.

So I assume this has to be done on the character level. Does ANTLR
supports me with my problem in any way?

Thanks,
Ingo



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From klaren at cs.utwente.nl  Thu Aug 19 04:56:09 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Rewind one token?
In-Reply-To: <1092923705.1657.13.camel@zaphod>
References: <1092621972.4081.15.camel@zaphod> <E1E93E58-EF2E-11D8-B347-000393B5606C@codetransform.com> <1092661421.1778.14.camel@zaphod> <20040816085407.GA32083@cs.utwente.nl> <1092673262.1620.21.camel@zaphod> <959D9D12-EF9A-11D8-B347-000393B5606C@codetransform.com> <1092923705.1657.13.camel@zaphod>
Message-ID: <20040819115609.GA19909@cs.utwente.nl>

On Thu, Aug 19, 2004 at 09:55:05AM -0400, Ingo Maier wrote:
> On Mon, 2004-08-16 at 11:40, Monty Zukowski wrote:
> > Giving different rules a try is exactly what syntactic predicates are
> > for.  Perhaps if you could post a small example that shows the problem
> > we can help out.
> >
> > Monty
>
> I want to merge two parsers with each having its own lexer. Let's take
> OCL and Java as an example. The following input:
>
> context: Foo
> inv: 42==42
>
> class Foo {}
>
> Give OCL a try, it parses til (including) "class" because a boolean
> operator and additional expressions may follow 42==42. But at "class"
> the OCL parser fails. Now, I want to start the Java parser. However, it
> needs the "class" token. Not as a token, but as a character sequence
> because the Java lexer may produce a different token out of it.
>
> So I assume this has to be done on the character level. Does ANTLR
> supports me with my problem in any way?

As I said you might be able to use mark/rewind. E.g. when you make your
parsers/lexers make sure both lexers share the same InputBuffer (CharBuffer
in java) else things won't work.

When you start a 'trial' run mark the position run the lexer/parser then if
it throws rewind to the stored position. If it succeeds call commit and try
for the next chunk of input. The whole use is not that different as for
syntactic predicates.

My guess is that you can do this with the vanilla CharBuffer. There's a
slight chance that you have to make a custom version that allows a better
internal state reset.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  Quidquid latine dictum sit, altum viditur.
                 (Whatever is said in Latin sounds profound.)



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Thu Aug 19 11:32:14 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] java question with regards to AST classes
Message-ID: <cg2rne+h3hk@eGroups.com>

Anybody out there familar with java 1.5's latest generics/templates
feature?

To support various options for my AST construction, I would like to be
able to have a class inherit from a variable class.  So, I would like
to make a class something like this:

class IntAST extents <T> {
 ...
}

When I use this class for an object, then I would specify T:

IntAST<OrderedAST>
IntAST<SeparatedAST>
IntAST<BaseAST>

It seems like the new generic feature should support this, but I don't
see how.  Anybody know?  Or is their a better place to ask this question?

Eric




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From kristoff_tempelaere at yahoo.com.au  Thu Aug 19 13:40:48 2004
From: kristoff_tempelaere at yahoo.com.au (=?iso-8859-1?q?Kristoff=20Tempelaere?=)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Own AST : initializing extra private members
Message-ID: <20040819204048.29073.qmail@web13004.mail.yahoo.com>

Hello,
 
I'm using my own AST which has following definition (only the relevant parts) :
 
class MyAST : public CommonAST {
private:
    int _x;
public:
    void setx(int x)  {_x=x;}
    in getx() const {return _x;}
   //and others...
};
 
 
I want to set the x-value during parsing.  I do this in the grammar (of the parser) by labeling the tokenreference and adding a semantic action {label->setx(7);} for example.  But this adds a lot of semantic actions to my grammar, just for setting this x-value.
 
Can this be done in a better way?  Instead of using myfactory.create(token), i would like the parser calls MyFactory.create(token,xvalue), passing the xvalue in the grammar.  That is what I want, to avoid all those semantic actions... passing in the grammar values to initialize AST-members in a more elegant way.  Is this possible?  And how?
 
Thx in advance!
Kristoff
 



---------------------------------
Find local movie times and trailers on Yahoo! Movies.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040820/e293f839/attachment.html
From antlr-interest-accept-64CeEW3G0IK_FDIArJQa=NI at yahoogroups.com  Thu Aug 19 15:59:42 2004
From: antlr-interest-accept-64CeEW3G0IK_FDIArJQa=NI at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:11 2004
Subject: MODERATE -- wjb@abstractnonsense.com posted to antlr-interest
Message-ID: <1092956382.260.83665.m1@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  wjb@abstractnonsense.com 

The message summary:
--------------------
FROM: wjb@abstractnonsense.com 
DATE: Thu, 19 Aug 2004 15:53:37 -0700 
SUBJECT: Is antlr the right tool for this job? 

Hello, I've been looking around for a while for a neat 
solution to a class of problems I have with a large chunk of
Java code. I need to be able to automatically generate 
documentation, starting by pulling certain literal strings 
out of method calls. For example I need to be able to 
generate a list of all the literal strings that are fed to 
the method 

StatsSystem.addStat(String name, Object value) 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=271 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-64CeEW3G0IK_FDIArJQa=NI@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: William Bland <wjb@abstractnonsense.com>
Subject: Is antlr the right tool for this job?
Date: Thu, 19 Aug 2004 15:53:37 -0700
Size: 2406
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20040819/3eb672a3/attachment.mht
From wjb at abstractnonsense.com  Thu Aug 19 15:53:37 2004
From: wjb at abstractnonsense.com (William Bland)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Is antlr the right tool for this job?
Message-ID: <1092956017.11616.9.camel@localhost>

Hello,
	I've been looking around for a while for a neat solution to a class of
problems I have with a large chunk of Java code.  I need to be able to
automatically generate documentation, starting by pulling certain
literal strings out of method calls.  For example I need to be able to
generate a list of all the literal strings that are fed to the method

	StatsSystem.addStat(String name, Object value)

I had a look at AspectJ because someone thought it could do things like
this, but it turns out it can't really.  My current techniques for doing
this kind of thing involve some very messy awk/sed/grep stuff.  I'd like
to move away from that (because it's very fragile and difficult to
maintain) but so far I haven't found a good replacement.

It looks to me though, like antlr could be the right tool for the job. 
If I understand correctly, I could generate an AST from our Java source,
then walk the tree and pull out all the pieces of information I'm
interested in.

Does this sound reasonable, or am I wanting antlr to do things it's not
really designed for?

Thanks very much for your help.

Cheers,
	Bill.
-- 
Dr. William Bland                          www.abstractnonsense.com
Now listening to Nothing (Media player is not running) 




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From antlr-interest-accept-zDYn1Onlmxhwcw_QrBAvZZY at yahoogroups.com  Thu Aug 19 16:19:43 2004
From: antlr-interest-accept-zDYn1Onlmxhwcw_QrBAvZZY at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:11 2004
Subject: MODERATE -- ali_oregon@yahoo.com posted to antlr-interest
Message-ID: <1092957583.161.69707.m5@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  ali_oregon@yahoo.com 

The message summary:
--------------------
FROM: ali_oregon@yahoo.com 
DATE: Thu, 19 Aug 2004 23:19:28 -0000 
SUBJECT: Does Sorcerer still exist? 

Hello, If I have antlr-2.7.1 available do I still need 
sorcerer tool? 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=272 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-zDYn1Onlmxhwcw_QrBAvZZY@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "ali_oregon" <ali_oregon@yahoo.com>
Subject: Does Sorcerer still exist?
Date: Thu, 19 Aug 2004 23:19:28 -0000
Size: 1138
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20040819/7f2a8433/attachment.mht
From lgc at mail1.jpl.nasa.gov  Thu Aug 19 17:02:41 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Re: Is antlr the right tool for this job?
In-Reply-To: <1092956017.11616.9.camel@localhost>
Message-ID: <cg3f31+dbnf@eGroups.com>

--- In antlr-interest@yahoogroups.com, William Bland <wjb@a...> wrote:
...
> It looks to me though, like antlr could be the right tool for the job. 
> If I understand correctly, I could generate an AST from our Java source,
> then walk the tree and pull out all the pieces of information I'm
> interested in.
> 
> Does this sound reasonable, or am I wanting antlr to do things it's not
> really designed for?

This is quite reasonable, and not a large task since Ter and others
already maintain a Java grammar (with rather wide-scale usage).  Also,
take a look at O'Connor's Java Cross Reference tool
(<http://www.antlr.org/share/1073500619580/JavaCrossRef.zip>)--you may
be able to use that as a starting point, simplify, then expand.

--Loring

> Thanks very much for your help.
> 
> Cheers,
> 	Bill.
> -- 
> Dr. William Bland                          www.abstractnonsense.com
> Now listening to Nothing (Media player is not running)



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From ali_oregon at yahoo.com  Thu Aug 19 16:19:28 2004
From: ali_oregon at yahoo.com (ali_oregon)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Does Sorcerer still exist?
Message-ID: <cg3ci0+2ivk@eGroups.com>

Hello,
If I have antlr-2.7.1 available do I still need sorcerer tool?





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From oobles at hotmail.com  Thu Aug 19 17:10:29 2004
From: oobles at hotmail.com (David Ryan)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Re: Is antlr the right tool for this job?
In-Reply-To: <1092956017.11616.9.camel@localhost>
Message-ID: <cg3fhl+dcvr@eGroups.com>



I think you'll find antlr would be great for this job.  Pretty much
all of the hard work has already been done for you.  There is a java
lexer/parser and AST recogniser on the antlr web site.

http://www.antlr.org/grammar/1090713067533/index.html

Use the lexer/parser to read in your Java source code into an AST. 
Then modify the AST recogniser to output the documentation you need.

I think you would add your documentation action to the method call in
primaryExpression.  There will probably be a couple of lines of fiddly
code to extract the string from the AST.

Goodluck,
David.

--- In antlr-interest@yahoogroups.com, William Bland <wjb@a...> wrote:
> Hello,
> 	I've been looking around for a while for a neat solution to a class of
> problems I have with a large chunk of Java code.  I need to be able to
> automatically generate documentation, starting by pulling certain
> literal strings out of method calls.  For example I need to be able to
> generate a list of all the literal strings that are fed to the method
> 
> 	StatsSystem.addStat(String name, Object value)
> 
> I had a look at AspectJ because someone thought it could do things like
> this, but it turns out it can't really.  My current techniques for doing
> this kind of thing involve some very messy awk/sed/grep stuff.  I'd like
> to move away from that (because it's very fragile and difficult to
> maintain) but so far I haven't found a good replacement.
> 
> It looks to me though, like antlr could be the right tool for the job. 
> If I understand correctly, I could generate an AST from our Java source,
> then walk the tree and pull out all the pieces of information I'm
> interested in.
> 
> Does this sound reasonable, or am I wanting antlr to do things it's not
> really designed for?
> 
> Thanks very much for your help.
> 
> Cheers,
> 	Bill.
> -- 
> Dr. William Bland                          www.abstractnonsense.com
> Now listening to Nothing (Media player is not running)



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From eric_mahurin at yahoo.com  Thu Aug 19 18:43:47 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Re: Own AST : initializing extra private members
In-Reply-To: <20040819204048.29073.qmail@web13004.mail.yahoo.com>
Message-ID: <cg3l0j+6nth@eGroups.com>

--- In antlr-interest@yahoogroups.com, Kristoff Tempelaere
<kristoff_tempelaere@y...> wrote:

> Can this be done in a better way?  Instead of using
myfactory.create(token), i would like the parser calls
MyFactory.create(token,xvalue)

Where does xvalue come from?  Is it constant or does it rarely change?
 If so, you could make your own factory class that has a static xvalue
variable that you would assign whenever needed and then your new
create method would use this static value.

Eric




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Thu Aug 19 19:14:26 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] "lexer state" issues and equivalence to nextToken
Message-ID: <cg3mq2+36ja@eGroups.com>


First of all, if you have a lexer with these rules:

X: <rule for X> ;
Y: <rule for Y> ;

should this be equivalent to:

NextToken
: <rule for X> {$setType(X);}
| <rule for Y> {$setType(Y);}
;
protected X: ;
protected Y: ;


I have cases where X and Y look ambiguous, but that is because they
are valid in separate "lexer states" (I may be using a this term in a
different context than the docs talk about).  I qualify them with
semantic predicates correlating to the mode:

X: {cond}? ... ;
Y: {!cond}? ... ;

Unfortunately, this doesn't work and I have to resort to the NextToken
form for the ones it complains about and this works.  Is this a bug?

Is there a better way to handle these lexer modes?  I think I could
spawn off a new lexer and use a selector for different modes, but I
really don't want to deal with that complexity or overhead.

Eric




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From parrt at cs.usfca.edu  Thu Aug 19 19:18:33 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Does Sorcerer still exist?
In-Reply-To: <cg3ci0+2ivk@eGroups.com>
References: <cg3ci0+2ivk@eGroups.com>
Message-ID: <3C5157A2-F24F-11D8-8B10-000393BB647E@cs.usfca.edu>

Nope...sorcerer got merged into antlr from 2.x onwards. :)
Ter
On Aug 19, 2004, at 4:19 PM, ali_oregon wrote:

> Hello,
> If I have antlr-2.7.1 available do I still need sorcerer tool?
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From antlr-interest-accept-BPVgHHRMfYgfEuQBI1HgT3w at yahoogroups.com  Thu Aug 19 19:43:12 2004
From: antlr-interest-accept-BPVgHHRMfYgfEuQBI1HgT3w at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:11 2004
Subject: MODERATE -- nbsherid@secsme.org.au posted to antlr-interest
Message-ID: <1092969792.289.20528.m25@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  nbsherid@secsme.org.au 

The message summary:
--------------------
FROM: nbsherid@secsme.org.au 
DATE: Fri, 20 Aug 2004 12:43:21 +1000 
SUBJECT: Lexer: C-style comments with DOS/UNIX newlines 

Hi there, 

I'm a relative newcomer to ANTLR. I am trying to define 
C/C++/Java style comments, and having some trouble. 

I have the following rule, similar to that in the manual 
(with k=3 and ANTLR 2.7.4): 

/* COMMENT rules */ CCOMMENT: "/*" ( options {greedy=false;}

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=273 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-BPVgHHRMfYgfEuQBI1HgT3w@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "Nigel Sheridan-Smith" <nbsherid@secsme.org.au>
Subject: Lexer: C-style comments with DOS/UNIX newlines
Date: Fri, 20 Aug 2004 12:43:21 +1000
Size: 5920
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20040820/69f793f3/attachment.mht
From antlr-interest-accept-61Z4XR0OG6ZWLb2Nzr3ziLM at yahoogroups.com  Thu Aug 19 19:48:39 2004
From: antlr-interest-accept-61Z4XR0OG6ZWLb2Nzr3ziLM at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:11 2004
Subject: MODERATE -- nbsherid@secsme.org.au posted to antlr-interest
Message-ID: <1092970119.210.99185.m11@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  nbsherid@secsme.org.au 

The message summary:
--------------------
FROM: nbsherid@secsme.org.au 
DATE: Fri, 20 Aug 2004 12:48:43 +1000 
SUBJECT: RE: Lexer: C-style comments with DOS/UNIX newlines 

> -----Original Message----- > From: Nigel Sheridan-Smith 
[mailto:nbsherid@secsme.org.au] > Sent: Friday, 20 August 
2004 12:43 PM > To: 'antlr-interest@yahoogroups.com' > 
Subject: Lexer: C-style comments with DOS/UNIX newlines > > 

> Hi there, > > I'm a relative newcomer to ANTLR. I am 
trying to define C/C++/Java style > comments, and having 
some trouble. > > I have the following rule, similar to that
in the manual (with k=3 and > ANTLR 2.7.4): > > > /* COMMENT
rules */ > CCOMMENT: "/*" > ( options {greedy=false;} > > : 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=274 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-61Z4XR0OG6ZWLb2Nzr3ziLM@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "Nigel Sheridan-Smith" <nbsherid@secsme.org.au>
Subject: RE: Lexer: C-style comments with DOS/UNIX newlines
Date: Fri, 20 Aug 2004 12:48:43 +1000
Size: 2569
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20040820/962fbb99/attachment.mht
From nbsherid at secsme.org.au  Thu Aug 19 19:48:43 2004
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] RE: Lexer: C-style comments with DOS/UNIX newlines
Message-ID: <000401c48660$3514bb30$0400a8c0@nigel>


> -----Original Message-----
> From: Nigel Sheridan-Smith [mailto:nbsherid@secsme.org.au]
> Sent: Friday, 20 August 2004 12:43 PM
> To: 'antlr-interest@yahoogroups.com'
> Subject: Lexer: C-style comments with DOS/UNIX newlines
> 
> 
> Hi there,
> 
> I'm a relative newcomer to ANTLR. I am trying to define C/C++/Java style
> comments, and having some trouble.
> 
> I have the following rule, similar to that in the manual (with k=3 and
> ANTLR 2.7.4):
> 
> 
> /* COMMENT rules */
> CCOMMENT: "/*"
>         ( options {greedy=false;}
> 
>          : '\r' ('\n')? {newline();}
>          | '\n' {newline();}
>          | .
>         )*
>        "*/";
> 


Just worked it out for myself, by looking at ANTLR's own grammar:
'antlr.g'... I changed it to the following:


/* COMMENT rules */
CCOMMENT: "/*"
        ( options {greedy=false; generateAmbigWarnings=false;}
        
         : '\r'      {newline();}
         | '\r' '\n' {newline();}
         | '\n'      {newline();}
         | ~('\n' | '\r') 
        )*
       "*/";


Thanks anyway!! I'm sure I will have another question soon enough :)

Nigel




--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From nbsherid at secsme.org.au  Thu Aug 19 19:43:21 2004
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Lexer: C-style comments with DOS/UNIX newlines
Message-ID: <000001c4865f$75359f00$0400a8c0@nigel>


Hi there,

I'm a relative newcomer to ANTLR. I am trying to define C/C++/Java style
comments, and having some trouble.

I have the following rule, similar to that in the manual (with k=3 and ANTLR
2.7.4):


/* COMMENT rules */
CCOMMENT: "/*"
        ( options {greedy=false;}
        
         : '\r' ('\n')? {newline();}
         | '\n' {newline();}
         | . 
        )*
       "*/";



I get the following messages:

ANTLR Parser Generator   Version 2.7.4   1989-2004 jGuru.com
PersistenceGrammar.g:70:17: warning:lexical nondeterminism between alts 1
and 2 of block upon
PersistenceGrammar.g:70:17:     k==1:'\n'
PersistenceGrammar.g:70:17:     k==2:'\t','\n','\r','
'..'"','%'..'?','A'..'_','
a'..'~'
PersistenceGrammar.g:70:17:     k==3:'\t','\n','\r','
'..'"','%'..'?','A'..'_','
a'..'~'


If I remove the  ('\n')?  from the 5th line then the problem goes away.
However, this isn't actually what seems to be reported as the error.
Changing the "/*" and "*/" to "{" and "}" do not make any difference; nor
does increasing the value of k in the lexer.

Any help would be appreciated! The rest of the grammar is attached.

Thanks

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435
 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PersistenceGrammar.g
Type: application/octet-stream
Size: 2668 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040820/24586013/PersistenceGrammar.obj
From joanpujol at gmail.com  Fri Aug 20 00:31:04 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:11 2004
Subject: [antlr-interest] Lexer: C-style comments with DOS/UNIX newlines
In-Reply-To: <000001c4865f$75359f00$0400a8c0@nigel>
References: <000001c4865f$75359f00$0400a8c0@nigel>
Message-ID: <d2d18a104082000316fc9075e@mail.gmail.com>

You want greedy=true not false (thus you don't need to put the greedy
option because true is the default)

This is the grammar:
NL: 
	(
	    (options {generateAmbigWarnings=false;}:
	    "\r\n"  //DOS
	    | '\r'		//MAC
	    | '\n'		//UNIX
	    )
	) {newline();};


Or you can use syntactic predicates (less eficient but more polite):

NL: 
	(
	    ("\r\n")=> "\r\n"  //DOS
	    | '\r'		//MAC
	    | '\n'		//UNIX
	) {newline();};


In your grammar if you don't put the  generateAmbigWarnings=false you
always get non determinism warnings because it is ambiguous, you can
get \r\n in two diferent ways.


Cheers,


On Fri, 20 Aug 2004 12:43:21 +1000, Nigel Sheridan-Smith
<nbsherid@secsme.org.au> wrote:
> 
> Hi there,
> 
> I'm a relative newcomer to ANTLR. I am trying to define C/C++/Java style
> comments, and having some trouble.
> 
> I have the following rule, similar to that in the manual (with k=3 and ANTLR
> 2.7.4):
> 
> /* COMMENT rules */
> CCOMMENT: "/*"
>        ( options {greedy=false;}
> 
>         : '\r' ('\n')? {newline();}
>         | '\n' {newline();}
>         | .
>        )*
>       "*/";
> 
> 
> I get the following messages:
> 
> ANTLR Parser Generator   Version 2.7.4   1989-2004 jGuru.com
> PersistenceGrammar.g:70:17: warning:lexical nondeterminism between alts 1
> and 2 of block upon
> PersistenceGrammar.g:70:17:     k==1:'\n'
> PersistenceGrammar.g:70:17:     k==2:'\t','\n','\r','
> '..'"','%'..'?','A'..'_','
> a'..'~'
> PersistenceGrammar.g:70:17:     k==3:'\t','\n','\r','
> '..'"','%'..'?','A'..'_','
> a'..'~'
> 
> If I remove the  ('\n')?  from the 5th line then the problem goes away.
> However, this isn't actually what seems to be reported as the error.
> Changing the "/*" and "*/" to "{" and "}" do not make any difference; nor
> does increasing the value of k in the lexer.
> 
> Any help would be appreciated! The rest of the grammar is attached.
> 
> Thanks
> 
> 
> 
> Nigel
> 
> --
> Nigel Sheridan-Smith
> PhD research student
> 
> Faculty of Engineering
> University of Technology, Sydney
> Phone: 02 9514 7946
> Fax: 02 9514 2435
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 
> 
> 


-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From beckersheinzsb at yahoo.com  Fri Aug 20 00:47:22 2004
From: beckersheinzsb at yahoo.com (beckersheinzsb)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Exceptions in the lexer (c++)
Message-ID: <cg4aaa+8770@eGroups.com>

Hello,

is there a possibility to configure antlr (c++ version) that way, 
that the generated lexer doesn't "convert" RecognitionExceptions into 
TokenStreamRecognitionExceptions ?
I' ve already set the defaultErrorHandler option to false. I'd like 
to catch the different RecognitionExceptions occuring in the lexer by 
myself.

Thank you very much.

Greetz
Heinz



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From kristoff_tempelaere at yahoo.com.au  Fri Aug 20 01:56:31 2004
From: kristoff_tempelaere at yahoo.com.au (=?iso-8859-1?q?Kristoff=20Tempelaere?=)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Re: Own AST : initializing extra private members
In-Reply-To: <cg3l0j+6nth@eGroups.com>
Message-ID: <20040820085631.66872.qmail@web13008.mail.yahoo.com>

Where does xvalue come from? Is it constant or does it rarely change?
---- It changes a lot :(  I'll make it a bit more concrete : I'm working on an SQL-grammar, and I need to store some extra information in the AST.  For example, to group all keywords... 
 
Because sometimes I just need to all keywords in the query.  I could do this by searching the AST for every keyword, based on the _ttype.  But thanx to the x-value I can do this in just one traversal, which saves ofcourse a lot of time... If there are 100 keywords, then this would sava 99 traversals... 
 
I saw a similar example, with a private member "line".  The difference is, the information for this member is in the token, so overwriting create(token) {.... line = token->getLine(); ... } did the trick there.  But in my case, the x-value can't be derived based on the token, it must be passed in the grammar.  A bunch of semantic actions { setx(value);} does the job, but it looks awfull... and messes up the grammar a bit... so I was wondering if there was a better way, like "ID<AST=MyAST(xvalue)>" or something... So, somehow to force the parser call MyFactory.create(token, xvalue) and passing the xvalue in the grammar... 
 
More general : setting private members of an ASTnode, which can NOT be derived from the token... is there another way than using semantic actions?
 
Thx for your proposal anyway!  But it won't work in my case :(
 
Kristoff


Eric Mahurin <eric_mahurin@yahoo.com> wrote:
--- In antlr-interest@yahoogroups.com, Kristoff Tempelaere
wrote:

> Can this be done in a better way? Instead of using
myfactory.create(token), i would like the parser calls
MyFactory.create(token,xvalue)

Where does xvalue come from? Is it constant or does it rarely change?
If so, you could make your own factory class that has a static xvalue
variable that you would assign whenever needed and then your new
create method would use this static value.

Eric





Yahoo! Groups Links








---------------------------------
Find local movie times and trailers on Yahoo! Movies.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040820/e35b01c5/attachment.html
From klaren at cs.utwente.nl  Fri Aug 20 02:31:14 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Exceptions in the lexer (c++)
In-Reply-To: <cg4aaa+8770@eGroups.com>
References: <cg4aaa+8770@eGroups.com>
Message-ID: <20040820093114.GA13011@cs.utwente.nl>

On Fri, Aug 20, 2004 at 07:47:22AM -0000, beckersheinzsb wrote:
> is there a possibility to configure antlr (c++ version) that way,
> that the generated lexer doesn't "convert" RecognitionExceptions into
> TokenStreamRecognitionExceptions ?

Catch the RecognitionExceptions in your rules with custom handlers before
they get to the generated nextToken where they get converted to
TokenStreamRecognitionExceptions. This is somewhat a pain since you have to
add custom handlers to every rule in which you're interested.

Alternatively turn on the defaultErrorHandler and play around with
overloading reportError. Just have a peek at the code generated with and
without defaultErrorHandler and you'll probably get inspiration for what
will work best.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Fri Aug 20 02:40:58 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] "lexer state" issues and equivalence to nextToken
In-Reply-To: <cg3mq2+36ja@eGroups.com>
References: <cg3mq2+36ja@eGroups.com>
Message-ID: <20040820094058.GB13011@cs.utwente.nl>

On Fri, Aug 20, 2004 at 02:14:26AM -0000, Eric Mahurin wrote:
> First of all, if you have a lexer with these rules:
>
> X: <rule for X> ;
> Y: <rule for Y> ;
>
> should this be equivalent to:
>
> NextToken
> : <rule for X> {$setType(X);}
> | <rule for Y> {$setType(Y);}
> ;
> protected X: ;
> protected Y: ;

That should be equivalent.

> I have cases where X and Y look ambiguous, but that is because they
> are valid in separate "lexer states" (I may be using a this term in a
> different context than the docs talk about).  I qualify them with
> semantic predicates correlating to the mode:
>
> X: {cond}? ... ;
> Y: {!cond}? ... ;

I'm not one of the hoisting experts around ;) But I think you'd need it for
this way of writing it down. E.g. it won't work with ANTLR 2.7.4 since the
predicates won't get elevated to the nextToken method (check the generated
code)

> Unfortunately, this doesn't work and I have to resort to the NextToken
> form for the ones it complains about and this works.  Is this a bug?

Not directly a bug, but exactly pretty no.

> Is there a better way to handle these lexer modes?  I think I could
> spawn off a new lexer and use a selector for different modes, but I
> really don't want to deal with that complexity or overhead.

If you want truly lexer states then you'll have to use two lexers and a
selector. The few places where I needed it I found the overhead not that
big, but I guess it depends a bit on the complexity of the lexer, mine are
usually as simple as possible.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
   Words fly like arrows
      as if we knew what was right and wrong. --- Chuang Tsu



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From kristoff_tempelaere at yahoo.com.au  Fri Aug 20 02:54:48 2004
From: kristoff_tempelaere at yahoo.com.au (=?iso-8859-1?q?Kristoff=20Tempelaere?=)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Line number information
In-Reply-To: <cfe1jk+crlt@eGroups.com>
Message-ID: <20040820095448.73194.qmail@web13009.mail.yahoo.com>

I guess this is exactly what you are looking for : http://www.imada.sdu.dk/~morling/ 
 
Kristoff

npettersson <plsk_9@hotmail.com> wrote:
Hi

I'm a new user of ANTLR and have been working with it for a few month 
now.

I've been parsing C#-code and generating AST's but I don't know how to 
get the row numbers included as nodes in the AST?

Can someone show me a simple example on how to do this?

kind regards/ Niklas





Yahoo! Groups Links








---------------------------------
Find local movie times and trailers on Yahoo! Movies.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040820/497a9d69/attachment.html
From eric_mahurin at yahoo.com  Fri Aug 20 08:11:04 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Re: Own AST : initializing extra private members
In-Reply-To: <20040820085631.66872.qmail@web13008.mail.yahoo.com>
Message-ID: <cg54a8+qvev@eGroups.com>

You should give a more concrete example that shows exactly what you
are doing - especially where xvalue is coming from.  At least a
complete rule, if not a mini-grammar (parser).

--- In antlr-interest@yahoogroups.com, Kristoff Tempelaere
<kristoff_tempelaere@y...> wrote:
> Where does xvalue come from? Is it constant or does it rarely change?
> ---- It changes a lot :(  I'll make it a bit more concrete : I'm
working on an SQL-grammar, and I need to store some extra information
in the AST.  For example, to group all keywords... 
>  
> Because sometimes I just need to all keywords in the query.  I could
do this by searching the AST for every keyword, based on the _ttype. 
But thanx to the x-value I can do this in just one traversal, which
saves ofcourse a lot of time... If there are 100 keywords, then this
would sava 99 traversals... 
>  
> I saw a similar example, with a private member "line".  The
difference is, the information for this member is in the token, so
overwriting create(token) {.... line = token->getLine(); ... } did the
trick there.  But in my case, the x-value can't be derived based on
the token, it must be passed in the grammar.  A bunch of semantic
actions { setx(value);} does the job, but it looks awfull... and
messes up the grammar a bit... so I was wondering if there was a
better way, like "ID<AST=MyAST(xvalue)>" or something... So, somehow
to force the parser call MyFactory.create(token, xvalue) and passing
the xvalue in the grammar... 
>  
> More general : setting private members of an ASTnode, which can NOT
be derived from the token... is there another way than using semantic
actions?
>  
> Thx for your proposal anyway!  But it won't work in my case :(
>  
> Kristoff
> 
> 
> Eric Mahurin <eric_mahurin@y...> wrote:
> --- In antlr-interest@yahoogroups.com, Kristoff Tempelaere
> wrote:
> 
> > Can this be done in a better way? Instead of using
> myfactory.create(token), i would like the parser calls
> MyFactory.create(token,xvalue)
> 
> Where does xvalue come from? Is it constant or does it rarely change?
> If so, you could make your own factory class that has a static xvalue
> variable that you would assign whenever needed and then your new
> create method would use this static value.
> 
> Eric
> 
> 
> 
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 
> 
> 
> 
> ---------------------------------
> Find local movie times and trailers on Yahoo! Movies.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rd_clark at sbcglobal.net  Fri Aug 20 10:01:11 2004
From: rd_clark at sbcglobal.net (Richard Clark)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] 3.0 feature discussion: Metadata
Message-ID: <896A17DE-F2CA-11D8-9F71-000A95AF74F0@nextquestion.net>

One of the things that's become apparent in gluing ANTLR to eclipse is 
that interactive tools would like to know the structure of the language 
they're working on (e.g. to offer better error recovery, code 
completion, etc.) ANTLR has all of that information, as reflected in 
the code it generates, but the information is not actually available to 
the generated lexer/parser at runtime.

So, I would like to ask if ANTLR could have an option to re-emit the 
language definition in a compact machine-readable form when building 
the lexer and parser. (Perhaps a canonical XML representation, though 
calling that "compact" strains credibility ;) ) In that way, a smart 
editor could find a definition in the language (e.g. "new expects a 
className after it") and use that to offer advice on-screen.

I realize it's possible to take the ANTLR language definition itself 
and alter it to make my own ANTLR meta-parser, but it seems silly to 
duplicate the effort that ANTLR itself would be doing.

  ...Richard



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rd_clark at sbcglobal.net  Fri Aug 20 10:04:45 2004
From: rd_clark at sbcglobal.net (Richard Clark)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] ANTLR 3, in-memory data sources, and exceptions
Message-ID: <09508CA2-F2CB-11D8-9F71-000A95AF74F0@nextquestion.net>

Following up from an earlier note on feeding ANTLR 3 from random-access 
data sources instead of sequential, I'd like to add this little note:

*Please* include the character's absolute position (not just 
line/column number, but the offset into the source) in thrown 
Exceptions.

This has been a public service plea from your friendly neighborhood 
editor-developer ;)

  ...Richard



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From kristoff_tempelaere at yahoo.com.au  Fri Aug 20 16:44:54 2004
From: kristoff_tempelaere at yahoo.com.au (=?iso-8859-1?q?Kristoff=20Tempelaere?=)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Re: Own AST : initializing extra private members
In-Reply-To: <cg54a8+qvev@eGroups.com>
Message-ID: <20040820234455.33604.qmail@web13004.mail.yahoo.com>

#---------- the class for the ASTNodes -------
class MyAST : public antlr::CommonAST {
private:
    int _x;
public:
    void setx(const int x) {_x = x;}
    //others
};
 
 
#------- a (simplified) parser rule ------------------
column : 
     (lbl1:ID PERIOD!) (lbl2:ID)
     {#lbl1->setx(_Tablename_);}     //_Tablename_ is a int-constant
     {#lbl2->setx(_Columnname_);}  //same
;
 
 
#---- Information----------
A column can be specified in SQL by "a.b" where "a" is a tablename and "b" is a columnname.  I want to store this information in the AST, and I do this right now using semantic actions  But I wondered if this can't be done while the node is created... avoiding the semantic actions.
 
So instead of calling MyFactory.create(ID) to create the node, I would like to call MyFactory.create(ID,_Tablename_), so the x-value is set when creating the node.  Ofcourse I need a way to pass the xvalue in the grammar... ID<_x=_Tablename_> or something like that?
 
The difference with the example on http://www.imada.sdu.dk/~morling/ is that the x-value is passed in the parsergrammar, and isn't derivable from the data in the token.
 
I hope this makes it a bit more clear... thxs for your efforts !
 
Kristoff
 


Eric Mahurin <eric_mahurin@yahoo.com> wrote:
You should give a more concrete example that shows exactly what you
are doing - especially where xvalue is coming from. At least a
complete rule, if not a mini-grammar (parser).

--- In antlr-interest@yahoogroups.com, Kristoff Tempelaere
wrote:
> Where does xvalue come from? Is it constant or does it rarely change?
> ---- It changes a lot :( I'll make it a bit more concrete : I'm
working on an SQL-grammar, and I need to store some extra information
in the AST. For example, to group all keywords... 
> 
> Because sometimes I just need to all keywords in the query. I could
do this by searching the AST for every keyword, based on the _ttype. 
But thanx to the x-value I can do this in just one traversal, which
saves ofcourse a lot of time... If there are 100 keywords, then this
would sava 99 traversals... 
> 
> I saw a similar example, with a private member "line". The
difference is, the information for this member is in the token, so
overwriting create(token) {.... line = token->getLine(); ... } did the
trick there. But in my case, the x-value can't be derived based on
the token, it must be passed in the grammar. A bunch of semantic
actions { setx(value);} does the job, but it looks awfull... and
messes up the grammar a bit... so I was wondering if there was a
better way, like "ID" or something... So, somehow
to force the parser call MyFactory.create(token, xvalue) and passing
the xvalue in the grammar... 
> 
> More general : setting private members of an ASTnode, which can NOT
be derived from the token... is there another way than using semantic
actions?
> 
> Thx for your proposal anyway! But it won't work in my case :(
> 
> Kristoff
> 
> 
> Eric Mahurin wrote:
> --- In antlr-interest@yahoogroups.com, Kristoff Tempelaere
> wrote:
> 
> > Can this be done in a better way? Instead of using
> myfactory.create(token), i would like the parser calls
> MyFactory.create(token,xvalue)
> 
> Where does xvalue come from? Is it constant or does it rarely change?
> If so, you could make your own factory class that has a static xvalue
> variable that you would assign whenever needed and then your new
> create method would use this static value.
> 
> Eric
> 
> 
> 
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 
> 
> 
> 
> ---------------------------------
> Find local movie times and trailers on Yahoo! Movies.




Yahoo! Groups Links









---------------------------------
Find local movie times and trailers on Yahoo! Movies.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20040821/83a0d111/attachment.html
From eric_mahurin at yahoo.com  Fri Aug 20 21:24:05 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Re: Own AST : initializing extra private members
In-Reply-To: <20040820234455.33604.qmail@web13004.mail.yahoo.com>
Message-ID: <cg6ip5+kvue@eGroups.com>

Are you only doing setx to ID's or just a small set of cases?  If so,
something like this might work:

column : id[_Tablename_] PERIOD! id[_Columnname_] ;

id[int x]: i:ID {#i->setx(x);} ;

Eric

--- In antlr-interest@yahoogroups.com, Kristoff Tempelaere
<kristoff_tempelaere@y...> wrote:
> #---------- the class for the ASTNodes -------
> class MyAST : public antlr::CommonAST {
> private:
>     int _x;
> public:
>     void setx(const int x) {_x = x;}
>     //others
> };
>  
>  
> #------- a (simplified) parser rule ------------------
> column : 
>      (lbl1:ID PERIOD!) (lbl2:ID)
>      {#lbl1->setx(_Tablename_);}     //_Tablename_ is a int-constant
>      {#lbl2->setx(_Columnname_);}  //same
> ;
>  
>  
> #---- Information----------
> A column can be specified in SQL by "a.b" where "a" is a tablename
and "b" is a columnname.  I want to store this information in the AST,
and I do this right now using semantic actions  But I wondered if this
can't be done while the node is created... avoiding the semantic actions.
>  
> So instead of calling MyFactory.create(ID) to create the node, I
would like to call MyFactory.create(ID,_Tablename_), so the x-value is
set when creating the node.  Ofcourse I need a way to pass the xvalue
in the grammar... ID<_x=_Tablename_> or something like that?
>  
> The difference with the example on http://www.imada.sdu.dk/~morling/
is that the x-value is passed in the parsergrammar, and isn't
derivable from the data in the token.
>  
> I hope this makes it a bit more clear... thxs for your efforts !
>  
> Kristoff
>  
> 
> 
> Eric Mahurin <eric_mahurin@y...> wrote:
> You should give a more concrete example that shows exactly what you
> are doing - especially where xvalue is coming from. At least a
> complete rule, if not a mini-grammar (parser).
> 
> --- In antlr-interest@yahoogroups.com, Kristoff Tempelaere
> wrote:
> > Where does xvalue come from? Is it constant or does it rarely change?
> > ---- It changes a lot :( I'll make it a bit more concrete : I'm
> working on an SQL-grammar, and I need to store some extra information
> in the AST. For example, to group all keywords... 
> > 
> > Because sometimes I just need to all keywords in the query. I could
> do this by searching the AST for every keyword, based on the _ttype. 
> But thanx to the x-value I can do this in just one traversal, which
> saves ofcourse a lot of time... If there are 100 keywords, then this
> would sava 99 traversals... 
> > 
> > I saw a similar example, with a private member "line". The
> difference is, the information for this member is in the token, so
> overwriting create(token) {.... line = token->getLine(); ... } did the
> trick there. But in my case, the x-value can't be derived based on
> the token, it must be passed in the grammar. A bunch of semantic
> actions { setx(value);} does the job, but it looks awfull... and
> messes up the grammar a bit... so I was wondering if there was a
> better way, like "ID" or something... So, somehow
> to force the parser call MyFactory.create(token, xvalue) and passing
> the xvalue in the grammar... 
> > 
> > More general : setting private members of an ASTnode, which can NOT
> be derived from the token... is there another way than using semantic
> actions?
> > 
> > Thx for your proposal anyway! But it won't work in my case :(
> > 
> > Kristoff
> > 
> > 
> > Eric Mahurin wrote:
> > --- In antlr-interest@yahoogroups.com, Kristoff Tempelaere
> > wrote:
> > 
> > > Can this be done in a better way? Instead of using
> > myfactory.create(token), i would like the parser calls
> > MyFactory.create(token,xvalue)
> > 
> > Where does xvalue come from? Is it constant or does it rarely change?
> > If so, you could make your own factory class that has a static xvalue
> > variable that you would assign whenever needed and then your new
> > create method would use this static value.
> > 
> > Eric
> > 
> > 
> > 
> > 
> > 
> > Yahoo! Groups Links
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > ---------------------------------
> > Find local movie times and trailers on Yahoo! Movies.
> 
> 
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 
> 
> 
> 
> 
> ---------------------------------
> Find local movie times and trailers on Yahoo! Movies.



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From joanpujol at gmail.com  Sat Aug 21 01:51:12 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Syntactic predicates and ()+ rules
Message-ID: <d2d18a10408210151f5507fd@mail.gmail.com>

Hi,

After a lot of time I have found my problems with indeterminism and
syntactic predicates ;)
But I have a question:

I have a grammar like

inst: instx (NL|SPC);
instX:  ... expr OP;

expr: exp1
        (
           (OP ~(NL|SPC)) =>  OP exp1
           |
         )

And it works well and it has no indeterminism. I'm lucky because the
OP can't be associated in form      exp1 OP exp1 OP exp1 OP (is a
comparison operator)

But my question is If I suppose that exp1 OP exp1 OP exp1 is valid
and then  I need to do:
 
expr: exp1
        (
           (OP ~(NL|SPC)) =>  (OP exp1)+
           |
         )

This doesn't work, because the syntactic predicate is only evaluated
once and when I enter in the ()+ block I don't solve the
indeterminism.
My question how can I manage this If sometimes i need a grammar like
this. I tried to refactor, but with no exit.

A lot of thanks,


-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From francis.andre at easynet.fr  Sat Aug 21 05:11:56 2004
From: francis.andre at easynet.fr (Francis ANDRE)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] HOWTO: define synonyms for a single token??
Message-ID: <cg7e6c+bdt5@eGroups.com>


Hi

I would like to use a single token to match more than one literal, 
something like

token {
      YES          = "YES" | "Y" | "YEAP" | "OK";
}

What is the standard way to define such token/synonyms with ANTLR??
(except with a Parser rule!!)

Cheers

FA



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From eric_mahurin at yahoo.com  Sat Aug 21 10:13:12 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Re: Syntactic predicates and ()+ rules
In-Reply-To: <d2d18a10408210151f5507fd@mail.gmail.com>
Message-ID: <cg7vr8+bm7h@eGroups.com>

Try this instead:

expr: exp1 ( (OP ~(NL|SPC)) => OP exp1 )* ;

antlr complains that the syntactic predicate is redundant, but this
warning is a bug.  Ignore it and you should be good.  If you look back
in this yahoo group you'll find some of my postings on the topic and a
little wrapper around antlr to remove these bogus messages.

Eric

--- In antlr-interest@yahoogroups.com, Joan Pujol <joanpujol@g...> wrote:
> Hi,
> 
> After a lot of time I have found my problems with indeterminism and
> syntactic predicates ;)
> But I have a question:
> 
> I have a grammar like
> 
> inst: instx (NL|SPC);
> instX:  ... expr OP;
> 
> expr: exp1
>         (
>            (OP ~(NL|SPC)) =>  OP exp1
>            |
>          )
> 
> And it works well and it has no indeterminism. I'm lucky because the
> OP can't be associated in form      exp1 OP exp1 OP exp1 OP (is a
> comparison operator)
> 
> But my question is If I suppose that exp1 OP exp1 OP exp1 is valid
> and then  I need to do:
>  
> expr: exp1
>         (
>            (OP ~(NL|SPC)) =>  (OP exp1)+
>            |
>          )
> 
> This doesn't work, because the syntactic predicate is only evaluated
> once and when I enter in the ()+ block I don't solve the
> indeterminism.
> My question how can I manage this If sometimes i need a grammar like
> this. I tried to refactor, but with no exit.
> 
> A lot of thanks,
> 
> 
> -- 
> Joan Jes?s Pujol Espinar



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From wjb at abstractnonsense.com  Sun Aug 22 16:19:01 2004
From: wjb at abstractnonsense.com (William Bland)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Re: Is antlr the right tool for this job?
In-Reply-To: <1093002733.455.76062.m12@yahoogroups.com>
References: <1093002733.455.76062.m12@yahoogroups.com>
Message-ID: <1093216741.9152.57.camel@localhost>

First off, thanks very much to Loring and David for their replies, and
to everyone who has contributed to Antlr to make it such a great tool!

I've managed to do everything I wanted to do (generating documentation
from Java source code) and it's been much, much easier than with any of
the other approaches I've tried.

There's just one minor niggle:  When I'm looking at an AST, to generate
documentation from it, it would sometimes be useful to get the line and
column where the code fragment starts in the source file.  From the AST
JavaDoc, it looked to me like getLine() and getColumn() would do the
trick, but they appear to always return zero.  Any ideas?

Thanks again,
		Bill.
-- 
Dr. William Bland                          www.abstractnonsense.com
Now listening to Nothing (Media player is not running) 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Mon Aug 23 00:56:42 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Re: Is antlr the right tool for this job?
In-Reply-To: <1093216741.9152.57.camel@localhost>
Message-ID: <cgc7vq+tipi@eGroups.com>

Two alternatives:  Either
1.) subclass ASTFactory and override create(AST) and create(Token) to
copy line and column info.

2.) use a custom AST class subclassed from CommonAST with
initialize(AST) and initialize(Token) overridden to copy the line and
column info.

--Loring


--- In antlr-interest@yahoogroups.com, William Bland <wjb@a...> wrote:
> First off, thanks very much to Loring and David for their replies, and
> to everyone who has contributed to Antlr to make it such a great tool!
> 
> I've managed to do everything I wanted to do (generating documentation
> from Java source code) and it's been much, much easier than with any of
> the other approaches I've tried.
> 
> There's just one minor niggle:  When I'm looking at an AST, to generate
> documentation from it, it would sometimes be useful to get the line and
> column where the code fragment starts in the source file.  From the AST
> JavaDoc, it looked to me like getLine() and getColumn() would do the
> trick, but they appear to always return zero.  Any ideas?
> 
> Thanks again,
> 		Bill.
> -- 
> Dr. William Bland                          www.abstractnonsense.com
> Now listening to Nothing (Media player is not running)



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From wiggjd at lsbu.ac.uk  Mon Aug 23 08:47:31 2004
From: wiggjd at lsbu.ac.uk (David Wigg)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] ANTLR C/C++ parser with C++ output
Message-ID: <412A1193.7090501@lsbu.ac.uk>

FYI I have now published an updated version (3.0 July 2004) of
our ANTLR parser for C/C++ with C++ output and it is now
available from the http://www.antlr.org website.

Improvements can be sumarised as,

1.  Clearer, more accurate and up to date grammar. Where
corrections were needed I tried to make the grammar match more
nearly the published C++ grammar. I have also tried to reduce
the number and extent of built in C++ action statements
especially those requiring the use of supporting C++ software.

2.  I have introduced the idea of subclassing the users
application code (which would normally be embedded in the
grammar file). This separation of application code from the
grammar code makes the system easier to understand. A fully
coded example is included which can easily be adapted for the
users own use.

      I would recommend users of previous versions of our
CPP_parser to consider adopting subclassing of their application
code in order simplify taking this latest version of the
CPP_parser. The example supplied (MyCode.cpp) shows how this can 
be done.

3.  I have introduced some additional action statements under
the users control which I have found particularly useful for
testing and for checking that changes have not produced any
serious side effect(s) in previously tested files.

4.  I also describe how the library file can easily be amended
in LLkParser.hpp and LLkParser.cpp to provide a flexible control
of antlr tracing. I realise there will be other ways of doing
this, but this is half implemented and is easy to complete.

5.  I have also included some test data so a user can verify
that their system has been set up correctly.

Please note that this latest version continues to require
parsing of pre-processed, *.i files. However, one user is
working on a version which we hope will enable us to parse
source code, *.cpp files directly. Some encouraging progress has
been made and if you are interested in this possibility, please
let me know.

Further more detailed information is available in MyReadMe.txt
in the antlr.org/grammar/cpp file.

If you do download a copy I would be interested to hear how you
get on with it.

David Wigg
Research Fellow
Centre for Systems and Software Engineering
London South Bank University
UK.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From joanpujol at gmail.com  Mon Aug 23 10:02:17 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Accesing LexerSharedInputState (inputState)
Message-ID: <d2d18a104082310022eb152a7@mail.gmail.com>

Hi,

I'm subclassing the CommonToken to put filename info.

I also override the makeToken of the lexer. But I have a problem, I
can't access inputState variables like line, column, filename...

It's very strange because in CharScanner access this variables, and I
think that it shouldn't be able to do. Because the variables of
LexerSharedInputState are protected and CharScanner doesn't extends
LexerSharedInputState.

And my Lexer class that extends CharScanner can access the protected variables.

What I'm doing wrong?


Cheers,


-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From dude at darkfigure.org  Mon Aug 23 20:34:24 2004
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Real examples of error recovery
Message-ID: <Pine.LNX.4.44.0408232018050.20629-100000@g4.pauljlucas.org>

	The examples of doing error handling in the documetation are a
	bit... lacking.  All the examples do is report errors.  I want
	to report errors and *recover* from errors.  

	In my particular case, things are more complicated because the
	language (XQuery) is keyword-free.  Hence, the lexer itself
	maintains what state is in.  When a syntax error occurs (for
	example, an extra or missing token), the lexer may not be in the
	state it needs to be in.

	How, from the exception-handler in the parser, I (think) need
	to be able to:

		1. Determine what tokens the parser would like to see.
	and:
		2. Force the lexer to abrubtly reset its state to one
		   that will return the token(s) the parser wants.

	Suggestions?

	- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From antlr-interest-accept-Lj3ImJACajFZGjMWta9bQiY at yahoogroups.com  Mon Aug 23 23:23:27 2004
From: antlr-interest-accept-Lj3ImJACajFZGjMWta9bQiY at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:12 2004
Subject: MODERATE -- din_wins@yahoo.com posted to antlr-interest
Message-ID: <1093328607.300.91730.m16@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  din_wins@yahoo.com 

The message summary:
--------------------
FROM: din_wins@yahoo.com 
DATE: Tue, 24 Aug 2004 06:23:04 -0000 
SUBJECT: Need Immediate Help(Grammar for Mainframe Application) 

Dear Friends, 

I have been given the task of writing grammar for Mainframe 

aplication. As of now I am struck and I am not able to 
proceed in writing grammar. I am sending my grammar file and
the text file in which i need to develop my grammar. Request
you to help in writing the grammar or can you update the 
grammar file which I have send you. I need to complete this 
taks by the end of the day. 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=275 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-Lj3ImJACajFZGjMWta9bQiY@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "din_wins" <din_wins@yahoo.com>
Subject: Need Immediate Help(Grammar for Mainframe Application)
Date: Tue, 24 Aug 2004 06:23:04 -0000
Size: 1653
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20040824/60d60edb/attachment.mht
From din_wins at yahoo.com  Mon Aug 23 23:23:04 2004
From: din_wins at yahoo.com (din_wins)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Need Immediate Help(Grammar for Mainframe Application)
Message-ID: <cgems8+n7a4@eGroups.com>

Dear Friends,

I have been given the task of writing grammar for Mainframe 
aplication. As of now I am struck and I am not able to proceed in 
writing grammar. I am sending my grammar file and the text file in 
which i need to develop my grammar. Request you to help in writing 
the grammar or can you update the grammar file which I have send you. 
I need to complete this taks by the end of the day. 

Waiting for your affarmative reply.

Thanks & Regards,
P.Srinivasa Dinesh,
Developer,
ECMI.
Internet : srinivasa.parupalli@ecm-i.com
din_wins@yahoo.com
          




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From rd_clark at sbcglobal.net  Mon Aug 23 23:55:27 2004
From: rd_clark at sbcglobal.net (Richard Clark)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Real examples of error recovery
In-Reply-To: <Pine.LNX.4.44.0408232018050.20629-100000@g4.pauljlucas.org>
References: <Pine.LNX.4.44.0408232018050.20629-100000@g4.pauljlucas.org>
Message-ID: <948CC1AA-F59A-11D8-A9CD-000A95AF74F0@nextquestion.net>

Paul, can you provide some examples of where you think the lexer would 
need to backtrack?

  ...Richard


On Aug 23, 2004, at 20:34, Paul J. Lucas wrote:

> 	In my particular case, things are more complicated because the
> 	language (XQuery) is keyword-free.  Hence, the lexer itself
> 	maintains what state is in.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Tue Aug 24 06:35:30 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Need Immediate Help(Grammar for Mainframe Application)
In-Reply-To: <cgems8+n7a4@eGroups.com>
References: <cgems8+n7a4@eGroups.com>
Message-ID: <779B5C5B-F5D2-11D8-A245-000393B5606C@codetransform.com>

I think if you want help immediately you'll need to isolate and 
describe the problem yourself.  The best way to get a quick response is 
to post a small, complete grammar which demonstrates the problem.  
Include some sample input which causes the problem if relevant. By the 
way, your attachment did not come through either.

I'm also available for hire, but unfortunately for you I'm in the 
middle of a contract right now and won't be able to give you immediate, 
in depth help.  Your best bet for quick help is this list.

Good luck,

Monty Zukowski

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Aug 23, 2004, at 11:23 PM, din_wins wrote:

> Dear Friends,
>
> I have been given the task of writing grammar for Mainframe
> aplication. As of now I am struck and I am not able to proceed in
> writing grammar. I am sending my grammar file and the text file in
> which i need to develop my grammar. Request you to help in writing
> the grammar or can you update the grammar file which I have send you.
> I need to complete this taks by the end of the day.
>
> Waiting for your affarmative reply.
>
> Thanks & Regards,
> P.Srinivasa Dinesh,
> Developer,
> ECMI.
> Internet : srinivasa.parupalli@ecm-i.com
> din_wins@yahoo.com
>
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Tue Aug 24 08:48:04 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Exception issues
Message-ID: <cgfnvk+2qli@eGroups.com>

Here are a few things I don't know how to resolve with the current
antlr code with regard to exceptions:

1. SemanticException is constructed without any line, column, or
filename.  Why?  It is not a very useful message - especially to the
end-user that sees an expression with internal variables.

2. Ability to override the exception classes used for exception
construction.  In my case, I have include files so that the filename
is not constant.  I have another means of finding the filename (lookup
table - ignores lexer/parser filename) and would like to use exception
classes that use this method.

Eric




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From dude at darkfigure.org  Tue Aug 24 09:00:59 2004
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Re: Real examples of error recovery
In-Reply-To: <948CC1AA-F59A-11D8-A9CD-000A95AF74F0@nextquestion.net>
Message-ID: <cgfonr+a9bi@eGroups.com>

--- In antlr-interest@yahoogroups.com, Richard Clark <rd_clark@s...> wrote:
> Paul, can you provide some examples of where you think the lexer would 
> need to backtrack?

I never said it needed to backtrack.  I said it needed to change state.  Look at:

http://www.w3.org/TR/xquery/#id-lexical-states

(I'm making this example up as I go, but hopefully, you get the idea.)  Suppose you start in 
the default state.  Now you get:

declare collation "foo";

The "keyword" of "default" is missing.  Hence the lexer never switches to the 
NAMESPACEDECL state.  Before I lex "foo" I need to poke the lexer and be able to forceably 
switch its state to NAMESPACEDECL.  Or make the lexer skip forward to just past the ';' and 
reset its state.  Or something.

FYI: because all of the complexity is in the lexer, it makes writing the grammar for the 
parser be as if XQuery *does* have keywords, i.e., you write the grammar "normally," e.g.:

defaultCollationDecl : DECLARE DEFAULT COLLATION uri=stringLiteral ;

How would I annotate the above grammar rule with an "exception/catch" and make a best 
effort to continue?  How to tell the lexer to do something like "skip until you find a ';'"?  
>>From the ANTLR docs, putting an "exception/catch" on the entire rule implies rule 
termination unlike "exception/catch" on either a labeled statement or an alternate.

- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Tue Aug 24 09:06:02 2004
From: eric_mahurin at yahoo.com (Eric Mahurin)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Re: Exception issues
In-Reply-To: <cgfnvk+2qli@eGroups.com>
Message-ID: <cgfp1a+2e1e@eGroups.com>

I just figured out a partial workaround for the SemanticException.  If
you have a semantic predicate not used to qualify an alternative:

{condition}?

just change this to:

( {condition}? | {false}? )

This makes it throw NoViableAltException instead which does have line
number info.  Unfortunately, the message isn't useful - but the
line/column numbers are right.

It looks like the best solution is to try to move all of the semantic
predicates to be qualifiers on alternatives (or loops?) wherever possible.

Eric

--- In antlr-interest@yahoogroups.com, "Eric Mahurin"
<eric_mahurin@y...> wrote:
> Here are a few things I don't know how to resolve with the current
> antlr code with regard to exceptions:
> 
> 1. SemanticException is constructed without any line, column, or
> filename.  Why?  It is not a very useful message - especially to the
> end-user that sees an expression with internal variables.
> 
> 2. Ability to override the exception classes used for exception
> construction.  In my case, I have include files so that the filename
> is not constant.  I have another means of finding the filename (lookup
> table - ignores lexer/parser filename) and would like to use exception
> classes that use this method.
> 
> Eric



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Tue Aug 24 09:13:49 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Exception issues
In-Reply-To: <cgfnvk+2qli@eGroups.com>
References: <cgfnvk+2qli@eGroups.com>
Message-ID: <20040824161349.GB21885@cs.utwente.nl>

On Tue, Aug 24, 2004 at 03:48:04PM -0000, Eric Mahurin wrote:
> 1. SemanticException is constructed without any line, column, or
> filename.  Why?  It is not a very useful message - especially to the
> end-user that sees an expression with internal variables.

I'm don't know what the design behind it is/was. From a practical point of
view though the automatically generated code for a predicate that generates
a SemanticException has no token linked to it. So it's not possible to get
it from there. It would probably be possible to get this information from
the inputState (at the expense of it's precision it might not point at the
exact point where the predicate failed). Hmm come to think of it maybe it's
possible to grab it from LT(1) maybe with some extra code around it.

Work arounds I could think of:

1. Catch the exception directly in the alternative or the rule and rethrow
   it with line/column/file gobbled from another place (token in the
   vicinity) depends on context what's best.
2. Patch the codegenerator to grab data from LT(1). Should be a trivial
   patch to genSemPred methods in Java/CppCodegenerator. If you patch it
   and send me the patch I'll fix it in the repository.

As for the generated message. I guess it would be nicest if you specify a
fail message there. But that's a bit hairy would require some extra syntax
and stuff. Option 1. would allow you to fix up the message as well.

> 2. Ability to override the exception classes used for exception
> construction.  In my case, I have include files so that the filename
> is not constant.  I have another means of finding the filename (lookup
> table - ignores lexer/parser filename) and would like to use exception
> classes that use this method.

It depends on what you want but you most probably have to patch the runtime
lib and codegenerator. In general where applicable the exceptions should
take over line/column/file information from the tokens/ast's from which
they get generated. If some don't I guess that's a bug. To get
filename/line/column all set in tokens/ast's you may have to override a few
things. (makeToken in the lexer, custom AST with the right initialize stuff
there's examples for that around)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Tue Aug 24 09:38:32 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Re: Real examples of error recovery
In-Reply-To: <cgfonr+a9bi@eGroups.com>
References: <948CC1AA-F59A-11D8-A9CD-000A95AF74F0@nextquestion.net> <cgfonr+a9bi@eGroups.com>
Message-ID: <20040824163831.GC21885@cs.utwente.nl>

On Tue, Aug 24, 2004 at 04:00:59PM -0000, Paul J. Lucas wrote:
> --- In antlr-interest@yahoogroups.com, Richard Clark <rd_clark@s...> wrote:
> > Paul, can you provide some examples of where you think the lexer would
> > need to backtrack?
>
> I never said it needed to backtrack.  I said it needed to change state.
> Look at:
>
> http://www.w3.org/TR/xquery/#id-lexical-states

I assume you're using multiple lexers and a tokenstream selector to
implement those?

> (I'm making this example up as I go, but hopefully, you get the idea.)
> Suppose you start in the default state.  Now you get:
>
> declare collation "foo";
>
> The "keyword" of "default" is missing.  Hence the lexer never switches to
> the NAMESPACEDECL state.  Before I lex "foo" I need to poke the lexer and
> be able to forceably switch its state to NAMESPACEDECL.  Or make the lexer
> skip forward to just past the ';' and reset its state.  Or something.
>
> FYI: because all of the complexity is in the lexer, it makes writing the
> grammar for the parser be as if XQuery *does* have keywords, i.e., you
> write the grammar "normally," e.g.:
>
> defaultCollationDecl : DECLARE DEFAULT COLLATION uri=stringLiteral ;
>
> How would I annotate the above grammar rule with an "exception/catch" and
> make a best effort to continue?

Tack something like this after the rule:

rule: .... ;
exception catch [antlr::RecognitionException &ex]  { }

Best effort to continue for that you'd have to analyze the grammar.
Basically you can use the various consumeXYZ methods of the lexer to skip
ahead to parts. You could even call a separate parser there to do 'smart'
things. Error recovery can be done by advancing tokens or by inserting
tokens (the latter could be done by adding a tokenstream between the lexer
and the parser)

If you catch the exception at the end a rule and handle it there then
parsing continues at the calling rule. (after the call to current rule) So
if you can fix the input stream to be sane for that point then things will
kinda work. You can use the $FOLLOW/$FIRST sets inside the exception
handler or $FOLLOW(rule) $FIRST(rule) to do calculations outside of a rule.

There's probably a load of papers available on the net on recovery
strategies.

>  How to tell the lexer to do something like "skip until you find a ';'"?

consumeUntil(); Check out the CharScanner docs/class definition.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "You can't expect to wield supreme executive power just because some
   watery tot throws a sword at you!"
  --- Monty Python and the Holy Grail



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From cb at phoebussoftware.com  Tue Aug 24 09:53:02 2004
From: cb at phoebussoftware.com (craigbarker1)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] shell script parser
Message-ID: <cgfrpe+r9go@eGroups.com>

Hi All,

I've been tasked with carrying out the creation of an Antlr grammer 
for parsing shell script files (initially run against bash). I'm 
quite familiar with Antlr now, having created a couple of grammers 
but before I start this one from scrath I was wondering if anyone 
else has done any work on this that they'd be willing to share? Even 
if it's not for the same shell type and all they have is a list of 
commands to be recognised that'd be a really useful starting point.

Many thanks and keep up the excellent work on Antlr.

Cheers,

Craig



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From thomas.jackson at microfocus.com  Tue Aug 24 10:19:40 2004
From: thomas.jackson at microfocus.com (Thomas Jackson III)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] shell script parser
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E9102ECEC1D@rock-corpmail.microfocus.com>

Craig et al,

I am looking for something similar so if you find anything, let me know.

Thanks
Thomas

-----Original Message-----
From: craigbarker1 [mailto:cb@phoebussoftware.com] 
Sent: Tuesday, August 24, 2004 12:53 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] shell script parser

Hi All,

I've been tasked with carrying out the creation of an Antlr grammer for
parsing shell script files (initially run against bash). I'm quite familiar
with Antlr now, having created a couple of grammers but before I start this
one from scrath I was wondering if anyone else has done any work on this
that they'd be willing to share? Even if it's not for the same shell type
and all they have is a list of commands to be recognised that'd be a really
useful starting point.

Many thanks and keep up the excellent work on Antlr.

Cheers,

Craig



 
Yahoo! Groups Links



 


________________________________________________________________________
This e-mail has been scanned for viruses by MCI's Internet Managed Scanning
Services - powered by MessageLabs. For further information visit
http://www.mci.com
________________________________________________________________________


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From dude at darkfigure.org  Tue Aug 24 10:43:34 2004
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Re: Real examples of error recovery
In-Reply-To: <20040824163831.GC21885@cs.utwente.nl>
Message-ID: <cgfuo6+mc4p@eGroups.com>

--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> wrote:
> I assume you're using multiple lexers and a tokenstream selector to
> implement those?

I have two lexers: (1) for "main" XQuery content and (2) for embedded XML content.  Yes, I 
am using a tokenstream selector.

> Tack something like this after the rule:
> 
> rule: .... ;
> exception catch [antlr::RecognitionException &ex]  { }

Well, I do still want to report the error.

> You can use the $FOLLOW/$FIRST sets inside the exception
> handler or $FOLLOW(rule) $FIRST(rule) to do calculations outside of a rule.

I've never seen any mention of those.  Any documentation or examples?

> There's probably a load of papers available on the net on recovery
> strategies.

I tried a search for 'ANTLR "error recovery"' and didn't find anything interesting.

> consumeUntil(); Check out the CharScanner docs/class definition.

Thanks for the tip.

- Paul



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Tue Aug 24 12:58:31 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Re: Real examples of error recovery
In-Reply-To: <cgfuo6+mc4p@eGroups.com>
References: <20040824163831.GC21885@cs.utwente.nl> <cgfuo6+mc4p@eGroups.com>
Message-ID: <20040824195830.GB24855@cs.utwente.nl>


On Tue, Aug 24, 2004 at 05:43:34PM -0000, Paul J. Lucas wrote:
> I have two lexers: (1) for "main" XQuery content and (2) for embedded XML content.  Yes, I 
> am using a tokenstream selector.

That's good I got the wrong impression for a sec so I just asked to be sure
;)

> > Tack something like this after the rule:
> > 
> > rule: .... ;
> > exception catch [antlr::RecognitionException &ex]  { }
> 
> Well, I do still want to report the error.

After you caught it you can report it in the way you want or massage it a
bit and rethrow for later reporting.

> > You can use the $FOLLOW/$FIRST sets inside the exception
> > handler or $FOLLOW(rule) $FIRST(rule) to do calculations outside of a rule.
> 
> I've never seen any mention of those.  Any documentation or examples?

They're somewhat recent additions. It could be that the docs didn't get
updated for them. Basically they're just macro's that expand to the bitsets
ANTLR uses internally. Look at the BitSet classes for the API's on them.
You can do things like consumeUntil($FOLLOW) which gives basically antlr's
default error handling if I'm not mistaken.

> > There's probably a load of papers available on the net on recovery
> > strategies.
> 
> I tried a search for 'ANTLR "error recovery"' and didn't find anything
> interesting.

Leave out the ANTLR from the search term. Antlr only has it's default
strategy you get with defaultErrorhandler=true and what you program for it
in the exception handlers.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
  "You know how to use that thing?" [pointing to the sword]
  "Sure.. The pointy end goes into the other guy."
  --- The Mask of Zorro



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From gcpa-antlr-interest at m.gmane.org  Tue Aug 24 14:00:14 2004
From: gcpa-antlr-interest at m.gmane.org (Michael Stahl)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] yet another java 1.5 grammar
Message-ID: <cgga5t$1fv$1@sea.gmane.org>


[posting via gmane, hope that works and does not mess up attachments]


hello!

this is the java 1.5 grammar which i thought i would post 3 weeks ago :)
it took so long mostly because the proposed final draft version of JSR14
came out on july 27 and that had some changes relative to the public
review that came out in 2001 (!). i finally found the time for looking
through the draft 3rd ed. of JLS that comes with JSR14-pfd last week.

oh, and thanks to michael studman, without your java15.g i would not
even have noticed that! a superficial look at that yielded some weird
WILDCARD thing which my grammar was missing...

since i need my grammar anyway (because i have a whitespace preserving
grammar that is based on it and a serializing tree parser to match)
i thought i might as well post it here despite java15.g being available.

also, i have some issues with java15.g, which are fixed in my grammar:

- the gtToReconcile stuff is way overkill. i replaced this with
  a simple semantic predicate in typeArguments:
        {inputState.guessing !=0 || ltCounter == currentLtLevel + 1}?
  (oh, and thanks anyway, because i did not actually notice that
  tree construction was broken in the first place)

- the typeArguments for method calls was missing in rule identPrimary:
  i found adding this rather difficult because unfortunately there is a
  conflict between the (DOT typeArgs IDENT)* loop in identPrimary
  and (DOT typeArgs "super")* in rule postfixExpression which was not
  there before (k=2). 
  my first idea was to put a syntactic predicate in the loop, but
  then antlr (2.7.4) gave me a warning that this does not make sense.
  so what i came up with is this, and it is rather ugly:
    (   (DOT typeArguments IDENT) =>
                DOT^ ta2:typeArguments! IDENT
    |   {false}?        // FIXME: this is very ugly but it seems to work...
    )*
  This generates two warnings, one of which i could disable, the other
  says that empty alternative does not make any sense in a loop.
  Obvious feature request for the antlr authors:
  Would it be possible to handle the case of a syntactic predicate in a
  loop with only one alternative differently in antlr, i.e. such that
  not matching the syntax predicate means the loop is broken out of?

- newExpression is also missing typeArguments, but that is easy to fix

- the handling of the various different field types has a lot of
  duplication. this is factored a bit better in my grammar.

a cool feature i have added is switchable keyword support. the
"assert" and "enum" keywords can be dis/enabled at runtime. this is
done via a string comparison in the lexer IDENT rule. i think this
should not harm performance too much, but i have not benchmarked
anything and do not particularly care anyway.

oh, and i have also cleaned up the formatting to always use tabs instead
of the hideous tabs/spaces mix it was before.

my grammar is actually not much tested, but the whitespace preserving
grammar based on it parses and serializes the entire aspectix cvs
source tree (almost 3000 java 1.4 files) and also the sources of
findbugs (which uses generics), as well as some custom written test
cases.

btw, does anyone know of a sizable code base that uses java 1.5
features and is licensed under some kind of free software license?
i.e. not the sun jdk 1.5 source...

so, if anybody wants to comment on this or finds a bug, i'd be happy
to hear from you.

michael stahl

PS: i hereby donate the code in the attached files, which was written
    by myself except for the parts that are from the antlr distribution
    and the parts taken from javaG.g by Matt Quail, to the public
    domain.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
/** Java 1.5/JSR14/JSR201/JSR175 Recognizer
 *
 * Run 'java Main [-showtree] directory-full-of-java-files'
 *
 * [The -showtree option pops up a Swing frame that shows
 *  the AST constructed from the parser.]
 *
 * Run 'java Main <directory full of java files>'
 *
 * Contributing authors:
 *		John Mitchell		johnm@non.net
 *		Terence Parr		parrt@magelang.com
 *		John Lilley			jlilley@empathy.com
 *		Scott Stanchfield	thetick@magelang.com
 *		Markus Mohnen       mohnen@informatik.rwth-aachen.de
 *      Peter Williams      pete.williams@sun.com
 *      Allan Jacobs        Allan.Jacobs@eng.sun.com
 *      Steve Messick       messick@redhills.com
 *      John Pybus			john@pybus.org
 *
 * Version 1.00 December 9, 1997 -- initial release
 * Version 1.01 December 10, 1997
 *		fixed bug in octal def (0..7 not 0..8)
 * Version 1.10 August 1998 (parrt)
 *		added tree construction
 *		fixed definition of WS,comments for mac,pc,unix newlines
 *		added unary plus
 * Version 1.11 (Nov 20, 1998)
 *		Added "shutup" option to turn off last ambig warning.
 *		Fixed inner class def to allow named class defs as statements
 *		synchronized requires compound not simple statement
 *		add [] after builtInType DOT class in primaryExpression
 *		"const" is reserved but not valid..removed from modifiers
 * Version 1.12 (Feb 2, 1999)
 *		Changed LITERAL_xxx to xxx in tree grammar.
 *		Updated java.g to use tokens {...} now for 2.6.0 (new feature).
 *
 * Version 1.13 (Apr 23, 1999)
 *		Didn't have (stat)? for else clause in tree parser.
 *		Didn't gen ASTs for interface extends.  Updated tree parser too.
 *		Updated to 2.6.0.
 * Version 1.14 (Jun 20, 1999)
 *		Allowed final/abstract on local classes.
 *		Removed local interfaces from methods
 *		Put instanceof precedence where it belongs...in relationalExpr
 *			It also had expr not type as arg; fixed it.
 *		Missing ! on SEMI in classBlock
 *		fixed: (expr) + "string" was parsed incorrectly (+ as unary plus).
 *		fixed: didn't like Object[].class in parser or tree parser
 * Version 1.15 (Jun 26, 1999)
 *		Screwed up rule with instanceof in it. :(  Fixed.
 *		Tree parser didn't like (expr).something; fixed.
 *		Allowed multiple inheritance in tree grammar. oops.
 * Version 1.16 (August 22, 1999)
 *		Extending an interface built a wacky tree: had extra EXTENDS.
 *		Tree grammar didn't allow multiple superinterfaces.
 *		Tree grammar didn't allow empty var initializer: {}
 * Version 1.17 (October 12, 1999)
 *		ESC lexer rule allowed 399 max not 377 max.
 *		java.tree.g didn't handle the expression of synchronized
 *		statements.
 * Version 1.18 (August 12, 2001)
 *      	Terence updated to Java 2 Version 1.3 by
 *		observing/combining work of Allan Jacobs and Steve
 *		Messick.  Handles 1.3 src.  Summary:
 *		o  primary didn't include boolean.class kind of thing
 *      	o  constructor calls parsed explicitly now:
 * 		   see explicitConstructorInvocation
 *		o  add strictfp modifier
 *      	o  missing objBlock after new expression in tree grammar
 *		o  merged local class definition alternatives, moved after declaration
 *		o  fixed problem with ClassName.super.field
 *      	o  reordered some alternatives to make things more efficient
 *		o  long and double constants were not differentiated from int/float
 *		o  whitespace rule was inefficient: matched only one char
 *		o  add an examples directory with some nasty 1.3 cases
 *		o  made Main.java use buffered IO and a Reader for Unicode support
 *		o  supports UNICODE?
 *		   Using Unicode charVocabulay makes code file big, but only
 *		   in the bitsets at the end. I need to make ANTLR generate
 *		   unicode bitsets more efficiently.
 * Version 1.19 (April 25, 2002)
 *		Terence added in nice fixes by John Pybus concerning floating
 *		constants and problems with super() calls.  John did a nice
 *		reorg of the primary/postfix expression stuff to read better
 *		and makes f.g.super() parse properly (it was METHOD_CALL not
 *		a SUPER_CTOR_CALL).  Also:
 *
 *		o  "finally" clause was a root...made it a child of "try"
 *		o  Added stuff for asserts too for Java 1.4, but *commented out*
 *		   as it is not backward compatible.
 *
 * Version 1.20 (October 27, 2002)
 *
 *      Terence ended up reorging John Pybus' stuff to
 *      remove some nondeterminisms and some syntactic predicates.
 *      Note that the grammar is stricter now; e.g., this(...) must
 *	be the first statement.
 *
 *      Trinary ?: operator wasn't working as array name:
 *          (isBig ? bigDigits : digits)[i];
 *
 *      Checked parser/tree parser on source for
 *          Resin-2.0.5, jive-2.1.1, jdk 1.3.1, Lucene, antlr 2.7.2a4,
 *	    and the 110k-line jGuru server source.
 *
 * Version 1.21 (October 17, 2003)
 *	Fixed lots of problems including:
 *	Ray Waldin: add typeDefinition to interfaceBlock in java.tree.g
 *  He found a problem/fix with floating point that start with 0
 *  Ray also fixed problem that (int.class) was not recognized.
 *  Thorsten van Ellen noticed that \n are allowed incorrectly in strings.
 *  TJP fixed CHAR_LITERAL analogously.
 *
 * Version 1.22 (April 14, 2004)
 *  Changed vocab to be ..\uFFFE to avoid -1 char. removed dummy VOCAB rule.
 *
 * Version 1.21.2 (March, 2003)
 *      Changes by Matt Quail to support generics (as per JDK1.5/JSR14)
 *      Notes:
 *      o We only allow the "extends" keyword and not the "implements"
 *        keyword, since thats what JSR14 seems to imply.
 *      o Thanks to Monty Zukowski for his help on the antlr-interest
 *        mail list.
 *      o Thanks to Alan Eliasen for testing the grammar over his
 *        Fink source base
 *
 * Version 1.22+assert+JSR14 (2004-06-10)
 *      Merged ANTLR version 1.22 with javaG.g version 1.21.2 and added
 *      the ability to enable the "assert" keyword at runtime via the lexer.
 *      Also made changes to generics rules for a saner AST creation.
 *
 * Version 1.22+assert+JSR14+JSR201 (2004-06-12)
 *      Added support for enums, varargs, enhanced for loop, and import static
 *
 * Version 1.22+assert+JSR14+JSR201+JSR175 (2004-06-14)
 *      Added support for metadata (JSR 175). Refactored the field rule into
 *      classField and interfaceField.
 *
 * Version 1.22+assert+JSR14+JSR201+JSR175+AST (2004-07-02)
 *      Various changes to improve AST generation; also made the tree parser
 *      recognize all the fancy new stuff. Added the ability to enable the
 *      "enum" keyword at runtime (just like "assert").
 *
 * Version 1.22+assert+JSR14+JSR201+JSR175+AST+fixes (2004-08-17)
 *      Bug fixes and support for wildcard type arguments and constructor
 *      type parameters (new in final draft of JSR 14). Formatting cleanup.
 *
 * This grammar is in the PUBLIC DOMAIN
 */
class JavaRecognizer extends Parser;
options {
	k = 2;                           // two token lookahead
	exportVocab=Java;                // Call its vocabulary "Java"
	codeGenMakeSwitchThreshold = 2;  // Some optimizations
	codeGenBitsetTestThreshold = 3;
	defaultErrorHandler = false;     // Don't generate parser error handlers
	buildAST = true;
}

tokens {
	BLOCK; MODIFIERS; OBJBLOCK; SLIST; CTOR_DEF; METHOD_DEF; VARIABLE_DEF;
	INSTANCE_INIT; STATIC_INIT; TYPE; CLASS_DEF; INTERFACE_DEF;
	PACKAGE_DEF; ARRAY_DECLARATOR; EXTENDS_CLAUSE; IMPLEMENTS_CLAUSE;
	PARAMETERS; PARAMETER_DEF; LABELED_STAT; TYPECAST; INDEX_OP;
	POST_INC; POST_DEC; METHOD_CALL; EXPR; ARRAY_INIT;
	IMPORT; UNARY_MINUS; UNARY_PLUS; CASE_GROUP; ELIST; FOR_INIT; FOR_CONDITION;
	FOR_ITERATOR; EMPTY_STAT; FINAL="final"; ABSTRACT="abstract";
	STRICTFP="strictfp"; SUPER_CTOR_CALL; CTOR_CALL;
	ASSERT; TYPE_ARGS; TYPE_ARGS_END; TYPE_PARAMS; ENUM; ENUM_DEF; ENUM_CONST;
	ANNOTATION_DEF; ANNOTATION_MEMBER_DEF; ANNOTATION; ANNOTATIONS;
	ANNOTATION_INIT_EMPTY; ANNOTATION_INIT_VALUE; ANNOTATION_INIT_LIST;
	ANNOTATION_INIT_MEMBER; WILDCARD;
}

{
    /**
     * Counts the number of LT seen in the typeArguments production.
     * It is used in semantic predicates to ensure we have seen
     * enough closing '>' characters; which actually may have been
     * either GT, SR or BSR tokens.
     */
    private int ltCounter = 0;
}

// Compilation Unit: In Java, this is a single file.  This is the start
//   rule for this parser
compilationUnit
	:	// A compilation unit starts with an optional package definition
		// Metadata makes a mess of things: even package definitions can be
		// annotated, although _only_ in one file (not enforced here ;))
		(	( annotations "package" ) => packageDefinition
		|	/* nothing */
		)

		// Next we have a series of zero or more import statements
		( importDefinition )*

		// Wrapping things up with any number of class or interface
		//    definitions
		( typeDefinition )*

		EOF!
	;


// Package statement: "package" followed by an identifier.
packageDefinition
	options {defaultErrorHandler = true;} // let ANTLR handle errors
	:	annotations p:"package"^ {#p.setType(PACKAGE_DEF);} identifier SEMI!
	;


// Import statement: import followed by a package or class name
// JSR 201 allows the optional "static" keyword
importDefinition
	options {defaultErrorHandler = true;}
	:	i:"import"^ {#i.setType(IMPORT);} ("static")? identifierStar SEMI!
	;

// A type definition in a file is either a class, interface, enumeration or
// annotation type definition.
typeDefinition
	options {defaultErrorHandler = true;}
	:	m:modifiers!
		( classDefinition[#m]
		| enumDefinition[#m]
		| interfaceDefinition[#m]
		| annotationTypeDefinition[#m]
		)
	|	SEMI!
	;

/** A declaration is the creation of a reference or primitive-type variable
 *  Create a separate Type/Var tree for each var in the var list.
 */
declaration!
	:	m:modifiers t:typeSpec[false] v:variableDefinitions[#m,#t]
		{#declaration = #v;}
	;

// A type specification is a type name with possible brackets afterwards
//   (which would make it an array type).
typeSpec[boolean addImagNode]
	: classTypeSpec[addImagNode]
	| builtInTypeSpec[addImagNode]
	;

// built in types are not reference types, everything else is
referenceTypeSpec[boolean addImagNode]
	: classTypeSpec[addImagNode]
	| arrayTypeSpec[addImagNode]
	;

// A class type specification is a class type with either:
// - possible brackets afterwards
//   (which would make it an array type).
// - generic type arguments after
classTypeSpec[boolean addImagNode]
	:	classOrInterfaceType[false]
		(options{greedy=true;}: // match as many as possible
			lb:LBRACK^ {#lb.setType(ARRAY_DECLARATOR);} RBRACK!
		)*
		{
			if ( addImagNode ) {
				#classTypeSpec = #(#[TYPE,"TYPE"], #classTypeSpec);
			}
		}
	;

classOrInterfaceType[boolean addImagNode]
	:	IDENT typeArguments
		(options{greedy=true;}: // match as many as possible
			DOT^
			IDENT typeArguments
		)*
		{
			if ( addImagNode ) {
				#classOrInterfaceType = #(#[TYPE,"TYPE"],
					#classOrInterfaceType);
			}
		}
	;

typeArguments
{int currentLtLevel = 0;}
	:
		{currentLtLevel = ltCounter;}
		(
			lt:LT^	{ ltCounter++; #lt.setType(TYPE_ARGS); }
			typeArgument
			(options{greedy=true;}: // match as many as possible
				// The second test is needed to construct trees properly
				// in the case when we have ">>" or ">>>" tokens
				// (test case: "var<O1<I1<M1>>, O2<I2>> a;"
				// The first test is needed because otherwise
				// stuff breaks when guessing (e.g. declaration)
				// because semantic actions are not executed and the
				// second test would always fail (trees are not constructed
				// while guessing, so no problem there).
				{inputState.guessing !=0 || ltCounter == currentLtLevel + 1}?
					COMMA! typeArgument
			)*

			(   // turn warning off since Antlr generates the right code,
				// plus we have our semantic predicate below
				options{generateAmbigWarnings=false;}:
				typeArgumentsEnd!
			)?
		)
		// make sure we have gobbled up enough '>' characters
		// if we are at the "top level" of nested typeArgument productions
		{(currentLtLevel != 0) || ltCounter == currentLtLevel}?
	|	{#typeArguments = #(#[TYPE_ARGS,"TYPE_ARGS"], #typeArguments);}
	;

// either reference type or wildcard type with optional lower or upper bound
typeArgument
	:	(	q:QUESTION^ {#q.setType(WILDCARD);}
			( // faux conflict on "extends" because typeArgsEnd may be empty
				options{greedy=true;}:
				"extends" referenceTypeSpec[true]
			|	"super" referenceTypeSpec[true]
			)?
		)
	|	referenceTypeSpec[true]
	;

// this gobbles up *some* amount of '>' characters, and counts how many
// it gobbled.
protected
typeArgumentsEnd
	:	(	GT {ltCounter-=1;}
		|	SR {ltCounter-=2;}
		|	BSR {ltCounter-=3;}
		)
		{ #typeArgumentsEnd.setType(TYPE_ARGS_END); }
	;

// A builtin type specification is a builtin type with possible brackets
// afterwards (which would make it an array type).
builtInTypeSpec[boolean addImagNode]
	:	builtInType
		(options{greedy=true;}: // match as many as possible
			lb:LBRACK^ {#lb.setType(ARRAY_DECLARATOR);} RBRACK!
		)*
		{
			if ( addImagNode ) {
				#builtInTypeSpec = #(#[TYPE,"TYPE"], #builtInTypeSpec);
			}
		}
	;

// An array type specification is a builtin type with brackets afterwards
arrayTypeSpec[boolean addImagNode]
	:	builtInType
		(options{greedy=true;}: // match as many as possible
			lb:LBRACK^ {#lb.setType(ARRAY_DECLARATOR);} RBRACK!
		)+
		{
			if ( addImagNode ) {
				#arrayTypeSpec = #(#[TYPE,"TYPE"], #arrayTypeSpec);
			}
		}
	;

// A type name. which is either a (possibly qualified and parameterized)
// class name or a primitive (builtin) type
type
	:	classOrInterfaceType[false]
	|	builtInType
	;

// The primitive types.
builtInType
	:	"void"
	|	"boolean"
	|	"byte"
	|	"char"
	|	"short"
	|	"int"
	|	"float"
	|	"long"
	|	"double"
	;

// A (possibly-qualified) java identifier.  We start with the first IDENT
//   and expand its name by adding dots and following IDENTS
identifier
	:	IDENT  ( DOT^ IDENT )*
	;

identifierStar
	:	IDENT
		( DOT^ IDENT )*
		( DOT^ STAR  )?
	;

// A list of zero or more modifiers.  We could have used (modifier)* in
//   place of a call to modifiers, but I thought it was a good idea to keep
//   this rule separate so they can easily be collected in a Vector if
//   someone so desires
// JSR 175 says that annotations are allowed everywhere modifiers are.
// A nondeterminism warning is masked by the greedy option.
modifiers
	:	( options{greedy=true;} : modifier | annotation )*
		{#modifiers = #([MODIFIERS, "MODIFIERS"], #modifiers);}
	;

// modifiers for Java classes, interfaces, class/instance vars and methods
modifier
	:	"private"
	|	"public"
	|	"protected"
	|	"static"
	|	"transient"
	|	"final"
	|	"abstract"
	|	"native"
	|	"threadsafe"
	|	"synchronized"
//	|	"const"			// reserved word, but not valid
	|	"volatile"
	|	"strictfp"
	;

// Definition of an enumeration (JSR 201)
enumDefinition![AST modifiers]
	:	ENUM IDENT
		// it might implement some interfaces...
		ic:implementsClause
		// now parse the body of the enum
		eb:enumBlock
		{#enumDefinition = #(#[ENUM_DEF,"ENUM_DEF"], modifiers,IDENT,ic,eb);}
	;

// This is the body of an enumeration.  It can contain a list of comma
// separated identifiers (the enum values), and optionally, seperated by a
// semicolon, some declarations like in a class at the end.
// The values of the enumeration may be annotated.
enumBlock
	:	LCURLY! // next line has a nondeterminism warning without option greedy
			( enumConst ( options {greedy=true;} : COMMA! enumConst )* )?
			( COMMA! )?	// optional comma at end of value list
			( SEMI! ( classField | SEMI! )* )?
		RCURLY!
		{#enumBlock = #([OBJBLOCK, "OBJBLOCK"], #enumBlock);}
	;

// Each enum value is in fact a class instance, and can be followed by the
// usual class declarations.
enumConst
	:	annotations IDENT enumConstInit ( classBlock )?
		{#enumConst = #([ENUM_CONST, "ENUM_CONST"], #enumConst );}
	;

// This is really a constructor invocation.
enumConstInit
	: ( lp:LPAREN^ argList RPAREN! { #lp.setType(CTOR_CALL); } )?
	;

// Definition of an annotation type (JSR 175)
annotationTypeDefinition![AST modifiers]
	:	AT "interface" IDENT
		// now parse the body of the annotation type
		ab:annotationBlock
		{#annotationTypeDefinition = #(#[ANNOTATION_DEF,"ANNOTATION_DEF"],
									modifiers,IDENT,ab);}
	;

// This is the body of an annotation type. Only inner type definitions and
// members (which use a notation similar to methods) are allowed.
annotationBlock
	:	LCURLY!
			( annotationField | SEMI! )*
		RCURLY!
		{#annotationBlock = #([OBJBLOCK, "OBJBLOCK"], #annotationBlock);}
	;

annotationField!
	:
		mods:modifiers
		(	it:innerTypeDef[#mods]		// inner type definition
			{#annotationField = #it;}
		|	ts:typeSpec[false]
			(	i:IDENT LPAREN RPAREN dv:defaultValue SEMI
				{#annotationField =
						#(#[ANNOTATION_MEMBER_DEF,"ANNOTATION_MEMBER_DEF"],
						mods, #(#[TYPE,"TYPE"],ts), i, dv); }
			|	v:variableDefinitions[#mods,#ts] SEMI
				{#annotationField = #v;}
			)
		)
	;

// Annotation members may have optional default values.
defaultValue
	:	( "default"^ annotationMemberValue )?
	;

annotations
	:	( annotation )*
		{#annotations = #([ANNOTATIONS, "ANNOTATIONS"], #annotations);}
	;

annotation
	:	AT^ identifier annotationInit
		{#AT.setType(ANNOTATION);}
	;

// The initialization (list of assignments, single value, or nothing).
annotationInit
	:	(	lp:LPAREN^
			(	annotationMemberInit
				( COMMA! annotationMemberInit )*
				{#lp.setType(ANNOTATION_INIT_LIST);}
			|	annotationMemberValue	{#lp.setType(ANNOTATION_INIT_VALUE);}
			)
			RPAREN!
		)
	|	{#annotationInit = #([ANNOTATION_INIT_EMPTY, "AN_INIT_EMPTY"]);}
	;

annotationMemberInit
	:	IDENT ASSIGN! annotationMemberValue
		{#annotationMemberInit =
		 #([ANNOTATION_INIT_MEMBER, "AN_INIT_MEMBER"], #annotationMemberInit);}
	;

annotationMemberValue
	:	annotation
	|	conditionalExpression
		{#annotationMemberValue = #(#[EXPR,"EXPR"],#annotationMemberValue);}
	|	arrayInitializer
	;

// Definition of a Java class
classDefinition![AST modifiers]
	:	"class" IDENT
		// it _might_ have type paramaters
		tp:typeParameters
		// it _might_ have a superclass...
		sc:superClassClause
		// it might implement some interfaces...
		ic:implementsClause
		// now parse the body of the class
		cb:classBlock
		{#classDefinition = #(#[CLASS_DEF,"CLASS_DEF"],
							   modifiers,IDENT,tp,sc,ic,cb);}
	;

superClassClause!
	:	( "extends" classOrInterfaceType[false] )?
		{#superClassClause = #(#[EXTENDS_CLAUSE,"EXTENDS_CLAUSE"],
			#superClassClause);}
	;

// Definition of a Java Interface
interfaceDefinition![AST modifiers]
	:	"interface" IDENT
		// it _might_ have type paramaters
		tp:typeParameters
		// it might extend some other interfaces
		ie:interfaceExtends
		// now parse the body of the interface
		ib:interfaceBlock
		{#interfaceDefinition = #(#[INTERFACE_DEF,"INTERFACE_DEF"],
									modifiers,IDENT,tp,ie,ib);}
	;

typeParameters
{int currentLtLevel = 0;}
	:
		{currentLtLevel = ltCounter;}
		(
			lt:LT^	{ ltCounter++; #lt.setType(TYPE_PARAMS); }
			typeParameter (COMMA! typeParameter)*
			(typeArgumentsEnd!)?
		)
		// make sure we have gobbled up enough '>' characters
		// if we are at the "top level" of nested typeArgument productions
		{(currentLtLevel != 0) || ltCounter == currentLtLevel}?
	|	{#typeParameters = #(#[TYPE_PARAMS,"TYPE_PARAMS"], #typeParameters);}
	;

typeParameter
	:	IDENT
		(   // I'm pretty sure Antlr generates the right thing here:
			options{generateAmbigWarnings=false;}:
			"extends" classOrInterfaceType[true]
			(BAND! classOrInterfaceType[true])*
		)?
	;

// This is the body of an interface.
interfaceBlock
	:	LCURLY!
			( interfaceField | SEMI! )*
		RCURLY!
		{#interfaceBlock = #([OBJBLOCK, "OBJBLOCK"], #interfaceBlock);}
	;

// This is the body of a class.  You can have fields and extra semicolons,
// That's about it (until you see what a field is...)
classBlock
	:	LCURLY!
			( classField | SEMI! )*
		RCURLY!
		{#classBlock = #([OBJBLOCK, "OBJBLOCK"], #classBlock);}
	;

// An interface can extend several other interfaces...
interfaceExtends
	:	(
		e:"extends"!
		classOrInterfaceType[false] ( COMMA! classOrInterfaceType[false] )*
		)?
		{#interfaceExtends = #(#[EXTENDS_CLAUSE,"EXTENDS_CLAUSE"],
							#interfaceExtends);}
	;

// A class can implement several interfaces...
implementsClause
	:	(
			i:"implements"! classOrInterfaceType[false]
							( COMMA! classOrInterfaceType[false] )*
		)?
		{#implementsClause = #(#[IMPLEMENTS_CLAUSE,"IMPLEMENTS_CLAUSE"],
								 #implementsClause);}
	;

// Fields that are type definitions.
protected
innerTypeDef![AST modifiers]
	: 	(	ed:enumDefinition[modifiers]        // inner enum
			{#innerTypeDef = #ed;}

		|	cd:classDefinition[modifiers]       // inner class
			{#innerTypeDef = #cd;}

		|	id:interfaceDefinition[modifiers]   // inner interface
			{#innerTypeDef = #id;}

		|	ad:annotationTypeDefinition[modifiers]   // inner annotation type
			{#innerTypeDef = #ad;}
		)
		;

protected
memberDef![AST modifiers, AST typeParams, boolean allowMethodBody]
	:
		// A generic method has the typeParameters before the return type.
		// This is not allowed for variable definitions, but this production
		// allows it; a semantic check could be used if you wanted.
		t:typeSpec[false]  // method or variable declaration(s)
		(	IDENT  // the name of the method

			// parse the formal parameter declarations.
			LPAREN! param:parameterDeclarationList RPAREN!

			rt:declaratorBrackets[#t]

			// get the list of exceptions that this method is
			// declared to throw
			(tc:throwsClause)?

			( SEMI | {allowMethodBody}? s2:compoundStatement )
			{#memberDef = #(#[METHOD_DEF,"METHOD_DEF"],
							 modifiers,
							 typeParams,
							 #(#[TYPE,"TYPE"],rt),
							 IDENT,
							 param,
							 tc,
							 s2);}
		|	v:variableDefinitions[modifiers,#t] SEMI
//			{#field = #(#[VARIABLE_DEF,"VARIABLE_DEF"], v);}
			{#memberDef = #v;} // omit tp here, as it is not legal anyway
		)
	;

// An interface can contain inner type definitions, methods and constant
// definitions. Generalizing the latter, memberDef allows member variables.
// To detect and prevent that, use a semantic check.
interfaceField!
	:
		mods:modifiers
		(	it:innerTypeDef[#mods]		// inner type definition
			{#interfaceField = #it;}
		|	tp:typeParameters md:memberDef[#mods, #tp, false]
			// method or variable definition
			{#interfaceField = #md;}
		)
	;

// Now the various things that can be defined inside a class...
classField!
	:	// method, constructor, or variable declaration
		mods:modifiers
		(	it:innerTypeDef[#mods]	// inner type definition
			{#classField = #it;}

		|	tp:typeParameters
			(	h:ctorHead s:constructorBody // constructor
				{#classField = #(#[CTOR_DEF,"CTOR_DEF"], mods, tp, h, s);}

			|	md:memberDef[#mods, #tp, true] // method or variable definition
				{#classField = #md;}
			)
		)

	// "static { ... }" class initializer
	|	"static" s3:compoundStatement
		{#classField = #(#[STATIC_INIT,"STATIC_INIT"], s3);}

	// "{ ... }" instance initializer
	|	s4:compoundStatement
		{#classField = #(#[INSTANCE_INIT,"INSTANCE_INIT"], s4);}
	;

constructorBody
	:	lc:LCURLY^ {#lc.setType(SLIST);}
			( options { greedy=true; } : explicitConstructorInvocation)?
			(statement)*
		RCURLY!
	;

/** Catch obvious constructor calls, but not the expr.super(...) calls */
explicitConstructorInvocation
	:	typeArguments
		(	"this"! lp1:LPAREN^ argList RPAREN! SEMI!
			{#lp1.setType(CTOR_CALL);}
		|	"super"! lp2:LPAREN^ argList RPAREN! SEMI!
			{#lp2.setType(SUPER_CTOR_CALL);}
		)
	;

variableDefinitions[AST mods, AST t]
	:	variableDeclarator[getASTFactory().dupTree(mods),
						   getASTFactory().dupList(t)]
		(	COMMA!
			variableDeclarator[getASTFactory().dupTree(mods),
							   getASTFactory().dupList(t)]
		)*
	;

/** Declaration of a variable.  This can be a class/instance variable,
 *   or a local variable in a method
 * It can also include possible initialization.
 */
variableDeclarator![AST mods, AST t]
	:	id:IDENT d:declaratorBrackets[t] v:varInitializer
		{#variableDeclarator = #(#[VARIABLE_DEF,"VARIABLE_DEF"],
								mods, #(#[TYPE,"TYPE"],d), id, v);}
	;

declaratorBrackets[AST typ]
	:	{#declaratorBrackets=typ;}
		(lb:LBRACK^ {#lb.setType(ARRAY_DECLARATOR);} RBRACK!)*
	;

varInitializer
	:	( ASSIGN^ initializer )?
	;

// This is an initializer used to set up an array.
arrayInitializer
	:	lc:LCURLY^ {#lc.setType(ARRAY_INIT);}
			(	initializer
				(
					// CONFLICT: does a COMMA after an initializer start a new
					//           initializer or start the option ',' at end?
					//           ANTLR generates proper code by matching
					//           the comma as soon as possible.
					options {
						warnWhenFollowAmbig = false;
					}
				:
					COMMA! initializer
				)*
			)?
			(COMMA!)?
		RCURLY!
	;


// The two "things" that can initialize an array element are an expression
//   and another (nested) array initializer.
initializer
	:	expression
	|	arrayInitializer
	;

// This is the header of a method.  It includes the name and parameters
//   for the method.
//   This also watches for a list of exception classes in a "throws" clause.
ctorHead
	:	IDENT  // the name of the method

		// parse the formal parameter declarations.
		LPAREN! parameterDeclarationList RPAREN!

		// get the list of exceptions that this method is declared to throw
		(throwsClause)?
	;

// This is a list of exception classes that the method is declared to throw
throwsClause
	:	"throws"^ identifier ( COMMA! identifier )*
	;


// A list of formal parameters
parameterDeclarationList
	:	( parameterDeclaration ( COMMA! parameterDeclaration )* )?
		{#parameterDeclarationList = #(#[PARAMETERS,"PARAMETERS"],
									#parameterDeclarationList);}
	;

// A formal parameter.
// The ellipsis is the support for varargs (JSR 201)
// This rule allows ellipsis on any parameter, not just the last (as specified
// by JSR 201), so a semantic check is needed for that.
parameterDeclaration!
	:	pm:parameterModifier t:typeSpec[false] ( el:ELLIPSIS )? id:IDENT
		pd:declaratorBrackets[#t]
		{#parameterDeclaration = #(#[PARAMETER_DEF,"PARAMETER_DEF"],
									pm, #([TYPE,"TYPE"],pd,el), id);}
	;

// Parameters can be final. And annotated. Or even both.
parameterModifier
	:	( "final" | annotation )*
		{#parameterModifier = #(#[MODIFIERS,"MODIFIERS"], #parameterModifier);}
	;

// Compound statement.  This is used in many contexts:
//   Inside a class definition prefixed with "static":
//      it is a class initializer
//   Inside a class definition without "static":
//      it is an instance initializer
//   As the body of a method
//   As a completely indepdent braced block of code inside a method
//      it starts a new scope for variable definitions

compoundStatement
	:	lc:LCURLY^ {#lc.setType(SLIST);}
			// include the (possibly-empty) list of statements
			(statement)*
		RCURLY!
	;


statement
	// A list of statements in curly braces -- start a new scope!
	:	compoundStatement

	// declarations are ambiguous with "ID DOT" relative to expression
	// statements.  Must backtrack to be sure.  Could use a semantic
	// predicate to test symbol table to see what the type was coming
	// up, but that's pretty hard without a symbol table ;)
	|	(declaration)=> declaration SEMI!

	// An expression statement.  This could be a method call,
	// assignment statement, or any other expression evaluated for
	// side-effects.
	|	expression SEMI!

	// class or enum definition
	|	m:modifiers! ( enumDefinition[#m] |	classDefinition[#m] )

	// Attach a label to the front of a statement
	|	IDENT c:COLON^ {#c.setType(LABELED_STAT);} statement

	// If-else statement
	|	"if"^ LPAREN! expression RPAREN! statement
		(
			// CONFLICT: the old "dangling-else" problem...
			//           ANTLR generates proper code matching
			//           as soon as possible.  Hush warning.
			options {
				warnWhenFollowAmbig = false;
			}
		:
			"else"! statement
		)?

	// For statement, with support for the enhanced variant (JSR 201)
	|	"for"^
			LPAREN!
			(
				( parameterDeclaration COLON ) =>
				parameterDeclaration COLON! expression
			|
				forInit SEMI!   // initializer
				forCond	SEMI!   // condition test
				forIter         // updater
			)
			RPAREN!
			statement                     // statement to loop over

	// While statement
	|	"while"^ LPAREN! expression RPAREN! statement

	// do-while statement
	|	"do"^ statement "while"! LPAREN! expression RPAREN! SEMI!

	// get out of a loop (or switch)
	|	"break"^ (IDENT)? SEMI!

	// do next iteration of a loop
	|	"continue"^ (IDENT)? SEMI!

	// Return an expression
	|	"return"^ (expression)? SEMI!

	// switch/case statement
	|	"switch"^ LPAREN! expression RPAREN! LCURLY!
			( casesGroup )*
		RCURLY!

	// exception try-catch block
	|	tryBlock

	// throw an exception
	|	"throw"^ expression SEMI!

	// synchronize a statement
	|	"synchronized"^ LPAREN! expression RPAREN! compoundStatement

	// asserts (this can be enabled/disabled via the lexer)
	|	ASSERT^ expression ( COLON! expression )? SEMI!

	// empty statement
	|	s:SEMI {#s.setType(EMPTY_STAT);}
	;

casesGroup
	:	(	// CONFLICT: to which case group do the statements bind?
			//           ANTLR generates proper code: it groups the
			//           many "case"/"default" labels together then
			//           follows them with the statements
			options {
				greedy = true;
			}
			:
			aCase
		)+
		caseSList
		{#casesGroup = #([CASE_GROUP, "CASE_GROUP"], #casesGroup);}
	;

aCase
	:	("case"^ expression | "default") COLON!
	;

caseSList
	:	(statement)*
		{#caseSList = #(#[SLIST,"SLIST"],#caseSList);}
	;

// The initializer for a for loop
forInit
		// if it looks like a declaration, it is
	:	(	(declaration)=> declaration
		// otherwise it could be an expression list...
		|	expressionList
		)?
		{#forInit = #(#[FOR_INIT,"FOR_INIT"],#forInit);}
	;

forCond
	:	(expression)?
		{#forCond = #(#[FOR_CONDITION,"FOR_CONDITION"],#forCond);}
	;

forIter
	:	(expressionList)?
		{#forIter = #(#[FOR_ITERATOR,"FOR_ITERATOR"],#forIter);}
	;

// an exception handler try/catch block
tryBlock
	:	"try"^ compoundStatement
		(handler)*
		( finallyClause )?
	;

finallyClause
	:	"finally"^ compoundStatement
	;

// an exception handler
handler
	:	"catch"^ LPAREN! parameterDeclaration RPAREN! compoundStatement
	;


// expressions
// Note that most of these expressions follow the pattern
//   thisLevelExpression :
//       nextHigherPrecedenceExpression
//           (OPERATOR nextHigherPrecedenceExpression)*
// which is a standard recursive definition for a parsing an expression.
// The operators in java have the following precedences:
//    lowest  (13)  = *= /= %= += -= <<= >>= >>>= &= ^= |=
//            (12)  ?:
//            (11)  ||
//            (10)  &&
//            ( 9)  |
//            ( 8)  ^
//            ( 7)  &
//            ( 6)  == !=
//            ( 5)  < <= > >=
//            ( 4)  << >>
//            ( 3)  +(binary) -(binary)
//            ( 2)  * / %
//            ( 1)  ++ -- +(unary) -(unary)  ~  !  (type)
//                  []   () (method call)  . (dot -- identifier qualification)
//                  new   ()  (explicit parenthesis)
//
// the last two are not usually on a precedence chart; I put them in
// to point out that new has a higher precedence than '.', so you
// can validy use
//     new Frame().show()
//
// Note that the above precedence levels map to the rules below...
// Once you have a precedence chart, writing the appropriate rules as below
//   is usually very straightfoward



// the mother of all expressions
expression
	:	assignmentExpression
		{#expression = #(#[EXPR,"EXPR"],#expression);}
	;


// This is a list of expressions.
expressionList
	:	expression (COMMA! expression)*
		{#expressionList = #(#[ELIST,"ELIST"], expressionList);}
	;


// assignment expression (level 13)
assignmentExpression
	:	conditionalExpression
		(	(	ASSIGN^
			|	PLUS_ASSIGN^
			|	MINUS_ASSIGN^
			|	STAR_ASSIGN^
			|	DIV_ASSIGN^
			|	MOD_ASSIGN^
			|	SR_ASSIGN^
			|	BSR_ASSIGN^
			|	SL_ASSIGN^
			|	BAND_ASSIGN^
			|	BXOR_ASSIGN^
			|	BOR_ASSIGN^
			)
			assignmentExpression
		)?
	;


// conditional test (level 12)
conditionalExpression
	:	logicalOrExpression
		( QUESTION^ assignmentExpression COLON! conditionalExpression )?
	;


// logical or (||)  (level 11)
logicalOrExpression
	:	logicalAndExpression (LOR^ logicalAndExpression)*
	;


// logical and (&&)  (level 10)
logicalAndExpression
	:	inclusiveOrExpression (LAND^ inclusiveOrExpression)*
	;


// bitwise or non-short-circuiting or (|)  (level 9)
inclusiveOrExpression
	:	exclusiveOrExpression (BOR^ exclusiveOrExpression)*
	;


// exclusive or (^)  (level 8)
exclusiveOrExpression
	:	andExpression (BXOR^ andExpression)*
	;


// bitwise or non-short-circuiting and (&)  (level 7)
andExpression
	:	equalityExpression (BAND^ equalityExpression)*
	;


// equality/inequality (==/!=) (level 6)
equalityExpression
	:	relationalExpression ((NOT_EQUAL^ | EQUAL^) relationalExpression)*
	;


// boolean relational expressions (level 5)
relationalExpression
	:	shiftExpression
		(	(	(	LT^
				|	GT^
				|	LE^
				|	GE^
				)
				shiftExpression
			)*
		|	"instanceof"^ typeSpec[true]
		)
	;


// bit shift expressions (level 4)
shiftExpression
	:	additiveExpression ((SL^ | SR^ | BSR^) additiveExpression)*
	;


// binary addition/subtraction (level 3)
additiveExpression
	:	multiplicativeExpression ((PLUS^ | MINUS^) multiplicativeExpression)*
	;


// multiplication/division/modulo (level 2)
multiplicativeExpression
	:	unaryExpression ((STAR^ | DIV^ | MOD^ ) unaryExpression)*
	;

unaryExpression
	:	INC^ unaryExpression
	|	DEC^ unaryExpression
	|	MINUS^ {#MINUS.setType(UNARY_MINUS);} unaryExpression
	|	PLUS^  {#PLUS.setType(UNARY_PLUS);} unaryExpression
	|	unaryExpressionNotPlusMinus
	;

unaryExpressionNotPlusMinus
	:	BNOT^ unaryExpression
	|	LNOT^ unaryExpression

		// use predicate to skip cases like: (int.class)
	|	(LPAREN builtInTypeSpec[true] RPAREN) =>
		lpb:LPAREN^ {#lpb.setType(TYPECAST);} builtInTypeSpec[true] RPAREN!
		unaryExpression

		// Have to backtrack to see if operator follows.  If no operator
		// follows, it's a typecast.  No semantic checking needed to parse.
		// if it _looks_ like a cast, it _is_ a cast; else it's a "(expr)"
	|	(LPAREN classTypeSpec[true] RPAREN unaryExpressionNotPlusMinus)=>
		lp:LPAREN^ {#lp.setType(TYPECAST);} classTypeSpec[true] RPAREN!
		unaryExpressionNotPlusMinus

	|	postfixExpression
	;

// qualified names, array expressions, method invocation, post inc/dec
postfixExpression
	:
	/*
	"this"! lp1:LPAREN^ argList RPAREN!
		{#lp1.setType(CTOR_CALL);}

	|	"super"! lp2:LPAREN^ argList RPAREN!
		{#lp2.setType(SUPER_CTOR_CALL);}
	|
	*/
		primaryExpression

		(
			/*
			options {
				// the use of postfixExpression in SUPER_CTOR_CALL adds DOT
				// to the lookahead set, and gives loads of false non-det
				// warnings.
				// shut them off.
				generateAmbigWarnings=false;
			}
		:	*/
			DOT^ "this"

		|	DOT^ ta1:typeArguments!
			(	IDENT
				(	lp:LPAREN^ {#lp.setType(METHOD_CALL);}
					{astFactory.addASTChild(currentAST, #ta1);}
					argList
					RPAREN!
				)?
			|	"super"
				(	// (new Outer()).super()  (create enclosing instance)
					lp3:LPAREN^ {#lp3.setType(SUPER_CTOR_CALL);}
					{astFactory.addASTChild(currentAST, #ta1);}
					argList
					RPAREN!
				|	DOT^ ta2:typeArguments! IDENT
					(	lps:LPAREN^ {#lps.setType(METHOD_CALL);}
						{astFactory.addASTChild(currentAST, #ta2);}
						argList
						RPAREN!
					)?
				)
			)
		|	DOT^ newExpression
		|	lb:LBRACK^ {#lb.setType(INDEX_OP);} expression RBRACK!
		)*

		(	// possibly add on a post-increment or post-decrement.
			// allows INC/DEC on too much, but semantics can check
			in:INC^ {#in.setType(POST_INC);}
	 	|	de:DEC^ {#de.setType(POST_DEC);}
		)?
 	;

// the basic element of an expression
primaryExpression
	:	identPrimary ( options {greedy=true;} : DOT^ "class" )?
	|	constant
	|	"true"
	|	"false"
	|	"null"
	|	newExpression
	|	"this"
	|	"super"
	|	LPAREN! assignmentExpression RPAREN!
		// look for int.class and int[].class
	|	builtInType
		( lbt:LBRACK^ {#lbt.setType(ARRAY_DECLARATOR);} RBRACK! )*
		DOT^ "class"
	;

/** Match a, a.b.c refs, a.b.c(...) refs, a.b.c[], a.b.c[].class,
 *  and a.b.c.class refs.  Also this(...) and super(...).  Match
 *  this or super.
 */
identPrimary
	:	ta1:typeArguments!
		IDENT
		// Further proof that java designers should lay off the drugs:
		// Syntax for method invocation with type arguments is
		//   <String> foo ("bla")  instead of  foo <String> ("bla")
		(
			options {
				// .ident could match here or in postfixExpression.
				// We do want to match here.  Turn off warning.
				greedy=true;
				// This turns the ambiguity warning of the second alternative
				// off. See below. (The "false" predicate makes it non-issue)
				warnWhenFollowAmbig=false;
			}
			// bah, great, we have a new nondeterminism because of those
			// stupid typeArguments... only a syntactic predicate will help...
			// The problem is that this loop here conflicts with
			//  DOT typeArguments "super"  in postfixExpression (k=2)
			// A proper solution would require a lot of refactoring...
		:	(DOT typeArguments IDENT) =>
				DOT^ ta2:typeArguments! IDENT
		|	{false}?	// FIXME: this is very ugly but it seems to work...
						// this will also produce an ANTLR warning!
				// Unfortunately a syntactic predicate can only select one of
				// multiple alternatives on the same level, not break out of
				// an enclosing loop, which is why this ugly hack (a fake
				// empty alternative with always-false semantic predicate)
				// is necessary.
		)*
		(
			options {
				// ARRAY_DECLARATOR here conflicts with INDEX_OP in
				// postfixExpression on LBRACK RBRACK.
				// We want to match [] here, so greedy.  This overcomes
				// limitation of linear approximate lookahead.
				greedy=true;
			}
		:	(	lp:LPAREN^ {#lp.setType(METHOD_CALL);}
				// if the input is valid, only the last IDENT may
				// have preceding typeArguments... rather hacky, this is...
				{if (#ta2 != null) astFactory.addASTChild(currentAST, #ta2);}
				{if (#ta2 == null) astFactory.addASTChild(currentAST, #ta1);}
				argList RPAREN!
			)
		|	( options {greedy=true;} :
				lbc:LBRACK^ {#lbc.setType(ARRAY_DECLARATOR);} RBRACK!
			)+
		)?
	;

/** object instantiation.
 *  Trees are built as illustrated by the following input/tree pairs:
 *
 *  new T()
 *
 *  new
 *   |
 *   T --  ELIST
 *           |
 *          arg1 -- arg2 -- .. -- argn
 *
 *  new int[]
 *
 *  new
 *   |
 *  int -- ARRAY_DECLARATOR
 *
 *  new int[] {1,2}
 *
 *  new
 *   |
 *  int -- ARRAY_DECLARATOR -- ARRAY_INIT
 *                                  |
 *                                EXPR -- EXPR
 *                                  |      |
 *                                  1      2
 *
 *  new int[3]
 *  new
 *   |
 *  int -- ARRAY_DECLARATOR
 *                |
 *              EXPR
 *                |
 *                3
 *
 *  new int[1][2]
 *
 *  new
 *   |
 *  int -- ARRAY_DECLARATOR
 *               |
 *         ARRAY_DECLARATOR -- EXPR
 *               |              |
 *             EXPR             1
 *               |
 *               2
 *
 * Note that the typeArguments are no error here, you can write things like:
 * 		Foo f = new <Bar> Foo <Baz> ();
 * The first type arguments are for the constructor, the second for the class.
 */
newExpression
	:	"new"^ typeArguments type
		(	LPAREN! argList RPAREN! (classBlock)?

			//java 1.1
			// Note: This will allow bad constructs like
			//    new int[4][][3] {exp,exp}.
			//    There needs to be a semantic check here...
			// to make sure:
			//   a) [ expr ] and [ ] are not mixed
			//   b) [ expr ] and an init are not used together

		|	newArrayDeclarator (arrayInitializer)?
		)
	;

argList
	:	(	expressionList
		|	/*nothing*/
			{#argList = #[ELIST,"ELIST"];}
		)
	;

newArrayDeclarator
	:	(
			// CONFLICT:
			// newExpression is a primaryExpression which can be
			// followed by an array index reference.  This is ok,
			// as the generated code will stay in this loop as
			// long as it sees an LBRACK (proper behavior)
			options {
				warnWhenFollowAmbig = false;
			}
		:
			lb:LBRACK^ {#lb.setType(ARRAY_DECLARATOR);}
				(expression)?
			RBRACK!
		)+
	;

constant
	:	NUM_INT
	|	CHAR_LITERAL
	|	STRING_LITERAL
	|	NUM_FLOAT
	|	NUM_LONG
	|	NUM_DOUBLE
	;


//----------------------------------------------------------------------------
// The Java scanner
//----------------------------------------------------------------------------
class JavaLexer extends Lexer;

options {
	exportVocab=Java;      // call the vocabulary "Java"
	testLiterals=false;    // don't automatically test for literals
	k=4;                   // four characters of lookahead
	charVocabulary='\u0003'..'\u7FFE';
	// without inlining some bitset tests, couldn't do unicode;
	// I need to make ANTLR generate smaller bitsets; see
	// bottom of JavaLexer.java
	codeGenBitsetTestThreshold=20;
}

{
	/** flag for enabling the "assert" keyword */
	private boolean assertEnabled = false;
	/** flag for enabling the "enum" keyword */
	private boolean enumEnabled = false;

	/** Enable the "assert" keyword */
	public void enableAssert() { assertEnabled = true; }
	/** Disable the "assert" keyword */
	public void disableAssert() { assertEnabled = false; }
	/** Query the "assert" keyword state */
	public boolean isAssertEnabled() { return assertEnabled; }
	/** Enable the "enum" keyword */
	public void enableEnum() { enumEnabled = true; }
	/** Disable the "enum" keyword */
	public void disableEnum() { enumEnabled = false; }
	/** Query the "enum" keyword state */
	public boolean isEnumEnabled() { return enumEnabled; }
}


// OPERATORS
QUESTION		:	'?'		;
LPAREN			:	'('		;
RPAREN			:	')'		;
LBRACK			:	'['		;
RBRACK			:	']'		;
LCURLY			:	'{'		;
RCURLY			:	'}'		;
COLON			:	':'		;
COMMA			:	','		;
//DOT			:	'.'		;
//ELLIPSIS		:	"..."	;
ASSIGN			:	'='		;
EQUAL			:	"=="	;
LNOT			:	'!'		;
BNOT			:	'~'		;
NOT_EQUAL		:	"!="	;
DIV				:	'/'		;
DIV_ASSIGN		:	"/="	;
PLUS			:	'+'		;
PLUS_ASSIGN		:	"+="	;
INC				:	"++"	;
MINUS			:	'-'		;
MINUS_ASSIGN	:	"-="	;
DEC				:	"--"	;
STAR			:	'*'		;
STAR_ASSIGN		:	"*="	;
MOD				:	'%'		;
MOD_ASSIGN		:	"%="	;
SR				:	">>"	;
SR_ASSIGN		:	">>="	;
BSR				:	">>>"	;
BSR_ASSIGN		:	">>>="	;
GE				:	">="	;
GT				:	">"		;
SL				:	"<<"	;
SL_ASSIGN		:	"<<="	;
LE				:	"<="	;
LT				:	'<'		;
BXOR			:	'^'		;
BXOR_ASSIGN		:	"^="	;
BOR				:	'|'		;
BOR_ASSIGN		:	"|="	;
LOR				:	"||"	;
BAND			:	'&'		;
BAND_ASSIGN		:	"&="	;
LAND			:	"&&"	;
SEMI			:	';'		;
AT				:	'@'		;


// Whitespace -- ignored
WS	:	(	' '
		|	'\t'
		|	'\f'
			// handle newlines
		|	(	options {generateAmbigWarnings=false;}
			:	"\r\n"  // Evil DOS
			|	'\r'    // Macintosh
			|	'\n'    // Unix (the right way)
			)
			{ newline(); }
		)+
		{ _ttype = Token.SKIP; }
	;

// Single-line comments
SL_COMMENT
	:	"//"
		(~('\n'|'\r'))* ('\n'|'\r'('\n')?)?
		{$setType(Token.SKIP); newline();}
	;

// multiple-line comments
ML_COMMENT
	:	"/*"
		(	/*	'\r' '\n' can be matched in one alternative or by matching
				'\r' in one iteration and '\n' in another.  I am trying to
				handle any flavor of newline that comes in, but the language
				that allows both "\r\n" and "\r" and "\n" to all be valid
				newline is ambiguous.  Consequently, the resulting grammar
				must be ambiguous.  I'm shutting this warning off.
			 */
			options {
				generateAmbigWarnings=false;
			}
		:
			{ LA(2)!='/' }? '*'
		|	'\r' '\n'		{newline();}
		|	'\r'			{newline();}
		|	'\n'			{newline();}
		|	~('*'|'\n'|'\r')
		)*
		"*/"
		{$setType(Token.SKIP);}
	;


// character literals
CHAR_LITERAL
	:	'\'' ( ESC | ~('\''|'\n'|'\r'|'\\') ) '\''
	;

// string literals
STRING_LITERAL
	:	'"' (ESC|~('"'|'\\'|'\n'|'\r'))* '"'
	;


// escape sequence -- note that this is protected; it can only be called
//   from another lexer rule -- it will not ever directly return a token to
//   the parser
// There are various ambiguities hushed in this rule.  The optional
// '0'...'9' digit matches should be matched here rather than letting
// them go back to STRING_LITERAL to be matched.  ANTLR does the
// right thing by matching immediately; hence, it's ok to shut off
// the FOLLOW ambig warnings.
protected
ESC
	:	'\\'
		(	'n'
		|	'r'
		|	't'
		|	'b'
		|	'f'
		|	'"'
		|	'\''
		|	'\\'
		|	('u')+ HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
		|	'0'..'3'
			(
				options {
					warnWhenFollowAmbig = false;
				}
			:	'0'..'7'
				(
					options {
						warnWhenFollowAmbig = false;
					}
				:	'0'..'7'
				)?
			)?
		|	'4'..'7'
			(
				options {
					warnWhenFollowAmbig = false;
				}
			:	'0'..'7'
			)?
		)
	;


// hexadecimal digit (again, note it's protected!)
protected
HEX_DIGIT
	:	('0'..'9'|'A'..'F'|'a'..'f')
	;


// an identifier.  Note that testLiterals is set to true!  This means
// that after we match the rule, we look in the literals table to see
// if it's a literal or really an identifer
IDENT
	options {testLiterals=true;}
	:	('a'..'z'|'A'..'Z'|'_'|'$') ('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
		{
			// check if "assert" keyword is enabled
			if (assertEnabled && "assert".equals($getText)) {
				$setType(ASSERT); // set token type for the rule in the parser
			}
			// check if "enum" keyword is enabled
			if (enumEnabled && "enum".equals($getText)) {
				$setType(ENUM); // set token type for the rule in the parser
			}
		}
	;


// a numeric literal
NUM_INT
	{boolean isDecimal=false; Token t=null;}
	:	'.' {_ttype = DOT;}
		(	'.' '.' {_ttype = ELLIPSIS;}
		|	(	('0'..'9')+ (EXPONENT)? (f1:FLOAT_SUFFIX {t=f1;})?
				{
				if (t != null && t.getText().toUpperCase().indexOf('F')>=0) {
					_ttype = NUM_FLOAT;
				}
				else {
					_ttype = NUM_DOUBLE; // assume double
				}
				}
			)?
		)

	|	(	'0' {isDecimal = true;} // special case for just '0'
			(	('x'|'X')
				(											// hex
					// the 'e'|'E' and float suffix stuff look
					// like hex digits, hence the (...)+ doesn't
					// know when to stop: ambig.  ANTLR resolves
					// it correctly by matching immediately.  It
					// is therefor ok to hush warning.
					options {
						warnWhenFollowAmbig=false;
					}
				:	HEX_DIGIT
				)+

			|	//float or double with leading zero
				(('0'..'9')+ ('.'|EXPONENT|FLOAT_SUFFIX)) => ('0'..'9')+

			|	('0'..'7')+									// octal
			)?
		|	('1'..'9') ('0'..'9')*  {isDecimal=true;}		// non-zero decimal
		)
		(	('l'|'L') { _ttype = NUM_LONG; }

		// only check to see if it's a float if looks like decimal so far
		|	{isDecimal}?
			(	'.' ('0'..'9')* (EXPONENT)? (f2:FLOAT_SUFFIX {t=f2;})?
			|	EXPONENT (f3:FLOAT_SUFFIX {t=f3;})?
			|	f4:FLOAT_SUFFIX {t=f4;}
			)
			{
			if (t != null && t.getText().toUpperCase() .indexOf('F') >= 0) {
				_ttype = NUM_FLOAT;
			}
			else {
				_ttype = NUM_DOUBLE; // assume double
			}
			}
		)?
	;


// a couple protected methods to assist in matching floating point numbers
protected
EXPONENT
	:	('e'|'E') ('+'|'-')? ('0'..'9')+
	;


protected
FLOAT_SUFFIX
	:	'f'|'F'|'d'|'D'
	;

-------------- next part --------------
A non-text attachment was scrubbed...
Name: java.tree.g
Type: text/x-c++src
Size: 6829 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040824/a03a692d/java.tree.bin
From lgc at mail1.jpl.nasa.gov  Tue Aug 24 16:46:21 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Re: yet another java 1.5 grammar
In-Reply-To: <cgga5t$1fv$1@sea.gmane.org>
Message-ID: <cggk0e+kl1o@eGroups.com>

Michael--

Please send Ter a copy so that he can put it in the "sharing" section
of antlr.org.

--Loring


--- In antlr-interest@yahoogroups.com, Michael Stahl
<gcpa-antlr-interest@m...> wrote:
> 
> [posting via gmane, hope that works and does not mess up attachments]
> 
> 
> hello!
> 
> this is the java 1.5 grammar which i thought i would post 3 weeks ago :)
> it took so long mostly because the proposed final draft version of JSR14
> came out on july 27 and that had some changes relative to the public
> review that came out in 2001 (!). i finally found the time for looking
> through the draft 3rd ed. of JLS that comes with JSR14-pfd last week.
> 
> oh, and thanks to michael studman, without your java15.g i would not
> even have noticed that! a superficial look at that yielded some weird
> WILDCARD thing which my grammar was missing...
> 
> since i need my grammar anyway (because i have a whitespace preserving
> grammar that is based on it and a serializing tree parser to match)
> i thought i might as well post it here despite java15.g being available.
> 
> also, i have some issues with java15.g, which are fixed in my grammar:
> 
> - the gtToReconcile stuff is way overkill. i replaced this with
>   a simple semantic predicate in typeArguments:
>         {inputState.guessing !=0 || ltCounter == currentLtLevel + 1}?
>   (oh, and thanks anyway, because i did not actually notice that
>   tree construction was broken in the first place)
> 
> - the typeArguments for method calls was missing in rule identPrimary:
>   i found adding this rather difficult because unfortunately there is a
>   conflict between the (DOT typeArgs IDENT)* loop in identPrimary
>   and (DOT typeArgs "super")* in rule postfixExpression which was not
>   there before (k=2). 
>   my first idea was to put a syntactic predicate in the loop, but
>   then antlr (2.7.4) gave me a warning that this does not make sense.
>   so what i came up with is this, and it is rather ugly:
>     (   (DOT typeArguments IDENT) =>
>                 DOT^ ta2:typeArguments! IDENT
>     |   {false}?        // FIXME: this is very ugly but it seems to
work...
>     )*
>   This generates two warnings, one of which i could disable, the other
>   says that empty alternative does not make any sense in a loop.
>   Obvious feature request for the antlr authors:
>   Would it be possible to handle the case of a syntactic predicate in a
>   loop with only one alternative differently in antlr, i.e. such that
>   not matching the syntax predicate means the loop is broken out of?
> 
> - newExpression is also missing typeArguments, but that is easy to fix
> 
> - the handling of the various different field types has a lot of
>   duplication. this is factored a bit better in my grammar.
> 
> a cool feature i have added is switchable keyword support. the
> "assert" and "enum" keywords can be dis/enabled at runtime. this is
> done via a string comparison in the lexer IDENT rule. i think this
> should not harm performance too much, but i have not benchmarked
> anything and do not particularly care anyway.
> 
> oh, and i have also cleaned up the formatting to always use tabs instead
> of the hideous tabs/spaces mix it was before.
> 
> my grammar is actually not much tested, but the whitespace preserving
> grammar based on it parses and serializes the entire aspectix cvs
> source tree (almost 3000 java 1.4 files) and also the sources of
> findbugs (which uses generics), as well as some custom written test
> cases.
> 
> btw, does anyone know of a sizable code base that uses java 1.5
> features and is licensed under some kind of free software license?
> i.e. not the sun jdk 1.5 source...
> 
> so, if anybody wants to comment on this or finds a bug, i'd be happy
> to hear from you.
> 
> michael stahl
> 
> PS: i hereby donate the code in the attached files, which was written
>     by myself except for the parts that are from the antlr distribution
>     and the parts taken from javaG.g by Matt Quail, to the public
>     domain.
> 
> /** Java 1.5/JSR14/JSR201/JSR175 Recognizer
>  *
>  * Run 'java Main [-showtree] directory-full-of-java-files'
>  *
>  * [The -showtree option pops up a Swing frame that shows
>  *  the AST constructed from the parser.]
>  *
>  * Run 'java Main <directory full of java files>'
>  *
>  * Contributing authors:
>  *		John Mitchell		johnm@n...
>  *		Terence Parr		parrt@m...
>  *		John Lilley			jlilley@e...
>  *		Scott Stanchfield	thetick@m...
>  *		Markus Mohnen       mohnen@i...
>  *      Peter Williams      pete.williams@s...
>  *      Allan Jacobs        Allan.Jacobs@e...
>  *      Steve Messick       messick@r...
>  *      John Pybus			john@p...
>  *
>  * Version 1.00 December 9, 1997 -- initial release
>  * Version 1.01 December 10, 1997
>  *		fixed bug in octal def (0..7 not 0..8)
>  * Version 1.10 August 1998 (parrt)
>  *		added tree construction
>  *		fixed definition of WS,comments for mac,pc,unix newlines
>  *		added unary plus
>  * Version 1.11 (Nov 20, 1998)
>  *		Added "shutup" option to turn off last ambig warning.
>  *		Fixed inner class def to allow named class defs as statements
>  *		synchronized requires compound not simple statement
>  *		add [] after builtInType DOT class in primaryExpression
>  *		"const" is reserved but not valid..removed from modifiers
>  * Version 1.12 (Feb 2, 1999)
>  *		Changed LITERAL_xxx to xxx in tree grammar.
>  *		Updated java.g to use tokens {...} now for 2.6.0 (new feature).
>  *
>  * Version 1.13 (Apr 23, 1999)
>  *		Didn't have (stat)? for else clause in tree parser.
>  *		Didn't gen ASTs for interface extends.  Updated tree parser too.
>  *		Updated to 2.6.0.
>  * Version 1.14 (Jun 20, 1999)
>  *		Allowed final/abstract on local classes.
>  *		Removed local interfaces from methods
>  *		Put instanceof precedence where it belongs...in relationalExpr
>  *			It also had expr not type as arg; fixed it.
>  *		Missing ! on SEMI in classBlock
>  *		fixed: (expr) + "string" was parsed incorrectly (+ as unary plus).
>  *		fixed: didn't like Object[].class in parser or tree parser
>  * Version 1.15 (Jun 26, 1999)
>  *		Screwed up rule with instanceof in it. :(  Fixed.
>  *		Tree parser didn't like (expr).something; fixed.
>  *		Allowed multiple inheritance in tree grammar. oops.
>  * Version 1.16 (August 22, 1999)
>  *		Extending an interface built a wacky tree: had extra EXTENDS.
>  *		Tree grammar didn't allow multiple superinterfaces.
>  *		Tree grammar didn't allow empty var initializer: {}
>  * Version 1.17 (October 12, 1999)
>  *		ESC lexer rule allowed 399 max not 377 max.
>  *		java.tree.g didn't handle the expression of synchronized
>  *		statements.
>  * Version 1.18 (August 12, 2001)
>  *      	Terence updated to Java 2 Version 1.3 by
>  *		observing/combining work of Allan Jacobs and Steve
>  *		Messick.  Handles 1.3 src.  Summary:
>  *		o  primary didn't include boolean.class kind of thing
>  *      	o  constructor calls parsed explicitly now:
>  * 		   see explicitConstructorInvocation
>  *		o  add strictfp modifier
>  *      	o  missing objBlock after new expression in tree grammar
>  *		o  merged local class definition alternatives, moved after
declaration
>  *		o  fixed problem with ClassName.super.field
>  *      	o  reordered some alternatives to make things more efficient
>  *		o  long and double constants were not differentiated from int/float
>  *		o  whitespace rule was inefficient: matched only one char
>  *		o  add an examples directory with some nasty 1.3 cases
>  *		o  made Main.java use buffered IO and a Reader for Unicode support
>  *		o  supports UNICODE?
>  *		   Using Unicode charVocabulay makes code file big, but only
>  *		   in the bitsets at the end. I need to make ANTLR generate
>  *		   unicode bitsets more efficiently.
>  * Version 1.19 (April 25, 2002)
>  *		Terence added in nice fixes by John Pybus concerning floating
>  *		constants and problems with super() calls.  John did a nice
>  *		reorg of the primary/postfix expression stuff to read better
>  *		and makes f.g.super() parse properly (it was METHOD_CALL not
>  *		a SUPER_CTOR_CALL).  Also:
>  *
>  *		o  "finally" clause was a root...made it a child of "try"
>  *		o  Added stuff for asserts too for Java 1.4, but *commented out*
>  *		   as it is not backward compatible.
>  *
>  * Version 1.20 (October 27, 2002)
>  *
>  *      Terence ended up reorging John Pybus' stuff to
>  *      remove some nondeterminisms and some syntactic predicates.
>  *      Note that the grammar is stricter now; e.g., this(...) must
>  *	be the first statement.
>  *
>  *      Trinary ?: operator wasn't working as array name:
>  *          (isBig ? bigDigits : digits)[i];
>  *
>  *      Checked parser/tree parser on source for
>  *          Resin-2.0.5, jive-2.1.1, jdk 1.3.1, Lucene, antlr 2.7.2a4,
>  *	    and the 110k-line jGuru server source.
>  *
>  * Version 1.21 (October 17, 2003)
>  *	Fixed lots of problems including:
>  *	Ray Waldin: add typeDefinition to interfaceBlock in java.tree.g
>  *  He found a problem/fix with floating point that start with 0
>  *  Ray also fixed problem that (int.class) was not recognized.
>  *  Thorsten van Ellen noticed that \n are allowed incorrectly in
strings.
>  *  TJP fixed CHAR_LITERAL analogously.
>  *
>  * Version 1.22 (April 14, 2004)
>  *  Changed vocab to be ..\uFFFE to avoid -1 char. removed dummy
VOCAB rule.
>  *
>  * Version 1.21.2 (March, 2003)
>  *      Changes by Matt Quail to support generics (as per JDK1.5/JSR14)
>  *      Notes:
>  *      o We only allow the "extends" keyword and not the "implements"
>  *        keyword, since thats what JSR14 seems to imply.
>  *      o Thanks to Monty Zukowski for his help on the antlr-interest
>  *        mail list.
>  *      o Thanks to Alan Eliasen for testing the grammar over his
>  *        Fink source base
>  *
>  * Version 1.22+assert+JSR14 (2004-06-10)
>  *      Merged ANTLR version 1.22 with javaG.g version 1.21.2 and added
>  *      the ability to enable the "assert" keyword at runtime via
the lexer.
>  *      Also made changes to generics rules for a saner AST creation.
>  *
>  * Version 1.22+assert+JSR14+JSR201 (2004-06-12)
>  *      Added support for enums, varargs, enhanced for loop, and
import static
>  *
>  * Version 1.22+assert+JSR14+JSR201+JSR175 (2004-06-14)
>  *      Added support for metadata (JSR 175). Refactored the field
rule into
>  *      classField and interfaceField.
>  *
>  * Version 1.22+assert+JSR14+JSR201+JSR175+AST (2004-07-02)
>  *      Various changes to improve AST generation; also made the
tree parser
>  *      recognize all the fancy new stuff. Added the ability to
enable the
>  *      "enum" keyword at runtime (just like "assert").
>  *
>  * Version 1.22+assert+JSR14+JSR201+JSR175+AST+fixes (2004-08-17)
>  *      Bug fixes and support for wildcard type arguments and
constructor
>  *      type parameters (new in final draft of JSR 14). Formatting
cleanup.
>  *
>  * This grammar is in the PUBLIC DOMAIN
>  */
> class JavaRecognizer extends Parser;
> options {
> 	k = 2;                           // two token lookahead
> 	exportVocab=Java;                // Call its vocabulary "Java"
> 	codeGenMakeSwitchThreshold = 2;  // Some optimizations
> 	codeGenBitsetTestThreshold = 3;
> 	defaultErrorHandler = false;     // Don't generate parser error
handlers
> 	buildAST = true;
> }
> 
> tokens {
> 	BLOCK; MODIFIERS; OBJBLOCK; SLIST; CTOR_DEF; METHOD_DEF; VARIABLE_DEF;
> 	INSTANCE_INIT; STATIC_INIT; TYPE; CLASS_DEF; INTERFACE_DEF;
> 	PACKAGE_DEF; ARRAY_DECLARATOR; EXTENDS_CLAUSE; IMPLEMENTS_CLAUSE;
> 	PARAMETERS; PARAMETER_DEF; LABELED_STAT; TYPECAST; INDEX_OP;
> 	POST_INC; POST_DEC; METHOD_CALL; EXPR; ARRAY_INIT;
> 	IMPORT; UNARY_MINUS; UNARY_PLUS; CASE_GROUP; ELIST; FOR_INIT;
FOR_CONDITION;
> 	FOR_ITERATOR; EMPTY_STAT; FINAL="final"; ABSTRACT="abstract";
> 	STRICTFP="strictfp"; SUPER_CTOR_CALL; CTOR_CALL;
> 	ASSERT; TYPE_ARGS; TYPE_ARGS_END; TYPE_PARAMS; ENUM; ENUM_DEF;
ENUM_CONST;
> 	ANNOTATION_DEF; ANNOTATION_MEMBER_DEF; ANNOTATION; ANNOTATIONS;
> 	ANNOTATION_INIT_EMPTY; ANNOTATION_INIT_VALUE; ANNOTATION_INIT_LIST;
> 	ANNOTATION_INIT_MEMBER; WILDCARD;
> }
> 
> {
>     /**
>      * Counts the number of LT seen in the typeArguments production.
>      * It is used in semantic predicates to ensure we have seen
>      * enough closing '>' characters; which actually may have been
>      * either GT, SR or BSR tokens.
>      */
>     private int ltCounter = 0;
> }
> 
> // Compilation Unit: In Java, this is a single file.  This is the start
> //   rule for this parser
> compilationUnit
> 	:	// A compilation unit starts with an optional package definition
> 		// Metadata makes a mess of things: even package definitions can be
> 		// annotated, although _only_ in one file (not enforced here ;))
> 		(	( annotations "package" ) => packageDefinition
> 		|	/* nothing */
> 		)
> 
> 		// Next we have a series of zero or more import statements
> 		( importDefinition )*
> 
> 		// Wrapping things up with any number of class or interface
> 		//    definitions
> 		( typeDefinition )*
> 
> 		EOF!
> 	;
> 
> 
> // Package statement: "package" followed by an identifier.
> packageDefinition
> 	options {defaultErrorHandler = true;} // let ANTLR handle errors
> 	:	annotations p:"package"^ {#p.setType(PACKAGE_DEF);} identifier SEMI!
> 	;
> 
> 
> // Import statement: import followed by a package or class name
> // JSR 201 allows the optional "static" keyword
> importDefinition
> 	options {defaultErrorHandler = true;}
> 	:	i:"import"^ {#i.setType(IMPORT);} ("static")? identifierStar SEMI!
> 	;
> 
> // A type definition in a file is either a class, interface,
enumeration or
> // annotation type definition.
> typeDefinition
> 	options {defaultErrorHandler = true;}
> 	:	m:modifiers!
> 		( classDefinition[#m]
> 		| enumDefinition[#m]
> 		| interfaceDefinition[#m]
> 		| annotationTypeDefinition[#m]
> 		)
> 	|	SEMI!
> 	;
> 
> /** A declaration is the creation of a reference or primitive-type
variable
>  *  Create a separate Type/Var tree for each var in the var list.
>  */
> declaration!
> 	:	m:modifiers t:typeSpec[false] v:variableDefinitions[#m,#t]
> 		{#declaration = #v;}
> 	;
> 
> // A type specification is a type name with possible brackets afterwards
> //   (which would make it an array type).
> typeSpec[boolean addImagNode]
> 	: classTypeSpec[addImagNode]
> 	| builtInTypeSpec[addImagNode]
> 	;
> 
> // built in types are not reference types, everything else is
> referenceTypeSpec[boolean addImagNode]
> 	: classTypeSpec[addImagNode]
> 	| arrayTypeSpec[addImagNode]
> 	;
> 
> // A class type specification is a class type with either:
> // - possible brackets afterwards
> //   (which would make it an array type).
> // - generic type arguments after
> classTypeSpec[boolean addImagNode]
> 	:	classOrInterfaceType[false]
> 		(options{greedy=true;}: // match as many as possible
> 			lb:LBRACK^ {#lb.setType(ARRAY_DECLARATOR);} RBRACK!
> 		)*
> 		{
> 			if ( addImagNode ) {
> 				#classTypeSpec = #(#[TYPE,"TYPE"], #classTypeSpec);
> 			}
> 		}
> 	;
> 
> classOrInterfaceType[boolean addImagNode]
> 	:	IDENT typeArguments
> 		(options{greedy=true;}: // match as many as possible
> 			DOT^
> 			IDENT typeArguments
> 		)*
> 		{
> 			if ( addImagNode ) {
> 				#classOrInterfaceType = #(#[TYPE,"TYPE"],
> 					#classOrInterfaceType);
> 			}
> 		}
> 	;
> 
> typeArguments
> {int currentLtLevel = 0;}
> 	:
> 		{currentLtLevel = ltCounter;}
> 		(
> 			lt:LT^	{ ltCounter++; #lt.setType(TYPE_ARGS); }
> 			typeArgument
> 			(options{greedy=true;}: // match as many as possible
> 				// The second test is needed to construct trees properly
> 				// in the case when we have ">>" or ">>>" tokens
> 				// (test case: "var<O1<I1<M1>>, O2<I2>> a;"
> 				// The first test is needed because otherwise
> 				// stuff breaks when guessing (e.g. declaration)
> 				// because semantic actions are not executed and the
> 				// second test would always fail (trees are not constructed
> 				// while guessing, so no problem there).
> 				{inputState.guessing !=0 || ltCounter == currentLtLevel + 1}?
> 					COMMA! typeArgument
> 			)*
> 
> 			(   // turn warning off since Antlr generates the right code,
> 				// plus we have our semantic predicate below
> 				options{generateAmbigWarnings=false;}:
> 				typeArgumentsEnd!
> 			)?
> 		)
> 		// make sure we have gobbled up enough '>' characters
> 		// if we are at the "top level" of nested typeArgument productions
> 		{(currentLtLevel != 0) || ltCounter == currentLtLevel}?
> 	|	{#typeArguments = #(#[TYPE_ARGS,"TYPE_ARGS"], #typeArguments);}
> 	;
> 
> // either reference type or wildcard type with optional lower or
upper bound
> typeArgument
> 	:	(	q:QUESTION^ {#q.setType(WILDCARD);}
> 			( // faux conflict on "extends" because typeArgsEnd may be empty
> 				options{greedy=true;}:
> 				"extends" referenceTypeSpec[true]
> 			|	"super" referenceTypeSpec[true]
> 			)?
> 		)
> 	|	referenceTypeSpec[true]
> 	;
> 
> // this gobbles up *some* amount of '>' characters, and counts how many
> // it gobbled.
> protected
> typeArgumentsEnd
> 	:	(	GT {ltCounter-=1;}
> 		|	SR {ltCounter-=2;}
> 		|	BSR {ltCounter-=3;}
> 		)
> 		{ #typeArgumentsEnd.setType(TYPE_ARGS_END); }
> 	;
> 
> // A builtin type specification is a builtin type with possible brackets
> // afterwards (which would make it an array type).
> builtInTypeSpec[boolean addImagNode]
> 	:	builtInType
> 		(options{greedy=true;}: // match as many as possible
> 			lb:LBRACK^ {#lb.setType(ARRAY_DECLARATOR);} RBRACK!
> 		)*
> 		{
> 			if ( addImagNode ) {
> 				#builtInTypeSpec = #(#[TYPE,"TYPE"], #builtInTypeSpec);
> 			}
> 		}
> 	;
> 
> // An array type specification is a builtin type with brackets
afterwards
> arrayTypeSpec[boolean addImagNode]
> 	:	builtInType
> 		(options{greedy=true;}: // match as many as possible
> 			lb:LBRACK^ {#lb.setType(ARRAY_DECLARATOR);} RBRACK!
> 		)+
> 		{
> 			if ( addImagNode ) {
> 				#arrayTypeSpec = #(#[TYPE,"TYPE"], #arrayTypeSpec);
> 			}
> 		}
> 	;
> 
> // A type name. which is either a (possibly qualified and parameterized)
> // class name or a primitive (builtin) type
> type
> 	:	classOrInterfaceType[false]
> 	|	builtInType
> 	;
> 
> // The primitive types.
> builtInType
> 	:	"void"
> 	|	"boolean"
> 	|	"byte"
> 	|	"char"
> 	|	"short"
> 	|	"int"
> 	|	"float"
> 	|	"long"
> 	|	"double"
> 	;
> 
> // A (possibly-qualified) java identifier.  We start with the first
IDENT
> //   and expand its name by adding dots and following IDENTS
> identifier
> 	:	IDENT  ( DOT^ IDENT )*
> 	;
> 
> identifierStar
> 	:	IDENT
> 		( DOT^ IDENT )*
> 		( DOT^ STAR  )?
> 	;
> 
> // A list of zero or more modifiers.  We could have used (modifier)* in
> //   place of a call to modifiers, but I thought it was a good idea
to keep
> //   this rule separate so they can easily be collected in a Vector if
> //   someone so desires
> // JSR 175 says that annotations are allowed everywhere modifiers are.
> // A nondeterminism warning is masked by the greedy option.
> modifiers
> 	:	( options{greedy=true;} : modifier | annotation )*
> 		{#modifiers = #([MODIFIERS, "MODIFIERS"], #modifiers);}
> 	;
> 
> // modifiers for Java classes, interfaces, class/instance vars and
methods
> modifier
> 	:	"private"
> 	|	"public"
> 	|	"protected"
> 	|	"static"
> 	|	"transient"
> 	|	"final"
> 	|	"abstract"
> 	|	"native"
> 	|	"threadsafe"
> 	|	"synchronized"
> //	|	"const"			// reserved word, but not valid
> 	|	"volatile"
> 	|	"strictfp"
> 	;
> 
> // Definition of an enumeration (JSR 201)
> enumDefinition![AST modifiers]
> 	:	ENUM IDENT
> 		// it might implement some interfaces...
> 		ic:implementsClause
> 		// now parse the body of the enum
> 		eb:enumBlock
> 		{#enumDefinition = #(#[ENUM_DEF,"ENUM_DEF"], modifiers,IDENT,ic,eb);}
> 	;
> 
> // This is the body of an enumeration.  It can contain a list of comma
> // separated identifiers (the enum values), and optionally,
seperated by a
> // semicolon, some declarations like in a class at the end.
> // The values of the enumeration may be annotated.
> enumBlock
> 	:	LCURLY! // next line has a nondeterminism warning without option
greedy
> 			( enumConst ( options {greedy=true;} : COMMA! enumConst )* )?
> 			( COMMA! )?	// optional comma at end of value list
> 			( SEMI! ( classField | SEMI! )* )?
> 		RCURLY!
> 		{#enumBlock = #([OBJBLOCK, "OBJBLOCK"], #enumBlock);}
> 	;
> 
> // Each enum value is in fact a class instance, and can be followed
by the
> // usual class declarations.
> enumConst
> 	:	annotations IDENT enumConstInit ( classBlock )?
> 		{#enumConst = #([ENUM_CONST, "ENUM_CONST"], #enumConst );}
> 	;
> 
> // This is really a constructor invocation.
> enumConstInit
> 	: ( lp:LPAREN^ argList RPAREN! { #lp.setType(CTOR_CALL); } )?
> 	;
> 
> // Definition of an annotation type (JSR 175)
> annotationTypeDefinition![AST modifiers]
> 	:	AT "interface" IDENT
> 		// now parse the body of the annotation type
> 		ab:annotationBlock
> 		{#annotationTypeDefinition = #(#[ANNOTATION_DEF,"ANNOTATION_DEF"],
> 									modifiers,IDENT,ab);}
> 	;
> 
> // This is the body of an annotation type. Only inner type
definitions and
> // members (which use a notation similar to methods) are allowed.
> annotationBlock
> 	:	LCURLY!
> 			( annotationField | SEMI! )*
> 		RCURLY!
> 		{#annotationBlock = #([OBJBLOCK, "OBJBLOCK"], #annotationBlock);}
> 	;
> 
> annotationField!
> 	:
> 		mods:modifiers
> 		(	it:innerTypeDef[#mods]		// inner type definition
> 			{#annotationField = #it;}
> 		|	ts:typeSpec[false]
> 			(	i:IDENT LPAREN RPAREN dv:defaultValue SEMI
> 				{#annotationField =
> 						#(#[ANNOTATION_MEMBER_DEF,"ANNOTATION_MEMBER_DEF"],
> 						mods, #(#[TYPE,"TYPE"],ts), i, dv); }
> 			|	v:variableDefinitions[#mods,#ts] SEMI
> 				{#annotationField = #v;}
> 			)
> 		)
> 	;
> 
> // Annotation members may have optional default values.
> defaultValue
> 	:	( "default"^ annotationMemberValue )?
> 	;
> 
> annotations
> 	:	( annotation )*
> 		{#annotations = #([ANNOTATIONS, "ANNOTATIONS"], #annotations);}
> 	;
> 
> annotation
> 	:	AT^ identifier annotationInit
> 		{#AT.setType(ANNOTATION);}
> 	;
> 
> // The initialization (list of assignments, single value, or nothing).
> annotationInit
> 	:	(	lp:LPAREN^
> 			(	annotationMemberInit
> 				( COMMA! annotationMemberInit )*
> 				{#lp.setType(ANNOTATION_INIT_LIST);}
> 			|	annotationMemberValue	{#lp.setType(ANNOTATION_INIT_VALUE);}
> 			)
> 			RPAREN!
> 		)
> 	|	{#annotationInit = #([ANNOTATION_INIT_EMPTY, "AN_INIT_EMPTY"]);}
> 	;
> 
> annotationMemberInit
> 	:	IDENT ASSIGN! annotationMemberValue
> 		{#annotationMemberInit =
> 		 #([ANNOTATION_INIT_MEMBER, "AN_INIT_MEMBER"],
#annotationMemberInit);}
> 	;
> 
> annotationMemberValue
> 	:	annotation
> 	|	conditionalExpression
> 		{#annotationMemberValue = #(#[EXPR,"EXPR"],#annotationMemberValue);}
> 	|	arrayInitializer
> 	;
> 
> // Definition of a Java class
> classDefinition![AST modifiers]
> 	:	"class" IDENT
> 		// it _might_ have type paramaters
> 		tp:typeParameters
> 		// it _might_ have a superclass...
> 		sc:superClassClause
> 		// it might implement some interfaces...
> 		ic:implementsClause
> 		// now parse the body of the class
> 		cb:classBlock
> 		{#classDefinition = #(#[CLASS_DEF,"CLASS_DEF"],
> 							   modifiers,IDENT,tp,sc,ic,cb);}
> 	;
> 
> superClassClause!
> 	:	( "extends" classOrInterfaceType[false] )?
> 		{#superClassClause = #(#[EXTENDS_CLAUSE,"EXTENDS_CLAUSE"],
> 			#superClassClause);}
> 	;
> 
> // Definition of a Java Interface
> interfaceDefinition![AST modifiers]
> 	:	"interface" IDENT
> 		// it _might_ have type paramaters
> 		tp:typeParameters
> 		// it might extend some other interfaces
> 		ie:interfaceExtends
> 		// now parse the body of the interface
> 		ib:interfaceBlock
> 		{#interfaceDefinition = #(#[INTERFACE_DEF,"INTERFACE_DEF"],
> 									modifiers,IDENT,tp,ie,ib);}
> 	;
> 
> typeParameters
> {int currentLtLevel = 0;}
> 	:
> 		{currentLtLevel = ltCounter;}
> 		(
> 			lt:LT^	{ ltCounter++; #lt.setType(TYPE_PARAMS); }
> 			typeParameter (COMMA! typeParameter)*
> 			(typeArgumentsEnd!)?
> 		)
> 		// make sure we have gobbled up enough '>' characters
> 		// if we are at the "top level" of nested typeArgument productions
> 		{(currentLtLevel != 0) || ltCounter == currentLtLevel}?
> 	|	{#typeParameters = #(#[TYPE_PARAMS,"TYPE_PARAMS"], #typeParameters);}
> 	;
> 
> typeParameter
> 	:	IDENT
> 		(   // I'm pretty sure Antlr generates the right thing here:
> 			options{generateAmbigWarnings=false;}:
> 			"extends" classOrInterfaceType[true]
> 			(BAND! classOrInterfaceType[true])*
> 		)?
> 	;
> 
> // This is the body of an interface.
> interfaceBlock
> 	:	LCURLY!
> 			( interfaceField | SEMI! )*
> 		RCURLY!
> 		{#interfaceBlock = #([OBJBLOCK, "OBJBLOCK"], #interfaceBlock);}
> 	;
> 
> // This is the body of a class.  You can have fields and extra
semicolons,
> // That's about it (until you see what a field is...)
> classBlock
> 	:	LCURLY!
> 			( classField | SEMI! )*
> 		RCURLY!
> 		{#classBlock = #([OBJBLOCK, "OBJBLOCK"], #classBlock);}
> 	;
> 
> // An interface can extend several other interfaces...
> interfaceExtends
> 	:	(
> 		e:"extends"!
> 		classOrInterfaceType[false] ( COMMA! classOrInterfaceType[false] )*
> 		)?
> 		{#interfaceExtends = #(#[EXTENDS_CLAUSE,"EXTENDS_CLAUSE"],
> 							#interfaceExtends);}
> 	;
> 
> // A class can implement several interfaces...
> implementsClause
> 	:	(
> 			i:"implements"! classOrInterfaceType[false]
> 							( COMMA! classOrInterfaceType[false] )*
> 		)?
> 		{#implementsClause = #(#[IMPLEMENTS_CLAUSE,"IMPLEMENTS_CLAUSE"],
> 								 #implementsClause);}
> 	;
> 
> // Fields that are type definitions.
> protected
> innerTypeDef![AST modifiers]
> 	: 	(	ed:enumDefinition[modifiers]        // inner enum
> 			{#innerTypeDef = #ed;}
> 
> 		|	cd:classDefinition[modifiers]       // inner class
> 			{#innerTypeDef = #cd;}
> 
> 		|	id:interfaceDefinition[modifiers]   // inner interface
> 			{#innerTypeDef = #id;}
> 
> 		|	ad:annotationTypeDefinition[modifiers]   // inner annotation type
> 			{#innerTypeDef = #ad;}
> 		)
> 		;
> 
> protected
> memberDef![AST modifiers, AST typeParams, boolean allowMethodBody]
> 	:
> 		// A generic method has the typeParameters before the return type.
> 		// This is not allowed for variable definitions, but this production
> 		// allows it; a semantic check could be used if you wanted.
> 		t:typeSpec[false]  // method or variable declaration(s)
> 		(	IDENT  // the name of the method
> 
> 			// parse the formal parameter declarations.
> 			LPAREN! param:parameterDeclarationList RPAREN!
> 
> 			rt:declaratorBrackets[#t]
> 
> 			// get the list of exceptions that this method is
> 			// declared to throw
> 			(tc:throwsClause)?
> 
> 			( SEMI | {allowMethodBody}? s2:compoundStatement )
> 			{#memberDef = #(#[METHOD_DEF,"METHOD_DEF"],
> 							 modifiers,
> 							 typeParams,
> 							 #(#[TYPE,"TYPE"],rt),
> 							 IDENT,
> 							 param,
> 							 tc,
> 							 s2);}
> 		|	v:variableDefinitions[modifiers,#t] SEMI
> //			{#field = #(#[VARIABLE_DEF,"VARIABLE_DEF"], v);}
> 			{#memberDef = #v;} // omit tp here, as it is not legal anyway
> 		)
> 	;
> 
> // An interface can contain inner type definitions, methods and constant
> // definitions. Generalizing the latter, memberDef allows member
variables.
> // To detect and prevent that, use a semantic check.
> interfaceField!
> 	:
> 		mods:modifiers
> 		(	it:innerTypeDef[#mods]		// inner type definition
> 			{#interfaceField = #it;}
> 		|	tp:typeParameters md:memberDef[#mods, #tp, false]
> 			// method or variable definition
> 			{#interfaceField = #md;}
> 		)
> 	;
> 
> // Now the various things that can be defined inside a class...
> classField!
> 	:	// method, constructor, or variable declaration
> 		mods:modifiers
> 		(	it:innerTypeDef[#mods]	// inner type definition
> 			{#classField = #it;}
> 
> 		|	tp:typeParameters
> 			(	h:ctorHead s:constructorBody // constructor
> 				{#classField = #(#[CTOR_DEF,"CTOR_DEF"], mods, tp, h, s);}
> 
> 			|	md:memberDef[#mods, #tp, true] // method or variable definition
> 				{#classField = #md;}
> 			)
> 		)
> 
> 	// "static { ... }" class initializer
> 	|	"static" s3:compoundStatement
> 		{#classField = #(#[STATIC_INIT,"STATIC_INIT"], s3);}
> 
> 	// "{ ... }" instance initializer
> 	|	s4:compoundStatement
> 		{#classField = #(#[INSTANCE_INIT,"INSTANCE_INIT"], s4);}
> 	;
> 
> constructorBody
> 	:	lc:LCURLY^ {#lc.setType(SLIST);}
> 			( options { greedy=true; } : explicitConstructorInvocation)?
> 			(statement)*
> 		RCURLY!
> 	;
> 
> /** Catch obvious constructor calls, but not the expr.super(...)
calls */
> explicitConstructorInvocation
> 	:	typeArguments
> 		(	"this"! lp1:LPAREN^ argList RPAREN! SEMI!
> 			{#lp1.setType(CTOR_CALL);}
> 		|	"super"! lp2:LPAREN^ argList RPAREN! SEMI!
> 			{#lp2.setType(SUPER_CTOR_CALL);}
> 		)
> 	;
> 
> variableDefinitions[AST mods, AST t]
> 	:	variableDeclarator[getASTFactory().dupTree(mods),
> 						   getASTFactory().dupList(t)]
> 		(	COMMA!
> 			variableDeclarator[getASTFactory().dupTree(mods),
> 							   getASTFactory().dupList(t)]
> 		)*
> 	;
> 
> /** Declaration of a variable.  This can be a class/instance variable,
>  *   or a local variable in a method
>  * It can also include possible initialization.
>  */
> variableDeclarator![AST mods, AST t]
> 	:	id:IDENT d:declaratorBrackets[t] v:varInitializer
> 		{#variableDeclarator = #(#[VARIABLE_DEF,"VARIABLE_DEF"],
> 								mods, #(#[TYPE,"TYPE"],d), id, v);}
> 	;
> 
> declaratorBrackets[AST typ]
> 	:	{#declaratorBrackets=typ;}
> 		(lb:LBRACK^ {#lb.setType(ARRAY_DECLARATOR);} RBRACK!)*
> 	;
> 
> varInitializer
> 	:	( ASSIGN^ initializer )?
> 	;
> 
> // This is an initializer used to set up an array.
> arrayInitializer
> 	:	lc:LCURLY^ {#lc.setType(ARRAY_INIT);}
> 			(	initializer
> 				(
> 					// CONFLICT: does a COMMA after an initializer start a new
> 					//           initializer or start the option ',' at end?
> 					//           ANTLR generates proper code by matching
> 					//           the comma as soon as possible.
> 					options {
> 						warnWhenFollowAmbig = false;
> 					}
> 				:
> 					COMMA! initializer
> 				)*
> 			)?
> 			(COMMA!)?
> 		RCURLY!
> 	;
> 
> 
> // The two "things" that can initialize an array element are an
expression
> //   and another (nested) array initializer.
> initializer
> 	:	expression
> 	|	arrayInitializer
> 	;
> 
> // This is the header of a method.  It includes the name and parameters
> //   for the method.
> //   This also watches for a list of exception classes in a "throws"
clause.
> ctorHead
> 	:	IDENT  // the name of the method
> 
> 		// parse the formal parameter declarations.
> 		LPAREN! parameterDeclarationList RPAREN!
> 
> 		// get the list of exceptions that this method is declared to throw
> 		(throwsClause)?
> 	;
> 
> // This is a list of exception classes that the method is declared
to throw
> throwsClause
> 	:	"throws"^ identifier ( COMMA! identifier )*
> 	;
> 
> 
> // A list of formal parameters
> parameterDeclarationList
> 	:	( parameterDeclaration ( COMMA! parameterDeclaration )* )?
> 		{#parameterDeclarationList = #(#[PARAMETERS,"PARAMETERS"],
> 									#parameterDeclarationList);}
> 	;
> 
> // A formal parameter.
> // The ellipsis is the support for varargs (JSR 201)
> // This rule allows ellipsis on any parameter, not just the last (as
specified
> // by JSR 201), so a semantic check is needed for that.
> parameterDeclaration!
> 	:	pm:parameterModifier t:typeSpec[false] ( el:ELLIPSIS )? id:IDENT
> 		pd:declaratorBrackets[#t]
> 		{#parameterDeclaration = #(#[PARAMETER_DEF,"PARAMETER_DEF"],
> 									pm, #([TYPE,"TYPE"],pd,el), id);}
> 	;
> 
> // Parameters can be final. And annotated. Or even both.
> parameterModifier
> 	:	( "final" | annotation )*
> 		{#parameterModifier = #(#[MODIFIERS,"MODIFIERS"],
#parameterModifier);}
> 	;
> 
> // Compound statement.  This is used in many contexts:
> //   Inside a class definition prefixed with "static":
> //      it is a class initializer
> //   Inside a class definition without "static":
> //      it is an instance initializer
> //   As the body of a method
> //   As a completely indepdent braced block of code inside a method
> //      it starts a new scope for variable definitions
> 
> compoundStatement
> 	:	lc:LCURLY^ {#lc.setType(SLIST);}
> 			// include the (possibly-empty) list of statements
> 			(statement)*
> 		RCURLY!
> 	;
> 
> 
> statement
> 	// A list of statements in curly braces -- start a new scope!
> 	:	compoundStatement
> 
> 	// declarations are ambiguous with "ID DOT" relative to expression
> 	// statements.  Must backtrack to be sure.  Could use a semantic
> 	// predicate to test symbol table to see what the type was coming
> 	// up, but that's pretty hard without a symbol table ;)
> 	|	(declaration)=> declaration SEMI!
> 
> 	// An expression statement.  This could be a method call,
> 	// assignment statement, or any other expression evaluated for
> 	// side-effects.
> 	|	expression SEMI!
> 
> 	// class or enum definition
> 	|	m:modifiers! ( enumDefinition[#m] |	classDefinition[#m] )
> 
> 	// Attach a label to the front of a statement
> 	|	IDENT c:COLON^ {#c.setType(LABELED_STAT);} statement
> 
> 	// If-else statement
> 	|	"if"^ LPAREN! expression RPAREN! statement
> 		(
> 			// CONFLICT: the old "dangling-else" problem...
> 			//           ANTLR generates proper code matching
> 			//           as soon as possible.  Hush warning.
> 			options {
> 				warnWhenFollowAmbig = false;
> 			}
> 		:
> 			"else"! statement
> 		)?
> 
> 	// For statement, with support for the enhanced variant (JSR 201)
> 	|	"for"^
> 			LPAREN!
> 			(
> 				( parameterDeclaration COLON ) =>
> 				parameterDeclaration COLON! expression
> 			|
> 				forInit SEMI!   // initializer
> 				forCond	SEMI!   // condition test
> 				forIter         // updater
> 			)
> 			RPAREN!
> 			statement                     // statement to loop over
> 
> 	// While statement
> 	|	"while"^ LPAREN! expression RPAREN! statement
> 
> 	// do-while statement
> 	|	"do"^ statement "while"! LPAREN! expression RPAREN! SEMI!
> 
> 	// get out of a loop (or switch)
> 	|	"break"^ (IDENT)? SEMI!
> 
> 	// do next iteration of a loop
> 	|	"continue"^ (IDENT)? SEMI!
> 
> 	// Return an expression
> 	|	"return"^ (expression)? SEMI!
> 
> 	// switch/case statement
> 	|	"switch"^ LPAREN! expression RPAREN! LCURLY!
> 			( casesGroup )*
> 		RCURLY!
> 
> 	// exception try-catch block
> 	|	tryBlock
> 
> 	// throw an exception
> 	|	"throw"^ expression SEMI!
> 
> 	// synchronize a statement
> 	|	"synchronized"^ LPAREN! expression RPAREN! compoundStatement
> 
> 	// asserts (this can be enabled/disabled via the lexer)
> 	|	ASSERT^ expression ( COLON! expression )? SEMI!
> 
> 	// empty statement
> 	|	s:SEMI {#s.setType(EMPTY_STAT);}
> 	;
> 
> casesGroup
> 	:	(	// CONFLICT: to which case group do the statements bind?
> 			//           ANTLR generates proper code: it groups the
> 			//           many "case"/"default" labels together then
> 			//           follows them with the statements
> 			options {
> 				greedy = true;
> 			}
> 			:
> 			aCase
> 		)+
> 		caseSList
> 		{#casesGroup = #([CASE_GROUP, "CASE_GROUP"], #casesGroup);}
> 	;
> 
> aCase
> 	:	("case"^ expression | "default") COLON!
> 	;
> 
> caseSList
> 	:	(statement)*
> 		{#caseSList = #(#[SLIST,"SLIST"],#caseSList);}
> 	;
> 
> // The initializer for a for loop
> forInit
> 		// if it looks like a declaration, it is
> 	:	(	(declaration)=> declaration
> 		// otherwise it could be an expression list...
> 		|	expressionList
> 		)?
> 		{#forInit = #(#[FOR_INIT,"FOR_INIT"],#forInit);}
> 	;
> 
> forCond
> 	:	(expression)?
> 		{#forCond = #(#[FOR_CONDITION,"FOR_CONDITION"],#forCond);}
> 	;
> 
> forIter
> 	:	(expressionList)?
> 		{#forIter = #(#[FOR_ITERATOR,"FOR_ITERATOR"],#forIter);}
> 	;
> 
> // an exception handler try/catch block
> tryBlock
> 	:	"try"^ compoundStatement
> 		(handler)*
> 		( finallyClause )?
> 	;
> 
> finallyClause
> 	:	"finally"^ compoundStatement
> 	;
> 
> // an exception handler
> handler
> 	:	"catch"^ LPAREN! parameterDeclaration RPAREN! compoundStatement
> 	;
> 
> 
> // expressions
> // Note that most of these expressions follow the pattern
> //   thisLevelExpression :
> //       nextHigherPrecedenceExpression
> //           (OPERATOR nextHigherPrecedenceExpression)*
> // which is a standard recursive definition for a parsing an expression.
> // The operators in java have the following precedences:
> //    lowest  (13)  = *= /= %= += -= <<= >>= >>>= &= ^= |=
> //            (12)  ?:
> //            (11)  ||
> //            (10)  &&
> //            ( 9)  |
> //            ( 8)  ^
> //            ( 7)  &
> //            ( 6)  == !=
> //            ( 5)  < <= > >=
> //            ( 4)  << >>
> //            ( 3)  +(binary) -(binary)
> //            ( 2)  * / %
> //            ( 1)  ++ -- +(unary) -(unary)  ~  !  (type)
> //                  []   () (method call)  . (dot -- identifier
qualification)
> //                  new   ()  (explicit parenthesis)
> //
> // the last two are not usually on a precedence chart; I put them in
> // to point out that new has a higher precedence than '.', so you
> // can validy use
> //     new Frame().show()
> //
> // Note that the above precedence levels map to the rules below...
> // Once you have a precedence chart, writing the appropriate rules
as below
> //   is usually very straightfoward
> 
> 
> 
> // the mother of all expressions
> expression
> 	:	assignmentExpression
> 		{#expression = #(#[EXPR,"EXPR"],#expression);}
> 	;
> 
> 
> // This is a list of expressions.
> expressionList
> 	:	expression (COMMA! expression)*
> 		{#expressionList = #(#[ELIST,"ELIST"], expressionList);}
> 	;
> 
> 
> // assignment expression (level 13)
> assignmentExpression
> 	:	conditionalExpression
> 		(	(	ASSIGN^
> 			|	PLUS_ASSIGN^
> 			|	MINUS_ASSIGN^
> 			|	STAR_ASSIGN^
> 			|	DIV_ASSIGN^
> 			|	MOD_ASSIGN^
> 			|	SR_ASSIGN^
> 			|	BSR_ASSIGN^
> 			|	SL_ASSIGN^
> 			|	BAND_ASSIGN^
> 			|	BXOR_ASSIGN^
> 			|	BOR_ASSIGN^
> 			)
> 			assignmentExpression
> 		)?
> 	;
> 
> 
> // conditional test (level 12)
> conditionalExpression
> 	:	logicalOrExpression
> 		( QUESTION^ assignmentExpression COLON! conditionalExpression )?
> 	;
> 
> 
> // logical or (||)  (level 11)
> logicalOrExpression
> 	:	logicalAndExpression (LOR^ logicalAndExpression)*
> 	;
> 
> 
> // logical and (&&)  (level 10)
> logicalAndExpression
> 	:	inclusiveOrExpression (LAND^ inclusiveOrExpression)*
> 	;
> 
> 
> // bitwise or non-short-circuiting or (|)  (level 9)
> inclusiveOrExpression
> 	:	exclusiveOrExpression (BOR^ exclusiveOrExpression)*
> 	;
> 
> 
> // exclusive or (^)  (level 8)
> exclusiveOrExpression
> 	:	andExpression (BXOR^ andExpression)*
> 	;
> 
> 
> // bitwise or non-short-circuiting and (&)  (level 7)
> andExpression
> 	:	equalityExpression (BAND^ equalityExpression)*
> 	;
> 
> 
> // equality/inequality (==/!=) (level 6)
> equalityExpression
> 	:	relationalExpression ((NOT_EQUAL^ | EQUAL^) relationalExpression)*
> 	;
> 
> 
> // boolean relational expressions (level 5)
> relationalExpression
> 	:	shiftExpression
> 		(	(	(	LT^
> 				|	GT^
> 				|	LE^
> 				|	GE^
> 				)
> 				shiftExpression
> 			)*
> 		|	"instanceof"^ typeSpec[true]
> 		)
> 	;
> 
> 
> // bit shift expressions (level 4)
> shiftExpression
> 	:	additiveExpression ((SL^ | SR^ | BSR^) additiveExpression)*
> 	;
> 
> 
> // binary addition/subtraction (level 3)
> additiveExpression
> 	:	multiplicativeExpression ((PLUS^ | MINUS^) multiplicativeExpression)*
> 	;
> 
> 
> // multiplication/division/modulo (level 2)
> multiplicativeExpression
> 	:	unaryExpression ((STAR^ | DIV^ | MOD^ ) unaryExpression)*
> 	;
> 
> unaryExpression
> 	:	INC^ unaryExpression
> 	|	DEC^ unaryExpression
> 	|	MINUS^ {#MINUS.setType(UNARY_MINUS);} unaryExpression
> 	|	PLUS^  {#PLUS.setType(UNARY_PLUS);} unaryExpression
> 	|	unaryExpressionNotPlusMinus
> 	;
> 
> unaryExpressionNotPlusMinus
> 	:	BNOT^ unaryExpression
> 	|	LNOT^ unaryExpression
> 
> 		// use predicate to skip cases like: (int.class)
> 	|	(LPAREN builtInTypeSpec[true] RPAREN) =>
> 		lpb:LPAREN^ {#lpb.setType(TYPECAST);} builtInTypeSpec[true] RPAREN!
> 		unaryExpression
> 
> 		// Have to backtrack to see if operator follows.  If no operator
> 		// follows, it's a typecast.  No semantic checking needed to parse.
> 		// if it _looks_ like a cast, it _is_ a cast; else it's a "(expr)"
> 	|	(LPAREN classTypeSpec[true] RPAREN unaryExpressionNotPlusMinus)=>
> 		lp:LPAREN^ {#lp.setType(TYPECAST);} classTypeSpec[true] RPAREN!
> 		unaryExpressionNotPlusMinus
> 
> 	|	postfixExpression
> 	;
> 
> // qualified names, array expressions, method invocation, post inc/dec
> postfixExpression
> 	:
> 	/*
> 	"this"! lp1:LPAREN^ argList RPAREN!
> 		{#lp1.setType(CTOR_CALL);}
> 
> 	|	"super"! lp2:LPAREN^ argList RPAREN!
> 		{#lp2.setType(SUPER_CTOR_CALL);}
> 	|
> 	*/
> 		primaryExpression
> 
> 		(
> 			/*
> 			options {
> 				// the use of postfixExpression in SUPER_CTOR_CALL adds DOT
> 				// to the lookahead set, and gives loads of false non-det
> 				// warnings.
> 				// shut them off.
> 				generateAmbigWarnings=false;
> 			}
> 		:	*/
> 			DOT^ "this"
> 
> 		|	DOT^ ta1:typeArguments!
> 			(	IDENT
> 				(	lp:LPAREN^ {#lp.setType(METHOD_CALL);}
> 					{astFactory.addASTChild(currentAST, #ta1);}
> 					argList
> 					RPAREN!
> 				)?
> 			|	"super"
> 				(	// (new Outer()).super()  (create enclosing instance)
> 					lp3:LPAREN^ {#lp3.setType(SUPER_CTOR_CALL);}
> 					{astFactory.addASTChild(currentAST, #ta1);}
> 					argList
> 					RPAREN!
> 				|	DOT^ ta2:typeArguments! IDENT
> 					(	lps:LPAREN^ {#lps.setType(METHOD_CALL);}
> 						{astFactory.addASTChild(currentAST, #ta2);}
> 						argList
> 						RPAREN!
> 					)?
> 				)
> 			)
> 		|	DOT^ newExpression
> 		|	lb:LBRACK^ {#lb.setType(INDEX_OP);} expression RBRACK!
> 		)*
> 
> 		(	// possibly add on a post-increment or post-decrement.
> 			// allows INC/DEC on too much, but semantics can check
> 			in:INC^ {#in.setType(POST_INC);}
> 	 	|	de:DEC^ {#de.setType(POST_DEC);}
> 		)?
>  	;
> 
> // the basic element of an expression
> primaryExpression
> 	:	identPrimary ( options {greedy=true;} : DOT^ "class" )?
> 	|	constant
> 	|	"true"
> 	|	"false"
> 	|	"null"
> 	|	newExpression
> 	|	"this"
> 	|	"super"
> 	|	LPAREN! assignmentExpression RPAREN!
> 		// look for int.class and int[].class
> 	|	builtInType
> 		( lbt:LBRACK^ {#lbt.setType(ARRAY_DECLARATOR);} RBRACK! )*
> 		DOT^ "class"
> 	;
> 
> /** Match a, a.b.c refs, a.b.c(...) refs, a.b.c[], a.b.c[].class,
>  *  and a.b.c.class refs.  Also this(...) and super(...).  Match
>  *  this or super.
>  */
> identPrimary
> 	:	ta1:typeArguments!
> 		IDENT
> 		// Further proof that java designers should lay off the drugs:
> 		// Syntax for method invocation with type arguments is
> 		//   <String> foo ("bla")  instead of  foo <String> ("bla")
> 		(
> 			options {
> 				// .ident could match here or in postfixExpression.
> 				// We do want to match here.  Turn off warning.
> 				greedy=true;
> 				// This turns the ambiguity warning of the second alternative
> 				// off. See below. (The "false" predicate makes it non-issue)
> 				warnWhenFollowAmbig=false;
> 			}
> 			// bah, great, we have a new nondeterminism because of those
> 			// stupid typeArguments... only a syntactic predicate will help...
> 			// The problem is that this loop here conflicts with
> 			//  DOT typeArguments "super"  in postfixExpression (k=2)
> 			// A proper solution would require a lot of refactoring...
> 		:	(DOT typeArguments IDENT) =>
> 				DOT^ ta2:typeArguments! IDENT
> 		|	{false}?	// FIXME: this is very ugly but it seems to work...
> 						// this will also produce an ANTLR warning!
> 				// Unfortunately a syntactic predicate can only select one of
> 				// multiple alternatives on the same level, not break out of
> 				// an enclosing loop, which is why this ugly hack (a fake
> 				// empty alternative with always-false semantic predicate)
> 				// is necessary.
> 		)*
> 		(
> 			options {
> 				// ARRAY_DECLARATOR here conflicts with INDEX_OP in
> 				// postfixExpression on LBRACK RBRACK.
> 				// We want to match [] here, so greedy.  This overcomes
> 				// limitation of linear approximate lookahead.
> 				greedy=true;
> 			}
> 		:	(	lp:LPAREN^ {#lp.setType(METHOD_CALL);}
> 				// if the input is valid, only the last IDENT may
> 				// have preceding typeArguments... rather hacky, this is...
> 				{if (#ta2 != null) astFactory.addASTChild(currentAST, #ta2);}
> 				{if (#ta2 == null) astFactory.addASTChild(currentAST, #ta1);}
> 				argList RPAREN!
> 			)
> 		|	( options {greedy=true;} :
> 				lbc:LBRACK^ {#lbc.setType(ARRAY_DECLARATOR);} RBRACK!
> 			)+
> 		)?
> 	;
> 
> /** object instantiation.
>  *  Trees are built as illustrated by the following input/tree pairs:
>  *
>  *  new T()
>  *
>  *  new
>  *   |
>  *   T --  ELIST
>  *           |
>  *          arg1 -- arg2 -- .. -- argn
>  *
>  *  new int[]
>  *
>  *  new
>  *   |
>  *  int -- ARRAY_DECLARATOR
>  *
>  *  new int[] {1,2}
>  *
>  *  new
>  *   |
>  *  int -- ARRAY_DECLARATOR -- ARRAY_INIT
>  *                                  |
>  *                                EXPR -- EXPR
>  *                                  |      |
>  *                                  1      2
>  *
>  *  new int[3]
>  *  new
>  *   |
>  *  int -- ARRAY_DECLARATOR
>  *                |
>  *              EXPR
>  *                |
>  *                3
>  *
>  *  new int[1][2]
>  *
>  *  new
>  *   |
>  *  int -- ARRAY_DECLARATOR
>  *               |
>  *         ARRAY_DECLARATOR -- EXPR
>  *               |              |
>  *             EXPR             1
>  *               |
>  *               2
>  *
>  * Note that the typeArguments are no error here, you can write
things like:
>  * 		Foo f = new <Bar> Foo <Baz> ();
>  * The first type arguments are for the constructor, the second for
the class.
>  */
> newExpression
> 	:	"new"^ typeArguments type
> 		(	LPAREN! argList RPAREN! (classBlock)?
> 
> 			//java 1.1
> 			// Note: This will allow bad constructs like
> 			//    new int[4][][3] {exp,exp}.
> 			//    There needs to be a semantic check here...
> 			// to make sure:
> 			//   a) [ expr ] and [ ] are not mixed
> 			//   b) [ expr ] and an init are not used together
> 
> 		|	newArrayDeclarator (arrayInitializer)?
> 		)
> 	;
> 
> argList
> 	:	(	expressionList
> 		|	/*nothing*/
> 			{#argList = #[ELIST,"ELIST"];}
> 		)
> 	;
> 
> newArrayDeclarator
> 	:	(
> 			// CONFLICT:
> 			// newExpression is a primaryExpression which can be
> 			// followed by an array index reference.  This is ok,
> 			// as the generated code will stay in this loop as
> 			// long as it sees an LBRACK (proper behavior)
> 			options {
> 				warnWhenFollowAmbig = false;
> 			}
> 		:
> 			lb:LBRACK^ {#lb.setType(ARRAY_DECLARATOR);}
> 				(expression)?
> 			RBRACK!
> 		)+
> 	;
> 
> constant
> 	:	NUM_INT
> 	|	CHAR_LITERAL
> 	|	STRING_LITERAL
> 	|	NUM_FLOAT
> 	|	NUM_LONG
> 	|	NUM_DOUBLE
> 	;
> 
> 
>
//----------------------------------------------------------------------------
> // The Java scanner
>
//----------------------------------------------------------------------------
> class JavaLexer extends Lexer;
> 
> options {
> 	exportVocab=Java;      // call the vocabulary "Java"
> 	testLiterals=false;    // don't automatically test for literals
> 	k=4;                   // four characters of lookahead
> 	charVocabulary='\u0003'..'\u7FFE';
> 	// without inlining some bitset tests, couldn't do unicode;
> 	// I need to make ANTLR generate smaller bitsets; see
> 	// bottom of JavaLexer.java
> 	codeGenBitsetTestThreshold=20;
> }
> 
> {
> 	/** flag for enabling the "assert" keyword */
> 	private boolean assertEnabled = false;
> 	/** flag for enabling the "enum" keyword */
> 	private boolean enumEnabled = false;
> 
> 	/** Enable the "assert" keyword */
> 	public void enableAssert() { assertEnabled = true; }
> 	/** Disable the "assert" keyword */
> 	public void disableAssert() { assertEnabled = false; }
> 	/** Query the "assert" keyword state */
> 	public boolean isAssertEnabled() { return assertEnabled; }
> 	/** Enable the "enum" keyword */
> 	public void enableEnum() { enumEnabled = true; }
> 	/** Disable the "enum" keyword */
> 	public void disableEnum() { enumEnabled = false; }
> 	/** Query the "enum" keyword state */
> 	public boolean isEnumEnabled() { return enumEnabled; }
> }
> 
> 
> // OPERATORS
> QUESTION		:	'?'		;
> LPAREN			:	'('		;
> RPAREN			:	')'		;
> LBRACK			:	'['		;
> RBRACK			:	']'		;
> LCURLY			:	'{'		;
> RCURLY			:	'}'		;
> COLON			:	':'		;
> COMMA			:	','		;
> //DOT			:	'.'		;
> //ELLIPSIS		:	"..."	;
> ASSIGN			:	'='		;
> EQUAL			:	"=="	;
> LNOT			:	'!'		;
> BNOT			:	'~'		;
> NOT_EQUAL		:	"!="	;
> DIV				:	'/'		;
> DIV_ASSIGN		:	"/="	;
> PLUS			:	'+'		;
> PLUS_ASSIGN		:	"+="	;
> INC				:	"++"	;
> MINUS			:	'-'		;
> MINUS_ASSIGN	:	"-="	;
> DEC				:	"--"	;
> STAR			:	'*'		;
> STAR_ASSIGN		:	"*="	;
> MOD				:	'%'		;
> MOD_ASSIGN		:	"%="	;
> SR				:	">>"	;
> SR_ASSIGN		:	">>="	;
> BSR				:	">>>"	;
> BSR_ASSIGN		:	">>>="	;
> GE				:	">="	;
> GT				:	">"		;
> SL				:	"<<"	;
> SL_ASSIGN		:	"<<="	;
> LE				:	"<="	;
> LT				:	'<'		;
> BXOR			:	'^'		;
> BXOR_ASSIGN		:	"^="	;
> BOR				:	'|'		;
> BOR_ASSIGN		:	"|="	;
> LOR				:	"||"	;
> BAND			:	'&'		;
> BAND_ASSIGN		:	"&="	;
> LAND			:	"&&"	;
> SEMI			:	';'		;
> AT				:	'@'		;
> 
> 
> // Whitespace -- ignored
> WS	:	(	' '
> 		|	'\t'
> 		|	'\f'
> 			// handle newlines
> 		|	(	options {generateAmbigWarnings=false;}
> 			:	"\r\n"  // Evil DOS
> 			|	'\r'    // Macintosh
> 			|	'\n'    // Unix (the right way)
> 			)
> 			{ newline(); }
> 		)+
> 		{ _ttype = Token.SKIP; }
> 	;
> 
> // Single-line comments
> SL_COMMENT
> 	:	"//"
> 		(~('\n'|'\r'))* ('\n'|'\r'('\n')?)?
> 		{$setType(Token.SKIP); newline();}
> 	;
> 
> // multiple-line comments
> ML_COMMENT
> 	:	"/*"
> 		(	/*	'\r' '\n' can be matched in one alternative or by matching
> 				'\r' in one iteration and '\n' in another.  I am trying to
> 				handle any flavor of newline that comes in, but the language
> 				that allows both "\r\n" and "\r" and "\n" to all be valid
> 				newline is ambiguous.  Consequently, the resulting grammar
> 				must be ambiguous.  I'm shutting this warning off.
> 			 */
> 			options {
> 				generateAmbigWarnings=false;
> 			}
> 		:
> 			{ LA(2)!='/' }? '*'
> 		|	'\r' '\n'		{newline();}
> 		|	'\r'			{newline();}
> 		|	'\n'			{newline();}
> 		|	~('*'|'\n'|'\r')
> 		)*
> 		"*/"
> 		{$setType(Token.SKIP);}
> 	;
> 
> 
> // character literals
> CHAR_LITERAL
> 	:	'\'' ( ESC | ~('\''|'\n'|'\r'|'\\') ) '\''
> 	;
> 
> // string literals
> STRING_LITERAL
> 	:	'"' (ESC|~('"'|'\\'|'\n'|'\r'))* '"'
> 	;
> 
> 
> // escape sequence -- note that this is protected; it can only be called
> //   from another lexer rule -- it will not ever directly return a
token to
> //   the parser
> // There are various ambiguities hushed in this rule.  The optional
> // '0'...'9' digit matches should be matched here rather than letting
> // them go back to STRING_LITERAL to be matched.  ANTLR does the
> // right thing by matching immediately; hence, it's ok to shut off
> // the FOLLOW ambig warnings.
> protected
> ESC
> 	:	'\\'
> 		(	'n'
> 		|	'r'
> 		|	't'
> 		|	'b'
> 		|	'f'
> 		|	'"'
> 		|	'\''
> 		|	'\\'
> 		|	('u')+ HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
> 		|	'0'..'3'
> 			(
> 				options {
> 					warnWhenFollowAmbig = false;
> 				}
> 			:	'0'..'7'
> 				(
> 					options {
> 						warnWhenFollowAmbig = false;
> 					}
> 				:	'0'..'7'
> 				)?
> 			)?
> 		|	'4'..'7'
> 			(
> 				options {
> 					warnWhenFollowAmbig = false;
> 				}
> 			:	'0'..'7'
> 			)?
> 		)
> 	;
> 
> 
> // hexadecimal digit (again, note it's protected!)
> protected
> HEX_DIGIT
> 	:	('0'..'9'|'A'..'F'|'a'..'f')
> 	;
> 
> 
> // an identifier.  Note that testLiterals is set to true!  This means
> // that after we match the rule, we look in the literals table to see
> // if it's a literal or really an identifer
> IDENT
> 	options {testLiterals=true;}
> 	:	('a'..'z'|'A'..'Z'|'_'|'$') ('a'..'z'|'A'..'Z'|'_'|'0'..'9'|'$')*
> 		{
> 			// check if "assert" keyword is enabled
> 			if (assertEnabled && "assert".equals($getText)) {
> 				$setType(ASSERT); // set token type for the rule in the parser
> 			}
> 			// check if "enum" keyword is enabled
> 			if (enumEnabled && "enum".equals($getText)) {
> 				$setType(ENUM); // set token type for the rule in the parser
> 			}
> 		}
> 	;
> 
> 
> // a numeric literal
> NUM_INT
> 	{boolean isDecimal=false; Token t=null;}
> 	:	'.' {_ttype = DOT;}
> 		(	'.' '.' {_ttype = ELLIPSIS;}
> 		|	(	('0'..'9')+ (EXPONENT)? (f1:FLOAT_SUFFIX {t=f1;})?
> 				{
> 				if (t != null && t.getText().toUpperCase().indexOf('F')>=0) {
> 					_ttype = NUM_FLOAT;
> 				}
> 				else {
> 					_ttype = NUM_DOUBLE; // assume double
> 				}
> 				}
> 			)?
> 		)
> 
> 	|	(	'0' {isDecimal = true;} // special case for just '0'
> 			(	('x'|'X')
> 				(											// hex
> 					// the 'e'|'E' and float suffix stuff look
> 					// like hex digits, hence the (...)+ doesn't
> 					// know when to stop: ambig.  ANTLR resolves
> 					// it correctly by matching immediately.  It
> 					// is therefor ok to hush warning.
> 					options {
> 						warnWhenFollowAmbig=false;
> 					}
> 				:	HEX_DIGIT
> 				)+
> 
> 			|	//float or double with leading zero
> 				(('0'..'9')+ ('.'|EXPONENT|FLOAT_SUFFIX)) => ('0'..'9')+
> 
> 			|	('0'..'7')+									// octal
> 			)?
> 		|	('1'..'9') ('0'..'9')*  {isDecimal=true;}		// non-zero decimal
> 		)
> 		(	('l'|'L') { _ttype = NUM_LONG; }
> 
> 		// only check to see if it's a float if looks like decimal so far
> 		|	{isDecimal}?
> 			(	'.' ('0'..'9')* (EXPONENT)? (f2:FLOAT_SUFFIX {t=f2;})?
> 			|	EXPONENT (f3:FLOAT_SUFFIX {t=f3;})?
> 			|	f4:FLOAT_SUFFIX {t=f4;}
> 			)
> 			{
> 			if (t != null && t.getText().toUpperCase() .indexOf('F') >= 0) {
> 				_ttype = NUM_FLOAT;
> 			}
> 			else {
> 				_ttype = NUM_DOUBLE; // assume double
> 			}
> 			}
> 		)?
> 	;
> 
> 
> // a couple protected methods to assist in matching floating point
numbers
> protected
> EXPONENT
> 	:	('e'|'E') ('+'|'-')? ('0'..'9')+
> 	;
> 
> 
> protected
> FLOAT_SUFFIX
> 	:	'f'|'F'|'d'|'D'
> 	;



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Tue Aug 24 17:34:51 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:12 2004
Subject: [antlr-interest] Re: yet another java 1.5 grammar
In-Reply-To: <cggk0e+kl1o@eGroups.com>
References: <cggk0e+kl1o@eGroups.com>
Message-ID: <93B50550-F62E-11D8-B3EA-000A95891192@cs.usfca.edu>


On Aug 24, 2004, at 4:46 PM, lgcraymer wrote:

> Michael--
>
> Please send Ter a copy so that he can put it in the "sharing" section
> of antlr.org.

You can add it yourself with the add grammar button. :)   Please 
include the "readme" from your email in the zip. :)  Also please put 
something describing the difference to the other 1.5 grammar in the 
submitted description.  Perhaps we should get a single merged grammar.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From din_wins at yahoo.com  Tue Aug 24 20:59:07 2004
From: din_wins at yahoo.com (Srinivasa dinesh Parupalli)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Need Immediate Help(Grammar for Mainframe Application)
In-Reply-To: <779B5C5B-F5D2-11D8-A245-000393B5606C@codetransform.com>
Message-ID: <20040825035907.17885.qmail@web51809.mail.yahoo.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: CHCM001.bms
Type: application/octet-stream
Size: 4419 bytes
Desc: CHCM001.bms
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040824/c816dae3/CHCM001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: BMSParser.g
Type: application/octet-stream
Size: 984 bytes
Desc: BMSParser.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040824/c816dae3/BMSParser.obj
From francis.andre at easynet.fr  Wed Aug 25 07:41:40 2004
From: francis.andre at easynet.fr (Francis ANDRE)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] ANTLR274 for C++: Why do I get those warnings on MSVS.NET 7.1
Message-ID: <cgi8f4+kn16@eGroups.com>

Hi Ric

I am using antlr/cpp generation targeted for MSVS .NET 7.1. Why do I 
get those warnings:

d:\antlr-2.7.4\lib\cpp\antlr\ANTLRException.hpp(53) : warning 
C4251: 'antlr::ANTLRException::text'?: 
class 'std::basic_string<_Elem,_Traits,_Ax>' n?cessite une interface 
DLL pour ?tre utilis?(e) par les clients de 
class 'antlr::ANTLRException'
        with
        [
            _Elem=char,
            _Traits=std::char_traits<char>,
            _Ax=std::allocator<char>
        ]
d:\antlr-2.7.4\lib\cpp\antlr\RecognitionException.hpp(66) : warning 
C4251: 'antlr::RecognitionException::fileName'?: 
class 'std::basic_string<_Elem,_Traits,_Ax>' n?cessite une interface 
DLL pour ?tre utilis?(e) par les clients de 
class 'antlr::RecognitionException'
        with
        [
            _Elem=char,
            _Traits=std::char_traits<char>,
            _Ax=std::allocator<char>
        ]


It seems that the ANTLR_API should also be placed on th definition of 
text and filename but when doing so, there is a compile error!!

Any suggestions???


TIA

FA



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Wed Aug 25 08:56:46 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] ANTLR274 for C++: Why do I get those warnings on MSVS.NET 7.1
In-Reply-To: <cgi8f4+kn16@eGroups.com>
References: <cgi8f4+kn16@eGroups.com>
Message-ID: <20040825155645.GB702@cs.utwente.nl>

On Wed, Aug 25, 2004 at 02:41:40PM -0000, Francis ANDRE wrote:
> I am using antlr/cpp generation targeted for MSVS .NET 7.1. Why do I
> get those warnings:
>
> d:\antlr-2.7.4\lib\cpp\antlr\ANTLRException.hpp(53) : warning
> C4251: 'antlr::ANTLRException::text'?:
> class 'std::basic_string<_Elem,_Traits,_Ax>' n?cessite une interface
> DLL pour ?tre utilis?(e) par les clients de
> class 'antlr::ANTLRException'
>         with
>         [
>             _Elem=char,
>             _Traits=std::char_traits<char>,
>             _Ax=std::allocator<char>
>         ]
> d:\antlr-2.7.4\lib\cpp\antlr\RecognitionException.hpp(66) : warning
> C4251: 'antlr::RecognitionException::fileName'?:
> class 'std::basic_string<_Elem,_Traits,_Ax>' n?cessite une interface
> DLL pour ?tre utilis?(e) par les clients de
> class 'antlr::RecognitionException'
>         with
>         [
>             _Elem=char,
>             _Traits=std::char_traits<char>,
>             _Ax=std::allocator<char>
>         ]
>
> It seems that the ANTLR_API should also be placed on th definition of
> text and filename but when doing so, there is a compile error!!
>
> Any suggestions???

I'm afraid I'm no MSVC user. So I can't help much with these errors. The
last reports I had were that MSVC7.1 should work out of the box if the DLL
instructions from lib/cpp/README are followed. e.g:

Define ANTLR_EXPORTS when building the ANTLR DLL. Define ANTLR_IMPORTS when
building the program that should use the DLL. Leave them undefined for a
static build.

Try static linking if DLL's give trouble. DLL's and STL seem still good for
headaches on MSVC. Sometimes it also helps to move the whole compiler
together with the ANTLR support lib into one DLL.

A long shot might be to move all the offending class constructors to a .cpp
file. If this is due to inlining it could make sense but I'm mostly
clueless with regard to MSVC.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From gcpa-antlr-interest at m.gmane.org  Wed Aug 25 11:02:08 2004
From: gcpa-antlr-interest at m.gmane.org (Michael Stahl)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Re: Re: yet another java 1.5 grammar
References: <cggk0e+kl1o@eGroups.com> <93B50550-F62E-11D8-B3EA-000A95891192@cs.usfca.edu>
Message-ID: <pan.2004.08.25.18.02.07.162330@informatik.uni-ulm.de>

On Tue, 24 Aug 2004 18:34:51 -0700, Terence Parr wrote:
> On Aug 24, 2004, at 4:46 PM, lgcraymer wrote:
> 
>> Michael--
>>
>> Please send Ter a copy so that he can put it in the "sharing" section
>> of antlr.org.
> 
> You can add it yourself with the add grammar button. :)   Please 
> include the "readme" from your email in the zip. :)  Also please put 
> something describing the difference to the other 1.5 grammar in the 
> submitted description.  Perhaps we should get a single merged grammar.
 
ok, will do that :) i couldn't imagine you let just anybody
upload stuff there, so i didn't try :)

i don't think merging the two grammars makes much sense though;
i suggest you either pick one or a version of the other with
the bugs i identified in my previous posting fixed.
that seems like it is much less work with nearly the same
benefit.

do you have any comment on the syntactic predicate in loops
issue i have with antlr? (see original posting)

michael




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Wed Aug 25 12:23:41 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Re: Re: yet another java 1.5 grammar
In-Reply-To: <pan.2004.08.25.18.02.07.162330@informatik.uni-ulm.de>
References: <cggk0e+kl1o@eGroups.com> <93B50550-F62E-11D8-B3EA-000A95891192@cs.usfca.edu> <pan.2004.08.25.18.02.07.162330@informatik.uni-ulm.de>
Message-ID: <462893CC-F6CC-11D8-B3EA-000A95891192@cs.usfca.edu>


On Aug 25, 2004, at 11:02 AM, Michael Stahl wrote:

> On Tue, 24 Aug 2004 18:34:51 -0700, Terence Parr wrote:
>> On Aug 24, 2004, at 4:46 PM, lgcraymer wrote:
>>
>>> Michael--
>>>
>>> Please send Ter a copy so that he can put it in the "sharing" section
>>> of antlr.org.
>>
>> You can add it yourself with the add grammar button. :)   Please
>> include the "readme" from your email in the zip. :)  Also please put
>> something describing the difference to the other 1.5 grammar in the
>> submitted description.  Perhaps we should get a single merged grammar.
>
> ok, will do that :) i couldn't imagine you let just anybody
> upload stuff there, so i didn't try :)

Heck yeah.  I've got to remove some bogus entries once in a while, but 
jGuru experience gave me the idea that a community-managed site works 
pretty damn well in an environment full of highly-educated motivated 
and responsible people.  We only question it because we see what the 
general public does when given opportunities to cause trouble ;)

> i don't think merging the two grammars makes much sense though;
> i suggest you either pick one or a version of the other with
> the bugs i identified in my previous posting fixed.
> that seems like it is much less work with nearly the same
> benefit.

Okidoki...does yours have actions or anything that make it application 
specific?

> do you have any comment on the syntactic predicate in loops
> issue i have with antlr? (see original posting)

I'm completely underwater at the moment breathing through a small straw 
;)  I'm gearing up for school; advising students and prepping my first 
classes.  Ugh.  I expect to surface next week sometime. :)

Sorry for my absence on the net lately...

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From antlr-interest-accept-qDnPfUYvA4bSaHoZUXZxU8I at yahoogroups.com  Wed Aug 25 13:14:41 2004
From: antlr-interest-accept-qDnPfUYvA4bSaHoZUXZxU8I at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:13 2004
Subject: MODERATE -- walterstudent@yahoo.com posted to antlr-interest
Message-ID: <1093464881.284.49456.m16@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  walterstudent@yahoo.com 

The message summary:
--------------------
FROM: walterstudent@yahoo.com 
DATE: Wed, 25 Aug 2004 20:14:19 -0000 
SUBJECT: Graphs and Grammars 

Hi guys, 

I am rather new to the ANTLR and would like to ask a single 
question. 

At the moment I am working with Directed Acyclic Graphs 
(DAG) that result from some of the dependency relationships 
that I investigate in DNA microarrays data. 

The question that I have is following: 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=276 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-qDnPfUYvA4bSaHoZUXZxU8I@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "walterstudent" <walterstudent@yahoo.com>
Subject: Graphs and Grammars
Date: Wed, 25 Aug 2004 20:14:19 -0000
Size: 2033
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20040825/9dc13280/attachment.mht
From antlr-interest-accept-MWXQG=A0W4D4f7FNRPRryKU at yahoogroups.com  Wed Aug 25 13:16:24 2004
From: antlr-interest-accept-MWXQG=A0W4D4f7FNRPRryKU at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:13 2004
Subject: MODERATE -- walterstudent@yahoo.com posted to antlr-interest
Message-ID: <1093464984.206.52239.m16@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  walterstudent@yahoo.com 

The message summary:
--------------------
FROM: walterstudent@yahoo.com 
DATE: Wed, 25 Aug 2004 20:16:23 -0000 
SUBJECT: Graphs and Grammars 

Hi guys, 

I am rather new to the ANTLR and would like to ask a single 
question. 

At the moment I am working with Directed Acyclic Graphs 
(DAG) that result from some of the dependency relationships 
that I investigate in DNA microarrays data. 

The question that I have is following: 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=277 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-MWXQG=A0W4D4f7FNRPRryKU@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "walterstudent" <walterstudent@yahoo.com>
Subject: Graphs and Grammars
Date: Wed, 25 Aug 2004 20:16:23 -0000
Size: 2031
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20040825/ce6c8110/attachment.mht
From lgc at mail1.jpl.nasa.gov  Wed Aug 25 13:17:33 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Re: yet another java 1.5 grammar
In-Reply-To: <462893CC-F6CC-11D8-B3EA-000A95891192@cs.usfca.edu>
Message-ID: <cgis4t+9t2l@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> 
> On Aug 25, 2004, at 11:02 AM, Michael Stahl wrote:
... 
> > do you have any comment on the syntactic predicate in loops
> > issue i have with antlr? (see original posting)
> 
> I'm completely underwater at the moment breathing through a small straw 
> ;)  I'm gearing up for school; advising students and prepping my first 
> classes.  Ugh.  I expect to surface next week sometime. :)

Ter may be completely under water at the moment, but the "synpreds in
loops" issue has been raised as an ANTLR 3 design concern and one that
will probably be addressed.  Right now, you can use synpreds in
recursive definitions, but not in loops.  That rules out an important
class of refactorings:  it is important that logically equivalent
constructs actually have the same behavior!

--Loring

> 
> Sorry for my absence on the net lately...
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> Cofounder, http://www.knowspam.net enjoy email again!



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From walterstudent at yahoo.com  Wed Aug 25 13:14:19 2004
From: walterstudent at yahoo.com (walterstudent)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Graphs and Grammars
Message-ID: <cgirur+9jjn@eGroups.com>


Hi guys,

I am rather new to the ANTLR and would like to ask a single question.

At the moment I am working with Directed Acyclic Graphs (DAG) that 
result from some of the dependency relationships that I investigate 
in DNA microarrays data.

The question that I have is following:

Can I use ANTLR or some other tool to create a grammar 
representation of my graph and how can I do it. The reverse question 
also interests me. Namely given a grammar can I generate easily from 
it DAG and how?

Typically my graphs have as nodes variables that take nominal values 
and I would like to obtain some alternative representation of my 
graph.

Now if I could create this alternative grammar representation, could 
I put it into some grammar specific algorithms to preprocess it in 
some way? If so what algorithms are there available?

Thank you for your help.

If you would be kind enough to help me please sent email to 
zwalter@free.fr.

Thanks,
Walter






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From walterstudent at yahoo.com  Wed Aug 25 13:16:23 2004
From: walterstudent at yahoo.com (walterstudent)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Graphs and Grammars
Message-ID: <cgis2n+6113@eGroups.com>


Hi guys,

I am rather new to the ANTLR and would like to ask a single question.

At the moment I am working with Directed Acyclic Graphs (DAG) that 
result from some of the dependency relationships that I investigate 
in DNA microarrays data.

The question that I have is following:

Can I use ANTLR or some other tool to create a grammar 
representation of my graph and how can I do it. The reverse question 
also interests me. Namely given a grammar can I generate easily from 
it DAG and how?

Typically my graphs have as nodes variables that take nominal values 
and I would like to obtain some alternative representation of my 
graph.

Now if I could create this alternative grammar representation, could 
I put it into some grammar specific algorithms to preprocess it in 
some way? If so what algorithms are there available?

Thank you for your help.

If you would be kind enough to help me please sent email to 
zwalter@free.fr.

Thanks,
Walter






 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Wed Aug 25 14:21:47 2004
From: eric_mahurin at yahoo.com (thrutchy)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Re: yet another java 1.5 grammar
In-Reply-To: <cgis4t+9t2l@eGroups.com>
Message-ID: <cgivtb+5tqd@eGroups.com>

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
> > 
> > On Aug 25, 2004, at 11:02 AM, Michael Stahl wrote:
> ... 
> > > do you have any comment on the syntactic predicate in loops
> > > issue i have with antlr? (see original posting)
> > 
> > I'm completely underwater at the moment breathing through a small
straw 
> > ;)  I'm gearing up for school; advising students and prepping my
first 
> > classes.  Ugh.  I expect to surface next week sometime. :)
> 
> Ter may be completely under water at the moment, but the "synpreds in
> loops" issue has been raised as an ANTLR 3 design concern and one that
> will probably be addressed.  Right now, you can use synpreds in
> recursive definitions, but not in loops.  That rules out an important
> class of refactorings:  it is important that logically equivalent
> constructs actually have the same behavior!
> 
> --Loring


As far as I can tell, syntactic predicates with loops do work - you
just have to ignore the warning.  I use a wrapper to antlr that
filters out these (one of my previous posts has it).

Eric




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From lgc at mail1.jpl.nasa.gov  Wed Aug 25 14:37:18 2004
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Re: Graphs and Grammars
In-Reply-To: <cgirur+9jjn@eGroups.com>
Message-ID: <cgj0qe+ot6v@eGroups.com>

ANTLR deals with trees, not DAGs.  You can walk a DAG with an ANTLR
tree walker if you have the links set up right--some nodes may be hit
twice (a node may be child to more than one other node, and may be a
right sibling of more than one node)--but that is probably not what
you want to do.

Oliver Zeigermann was going to start a discussion on graph
walking--see http://jsl.sourceforge.net/--back in December but hasn't
been very active on the news group lately. Maybe he'll chime in.

--Loring 


--- In antlr-interest@yahoogroups.com, "walterstudent"
<walterstudent@y...> wrote:
> 
> Hi guys,
> 
> I am rather new to the ANTLR and would like to ask a single question.
> 
> At the moment I am working with Directed Acyclic Graphs (DAG) that 
> result from some of the dependency relationships that I investigate 
> in DNA microarrays data.
> 
> The question that I have is following:
> 
> Can I use ANTLR or some other tool to create a grammar 
> representation of my graph and how can I do it. The reverse question 
> also interests me. Namely given a grammar can I generate easily from 
> it DAG and how?
> 
> Typically my graphs have as nodes variables that take nominal values 
> and I would like to obtain some alternative representation of my 
> graph.
> 
> Now if I could create this alternative grammar representation, could 
> I put it into some grammar specific algorithms to preprocess it in 
> some way? If so what algorithms are there available?
> 
> Thank you for your help.
> 
> If you would be kind enough to help me please sent email to 
> zwalter@f...
> 
> Thanks,
> Walter



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From anakreonmejdi at yahoo.gr  Wed Aug 25 14:44:47 2004
From: anakreonmejdi at yahoo.gr (Anakreon)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Graphs and Grammars
In-Reply-To: <cgirur+9jjn@eGroups.com>
References: <cgirur+9jjn@eGroups.com>
Message-ID: <412D084F.80900@yahoo.gr>

> The question that I have is following:
> 
> Can I use ANTLR or some other tool to create a grammar 
> representation of my graph and how can I do it. The reverse question 
> also interests me. Namely given a grammar can I generate easily from 
> it DAG and how?
> 
Look at graphwiz for a language which describes graphs.
You can modify that language and write a grammar for that language.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From din_wins at yahoo.com  Wed Aug 25 22:01:39 2004
From: din_wins at yahoo.com (din_wins)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Grammar for End of Line.
Message-ID: <cgjqrj+5lm0@eGroups.com>

The grammar for which i need to write requires for checking end of 
the line and end of the record. i need to check for X or x 
respectively. 

How I need to go about in writing the gramar for the above. I am here 
with producing my grammar file also. When I write rule for checking X 
then i am getting lots of errors.

Request any immediate help in this regard.


======================================================================

options {
	language = "CSharp";
}
class BMSParser1 extends Parser;

options
	{	
		
		buildAST = true;
	}

file		:	(line (NEWLINE line)* EOF!) ;

line		:	(lineexpr)+ ;
	
lineexpr	:	(recordexpr ENDLINE)+ ;

recordexpr	:	((assignexpr)COMMA)+ ;	

assignexpr	:	aexpr (ASSIGN^ assignexpr)+ ;

aexpr		:	parenargs (aexpr)+ ;

parenargs	:	LPAREN
			(
			  assignexpr
         		   (
            		     COMMA!
	        	      assignexpr
         		   )*
      			)
      			RPAREN
		;


class BMSLexer1 extends Lexer;

ENDLINE		:	'X';

LPAREN		:	'(';

RPAREN		:	')';

ASSIGN		:	'=';

COMMA		:	',';

WS		:	(' '
		|	'\t'
		|	)
			{ _ttype = Token.SKIP; }
		;	
STREXPR		: 	('a'..'z' | 'A'..'Z')+ ;

DIGIT		:	('0'..'9')+ ;

NEWLINE		:	('\r''\n')=> '\r''\n' //DOS
	        | '\r'                  //MAC
        	| '\n'                  //UNIX
	        { newline(); }
        	;




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From gcpa-antlr-interest at m.gmane.org  Thu Aug 26 07:00:11 2004
From: gcpa-antlr-interest at m.gmane.org (Michael Stahl)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Re: Re: Re: yet another java 1.5 grammar
References: <cggk0e+kl1o@eGroups.com> <93B50550-F62E-11D8-B3EA-000A95891192@cs.usfca.edu> <pan.2004.08.25.18.02.07.162330@informatik.uni-ulm.de> <462893CC-F6CC-11D8-B3EA-000A95891192@cs.usfca.edu>
Message-ID: <pan.2004.08.26.14.00.09.658147@informatik.uni-ulm.de>

On Wed, 25 Aug 2004 13:23:41 -0700, Terence Parr wrote:
> On Aug 25, 2004, at 11:02 AM, Michael Stahl wrote:
> 
>> On Tue, 24 Aug 2004 18:34:51 -0700, Terence Parr wrote:

[snip]

>> i don't think merging the two grammars makes much sense though;
>> i suggest you either pick one or a version of the other with
>> the bugs i identified in my previous posting fixed.
>> that seems like it is much less work with nearly the same
>> benefit.
> 
> Okidoki...does yours have actions or anything that make it application 
> specific?

nope, all the application specific stuff is in another
grammar that i have based on the one i posted here.

michael

[snip]



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From gcpa-antlr-interest at m.gmane.org  Thu Aug 26 07:09:11 2004
From: gcpa-antlr-interest at m.gmane.org (Michael Stahl)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Re: yet another java 1.5 grammar
References: <cgis4t+9t2l@eGroups.com> <cgivtb+5tqd@eGroups.com>
Message-ID: <pan.2004.08.26.14.08.59.398959@informatik.uni-ulm.de>

On Wed, 25 Aug 2004 22:21:47 +0000, thrutchy wrote:
> --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
>> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> wrote:
>> > 
>> > On Aug 25, 2004, at 11:02 AM, Michael Stahl wrote:
>> ... 
>> > > do you have any comment on the syntactic predicate in loops
>> > > issue i have with antlr? (see original posting)
>> > 
>> > I'm completely underwater at the moment breathing through a small
> straw 
>> > ;)  I'm gearing up for school; advising students and prepping my
> first 
>> > classes.  Ugh.  I expect to surface next week sometime. :)
>> 
>> Ter may be completely under water at the moment, but the "synpreds in
>> loops" issue has been raised as an ANTLR 3 design concern and one that
>> will probably be addressed.  Right now, you can use synpreds in
>> recursive definitions, but not in loops.  That rules out an important
>> class of refactorings:  it is important that logically equivalent
>> constructs actually have the same behavior!
>> 
>> --Loring
> 
> 
> As far as I can tell, syntactic predicates with loops do work - you
> just have to ignore the warning.  I use a wrapper to antlr that
> filters out these (one of my previous posts has it).

ah, i have found a message from you from five days ago.
if i understand this correctly, then antlr will actually
do the right thing, but gives out a totally spurious
warning. if that is correct, then, could that warning be
removed in a future antlr release (2.7.5)?

michael




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From joanpujol at gmail.com  Thu Aug 26 07:47:16 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Grammar for End of Line.
In-Reply-To: <cgjqrj+5lm0@eGroups.com>
References: <cgjqrj+5lm0@eGroups.com>
Message-ID: <d2d18a104082607476883b3e2@mail.gmail.com>

You can solve the lexer indeterminism this way (You have to declare
ENDLINE toke in tokens sections:

STREXPR         :       ('X' NEWLINE)=>'X' {$setType(ENDLINE);}
			        |('a'..'z' | 'A'..'Z')+;


About the grammar It's recursive!

> recordexpr      :       ((assignexpr)COMMA)+ ;
> 
> assignexpr      :       aexpr (ASSIGN^ assignexpr)+ ;
> 
> aexpr           :       parenargs (aexpr)+ ;
> 
> parenargs       :       LPAREN
>                         (
>                           assignexpr

assignexpr-> aexpr -> parenargs -> (CONSUME LPAREN)
then another time assignexpr --> CONSUME LPAREN and another assignexpr....
and...


Cheers,



On Thu, 26 Aug 2004 05:01:39 -0000, din_wins <din_wins@yahoo.com> wrote:
> The grammar for which i need to write requires for checking end of
> the line and end of the record. i need to check for X or x
> respectively.
> 
> How I need to go about in writing the gramar for the above. I am here
> with producing my grammar file also. When I write rule for checking X
> then i am getting lots of errors.
> 
> Request any immediate help in this regard.
> 
> ======================================================================
> 
> options {
>         language = "CSharp";
> }
> class BMSParser1 extends Parser;
> 
> options
>         {
> 
>                 buildAST = true;
>         }
> 
> file            :       (line (NEWLINE line)* EOF!) ;
> 
> line            :       (lineexpr)+ ;
> 
> lineexpr        :       (recordexpr ENDLINE)+ ;
> 
> recordexpr      :       ((assignexpr)COMMA)+ ;
> 
> assignexpr      :       aexpr (ASSIGN^ assignexpr)+ ;
> 
> aexpr           :       parenargs (aexpr)+ ;
> 
> parenargs       :       LPAREN
>                         (
>                           assignexpr
>                            (
>                              COMMA!
>                               assignexpr
>                            )*
>                         )
>                         RPAREN
>                 ;
> 
> class BMSLexer1 extends Lexer;
> 
> ENDLINE         :       'X';
> 
> LPAREN          :       '(';
> 
> RPAREN          :       ')';
> 
> ASSIGN          :       '=';
> 
> COMMA           :       ',';
> 
> WS              :       (' '
>                 |       '\t'
>                 |       )
>                         { _ttype = Token.SKIP; }
>                 ;
> STREXPR         :       ('a'..'z' | 'A'..'Z')+ ;
> 
> DIGIT           :       ('0'..'9')+ ;
> 
> NEWLINE         :       ('\r''\n')=> '\r''\n' //DOS
>                 | '\r'                  //MAC
>                 | '\n'                  //UNIX
>                 { newline(); }
>                 ;
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 


-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Thu Aug 26 11:28:15 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Re: yet another java 1.5 grammar
In-Reply-To: <cgivtb+5tqd@eGroups.com>
References: <cgivtb+5tqd@eGroups.com>
Message-ID: <B2013024-F78D-11D8-A497-000393B5606C@codetransform.com>


Syn preds in loops work in some cases and not in others.  You can't 
have a syntactic predicate cause you to break out of a loop, you can 
only have it keep you in the loop.

Monty

ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html

On Aug 25, 2004, at 2:21 PM, thrutchy wrote:

> --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
>> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
>> wrote:
>>>
>>> On Aug 25, 2004, at 11:02 AM, Michael Stahl wrote:
>> ...
>>>> do you have any comment on the syntactic predicate in loops
>>>> issue i have with antlr? (see original posting)
>>>
>>> I'm completely underwater at the moment breathing through a small
> straw
>>> ;)  I'm gearing up for school; advising students and prepping my
> first
>>> classes.  Ugh.  I expect to surface next week sometime. :)
>>
>> Ter may be completely under water at the moment, but the "synpreds in
>> loops" issue has been raised as an ANTLR 3 design concern and one that
>> will probably be addressed.  Right now, you can use synpreds in
>> recursive definitions, but not in loops.  That rules out an important
>> class of refactorings:  it is important that logically equivalent
>> constructs actually have the same behavior!
>>
>> --Loring
>
>
> As far as I can tell, syntactic predicates with loops do work - you
> just have to ignore the warning.  I use a wrapper to antlr that
> filters out these (one of my previous posts has it).
>
> Eric
>
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
>



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From antlr-interest-accept-3YoDW4Qsx9tLNiYW34ZG2ic at yahoogroups.com  Thu Aug 26 16:25:38 2004
From: antlr-interest-accept-3YoDW4Qsx9tLNiYW34ZG2ic at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:13 2004
Subject: MODERATE -- rkadayam@yahoo.com posted to antlr-interest
Message-ID: <1093562738.460.13610.m20@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  rkadayam@yahoo.com 

The message summary:
--------------------
FROM: rkadayam@yahoo.com 
DATE: Thu, 26 Aug 2004 23:24:36 -0000 
SUBJECT: ANTLR newbie - Passing custom objects to Parser 

I;m trying to implement an boolean expression interpreter 
for which the arguments will be java objects and will have 
to be specified external to the expression. The expression 
will have "variable" names that point to these objects via 
hashmap. I just need to be able to pass this hashmap to the 
Parser/Lexer and then when it does the parsing/interpreting,
the grammar could pick it up from the hash-map. 

However I'm not sure how I'd pass the hashmap to the 
generated Lexer/Parser java objects. 
--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=278 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-3YoDW4Qsx9tLNiYW34ZG2ic@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "Rajiv Kadayam" <rkadayam@yahoo.com>
Subject: ANTLR newbie - Passing custom objects to Parser
Date: Thu, 26 Aug 2004 23:24:36 -0000
Size: 1740
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20040826/8df73d25/attachment.mht
From rkadayam at yahoo.com  Thu Aug 26 16:24:36 2004
From: rkadayam at yahoo.com (Rajiv Kadayam)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] ANTLR newbie - Passing custom objects to Parser
Message-ID: <cglrfk+b3eg@eGroups.com>

I;m trying to implement an boolean expression interpreter for which 
the arguments will be java objects and will have to be specified 
external to the expression. The expression will have "variable" names 
that point to these objects via hashmap. I just need to be able to 
pass this hashmap to the Parser/Lexer and then when it does the 
parsing/interpreting, the grammar could pick it up from the hash-map.

However I'm not sure how I'd pass the hashmap to the generated 
Lexer/Parser java objects.

Any help greatly appreciated. Also does anyone have any experiences 
writing a simple boolean expression evaluator/interpreter ?

Thanks in advance
Rajiv 




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From eric_mahurin at yahoo.com  Thu Aug 26 21:09:12 2004
From: eric_mahurin at yahoo.com (thrutchy)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Re: yet another java 1.5 grammar
In-Reply-To: <B2013024-F78D-11D8-A497-000393B5606C@codetransform.com>
Message-ID: <cgmc58+4v2f@eGroups.com>

Monty,

Can you elaborate - an example where it works and where it doesn't?  I
don't understand how a syn pred can keep you in a loop.  They should
only qualify/invalidate the syntax (and break you out of the loop). 
I've been using syn preds like this for cases where a fixed lookahead
doesn't cut it:

( (x)=>x )* y

Or you can make the syn pred just enough of x to differentiate it from y.

- Eric

p.s. I've mentioned this before, but it would be nice in ANTLR 3 if we
had a shorthand for doing this type of backtracking.  If it was done
with an inherent backtracking mechanism, you also wouldn't need to
parse x twice as above when there is a match.  But, any actions in
between couldn't have any side effects.  Personally, I think it should
be a requirement that syn preds (and backtracking sub-rules) have no
actions with side effects so that the code didn't have to do that
"input_guessing" thing.

--- In antlr-interest@yahoogroups.com, Monty Zukowski <monty@c...> wrote:
> Syn preds in loops work in some cases and not in others.  You can't 
> have a syntactic predicate cause you to break out of a loop, you can 
> only have it keep you in the loop.
> 
> Monty
> 
> ANTLR & Java Consultant -- http://www.codetransform.com
> ANSI C/GCC transformation toolkit -- 
> http://www.codetransform.com/gcc.html
> Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html
> 
> On Aug 25, 2004, at 2:21 PM, thrutchy wrote:
> 
> > --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> >> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@c...> 
> >> wrote:
> >>>
> >>> On Aug 25, 2004, at 11:02 AM, Michael Stahl wrote:
> >> ...
> >>>> do you have any comment on the syntactic predicate in loops
> >>>> issue i have with antlr? (see original posting)
> >>>
> >>> I'm completely underwater at the moment breathing through a small
> > straw
> >>> ;)  I'm gearing up for school; advising students and prepping my
> > first
> >>> classes.  Ugh.  I expect to surface next week sometime. :)
> >>
> >> Ter may be completely under water at the moment, but the "synpreds in
> >> loops" issue has been raised as an ANTLR 3 design concern and one
that
> >> will probably be addressed.  Right now, you can use synpreds in
> >> recursive definitions, but not in loops.  That rules out an important
> >> class of refactorings:  it is important that logically equivalent
> >> constructs actually have the same behavior!
> >>
> >> --Loring
> >
> >
> > As far as I can tell, syntactic predicates with loops do work - you
> > just have to ignore the warning.  I use a wrapper to antlr that
> > filters out these (one of my previous posts has it).
> >
> > Eric
> >
> >
> >
> >
> >
> > Yahoo! Groups Links
> >
> >
> >
> >
> >
> >
> >



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From antlr-interest-accept-jLm=KsiftobKPw3Luhdj6gw at yahoogroups.com  Sun Aug 29 00:18:39 2004
From: antlr-interest-accept-jLm=KsiftobKPw3Luhdj6gw at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:13 2004
Subject: MODERATE -- samridhsharma@yahoo.com posted to antlr-interest
Message-ID: <1093763919.300.52288.m5@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  samridhsharma@yahoo.com 

The message summary:
--------------------
FROM: samridhsharma@yahoo.com 
DATE: Sun, 29 Aug 2004 07:18:35 -0000 
SUBJECT: how to open different files as input to a parser 

i have just started working on antlr i wanted to know how to
open *.txt, *.cpp or *.java files as input to a parser or 
lexer. 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=279 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-jLm=KsiftobKPw3Luhdj6gw@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "samridhsharma" <samridhsharma@yahoo.com>
Subject: how to open different files as input to a parser
Date: Sun, 29 Aug 2004 07:18:35 -0000
Size: 1233
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20040829/8e351a8e/attachment.mht
From antlr-interest-accept-DNG_HxZU3LAqgbgmgJV8qXI at yahoogroups.com  Sun Aug 29 00:22:15 2004
From: antlr-interest-accept-DNG_HxZU3LAqgbgmgJV8qXI at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:13 2004
Subject: MODERATE -- samridhsharma@yahoo.com posted to antlr-interest
Message-ID: <1093764135.184.26432.m17@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  samridhsharma@yahoo.com 

The message summary:
--------------------
FROM: samridhsharma@yahoo.com 
DATE: Sun, 29 Aug 2004 07:22:13 -0000 
SUBJECT: how to open different files as input ? 

i have just started working on antlr as a part of my college

project. I wanted to know how to open different types of 
files like *.txt or *.cpp (with their addresses known) as an
input to a parser/lexer so that i could access the data 
given on the files. 

please help. samridh sharma 

--------------------

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=280 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-DNG_HxZU3LAqgbgmgJV8qXI@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: "samridhsharma" <samridhsharma@yahoo.com>
Subject: how to open different files as input ?
Date: Sun, 29 Aug 2004 07:22:13 -0000
Size: 1382
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20040829/04db66c3/attachment.mht
From samridhsharma at yahoo.com  Sun Aug 29 00:18:35 2004
From: samridhsharma at yahoo.com (samridhsharma)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] how to open different files as input to a parser
Message-ID: <cgs00b+uaju@eGroups.com>


i have just started working on antlr i wanted to know how to open 
*.txt, *.cpp or *.java files as input to a parser or lexer.




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From samridhsharma at yahoo.com  Sun Aug 29 00:22:13 2004
From: samridhsharma at yahoo.com (samridhsharma)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] how to open different files as input ?
Message-ID: <cgs075+lldg@eGroups.com>


i have just started working on antlr as a part of my college 
project. I wanted to know how to open different types of files like 
*.txt or *.cpp (with their addresses known) as an input to a 
parser/lexer so that i could access the data given on the files.

please help.
samridh sharma




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From din_wins at yahoo.com  Sun Aug 29 21:37:50 2004
From: din_wins at yahoo.com (Srinivasa dinesh Parupalli)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] How to handle Spaces inside of a quoted string
Message-ID: <20040830043750.39322.qmail@web51805.mail.yahoo.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: CHCM001.bms
Type: application/octet-stream
Size: 4419 bytes
Desc: CHCM001.bms
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040829/aeece040/CHCM001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bms.g
Type: application/octet-stream
Size: 2656 bytes
Desc: bms.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20040829/aeece040/bms.obj
-------------- next part --------------
using System;

namespace Worksoft.Parsers
{
	/// <summary>
	/// Summary description for ParserHelper.
	/// </summary>
	public class ParserHelper
	{
		private string _xml = string.Empty;

		public ParserHelper()
		{
			//
			// TODO: Add constructor logic here
			//
		}

		public void Test(string message)
		{
			Console.WriteLine(message);
		}

		public void Start()
		{
			_xml = "<xml>\n";
		}

		public void End()
		{
			_xml += "<\\xml>\n";
		}

		public override string ToString()
		{
			return _xml;
		}
	}
}
From din_wins at yahoo.com  Sun Aug 29 21:40:09 2004
From: din_wins at yahoo.com (din_wins)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] How to Creating an end of file rule for **-| DFHMSD TYPE=FINAL END as per my BMS
Message-ID: <cgub39+84c2@eGroups.com>


Dear Friends,

I am writing grammar for BMS Mainframe. I am struck with the 
following issues.

1)       Spaces inside of a quoted string

2)       Creating an end of file rule for **-| DFHMSD TYPE=FINAL END

3)       The actual non-readable character at he the end of file

4)       The header should also include | IDENTIFIER IDENTIFIER 
assign. Once
this is fixed it may actually correct #2 as well.


below is my grammar file.

=========================================================

options {
 language = "CSharp";
 namespace = "Worksoft.Parsers";
}
class BMSLexer extends Lexer;
options 
{
 k = 2;
}
IDENTIFIER 
   :
   ( 'a'..'z'
   |'A'..'Z'
   |'0'..'9'
   |'.'|'/'
   |'~'|'`'|'!'|'@'|'#'|'$'|'%'|'^'|'&'|'*'|'-'|'_'|'+'
   |'['|']'|'{'|'}'|'\\'|'|'
   )+
   ;
/*  
NEWLINE  : '\r' '\n' | '\n'
   ;
*/   
QUOTATION : '\"'
   ;
   
TICK  : '\''
   ;
   
COMMA  : ','
   ;
EQUAL  : '='
   ;   

LPAREN  : '('
   ; 
RPAREN  : ')'
   ; 
 
WS   : ( ' '
   | '\t'
   |   '\r' '\n'
   |   '\n')
   { $setType(Token.SKIP); }
   ;
class BMSParser extends Parser;
options
{
 k = 3;
}
{
 private ParserHelper _parserHelper = new ParserHelper();
}
main returns [string xml = string.Empty]
   : 
   (
   file
     )
     {
      xml = _parserHelper.ToString();
     }
   ;
 
 
file  :
   {
     _parserHelper.Start();
     Console.WriteLine("Start file"); 
   }
   (head body EOF)
   {
     Console.WriteLine("End file"); 
     _parserHelper.End();
   }
   ;
  
head  :
   {
    Console.WriteLine("start head"); 
   }
   (a:IDENTIFIER b:IDENTIFIER assigngroup)
   {
    Console.WriteLine("End head - " + a.getText() + " - " + b.getText
()); 
   }
   ;
       
body  :
   {
    Console.WriteLine("Start body"); 
   }
   (parent)*
   {
    Console.WriteLine("End body"); 
   }
   ; 
   
assigngroup :
   {
    Console.WriteLine("Start assigngroup");
   }
   (assign (COMMA a:IDENTIFIER assign)*)+
   {
    Console.WriteLine("End assigngroup = " + a.getText());
   }
   ; 
   
assign  :
   {
    Console.WriteLine("Start assign");
   }
   a:IDENTIFIER EQUAL value
   {
    Console.WriteLine("End assign - " + a.getText());
   }
   |
   
   b:IDENTIFIER EQUAL valuegroup
   {
    Console.WriteLine("End assign - " + b.getText());
   }
   ;
              
valuegroup :
   {
    Console.WriteLine("Start valuegroup");
   }
   LPAREN value (COMMA value)* RPAREN 
   {
    Console.WriteLine("End valuegroup");
   }
   ;
   
value  :
   {
    Console.WriteLine("Start value");
   }
   a:IDENTIFIER
   {
    Console.WriteLine("End value = " + a.getText());
   }
   |
   TICK b:IDENTIFIER TICK
   {
    Console.WriteLine("End value = '" + b.getText() + "'");
   }
   ;
parent  :
   {
    Console.WriteLine("Start parent");
   }
   a:IDENTIFIER (obj)+
   {
    Console.WriteLine("End parent - " + a.getText());
   }
   ;      
   
obj  :
   {
    Console.WriteLine("Start obj");
   }
   a:IDENTIFIER assigngroup
   {
    Console.WriteLine("End obj - " + a.getText());
   }
   ; 

========================

below is my .bms file.
==========================
CHCM001  DFHMSD 
TYPE=MAP,                                              X
               
MODE=INOUT,                                             x
               
LANG=COBOL,                                             x
               
CTRL=FREEKB,                                            X
               
STORAGE=AUTO,                                           x
               
TERM=3270,                                              x
               TIOAPFX=YES
CHCM001  DFHMDI MAPATTS=
(COLOR,PS,HILIGHT,VALIDN),                     x
               DSATTS=
(COLOR,PS,HILIGHT,VALIDN),                       X
               SIZE=(24,80)
         DFHMDF POS=
(1,1),                                             x
               
LENGTH=007,                                             x
               
COLOR=YELLOW,                                           X
               
ATTRB=ASKIP,                                            x
               INITIAL='CHCM001'
         DFHMDF POS=
(1,29),                                            x
               
LENGTH=022,                                             x
               
COLOR=YELLOW,                                           X
               
ATTRB=ASKIP,                                            x
               INITIAL='CHC PERSONNEL TRACKING'
SYSDATE  DFHMDF POS=
(1,71),                                            x
               
LENGTH=008,                                             x
               
COLOR=YELLOW,                                           X
               ATTRB=(ASKIP,BRT)
         DFHMDF POS=
(4,26),                                            x
               
LENGTH=031,                                             x
               
COLOR=YELLOW,                                           X
               
ATTRB=ASKIP,                                            x
               INITIAL='1. PERSONNEL LISTING'
         DFHMDF POS=
(6,26),                                            x
               
LENGTH=031,                                             x
               
COLOR=YELLOW,                                           X
               
ATTRB=ASKIP,                                            x
               INITIAL='2. PERSONNEL INQUIRY'
         DFHMDF POS=
(8,26),                                            x
               
LENGTH=031,                                             x
               
COLOR=YELLOW,                                           X
               
ATTRB=ASKIP,                                            x
               INITIAL='3. PERSONNEL MAINTENANCE'
         DFHMDF POS=
(10,26),                                           x
               
LENGTH=031,                                             x
               
COLOR=YELLOW,                                           X
               
ATTRB=ASKIP,                                            x
               INITIAL='4. PERFORMANCE INQUIRY'
         DFHMDF POS=
(12,26),                                           x
               
LENGTH=031,                                             x
               
COLOR=YELLOW,                                           X
               
ATTRB=ASKIP,                                            x
               INITIAL='5. PERFORMANCE MAINTENANCE'
         DFHMDF POS=
(14,26),                                           x
               
LENGTH=031,                                             x
               
COLOR=YELLOW,                                           X
               
ATTRB=ASKIP,                                            x
               INITIAL='6. PERFORMANCE HISTORY'
         DFHMDF POS=
(18,26),                                           x
               
LENGTH=031,                                             x
               
COLOR=YELLOW,                                           X
               
ATTRB=ASKIP,                                            x
               INITIAL='12. PREVIOUS MENU/EXIT FUNCTION'
MSG      DFHMDF POS=
(24,1),                                            x
               
LENGTH=079,                                             x
               ATTRB=
(ASKIP,IC,BRT),                                   X
               
COLOR=RED,                                              X
               INITIAL='HIT PFKEY FOR CORRESPONDING MENU SELECTION'
**-|
        DFHMSD  TYPE=FINAL
        END



============

Regards,
P.Srinivasa Dinesh.

 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From joanpujol at gmail.com  Sun Aug 29 22:27:30 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] How to Creating an end of file rule for **-| DFHMSD TYPE=FINAL END as per my BMS
In-Reply-To: <cgub39+84c2@eGroups.com>
References: <cgub39+84c2@eGroups.com>
Message-ID: <d2d18a104082922273403a25e@mail.gmail.com>

Hi,

I think that is better to don't send the same message severeal times.

On Mon, 30 Aug 2004 04:40:09 -0000, din_wins <din_wins@yahoo.com> wrote:
> 
> Dear Friends,
> 
> I am writing grammar for BMS Mainframe. I am struck with the
> following issues.
I think that your big problem is that you use all the power of the lexer.

> 
> 1)       Spaces inside of a quoted string
Define a token in the lexer similar to

QUOTEDSTRING:  '\'' ~('\'')* '\'';

 
> 2)       Creating an end of file rule for **-| DFHMSD TYPE=FINAL END
The same that 1:
FINALTOKEN: "**-| DFHMSD TYPE=FINAL END";
If you have some token that starts with * you will have to use
syntatic predicates.
 
> 3)       The actual non-readable character at he the end of file
I have no time to look at this.

> 4)       The header should also include | IDENTIFIER IDENTIFIER
> assign. Once
> this is fixed it may actually correct #2 as well.
2 is corrected ;)

And, don't use the Console.Write(XXX) to debug  in the parser. ANTLR
has the option -traceParcer that does it for you and you have a
cleanaer more redeable grammar.

Cheers,

> 
> below is my grammar file.
> 
> =========================================================
> 
> options {
>  language = "CSharp";
>  namespace = "Worksoft.Parsers";
> }
> class BMSLexer extends Lexer;
> options
> {
>  k = 2;
> }
> IDENTIFIER
>    :
>    ( 'a'..'z'
>    |'A'..'Z'
>    |'0'..'9'
>    |'.'|'/'
>    |'~'|'`'|'!'|'@'|'#'|'$'|'%'|'^'|'&'|'*'|'-'|'_'|'+'
>    |'['|']'|'{'|'}'|'\\'|'|'
>    )+
>    ;
> /*
> NEWLINE  : '\r' '\n' | '\n'
>    ;
> */
> QUOTATION : '\"'
>    ;
> 
> TICK  : '\''
>    ;
> 
> COMMA  : ','
>    ;
> EQUAL  : '='
>    ;
> 
> LPAREN  : '('
>    ;
> RPAREN  : ')'
>    ;
> 
> WS   : ( ' '
>    | '\t'
>    |   '\r' '\n'
>    |   '\n')
>    { $setType(Token.SKIP); }
>    ;
> class BMSParser extends Parser;
> options
> {
>  k = 3;
> }
> {
>  private ParserHelper _parserHelper = new ParserHelper();
> }
> main returns [string xml = string.Empty]
>    :
>    (
>    file
>      )
>      {
>       xml = _parserHelper.ToString();
>      }
>    ;
> 
> file  :
>    {
>      _parserHelper.Start();
>      Console.WriteLine("Start file");
>    }
>    (head body EOF)
>    {
>      Console.WriteLine("End file");
>      _parserHelper.End();
>    }
>    ;
> 
> head  :
>    {
>     Console.WriteLine("start head");
>    }
>    (a:IDENTIFIER b:IDENTIFIER assigngroup)
>    {
>     Console.WriteLine("End head - " + a.getText() + " - " + b.getText
> ());
>    }
>    ;
> 
> body  :
>    {
>     Console.WriteLine("Start body");
>    }
>    (parent)*
>    {
>     Console.WriteLine("End body");
>    }
>    ;
> 
> assigngroup :
>    {
>     Console.WriteLine("Start assigngroup");
>    }
>    (assign (COMMA a:IDENTIFIER assign)*)+
>    {
>     Console.WriteLine("End assigngroup = " + a.getText());
>    }
>    ;
> 
> assign  :
>    {
>     Console.WriteLine("Start assign");
>    }
>    a:IDENTIFIER EQUAL value
>    {
>     Console.WriteLine("End assign - " + a.getText());
>    }
>    |
> 
>    b:IDENTIFIER EQUAL valuegroup
>    {
>     Console.WriteLine("End assign - " + b.getText());
>    }
>    ;
> 
> valuegroup :
>    {
>     Console.WriteLine("Start valuegroup");
>    }
>    LPAREN value (COMMA value)* RPAREN
>    {
>     Console.WriteLine("End valuegroup");
>    }
>    ;
> 
> value  :
>    {
>     Console.WriteLine("Start value");
>    }
>    a:IDENTIFIER
>    {
>     Console.WriteLine("End value = " + a.getText());
>    }
>    |
>    TICK b:IDENTIFIER TICK
>    {
>     Console.WriteLine("End value = '" + b.getText() + "'");
>    }
>    ;
> parent  :
>    {
>     Console.WriteLine("Start parent");
>    }
>    a:IDENTIFIER (obj)+
>    {
>     Console.WriteLine("End parent - " + a.getText());
>    }
>    ;
> 
> obj  :
>    {
>     Console.WriteLine("Start obj");
>    }
>    a:IDENTIFIER assigngroup
>    {
>     Console.WriteLine("End obj - " + a.getText());
>    }
>    ;
> 
> ========================
> 
> below is my .bms file.
> ==========================
> CHCM001  DFHMSD
> TYPE=MAP,                                              X
> 
> MODE=INOUT,                                             x
> 
> LANG=COBOL,                                             x
> 
> CTRL=FREEKB,                                            X
> 
> STORAGE=AUTO,                                           x
> 
> TERM=3270,                                              x
>                TIOAPFX=YES
> CHCM001  DFHMDI MAPATTS=
> (COLOR,PS,HILIGHT,VALIDN),                     x
>                DSATTS=
> (COLOR,PS,HILIGHT,VALIDN),                       X
>                SIZE=(24,80)
>          DFHMDF POS=
> (1,1),                                             x
> 
> LENGTH=007,                                             x
> 
> COLOR=YELLOW,                                           X
> 
> ATTRB=ASKIP,                                            x
>                INITIAL='CHCM001'
>          DFHMDF POS=
> (1,29),                                            x
> 
> LENGTH=022,                                             x
> 
> COLOR=YELLOW,                                           X
> 
> ATTRB=ASKIP,                                            x
>                INITIAL='CHC PERSONNEL TRACKING'
> SYSDATE  DFHMDF POS=
> (1,71),                                            x
> 
> LENGTH=008,                                             x
> 
> COLOR=YELLOW,                                           X
>                ATTRB=(ASKIP,BRT)
>          DFHMDF POS=
> (4,26),                                            x
> 
> LENGTH=031,                                             x
> 
> COLOR=YELLOW,                                           X
> 
> ATTRB=ASKIP,                                            x
>                INITIAL='1. PERSONNEL LISTING'
>          DFHMDF POS=
> (6,26),                                            x
> 
> LENGTH=031,                                             x
> 
> COLOR=YELLOW,                                           X
> 
> ATTRB=ASKIP,                                            x
>                INITIAL='2. PERSONNEL INQUIRY'
>          DFHMDF POS=
> (8,26),                                            x
> 
> LENGTH=031,                                             x
> 
> COLOR=YELLOW,                                           X
> 
> ATTRB=ASKIP,                                            x
>                INITIAL='3. PERSONNEL MAINTENANCE'
>          DFHMDF POS=
> (10,26),                                           x
> 
> LENGTH=031,                                             x
> 
> COLOR=YELLOW,                                           X
> 
> ATTRB=ASKIP,                                            x
>                INITIAL='4. PERFORMANCE INQUIRY'
>          DFHMDF POS=
> (12,26),                                           x
> 
> LENGTH=031,                                             x
> 
> COLOR=YELLOW,                                           X
> 
> ATTRB=ASKIP,                                            x
>                INITIAL='5. PERFORMANCE MAINTENANCE'
>          DFHMDF POS=
> (14,26),                                           x
> 
> LENGTH=031,                                             x
> 
> COLOR=YELLOW,                                           X
> 
> ATTRB=ASKIP,                                            x
>                INITIAL='6. PERFORMANCE HISTORY'
>          DFHMDF POS=
> (18,26),                                           x
> 
> LENGTH=031,                                             x
> 
> COLOR=YELLOW,                                           X
> 
> ATTRB=ASKIP,                                            x
>                INITIAL='12. PREVIOUS MENU/EXIT FUNCTION'
> MSG      DFHMDF POS=
> (24,1),                                            x
> 
> LENGTH=079,                                             x
>                ATTRB=
> (ASKIP,IC,BRT),                                   X
> 
> COLOR=RED,                                              X
>                INITIAL='HIT PFKEY FOR CORRESPONDING MENU SELECTION'
> **-|
>         DFHMSD  TYPE=FINAL
>         END
> 
> ============
> 
> Regards,
> P.Srinivasa Dinesh.
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 


-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From din_wins at yahoo.com  Sun Aug 29 23:22:07 2004
From: din_wins at yahoo.com (din_wins)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Re: How to Creating an end of file rule for **-| DFHMSD TYPE=FINAL END as per my BMS
In-Reply-To: <d2d18a104082922273403a25e@mail.gmail.com>
Message-ID: <cguh2f+286o@eGroups.com>


Hi Joan Jes?s Pujol Espinar, 

thanks for clarifying me...then how i need to go about in solving 
issue number 4.

regards,
P.Srinivasa Dinesh.

--- In antlr-interest@yahoogroups.com, Joan Pujol <joanpujol@g...> 
wrote:
> Hi,
> 
> I think that is better to don't send the same message severeal 
times.
> 
> On Mon, 30 Aug 2004 04:40:09 -0000, din_wins <din_wins@y...> wrote:
> > 
> > Dear Friends,
> > 
> > I am writing grammar for BMS Mainframe. I am struck with the
> > following issues.
> I think that your big problem is that you use all the power of the 
lexer.
> 
> > 
> > 1)       Spaces inside of a quoted string
> Define a token in the lexer similar to
> 
> QUOTEDSTRING:  '\'' ~('\'')* '\'';
> 
>  
> > 2)       Creating an end of file rule for **-| DFHMSD TYPE=FINAL 
END
> The same that 1:
> FINALTOKEN: "**-| DFHMSD TYPE=FINAL END";
> If you have some token that starts with * you will have to use
> syntatic predicates.
>  
> > 3)       The actual non-readable character at he the end of file
> I have no time to look at this.
> 
> > 4)       The header should also include | IDENTIFIER IDENTIFIER
> > assign. Once
> > this is fixed it may actually correct #2 as well.
> 2 is corrected ;)
> 
> And, don't use the Console.Write(XXX) to debug  in the parser. ANTLR
> has the option -traceParcer that does it for you and you have a
> cleanaer more redeable grammar.
> 
> Cheers,
> 
> > 
> > below is my grammar file.
> > 
> > =========================================================
> > 
> > options {
> >  language = "CSharp";
> >  namespace = "Worksoft.Parsers";
> > }
> > class BMSLexer extends Lexer;
> > options
> > {
> >  k = 2;
> > }
> > IDENTIFIER
> >    :
> >    ( 'a'..'z'
> >    |'A'..'Z'
> >    |'0'..'9'
> >    |'.'|'/'
> >    |'~'|'`'|'!'|'@'|'#'|'$'|'%'|'^'|'&'|'*'|'-'|'_'|'+'
> >    |'['|']'|'{'|'}'|'\\'|'|'
> >    )+
> >    ;
> > /*
> > NEWLINE  : '\r' '\n' | '\n'
> >    ;
> > */
> > QUOTATION : '\"'
> >    ;
> > 
> > TICK  : '\''
> >    ;
> > 
> > COMMA  : ','
> >    ;
> > EQUAL  : '='
> >    ;
> > 
> > LPAREN  : '('
> >    ;
> > RPAREN  : ')'
> >    ;
> > 
> > WS   : ( ' '
> >    | '\t'
> >    |   '\r' '\n'
> >    |   '\n')
> >    { $setType(Token.SKIP); }
> >    ;
> > class BMSParser extends Parser;
> > options
> > {
> >  k = 3;
> > }
> > {
> >  private ParserHelper _parserHelper = new ParserHelper();
> > }
> > main returns [string xml = string.Empty]
> >    :
> >    (
> >    file
> >      )
> >      {
> >       xml = _parserHelper.ToString();
> >      }
> >    ;
> > 
> > file  :
> >    {
> >      _parserHelper.Start();
> >      Console.WriteLine("Start file");
> >    }
> >    (head body EOF)
> >    {
> >      Console.WriteLine("End file");
> >      _parserHelper.End();
> >    }
> >    ;
> > 
> > head  :
> >    {
> >     Console.WriteLine("start head");
> >    }
> >    (a:IDENTIFIER b:IDENTIFIER assigngroup)
> >    {
> >     Console.WriteLine("End head - " + a.getText() + " - " + 
b.getText
> > ());
> >    }
> >    ;
> > 
> > body  :
> >    {
> >     Console.WriteLine("Start body");
> >    }
> >    (parent)*
> >    {
> >     Console.WriteLine("End body");
> >    }
> >    ;
> > 
> > assigngroup :
> >    {
> >     Console.WriteLine("Start assigngroup");
> >    }
> >    (assign (COMMA a:IDENTIFIER assign)*)+
> >    {
> >     Console.WriteLine("End assigngroup = " + a.getText());
> >    }
> >    ;
> > 
> > assign  :
> >    {
> >     Console.WriteLine("Start assign");
> >    }
> >    a:IDENTIFIER EQUAL value
> >    {
> >     Console.WriteLine("End assign - " + a.getText());
> >    }
> >    |
> > 
> >    b:IDENTIFIER EQUAL valuegroup
> >    {
> >     Console.WriteLine("End assign - " + b.getText());
> >    }
> >    ;
> > 
> > valuegroup :
> >    {
> >     Console.WriteLine("Start valuegroup");
> >    }
> >    LPAREN value (COMMA value)* RPAREN
> >    {
> >     Console.WriteLine("End valuegroup");
> >    }
> >    ;
> > 
> > value  :
> >    {
> >     Console.WriteLine("Start value");
> >    }
> >    a:IDENTIFIER
> >    {
> >     Console.WriteLine("End value = " + a.getText());
> >    }
> >    |
> >    TICK b:IDENTIFIER TICK
> >    {
> >     Console.WriteLine("End value = '" + b.getText() + "'");
> >    }
> >    ;
> > parent  :
> >    {
> >     Console.WriteLine("Start parent");
> >    }
> >    a:IDENTIFIER (obj)+
> >    {
> >     Console.WriteLine("End parent - " + a.getText());
> >    }
> >    ;
> > 
> > obj  :
> >    {
> >     Console.WriteLine("Start obj");
> >    }
> >    a:IDENTIFIER assigngroup
> >    {
> >     Console.WriteLine("End obj - " + a.getText());
> >    }
> >    ;
> > 
> > ========================
> > 
> > below is my .bms file.
> > ==========================
> > CHCM001  DFHMSD
> > TYPE=MAP,                                              X
> > 
> > MODE=INOUT,                                             x
> > 
> > LANG=COBOL,                                             x
> > 
> > CTRL=FREEKB,                                            X
> > 
> > STORAGE=AUTO,                                           x
> > 
> > TERM=3270,                                              x
> >                TIOAPFX=YES
> > CHCM001  DFHMDI MAPATTS=
> > (COLOR,PS,HILIGHT,VALIDN),                     x
> >                DSATTS=
> > (COLOR,PS,HILIGHT,VALIDN),                       X
> >                SIZE=(24,80)
> >          DFHMDF POS=
> > (1,1),                                             x
> > 
> > LENGTH=007,                                             x
> > 
> > COLOR=YELLOW,                                           X
> > 
> > ATTRB=ASKIP,                                            x
> >                INITIAL='CHCM001'
> >          DFHMDF POS=
> > (1,29),                                            x
> > 
> > LENGTH=022,                                             x
> > 
> > COLOR=YELLOW,                                           X
> > 
> > ATTRB=ASKIP,                                            x
> >                INITIAL='CHC PERSONNEL TRACKING'
> > SYSDATE  DFHMDF POS=
> > (1,71),                                            x
> > 
> > LENGTH=008,                                             x
> > 
> > COLOR=YELLOW,                                           X
> >                ATTRB=(ASKIP,BRT)
> >          DFHMDF POS=
> > (4,26),                                            x
> > 
> > LENGTH=031,                                             x
> > 
> > COLOR=YELLOW,                                           X
> > 
> > ATTRB=ASKIP,                                            x
> >                INITIAL='1. PERSONNEL LISTING'
> >          DFHMDF POS=
> > (6,26),                                            x
> > 
> > LENGTH=031,                                             x
> > 
> > COLOR=YELLOW,                                           X
> > 
> > ATTRB=ASKIP,                                            x
> >                INITIAL='2. PERSONNEL INQUIRY'
> >          DFHMDF POS=
> > (8,26),                                            x
> > 
> > LENGTH=031,                                             x
> > 
> > COLOR=YELLOW,                                           X
> > 
> > ATTRB=ASKIP,                                            x
> >                INITIAL='3. PERSONNEL MAINTENANCE'
> >          DFHMDF POS=
> > (10,26),                                           x
> > 
> > LENGTH=031,                                             x
> > 
> > COLOR=YELLOW,                                           X
> > 
> > ATTRB=ASKIP,                                            x
> >                INITIAL='4. PERFORMANCE INQUIRY'
> >          DFHMDF POS=
> > (12,26),                                           x
> > 
> > LENGTH=031,                                             x
> > 
> > COLOR=YELLOW,                                           X
> > 
> > ATTRB=ASKIP,                                            x
> >                INITIAL='5. PERFORMANCE MAINTENANCE'
> >          DFHMDF POS=
> > (14,26),                                           x
> > 
> > LENGTH=031,                                             x
> > 
> > COLOR=YELLOW,                                           X
> > 
> > ATTRB=ASKIP,                                            x
> >                INITIAL='6. PERFORMANCE HISTORY'
> >          DFHMDF POS=
> > (18,26),                                           x
> > 
> > LENGTH=031,                                             x
> > 
> > COLOR=YELLOW,                                           X
> > 
> > ATTRB=ASKIP,                                            x
> >                INITIAL='12. PREVIOUS MENU/EXIT FUNCTION'
> > MSG      DFHMDF POS=
> > (24,1),                                            x
> > 
> > LENGTH=079,                                             x
> >                ATTRB=
> > (ASKIP,IC,BRT),                                   X
> > 
> > COLOR=RED,                                              X
> >                INITIAL='HIT PFKEY FOR CORRESPONDING MENU 
SELECTION'
> > **-|
> >         DFHMSD  TYPE=FINAL
> >         END
> > 
> > ============
> > 
> > Regards,
> > P.Srinivasa Dinesh.
> > 
> > 
> > Yahoo! Groups Links
> > 
> > 
> > 
> > 
> > 
> 
> 
> -- 
> Joan Jes?s Pujol Espinar



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From mstudman at gmx.net  Mon Aug 30 02:39:38 2004
From: mstudman at gmx.net (Michael Studman)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Re: Re: yet another java 1.5 grammar
In-Reply-To: <pan.2004.08.25.18.02.07.162330@informatik.uni-ulm.de>
Message-ID: <000e01c48e75$44bef6a0$e7485651@Baboo>

Hi all.

I've updated my Java 1.5 grammar hosted on ANTLR to address the issues
Michael Stahl outlined in a previous email. In addition I fixed a few
other bugs, did some refactoring of types to maximise reuse and
integrated his excellent switchable enum/assert keyword checking.

Here are some problems I found with his grammar:

* It does not allow annotations of form: @MyAnnotation() (it expects at
least one parameter)

* It does not allow annotation array member initialisations with other
annotations @MyAnno(something = { @MyOtherAnno() })

* It does not support annotation fields with C-style array syntax:
@interface MyAnno
{
	int name4()[]; //vs int[] name4();
}

* There seems to be some weird incompatibility between the recogniser
and the tree parser w.r.t. enum constant invocations (enum constant
initialisers)
e.g.
public enum MyEnum
{
	CONSTANT1(123);
}
seems to pass in the recognizer but fails in the tree parser.

* It is possibly too lenient with enum definitions: it allows enum
constants to have static initialisers and constructors.

* It's possibly too lenient with variable-length arguments: it allows
them at any position in a variable list (mine only allows it at the end
of a variable list) and it also allows it in variables defined within
"for" and "catch" productions.

* It accepts parameters that are declared final more than once.

These last three points probably aren't major ones and would be checked
elsewhere in a compiler etc but I thought I'd mention them as my test
suite highlighted these as differences between the two grammars.

Regards,
Michael Studman.


> -----Original Message-----
> From: news [mailto:news@sea.gmane.org] On Behalf Of Michael Stahl
> Sent: 25 August 2004 19:02
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Re: yet another java 1.5 grammar
> 
> On Tue, 24 Aug 2004 18:34:51 -0700, Terence Parr wrote:
> > On Aug 24, 2004, at 4:46 PM, lgcraymer wrote:
> >
> >> Michael--
> >>
> >> Please send Ter a copy so that he can put it in the "sharing"
section
> >> of antlr.org.
> >
> > You can add it yourself with the add grammar button. :)   Please
> > include the "readme" from your email in the zip. :)  Also please put
> > something describing the difference to the other 1.5 grammar in the
> > submitted description.  Perhaps we should get a single merged
grammar.
> 
> ok, will do that :) i couldn't imagine you let just anybody
> upload stuff there, so i didn't try :)
> 
> i don't think merging the two grammars makes much sense though;
> i suggest you either pick one or a version of the other with
> the bugs i identified in my previous posting fixed.
> that seems like it is much less work with nearly the same
> benefit.
> 
> do you have any comment on the syntactic predicate in loops
> issue i have with antlr? (see original posting)
> 
> michael
> 
> 
> 
> 
> 
> Yahoo! Groups Links
> 
> 
> 
> 
> 
> ---
> Incoming mail is certified Virus Free.
> Checked by AVG anti-virus system (http://www.grisoft.com).
> Version: 6.0.745 / Virus Database: 497 - Release Date: 27/08/2004
> 

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.745 / Virus Database: 497 - Release Date: 27/08/2004
 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From din_wins at yahoo.com  Mon Aug 30 07:04:28 2004
From: din_wins at yahoo.com (din_wins)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] not able to compile my grammar by including FINALTOKEN
Message-ID: <cgvc5c+eu57@eGroups.com>

hi i am stuck again...i have included FINALTOKEN in my grammar file 
and it throughs me following error

bms.g
ANTLR Parser Generator   Version 2.7.4   1989-2004 jGuru.com
bms.g: warning:lexical nondeterminism between rules IDENTIFIER and 
FINALTOKEN up
on
bms.g:     k==1:'*'
bms.g:     k==2:'*'


i am herewith my grammar file

options {
	language = "CSharp";
	namespace = "Worksoft.Parsers";
}

class BMSLexer extends Lexer;

options 
{
	k = 2;
}
IDENTIFIER	
			:
			(	'a'..'z'
			|'A'..'Z'
			|'0'..'9'
			|'.'|'/'
			|'~'|'`'|'!'|'@'|'#'|'$'|'%'|'^'|'&'|'*'|'-
'|'_'|'+'
			|'['|']'|'{'|'}'|'\\'|'|'
			)+
			;
/*		
NEWLINE		: '\r' '\n' | '\n'
			;
*/			

QUOTATION	: '\"'
			;

TICK		: '\''
			;
			
COMMA		: ','
			;

EQUAL		: '='
			;			


LPAREN		: '('
			;	

RPAREN		: ')'
			;	
	
WS			:	( ' '
			|	'\t'
			|   '\r' '\n'
			|   '\n')
			{ $setType(Token.SKIP); }
			;

FINALTOKEN: "**-| DFHMSD TYPE=FINAL END";


class BMSParser extends Parser;

options
{
	k = 3;
}
{
	private ParserHelper _parserHelper = new ParserHelper();
}
main returns [string xml = string.Empty]
			:	
			(
			file
  			)
  			{
  				xml = _parserHelper.ToString();
  			}
			;
	
	
file		:
			{
					_parserHelper.Start();
					Console.WriteLine("Start 
file");	
			}
			(head body EOF)
			{
					Console.WriteLine("End file");
	
					_parserHelper.End();
			}
			;
		
head		:
			{
				Console.WriteLine("start head");
	
			}
			(a:IDENTIFIER b:IDENTIFIER assigngroup)
			{
				Console.WriteLine("End head - " + 
a.getText() + " - " + b.getText());	
			}
			;
							
body		:
			{
				Console.WriteLine("Start body");
	
			}
			(parent)*
			{
				Console.WriteLine("End body");	
			}
			;	

parent		:
			{
				Console.WriteLine("Start parent");
			}
			a:IDENTIFIER (obj)+
			{
				Console.WriteLine("End parent - " + 
a.getText());
			}
			;					
	
			
obj		:
			{
				Console.WriteLine("Start obj");
			}
			a:IDENTIFIER assigngroup
			{
				Console.WriteLine("End obj - " + 
a.getText());
			}
			;	
			
assigngroup	:
			{
				Console.WriteLine("Start 
assigngroup");
			}
			(assign (COMMA a:IDENTIFIER assign)*)+
			{
				Console.WriteLine("End assigngroup 
= " + a.getText());
			}
			;	
			
assign		:
			{
				Console.WriteLine("Start assign");
			}
			a:IDENTIFIER EQUAL value
			{
				Console.WriteLine("End assign - " + 
a.getText());
			}
			|
			
			b:IDENTIFIER EQUAL valuegroup
			{
				Console.WriteLine("End assign - " + 
b.getText());
			}
			;
								
						
valuegroup	:
			{
				Console.WriteLine("Start valuegroup");
			}
			LPAREN value (COMMA value)* RPAREN 
			{
				Console.WriteLine("End valuegroup");
			}
			;
			
value		:
			{
				Console.WriteLine("Start value");
			}
			a:IDENTIFIER
			{
				Console.WriteLine("End value = " + 
a.getText());
			}
			|
			TICK b:IDENTIFIER TICK
			{
				Console.WriteLine("End value = '" + 
b.getText() + "'");
			}
			;



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From joanpujol at gmail.com  Mon Aug 30 10:22:27 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Get AST info of a previos treeparser
Message-ID: <d2d18a104083010225ac540f0@mail.gmail.com>

Hi,

I'm doing the semantic control using several phases: TreeParser1, TreeParser2.
And I have a problem trying to get info from TreeParser1 with TreeParser2.

For example I have the rule:
root: #(ROOT a1 a2 a3)

If I use buildAST=false I can use the info from the previos AST with #root.
Because in sourece code #root resolves to root_AST_in.

But if I use buildAST=true (what I need) #root is resolved to root_AST
that it's null.
How can I access the root_AST_in when I have buildAST=true? Because in
the code exist, but I don't know how to get the value.

Cheers,

-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Mon Aug 30 11:56:14 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] reminder: ANTLR2004 workshop at USF
Message-ID: <4431B8D2-FAB6-11D8-B3EA-000A95891192@cs.usfca.edu>

Howdy folks,

Just a reminder that the workshop is coming up in about a month and I 
need people to register early so I can get parking passes and such to 
you.  Also i need an accurate count of participants.

Please send me some email if you want to come by for some or all.  
Remember it's free (even the parking)!

http://www.cs.usfca.edu/ANTLR2004.shtml

Also let me know if you want to give a quick or longer presentation on 
something cool you've built. :)

Regards,
Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From oobles at hotmail.com  Mon Aug 30 17:07:18 2004
From: oobles at hotmail.com (David Ryan)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Re: Get AST info of a previos treeparser
In-Reply-To: <d2d18a104083010225ac540f0@mail.gmail.com>
Message-ID: <ch0ffm+mh34@eGroups.com>


I'm not sure exactly where your problem is, but it could hae to do
with mismatching tokens?

I recently did a multiple pass Tree parser over XML using XPA.  To
make sure all the Tree Parsers would work together I imported the
Token types from the first pass into my subsequent passes.

options
{
   buildAST = true;
   importVocab = Step1Pass;
}

I was able to perform 9 phases, with some phases being passed multiple
times.

Hope that helps,
David.

--- In antlr-interest@yahoogroups.com, Joan Pujol <joanpujol@g...> wrote:
> Hi,
> 
> I'm doing the semantic control using several phases: TreeParser1,
TreeParser2.
> And I have a problem trying to get info from TreeParser1 with
TreeParser2.
> 
> For example I have the rule:
> root: #(ROOT a1 a2 a3)
> 
> If I use buildAST=false I can use the info from the previos AST with
#root.
> Because in sourece code #root resolves to root_AST_in.
> 
> But if I use buildAST=true (what I need) #root is resolved to root_AST
> that it's null.
> How can I access the root_AST_in when I have buildAST=true? Because in
> the code exist, but I don't know how to get the value.
> 
> Cheers,
> 
> -- 
> Joan Jes?s Pujol Espinar



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From monty at codetransform.com  Mon Aug 30 17:14:42 2004
From: monty at codetransform.com (Monty Zukowski)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Get AST info of a previos treeparser
In-Reply-To: <d2d18a104083010225ac540f0@mail.gmail.com>
References: <d2d18a104083010225ac540f0@mail.gmail.com>
Message-ID: <C162B698-FAE2-11D8-B427-000393B5606C@codetransform.com>

On Aug 30, 2004, at 10:22 AM, Joan Pujol wrote:

> But if I use buildAST=true (what I need) #root is resolved to root_AST
> that it's null.
> How can I access the root_AST_in when I have buildAST=true? Because in
> the code exist, but I don't know how to get the value.

See http://www.antlr.org/doc/trees.html#_bb9

Use #root_in.

Monty


ANTLR & Java Consultant -- http://www.codetransform.com
ANSI C/GCC transformation toolkit -- 
http://www.codetransform.com/gcc.html
Embrace the Decay -- http://www.codetransform.com/EmbraceDecay.html




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From din_wins at yahoo.com  Mon Aug 30 21:37:52 2004
From: din_wins at yahoo.com (din_wins)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] how to solve exactly one assignment in an assignmentgroup
Message-ID: <ch0vb0+nut5@eGroups.com>

hi friends,

need help in modifying my grammar file. my problem is If there is 
exactly one assignment in an assignmentgroup the parser is failing. 
how i need to go about in solving this problem.

below is my grammar file.
=================
options {
	language = "CSharp";
	namespace = "Worksoft.Parsers";
}

class BMSLexer extends Lexer;

options 
{
	k = 2;
}
IDENTIFIER	
			:
			(	'a'..'z'
			|'A'..'Z'
			|'0'..'9'
			|'.'|'/'
			|'~'|'`'|'!'|'@'|'#'|'$'|'%'|'^'|'&'|'*'|'-
'|'_'|'+'
			|'['|']'|'{'|'}'|'\\'|'|'
			)+
			;

STRING		: '\'' (~'\'')* '\'' 
			;
			
COMMA		: ','
			;

EQUAL		: '='
			;			


LPAREN		: '('
			;	

RPAREN		: ')'
			;	
	
WS			:	( ' '
			|	'\t'
			|   '\r' '\n'
			|   '\n')
			{ $setType(Token.SKIP); }
			;

class BMSParser extends Parser;

options
{
	k = 3;
}
{
	private ParserHelper _parserHelper = new ParserHelper();
	public string Parse()
	{
		return main();
	}
}
main returns [string xml = string.Empty]
			:	
			(
			file
  			)
  			{
  				xml = _parserHelper.ToString();
  			}
			;
	
	
file		:
			{
					_parserHelper.Start();
					Console.WriteLine("Start 
file");	
			}
			(head body footer)
			{
					Console.WriteLine("End file");
	
					_parserHelper.End();
			}
			;
		
head		:
			{
				Console.WriteLine("start head ");
	
			}
			/*
			(a:IDENTIFIER b:IDENTIFIER assigngroup)
			*/
			parent
			{
				//Console.WriteLine("End head - " + 
a.getText() + " - " + b.getText());	
			}
			;
							
body		:
			{
				Console.WriteLine("Start body");
	
			}
			(parent)+
			{
				Console.WriteLine("End body");	
			}
			;
				
assigngroup	:
			{
				Console.WriteLine("Start 
assigngroup");
			}
			(assign (COMMA a:IDENTIFIER assign)*)+
			{
				Console.WriteLine("End assigngroup 
= " + a.getText());
			}
			;		
			
assign		:
			{
				Console.WriteLine("Start assign");
			}
			a:IDENTIFIER EQUAL value
			{
				Console.WriteLine("End assign - " + 
a.getText());
			}
			|
			
			b:IDENTIFIER EQUAL valuegroup
			{
				Console.WriteLine("End assign - " + 
b.getText());
			}
			;
								
						
valuegroup	:
			{
				Console.WriteLine("Start valuegroup");
			}
			(LPAREN value (COMMA value)+ RPAREN)+
			{
				Console.WriteLine("End valuegroup");
			}
			;
			
value		:
			{
				Console.WriteLine("Start value");
			}
			a:IDENTIFIER
			{
				Console.WriteLine("End value A = " + 
a.getText());
			}
			|
			c:STRING 
			{
				Console.WriteLine("End value C = " + 
c.getText());
			}
			;

parent		:
			{
				Console.WriteLine("Start parent");
			}
			a:IDENTIFIER (obj)+
			{
				Console.WriteLine("End parent - " + 
a.getText());
			}
			;					
	
			
obj			:
			{
				Console.WriteLine("Start obj");
			}
			a:IDENTIFIER assigngroup
			{
				Console.WriteLine("End obj - " + 
a.getText());
			}
			;	

footer		:
			{
				Console.WriteLine("Start footer");
			}
			a: "**-|"  IDENTIFIER assign IDENTIFIER
			{
				Console.WriteLine("End footer - " + 
a.getText());
			}
			;	




 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From xdecoret at free.fr  Tue Aug 31 02:58:32 2004
From: xdecoret at free.fr (=?ISO-8859-1?Q?Xavier_D=E9coret?=)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Mark/rewind documentation
Message-ID: <41344BC8.7010307@free.fr>

In a recent thread about rewinding a token, the mark/rewind mechanism 
was mentionned. I am looking in the manual and I cannot find that much 
info about this mechanism. There is just an example of mark/rewind calls 
just before section "Scanning binary files" in    
http://www.antlr.org/doc/lexer.html#Lexical_Analysis_with_ANTLR.

Where can I find more info?

What I want to do is multiplexing with rewinding of a token. When lexer0 
finds a @, it switch the selector to another lexer (lexer1, which shares 
the same input) *and* rewind the @ because it must be used by lexer1.


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From klaren at cs.utwente.nl  Tue Aug 31 04:32:46 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Mark/rewind documentation
In-Reply-To: <41344BC8.7010307@free.fr>
References: <41344BC8.7010307@free.fr>
Message-ID: <20040831113246.GB9380@cs.utwente.nl>

On Tue, Aug 31, 2004 at 11:58:32AM +0200, Xavier D?coret wrote:
> In a recent thread about rewinding a token, the mark/rewind mechanism
> was mentionned. I am looking in the manual and I cannot find that much
> info about this mechanism. There is just an example of mark/rewind calls
> just before section "Scanning binary files" in
> http://www.antlr.org/doc/lexer.html#Lexical_Analysis_with_ANTLR.
>
> Where can I find more info?

See the javadocs in antlr/InputBuffer.java.

> What I want to do is multiplexing with rewinding of a token. When lexer0
> finds a @, it switch the selector to another lexer (lexer1, which shares
> the same input) *and* rewind the @ because it must be used by lexer1.

Note that when you use mark/rewind on extensive chunks of input that your
parser will probably be a lot more memory intensive. When you call mark()
all the input from then on will be safed in a circular queue. When you
rewind to that mark point you'll start off again at the point of the mark
call.

I'm not 100% sure wether it's actually needed but it is probably a good
idea to make sure that you match mark calls with either commit or rewind
calls (if you 'lose' commit/rewind calls you probably will leak memory (the
queue will never be reset)).

As an alternative you can probably restructure the lexers so that the
mark/rewind won't be necessary.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
     "Evil will always triumph, because Good is dumb." ---  Spaceballs



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From antlr-interest-accept-A0Wb0aJIywGMndhgBaoJemk at yahoogroups.com  Tue Aug 31 05:55:28 2004
From: antlr-interest-accept-A0Wb0aJIywGMndhgBaoJemk at yahoogroups.com (Yahoo!Groups Notification)
Date: Mon Dec 20 16:17:13 2004
Subject: MODERATE -- lucio.biondi@iond.it posted to antlr-interest
Message-ID: <1093956928.329.91648.m8@yahoogroups.com>


Hello,

A message has been sent to the antlr-interest group from

  lucio.biondi@iond.it 

A complete copy of this message has been attached for your convenience.

This message requires your approval for one of the following reasons:
* Your group is set to moderate all messages from this user, OR
* Your group is set to moderate messages from all users

To approve or reject this messages using the web, please visit:
http://groups.yahoo.com/group/antlr-interest/pending?view=1&msg=281 

To approve this message using email, reply to this message. You do not 
need to attach the original message, just reply and send.

To reject this message using email, forward this message to

antlr-interest-reject-A0Wb0aJIywGMndhgBaoJemk@yahoogroups.com 

NOTE: The pending message will expire after 14 days. If you do not 
take action within that time, the pending message will be automatically
rejected.  Yahoo! Groups does this to maintain a high quality of
service for our users.

Thank you for choosing Yahoo! Groups.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
 
-------------- next part --------------
An embedded message was scrubbed...
From: Lucio Biondi <lucio.biondi@iond.it>
Subject: rule syntax for throws and returns together
Date: Tue, 31 Aug 2004 14:56:32 +0200
Size: 1325
Url: http://www.antlr.org/pipermail/antlr-interest/attachments/20040831/25c691ef/attachment.mht
From lucio.biondi at iond.it  Tue Aug 31 05:56:32 2004
From: lucio.biondi at iond.it (Lucio Biondi)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] rule syntax for throws and returns together
Message-ID: <200408311456.32074.lucio.biondi@iond.it>


Can anyone explains to me how antlr needs to get them ?

I tried :

parse
    throws MyException
    returns [MyObject object]
    : somethingToParse
    ;

but it doesn't work.

Thanks in advance.

Lucio



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From klaren at cs.utwente.nl  Tue Aug 31 06:22:37 2004
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] rule syntax for throws and returns together
In-Reply-To: <200408311456.32074.lucio.biondi@iond.it>
References: <200408311456.32074.lucio.biondi@iond.it>
Message-ID: <20040831132237.GF9380@cs.utwente.nl>


On Tue, Aug 31, 2004 at 02:56:32PM +0200, Lucio Biondi wrote:
> Can anyone explains to me how antlr needs to get them ?
> 
> I tried :
> 
> parse
>     throws MyException
>     returns [MyObject object]
>     : somethingToParse
>     ;

Try this:

parse
    returns [MyObject object]
    throws MyException
    : somethingToParse
    ;

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893755  ----
-----+++++*****************************************************+++++++++-------
     Innovation makes enemies of all those who prospered under the old
   regime, and only lukewarm support is forthcoming from those who would
               prosper under the new. --- Niccol? Machiavelli



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 



From decoret at graphics.lcs.mit.edu  Tue Aug 31 08:02:17 2004
From: decoret at graphics.lcs.mit.edu (xadeck)
Date: Mon Dec 20 16:17:13 2004
Subject: [antlr-interest] Multiplexing questions
Message-ID: <ch23tp+m4ul@eGroups.com>

 I am stuck with multiplexing + I have miscelleanous small questions
for which I am requesting your help

Let's consider the following text file that I want to parse:

java
{
 // some java code
}
c++
{
 // some c++ code
}

The structure is pretty obvious. I assume I have a java lexer/parser
and a cxx lexer/parser. Trying to reuse them, I make the following
grammar:
options {
   language="Cpp";
}
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
class multiparser extends Parser;
options {}

file
   : (javablock | cxxblock)* EOF
   ;
javablock
   : JAVA LBRACE
       {
           javaparser p(getInputState());
           p.parse();
       }
       RBRACE
   ;
cxxblock
   : CPP LBRACE
       {
           cppparser p(getInputState());
           p.parse();
       }
       RBRACE
   ;
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
class multilexer extends Lexer;
options
{
}

LBRACE: '{';
RBRACE: '}';
JAVA:   "java";
CXX:    "c++";

Now for the first problem: from what I understand of the example given
in the manual, the above lexer should switch a selector by pushing the
java lexer when we start the javablock, and pushing the cxx lexer when
we start a cxxblock. I also understand that switching lexers should
*not* be done in the parser (it was reminded in a recent thread about
"rewinding tokens"). So in my example, I should switch the selector
somewhere in the lexer, probably inLBRACE rule:
LBRACE: '{'
                {
                     selector.push("???");
                }
The problem is that in that rule, I cannot know which lexer to select!
This info is a semantic/parser one. And I do not want the lexer to
keep a pointer on the parser, do I?

The second problem is similar. Again from the example, I understand
that the popping of the selector should be done in the java/cxx
lexers. The problem is again that those lexers do not know that the
parsing of the java/cxx part is finished. In the manual example, the
termination of a "lexer part" is indicated by a very specific token
(such as //@} ) so lexers can catch them and pop the selector. But in
my example, the end of the block is indicated by } which is also a
regular (and widely used!) token of the java/cxx grammars. So I *have
to* do the popping of the selector in the parser !?!? Am I right? But
in that case, it does not work (I am trying it without success)
because of token lookahead (I understand that the "closing }" is eaten
by the java/cxx lexer and therefore not found by the multilexer when
the selector switch backs to it.

Any help on how to solve this (I believe rather simple) example? 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From gcpa-antlr-interest at m.gmane.org  Tue Aug 31 08:21:35 2004
From: gcpa-antlr-interest at m.gmane.org (Michael Stahl)
Date: Mon Dec 20 16:17:14 2004
Subject: [antlr-interest] RE: Re: Re: yet another java 1.5 grammar
References: <pan.2004.08.25.18.02.07.162330@informatik.uni-ulm.de> <000e01c48e75$44bef6a0$e7485651@Baboo>
Message-ID: <pan.2004.08.31.15.21.35.549761@informatik.uni-ulm.de>

On Mon, 30 Aug 2004 11:39:38 +0100, Michael Studman wrote:
> Hi all.
> 
> I've updated my Java 1.5 grammar hosted on ANTLR to address the issues
> Michael Stahl outlined in a previous email. In addition I fixed a few
> other bugs, did some refactoring of types to maximise reuse and
> integrated his excellent switchable enum/assert keyword checking.

cool! but it seems like you missed one...
in rule postfixExpression:
DOT "super"    should be    DOT typeArguments? "super"
(which will make some refactoring necessary there)

> Here are some problems I found with his grammar:
> 
> * It does not allow annotations of form: @MyAnnotation() (it expects at
> least one parameter)

fixed.

> * It does not allow annotation array member initialisations with other
> annotations @MyAnno(something = { @MyOtherAnno() })

fixed.

> * It does not support annotation fields with C-style array syntax:
> @interface MyAnno
> {
> 	int name4()[]; //vs int[] name4();
> }

afaik this is correct, i.e. the above example is invalid.
see the draft of jls 3rd ed. that is in jsr14 public final draft
chapter 9 page 13 (page 271):
in production AnnotationTypeElementDeclaration, the only thing
that can follow the pair of parens is DefaultValue_opt.

> * There seems to be some weird incompatibility between the recogniser
> and the tree parser w.r.t. enum constant invocations (enum constant
> initialisers)
> e.g.
> public enum MyEnum
> {
> 	CONSTANT1(123);
> }
> seems to pass in the recognizer but fails in the tree parser.

ouch. when i first did the enums, i thought that is nothing but
a constructor invocation. then suddenly constructors grow type
parameters, and my neat hack falls to pieces...
fixed.

> * It is possibly too lenient with enum definitions: it allows enum
> constants to have static initialisers and constructors.
> 
> * It's possibly too lenient with variable-length arguments: it allows
> them at any position in a variable list (mine only allows it at the end
> of a variable list) and it also allows it in variables defined within
> "for" and "catch" productions.
> 
> * It accepts parameters that are declared final more than once.
> 
> These last three points probably aren't major ones and would be checked
> elsewhere in a compiler etc but I thought I'd mention them as my test
> suite highlighted these as differences between the two grammars.

well, i think those are best handled at the semantic level, so
these are "wontfix".

> Regards,
> Michael Studman.

thanks,
michael stahl

PS: now how do i upload my fixed grammar? there is no "update grammar"
button that i can see... shold i just add it again and hope someone
removes the old one? or should i mail it to someone who can update?
: now how do i upload my fixed grammar? there is no "update grammar"



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From mstudman at gmx.net  Tue Aug 31 09:37:44 2004
From: mstudman at gmx.net (Michael Studman)
Date: Mon Dec 20 16:17:14 2004
Subject: [antlr-interest] RE: Re: Re: yet another java 1.5 grammar
In-Reply-To: <pan.2004.08.31.15.21.35.549761@informatik.uni-ulm.de>
Message-ID: <001301c48f78$d7b86550$0100a8c0@Baboo>

Hi Michael.

> cool! but it seems like you missed one...
> in rule postfixExpression:
> DOT "super"    should be    DOT typeArguments? "super"
> (which will make some refactoring necessary there)

I must have overlooked this, I'll check it out.

> > * It does not support annotation fields with C-style array syntax:
> > @interface MyAnno
> > {
> > 	int name4()[]; //vs int[] name4();
> > }
> 
> afaik this is correct, i.e. the above example is invalid.
> see the draft of jls 3rd ed. that is in jsr14 public final draft
> chapter 9 page 13 (page 271):
> in production AnnotationTypeElementDeclaration, the only thing
> that can follow the pair of parens is DefaultValue_opt.

If you're following the letter of the spec, then yes, you are correct
since the production for annotation fields makes no reference to this
antiquated syntactic variant. Similarly, the production for interface
methods (JLS 3rd ed. 9.4) makes no reference to it either. The
production for class fields, of course, allows this (8.4.1).

The reality is that every javac compiler I've used has allowed interface
methods to use this syntax in addition to the valid use on class
methods. Similarly, the javac that shipped with JDK 1.5 beta 2 allows
this syntax on annotation fields hence why I included it in my grammar.

I'm going to keep it in my grammar for the time being. I think it's
better to be slightly more lenient yet in-sync with the most popular
compiler than to follow the spec to its letter but reject source that is
accepted by the said compiler (unless, of course, you want to build a
precisely compliant compiler). If the next beta/full release of the
JDK/javac cans this unspecified syntax acceptance then there's no real
reason to keep it in my grammar.

If you don't want to include it in yours then the consistent approach
would probably be to remove this from interface methods too.

> 
> PS: now how do i upload my fixed grammar? there is no "update grammar"
> button that i can see... shold i just add it again and hope someone
> removes the old one? or should i mail it to someone who can update?
> : now how do i upload my fixed grammar? there is no "update grammar"
> 

Send to Terrence and he'll update it for you.

Michael.

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.745 / Virus Database: 497 - Release Date: 27/08/2004
 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From joanpujol at gmail.com  Tue Aug 31 09:36:35 2004
From: joanpujol at gmail.com (Joan Pujol)
Date: Mon Dec 20 16:17:14 2004
Subject: [antlr-interest] Warning. Signature has changed.
Message-ID: <d2d18a1040831093672ce87ab@mail.gmail.com>

I have a tree parser that extends another:

P2 extends P1

In P2 I have:
decvariable: #(DECVARIABLE IDENTIFICADOR IDENTIFICADOR (expressio)?);

and in P1:
decvariable returns [boolean error=false]: #(DECVARIABLE
nom:IDENTIFICADOR nomtipus:IDENTIFICADOR (expressio)?)

(I have added a return value)

ANTLR gives me this warning:
      warning: rule P2.decvariable has different signature than
AnalitzadorBaseAST.decvariable

Can I ignore this warning or this warning have some consequences I need to know?

-- 
Joan Jes?s Pujol Espinar


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From andrew at adersoftware.com  Tue Aug 31 16:07:24 2004
From: andrew at adersoftware.com (Andrew Deren)
Date: Mon Dec 20 16:17:14 2004
Subject: [antlr-interest] Another StringTemplate Engine
In-Reply-To: <d2d18a1040831093672ce87ab@mail.gmail.com>
Message-ID: <200408311704583.SM00276@ANDREWD>

I just wanted to announce that I wrote another string template engine. I
wanted to use antlr engine, but found syntax hard to understand. 
You can find more info about it at
http://www.adersoftware.com/?page=templateEngine
Basically it does what StringTemplate does, plus some more stuff (and some
less) and syntax is more like XML (actually like Cold Fusion if anyone knows
it).
Originally I used antlr as lexer/parser, but ended writing my own mostly
because I found some construct hard or cumbersome to do using antlr.
Currently it only works with .net 2.0, but I'm working on 1.1 port and java
version.
Sorry if this is a little off-topic, but maybe someone will find this
useful, as I already used it for several of my projects.
Andrew



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

From parrt at cs.usfca.edu  Tue Aug 31 16:51:20 2004
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 20 16:17:14 2004
Subject: [antlr-interest] Another StringTemplate Engine
In-Reply-To: <200408311704583.SM00276@ANDREWD>
References: <200408311704583.SM00276@ANDREWD>
Message-ID: <A828A814-FBA8-11D8-B3EA-000A95891192@cs.usfca.edu>

Hi Andrew,

Seems interesting.  I take it the enforcing separation philosophy was 
not a prime consideration for your derivative because of the equals 
operation you allow etc...?

Ter

On Aug 31, 2004, at 4:07 PM, Andrew Deren wrote:

> I just wanted to announce that I wrote another string template engine. 
> I
> wanted to use antlr engine, but found syntax hard to understand.
> You can find more info about it at
> http://www.adersoftware.com/?page=templateEngine
> Basically it does what StringTemplate does, plus some more stuff (and 
> some
> less) and syntax is more like XML (actually like Cold Fusion if anyone 
> knows
> it).
> Originally I used antlr as lexer/parser, but ended writing my own 
> mostly
> because I found some construct hard or cumbersome to do using antlr.
> Currently it only works with .net 2.0, but I'm working on 1.1 port and 
> java
> version.
> Sorry if this is a little off-topic, but maybe someone will find this
> useful, as I already used it for several of my projects.
> Andrew
>
>
>
>
> Yahoo! Groups Links
>
>
>
>
>
>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com
Cofounder, http://www.knowspam.net enjoy email again!





 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
    http://groups.yahoo.com/group/antlr-interest/

<*> To unsubscribe from this group, send an email to:
    antlr-interest-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
    http://docs.yahoo.com/info/terms/
 

