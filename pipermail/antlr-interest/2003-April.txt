From Anthony.Youngman at ECA-International.com  Tue Apr  1 02:56:28 2003
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Treewalking : non-determinism error
Message-ID: <0EF9DEABA42FE547BAE43D0298F146B23DD5D5@ESP.eca-international.local>

Skipped content of type multipart/alternative
From klaren at cs.utwente.nl  Tue Apr  1 03:25:47 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Parse tree error messages.
In-Reply-To: <5DEEF5A894731F4B92D58E2FC37EB28A0614F6@etdema1.embarcadero.com>; from Trey.Spiva@embarcadero.com on Fri, Mar 28, 2003 at 05:41:24AM -0700
References: <5DEEF5A894731F4B92D58E2FC37EB28A0614F6@etdema1.embarcadero.com>
Message-ID: <20030401132547.C15053@cs.utwente.nl>

Hi,

On Fri, Mar 28, 2003 at 05:41:24AM -0700, Trey Spiva wrote:
> When parsing a file the recognizers report pretty good error messages.
> However, when using parse trees the error messages are very cryptic.  Is
> here a way to have the tree parser at least report the token AST type
> that it is expecting and the AST type that if found.
>
> The error message that the tree parser is reporting is:
>
> <AST> : unexpected AST node: <ASTNULL>

During development with treewalkers I usually have in each rule a exception
handler that prints out the offending tree. Something like this:

rule:
( sumthin ) *
sumthin_else
;
exception
catch [antlr::RecognitionException &ex]
{
	print_tree<RefMyAST,MyTreeParser> pr(*this);
	pr.pr_tree(#rule_in);
}

You can get the print_tree thing here:

http://wwwhome.cs.utwente.nl/~klaren/print_tree.h

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Chaos always defeats order because it is better organized.
  --- Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From chantal.ackermann at web.de  Tue Apr  1 04:19:36 2003
From: chantal.ackermann at web.de (thereisnofreeid)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] recursive semantic scanning (recursive lookahead?)
Message-ID: <b6c04o+sdjd@eGroups.com>

hello all,

I want to do the following:

1. Split a sentence into words
2. check whether a word is equal to a certain term, or whether it is
the beginning of a certain term (if the phrase is a term). In the
latter case, checking should be recursive to detect when several words
match one term.
3. all words shall be counted (if a phrase is detected, it counts as one).

I have no problems with point 1 (done in the Lexer) and 3 (done in the
Parser). For 2, I am stuck with the following code (in the lexer):

TERM1
	:	{ searchedTerms.equalsFirstTerm($getText()) }? PART_TERM1
	|	{ searchedTerms.equalsFirstTerm($getText()) }? WORD
	// reset token type for terms that start like but are not equal to term1
	|	PART_TERM1 { $setType(Token.WORD); }
	;

protected PART_TERM1
	:	( pt:PART_TERM1 WS w:WORD
		{ searchedTerms.firstTermStartsWith(pt.getText() + " " +
w.getText()) }? )
			=> ( PART_TERM1 )
	|	( { searchedTerms.firstTermStartsWith($getText()) }? WORD ) => (
PART_TERM1 )
	//|	( PART_TERM1 WS )* WORD
	;

(I get infinite recursion messages from antlr with this code.)

searchedTerms is an instance of a custom java class that does specific
string operations. searchedTerms stores several terms that can match
the so-called "first term" (which is rather a set of terms with equal
meaning). searchedTerms will be provided during runtime, thus I cannot
hard code any terms into the lexer/parser.

My problems are:

- where shall I do the checking - in the Lexer, while recognizing the
words? or in the parser, after splitting into words?
- how can I tell the lexer (or parser) that if the word is the
beginning of the term (rule PART_TERM1), it shall try to match the
term (rule TERM1), or concatenate it and try matching again (first
with PART_TERM1, than with TERM1) and so on, until PART_TERM1 _and_
TERM1 both "return true" (well, match). and if they do not match, all
words shall get the type token and be send to the parser for counting.

Or shall I rather make one (protected) rule that does all the checking
and returns some value to indicate the result (that has just come to
my mind).

Maybe there is already lots of sample code around but I don't know the
terms that would describe it and that I could use to search for it.

Thanks for your help
Chantal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Anthony.Youngman at ECA-International.com  Tue Apr  1 06:23:07 2003
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Treewalking : non-determinism error
Message-ID: <0EF9DEABA42FE547BAE43D0298F146B23DD5D7@ESP.eca-international.local>

Skipped content of type multipart/alternative
From klaren at cs.utwente.nl  Tue Apr  1 06:39:44 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Treewalking : non-determinism error
In-Reply-To: <0EF9DEABA42FE547BAE43D0298F146B23DD5D5@ESP.eca-international.local>; from Anthony.Youngman@ECA-International.com on Tue, Apr 01, 2003 at 11:56:28AM +0100
References: <0EF9DEABA42FE547BAE43D0298F146B23DD5D5@ESP.eca-international.local>
Message-ID: <20030401163944.D15053@cs.utwente.nl>

Hi,

On Tue, Apr 01, 2003 at 11:56:28AM +0100, Anthony Youngman wrote:
> I think I know what the problem is, I just don't know how to fix it ...
> 
> In my main parser, I have the following two rules:
> 
> printst : (pr:"PRINT"^ expr (COLONPRINT)? {System.out.println(pr+" print
> ");} );
> expr : ( catexpr | logicexpr ) ;
> 
> This seems to be fine - the traces are printing what I expect.
> 
> In my treewalker I then have the rule:
> 
> printst
> 	: #(PRINT expr COLONPRINT) {System.out.println("PRNT");}
> 	| #(PRINT expr) {System.out.println("OUTP");}
> 	;

Provided I don't have a coffee shortage or overdose ;)

Tree parsers only use a lookahead of 1 so the above rule will indeed give
nondeterminism. One way to fix it might be:

printst
 	: ( #(PRINT expr COLONPRINT) ) => #(PRINT expr COLONPRINT) {System.out.println("PRNT");}
 	| #(PRINT expr) {System.out.println("OUTP");}
 	;

Alternatively:

printst { bool colon = false; }
	: #(PRINT expr ( COLONPRINT { colon = true; } )? )
		{
			if( colon )
				System.out.println("PRNT");
			else
				System.out.println("OUTP");
		}
	;

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "You know how to use that thing?" [pointing to the sword]
  "Sure.. The pointy end goes into the other guy."
  --- The Mask of Zorro


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Apr  1 08:30:44 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Treewalking : non-determinism error
Message-ID: <170826586F3BD511910D0200C110AAA805402277@memail03.bco-home.com>

Try to make the important parts of the tree come first by signaling it at
the root, because tree parsers only have k=1 lookahead.  Ric showed how to
fix it in the treeparser, which is ok, but clearly more coffee is needed :)
I recommend fixing it in the parser to make your treeparser as simple as
possible.

First define an imaginary token OUTP.

parser:
printst : (pr:"PRINT"^ expr (COLONPRINT {##.setType(OUTP)})?  );

treeparser:
printst: #(PRINT {System.out.println("PRNT");} expr) 
		| #(OUTP {System.out.println("OUTP");} expr) 

Note that if you are actually outputting code you probably want the "PRNT"
to be printed before the expr, so I put the action in the right place for
that.

Monty

-----Original Message-----
From: Ric Klaren [mailto:klaren@cs.utwente.nl]
Sent: Tuesday, April 01, 2003 6:40 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Treewalking : non-determinism error


Hi,

On Tue, Apr 01, 2003 at 11:56:28AM +0100, Anthony Youngman wrote:
> I think I know what the problem is, I just don't know how to fix it ...
> 
> In my main parser, I have the following two rules:
> 
> printst : (pr:"PRINT"^ expr (COLONPRINT)? {System.out.println(pr+" print
> ");} );
> expr : ( catexpr | logicexpr ) ;
> 
> This seems to be fine - the traces are printing what I expect.
> 
> In my treewalker I then have the rule:
> 
> printst
> 	: #(PRINT expr COLONPRINT) {System.out.println("PRNT");}
> 	| #(PRINT expr) {System.out.println("OUTP");}
> 	;

Provided I don't have a coffee shortage or overdose ;)

Tree parsers only use a lookahead of 1 so the above rule will indeed give
nondeterminism. One way to fix it might be:

printst
 	: ( #(PRINT expr COLONPRINT) ) => #(PRINT expr COLONPRINT)
{System.out.println("PRNT");}
 	| #(PRINT expr) {System.out.println("OUTP");}
 	;

Alternatively:

printst { bool colon = false; }
	: #(PRINT expr ( COLONPRINT { colon = true; } )? )
		{
			if( colon )
				System.out.println("PRNT");
			else
				System.out.println("OUTP");
		}
	;

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++----
---
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++----
---
  "You know how to use that thing?" [pointing to the sword]
  "Sure.. The pointy end goes into the other guy."
  --- The Mask of Zorro


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From antlrlist at yahoo.com  Tue Apr  1 09:08:26 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] about the paraphrase option...
Message-ID: <b6ch2a+ees4@eGroups.com>

SHORT VERSION OF THIS POST
   - ?Shouldn't the "paraphrase" option be available for tokens
defined in the "tokens" section?
   - ?Why the options for a token in the tokens section are
enclosed
with "<" and ">" instead of "options {" and "}", like in the rest?


LONG VERSION OF THIS POST

Hi to everyone!

I'm a spanish student of Computer Sience here at Sevilla University.
My end-of-studies project is about ANTLR. Right now I've written down
160 pages of documentation aprox., and I'm planning to reach 200. Of
course I'll post it here when it's finished, but keep in mind that
it's in spanish...

There's this chapter about error recovery. ANTLR's default error
recovery strategy is difficult to improve, so I've pointed some others
(like FIRST-and-FOLLOW instead or only FOLLOW, and synchronizing
symbols). Then I concentrated on message printing. That's where I talk
about the "paraphrase" option.

This option lets you define a "token name" to be used when an error is
thrown. For example, in identifiers:

------------------------------------------------------------
IDENT
options { paraphrase="an identifier"; }
   : (LETTER|'_') (LETTER|'_'|DIGIT)*
   ;
------------------------------------------------------------

It allows generating error messages like "an identifier is missing",
instead of "IDENT is missing".

I'm trying to use paraphrase whenever possible, and I'm having
problems. The grammar I'm using recognizes both real (LIT_REAL) and
integer (LIT_INT) literals. For lookahead problems, I'm forced to
recognize both in the same rule, LIT_NUMBER, like this:

------------------------------------------------------------
class myLexer extends Lexer ;
[...]
tokens {
[...]
   LIT_REAL; LIT_REAL;
}
[...]
LIT_NUMBER
   : ( (DIGIT)+ '.' ) =>
      (DIGIT)+ '.' (DIGIT)+
      { $setType(LIT_REAL); }
   | (DIGIT)+
     { $setType(LIT_INT); }
   ;
------------------------------------------------------------

My question is simple: How do I add a paraphrase to LIT_REAL and
LIT_INT?

I feel that the best and simplest solution would be allowing the use
of paraphrase in the tokens section, this way:

------------------------------------------------------------
tokens{
   LIT_INT  <paraphrase="an integuer"; >;
   LIT_REAL <paraphrase="a real"; >;
}
------------------------------------------------------------

That doesn't work; paraphrase is not a valid option for the tokens
section - it should, should'nt it? It appears that only tokens defined
with a rule can benefit from it.

(BTW, why the way options are specified in the tokens section are
different from the rest? This is, why use "<" and ">" when we have
"options {" and "}" in the rest?)

If somebody has this problem, I'm using this crude hack, consisting in
defining rules that are never used:

------------------------------------------------------------
class myLexer extends Lexer ;
[...]
tokens {...} // it does not contain LIT_INT or LIT_REAL any more
[...]
LIT_NUMBER : ... ; // doesn't change

LIT_REAL
options { paraphrase="a real"; }
   : '%'          // Unused char
     { false }?   // Use this or throw a CharScannerException
   ;

LIT_INT
options { paraphrase="an integuer"; }
   : '@'          // Unused char
     { false }?   // Use this or throw a CharScannerException
   ;
------------------------------------------------------------

So the final question is : ?how do I add paraphrasing to my
numbers?
?Should I modify antlr to accept paraphrasing in the tokens
section?
If yes, how? Or should I modify my grammar somehow?

Any thoughts are wellcome. Thanks!

Enrique.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Anthony.Youngman at ECA-International.com  Wed Apr  2 00:42:32 2003
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Treewalking : non-determinism error
Message-ID: <0EF9DEABA42FE547BAE43D0298F146B23DD5DF@ESP.eca-international.local>

Skipped content of type multipart/alternative
From m_schellens at hotmail.com  Wed Apr  2 02:16:57 2003
From: m_schellens at hotmail.com (marcschellens)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] My ASTNode gets deleted more than once
Message-ID: <b6edap+94sm@eGroups.com>

I wrote using ANTLR 2.7.1 with C++ an parser and a TreeParser.
I retrieve the trees from them via the getAST() method.
I use my own AST and AST factory in the manner Peter Morling
described.
But when the RefAST variables who store the AST (from getAST())
go out of scope, at least one node (possibly all, haven't checked)
gets deleted more than once.
How could this be?
thanks,
regards,
marc


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Wed Apr  2 03:34:09 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Re: How to add the initial code into the Lexer/Parser's constructor
In-Reply-To: <20030331145711.66320.qmail@web20422.mail.yahoo.com>
Message-ID: <b6ehrh+4g51@eGroups.com>


If you want to initialize non-static variables, you'll probably need 
to override the default constructor. See the noconstructor option in 
the docs.


--- In antlr-interest@yahoogroups.com, Matt Benson <gudnabrsam@y...> 
wrote:
> I only use Java, but you can include custom Java code
> in a set of curly/french braces {} after the
> declaration of your class:
> 
> class P extends Parser;
> 
> options {}
> 
> {
> //custom parser code
> }
> 
> class L extends Lexer;
> options {}
> 
> {
> //custom lexer code
> }
> 
> -Matt
> 
> 
> --- zai-qiang.leng@s... wrote:
> > Hi, all,
> > 
> > I want to init some variables in the Lexer/Parser's
> > constructor and deinit
> > it in their destructor.  How can I achieve this?  I
> > mean whether there
> > exists some special sections or keywords that allow
> > me to write the
> > init/deinit code in the grammar file.
> > 
> > Thanks
> > Zaiqiang
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
> __________________________________________________
> Do you Yahoo!?
> Yahoo! Platinum - Watch CBS' NCAA March Madness, live on your 
desktop!
> http://platinum.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From chantal.ackermann at web.de  Wed Apr  2 04:09:25 2003
From: chantal.ackermann at web.de (thereisnofreeid)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Re: recursive semantic scanning (recursive lookahead?)
In-Reply-To: <b6c04o+sdjd@eGroups.com>
Message-ID: <b6ejtl+580j@eGroups.com>

hi again,

I have come up with a new idea but I am still stuck with infinite
recursion messages. I moved the term decision logic to the parser. the
lexer just splits the input into WORD tokens. in the parser I have the
following rules:

protected startTerm
	:	( { searchedTerms.firstTermStartsWith(LT(1).getText() + ' ' +
LT(2).getText()) }?
			( startTerm WORD ) ) => startTerm
	|	( { searchedTerms.secondTermStartsWith(LT(1).getText() + ' ' +
LT(2).getText()) }?
			( startTerm WORD ) ) => startTerm
	|	( { searchedTerms.firstTermStartsWith(LT(1).getText()) }?
			( WORD ) ) => startTerm
	|	( { searchedTerms.secondTermStartsWith(LT(1).getText()) }?
			( WORD ) ) => startTerm
	;

protected term1
	:	( { searchedTerms.equalsFirstTerm(LT(1).getText() + ' ' +
LT(2).getText()) }?
			( startTerm WORD ) ) => term1
	|	( { searchedTerms.equalsFirstTerm(LT(1).getText()) }?
			( WORD ) ) => term1
	;

protected term2
	:	( { searchedTerms.equalsSecondTerm(LT(1).getText() + ' ' +
LT(2).getText()) }?
			( startTerm WORD ) ) => term2
	|	( { searchedTerms.equalsSecondTerm(LT(1).getText()) }?
			( WORD ) ) => term2
	;

protected term
	:	( WORD ) => term
	;

I get inifinite recursions for term1, term2 and term. Well, I want to
implement an recursion, but how can I tell the parser to stop the
iteration whenever the equals methods return false? that still does
not solve the problem that startTerm is just a helper token and if
startTerm is not recognized as part of term1 or term2 the WORD tokens
it consists of shall be marked as term tokens. as I write this, I
think, it is not possible to do this in any way. or could a TreeParser
provide some more means to do this?

thanks for any input
Chantal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Apr  2 08:02:18 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Treewalking : non-determinism error
Message-ID: <170826586F3BD511910D0200C110AAA805402286@memail03.bco-home.com>

I was assuming that you wanted to emit code that was for human consumption.
What are you making, an interpreter?  Postfix should be easier than infix.
The real question is if you want to bother with a tree parser for it.
Printing a tree postfix is a simple textbook excersize--assuming you create
the proper tree (which I heartily advocate.)

Monty

-----Original Message-----
From: Anthony Youngman [mailto:Anthony.Youngman@ECA-International.com]
Sent: Wednesday, April 02, 2003 12:43 AM
To: 'antlr-interest@yahoogroups.com'
Subject: RE: [antlr-interest] Treewalking : non-determinism error


Thanks Ric. Works a treat (I hope). 
By the way, Monty, why if I'm outputting code would I want to have my PRINT
before my EXPR? If my PRINT comes first, surely it hasn't yet got an EXPR to
print?
Okay okay, I know everybody thinks in infix, but postfix or rpn is a damn
sight easier to handle. Can I give you some advice? Namely it doesn't pay to
jump to conclusions :-) You're dealing with a guru here (just that he knows
bugger-all about Java or Antlr :-)
My next difficult task will be making the compiler chuck everything out IN
POSTFIX. 
Cheers, 
Wol 
-----Original Message----- 
From: Ric Klaren [mailto:klaren@cs.utwente.nl] 
Sent: 01 April 2003 15:40 
To: antlr-interest@yahoogroups.com 
Subject: Re: [antlr-interest] Treewalking : non-determinism error 


Hi, 
On Tue, Apr 01, 2003 at 11:56:28AM +0100, Anthony Youngman wrote: 
> I think I know what the problem is, I just don't know how to fix it ... 
> 
> In my main parser, I have the following two rules: 
> 
> printst : (pr:"PRINT"^ expr (COLONPRINT)? {System.out.println(pr+" print 
> ");} ); 
> expr : ( catexpr | logicexpr ) ; 
> 
> This seems to be fine - the traces are printing what I expect. 
> 
> In my treewalker I then have the rule: 
> 
> printst 
>       : #(PRINT expr COLONPRINT) {System.out.println("PRNT");} 
>       | #(PRINT expr) {System.out.println("OUTP");} 
>       ; 
Provided I don't have a coffee shortage or overdose ;) 
Tree parsers only use a lookahead of 1 so the above rule will indeed give 
nondeterminism. One way to fix it might be: 
printst 
        : ( #(PRINT expr COLONPRINT) ) => #(PRINT expr COLONPRINT)
{System.out.println("PRNT");} 
        | #(PRINT expr) {System.out.println("OUTP");} 
        ; 
Alternatively: 
printst { bool colon = false; } 
        : #(PRINT expr ( COLONPRINT { colon = true; } )? ) 
                { 
                        if( colon ) 
                                System.out.println("PRNT"); 
                        else 
                                System.out.println("OUTP"); 
                } 
        ; 
Cheers, 
Ric 
-- 
-----+++++*****************************************************+++++++++----
--- 
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ---- 
-----+++++*****************************************************+++++++++----
--- 
  "You know how to use that thing?" [pointing to the sword] 
  "Sure.. The pointy end goes into the other guy." 
  --- The Mask of Zorro 


 
Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



This transmission is intended for the named recipient only. It may contain
private and confidential information. If this has come to you in error you
must not act on anything disclosed in it, nor must you copy it, modify it,
disseminate it in any way, or show it to anyone. Please e-mail the sender to
inform us of the transmission error or telephone ECA International
immediately and delete the e-mail from your information system.
Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911
7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1
212 582 2333.

Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Thu Apr  3 00:07:54 2003
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Treewalking : non-determinism error
Message-ID: <0EF9DEABA42FE547BAE43D0298F146B23DD5E2@ESP.eca-international.local>

Skipped content of type multipart/alternative
From diver7 at mail.ru  Thu Apr  3 01:11:29 2003
From: diver7 at mail.ru (dk0879)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] beginner question
Message-ID: <b6gts1+l3em@eGroups.com>


  Can somebody explain to me is it possible to write
  simple grammar to parse content like this:

  ---
  /* any symbols - comments */

  any symbols except comments open tag '/*' - program text

  /* any symbols - comments */

  any symbols except comments open tag '/*' - program text

  ...
  ---
  
  without detail defining grammar for a comments or a
  program text?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Thu Apr  3 01:36:42 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] My ASTNode gets deleted more than once
In-Reply-To: <b6edap+94sm@eGroups.com>; from m_schellens@hotmail.com on Wed, Apr 02, 2003 at 10:16:57AM -0000
References: <b6edap+94sm@eGroups.com>
Message-ID: <20030403113642.G15053@cs.utwente.nl>

Hi,

On Wed, Apr 02, 2003 at 10:16:57AM -0000, marcschellens wrote:
> I wrote using ANTLR 2.7.1 with C++ an parser and a TreeParser.
> I retrieve the trees from them via the getAST() method.
> I use my own AST and AST factory in the manner Peter Morling
> described.
> But when the RefAST variables who store the AST (from getAST())
> go out of scope, at least one node (possibly all, haven't checked)
> gets deleted more than once.
> How could this be?

This is with 'vanilla' usage? Or are you doing special stuff? Feel free to
send me a tarball/zip with all the stuff that demonstrates the problem.
(preferably something that runs on unix)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  Wo das Chaos auf die Ordnung trifft, gewinnt meist das Chaos, weil es
  besser organisiert ist. --- Friedrich Nietzsche


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gitadut at yahoo.co.uk  Thu Apr  3 04:23:41 2003
From: gitadut at yahoo.co.uk (=?iso-8859-1?q?gita=20roy?=)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Re: Rules for STRING, CHAR, DIGIT
Message-ID: <20030403122341.64648.qmail@web20504.mail.yahoo.com>


Hi, 

I am new to Antlr and using C++ to parse some file having Identifiers as digits, Strings (starting with alphabets), char (starting with digits)

Add an IDENTIFIER rule and ANTLR can then check the text against the literals table.

In my case I want the one IDENTIFIER rule, lets say rule for DIGIT: 

. 

 

DIGIT : (?0?..?9?)+

;

 

And in another IDENTIFIER like STRING I define the rule:

 

STRING : ((?A?..?Z?) (?%?)? (?0?..?9?))+ 

;

 

My purpose will be to parse some token ?Circuit12? as STRING and at the same time some token may checked as DIGIT.  In third case I need to verify some token as CHAR whose first position may or may not be digits. 

 

So lexer class is as follows: 

 

 class MyLexer extends Lexer;

options {

k=10;

filter=true;

} 

 

DIGIT

            : (('0'..'9')+

            ;

 

STRING : ((?A?..?Z?) (?%?)? (?0?..?9?))+ 

;

 

CHAR

            : ((DIGIT)? STRING)+

            ;

 

Add all IDENTIFIER rules and ANTLR can then check the text against the literals table, but for the case of char antlr is giving error. 

 

   The rule methods like mDIGIT are missing in MyLexer.cpp. 

 

 

   How can I check the identifier Circuit12, 12, 12Circuit, using the abovedefined rules. 

 

Please help. 

 

Thanks in advance. 

 

Gita  




---------------------------------
Yahoo! Mail - For a better Internet experience
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030403/338d1653/attachment.html
From gitadut at yahoo.co.uk  Thu Apr  3 04:24:16 2003
From: gitadut at yahoo.co.uk (=?iso-8859-1?q?gita=20roy?=)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Re: Rules for STRING, CHAR, DIGIT
Message-ID: <20030403122416.13366.qmail@web20510.mail.yahoo.com>


Hi, 

I am new to Antlr and using C++ to parse some file having Identifiers as digits, Strings (starting with alphabets), char (starting with digits)

Add an IDENTIFIER rule and ANTLR can then check the text against the literals table.

In my case I want the one IDENTIFIER rule, lets say rule for DIGIT: 

. 

 

DIGIT : (?0?..?9?)+

;

 

And in another IDENTIFIER like STRING I define the rule:

 

STRING : ((?A?..?Z?) (?%?)? (?0?..?9?))+ 

;

 

My purpose will be to parse some token ?Circuit12? as STRING and at the same time some token may checked as DIGIT.  In third case I need to verify some token as CHAR whose first position may or may not be digits. 

 

So lexer class is as follows: 

 

 class MyLexer extends Lexer;

options {

k=10;

filter=true;

} 

 

DIGIT

            : (('0'..'9')+

            ;

 

STRING : ((?A?..?Z?) (?%?)? (?0?..?9?))+ 

;

 

CHAR

            : ((DIGIT)? STRING)+

            ;

 

Add all IDENTIFIER rules and ANTLR can then check the text against the literals table, but for the case of char antlr is giving error. 

 

   The rule methods like mDIGIT are missing in MyLexer.cpp. 

 

 

   How can I check the identifier Circuit12, 12, 12Circuit, using the abovedefined rules. 

 

Please help. 

 

Thanks in advance. 

 

Gita  




---------------------------------
Yahoo! Mail - For a better Internet experience
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030403/1e8ed79c/attachment.html
From Anthony.Youngman at ECA-International.com  Thu Apr  3 07:19:02 2003
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Non-determinism (again :-(
Message-ID: <0EF9DEABA42FE547BAE43D0298F146B23DD5E9@ESP.eca-international.local>

Skipped content of type multipart/alternative
From mzukowski at yci.com  Thu Apr  3 08:11:43 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] beginner question
Message-ID: <170826586F3BD511910D0200C110AAA80540228E@memail03.bco-home.com>

Sure, it's possible.  Take a look at the java.g grammar and copy its
COMMENT, STRING, WHITESPACE(might be called WS) and ID lexer rules.  Then
modify ID to allow the other characters you want to have in your text (like
'-').

Then ask more questions because you'll need to treat '/' alone specially but
it sounds like you're not quite ready for the details for that.

Also read the Ter's recent lectures.

Monty

-----Original Message-----
From: dk0879 [mailto:diver7@mail.ru]
Sent: Thursday, April 03, 2003 1:11 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] beginner question



  Can somebody explain to me is it possible to write
  simple grammar to parse content like this:

  ---
  /* any symbols - comments */

  any symbols except comments open tag '/*' - program text

  /* any symbols - comments */

  any symbols except comments open tag '/*' - program text

  ...
  ---
  
  without detail defining grammar for a comments or a
  program text?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From shivatk at yahoo.co.uk  Thu Apr  3 11:09:48 2003
From: shivatk at yahoo.co.uk (shivatk)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Can I use ANTLR to build a tree from C code
Message-ID: <b6i0ts+43hg@eGroups.com>

Hi all,
 
 My name is Shiva. I have joined the group today. I have been working 
on 'Program Analysis', 'Reverse Engineering', 'Migration and 
restructuring tools' and similar language processing stuffs for the 
last 4 years. In all the areas the initial step is the same - build a 
tree from the source code. So, whether the code is in C, or in C++, 
or in COBOL we build the tree first. To do this we use 'yacc' based 
parser and our own internal tool to build the AST. Most of the 
actions in the parser are written to build the tree and capture other 
informations like line number, line pos, filename etc. 
 
 With regards to this I have a question to post. 
 
 Can I use ANTLR to do the same? I mean, can I use ANTLR to parse and 
build an AST out of C code? Will I be able to capture the line num, 
column position inormation in the tree nodes? And, will I be able to 
create associations between a tree node for a variable to its 
declaration in the symbol table?

 Hoping for an early reply from the group. 

Shiva



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From greenj at ix.netcom.com  Thu Apr  3 11:18:32 2003
From: greenj at ix.netcom.com (John Green)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Lexical k=3
Message-ID: <10055985.1049368712@localhost>


This one looks like it should be easy, but I can't figure it out, and
because of the larger context of my lexer, I haven't come up with a good
workaround. Any pointers from this good mailing list?

For k==2:'~' I don't think that it should be trying to enter *either* of
the two rules.

-----
C:\work\antlr>java -cp /progfile/antlr antlr.Tool test.g
ANTLR Parser Generator   Version 2.7.1+ (RK devel version)   1989-2000
jGuru.com

warning: lexical nondeterminism between rules TEST_ONE and TEST_TWO upon
test.g:0:       k==1:'~'
test.g:0:       k==2:'~'
test.g:0:       k==3:<end-of-token>,'~'
-----


-----
// test.g

class Test extends Lexer;
options {
	k=3;
}

TEST_ONE
	:
		(	('~')?
			(	' '
			|	'\t'
			|	'\f'
			|	'\n' { newline(); }
			|	'\r'
			)
		)+
	;

TEST_TWO
	:	(	'\\'|'/'|'#'|'%'
		|	"~\""
		|	"~\'"
		)
		(	'a'..'z'|'_'|'0'..'9'|'#'|'$'|'%'|'&'|'-'|'\\'|'/'
		|	"~\""
		|	"~\'"
		)+
	;
-----


Thanks,
John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Thu Apr  3 12:00:38 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Can I use ANTLR to build a tree from C code
In-Reply-To: <b6i0ts+43hg@eGroups.com>
Message-ID: <F079F97C-660E-11D7-80D6-000393BB647E@jguru.com>

Sure.  You can easily parse C and build an AST out of it.  The 
generated parser can be C#, C++, of Java.  I have just completed symbol 
table lectures at USF (audio to appear soon):

http://www.cs.usfca.edu/~parrt/course/652/index.html

Terence

On Thursday, April 3, 2003, at 11:09  AM, shivatk wrote:

> Hi all,
>
>  My name is Shiva. I have joined the group today. I have been working
> on 'Program Analysis', 'Reverse Engineering', 'Migration and
> restructuring tools' and similar language processing stuffs for the
> last 4 years. In all the areas the initial step is the same - build a
> tree from the source code. So, whether the code is in C, or in C++,
> or in COBOL we build the tree first. To do this we use 'yacc' based
> parser and our own internal tool to build the AST. Most of the
> actions in the parser are written to build the tree and capture other
> informations like line number, line pos, filename etc.
>
>  With regards to this I have a question to post.
>
>  Can I use ANTLR to do the same? I mean, can I use ANTLR to parse and
> build an AST out of C code? Will I be able to capture the line num,
> column position inormation in the tree nodes? And, will I be able to
> create associations between a tree node for a variable to its
> declaration in the symbol table?
>
>  Hoping for an early reply from the group.
>
> Shiva
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From greenj at ix.netcom.com  Thu Apr  3 12:58:14 2003
From: greenj at ix.netcom.com (John Green)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Re: Lexical k=3
In-Reply-To: <10055985.1049368712@localhost>
References: <10055985.1049368712@localhost>
Message-ID: <16039034.1049374694@localhost>

Oh, duh, I don't know how many times I've read the particular relevant FAQ
entry: "Can you explain more about ANTLR's tricky lexical lookahead issues
related to seeing past the end of a token definition into the start of
another?"

I don't think I've ever been bit by this before, so I guess I guess it just
never sank in. Sorry for posting before re-reading the FAQs.

John



--On 4/3/03 11:18 AM -0800 John Green wrote:

> 
> This one looks like it should be easy, but I can't figure it out, and
> because of the larger context of my lexer, I haven't come up with a good
> workaround. Any pointers from this good mailing list?
> 
> For k==2:'~' I don't think that it should be trying to enter *either* of
> the two rules.
> 
> -----
> C:\work\antlr>java -cp /progfile/antlr antlr.Tool test.g
> ANTLR Parser Generator   Version 2.7.1+ (RK devel version)   1989-2000
> jGuru.com
> 
> warning: lexical nondeterminism between rules TEST_ONE and TEST_TWO upon
> test.g:0:       k==1:'~'
> test.g:0:       k==2:'~'
> test.g:0:       k==3:<end-of-token>,'~'
> -----
> 
> 
> -----
> // test.g
> 
> class Test extends Lexer;
> options {
> 	k=3;
> }
> 
> TEST_ONE
> 	:
> 		(	('~')?
> 			(	' '
> 			|	'\t'
> 			|	'\f'
> 			|	'\n' { newline(); }
> 			|	'\r'
> 			)
> 		)+
> 	;
> 
> TEST_TWO
> 	:	(	'\\'|'/'|'#'|'%'
> 		|	"~\""
> 		|	"~\'"
> 		)
> 		(	'a'..'z'|'_'|'0'..'9'|'#'|'$'|'%'|'&'|'-'|'\\'|'/'
> 		|	"~\""
> 		|	"~\'"
> 		)+
> 	;
> -----
> 
> 
> Thanks,
> John
>  



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Apr  3 13:06:23 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Can I use ANTLR to build a tree from C code
Message-ID: <170826586F3BD511910D0200C110AAA805402295@memail03.bco-home.com>

See www.codetransform.com/gcc.html.  It builds an AST, preserves line & col,
has a symbol table, handles ANSI C & GCC extensions to C.  It's a complete
source to source transformation toolkit.  I'd love to hear what you end up
doing with it!

Monty

-----Original Message-----
From: shivatk [mailto:shivatk@yahoo.co.uk]
Sent: Thursday, April 03, 2003 11:10 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Can I use ANTLR to build a tree from C code


Hi all,
 
 My name is Shiva. I have joined the group today. I have been working 
on 'Program Analysis', 'Reverse Engineering', 'Migration and 
restructuring tools' and similar language processing stuffs for the 
last 4 years. In all the areas the initial step is the same - build a 
tree from the source code. So, whether the code is in C, or in C++, 
or in COBOL we build the tree first. To do this we use 'yacc' based 
parser and our own internal tool to build the AST. Most of the 
actions in the parser are written to build the tree and capture other 
informations like line number, line pos, filename etc. 
 
 With regards to this I have a question to post. 
 
 Can I use ANTLR to do the same? I mean, can I use ANTLR to parse and 
build an AST out of C code? Will I be able to capture the line num, 
column position inormation in the tree nodes? And, will I be able to 
create associations between a tree node for a variable to its 
declaration in the symbol table?

 Hoping for an early reply from the group. 

Shiva



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mwwickline at yahoo.com  Thu Apr  3 14:47:10 2003
From: mwwickline at yahoo.com (mwwickline)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] LT(0)
Message-ID: <b6idle+ou67@eGroups.com>

I can't find anything in the documentation that explicitly states
whether you can do "LT(0)" and where it's allowed.  I'm getting a core
dump in the antlr code when I do "LT(0)->getText()" in my tree parser,
but it doesn't do it for every call to LT(0).
I'm using an older development version, which may be my problem, but
I'd still like to know whether LT(0) is allowed, and where it's
supposed to be a valid call.

Any help on this would be much appreciated!

Thanks,

Martin
 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Thu Apr  3 14:53:20 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] LT(0)
In-Reply-To: <b6idle+ou67@eGroups.com>
Message-ID: <10F71252-6627-11D7-80D6-000393BB647E@jguru.com>


On Thursday, April 3, 2003, at 02:47  PM, mwwickline wrote:

> I can't find anything in the documentation that explicitly states
> whether you can do "LT(0)" and where it's allowed.  I'm getting a core

LT(0) is meaningless, I'm afraid.  First symbol of lookahead is LT(1) :)

Terence

> dump in the antlr code when I do "LT(0)->getText()" in my tree parser,
> but it doesn't do it for every call to LT(0).
> I'm using an older development version, which may be my problem, but
> I'd still like to know whether LT(0) is allowed, and where it's
> supposed to be a valid call.
>
> Any help on this would be much appreciated!
>
> Thanks,
>
> Martin
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Thu Apr  3 16:01:45 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Re: lots of cool symbol table stuff posted
In-Reply-To: <6BD64AB6-63D7-11D7-94AF-000393BB647E@jguru.com>
Message-ID: <b6ii19+8pq1@eGroups.com>

> Folks interested in learning about symbol table management can 
check 
> out my lecture/problem-solving (audio to appear in a day or so) and 
> solutions:
> 
> http://www.cs.usfca.edu/~parrt/course/652/lectures/symtab.html

Good stuff Ter. Any chance of using GIF, JPEG or PNG rather than TIFF 
for the graphics please?.

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Thu Apr  3 16:53:35 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Re: lots of cool symbol table stuff posted
In-Reply-To: <b6ii19+8pq1@eGroups.com>
Message-ID: <DD3A4027-6637-11D7-80D6-000393BB647E@jguru.com>


On Thursday, April 3, 2003, at 04:01  PM, micheal_jor wrote:

>> Folks interested in learning about symbol table management can
> check
>> out my lecture/problem-solving (audio to appear in a day or so) and
>> solutions:
>>
>> http://www.cs.usfca.edu/~parrt/course/652/lectures/symtab.html
>
> Good stuff Ter. Any chance of using GIF, JPEG or PNG rather than TIFF
> for the graphics please?.

My converter makes bad gifs and my omnigraffle tool won't or sucks at 
it too...can't remember.  Are they too big?  Is that it?

Audios to follow once I get a few free minutes...

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Thu Apr  3 16:55:54 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Re: GIF vs TIFF
In-Reply-To: <b6ii19+8pq1@eGroups.com>
Message-ID: <300E1ADC-6638-11D7-80D6-000393BB647E@jguru.com>

Ok, the ImageMagick "convert" utility does a nice job.  Sorry about 
that I'll do the conversions...
Ter

On Thursday, April 3, 2003, at 04:01  PM, micheal_jor wrote:

>> Folks interested in learning about symbol table management can
> check
>> out my lecture/problem-solving (audio to appear in a day or so) and
>> solutions:
>>
>> http://www.cs.usfca.edu/~parrt/course/652/lectures/symtab.html
>
> Good stuff Ter. Any chance of using GIF, JPEG or PNG rather than TIFF
> for the graphics please?.
>
> Cheers,
>
> Micheal
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From m_schellens at hotmail.com  Thu Apr  3 23:46:54 2003
From: m_schellens at hotmail.com (marcschellens)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Re: My ASTNode gets deleted more than once
In-Reply-To: <20030403113642.G15053@cs.utwente.nl>
Message-ID: <b6jd9e+f2q9@eGroups.com>

--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> wrote:
> Hi,
> 
> On Wed, Apr 02, 2003 at 10:16:57AM -0000, marcschellens wrote:
> > I wrote using ANTLR 2.7.1 with C++ an parser and a TreeParser.
> > I retrieve the trees from them via the getAST() method.
> > I use my own AST and AST factory in the manner Peter Morling
> > described.
> > But when the RefAST variables who store the AST (from getAST())
> > go out of scope, at least one node (possibly all, haven't checked)
> > gets deleted more than once.
> > How could this be?
> 
> This is with 'vanilla' usage? Or are you doing special stuff? Feel
free to
> send me a tarball/zip with all the stuff that demonstrates the problem.
> (preferably something that runs on unix)
> 
> Cheers,
> 
> Ric

Thank you very much for the offer.
Actually it is a quite large project with lots of 'special'
things.
But for the test I input only a very simple line to
scan/parse/treeparse/interpret so that mos of the stuff isn't used.
Anyhow, after more thourough testing, it seems to me that
not a node is actually deleted more than once, but it seems
to me that two different nodes containing the same info are
deleted.
Furthermore I defined ci constructor and operator= as private.
And the program runs through Parser/TreeParser and Interpreter
(the interpreter based on a TreeParser, but tree generation is set off
here).
I switched to 2.7.2 meanwhile but the problem is the same.
I overloaded CommonAST and set the factory accordingly like
you described in the doc.
Actually I was hoping for a hint to a common cave-eat.
Reducing the code to a minimal level seems to be a lot of work
and from my feeling the actual solution is probably something
fairly simple.

One thing I found out:

My input is just:

a=1

but when the via getTree() retrieved RefMyNode objects go out of scope
there seem to be more than one node containing '1'
I modified the increment and decrement functions of ASTRefCount.

for increment (decrement accordingly):
cout << "inc: " << this << " " << ptr << " " << count << " " <<
((MyNode*)ptr)->getText() << " " << endl;

and get the following at the end:

...
dec: 0x81a5950 0x81a5920 0 1
deletion of TreeParsers (getTree()) tree

dec: 0x819db38 0x81a5760 0 A
dec: 0x819dbc8 0x81a58f0 0 :=
dec: 0x819db20 0x819db48 0 VAR
dec: 0x81a58c8 0x81a5898 0 1
deletion of Parsers tree

here the segmetation fault takes place
(it happends in the destructor of MyNode)

So one question is:
How can a MyNode be there more than once?
I do some fancy stuff, but nowhere create or delete
MyNode directly.

I would be thankful for any hint,
thanks,
marc








Why a node containg '1'





















 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rjc at trump.net.au  Fri Apr  4 01:45:58 2003
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Non-determinism (again :-(
In-Reply-To: <0EF9DEABA42FE547BAE43D0298F146B23DD5E9@ESP.eca-internation
 al.local>
Message-ID: <4.2.0.58.20030404192629.018246a0@postoffice.trump.net.au>

Hello,

At 04:19 PM 3/04/2003 +0100, Anthony Youngman wrote:
>You can see I've tried to force statement_list into a node on its own ...
>
>and my treeparser rules ...
>
>loopst
>         : #("LOOP" {System.out.println("LABL LP1");} statement_list 
> "REPEAT" {System.out.println("GOTO LP1");} )
>         ;
>
>statement_line : ( ( statement)+ ) ;
>
>statement_list : ( (statement_line )+ ) ;

The above is a bit weird, how will it know when the 'statement_line' rule 
ends and a new 'statement_line' rule should be attempted to be matched in 
the 'statement_list' rule?

Either statement_line should be made into a tree rather than list of 
statements or the statement_list rule should just consist of '(statement)+'.

PS Yesterday you mentioned that at the end of all this, you would write up 
an example grammar....have you looked in the examples directory there is a 
'tinybasic' grammar which looks very similar to what you appear to be 
proposing.

  - Robert



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cow_jumped_moon at hotmail.com  Fri Apr  4 02:13:27 2003
From: cow_jumped_moon at hotmail.com (queengiraffe)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] C++ map and symbol table.
Message-ID: <b6jls7+76pr@eGroups.com>

I've written the lexer and parser for my compiler and now want to add 
a symbol table.

The only problem is I've been instructed to do it using maps from the 
STL. My knowledge of both ANTLR and C++ are limited, and I also have 
never written a symbol table before.

I was wondering if anyone had an basic example of this being achieved 
in C++ or if they could point be to some reading material that may 
help.

Cheers in advance

Gem x


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Fri Apr  4 02:17:14 2003
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Non-determinism (again :-(
Message-ID: <0EF9DEABA42FE547BAE43D0298F146B23DD5EB@ESP.eca-international.local>

Skipped content of type multipart/alternative
From Anthony.Youngman at ECA-International.com  Fri Apr  4 02:17:14 2003
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Non-determinism (again :-(
Message-ID: <0EF9DEABA42FE547BAE43D0298F146B23DD5EB@ESP.eca-international.local>

Skipped content of type multipart/alternative
From klaren at cs.utwente.nl  Fri Apr  4 02:26:38 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Re: My ASTNode gets deleted more than once
In-Reply-To: <b6jd9e+f2q9@eGroups.com>; from m_schellens@hotmail.com on Fri, Apr 04, 2003 at 07:46:54AM -0000
References: <20030403113642.G15053@cs.utwente.nl> <b6jd9e+f2q9@eGroups.com>
Message-ID: <20030404122637.J15053@cs.utwente.nl>

On Fri, Apr 04, 2003 at 07:46:54AM -0000, marcschellens wrote:
> But for the test I input only a very simple line to
> scan/parse/treeparse/interpret so that mos of the stuff isn't used.
> Anyhow, after more thourough testing, it seems to me that
> not a node is actually deleted more than once, but it seems
> to me that two different nodes containing the same info are
> deleted.
> Furthermore I defined ci constructor and operator= as private.
> And the program runs through Parser/TreeParser and Interpreter
> (the interpreter based on a TreeParser, but tree generation is set off
> here).
> I switched to 2.7.2 meanwhile but the problem is the same.

2.7.2 contains a refcount bug though :/

Fix:

==== //depot/code/org.antlr/main/main/lib/cpp/antlr/AST.hpp#7 (ktext) ====
@@ -5,7 +5,7 @@
  * Project led by Terence Parr at http://www.jGuru.com
  * Software rights: http://www.antlr.org/RIGHTS.html
  *
- * $Id: //depot/code/org.antlr/main/main/lib/cpp/antlr/AST.hpp#6 $
+ * $Id: //depot/code/org.antlr/main/main/lib/cpp/antlr/AST.hpp#7 $
  */

 #include <antlr/config.hpp>
@@ -23,7 +23,7 @@
 class ANTLR_API AST {
 public:
 	AST() : ref(0) {}
-	AST(const AST& other) : ref(other.ref->increment()) {}
+	AST(const AST& other) : ref(0) {}
 	virtual ~AST() {}

 	/// Return the type name for this AST node. (for XML output)

> I overloaded CommonAST and set the factory accordingly like
> you described in the doc.

My suspicion would be that there's a problem in there. You could send the
file to me and I'll have a look. Another option might be that somewhere the
lowlevel ASTRefcount methods are used to create a new ast.

> Actually I was hoping for a hint to a common cave-eat.

Double delete's I've never seen with the ASTRefcount of antlr. (most of the
time I'm running with a memory debugger that would catch those errors) Also
I know of no common caveats with this stuff.

> One thing I found out:
>
> My input is just:
>
> a=1
>
> but when the via getTree() retrieved RefMyNode objects go out of scope
> there seem to be more than one node containing '1'
> I modified the increment and decrement functions of ASTRefCount.
>
> for increment (decrement accordingly):
> cout << "inc: " << this << " " << ptr << " " << count << " " <<
> ((MyNode*)ptr)->getText() << " " << endl;
>
> and get the following at the end:
>
> ...
> dec: 0x81a5950 0x81a5920 0 1
> deletion of TreeParsers (getTree()) tree
>
> dec: 0x819db38 0x81a5760 0 A
> dec: 0x819dbc8 0x81a58f0 0 :=
> dec: 0x819db20 0x819db48 0 VAR
> dec: 0x81a58c8 0x81a5898 0 1
> deletion of Parsers tree
>
> here the segmetation fault takes place
> (it happends in the destructor of MyNode)
>
> So one question is:
> How can a MyNode be there more than once?

You tell me ;) I'm not seeing anything really disturbing in the trace above
(except for the sigsegv) You might add a trace in the destructor of MyNode
(with the address of the thing so you know for certain there's a thing
being destroyed twice). A gdb backtrace would also be helpfull. Or more
information...

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I think we better split up."
  "Good idea. We can do more damage that way."
  --- Ghostbusters


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Fri Apr  4 07:31:47 2003
From: Anthony.Youngman at ECA-International.com (Anthony Youngman)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] RE: Treebuilding ....
Message-ID: <0EF9DEABA42FE547BAE43D0298F146B23DD5F8@ESP.eca-international.local>

Skipped content of type multipart/alternative
From mzukowski at yci.com  Fri Apr  4 08:30:45 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Non-determinism (again :-(
Message-ID: <170826586F3BD511910D0200C110AAA805402299@memail03.bco-home.com>

> This is a counter-example! The problem is that both SEMI and EOL are
end-of-statement 
> markers, but they can (sometimes, not always) modify the preceding control
structure as 
> well.

Can you show some examples?  Both rules and example code to parse.

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Apr  4 08:39:53 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] RE: Treebuilding ....
Message-ID: <170826586F3BD511910D0200C110AAA80540229A@memail03.bco-home.com>

OK, now I kinda see the problem.  Thing is, you didn't post your tree parser
rules so I can't tell why you are having problems in your tree parser.  For
the first example, is "END" a statement that statement_list can match?

OK, now, in this rule you turned tree building off and you are creating a
root called stlist with no children because #statement_list is empty since
you turned off tree building, just what I would expect to happen.  You
almost got the idiom right, just turn tree building back on for the rule.

statement_list! 
        : ( (statement_line (EOL!)+ )+ ) 
        { #statement_list = #(#[STLIST,"stlist"], #statement_list); } 
        ; 

Make it 
statement_list 
        : ( (statement_line (EOL!)+ )+ ) 
        { #statement_list = #(#[STLIST,"stlist"], #statement_list); } 
        ; 

By the way there is a shorthand for #current_rule, which is ## 

statement_list
        : ( (statement_line (EOL!)+ )+ ) 
        { ## = #(#[STLIST,"stlist"], ##); } 
        ; 
Monty

-----Original Message-----
From: Anthony Youngman [mailto:Anthony.Youngman@ECA-International.com]
Sent: Friday, April 04, 2003 7:32 AM
To: 'antlr-interest@yahoogroups.com'
Subject: [antlr-interest] RE: Treebuilding ....


Carrying on from my last problem... now I've got rid of the
non-determinism... 
If my parser contains the definition: 
        statement_line : (statement ( SEMI! statement)* ) ; 
        statement_list : ( (statement_line (EOL!)+ )+ ) ; 
I seem to get the tree I expect namely 
        ( PROGRAM SHELL (LOOP (PRINT...) (INPUT ...) (PRINT ...)  ...)
(PRINT ...) END ) null 
when I print out the tree using 
        System.out.println( "printing AST"); 
        AST result = parser.getAST(); 
        System.out.println(result.toStringList()); 
BUT the treeparser chokes on it. It's expecting "PROGRAM" ID statement_list
"END". It seems to me it's expecting a single "statement_list", and when fed
the expanded list as above it chokes because it gets a LOOP. So I changed
the definition of statement_list to
statement_list! 
        : ( (statement_line (EOL!)+ )+ ) 
        { #statement_list = #(#[STLIST,"stlist"], #statement_list); } 
        ; 
which now gives me 
        ( PROGRAM SHELL stlist END ) null 
when I print the tree. The treeparser chokes on this, because it seems my
statement_list has become a root with no sibs or children or whatever - my
loop, print etc have got lost :-( Apologies if this seems simple - I seem to
have been asking question after question on the list, but I've been tearing
my hair out of the syntax of "statement_list!". Is it right? And if so, why
doesn't "toStringList()" traverse it?
Cheers, 
Wol 


This transmission is intended for the named recipient only. It may contain
private and confidential information. If this has come to you in error you
must not act on anything disclosed in it, nor must you copy it, modify it,
disseminate it in any way, or show it to anyone. Please e-mail the sender to
inform us of the transmission error or telephone ECA International
immediately and delete the e-mail from your information system.
Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911
7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1
212 582 2333.

Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Fri Apr  4 10:54:37 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Re: lots of cool symbol table stuff posted
In-Reply-To: <DD3A4027-6637-11D7-80D6-000393BB647E@jguru.com>
Message-ID: <b6kkdd+sero@eGroups.com>

> > Good stuff Ter. Any chance of using GIF, JPEG or PNG rather than 
TIFF
> > for the graphics please?.
> 
> My converter makes bad gifs and my omnigraffle tool won't or sucks 
at 
> it too...can't remember.  Are they too big?  Is that it?

Nothing that exciting. Just can't see any of them.

Cheers,

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From braden at endoframe.com  Sat Apr  5 13:20:52 2003
From: braden at endoframe.com (Braden McDaniel)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] LT(0)
In-Reply-To: <10F71252-6627-11D7-80D6-000393BB647E@jguru.com>
References: <10F71252-6627-11D7-80D6-000393BB647E@jguru.com>
Message-ID: <1049577652.14286.2.camel@localhost.localdomain>

On Thu, 2003-04-03 at 17:53, Terence Parr wrote:
> On Thursday, April 3, 2003, at 02:47  PM, mwwickline wrote:
> 
> > I can't find anything in the documentation that explicitly states
> > whether you can do "LT(0)" and where it's allowed.  I'm getting a core
> 
> LT(0) is meaningless, I'm afraid.  First symbol of lookahead is LT(1) :)

Hm... I've been using "LT(0)->getLine()" to get the current line number.
I'm not interested in actually looking ahead. What should I be doing
instead?

-- 
Braden McDaniel                           e-mail: <braden@endoframe.com>
<http://endoframe.com>                    Jabber: <braden@jabber.org>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Sat Apr  5 18:56:57 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] LT(0)
In-Reply-To: <1049577652.14286.2.camel@localhost.localdomain>
Message-ID: <6E3E4FAA-67DB-11D7-80D6-000393BB647E@jguru.com>


On Saturday, April 5, 2003, at 01:20  PM, Braden McDaniel wrote:

> On Thu, 2003-04-03 at 17:53, Terence Parr wrote:
>> On Thursday, April 3, 2003, at 02:47  PM, mwwickline wrote:
>>
>>> I can't find anything in the documentation that explicitly states
>>> whether you can do "LT(0)" and where it's allowed.  I'm getting a 
>>> core
>>
>> LT(0) is meaningless, I'm afraid.  First symbol of lookahead is LT(1) 
>> :)
>
> Hm... I've been using "LT(0)->getLine()" to get the current line 
> number.

Is there a getLine() method in the lexer?  You could use that :)

Or LT(1).getLine().

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From braden at endoframe.com  Sat Apr  5 23:36:41 2003
From: braden at endoframe.com (Braden McDaniel)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] LT(0)
In-Reply-To: <6E3E4FAA-67DB-11D7-80D6-000393BB647E@jguru.com>
References: <6E3E4FAA-67DB-11D7-80D6-000393BB647E@jguru.com>
Message-ID: <1049614601.14286.9.camel@localhost.localdomain>

On Sat, 2003-04-05 at 21:56, Terence Parr wrote:
> On Saturday, April 5, 2003, at 01:20  PM, Braden McDaniel wrote:
> 
> > On Thu, 2003-04-03 at 17:53, Terence Parr wrote:
> >> On Thursday, April 3, 2003, at 02:47  PM, mwwickline wrote:
> >>
> >>> I can't find anything in the documentation that explicitly states
> >>> whether you can do "LT(0)" and where it's allowed.  I'm getting a 
> >>> core
> >>
> >> LT(0) is meaningless, I'm afraid.  First symbol of lookahead is LT(1) 
> >> :)
> >
> > Hm... I've been using "LT(0)->getLine()" to get the current line 
> > number.
> 
> Is there a getLine() method in the lexer?  You could use that :)

There is, in fact. However, I don't see a way to get to it from inside
the parser. My lexer is a custom one that I derive from TokenStream.

It looks like I would have to add such a method to a class derived from
TokenBuffer; and instantiate the parser with that class in order to be
able to access this information from the parser. Does that sound right,
or is there a simpler way?

> Or LT(1).getLine().

But that looks ahead one token, so the line number could be different
from the current token... right?

-- 
Braden McDaniel                           e-mail: <braden@endoframe.com>
<http://endoframe.com>                    Jabber: <braden@jabber.org>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Sun Apr  6 09:30:44 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] LT(0)
In-Reply-To: <1049614601.14286.9.camel@localhost.localdomain>
Message-ID: <1D8A325E-684D-11D7-80D6-000393BB647E@jguru.com>


On Saturday, April 5, 2003, at 11:36  PM, Braden McDaniel wrote:
>> Or LT(1).getLine().
>
> But that looks ahead one token, so the line number could be different
> from the current token... right?

You may have to define "current token"...  I'd say parsers only have 
"matched" tokens and "about to be matched" tokens. ;)

If you want the previous token just override consume() and record last 
token.  :)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From braden at endoframe.com  Sun Apr  6 09:44:51 2003
From: braden at endoframe.com (Braden McDaniel)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] LT(0)
In-Reply-To: <1D8A325E-684D-11D7-80D6-000393BB647E@jguru.com>
References: <1D8A325E-684D-11D7-80D6-000393BB647E@jguru.com>
Message-ID: <1049647491.14286.12.camel@localhost.localdomain>

On Sun, 2003-04-06 at 12:30, Terence Parr wrote:
> On Saturday, April 5, 2003, at 11:36  PM, Braden McDaniel wrote:
> >> Or LT(1).getLine().
> >
> > But that looks ahead one token, so the line number could be different
> > from the current token... right?
> 
> You may have to define "current token"...  I'd say parsers only have 
> "matched" tokens and "about to be matched" tokens. ;)

I'm just trying to throw a SemanticException, and provide it with
accurate line and column information.

-- 
Braden McDaniel                           e-mail: <braden@endoframe.com>
<http://endoframe.com>                    Jabber: <braden@jabber.org>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From albert.huh at embarcadero-ca.com  Sun Apr  6 10:10:32 2003
From: albert.huh at embarcadero-ca.com (Albert Huh)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] LT(0)
Message-ID: <0881AC7F2F339C40BC6F7983D1E0BEC97683CD@mail2k.embarcadero-ca.com>

You could just save a reference to the lexer within your parser.  That's how I go about getting the line number information from the lexer.
 
Any thoughts on that approach?
 
Albert
 
 
-----Original Message----- 
From: Braden McDaniel [mailto:braden@endoframe.com] 
Sent: Sun 06/04/2003 12:44 PM 
To: antlr-interest@yahoogroups.com 
Cc: 
Subject: Re: [antlr-interest] LT(0)



	On Sun, 2003-04-06 at 12:30, Terence Parr wrote:
	> On Saturday, April 5, 2003, at 11:36  PM, Braden McDaniel wrote:
	> >> Or LT(1).getLine().
	> >
	> > But that looks ahead one token, so the line number could be different
	> > from the current token... right?
	>
	> You may have to define "current token"...  I'd say parsers only have
	> "matched" tokens and "about to be matched" tokens. ;)
	
	I'm just trying to throw a SemanticException, and provide it with
	accurate line and column information.
	
	--
	Braden McDaniel                           e-mail: <braden@endoframe.com>
	<http://endoframe.com>                    Jabber: <braden@jabber.org>
	
	
	
	
	Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
	
	
	


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 4854 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20030406/1beb5274/attachment.bin
From rbencina at iprimus.com.au  Sun Apr  6 10:32:48 2003
From: rbencina at iprimus.com.au (Ross Bencina)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] LT(0)
References: <1D8A325E-684D-11D7-80D6-000393BB647E@jguru.com> <1049647491.14286.12.camel@localhost.localdomain>
Message-ID: <007b01c2fc63$16b556a0$0101a8c0@athlon900>

Braden McDaniel wrote:
> I'm just trying to throw a SemanticException, and provide it with
> accurate line and column information.

For that, perhaps try labeling your terminals:

minusExpr : a:MINUS unaryExpr   
{ a->getLine(); }
;

Ross.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From braden at endoframe.com  Sun Apr  6 11:18:44 2003
From: braden at endoframe.com (Braden McDaniel)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] LT(0)
In-Reply-To: <007b01c2fc63$16b556a0$0101a8c0@athlon900>
References: <1D8A325E-684D-11D7-80D6-000393BB647E@jguru.com>
 <1049647491.14286.12.camel@localhost.localdomain>
 <007b01c2fc63$16b556a0$0101a8c0@athlon900>
Message-ID: <1049653123.14286.14.camel@localhost.localdomain>

On Sun, 2003-04-06 at 13:32, Ross Bencina wrote:
> Braden McDaniel wrote:
> > I'm just trying to throw a SemanticException, and provide it with
> > accurate line and column information.
> 
> For that, perhaps try labeling your terminals:
> 
> minusExpr : a:MINUS unaryExpr   
> { a->getLine(); }
> ;

Ah, of course. Thanks.

-- 
Braden McDaniel                           e-mail: <braden@endoframe.com>
<http://endoframe.com>                    Jabber: <braden@jabber.org>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From braden at endoframe.com  Sun Apr  6 11:34:36 2003
From: braden at endoframe.com (Braden McDaniel)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] LT(0)
In-Reply-To: <0881AC7F2F339C40BC6F7983D1E0BEC97683CD@mail2k.embarcadero-ca.com>
References: <0881AC7F2F339C40BC6F7983D1E0BEC97683CD@mail2k.embarcadero-ca.com>
Message-ID: <1049654076.14286.21.camel@localhost.localdomain>

On Sun, 2003-04-06 at 13:10, Albert Huh wrote:
> You could just save a reference to the lexer within your parser.  That's how I go about getting the line number information from the lexer.
>  
> Any thoughts on that approach?

I'd have to define my own constructor. That's something I've managed to
avoid doing so far, and I'd prefer to continue to avoid it.

There's only one spot in my grammar where using named the terminals
wasn't a convenient approach. And there I think I'm content to settle
for using LT(1).

-- 
Braden McDaniel                           e-mail: <braden@endoframe.com>
<http://endoframe.com>                    Jabber: <braden@jabber.org>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From info at hars.net  Sun Apr  6 13:52:32 2003
From: info at hars.net (alexanderhars)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Showing Line and Column information for tokens in TreeParser?
Message-ID: <b6q42g+1ud9@eGroups.com>

I am trying to parse Java source code using the Java 1.3 grammar. I am
using the JavaTreeParser but it only displays Text and Type
information. I would like to add Line and Column information to all
the elements shown in the tree. Is there a way of doing this? 

Thank you very much. 

Alexander




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Sun Apr  6 14:07:40 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Showing Line and Column information for tokens in TreeParser?
In-Reply-To: <b6q42g+1ud9@eGroups.com>
Message-ID: <CD2B3E72-6873-11D7-80D6-000393BB647E@jguru.com>


On Sunday, April 6, 2003, at 01:52  PM, alexanderhars wrote:

> I am trying to parse Java source code using the Java 1.3 grammar. I am
> using the JavaTreeParser but it only displays Text and Type
> information. I would like to add Line and Column information to all
> the elements shown in the tree. Is there a way of doing this?

I"m sort of doing the same thing right now.  I'm storing the token 
object in the AST rather than the text/type by making my own derivative 
of BaseAST.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Sun Apr  6 14:08:19 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] symbol table graphics converted to GIFs
In-Reply-To: <b6kkdd+sero@eGroups.com>
Message-ID: <E477A435-6873-11D7-80D6-000393BB647E@jguru.com>

Michael: converted to gifs and also uploading audio now.  Could take a 
few hours at this rate ;)

Ter

On Friday, April 4, 2003, at 10:54  AM, micheal_jor wrote:

>>> Good stuff Ter. Any chance of using GIF, JPEG or PNG rather than
> TIFF
>>> for the graphics please?.
>>
>> My converter makes bad gifs and my omnigraffle tool won't or sucks
> at
>> it too...can't remember.  Are they too big?  Is that it?
>
> Nothing that exciting. Just can't see any of them.
>
> Cheers,
>
> Micheal
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Mon Apr  7 00:40:15 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Non-determinism (again :-(
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A1B3@lnml1.eca-international.local>

Okay. Let's take "if then else" syntax. The assorted variants can be

IF A EQ B THEN
   C = 3
   D = 4
END ELSE
   E = 5
   F = 6
END

or

IF A EQ B THEN C = 3; D = 4 ELSE E = 5; F = 6
 or

IF A EQ B
   THEN C = 3; D = 4
   ELSE E = 5; F = 6

(or other assorted variants...)

This then goes through my parser rules (note that I haven't got round to
sorting out assigns as in my example, but the grammar won't "Tool"
without the warnings...)

statement : ( inputst | printst | exitst | ifst | loopst | "NULL" ) ;
statement_line : (statement ( SEMI! statement)* ) ;
statement_list : ( (statement_line (EOL!)+ )+ ) ;

If you look at the output from that, both statement_line and
statement_list just give you a degenerate tree consisting of a list of
statements. That's why my treeparser was presumably blowing up. If you
look back to my original post, the treeparser rules were

statement_line : ( ( statement)+ ) ; 
statement_list : ( (statement_line )+ ) ; 

Which blew up with the non-determinism warning...Rob's post gave me the
hint I needed - eliminate one of the treeparser rules and the warning
goes away. Now that I'm working on creating a virtual root for
statement_list, that's an alternative way of making the non-determinism
go away (and may prove to be the only route to a working grammar), but
my example above is certainly an exception to "one parser rule to one
treeparser rule" - the parser was doing exactly what I expected/wanted
and the treeparser was ambiguous.

Cheers,
Wol

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: 04 April 2003 17:31
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] Non-determinism (again :-(


> This is a counter-example! The problem is that both SEMI and EOL are
end-of-statement 
> markers, but they can (sometimes, not always) modify the preceding
control
structure as 
> well.

Can you show some examples?  Both rules and example code to parse.

Monty

 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.
From parrt at jguru.com  Tue Apr  8 08:31:59 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:31 2004
Subject: [antlr-interest] Tree Construction For Java posted
Message-ID: <3CEA7E66-69D7-11D7-B437-000393BB647E@jguru.com>

In case you are interested, I have posted my quick notes on the trees 
built by the Java parser in ANTLR 2.7.2:

http://www.cs.usfca.edu/~parrt/course/652/lectures/java.ast.html

Lecture audio to appear later this week.

Ter
PS	About 350M worth of .mp3 audio up now (reportedly with good sound 
quality...not sure about the content, though) ;)
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Jim.OConnor at microfocus.com  Tue Apr  8 08:53:18 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] syntactic predicates question
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E91017EE049@rock-corpmail.microfocus.com>

Hi all,
  I'll try to keep this as simple as possible.  In JCL the statements are of
the form

//(optional name)  keyword


//ZERO   CNTL
//ONE     PEND
//           PEND
//           CNTL
//FOUR PEND          

/************************** valid "g" file
*****************************************************************/
class fred extends Parser;

options {
   k=4; // Trying reasonable values of k 1-5 shows a difficulty with the
pattern DSLASH-JCLNAME-(DSLASH,EOF)-(EOF, CNTL, PEND, DSLASH, JCLNAME)
}

jclfile :  (statement)+ 
           ;

statement :    start CNTL   
                   | start PEND
                ;

start : DSLASH (JCLNAME) ?   ;
/***************************************************************************
****************/

Changing statement to

statement :    (start CNTL) => start CNTL
             | start PEND
             ;

works for this limited example.  K can be set to 1.
There are about fifteen other statement keywords.  Do I need a predicate for
all but one of the keywords?


The next step is a getting more in depth.
I would like the parser to understand nesting.  The CNTL statement has a
matching ENDCNTL statement

/************************** valid "g" file
*****************************************/

class fred extends Parser;

options {
   k=3;
}

jclfile :  (statement)+ 
           ;


statement :    (start CNTL) => cntlStatement
             | start PEND
             ;


pendStatement : start PEND ;

cntlStatement : start CNTL  (statement)+ endCntlStatement ;


endCntlStatement:  start ENDCNTL;


start : DSLASH (JCLNAME) ?
/************************************************************************/



I get back to the original warning of nondeterminisms.  The lame attempts at
resolving the non determinism leads to "single alternative" warnings.
Where should I concentrate effort?  The original predicate solution for the
statement rule or the construct of the cntlStatement?



"valid g file" means it can be copied and "tooled" to get some idea of what
I'm talking about.

I have read the parts of the documentation explaining the rules

a: A (P)?
   | A
  ;

That doesn't mean I fully understand the implications, though.
















 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jbb at acm.org  Tue Apr  8 09:46:20 2003
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] syntactic predicates question
In-Reply-To: 
	<3AC103F1B7EEEC48A855ACB1D2819E91017EE049@rock-corpmail.microfocus.com>
	(Jim.OConnor@microfocus.com)
References: <3AC103F1B7EEEC48A855ACB1D2819E91017EE049@rock-corpmail.microfocus.com>
Message-ID: <E192wEm-0002Pb-00@gecko.home.org>

Mr. O'Connor :-

Syntactic predicates are not necessary (nor is any look ahead greater
than 1) for the JCL examples you have asked about.

You simply need to "left factor" your grammar rules in order to put
them into LL(1) form. You should be able to read more about "left
factoring" in any good reference book on compilers. Aho, Sethi, and
Ullman's Compilers Principles, Techniques, and Tools - aka The Dragon
Book - is a good reference altho may be outdated now. 

Anyway, your first grammar can be re-written as:
/********************************************************************/
class fred extends Parser;

jclfile :
	(statement)+ 
    ;

statement :
	DSLASH (JCLNAME)? operation
    ;

operation :
	CNTL   
    |   PEND
    ;
/********************************************************************/

And your second grammar as:
/********************************************************************/
class fred extends Parser;

jclfile :
	(statement)+ 
    ;

statement :
	DSLASH (JCLNAME)? operation
    ;

operation :
	cntlStatement
    |   PEND
    ;

cntlStatement :
	CNTL
	statement
	DSLASH (JCLNAME)? ( ENDCNTL | operation )
    ;
/********************************************************************/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Jim.OConnor at microfocus.com  Tue Apr  8 10:57:29 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] syntactic predicates question
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E91017EE0CB@rock-corpmail.microfocus.com>

Thanks for your assistance and advice.  The dragon book is a favorite.  The
left-factoring section hasn't quite sunk in, but I see where I should be
heading.  The cntlStatement is giving me some problems, still.

Your suggestion is clear.  Trying to modify it to match the grammar gets me
into difficulties

ORIGNAL
cntlStatement :
	CNTL
	statement
	DSLASH (JCLNAME)? ( ENDCNTL | operation )
    ;

DESIRED -  ENDCNTL ends a block of statements

cntlStatement :
	CNTL
	(statement)+
	DSLASH (JCLNAME)? ( ENDCNTL )
    ;


Thanks again.  Worst case, I have learned where to focus attention.
Jim


-----Original Message-----
From: jbb@acm.org [mailto:jbb@acm.org]
Sent: Tuesday, April 08, 2003 12:46 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] syntactic predicates question


Mr. O'Connor :-

Syntactic predicates are not necessary (nor is any look ahead greater
than 1) for the JCL examples you have asked about.

You simply need to "left factor" your grammar rules in order to put
them into LL(1) form. You should be able to read more about "left
factoring" in any good reference book on compilers. Aho, Sethi, and
Ullman's Compilers Principles, Techniques, and Tools - aka The Dragon
Book - is a good reference altho may be outdated now. 

Anyway, your first grammar can be re-written as:
/********************************************************************/
class fred extends Parser;

jclfile :
	(statement)+ 
    ;

statement :
	DSLASH (JCLNAME)? operation
    ;

operation :
	CNTL   
    |   PEND
    ;
/********************************************************************/

And your second grammar as:
/********************************************************************/
class fred extends Parser;

jclfile :
	(statement)+ 
    ;

statement :
	DSLASH (JCLNAME)? operation
    ;

operation :
	cntlStatement
    |   PEND
    ;

cntlStatement :
	CNTL
	statement
	DSLASH (JCLNAME)? ( ENDCNTL | operation )
    ;
/********************************************************************/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jbb at acm.org  Tue Apr  8 11:48:08 2003
From: jbb at acm.org (jbb@acm.org)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] syntactic predicates question
In-Reply-To: 
	<3AC103F1B7EEEC48A855ACB1D2819E91017EE0CB@rock-corpmail.microfocus.com>
	(Jim.OConnor@microfocus.com)
References: <3AC103F1B7EEEC48A855ACB1D2819E91017EE0CB@rock-corpmail.microfocus.com>
Message-ID: <E192y8e-0005Qj-00@gecko.home.org>

Instead of 

cntlStatement :
	CNTL
	(statement)+
	DSLASH (JCLNAME)? ( ENDCNTL )
    ;

How about

cntlStatement :
	CNTL
	DSLASH (JCLNAME)? ( operation DSLASH (JCLNAME)? )+
        ENDCNTL
    ;

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Jim.OConnor at microfocus.com  Tue Apr  8 12:03:18 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] syntactic predicates question
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E91017EE11B@rock-corpmail.microfocus.com>

Yes, that works!  I would not have thought of that.  That just makes my day.


-----Original Message-----
From: jbb@acm.org [mailto:jbb@acm.org]
Sent: Tuesday, April 08, 2003 2:48 PM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] syntactic predicates question


Instead of 

cntlStatement :
	CNTL
	(statement)+
	DSLASH (JCLNAME)? ( ENDCNTL )
    ;

How about

cntlStatement :
	CNTL
	DSLASH (JCLNAME)? ( operation DSLASH (JCLNAME)? )+
        ENDCNTL
    ;

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nitin_bitkmc at yahoo.com  Tue Apr  8 22:58:41 2003
From: nitin_bitkmc at yahoo.com (Nitin Gupta)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Structure of AST
Message-ID: <20030409055841.88915.qmail@web41206.mail.yahoo.com>


I have to build a language translator in java. I have used antlr 2.7.2a2 to generate parser which is working fine. Now i have to build an AST so that i can write a tree walker to convert the source language into target.

I have no idea about what structure should my AST have. What is the ideal structure, and how to go about it?

If someone has any input for this please help me out.

Thanks and Regards

Nitin



---------------------------------
Do you Yahoo!?
Yahoo! Tax Center - File online, calculators, forms, and more
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030408/3cee5308/attachment.html
From mzukowski at yci.com  Wed Apr  9 09:41:25 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Structure of AST
Message-ID: <170826586F3BD511910D0200C110AAA8054022AD@memail03.bco-home.com>

I recommend studying my gcc transformation framework
http://codetransform.com/gcc.html.  See, for instance, how I structured the
"for" statement into a tree.  In C the for statement has three optional
parts:

        |!       "for"
                LPAREN ( e1:expr )? SEMI ( e2:expr )? SEMI ( e3:expr )?
RPAREN
                s:statement
                                    {
                                        if ( #e1 == null) { #e1 = #[
NEmptyExpression ]; }
                                        if ( #e2 == null) { #e2 = #[
NEmptyExpression ]; }
                                        if ( #e3 == null) { #e3 = #[
NEmptyExpression ]; }
                                        ## = #( #[LITERAL_for, "for"], #e1,
#e2, #e3, #s );
                                    }

You don't want to have a tree parser with (expr)? (expr)? (expr)? -- it's
ambiguous.  So I force a structure to it and handle the empty expressions
with my own imaginary node NEmptyExpression.  Treeparser rule looks like
this:

        |       #( "for"
                expr expr expr
                statement
                )

Take a look in my grammar to see how I use imaginary nodes as well.  Some
advocate no optional closures -- ()? -- in tree parsers.  Also you should
never need syntactic predicates either since you are building the tree you
can make it unambiguous.

And for sure read
http://www.cs.usfca.edu/~parrt/course/652/lectures/java.ast.html

Monty

 -----Original Message-----
From: Nitin Gupta [mailto:nitin_bitkmc@yahoo.com]
Sent: Tuesday, April 08, 2003 10:59 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Structure of AST


I have to build a language translator in java. I have used antlr 2.7.2a2 to
generate parser which is working fine. Now i have to build an AST so that i
can write a tree walker to convert the source language into target.
I have no idea about what structure should my AST have. What is the ideal
structure, and how to go about it?
If someone has any input for this please help me out.
Thanks and Regards
Nitin




Do you Yahoo!?
Yahoo! Tax Center - File online, calculators, forms, and more 
Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Apr  9 10:09:33 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Two common tree parser errors
Message-ID: <170826586F3BD511910D0200C110AAA8054022AE@memail03.bco-home.com>

Anthony Youngman asked me to help debug his tree parser.

First I invoked antlr.Tool to instrument for tracing the tree parser:

java antlr.Tool -traceTreeParser BASIC.g

I run it on the sample input.  Anthony prints the AST before tree parsing:

 ( PROGRAM SHELL ( LOOP ( PRINT "X" : ) ( INPUT COMMAND ) ( PRINT ( :
"Command is " COMMAND ) ) ( IF ( EQ COMMAND "Q" ) THEN EXIT ) ( PRINT JUNK )
REPEAT ) ( PRINT JUNK2 ) END ) null

 > programst(PROGRAM)
  > statement(LOOP)
   > loopst(LOOP)
<AST>: unexpected AST node: PRINT

Hmm, lets look at the rules:
loopst 
	: #("LOOP" (statement)+ "REPEAT" ;

statement : ( inputst | printst | exitst | ifst | loopst | NULL ) ;

printst { boolean colon = false; }
	: #(PRINT expr ( COLONPRINT {colon = true;})?)
	...
Looks ok, but it's not matching properly.  Loop calls statement calls
printst, so what's the deal?  Could the token types be wrong between parser
and tree parser?  Unlikely since they are in the same file, but let's
inspect the BASICTokenTypes.txt file anyways:

LITERAL_PRINT="PRINT"=37
...
PRINT=41

Aha.  Literal tokens get a prefix prepended to their name.  ANTLR thought
printst was introducing a new token type named PRINT and created a new token
value for it because there were no quotes around PRINT.  Easily fixed:

printst { boolean colon = false; }
	: #("PRINT" expr ( COLONPRINT {colon = true;})?)
	...


Let's try again:


 ( PROGRAM SHELL ( LOOP ( PRINT "X" : ) ( INPUT COMMAND ) ( PRINT ( :
"Command is " COMMAND ) ) ( IF ( EQ COMMAND "Q" ) THEN EXIT ) ( PRINT JUNK )
REPEAT ) ( PRINT JUNK2 ) END ) null


 > programst(PROGRAM)
  > statement(LOOP)
   > loopst(LOOP)
    > statement(PRINT)
     > printst(PRINT)
      > expr("X")
       > logicexpr("X")
        > equalityexpr("X")
         > atom("X")
         < atom(:)
        < equalityexpr(:)
       < logicexpr(:)
      < expr(:)
     < printst(INPUT)
    < statement(INPUT)
    > statement(INPUT)
     > inputst(INPUT)
     < inputst(PRINT)
    < statement(PRINT)
    > statement(PRINT)
     > printst(PRINT)
      > expr(:)
       > catexpr(:)
        > atom("Command is ")
        < atom(COMMAND)
        > atom(COMMAND)
        < atom(null)
       < catexpr(null)
      < expr(null)
     < printst(IF)
    < statement(IF)
    > statement(IF)
     > ifst(IF)
      > logicexpr(PRINT)
       > equalityexpr(PRINT)
<AST>: unexpected AST node: PRINT
...

(Same message as before, but totally different meaning)
Ok, this is weird because you can see clearly above the tree fragment is 
( IF ( EQ COMMAND "Q" ) THEN EXIT ) ( PRINT JUNK )
But the tree parser is skipping to the PRINT, not going to the child (EQ
COMMAND "Q").  Inspecting the code shows:

ifst : ("IF" logicexpr "THEN" statement) ;

Sure enough he forgot the # which says to look at children of "IF".  So it
skips to the sibling of "IF" which is "PRINT" (and which is not referenced
by equalityexpr)

Fixed:

ifst : #("IF" logicexpr "THEN" statement) ;

Summary:

Print your tree and use tracing.
Inspect your token types files for mismatched or duplicated tokens.
Remember to always quote your literals.
Remember your # in front of root nodes.

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From odzsoi at yahoo.com  Wed Apr  9 10:20:24 2003
From: odzsoi at yahoo.com (odzsoi)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Lexer help
Message-ID: <b71koo+pn8t@eGroups.com>

Hi, 
 
 I would need your help to create a lexer for a simple templating language that would 
eat up everything that is not between two dollars ($), but replaces two dollars to a 
single dollar. 
 
For example: 
blabla$something$$$blabla$something2$bla$$bla 
 
should be lexed as (blabla) (something) ($blabla) (something2) (bla$bla). 
 
My lexer grammar is: 
TEXT                   :       (   ~('$') // Not dollar  
				    | '$'! '$' // Or two dollars 
				   )+ ; 
 
DOLLAR		  :	   '$'	; 
 
AntLR says: 
 
warning: lexical nondeterminism between rules TEXT and DOLLAR upon 
template.g:     k==1:'$' 
template.g:     k==2:<end-of-token> 
 
That I don't understand. If there is only a single $, it should be matched as DOLLAR of 
course. 
 
Thanks for your help. 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From bob at werken.com  Wed Apr  9 10:30:38 2003
From: bob at werken.com (bob mcwhirter)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] the jars...
In-Reply-To: <b71koo+pn8t@eGroups.com>
Message-ID: <Pine.LNX.3.96.1030409132913.1177L-100000@exeter.exeter.org>


Howdy guys--

I'm updating the ANTLR plugin for maven, and I'm sure I've just
missed some threads, but are we down to a single jar now?

Previously, we had antlr.jar for runtime stuff, and antlrall.jar
which includes antlr.Tool and other compiler-time-only stuff.

I see 2.7.2 has just the one antlr.jar.  Is that sufficient for
all use-cases?  Can we still build a runtime-only jar?

	-bob


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rmsanjivp at yahoo.com  Wed Apr  9 10:48:02 2003
From: rmsanjivp at yahoo.com (rmsanjivp)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Using NON_ISTREAM object for lexer
Message-ID: <b71mci+n045@eGroups.com>

Hi!

Can anyone tell me if I can use non-istream objects for input to the 
lexer of antlr? Is there any option in ANTLR that turns off the use 
of istream derived objects for the lexter creation? Can't we just 
pass string or some other thing but not istream to the lexer?

Any help would be greatly appreciated.
Thanks,
Sanjiv


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Wed Apr  9 11:08:40 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] the jars...
In-Reply-To: <Pine.LNX.3.96.1030409132913.1177L-100000@exeter.exeter.org>
Message-ID: <4B1AB164-6AB6-11D7-B437-000393BB647E@jguru.com>

Hi Bob,

The antlr.jar file is everything including the tool.  The runtime is 
just too intertwined.  Still small :)

Ter

On Wednesday, April 9, 2003, at 10:30  AM, bob mcwhirter wrote:

>
> Howdy guys--
>
> I'm updating the ANTLR plugin for maven, and I'm sure I've just
> missed some threads, but are we down to a single jar now?
>
> Previously, we had antlr.jar for runtime stuff, and antlrall.jar
> which includes antlr.Tool and other compiler-time-only stuff.
>
> I see 2.7.2 has just the one antlr.jar.  Is that sufficient for
> all use-cases?  Can we still build a runtime-only jar?
>
> 	-bob
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From albert.huh at embarcadero-ca.com  Wed Apr  9 11:05:13 2003
From: albert.huh at embarcadero-ca.com (Albert Huh)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Using NON_ISTREAM object for lexer
Message-ID: <0881AC7F2F339C40BC6F7983D1E0BEC97683CF@mail2k.embarcadero-ca.com>

in general, to do lexing, you need to be able to iterate sequentially through an array of characters a.k.a. your input.  istreams already do this for you.  doesn't really make a whole lot of sense to use something else and then "re-invent the wheel".

that, and i think antlr is coded to use istreams anyways (and methods associated with istreams), so i doubt it.

if you wanted to use a string, you could use a stringstream.

-----Original Message-----
From: rmsanjivp [mailto:rmsanjivp@yahoo.com]
Sent: Wednesday, April 09, 2003 1:48 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Using NON_ISTREAM object for lexer


Hi!

Can anyone tell me if I can use non-istream objects for input to the 
lexer of antlr? Is there any option in ANTLR that turns off the use 
of istream derived objects for the lexter creation? Can't we just 
pass string or some other thing but not istream to the lexer?

Any help would be greatly appreciated.
Thanks,
Sanjiv


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Wed Apr  9 13:52:29 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Structure of AST [lecture audio posted]
In-Reply-To: <170826586F3BD511910D0200C110AAA8054022AD@memail03.bco-home.com>
Message-ID: <2D999D38-6ACD-11D7-B437-000393BB647E@jguru.com>


On Wednesday, April 9, 2003, at 09:41  AM, mzukowski@yci.com wrote:
> And for sure read
> http://www.cs.usfca.edu/~parrt/course/652/lectures/java.ast.html

I have just posted the audio for that lecture at:

http://nexus.cs.usfca.edu/~parrt/course/652/

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Wed Apr  9 15:46:37 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Two common tree parser errors
References: <170826586F3BD511910D0200C110AAA8054022AE@memail03.bco-home.com>
Message-ID: <003901c2fee9$e0f605d0$0200a8c0@NOTEBOOK>

Thanks for this Monty.  I am saving this email for future refernce.
----- Original Message ----- 
From: <mzukowski@yci.com>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, April 10, 2003 3:09 AM
Subject: [antlr-interest] Two common tree parser errors


> Anthony Youngman asked me to help debug his tree parser.
> 
.............................
> 
> Summary:
> 
> Print your tree and use tracing.
> Inspect your token types files for mismatched or duplicated tokens.
> Remember to always quote your literals.
> Remember your # in front of root nodes.
> 
> Monty



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From madison_stjames at yahoo.com  Wed Apr  9 20:20:37 2003
From: madison_stjames at yahoo.com (madison_stjames)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Resuming While loop
Message-ID: <b72nu5+dgbh@eGroups.com>

My parser currently stops processing at the point at which it 
encounters an error in the file being processed. It writes out the 
error to the screen, then quits. A quick look at the code reveals 
why this is happening:

class myParser
{
	public static void Main(string[] args) 
	{
		try 
		{
			T lexer = new T(new CharBuffer(Console.In));
			P parser = new P(lexer);
			parser.startRule();
			bool done = false;
			while ( !done ) 
			{
				Token tok = lexer.nextToken();
				Console.Out.WriteLine("Token: "+tok);
				if ( tok.Type==Token.EOF_TYPE ) {
					done = true;
				}
			}
			Console.Out.WriteLine("done lexing...");
		} 
		catch(Exception e) 
		{
			Console.Error.WriteLine("exception: "+e);

		}

	}
}

What I want to do is modify the main method so that, upon 
encountering an error, the parser will write it out, then continue 
processing the rest of the file.

I have tried several different approaches, all of which have failed.

Suggestions....?

Thanks in Advance!


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From odzsoi at yahoo.com  Thu Apr 10 00:25:43 2003
From: odzsoi at yahoo.com (odzsoi)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Re: Lexer help
In-Reply-To: <b71koo+pn8t@eGroups.com>
Message-ID: <b7369n+45p7@eGroups.com>

So, the solution was to replace TEXT to 
TEXT                   :       ~('$') // First letter is not a dollar 
				   (   ~('$') // Not dollar   
 				    | '$'! '$' // Or two dollars  
 				   )*;  
 
This way there is no conflict. 
 
 
--- In antlr-interest@yahoogroups.com, "odzsoi" <odzsoi@y...> wrote: 
> Hi,  
>   
>  I would need your help to create a lexer for a simple templating language that would  
> eat up everything that is not between two dollars ($), but replaces two dollars to a  
> single dollar.  
>   
> For example:  
> blabla$something$$$blabla$something2$bla$$bla  
>   
> should be lexed as (blabla) (something) ($blabla) (something2) (bla$bla).  
>   
> My lexer grammar is:  
> TEXT                   :       (   ~('$') // Not dollar   
> 				    | '$'! '$' // Or two dollars  
> 				   )+ ;  
>   
> DOLLAR		  :	   '$'	;  
>   
> AntLR says:  
>   
> warning: lexical nondeterminism between rules TEXT and DOLLAR upon  
> template.g:     k==1:'$'  
> template.g:     k==2:<end-of-token>  
 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From cesar at ciencias.unam.mx  Thu Apr 10 01:15:22 2003
From: cesar at ciencias.unam.mx (Cesar Octavio =?iso-8859-1?Q?L=F3pez?= Nataren)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Line terminator.
Message-ID: <courier.3E95281A.0000B205@galadriel.fciencias.unam.mx>

Hello, in my grammar the simbols:  \u000A, \u000D, \u2028, \2029 are called 
Line terminator. 

Now my problem is: 

There are some small cases where I don't want to ignore that a line 
terminator appears. 

Here is an example: 

ContinueStatement: continue [no LineTerminator here] Identifier_opt; 

By now, I had been ignoring these "corner cases" by just ignoring on the 
lexer those symbols with the very well known Token.SKIP but now I need more 
control. 

what do you suggest? 

Erasing the Token.SKIP from the lineTerminators lexing rules, and modifying 
all my parser rules to take care of lineTerminators? (looks like lot's of 
work for me). 

is possible a some kind of "lexical" predicates to make a solution for it? 

or? 


Cheers 


c?sar

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Thu Apr 10 01:46:42 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Two common tree parser errors
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A1CA@lnml1.eca-international.local>

Thanks Monty (thanks in public for a lot of private help).

And thanks for yet another tip! Okay, I should try to read the docu and
pick up on this but it's quite hard to find - next time I shall have to
try with -traceTreeParse, which I didn't even know existed!

Thanks a lot
Wol

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: 09 April 2003 18:10
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Two common tree parser errors


Anthony Youngman asked me to help debug his tree parser.

First I invoked antlr.Tool to instrument for tracing the tree parser:

java antlr.Tool -traceTreeParser BASIC.g

I run it on the sample input.  Anthony prints the AST before tree
parsing:

 ( PROGRAM SHELL ( LOOP ( PRINT "X" : ) ( INPUT COMMAND ) ( PRINT ( :
"Command is " COMMAND ) ) ( IF ( EQ COMMAND "Q" ) THEN EXIT ) ( PRINT
JUNK )
REPEAT ) ( PRINT JUNK2 ) END ) null

 > programst(PROGRAM)
  > statement(LOOP)
   > loopst(LOOP)
<AST>: unexpected AST node: PRINT

Hmm, lets look at the rules:
loopst 
	: #("LOOP" (statement)+ "REPEAT" ;

statement : ( inputst | printst | exitst | ifst | loopst | NULL ) ;

printst { boolean colon = false; }
	: #(PRINT expr ( COLONPRINT {colon = true;})?)
	...
Looks ok, but it's not matching properly.  Loop calls statement calls
printst, so what's the deal?  Could the token types be wrong between
parser
and tree parser?  Unlikely since they are in the same file, but let's
inspect the BASICTokenTypes.txt file anyways:

LITERAL_PRINT="PRINT"=37
...
PRINT=41

Aha.  Literal tokens get a prefix prepended to their name.  ANTLR
thought
printst was introducing a new token type named PRINT and created a new
token
value for it because there were no quotes around PRINT.  Easily fixed:

printst { boolean colon = false; }
	: #("PRINT" expr ( COLONPRINT {colon = true;})?)
	...


Let's try again:


 ( PROGRAM SHELL ( LOOP ( PRINT "X" : ) ( INPUT COMMAND ) ( PRINT ( :
"Command is " COMMAND ) ) ( IF ( EQ COMMAND "Q" ) THEN EXIT ) ( PRINT
JUNK )
REPEAT ) ( PRINT JUNK2 ) END ) null


 > programst(PROGRAM)
  > statement(LOOP)
   > loopst(LOOP)
    > statement(PRINT)
     > printst(PRINT)
      > expr("X")
       > logicexpr("X")
        > equalityexpr("X")
         > atom("X")
         < atom(:)
        < equalityexpr(:)
       < logicexpr(:)
      < expr(:)
     < printst(INPUT)
    < statement(INPUT)
    > statement(INPUT)
     > inputst(INPUT)
     < inputst(PRINT)
    < statement(PRINT)
    > statement(PRINT)
     > printst(PRINT)
      > expr(:)
       > catexpr(:)
        > atom("Command is ")
        < atom(COMMAND)
        > atom(COMMAND)
        < atom(null)
       < catexpr(null)
      < expr(null)
     < printst(IF)
    < statement(IF)
    > statement(IF)
     > ifst(IF)
      > logicexpr(PRINT)
       > equalityexpr(PRINT)
<AST>: unexpected AST node: PRINT
...

(Same message as before, but totally different meaning)
Ok, this is weird because you can see clearly above the tree fragment is

( IF ( EQ COMMAND "Q" ) THEN EXIT ) ( PRINT JUNK )
But the tree parser is skipping to the PRINT, not going to the child (EQ
COMMAND "Q").  Inspecting the code shows:

ifst : ("IF" logicexpr "THEN" statement) ;

Sure enough he forgot the # which says to look at children of "IF".  So
it
skips to the sibling of "IF" which is "PRINT" (and which is not
referenced
by equalityexpr)

Fixed:

ifst : #("IF" logicexpr "THEN" statement) ;

Summary:

Print your tree and use tracing.
Inspect your token types files for mismatched or duplicated tokens.
Remember to always quote your literals.
Remember your # in front of root nodes.

Monty

 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.
From Anthony.Youngman at ECA-International.com  Thu Apr 10 02:01:16 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Line terminator.
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A1CB@lnml1.eca-international.local>

I have a similar problem in my grammar - with an IF/THEN/ELSE, whether the THEN/ELSE clause is terminated by the line-feed depends on whether the associated statment is on the same line ...

So what I've done is declare each statement without regard to the statement terminator.

My parser now builds up a list of statements with the following rules

exitst : (exitt:"EXIT"^ {System.out.println(exitt+" exit ");} ) ;

statement : ( inputst | printst | exitst | ifst | loopst | "NULL" ) ;

statement_line : (statement ( SEMI! statement)* ) ;

statement_list
	: ( (statement_line (EOL!)+ )+ )
	{ ## = #(#[STLIST,"stlist"], ##); }
	;

So my statement_list rule now throws away the EOL, and in corner cases where I need to be able to handle where there is no EOL I can refer to statement or statement_line. I haven't properly defined it yet but my definition for IF/THEN/ELSE will be something like

   "IF" expr "THEN" statement_line "ELSE" statement_line
 | "IF" expr "THEN" EOL statement_list "END" (EOL!)* "ELSE" EOL statement_list "END" EOL

See if you can do something like this ...

Cheers,
Wol

-----Original Message-----
From: Cesar Octavio L?pez Nataren [mailto:cesar@ciencias.unam.mx] 
Sent: 10 April 2003 09:15
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Line terminator.


Hello, in my grammar the simbols:  \u000A, \u000D, \u2028, \2029 are called 
Line terminator. 

Now my problem is: 

There are some small cases where I don't want to ignore that a line 
terminator appears. 

Here is an example: 

ContinueStatement: continue [no LineTerminator here] Identifier_opt; 

By now, I had been ignoring these "corner cases" by just ignoring on the 
lexer those symbols with the very well known Token.SKIP but now I need more 
control. 

what do you suggest? 

Erasing the Token.SKIP from the lineTerminators lexing rules, and modifying 
all my parser rules to take care of lineTerminators? (looks like lot's of 
work for me). 

is possible a some kind of "lexical" predicates to make a solution for it? 

or? 


Cheers 


c?sar

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.
From Jim.OConnor at microfocus.com  Thu Apr 10 06:04:17 2003
From: Jim.OConnor at microfocus.com (Jim O'Connor)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Resuming While loop
Message-ID: <3AC103F1B7EEEC48A855ACB1D2819E910184DD83@rock-corpmail.microfocus.com>

Hello,
  I'm interested in the topic, as well.  The Error Handling and Recovering
in the documentation contains a good start.
http://www.antlr.org/doc/err.html#_bb3.  The implementation below is
described in the second to last bolded section on the page
"Specifying Parser Exception-Handlers".


  I have a start at the mechanism you talk about.  You talk about "looping"
and making modifications in the "main" method.  The error recovery is
specified in the parser.  If that is not what you are looking for, please
clarify.

  The mechanism below may not be the "recommended" way of proceeding.  An
experienced Error recovery person could comment :0).
  I catch the exception in the parser and "consume until" the parser can
recognize a starting point.  


//just to get the general idea
startRule
  : (statement)+
  ;

statement: DSLASH operation parameters;

parameters
 : parameter (COMMA parameter)*;

parameter
  : THIS
  | THAT
  | THE
  | OTHER
  ;
    exception
    catch [RecognitionException ex] {
       reportError("Here I am parameter : " +  ex.toString());  
       consume(); //eat the offending token
       consumeUntil(DSLASH);  //eat the tokens until I can start a rule
     }

Any suggestions are welcome.

Jim




-----Original Message-----
From: madison_stjames [mailto:madison_stjames@yahoo.com]
Sent: Wednesday, April 09, 2003 11:21 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Resuming While loop


My parser currently stops processing at the point at which it 
encounters an error in the file being processed. It writes out the 
error to the screen, then quits. A quick look at the code reveals 
why this is happening:

class myParser
{
	public static void Main(string[] args) 
	{
		try 
		{
			T lexer = new T(new CharBuffer(Console.In));
			P parser = new P(lexer);
			parser.startRule();
			bool done = false;
			while ( !done ) 
			{
				Token tok = lexer.nextToken();
				Console.Out.WriteLine("Token: "+tok);
				if ( tok.Type==Token.EOF_TYPE ) {
					done = true;
				}
			}
			Console.Out.WriteLine("done lexing...");
		} 
		catch(Exception e) 
		{
			Console.Error.WriteLine("exception: "+e);

		}

	}
}

What I want to do is modify the main method so that, upon 
encountering an error, the parser will write it out, then continue 
processing the rest of the file.

I have tried several different approaches, all of which have failed.

Suggestions....?

Thanks in Advance!


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From butch75000 at yahoo.de  Thu Apr 10 06:18:14 2003
From: butch75000 at yahoo.de (butch75000)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] missing tokens in the Hashtable
Message-ID: <b73qum+1sh3@eGroups.com>

Hi all,

if I use heterogeneous tree construction the following code will be 
generated with version 2.7.2 of antlr

    tmp1_AST = (ProgNode)astFactory.create(LT(1),"ProgNode");

But when I start my parser, the following exception is thrown:
java.lang.IllegalArgumentException: Invalid class or can't make 
instance, IdentNode

So should the class also contain the importpath like the following 
(in my case):
    tmp1_AST = (ProgNode)astFactory.create(LT
(1),"parser.tree.ProgNode");

Then it works. I have overwritten the method
  public AST create(Token tok, String className)
in a inherited ASTFactory so that the name of the package is also 
included in the String className. This works but is not very elegent.

Is this a bug or what do I wrong?



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From butch75000 at yahoo.de  Thu Apr 10 06:32:33 2003
From: butch75000 at yahoo.de (Michael Wirth)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Re: missing tokens in the Hashtable
In-Reply-To: <b73qum+1sh3@eGroups.com>
Message-ID: <b73rph+14s0@eGroups.com>

sorry, typed a wrong subject and my name was also wrong. It was the 
first post here.

Greetings 
    Michael

--- In antlr-interest@yahoogroups.com, "butch75000" <butch75000@y...> 
wrote:
> Hi all,
> 
> if I use heterogeneous tree construction the following code will be 
> generated with version 2.7.2 of antlr
> 
>     tmp1_AST = (ProgNode)astFactory.create(LT(1),"ProgNode");
> 
> But when I start my parser, the following exception is thrown:
> java.lang.IllegalArgumentException: Invalid class or can't make 
> instance, IdentNode
> 
> So should the class also contain the importpath like the following 
> (in my case):
>     tmp1_AST = (ProgNode)astFactory.create(LT
> (1),"parser.tree.ProgNode");
> 
> Then it works. I have overwritten the method
>   public AST create(Token tok, String className)
> in a inherited ASTFactory so that the name of the package is also 
> included in the String className. This works but is not very 
elegent.
> 
> Is this a bug or what do I wrong?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Apr 10 08:21:43 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Line terminator.
Message-ID: <170826586F3BD511910D0200C110AAA8054022B5@memail03.bco-home.com>

In this specific case you may be able to handle this with a syntactic
predicate in the lexer, but I don't have enough of your parser and lexer to
say for sure.
	
You may be better off using a filter type of approach.  See
http://www.codetransform.com/filterexample.html

Basically you lex everything without skipping newlines, then have a filter
on the token stream which checks and only keeps NEWLINE if it preceeds
CONTINUE (to force the parser to have a recognition error), otherwise
NEWLINES are discarded.

Monty

-----Original Message-----
From: Cesar Octavio L?pez Nataren [mailto:cesar@ciencias.unam.mx]
Sent: Thursday, April 10, 2003 1:15 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Line terminator.


Hello, in my grammar the simbols:  \u000A, \u000D, \u2028, \2029 are called 
Line terminator. 

Now my problem is: 

There are some small cases where I don't want to ignore that a line 
terminator appears. 

Here is an example: 

ContinueStatement: continue [no LineTerminator here] Identifier_opt; 

By now, I had been ignoring these "corner cases" by just ignoring on the 
lexer those symbols with the very well known Token.SKIP but now I need more 
control. 

what do you suggest? 

Erasing the Token.SKIP from the lineTerminators lexing rules, and modifying 
all my parser rules to take care of lineTerminators? (looks like lot's of 
work for me). 

is possible a some kind of "lexical" predicates to make a solution for it? 

or? 


Cheers 


c?sar

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tfga at terra.com.br  Thu Apr 10 08:27:30 2003
From: tfga at terra.com.br (Thiago F.G. Albuquerque)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] [Newbie] "keywords vs. identifiers": how can I fix this?
Message-ID: <5.1.0.14.1.20030410121729.00a50900@pop.bsb.terra.com.br>

Hi,

I know this is probably a FAQ, but I couldn't figure it out for myself.

This is the classic "keywords vs. identifiers" problem.

I'm trying to make a lexer (just the lexer, no parser yet). Here are the rules:

ID : LETRA (LETRA | DIGITO)* ;

INT : (DIGITO)+ ;

BOOL : "true"
      | "false"
      ;

ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
grammar.g: warning:lexical nondeterminism between rules ID and BOOL upon
grammar.g:     k==1:'f','t'

How can I fix this?

The docs say:

"(...) literals may be specified in the lexer grammar by means of the 
literal option."

But there's no option named "literal".

I looked in the FAQ, but still didn't manage to get an answer.

Any help is apreciated.

Thiago


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Apr 10 08:30:54 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] [Newbie] "keywords vs. identifiers": how can
	 I fix this?
Message-ID: <170826586F3BD511910D0200C110AAA8054022B6@memail03.bco-home.com>

http://www.antlr.org/doc/metalang.html#TokensSection
-----Original Message-----
From: Thiago F.G. Albuquerque [mailto:tfga@terra.com.br]
Sent: Thursday, April 10, 2003 8:28 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] [Newbie] "keywords vs. identifiers": how can I
fix this?


Hi,

I know this is probably a FAQ, but I couldn't figure it out for myself.

This is the classic "keywords vs. identifiers" problem.

I'm trying to make a lexer (just the lexer, no parser yet). Here are the
rules:

ID : LETRA (LETRA | DIGITO)* ;

INT : (DIGITO)+ ;

BOOL : "true"
      | "false"
      ;

ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
grammar.g: warning:lexical nondeterminism between rules ID and BOOL upon
grammar.g:     k==1:'f','t'

How can I fix this?

The docs say:

"(...) literals may be specified in the lexer grammar by means of the 
literal option."

But there's no option named "literal".

I looked in the FAQ, but still didn't manage to get an answer.

Any help is apreciated.

Thiago


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tfga at terra.com.br  Thu Apr 10 08:56:10 2003
From: tfga at terra.com.br (Thiago F.G. Albuquerque)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Errors that ANTRL shouldn't issue
Message-ID: <5.1.0.14.1.20030410121037.00a4c900@pop.bsb.terra.com.br>

Errors that ANTRL shouldn't issue:

1)

tokens
{
//    "true";
//    "false";
}

grammar.g:18:1: rule classDef trapped:
grammar.g:18:1: unexpected token: }
error: aborting grammar 'MyLexer' due to errors
Exiting due to errors.

--------------------------------------------------------------------------

2)

INT : DIGIT+ ;

ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
grammar.g:28:7: rule classDef trapped:
grammar.g:28:7: unexpected token: DIGIT
error: aborting grammar 'MyLexer' due to errors
Exiting due to errors.

Why isn't this legal? Why do I have to enclose DIGIT in parentheses?

--------------------------------------------------------------------------

Thiago


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tfga at terra.com.br  Thu Apr 10 08:59:27 2003
From: tfga at terra.com.br (Thiago F.G. Albuquerque)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Fwd: [Newbie] "keywords vs. identifiers": how can I fix this?
Message-ID: <5.1.0.14.1.20030410125626.00a4ebd0@pop.bsb.terra.com.br>


>ID : LETRA (LETRA | DIGITO)* ;
>
>INT : (DIGITO)+ ;
>
>BOOL : "true"
>      | "false"
>      ;
>
>ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
>grammar.g: warning:lexical nondeterminism between rules ID and BOOL upon
>grammar.g:     k==1:'f','t'

I fixed it like this:

ID : ("true")    =>   ("true")  { $setType(BOOL); }
    | ("false")   =>   ("false") { $setType(BOOL); }
    | LETRA (LETRA | DIGITO)* ;

Is this ok? Is there a better way to do this?

TIA,
Thiago

PS:

LETRA == LETTER
DIGITO == DIGIT

(sorry, I forgot to translate)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From glindholm at yahoo.com  Thu Apr 10 09:30:31 2003
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Fwd: [Newbie] "keywords vs. identifiers": how can I fix this?
In-Reply-To: <5.1.0.14.1.20030410125626.00a4ebd0@pop.bsb.terra.com.br>
Message-ID: <20030410163031.15335.qmail@web12406.mail.yahoo.com>


That should work but it's not practical if you have a large number of keywords.
Take a look at the testLiterals option http://antlr.org/doc/options.html#testLiterals
Use this with the tokens section http://antlr.org/doc/metalang.html#TokensSection
tokens {
  TRUE="true";
  FALSE="false";
}
Also read about Token Vocabularies http://antlr.org/doc/vocab.html
Greg
 "Thiago F.G. Albuquerque" <tfga@terra.com.br> wrote:
>ID : LETRA (LETRA | DIGITO)* ;
>
>INT : (DIGITO)+ ;
>
>BOOL : "true"
> | "false"
> ;
>
>ANTLR Parser Generator Version 2.7.2 1989-2003 jGuru.com
>grammar.g: warning:lexical nondeterminism between rules ID and BOOL upon
>grammar.g: k==1:'f','t'

I fixed it like this:

ID : ("true") => ("true") { $setType(BOOL); }
| ("false") => ("false") { $setType(BOOL); }
| LETRA (LETRA | DIGITO)* ;

Is this ok? Is there a better way to do this?

TIA,
Thiago

PS:

LETRA == LETTER
DIGITO == DIGIT

(sorry, I forgot to translate)




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




---------------------------------
Do you Yahoo!?
Yahoo! Tax Center - File online, calculators, forms, and more
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030410/39dfbad2/attachment.html
From madison_stjames at yahoo.com  Thu Apr 10 09:36:55 2003
From: madison_stjames at yahoo.com (madison_stjames)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Re: Resuming While loop
In-Reply-To: <3AC103F1B7EEEC48A855ACB1D2819E910184DD83@rock-corpmail.microfocus.com>
Message-ID: <b746j7+nvj0@eGroups.com>

Thanks Jim!

I just re-read my question and realized just what a newbie I was. 
(It can be a little intimidating out here sometimes, given the 
expertise of a lot of the folks on this board.)

I found some similar information in the documentation. I took your 
approach, with the exception of using consume(). This may be exactly 
what I am looking for.

I've got some more trial and testing to do. If I have any 
breakthroughs... I'll be sure to share.

Thanks Again!

--- In antlr-interest@yahoogroups.com, "Jim O'Connor" 
<Jim.OConnor@m...> wrote:
> Hello,
>   I'm interested in the topic, as well.  The Error Handling and 
Recovering
> in the documentation contains a good start.
> http://www.antlr.org/doc/err.html#_bb3.  The implementation below 
is
> described in the second to last bolded section on the page
> "Specifying Parser Exception-Handlers".
> 
> 
>   I have a start at the mechanism you talk about.  You talk 
about "looping"
> and making modifications in the "main" method.  The error recovery 
is
> specified in the parser.  If that is not what you are looking for, 
please
> clarify.
> 
>   The mechanism below may not be the "recommended" way of 
proceeding.  An
> experienced Error recovery person could comment :0).
>   I catch the exception in the parser and "consume until" the 
parser can
> recognize a starting point.  
> 
> 
> //just to get the general idea
> startRule
>   : (statement)+
>   ;
> 
> statement: DSLASH operation parameters;
> 
> parameters
>  : parameter (COMMA parameter)*;
> 
> parameter
>   : THIS
>   | THAT
>   | THE
>   | OTHER
>   ;
>     exception
>     catch [RecognitionException ex] {
>        reportError("Here I am parameter : " +  ex.toString());  
>        consume(); //eat the offending token
>        consumeUntil(DSLASH);  //eat the tokens until I can start a 
rule
>      }
> 
> Any suggestions are welcome.
> 
> Jim
> 
> 
> 
> 
> -----Original Message-----
> From: madison_stjames [mailto:madison_stjames@y...]
> Sent: Wednesday, April 09, 2003 11:21 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Resuming While loop
> 
> 
> My parser currently stops processing at the point at which it 
> encounters an error in the file being processed. It writes out the 
> error to the screen, then quits. A quick look at the code reveals 
> why this is happening:
> 
> class myParser
> {
> 	public static void Main(string[] args) 
> 	{
> 		try 
> 		{
> 			T lexer = new T(new CharBuffer(Console.In));
> 			P parser = new P(lexer);
> 			parser.startRule();
> 			bool done = false;
> 			while ( !done ) 
> 			{
> 				Token tok = lexer.nextToken();
> 				Console.Out.WriteLine("Token: "+tok);
> 				if ( tok.Type==Token.EOF_TYPE ) {
> 					done = true;
> 				}
> 			}
> 			Console.Out.WriteLine("done lexing...");
> 		} 
> 		catch(Exception e) 
> 		{
> 			Console.Error.WriteLine("exception: "+e);
> 
> 		}
> 
> 	}
> }
> 
> What I want to do is modify the main method so that, upon 
> encountering an error, the parser will write it out, then continue 
> processing the rest of the file.
> 
> I have tried several different approaches, all of which have 
failed.
> 
> Suggestions....?
> 
> Thanks in Advance!
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From madison_stjames at yahoo.com  Thu Apr 10 13:52:59 2003
From: madison_stjames at yahoo.com (madison_stjames)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] More Error Handling and Recovery
Message-ID: <b74ljb+hkj6@eGroups.com>

Ok, I think I've almost got it:

Here's my start rule:
 startRule
    :  ( line )+ EOF
    ;
    exception // for rule
    catch [RecognitionException ex] {
    Console.Error.WriteLine("exception: "+ex);
    consume();
    consumeUntil(tokenSet_0_);
    }

What I want to do is resume the line production, upon encountering 
an unrecognized token. The error is written out, and parsing 
continues with the next line in the file.

The line production composed of sub-productions as follows:

line
    : ( date WS time WS cip WS csusername WS sip WS sport WS 
csmethod WS csuristem WS csuriquery WS scstatus WS csuseragent (WS)?
        { 
           Console.Out.WriteLine( SBLine.ToString() );
           SBLine = new StringBuilder();
        }
       )
    ; 

I want to continue to the next rule that the parser can recognize. I 
thought line should work, for example: consumeUntil(line) but that 
causes an error.

I looked at the parser file from a previous version, and noticed 
that error handling specified token sets. How do these map to the 
rules? And how do I determine which ones to use?

The exception handling routine above works, but I'm not sure exactly 
what I'm referencing with tokenSet_0_;

Thanks Again!


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Thu Apr 10 13:56:14 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] comments in grammar files
Message-ID: <20030410205614.68096.qmail@web20421.mail.yahoo.com>

Why can't I have single-line comments at the end of my
grammar file? :(

__________________________________________________
Do you Yahoo!?
Yahoo! Tax Center - File online, calculators, forms, and more
http://tax.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Thu Apr 10 14:05:50 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] comments in grammar files
In-Reply-To: <20030410205614.68096.qmail@web20421.mail.yahoo.com>
Message-ID: <356D80CA-6B98-11D7-B437-000393BB647E@jguru.com>

add a newline to the end?

Ter

On Thursday, April 10, 2003, at 01:56  PM, Matt Benson wrote:

> Why can't I have single-line comments at the end of my
> grammar file? :(
>
> __________________________________________________
> Do you Yahoo!?
> Yahoo! Tax Center - File online, calculators, forms, and more
> http://tax.yahoo.com
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Thu Apr 10 14:37:13 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] comments in grammar files
In-Reply-To: <356D80CA-6B98-11D7-B437-000393BB647E@jguru.com>
Message-ID: <20030410213713.60676.qmail@web20414.mail.yahoo.com>

Okay, this is the same as with the Java grammar, isn't
it?  Seems like I had a fix for that... making the
terminating line break optional... is there a negative
consequence of this?

SL_COMMENT : "//" (~('\n'|'\r'))* ('\n'|'\r'('\n')?)?
;


--- Terence Parr <parrt@jguru.com> wrote:
> add a newline to the end?
> 
> Ter
> 
> On Thursday, April 10, 2003, at 01:56  PM, Matt
> Benson wrote:
> 
> > Why can't I have single-line comments at the end
> of my
> > grammar file? :(
> >
> > __________________________________________________
> > Do you Yahoo!?
> > Yahoo! Tax Center - File online, calculators,
> forms, and more
> > http://tax.yahoo.com
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator:
> http://www.antlr.org
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
Yahoo! Tax Center - File online, calculators, forms, and more
http://tax.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Thu Apr 10 16:25:00 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] comments in grammar files
In-Reply-To: <20030410213713.60676.qmail@web20414.mail.yahoo.com>
Message-ID: <A67E872A-6BAB-11D7-B437-000393BB647E@jguru.com>


On Thursday, April 10, 2003, at 02:37  PM, Matt Benson wrote:

> Okay, this is the same as with the Java grammar, isn't
> it?  Seems like I had a fix for that... making the
> terminating line break optional... is there a negative
> consequence of this?
>
> SL_COMMENT : "//" (~('\n'|'\r'))* ('\n'|'\r'('\n')?)?
> ;

I think that's ok...haven't folded back into antlr.g yet 
though...sorry.  Not a problem for unix as it abhors a file sans 
terminating newline; until it annoys me I rarely get to it <snicker>

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lzy7886 at yahoo.com  Fri Apr 11 05:07:49 2003
From: lzy7886 at yahoo.com (lzy7886)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] two question about java.g
Message-ID: <b76b6l+e4i6@eGroups.com>

Hi Terence:

I just have two questions about some rules in your java.g example
(antlr-2.7.2\examples\java\java).
First the NUM_INT lexer rule:
please see the //?? part of in the following excerpt .
NUM_INT
	{boolean isDecimal=false; Token t=null;}
    :   '.' {_ttype = DOT;}
            (	('0'..'9')+ (EXPONENT)? (f1:FLOAT_SUFFIX {t=f1;})?
            )?

	|	(	'0' {isDecimal = true;} 
			(	('x'|'X')
				(			
							
	// hex
	options {
					
	warnWhenFollowAmbig=false;
					}
				:	HEX_DIGIT
				)+
			|	('0'..'7')+		

			)?
		|	('1'..'9') ('0'..'9')*  {isDecimal=true;}
		// non-zero decimal
		)
//??here when you enter the follwing subrule whether now you have 
//hex,decimal or oct number,the rule set all the isDecimal variable to
//ture.so the semantic predicates of the isDecimal variable in the 
//beginning of the second alternative of the follwing subrule seems 
//meaningless.
//I wonder if the initial idea is to prevent hex number appended 
//with '.',ie:0x44.0e44
		(	('l'|'L') { _ttype = NUM_LONG; }	
	
		// only check to see if it's a float if looks like 
decimal so far
		|	{isDecimal}?
            		(   '.' ('0'..'9')* (EXPONENT)? 
(f2:FLOAT_SUFFIX {t=f2;})?
            		   EXPONENT (f3:FLOAT_SUFFIX {t=f3;})?
            		|   f4:FLOAT_SUFFIX {t=f4;}
            		)
            		{
			if (t != null && t.getText().toUpperCase
() .indexOf('F') >= 0) {
                		_ttype = NUM_FLOAT;
			}
            		else {
	           	_ttype = NUM_DOUBLE; // assume double
			}
			}
        	)?
The second question is that I found in the java spec 2rd:
It is a compile-time error for a line terminator to appear after the 
opening ' and before the closing '.(chapter 3.10.4) 
It is a compile-time error for a line terminator to appear after the 
opening " and before the closing matching ".(chapter 3.10.5)
But the corresponding lexer rule in java.g doesn't abide by the spec :
// character literals
CHAR_LITERAL
	:	'\'' ( ESC | ~'\'' ) '\''
	;

// string literals
STRING_LITERAL
	:	'"' (ESC|~('"'|'\\'))* '"'
	;
One proposal for revision: 
// character literals
CHAR_LITERAL
	:	'\'' ( ESC | ~('\''|'\n'|'\r') ) '\''
	;

// string literals
STRING_LITERAL
	:	'"' (ESC|~('"'|'\\'|'\n'|'\r'))* '"'
	;	
OK,that's all my question so far,anyway ANTLR is just so wonderful!I 
appreciate you guys work a lot.I am looking forward to 
the progress of this revolutionary tool.

                        One guy from China
                                 lzy	
        	



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From biz_morland at yahoo.com  Fri Apr 11 14:27:58 2003
From: biz_morland at yahoo.com (biz_morland)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Installing Antlr plugin with Eclipse
Message-ID: <b77c0u+h3rh@eGroups.com>

Hi,

Does there exist anywhere on the Net a step-by-step guide on how to 
install the Antlr plugin within Eclipse? So far the most detailed 
document I've found is at http://antlreclipse.sourceforge.net/, which 
unfortunately leaves a lot unanswered for a newbie. I'm not even sure 
if this document is valid for the newest versions of Eclipse. 

Or maybe there's a document somewhere on how to install plugins in 
general, and from there I can get the Antlr plugin up and running?

Many thanks

- Greg


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mabell at wi.rr.com  Fri Apr 11 20:32:05 2003
From: mabell at wi.rr.com (M.A.Bell)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Installing Antlr plugin with Eclipse
In-Reply-To: <b77c0u+h3rh@eGroups.com>
References: <b77c0u+h3rh@eGroups.com>
Message-ID: <3E9788B5.6020404@wi.rr.com>

Well, I followed the instructions (thanks for the link by the way):
1. Downloaded org.antlr.eclipse.core_0.1.4.zip, 
org.antlr.eclipse.ui_0.1.4.zip and org.antlr_2.7.2_03.zip
2. Unzipped all 3 to <eclipse install directory>\plugins
3. Added *.g to Window|Preferences|Java|Compiler|Build Path|Filtered 
Resources
4. Created a new project with Project Contents pointing to a directory 
with some *.g files in it
5. Right clicked on the project node in the Navigator pane and clicked 
on Toggle ANTLR project nature
Voila! When I select a *.g file in the navigator I see syntax 
highlighted source in the edit pane and see many errors (as expected)  
in the tasks pane.
I think I may like this tool.
biz_morland wrote:

>Hi,
>
>Does there exist anywhere on the Net a step-by-step guide on how to 
>install the Antlr plugin within Eclipse? So far the most detailed 
>document I've found is at http://antlreclipse.sourceforge.net/, which 
>unfortunately leaves a lot unanswered for a newbie. I'm not even sure 
>if this document is valid for the newest versions of Eclipse. 
>
>Or maybe there's a document somewhere on how to install plugins in 
>general, and from there I can get the Antlr plugin up and running?
>
>Many thanks
>
>- Greg
>
>
> 
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
>
>
>
>  
>

-- 
Michael Bell
<mailto:mabell@wi.rr..com>



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From kim at tiede.dk  Sat Apr 12 03:40:08 2003
From: kim at tiede.dk (kim@tiede.dk)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Compiler theory on LL(k)
Message-ID: <2418689.1050144008057.JavaMail.root@palpatine.3enigheden.dk>


Hi there,

We are a group studying computer science at the university of Aalborg, Denmark. We are writting a project on the subject "C# to UML translator" and in the project we are using ANTLR as the compiler generator. We have had difficulties finding material on LL(k) k>1 parser generators but have managed to put 4 pages together describing ANTLR.

We have put it online on http://www.tiede.dk/bachelor/The_ANTLR_parser.pdf so if any of you would like to review and comment it (especially on the k>1 part) that would be great :-) 

Best regards

Kim Tiedemann



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From kim at tiede.dk  Sat Apr 12 03:40:07 2003
From: kim at tiede.dk (kim@tiede.dk)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Compiler theory on LL(k)
Message-ID: <3682376.1050144007065.JavaMail.root@palpatine.3enigheden.dk>


Hi there,

We are a group studying computer science at the university of Aalborg, Denmark. We are writting a project on the subject "C# to UML translator" and in the project we are using ANTLR as the compiler generator. We have had difficulties finding material on LL(k) k>1 parser generators but have managed to put 4 pages together describing ANTLR.

We have put it online on http://www.tiede.dk/bachelor/The_ANTLR_parser.pdf so if any of you would like to review and comment it (especially on the k>1 part) that would be great :-) 

Best regards

Kim Tiedemann



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mbraid at sqlworks.com  Sun Apr 13 19:06:45 2003
From: mbraid at sqlworks.com (martinkbraid)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] exception thrown in syntatic predicate can't be caught!
Message-ID: <b7d53l+r4kp@eGroups.com>

Because I need to be able to handle garbage characters passed to my 
parser/lexer, I'm doing my own error processing in a top level rule 
by catching ANTLRExceptions. 

By chance, during syntactic predicate processing, the lexer 
encounters a garbage character and throws a TokenStreamException. But 
because inputState.guessing > 0 (because it was in a syntactic 
predicate), my exception handler does NOT get control and the 
exception passes out of the parser. What do I do? It would be 
impossible to avoid syntatic predicates?

Thanks, Martin Braid


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mwi2k01 at yahoo.com  Mon Apr 14 06:07:50 2003
From: mwi2k01 at yahoo.com (mwi2k01)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Nested comments - char set inversion error
Message-ID: <b7ebr6+2f5q@eGroups.com>

Hi,
I need to write a lexer/parser for a language that has nested 
comments.
Searching for a while for doing something like this in ANTLR pointed 
me to ANTLR tutorial by Scott Stanchfield 
(http://javadude.com/articles/antlrtut/)
where there is an example of 'C-style comment in ANTLR 2.0'
--------------------
// multiple-line comments
ML_COMMENT
  : "/*"
    ( { LA(2)!='/' }? '*'
    | ('\n'|"\r\n"|'\r') { newline(); }
    | ~('*'|'\n'|"\r\n"|'\r')
    )*
    "*/"
    { $setType(Token.SKIP); }
  ;   
---------------------

but I couldn't get this to work in ANTLR.
I'm getting this error when trying to generate lexer/parser 
'xxx.g:16:28: This subrule cannot be inverted.  Only subrules of the 
form:
    (T1|T2|T3...) or
    ('c1'|'c2'|'c3'...)
may be inverted (ranges are also allowed).
Exiting due to errors.'

Searching for this error in google pops out this page 
http://www.antlr.org/bug/21.html
which suggest that it was a 'Char set inversion bugs' in ANTLR 2.20b 
and was fixed in 2.4.0.

I'm using the latest ANTLR 2.7.2 release and after copy/paste the 
exact grammar rfc822addr.g from http://www.antlr.org/bug/21.html
I'm still getting the same error (like described in the bug) !!!

Anyone can give me a hint/help ?
Thanks in advance,



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Apr 14 08:01:09 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] exception thrown in syntatic predicate can't
	 be caught!
Message-ID: <170826586F3BD511910D0200C110AAA8054022C2@memail03.bco-home.com>

Syntactic predicates work by trying a piece of syntax and then checking if
an exception was thrown.  When it finds a predicate that works it then calls
the parser for real, with actions turned back on.  Syntactic predicates
won't work if you can catch their exceptions.  Catch the exception after the
predicate has decide where to go.

Or just catch and handle the exception in the lexer.  What exactly are you
doing with the exceptions anyhow?

Monty

-----Original Message-----
From: martinkbraid [mailto:mbraid@sqlworks.com]
Sent: Sunday, April 13, 2003 7:07 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] exception thrown in syntatic predicate can't
be caught!


Because I need to be able to handle garbage characters passed to my 
parser/lexer, I'm doing my own error processing in a top level rule 
by catching ANTLRExceptions. 

By chance, during syntactic predicate processing, the lexer 
encounters a garbage character and throws a TokenStreamException. But 
because inputState.guessing > 0 (because it was in a syntactic 
predicate), my exception handler does NOT get control and the 
exception passes out of the parser. What do I do? It would be 
impossible to avoid syntatic predicates?

Thanks, Martin Braid


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Apr 14 08:06:10 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Nested comments - char set inversion error
Message-ID: <170826586F3BD511910D0200C110AAA8054022C4@memail03.bco-home.com>

You can look at the java or gcc grammars to get a working C-style comment
for antlr.

It's complaining about the "\r\n" in the ~().  In fact you can leave that
part out of the 
inversion since you already have '\r' and '\n' alone.

Monty

-----Original Message-----
From: mwi2k01 [mailto:mwi2k01@yahoo.com]
Sent: Monday, April 14, 2003 6:08 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Nested comments - char set inversion error


Hi,
I need to write a lexer/parser for a language that has nested 
comments.
Searching for a while for doing something like this in ANTLR pointed 
me to ANTLR tutorial by Scott Stanchfield 
(http://javadude.com/articles/antlrtut/)
where there is an example of 'C-style comment in ANTLR 2.0'
--------------------
// multiple-line comments
ML_COMMENT
  : "/*"
    ( { LA(2)!='/' }? '*'
    | ('\n'|"\r\n"|'\r') { newline(); }
    | ~('*'|'\n'|"\r\n"|'\r')
    )*
    "*/"
    { $setType(Token.SKIP); }
  ;   
---------------------

but I couldn't get this to work in ANTLR.
I'm getting this error when trying to generate lexer/parser 
'xxx.g:16:28: This subrule cannot be inverted.  Only subrules of the 
form:
    (T1|T2|T3...) or
    ('c1'|'c2'|'c3'...)
may be inverted (ranges are also allowed).
Exiting due to errors.'

Searching for this error in google pops out this page 
http://www.antlr.org/bug/21.html
which suggest that it was a 'Char set inversion bugs' in ANTLR 2.20b 
and was fixed in 2.4.0.

I'm using the latest ANTLR 2.7.2 release and after copy/paste the 
exact grammar rfc822addr.g from http://www.antlr.org/bug/21.html
I'm still getting the same error (like described in the bug) !!!

Anyone can give me a hint/help ?
Thanks in advance,



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mbraid at sqlworks.com  Mon Apr 14 15:07:39 2003
From: mbraid at sqlworks.com (martinkbraid)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Re: exception thrown in syntatic predicate can't be caught!
In-Reply-To: <170826586F3BD511910D0200C110AAA8054022C2@memail03.bco-home.com>
Message-ID: <b7fbfb+8sfm@eGroups.com>

The input to my lexer/parser is a series of statements delimited by 
semicolons. I was using the lexer exception to tell the parser to 
skip over the current statement and consumeUntil() the next semicolon 
(ie skip over the remainder of the stmt). Since I posted my message I 
made some progress by using the filter=rule option in the lexer and 
have that rule automatically throw a TokenStreamException which my 
parser captures. That works ... to a point. When the parser gets that 
exception it does a consumeUntil(SEMICOLON), but if there is a 2nd 
garabage character the lexer throws another exception and the whole 
thing becomes a mess.

Think I'll heed your advice and look at controlling the lexer more 
carefully.


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Syntactic predicates work by trying a piece of syntax and then 
checking if
> an exception was thrown.  When it finds a predicate that works it 
then calls
> the parser for real, with actions turned back on.  Syntactic 
predicates
> won't work if you can catch their exceptions.  Catch the exception 
after the
> predicate has decide where to go.
> 
> Or just catch and handle the exception in the lexer.  What exactly 
are you
> doing with the exceptions anyhow?
> 
> Monty
> 
> -----Original Message-----
> From: martinkbraid [mailto:mbraid@s...]
> Sent: Sunday, April 13, 2003 7:07 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] exception thrown in syntatic predicate 
can't
> be caught!
> 
> 
> Because I need to be able to handle garbage characters passed to my 
> parser/lexer, I'm doing my own error processing in a top level rule 
> by catching ANTLRExceptions. 
> 
> By chance, during syntactic predicate processing, the lexer 
> encounters a garbage character and throws a TokenStreamException. 
But 
> because inputState.guessing > 0 (because it was in a syntactic 
> predicate), my exception handler does NOT get control and the 
> exception passes out of the parser. What do I do? It would be 
> impossible to avoid syntatic predicates?
> 
> Thanks, Martin Braid
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Apr 14 15:15:09 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Re: exception thrown in syntatic predicate c
	an't be caught!
Message-ID: <170826586F3BD511910D0200C110AAA8054022CA@memail03.bco-home.com>

Why do you have garbage characters in statements?

You could handle this in your lexer too, by consuming characters until you
see a SEMICOLON, but you also have to handle comments and strings properly.
Then when you throw that exception, the next thing the parser sees should
always be a SEMICOLON.

Monty

-----Original Message-----
From: martinkbraid [mailto:mbraid@sqlworks.com]
Sent: Monday, April 14, 2003 3:08 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: exception thrown in syntatic predicate
can't be caught!


The input to my lexer/parser is a series of statements delimited by 
semicolons. I was using the lexer exception to tell the parser to 
skip over the current statement and consumeUntil() the next semicolon 
(ie skip over the remainder of the stmt). Since I posted my message I 
made some progress by using the filter=rule option in the lexer and 
have that rule automatically throw a TokenStreamException which my 
parser captures. That works ... to a point. When the parser gets that 
exception it does a consumeUntil(SEMICOLON), but if there is a 2nd 
garabage character the lexer throws another exception and the whole 
thing becomes a mess.

Think I'll heed your advice and look at controlling the lexer more 
carefully.


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Syntactic predicates work by trying a piece of syntax and then 
checking if
> an exception was thrown.  When it finds a predicate that works it 
then calls
> the parser for real, with actions turned back on.  Syntactic 
predicates
> won't work if you can catch their exceptions.  Catch the exception 
after the
> predicate has decide where to go.
> 
> Or just catch and handle the exception in the lexer.  What exactly 
are you
> doing with the exceptions anyhow?
> 
> Monty
> 
> -----Original Message-----
> From: martinkbraid [mailto:mbraid@s...]
> Sent: Sunday, April 13, 2003 7:07 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] exception thrown in syntatic predicate 
can't
> be caught!
> 
> 
> Because I need to be able to handle garbage characters passed to my 
> parser/lexer, I'm doing my own error processing in a top level rule 
> by catching ANTLRExceptions. 
> 
> By chance, during syntactic predicate processing, the lexer 
> encounters a garbage character and throws a TokenStreamException. 
But 
> because inputState.guessing > 0 (because it was in a syntactic 
> predicate), my exception handler does NOT get control and the 
> exception passes out of the parser. What do I do? It would be 
> impossible to avoid syntatic predicates?
> 
> Thanks, Martin Braid
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mbraid at sqlworks.com  Mon Apr 14 19:12:52 2003
From: mbraid at sqlworks.com (martinkbraid)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Re: exception thrown in syntatic predicate c an't be caught!
In-Reply-To: <170826586F3BD511910D0200C110AAA8054022CA@memail03.bco-home.com>
Message-ID: <b7fpr4+n0hj@eGroups.com>

It's tricky. A stmt could be invalid because there are (a) invalid 
characters; (b) it is syntactically invalid (eg wrong sequence of 
tokens), or (c) it is semantically invalid (eg things stmt refers to 
doesn't exist). If it's invalid for any reason I want to skip to the 
next stmt. Trouble is, if the lexer skips to the next stmt (ie 
semicolon), the parser won't see the trailing invalid tokens and 
there is a possibility the initial subset of valid tokens are 
syntactically and semantically valid (ie I will have silently 
truncated the stmt - not good).

The problem would be simplified if the filter=rule option didn't 
necessarily require the rule to be protected, that way I could always 
let the parser deal with invalid tokens. I'm basically coming round 
to the idea I need a lexer rule that captures everything that isn't 
lexacaly(?) valid (using the ~) and let the parser deal with these 
tokens which will not fit any rule and correctly signify a 
syntactcally invalid stmt.

Thanks for your help.
Martin

PS. I'm parsing user written stmts, so you never know what's coming 
down the pike.

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Why do you have garbage characters in statements?
> 
> You could handle this in your lexer too, by consuming characters 
until you
> see a SEMICOLON, but you also have to handle comments and strings 
properly.
> Then when you throw that exception, the next thing the parser sees 
should
> always be a SEMICOLON.
> 
> Monty
> 
> -----Original Message-----
> From: martinkbraid [mailto:mbraid@s...]
> Sent: Monday, April 14, 2003 3:08 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: exception thrown in syntatic predicate
> can't be caught!
> 
> 
> The input to my lexer/parser is a series of statements delimited by 
> semicolons. I was using the lexer exception to tell the parser to 
> skip over the current statement and consumeUntil() the next 
semicolon 
> (ie skip over the remainder of the stmt). Since I posted my message 
I 
> made some progress by using the filter=rule option in the lexer and 
> have that rule automatically throw a TokenStreamException which my 
> parser captures. That works ... to a point. When the parser gets 
that 
> exception it does a consumeUntil(SEMICOLON), but if there is a 2nd 
> garabage character the lexer throws another exception and the whole 
> thing becomes a mess.
> 
> Think I'll heed your advice and look at controlling the lexer more 
> carefully.
> 
> 
> --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> > Syntactic predicates work by trying a piece of syntax and then 
> checking if
> > an exception was thrown.  When it finds a predicate that works it 
> then calls
> > the parser for real, with actions turned back on.  Syntactic 
> predicates
> > won't work if you can catch their exceptions.  Catch the 
exception 
> after the
> > predicate has decide where to go.
> > 
> > Or just catch and handle the exception in the lexer.  What 
exactly 
> are you
> > doing with the exceptions anyhow?
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: martinkbraid [mailto:mbraid@s...]
> > Sent: Sunday, April 13, 2003 7:07 PM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] exception thrown in syntatic predicate 
> can't
> > be caught!
> > 
> > 
> > Because I need to be able to handle garbage characters passed to 
my 
> > parser/lexer, I'm doing my own error processing in a top level 
rule 
> > by catching ANTLRExceptions. 
> > 
> > By chance, during syntactic predicate processing, the lexer 
> > encounters a garbage character and throws a TokenStreamException. 
> But 
> > because inputState.guessing > 0 (because it was in a syntactic 
> > predicate), my exception handler does NOT get control and the 
> > exception passes out of the parser. What do I do? It would be 
> > impossible to avoid syntatic predicates?
> > 
> > Thanks, Martin Braid
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Mon Apr 14 19:31:52 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Re: exception thrown in syntatic predicate c an't be caught!
References: <b7fpr4+n0hj@eGroups.com>
Message-ID: <000601c302f7$2d12a480$0200a8c0@NOTEBOOK>

Hi I had exactly the same problem,
This is what I used. (I think I posted this before, perhaps I should
formalize it for the FAQ :-?)

(Sorry there is some other stuff in here you don't need)

In the Parser

header {

package beaconit.translator.server;

} // end of Antlr intro block

options {
 mangleLiteralPrefix = "TF_";
}

options {
 k = 1;                           // one token lookahead
 defaultErrorHandler = false;     // Don't generate parser error handlers
 buildAST = true;
  importVocab = TIMEFRAMECOMMONLEXER;
  exportVocab = TIMEFRAMESERVERPARSER;

}


 public void reportError(ANTLRException ex) {
    Debug.out("in reportError", MAJOR, 0);

   commandGenerator.translationError(TFlexer.getLineBuffer(),

0,0,null,null,TimeFrameException.makeTimeFrameException(MAJOR,TRANSLATION_ER
ROR,ex.getMessage()));
    Debug.out("******* end reportError *******", MAJOR, 0);
 }

 public void processError(ANTLRException ex) throws TokenStreamException,
    CharStreamException {
  // actually only throws TokenStreamIOException others caught here
  int tokenType=0;
  LexerSharedInputState inputState = TFlexer.getInputState();
  inputState.guessing = 0; // clear guessing mode
    Debug.out("in processError", MAJOR, 0);
    if (!errorFlag) { // first error
     reportError(ex);
     errorFlag=true;  //don't block new errors after syncing.
    }

  do {
   try {
    if (ex instanceof TokenStreamRecognitionException) {
     TokenStreamRecognitionException rex =
(TokenStreamRecognitionException)ex;
      // get underlying exception
     ex = null; // have handled this one now
     if ((rex.recog instanceof MismatchedCharException) ||
        (rex.recog instanceof NoViableAltForCharException)) {
      try {
          TFlexer.consume(); // remove current error char;
      } catch (CharStreamException cse) {
       if ( cse instanceof CharStreamIOException ) {
        throw new TokenStreamIOException(((CharStreamIOException)cse).io);
       } else {
        throw new TokenStreamIOException(new IOException(cse.getMessage()));
       }
      }
     }
      }

      tokenType = LA(1);
       if ((tokenType != EOF) && (tokenType != SEMI)) {
        consume(); // remove ;
          Debug.out("Input buffer:'"+TFlexer.getLineBuffer()+"'", MAJOR, 0);
       }

   } catch (TokenStreamRecognitionException ex1) {
     ex = ex1; // and loop
//      TFlexer.consume(); // remove current error char;
      Debug.out("** found :"+ ex1, MAJOR, 0);
   } catch (TokenStreamRetryException ex1) {
      Debug.out("** found :"+ ex1, MAJOR, 0);
     throw new TokenStreamIOException(new IOException(ex1.getMessage()));
   }
    } while ( tokenType != SEMI && tokenType != EOF && !isEOF());
    Debug.out("** end processError *******", MAJOR, 0);
    // if telnet print prompt again (How??)

 }

 private boolean errorFlag = false;

 private boolean eofFlag = false;

 public boolean isEOF() {
  return eofFlag;
  }

 private void clearErrorFlagAndScope() {
  scope=null; // clear scope aswell
  errorFlag = false;
 }


/* *****************
 public static void main(String[] args) {
  ITimeFrameBufferedReader sin;
  long sessionNo=0;
  TestIScope iScope=null;
  ConnectionData cd=null;
  SampleCommandGeneratorServer cG=null;
  TimeFrameCommonLexer lexer=null;
  IConnectionListener icl = new IConnectionListener() {
     public void cancelConnection() {System.exit(1);}
  };

  try {
    beaconit.commondata.GlobalData.data.load();
    Debug.out("GlobalData:"+beaconit.commondata.GlobalData.data.toString(),
MAJOR, 0);
    // add user and session no.
    cd = GlobalData.data.checkUser(
                new CommandLogin("dba","dba"), icl);
  } catch (Exception ex) {
      Debug.out(ex.toString(), MAJOR, 0);
      System.exit(1);
  }

Debug.out("sessionNo "+sessionNo, MAJOR, 0);
  sessionNo = cd.getSessionNo();
  iScope = new TestIScope(sessionNo);

  try {
//   ErrorLog.log.println("");
   Debug.out("Start parse1", MAJOR, 0);
    // open a simple stream to the input
   sin = (ITimeFrameBufferedReader)new InputStreamReader(System.in);
   lexer = new TimeFrameCommonLexer(sin);
   cG = new SampleCommandGeneratorServer();
   TimeFrameCommandsParser parser = new TimeFrameCommandsParser(lexer,cG,
       (IScope)iScope);
   do {
     try {
//Debug.out("call parser", MAJOR, 0);
     parser.program();
    } catch (RecognitionException ex) {
//Debug.out("commandBuffer:'"+lexer.getCommandBuffer()+"'", MAJOR, 0);
     parser.processError(ex);
    } catch (TokenStreamRecognitionException ex) {
//Debug.out("commandBuffer:'"+lexer.getCommandBuffer()+"'", MAJOR, 0);
     parser.processError(ex);
    } catch (TokenStreamRetryException ex) {
//Debug.out("commandBuffer:'"+lexer.getCommandBuffer()+"'", MAJOR, 0);
     parser.processError(ex);
    }
    if (parser.isEOF()){
//Debug.out("break on EOF", MAJOR, 0);
      break; // do notcall the program again
    }
   } while (true);

  } catch(Exception e) { //TokenStream IO exceptions or CharStreamExceptions
   // Close stream on IO errors
   if (cG!=null) {
     cG.translationError(lexer==null?null:lexer.getLineBuffer(),
      0, 0,null,null,e.getMessage());
   } else {
    // throw excepion
    throw new Error("Could not create SampleCommandGeneratorServer: "+e);
   }
  }
  System.exit(0);  // for parseview
 }
 ***********************************/
} // end of class Main


// here is the first part of the Parser

program
{ inputState.guessing = 0; // clear guessing mode
}
 :
 ( logout
 | cancel
 | login
 | getqueries
 | changepassword
 | getviewinfo
 | getfieldvalues
 | getdefinition
 | createquery
  | createdisplayjoin
  | modifyname
  | delete
  | executequery
  | sessionno
  | copy
  | rename
  | resetdisplay
  | makepublic
  | getattribute
  | setattribute
  | emptystatement
  | modifyDisplay
  | help
  | modifySearch

   )* EOF!  // perhaps none
   {// set EOF
    eofFlag = true; }
 ;

help!
: QUESTIONMARK // after ;
{ clearErrorFlagAndScope();
commandGenerator.helpCommand(TFlexer.getLineBuffer());
}
;

emptystatement!
: SEMI  // just skip
{ //clearErrorFlagAndScope();
  commandGenerator.emptyCommand(TFlexer.getLineBuffer());
}
;

// GetAttribute("attribute1");
// GetAttribute "attribute1" ;
getattribute!
: GETATTRIBUTE
 (LPAREN attr1:STRING_LITERAL RPAREN SEMI
  { clearErrorFlagAndScope();
commandGenerator.getAttribute(TFlexer.getLineBuffer(),attr1.getText());
  }
  | attr2:STRING_LITERAL SEMI
  { clearErrorFlagAndScope();
commandGenerator.getAttribute(TFlexer.getLineBuffer(),attr2.getText());
  }
)
;

----- Original Message -----
From: "martinkbraid" <mbraid@sqlworks.com>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, April 15, 2003 12:12 PM
Subject: [antlr-interest] Re: exception thrown in syntatic predicate c an't
be caught!


> It's tricky. A stmt could be invalid because there are (a) invalid
> characters; (b) it is syntactically invalid (eg wrong sequence of
> tokens), or (c) it is semantically invalid (eg things stmt refers to
> doesn't exist). If it's invalid for any reason I want to skip to the
> next stmt. Trouble is, if the lexer skips to the next stmt (ie
> semicolon), the parser won't see the trailing invalid tokens and
> there is a possibility the initial subset of valid tokens are
> syntactically and semantically valid (ie I will have silently
> truncated the stmt - not good).
>
> The problem would be simplified if the filter=rule option didn't
> necessarily require the rule to be protected, that way I could always
> let the parser deal with invalid tokens. I'm basically coming round
> to the idea I need a lexer rule that captures everything that isn't
> lexacaly(?) valid (using the ~) and let the parser deal with these
> tokens which will not fit any rule and correctly signify a
> syntactcally invalid stmt.
>
> Thanks for your help.
> Martin
>
> PS. I'm parsing user written stmts, so you never know what's coming
> down the pike.
>
> --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> > Why do you have garbage characters in statements?
> >
> > You could handle this in your lexer too, by consuming characters
> until you
> > see a SEMICOLON, but you also have to handle comments and strings
> properly.
> > Then when you throw that exception, the next thing the parser sees
> should
> > always be a SEMICOLON.
> >
> > Monty
> >
> > -----Original Message-----
> > From: martinkbraid [mailto:mbraid@s...]
> > Sent: Monday, April 14, 2003 3:08 PM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Re: exception thrown in syntatic predicate
> > can't be caught!
> >
> >
> > The input to my lexer/parser is a series of statements delimited by
> > semicolons. I was using the lexer exception to tell the parser to
> > skip over the current statement and consumeUntil() the next
> semicolon
> > (ie skip over the remainder of the stmt). Since I posted my message
> I
> > made some progress by using the filter=rule option in the lexer and
> > have that rule automatically throw a TokenStreamException which my
> > parser captures. That works ... to a point. When the parser gets
> that
> > exception it does a consumeUntil(SEMICOLON), but if there is a 2nd
> > garabage character the lexer throws another exception and the whole
> > thing becomes a mess.
> >
> > Think I'll heed your advice and look at controlling the lexer more
> > carefully.
> >
> >
> > --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> > > Syntactic predicates work by trying a piece of syntax and then
> > checking if
> > > an exception was thrown.  When it finds a predicate that works it
> > then calls
> > > the parser for real, with actions turned back on.  Syntactic
> > predicates
> > > won't work if you can catch their exceptions.  Catch the
> exception
> > after the
> > > predicate has decide where to go.
> > >
> > > Or just catch and handle the exception in the lexer.  What
> exactly
> > are you
> > > doing with the exceptions anyhow?
> > >
> > > Monty
> > >
> > > -----Original Message-----
> > > From: martinkbraid [mailto:mbraid@s...]
> > > Sent: Sunday, April 13, 2003 7:07 PM
> > > To: antlr-interest@yahoogroups.com
> > > Subject: [antlr-interest] exception thrown in syntatic predicate
> > can't
> > > be caught!
> > >
> > >
> > > Because I need to be able to handle garbage characters passed to
> my
> > > parser/lexer, I'm doing my own error processing in a top level
> rule
> > > by catching ANTLRExceptions.
> > >
> > > By chance, during syntactic predicate processing, the lexer
> > > encounters a garbage character and throws a TokenStreamException.
> > But
> > > because inputState.guessing > 0 (because it was in a syntactic
> > > predicate), my exception handler does NOT get control and the
> > > exception passes out of the parser. What do I do? It would be
> > > impossible to avoid syntatic predicates?
> > >
> > > Thanks, Martin Braid
> > >
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mbraid at sqlworks.com  Mon Apr 14 20:07:35 2003
From: mbraid at sqlworks.com (martinkbraid)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Lexer makes 2 valid tokens when there is only 1 invalid one
Message-ID: <b7ft1n+ob2d@eGroups.com>

I believe I have a reasonably standard lexer for the SQL language, a 
language in which all identifiers have to begin with an alpha. It 
therefore correctly identifies "W123" as an identifier, however, if I 
give it "123W" the lexer figures there are two tokens: "123" (a 
NUMBER) and "W" (an IDENTIFIER). This is wrong, it should reject this 
(and because by chance this can be valid at the syntactic level, the 
parser cannot do anything about it). So what am I doing wrong. A 
fragment of my lexer follows:

Many thanks
Martin Braid

protected
DIGIT    : ('0'..'9');

protected
LETTER   : ('a'..'z');

protected
SPECIAL  : "_" ;

protected
EXPONENT : "e" ( PLUS | MINUS )? (DIGIT)+ ;

protected
INTEGER : (DIGIT)+;

protected
FLOAT  : (INTEGER '.' INTEGER) => INTEGER '.' INTEGER EXPONENT)?
       | (INTEGER '.'        ) => INTEGER '.'         (EXPONENT)?
       | (        '.' INTEGER) =>         '.' INTEGER (EXPONENT)?
       ;

NUMBER :  (FLOAT) => FLOAT   {$setType(FLOAT);}
       |  INTEGER {$setType(INTEGER);}
       |  '.'     {$setType(DOT);}
       ;

IDENT   options {testLiterals = true;}
       : (LETTER) ( SPECIAL | LETTER | DIGIT )*;



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Mon Apr 14 21:27:42 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Re: Lexer makes 2 valid tokens when there is only 1 invalid one
In-Reply-To: <b7ft1n+ob2d@eGroups.com>
Message-ID: <b7g1nu+dmsf@eGroups.com>

> I believe I have a reasonably standard lexer for the SQL language, 
a 
> language in which all identifiers have to begin with an alpha. It 
> therefore correctly identifies "W123" as an identifier, however, if 
I 
> give it "123W" the lexer figures there are two tokens: "123" (a 
> NUMBER) and "W" (an IDENTIFIER). This is wrong, it should reject 
this 

The Lexer is working fine. It is tokenizing the stream of characters 
presented to it accurately. The parser grammar should be responsible 
for determining the validity of the tokens in whatever context they 
occur during parsing.

> (and because by chance this can be valid at the syntactic level, 
the 
> parser cannot do anything about it).

Could you explain this further please?. Why do you believe the parser 
can't do anything about it?. Perhaps examples of SQL text that 
illustrates the issue....

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Mon Apr 14 21:36:42 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Re: symbol table graphics converted to GIFs
In-Reply-To: <E477A435-6873-11D7-80D6-000393BB647E@jguru.com>
Message-ID: <b7g28q+q5e0@eGroups.com>

> Michael: converted to gifs and also uploading audio now.  Could 
take a 
> few hours at this rate ;)

;-)

Thanks.

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nitin_bitkmc at yahoo.com  Tue Apr 15 06:01:34 2003
From: nitin_bitkmc at yahoo.com (Nitin Gupta)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] text associated with production
Message-ID: <20030415130134.3819.qmail@web41208.mail.yahoo.com>

Hi alli want to get complete text associated with productions as we can do for tokens. lets say following is a production
forStatement: forKeyword LPAREN initial semiColon 

final semiColon step RPAREN StatementBlock ;

i want to get the complete text associated with forStatement as we can do for LPAREN and RPAREN.

Is there any such option in antlr.

Thanks and regards

Nitin Gupta

 



---------------------------------
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030415/dc586b12/attachment.html
From mbraid at sqlworks.com  Tue Apr 15 07:54:23 2003
From: mbraid at sqlworks.com (martinkbraid)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Re: Lexer makes 2 valid tokens when there is only 1 invalid one
In-Reply-To: <b7g1nu+dmsf@eGroups.com>
Message-ID: <b7h6ev+l4p4@eGroups.com>

Here is a valid SQL stmt: select 123 w from table;

Here is an invalid SQL stmt: select 123w from table;

In the first stmt, the "w" is a column alias for the constant "123"; 
in the 2nd stmt, "123w" is an invalid column name. My problem is that 
I need to weed out bad stmts, like the 2nd one, but I cannot do that 
if my lexer converts it to a valid stmt, like the first one. That's 
why the parser cannot capture this problem - it doesn't think there 
is one.

Thanks,
Martin


--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...> 
wrote:
> > I believe I have a reasonably standard lexer for the SQL 
language, 
> a 
> > language in which all identifiers have to begin with an alpha. It 
> > therefore correctly identifies "W123" as an identifier, however, 
if 
> I 
> > give it "123W" the lexer figures there are two tokens: "123" (a 
> > NUMBER) and "W" (an IDENTIFIER). This is wrong, it should reject 
> this 
> 
> The Lexer is working fine. It is tokenizing the stream of 
characters 
> presented to it accurately. The parser grammar should be 
responsible 
> for determining the validity of the tokens in whatever context they 
> occur during parsing.
> 
> > (and because by chance this can be valid at the syntactic level, 
> the 
> > parser cannot do anything about it).
> 
> Could you explain this further please?. Why do you believe the 
parser 
> can't do anything about it?. Perhaps examples of SQL text that 
> illustrates the issue....
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Apr 15 08:08:18 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Re: exception thrown in syntatic predicate c
	 an't be caught!
Message-ID: <170826586F3BD511910D0200C110AAA8054022CC@memail03.bco-home.com>

I guess I wasn't clear.  The lexer would both skip to the next statement and
throw an exception.  Then the parser would always be able to sync to the
SEMI.  The other errors have to be handled in the parser, but your first
post was (I think) about the lexer throwing two exceptions and you not able
to handle that. 

The filter rule is supposed to handle everything that the non-protected
rules don't.  I don't understand why you would want it non-protected.  Have
you read the antlr.org article about "antlr meets SED?".  That covers the
rationale behind filter rules pretty well.
http://www.antlr.org/fieldguide/sed/index.html

Note that you probably also want to specify the character set that you
expect to handle.  Otherwise antlr only uses characters you reference.  See
http://www.antlr.org/doc/options.html#charVocabulary

Come back with more questions.

Monty

-----Original Message-----
From: martinkbraid [mailto:mbraid@sqlworks.com]
Sent: Monday, April 14, 2003 7:13 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: exception thrown in syntatic predicate c
an't be caught!


It's tricky. A stmt could be invalid because there are (a) invalid 
characters; (b) it is syntactically invalid (eg wrong sequence of 
tokens), or (c) it is semantically invalid (eg things stmt refers to 
doesn't exist). If it's invalid for any reason I want to skip to the 
next stmt. Trouble is, if the lexer skips to the next stmt (ie 
semicolon), the parser won't see the trailing invalid tokens and 
there is a possibility the initial subset of valid tokens are 
syntactically and semantically valid (ie I will have silently 
truncated the stmt - not good).

The problem would be simplified if the filter=rule option didn't 
necessarily require the rule to be protected, that way I could always 
let the parser deal with invalid tokens. I'm basically coming round 
to the idea I need a lexer rule that captures everything that isn't 
lexacaly(?) valid (using the ~) and let the parser deal with these 
tokens which will not fit any rule and correctly signify a 
syntactcally invalid stmt.

Thanks for your help.
Martin

PS. I'm parsing user written stmts, so you never know what's coming 
down the pike.

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> Why do you have garbage characters in statements?
> 
> You could handle this in your lexer too, by consuming characters 
until you
> see a SEMICOLON, but you also have to handle comments and strings 
properly.
> Then when you throw that exception, the next thing the parser sees 
should
> always be a SEMICOLON.
> 
> Monty
> 
> -----Original Message-----
> From: martinkbraid [mailto:mbraid@s...]
> Sent: Monday, April 14, 2003 3:08 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: exception thrown in syntatic predicate
> can't be caught!
> 
> 
> The input to my lexer/parser is a series of statements delimited by 
> semicolons. I was using the lexer exception to tell the parser to 
> skip over the current statement and consumeUntil() the next 
semicolon 
> (ie skip over the remainder of the stmt). Since I posted my message 
I 
> made some progress by using the filter=rule option in the lexer and 
> have that rule automatically throw a TokenStreamException which my 
> parser captures. That works ... to a point. When the parser gets 
that 
> exception it does a consumeUntil(SEMICOLON), but if there is a 2nd 
> garabage character the lexer throws another exception and the whole 
> thing becomes a mess.
> 
> Think I'll heed your advice and look at controlling the lexer more 
> carefully.
> 
> 
> --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> > Syntactic predicates work by trying a piece of syntax and then 
> checking if
> > an exception was thrown.  When it finds a predicate that works it 
> then calls
> > the parser for real, with actions turned back on.  Syntactic 
> predicates
> > won't work if you can catch their exceptions.  Catch the 
exception 
> after the
> > predicate has decide where to go.
> > 
> > Or just catch and handle the exception in the lexer.  What 
exactly 
> are you
> > doing with the exceptions anyhow?
> > 
> > Monty
> > 
> > -----Original Message-----
> > From: martinkbraid [mailto:mbraid@s...]
> > Sent: Sunday, April 13, 2003 7:07 PM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] exception thrown in syntatic predicate 
> can't
> > be caught!
> > 
> > 
> > Because I need to be able to handle garbage characters passed to 
my 
> > parser/lexer, I'm doing my own error processing in a top level 
rule 
> > by catching ANTLRExceptions. 
> > 
> > By chance, during syntactic predicate processing, the lexer 
> > encounters a garbage character and throws a TokenStreamException. 
> But 
> > because inputState.guessing > 0 (because it was in a syntactic 
> > predicate), my exception handler does NOT get control and the 
> > exception passes out of the parser. What do I do? It would be 
> > impossible to avoid syntatic predicates?
> > 
> > Thanks, Martin Braid
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Apr 15 08:12:57 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] text associated with production
Message-ID: <170826586F3BD511910D0200C110AAA8054022CD@memail03.bco-home.com>

Antlr doesn't do this for you.  You need to collect the tokens and get the
text out of them yourself.  Or build a tree in that rule and get the text
from the nodes in the tree.

Monty

-----Original Message-----
From: Nitin Gupta [mailto:nitin_bitkmc@yahoo.com]
Sent: Tuesday, April 15, 2003 6:02 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] text associated with production


Hi all
i want to get complete text associated with productions as we can do for
tokens. lets say following is a production
forStatement: forKeyword LPAREN initial semiColon 
final semiColon step RPAREN StatementBlock ;
i want to get the complete text associated with forStatement as we can do
for LPAREN and RPAREN.
Is there any such option in antlr.
Thanks and regards
Nitin Gupta





Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo. 
Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Apr 15 08:21:35 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] Re: Lexer makes 2 valid tokens when there is
	 only 1 invalid one
Message-ID: <170826586F3BD511910D0200C110AAA8054022CE@memail03.bco-home.com>

You can do something like this:

NUMBER: ('0'..'9')+ {isWhitespace(LA(1)}? ;

The idea is to use a validating predicate to throw an exception when you
don't see whitespace following a number.  Antlr sometimes doesn't like it
when you don't recognize things however, so you may need to recognize the
inversion of whitespace and then throw an exception.

Give it a try.  If you get stuck send another message, I might find some
time today to play with it.  

Monty

-----Original Message-----
From: martinkbraid [mailto:mbraid@sqlworks.com]
Sent: Tuesday, April 15, 2003 7:54 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Lexer makes 2 valid tokens when there is
only 1 invalid one


Here is a valid SQL stmt: select 123 w from table;

Here is an invalid SQL stmt: select 123w from table;

In the first stmt, the "w" is a column alias for the constant "123"; 
in the 2nd stmt, "123w" is an invalid column name. My problem is that 
I need to weed out bad stmts, like the 2nd one, but I cannot do that 
if my lexer converts it to a valid stmt, like the first one. That's 
why the parser cannot capture this problem - it doesn't think there 
is one.

Thanks,
Martin


--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...> 
wrote:
> > I believe I have a reasonably standard lexer for the SQL 
language, 
> a 
> > language in which all identifiers have to begin with an alpha. It 
> > therefore correctly identifies "W123" as an identifier, however, 
if 
> I 
> > give it "123W" the lexer figures there are two tokens: "123" (a 
> > NUMBER) and "W" (an IDENTIFIER). This is wrong, it should reject 
> this 
> 
> The Lexer is working fine. It is tokenizing the stream of 
characters 
> presented to it accurately. The parser grammar should be 
responsible 
> for determining the validity of the tokens in whatever context they 
> occur during parsing.
> 
> > (and because by chance this can be valid at the syntactic level, 
> the 
> > parser cannot do anything about it).
> 
> Could you explain this further please?. Why do you believe the 
parser 
> can't do anything about it?. Perhaps examples of SQL text that 
> illustrates the issue....
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrew at adersoftware.com  Tue Apr 15 09:01:42 2003
From: andrew at adersoftware.com (Andrew Deren)
Date: Mon Dec 20 16:15:32 2004
Subject: [antlr-interest] text associated with production
In-Reply-To: <170826586F3BD511910D0200C110AAA8054022CD@memail03.bco-home.com>
Message-ID: <200304151119943.SM01096@CS>

But I think the problem with that approach would be that you will have some
things stripped out (like white space if you have that skipped)

One possible solution I think would be to get position of the first token
and position and length of the last token in a group, and then using that
information get the text data from the input.

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Tuesday, April 15, 2003 9:13 AM
To: antlr-interest@yahoogroups.com

Antlr doesn't do this for you.  You need to collect the tokens and get the
text out of them yourself.  Or build a tree in that rule and get the text
from the nodes in the tree.

Monty

-----Original Message-----
From: Nitin Gupta [mailto:nitin_bitkmc@yahoo.com]
Sent: Tuesday, April 15, 2003 6:02 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] text associated with production


Hi all
i want to get complete text associated with productions as we can do for
tokens. lets say following is a production
forStatement: forKeyword LPAREN initial semiColon 
final semiColon step RPAREN StatementBlock ;
i want to get the complete text associated with forStatement as we can do
for LPAREN and RPAREN.
Is there any such option in antlr.
Thanks and regards
Nitin Gupta





Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo. 
Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From albert.huh at embarcadero-ca.com  Tue Apr 15 09:31:59 2003
From: albert.huh at embarcadero-ca.com (Albert Huh)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] text associated with production
Message-ID: <0881AC7F2F339C40BC6F7983D1E0BEC97683D1@mail2k.embarcadero-ca.com>

Stripped tokens shouldn't really be a problem.  The original problem was to get the text of the production, not the original stream.  We ONLY want the text of the matched tokens (or terminal nodes) for a rule.

Tokens that are skipped in the lexer will never be matched in the parser.  What does it matter if they are skipped?



-----Original Message-----
From: Andrew Deren [mailto:andrew@adersoftware.com]
Sent: Tuesday, April 15, 2003 12:02 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] text associated with production


But I think the problem with that approach would be that you will have some
things stripped out (like white space if you have that skipped)

One possible solution I think would be to get position of the first token
and position and length of the last token in a group, and then using that
information get the text data from the input.

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Tuesday, April 15, 2003 9:13 AM
To: antlr-interest@yahoogroups.com

Antlr doesn't do this for you.  You need to collect the tokens and get the
text out of them yourself.  Or build a tree in that rule and get the text
from the nodes in the tree.

Monty

-----Original Message-----
From: Nitin Gupta [mailto:nitin_bitkmc@yahoo.com]
Sent: Tuesday, April 15, 2003 6:02 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] text associated with production


Hi all
i want to get complete text associated with productions as we can do for
tokens. lets say following is a production
forStatement: forKeyword LPAREN initial semiColon 
final semiColon step RPAREN StatementBlock ;
i want to get the complete text associated with forStatement as we can do
for LPAREN and RPAREN.
Is there any such option in antlr.
Thanks and regards
Nitin Gupta





Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo. 
Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Apr 15 09:39:09 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] text associated with production
Message-ID: <170826586F3BD511910D0200C110AAA8054022D3@memail03.bco-home.com>

Either way will work with different results.  It's not clear whether the
original poster really wanted to preserve whitespace or not.

Monty

-----Original Message-----
From: Albert Huh [mailto:albert.huh@embarcadero-ca.com]
Sent: Tuesday, April 15, 2003 9:32 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] text associated with production


Stripped tokens shouldn't really be a problem.  The original problem was to
get the text of the production, not the original stream.  We ONLY want the
text of the matched tokens (or terminal nodes) for a rule.

Tokens that are skipped in the lexer will never be matched in the parser.
What does it matter if they are skipped?



-----Original Message-----
From: Andrew Deren [mailto:andrew@adersoftware.com]
Sent: Tuesday, April 15, 2003 12:02 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] text associated with production


But I think the problem with that approach would be that you will have some
things stripped out (like white space if you have that skipped)

One possible solution I think would be to get position of the first token
and position and length of the last token in a group, and then using that
information get the text data from the input.

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Tuesday, April 15, 2003 9:13 AM
To: antlr-interest@yahoogroups.com

Antlr doesn't do this for you.  You need to collect the tokens and get the
text out of them yourself.  Or build a tree in that rule and get the text
from the nodes in the tree.

Monty

-----Original Message-----
From: Nitin Gupta [mailto:nitin_bitkmc@yahoo.com]
Sent: Tuesday, April 15, 2003 6:02 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] text associated with production


Hi all
i want to get complete text associated with productions as we can do for
tokens. lets say following is a production
forStatement: forKeyword LPAREN initial semiColon 
final semiColon step RPAREN StatementBlock ;
i want to get the complete text associated with forStatement as we can do
for LPAREN and RPAREN.
Is there any such option in antlr.
Thanks and regards
Nitin Gupta





Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo. 
Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mbraid at sqlworks.com  Tue Apr 15 16:41:56 2003
From: mbraid at sqlworks.com (martinkbraid)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Small bug in antlr code concerning generateAmbigWarnings
Message-ID: <b7i5c4+unqf@eGroups.com>

Here is a fragment of code from antlr.RuleBlock.setOptions()

            }
        }
        else if (key.equals("generateAmbigWarnings")) {
            if (value.getText().equals("true")) {
                generateAmbigWarnings = true;

I believe it should be key.getText().equals(" .... Without getText(), 
this is always false.

This probably explain why I cannot set generateAmbigWarnings=false;

Martin Braid


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oneway_111 at yahoo.com  Tue Apr 15 17:33:30 2003
From: oneway_111 at yahoo.com (oneway_111)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Resolving ambiguity with dates and division operations
Message-ID: <b7i8cq+n4se@eGroups.com>

The problem is that the parser needs to be able parse formulas that
could contain math operations and/or operations with dates. The dates
are specified in the format "mm/dd/yyyy" or "mm/dd/yy", e.g.
"04/15/2003".

How would one go about writing rules to be able to distinguish dates
from math expressions containing several division operations, i.e.
04/15/2003 should be April 15, 2003 and not 4 divided by 15 divided by
2003?

Thanks


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Tue Apr 15 17:46:12 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Resolving ambiguity with dates and division operations
References: <b7i8cq+n4se@eGroups.com>
Message-ID: <004d01c303b1$95017020$0200a8c0@NOTEBOOK>

I did this in the Lexer

options {
 charVocabulary = '\u0000'..'\u00FE';  // allow all possiable unicodes
except -1 == EOF
 testLiterals=false;    // don't automatically test for literals
 k=3;                   // four characters of lookahead
 caseSensitiveLiterals=false;
 caseSensitive=false;
 defaultErrorHandler = false;   // pass error back to parser
}

// OPERATORS
LPAREN    options { paraphrase = "(";}
   : '('  ;
RPAREN    options { paraphrase = ")";}
   : ')'  ;
LBRACK    options { paraphrase = "[";}
   : '['  ;
RBRACK    options { paraphrase = "]";}
   : ']'  ;
LCURLY    options { paraphrase = "{";}
   : '{'  ;
RCURLY    options { paraphrase = "}";}
   : '}'  ;
COLON     options { paraphrase = ":";}
   : ':'  ;
COMMA     options { paraphrase = ",";}
   : ','  ;
DOT     options { paraphrase = ".";}
   : '.'  ;

ASSIGN
 options { paraphrase = "=";}
   : '='  ;

EQUAL    options { paraphrase = "==";}
   : "==" ;
NOT_EQUAL1   options { paraphrase = "/=";}
   : "/=";
NOT_EQUAL2   options { paraphrase = "!=";}
   : "!=";
NOT_EQUAL3   options { paraphrase = "<>";}
   : "<>";
STR_EQUAL    options { paraphrase = "$==";}
   : "$==" ;
STR_NOT_EQUAL1   options { paraphrase = "$/=";}
   : "$/=" ;
STR_NOT_EQUAL2   options { paraphrase = "$!=";}
   : "$!=" ;
STR_NOT_EQUAL3   options { paraphrase = "$<>";}
   : "$<>";

PLUS    options { paraphrase = "+";}
   : '+'  ;
MINUS    options { paraphrase = "-";}
   : '-'  ;
STR_GE     options { paraphrase = "$>=";}
   : "$>=" ;
STR_GT     options { paraphrase = "$>";}
   : "$>"  ;
STR_LE     options { paraphrase = "$<=";}
   : "$<=" ;
STR_LT     options { paraphrase = "$<";}
   : "$<"  ;

GE     options { paraphrase = ">=";}
   : ">=" ;
GT     options { paraphrase = ">";}
   : '>'  ;
LE     options { paraphrase = "<=";}
   : "<=" ;
LT     options { paraphrase = "<";}
   : '<'  ;
DIV_LEFT  options { paraphrase = "/";}
   : '/'  ;
DIV_RIGHT   options { paraphrase = "\\";}
   : '\\'  ;
SEMI    options { paraphrase = ";";}
   : ';'  ;
QUESTIONMARK options { paraphrase = "?";}
   : '?'  ;


// Whitespace -- ignored
TAB_FORMFEED
  : ( '\t'
  | '\f'
  )
  {  _ttype = Token.SKIP; }
 ;

// Whitespace -- ignored
SPACE
  : ' '
  {  _ttype = Token.SKIP; }
 ;


NEWLINE
  : ( /* '\r' '\n' can be matched in one alternative or by matching
    '\r' in one iteration and '\n' in another.  I am trying to
    handle any flavor of newline that comes in, but the language
    that allows both "\r\n" and "\r" and "\n" to all be valid
    newline is ambiguous.  Consequently, the resulting grammar
    must be ambiguous.  I'm shutting this warning off.
    */
    options {
    generateAmbigWarnings=false;
   }
   : '\r' '\n'   // DOS
   | '\r'  // Macintosh
   | '\n' // Unix
   )  {newline();}
  { if (skipNL) {   // skip NL is skipNEWLINE() called
    _ttype = Token.SKIP;
   }
  }
;

// white space is skipped by the parser
protected
WS_SET : ( ' '
  | '\t' | '\f'
  | NEWLINE
  | ML_COMMENT
  | SL_COMMENT
  )+
  {$setType(Token.SKIP);}  // way to set token type
 ;

// Single-line comments
SL_COMMENT
 : "//"
  (~('\n'|'\r'))* NEWLINE
  {$setType(Token.SKIP);}
 ;

// multiple-line comments these are also skipped
ML_COMMENT
 : "/*"
  ( // suppress warnings about * /
   options {
    greedy = true;
   }
  : { LA(2)!='/' }? '*'
  | ~('*'|'\n'|'\r')
  | NEWLINE
  )*
  "*/"
  {$setType(Token.SKIP);}
 ;


// character literals SINGLE QUOTES around string
//CHAR_LITERAL
// : '\''! (ESC|~('\''|'\\'))* '\''!
// ;

// note must have WS between strings because "" is used for " inside string
STRING_LITERAL
  : SL_STRING_LITERAL //(WS_SET! SL_STRING_LITERAL)*
      // string concat does not work because it tries to concat anything
after
      // a string + WS_SET.
  ;

 // string literals DOUBLE QUOTES around string
 // "" => " inside double quotes.
 // can also use \"
protected
SL_STRING_LITERAL
{int i = 0;}
 : '"'! (ESC|~('"'|'\\'|'\n'))* ('"''"'! ((ESC|~('"'|'\\'|'\n')))*)*
  ('"'!
  |'\n'
   {
     if (i==0) {
      throw new TokenStreamRecognitionException(
     new RecognitionException("found newline inside string:'"+$getText+"'",
getFilename(), getLine()));
    }
   }
  )
 ;

// escape sequence -- note that this is protected; it can only be called
//   from another lexer rule -- it will not ever directly return a token to
//   the parser
// There are various ambiguities hushed in this rule.  The optional
// '0'...'9' digit matches should be matched here rather than letting
// them go back to STRING_LITERAL to be matched.  ANTLR does the
// right thing by matching immediately; hence, it's ok to shut off
// the FOLLOW ambig warnings.
protected
ESC
 : '\\'
  ( 'n' { $setText("\n");}
  | 'r' { $setText("\r");}
  | 't' { $setText("\t");}
  | 'b' { $setText("\b");}
  | 'f' { $setText("\f");}
  | '"' { $setText("\"");}
  | '\'' { $setText("\'");}
  | '\\' { $setText("\\");}
  | ('u')+ HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
  | ('0'..'3')
   (
    options {
     warnWhenFollowAmbig = false;
    }
   : ('0'..'9')
    (
     options {
      warnWhenFollowAmbig = false;
     }
    : '0'..'9'
    )?
   )?
  | ('4'..'7')
   (
    options {
     warnWhenFollowAmbig = false;
    }
   : ('0'..'9')
   )?
  )
 ;



// hexadecimal digit (again, note it's protected!)
protected
HEX
 : '0' 'x' (HEX_DIGIT)+
 ;

protected
HEX_DIGIT
 : ('0'..'9'|'a'..'f')
 ;


// an identifier.  Note that testLiterals is set to true for this rule!
This means
// that after we match the rule, we look in the literals table to see
// if it's a literal or really an identifer
IDENT
 options {testLiterals=true;
     paraphrase = "an identifier";}
// : ('a'..'z'|'_'|'$'|'\u0080'..'\uFFFE')
('a'..'z'|'_'|'0'..'9'|'$'|'\u0080'..'\uFFFE')*
 : ('a'..'z'|'_'|'$') ('a'..'z'|'_'|'0'..'9'|'$')*
 ;
// do not support summariZe
// {if ($getText().equalsIgnoreCase("summarize")) { _ttype =
SUMMARISE_STATEMENT;}}

protected
DIGIT
 : ('0'..'9')
 ;


// a numeric literal
protected
INT
 : (DIGIT)+
 ;

// signed int
//protected
//SIGNED_INT
// : ('+'|'-')?INT
// ;

// a numeric literal date, time, int, float, hex or oct
DATE_TIME_INT_FLOAT
 : (DIGIT DIGIT DIGIT DIGIT '/') => DATE {_ttype = DATE;}
 | (DIGIT (DIGIT)? ':') => TIME {_ttype = TIME;}
 | (INT '.') => FLOAT {_ttype = FLOAT;}
 | INT {_ttype = INT;}
 | ('0' 'x')=> HEX {_ttype = HEX;}
 ;

protected
FLOAT
 : INT '.' INT (EXPONENT)?
 ;

// signed float
//protected
//SIGNED_FLOAT
// : SIGNED_INT '.' INT (EXPONENT)?
// ;


protected
DATE
 : DIGIT DIGIT DIGIT DIGIT '/'
   DIGIT (DIGIT)? '/' DIGIT (DIGIT)?
 ;

protected
TIME
 : DIGIT (DIGIT)? ':'
   DIGIT (DIGIT)? ':'
   DIGIT (DIGIT)? ('.' INT)?
 ;

// need to add floating point
// a couple protected methods to assist in matching floating point numbers
protected
EXPONENT
 : ('e') ('+'|'-')? ('0'..'9')+
 ;


// should be in parser also duration
----- Original Message -----
From: "oneway_111" <oneway_111@yahoo.com>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, April 16, 2003 10:33 AM
Subject: [antlr-interest] Resolving ambiguity with dates and division
operations


> The problem is that the parser needs to be able parse formulas that
> could contain math operations and/or operations with dates. The dates
> are specified in the format "mm/dd/yyyy" or "mm/dd/yy", e.g.
> "04/15/2003".
>
> How would one go about writing rules to be able to distinguish dates
> from math expressions containing several division operations, i.e.
> 04/15/2003 should be April 15, 2003 and not 4 divided by 15 divided by
> 2003?
>
> Thanks
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nitin_bitkmc at yahoo.com  Tue Apr 15 22:55:32 2003
From: nitin_bitkmc at yahoo.com (Nitin Gupta)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] text associated with production
In-Reply-To: <170826586F3BD511910D0200C110AAA8054022D3@memail03.bco-home.com>
Message-ID: <20030416055532.28656.qmail@web41203.mail.yahoo.com>

Yes, i want white spaces also, because i want the entire text of the production. But i cud not understand the approach which wud give me the text without white spaces. Please give some more information on that.

mzukowski@yci.com wrote:Either way will work with different results. It's not clear whether the
original poster really wanted to preserve whitespace or not.

Monty

-----Original Message-----
From: Albert Huh [mailto:albert.huh@embarcadero-ca.com]
Sent: Tuesday, April 15, 2003 9:32 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] text associated with production


Stripped tokens shouldn't really be a problem. The original problem was to
get the text of the production, not the original stream. We ONLY want the
text of the matched tokens (or terminal nodes) for a rule.

Tokens that are skipped in the lexer will never be matched in the parser.
What does it matter if they are skipped?



-----Original Message-----
From: Andrew Deren [mailto:andrew@adersoftware.com]
Sent: Tuesday, April 15, 2003 12:02 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] text associated with production


But I think the problem with that approach would be that you will have some
things stripped out (like white space if you have that skipped)

One possible solution I think would be to get position of the first token
and position and length of the last token in a group, and then using that
information get the text data from the input.

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Tuesday, April 15, 2003 9:13 AM
To: antlr-interest@yahoogroups.com

Antlr doesn't do this for you. You need to collect the tokens and get the
text out of them yourself. Or build a tree in that rule and get the text
from the nodes in the tree.

Monty

-----Original Message-----
From: Nitin Gupta [mailto:nitin_bitkmc@yahoo.com]
Sent: Tuesday, April 15, 2003 6:02 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] text associated with production


Hi all
i want to get complete text associated with productions as we can do for
tokens. lets say following is a production
forStatement: forKeyword LPAREN initial semiColon 
final semiColon step RPAREN StatementBlock ;
i want to get the complete text associated with forStatement as we can do
for LPAREN and RPAREN.
Is there any such option in antlr.
Thanks and regards
Nitin Gupta





Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo. 
Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 



Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 






Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 





Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




Your use of Yahoo! Groups is subject to htt


---------------------------------
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20030415/82579d17/attachment.html
From oneway_111 at yahoo.com  Wed Apr 16 04:05:18 2003
From: oneway_111 at yahoo.com (oneway_111)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Re: Resolving ambiguity with dates and division operations
In-Reply-To: <004d01c303b1$95017020$0200a8c0@NOTEBOOK>
Message-ID: <b7jdde+n1p2@eGroups.com>

--- In antlr-interest@yahoogroups.com, "Matthew Ford" > 
...
> // a numeric literal date, time, int, float, hex or oct
> DATE_TIME_INT_FLOAT
>  : (DIGIT DIGIT DIGIT DIGIT '/') => DATE {_ttype = DATE;}
>  | (DIGIT (DIGIT)? ':') => TIME {_ttype = TIME;}
>  | (INT '.') => FLOAT {_ttype = FLOAT;}
>  | INT {_ttype = INT;}
>  | ('0' 'x')=> HEX {_ttype = HEX;}
>  ;
...

Thanks, that was helpful.

I'm concerned though that
(DIGIT DIGIT DIGIT DIGIT '/') => DATE {_ttype = DATE;}
will not work when, say, you want 2002 divided by 4 (2002/4), will it?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Wed Apr 16 05:49:03 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Re: Resolving ambiguity with dates and division
 operations
References: <b7jdde+n1p2@eGroups.com>
Message-ID: <000401c30416$8f3b36c0$0200a8c0@NOTEBOOK>

Yes you are correct,
I remember now I did not have to handle  division.
So you are back to doing real work in the parser
just return the digits  (2002) and '/'  etc
and in the parser you will have to put them together when the parser gets to
the point where it is looking for a date.

date
 : i1:INT '/' i2:INT '/' i3:INT
{ // process i1, i2, i3 here to form a date in internal form
  // eg  String dataString = i1.getText()+"/"+i2.getText()+"/"+i3.getText();
}
 ;

You still have to decide when you expect a date and when you expect  number
/ number
Basically a date is a special form of constant, like an integer.
Constants can occure (in general) at the inner most level of expressions.

divExpression:unaryIntExpression
 ( (DIV^ | DOT_DIV^ | DOT_STAR_DOT^ | DOT_STAR^ | STAR_TILDA^ | STAR^ )
   unaryIntExpression  )*;

protected
unaryIntExpression
 : (PLUS^ | MINUS^)* primaryIntExpression
 ;

// the basic element of an expression
primaryExpression
 :   constant
 | LPAREN! expression RPAREN!
 ;



The question is how do you decide between a constant and a division
expression.
You use Syntactic Predicates

protected
divExpression_or_Date
 : (date_time) => date
 | (division) => div_expression


Note that the predicate rules (in this case, date_time or division) do not
have to be real rules the parse will finally use.
They only have to express the required sequence of tokes to decide between
dates and divisions.
The exact form depends on your language syntax.
Basically write down by hand how you yourself would decide between the two
case and then form the Syntactic Predicates
from that.

I know this is not a complete solution but I hope this helps.
matthew
----- Original Message -----
From: "oneway_111" <oneway_111@yahoo.com>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, April 16, 2003 9:05 PM
Subject: [antlr-interest] Re: Resolving ambiguity with dates and division
operations


> --- In antlr-interest@yahoogroups.com, "Matthew Ford" >
> ...
> > // a numeric literal date, time, int, float, hex or oct
> > DATE_TIME_INT_FLOAT
> >  : (DIGIT DIGIT DIGIT DIGIT '/') => DATE {_ttype = DATE;}
> >  | (DIGIT (DIGIT)? ':') => TIME {_ttype = TIME;}
> >  | (INT '.') => FLOAT {_ttype = FLOAT;}
> >  | INT {_ttype = INT;}
> >  | ('0' 'x')=> HEX {_ttype = HEX;}
> >  ;
> ...
>
> Thanks, that was helpful.
>
> I'm concerned though that
> (DIGIT DIGIT DIGIT DIGIT '/') => DATE {_ttype = DATE;}
> will not work when, say, you want 2002 divided by 4 (2002/4), will it?
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Apr 16 08:02:56 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] text associated with production
Message-ID: <170826586F3BD511910D0200C110AAA8054022D5@memail03.bco-home.com>

Tokens by default store the line and column of the start of the token.  So
keep your original file around and then when you have the first and last
tokens of the section you want to reproduce, simply use the line and column
to index into your file to get that region.

Monty


-----Original Message-----
From: Nitin Gupta [mailto:nitin_bitkmc@yahoo.com]
Sent: Tuesday, April 15, 2003 10:56 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] text associated with production


Yes, i want white spaces also, because i want the entire text of the
production. But i cud not understand the approach which wud give me the text
without white spaces. Please give some more information on that.

mzukowski@yci.com wrote: 
Either way will work with different results. It's not clear whether the
original poster really wanted to preserve whitespace or not.

Monty

-----Original Message-----
From: Albert Huh [mailto:albert.huh@embarcadero-ca.com]
Sent: Tuesday, April 15, 2003 9:32 AM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] text associated with production


Stripped tokens shouldn't really be a problem. The original problem was to
get the text of the production, not the original stream. We ONLY want the
text of the matched tokens (or terminal nodes) for a rule.

Tokens that are skipped in the lexer will never be matched in the parser.
What does it matter if they are skipped?



-----Original Message-----
From: Andrew Deren [mailto:andrew@adersoftware.com]
Sent: Tuesday, April 15, 2003 12:02 PM
To: antlr-interest@yahoogroups.com
Subject: RE: [antlr-interest] text associated with production


But I think the problem with that approach would be that you will have some
things stripped out (like white space if you have that skipped)

One possible solution I think would be to get position of the first token
and position and length of the last token in a group, and then using that
information get the text data from the input.

-----Original Message-----
From: mzukowski@yci.com [mailto:mzukowski@yci.com] 
Sent: Tuesday, April 15, 2003 9:13 AM
To: antlr-interest@yahoogroups.com

Antlr doesn't do this for you. You need to collect the tokens and get the
text out of them yourself. Or build a tree in that rule and get the text
from the nodes in the tree.

Monty

-----Original Message-----
From: Nitin Gupta [mailto:nitin_bitkmc@yahoo.com]
Sent: Tuesday, April 15, 2003 6:02 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] text associated with production


Hi all
i want to get complete text associated with productions as we can do for
tokens. lets say following is a production
forStatement: forKeyword LPAREN initial semiColon 
final semiColon step RPAREN StatementBlock ;
i want to get the complete text associated with forStatement as we can do
for LPAREN and RPAREN.
Is there any such option in antlr.
Thanks and regards
Nitin Gupta





Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo. 
Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 



Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 






Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 





Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




Your use of Yahoo! Groups is subject to htt




Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo. 
Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service. 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oneway_111 at yahoo.com  Wed Apr 16 09:40:45 2003
From: oneway_111 at yahoo.com (ow)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Re: Resolving ambiguity with dates and division operations
In-Reply-To: <000401c30416$8f3b36c0$0200a8c0@NOTEBOOK>
Message-ID: <20030416164045.97793.qmail@web21409.mail.yahoo.com>


--- Matthew Ford <Matthew.Ford@forward.com.au> wrote:
...
> I know this is not a complete solution but I hope this helps.
> matthew
....

That was very helpful, thanks again.





__________________________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From antlrlist at yahoo.com  Wed Apr 16 11:42:13 2003
From: antlrlist at yahoo.com (antlrlist)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Re: More Error Handling and Recovery
In-Reply-To: <b74ljb+hkj6@eGroups.com>
Message-ID: <b7k865+2al4@eGroups.com>


I see that you have some wrong concepts.

I'll begin assuming that you're not turning off the
defaultErrorHandler option.

The error handler that you use in "startRule" does nothing, because is
exactly the same that ANTLR generates by default (this is, when
defaultErrorHandler=true -by default it is-).

By the way, ANTLR generates that handler for EVERY rule in your
grammar. This is, "line" has an error handler, "date" has an error
handler, and so on.

The default error handler is allways the same:

void  myRule()
{
  try {
   ... // <= Normal recogniton
  } catch (RecognitionException re) { //
    reportError(re);                  //  <= Default error handler
    consume();                        //
    consumeUntil(???);                //
  }
}

Now, what is ??? ?. It's the FOLLOW set of myRule. It's codified in a
BitSet (antlr.Collections.impl.BitSet) object.

If you want to use BitSets in your actions or in your exception
handlers, you can use $FIRST and $FOLLOW. $FIRST(rulename) maps to
"the FIRST set of rulename". $FOLLOW works the same way. If you use
$FIRST alone (no args) you're meaning "the FIRST set for the rule
where the exception handler is".

So for your startRule you could write something like this:

startRule
     :  ( line )+ EOF
     ;
     exception // for rule
     catch [RecognitionException ex] {
     reportError(ex); // Console.Error.WriteLine("exception: "+ex);
     consume();
     consumeUntil($FOLLOW); // <= HERE!
     }

You can use other sets instead of $FOLLOW, like $FOLLOW(startRule).
You should never use _tokenSet_XX for that, 'cause that's just
unstable. If you can not use directly $FOLLOW or $FIRST, you can:
a) Create a bitset {BitSet b=new BitSet();},
   add the tokens you need {b.add(IDENT); b.add(WS); ...}
   and then consume {consumeUntil(b);}
or b) Create a bitset with boolean operations like "and" and "or"
   { BitSet b = $FIRST.or($FOLLOW); }
   and then consume {consumeUntil(b);}

The point is that startRule's error handler helps you very little.
You'll wait for FOLLOW(startRule). And while waiting the recognition
process will end. This will happen for two reasons:
FOLLOW(startRule)'s an empty set, and the recognition is already over
when you reach startRule's error handler.

Here are my advices:

1- Familiarize yourself with FOLLOW and FIRST (I mean the abstract
concepts, not ANTLR's commands!)
2- Familiarize yourself with how ANTLR implements error recovery. The
file err.htm in the docs is a good start.
3- Have a look at the code ANTLR generates for your analyzer, until
you understand why the error handler you've used in startRule is
(sorry) useless.

Normally error recovery is a very long task that envolves lots of
code-tweaking and code generation understanding; this is, nothing that
you can do with a single exception handler in a sigle rule.

In other order of things, why are you recognizing EOF and WS? You're
using a Lexer and a Parser, right?

I hope I could help you. Cheers!

Enrique





--- In antlr-interest@yahoogroups.com, "madison_stjames"
<madison_stjames@y...> wrote:
> Ok, I think I've almost got it:
> 
> Here's my start rule:
>  startRule
>     :  ( line )+ EOF
>     ;
>     exception // for rule
>     catch [RecognitionException ex] {
>     Console.Error.WriteLine("exception: "+ex);
>     consume();
>     consumeUntil(tokenSet_0_);
>     }
> 
> What I want to do is resume the line production, upon encountering 
> an unrecognized token. The error is written out, and parsing 
> continues with the next line in the file.
> 
> The line production composed of sub-productions as follows:
> 
> line
>     : ( date WS time WS cip WS csusername WS sip WS sport WS 
> csmethod WS csuristem WS csuriquery WS scstatus WS csuseragent (WS)?
>         { 
>            Console.Out.WriteLine( SBLine.ToString() );
>            SBLine = new StringBuilder();
>         }
>        )
>     ; 
> 
> I want to continue to the next rule that the parser can recognize. I 
> thought line should work, for example: consumeUntil(line) but that 
> causes an error.
> 
> I looked at the parser file from a previous version, and noticed 
> that error handling specified token sets. How do these map to the 
> rules? And how do I determine which ones to use?
> 
> The exception handling routine above works, but I'm not sure exactly 
> what I'm referencing with tokenSet_0_;
> 
> Thanks Again!


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From bhagenbuch at didera.com  Wed Apr 16 14:03:29 2003
From: bhagenbuch at didera.com (bchagenbuch)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Re: Lexer makes 2 valid tokens when there is only 1 invalid one
In-Reply-To: <b7ft1n+ob2d@eGroups.com>
Message-ID: <b7kgf2+giof@eGroups.com>

I agree with you that this isn't so easy, especially when you consider 123E3, etc.  My 
lexer has the same problem.  

Perhaps we can both take consolation in the fact that Oracle9i sees both 

  SELECT 123 W ...

and 

  SELECT 123W ...

as if they were 

  SELECT 123 AS W ...

 while PostgreSQL rejects them both with ' parse error at or near "w" '.

It appears to me that the SQL99 standard agrees with you: 123 and W are 
<nondelimiter token>s and, hence, need whitespace between them.

--- In antlr-interest@yahoogroups.com, "martinkbraid" <mbraid@s...> wrote:
> I believe I have a reasonably standard lexer for the SQL language, a 
> language in which all identifiers have to begin with an alpha. It 
> therefore correctly identifies "W123" as an identifier, however, if I 
> give it "123W" the lexer figures there are two tokens: "123" (a 
> NUMBER) and "W" (an IDENTIFIER). This is wrong, it should reject this 
> (and because by chance this can be valid at the syntactic level, the 
> parser cannot do anything about it). So what am I doing wrong. A 
> fragment of my lexer follows:
> 
> Many thanks
> Martin Braid
> 
> protected
> DIGIT    : ('0'..'9');
> 
> protected
> LETTER   : ('a'..'z');
> 
> protected
> SPECIAL  : "_" ;
> 
> protected
> EXPONENT : "e" ( PLUS | MINUS )? (DIGIT)+ ;
> 
> protected
> INTEGER : (DIGIT)+;
> 
> protected
> FLOAT  : (INTEGER '.' INTEGER) => INTEGER '.' INTEGER EXPONENT)?
>        | (INTEGER '.'        ) => INTEGER '.'         (EXPONENT)?
>        | (        '.' INTEGER) =>         '.' INTEGER (EXPONENT)?
>        ;
> 
> NUMBER :  (FLOAT) => FLOAT   {$setType(FLOAT);}
>        |  INTEGER {$setType(INTEGER);}
>        |  '.'     {$setType(DOT);}
>        ;
> 
> IDENT   options {testLiterals = true;}
>        : (LETTER) ( SPECIAL | LETTER | DIGIT )*;


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mabell at wi.rr.com  Wed Apr 16 14:37:06 2003
From: mabell at wi.rr.com (M.A.Bell)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] infinite recursion causing my head to spin
Message-ID: <3E9DCD02.6010505@wi.rr.com>

My apologies in advance for my ignorance, obviously I'm new at this.
I have 2 questions.
1. Is there a more concise way to state ruleA? That is, another way to 
code optional paired parentheses?
2. As you can see, I've got a serious infinite recursion problem here, 
and can't seem to come up with a solution. Can someone give me a pointer 
or two to nudge me in the right direction?
ruleA:
    (ruleB)
  | (LPAREN ruleB RPAREN)
  | (ruleC)
  | (LPAREN ruleC RPAREN)
;
ruleB:
  (ruleW | ruleA)
  (RESERV_1 RESERV_2)
  (ruleW | ruleA)
;
ruleC:
  (ruleW | ruleA)
  (RESERV_3)?
  (ruleX)?
  (RESERV_2)
  (ruleW | ruleA)
  (ruleD)?
;
ruleD:
    (RESERV_4 ruleY)
  | (RESERV_5 LPAREN ruleZ RPAREN)
;
-- 
Michael Bell
<mailto:mabell@wi.rr..com>



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oneway_111 at yahoo.com  Wed Apr 16 16:50:34 2003
From: oneway_111 at yahoo.com (oneway_111)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] A way to reuser Lexer, Parser and TreeWalker instances?
Message-ID: <b7kq8a+65q8@eGroups.com>

Hi,

Is there a way to reuser Lexer, Parser and TreeWalker instances
between invocations?

With Lexer it perhaps could be done with Lexer.setText() but it
appears to be more tricky for Parser and TreeWalker.

Any ideas? Thanks


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From m_schellens at hotmail.com  Thu Apr 17 03:22:57 2003
From: m_schellens at hotmail.com (marcschellens)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] problems with c++ in debug mode
Message-ID: <b7lva1+f1ps@eGroups.com>

When I run my grammer with -debug option,
I got the following error:

MyLexer.hpp:10:42: antlr/DebuggingCharScanner.hpp: No such file or
directory 

and there is indeed no such a file.
Does anybody know what to do?

thanks,
marc


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rjc at trump.net.au  Thu Apr 17 05:27:53 2003
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Antlr-Eclipse Problems
Message-ID: <4.2.0.58.20030417211825.003758e0@postoffice.trump.net.au>

Hello,

I have just tried using antlr plugin for eclipse 
(http://sourceforge.net/projects/antlreclipse/) with the recently released 
eclipse 2.1 (http://www.eclipse.org/).

By default the eclipse compiler is a bit stricter than the default java 
compiler.  The generated antlr java code now seems to produce a large 
number of warnings mainly "unused import" around 180 errors for my project, 
but also "unused variable" if you have that warning enabled, around 100 
errors for the project.

An easy fix is just to just disable the particular warnings for the 
project.  But i was wondering if the antlr code generation could be made a 
bit smarter ie *TokenTypes.java files are just a set of integer constants 
they cant possibly need any of the imports provided.

Anyway i started looking at the generated code and it occurred to me really 
you shouldn't be pulling any of the antlr namespace via imports into the 
code because it can interfere with the user code in the actions.

ie antlr imports its own BitSet class, if the user wants to use 
java.util.BitSet the names will clash.

I can provide a patch so that no antlr classes are imported by simply using 
fully qualified names in the generated code.  This might make the generated 
code marginally longer slightly harder to read but it will fix the eclipse 
problem and remove the chance of names clashing.

Is this worthwhile patch?

  - Robert


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Thu Apr 17 07:08:26 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] A way to reuser Lexer, Parser and TreeWalker instances?
In-Reply-To: <b7kq8a+65q8@eGroups.com>
Message-ID: <20030417140826.46619.qmail@web20416.mail.yahoo.com>

Actually, once you've changed the text of the lexer,
you should be able to reinvoke the parser rule with no
complications.  Don't know about the TreeWalker.

-Matt

--- oneway_111 <oneway_111@yahoo.com> wrote:
> Hi,
> 
> Is there a way to reuser Lexer, Parser and
> TreeWalker instances
> between invocations?
> 
> With Lexer it perhaps could be done with
> Lexer.setText() but it
> appears to be more tricky for Parser and TreeWalker.
> 
> Any ideas? Thanks
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Apr 17 08:26:19 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] A way to reuser Lexer, Parser and TreeWalker
	 instances?
Message-ID: <170826586F3BD511910D0200C110AAA8054022DF@memail03.bco-home.com>

I believe everything uses an InputState object to hold state.  That needs
reset and you can reuse your lexer, parser or tree parser.  You are
responsible for handling any instance variables you introduce.

Monty

-----Original Message-----
From: Matt Benson [mailto:gudnabrsam@yahoo.com]
Sent: Thursday, April 17, 2003 7:08 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] A way to reuser Lexer, Parser and
TreeWalker instances?


Actually, once you've changed the text of the lexer,
you should be able to reinvoke the parser rule with no
complications.  Don't know about the TreeWalker.

-Matt

--- oneway_111 <oneway_111@yahoo.com> wrote:
> Hi,
> 
> Is there a way to reuser Lexer, Parser and
> TreeWalker instances
> between invocations?
> 
> With Lexer it perhaps could be done with
> Lexer.setText() but it
> appears to be more tricky for Parser and TreeWalker.
> 
> Any ideas? Thanks
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rjc at trump.net.au  Thu Apr 17 09:03:31 2003
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Antlr-Eclipse Problems
In-Reply-To: <4.2.0.58.20030417211825.003758e0@postoffice.trump.net.au>
Message-ID: <4.2.0.58.20030418014357.01772ef8@postoffice.trump.net.au>

Hello Everybody

Following up my own post their is a context diff file here:
         http://www.trump.net.au/~rjc/antlr.diff.gz

(It was ~16k lines too big to attach)

The patch hacked out over last few hours moves all the antlr classes out of 
the default namespace.  This means no clashing with user defined classes in 
actions etc and the eclipse compiler no longer generates lots of warnings 
on the generated code.

There is an compatibility issue though, alot of grammars expect certain 
classes to be available ie Token, AST.  To fix this either use a fully 
qualified name(ie prefix with 'antlr.') or add the appropriate imports to 
the header section of your grammar(ie import antlr.Token;)

To rebuild antlr i had to create a build script:
$ cat build
find antlr -name '*.class' -exec rm {} \;
javac -classpath . antlr/build/*.java
javac -classpath . antlr/J*.java
java -classpath . antlr.build.Tool build
java -classpath . antlr.build.Tool jar

I did this in a hurry, and its late at night now...so don't go copying this 
code straight into your production grammars or anything without double 
checking.

  - Robert

At 10:27 PM 17/04/2003 +1000, Robert Colquhoun wrote:
>Hello,
>
>I have just tried using antlr plugin for eclipse
>(http://sourceforge.net/projects/antlreclipse/) with the recently released
>eclipse 2.1 (http://www.eclipse.org/).
>
>By default the eclipse compiler is a bit stricter than the default java
>compiler.  The generated antlr java code now seems to produce a large
>number of warnings mainly "unused import" around 180 errors for my project,
>but also "unused variable" if you have that warning enabled, around 100
>errors for the project.
>
>An easy fix is just to just disable the particular warnings for the
>project.  But i was wondering if the antlr code generation could be made a
>bit smarter ie *TokenTypes.java files are just a set of integer constants
>they cant possibly need any of the imports provided.
>
>Anyway i started looking at the generated code and it occurred to me really
>you shouldn't be pulling any of the antlr namespace via imports into the
>code because it can interfere with the user code in the actions.
>
>ie antlr imports its own BitSet class, if the user wants to use
>java.util.BitSet the names will clash.
>
>I can provide a patch so that no antlr classes are imported by simply using
>fully qualified names in the generated code.  This might make the generated
>code marginally longer slightly harder to read but it will fix the eclipse
>problem and remove the chance of names clashing.
>
>Is this worthwhile patch?
>
>   - Robert
>
>
>
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Thu Apr 17 10:52:00 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Re: Lexer makes 2 valid tokens when there is only 1 invalid one
In-Reply-To: <b7h6ev+l4p4@eGroups.com>
Message-ID: <b7mpk0+n41m@eGroups.com>

> Here is a valid SQL stmt: select 123 w from table;
> 
> Here is an invalid SQL stmt: select 123w from table;

I defer to Monty's post on this matter. You would have to either use 
a validating predicate as he advises or, you might want to check for 
whitespace in the hidden TokenStream in your parser.

For "123 w" the Lexer would generate NUMBER WHITESPACE IDENTIFIER
For "123w"  the Lexer would generate NUMBER            IDENTIFIER 

> In the first stmt, the "w" is a column alias for the 
constant "123"; 
> in the 2nd stmt, "123w" is an invalid column name. My problem is 
that 
> I need to weed out bad stmts, like the 2nd one, but I cannot do 
that 
> if my lexer converts it to a valid stmt, like the first one. That's 
> why the parser cannot capture this problem - it doesn't think there 
> is one.

It just needs to use more of the info available (e.g. the hidden 
TokenStream).

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From alan at oursland.net  Thu Apr 17 11:41:22 2003
From: alan at oursland.net (Alan Oursland)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Re: Lexer makes 2 valid tokens when there is only 1 invalid one
In-Reply-To: <b7mpk0+n41m@eGroups.com>
Message-ID: <LPBBJCCFLMNNCKIFGNLHOENGECAA.alan@oursland.net>

I had the same problem in scheme. My workaround would look something like this:

TOKEN	:	(NUMBER DELIMITER) 	=> NUMBER 		{ $setType(NUMBER); }
	|	(IDENTIFIER DELIMITER) 	=> DELIMITER 	{ $setType(IDENTIFIER); }
	;

Note that there is only one non-protected token type (TOKEN), but the type of
the returned token is changed during processing.

Alan


> -----Original Message-----
> From: micheal_jor [mailto:open.zone@virgin.net]
> Sent: Thursday, April 17, 2003 12:52 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Lexer makes 2 valid tokens when there is
> only 1 invalid one
>
>
> > Here is a valid SQL stmt: select 123 w from table;
> >
> > Here is an invalid SQL stmt: select 123w from table;
>
> I defer to Monty's post on this matter. You would have to either use
> a validating predicate as he advises or, you might want to check for
> whitespace in the hidden TokenStream in your parser.
>
> For "123 w" the Lexer would generate NUMBER WHITESPACE IDENTIFIER
> For "123w"  the Lexer would generate NUMBER            IDENTIFIER
>
> > In the first stmt, the "w" is a column alias for the
> constant "123";
> > in the 2nd stmt, "123w" is an invalid column name. My problem is
> that
> > I need to weed out bad stmts, like the 2nd one, but I cannot do
> that
> > if my lexer converts it to a valid stmt, like the first one. That's
> > why the parser cannot capture this problem - it doesn't think there
> > is one.
>
> It just needs to use more of the info available (e.g. the hidden
> TokenStream).
>
> Cheers,
>
> Micheal
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Thu Apr 17 15:06:34 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] problems with c++ in debug mode
In-Reply-To: <b7lva1+f1ps@eGroups.com>; from m_schellens@hotmail.com on Thu, Apr 17, 2003 at 10:22:57AM -0000
References: <b7lva1+f1ps@eGroups.com>
Message-ID: <20030418000633.A29981@cs.utwente.nl>

Hi,

On Thu, Apr 17, 2003 at 10:22:57AM -0000, marcschellens wrote:
> When I run my grammer with -debug option,
> I got the following error:
> 
> MyLexer.hpp:10:42: antlr/DebuggingCharScanner.hpp: No such file or
> directory 
> 
> and there is indeed no such a file.
> Does anybody know what to do?

That debug stuff does not work in c++ mode. It works more or less in java
mode with the parseview add on.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Innovation makes enemies of all those who prospered under the old
   regime, and only lukewarm support is forthcoming from those who would
               prosper under the new. --- Niccol Machiavelli


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oneway_111 at yahoo.com  Thu Apr 17 15:48:24 2003
From: oneway_111 at yahoo.com (oneway_111)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Re: A way to reuse Lexer, Parser and TreeWalker instances?
In-Reply-To: <170826586F3BD511910D0200C110AAA8054022DF@memail03.bco-home.com>
Message-ID: <b7navo+r0df@eGroups.com>

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> I believe everything uses an InputState object to hold state.  That
needs
> reset and you can reuse your lexer, parser or tree parser.  You are
> responsible for handling any instance variables you introduce.
> 
> Monty

Thanks, looks like it could work. Has anyone actually had success with
this?




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oneway_111 at yahoo.com  Thu Apr 17 23:03:00 2003
From: oneway_111 at yahoo.com (oneway_111)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Best practices?
Message-ID: <b7o4ek+ur1n@eGroups.com>

Hi,

What would be a productive way to develop a new grammar? Should I
start with Lexer and Parser first, complete them and *then* add
TreeParser? ... or should I develop all three of them in parallel? The
idea behind having a TreeParser is that I'd like to quickly scan
through the tree and check that the expression being parsed is using
only valid (in the business sense) components. If not, there's no need
to bother calculating the result.

Any ideas? Thanks


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From bhagenbuch at didera.com  Fri Apr 18 08:34:31 2003
From: bhagenbuch at didera.com (Brian Hagenbuch)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Re: A way to reuse Lexer, Parser and TreeWalker instances?
In-Reply-To: <b7navo+r0df@eGroups.com>
Message-ID: <b7p5u7+hi31@eGroups.com>

--- In antlr-interest@yahoogroups.com, "oneway_111" <oneway_111@y...>
wrote:
> --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> > I believe everything uses an InputState object to hold state. 
That
> needs
> > reset and you can reuse your lexer, parser or tree parser.  You
are
> > responsible for handling any instance variables you introduce.
> > 
> > Monty
> 
> Thanks, looks like it could work. Has anyone actually had success
with
> this?

We found that there are a few protected fields in the lexer and parser that we needed  
to reset in addition to resetting the input state object.  Worse, there don't seem to be  
public set functions for all of them.  We  use a too-complicated subclassing scheme 
to  solve the problem (as least we think we've solved it).  We'd love to hear that there's 
an easier way.

In outline, here's what we do (manual excerpt, typos likely): 


class L extends GeneratedLexer {

	private boolean savedCaseSensitive;
	private boolean savedCaseSensitiveLiterals;

	public L(Reader in) {
		super(in)
		savedCaseSensitive = lexer.getCaseSensitive();
		savedCaseSensitiveLiterals = lexer.getCaseSensitiveLiterals();
	}
	
	public void prepareNextInput(Reader in) {
	
		CharBuffer buf = new CharBuffer(in);
		LexerSharedInputState state = new LexerSharedInputState(buf);
		this.setInputState(state);
		
		this.setCaseSensitive(savedCaseSensitive);
		
		// no set method for this protected field.
		this.caseSensitiveLiterals = savedCaseSensitiveLiterals; 
	}
}

class P extends GeneratedParser {

	public P(TokenStream lexer)
	{
		super(lexer);
	}

	public void resetState() {
	
	// no set method for this protected field.
	this.traceDepth = 0;

	this.getInputState().reset();
}

To reset a lexer and associated parser:

	lexer.prepareNextStatement(...some Reader...);
	parser.resetState();

Hope this helps.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From spamjunk at stny.rr.com  Sat Apr 19 16:08:34 2003
From: spamjunk at stny.rr.com (drxenos)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] ANTLr and streams
Message-ID: <b7skti+mlcf@eGroups.com>

Hi.  I'm having an "interesting" problem.  I'm using ANTLr 2.7.2
generating C++ code, and GCC 3.2 (MINGw).  In order to simplify my
testing, I was trying to feed my lexer with an istringstream.  The
lexer works fine with an ifstream.  With an istringstream, it throws
an exception stating "expecting EOF," but the C++ standard says that
an istringstream will fail as any i/o stream when the end is reached.
 The lexer's constructor only expects an istream, so either should
work.  I can't tell whether it is the ANTLr C++ code or GCC that's
causing the failure.  The only thing I can think of is that "failure"
at the end-of-string means setting the fail bit but not the eof bit,
and the ANTLr code is looking explicitedly for the eof bit.

Anyone got any info or ideas on this problem?

Thanks,

Rich


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From spamjunk at stny.rr.com  Sat Apr 19 18:18:22 2003
From: spamjunk at stny.rr.com (drxenos)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Re: ANTLr and streams
In-Reply-To: <b7skti+mlcf@eGroups.com>
Message-ID: <b7ssgu+di2i@eGroups.com>

Ok, now it's working.  No changes.  Weird...

--- In antlr-interest@yahoogroups.com, "drxenos" <spamjunk@s...> wrote:
> Hi.  I'm having an "interesting" problem.  I'm using ANTLr 2.7.2
> generating C++ code, and GCC 3.2 (MINGw).  In order to simplify my
> testing, I was trying to feed my lexer with an istringstream.  The
> lexer works fine with an ifstream.  With an istringstream, it throws
> an exception stating "expecting EOF," but the C++ standard says that
> an istringstream will fail as any i/o stream when the end is reached.
>  The lexer's constructor only expects an istream, so either should
> work.  I can't tell whether it is the ANTLr C++ code or GCC that's
> causing the failure.  The only thing I can think of is that "failure"
> at the end-of-string means setting the fail bit but not the eof bit,
> and the ANTLr code is looking explicitedly for the eof bit.
> 
> Anyone got any info or ideas on this problem?
> 
> Thanks,
> 
> Rich


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From m_schellens at hotmail.com  Mon Apr 21 03:45:48 2003
From: m_schellens at hotmail.com (marcschellens)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Suggestion for Parser
Message-ID: <b80i4s+s0sp@eGroups.com>

It would be convenient, to have a tree parser,
which doesn't actually check the tree anymore, as this is done
before with another tree parser.
Especially such a tree parser could easyly extended to be used as an
interpreter.
Are there any plans in this direction?
Where are the crucial lines in the java code?
I am using c++ code generation.

thanks,
marc


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Apr 21 09:12:42 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Suggestion for Parser
Message-ID: <170826586F3BD511910D0200C110AAA8054022FB@memail03.bco-home.com>

What do you mean, a tree parser that doesn't parse the tree?  I don't
understand.

See the tinybasic.g example for ideas on how to do an interpreter.

Monty

-----Original Message-----
From: marcschellens [mailto:m_schellens@hotmail.com]
Sent: Monday, April 21, 2003 3:46 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Suggestion for Parser


It would be convenient, to have a tree parser,
which doesn't actually check the tree anymore, as this is done
before with another tree parser.
Especially such a tree parser could easyly extended to be used as an
interpreter.
Are there any plans in this direction?
Where are the crucial lines in the java code?
I am using c++ code generation.

thanks,
marc


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Mon Apr 21 10:41:48 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] an ANTLR and language news channel
Message-ID: <873FEAD5-7420-11D7-BA37-000393BB647E@jguru.com>

Folks,

I've just launched a new website to help groups of similarly-minded 
people (like us) share links:

	http://www.peerscope.com

I have created an ANTLR group that is kind of like a news channel for 
ANTLR and language related stuff.  It is considered a public group, 
meaning it is visible to the world not just participants.  The home 
page summarizes entries from all public groups, but you can jump 
directly to ANTLR news channel / group if you want:

http://www.peerscope.com/group/2

Note that if you want to participate by posting cool things you find, 
let me know and I'll add you to the list of participants.

OH, and feel free to create your own lists (free for now) to help your 
teams share links. :)  It's like a blogger with no installation that is 
organized by link not by day.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Creator, http://www.peerscope.com link sharing, pure and simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From dude at darkfigure.org  Mon Apr 21 13:05:02 2003
From: dude at darkfigure.org (Paul J. Lucas)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Parsers implementing interfaces
Message-ID: <b81ite+k3ek@eGroups.com>

It would be nice if I could say:

   class MyParser extends Parser implements MyInterface;

- Paul


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Mon Apr 21 21:15:52 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Parsers implementing interfaces
In-Reply-To: <b81ite+k3ek@eGroups.com>
Message-ID: <1AFC8A6B-7479-11D7-BA37-000393BB647E@jguru.com>

Hi Paul,

Is there a classHeaderSuffix option or anything?  I think I might have 
that...can't remember.

Ter
On Monday, April 21, 2003, at 01:05  PM, Paul J. Lucas wrote:

> It would be nice if I could say:
>
>    class MyParser extends Parser implements MyInterface;
>
> - Paul
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From m_schellens at hotmail.com  Mon Apr 21 22:41:13 2003
From: m_schellens at hotmail.com (marcschellens)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Re: Suggestion for Parser
In-Reply-To: <170826586F3BD511910D0200C110AAA8054022FB@memail03.bco-home.com>
Message-ID: <b82klp+t46l@eGroups.com>

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> What do you mean, a tree parser that doesn't parse the tree?  I don't
> understand.

I mean a tree walker, with no calls to the match(...)
function and no case statements (c++ mode) or at least
(maybe even better) that case statements could be suppressed
for some functions as the next sibling is determined by its
predecessor.
 
> See the tinybasic.g example for ideas on how to do an interpreter.
I had a short look at it, but I think it suffers (in terms of
performance) from the same problem, that in some places it checks
for the next sibling, even all this information could be delivered
from a first tree walk.

EG: A switch statement.
The first node would contain the number N of case entries
so the type (=function to call) is already known for the next
N siblings.

Hope I made my point clearer,
marc

> -----Original Message-----
> From: marcschellens [mailto:m_schellens@h...]
> Sent: Monday, April 21, 2003 3:46 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Suggestion for Parser
> 
> 
> It would be convenient, to have a tree parser,
> which doesn't actually check the tree anymore, as this is done
> before with another tree parser.
> Especially such a tree parser could easyly extended to be used as an
> interpreter.
> Are there any plans in this direction?
> Where are the crucial lines in the java code?
> I am using c++ code generation.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Apr 22 08:11:19 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Re: Suggestion for Parser
Message-ID: <170826586F3BD511910D0200C110AAA805402304@memail03.bco-home.com>

Huh, so you want to have your first tree parser generate another tree parser
that is hard coded for that specific tree?  I don't see the advantage to
this.

Monty

-----Original Message-----
From: marcschellens [mailto:m_schellens@hotmail.com]
Sent: Monday, April 21, 2003 10:41 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Re: Suggestion for Parser


--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> What do you mean, a tree parser that doesn't parse the tree?  I don't
> understand.

I mean a tree walker, with no calls to the match(...)
function and no case statements (c++ mode) or at least
(maybe even better) that case statements could be suppressed
for some functions as the next sibling is determined by its
predecessor.
 
> See the tinybasic.g example for ideas on how to do an interpreter.
I had a short look at it, but I think it suffers (in terms of
performance) from the same problem, that in some places it checks
for the next sibling, even all this information could be delivered
from a first tree walk.

EG: A switch statement.
The first node would contain the number N of case entries
so the type (=function to call) is already known for the next
N siblings.

Hope I made my point clearer,
marc

> -----Original Message-----
> From: marcschellens [mailto:m_schellens@h...]
> Sent: Monday, April 21, 2003 3:46 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Suggestion for Parser
> 
> 
> It would be convenient, to have a tree parser,
> which doesn't actually check the tree anymore, as this is done
> before with another tree parser.
> Especially such a tree parser could easyly extended to be used as an
> interpreter.
> Are there any plans in this direction?
> Where are the crucial lines in the java code?
> I am using c++ code generation.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Tue Apr 22 08:13:50 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Suggestion for Parser
In-Reply-To: <b80i4s+s0sp@eGroups.com>; from m_schellens@hotmail.com on Mon, Apr 21, 2003 at 10:45:48AM -0000
References: <170826586F3BD511910D0200C110AAA8054022FB@memail03.bco-home.com> <b82klp+t46l@eGroups.com> <b80i4s+s0sp@eGroups.com>
Message-ID: <20030422171349.C12994@cs.utwente.nl>

Hi,

On Mon, Apr 21, 2003 at 10:45:48AM -0000, marcschellens wrote:
> It would be convenient, to have a tree parser,
> which doesn't actually check the tree anymore, as this is done
> before with another tree parser.

On Tue, Apr 22, 2003 at 05:41:13AM -0000, marcschellens wrote:
> I mean a tree walker, with no calls to the match(...)

No match would imply that syntactic predicates would not work anymore.
Often match calls look redundant in generated code since just before it the
node is checked in a case. In some situations this will not be the case
thus blowing things up. Also the match code contains the checks for the
null pointer sentries, which is another can of worms altogether.

> function and no case statements (c++ mode) or at least
> (maybe even better) that case statements could be suppressed
> for some functions as the next sibling is determined by its
> predecessor.

It kindoff sounds like you want an unfolding for every possible tree
traversal ? Which would not be practical for the general case. For some
subclass of grammars it might be ok.

> > See the tinybasic.g example for ideas on how to do an interpreter.
> I had a short look at it, but I think it suffers (in terms of
> performance) from the same problem, that in some places it checks
> for the next sibling, even all this information could be delivered
> from a first tree walk.
>
> EG: A switch statement.
> The first node would contain the number N of case entries
> so the type (=function to call) is already known for the next
> N siblings.

> Are there any plans in this direction?

No.

> Where are the crucial lines in the java code?

CppCodegenerator.java and all the lines involving generating 'match' calls.

If you know what you are doing and understand the grammar you have very
well (and it doesn't use syntactic predicates) you may get away by using a
hacked codegenerator. YMMV. 

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From xavier.huet at infineon.com  Wed Apr 23 09:50:41 2003
From: xavier.huet at infineon.com (xavier.huet@infineon.com)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] About C++ Generated files
Message-ID: <9125AE321C26D311A7D900805F8BB94A085B2E36@mail.vlb.infineon.com>

Hi there,

I am wondring if it's possible by a magic options (in .g or command line) to
change the .cpp to .cc (or anything else) and the .hpp to .hh (or anything
else).
Also I am wondering if we can force the .cpp and the .hpp to be generated in
2 differents
directories ...

TIA,

Xavier Huet




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From aaanwar at yahoo.com  Wed Apr 23 13:21:56 2003
From: aaanwar at yahoo.com (aaanwar)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] HELP: using ANTLR for code genrations
Message-ID: <b86sl4+1s97@eGroups.com>

Greetings,

how would one user ANTLR for code generation.

I want to be abole to produce libraries that can be used to generate 
code in a given language.

Can I leverage the ANTLR toolkit and grammars for this purpose ?

Thanks,

Arman.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From hui at ipedo.com  Wed Apr 23 22:10:37 2003
From: hui at ipedo.com (Hui Zhang)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] javacc grammar to antlr conversion
Message-ID: <b87rkd+k0mv@eGroups.com>

Is there a tool that converts javacc grammar to antlr grammmar? Many 
thanks.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From m_schellens at hotmail.com  Wed Apr 23 23:56:49 2003
From: m_schellens at hotmail.com (marcschellens)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Re: Suggestion for Parser
In-Reply-To: <20030422171349.C12994@cs.utwente.nl>
Message-ID: <b881rh+bfao@eGroups.com>

--- In antlr-interest@yahoogroups.com, Ric Klaren <klaren@c...> wrote:
> Hi,
> 
> On Mon, Apr 21, 2003 at 10:45:48AM -0000, marcschellens wrote:
> > It would be convenient, to have a tree parser,
> > which doesn't actually check the tree anymore, as this is done
> > before with another tree parser.
> 
> On Tue, Apr 22, 2003 at 05:41:13AM -0000, marcschellens wrote:
> > I mean a tree walker, with no calls to the match(...)
> 
> No match would imply that syntactic predicates would not work anymore.
> Often match calls look redundant in generated code since just before
it the
> node is checked in a case. In some situations this will not be the case
> thus blowing things up. Also the match code contains the checks for the
> null pointer sentries, which is another can of worms altogether.
> 
> > function and no case statements (c++ mode) or at least
> > (maybe even better) that case statements could be suppressed
> > for some functions as the next sibling is determined by its
> > predecessor.
> 
> It kindoff sounds like you want an unfolding for every possible tree
> traversal ? Which would not be practical for the general case. For some
> subclass of grammars it might be ok.
> 
> > > See the tinybasic.g example for ideas on how to do an interpreter.
> > I had a short look at it, but I think it suffers (in terms of
> > performance) from the same problem, that in some places it checks
> > for the next sibling, even all this information could be delivered
> > from a first tree walk.
> >
> > EG: A switch statement.
> > The first node would contain the number N of case entries
> > so the type (=function to call) is already known for the next
> > N siblings.
> 
> > Are there any plans in this direction?
> 
> No.
> 
> > Where are the crucial lines in the java code?
> 
> CppCodegenerator.java and all the lines involving generating 'match'
calls.
> 
> If you know what you are doing and understand the grammar you have very
> well (and it doesn't use syntactic predicates) you may get away by
using a
> hacked codegenerator. YMMV. 

Of course I don't use syntactic predicates in the interpreter.
A quick solution would be to overload the match function
for my interpreter class. Maybe that is the easiest and savest.
An empty function body probably gets optimized out anyway.
After having a quick look at the code generator, I realized,
that I am much better of, if I hack the interpreter instead :-)
Thanks for your replies,
marc







 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Thu Apr 24 01:48:55 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] About C++ Generated files
In-Reply-To: <9125AE321C26D311A7D900805F8BB94A085B2E36@mail.vlb.infineon.com>; from xavier.huet@infineon.com on Wed, Apr 23, 2003 at 06:50:41PM +0200
References: <9125AE321C26D311A7D900805F8BB94A085B2E36@mail.vlb.infineon.com>
Message-ID: <20030424104855.F12994@cs.utwente.nl>

On Wed, Apr 23, 2003 at 06:50:41PM +0200, xavier.huet@infineon.com wrote:
> I am wondring if it's possible by a magic options (in .g or command line) to
> change the .cpp to .cc (or anything else) and the .hpp to .hh (or anything
> else).
> Also I am wondering if we can force the .cpp and the .hpp to be generated in
> 2 differents
> directories ...

You will have to script around it to make it like that.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I think we better split up."
  "Good idea. We can do more damage that way."
  --- Ghostbusters


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From aaanwar at yahoo.com  Thu Apr 24 03:54:51 2003
From: aaanwar at yahoo.com (aaanwar)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Re: A way to reuse Lexer, Parser and TreeWalker instances?
In-Reply-To: <b7p5u7+hi31@eGroups.com>
Message-ID: <b88fpr+102an@eGroups.com>

you could use, aspectj to break the encapsulation ... 
www.aspectj.org .. and getters, setters or other fields and methods,

Arman.

--- In antlr-interest@yahoogroups.com, "Brian Hagenbuch" 
<bhagenbuch@d...> wrote:
> --- In antlr-interest@yahoogroups.com, "oneway_111" 
<oneway_111@y...>
> wrote:
> > --- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> > > I believe everything uses an InputState object to hold state. 
> That
> > needs
> > > reset and you can reuse your lexer, parser or tree parser.  You
> are
> > > responsible for handling any instance variables you introduce.
> > > 
> > > Monty
> > 
> > Thanks, looks like it could work. Has anyone actually had success
> with
> > this?
> 
> We found that there are a few protected fields in the lexer and 
parser that we needed  
> to reset in addition to resetting the input state object.  Worse, 
there don't seem to be  
> public set functions for all of them.  We  use a too-complicated 
subclassing scheme 
> to  solve the problem (as least we think we've solved it).  We'd 
love to hear that there's 
> an easier way.
> 
> In outline, here's what we do (manual excerpt, typos likely): 
> 
> 
> class L extends GeneratedLexer {
> 
> 	private boolean savedCaseSensitive;
> 	private boolean savedCaseSensitiveLiterals;
> 
> 	public L(Reader in) {
> 		super(in)
> 		savedCaseSensitive = lexer.getCaseSensitive();
> 		savedCaseSensitiveLiterals = 
lexer.getCaseSensitiveLiterals();
> 	}
> 	
> 	public void prepareNextInput(Reader in) {
> 	
> 		CharBuffer buf = new CharBuffer(in);
> 		LexerSharedInputState state = new 
LexerSharedInputState(buf);
> 		this.setInputState(state);
> 		
> 		this.setCaseSensitive(savedCaseSensitive);
> 		
> 		// no set method for this protected field.
> 		this.caseSensitiveLiterals = 
savedCaseSensitiveLiterals; 
> 	}
> }
> 
> class P extends GeneratedParser {
> 
> 	public P(TokenStream lexer)
> 	{
> 		super(lexer);
> 	}
> 
> 	public void resetState() {
> 	
> 	// no set method for this protected field.
> 	this.traceDepth = 0;
> 
> 	this.getInputState().reset();
> }
> 
> To reset a lexer and associated parser:
> 
> 	lexer.prepareNextStatement(...some Reader...);
> 	parser.resetState();
> 
> Hope this helps.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Thu Apr 24 08:05:10 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] javacc grammar to antlr conversion
Message-ID: <170826586F3BD511910D0200C110AAA805402314@memail03.bco-home.com>

I don't know of such a tool.  Feel free to post specific questions about it
though, or if you need a consultant you can contact me through
www.codetransform.com.

Monty

-----Original Message-----
From: Hui Zhang [mailto:hui@ipedo.com]
Sent: Wednesday, April 23, 2003 10:11 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] javacc grammar to antlr conversion


Is there a tool that converts javacc grammar to antlr grammmar? Many 
thanks.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Thu Apr 24 10:15:29 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] two new interpreter labs posted
Message-ID: <58ECA078-7678-11D7-BA37-000393BB647E@jguru.com>

Folks,

I have posted some really useful labs; all students were able to 
complete them in about 2 hours for the first one and about an hour for 
the second (postscript) lab.

The first lab gets you to fill in the important parts of an assembler 
and interpreter.  Everything is very well defined so you can get things 
done in a hurry while learning the important stuff.  It lets you 
execute stuff like:

	.decl a
	.decl x
main:
; x = foo(20)
	const 20
	call foo
	store x
; print x
	load x
	print
	halt

The link to the lab is:

http://www.cs.usfca.edu/~parrt/course/652/labs/interp.html

The second lab introduces a completely different kind of interpreter 
like Forth: PostScript.  The students build the simple grammar that 
reads postscript (I provide the lexer actually) that invokes two simple 
methods in the interpreter: push() and execute(), which is all 
postscript knows how to do really.  I have provided the infrastructure 
to do the graphics part and so on.  Amazingly you can display the 
nozzle image shown in the lab write up:

http://www.cs.usfca.edu/~parrt/course/652/labs/postscript.html

All solutions are provided.  Very useful introduction to the two most 
common kinds of interpreter.

Enjoy!

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From aaanwar at yahoo.com  Thu Apr 24 17:20:23 2003
From: aaanwar at yahoo.com (aaanwar)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] can a tree grammar and the ANTLR toolkit be used to write genrative libraries
Message-ID: <b89v07+e4ar@eGroups.com>

Greetings,

This is a refinement of an earlier question:

What I really want to be abel to do is programatically generate code 
in say java.

So I would like to do something like.

CompilationUnit cu = new CompilationUnit();
cu.addClass("HelloWorld")
  .addMethod( "main", PUBLIC | STATIC | , VOID);

and so forth ...

Arman.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Fri Apr 25 12:48:14 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] can a tree grammar and the ANTLR toolkit be used to write genrative libraries
In-Reply-To: <b89v07+e4ar@eGroups.com>
Message-ID: <DA7CAC91-7756-11D7-BA37-000393BB647E@jguru.com>


On Thursday, April 24, 2003, at 05:20  PM, aaanwar wrote:

> Greetings,
>
> This is a refinement of an earlier question:
>
> What I really want to be abel to do is programatically generate code
> in say java.
>
> So I would like to do something like.
>
> CompilationUnit cu = new CompilationUnit();
> cu.addClass("HelloWorld")
>   .addMethod( "main", PUBLIC | STATIC | , VOID);
>
> and so forth ...

Hi...I have essentially what you want, but it's not ready to be 
released. :(  You want a template like creature:

method ::= <<
<access> <returnType> <name>(<args:argumentDecl()>) {
     <slist:statement()>
}
 >>

I haven't figured out what to do with StringTemplate yet and I need to 
make it work better for ANTLR stuff.  Mainly used  now to generate web 
pages for jGUru and peerscope :)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Fri Apr 25 13:20:47 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers
Message-ID: <66544CD5-775B-11D7-BA37-000393BB647E@jguru.com>

Does anyone have an opinion concerning ANTLR's construction of top-down 
lexers versus more traditional dfa-based state machine solutions?

I just got really irritated this week building the PostScript 
interpreter due to lexer lookahead issues.

PROS

Very readable lexers.  ('0'..'9')+ turns into a while look you can 
debug/read.

Very powerful...can literally parse (because you can call other rules) 
in the lexer.

Consistent with all other antlr-generated recognizers.  Lexers, 
parsers, tree parsers all use the same analyzer and code generator.

Can execute an action anywhere during the recognition of a token...with 
DFA based systems you have to wait until you know the complete token 
has been match.

CONS

Some lexer rules are a huge pain to specify in ANTLR because of the 
limitations of lookahead.

Lexer rules really confuse people since there are lots of special cases 
in the lookahead and stuff.

I wonder if a compromise is possible.  Use a DFA-based decision to 
determine which rule will match; can do arbitrary lookahead and all of 
that automatically to make a correct decision.  The problem is speed: 
you'd parse twice each token.  Perhaps I can simply combine all rules 
with common left edges automatically to avoid weirdness.  For example:

INT : ('0'..'9')+ ;

FLOAT : ('0'..'9')+ ('.' ('0'..'9')*)? | '.' ('0'..'9')+ ;

could be turned into a combine rule by the system:

INT_FLOAT
	:	('0'..'9')+ ('.' ('0'..'9')*)?
	|	'.' ('0'..'9')+
	;

or whatever.

Still, my lookahead computations are really twisted for lexical rules 
when you can see past end of a rule--literally any character can follow 
a token (if you consider erroneous input).

ANYWAY, who has thoughts on this?  I'd like thoughts also from people 
with *no* experience using DFA-based tools like lex/flex.  Do ANTLR 
lexers seem "natural"?

Thanks!
Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Fri Apr 25 14:37:36 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexer
	s
Message-ID: <170826586F3BD511910D0200C110AAA805402322@memail03.bco-home.com>

The GCC translation toolkit doesn't do too much interesting in the lexer.
The hardest thing was interpreting the #line directives, but if I could name
pieces of the token like any perl compatible regex library does then it'd be
easy to write the action after the match.  

The rest of the world is just so familiar with regular expressions that it's
hard to explain why they can't use them.  There's actually a nice python
library by Ka-Ping Yee that lets you specify regular expressions in a more
English fashion http://lfw.org/python/rxb15.py. I'm sure there are various
other nice regex builders out there.

Monty

-----Original Message-----
From: Terence Parr [mailto:parrt@jguru.com]
Sent: Friday, April 25, 2003 1:21 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers


Does anyone have an opinion concerning ANTLR's construction of top-down 
lexers versus more traditional dfa-based state machine solutions?

I just got really irritated this week building the PostScript 
interpreter due to lexer lookahead issues.

PROS

Very readable lexers.  ('0'..'9')+ turns into a while look you can 
debug/read.

Very powerful...can literally parse (because you can call other rules) 
in the lexer.

Consistent with all other antlr-generated recognizers.  Lexers, 
parsers, tree parsers all use the same analyzer and code generator.

Can execute an action anywhere during the recognition of a token...with 
DFA based systems you have to wait until you know the complete token 
has been match.

CONS

Some lexer rules are a huge pain to specify in ANTLR because of the 
limitations of lookahead.

Lexer rules really confuse people since there are lots of special cases 
in the lookahead and stuff.

I wonder if a compromise is possible.  Use a DFA-based decision to 
determine which rule will match; can do arbitrary lookahead and all of 
that automatically to make a correct decision.  The problem is speed: 
you'd parse twice each token.  Perhaps I can simply combine all rules 
with common left edges automatically to avoid weirdness.  For example:

INT : ('0'..'9')+ ;

FLOAT : ('0'..'9')+ ('.' ('0'..'9')*)? | '.' ('0'..'9')+ ;

could be turned into a combine rule by the system:

INT_FLOAT
	:	('0'..'9')+ ('.' ('0'..'9')*)?
	|	'.' ('0'..'9')+
	;

or whatever.

Still, my lookahead computations are really twisted for lexical rules 
when you can see past end of a rule--literally any character can follow 
a token (if you consider erroneous input).

ANYWAY, who has thoughts on this?  I'd like thoughts also from people 
with *no* experience using DFA-based tools like lex/flex.  Do ANTLR 
lexers seem "natural"?

Thanks!
Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From aaanwar at yahoo.com  Fri Apr 25 15:23:13 2003
From: aaanwar at yahoo.com (aaanwar)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Re: can a tree grammar and the ANTLR toolkit be used to write genrative libraries
In-Reply-To: <DA7CAC91-7756-11D7-BA37-000393BB647E@jguru.com>
Message-ID: <b8ccgh+7nud@eGroups.com>

Yes,

That is along the lines of what I was thinking if.

As ANTLR takes grammar definitions and churns or parsers I want to 
take the same grammar definitions and churn out APIs that can be used 
generate source in any given language.

I was surprised to find nothing readily available for this purpose 
given the number of tasks machine generation of source code is 
needed ... idl compilers, GUI builders, etc.

I would be interested in working on such a project. Let me know if 
you think ANTLR should be extended in this fashion or a new project 
needs to be started.

Arman.

 --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
wrote:
> 
> On Thursday, April 24, 2003, at 05:20  PM, aaanwar wrote:
> 
> > Greetings,
> >
> > This is a refinement of an earlier question:
> >
> > What I really want to be abel to do is programatically generate 
code
> > in say java.
> >
> > So I would like to do something like.
> >
> > CompilationUnit cu = new CompilationUnit();
> > cu.addClass("HelloWorld")
> >   .addMethod( "main", PUBLIC | STATIC | , VOID);
> >
> > and so forth ...
> 
> Hi...I have essentially what you want, but it's not ready to be 
> released. :(  You want a template like creature:
> 
> method ::= <<
> <access> <returnType> <name>(<args:argumentDecl()>) {
>      <slist:statement()>
> }
>  >>
> 
> I haven't figured out what to do with StringTemplate yet and I need 
to 
> make it work better for ANTLR stuff.  Mainly used  now to generate 
web 
> pages for jGUru and peerscope :)
> 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From greenj at ix.netcom.com  Fri Apr 25 15:45:59 2003
From: greenj at ix.netcom.com (John Green)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers
Message-ID: <347298218.1051285559@localhost>


I have no experience with DFA lexer construction.

Yes, the lookahead issues can be extremely tricky - they've caused me
confusion on several occasions, and it often took me a long time to figure
out what was going on.

The lexer that I had to build is a very miserable one, because it has macro
processing mixed right into it, and the macro processing is downright
psychotic. For example, I may have to do macro expansion or include file
expansion literally inside the middle of a token. It was very difficult to
build using Antlr's lexer construction, but for all I know, it may have
been much worse or even impossible to try to build with a DFA-based tool.

This may be completely off topic, but I have one other issue with lexer
construction, and that is a performance issue. For example, one of my
parser test runs, with profiling, showed that of the entire lex+parse, 18%
of the run was spent within a lexer comment rule! It spent so much time
there because I was unable to convince Antlr to generate code to first
process the most likely possibility within comments (any character other
than '*')... Antlr insisted on checking for "*/" first, and then processing
any other character. I don't know if a DFA-based tool would have been
better for this. Perhaps there's a way in Antlr that I don't know of to
force one check to be done prior to another. I worked around the issue by
coding the comment rule by hand, and there are other rules that I have my
eye on next for rewrites by hand.

Beyond that... I like the lexer construction. It's really nice to be able
to use the same Antlr syntax for lexer construction as for parser
construction.

My $.02.
John



--On 4/25/2003 1:20 PM -0700 Terence Parr wrote:

> Does anyone have an opinion concerning ANTLR's construction of top-down 
> lexers versus more traditional dfa-based state machine solutions?
> 
> I just got really irritated this week building the PostScript 
> interpreter due to lexer lookahead issues.
> 
> PROS
> 
> Very readable lexers.  ('0'..'9')+ turns into a while look you can 
> debug/read.
> 
> Very powerful...can literally parse (because you can call other rules) 
> in the lexer.
> 
> Consistent with all other antlr-generated recognizers.  Lexers, 
> parsers, tree parsers all use the same analyzer and code generator.
> 
> Can execute an action anywhere during the recognition of a token...with 
> DFA based systems you have to wait until you know the complete token 
> has been match.
> 
> CONS
> 
> Some lexer rules are a huge pain to specify in ANTLR because of the 
> limitations of lookahead.
> 
> Lexer rules really confuse people since there are lots of special cases 
> in the lookahead and stuff.
> 
> I wonder if a compromise is possible.  Use a DFA-based decision to 
> determine which rule will match; can do arbitrary lookahead and all of 
> that automatically to make a correct decision.  The problem is speed: 
> you'd parse twice each token.  Perhaps I can simply combine all rules 
> with common left edges automatically to avoid weirdness.  For example:
> 
> INT : ('0'..'9')+ ;
> 
> FLOAT : ('0'..'9')+ ('.' ('0'..'9')*)? | '.' ('0'..'9')+ ;
> 
> could be turned into a combine rule by the system:
> 
> INT_FLOAT
> 	:	('0'..'9')+ ('.' ('0'..'9')*)?
> 	|	'.' ('0'..'9')+
> 	;
> 
> or whatever.
> 
> Still, my lookahead computations are really twisted for lexical rules 
> when you can see past end of a rule--literally any character can follow 
> a token (if you consider erroneous input).
> 
> ANYWAY, who has thoughts on this?  I'd like thoughts also from people 
> with *no* experience using DFA-based tools like lex/flex.  Do ANTLR 
> lexers seem "natural"?
> 
> Thanks!
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
>  



 


From greenj at ix.netcom.com  Fri Apr 25 15:45:59 2003
From: greenj at ix.netcom.com (John Green)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers
Message-ID: <347298218.1051285559@localhost>


I have no experience with DFA lexer construction.

Yes, the lookahead issues can be extremely tricky - they've caused me
confusion on several occasions, and it often took me a long time to figure
out what was going on.

The lexer that I had to build is a very miserable one, because it has macro
processing mixed right into it, and the macro processing is downright
psychotic. For example, I may have to do macro expansion or include file
expansion literally inside the middle of a token. It was very difficult to
build using Antlr's lexer construction, but for all I know, it may have
been much worse or even impossible to try to build with a DFA-based tool.

This may be completely off topic, but I have one other issue with lexer
construction, and that is a performance issue. For example, one of my
parser test runs, with profiling, showed that of the entire lex+parse, 18%
of the run was spent within a lexer comment rule! It spent so much time
there because I was unable to convince Antlr to generate code to first
process the most likely possibility within comments (any character other
than '*')... Antlr insisted on checking for "*/" first, and then processing
any other character. I don't know if a DFA-based tool would have been
better for this. Perhaps there's a way in Antlr that I don't know of to
force one check to be done prior to another. I worked around the issue by
coding the comment rule by hand, and there are other rules that I have my
eye on next for rewrites by hand.

Beyond that... I like the lexer construction. It's really nice to be able
to use the same Antlr syntax for lexer construction as for parser
construction.

My $.02.
John



--On 4/25/2003 1:20 PM -0700 Terence Parr wrote:

> Does anyone have an opinion concerning ANTLR's construction of top-down 
> lexers versus more traditional dfa-based state machine solutions?
> 
> I just got really irritated this week building the PostScript 
> interpreter due to lexer lookahead issues.
> 
> PROS
> 
> Very readable lexers.  ('0'..'9')+ turns into a while look you can 
> debug/read.
> 
> Very powerful...can literally parse (because you can call other rules) 
> in the lexer.
> 
> Consistent with all other antlr-generated recognizers.  Lexers, 
> parsers, tree parsers all use the same analyzer and code generator.
> 
> Can execute an action anywhere during the recognition of a token...with 
> DFA based systems you have to wait until you know the complete token 
> has been match.
> 
> CONS
> 
> Some lexer rules are a huge pain to specify in ANTLR because of the 
> limitations of lookahead.
> 
> Lexer rules really confuse people since there are lots of special cases 
> in the lookahead and stuff.
> 
> I wonder if a compromise is possible.  Use a DFA-based decision to 
> determine which rule will match; can do arbitrary lookahead and all of 
> that automatically to make a correct decision.  The problem is speed: 
> you'd parse twice each token.  Perhaps I can simply combine all rules 
> with common left edges automatically to avoid weirdness.  For example:
> 
> INT : ('0'..'9')+ ;
> 
> FLOAT : ('0'..'9')+ ('.' ('0'..'9')*)? | '.' ('0'..'9')+ ;
> 
> could be turned into a combine rule by the system:
> 
> INT_FLOAT
> 	:	('0'..'9')+ ('.' ('0'..'9')*)?
> 	|	'.' ('0'..'9')+
> 	;
> 
> or whatever.
> 
> Still, my lookahead computations are really twisted for lexical rules 
> when you can see past end of a rule--literally any character can follow 
> a token (if you consider erroneous input).
> 
> ANYWAY, who has thoughts on this?  I'd like thoughts also from people 
> with *no* experience using DFA-based tools like lex/flex.  Do ANTLR 
> lexers seem "natural"?
> 
> Thanks!
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
>  



 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Fri Apr 25 16:53:37 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers
References: <66544CD5-775B-11D7-BA37-000393BB647E@jguru.com>
Message-ID: <001801c30b85$e3c68520$0200a8c0@NOTEBOOK>

Interesting you are looking at the lexer
My first language (a simulation language) had a hand built top down parser
(using procedure calls) and a hand build lexer using a state machine. I
would not do that again.

Now I do all my translations in Antlr.  I cann't say I have actually had
many problems with the lexer.  I just follow the examples and design my
languages to simplify issues.  Sometimes I cheat the use a switch in the
lexer controlled by the parser (just have to watch the lookaheads) to change
the token to a skip in certain parse situations.  I have more problems with
the parser sorting out ambiguities, generating sensible errors and
recovering from them and deciding between expressions and other things
(infinite look ahead is great using Syntactic Predicates).

My real bug bear is the tree generator/parser and the inconsistent way it
generates nodes when there are mixes of !.  In my latest project (an
automatic differentiator) I had to write a lot of the tree parser by hand.

I am including (again) a revised spec for handling tree generation for your
consideration.

matthew


Draft specification for Antlr Tree Generation
By Matthew Ford
Revision 1 25th Sept 2001

Section 1:Control of automatic tree generation in the Parser
By default the Parser will automatically generate AST trees.  This
generation can be
disabled globally by setting buildAST=false.

When buildAST=false ALL code related to AST tree building is removed and the
only ways to build your own tree are :-
i) to update a global tree or
ii) use Antlr's return syntax to pass your own tree back.
(Note: in this mode you should not need to link or load any AST code unless
you
reference it yourself from action, etc)

With buildAST = true (that is the default) you can selectively disable tree
generation
by using the ! syntax.  This can be used on either a rule or token basis.
Example of a rule based use of ! to disable tree generation

addition!
    :   INT PLUS i:INT
;

In this case no tree generation code is generated for this rule.  If you
want to create a
tree by hand for this rule you need to return it as shown below
addition returns [AST return_tree]!
   :   INT PLUS i:INT  { .. code to generate return_tree }
;


So I suggest this be relaxed a little to say that
No tree generation code is output except that labels in the rule are
initialized with the
appropiate minimal tree.
For example
> drop_table_statement!
> : "drop" "table" t3:table_name t4:drop_behavior
;
results in #t3 containing tree resulting from the rule table_name
and
statement!
: INT PLUS i:INT
;
would set up a tree for label i consisting of a single root node containing
the INT
token
This allows the user to control what tree code is added to their code if the
tree
generation is turned off for a rule. If there are not labels then no code.


To suppress a single token use ! after the token.  It will not be added to
the tree, eg.
statement
:  lhsVar EQUALS rhs SEMI!  // SEMI is not added to the tree.
;

Note as far as the rule statement is concerned
statement
:   lhsVar EQUALS addition!  // suppress addition of tree returned from
addition
;
addition:
    :   INT PLUS i:INT
;

Is the same as
statement
:   lhsVar EQUALS addition
;
addition!   // suppress generation tree
    :   INT PLUS i:INT
;

But in the second case no rule in the parser can get a tree from the
addition rule.

and
statement
 :  lhsVar EQUALS addition!
;
addition!
    :   INT PLUS i:INT
;

is redundant but legal.

You would probably actually use something like
statement
{AST addTree;}
:   lhsVar EQUALS^ addTree=addition!
   { ## =   build tree here using ## and addTree }
;

addition returns [AST returnTree]
    :   INT PLUS^ i:INT
{ returnTree = ##}  // pick up the autogenerated tree
;

Note: It makes no sense in this system to allow ! to be applied to
alternative of rules
that is :-
statement
{AST addTree;}
:   lhsVar EQUALS^ addTree=addition!
    { ## =   build tree here using ## and addTree }
|!  printstatement
;

is now illegal

In all other cases (that is when buildAST is true and ! is not used) the
return tree is
always generated and assigned to the global AST_return to be picked up by
the parent
rule.  This AST_return can be modified/overwritten using the syntax
discussed below.

Section 2: Syntax for manual modification of trees in the Parser
Note this is for modification of trees that have been automatically created.
If you set
buildAST=false or use ! on a rule, you are on your own as no tree code is
generated
for you.

Tree nodes are created using
#[TOKEN_TYPE] or #[TOKEN_TYPE,"text"]

Trees are created using
#(root, c1, ..., cn)
where
 root must be a node
 c1,to cn are the 1st to nth children which may be either nodes or
other trees.

Elements of the current rule can be addressed using the following
## is a short cut for AST_return, the current result tree.
#id is a short cut for the current tree rooted at the location originally
occupied by the
node labelled by id
@id is a short cut for the root node of the tree rooted at the location
originally
occupied by the node labelled by id
When these occur on the rhs of = they are replaced by clones of their
respective nodes
or trees. This prevents deadly loops.  As an optimisation ## =
#(#[token],##) could be
done without cloning ##.
When these occur on the lhs of = they refer to that location in the tree.
This allows
subtree replacements.

eg
statement
:   lhsVar e:EQUALS^ a:addition
  {
      #a = #(@a,#[INT,"5"],#[INT,"6"]);
     // the children of the addition subtree in the result (##) have been
replace with 5,6
    // a: now refers to the new subtree, the original subtree is has been
replaced by it.
    @a = #[MINUS]
    // the root of the new subtree a is now MINUS
   ## = #(#[STATEMENT],##);
   // add a node to the top of the result tree.  a: and e: still point to
the same subtrees.
  ## = #[DIV];
  // where do a: and e: point now?  They still point to there subtrees which
are not
released until the rule returns.
 // so the following is valid
  ## = #(@#,#a,#[INT,"3"],#a);
   // @# is the root node of ##  which is now just #[DIV]
   // note it is valid to use #a twice as it is cloned.
}
;



----- Original Message -----
From: "Terence Parr" <parrt@jguru.com>
To: <antlr-interest@yahoogroups.com>
Sent: Saturday, April 26, 2003 6:20 AM
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers


> Does anyone have an opinion concerning ANTLR's construction of top-down
> lexers versus more traditional dfa-based state machine solutions?
>
> I just got really irritated this week building the PostScript
> interpreter due to lexer lookahead issues.
>
> PROS
>
> Very readable lexers.  ('0'..'9')+ turns into a while look you can
> debug/read.
>
> Very powerful...can literally parse (because you can call other rules)
> in the lexer.
>
> Consistent with all other antlr-generated recognizers.  Lexers,
> parsers, tree parsers all use the same analyzer and code generator.
>
> Can execute an action anywhere during the recognition of a token...with
> DFA based systems you have to wait until you know the complete token
> has been match.
>
> CONS
>
> Some lexer rules are a huge pain to specify in ANTLR because of the
> limitations of lookahead.
>
> Lexer rules really confuse people since there are lots of special cases
> in the lookahead and stuff.
>
> I wonder if a compromise is possible.  Use a DFA-based decision to
> determine which rule will match; can do arbitrary lookahead and all of
> that automatically to make a correct decision.  The problem is speed:
> you'd parse twice each token.  Perhaps I can simply combine all rules
> with common left edges automatically to avoid weirdness.  For example:
>
> INT : ('0'..'9')+ ;
>
> FLOAT : ('0'..'9')+ ('.' ('0'..'9')*)? | '.' ('0'..'9')+ ;
>
> could be turned into a combine rule by the system:
>
> INT_FLOAT
> : ('0'..'9')+ ('.' ('0'..'9')*)?
> | '.' ('0'..'9')+
> ;
>
> or whatever.
>
> Still, my lookahead computations are really twisted for lexical rules
> when you can see past end of a rule--literally any character can follow
> a token (if you consider erroneous input).
>
> ANYWAY, who has thoughts on this?  I'd like thoughts also from people
> with *no* experience using DFA-based tools like lex/flex.  Do ANTLR
> lexers seem "natural"?
>
> Thanks!
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From aaanwar at yahoo.com  Fri Apr 25 17:36:27 2003
From: aaanwar at yahoo.com (aaanwar)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] where do I get the source for antlr
Message-ID: <b8ckab+nvp7@eGroups.com>




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Ger.Hobbelt at bermuda-holding.com  Fri Apr 25 18:53:24 2003
From: Ger.Hobbelt at bermuda-holding.com (Gerrit E.G. 'Insh_Allah' Hobbelt)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers
References: <66544CD5-775B-11D7-BA37-000393BB647E@jguru.com>
Message-ID: <09a601c30b96$9fd85260$0200010a@walgelijk>

Hi,

> PROS
>
> Very readable lexers.  ('0'..'9')+ turns into a while look you can
> debug/read.

Which is a *very* big pro IMHO.

I've had some serious trouble with flex lexers in the (more distant) past and it
was just awful hard to track down the problem (one example of this: of course my
flex lexer spec had a bug in one of its regexes but I didn't know that until I
ran a compiled binary trough it for a joke. (garbage in; parser crash out. lexer
barfed on the binary input a few megs down the road and started coughing up some
very peculiar token sequences. 2 days later. Final diagnosis: two *typos* in the
flex lexer definition file annulling each other... except when.... Bummer.
Generated code that somehow still resembled my definition file at least a _bit_
would certainly have helped...)

> CONS
>
> Some lexer rules are a huge pain to specify in ANTLR because of the
> limitations of lookahead.

Can I have a head-numbing example of this? I'm mighty curious.

(Something that's not about 'comment scanning', please? ;-) )

> ANYWAY, who has thoughts on this?  I'd like thoughts also from people
> with *no* experience using DFA-based tools like lex/flex.  Do ANTLR
> lexers seem "natural"?

Err, the 'reverse' applies to me: no experience with ANTLR 2.x lexers. So sorry.
(I'm still a very happy user of PCCTS 1.33 but am looking into 2.x now too.)

FYI, since my discovery of the then-cool 'flex' tool and it's initial couple of
applications (more and less appropriate ones), I've reverted to hand-coded
lexers again; these allow me the most flexibility and readability at all times.
One of the more interesting ones was one where I ran a pascal/c like script
interpreter inside the yacc-generated code (*no* p-code or anything like that),
so yacc had to signal my lexer at the proper time to 'jump around' in the input
stream when loops, subroutine calls or 'subprogram file loads' came up. Granted,
it was slo-o-o-o-ow but it was fun and proof of concept.

Some time later I ran into PCCTS because the error-handling in yacc sucks
bigtime (for want of a better description of this, ah, elaborate 'system') and
LALR(1) doesn't fit my bill either 5 out of 10. DLG was nice, but the first
thing I checked was the way to link hand-coded scanners to ANTLR 1.x. Worked
like a charm in 'C' mode.



Since I fear I'll be using (partially) hand-coded scanners quite often, I'd vote
for the 'sneak away' approach: dear ANTLR could give us the choice to:

a) generate lexers as they are right now, i.e. top-down and with the pros & cons
like you specified them. (I read from the other replies ANTLR 2.x allows me to
'hand-code parts of the lexer' by adding scanning code in actions. yum yum :-) I
would love that.)

b) generate some interesting output for use by flex et al (the antlr 1.x + dlg
mix revisited) -- iff you feel like doing such a thing

Of course this isn't 'clean', it's not hip and it's definitely isn't *the*
answer, but I like my tools flexible and if I get something which offers me the
3 choices 'use me', 'here's something you can feed to my neighbour' and 'roll
your own, dude' (or at least choices 1 & 3), I'm happy as a pig in s[a-z]+ ;-)

Assumption: ANTLR 2.x comes with a well-defined, *documented* lexer-to-parser
interface, including those dreaded 'parser to scanner' feedback mechanisms you
often find around type-versus-variable scanner problems (antlr can resolve these
in the parser alone, but I'm sure you can think of better examples where parser
provides the lexer with feedback for mandatory 'improved' subsequent
token-scanning).


<digress mode>
(Thinking about lexers, top-down & dfa, the evil idea about the possibility to
make 'self-modifying token streams' in the *parser* keeps cropping up (old idea
of mine), i.e. have antlr [predicate] actions modify (or even add/remove) tokens
in the input stream. Too simple example would be to modify some 'identifier'
token into a 'type definition' token or other token, based on a matched/failed
predicate (or rule?). You'll surely think of other wicked uses ;-) )
</digress mode>



You guessed it: I'm in favor of simple(=human-reviewable) lexers and pushing
some complexity into the parser, thus complicating the grammar an itsy bitsy
bit.
Keep the Antlr scanner as it is. Just offer a properly documented 'way out of
here', i.e. 'HOWTO-roll-your-own-scanner.txt'.


Maybe you can point at something where my 'way of life' isn't very suitable?
Always glad to learn about the err of my ways. ;-)





Best regards,

  Ger Hobbelt


----------------------------------------------------------------------------
http://FlashExperiments.insh-allah.com/           http://www.insh-allah.com/
----------------------------------------------------------------------------
"Senior Software Engineer." Uh-uh. Yep. One of them buggers who created this
bloody fine mess. "To boldly crash where no man has made a bug before."
----------------------------------------------------------------------------
The daily amount of incoming virusses/trojans/SPAM compels me to enforce the
rule: attachments have to be in ZIP,RAR,ARJ,JAR,BZ2,GZ,TXT or TAR.GZ format.
            Graphics accepted in GIF,PNG,JPEG and TIFF formats.
!!!       >>> ANY OTHER ATTACHMENTS WILL BE SILENTLY DELETED. <<<        !!!




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From vivek_bhaskar at hotmail.com  Sun Apr 27 22:02:27 2003
From: vivek_bhaskar at hotmail.com (vivek bhaskar)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Doubt about Predictive Parsing...Entry level question
Message-ID: <Law14-F35nviVaymEMh00015da3@hotmail.com>

Hi,
I am new to antlr world, and so am in learning phase only.

It is predictive parsing and so it must work, based on a parse-table, but 
its not clear from generated code, which is as "Hand written code". So any 
one of you, who have seen antlr code, will please tell that how antlr work? 
Or how it generate code without using parse-table and different states?

vivek



_________________________________________________________________
Hot picks. Free downloads. http://www.msn.co.in/musicnew/musicshop Visit 
music shop


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrew at adersoftware.com  Sun Apr 27 23:20:53 2003
From: andrew at adersoftware.com (Andrew Deren)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Doubt about Predictive Parsing...Entry level question
In-Reply-To: <Law14-F35nviVaymEMh00015da3@hotmail.com>
Message-ID: <200304280137499.SM01100@andrew>

As far as I know antlr does not use parse tables. It's a recursive-descent
parser that uses methods to do top-down descent to parse the input. Its
generated code is fairly well readable because of that.
Basically, for each rule in your grammar you will have a method in generated
code. That method will be code when each rule is to be matched. 




-----Original Message-----
From: vivek bhaskar [mailto:vivek_bhaskar@hotmail.com] 
Sent: Monday, April 28, 2003 12:02 AM
To: antlr-interest@yahoogroups.com

Hi,
I am new to antlr world, and so am in learning phase only.

It is predictive parsing and so it must work, based on a parse-table, but 
its not clear from generated code, which is as "Hand written code". So any 
one of you, who have seen antlr code, will please tell that how antlr work? 
Or how it generate code without using parse-table and different states?

vivek



_________________________________________________________________
Hot picks. Free downloads. http://www.msn.co.in/musicnew/musicshop Visit 
music shop


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Mon Apr 28 01:20:49 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Re: where do I get the source for antlr
In-Reply-To: <b8ckab+nvp7@eGroups.com>
Message-ID: <b8io91+d0u0@eGroups.com>

--- In antlr-interest@yahoogroups.com, "aaanwar" <aaanwar@y...> wrote:
> 

www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Mon Apr 28 02:56:51 2003
From: oliver at zeigermann.de (djcordhose)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] ANTLR Masquerading as SED
Message-ID: <b8itt3+45eg@eGroups.com>

Hi all,

I may have missed something, but it occurs to me the example 
provided in the ANTLR docs is broken:

class T extends Lexer;
options {
  k=2;
  filter=IGNORE;
  charVocabulary = '\3'..'\177';
}
P  : "<p>" {System.out.print("<P>");};
BR : "<br>" {System.out.print("<BR>");};
protected
IGNORE
  :  ( "\r\n" | '\r' | '\n' )
     {newline(); System.out.println("");}
  |  c:. {System.out.print(c);}
  ;


While this example works with filter=true, i.e. pure filtering, it 
fails in this version when trying to parse "<b>" which will lead to 
a parse error instead of being filtered. Even when you set lookahead 
to k=3 the top level predictive code checks only for the first two 
chars.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From vivek_bhaskar at hotmail.com  Mon Apr 28 03:34:03 2003
From: vivek_bhaskar at hotmail.com (vivek bhaskar)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] C++ code generation
Message-ID: <Law14-F111HZgzDgtZK00023ba0@hotmail.com>

Hi,
I am working on antlr 2.7.1, to generate C++ code. Actually i had started 
with antlr 2.7.2, but even after repeated try, i was not able to produce 
static lib for c++ given in antlr/lib/cpp, due to one consistent error in 
code and thus shifted to 2.7.1.

Here, i tried to generate C++ code, in which i call a function say,
void  myfunction(string &mystruing)
and use a global variable
string myvar;

so i put both in header as
header{
#include ...

void  myfunction(string &mystruing);
string myvar;
}

But to my utter surprise it start throwing error as it doesnt' recognise 
"string" as a type, and so had to shift to char*. Although i am able to get 
correct result yet(i hope i will), but now it successfully compiled.

so, my question is this:
Is any body working on antlr, taking care of C++ features, as the current 
versions, support antlr only for namesake?


Lastly:
when in java parser i did,

left: r=right { use r}..it worked.

But when i tried same in parser, to generate C++, it gave error and
thus i had only choice, to use tree parser. Can anbody illustrate this 
problem?

vivek














_________________________________________________________________
Hot picks. Free downloads. http://www.msn.co.in/musicnew/musicshop Visit 
music shop


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From klaren at cs.utwente.nl  Mon Apr 28 04:17:34 2003
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] C++ code generation
In-Reply-To: <Law14-F111HZgzDgtZK00023ba0@hotmail.com>; from vivek_bhaskar@hotmail.com on Mon, Apr 28, 2003 at 04:04:03PM +0530
References: <Law14-F111HZgzDgtZK00023ba0@hotmail.com>
Message-ID: <20030428131734.B5675@cs.utwente.nl>

Hi,

On Mon, Apr 28, 2003 at 04:04:03PM +0530, vivek bhaskar wrote:
> I am working on antlr 2.7.1, to generate C++ code. Actually i had started 
> with antlr 2.7.2, but even after repeated try, i was not able to produce 
> static lib for c++ given in antlr/lib/cpp, due to one consistent error in 
> code and thus shifted to 2.7.1.

2.7.1 is buggy YMMV. Check the archives for fixes for MSVC that were posted
after 2.7.2 release. When I get some time I plan to release or a devel
snapshot or see if we can get a official release with fixes for MSVC and
other stuff that popped up after 2.7.2 release.

> Here, i tried to generate C++ code, in which i call a function say,
> void  myfunction(string &mystruing)
> and use a global variable
> string myvar;
> 
> so i put both in header as
> header{
> #include ...
> 
> void  myfunction(string &mystruing);
> string myvar;
> }

The header section is not really the place to place a declaration like
that. Check out the docs:

http://www.antlr.org/doc/cpp-runtime.html#_template

Also could be that you omitted a std:: prefix somewhere, depending on your
compiler and it's settings. Also try looking at the generated code and see
if things are in the places where you expect them.

> so, my question is this:
> Is any body working on antlr, taking care of C++ features, as the current 
> versions, support antlr only for namesake?

I take care of C++ stuff mostly. Yet off late I'm having trouble finding
time. Development platform is the Gnu C++ compiler. Compilers I test on
before release are various gcc's and one or two Sun CC version, I don't
have access to more. MSVC I usually receive post mortem fixes for (after
release)

> Lastly:
> when in java parser i did,
> 
> left: r=right { use r}..it worked.
> 
> But when i tried same in parser, to generate C++, it gave error and
> thus i had only choice, to use tree parser. Can anbody illustrate this 
> problem?

If you illustrate what your problem exactly is I might be able to help. It
is really no help to post the working java code and not the non working C++
code. Rest assured that I use this stuff daily and it works.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- j.klaren@utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I think we better split up."
  "Good idea. We can do more damage that way."
  --- Ghostbusters

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From aaanwar at yahoo.com  Mon Apr 28 07:59:45 2003
From: aaanwar at yahoo.com (aaanwar)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Does ANTLR have grammar reflection ?
Message-ID: <b8jfl1+koub@eGroups.com>

Greetings,

This is a continuation for my queries into using ANTLY for code 
genration.

Can I reason about the grammar ANTLR has read in ... much like 
reflection allows me to resaon or inspect methods, classes etc ?

Would such a functionality be useful ?

Would such a functionaly be useful as part of a language runtime. 
e.g. Would you want there to be a standard api in java that allows 
the runtime code to inspect itself at the syntactic level ... for 
loops etc. ?

Arman.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Apr 28 08:10:39 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] Doubt about Predictive Parsing...Entry level
	 question
Message-ID: <170826586F3BD511910D0200C110AAA805402324@memail03.bco-home.com>

It's not based on tables, it's an LL(k) based parser.  I recommend reading
Ter's excellent lecture notes for his class on antlr.  They're available at
http://www.cs.usfca.edu/~parrt/course/652/index.html

Monty

-----Original Message-----
From: vivek bhaskar [mailto:vivek_bhaskar@hotmail.com]
Sent: Sunday, April 27, 2003 10:02 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Doubt about Predictive Parsing...Entry level
question


Hi,
I am new to antlr world, and so am in learning phase only.

It is predictive parsing and so it must work, based on a parse-table, but 
its not clear from generated code, which is as "Hand written code". So any 
one of you, who have seen antlr code, will please tell that how antlr work? 
Or how it generate code without using parse-table and different states?

vivek



_________________________________________________________________
Hot picks. Free downloads. http://www.msn.co.in/musicnew/musicshop Visit 
music shop


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From key at prontomail.com  Mon Apr 28 08:57:21 2003
From: key at prontomail.com (a_j_key)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] syntactic predicates
Message-ID: <b8jj11+ji2a@eGroups.com>

Hi all,

I'm stuck with the following: I need to match the rule:
int a, b, c; 
like follows: if variable is followed by COMMA than create a varNode,
otherwise create varDecl. I got the following

varDecl 
  : (varDecl COMMA)=>
      (varDecl)*
  | varDecl
  ;

I don't know what I'm doing wrong. Could anyone give me a hint?

Many thanks in advance,

a.j.key
   


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Mon Apr 28 08:58:02 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:33 2004
Subject: [antlr-interest] ANTLR Masquerading as SED
In-Reply-To: <b8itt3+45eg@eGroups.com>
Message-ID: <30C33D62-7992-11D7-BA37-000393BB647E@jguru.com>


On Monday, April 28, 2003, at 02:56  AM, djcordhose wrote:

> Hi all,
>
> I may have missed something, but it occurs to me the example
> provided in the ANTLR docs is broken:

I'm pretty sure it's ok.  Note that when it fails to find something 
that matches, it REWINDS the input and jumps to the filter rule, 
IGNORE. :)

Should work for anything k>=2 :)

Ter

>
> class T extends Lexer;
> options {
>   k=2;
>   filter=IGNORE;
>   charVocabulary = '\3'..'\177';
> }
> P  : "<p>" {System.out.print("<P>");};
> BR : "<br>" {System.out.print("<BR>");};
> protected
> IGNORE
>   :  ( "\r\n" | '\r' | '\n' )
>      {newline(); System.out.println("");}
>   |  c:. {System.out.print(c);}
>   ;
>
>
> While this example works with filter=true, i.e. pure filtering, it
> fails in this version when trying to parse "<b>" which will lead to
> a parse error instead of being filtered. Even when you set lookahead
> to k=3 the top level predictive code checks only for the first two
> chars.
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Mon Apr 28 09:19:06 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] syntactic predicates
Message-ID: <170826586F3BD511910D0200C110AAA805402327@memail03.bco-home.com>

First off you aren't matching COMMA, you are just testing for it in your
syntactic predicate.  Second, your rule is referencing itself without
consuming tokens so it's an infinite loop.

Post a rule with the actual message from antlr or more details on what you
want to do and it'll be easier to help you.

Monty

-----Original Message-----
From: a_j_key [mailto:key@prontomail.com]
Sent: Monday, April 28, 2003 8:57 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] syntactic predicates


Hi all,

I'm stuck with the following: I need to match the rule:
int a, b, c; 
like follows: if variable is followed by COMMA than create a varNode,
otherwise create varDecl. I got the following

varDecl 
  : (varDecl COMMA)=>
      (varDecl)*
  | varDecl
  ;

I don't know what I'm doing wrong. Could anyone give me a hint?

Many thanks in advance,

a.j.key
   


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Mon Apr 28 10:02:04 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Does ANTLR have grammar reflection ?
In-Reply-To: <b8jfl1+koub@eGroups.com>
Message-ID: <23245264-799B-11D7-BA37-000393BB647E@jguru.com>


On Monday, April 28, 2003, at 07:59  AM, aaanwar wrote:

> Greetings,
>
> This is a continuation for my queries into using ANTLY for code
> genration.
>
> Can I reason about the grammar ANTLR has read in ... much like
> reflection allows me to resaon or inspect methods, classes etc ?

No currently :(

> Would such a functionality be useful ?

Eventually we'll have an interpreted version where that info will be 
available...it would be useful for generating good error messages that 
indicate the set of tokens that would be allowed etc...

Ter

--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Mon Apr 28 10:17:54 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] JavaTreeParser? What does it do?
Message-ID: <b8jno2+eph8@eGroups.com>

Hi,
I'm a brand new ANTLR user. I'm using the AST tree it produces to 
create an interpreter for a small subset of the Java programming 
language. I was looking at the Main.java file in the grammar examples 
directory, and one of the last lines says:
'
		JavaTreeParser tparse = new JavaTreeParser();
		try
			{
			tparse.compilationUnit(t);
			System.err.println("successful walk of result 
AST for "+f);
		}
		catch (RecognitionException e) {
			System.err.println(e.getMessage());
			e.printStackTrace();
		}
' Could anyone tell me what this block does in the program, what is  
a JavaTreeParser?
Thanks,
Jon


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Mon Apr 28 12:55:40 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Fighting nondeterminism
Message-ID: <b8k0vs+neh2@eGroups.com>

Hi,

The following is somewhat simplified version of java.g

I think that there is a conflict between additiveExpression and
unaryExpression, i.e. if I remove PLUS and MINUS from unaryExpression
it will work but that's not exactly what i want.

Any ideas on how it could be fixed the "right" way? Thanks

---------------------------------------------------------
...
// binary addition/subtraction (level 3)
// the following line is line # [258], see errors below
additiveExpression
: multiplicativeExpression ((PLUS^ | MINUS^) multiplicativeExpression)*
	;

// multiplication/division/modulo (level 2)
multiplicativeExpression
        : unaryExpression ((STAR^ | DIV^ | MOD^ ) unaryExpression)*
	;

unaryExpression
	: MINUS^ {#MINUS.setType(UNARY_MINUS);} unaryExpression
	| PLUS^  {#PLUS.setType(UNARY_PLUS);} unaryExpression
	| unaryExpressionNotPlusMinus
	;

unaryExpressionNotPlusMinus
	: LNOT^ unaryExpression
	| primaryExpression
	;
...
ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
com/test/test.g [258] warning:nondeterminism upon
com/test/test.g [258] k==1:MINUS,PLUS
com/test/test.g [258]
k==2:BOOLEAN,NULL,LNOT,MINUS,NUM_INT,PLUS,STRING_LITERAL,NUM_FLOAT
com/test/test.g [258] between alt 1 and exit branch of block



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Mon Apr 28 13:01:32 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] JavaTreeParser? What does it do?
In-Reply-To: <b8jno2+eph8@eGroups.com>
Message-ID: <351CE08E-79B4-11D7-BA37-000393BB647E@jguru.com>

Hi.  Have you checked the faq entry that answers your question?

http://www.jguru.com/faq/view.jsp?EID=818959

It's called: What is a tree parser and why would I want to use one?

<snicker>

Terence

On Monday, April 28, 2003, at 10:17  AM, jw9315 wrote:

> Hi,
> I'm a brand new ANTLR user. I'm using the AST tree it produces to
> create an interpreter for a small subset of the Java programming
> language. I was looking at the Main.java file in the grammar examples
> directory, and one of the last lines says:
> '
> 		JavaTreeParser tparse = new JavaTreeParser();
> 		try
> 			{
> 			tparse.compilationUnit(t);
> 			System.err.println("successful walk of result
> AST for "+f);
> 		}
> 		catch (RecognitionException e) {
> 			System.err.println(e.getMessage());
> 			e.printStackTrace();
> 		}
> ' Could anyone tell me what this block does in the program, what is
> a JavaTreeParser?
> Thanks,
> Jon
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Mon Apr 28 13:02:52 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] new lecture posted on polynomial differentiation using tree rewrites
Message-ID: <64A75B85-79B4-11D7-BA37-000393BB647E@jguru.com>

Folks,

Just finished translating the polynomial differentiator from the PCCTS 
book to ANTLR:

http://www.cs.usfca.edu/~parrt/course/652/lectures/differentiate.html

A good example of tree transformation if you need one.  Lecture audio 
to appear after I generate the appropriate sound waves tonight.

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From e_p_olson at yahoo.com  Mon Apr 28 14:17:02 2003
From: e_p_olson at yahoo.com (e_p_olson)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] undeserved nondeterminism warning
Message-ID: <b8k5oe+f76h@eGroups.com>

I'm getting a "nondeterminism warning" that I don't beleve my grammar
should have. (I could be wrong, I'm good at being wrong -- but nobody
I've asked seems to be able to figure it out) I know how to change the
grammar to fix the warning, but I still want to know where it came
from.  Here is a small test case (full grammar is verilog 2001) 

class TestLexer extends Lexer;

WS_	:  (' ' | '\t' | '\n' | '\r')
		{ _ttype = ANTLR_USE_NAMESPACE(antlr)Token::SKIP; } ;
LPAREN:	'(' ;
RPAREN:	')' ;
SEMI:	';' ;
IDENTIFIER
	:  ('A'..'Z'|'a'..'z'|'_')*
	;


class TestParser extends Parser;
  options {
    k=5;  // only really needs k==2
}

//////////////////////////////////////////

function_declaration 
     : "FUNCTION" IDENTIFIER
       ( function_port_list SEMI
       | SEMI ( function_port_declaration SEMI )+
       )
       function_statement "ENDFUNCTION"
     ;

function_port_list 
     : LPAREN 
       function_port_declaration ( COMMA function_port_declaration )* 
// 'macro' expanding the above rule fixed the warning:
//     "INPUT" IDENTIFIER ( COMMA IDENTIFIER )*
//     ( COMMA "INPUT" IDENTIFIER ( COMMA IDENTIFIER )*  )* 
       RPAREN
     ;

function_port_declaration  
     : "INPUT" IDENTIFIER ( COMMA IDENTIFIER )*   // line 42
     ;

function_statement
     : IDENTIFIER SEMI
     ;

/* ANTLR Parser Generator   Version 2.7.2   1989-2003 jGuru.com
   test.g:42: warning: nondeterminism upon
   test.g:42:      k==1:COMMA
   test.g:42:      k==2:IDENTIFIER
   test.g:42:      k==3:SEMI
   test.g:42:      k==4:SEMI
   test.g:42:      k==5:SEMI,IDENTIFIER
   test.g:42:      between alt 1 and exit branch of block

   k==2 should be: IDENTIFIER,"INPUT"
   There should be no nondeterminism bewteen alt 1 and exit:
      k==1 COMMA, k==2 IDENTIFIER  => take alt 1
      k==1 COMMA, k==2 "INPUT" => take exit 
   
*/  
Thanks


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Mon Apr 28 15:39:26 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: dfa-based lexers versus top-down antlr lexers
In-Reply-To: <66544CD5-775B-11D7-BA37-000393BB647E@jguru.com>
Message-ID: <b8kaiu+j466@eGroups.com>

I see what you mean. Lately a friend of mine asked me how ANTLR 
decides which token rule to use for a production. This made me talk 
for half an hour but I could not really get it explained. He was 
thinking of something like "the most specific rule will be the one 
to match" and I was trying to say "no, it is all very 
deterministic". Anyway, "most specific" is similar to what you made 
up using left factoring or how you called it "combine left 
edges". "Most specific" seems to be the most natural way to 
interpret token definitions. One thing to notice there is

DIGIT1 : '1';

is also more specific than 

INT : ('0'..'9')+ ;

which can not be handeled with left factoring as it seems to me. For 
certain rule based systems it is instead very possible to make this 
distinction. How do they do this?!

Oliver

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
wrote:
> Does anyone have an opinion concerning ANTLR's construction of top-
down 
> lexers versus more traditional dfa-based state machine solutions?
> 
> I just got really irritated this week building the PostScript 
> interpreter due to lexer lookahead issues.
> 
> PROS
> 
> Very readable lexers.  ('0'..'9')+ turns into a while look you can 
> debug/read.
> 
> Very powerful...can literally parse (because you can call other 
rules) 
> in the lexer.
> 
> Consistent with all other antlr-generated recognizers.  Lexers, 
> parsers, tree parsers all use the same analyzer and code generator.
> 
> Can execute an action anywhere during the recognition of a 
token...with 
> DFA based systems you have to wait until you know the complete 
token 
> has been match.
> 
> CONS
> 
> Some lexer rules are a huge pain to specify in ANTLR because of 
the 
> limitations of lookahead.
> 
> Lexer rules really confuse people since there are lots of special 
cases 
> in the lookahead and stuff.
> 
> I wonder if a compromise is possible.  Use a DFA-based decision to 
> determine which rule will match; can do arbitrary lookahead and 
all of 
> that automatically to make a correct decision.  The problem is 
speed: 
> you'd parse twice each token.  Perhaps I can simply combine all 
rules 
> with common left edges automatically to avoid weirdness.  For 
example:
> 
> INT : ('0'..'9')+ ;
> 
> FLOAT : ('0'..'9')+ ('.' ('0'..'9')*)? | '.' ('0'..'9')+ ;
> 
> could be turned into a combine rule by the system:
> 
> INT_FLOAT
> 	:	('0'..'9')+ ('.' ('0'..'9')*)?
> 	|	'.' ('0'..'9')+
> 	;
> 
> or whatever.
> 
> Still, my lookahead computations are really twisted for lexical 
rules 
> when you can see past end of a rule--literally any character can 
follow 
> a token (if you consider erroneous input).
> 
> ANYWAY, who has thoughts on this?  I'd like thoughts also from 
people 
> with *no* experience using DFA-based tools like lex/flex.  Do 
ANTLR 
> lexers seem "natural"?
> 
> Thanks!
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Mon Apr 28 15:21:44 2003
From: oliver at zeigermann.de (djcordhose)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: ANTLR Masquerading as SED
In-Reply-To: <30C33D62-7992-11D7-BA37-000393BB647E@jguru.com>
Message-ID: <b8k9ho+qa8n@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
wrote:
> 
> On Monday, April 28, 2003, at 02:56  AM, djcordhose wrote:
> 
> > Hi all,
> >
> > I may have missed something, but it occurs to me the example
> > provided in the ANTLR docs is broken:
> 
> I'm pretty sure it's ok.  Note that when it fails to find 
something 
> that matches, it REWINDS the input and jumps to the filter rule, 
> IGNORE. :)
> 
> Should work for anything k>=2 :)
> 
> Ter

Well, actually you are right, my example was not well chosen, sorry 
for that. But consider this grammar:

class T extends Lexer;
options {
  k=3;
  charVocabulary = '\3'..'\177';
}
P  : "<p>" {System.out.print("<P>");};
BR : "<br>" {System.out.print("<BR>");};

IGNORE
  :  ( "\r\n" | '\r' | '\n' )
     {newline(); System.out.println("");}
  |  c:. {System.out.print(c);}
  ;


which is very similar except for not using filtering. I was just 
wondering, why lookahead of k=3 does not work here on input "<b>". 
Only the first two characters are checked even though I ordered 
three...
Here is the genereated code fragment:

if ((LA(1)=='<') && (LA(2)=='p')) {
    mP(true);
    theRetToken=_returnToken;
}
else if ((LA(1)=='<') && (LA(2)=='b')) {
    mBR(true);
    theRetToken=_returnToken;
}
else if (((LA(1) >= '\u0003' && LA(1) <= '\u007f')) && (true)) {
    mIGNORE(true);
    theRetToken=_returnToken;
}

Am I still getting things wrong?

Thanks,

Oliver




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Mon Apr 28 16:51:56 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: ANTLR Masquerading as SED
In-Reply-To: <b8k9ho+qa8n@eGroups.com>
Message-ID: <64B1F094-79D4-11D7-BA37-000393BB647E@jguru.com>

The filter option makes ANTLR backtrack upon error and retry input with 
filter rule.  That's the difference. :)  Good question.
Ter

On Monday, April 28, 2003, at 03:21  PM, djcordhose wrote:

> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...>
> wrote:
>>
>> On Monday, April 28, 2003, at 02:56  AM, djcordhose wrote:
>>
>>> Hi all,
>>>
>>> I may have missed something, but it occurs to me the example
>>> provided in the ANTLR docs is broken:
>>
>> I'm pretty sure it's ok.  Note that when it fails to find
> something
>> that matches, it REWINDS the input and jumps to the filter rule,
>> IGNORE. :)
>>
>> Should work for anything k>=2 :)
>>
>> Ter
>
> Well, actually you are right, my example was not well chosen, sorry
> for that. But consider this grammar:
>
> class T extends Lexer;
> options {
>   k=3;
>   charVocabulary = '\3'..'\177';
> }
> P  : "<p>" {System.out.print("<P>");};
> BR : "<br>" {System.out.print("<BR>");};
>
> IGNORE
>   :  ( "\r\n" | '\r' | '\n' )
>      {newline(); System.out.println("");}
>   |  c:. {System.out.print(c);}
>   ;
>
>
> which is very similar except for not using filtering. I was just
> wondering, why lookahead of k=3 does not work here on input "<b>".
> Only the first two characters are checked even though I ordered
> three...
> Here is the genereated code fragment:
>
> if ((LA(1)=='<') && (LA(2)=='p')) {
>     mP(true);
>     theRetToken=_returnToken;
> }
> else if ((LA(1)=='<') && (LA(2)=='b')) {
>     mBR(true);
>     theRetToken=_returnToken;
> }
> else if (((LA(1) >= '\u0003' && LA(1) <= '\u007f')) && (true)) {
>     mIGNORE(true);
>     theRetToken=_returnToken;
> }
>
> Am I still getting things wrong?
>
> Thanks,
>
> Oliver
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From bhagenbuch at didera.com  Mon Apr 28 16:53:31 2003
From: bhagenbuch at didera.com (Brian Hagenbuch)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] NON-reserved Words
Message-ID: <b8ketr+hg0c@eGroups.com>

I'm trying to parse a a dialect of SQL in which there are both
reserved and "non-reserved" words.  A non-reserved word is one
that can be an identifier or a syntactic marker depending on the
context.  For example CASE can be a variable, as in

  ... WHERE CASE=12 AND...

or it can begin an expression, as in

  SELECT CASE WHEN AGE<20 THEN 'kid' ELSE 'geezer' END, ...

The language has about 100 such non-reserved words and about 100
reserved words.

The approach suggested by the FAQ and the Yahoo Group seems to
something like

- Have the lexer treat non-reserved words (like CASE) as ordinary
  identifiers, i.e., don't represent them in the literals table.

- Use semantic predicates in the parser to distinguish the cases.

I started down this road, but found it to be complicated to
implement and hard/impossible to remove non-determinism.  So I'm 
considering a different approach:

- Have the lexer treat non-reserved words as keywords and collect
  them under a parser rule such as maybeIdentifier.

- In the parser, include maybeIdentifer in the rule for variable.

- Use syntactic predicates to distinguish the cases.

So far this seems to be easier, but I'm inexperienced with Antlr
and parsing in general and I'm concerned that there's some GOTCHA
lurking in there somewhere.

Ideas?  Experiences?  Thank you.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Mon Apr 28 17:48:35 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: JavaTreeParser? What does it do?
In-Reply-To: <351CE08E-79B4-11D7-BA37-000393BB647E@jguru.com>
Message-ID: <b8ki53+phbj@eGroups.com>


Hi,
yeah, sorry I did see that linkm but I'm new to this and didn't quite 
understand. What I'm trying to do is build an interpreter for a 
*small* subset of the Java language. I ran the example in the Java 
grammars folder to give me a nice AST tree for any program I type in 
at the command line, and was planning on parsing and interpreting the 
program using the method calls such as .getChild(). 

What I was confused about is the fact that I call such as "AST myAST 
= r.getFirstChild();", but what is the difference between this and 
the line "JavaTreeParser tparse = new JavaTreeParser();". I can't 
understand what you can do differently with the two different 
commands! Sorry if this is a really stupid question but if there's a 
short answer that anyone's willing to give I would be glad to hear it.
Thanks,
Jon

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
wrote:
> Hi.  Have you checked the faq entry that answers your question?
> 
> http://www.jguru.com/faq/view.jsp?EID=818959
> 
> It's called: What is a tree parser and why would I want to use one?
> 
> <snicker>
> 
> Terence
> 
> On Monday, April 28, 2003, at 10:17  AM, jw9315 wrote:
> 
> > Hi,
> > I'm a brand new ANTLR user. I'm using the AST tree it produces to
> > create an interpreter for a small subset of the Java programming
> > language. I was looking at the Main.java file in the grammar 
examples
> > directory, and one of the last lines says:
> > '
> > 		JavaTreeParser tparse = new JavaTreeParser();
> > 		try
> > 			{
> > 			tparse.compilationUnit(t);
> > 			System.err.println("successful walk of result
> > AST for "+f);
> > 		}
> > 		catch (RecognitionException e) {
> > 			System.err.println(e.getMessage());
> > 			e.printStackTrace();
> > 		}
> > ' Could anyone tell me what this block does in the program, what 
is
> > a JavaTreeParser?
> > Thanks,
> > Jon
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From greenj at ix.netcom.com  Mon Apr 28 20:14:29 2003
From: greenj at ix.netcom.com (John Allen Green)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] NON-reserved Words
In-Reply-To: <b8ketr+hg0c@eGroups.com>
References: <b8ketr+hg0c@eGroups.com>
Message-ID: <622607932.1051560869@localhost>


--On 4/28/2003 11:53 PM +0000 Brian Hagenbuch wrote:

> I started down this road, but found it to be complicated to
> implement and hard/impossible to remove non-determinism.  So I'm 
> considering a different approach:
> 
> - Have the lexer treat non-reserved words as keywords and collect
>   them under a parser rule such as maybeIdentifier.
> 
> - In the parser, include maybeIdentifer in the rule for variable.
> 
> - Use syntactic predicates to distinguish the cases.


That's basically how I do it. I have an "identifier" rule in the parser,
which could be any ID token or unreserved keyword. (I have one rule with a
huge list of unreserved keywords.)  For the most part, a syntactic
predicate is not even needed - most of the time you know based on the
syntax when the next token needs to be an identifier.

I do one more thing too... if I consume an unreserved keyword (say, from
your example, CASE) when I was expecting an identifier, then I change the
node type to ID, to make subsequent tree parsers easier to use.

hth,
John
john at joanju dot com
www.joanju.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Tue Apr 29 00:02:46 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Lookahead and wildcards (was: ANTLR Masquerading as SED)
In-Reply-To: <64B1F094-79D4-11D7-BA37-000393BB647E@jguru.com>
Message-ID: <b8l82m+mvq6@eGroups.com>

OK, maybe I am dump, but I still do not get it. This is the real 
core of my question: 

Why does this grammar


class T extends Lexer;
options {
  k=3;
  charVocabulary = '\3'..'\177';
}
P  : "<p>" ;
BR : "<br>" ;

IGNORE : . ;


result to this generated code


if ((LA(1)=='<') && (LA(2)=='p')) {
    mP(true);
    theRetToken=_returnToken;
}
else if ((LA(1)=='<') && (LA(2)=='b')) {
    mBR(true);
    theRetToken=_returnToken;
}
else if (((LA(1) >= '\u0003' && LA(1) <= '\u007f')) && (true)) {
    mIGNORE(true);
    theRetToken=_returnToken;
}


I would have expected this code (because of k=3)


if ((LA(1)=='<') && (LA(2)=='p') && (LA(3)=='>')) {
    mP(true);
    theRetToken=_returnToken;
}
else if ((LA(1)=='<') && (LA(2)=='b') && (LA(3)=='r')) {
    mBR(true);
    theRetToken=_returnToken;
}
else if (((LA(1) >= '\u0003' && LA(1) <= '\u007f')) && (true)) {
    mIGNORE(true);
    theRetToken=_returnToken;
}


Thanks,

Oliver



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From diver7 at mail.ru  Tue Apr 29 00:57:09 2003
From: diver7 at mail.ru (dk0879)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] I'm so stupid or there are inaccuracy in java tree parser grammar
Message-ID: <b8lb8l+q2nb@eGroups.com>

Hi, implemented "tiny java" interpreter based on
java grammar from ANTLR, and found out that "FOR_INIT"
statement rule can't process code like this:

   for (int i = 0, j = 0; ... )

because it expect zero or one "variableDef" node:

   stat:
        ...
        |   #(  "for"
                #(FOR_INIT (variableDef | elist)?) // <-- ?
                #(FOR_CONDITION (expression)?)
                #(FOR_ITERATOR (elist)?)
                stat
             )
        | ...

when I modify it:
        
   stat:
        ...
        |   #(  "for"
                #(FOR_INIT ((variableDef)+ | elist)?) // <-- !
                #(FOR_CONDITION (expression)?)
                #(FOR_ITERATOR (elist)?)
                stat
             )
        | ...
        
my parser began to work.
Are the original java grammar is correct?



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Anthony.Youngman at ECA-International.com  Tue Apr 29 01:37:44 2003
From: Anthony.Youngman at ECA-International.com (Anthony W Youngman)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] NON-reserved Words
Message-ID: <C7FE35004D40FD45AA342991B88CE40409A220@lnml1.eca-international.local>

If you want a (complex) example of a grammar that has to handle this
problem, then go to www.maverick-dbms.org and download MaVerick. In
BASIC.g it has to cope with the REM identifier.

Given that there are multiple variants of databasic (which this is an
implementation of) where REM is variously the REMark keyword, not a
keyword at all, or can vary depending on context, I gather Rob had a lot
of fun getting it to work!

And even the commercial compilers don't get it right - when we ported
our code from PI to UV (PI didn't have REMark), the UV compiler got it
right (as a variable) sometimes and wrong (as a keyword) sometimes with
the result that the compile screwed up pretty spectacularly :-)

Cheers,
Wol

-----Original Message-----
From: Brian Hagenbuch [mailto:bhagenbuch@didera.com] 
Sent: 29 April 2003 00:54
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] NON-reserved Words


I'm trying to parse a a dialect of SQL in which there are both
reserved and "non-reserved" words.  A non-reserved word is one
that can be an identifier or a syntactic marker depending on the
context.  For example CASE can be a variable, as in

  ... WHERE CASE=12 AND...

or it can begin an expression, as in

  SELECT CASE WHEN AGE<20 THEN 'kid' ELSE 'geezer' END, ...

The language has about 100 such non-reserved words and about 100
reserved words.

The approach suggested by the FAQ and the Yahoo Group seems to
something like

- Have the lexer treat non-reserved words (like CASE) as ordinary
  identifiers, i.e., don't represent them in the literals table.

- Use semantic predicates in the parser to distinguish the cases.

I started down this road, but found it to be complicated to
implement and hard/impossible to remove non-determinism.  So I'm 
considering a different approach:

- Have the lexer treat non-reserved words as keywords and collect
  them under a parser rule such as maybeIdentifier.

- In the parser, include maybeIdentifer in the rule for variable.

- Use syntactic predicates to distinguish the cases.

So far this seems to be easier, but I'm inexperienced with Antlr
and parsing in general and I'm concerned that there's some GOTCHA
lurking in there somewhere.

Ideas?  Experiences?  Thank you.


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 9911 7799, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.
From key at prontomail.com  Tue Apr 29 02:10:59 2003
From: key at prontomail.com (a_j_key)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] variable definition in java.g
Message-ID: <b8lfj3+onit@eGroups.com>

Hi all,

After reading some posts and thinking about my problem, I could 
change my approach, but I'm still stuck with the following:
variable declaration in Java: e.g. int a, b, c; double d;
What I want to do is to create something like a 'var-node' for the 
first expression, and var-node for the second. I should looks like: 

VAR_NODE
    |
    - VARIABLE_DEF
           |
           ...  a
    |-VARIABLE_DEF
           | 
           .... b
VAR_NODE 
    |
    - VARIABLE_DEF
          |
          .... d

Here is my grammar:

declaration!
    :   m:modifiers t:typeSpec[false] v:variableNode[#m,#t]
        {#declaration = #v;}
    ;

variableDefinitions[AST mods, AST t]
    :   variableNode[getASTFactory().dupTree(mods),
                           getASTFactory().dupTree(t)]
        (   COMMA!
            variableNode[getASTFactory().dupTree(mods),
                               getASTFactory().dupTree(t)]
        )*
    ;
variableNode[AST mods, AST t]
    : vd:variableDeclarator
     #variableNode = #(#["VAR_NODE, "VAR_NODE"], vd);

variableDeclarator![AST mods, AST t]
    :   id:IDENT d:declaratorBrackets[t] v:varInitializer
        {#variableDeclarator = #(#[VARIABLE_DEF,"VARIABLE_DEF"], mods,
                                 #(#[TYPE,"TYPE"],d), id, v);}
    ;

Thanks for your suggestions,

a.j.key


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From key at prontomail.com  Tue Apr 29 04:22:16 2003
From: key at prontomail.com (a_j_key)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: variable definition in java.g
In-Reply-To: <b8lfj3+onit@eGroups.com>
Message-ID: <b8ln98+iglh@eGroups.com>

I cannot believe it... I've just figured it out...

:-)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Tue Apr 29 06:25:37 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] An interpreter for a small subset of the Java language using an ANTLR AST?
Message-ID: <b8lugh+8fm5@eGroups.com>

Hi,
I'm writing a Java interpreter for a small subset of the Java 
language. I'm planning to use the AST tree that is generated by ANTLR 
as a means of extracting the statements from the code. I was 
wondering if anything simiar to this had already been implemented, as 
I do not want to reimplement this if necessary?
Thanks,
Jon


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Tue Apr 29 06:29:39 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] An interpreter for Java using the AST generated by ANTLR
Message-ID: <b8luo3+o9gh@eGroups.com>

-An interpreter for Java using the AST generated by ANTLR-

Hi,
I'm implementing a simple interpreter for a subset of the Java 
language, using the AST intermediate representation generated by 
ANTLR. I was wondering if anything similar to this had already been 
implemented, as I do not want to reimplement something that has 
already been done?
Thanks
Jon


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Tue Apr 29 06:26:15 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Lookahead and wildcards (was: ANTLR Masquerading as SED)
In-Reply-To: <b8l82m+mvq6@eGroups.com>
Message-ID: <20030429132615.71470.qmail@web20420.mail.yahoo.com>

Could it be because three lookahead characters were
not needed to make the determination?

-Matt

--- Oliver Zeigermann <oliver@zeigermann.de> wrote:
> OK, maybe I am dump, but I still do not get it. This
> is the real 
> core of my question: 
> 
> Why does this grammar
> 
> 
> class T extends Lexer;
> options {
>   k=3;
>   charVocabulary = '\3'..'\177';
> }
> P  : "<p>" ;
> BR : "<br>" ;
> 
> IGNORE : . ;
> 
> 
> result to this generated code
> 
> 
> if ((LA(1)=='<') && (LA(2)=='p')) {
>     mP(true);
>     theRetToken=_returnToken;
> }
> else if ((LA(1)=='<') && (LA(2)=='b')) {
>     mBR(true);
>     theRetToken=_returnToken;
> }
> else if (((LA(1) >= '\u0003' && LA(1) <= '\u007f'))
> && (true)) {
>     mIGNORE(true);
>     theRetToken=_returnToken;
> }
> 
> 
> I would have expected this code (because of k=3)
> 
> 
> if ((LA(1)=='<') && (LA(2)=='p') && (LA(3)=='>')) {
>     mP(true);
>     theRetToken=_returnToken;
> }
> else if ((LA(1)=='<') && (LA(2)=='b') &&
> (LA(3)=='r')) {
>     mBR(true);
>     theRetToken=_returnToken;
> }
> else if (((LA(1) >= '\u0003' && LA(1) <= '\u007f'))
> && (true)) {
>     mIGNORE(true);
>     theRetToken=_returnToken;
> }
> 
> 
> Thanks,
> 
> Oliver
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From pete.forman at westerngeco.com  Tue Apr 29 07:15:05 2003
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] An interpreter for a small subset of the  Java
 language using an ANTLR AST?
In-Reply-To: <b8lugh+8fm5@eGroups.com>
Message-ID: <5.1.1.1.2.20030429151205.0206c1e0@wgmail2.gatwick.eur.slb.com>

At 2003-04-29 13:25 +0000, jw9315 wrote:
>I do not want to reimplement this if necessary?

Jython provides an interpreter for Java (and much more :-).

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From amejdi at ertonline.gr  Tue Apr 29 06:59:21 2003
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] An interpreter for a small subset of the Java
 language using an ANTLR AST?
References: <b8lugh+8fm5@eGroups.com>
Message-ID: <3EAE8539.5020502@ertonline.gr>

BeanShell does the job (http://www.beanshell.org).


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrew at adersoftware.com  Tue Apr 29 07:16:48 2003
From: andrew at adersoftware.com (Andrew Deren)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] An interpreter for a small subset of the Java language using an ANTLR AST?
In-Reply-To: <b8lugh+8fm5@eGroups.com>
Message-ID: <20030429093372.SM01108@andrew>

Checkout http://www.beanshell.org/ it's a scripting language for java. It
supports all java syntax and is interpreted. It uses reflection for all
method calls. It does not use antlr, but it's open source and you can
probably take out executing engine and use antlr as a parser.
Andrew

-----Original Message-----
From: jw9315 [mailto:jw9315@bris.ac.uk] 
Sent: Tuesday, April 29, 2003 8:26 AM
To: antlr-interest@yahoogroups.com

Hi,
I'm writing a Java interpreter for a small subset of the Java 
language. I'm planning to use the AST tree that is generated by ANTLR 
as a means of extracting the statements from the code. I was 
wondering if anything simiar to this had already been implemented, as 
I do not want to reimplement this if necessary?
Thanks,
Jon


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Tue Apr 29 07:57:19 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Lookahead and wildcards (was: ANTLR Masquerading as SED)
In-Reply-To: <b8l82m+mvq6@eGroups.com>
Message-ID: <E033B88A-7A52-11D7-BA37-000393BB647E@jguru.com>

Hi.  k is a "do not exceed" value not a fixed value.  I must modulate k 
in the grammar to make it smaller and faster.  k=1 is sufficient for 
just about every decision, with k>1 needed in a few places.  Examine 
the output of the java.g file and you'll see me modulate k.

I know that k=2 is sufficient to distinguish those two rules from each 
other so I only use two :)

Ter

On Tuesday, April 29, 2003, at 12:02  AM, Oliver Zeigermann wrote:

> OK, maybe I am dump, but I still do not get it. This is the real
> core of my question:
>
> Why does this grammar
>
>
> class T extends Lexer;
> options {
>   k=3;
>   charVocabulary = '\3'..'\177';
> }
> P  : "<p>" ;
> BR : "<br>" ;
>
> IGNORE : . ;
>
>
> result to this generated code
>
>
> if ((LA(1)=='<') && (LA(2)=='p')) {
>     mP(true);
>     theRetToken=_returnToken;
> }
> else if ((LA(1)=='<') && (LA(2)=='b')) {
>     mBR(true);
>     theRetToken=_returnToken;
> }
> else if (((LA(1) >= '\u0003' && LA(1) <= '\u007f')) && (true)) {
>     mIGNORE(true);
>     theRetToken=_returnToken;
> }
>
>
> I would have expected this code (because of k=3)
>
>
> if ((LA(1)=='<') && (LA(2)=='p') && (LA(3)=='>')) {
>     mP(true);
>     theRetToken=_returnToken;
> }
> else if ((LA(1)=='<') && (LA(2)=='b') && (LA(3)=='r')) {
>     mBR(true);
>     theRetToken=_returnToken;
> }
> else if (((LA(1) >= '\u0003' && LA(1) <= '\u007f')) && (true)) {
>     mIGNORE(true);
>     theRetToken=_returnToken;
> }
>
>
> Thanks,
>
> Oliver
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Tue Apr 29 08:13:02 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: Lookahead and wildcards (was: ANTLR Masquerading as SED)
In-Reply-To: <E033B88A-7A52-11D7-BA37-000393BB647E@jguru.com>
Message-ID: <b8m4pu+ko9c@eGroups.com>

OK, so I got that wrong... Just wondering, has it always been like 
this or has it changed in the evolution of ANTLR?

Thanks anyway for taking the time to explain. I know this way of 
asking makes me look dump, but is the best way to learn.

Oliver

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
wrote:
> Hi.  k is a "do not exceed" value not a fixed value.  I must 
modulate k 
> in the grammar to make it smaller and faster.  k=1 is sufficient 
for 
> just about every decision, with k>1 needed in a few places.  
Examine 
> the output of the java.g file and you'll see me modulate k.
> 
> I know that k=2 is sufficient to distinguish those two rules from 
each 
> other so I only use two :)
> 
> Ter



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Apr 29 08:19:50 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] An interpreter for Java using the AST genera
	ted by ANTLR
Message-ID: <170826586F3BD511910D0200C110AAA805402334@memail03.bco-home.com>

I believe the tinybasic example in the distribution has an example of
interpreting ASTs.

Monty

-----Original Message-----
From: jw9315 [mailto:jw9315@bris.ac.uk]
Sent: Tuesday, April 29, 2003 6:30 AM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] An interpreter for Java using the AST
generated by ANTLR


-An interpreter for Java using the AST generated by ANTLR-

Hi,
I'm implementing a simple interpreter for a subset of the Java 
language, using the AST intermediate representation generated by 
ANTLR. I was wondering if anything similar to this had already been 
implemented, as I do not want to reimplement something that has 
already been done?
Thanks
Jon


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Trey.Spiva at embarcadero.com  Tue Apr 29 08:23:59 2003
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] An interpreter for Java using the AST generated by ANTLR
Message-ID: <5DEEF5A894731F4B92D58E2FC37EB28A22D327@etdema1.embarcadero.com>

Have you checked out BeanShell?

www.beanshell.org

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com]
> Sent: Tuesday, April 29, 2003 9:20 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] An interpreter for Java using the AST
> generated by ANTLR
> 
> I believe the tinybasic example in the distribution has an example of
> interpreting ASTs.
> 
> Monty
> 
> -----Original Message-----
> From: jw9315 [mailto:jw9315@bris.ac.uk]
> Sent: Tuesday, April 29, 2003 6:30 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] An interpreter for Java using the AST
> generated by ANTLR
> 
> 
> -An interpreter for Java using the AST generated by ANTLR-
> 
> Hi,
> I'm implementing a simple interpreter for a subset of the Java
> language, using the AST intermediate representation generated by
> ANTLR. I was wondering if anything similar to this had already been
> implemented, as I do not want to reimplement something that has
> already been done?
> Thanks
> Jon
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Tue Apr 29 07:58:52 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: JavaTreeParser? What does it do?
In-Reply-To: <b8ki53+phbj@eGroups.com>
Message-ID: <1756AAE8-7A53-11D7-BA37-000393BB647E@jguru.com>


On Monday, April 28, 2003, at 05:48  PM, jw9315 wrote:
> What I was confused about is the fact that I call such as "AST myAST
> = r.getFirstChild();", but what is the difference between this and
> the line "JavaTreeParser tparse = new JavaTreeParser();".

Well, one asks some tree r for it's first child.  The second creates a 
tree parser.  Surely you're asking something else.

>  I can't
> understand what you can do differently with the two different
> commands! Sorry if this is a really stupid question but if there's a
> short answer that anyone's willing to give I would be glad to hear it.

I'm sorry...don't understand what you're confused about.

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Tue Apr 29 08:08:34 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] NON-reserved Words
Message-ID: <170826586F3BD511910D0200C110AAA805402331@memail03.bco-home.com>

I used your second approach with my AREV parser and it worked ok, but it
still introduces ambiguities you have to deal with.  Then I started playing
around with the open source PICK basic parser and decided to implement a
filter between the lexer and parser.  See
http://www.codetransform.com/filterexample.html

The nice thing about a filter is that it can substantially reduce ambiguity
in the parser.  So, for instance, if CASE as a keyword is always followed by
WHEN then a simple filter could turn CASE back into an ID if it is not
followed by WHEN.

Monty

-----Original Message-----
From: Brian Hagenbuch [mailto:bhagenbuch@didera.com]
Sent: Monday, April 28, 2003 4:54 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] NON-reserved Words


I'm trying to parse a a dialect of SQL in which there are both
reserved and "non-reserved" words.  A non-reserved word is one
that can be an identifier or a syntactic marker depending on the
context.  For example CASE can be a variable, as in

  ... WHERE CASE=12 AND...

or it can begin an expression, as in

  SELECT CASE WHEN AGE<20 THEN 'kid' ELSE 'geezer' END, ...

The language has about 100 such non-reserved words and about 100
reserved words.

The approach suggested by the FAQ and the Yahoo Group seems to
something like

- Have the lexer treat non-reserved words (like CASE) as ordinary
  identifiers, i.e., don't represent them in the literals table.

- Use semantic predicates in the parser to distinguish the cases.

I started down this road, but found it to be complicated to
implement and hard/impossible to remove non-determinism.  So I'm 
considering a different approach:

- Have the lexer treat non-reserved words as keywords and collect
  them under a parser rule such as maybeIdentifier.

- In the parser, include maybeIdentifer in the rule for variable.

- Use syntactic predicates to distinguish the cases.

So far this seems to be easier, but I'm inexperienced with Antlr
and parsing in general and I'm concerned that there's some GOTCHA
lurking in there somewhere.

Ideas?  Experiences?  Thank you.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Tue Apr 29 07:53:34 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] I'm so stupid or there are inaccuracy in java tree parser grammar
In-Reply-To: <b8lb8l+q2nb@eGroups.com>
Message-ID: <59E64D5C-7A52-11D7-BA37-000393BB647E@jguru.com>

Ah.  You are correct.  Changing my version in the main line.  Sorry 
about that.

Terence

On Tuesday, April 29, 2003, at 12:57  AM, dk0879 wrote:

> Hi, implemented "tiny java" interpreter based on
> java grammar from ANTLR, and found out that "FOR_INIT"
> statement rule can't process code like this:
>
>    for (int i = 0, j = 0; ... )
>
> because it expect zero or one "variableDef" node:
>
>    stat:
>         ...
>         |   #(  "for"
>                 #(FOR_INIT (variableDef | elist)?) // <-- ?
>                 #(FOR_CONDITION (expression)?)
>                 #(FOR_ITERATOR (elist)?)
>                 stat
>              )
>         | ...
>
> when I modify it:
>
>    stat:
>         ...
>         |   #(  "for"
>                 #(FOR_INIT ((variableDef)+ | elist)?) // <-- !
>                 #(FOR_CONDITION (expression)?)
>                 #(FOR_ITERATOR (elist)?)
>                 stat
>              )
>         | ...
>
> my parser began to work.
> Are the original java grammar is correct?
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Tue Apr 29 08:28:51 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: Lookahead and wildcards (was: ANTLR Masquerading as SED)
In-Reply-To: <b8m4pu+ko9c@eGroups.com>
Message-ID: <47EFA746-7A57-11D7-BA37-000393BB647E@jguru.com>


On Tuesday, April 29, 2003, at 08:13  AM, Oliver Zeigermann wrote:

> OK, so I got that wrong... Just wondering, has it always been like
> this or has it changed in the evolution of ANTLR?

Always has been this way.   Only way to reduce the complexity :)

> Thanks anyway for taking the time to explain. I know this way of
> asking makes me look dump, but is the best way to learn.

No problem at all.  Lots of people probably wondering the same thing!

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From jw9315 at bris.ac.uk  Tue Apr 29 09:28:00 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Reasons ANTLR is better than JavaCC
Message-ID: <b8m96g+7e04@eGroups.com>

Hi,
I'm using the AST's generated from ANTLR for one of my projects, 
since this is the package I found first. It has come to my attention 
that I would could have used JavaCC, could anyone tell me the 
advantages of ANTLR over JavaCC?
Thanks,
Jon


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Tue Apr 29 09:48:36 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers
In-Reply-To: <09a601c30b96$9fd85260$0200010a@walgelijk>
Message-ID: <6B8CCE2D-7A62-11D7-BA37-000393BB647E@jguru.com>

Hi Ger,

Most excellent thoughts.  I have absorbed this for future reference.   
Concerning the interface between parser / lexer, yes: it's simple:

interface TokenStream {
	public Token nextToken();
}

As long as you can answer nextToken(), you can feed an ANTLR parser :)

As for flexibility, yep.  I like the idea of allowing whatever lexer.   
Also, I like your idea of allowing regexpr and then generating a flex  
(is there a Java version) tool.  Only question is: how do DFA-based  
systems handle unicode well (given DFA size issues)?  They don't as far  
as I can tell.  They resort to NFA-based stuff.

Ter

On Friday, April 25, 2003, at 06:53  PM, Gerrit E.G. 'Insh_Allah'  
Hobbelt wrote:
>> PROS
>>
>> Very readable lexers.  ('0'..'9')+ turns into a while look you can
>> debug/read.
>
> Which is a *very* big pro IMHO.
>
> I've had some serious trouble with flex lexers in the (more distant)  
> past and it
> was just awful hard to track down the problem (one example of this: of  
> course my
> flex lexer spec had a bug in one of its regexes but I didn't know that  
> until I
> ran a compiled binary trough it for a joke. (garbage in; parser crash  
> out. lexer
> barfed on the binary input a few megs down the road and started  
> coughing up some
> very peculiar token sequences. 2 days later. Final diagnosis: two  
> *typos* in the
> flex lexer definition file annulling each other... except when....  
> Bummer.
> Generated code that somehow still resembled my definition file at  
> least a _bit_
> would certainly have helped...)
>
>> CONS
>>
>> Some lexer rules are a huge pain to specify in ANTLR because of the
>> limitations of lookahead.
>
> Can I have a head-numbing example of this? I'm mighty curious.
>
> (Something that's not about 'comment scanning', please? ;-) )
>
>> ANYWAY, who has thoughts on this?  I'd like thoughts also from people
>> with *no* experience using DFA-based tools like lex/flex.  Do ANTLR
>> lexers seem "natural"?
>
> Err, the 'reverse' applies to me: no experience with ANTLR 2.x lexers.  
> So sorry.
> (I'm still a very happy user of PCCTS 1.33 but am looking into 2.x now  
> too.)
>
> FYI, since my discovery of the then-cool 'flex' tool and it's initial  
> couple of
> applications (more and less appropriate ones), I've reverted to  
> hand-coded
> lexers again; these allow me the most flexibility and readability at  
> all times.
> One of the more interesting ones was one where I ran a pascal/c like  
> script
> interpreter inside the yacc-generated code (*no* p-code or anything  
> like that),
> so yacc had to signal my lexer at the proper time to 'jump around' in  
> the input
> stream when loops, subroutine calls or 'subprogram file loads' came  
> up. Granted,
> it was slo-o-o-o-ow but it was fun and proof of concept.
>
> Some time later I ran into PCCTS because the error-handling in yacc  
> sucks
> bigtime (for want of a better description of this, ah, elaborate  
> 'system') and
> LALR(1) doesn't fit my bill either 5 out of 10. DLG was nice, but the  
> first
> thing I checked was the way to link hand-coded scanners to ANTLR 1.x.  
> Worked
> like a charm in 'C' mode.
>
>
>
> Since I fear I'll be using (partially) hand-coded scanners quite  
> often, I'd vote
> for the 'sneak away' approach: dear ANTLR could give us the choice to:
>
> a) generate lexers as they are right now, i.e. top-down and with the  
> pros & cons
> like you specified them. (I read from the other replies ANTLR 2.x  
> allows me to
> 'hand-code parts of the lexer' by adding scanning code in actions. yum  
> yum :-) I
> would love that.)
>
> b) generate some interesting output for use by flex et al (the antlr  
> 1.x + dlg
> mix revisited) -- iff you feel like doing such a thing
>
> Of course this isn't 'clean', it's not hip and it's definitely isn't  
> *the*
> answer, but I like my tools flexible and if I get something which  
> offers me the
> 3 choices 'use me', 'here's something you can feed to my neighbour'  
> and 'roll
> your own, dude' (or at least choices 1 & 3), I'm happy as a pig in  
> s[a-z]+ ;-)
>
> Assumption: ANTLR 2.x comes with a well-defined, *documented*  
> lexer-to-parser
> interface, including those dreaded 'parser to scanner' feedback  
> mechanisms you
> often find around type-versus-variable scanner problems (antlr can  
> resolve these
> in the parser alone, but I'm sure you can think of better examples  
> where parser
> provides the lexer with feedback for mandatory 'improved' subsequent
> token-scanning).
>
>
> <digress mode>
> (Thinking about lexers, top-down & dfa, the evil idea about the  
> possibility to
> make 'self-modifying token streams' in the *parser* keeps cropping up  
> (old idea
> of mine), i.e. have antlr [predicate] actions modify (or even  
> add/remove) tokens
> in the input stream. Too simple example would be to modify some  
> 'identifier'
> token into a 'type definition' token or other token, based on a  
> matched/failed
> predicate (or rule?). You'll surely think of other wicked uses ;-) )
> </digress mode>
>
>
>
> You guessed it: I'm in favor of simple(=human-reviewable) lexers and  
> pushing
> some complexity into the parser, thus complicating the grammar an itsy  
> bitsy
> bit.
> Keep the Antlr scanner as it is. Just offer a properly documented 'way  
> out of
> here', i.e. 'HOWTO-roll-your-own-scanner.txt'.
>
>
> Maybe you can point at something where my 'way of life' isn't very  
> suitable?
> Always glad to learn about the err of my ways. ;-)
>
>
>
>
>
> Best regards,
>
>   Ger Hobbelt
>
>
> ----------------------------------------------------------------------- 
> -----
> http://FlashExperiments.insh-allah.com/            
> http://www.insh-allah.com/
> ----------------------------------------------------------------------- 
> -----
> "Senior Software Engineer." Uh-uh. Yep. One of them buggers who  
> created this
> bloody fine mess. "To boldly crash where no man has made a bug before."
> ----------------------------------------------------------------------- 
> -----
> The daily amount of incoming virusses/trojans/SPAM compels me to  
> enforce the
> rule: attachments have to be in ZIP,RAR,ARJ,JAR,BZ2,GZ,TXT or TAR.GZ  
> format.
>             Graphics accepted in GIF,PNG,JPEG and TIFF formats.
> !!!       >>> ANY OTHER ATTACHMENTS WILL BE SILENTLY DELETED. <<<       
>   !!!
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to  
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Tue Apr 29 09:51:34 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Reasons ANTLR is better than JavaCC
In-Reply-To: <b8m96g+7e04@eGroups.com>
Message-ID: <D6157F99-7A62-11D7-BA37-000393BB647E@jguru.com>

Hi, JavaCC and ANTLR are similar.  The big thing that's easy to point 
at is that ANTLR comes with source code and has no copyright / license 
restrictions of any kind.

Terence

On Tuesday, April 29, 2003, at 09:28  AM, jw9315 wrote:

> Hi,
> I'm using the AST's generated from ANTLR for one of my projects,
> since this is the package I found first. It has come to my attention
> that I would could have used JavaCC, could anyone tell me the
> advantages of ANTLR over JavaCC?
> Thanks,
> Jon
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Tue Apr 29 09:44:07 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: dfa-based lexers versus top-down antlr lexers
In-Reply-To: <b8kaiu+j466@eGroups.com>
Message-ID: <CB95406E-7A61-11D7-BA37-000393BB647E@jguru.com>

I'm thinking that a future version of ANTLR would pretty much support 
whatever "module" you wanted.  Sometimes a DFA-based lexer is easiest 
and sometimes a top-down lexer is better (such as parsing nested syntax 
within HTML tags or whatever).  Naturally you can always hook in your 
own hand-built lexer.

Thanks for the feedback.

On Monday, April 28, 2003, at 03:39  PM, Oliver Zeigermann wrote:

> I see what you mean. Lately a friend of mine asked me how ANTLR
> decides which token rule to use for a production. This made me talk
> for half an hour but I could not really get it explained. He was
> thinking of something like "the most specific rule will be the one
> to match" and I was trying to say "no, it is all very
> deterministic". Anyway, "most specific" is similar to what you made
> up using left factoring or how you called it "combine left
> edges". "Most specific" seems to be the most natural way to
> interpret token definitions. One thing to notice there is
>
> DIGIT1 : '1';
>
> is also more specific than
>
> INT : ('0'..'9')+ ;
>
> which can not be handeled with left factoring as it seems to me. For
> certain rule based systems it is instead very possible to make this
> distinction. How do they do this?!

I believe they use the first found rule.  Most specific has to be first 
if you want things to work right.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From gudnabrsam at yahoo.com  Tue Apr 29 09:54:27 2003
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Reasons ANTLR is better than JavaCC
In-Reply-To: <D6157F99-7A62-11D7-BA37-000393BB647E@jguru.com>
Message-ID: <20030429165427.48083.qmail@web20414.mail.yahoo.com>

Also it has a cooler name.

-Matt

--- Terence Parr <parrt@jguru.com> wrote:
> Hi, JavaCC and ANTLR are similar.  The big thing
> that's easy to point 
> at is that ANTLR comes with source code and has no
> copyright / license 
> restrictions of any kind.
> 
> Terence
> 
> On Tuesday, April 29, 2003, at 09:28  AM, jw9315
> wrote:
> 
> > Hi,
> > I'm using the AST's generated from ANTLR for one
> of my projects,
> > since this is the package I found first. It has
> come to my attention
> > that I would could have used JavaCC, could anyone
> tell me the
> > advantages of ANTLR over JavaCC?
> > Thanks,
> > Jon
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> >
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator:
> http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing,
> pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Tue Apr 29 09:42:05 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers
In-Reply-To: <001801c30b85$e3c68520$0200a8c0@NOTEBOOK>
Message-ID: <82922927-7A61-11D7-BA37-000393BB647E@jguru.com>


On Friday, April 25, 2003, at 04:53  PM, Matthew Ford wrote:
> I am including (again) a revised spec for handling tree generation for 
> your
> consideration.
>
> So I suggest this be relaxed a little to say that
> No tree generation code is output except that labels in the rule are
> initialized with the
> appropiate minimal tree.
> For example
>> drop_table_statement!
>> : "drop" "table" t3:table_name t4:drop_behavior
> ;
> results in #t3 containing tree resulting from the rule table_name
> and
> statement!
> : INT PLUS i:INT
> ;
> would set up a tree for label i consisting of a single root node 
> containing
> the INT
> token

I believe it works this way now.  At least, I'm using this feature for 
my course at the moment. :)


> Section 2: Syntax for manual modification of trees in the Parser

Interesting @ operator.  Loring and I are talking about tree rewriting 
stuff too while I contemplate future directions.  Thanks for the 
thoughts.

Ter

> Elements of the current rule can be addressed using the following
> ## is a short cut for AST_return, the current result tree.
> #id is a short cut for the current tree rooted at the location 
> originally
> occupied by the
> node labelled by id
> @id is a short cut for the root node of the tree rooted at the location
> originally
> occupied by the node labelled by id
> When these occur on the rhs of = they are replaced by clones of their
> respective nodes
> or trees. This prevents deadly loops.  As an optimisation ## =
> #(#[token],##) could be
> done without cloning ##.
> When these occur on the lhs of = they refer to that location in the 
> tree.
> This allows
> subtree replacements.
>
> eg
> statement
> :   lhsVar e:EQUALS^ a:addition
>   {
>       #a = #(@a,#[INT,"5"],#[INT,"6"]);
>      // the children of the addition subtree in the result (##) have 
> been
> replace with 5,6
>     // a: now refers to the new subtree, the original subtree is has 
> been
> replaced by it.
>     @a = #[MINUS]
>     // the root of the new subtree a is now MINUS
>    ## = #(#[STATEMENT],##);
>    // add a node to the top of the result tree.  a: and e: still point 
> to
> the same subtrees.
>   ## = #[DIV];
>   // where do a: and e: point now?  They still point to there subtrees 
> which
> are not
> released until the rule returns.
>  // so the following is valid
>   ## = #(@#,#a,#[INT,"3"],#a);
>    // @# is the root node of ##  which is now just #[DIV]
>    // note it is valid to use #a twice as it is cloned.
> }
> ;
>
>
>
> ----- Original Message -----
> From: "Terence Parr" <parrt@jguru.com>
> To: <antlr-interest@yahoogroups.com>
> Sent: Saturday, April 26, 2003 6:20 AM
> Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers
>
>
>> Does anyone have an opinion concerning ANTLR's construction of 
>> top-down
>> lexers versus more traditional dfa-based state machine solutions?
>>
>> I just got really irritated this week building the PostScript
>> interpreter due to lexer lookahead issues.
>>
>> PROS
>>
>> Very readable lexers.  ('0'..'9')+ turns into a while look you can
>> debug/read.
>>
>> Very powerful...can literally parse (because you can call other rules)
>> in the lexer.
>>
>> Consistent with all other antlr-generated recognizers.  Lexers,
>> parsers, tree parsers all use the same analyzer and code generator.
>>
>> Can execute an action anywhere during the recognition of a 
>> token...with
>> DFA based systems you have to wait until you know the complete token
>> has been match.
>>
>> CONS
>>
>> Some lexer rules are a huge pain to specify in ANTLR because of the
>> limitations of lookahead.
>>
>> Lexer rules really confuse people since there are lots of special 
>> cases
>> in the lookahead and stuff.
>>
>> I wonder if a compromise is possible.  Use a DFA-based decision to
>> determine which rule will match; can do arbitrary lookahead and all of
>> that automatically to make a correct decision.  The problem is speed:
>> you'd parse twice each token.  Perhaps I can simply combine all rules
>> with common left edges automatically to avoid weirdness.  For example:
>>
>> INT : ('0'..'9')+ ;
>>
>> FLOAT : ('0'..'9')+ ('.' ('0'..'9')*)? | '.' ('0'..'9')+ ;
>>
>> could be turned into a combine rule by the system:
>>
>> INT_FLOAT
>> : ('0'..'9')+ ('.' ('0'..'9')*)?
>> | '.' ('0'..'9')+
>> ;
>>
>> or whatever.
>>
>> Still, my lookahead computations are really twisted for lexical rules
>> when you can see past end of a rule--literally any character can 
>> follow
>> a token (if you consider erroneous input).
>>
>> ANYWAY, who has thoughts on this?  I'd like thoughts also from people
>> with *no* experience using DFA-based tools like lex/flex.  Do ANTLR
>> lexers seem "natural"?
>>
>> Thanks!
>> Ter
>> --
>> Co-founder, http://www.jguru.com
>> Creator, ANTLR Parser Generator: http://www.antlr.org
>> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
>> Lecturer in Comp. Sci., University of San Francisco
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to 
>> http://docs.yahoo.com/info/terms/
>>
>>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Tue Apr 29 10:59:40 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: JavaTreeParser? What does it do?
In-Reply-To: <b8ki53+phbj@eGroups.com>
Message-ID: <b8meic+o1ts@eGroups.com>

Tree parsers do the "getFirstChild()" and "getNextSibling()" for 
you as well as matching a tree pattern--the whole idea is to extend 
the ANTLR parsing concept to trees.  About the only case where you 
might want to walk a tree without a tree parser is when the "Visitor" 
pattern is appropriate.

--Loring



--- In antlr-interest@yahoogroups.com, "jw9315" <jw9315@b...> wrote:
> 
> Hi,
> yeah, sorry I did see that linkm but I'm new to this and didn't 
quite 
> understand. What I'm trying to do is build an interpreter for a 
> *small* subset of the Java language. I ran the example in the Java 
> grammars folder to give me a nice AST tree for any program I type in 
> at the command line, and was planning on parsing and interpreting 
the 
> program using the method calls such as .getChild(). 
> 
> What I was confused about is the fact that I call such as "AST myAST 
> = r.getFirstChild();", but what is the difference between this and 
> the line "JavaTreeParser tparse = new JavaTreeParser();". I can't 
> understand what you can do differently with the two different 
> commands! Sorry if this is a really stupid question but if there's a 
> short answer that anyone's willing to give I would be glad to hear 
it.
> Thanks,
> Jon
> 
> --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
> wrote:
> > Hi.  Have you checked the faq entry that answers your question?
> > 
> > http://www.jguru.com/faq/view.jsp?EID=818959
> > 
> > It's called: What is a tree parser and why would I want to use 
one?
> > 
> > <snicker>
> > 
> > Terence
> > 
> > On Monday, April 28, 2003, at 10:17  AM, jw9315 wrote:
> > 
> > > Hi,
> > > I'm a brand new ANTLR user. I'm using the AST tree it produces 
to
> > > create an interpreter for a small subset of the Java programming
> > > language. I was looking at the Main.java file in the grammar 
> examples
> > > directory, and one of the last lines says:
> > > '
> > > 		JavaTreeParser tparse = new JavaTreeParser();
> > > 		try
> > > 			{
> > > 			tparse.compilationUnit(t);
> > > 			System.err.println("successful walk of result
> > > AST for "+f);
> > > 		}
> > > 		catch (RecognitionException e) {
> > > 			System.err.println(e.getMessage());
> > > 			e.printStackTrace();
> > > 		}
> > > ' Could anyone tell me what this block does in the program, what 
> is
> > > a JavaTreeParser?
> > > Thanks,
> > > Jon
> > >
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to 
> > > http://docs.yahoo.com/info/terms/
> > >
> > >
> > >
> > --
> > Co-founder, http://www.jguru.com
> > Creator, ANTLR Parser Generator: http://www.antlr.org
> > Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> > Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From blade_x123 at yahoo.com  Tue Apr 29 11:49:22 2003
From: blade_x123 at yahoo.com (BLade X)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Parsing hexadecimal digits...
Message-ID: <20030429184922.66358.qmail@web40707.mail.yahoo.com>

Hi,
 I have this problem. I am trying to parse a file
where the hexadeciaml digits don't have a 0x prefix.
But they only occur in one place (hopefully, that is
what I am assuming till now and it seems to be valid).
 I am unable to parse them because my lexer thinks
they are normal numbers if they start with a digit,
but it only thinks they are hex if they start with
a,b,c,d,e or f. I have attached my lexer and parser
files below.
 In the parser files the hex digits only occur in
osfUUID. Also if I make a separate field for
hexadecimal literals and remove the parsing of hex
numbers from the normal numeric literals, the programs
crashes saying abnormal program termination with code
03. 
 I am a newbie to this, so most of my lexer file comes
from other lexers that are given as examples with
antlr. So please forgive me if there are any mistakes.

Thanks in advance,
Manju


__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com
 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: dxlexer.g
Type: application/octet-stream
Size: 4741 bytes
Desc: dxlexer.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20030429/41fec9b8/dxlexer.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dxfile.g
Type: application/octet-stream
Size: 4151 bytes
Desc: dxfile.g
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20030429/41fec9b8/dxfile.obj
From jw9315 at bris.ac.uk  Tue Apr 29 13:08:31 2003
From: jw9315 at bris.ac.uk (jw9315)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: JavaTreeParser? What does it do?
In-Reply-To: <b8meic+o1ts@eGroups.com>
Message-ID: <b8mm3v+h3g2@eGroups.com>

Hi,
Thanks, that's cleared things up for me, but I've still got some 
questions if that's ok... 

I have used the example in the Java grammars directory to get the AST 
window up on my screen. All I want to be able to do from here is 
parse this tree and get the statements and constants etc, so I can 
build an interpreter... So do I just declare a treeparser and then 
invoke the "getFirstChildMethods (or whatever method I need to)" on 
the instance? For example:

JavaTreeParser tparse = new JavaTreeParser();
tparse.compilationUnit(t); //(Where t is an AST tree)
and then t.getFirstChild();

The thing is, I don't wish to manipulate the tree at all, I just want 
to read it? Does this mean that I shouldn't have to change the java 
grammars in the directory, its just a case of accessing the AST 
object in memory and extracting information from it.
Thanks,

Jon

--- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> Tree parsers do the "getFirstChild()" and "getNextSibling()" for 
> you as well as matching a tree pattern--the whole idea is to extend 
> the ANTLR parsing concept to trees.  About the only case where you 
> might want to walk a tree without a tree parser is when 
the "Visitor" 
> pattern is appropriate.
> 
> --Loring
> 
> 
> 
> --- In antlr-interest@yahoogroups.com, "jw9315" <jw9315@b...> wrote:
> > 
> > Hi,
> > yeah, sorry I did see that linkm but I'm new to this and didn't 
> quite 
> > understand. What I'm trying to do is build an interpreter for a 
> > *small* subset of the Java language. I ran the example in the 
Java 
> > grammars folder to give me a nice AST tree for any program I type 
in 
> > at the command line, and was planning on parsing and interpreting 
> the 
> > program using the method calls such as .getChild(). 
> > 
> > What I was confused about is the fact that I call such as "AST 
myAST 
> > = r.getFirstChild();", but what is the difference between this 
and 
> > the line "JavaTreeParser tparse = new JavaTreeParser();". I can't 
> > understand what you can do differently with the two different 
> > commands! Sorry if this is a really stupid question but if 
there's a 
> > short answer that anyone's willing to give I would be glad to 
hear 
> it.
> > Thanks,
> > Jon
> > 
> > --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
> > wrote:
> > > Hi.  Have you checked the faq entry that answers your question?
> > > 
> > > http://www.jguru.com/faq/view.jsp?EID=818959
> > > 
> > > It's called: What is a tree parser and why would I want to use 
> one?
> > > 
> > > <snicker>
> > > 
> > > Terence
> > > 
> > > On Monday, April 28, 2003, at 10:17  AM, jw9315 wrote:
> > > 
> > > > Hi,
> > > > I'm a brand new ANTLR user. I'm using the AST tree it 
produces 
> to
> > > > create an interpreter for a small subset of the Java 
programming
> > > > language. I was looking at the Main.java file in the grammar 
> > examples
> > > > directory, and one of the last lines says:
> > > > '
> > > > 		JavaTreeParser tparse = new JavaTreeParser();
> > > > 		try
> > > > 			{
> > > > 			tparse.compilationUnit(t);
> > > > 			System.err.println("successful walk 
of result
> > > > AST for "+f);
> > > > 		}
> > > > 		catch (RecognitionException e) {
> > > > 			System.err.println(e.getMessage());
> > > > 			e.printStackTrace();
> > > > 		}
> > > > ' Could anyone tell me what this block does in the program, 
what 
> > is
> > > > a JavaTreeParser?
> > > > Thanks,
> > > > Jon
> > > >
> > > >
> > > >
> > > >
> > > > Your use of Yahoo! Groups is subject to 
> > > > http://docs.yahoo.com/info/terms/
> > > >
> > > >
> > > >
> > > --
> > > Co-founder, http://www.jguru.com
> > > Creator, ANTLR Parser Generator: http://www.antlr.org
> > > Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> > > Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From Matthew.Ford at forward.com.au  Tue Apr 29 12:51:55 2003
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers
References: <82922927-7A61-11D7-BA37-000393BB647E@jguru.com>
Message-ID: <000c01c30e88$c9b9e450$0200a8c0@NOTEBOOK>

I look forward to your considered revisions, Ter.
The draft spec was ment to describe the whole operation of building trees,
not just changes needed :-)
matthew
----- Original Message -----    part there of....
From: "Terence Parr" <parrt@jguru.com>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, April 30, 2003 2:42 AM
Subject: Re: [antlr-interest] dfa-based lexers versus top-down antlr lexers


>
> On Friday, April 25, 2003, at 04:53  PM, Matthew Ford wrote:
> > I am including (again) a revised spec for handling tree generation for
> > your
> > consideration.
> >
> > So I suggest this be relaxed a little to say that
> > No tree generation code is output except that labels in the rule are
> > initialized with the
> > appropiate minimal tree.
> > For example
> >> drop_table_statement!
> >> : "drop" "table" t3:table_name t4:drop_behavior
> > ;
> > results in #t3 containing tree resulting from the rule table_name
> > and
> > statement!
> > : INT PLUS i:INT
> > ;
> > would set up a tree for label i consisting of a single root node
> > containing
> > the INT
> > token
>
> I believe it works this way now.  At least, I'm using this feature for
> my course at the moment. :)
>
>



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From open.zone at virgin.net  Tue Apr 29 15:01:57 2003
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: JavaTreeParser? What does it do?
In-Reply-To: <b8meic+o1ts@eGroups.com>
Message-ID: <b8msol+j56v@eGroups.com>

> Tree parsers do the "getFirstChild()" and "getNextSibling()" for 
> you as well as matching a tree pattern--the whole idea is to extend 
> the ANTLR parsing concept to trees.  About the only case where you 
> might want to walk a tree without a tree parser is when 
the "Visitor" 
> pattern is appropriate.

Hi Loring,

Do you have any guidelines/advise on choosing between an architecture 
using the Visitor pattern or TreeParsers?

Having made full support of hetero-ASTs a priority in the C# codegen -
 to support the use of Visitors with ANTLR-built trees - we now often 
need to choose between both architectures.

Cheers,

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Tue Apr 29 15:46:08 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: JavaTreeParser? What does it do?
In-Reply-To: <b8mm3v+h3g2@eGroups.com>
Message-ID: <b8mvbg+l49c@eGroups.com>

Jon--

Look at the javatree.g grammar--that's the tree walker grammar that 
defines "JavaTreeParser".  If you have figured out how to get a series 
of trees from the parser (parse a statement, produce a tree ...), then 
it should not be too hard (I haven't tried) to feed your trees to it.

You will want to add actions to the grammar, but that is pretty 
straightforward.

--Loring


--- In antlr-interest@yahoogroups.com, "jw9315" <jw9315@b...> wrote:
> Hi,
> Thanks, that's cleared things up for me, but I've still got some 
> questions if that's ok... 
> 
> I have used the example in the Java grammars directory to get the 
AST 
> window up on my screen. All I want to be able to do from here is 
> parse this tree and get the statements and constants etc, so I can 
> build an interpreter... So do I just declare a treeparser and then 
> invoke the "getFirstChildMethods (or whatever method I need to)" on 
> the instance? For example:
> 
> JavaTreeParser tparse = new JavaTreeParser();
> tparse.compilationUnit(t); //(Where t is an AST tree)
> and then t.getFirstChild();
> 
> The thing is, I don't wish to manipulate the tree at all, I just 
want 
> to read it? Does this mean that I shouldn't have to change the java 
> grammars in the directory, its just a case of accessing the AST 
> object in memory and extracting information from it.
> Thanks,
> 
> Jon
> 
> --- In antlr-interest@yahoogroups.com, "lgcraymer" <lgc@m...> wrote:
> > Tree parsers do the "getFirstChild()" and "getNextSibling()" for 
> > you as well as matching a tree pattern--the whole idea is to 
extend 
> > the ANTLR parsing concept to trees.  About the only case where you 
> > might want to walk a tree without a tree parser is when 
> the "Visitor" 
> > pattern is appropriate.
> > 
> > --Loring
> > 
> > 
> > 
> > --- In antlr-interest@yahoogroups.com, "jw9315" <jw9315@b...> 
wrote:
> > > 
> > > Hi,
> > > yeah, sorry I did see that linkm but I'm new to this and didn't 
> > quite 
> > > understand. What I'm trying to do is build an interpreter for a 
> > > *small* subset of the Java language. I ran the example in the 
> Java 
> > > grammars folder to give me a nice AST tree for any program I 
type 
> in 
> > > at the command line, and was planning on parsing and 
interpreting 
> > the 
> > > program using the method calls such as .getChild(). 
> > > 
> > > What I was confused about is the fact that I call such as "AST 
> myAST 
> > > = r.getFirstChild();", but what is the difference between this 
> and 
> > > the line "JavaTreeParser tparse = new JavaTreeParser();". I 
can't 
> > > understand what you can do differently with the two different 
> > > commands! Sorry if this is a really stupid question but if 
> there's a 
> > > short answer that anyone's willing to give I would be glad to 
> hear 
> > it.
> > > Thanks,
> > > Jon
> > > 
> > > --- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
> > > wrote:
> > > > Hi.  Have you checked the faq entry that answers your 
question?
> > > > 
> > > > http://www.jguru.com/faq/view.jsp?EID=818959
> > > > 
> > > > It's called: What is a tree parser and why would I want to use 
> > one?
> > > > 
> > > > <snicker>
> > > > 
> > > > Terence
> > > > 
> > > > On Monday, April 28, 2003, at 10:17  AM, jw9315 wrote:
> > > > 
> > > > > Hi,
> > > > > I'm a brand new ANTLR user. I'm using the AST tree it 
> produces 
> > to
> > > > > create an interpreter for a small subset of the Java 
> programming
> > > > > language. I was looking at the Main.java file in the grammar 
> > > examples
> > > > > directory, and one of the last lines says:
> > > > > '
> > > > > 		JavaTreeParser tparse = new JavaTreeParser();
> > > > > 		try
> > > > > 			{
> > > > > 			tparse.compilationUnit(t);
> > > > > 			System.err.println("successful walk 
> of result
> > > > > AST for "+f);
> > > > > 		}
> > > > > 		catch (RecognitionException e) {
> > > > > 			System.err.println(e.getMessage());
> > > > > 			e.printStackTrace();
> > > > > 		}
> > > > > ' Could anyone tell me what this block does in the program, 
> what 
> > > is
> > > > > a JavaTreeParser?
> > > > > Thanks,
> > > > > Jon
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > Your use of Yahoo! Groups is subject to 
> > > > > http://docs.yahoo.com/info/terms/
> > > > >
> > > > >
> > > > >
> > > > --
> > > > Co-founder, http://www.jguru.com
> > > > Creator, ANTLR Parser Generator: http://www.antlr.org
> > > > Co-founder, http://www.peerscope.com link sharing, 
pure-n-simple
> > > > Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Tue Apr 29 16:10:23 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: JavaTreeParser? What does it do?
In-Reply-To: <b8msol+j56v@eGroups.com>
Message-ID: <b8n0ov+a8cg@eGroups.com>

Micheal--

The Visitor pattern is good when you do not have context-dependent 
operations on AST nodes.  One example of this is in printing 
trees--all that you need to know is depth (for indenting) and AST node 
properties.  Another is "change all AST nodes of type FOO to type BAR 
in my tree".  I find Visitors convenient for quick-and-dirty tools 
that work on any tree that I can construct.

Tree walkers give you finer control, but require knowledge of tree 
structure and force you into node-by-node processing (if you want do 
do "action()" whenever you encounter a FOO node, then you will have to 
insert " { action(); }" everywhere in your tree grammar that you 
specify FOO).

--Loring


--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...> 
wrote:
> > Tree parsers do the "getFirstChild()" and "getNextSibling()" for 
> > you as well as matching a tree pattern--the whole idea is to 
extend 
> > the ANTLR parsing concept to trees.  About the only case where you 
> > might want to walk a tree without a tree parser is when 
> the "Visitor" 
> > pattern is appropriate.
> 
> Hi Loring,
> 
> Do you have any guidelines/advise on choosing between an 
architecture 
> using the Visitor pattern or TreeParsers?
> 
> Having made full support of hetero-ASTs a priority in the C# codegen 
-
>  to support the use of Visitors with ANTLR-built trees - we now 
often 
> need to choose between both architectures.
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From lgc at mail1.jpl.nasa.gov  Tue Apr 29 17:28:55 2003
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: JavaTreeParser? What does it do?
In-Reply-To: <b8msol+j56v@eGroups.com>
Message-ID: <b8n5c7+qbs1@eGroups.com>

Micheal--

Visitors are useful for generic processing, such as printing out tree 
structure or "change all AST nodes of type FOO to BAR".  They are good 
for "shotgun" processing when you have no a priori knowledge of tree 
structure.

Tree walkers require knowledge of tree structure, but give much finer 
control.  For specific problems, the fine control is much to be 
preferred--even when you start with the thought that "all FOOs are 
alike" you soon find that what you really want is "all FOOs are alike, 
except when they follow BAR".

Now that I have automatic tree grammar generation (coming soon to 
ANTLR 3--I am forbidden from releasing the code into the public 
domain, so I can't release it for ANTLR 2) implemented, I don't have 
much use for Visitors except for tree printing.

--Loring


--- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...> 
wrote:
> > Tree parsers do the "getFirstChild()" and "getNextSibling()" for 
> > you as well as matching a tree pattern--the whole idea is to 
extend 
> > the ANTLR parsing concept to trees.  About the only case where you 
> > might want to walk a tree without a tree parser is when 
> the "Visitor" 
> > pattern is appropriate.
> 
> Hi Loring,
> 
> Do you have any guidelines/advise on choosing between an 
architecture 
> using the Visitor pattern or TreeParsers?
> 
> Having made full support of hetero-ASTs a priority in the C# codegen 
-
>  to support the use of Visitors with ANTLR-built trees - we now 
often 
> need to choose between both architectures.
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From tmoog at polhode.com  Tue Apr 29 20:02:16 2003
From: tmoog at polhode.com (Tom Moog)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers
In-Reply-To: <6B8CCE2D-7A62-11D7-BA37-000393BB647E@jguru.com>
References: <6B8CCE2D-7A62-11D7-BA37-000393BB647E@jguru.com>
Message-ID: <Pine.NEB.4.53.0304292253540.18082@panix5.panix.com>


More than a year ago I used Gerwin Klein's jflex (jflex.de) which is an
open source java dfa lexer which supports 16 bit characters. It is quite
clean.  The input language will make flex users feel at home.  I think it
is quite fast too.  The piccolo xml parser uses it, and piccolo is reputed
to be the fastest open source, java based, non-validating, xml parser.

Tom Moog


On Tue, 29 Apr 2003, Terence Parr wrote:

> (is there a Java version) tool.  Only question is: how do DFA-based
> systems handle unicode well (given DFA size issues)?  They don't as far
> as I can tell.  They resort to NFA-based stuff.
>
> Ter

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From puri_vishalus at yahoo.com  Tue Apr 29 21:23:02 2003
From: puri_vishalus at yahoo.com (puri_vishalus)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] C++ static analyser help
Message-ID: <b8nj36+8l71@eGroups.com>

Hi,
I plan to write a static analyser for C++ which will do all the 
checks that parasoft c++ test does? Well can anyone tell me what all 
problems might arise if i choose ANTLR as my base development tool.
thanks


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Wed Apr 30 02:00:26 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: dfa-based lexers versus top-down antlr lexers
In-Reply-To: <CB95406E-7A61-11D7-BA37-000393BB647E@jguru.com>
Message-ID: <b8o3ba+mrns@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> > 
On Monday, April 28, 2003, at 03:39  PM, Oliver Zeigermann wrote:
> 
> > I see what you mean. Lately a friend of mine asked me how ANTLR
> > decides which token rule to use for a production. This made me 
talk
> > for half an hour but I could not really get it explained. He was
> > thinking of something like "the most specific rule will be the 
one
> > to match" and I was trying to say "no, it is all very
> > deterministic". Anyway, "most specific" is similar to what you 
made
> > up using left factoring or how you called it "combine left
> > edges". "Most specific" seems to be the most natural way to
> > interpret token definitions. One thing to notice there is
> >
> > DIGIT1 : '1';
> >
> > is also more specific than
> >
> > INT : ('0'..'9')+ ;
> >
> > which can not be handeled with left factoring as it seems to me. 
For
> > certain rule based systems it is instead very possible to make 
this
> > distinction. How do they do this?!
> 
> I believe they use the first found rule.  Most specific has to be 
first 
> if you want things to work right.
> 

This holds true for flex and the like, yes. I was thinking of 
something like XSLT. You have a bunch of matching rules there having 
an XPATH expression that specifies the nodes they match. If you have 
two or more rules that match the same node the "most specific" is 
chosen. The ploblem with this approach is XPATH is a bit complicated 
and thus it is not always clear which expression is more specific...

Oliver



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From oliver at zeigermann.de  Wed Apr 30 02:08:08 2003
From: oliver at zeigermann.de (Oliver Zeigermann)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: dfa-based lexers versus top-down antlr lexers
In-Reply-To: <6B8CCE2D-7A62-11D7-BA37-000393BB647E@jguru.com>
Message-ID: <b8o3po+tqku@eGroups.com>

--- In antlr-interest@yahoogroups.com, Terence Parr <parrt@j...> 
wrote:
> Concerning the interface between parser / lexer, yes: it's simple:
> 
> interface TokenStream {
> 	public Token nextToken();
> }
> 
> As long as you can answer nextToken(), you can feed an ANTLR 
parser :)

When I tryed to feed ANTLR parsers from XML sources in my XPA 
project I was absolutely amazed how easy it was: simply implementing 
TokenStream. Works very well!

Oliver


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From ramyasivadas at yahoo.co.in  Wed Apr 30 04:49:45 2003
From: ramyasivadas at yahoo.co.in (ramyasivadas)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Problem with existence of the same literal in two rules
Message-ID: <b8od8p+hbuu@eGroups.com>

Hi,

Let me quote an example to help me explain the problem.

I have a rule as follows
STRING
:('a'..'z' | 'A'..'Z')+ (INT)
;

I also have a rule
WFCS
:'L'|'H'|'Z'|'X'
;

INT
:('0'..'9')+
;

The issue is, if I have a set of literals constituting a rule and if 
one or more of the same literals form a part of another independent 
rule, the parser generates an exception. How can I avoid this.

For example, the rule STRING is defined to be made up of a 
combination of any alphabets followed by a numeral. Another rule WFCS 
which has nothing to do with STRING can be made up of a combination 
of L,H,Z and/or X.

When the parsing for WFCS block is done, the parser expects an INT 
after the alphabet. I assume it is applying the STRING rule on the 
WFCS block since it has encountered an alphabet. Can we override this 
behaviour.


Thanks in advance.

Regards,
Ramya


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From nick.collier at verizon.net  Wed Apr 30 05:52:46 2003
From: nick.collier at verizon.net (Nick Collier)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: JavaTreeParser? What does it do?
In-Reply-To: <b8n0ov+a8cg@eGroups.com>
References: <b8n0ov+a8cg@eGroups.com>
Message-ID: <1051707166.1197.8.camel@trinco.lanka.org>

Hi,

I agree that Tree Walkers certainly give you finer control, but the
double dispatch at the heart of the visitor patter does allow for some
context dependent operations, I think. For example, last I checked,
jython (python in java) uses the visitor pattern as a kind of "tree
walker" during compilation / interpretation.

Nick

On Tue, 2003-04-29 at 19:10, lgcraymer wrote:
> Micheal--
> 
> The Visitor pattern is good when you do not have context-dependent 
> operations on AST nodes.  One example of this is in printing 
> trees--all that you need to know is depth (for indenting) and AST node 
> properties.  Another is "change all AST nodes of type FOO to type BAR 
> in my tree".  I find Visitors convenient for quick-and-dirty tools 
> that work on any tree that I can construct.
> 
> Tree walkers give you finer control, but require knowledge of tree 
> structure and force you into node-by-node processing (if you want do 
> do "action()" whenever you encounter a FOO node, then you will have to 
> insert " { action(); }" everywhere in your tree grammar that you 
> specify FOO).
> 
> --Loring
> 
> 
> --- In antlr-interest@yahoogroups.com, "micheal_jor" <open.zone@v...> 
> wrote:
> > > Tree parsers do the "getFirstChild()" and "getNextSibling()" for 
> > > you as well as matching a tree pattern--the whole idea is to 
> extend 
> > > the ANTLR parsing concept to trees.  About the only case where you 
> > > might want to walk a tree without a tree parser is when 
> > the "Visitor" 
> > > pattern is appropriate.
> > 
> > Hi Loring,
> > 
> > Do you have any guidelines/advise on choosing between an 
> architecture 
> > using the Visitor pattern or TreeParsers?
> > 
> > Having made full support of hetero-ASTs a priority in the C# codegen 
> -
> >  to support the use of Visitors with ANTLR-built trees - we now 
> often 
> > need to choose between both architectures.
> > 
> > Cheers,
> > 
> > Micheal
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
-- 
Nick Collier <nick.collier@verizon.net>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rsedivy at videotron.ca  Wed Apr 30 06:36:06 2003
From: rsedivy at videotron.ca (mkhozimkhozi)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] ANTLR v2.7.2 - Bug Fix : $FIRST(r) problems in Java, Cpp and C#
Message-ID: <b8ojg6+p8pj@eGroups.com>


In Cpp.:
--------

   Prob.: $FIRST(r) conflicts with $FOLLOW(r) because k=2
   Fix .: Line 41 of 

          .\antlr-2.7.2\antlr\actions\cpp\action.g

         Replace.: k=2;
         With   .: k=3;

         NOTE.: k=3 in Java and C#, why not in CPP ?

In Java, Cpp, C#.:
------------------

   Prob.: $FIRST(r) does not work with Arg rule name (r)
   Fix .: Line 223 of 

          .\antlr-2.7.2\antlr\actions\java\action.g
          .\antlr-2.7.2\antlr\actions\cpp\action.g
          .\antlr-2.7.2\antlr\actions\csharp\action.g

         Replace.: if ( a5!=null ) {
                      rule = a5.getText();
                   }

         With   .: if ( a6!=null ) {
                      rule = a6.getText();
                   }

To apply changes, re-build ANTLR as specified in .\antlr-2.7.2
\install.html

    


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From glindholm at yahoo.com  Wed Apr 30 07:05:03 2003
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers
In-Reply-To: <66544CD5-775B-11D7-BA37-000393BB647E@jguru.com>
Message-ID: <20030430140503.74160.qmail@web12406.mail.yahoo.com>

I've done a couple projects using ANTLR and have not yet 
been able to use the lexer.  I've had to hand-craft my own 
lexer's because of column positional token's issues.

I think it's a strength of ANTLR that you have multiple 
choices on how to build a lexer. 

Adding a dfa-based lexer option is a great idea.
(I wouldn't change the current lexer, I would add second 
style.)


--- Terence Parr <parrt@jguru.com> wrote:
> Does anyone have an opinion concerning ANTLR's construction of
> top-down 
> lexers versus more traditional dfa-based state machine solutions?
> 
> I just got really irritated this week building the PostScript 
> interpreter due to lexer lookahead issues.
> 
> PROS
> 
> Very readable lexers.  ('0'..'9')+ turns into a while look you can 
> debug/read.
> 
> Very powerful...can literally parse (because you can call other
> rules) 
> in the lexer.
> 
> Consistent with all other antlr-generated recognizers.  Lexers, 
> parsers, tree parsers all use the same analyzer and code generator.
> 
> Can execute an action anywhere during the recognition of a
> token...with 
> DFA based systems you have to wait until you know the complete token 
> has been match.
> 
> CONS
> 
> Some lexer rules are a huge pain to specify in ANTLR because of the 
> limitations of lookahead.
> 
> Lexer rules really confuse people since there are lots of special
> cases 
> in the lookahead and stuff.
> 
> I wonder if a compromise is possible.  Use a DFA-based decision to 
> determine which rule will match; can do arbitrary lookahead and all
> of 
> that automatically to make a correct decision.  The problem is speed:
> 
> you'd parse twice each token.  Perhaps I can simply combine all rules
> 
> with common left edges automatically to avoid weirdness.  For
> example:
> 
> INT : ('0'..'9')+ ;
> 
> FLOAT : ('0'..'9')+ ('.' ('0'..'9')*)? | '.' ('0'..'9')+ ;
> 
> could be turned into a combine rule by the system:
> 
> INT_FLOAT
> 	:	('0'..'9')+ ('.' ('0'..'9')*)?
> 	|	'.' ('0'..'9')+
> 	;
> 
> or whatever.
> 
> Still, my lookahead computations are really twisted for lexical rules
> 
> when you can see past end of a rule--literally any character can
> follow 
> a token (if you consider erroneous input).
> 
> ANYWAY, who has thoughts on this?  I'd like thoughts also from people
> 
> with *no* experience using DFA-based tools like lex/flex.  Do ANTLR 
> lexers seem "natural"?
> 
> Thanks!
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From amejdi at ertonline.gr  Wed Apr 30 07:49:06 2003
From: amejdi at ertonline.gr (Anakreon Mejdi)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Problem with existence of the same literal in
 two rules
References: <b8od8p+hbuu@eGroups.com>
Message-ID: <3EAFE262.7000504@ertonline.gr>

STRING:
	('L'|'H'|'Z'|'X') {/*set the token type into an imaginary
token*/}
|('a'..'z' | 'A'..'Z')+ (INT)
;

If antlr complains for ambiguity put a predicate .
	
ramyasivadas wrote:
> Hi,
> 
> Let me quote an example to help me explain the problem.
> 
> I have a rule as follows
> STRING
> :('a'..'z' | 'A'..'Z')+ (INT)
> ;
> 
> I also have a rule
> WFCS
> :'L'|'H'|'Z'|'X'
> ;
> 
> INT
> :('0'..'9')+
> ;
> 
> The issue is, if I have a set of literals constituting a rule and if 
> one or more of the same literals form a part of another independent 
> rule, the parser generates an exception. How can I avoid this.
> 
> For example, the rule STRING is defined to be made up of a 
> combination of any alphabets followed by a numeral. Another rule WFCS 
> which has nothing to do with STRING can be made up of a combination 
> of L,H,Z and/or X.
> 
> When the parsing for WFCS block is done, the parser expects an INT 
> after the alphabet. I assume it is applying the STRING rule on the 
> WFCS block since it has encountered an alphabet. Can we override this 
> behaviour.
> 
> 
> Thanks in advance.
> 
> Regards,
> Ramya
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Apr 30 08:16:19 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Problem with existence of the same literal i
	n two rules
Message-ID: <170826586F3BD511910D0200C110AAA805402347@memail03.bco-home.com>

An alternative approach would be to not have WFCS in your lexer.  Instead
use a parser rule like this:

wfcs: {isWcfs(LA(1))}? s:STRING {s.setType(WCFS);}

Then write the isWcfs method to check that is is only one char long and is a
correct character.

Monty

-----Original Message-----
From: Anakreon Mejdi [mailto:amejdi@ertonline.gr]
Sent: Wednesday, April 30, 2003 7:49 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Problem with existence of the same literal
in two rules


STRING:
	('L'|'H'|'Z'|'X') {/*set the token type into an imaginary
token*/}
|('a'..'z' | 'A'..'Z')+ (INT)
;

If antlr complains for ambiguity put a predicate .
	
ramyasivadas wrote:
> Hi,
> 
> Let me quote an example to help me explain the problem.
> 
> I have a rule as follows
> STRING
> :('a'..'z' | 'A'..'Z')+ (INT)
> ;
> 
> I also have a rule
> WFCS
> :'L'|'H'|'Z'|'X'
> ;
> 
> INT
> :('0'..'9')+
> ;
> 
> The issue is, if I have a set of literals constituting a rule and if 
> one or more of the same literals form a part of another independent 
> rule, the parser generates an exception. How can I avoid this.
> 
> For example, the rule STRING is defined to be made up of a 
> combination of any alphabets followed by a numeral. Another rule WFCS 
> which has nothing to do with STRING can be made up of a combination 
> of L,H,Z and/or X.
> 
> When the parsing for WFCS block is done, the parser expects an INT 
> after the alphabet. I assume it is applying the STRING rule on the 
> WFCS block since it has encountered an alphabet. Can we override this 
> behaviour.
> 
> 
> Thanks in advance.
> 
> Regards,
> Ramya
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From andrew at adersoftware.com  Wed Apr 30 07:33:15 2003
From: andrew at adersoftware.com (Andrew Deren)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers
In-Reply-To: <20030430140503.74160.qmail@web12406.mail.yahoo.com>
Message-ID: <200304300949854.SM01108@CS>

I was going to build a hand coded lexer for my project, but couldn't fine
much info on it. Can you please send me one of your lexers to look at so
that I can figure how to do. If they are available of course and not
commercial.
Thanks a lot.
Andrew

-----Original Message-----
From: Greg Lindholm [mailto:glindholm@yahoo.com] 
Sent: Wednesday, April 30, 2003 8:05 AM
To: antlr-interest@yahoogroups.com

I've done a couple projects using ANTLR and have not yet 
been able to use the lexer.  I've had to hand-craft my own 
lexer's because of column positional token's issues.

I think it's a strength of ANTLR that you have multiple 
choices on how to build a lexer. 

Adding a dfa-based lexer option is a great idea.
(I wouldn't change the current lexer, I would add second 
style.)


--- Terence Parr <parrt@jguru.com> wrote:
> Does anyone have an opinion concerning ANTLR's construction of
> top-down 
> lexers versus more traditional dfa-based state machine solutions?
> 
> I just got really irritated this week building the PostScript 
> interpreter due to lexer lookahead issues.
> 
> PROS
> 
> Very readable lexers.  ('0'..'9')+ turns into a while look you can 
> debug/read.
> 
> Very powerful...can literally parse (because you can call other
> rules) 
> in the lexer.
> 
> Consistent with all other antlr-generated recognizers.  Lexers, 
> parsers, tree parsers all use the same analyzer and code generator.
> 
> Can execute an action anywhere during the recognition of a
> token...with 
> DFA based systems you have to wait until you know the complete token 
> has been match.
> 
> CONS
> 
> Some lexer rules are a huge pain to specify in ANTLR because of the 
> limitations of lookahead.
> 
> Lexer rules really confuse people since there are lots of special
> cases 
> in the lookahead and stuff.
> 
> I wonder if a compromise is possible.  Use a DFA-based decision to 
> determine which rule will match; can do arbitrary lookahead and all
> of 
> that automatically to make a correct decision.  The problem is speed:
> 
> you'd parse twice each token.  Perhaps I can simply combine all rules
> 
> with common left edges automatically to avoid weirdness.  For
> example:
> 
> INT : ('0'..'9')+ ;
> 
> FLOAT : ('0'..'9')+ ('.' ('0'..'9')*)? | '.' ('0'..'9')+ ;
> 
> could be turned into a combine rule by the system:
> 
> INT_FLOAT
> 	:	('0'..'9')+ ('.' ('0'..'9')*)?
> 	|	'.' ('0'..'9')+
> 	;
> 
> or whatever.
> 
> Still, my lookahead computations are really twisted for lexical rules
> 
> when you can see past end of a rule--literally any character can
> follow 
> a token (if you consider erroneous input).
> 
> ANYWAY, who has thoughts on this?  I'd like thoughts also from people
> 
> with *no* experience using DFA-based tools like lex/flex.  Do ANTLR 
> lexers seem "natural"?
> 
> Thanks!
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> Co-founder, http://www.peerscope.com link sharing, pure-n-simple
> Lecturer in Comp. Sci., University of San Francisco
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo.
http://search.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Wed Apr 30 09:19:58 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers
In-Reply-To: <200304300949854.SM01108@CS>
Message-ID: <96757456-7B27-11D7-BA37-000393BB647E@jguru.com>


On Wednesday, April 30, 2003, at 07:33  AM, Andrew Deren wrote:

> I was going to build a hand coded lexer for my project, but couldn't 
> fine
> much info on it. Can you please send me one of your lexers to look at 
> so
> that I can figure how to do. If they are available of course and not
> commercial.

Here is a lexer that constantly returns INT:

public void INTConstantTone implements TokenStream {
	public Token nextToken() {
		return new CommonToken(INT);
	}
}

;)

Actually, you should check out my book draft on building translators by 
hand: this has lots of lexer stuff in there.

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From blade_x123 at yahoo.com  Wed Apr 30 10:32:13 2003
From: blade_x123 at yahoo.com (blade_x123)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] Re: Parsing hexadecimal digits...
In-Reply-To: <20030429184922.66358.qmail@web40707.mail.yahoo.com>
Message-ID: <b8p1at+ai0q@eGroups.com>

Hi,
 Ignore this message, I solved the problem by moving the parsing to
the lexer.

Thanks,
Manju

--- In antlr-interest@yahoogroups.com, BLade X <blade_x123@y...> wrote:
> Hi,
>  I have this problem. I am trying to parse a file
> where the hexadeciaml digits don't have a 0x prefix.
> But they only occur in one place (hopefully, that is
> what I am assuming till now and it seems to be valid).
>  I am unable to parse them because my lexer thinks
> they are normal numbers if they start with a digit,
> but it only thinks they are hex if they start with
> a,b,c,d,e or f. I have attached my lexer and parser
> files below.
>  In the parser files the hex digits only occur in
> osfUUID. Also if I make a separate field for
> hexadecimal literals and remove the parsing of hex
> numbers from the normal numeric literals, the programs
> crashes saying abnormal program termination with code
> 03. 
>  I am a newbie to this, so most of my lexer file comes
> from other lexers that are given as examples with
> antlr. So please forgive me if there are any mistakes.
> 
> Thanks in advance,
> Manju
> 
> 
> __________________________________
> Do you Yahoo!?
> The New Yahoo! Search - Faster. Easier. Bingo.
> http://search.yahoo.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Wed Apr 30 09:18:16 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:34 2004
Subject: [antlr-interest] dfa-based lexers versus top-down antlr lexers
In-Reply-To: <20030430140503.74160.qmail@web12406.mail.yahoo.com>
Message-ID: <597D426E-7B27-11D7-BA37-000393BB647E@jguru.com>


On Wednesday, April 30, 2003, at 07:05  AM, Greg Lindholm wrote:

> I've done a couple projects using ANTLR and have not yet
> been able to use the lexer.  I've had to hand-craft my own
> lexer's because of column positional token's issues.

Hi :)

2.7.2 allows predicates on the left edge of lexer rules so you can say:

{getColumn()==1}?

and have it work :)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Wed Apr 30 09:24:07 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] ANTLR v2.7.2 - Bug Fix : $FIRST(r) problems in Java, Cpp and C#
In-Reply-To: <b8ojg6+p8pj@eGroups.com>
Message-ID: <2A6E9DCB-7B28-11D7-BA37-000393BB647E@jguru.com>

Thanks!  I have updated the main line :)

Terence

On Wednesday, April 30, 2003, at 06:36  AM, mkhozimkhozi wrote:

>
> In Cpp.:
> --------
>
>    Prob.: $FIRST(r) conflicts with $FOLLOW(r) because k=2
>    Fix .: Line 41 of
>
>           .\antlr-2.7.2\antlr\actions\cpp\action.g
>
>          Replace.: k=2;
>          With   .: k=3;
>
>          NOTE.: k=3 in Java and C#, why not in CPP ?
>
> In Java, Cpp, C#.:
> ------------------
>
>    Prob.: $FIRST(r) does not work with Arg rule name (r)
>    Fix .: Line 223 of
>
>           .\antlr-2.7.2\antlr\actions\java\action.g
>           .\antlr-2.7.2\antlr\actions\cpp\action.g
>           .\antlr-2.7.2\antlr\actions\csharp\action.g
>
>          Replace.: if ( a5!=null ) {
>                       rule = a5.getText();
>                    }
>
>          With   .: if ( a6!=null ) {
>                       rule = a6.getText();
>                    }
>
> To apply changes, re-build ANTLR as specified in .\antlr-2.7.2
> \install.html
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From wiggjd at sbu.ac.uk  Wed Apr 30 12:42:44 2003
From: wiggjd at sbu.ac.uk (wiggjd@sbu.ac.uk)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: C++ static analyser
Message-ID: <60092.81.86.250.208.1051731764.squirrel@webmail.sbu.ac.uk>

Hello Puri_Vishalus,

In response to your message of 30 April, there is a C++ grammar which runs
under Antlr 2.7.1 (Java), but produces a grammar written in C++, in
Resources and Grammars at http://www.antlr.org.

This version will parse most C programs and some older C++ programs and is
currently under development for up to date C++ programs.

If you would be interested in the current version I suggest you start with
this copy. However, I hope to have the much more up to date version
available in the not too distant future which I would strongly recommend
you switch to as soon as it is available.

I regret I don't know anything about Parasoft C++ Test.

David Wigg
Centre for Systems and Software Engineering
South Bank University
London, UK.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From parrt at jguru.com  Wed Apr 30 14:50:21 2003
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Added code-generator generator (JBurg) lab
Message-ID: <BD5F7D19-7B55-11D7-BA37-000393BB647E@jguru.com>

Folks,

Anybody interested in a gentle introduction to code generation using 
code-generator generators (read that tree grammars that allow ambiguous 
matches), check out the lab I made for my students:

http://www.cs.usfca.edu/~parrt/course/652/labs/jburg.html

Didn't have time to really describe how JBurg and ilk work, but the lab 
is illuminating :)  Solution to follow when students finish.

Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
Co-founder, http://www.peerscope.com link sharing, pure-n-simple
Lecturer in Comp. Sci., University of San Francisco


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Wed Apr 30 15:42:26 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] A way to access individual expressions stored in ELIST?
Message-ID: <b8pjgi+cv76@eGroups.com>

Hi,

When implenting METHOD_CALL from java.tree.g, how can I access
individual expressions stored in ELIST?

Thanks

------------------------------------------------------------
[...]
       | #(METHOD_CALL primaryExpression elist)
       ...
       ;       
elist
       : #( ELIST (expression)* )
       ;




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From mzukowski at yci.com  Wed Apr 30 15:57:17 2003
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] A way to access individual expressions store
	d in ELIST?
Message-ID: <170826586F3BD511910D0200C110AAA805402353@memail03.bco-home.com>

put a label on them:

elist
       : #( ELIST (e:expression {/*do something with expression in this
action*/})* )
       ;

-----Original Message-----
From: rustydstone [mailto:rustydstone@yahoo.com]
Sent: Wednesday, April 30, 2003 3:42 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] A way to access individual expressions stored
in ELIST?


Hi,

When implenting METHOD_CALL from java.tree.g, how can I access
individual expressions stored in ELIST?

Thanks

------------------------------------------------------------
[...]
       | #(METHOD_CALL primaryExpression elist)
       ...
       ;       
elist
       : #( ELIST (expression)* )
       ;




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From rustydstone at yahoo.com  Wed Apr 30 18:34:31 2003
From: rustydstone at yahoo.com (rustydstone)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Re: A way to access individual expressions store d in ELIST?
In-Reply-To: <170826586F3BD511910D0200C110AAA805402353@memail03.bco-home.com>
Message-ID: <b8ptj7+a6dj@eGroups.com>

--- In antlr-interest@yahoogroups.com, mzukowski@y... wrote:
> put a label on them:
> 
> elist
>        : #( ELIST (e:expression {/*do something with expression in this
> action*/})* )
>        ;

Thanks, but how do I refer to the 1st, 2nd, etc expressions in the elist?







 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


From blade_x123 at yahoo.com  Wed Apr 30 18:43:38 2003
From: blade_x123 at yahoo.com (blade_x123)
Date: Mon Dec 20 16:15:35 2004
Subject: [antlr-interest] Parsing dynamically defined templates ?
Message-ID: <b8pu4a+ick7@eGroups.com>

Hi,
 This may be a slightly long mail so please bear with me. In the file
format that I am trying to parse with antlr I have something called
Data Templates. These are defined at the beginning of each file, or
can also be a pre defined set. Here is an example

Template myTemplate {
DWORD myVar;
}
an instance of this template will look like this
myTemplate mT {
1.245;
}
also there can be array's which are comma seperated objects, as in
Template myArrayTemp {
array DWORD myArr[3];
}
which would be like
myArrayTemp {
1.0, 2.0, 3.0;
}
It gets more complicated :-(
a template can have an array of templates, for example
Template myTempArrTemp {
DWORD myVar;
array myArrayTemp bleh[3];
}
which would look like this
myTempArrTemp {
2.0;
1.0,2.0,3.0;,2.0,3.0,4.0;,5.0,6.0,7.0;;
}
the 2 semicolons at the end are needed to signify the end of a
template.

There are roughly 30-40 templates that are in common use. Also these
templates can be defined on the fly. How would I parse these ? A
general idea or tips would be helpful. I am assuming I have to do this
in my C++ code once I read in the template contents. Any ideas to
simplify my life ?

Thanks in advance,
Manju


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 


