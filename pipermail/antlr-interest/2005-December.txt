From nfb at silistix.com  Thu Dec  1 02:58:41 2005
From: nfb at silistix.com (Noel F Bryson)
Date: Thu Dec  1 02:55:20 2005
Subject: [antlr-interest] Multiple lexers/parsers - interfacing ANTLR with
	pre-exisintg lexer/parsers
Message-ID: <1133434721.3928.32.camel@angstrom.silistix.com>

I've written an ANTLR 2.7.5 parser and lexer for language X, and now I
want to be able to embed language Y code within X source files. I've
looked at the JavaDoc example in the documentation and distribution
(very nice, and I got it working for my case). My problem is that I
already have a pre-existing, hand-crafted parser/lexer pair for language
Y, which I need to interface to the Antlr-generated X parser/lexer. Has
anyone any advice for how I go about this ?

From kannan.ekanath at gmail.com  Thu Dec  1 03:22:31 2005
From: kannan.ekanath at gmail.com (Kannan Ekanath)
Date: Thu Dec  1 03:22:35 2005
Subject: [antlr-interest] sql parser implementation required?
Message-ID: <65103ce80512010322v2d445f6oda7c6c6de9427d2d@mail.gmail.com>

 Hi, Level of Expertise : BEGINNER I am of the impression that antlr is some
sort of a library generator for parsing some input based on some rules. In
ANTLR the input is probably a "GRAMMAR" and the output is an archive/a
library for parsing and saying if a string follows the grammar. Having said
this, i also believe there must be a standard SQL ANTLR parser written by
someone. If that is the case can someone point to those links? Basically i
have a String in Java and i want to see if it is a valid SQL query (although
some validations like whether the table is actually present in db cannot be
done) and if it is a valid query i want to extract the bind parameters from
that query. Can someone please point to relevant link? ANTLR seems to be a
very broad parser implementation and i am searching if someone has written a
"READYMADE" reusable SQL grammar.

PS : Cross posting at http://www.jguru.com/forums/view.jsp?EID=1273892

--
Kannan Ekanath
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051201/31f50308/attachment-0001.html
From esof1 at student.cs.ucc.ie  Thu Dec  1 03:51:01 2005
From: esof1 at student.cs.ucc.ie (Edward O'Flynn)
Date: Thu Dec  1 03:45:02 2005
Subject: [antlr-interest] Recognizing java import statements
In-Reply-To: <003501c5f633$966e1950$6b02a8c0@hercules>
References: <003501c5f633$966e1950$6b02a8c0@hercules>
Message-ID: <438EE3A5.8050504@student.cs.ucc.ie>

Hi all

I am using the java grammar provided with the antlr 2.7.5 release, when 
i try and parse a java file
thats contains an import statement, its just recognizes the import 
statement, and not the rest of the program, no error is thrown and the 
resulting AST tree contains just the import rule
i.e. import java.util.*;

this is the rule
// Import statement: import followed by a package or class name
importDefinition
    options {defaultErrorHandler = true;}
    :    i:"import"^ {#i.setType(IMPORT);} identifierStar SEMI!
    ;

Is this a know bug?

thanks
ed.
From esof1 at student.cs.ucc.ie  Thu Dec  1 03:51:30 2005
From: esof1 at student.cs.ucc.ie (Edward Seamus O'Flynn)
Date: Thu Dec  1 03:51:36 2005
Subject: [antlr-interest] Recognizing java import statements
Message-ID: <4392F1CB@webmail.ucc.ie>

Hi all

I am using the java grammar file that is contained in the antlr 2.7.5 examples
However when i try and parse a java file that contains an import statement
i.e. import java.util.*;

it parses the import statement but not the rest of the file, and the resulting 
AST tree contains just the import rule
No error is thrown, the following is the import rule
// Import statement: import followed by a package or class name
importDefinition
	options {defaultErrorHandler = true;}
	:	i:"import"^ {#i.setType(IMPORT);} identifierStar SEMI!
	;

Is this a known bug?

thanks
ed.


From royne.borrud at gmail.com  Thu Dec  1 05:38:50 2005
From: royne.borrud at gmail.com (Royne Borrud)
Date: Thu Dec  1 05:38:54 2005
Subject: [antlr-interest] Disregarding subrule ordering
Message-ID: <c67bc1880512010538lf9a8d6bvddf79c1b843dc46d@mail.gmail.com>

Hi.
My goal is to parse a statement similar to this:

object name {
    optionalParam1
    param1
    param3
    param2
    optionalParam3
}

My problem is that while I do not want to enforce a specific ordering
of the parameters, I do want to make sure that all three parameters
occur once and only once, and that the optional parameters occur once
or not at all. Is this possible without adding specific code to handle
this? I'm beginning to think not... :/
If there isn't, has anyone got any hints for how to go about this?
From esof1 at student.cs.ucc.ie  Thu Dec  1 05:50:35 2005
From: esof1 at student.cs.ucc.ie (Edward O'Flynn)
Date: Thu Dec  1 05:45:23 2005
Subject: [antlr-interest] Getting line info on java methods
In-Reply-To: <4392F1CB@webmail.ucc.ie>
References: <4392F1CB@webmail.ucc.ie>
Message-ID: <438EFFAB.8020709@student.cs.ucc.ie>

Hi everyone again

I am looking to be able to get line information regarding java methods. 
I want to be able to
know what line number the java method begins and ends, in the source 
code been
parsed, i.e. getting the line number of tokens '{' and '}' that occur 
within a method.
Would the parser rule where I do this "checking" be the field rule in 
the java grammar, and how would i reference these bracket token then for 
the corresponding methods?

I would greatly appreciate any help on this

thanks
ed.
From demakov at ispras.ru  Thu Dec  1 06:07:51 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Thu Dec  1 06:07:35 2005
Subject: [antlr-interest] Disregarding subrule ordering
References: <c67bc1880512010538lf9a8d6bvddf79c1b843dc46d@mail.gmail.com>
Message-ID: <003101c5f680$9e3a12e0$8cc79553@marlboro>

Hi,

Alternatively you should describe all possible combinations of parameters.
Custom code is better solution. :)
ANTLR doesn't have analogue of <interleave> tag in RELAX NG...

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message ----- 
From: "Royne Borrud" <royne.borrud@gmail.com>
To: <antlr-interest@antlr.org>
Sent: Thursday, December 01, 2005 4:38 PM
Subject: [antlr-interest] Disregarding subrule ordering


> Hi.
> My goal is to parse a statement similar to this:
> 
> object name {
>    optionalParam1
>    param1
>    param3
>    param2
>    optionalParam3
> }
> 
> My problem is that while I do not want to enforce a specific ordering
> of the parameters, I do want to make sure that all three parameters
> occur once and only once, and that the optional parameters occur once
> or not at all. Is this possible without adding specific code to handle
> this? I'm beginning to think not... :/
> If there isn't, has anyone got any hints for how to go about this?
> 
>

From mathieu.clabaut at gmail.com  Thu Dec  1 07:48:45 2005
From: mathieu.clabaut at gmail.com (Mathieu Clabaut)
Date: Thu Dec  1 07:48:48 2005
Subject: [antlr-interest] Segfault on tinyc and own exemple in C++,
	with debugging
Message-ID: <db9360ca0512010748v14249444w@mail.gmail.com>

 Hello,

   In the process of hunting a nasty bug on my own softare using antlr
2.7.5 on linux, I compiled it with the following command line options
:
    g++ -D_GLIBCXX_DEBUG -ggdb3 -fno-inline -fkeep-inline-functions

   Then it segfault on every run. I tried on the tinyc exemple comming
with antlr distribution, and obtained the same result :

program received signal SIGSEGV, Segmentation fault.
0x0804bbbc in antlr::CharScanner::resetText (this=0xbfe8c3a0)
    at CharScanner.hpp:334
334                     inputState->tokenStartColumn = inputState->column;

Where:
  inputState =  {ref = 0x0}

Any idea ? Can it be a side effect of using the -D_GLIBCXX_DEBUG
(ahem, of course it can. The question really should be "it is a side
effect") ?
I'll try to have a look at it, but I do not master the overall antlr
classes.... It may take some times before I get something clear about
it.


 -mathieu

--
____________http://www.gnu.org/philosophy/no-word-attachments.fr.html
Mathieu CLABAUT                         mailto:mathieu.clabaut@gmail.com
           F2F5 442F F2AC E1D5 9D31  3EFC 842A BC4A 123B 9A65
From monty at codetransform.com  Thu Dec  1 09:29:21 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Thu Dec  1 08:29:54 2005
Subject: [antlr-interest] question on simple grammar for tick format to
	decimal conversion
In-Reply-To: <003501c5f633$966e1950$6b02a8c0@hercules>
References: <003501c5f633$966e1950$6b02a8c0@hercules>
Message-ID: <438F32F1.9080206@codetransform.com>

For more information on filtering token streams, see my article "Using a
Parser as a TokenFilter" http://codetransform.com/filterexample.html
It's overkill for what you're doing, but has the basic concepts in there.

Monty

Micheal J wrote:
>>Can you please tell me more about the Fancy option - are you 
>>saying that I need to implement a TokenStream which will do 
>>this toggling after hitting the MINUS ?
> 
> 
> Yes. After seeing a NUM MINUS sequence you may set a flag then if the next
> token is NUM break up into digits. 
> 
> And then use it in your code. 
> - You create your lexer. 
> - Create the filter TokenStream to reads from your lexer. 
> - Create the parser to read from your filter.
> - Use parser.
> 
> 
> Cheers,
> 
> Micheal
> 
> 
> 
> 

From gudnabrsam at yahoo.com  Thu Dec  1 09:11:23 2005
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Thu Dec  1 09:11:26 2005
Subject: [antlr-interest] automatic token type per literal
Message-ID: <20051201171123.38816.qmail@web30909.mail.mud.yahoo.com>

Let's say I have a grammar having stolen the Java
IDENT lexer rule.  In my parser, I have the following:

tokens { FOO; }

somerule
    :    f:"foo"^ { #f.setType(FOO); } BAR
    ;

Have I missed a feature by means of which I can (once)
permanently set the association between ttype FOO and
the literal "foo"?  If not, is there a rationale for
the absence of such a feature?  If the answer to THAT
is no, might such a feature find its way into ANTLR3? 
;)  I tried overriding the ttype in the IDENT lexer
rule but the ambiguity issues were (at my level of
expertise) insurmountable.  :)  I'm a longtime lurker
but still fairly green wrt actually making ANTLR do
anything...

TIA,
Matt


	
		
__________________________________ 
Yahoo! Mail - PC Magazine Editors' Choice 2005 
http://mail.yahoo.com
From ewbank at gmail.com  Thu Dec  1 08:57:03 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Dec  1 09:13:12 2005
Subject: [antlr-interest] Disregarding subrule ordering
In-Reply-To: <c67bc1880512010538lf9a8d6bvddf79c1b843dc46d@mail.gmail.com>
References: <c67bc1880512010538lf9a8d6bvddf79c1b843dc46d@mail.gmail.com>
Message-ID: <dd3a065f0512010857g63070352w84bf042434fa3c87@mail.gmail.com>

To make a perhaps subtle distinction, this is a /semantic/ error, so
is more easily done in a separate pass (or are them fighting words?). 
In other words, think about adding this to a treeparser, rather than
the initial parse.

The parser would simply consume parameters passively:

    object :
        KW_OBJECT^ ID params
        ;

    params :
        LEFT_CURLY^
         ( param0 | param1 | param2 ... )*
        RIGHT_CURLY!
        ;

Now, the tree parser would look at the params object in the context of
the ID'd object and know (from a lookup table?) which elements are
available, as well as which have been seen...

    object : #( OBJECT id:ID params[#id->getText()] );

    params
    [ const string objName ]
    {
        SetOfNames legalParameters = getLegalParameters(objName);
        SetOfNames reqdParameters = getRequiredParams(objName)
        SetOfNames seen;
        string paramName;
    }
    :   #( LEFT_CURLY
            (
                paramName=parameter[legalParameters]
                {
                    // limited to one instance
                    if seenParameters contains paramName exists then
                        error ...
                    add paramName to seenParameters
                }
            )*
        )
        {
            // force required to exist
            for every p in reqdParameters
                if seenParameters does_not_contain p then
                    error ...
        }
    ;

    parameter
    [ const SetOfNames legalParameters ]
    returns [ string paramName ]
    :
        #( ... ??? ... )
        {
            if legalParameters does_not_contain paramName then
                error ...
        }
    ;

On 12/1/05, Royne Borrud <royne.borrud@gmail.com> wrote:
> Hi.
> My goal is to parse a statement similar to this:
>
> object name {
>     optionalParam1
>     param1
>     param3
>     param2
>     optionalParam3
> }
>
> My problem is that while I do not want to enforce a specific ordering
> of the parameters, I do want to make sure that all three parameters
> occur once and only once, and that the optional parameters occur once
> or not at all. Is this possible without adding specific code to handle
> this? I'm beginning to think not... :/
> If there isn't, has anyone got any hints for how to go about this?
>
From ewbank at gmail.com  Thu Dec  1 09:35:54 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Dec  1 09:35:56 2005
Subject: [antlr-interest] automatic token type per literal
In-Reply-To: <20051201171123.38816.qmail@web30909.mail.mud.yahoo.com>
References: <20051201171123.38816.qmail@web30909.mail.mud.yahoo.com>
Message-ID: <dd3a065f0512010935l19b2de58hff45a84a96e5056e@mail.gmail.com>

ANTLR does all that you ask.  Look for "testLiterals" in the
documentation.  It requires that you change your tokens section to be

  tokens {
     FOO="foo";
     ...
  }

Also look at how to import and export token sets; very handy stuff.

Hope this is enough to get you started.  I've gotta run...
- Bryan Ewbank

On 12/1/05, Matt Benson <gudnabrsam@yahoo.com> wrote:
> Let's say I have a grammar having stolen the Java
> IDENT lexer rule.  In my parser, I have the following:
>
> tokens { FOO; }
>
> somerule
>     :    f:"foo"^ { #f.setType(FOO); } BAR
>     ;
>
> Have I missed a feature by means of which I can (once)
> permanently set the association between ttype FOO and
> the literal "foo"?  If not, is there a rationale for
> the absence of such a feature?  If the answer to THAT
> is no, might such a feature find its way into ANTLR3?
> ;)  I tried overriding the ttype in the IDENT lexer
> rule but the ambiguity issues were (at my level of
> expertise) insurmountable.  :)  I'm a longtime lurker
> but still fairly green wrt actually making ANTLR do
> anything...
>
> TIA,
> Matt
>
>
>
>
> __________________________________
> Yahoo! Mail - PC Magazine Editors' Choice 2005
> http://mail.yahoo.com
>
From gudnabrsam at yahoo.com  Thu Dec  1 09:48:35 2005
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Thu Dec  1 09:48:39 2005
Subject: [antlr-interest] automatic token type per literal
In-Reply-To: <dd3a065f0512010935l19b2de58hff45a84a96e5056e@mail.gmail.com>
Message-ID: <20051201174835.55306.qmail@web30909.mail.mud.yahoo.com>

Thanks, Bryan!

-Matt

--- Bryan Ewbank <ewbank@gmail.com> wrote:

> ANTLR does all that you ask.  Look for
> "testLiterals" in the
> documentation.  It requires that you change your
> tokens section to be
> 
>   tokens {
>      FOO="foo";
>      ...
>   }
> 
> Also look at how to import and export token sets;
> very handy stuff.
> 
> Hope this is enough to get you started.  I've gotta
> run...
> - Bryan Ewbank
> 
> On 12/1/05, Matt Benson <gudnabrsam@yahoo.com>
> wrote:
> > Let's say I have a grammar having stolen the Java
> > IDENT lexer rule.  In my parser, I have the
> following:
> >
> > tokens { FOO; }
> >
> > somerule
> >     :    f:"foo"^ { #f.setType(FOO); } BAR
> >     ;
> >
> > Have I missed a feature by means of which I can
> (once)
> > permanently set the association between ttype FOO
> and
> > the literal "foo"?  If not, is there a rationale
> for
> > the absence of such a feature?  If the answer to
> THAT
> > is no, might such a feature find its way into
> ANTLR3?
> > ;)  I tried overriding the ttype in the IDENT
> lexer
> > rule but the ambiguity issues were (at my level of
> > expertise) insurmountable.  :)  I'm a longtime
> lurker
> > but still fairly green wrt actually making ANTLR
> do
> > anything...
> >
> > TIA,
> > Matt
> >
> >
> >
> >
> > __________________________________
> > Yahoo! Mail - PC Magazine Editors' Choice 2005
> > http://mail.yahoo.com
> >
> 



		
__________________________________ 
Yahoo! Music Unlimited 
Access over 1 million songs. Try it free. 
http://music.yahoo.com/unlimited/
From madcapmaggie at yahoo.com  Thu Dec  1 10:29:54 2005
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Thu Dec  1 10:29:57 2005
Subject: [antlr-interest] sql parser implementation required?
In-Reply-To: <65103ce80512010322v2d445f6oda7c6c6de9427d2d@mail.gmail.com>
Message-ID: <20051201182954.80552.qmail@web30212.mail.mud.yahoo.com>

Kannan,

AFAIK there is no "general" SQL parser.
Also, every database has  its own variant of SQL.

Peggy

--- Kannan Ekanath <kannan.ekanath@gmail.com> wrote:

>  Hi, Level of Expertise : BEGINNER I am of the
> impression that antlr is some
> sort of a library generator for parsing some input
> based on some rules. In
> ANTLR the input is probably a "GRAMMAR" and the
> output is an archive/a
> library for parsing and saying if a string follows
> the grammar. Having said
> this, i also believe there must be a standard SQL
> ANTLR parser written by
> someone. If that is the case can someone point to
> those links? Basically i
> have a String in Java and i want to see if it is a
> valid SQL query (although
> some validations like whether the table is actually
> present in db cannot be
> done) and if it is a valid query i want to extract
> the bind parameters from
> that query. Can someone please point to relevant
> link? ANTLR seems to be a
> very broad parser implementation and i am searching
> if someone has written a
> "READYMADE" reusable SQL grammar.
> 
> PS : Cross posting at
> http://www.jguru.com/forums/view.jsp?EID=1273892
> 
> --
> Kannan Ekanath
> 

From donalmurtagh at yahoo.co.uk  Thu Dec  1 10:47:20 2005
From: donalmurtagh at yahoo.co.uk (Donal Murtagh)
Date: Thu Dec  1 10:47:22 2005
Subject: [antlr-interest] newbie: building AST
Message-ID: <20051201184720.15615.qmail@web32008.mail.mud.yahoo.com>

Hi,

I'm new to ANTLR, so go easy on me....
I'm building an AST for this chunk of text - the leaf tokens are DCAT*,
Sunday, Monday, etc.

DayCategoriser
{
  Weekdays
  {
    Sunday    = DCAT2
    Monday    = DCAT0
    Tuesday   = DCAT0
    Wednesday = DCAT0
    Thursday  = DCAT0
    Friday    = DCAT0
    Saturday  = DCAT1
  }
}

I'm currently using the following rules, which work fine, but I suspect
they're a bit more verbose than they need to be:

dayCategoriser
	:	DAY_CATEGORISER^		
		LBRACE!
			weekdayBlock
		RBRACE!
	;

weekdayBlock
	:	"Weekdays"^
		LBRACE!
			(weekdayCategory)*
		RBRACE!
	;

// leaf (terminal) rule
weekdayCategory[DayCategoriser dc]
	:	(day:ID ASSIGN^ dcat:DCAT_ID)				
	;

Is there any way that I can combine the rules weekdayBlock and
weekdayCategory to produce something like:

weekdayBlock[DayCategoriser dc]
	:	"Weekdays"^
		LBRACE
			(day:ID ASSIGN^ dcat:DCAT_ID)*				
		RBRACE
	;


I suspect this ought to be possible, but I can't seem to find the right
syntax?

Thanks in advance,
Don


		
___________________________________________________________ 
To help you stay safe and secure online, we've developed the all new Yahoo! Security Centre. http://uk.security.yahoo.com
From endigitalmind at yahoo.co.uk  Thu Dec  1 12:18:38 2005
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Thu Dec  1 12:18:58 2005
Subject: [antlr-interest] Switching buildAST to true causes "Invalid AST
	node type" error.
Message-ID: <20051201201838.96846.qmail@web25814.mail.ukl.yahoo.com>

The grammar below generates classes that build and run
fine if buildAST is set to false. As soon as I set it
to true (without changing anything else) my parser
raises an "Invalid AST node type" error. I'm not
trying to traverse the AST, just build it. Can anyone
tell me what I'm doing wrong.

---start grammar---
options
{
	language = "CSharp";
}

class IntAndIDLexer extends Lexer;

INT		: ('0'..'9')+ ;

ID		: ('a'..'z')+ ;

COMMA	: ',' ;


class SeriesParser extends Parser;
options
{
	buildAST = true;
}

series	: element (COMMA element)* ;

element
	:	a:INT	{System.Console.WriteLine(a.getText());}
	|	b:ID	{System.Console.WriteLine(b.getText());}
	;
---end grammar---


		
___________________________________________________________ 
Yahoo! Model Search 2005 - Find the next catwalk superstars - http://uk.news.yahoo.com/hot/model-search/
From madcapmaggie at yahoo.com  Thu Dec  1 12:47:51 2005
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Thu Dec  1 12:47:59 2005
Subject: [antlr-interest] Switching buildAST to true causes "Invalid AST
	node type" error.
In-Reply-To: <20051201201838.96846.qmail@web25814.mail.ukl.yahoo.com>
Message-ID: <20051201204751.36823.qmail@web30214.mail.mud.yahoo.com>

Did you remember to initialize the AST factory when
you run your parser?



--- Phil Ritchie <endigitalmind@yahoo.co.uk> wrote:

> The grammar below generates classes that build and
> run
> fine if buildAST is set to false. As soon as I set
> it
> to true (without changing anything else) my parser
> raises an "Invalid AST node type" error. I'm not
> trying to traverse the AST, just build it. Can
> anyone
> tell me what I'm doing wrong.
> 
> ---start grammar---
> options
> {
> 	language = "CSharp";
> }
> 
> class IntAndIDLexer extends Lexer;
> 
> INT		: ('0'..'9')+ ;
> 
> ID		: ('a'..'z')+ ;
> 
> COMMA	: ',' ;
> 
> 
> class SeriesParser extends Parser;
> options
> {
> 	buildAST = true;
> }
> 
> series	: element (COMMA element)* ;
> 
> element
> 	:	a:INT	{System.Console.WriteLine(a.getText());}
> 	|	b:ID	{System.Console.WriteLine(b.getText());}
> 	;
> ---end grammar---
> 
> 
> 		
>
___________________________________________________________
> 
> Yahoo! Model Search 2005 - Find the next catwalk
> superstars -
> http://uk.news.yahoo.com/hot/model-search/
> 

From madcapmaggie at yahoo.com  Thu Dec  1 13:29:47 2005
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Thu Dec  1 13:29:51 2005
Subject: [antlr-interest] Segfault on tinyc and own exemple in C++,
	with debugging
In-Reply-To: <db9360ca0512010748v14249444w@mail.gmail.com>
Message-ID: <20051201212947.13637.qmail@web30204.mail.mud.yahoo.com>

I tried this with the tinyc example and got no
segfault:

g++ (GCC) 3.2.2 20030222 (Red Hat Linux 3.2.2-5)

Linux 2.4.20-20.9 #1 Mon Aug 18 11:45:58 EDT 2003 i686
i386




--- Mathieu Clabaut <mathieu.clabaut@gmail.com> wrote:

>  Hello,
> 
>    In the process of hunting a nasty bug on my own
> softare using antlr
> 2.7.5 on linux, I compiled it with the following
> command line options
> :
>     g++ -D_GLIBCXX_DEBUG -ggdb3 -fno-inline
> -fkeep-inline-functions
> 
>    Then it segfault on every run. I tried on the
> tinyc exemple comming
> with antlr distribution, and obtained the same
> result :
> 
> program received signal SIGSEGV, Segmentation fault.
> 0x0804bbbc in antlr::CharScanner::resetText
> (this=0xbfe8c3a0)
>     at CharScanner.hpp:334
> 334                     inputState->tokenStartColumn
> = inputState->column;
> 
> Where:
>   inputState =  {ref = 0x0}
> 
> Any idea ? Can it be a side effect of using the
> -D_GLIBCXX_DEBUG
> (ahem, of course it can. The question really should
> be "it is a side
> effect") ?
> I'll try to have a look at it, but I do not master
> the overall antlr
> classes.... It may take some times before I get
> something clear about
> it.
> 
> 
>  -mathieu
> 
> --
>
____________http://www.gnu.org/philosophy/no-word-attachments.fr.html
> Mathieu CLABAUT                        
> mailto:mathieu.clabaut@gmail.com
>            F2F5 442F F2AC E1D5 9D31  3EFC 842A BC4A
> 123B 9A65
> 

From sunshine at public.kherson.ua  Thu Dec  1 14:20:47 2005
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Thu Dec  1 14:20:53 2005
Subject: [antlr-interest] Profiler of ANTLR usage
Message-ID: <BFB543DF.44564%sunshine@public.kherson.ua>

Hi ANTLR list,

I have get some profiling.

Simple test. We add 100,000 record using SQL INSERT into Valentina database.

As you can see 

        ANTLR  take     74.6% of time. This is only parsing and tree parsing
:-((

        Valentina do rest work to put million records in 13.6% + 4.6% =
18.2%

As I have always told, on top of problem are
    std::strings, which do a lots of  new/delete...


----------------------------------------------------------------------------
---
    0.0%    99.9%    Common_SetExtesions    main
    0.0%    99.9%    Common_SetExtesions    Example()
    0.1%    99.2%    Common_SetExtesions
AddRecords(fbl::smart_ptr<fbl::vsql::I_Database>)
    0.1%    96.7%    libvkernel_ppc_debug.dylib
fbl::vsql::Database::SqlExecute(fbl::String const&,
fbl::smart_ptr<fbl::ArrayOfSmartPtrs<fbl::smart_ptr<fbl::I_Value> > >)
    0.1%    96.4%    libvkernel_ppc_debug.dylib
fbl::vsql::SqlParser::SqlExecute(fbl::vsql::I_Database*, fbl::String const&,
fbl::smart_ptr<fbl::ArrayOfSmartPtrs<fbl::smart_ptr<fbl::I_Value> > >)
 
    0.1%    74.6%  libvkernel_ppc_debug.dylib
fbl::vsql::SqlParser::ParseCommand(fbl::String const&,
fbl::vsql::Environment&)
    0.0%    13.6%  libvkernel_ppc_debug.dylib
fbl::vsql::SqlParser::PreprocessCommand(fbl::vsql::Environment&)
    0.0%    4.6%    libvkernel_ppc_debug.dylib
fbl::vsql::SqlParser::ProceedCommand(fbl::vsql::Environment&)

    0.0%    2.3%    libvkernel_ppc_debug.dylib
fbl::vsql::Environment::~Environment [in-charge]()
    0.0%    0.6%    libvkernel_ppc_debug.dylib
fbl::vsql::Environment::Environment[in-charge](fbl::smart_ptr<fbl::vsql::I_D
atabase>, fbl::String const&,
fbl::smart_ptr<fbl::ArrayOfSmartPtrs<fbl::smart_ptr<fbl::I_Value> > >)
    0.1%    0.1%    libstdc++.6.dylib    std::basic_istringstream<char,
std::char_traits<char>, std::allocator<char> >::str(std::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&)
    0.1%    0.1%    libstdc++.6.dylib    std::basic_ios<char,
std::char_traits<char> >::clear(std::_Ios_Iostate)
    0.0%    0.1%    libvkernel_ppc_debug.dylib
fbl::Environment::~Environment [not-in-charge]()
    0.1%    0.1%    libvkernel_ppc_debug.dylib
fbl::smart_ptr<fbl::vsql::I_Database>::smart_ptr[in-charge](fbl::vsql::I_Dat
abase*, bool)    
    0.0%    0.1%    libvkernel_ppc_debug.dylib
fbl::smart_ptr<fbl::vsql::I_Cursor>::operator=(fbl::vsql::I_Cursor*)

-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051202/fc11eeea/attachment.html
From sunshine at public.kherson.ua  Thu Dec  1 15:02:20 2005
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Thu Dec  1 15:02:26 2005
Subject: [antlr-interest] Profiler 2 
Message-ID: <BFB54D9C.4457A%sunshine@public.kherson.ua>

    0.1%    68.7%    libvkernel_ppc_release.dylib
fbl::vsql::SqlParser::ParseCommand(fbl::String const&,
fbl::vsql::Environment&)
    0.0%    46.3%    libvkernel_ppc_release.dylib    VSQL_Parser::sql()
    0.1%    41.3%    libvkernel_ppc_release.dylib
VSQL_Parser::sql_single()
    0.0%    40.5%    libvkernel_ppc_release.dylib
VSQL_Parser::sql_statement()
    0.0%    40.3%    libvkernel_ppc_release.dylib
VSQL_Parser::sql_data_statement()

    0.1%    40.1%    libvkernel_ppc_release.dylib
VSQL_Parser::sql_data_change_statement()
    0.0%    27.4%    libvkernel_ppc_release.dylib
VSQL_Parser::insert_statement()

    0.1%    11.0%    libvkernel_ppc_release.dylib
antlr::Parser::match(int)
    0.0%    8.0%    libstdc++.6.dylib    __cxa_throw

    0.0%    1.9%    libvkernel_ppc_release.dylib
antlr::MismatchedTokenException::MismatchedTokenException[in-charge](char
const* const*, int, antlr::RefCount<antlr::Token>, int, bool,
std::basic_string<char, std::char_traits<char>, std::allocator<char> >
const&)    
    0.0%    0.5%    libvkernel_ppc_release.dylib
antlr::TokenBuffer::LA(unsigned)
    0.0%    0.1%    libstdc++.6.dylib    __cxa_allocate_exception
---------------------------------------------------


Note, that from 11% of match(int)  8%  is throw()


-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051202/ef7540c2/attachment.html
From mail at martin-probst.com  Thu Dec  1 15:03:52 2005
From: mail at martin-probst.com (Martin Probst)
Date: Thu Dec  1 15:04:05 2005
Subject: [antlr-interest] Profiler of ANTLR usage
In-Reply-To: <BFB543DF.44564%sunshine@public.kherson.ua>
References: <BFB543DF.44564%sunshine@public.kherson.ua>
Message-ID: <1133478232.1426.1.camel@localhost.localdomain>

Hi Ruslan,

the last time you said you wanted to investigate some possible changes
to the ANTLR runtime. Did you make any progress on that? I think I
remember you wanted to remove the std::string part, did you manage to?
I'd be curious. Do you use semantic predicates "( ... ) =>" btw?

Martin

Am Freitag, den 02.12.2005, 00:20 +0200 schrieb Ruslan Zasukhin:
> Hi ANTLR list,
> 
> I have get some profiling. 
> 
> Simple test. We add 100,000 record using SQL INSERT into Valentina
> database.
> 
> As you can see 
> 
>         ANTLR  take     74.6% of time. This is only parsing and tree
> parsing        :-((
> 
>         Valentina do rest work to put million records in 13.6% + 4.6%
> = 18.2%
> 
> As I have always told, on top of problem are 
>     std::strings, which do a lots of  new/delete...
> 
> 
> -------------------------------------------------------------------------------
>     0.0%    99.9%    Common_SetExtesions    main    
>     0.0%    99.9%    Common_SetExtesions    Example()    
>     0.1%    99.2%    Common_SetExtesions
>    AddRecords(fbl::smart_ptr<fbl::vsql::I_Database>)    
>     0.1%    96.7%    libvkernel_ppc_debug.dylib
>    fbl::vsql::Database::SqlExecute(fbl::String const&,
> fbl::smart_ptr<fbl::ArrayOfSmartPtrs<fbl::smart_ptr<fbl::I_Value> >
> >)    
>     0.1%    96.4%    libvkernel_ppc_debug.dylib
>    fbl::vsql::SqlParser::SqlExecute(fbl::vsql::I_Database*,
> fbl::String const&,
> fbl::smart_ptr<fbl::ArrayOfSmartPtrs<fbl::smart_ptr<fbl::I_Value> >
> >)    
> 
>     0.1%    74.6%  libvkernel_ppc_debug.dylib
>    fbl::vsql::SqlParser::ParseCommand(fbl::String const&,
> fbl::vsql::Environment&)    
>    0.0%    13.6%  libvkernel_ppc_debug.dylib
>    fbl::vsql::SqlParser::PreprocessCommand(fbl::vsql::Environment&)
>    
>   0.0%    4.6%    libvkernel_ppc_debug.dylib
>    fbl::vsql::SqlParser::ProceedCommand(fbl::vsql::Environment&)    
> 
>     0.0%    2.3%    libvkernel_ppc_debug.dylib
>    fbl::vsql::Environment::~Environment [in-charge]()    
>     0.0%    0.6%    libvkernel_ppc_debug.dylib
>    fbl::vsql::Environment::Environment[in-charge](fbl::smart_ptr<fbl::vsql::I_Database>, fbl::String const&, fbl::smart_ptr<fbl::ArrayOfSmartPtrs<fbl::smart_ptr<fbl::I_Value> > >)    
>     0.1%    0.1%    libstdc++.6.dylib
>    std::basic_istringstream<char, std::char_traits<char>,
> std::allocator<char> >::str(std::basic_string<char,
> std::char_traits<char>, std::allocator<char> > const&)    
>     0.1%    0.1%    libstdc++.6.dylib    std::basic_ios<char,
> std::char_traits<char> >::clear(std::_Ios_Iostate)    
>     0.0%    0.1%    libvkernel_ppc_debug.dylib
>    fbl::Environment::~Environment [not-in-charge]()    
>     0.1%    0.1%    libvkernel_ppc_debug.dylib
>    fbl::smart_ptr<fbl::vsql::I_Database>::smart_ptr[in-charge](fbl::vsql::I_Database*, bool)    
>     0.0%    0.1%    libvkernel_ppc_debug.dylib
>    fbl::smart_ptr<fbl::vsql::I_Cursor>::operator=(fbl::vsql::I_Cursor*)    
> 
> -- 
> Best regards,
> 
> Ruslan Zasukhin
> VP Engineering and New Technology
> Paradigma Software, Inc
> 
> Valentina - Joining Worlds of Information 
> http://www.paradigmasoft.com
> 
> [I feel the need: the need for speed]

From ewbank at gmail.com  Thu Dec  1 15:12:14 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Dec  1 15:47:46 2005
Subject: [antlr-interest] Profiler of ANTLR usage
In-Reply-To: <BFB543DF.44564%sunshine@public.kherson.ua>
References: <BFB543DF.44564%sunshine@public.kherson.ua>
Message-ID: <dd3a065f0512011512x6c2a42d7v8bf9141e3471d5b5@mail.gmail.com>

One BIG improvement we're working on is being very careful to use
buildAST=false for as many passes as you can.  This reduces space as
well as time for those passes that just annotate the tree, or do very
small tree surgery operations.

Also, as Martin said, avoid "( ) =>" predicates like the plague.  Do
everything you can to use "{ }?" instead.

- Bryan

On 12/1/05, Ruslan Zasukhin <sunshine@public.kherson.ua> wrote:
>      Hi ANTLR list,
>
>  I have get some profiling.
>
>  Simple test. We add 100,000 record using SQL INSERT into Valentina database.
>
>  As you can see
>
>          ANTLR  take     74.6% of time. This is only parsing and tree parsing        :-((
>
>          Valentina do rest work to put million records in 13.6% + 4.6% = 18.2%
>
>  As I have always told, on top of problem are
>      std::strings, which do a lots of  new/delete...
>
>
>  -------------------------------------------------------------------------------
>      0.0%    99.9%    Common_SetExtesions    main
>      0.0%    99.9%    Common_SetExtesions    Example()
>      0.1%    99.2%    Common_SetExtesions    AddRecords(fbl::smart_ptr<fbl::vsql::I_Database>)
>      0.1%    96.7%    libvkernel_ppc_debug.dylib    fbl::vsql::Database::SqlExecute(fbl::String const&, fbl::smart_ptr<fbl::ArrayOfSmartPtrs<fbl::smart_ptr<fbl::I_Value> > >)
>      0.1%    96.4%    libvkernel_ppc_debug.dylib    fbl::vsql::SqlParser::SqlExecute(fbl::vsql::I_Database*, fbl::String const&, fbl::smart_ptr<fbl::ArrayOfSmartPtrs<fbl::smart_ptr<fbl::I_Value> > >)
>
>      0.1%    74.6%  libvkernel_ppc_debug.dylib    fbl::vsql::SqlParser::ParseCommand(fbl::String const&, fbl::vsql::Environment&)
>      0.0%    13.6%  libvkernel_ppc_debug.dylib    fbl::vsql::SqlParser::PreprocessCommand(fbl::vsql::Environment&)
>      0.0%    4.6%    libvkernel_ppc_debug.dylib    fbl::vsql::SqlParser::ProceedCommand(fbl::vsql::Environment&)
>
>      0.0%    2.3%    libvkernel_ppc_debug.dylib    fbl::vsql::Environment::~Environment [in-charge]()
>      0.0%    0.6%    libvkernel_ppc_debug.dylib    fbl::vsql::Environment::Environment[in-charge](fbl::smart_ptr<fbl::vsql::I_Database>, fbl::String const&, fbl::smart_ptr<fbl::ArrayOfSmartPtrs<fbl::smart_ptr<fbl::I_Value> > >)
>      0.1%    0.1%    libstdc++.6.dylib    std::basic_istringstream<char, std::char_traits<char>, std::allocator<char> >::str(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)
>      0.1%    0.1%    libstdc++.6.dylib    std::basic_ios<char, std::char_traits<char> >::clear(std::_Ios_Iostate)
>      0.0%    0.1%    libvkernel_ppc_debug.dylib    fbl::Environment::~Environment [not-in-charge]()
>      0.1%    0.1%    libvkernel_ppc_debug.dylib    fbl::smart_ptr<fbl::vsql::I_Database>::smart_ptr[in-charge](fbl::vsql::I_Database*, bool)
>      0.0%    0.1%    libvkernel_ppc_debug.dylib    fbl::smart_ptr<fbl::vsql::I_Cursor>::operator=(fbl::vsql::I_Cursor*)
>
>  --
>  Best regards,
>
>  Ruslan Zasukhin
>  VP Engineering and New Technology
>  Paradigma Software, Inc
>
>  Valentina - Joining Worlds of Information
>  http://www.paradigmasoft.com
>
>  [I feel the need: the need for speed]
>
From parrt at cs.usfca.edu  Thu Dec  1 16:25:29 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec  1 16:24:53 2005
Subject: [antlr-interest] gated production solved!
Message-ID: <E06A820C-7CA0-41F8-B845-3DE019FB8C03@cs.usfca.edu>

hooray...solved the gated predicate thing.   I now have a special  
gated predicate that literally turns off rules even when syntax says  
they will match. Discussed here:

	http://www.antlr.org/blog/antlr3/lookahead.tml

Ter
From open.zone at virgin.net  Thu Dec  1 17:11:49 2005
From: open.zone at virgin.net (Micheal J)
Date: Thu Dec  1 16:56:16 2005
Subject: [antlr-interest] Profiler 2 
In-Reply-To: <BFB54D9C.4457A%sunshine@public.kherson.ua>
Message-ID: <003e01c5f6dd$63647360$6b02a8c0@hercules>

> Note, that from 11% of match(int)  8%  is throw() 

That resonates with recent discussions about code aesthetics and raw
performance....

V3 needs to be *very* competitive performance-wise with the Coco/R's and
other LLn CCs and, with the best of the [G|LA]LR bunch or risk becoming
irrelevant imo.

The Mono compilers, #SharpDevelop's parsers, Nemerle etc should all have
been highly visible examples of ANTLR in the wild...

Looking forward to highly tweakable code generation + TreeDL.

Micheal

From open.zone at virgin.net  Thu Dec  1 17:11:49 2005
From: open.zone at virgin.net (Micheal J)
Date: Thu Dec  1 16:56:18 2005
Subject: [antlr-interest] Profiler of ANTLR usage
In-Reply-To: <BFB543DF.44564%sunshine@public.kherson.ua>
Message-ID: <003f01c5f6dd$64e71bc0$6b02a8c0@hercules>

> Simple test. We add 100,000 record using SQL INSERT into 
> Valentina database.

> As you can see 
>
>        ANTLR  take     74.6% of time. This is only parsing 
> and tree parsing        :-((

This figures make uncomfortable reading. I have a few questions if you don't
mind answering:

- Does this figure include the time taken by the lexer?

- Are you using an ANTLR v2 generated lexer?

- Are you re-using a single lexer/parser/treeparser instance to handle all
queries?


Cheers,

Micheal

From ewbank at gmail.com  Thu Dec  1 17:04:06 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Dec  1 17:04:16 2005
Subject: [antlr-interest] Profiler 2
In-Reply-To: <003e01c5f6dd$63647360$6b02a8c0@hercules>
References: <BFB54D9C.4457A%sunshine@public.kherson.ua>
	<003e01c5f6dd$63647360$6b02a8c0@hercules>
Message-ID: <dd3a065f0512011704u69d4ef83kc6e274304af9869@mail.gmail.com>

One point here.  The "8% throw" is because in C++, exceptions are
supposed to be, well, exceptional (i.e., rare).  The cost of
speculative lookahead is horrid.  If there's any "( ) =>" predicates,
they will kill you.

On 12/1/05, Micheal J <open.zone@virgin.net> wrote:
> > Note, that from 11% of match(int)  8%  is throw()
>
> That resonates with recent discussions about code aesthetics and raw
> performance....
>
> V3 needs to be *very* competitive performance-wise with the Coco/R's and
> other LLn CCs and, with the best of the [G|LA]LR bunch or risk becoming
> irrelevant imo.
>
> The Mono compilers, #SharpDevelop's parsers, Nemerle etc should all have
> been highly visible examples of ANTLR in the wild...
>
> Looking forward to highly tweakable code generation + TreeDL.
>
> Micheal
>
>
From open.zone at virgin.net  Thu Dec  1 17:36:50 2005
From: open.zone at virgin.net (Micheal J)
Date: Thu Dec  1 17:21:15 2005
Subject: [antlr-interest] Profiler 2
In-Reply-To: <dd3a065f0512011704u69d4ef83kc6e274304af9869@mail.gmail.com>
Message-ID: <004001c5f6e0$e127db40$6b02a8c0@hercules>

> One point here.  The "8% throw" is because in C++, exceptions 
> are supposed to be, well, exceptional (i.e., rare).

I think it's true for Java/C# too. Especially C# (exceptional exception
costs imo).

> The cost of speculative lookahead is horrid.

Yep.

> If there's any "( ) =>" predicates, they will kill you.

You're right again but, Ruslan's an ANTLR vet' afaict so, I'm assuming he's
taken care to avoid that tarpit. ;-)

Micheal

From parrt at cs.usfca.edu  Thu Dec  1 17:24:32 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec  1 17:23:56 2005
Subject: [antlr-interest] Profiler 2
In-Reply-To: <004001c5f6e0$e127db40$6b02a8c0@hercules>
References: <004001c5f6e0$e127db40$6b02a8c0@hercules>
Message-ID: <F681E759-2861-4C4B-A813-06B453010174@cs.usfca.edu>


On Dec 1, 2005, at 5:36 PM, Micheal J wrote:

>> One point here.  The "8% throw" is because in C++, exceptions
>> are supposed to be, well, exceptional (i.e., rare).
>
> I think it's true for Java/C# too. Especially C# (exceptional  
> exception
> costs imo).
>
>> The cost of speculative lookahead is horrid.
>
> Yep.

I think I know how to easily do syntactic predicates now without  
exceptions :)

Ter
From parrt at cs.usfca.edu  Thu Dec  1 17:27:05 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec  1 17:26:31 2005
Subject: [antlr-interest] Profiler 2 
In-Reply-To: <003e01c5f6dd$63647360$6b02a8c0@hercules>
References: <003e01c5f6dd$63647360$6b02a8c0@hercules>
Message-ID: <0C91FBBD-1A23-4D85-91D9-B0CD0C72938A@cs.usfca.edu>


On Dec 1, 2005, at 5:11 PM, Micheal J wrote:

>> Note, that from 11% of match(int)  8%  is throw()
>
> That resonates with recent discussions about code aesthetics and raw
> performance....
>
> V3 needs to be *very* competitive performance-wise with the Coco/ 
> R's and
> other LLn CCs and, with the best of the [G|LA]LR bunch or risk  
> becoming
> irrelevant imo.

Well, the ANTLR v2 generated stuff is not the fastest in the world at  
the moment but the tool is more popular than many other tools even  
so--I'm not sure we have a huge problem.  Now for compilers and  
really time-sensitive stuff, ANTLR probably has much less market  
penetration.

The v3 stuff SHOULD be much faster even w/o tweaking it yourself, but  
we'll have to see what actual numbers say.

Ter
From open.zone at virgin.net  Thu Dec  1 19:18:43 2005
From: open.zone at virgin.net (Micheal J)
Date: Thu Dec  1 19:03:14 2005
Subject: [antlr-interest] Profiler 2 
In-Reply-To: <0C91FBBD-1A23-4D85-91D9-B0CD0C72938A@cs.usfca.edu>
Message-ID: <004101c5f6ef$1d26dcf0$6b02a8c0@hercules>

> > V3 needs to be *very* competitive performance-wise with the Coco/
> > R's and
> > other LLn CCs and, with the best of the [G|LA]LR bunch or risk  
> > becoming
> > irrelevant imo.
> 
> Well, the ANTLR v2 generated stuff is not the fastest in the 
> world at  
> the moment but the tool is more popular than many other tools even  
> so--I'm not sure we have a huge problem.

My bad. I should have mentioned that I was addressing the ~20% of potential
users/applications for whom speed matters at least as much as ANTLR's
productivity benefits. Ruslan is a member of that group...

> Now for compilers and 
> really time-sensitive stuff, ANTLR probably has much less market  
> penetration.

Why do you think this is the case?. Is this strictly related to
historical/current performance or something else?.

> The v3 stuff SHOULD be much faster even w/o tweaking it 
> yourself, but  
> we'll have to see what actual numbers say.

Yep.

Micheal

From kannan.ekanath at gmail.com  Thu Dec  1 19:03:40 2005
From: kannan.ekanath at gmail.com (Kannan Ekanath)
Date: Thu Dec  1 19:03:45 2005
Subject: [antlr-interest] sql parser implementation required?
In-Reply-To: <20051201182954.80552.qmail@web30212.mail.mud.yahoo.com>
References: <65103ce80512010322v2d445f6oda7c6c6de9427d2d@mail.gmail.com>
	<20051201182954.80552.qmail@web30212.mail.mud.yahoo.com>
Message-ID: <65103ce80512011903p39b39a6cn7f98bd827aa8706@mail.gmail.com>

Peggy,
I was looking at an "Oracle" SQL parser. Isnt there any standard reusable
grammar for it :(

On 12/1/05, Peggy Fieland <madcapmaggie@yahoo.com> wrote:
>
> Kannan,
>
> AFAIK there is no "general" SQL parser.
> Also, every database has  its own variant of SQL.
>
> Peggy
>
> --- Kannan Ekanath <kannan.ekanath@gmail.com> wrote:
>
> >  Hi, Level of Expertise : BEGINNER I am of the
> > impression that antlr is some
> > sort of a library generator for parsing some input
> > based on some rules. In
> > ANTLR the input is probably a "GRAMMAR" and the
> > output is an archive/a
> > library for parsing and saying if a string follows
> > the grammar. Having said
> > this, i also believe there must be a standard SQL
> > ANTLR parser written by
> > someone. If that is the case can someone point to
> > those links? Basically i
> > have a String in Java and i want to see if it is a
> > valid SQL query (although
> > some validations like whether the table is actually
> > present in db cannot be
> > done) and if it is a valid query i want to extract
> > the bind parameters from
> > that query. Can someone please point to relevant
> > link? ANTLR seems to be a
> > very broad parser implementation and i am searching
> > if someone has written a
> > "READYMADE" reusable SQL grammar.
> >
> > PS : Cross posting at
> > http://www.jguru.com/forums/view.jsp?EID=1273892
> >
> > --
> > Kannan Ekanath
> >
>
>


--
Kannan Ekanath
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051202/e0797907/attachment.html
From open.zone at virgin.net  Thu Dec  1 19:46:30 2005
From: open.zone at virgin.net (Micheal J)
Date: Thu Dec  1 19:30:56 2005
Subject: [antlr-interest] sql parser implementation required?
In-Reply-To: <65103ce80512011903p39b39a6cn7f98bd827aa8706@mail.gmail.com>
Message-ID: <004501c5f6f2$fe5c0850$6b02a8c0@hercules>

Please don't post HTML mail to the list. Thanks.

> Peggy,
>
> I was looking at an "Oracle" SQL parser. Isnt there 
> any standard reusable grammar for it :(

Did you STFW?. Or as I like to put it "Google is your friend":
   http://www.google.com/search?q=antlr+oracle+sql+grammar


ANTLR has a website (with a grammar repository):
   www.antlr.org


Cheers,

Micheal

From mail at martin-probst.com  Thu Dec  1 23:50:51 2005
From: mail at martin-probst.com (Martin Probst)
Date: Thu Dec  1 23:50:58 2005
Subject: [antlr-interest] Profiler 2
In-Reply-To: <004101c5f6ef$1d26dcf0$6b02a8c0@hercules>
References: <004101c5f6ef$1d26dcf0$6b02a8c0@hercules>
Message-ID: <1133509851.7991.6.camel@localhost.localdomain>

Hi,

> > Well, the ANTLR v2 generated stuff is not the fastest in the 
> > world at  
> > the moment but the tool is more popular than many other tools even  
> > so--I'm not sure we have a huge problem.
> 
> My bad. I should have mentioned that I was addressing the ~20% of potential
> users/applications for whom speed matters at least as much as ANTLR's
> productivity benefits. Ruslan is a member of that group...

I consider myself being part of that group, too. However we don't have
any performance problems using Java ANTLR with a handwritten Lexer and
no ()=> at all. Or at least no real problems - faster is always better,
but our parser munges through all queries in a couple of ms.

So it's definitely possible to get good performance out of ANTLR, at
least in Java. I used it in C++ for some time too, and results were less
favorable, app. a factor 10 slower than a comparable LALR solution.

Martin

From rmann at latencyzero.com  Thu Dec  1 22:53:21 2005
From: rmann at latencyzero.com (Rick Mann)
Date: Fri Dec  2 01:40:24 2005
Subject: [antlr-interest] Help with grammar keywords
In-Reply-To: <35828BD5-B0C8-4619-BA2B-F8803CF8A3E0@latencyzero.com>
References: <35828BD5-B0C8-4619-BA2B-F8803CF8A3E0@latencyzero.com>
Message-ID: <6FB0762B-96BB-4B26-8F75-2642C8E2A2AA@latencyzero.com>

I thought I'd repost this since no one responded. Please let me know  
what else I should post. Thanks!

Hi. I was working on a grammar to parse hierarchical URIs into a URI  
with parameters. We have URIs like the following:

http://www.keepmedia.com/pubs/Esquire/
http://www.keepmedia.com/pubs/Esquire/2005
http://www.keepmedia.com/pubs/Esquire/current
http://www.keepmedia.com/pubs/Esquire/columns/Sex/
http://www.keepmedia.com/pubs/Esquire/2005/11/01/1037813
http://www.keepmedia.com/columns/Sex/


These get resolved into URIs used internally like:

/content/Content.do?pubId=19
/content/Content.do?pubId=19&itemId=1037813
/content/Content.do?pubId=19&pgv=current

For the most part, I've got a grammar that works, but one difficulty  
I'm having has to do with an optional keyword that may hang off the  
end ("current" is an example above). There are a handful of such  
special words, and they're always found at the very end of a URI.

In any case, it's not working. I've included the grammar below.  
However, it's been a few weeks since I did this, and I'm not sure  
where I left it off. Some test code I have complains bitterly. Here's  
sample output:

This works:
--------------------
Parsing: /topics/World/Europe/Western/popular
Topics path
Subtopic: World
Subtopic: Europe
Subtopic: Western
Variant: popular



This doesn't:
--------------------
Parsing: /pubs
exception: line 1:2: unexpected char: 'p'

Parsing: /pubs/
exception: line 1:2: unexpected char: 'p'

Parsing: /pubs/popular
exception: line 1:2: unexpected char: 'p'



Any suggestions would be most welcome. Sorry for the lack of more  
specific info. Thanks!


Grammar
--------------------------------


/*
URL Variants

http://localhost/pubs/
http://localhost/pubs/<pubID>
http://localhost/pubs/<pubName>
http://localhost/pubs/

http://localhost/pubs/OpinionJournal.com/suggested/
http://localhost/pubs/OpinionJournal.com/2005/03/28/727710

http://localhost/topics/

*/



class URIParser extends Parser;

options
{
	k=2;
}

path
	:
	PATHSEP!
	(	articlesPath
	|	picksPath
	|	pubsPath
	|	rfsPath
	|	topicsPath
	)
	(variant)?
	(PATHSEP!)?
	(EOL!)?
	;

protected
articlesPath
	:	"articles"			{ System.out.println("Articles path"); }
		PATHSEP!
		id:ID				{ System.out.println("Article ID: " + id.getText()); }
	;
	
protected
picksPath
	:	"picks"				{ System.out.println("Picks path"); }
		PATHSEP!
		id:ID				{ System.out.println("Picks ID: " + id.getText()); }
	;
	
protected
pubsPath
	:	PUBS!				{ System.out.println("Pubs path"); }
	(	PATHSEP!
		id:ID				{ System.out.println("Pubs ID: " + id.getText()); }
	)
	(	PATHSEP!
		articlesPath
	)?
	;
	
protected
rfsPath
	:
	(	"columns"			{ System.out.println("Columns path"); }
	|	"sections"			{ System.out.println("Sections path"); }
	|	"rfs"				{ System.out.println("rfs path"); }
	)
		PATHSEP!
		id:ID				{ System.out.println("rf ID: " + id.getText()); }
	;
	
protected
topicsPath
	:	"topics"			{ System.out.println("Topics path"); }
	(	(	PATHSEP!
			id:ID				{ System.out.println("Top topic ID: " + id.getText()); }
		)
		|
		(	PATHSEP!
			stn:STRING_LITERAL	{ System.out.println("Subtopic: " + stn.getText 
()); }
		)*
	)
	;
	
protected
variant
	:	PATHSEP!
		s:VARIANT	{ System.out.println("Variant: " + s.getText()); }
	;
	
class URILexer extends Lexer;

options
{
	k=2;
	testLiterals=true;
	filter=false;
}

	/*
tokens
{
	ARTICLES="articles";
	COLUMNS="columns";
	CURRENT="current";
	ITEMS="items";
	PICKS="picks";
	POPULAR="popular";
	PREMIUM="premium";
	PUBS="pubs";
	RFS="rfs";
	SECTIONS="sections";
	SUGGESTED="suggested";
	TOPICS="topics";
}
	*/

VARIANT
	:	COLUMNS
	|	CURRENT
	|	PICKS
	|	POPULAR
	|	PREMIUM
	|	RELATED
	|	SUGGESTED
	;


protected	COLUMNS				:	"columns";
protected	CURRENT				:	"current";
protected	PICKS				:	"picks";
protected	POPULAR				:	"popular";
protected	PREMIUM				:	"premium";
protected	RELATED				:	"related";
protected	SUGGESTED			:	"suggested";

protected	PUBS				:	"pubs";

PATHSEP
	:	(SLASH)
	;
	
ID
	:	('0'..'9')+
	;
	
STRING_LITERAL
	:	('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_'|'.')+
	;

protected
SLASH				:	'/';
EOL					:	('\r'|'\n');





-- 
Rick


From endigitalmind at yahoo.co.uk  Fri Dec  2 01:46:50 2005
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Fri Dec  2 01:46:53 2005
Subject: [antlr-interest] Switching buildAST to true causes "Invalid AST
	node type" error.
In-Reply-To: <20051201204751.36823.qmail@web30214.mail.mud.yahoo.com>
Message-ID: <20051202094650.67892.qmail@web25813.mail.ukl.yahoo.com>


--- Peggy Fieland <madcapmaggie@yahoo.com> wrote:

> Did you remember to initialize the AST factory when
> you run your parser?
> 
Well I didn't but even if I do I still get the same
error during pasrer.series.

All of the examples I've looked at just create a
lexer, create a parser and call the starting method.

---start parser.cs---
using antlr;
using antlr.collections;
using System;
using System.IO;
using System.Text;

namespace IntAndIDParser
{
	class Parser
	{
		[STAThread]
		static void Main(string[] args)
		{
			IntAndIDLexer lexer = new IntAndIDLexer(new
CharBuffer(Console.In));

			SeriesParser parser = new SeriesParser(lexer);

		
SeriesParser.initializeASTFactory(parser.getASTFactory());

			parser.series(); << Get error raised here!
		}
	}
}
---end parser.cs---
> 
> 
> --- Phil Ritchie <endigitalmind@yahoo.co.uk> wrote:
> 
> > The grammar below generates classes that build and
> > run
> > fine if buildAST is set to false. As soon as I set
> > it
> > to true (without changing anything else) my parser
> > raises an "Invalid AST node type" error. I'm not
> > trying to traverse the AST, just build it. Can
> > anyone
> > tell me what I'm doing wrong.
> > 



		
___________________________________________________________ 
To help you stay safe and secure online, we've developed the all new Yahoo! Security Centre. http://uk.security.yahoo.com
From ewbank at gmail.com  Fri Dec  2 02:05:06 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Dec  2 02:05:09 2005
Subject: [antlr-interest] Profiler 2
In-Reply-To: <1133509851.7991.6.camel@localhost.localdomain>
References: <004101c5f6ef$1d26dcf0$6b02a8c0@hercules>
	<1133509851.7991.6.camel@localhost.localdomain>
Message-ID: <dd3a065f0512020205j697f0bacg58e4fad5ea92943c@mail.gmail.com>

Wish I would have heard that several months ago - t'would have been a
make/break statement.  My impression at the time, from reading the
group, was that performance for C++ was on-par with LALR.  Now we are
beating on performance to squeeze it out.

Certainly, we got here faster than w/o ANTLR; however, management (w/
a performance-centric background :-) is worrying us to death.

On 12/2/05, Martin Probst <mail@martin-probst.com> wrote:
> So it's definitely possible to get good performance out of ANTLR, at
> least in Java. I used it in C++ for some time too, and results were less
> favorable, app. a factor 10 slower than a comparable LALR solution.
>
> Martin
>
>
From ewbank at gmail.com  Fri Dec  2 02:23:12 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Dec  2 02:23:14 2005
Subject: [antlr-interest] Help with grammar keywords
In-Reply-To: <6FB0762B-96BB-4B26-8F75-2642C8E2A2AA@latencyzero.com>
References: <35828BD5-B0C8-4619-BA2B-F8803CF8A3E0@latencyzero.com>
	<6FB0762B-96BB-4B26-8F75-2642C8E2A2AA@latencyzero.com>
Message-ID: <dd3a065f0512020223k41d421abu889797e4a01ee556@mail.gmail.com>

Hi Rick,

> Parsing: /pubs
> exception: line 1:2: unexpected char: 'p'
>
> Parsing: /pubs/
> exception: line 1:2: unexpected char: 'p'
>
> Parsing: /pubs/popular
> exception: line 1:2: unexpected char: 'p'

The first two might fail because the production for <pubsPath> requires "/"
"pubs" "/" ID, and there is no ID element in either of these inputs.  The third
might fail because the ID token is defined to recognize a sequence of digits
(no letters allowed).  This will cause

I say "might", because I find it strange tha PUBS is defined as a protected
token.  I don't use ANTLR-generated lexers, so this may be incorrect, but it
seems (from the error location reported) that "pubs" is not getting reported as
a recognized token because it's marked protected.

One thing you can do is to rebuild your parser/lexer with "-trace" and watch
what's going on.  This is usually a good way to say "wait a minute; that's
wrong..."
From ric.klaren at gmail.com  Fri Dec  2 03:09:12 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Fri Dec  2 03:09:19 2005
Subject: [antlr-interest] Segfault on tinyc and own exemple in C++,
	with debugging
In-Reply-To: <db9360ca0512010748v14249444w@mail.gmail.com>
References: <db9360ca0512010748v14249444w@mail.gmail.com>
Message-ID: <bc607a4e0512020309mb8b8b6ep8d3da7e7e75e34b3@mail.gmail.com>

On 12/1/05, Mathieu Clabaut <mathieu.clabaut@gmail.com> wrote:
>    In the process of hunting a nasty bug on my own softare using antlr
> 2.7.5 on linux, I compiled it with the following command line options
> :
>     g++ -D_GLIBCXX_DEBUG -ggdb3 -fno-inline -fkeep-inline-functions

Off the top of my head (not 100% sure): I think that you should
recompile the support library if you use those options.

Cheers,

Ric
From open.zone at virgin.net  Fri Dec  2 03:40:50 2005
From: open.zone at virgin.net (Micheal J)
Date: Fri Dec  2 03:25:12 2005
Subject: [antlr-interest] Profiler 2
In-Reply-To: <1133509851.7991.6.camel@localhost.localdomain>
Message-ID: <005301c5f735$3ff9a5a0$6b02a8c0@hercules>

> I consider myself being part of that group, too. However we 
> don't have any performance problems using Java ANTLR with a 
> handwritten Lexer and no ()=> at all. Or at least no real 
> problems - faster is always better, but our parser munges 
> through all queries in a couple of ms.
> 
> So it's definitely possible to get good performance out of 
> ANTLR, at least in Java. I used it in C++ for some time too, 
> and results were less favorable, app. a factor 10 slower than 
> a comparable LALR solution.

10x?. That's a little way out there. ANTLR C++ parsers aren't that slow
iirc. Esp. once they are compiled in release mode with optimizations turned
on. One just needs to remember to use a [f]lex scanner as the sample
demonstrates.

I wonder what factors came into play on your project.

Cheers,

Micheal

From donalmurtagh at yahoo.co.uk  Fri Dec  2 04:07:45 2005
From: donalmurtagh at yahoo.co.uk (Donal Murtagh)
Date: Fri Dec  2 04:07:52 2005
Subject: [antlr-interest] adding node to AST
Message-ID: <20051202120745.49808.qmail@web32011.mail.mud.yahoo.com>

Hi,

I'm trying to build an AST for the following type of block:

SubscriptionManager:2
{}


I need to check that the SubscriptionManager token *does* end with :INT, and add it as a node.
I'm trying to do this with this rule:


subscriptionManager!
{ boolean oldSubMgr = true; }
	:	x:"SubscriptionManager" (":" sm:INT { oldSubMgr = false; } )?
	{ 
	  #subscriptionManager = #x; 
		
	  if(oldSubMgr) {		
		throw new Exception("bad format");
	  }
	}
		LBRACE!
		RBRACE!
	;


However the ":2" is missing from the node - presumably because x only matches
"SubscriptionManager".
I previously tried to add the node in the usual way, using '^' (with the '!' removed from the rule
name and the line "#subscriptionManager = #x;" omitted).

I tried all of the following, but no luck:

x^:"SubscriptionManager" (":" sm:INT { oldSubMgr = false; } )?

x:"SubscriptionManager" (":" sm:INT { oldSubMgr = false; } )?^

x:("SubscriptionManager" (":" sm:INT { oldSubMgr = false; } )?)^


Many thanks in advance for any help!
Cheers,
Don


		
___________________________________________________________ 
WIN ONE OF THREE YAHOO! VESPAS - Enter now! - http://uk.cars.yahoo.com/features/competitions/vespa.html
From royne.borrud at gmail.com  Fri Dec  2 04:08:08 2005
From: royne.borrud at gmail.com (Royne Borrud)
Date: Fri Dec  2 04:08:13 2005
Subject: [antlr-interest] Disregarding subrule ordering
In-Reply-To: <dd3a065f0512010857g63070352w84bf042434fa3c87@mail.gmail.com>
References: <c67bc1880512010538lf9a8d6bvddf79c1b843dc46d@mail.gmail.com>
	<dd3a065f0512010857g63070352w84bf042434fa3c87@mail.gmail.com>
Message-ID: <c67bc1880512020408yd08068chdbea0eb91280df7b@mail.gmail.com>

Thanks for the suggestions. I'm new to ANLR in general and treeparsers
in particular, so I'll have to look into that a bit further I guess.
Is there some rule-of-thumb for when to use treeparsers? I've only
done some small grammars so far (mostly flex/bison), and haven't seen
the *need* for an extra step with a treeparser so far, though it might
simplify post-processing.

In this particular case, if I declare a number of booleans (or a
bitset) in my parser and do something like below:

object:
    KW_OBJECT
    IDENTIFIER
    LBRACE { //set all bools to false here
    (
        { !param1bool }? param1 { param1bool = true; }
        { !param2bool }? param2 { param2bool = true; }
        { !param3bool }? param3 { param3bool = true; }
        { !optParam1bool }? optParam1 { optParam1bool = true; }
        { !optParam2bool }? optParam2 { optParam2bool = true; }
    )*
    RBRACE { if(! (param1bool && param2bool && param3bool) ) throw ....)

Haven't tested this yet so it might not even work, but other than pure
design considerations; are there reasons for not doing this directly
in the parser?
I'm beginning to think I might just dodge this by enforcing strict
ordering and be done with it. Since I'm designing the grammar for my
own small script ground up I can do as I please... :) OTOH I really
like the free ordering...
From open.zone at virgin.net  Fri Dec  2 04:32:35 2005
From: open.zone at virgin.net (Micheal J)
Date: Fri Dec  2 04:16:54 2005
Subject: [antlr-interest] Switching buildAST to true causes "Invalid
	ASTnode type" error.
In-Reply-To: <20051202094650.67892.qmail@web25813.mail.ukl.yahoo.com>
Message-ID: <005401c5f73c$7a368920$6b02a8c0@hercules>

> --- Peggy Fieland <madcapmaggie@yahoo.com> wrote:
> 
> > Did you remember to initialize the AST factory when
> > you run your parser?
> > 
> Well I didn't but even if I do I still get the same
> error during pasrer.series.

I'll look into this later Phil. All examples are failing on my box for some
odd reason at the mo' but, I'll try and chase this down.

Incidentally, can you run the examples (e.g. calc or java) successfully?

Micheal

From endigitalmind at yahoo.co.uk  Fri Dec  2 05:34:21 2005
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Fri Dec  2 05:34:24 2005
Subject: [antlr-interest] Switching buildAST to true causes "Invalid
	ASTnode type" error.
In-Reply-To: <005401c5f73c$7a368920$6b02a8c0@hercules>
Message-ID: <20051202133421.10414.qmail@web25812.mail.ukl.yahoo.com>


--- Micheal J <open.zone@virgin.net> wrote:

> > --- Peggy Fieland <madcapmaggie@yahoo.com> wrote:
> > 
> > > Did you remember to initialize the AST factory
> when
> > > you run your parser?
> > > 
> > Well I didn't but even if I do I still get the
> same
> > error during pasrer.series.
> 
> I'll look into this later Phil. All examples are
> failing on my box for some
> odd reason at the mo' but, I'll try and chase this
> down.
> 
> Incidentally, can you run the examples (e.g. calc or
> java) successfully?

I can build and run the "imagNodeAST" example and was
using that to sanity check the problem I'm having and
thus becoming so baffled. Don't mean to be a pain in
the butt (can I say that on air?) and wish there was
more I could do to help myself. I'll try the java and
calc examples later this evening and report back.

> 
> Micheal
> 
> 



		
___________________________________________________________ 
To help you stay safe and secure online, we've developed the all new Yahoo! Security Centre. http://uk.security.yahoo.com
From ewbank at gmail.com  Fri Dec  2 06:00:15 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Dec  2 06:00:19 2005
Subject: [antlr-interest] Switching buildAST to true causes "Invalid AST
	node type" error.
In-Reply-To: <20051201201838.96846.qmail@web25814.mail.ukl.yahoo.com>
References: <20051201201838.96846.qmail@web25814.mail.ukl.yahoo.com>
Message-ID: <dd3a065f0512020600p45592627ja58a8696e0fe7a4d@mail.gmail.com>

Hi Phil,

I don't know if it will help, but...  I've had trouble with missing "#" in
actions when converting between buildAST=false and buildAST=true.

Try replacing this:

    element
        :       a:INT   {System.Console.WriteLine(a.getText());}
        |       b:ID    {System.Console.WriteLine(b.getText());}
        ;

with this:

    // note the "#" chars in the actions
    element
        :       a:INT   {System.Console.WriteLine(#a.getText());}
        |       b:ID    {System.Console.WriteLine(#b.getText());}
        ;

- Bryan

On 12/1/05, Phil Ritchie <endigitalmind@yahoo.co.uk> wrote:
> The grammar below generates classes that build and run fine if buildAST is
> set to false. As soon as I set it to true (without changing anything else) my
> parser raises an "Invalid AST node type" error. I'm not trying to traverse
> the AST, just build it. Can anyone tell me what I'm doing wrong.
From mail at martin-probst.com  Fri Dec  2 06:05:42 2005
From: mail at martin-probst.com (Martin Probst)
Date: Fri Dec  2 06:05:49 2005
Subject: [antlr-interest] Disregarding subrule ordering
In-Reply-To: <c67bc1880512020408yd08068chdbea0eb91280df7b@mail.gmail.com>
References: <c67bc1880512010538lf9a8d6bvddf79c1b843dc46d@mail.gmail.com>
	<dd3a065f0512010857g63070352w84bf042434fa3c87@mail.gmail.com>
	<c67bc1880512020408yd08068chdbea0eb91280df7b@mail.gmail.com>
Message-ID: <1133532342.7991.15.camel@localhost.localdomain>

Hi,

> In this particular case, if I declare a number of booleans (or a
> bitset) in my parser and do something like below:
> 
> object:
>     KW_OBJECT
>     IDENTIFIER
>     LBRACE { //set all bools to false here
>     (
>         { !param1bool }? param1 { param1bool = true; }
>         { !param2bool }? param2 { param2bool = true; }
>         { !param3bool }? param3 { param3bool = true; }
>         { !optParam1bool }? optParam1 { optParam1bool = true; }
>         { !optParam2bool }? optParam2 { optParam2bool = true; }
>     )*
>     RBRACE { if(! (param1bool && param2bool && param3bool) ) throw ....)
> 
> Haven't tested this yet so it might not even work, but other than pure
> design considerations; are there reasons for not doing this directly
> in the parser?

Both will work. Though many people consider it more elegant to do only
parsing and tree building in the parser, and everything that smells like
semantics is put in a later phase (separation of concerns a like, it
might make it easier to define a fixed tree structure, that is
independent of any optimisations etc.). It's mostly a matter of style.

In your case you forgot to add "|" between the single cases, otherwise I
don't see any error.

> I'm beginning to think I might just dodge this by enforcing strict
> ordering and be done with it. Since I'm designing the grammar for my
> own small script ground up I can do as I please... :) OTOH I really
> like the free ordering...

Well, that's always the question in language design, isn't it? How much
freedom to the user and how much enforcing certain coding styles. I'm
personally more a fan of a stricter style, at least for programming
languages (in contrast to XML formats).

Martin

From ewbank at gmail.com  Fri Dec  2 06:05:50 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Dec  2 06:05:53 2005
Subject: [antlr-interest] Disregarding subrule ordering
In-Reply-To: <c67bc1880512020408yd08068chdbea0eb91280df7b@mail.gmail.com>
References: <c67bc1880512010538lf9a8d6bvddf79c1b843dc46d@mail.gmail.com>
	<dd3a065f0512010857g63070352w84bf042434fa3c87@mail.gmail.com>
	<c67bc1880512020408yd08068chdbea0eb91280df7b@mail.gmail.com>
Message-ID: <dd3a065f0512020605x298499e7o54fb9b61aab5c769@mail.gmail.com>

Just adding the necessary actions to the parser works too, of course. 
There's no fundamental reason you /can't/ to it in the parser; I just
find that a separation of concerns makes everything simpler.

My rule of thumb is: if it isn't purely syntax, it doesn't belong in
the parser.  That said, yacc grammars generally blur the line because
there's no concept of tree walking where you can easily place the
semantic rules.

... ... ...

By the way, make sure to add the "|" between the alternatives in the
major block, or you will spend hours looking - and seeing it as if
they are there...

Change this:

    object:
        KW_OBJECT
        IDENTIFIER
        LBRACE { //set all bools to false here
        (
            { !param1bool }? param1 { param1bool = true; }
            { !param2bool }? param2 { param2bool = true; }
            { !param3bool }? param3 { param3bool = true; }
            { !optParam1bool }? optParam1 { optParam1bool = true; }
            { !optParam2bool }? optParam2 { optParam2bool = true; }
        )*
        RBRACE { if(! (param1bool && param2bool && param3bool) ) throw ....)
    ;

To this:

    object:
        KW_OBJECT
        IDENTIFIER
        LBRACE { //set all bools to false here
        (
        |   { !param1bool }? param1 { param1bool = true; }
        |   { !param2bool }? param2 { param2bool = true; }
        |   { !param3bool }? param3 { param3bool = true; }
        |   { !optParam1bool }? optParam1 { optParam1bool = true; }
        |   { !optParam2bool }? optParam2 { optParam2bool = true; }
        )*
        RBRACE { if(! (param1bool && param2bool && param3bool) ) throw ....)
    ;

On 12/2/05, Royne Borrud <royne.borrud@gmail.com> wrote:
> Thanks for the suggestions. I'm new to ANLR in general and treeparsers
> in particular, so I'll have to look into that a bit further I guess.
> Is there some rule-of-thumb for when to use treeparsers? I've only
> done some small grammars so far (mostly flex/bison), and haven't seen
> the *need* for an extra step with a treeparser so far, though it might
> simplify post-processing.
From mail at martin-probst.com  Fri Dec  2 06:14:52 2005
From: mail at martin-probst.com (Martin Probst)
Date: Fri Dec  2 06:14:59 2005
Subject: [antlr-interest] Profiler 2
In-Reply-To: <005301c5f735$3ff9a5a0$6b02a8c0@hercules>
References: <005301c5f735$3ff9a5a0$6b02a8c0@hercules>
Message-ID: <1133532892.7991.24.camel@localhost.localdomain>

> 10x?. That's a little way out there. ANTLR C++ parsers aren't that slow
> iirc. Esp. once they are compiled in release mode with optimizations turned
> on. One just needs to remember to use a [f]lex scanner as the sample
> demonstrates.
>
> I wonder what factors came into play on your project.

Well, a keyword free language which made the (ANTLR-generated) lexer
very complex, a programmer that tried to avoid to much hassle by working
around some more complexity in the lexer with ()=> blocks, etc. So no
flex there.

On the other hand, the LALR guy actually wrote his own LALR(1) parser
generation tool for the job. Don't ask me why. Needless to say that my
parser was working, tested & finished in about 1 month and his wasn't
really done after 6 (and of course much more error prone).

My point was not that 10x is really a representative number, but a
naive/quick implementation using only ANTLR (no flex) can be
significantly slower than a LALR parser, without making really stupid
errors on the ANTLR part.

I'm pretty sure that with a hand-coded/flex Lexer and some more
optimisations this would have gone down significantly, and there would
have been plenty of time for that in the 5 month productivity
difference ;-)

Martin

From mail at martin-probst.com  Fri Dec  2 06:22:30 2005
From: mail at martin-probst.com (Martin Probst)
Date: Fri Dec  2 06:22:34 2005
Subject: [antlr-interest] adding node to AST
In-Reply-To: <20051202120745.49808.qmail@web32011.mail.mud.yahoo.com>
References: <20051202120745.49808.qmail@web32011.mail.mud.yahoo.com>
Message-ID: <1133533350.7991.32.camel@localhost.localdomain>

Hi,

> I need to check that the SubscriptionManager token *does* end with :INT, and add it as a node.

So why is the (":" INT) block optional then? Better leave syntax
analysis and errors to ANTLR.

> subscriptionManager!
> { boolean oldSubMgr = true; }
> 	:	x:"SubscriptionManager" (":" sm:INT { oldSubMgr = false; } )?
> 	{ 
> 	  #subscriptionManager = #x; 
> 		
> 	  if(oldSubMgr) {		
> 		throw new Exception("bad format");
> 	  }
> 	}
> 		LBRACE!
> 		RBRACE!
> 	;

Well, with the "!" no AST construction takes place in the rule, so the
ASTs for ":" and "sm:INT" are not attached anywhere. If you want them,
you have to add them manually in this case:
> x:"SubscriptionManager" col:":" sm:INT
> { #subscriptionManager = #(#x, #col, #sm); }

or, preferrably without action code 
(and with construction on, e.g. no "!"):
> x:"SubscriptionManager"^ col:":" sm:INT

This will give you
    x
  /   \
 col  sm

(Do you really need the ":"?)

> I previously tried to add the node in the usual way, using '^' (with the '!' removed from the rule
> name and the line "#subscriptionManager = #x;" omitted).

The above should work.

> I tried all of the following, but no luck:
> x^:"SubscriptionManager" (":" sm:INT { oldSubMgr = false; } )?
> x:"SubscriptionManager" (":" sm:INT { oldSubMgr = false; } )?^
> x:("SubscriptionManager" (":" sm:INT { oldSubMgr = false; } )?)^

I think those are not syntactically correct in ANTLR, are they? There is
a section in the manual about tree construction, though it's quite
hidden.

Martin

From endigitalmind at yahoo.co.uk  Fri Dec  2 06:56:01 2005
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Fri Dec  2 06:56:03 2005
Subject: [antlr-interest] Switching buildAST to true causes "Invalid AST
	node type" error.
In-Reply-To: <dd3a065f0512020600p45592627ja58a8696e0fe7a4d@mail.gmail.com>
Message-ID: <20051202145601.8005.qmail@web25801.mail.ukl.yahoo.com>


--- Bryan Ewbank <ewbank@gmail.com> wrote:

> Hi Phil,
> 
> I don't know if it will help, but...  I've had
> trouble with missing "#" in
> actions when converting between buildAST=false and
> buildAST=true.
> 
> Try replacing this:
> 
>     element
>         :       a:INT  
> {System.Console.WriteLine(a.getText());}
>         |       b:ID   
> {System.Console.WriteLine(b.getText());}
>         ;
> 
> with this:
> 
>     // note the "#" chars in the actions
>     element
>         :       a:INT  
> {System.Console.WriteLine(#a.getText());}
>         |       b:ID   
> {System.Console.WriteLine(#b.getText());}
>         ;

This brings me back to a place I've been before
(though I thought you were onto something), it raises
a System.IndexOutOfRangeException - "Index was outside
the bounds of the array." at:
FactoryEntry	entry = heteroList_[nodeTypeIndex];
in ASTFactory.cs so does
     element
         :       #a:INT  
 {System.Console.WriteLine(a.getText());}
         |       #b:ID   
 {System.Console.WriteLine(b.getText());}
         ;

> 
> - Bryan
> 
> On 12/1/05, Phil Ritchie <endigitalmind@yahoo.co.uk>
> wrote:
> > The grammar below generates classes that build and
> run fine if buildAST is
> > set to false. As soon as I set it to true (without
> changing anything else) my
> > parser raises an "Invalid AST node type" error.
> I'm not trying to traverse
> > the AST, just build it. Can anyone tell me what
> I'm doing wrong.
> 




		
___________________________________________________________ 
Yahoo! Model Search 2005 - Find the next catwalk superstars - http://uk.news.yahoo.com/hot/model-search/
From donalmurtagh at yahoo.co.uk  Fri Dec  2 07:13:35 2005
From: donalmurtagh at yahoo.co.uk (Donal Murtagh)
Date: Fri Dec  2 07:13:38 2005
Subject: [antlr-interest] adding node to AST
In-Reply-To: <1133533350.7991.32.camel@localhost.localdomain>
Message-ID: <20051202151335.95359.qmail@web32001.mail.mud.yahoo.com>

Thanks very much for your response. Sorry, but I wasn't clear about what I'm trying to do in my
original mail. The block I'm trying to process looks like this

SubscriptionManager:2
{
 /* Stuff not relevant to this discussion */
}

What I want is to add the *entire* token as a node e.g. "SubscriptionManager:2", but I need to
check if the token is just "SubscriptionManager", so I can print out a particular message if it
is.

That's why I was trying things like 

x:"SubscriptionManager" (":" sm:INT { oldSubMgr = false; } )?^

I've almost figured out how to do this, my rule now looks like this:

subscriptionManager!
{ boolean badFormat = true; }
	:	x:"SubscriptionManager" (":" sm:INT { badFormat = false; } )?
	{ if(badFormat) {
		ChargeFileProblem problem = new ChargeFileProblem(x, 
			"'SubscriptionManager' block is no longer legal.");
		throw new ChargeFileException(problem);
	  }
	  
	  String nodeText = "SubscriptionManager:" + sm.getText();
	  // add the AST node
	  #subscriptionManager = #(#[SUBSCRIPTION_MANAGER, nodeText],
	  		#subscriptionManager);	  	
	  	
	}
		LBRACE
			(subscriptionLevel)*			
		RBRACE
	;


This does add SubscriptionManager:X as a node, but any nodes that are added in the
subscriptionLevel rule are not added as children of SubscriptionManager:X (which is what I want),
but as siblings of SubscriptionManager:X.

If I turn construction on (and put '!' after the elements I don't want added to the AST), the
result is still the same.

Thanks Again,
Don


> > I need to check that the SubscriptionManager token *does* end with :INT, and add it as a node.
> 
> So why is the (":" INT) block optional then? Better leave syntax
> analysis and errors to ANTLR.

Basically so that I can print out a friendly error message.

> 
> > subscriptionManager!
> > { boolean oldSubMgr = true; }
> > 	:	x:"SubscriptionManager" (":" sm:INT { oldSubMgr = false; } )?
> > 	{ 
> > 	  #subscriptionManager = #x; 
> > 		
> > 	  if(oldSubMgr) {		
> > 		throw new Exception("bad format");
> > 	  }
> > 	}
> > 		LBRACE!
> > 		RBRACE!
> > 	;
> 
> Well, with the "!" no AST construction takes place in the rule, so the
> ASTs for ":" and "sm:INT" are not attached anywhere. If you want them,
> you have to add them manually in this case:
> > x:"SubscriptionManager" col:":" sm:INT
> > { #subscriptionManager = #(#x, #col, #sm); }
> 
> or, preferrably without action code 
> (and with construction on, e.g. no "!"):
> > x:"SubscriptionManager"^ col:":" sm:INT
> 
> This will give you
>     x
>   /   \
>  col  sm
> 
> (Do you really need the ":"?)
> 
> > I previously tried to add the node in the usual way, using '^' (with the '!' removed from the
> rule
> > name and the line "#subscriptionManager = #x;" omitted).
> 
> The above should work.
> 
> > I tried all of the following, but no luck:
> > x^:"SubscriptionManager" (":" sm:INT { oldSubMgr = false; } )?
> > x:"SubscriptionManager" (":" sm:INT { oldSubMgr = false; } )?^
> > x:("SubscriptionManager" (":" sm:INT { oldSubMgr = false; } )?)^
> 
> I think those are not syntactically correct in ANTLR, are they? There is
> a section in the manual about tree construction, though it's quite
> hidden.
> 
> Martin
> 
> 



		
___________________________________________________________ 
WIN ONE OF THREE YAHOO! VESPAS - Enter now! - http://uk.cars.yahoo.com/features/competitions/vespa.html
From madcapmaggie at yahoo.com  Fri Dec  2 07:37:53 2005
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Fri Dec  2 07:39:48 2005
Subject: [antlr-interest] sql parser implementation required?
In-Reply-To: <65103ce80512011903p39b39a6cn7f98bd827aa8706@mail.gmail.com>
Message-ID: <20051202153753.9425.qmail@web30204.mail.mud.yahoo.com>

There's an SQL oracle grammar  oracle 7 -- very old)
and a Pl/SQL grammar.

They are a place to start.   However, complete oracle
10 is pretty hairy.

Peggy 



--- Kannan Ekanath <kannan.ekanath@gmail.com> wrote:

> Peggy,
> I was looking at an "Oracle" SQL parser. Isnt there
> any standard reusable
> grammar for it :(
> 
> On 12/1/05, Peggy Fieland <madcapmaggie@yahoo.com>
> wrote:
> >
> > Kannan,
> >
> > AFAIK there is no "general" SQL parser.
> > Also, every database has  its own variant of SQL.
> >
> > Peggy
> >
> > --- Kannan Ekanath <kannan.ekanath@gmail.com>
> wrote:
> >
> > >  Hi, Level of Expertise : BEGINNER I am of the
> > > impression that antlr is some
> > > sort of a library generator for parsing some
> input
> > > based on some rules. In
> > > ANTLR the input is probably a "GRAMMAR" and the
> > > output is an archive/a
> > > library for parsing and saying if a string
> follows
> > > the grammar. Having said
> > > this, i also believe there must be a standard
> SQL
> > > ANTLR parser written by
> > > someone. If that is the case can someone point
> to
> > > those links? Basically i
> > > have a String in Java and i want to see if it is
> a
> > > valid SQL query (although
> > > some validations like whether the table is
> actually
> > > present in db cannot be
> > > done) and if it is a valid query i want to
> extract
> > > the bind parameters from
> > > that query. Can someone please point to relevant
> > > link? ANTLR seems to be a
> > > very broad parser implementation and i am
> searching
> > > if someone has written a
> > > "READYMADE" reusable SQL grammar.
> > >
> > > PS : Cross posting at
> > > http://www.jguru.com/forums/view.jsp?EID=1273892
> > >
> > > --
> > > Kannan Ekanath
> > >
> >
> >
> 
> 
> --
> Kannan Ekanath
> 

From ewbank at gmail.com  Fri Dec  2 07:40:26 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Dec  2 07:41:09 2005
Subject: [antlr-interest] adding node to AST
In-Reply-To: <20051202151335.95359.qmail@web32001.mail.mud.yahoo.com>
References: <1133533350.7991.32.camel@localhost.localdomain>
	<20051202151335.95359.qmail@web32001.mail.mud.yahoo.com>
Message-ID: <dd3a065f0512020740o715dfd78j3f64c3cc1a738e22@mail.gmail.com>

Hi Donal,

Since you're calling it a *token* rather than a sequence of tokens, it
seems you should be gathering these in the lexer - or is arbitrary
whitespace between the elements allowed, like this:
               SubscriptionManager
               :                            2345
               { }

... ... ...
Assuming that this is a *token*, rather than a sequence of tokens,
something like the following will work:

    // somewhat abstract lex syntax; sorry...
    SubscriptionManager:[0-9][0-9]*     { return SUBSCRIPTION_MANAGER; }

This way, every token that starts with SubscriptionManager: and has a
trailing integer component will be folded into one abstract token, and
allows your grammar to look like this:

    subscriptionManager!
        x:SUBSCRIPTION_MANAGER^ LBRACE! (subscriptionLevel)* RBRACE!
        | "SubscriptionManager"
            {
                // choke and die here!;
            }
    ;

This results in a parent node of SUBSCRIPTION_MANAGER, containing the
appropriate string, and the trees produced by the <subscriptionLevel>
elements are the children:
    [SUBSCRIPTION_MANAGER,"SubscriptionManager:01"]
        [SUBSCRIPTION_LEVEL, ... ]
        [SUBSCRIPTION_LEVEL, ... ]
        [SUBSCRIPTION_LEVEL, ... ]


Hope this helps,
- Bryan Ewbank
From donalmurtagh at yahoo.co.uk  Fri Dec  2 08:24:37 2005
From: donalmurtagh at yahoo.co.uk (Donal Murtagh)
Date: Fri Dec  2 08:24:40 2005
Subject: [antlr-interest] adding node to AST
In-Reply-To: <dd3a065f0512020740o715dfd78j3f64c3cc1a738e22@mail.gmail.com>
Message-ID: <20051202162437.92221.qmail@web32006.mail.mud.yahoo.com>

Hi ,

Thanks very much for your response, however I don't think I can use your suggestion "as is".
Here's the subscriptionManager rule reproduced verbatim (I'd previosuly simplified it to avoid
confusion):

subscriptionManager[ChargeFile cf]
{ boolean oldSubMgr = true; }
	:	x:"SubscriptionManager"! (":"! sm:INT! { oldSubMgr = false; } )?
	{ if(oldSubMgr) {
		ChargeFileProblem problem = new ChargeFileProblem(x, 
			"'SubscriptionManager' block is no longer legal.");
		throw new ChargeFileException(problem);
	  }
	  
	  String nodeText = "SubscriptionManager:" + sm.getText();
	  // add the AST node
	  #subscriptionManager = #(#[SUBSCRIPTION_MANAGER, nodeText],
	  		#subscriptionManager);	  	
	  	
	  cf.addSubscriptionManager(sm);
	}
		LBRACE!
			(subscriptionLevel[cf.getSubscriptionManager()])*			
		RBRACE!
	;


As you can see if the token is in the correct format (SubscriptionManager:N), then we call 

cf.addSubscriptionManager(N);

The argument N is of type Token. If I treat the SubscriptionManager:N as a single token (as you
suggested), then I guess I could create this argument by stripping off the trailing integer and
calling:

Token N = new Token(Token.MIN_USER_TYPE, strippedInt);

Any other comments would be very welcome!

Cheers,
Don
--- Bryan Ewbank <ewbank@gmail.com> wrote:

> Hi Donal,
> 
> Since you're calling it a *token* rather than a sequence of tokens, it
> seems you should be gathering these in the lexer - or is arbitrary
> whitespace between the elements allowed, like this:
>                SubscriptionManager
>                :                            2345
>                { }
> 
> ... ... ...
> Assuming that this is a *token*, rather than a sequence of tokens,
> something like the following will work:
> 
>     // somewhat abstract lex syntax; sorry...
>     SubscriptionManager:[0-9][0-9]*     { return SUBSCRIPTION_MANAGER; }
> 
> This way, every token that starts with SubscriptionManager: and has a
> trailing integer component will be folded into one abstract token, and
> allows your grammar to look like this:
> 
>     subscriptionManager!
>         x:SUBSCRIPTION_MANAGER^ LBRACE! (subscriptionLevel)* RBRACE!
>         | "SubscriptionManager"
>             {
>                 // choke and die here!;
>             }
>     ;
> 
> This results in a parent node of SUBSCRIPTION_MANAGER, containing the
> appropriate string, and the trees produced by the <subscriptionLevel>
> elements are the children:
>     [SUBSCRIPTION_MANAGER,"SubscriptionManager:01"]
>         [SUBSCRIPTION_LEVEL, ... ]
>         [SUBSCRIPTION_LEVEL, ... ]
>         [SUBSCRIPTION_LEVEL, ... ]
> 
> 
> Hope this helps,
> - Bryan Ewbank
> 



		
___________________________________________________________ 
Does your mail provider give you FREE antivirus protection? 
Get Yahoo! Mail http://uk.mail.yahoo.com
From jonathan.malek at gmail.com  Fri Dec  2 09:05:20 2005
From: jonathan.malek at gmail.com (Jonathan Malek)
Date: Fri Dec  2 09:05:28 2005
Subject: [antlr-interest] Size of the ANTLR-C#-.NET "community"?
In-Reply-To: <7AE2E53336B37440A20C9590DB11BCB9713FBB@EXVS01.ex.dslextreme.net>
References: <7AE2E53336B37440A20C9590DB11BCB9713FBB@EXVS01.ex.dslextreme.net>
Message-ID: <bb389fda0512020905k7ab1cc2o9a29ac2c15cdfc16@mail.gmail.com>

I picked ANTLR for a C# search project with a very large number of
simultaneous users.  We ran into only one issue under load (the solution to
which I believe I found on this list, regarding the eventual failure in a
multi-threaded environment of the ASTPair queue), which I was able to fix in
source.

The performance is fantastic, and while it is true that the user-base seems
very Java-centric, we were able to get a complex grammar in place in a
matter of weeks with just one C# developer, and no prior experience in the
arcana of parser theory.


On 11/29/05, Andy Voelkel <andy@exchange.voelkel.us> wrote:
>
> Hi all,
> I am quite intrigued by the possibilities of ANTLR, and have been
> perusing the site. One thing that strikes me is that it seems very
> Java/Linux-centric.
> Our development is all Windows/C#/.NET based, so that is a potential
> mismatch.
> Are there a substantial number of ANTLR users who use C#/.NET as a host
> platform? Or would that be swimming upstream?
> Thanks!
> - Andy
> P.S. If using ANTLR user Windows/.NET is not a realistic/painless
> option, are there other parser/lexer packages that anyone could
> recommend?
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051202/97df737a/attachment.html
From parrt at cs.usfca.edu  Fri Dec  2 09:59:35 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec  2 09:58:56 2005
Subject: [antlr-interest] Profiler 2
In-Reply-To: <1133509851.7991.6.camel@localhost.localdomain>
References: <004101c5f6ef$1d26dcf0$6b02a8c0@hercules>
	<1133509851.7991.6.camel@localhost.localdomain>
Message-ID: <8522676D-1A8E-4829-8637-3A52B776DD84@cs.usfca.edu>


On Dec 1, 2005, at 11:50 PM, Martin Probst wrote:
> I consider myself being part of that group, too. However we don't have
> any performance problems using Java ANTLR with a handwritten Lexer and
> no ()=> at all. Or at least no real problems - faster is always  
> better,
> but our parser munges through all queries in a couple of ms.

Yes, I'm pretty sure the lexer mechanism is *the* main bottleneck in  
v2 and then overuse of (...)=> predicates.

The new lexers are much more efficient and there is PLENTY of room to  
remove the obvious stupid generated code; I'll get to that later when  
I finish all functionality.

Ter
From ewbank at gmail.com  Fri Dec  2 10:54:23 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Dec  2 10:54:28 2005
Subject: [antlr-interest] Profiler 2
In-Reply-To: <8522676D-1A8E-4829-8637-3A52B776DD84@cs.usfca.edu>
References: <004101c5f6ef$1d26dcf0$6b02a8c0@hercules>
	<1133509851.7991.6.camel@localhost.localdomain>
	<8522676D-1A8E-4829-8637-3A52B776DD84@cs.usfca.edu>
Message-ID: <dd3a065f0512021054m53af8744h60ba0794cfd212ca@mail.gmail.com>

Don't mean to step on any toes, but Is there interest in doing a
v2.7.x C++ codegen focused on performance?  The code generator is not
for the faint of heart, but if we have ideas as to what we want to do,
perhaps we can explore.

- Bryan "make it right, then make it fast" Ewbank
From jungdl at ornl.gov  Fri Dec  2 12:22:53 2005
From: jungdl at ornl.gov (David Jung)
Date: Fri Dec  2 12:22:57 2005
Subject: [antlr-interest] Size of the ANTLR-C#-.NET "community"?
In-Reply-To: <20051202200003.995E0DCD46@www.antlr.org>
References: <20051202200003.995E0DCD46@www.antlr.org>
Message-ID: <4390AD1D.3040707@ornl.gov>

I've also been using ANTLR (v2.x) with C# and a fairly sizable grammar
with good results (one for a custom language with C++ order complexity).
Mostly under Linux/Mono rather than Window/.NET
(and using .NET 2.0 generics).
Due to the similarity between Java & C#, talk on the list is fairly easily
'translatable' in practice.  I've also used ANTLR from Java, but my first
experience was via C#.
I've not been working on the compiler/interpreter for a while now, but
am looking forward to getting back to it and converting over to ANTLR v3.
-David.

>Date: Fri, 2 Dec 2005 09:05:20 -0800
>From: Jonathan Malek <jonathan.malek@gmail.com>
>Subject: Re: [antlr-interest] Size of the ANTLR-C#-.NET "community"?
>To: ANTLR Interest <antlr-interest@antlr.org>
>Message-ID:
>	<bb389fda0512020905k7ab1cc2o9a29ac2c15cdfc16@mail.gmail.com>
>Content-Type: text/plain; charset="iso-8859-1"
>
>I picked ANTLR for a C# search project with a very large number of
>simultaneous users.  We ran into only one issue under load (the solution to
>which I believe I found on this list, regarding the eventual failure in a
>multi-threaded environment of the ASTPair queue), which I was able to fix in
>source.
>
>The performance is fantastic, and while it is true that the user-base seems
>very Java-centric, we were able to get a complex grammar in place in a
>matter of weeks with just one C# developer, and no prior experience in the
>arcana of parser theory.
>
>
>On 11/29/05, Andy Voelkel <andy@exchange.voelkel.us> wrote:
>  
>
>>Hi all,
>>I am quite intrigued by the possibilities of ANTLR, and have been
>>perusing the site. One thing that strikes me is that it seems very
>>Java/Linux-centric.
>>Our development is all Windows/C#/.NET based, so that is a potential
>>mismatch.
>>Are there a substantial number of ANTLR users who use C#/.NET as a host
>>platform? Or would that be swimming upstream?
>>Thanks!
>>- Andy
>>P.S. If using ANTLR user Windows/.NET is not a realistic/painless
>>option, are there other parser/lexer packages that anyone could
>>recommend?
>>
>>    
>>

From endigitalmind at yahoo.co.uk  Fri Dec  2 12:31:10 2005
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Fri Dec  2 12:31:14 2005
Subject: [antlr-interest] Switching buildAST to true causes "Invalid
	ASTnode type" error.
In-Reply-To: <005401c5f73c$7a368920$6b02a8c0@hercules>
Message-ID: <20051202203110.26634.qmail@web25801.mail.ukl.yahoo.com>


--- Micheal J <open.zone@virgin.net> wrote:

> > --- Peggy Fieland <madcapmaggie@yahoo.com> wrote:
> > 
> > > Did you remember to initialize the AST factory
> when
> > > you run your parser?
> > > 
> > Well I didn't but even if I do I still get the
> same
> > error during pasrer.series.
> 
> I'll look into this later Phil. All examples are
> failing on my box for some
> odd reason at the mo' but, I'll try and chase this
> down.
> 
> Incidentally, can you run the examples (e.g. calc or
> java) successfully?

Just tried the calc example and it works a treat. In
my code COMMA has a token type of 6 in *TokenTypes.cs
but the heteroList index trying to be retrieved for
the attempted assignment to FactoryEntry in
ASTFactory.cs is 7.

> 
> Micheal
> 
> 



	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com
From gudnabrsam at yahoo.com  Fri Dec  2 13:06:49 2005
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Fri Dec  2 13:06:51 2005
Subject: [antlr-interest] Switching buildAST to true causes "Invalid
	ASTnode type" error.
In-Reply-To: <20051202203110.26634.qmail@web25801.mail.ukl.yahoo.com>
Message-ID: <20051202210649.74947.qmail@web30908.mail.mud.yahoo.com>

I am not sure if you mean these errors are in a parser
or a treeparser... but whichever, if the offending
*parser and the corresponding lexer are defined in
separate files, you would want to make sure the
*TokenTypes.txt file is in your current directory when
you Tool the offending *parser's grammar file. 
Apologies if this is unrelated but I spent quite
awhile agonizing over this yesterday.

HTH,
Matt

--- Phil Ritchie <endigitalmind@yahoo.co.uk> wrote:

> 
> --- Micheal J <open.zone@virgin.net> wrote:
> 
> > > --- Peggy Fieland <madcapmaggie@yahoo.com>
> wrote:
> > > 
> > > > Did you remember to initialize the AST factory
> > when
> > > > you run your parser?
> > > > 
> > > Well I didn't but even if I do I still get the
> > same
> > > error during pasrer.series.
> > 
> > I'll look into this later Phil. All examples are
> > failing on my box for some
> > odd reason at the mo' but, I'll try and chase this
> > down.
> > 
> > Incidentally, can you run the examples (e.g. calc
> or
> > java) successfully?
> 
> Just tried the calc example and it works a treat. In
> my code COMMA has a token type of 6 in
> *TokenTypes.cs
> but the heteroList index trying to be retrieved for
> the attempted assignment to FactoryEntry in
> ASTFactory.cs is 7.
> 
> > 
> > Micheal
> > 
> > 
> 
> 
> 
> 	
> 	
> 		
>
___________________________________________________________
> 
> Yahoo! Messenger - NEW crystal clear PC to PC
> calling worldwide with voicemail
> http://uk.messenger.yahoo.com
> 



		
__________________________________ 
Start your day with Yahoo! - Make it your home page! 
http://www.yahoo.com/r/hs
From mail at martin-probst.com  Fri Dec  2 15:31:06 2005
From: mail at martin-probst.com (Martin Probst)
Date: Fri Dec  2 15:31:15 2005
Subject: [antlr-interest] adding node to AST
In-Reply-To: <20051202151335.95359.qmail@web32001.mail.mud.yahoo.com>
References: <20051202151335.95359.qmail@web32001.mail.mud.yahoo.com>
Message-ID: <1133566266.9363.4.camel@localhost.localdomain>

Hi,

> If I turn construction on (and put '!' after the elements I don't want added to the AST), the
> result is still the same.

If I understand you correctly, then your code is correct.

This sounds a lot like a bug I ran into (see earlier on this list). It's
related to optional blocks, tree construction and action code. I really
don't have a clue what's going on...

I've been too lazy to really investigate (sorry!) and provide a
"working" bug report. I had a workaround and after ANTLR 3 world peace
will come anyways. Terence couldn't reproduce it, but maybe it's worth
investigating if someone else also runs into it?

Martin

From parrt at cs.usfca.edu  Fri Dec  2 15:46:06 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec  2 15:45:25 2005
Subject: [antlr-interest] linear backtracking :)
Message-ID: <369059D0-F56A-4171-9777-D2A4059E952C@cs.usfca.edu>

Howdy.

I have read Bryan Ford's extensions of my syntactic predicates.  Here  
is a summary of my thoughts:

http://www.antlr.org/blog/antlr3/lookahead.tml

Basically, I'll LL(*) (arbitrary automatic regular lookahead) until I  
find an ambiguous decision and then (only for those ambiguous  
sequences within the decision) backtrack.  Once I commit to a parse,  
all memoized data from before that input position can be thrown away. :)

Ter
From jimi at temporal-wave.com  Fri Dec  2 16:26:12 2005
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri Dec  2 16:29:24 2005
Subject: [antlr-interest] Profiler 2
References: <004101c5f6ef$1d26dcf0$6b02a8c0@hercules><1133509851.7991.6.camel@localhost.localdomain><8522676D-1A8E-4829-8637-3A52B776DD84@cs.usfca.edu>
	<dd3a065f0512021054m53af8744h60ba0794cfd212ca@mail.gmail.com>
Message-ID: <B36CCC332A32904F8FA3DE134A23533608A4CB@wavemachine.temporal-wave.com>

I would think that by the time you have changed the existing code generator either Ric would have finished the ANTLR3 c++ generator, or I will have finished the ANTLR3 C code generator. I think that either of these should make a project such as this unnecessary unless you absolutely must only use 2.7.x... 
 
... or we both screw up ;-)
 
Jim

________________________________

From: antlr-interest-bounces@antlr.org on behalf of Bryan Ewbank
Sent: Fri 12/2/2005 10:54 AM
To: ANTLR Interest
Subject: Re: [antlr-interest] Profiler 2



Don't mean to step on any toes, but Is there interest in doing a
v2.7.x C++ codegen focused on performance?  The code generator is not
for the faint of heart, but if we have ideas as to what we want to do,
perhaps we can explore.

- Bryan "make it right, then make it fast" Ewbank


From ewbank at gmail.com  Fri Dec  2 16:42:26 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Dec  2 16:42:28 2005
Subject: [antlr-interest] Profiler 2
In-Reply-To: <B36CCC332A32904F8FA3DE134A23533608A4CB@wavemachine.temporal-wave.com>
References: <004101c5f6ef$1d26dcf0$6b02a8c0@hercules>
	<1133509851.7991.6.camel@localhost.localdomain>
	<8522676D-1A8E-4829-8637-3A52B776DD84@cs.usfca.edu>
	<dd3a065f0512021054m53af8744h60ba0794cfd212ca@mail.gmail.com>
	<B36CCC332A32904F8FA3DE134A23533608A4CB@wavemachine.temporal-wave.com>
Message-ID: <dd3a065f0512021642i5e35399i2fe3339c2c65a627@mail.gmail.com>

That does sound nice, but I'm working in a production environment
and cannot afford the risks associated with being an early adopter.

On 12/2/05, Jim Idle <jimi@temporal-wave.com> wrote:
> I would think that by the time you have changed the existing code generator
> either Ric would have finished the ANTLR3 c++ generator, or I will have
> finished the ANTLR3 C code generator. I think that either of these should
> make a project such as this unnecessary unless you absolutely must only use
> 2.7.x...
>
> ... or we both screw up ;-)
>
> Jim
From parrt at cs.usfca.edu  Fri Dec  2 18:46:36 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec  2 18:45:59 2005
Subject: [antlr-interest] linear backtracking part II (implementation)
Message-ID: <28C9982F-8EF7-4AB6-BEE2-5D49F559CA92@cs.usfca.edu>

Ok, added details of implementation.  Easy.  Coding as we speak...

http://www.antlr.org/blog/antlr3/lookahead.tml

Ter
From parrt at cs.usfca.edu  Fri Dec  2 20:27:22 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec  2 20:26:41 2005
Subject: [antlr-interest] backtracking works :)
Message-ID: <80724A7C-EF48-4080-BDF7-C2BA739DF6EB@cs.usfca.edu>

Ok, 1.5 hours of work and I convinced antlr to generated backtracking  
code for syntactic predicates; naturally, I'll have to find the holes  
tomorrow.  The memoization shouldn't take more than an hour tomorrow  
or when I can get back to this.   I updated the blog as I went:

http://www.antlr.org/blog/antlr3/lookahead.tml

No exceptions used now.  Not even a return value. ;)  The new  
template stuff and v3 code base just kicks butt.

Here is my example:

grammar W;

a : (b)=> b {System.out.println("alt 1");}
   | c       {System.out.println("alt 2");}
   ;

b : '(' 'x' ')' ;

c : '(' c ')' | 'x' ;

WS : (' '|'\n')+ {channel=99;}
    ;

Upon "(x)" I get "alt 1" and with "((x))", I get "alt 2".

Jim and other code generators.  outputFile and headerFile now have  
two new arguments:  backtracking (boolean--somebody can backtrack in  
code), synpreds (names of preds).  See my genericParser template for  
needed output changes.  For all other changes, ANTLR's normal code  
gen facility makes it happen.  Soooo sweet.

I co-opted the semantic predicate mechanism and normal rule  
generation mechanism to make this work.  Yeah!

And all the "we don't want no stinking exceptions for backtracking"  
people can sleep soundly tonight!

Ter
From open.zone at virgin.net  Fri Dec  2 21:20:04 2005
From: open.zone at virgin.net (Micheal J)
Date: Fri Dec  2 21:04:28 2005
Subject: [antlr-interest] Switching buildAST to true causes
	"InvalidASTnode type" error.
In-Reply-To: <20051202203110.26634.qmail@web25801.mail.ukl.yahoo.com>
Message-ID: <000801c5f7c9$3894a500$6b02a8c0@hercules>

> Just tried the calc example and it works a treat. In
> my code COMMA has a token type of 6 in *TokenTypes.cs
> but the heteroList index trying to be retrieved for
> the attempted assignment to FactoryEntry in
> ASTFactory.cs is 7.

Weird. In any case there was an ASTFactory bug (related to that
Debug.Assert) that's now fixed. I'll post something tommorrow.

Micheal

From satyatps at yahoo.com  Sat Dec  3 00:02:18 2005
From: satyatps at yahoo.com (satya narayana)
Date: Sat Dec  3 00:02:21 2005
Subject: [antlr-interest] Antlr 3 and the newline token problem
In-Reply-To: <B36CCC332A32904F8FA3DE134A23533608A4C8@wavemachine.temporal-wave.com>
Message-ID: <20051203080218.68239.qmail@web54603.mail.yahoo.com>


Hi ,
please remove my email id from " antlr-interest "group
, i m not at all interested .
Thanks
Satya
--- Jim Idle <jimi@temporal-wave.com> wrote:

>  
> 
> ________________________________
> 
> From: antlr-interest-bounces@antlr.org on behalf of
> Ric Klaren
> Sent: Sat 11/26/2005 5:07 AM
> To: ANTLR Interest
> Subject: Re: [antlr-interest] Antlr 3 and the
> newline token problem
> 
> 
> 
> Prashant Deva wrote:
> > Me and Terence were recently having a discussion
> about this.
> > Its about how to handle newlines in antlr 3.
> 
> Can't you do it in a similar way as I intend to do
> it in C++? E.g. plug
> in a user defined object that knows about the type
> of token tracking you
> want to do? And one that knows how to put this
> location info inside a
> newly created token?
> 
> In fact this is what I am doing for the C target.
> Though it is harder to do such things in C (neatly
> at least) as the language does not have built-in
> mechanisms for it, it is still the case that if we
> just get the very basics correct then a grammar
> author should be able to set up things to override
> anything and do as they will. By 'correct', I mean
> merely that we don't lose information that some
> object/class/struct/programmar might want to track. 
> 
> 
> By default though, you will get the 'standard' stuff
> with lines and columns if only for the fact that I
> don't want to have the C runtime be inherently
> differnt to the other language targets. If that were
> to change then I would change the C target. But,
> just tracking offsets does not seem the way to me. 
> 
> In short then I agree with Ric's point of view. In
> fact the ability to override anything that makes
> sense to in a fairly trivial fashion (so long as you
> know the target language reasonably well) should be
> a general precept. If you don't like the default
> object/struct/typedef/blob then just supply your own
> definition and a bit of code to handle it.
> 
> Jim
> 
> 



		
__________________________________________ 
Yahoo! DSL ? Something to write home about. 
Just $16.99/mo. or less. 
dsl.yahoo.com 

From geiroves at online.no  Sat Dec  3 01:42:29 2005
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Sat Dec  3 01:42:35 2005
Subject: [antlr-interest] linear backtracking part II - Chances to see
	this improvement in V. 2.x. Please ?
In-Reply-To: <28C9982F-8EF7-4AB6-BEE2-5D49F559CA92@cs.usfca.edu>
Message-ID: <000001c5f7ed$e1cfd0d0$0100a8c0@rexii>

Hello,

Great news. As the subject line says: Is it a chance we will see this
improvement in version 2.x ? My current project is far to deeply
committed to version 2.x to change to 3.x now.

I have the same problem as Martin
(http://localhost:4664/cache?event_id=275100&schema_id=1&q=keyword+profi
ler+2&s=S3wQI0ZFSqH-_20cxpDke7zwPig), I have a keywordless language
where I just have had to use Syntactic predicates more often than I
like, and that hurts parsing performance.

So, can we please see this improved Syntactic Predicate / Backtracking
code improvement in version 2.x ?

Geir Ove

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: 3. desember 2005 03:47
To: ANTLR Interest
Subject: [antlr-interest] linear backtracking part II (implementation)


Ok, added details of implementation.  Easy.  Coding as we speak...

http://www.antlr.org/blog/antlr3/lookahead.tml

Ter



From lists at mkempka.de  Sat Dec  3 05:25:34 2005
From: lists at mkempka.de (Matthias Kempka)
Date: Sat Dec  3 05:25:39 2005
Subject: [antlr-interest] Again: Source code position
Message-ID: <43919CCE.9080908@mkempka.de>

Hello all,

I'm aware that I'm not the first one to ask this question, but neither
the FAQ nor the mailing list archive give me answers that I can work
with, so here's my problem:

I'm working with ANTLR 2.7.5 and the Java 1.5 Grammar by Michael Studmann.
What I need is the source code position of an element in the AST.

I see that the tokens that are created by the lexer have exactly the
information I need. So I subclassed the CommonAST with a class named
TokenPreservingAST. In the section Tokens{} in the Grammar I added the
information which tokens should be represented by a TokenPreservingAST
object.
So far, it worked. But the token is always null. The problem is, that my
AST objects are always initialized with a call to
initialize(int,String) and never with initialize(Token). This is due to
the corresponding create-method in the ASTFactory.

I couldn't find out how to tell the JavaRecognizer that it should call
the method create(Token) instead of create(int, String).
Can somebody help me with this?

The FAQ tells me of another way with a special input stream that is
given to the lexer. However, I don't understand how I could get the
information of a token by counting how many characters the lexer has
consumed. There, I'm missing the information how to combine the
informations.

Regards,
Matthias Kempka
From geiroves at online.no  Sat Dec  3 12:02:31 2005
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Sat Dec  3 12:02:37 2005
Subject: [antlr-interest] Wiki - Broken link ?
Message-ID: <000001c5f844$7fa43660$0100a8c0@rexii>

Hello,
 
Each time I have tried the Wiki link from the front page of ANTLR org
(http://www.antlr.org), I get the message : 
 
Error

Sorry. Cannot find page http://www.antlr
 
 
I tried it several weeks ago, and again today...
 
 
 
Geir Ove
Norway
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051203/82abf0d4/attachment.html
From endigitalmind at yahoo.co.uk  Sat Dec  3 12:40:32 2005
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Sat Dec  3 12:40:36 2005
Subject: [antlr-interest] Switching buildAST to true causes "Invalid
	ASTnode type" error.
In-Reply-To: <20051202210649.74947.qmail@web30908.mail.mud.yahoo.com>
Message-ID: <20051203204032.91903.qmail@web25803.mail.ukl.yahoo.com>


--- Matt Benson <gudnabrsam@yahoo.com> wrote:

> I am not sure if you mean these errors are in a
> parser
> or a treeparser... but whichever, if the offending
> *parser and the corresponding lexer are defined in
> separate files, you would want to make sure the
> *TokenTypes.txt file is in your current directory
> when
> you Tool the offending *parser's grammar file. 
> Apologies if this is unrelated but I spent quite
> awhile agonizing over this yesterday.

Thanks for the suggestion Matt but I'm confident that
I have the right files in the right places.
> 
> HTH,
> Matt
> 
> --- Phil Ritchie <endigitalmind@yahoo.co.uk> wrote:
> 
> > 
> > --- Micheal J <open.zone@virgin.net> wrote:
> > 
> > > > --- Peggy Fieland <madcapmaggie@yahoo.com>
> > wrote:
> > > > 
> > > > > Did you remember to initialize the AST
> factory
> > > when
> > > > > you run your parser?
> > > > > 
> > > > Well I didn't but even if I do I still get the
> > > same
> > > > error during pasrer.series.
> > > 
> > > I'll look into this later Phil. All examples are
> > > failing on my box for some
> > > odd reason at the mo' but, I'll try and chase
> this
> > > down.
> > > 
> > > Incidentally, can you run the examples (e.g.
> calc
> > or
> > > java) successfully?
> > 
> > Just tried the calc example and it works a treat.
> In
> > my code COMMA has a token type of 6 in
> > *TokenTypes.cs
> > but the heteroList index trying to be retrieved
> for
> > the attempted assignment to FactoryEntry in
> > ASTFactory.cs is 7.
> > 
> > > 
> > > Micheal
> > > 
> > > 
> > 
> > 
> > 
> > 	
> > 	
> > 		
> >
>
___________________________________________________________
> > 
> > Yahoo! Messenger - NEW crystal clear PC to PC
> > calling worldwide with voicemail
> > http://uk.messenger.yahoo.com
> > 
> 
> 
> 
> 		
> __________________________________ 
> Start your day with Yahoo! - Make it your home page!
> 
> http://www.yahoo.com/r/hs
> 



		
___________________________________________________________ 
WIN ONE OF THREE YAHOO! VESPAS - Enter now! - http://uk.cars.yahoo.com/features/competitions/vespa.html
From endigitalmind at yahoo.co.uk  Sat Dec  3 12:41:36 2005
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Sat Dec  3 12:41:39 2005
Subject: [antlr-interest] Switching buildAST to true causes
	"InvalidASTnode type" error.
In-Reply-To: <000801c5f7c9$3894a500$6b02a8c0@hercules>
Message-ID: <20051203204136.38799.qmail@web25814.mail.ukl.yahoo.com>


--- Micheal J <open.zone@virgin.net> wrote:

> Weird. In any case there was an ASTFactory bug
> (related to that
> Debug.Assert) that's now fixed. I'll post something
> tommorrow.

Thanks Micheal.
> 
> Micheal
> 
> 



	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com
From jimi at temporal-wave.com  Sat Dec  3 21:55:14 2005
From: jimi at temporal-wave.com (Jim Idle)
Date: Sat Dec  3 21:58:35 2005
Subject: [antlr-interest] Profiler 2
References: <004101c5f6ef$1d26dcf0$6b02a8c0@hercules><1133509851.7991.6.camel@localhost.localdomain><8522676D-1A8E-4829-8637-3A52B776DD84@cs.usfca.edu><dd3a065f0512021054m53af8744h60ba0794cfd212ca@mail.gmail.com><B36CCC332A32904F8FA3DE134A23533608A4CB@wavemachine.temporal-wave.com>
	<dd3a065f0512021642i5e35399i2fe3339c2c65a627@mail.gmail.com>
Message-ID: <B36CCC332A32904F8FA3DE134A23533608A4CF@wavemachine.temporal-wave.com>

However, would you not be an early adopter of the modified 2.7.5?
 
I like to think of it this way: you probably have a few more issues than normal with the development phase but at some point you produce a parser that you test the bejesus out of and it works. Once generated it will always work (within the limits of what you were able to test) and therefore it does not matter if it is generated by an early version of ANTLR3 or not. Might well be a bit early yet though, I agree ;-)
 
Jim
 

________________________________

From: antlr-interest-bounces@antlr.org on behalf of Bryan Ewbank
Sent: Fri 12/2/2005 4:42 PM
To: ANTLR Interest
Subject: Re: [antlr-interest] Profiler 2



That does sound nice, but I'm working in a production environment
and cannot afford the risks associated with being an early adopter.

On 12/2/05, Jim Idle <jimi@temporal-wave.com> wrote:
> I would think that by the time you have changed the existing code generator
> either Ric would have finished the ANTLR3 c++ generator, or I will have
> finished the ANTLR3 C code generator. I think that either of these should
> make a project such as this unnecessary unless you absolutely must only use
> 2.7.x...
>
> ... or we both screw up ;-)
>
> Jim


From prashant.deva at gmail.com  Sun Dec  4 00:03:32 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Sun Dec  4 00:03:34 2005
Subject: [antlr-interest] Wiki - Broken link ?
In-Reply-To: <000001c5f844$7fa43660$0100a8c0@rexii>
References: <000001c5f844$7fa43660$0100a8c0@rexii>
Message-ID: <41fed8f80512040003h6b723e7aj858ce823a0727bcc@mail.gmail.com>

Yes, the wiki is currently down. Terence was having some problems with it.
--
Prashant Deva
Creator, ANTLR Studio,www.antlrstudio.com
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051204/a22e6c82/attachment.html
From geiroves at online.no  Sun Dec  4 07:39:07 2005
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Sun Dec  4 07:39:30 2005
Subject: [antlr-interest] Profiler 2
In-Reply-To: <B36CCC332A32904F8FA3DE134A23533608A4CF@wavemachine.temporal-wave.com>
Message-ID: <000401c5f8e8$de203140$0100a8c0@rexii>

Hello,

I can't help  but commenting on this: 

<<However, would you not be an early adopter of the modified 2.7.5?>>

It is a HUGHE difference moving from e.g. 2.7.4 to 2.7.5 or a new 2.7.6!
I also have a projected deeply coupled with 2.7.5 and its behavior e.g
when it comes to e.g. Exceptions, which is a **big deal** in a well
behaved production environment! I cannot for my life change to using 3.x
at this stage.

I find it very important that the ANTLR development team appreciates the
importance of this: Every one seems to say: Skip 2.7.x and move on to
3.x. For the next project, that might be OK, for the Current Production
/ Commercial projects I guess most users feel the same way.


Geir Ove

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Jim Idle
Sent: 4. desember 2005 06:55
To: ANTLR Interest
Subject: RE: [antlr-interest] Profiler 2


However, would you not be an early adopter of the modified 2.7.5?
 
I like to think of it this way: you probably have a few more issues than
normal with the development phase but at some point you produce a parser
that you test the bejesus out of and it works. Once generated it will
always work (within the limits of what you were able to test) and
therefore it does not matter if it is generated by an early version of
ANTLR3 or not. Might well be a bit early yet though, I agree ;-)
 
Jim
 

________________________________

From: antlr-interest-bounces@antlr.org on behalf of Bryan Ewbank
Sent: Fri 12/2/2005 4:42 PM
To: ANTLR Interest
Subject: Re: [antlr-interest] Profiler 2



That does sound nice, but I'm working in a production environment and
cannot afford the risks associated with being an early adopter.

On 12/2/05, Jim Idle <jimi@temporal-wave.com> wrote:
> I would think that by the time you have changed the existing code 
> generator either Ric would have finished the ANTLR3 c++ generator, or 
> I will have finished the ANTLR3 C code generator. I think that either 
> of these should make a project such as this unnecessary unless you 
> absolutely must only use 2.7.x...
>
> ... or we both screw up ;-)
>
> Jim




From parrt at cs.usfca.edu  Sun Dec  4 09:36:18 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Dec  4 09:35:30 2005
Subject: [antlr-interest] Profiler 2
In-Reply-To: <000401c5f8e8$de203140$0100a8c0@rexii>
References: <000401c5f8e8$de203140$0100a8c0@rexii>
Message-ID: <6F19C219-2AEF-4136-A504-8D4CDD361F33@cs.usfca.edu>

Hi Geir,

The memoization mechanism is surprisingly trivial.  I'm just  
finishing it up for v3 and will send a quick note to the list about  
how to implement for v2.  I am unable to touch v2's analysis and  
codegen engine due to brittleness and lack of unit tests...

Ter
From geiroves at online.no  Sun Dec  4 10:41:32 2005
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Sun Dec  4 10:41:41 2005
Subject: [antlr-interest] Profiler 2
In-Reply-To: <6F19C219-2AEF-4136-A504-8D4CDD361F33@cs.usfca.edu>
Message-ID: <000001c5f902$59ac92e0$0100a8c0@rexii>

Hello,

Excuse me for asking, but what excatly is "The memoization mechanism" ?
I am not comfortable with these terms.

Geir Ove

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: 4. desember 2005 18:36
To: ANTLR Interest
Subject: Re: [antlr-interest] Profiler 2


Hi Geir,

The memoization mechanism is surprisingly trivial.  I'm just  
finishing it up for v3 and will send a quick note to the list about  
how to implement for v2.  I am unable to touch v2's analysis and  
codegen engine due to brittleness and lack of unit tests...

Ter



From parrt at cs.usfca.edu  Sun Dec  4 10:49:18 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Dec  4 10:48:32 2005
Subject: [antlr-interest] Re: how does memoization work?
In-Reply-To: <000001c5f902$59ac92e0$0100a8c0@rexii>
References: <000001c5f902$59ac92e0$0100a8c0@rexii>
Message-ID: <EDCB1062-BFA6-464F-AAB3-0BF68BEBD99E@cs.usfca.edu>


On Dec 4, 2005, at 10:41 AM, Geir Ove Skjaervik wrote:

> Hello,
>
> Excuse me for asking, but what excatly is "The memoization  
> mechanism" ?
> I am not comfortable with these terms.

It simply records the result of matching any rule at every input  
position at which the parser is guessing.  Later if you ask again  
(which happens a lot in backtracking), you simply jump ahead in the  
input stream according to what happened last time and don't descend  
into the rule.  It's a trivial bit of code at the start/end of each  
rule.

It guarantees linear parsing performance at the cost of memory.

Ter
From parrt at cs.usfca.edu  Sun Dec  4 11:47:41 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Dec  4 11:46:53 2005
Subject: [antlr-interest] got rule memoization working :)
Message-ID: <A181ADF3-A58E-4775-8F4A-073296087442@cs.usfca.edu>

Ok, took me a few hours to get this exactly right, but much of it was  
figuring out how to build the cache...John Mitchell and I kinda came  
to a conclusion by phone but I didn't implement it.  For now, my  
cache keeps all info around and it could get big; I'll fix later.   
You can turn it off with option

   -nomemo        when backtracking don't generate memoization code

Anyway, this would be really easy to implement manually (if  
tediously) for v2.  This should give you all the info you need to  
know to implement:

http://www.antlr.org/blog/antlr3/lookahead.tml

Enjoy...I must say that this is all pretty slick. :)

I'll push to the depot soon...I'll release 3.0ea7 this week I hope.

Ter
From pgonzalez at bluel.com  Mon Dec  5 00:10:43 2005
From: pgonzalez at bluel.com (Pete Gonzalez)
Date: Mon Dec  5 00:10:52 2005
Subject: [antlr-interest] Visual Studio syntax highlighting for an Antlr
	grammar
Message-ID: <4393F603.4060501@bluel.com>

I am interested in implementing IDE syntax highlighting and underlining 
(i.e. squiggly underlines marking syntax errors).  The Microsoft Visual 
Studio SDK (called "VSIP" in previous versions) has a really interesting 
template called "Babel".  Basically if you have a flex/bison grammar, an 
IDE wizard can be used to automatically generate a DLL add-in implementing 
syntax highlighting/underlining for that language.  It's completely 
automated; the wizard even includes a GUI for mapping flex token types to 
syntax color classes.

One disadvantage of Babel is that it's old-skool C++.  However, Visual 
Studio 2005 expands this API with managed wrappers enabling an entire 
language service to be implemented in C#.  (The C# classes lack flex/bison 
integration however.)  Our Antlr grammars are in C#, so my hope was to 
accomplish something similar to the Babel package but in C# and with Antlr.

Currently I'm just focusing on syntax highlighting (which uses the lexer 
but not the parser).  The IDE text editor is optimized to prevent the 
entire file from being rescanned whenever something changes.  The required 
C# interface looks like this:

   void IScanner.SetSource(string source, int offset);
   bool IScanner.ScanTokenAndProvideInfoAboutIt(TokenInfo tokenInfo,
     ref int state);

The idea is that the editor passes a single line of text to SetSource(), 
and then calls ScanTokenAndProvideInfoAboutIt() repeatedly to obtain the 
colored tokens for that line.  In this situation, the only context 
available to the lexer is a single "state" integer (which for Babel stores 
flex's "yy_start" global variable).  Unfortunately, since Antlr is a 
recursive descent design, there isn't an obvious way to restart the lexer 
e.g. in the middle of a multiline comment.  Has anyone else dealt with this 
problem before?

More generally, has anyone implemented a Visual Studio language service 
using an Antlr grammar?  Or, is it difficult to port an Antlr grammar to 
flex/bison?  :-)

Cheers,
-Pete

____


-------------- next part --------------
A non-text attachment was scrubbed...
Name: wizard3.gif
Type: image/gif
Size: 12823 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20051205/79cb4d35/wizard3-0001.gif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: wizard4.gif
Type: image/gif
Size: 15433 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20051205/79cb4d35/wizard4-0001.gif
From ma_boite_a_spam at yahoo.fr  Mon Dec  5 02:19:29 2005
From: ma_boite_a_spam at yahoo.fr (Raphael)
Date: Mon Dec  5 02:19:36 2005
Subject: [antlr-interest] problem with including code at a begining of a
	rule.
In-Reply-To: <000401c5f8e8$de203140$0100a8c0@rexii>
References: <000401c5f8e8$de203140$0100a8c0@rexii>
Message-ID: <43941431.7050005@yahoo.fr>

Dear all,

In my grammar (see below) I need to include come javacode a the begining 
of a rule, ie :
rule :
{ code...}
  alternative1 {code alternative1}
| alternative2  {code alternative1}
...
;

the problem is : this code declares an identifier which is accessed in 
all alternative, but in generated java code, the code is inserted in the 
first alternative code, not at the begining of the procedure. Thus I can 
not access this identifier in alternatives{2,n}. The most surprising is 
that in this same files other rules which use code inclusion at the 
begining works well. Antlr version is 2.7.6 (use of eclipse plug in)

Real grammar and generated java codes are included below (hope they are 
readable in this way)

bodyParam:
{
     List<FetchBodysectionPartSpecifier> partSpecifs = new 
ArrayList<FetchBodysectionPartSpecifier>();
}

            |  (BODY^      LBRACKET! ( arg = partSpecifier 
{partSpecifs.add(arg.getText());} )+ RBRACKET! (LT! partialSection GT!)?)
                          { params.BODYSECTION = true;
                              params.needAllMessageStepThrueParser=true;
                            }
            | (BODY_PEEK^ LBRACKET! ( arg = partSpecifier 
{partSpecifs.add(arg.getText());} )+ RBRACKET! (LT! partialSection GT!)?)
                          { params.BODYSECTION = true;
                            params.PEEK = true;   
                            params.needAllMessageStepThrueParser=true;
                            }
            | (BODY^ |     BODY_PEEK^ {params.PEEK = true;} )      
LBRACKET! RBRACKET! (LT! partialSection GT!)? { params.FULL_BODY=true;}
            ;

---------------------------------------------------------

public final void bodyParam() throws RecognitionException, 
TokenStreamException {
       
       
try {      // for error handling
 if ((_tokenSet_0.member(LA(1))) && (_tokenSet_1.member(LA(2))) && 
(_tokenSet_2.member(LA(3))) && (_tokenSet_3.member(LA(4))) && 
(_tokenSet_4.member(LA(5))) && (_tokenSet_5.member(LA(6))))
{
    List<FetchBodysectionPartSpecifier> partSpecifs = new 
ArrayList<FetchBodysectionPartSpecifier>();
} else if ((LA(1)==BODY) && (LA(2)==LBRACKET) && 
(LA(3)==Dot||LA(3)==PartNumber) && (_tokenSet_7.member(LA(4))) && 
(_tokenSet_8.member(LA(5))) && (_tokenSet_9.member(LA(6)))) {
                {
................
From demakov at ispras.ru  Mon Dec  5 02:32:07 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon Dec  5 02:32:09 2005
Subject: [antlr-interest] problem with including code at a begining of
	arule.
References: <000401c5f8e8$de203140$0100a8c0@rexii> <43941431.7050005@yahoo.fr>
Message-ID: <019701c5f987$246272a0$8cc79553@marlboro>

1. Declare variables before colon.
2. Initialize them after colon.
3. If you need initialization for all alternatives, wrap them by (  )

rule[ rule parameters] returns [rule return variable]
{ local variable declarations }
:
{ local variable initialization - for all alternatives}
( 
    { local variable initialization - for alt1 only}
    alt1 
  | { local variable initialization - for alt2 only}
    alt2 
)
;
    
All code after colon is executed only if not in guessing mode,
so all initialization and other code should be after colon.
But for correct java code, local variable declarations
used in more than one code fragment should be declared before colon.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com



----- Original Message ----- 
From: "Raphael" <ma_boite_a_spam@yahoo.fr>
To: <antlr-interest@antlr.org>
Sent: Monday, December 05, 2005 1:19 PM
Subject: [antlr-interest] problem with including code at a begining of arule.


> Dear all,
> 
> In my grammar (see below) I need to include come javacode a the begining 
> of a rule, ie :
> rule :
> { code...}
>  alternative1 {code alternative1}
> | alternative2  {code alternative1}
> ...
> ;
> 
> the problem is : this code declares an identifier which is accessed in 
> all alternative, but in generated java code, the code is inserted in the 
> first alternative code, not at the begining of the procedure. Thus I can 
> not access this identifier in alternatives{2,n}. The most surprising is 
> that in this same files other rules which use code inclusion at the 
> begining works well. Antlr version is 2.7.6 (use of eclipse plug in)
> 
> Real grammar and generated java codes are included below (hope they are 
> readable in this way)
> 
> bodyParam:
> {
>     List<FetchBodysectionPartSpecifier> partSpecifs = new 
> ArrayList<FetchBodysectionPartSpecifier>();
> }
> 
>            |  (BODY^      LBRACKET! ( arg = partSpecifier 
> {partSpecifs.add(arg.getText());} )+ RBRACKET! (LT! partialSection GT!)?)
>                          { params.BODYSECTION = true;
>                              params.needAllMessageStepThrueParser=true;
>                            }
>            | (BODY_PEEK^ LBRACKET! ( arg = partSpecifier 
> {partSpecifs.add(arg.getText());} )+ RBRACKET! (LT! partialSection GT!)?)
>                          { params.BODYSECTION = true;
>                            params.PEEK = true;   
>                            params.needAllMessageStepThrueParser=true;
>                            }
>            | (BODY^ |     BODY_PEEK^ {params.PEEK = true;} )      
> LBRACKET! RBRACKET! (LT! partialSection GT!)? { params.FULL_BODY=true;}
>            ;
> 
> ---------------------------------------------------------
> 
> public final void bodyParam() throws RecognitionException, 
> TokenStreamException {
>       
>       
> try {      // for error handling
> if ((_tokenSet_0.member(LA(1))) && (_tokenSet_1.member(LA(2))) && 
> (_tokenSet_2.member(LA(3))) && (_tokenSet_3.member(LA(4))) && 
> (_tokenSet_4.member(LA(5))) && (_tokenSet_5.member(LA(6))))
> {
>    List<FetchBodysectionPartSpecifier> partSpecifs = new 
> ArrayList<FetchBodysectionPartSpecifier>();
> } else if ((LA(1)==BODY) && (LA(2)==LBRACKET) && 
> (LA(3)==Dot||LA(3)==PartNumber) && (_tokenSet_7.member(LA(4))) && 
> (_tokenSet_8.member(LA(5))) && (_tokenSet_9.member(LA(6)))) {
>                {
> ................
>

From prashant.deva at gmail.com  Mon Dec  5 02:53:35 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Mon Dec  5 02:53:39 2005
Subject: [antlr-interest] Visual Studio syntax highlighting for an Antlr
	grammar
In-Reply-To: <4393F603.4060501@bluel.com>
References: <4393F603.4060501@bluel.com>
Message-ID: <41fed8f80512050253k44b16b9fpa067319189c80304@mail.gmail.com>

Use ANTLR Studio. www.antlrstudio.com :)

--
Prashant Deva
Creator, ANTLR Studio,www.antlrstudio.com
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051205/fb2dd0b1/attachment.html
From prashant.deva at gmail.com  Mon Dec  5 02:54:57 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Mon Dec  5 02:54:59 2005
Subject: [antlr-interest] Visual Studio syntax highlighting for an Antlr
	grammar
In-Reply-To: <41fed8f80512050253k44b16b9fpa067319189c80304@mail.gmail.com>
References: <4393F603.4060501@bluel.com>
	<41fed8f80512050253k44b16b9fpa067319189c80304@mail.gmail.com>
Message-ID: <41fed8f80512050254i2f08f9d7qcf5cda95786346a@mail.gmail.com>

Oops please ignore the last post.
I pasted in the wrong window.


--
Prashant Deva
Creator, ANTLR Studio,www.antlrstudio.com
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051205/f2fee349/attachment.html
From dcaton at shorelinesoftware.com  Mon Dec  5 09:19:14 2005
From: dcaton at shorelinesoftware.com (Don Caton)
Date: Mon Dec  5 09:26:34 2005
Subject: [antlr-interest] Visual Studio syntax highlighting for an
	Antlrgrammar
In-Reply-To: <4393F603.4060501@bluel.com>
Message-ID: <1133804254.23188@mx9.mysite4now.com>

Pete:

I'm in the process of doing just that.  You have to take a slightly
different approach to your lexer.  Normally, you lex comments as a single
token which is ultimately discarded (e.g. $setType( Token::Skip )).

In a syntax highlighting parser, you want to parse the comment begin and end
markers separately and don't discard them.  Once you've seen a begin comment
token you need to remember that, which you can do by using the 'state'
parameter to ScanTokenAndProvideInfoAboutIt().  Once you're in a comment
"state", force the color for each successive token to be the comment color
until you see an ending comment token.

In the case of a single line comment, you would use your end-of-statement
token to turn that off.  Which also means that you don't want to discard
line feeds or carriage returns if that's an end-of-statement character in
the language you're parsing.

Your comment begin token can consume everything to the end comment token (or
the end of the text being parsed) but make sure you include all the consumed
text when you calculate the length of the token's text when you pass the
into back to VS in the tokeninfo structure.

I'm still working on this, but it seems to work ok.  I briefly considered
using the Babel interface but it's not well documented, the quality of the
sample code leaves something to be desired, and it seems to have fewer
capabilities than the managed language service interfaces.  And I really
didn't want to spend the time learning flex/bison when I already have an
Antlr grammar for my language.

Don
 

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Pete Gonzalez
> Sent: Monday, December 05, 2005 3:11 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Visual Studio syntax highlighting 
> for an Antlrgrammar
> 
> I am interested in implementing IDE syntax highlighting and 
> underlining (i.e. squiggly underlines marking syntax errors). 
>  The Microsoft Visual Studio SDK (called "VSIP" in previous 
> versions) has a really interesting template called "Babel".  
> Basically if you have a flex/bison grammar, an IDE wizard can 
> be used to automatically generate a DLL add-in implementing 
> syntax highlighting/underlining for that language.  It's 
> completely automated; the wizard even includes a GUI for 
> mapping flex token types to syntax color classes.
> 
> One disadvantage of Babel is that it's old-skool C++.  
> However, Visual Studio 2005 expands this API with managed 
> wrappers enabling an entire language service to be 
> implemented in C#.  (The C# classes lack flex/bison 
> integration however.)  Our Antlr grammars are in C#, so my 
> hope was to accomplish something similar to the Babel package 
> but in C# and with Antlr.
> 
> Currently I'm just focusing on syntax highlighting (which 
> uses the lexer but not the parser).  The IDE text editor is 
> optimized to prevent the entire file from being rescanned 
> whenever something changes.  The required C# interface looks 
> like this:
> 
>    void IScanner.SetSource(string source, int offset);
>    bool IScanner.ScanTokenAndProvideInfoAboutIt(TokenInfo tokenInfo,
>      ref int state);
> 
> The idea is that the editor passes a single line of text to 
> SetSource(), and then calls ScanTokenAndProvideInfoAboutIt() 
> repeatedly to obtain the colored tokens for that line.  In 
> this situation, the only context available to the lexer is a 
> single "state" integer (which for Babel stores flex's 
> "yy_start" global variable).  Unfortunately, since Antlr is a 
> recursive descent design, there isn't an obvious way to 
> restart the lexer e.g. in the middle of a multiline comment.  
> Has anyone else dealt with this problem before?
> 
> More generally, has anyone implemented a Visual Studio 
> language service using an Antlr grammar?  Or, is it difficult 
> to port an Antlr grammar to flex/bison?  :-)
> 
> Cheers,
> -Pete
> 
> ____
> 
> 
> 


From open.zone at virgin.net  Mon Dec  5 09:58:26 2005
From: open.zone at virgin.net (Micheal J)
Date: Mon Dec  5 10:04:36 2005
Subject: [antlr-interest] Visual Studio syntax highlighting for an
	Antlrgrammar
In-Reply-To: <4393F603.4060501@bluel.com>
Message-ID: <001a01c5f9c5$7f71dfd0$6b02a8c0@hercules>

> One disadvantage of Babel is that it's old-skool C++.  
> However, Visual 
> Studio 2005 expands this API with managed wrappers enabling an entire 
> language service to be implemented in C#.  (The C# classes 
> lack flex/bison 
> integration however.)

There are C# ports of CUP and JFlex. And there is also the similar CSTools
suite and Mono's Jay/C#+flex port too. All will allow flex/bison-like
grammars to be used with a few changes with C#.

I've just added a "%antlr" mode to C# Flex in fact to make csflex->ANTLR
integration easier. Needs testing. Sowhatdoyousay?...  ;-)

> The required 
> C# interface looks like this:
> 
>    void IScanner.SetSource(string source, int offset);
>    bool IScanner.ScanTokenAndProvideInfoAboutIt(TokenInfo tokenInfo,
>      ref int state);
> 
> The idea is that the editor passes a single line of text to 
> SetSource(), 
> and then calls ScanTokenAndProvideInfoAboutIt() repeatedly to 
> obtain the 
> colored tokens for that line.  In this situation, the only context 
> available to the lexer is a single "state" integer (which for 
> Babel stores 
> flex's "yy_start" global variable).  Unfortunately, since Antlr is a 
> recursive descent design, there isn't an obvious way to 
> restart the lexer 
> e.g. in the middle of a multiline comment.  Has anyone else 
> dealt with this 
> problem before?

I think Bodgan Mitu did. And the ANTLRStudio guy too I would guess (if he
indeed uses ANTLR for his lexing/parsing).

> More generally, has anyone implemented a Visual Studio 
> language service 
> using an Antlr grammar?  Or, is it difficult to port an Antlr 
> grammar to 
> flex/bison?  :-)

I'm no flex/bison expert but, I shouldn't think so as long as you aren't
using too much of the cool technology in ANTLR (e.g. sempreds).

Micheal

From ewbank at gmail.com  Mon Dec  5 10:17:41 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon Dec  5 10:17:47 2005
Subject: [antlr-interest] Anyone used LLVM?
Message-ID: <dd3a065f0512051017r3224e53en951e7f5a7cb5cb1c@mail.gmail.com>

Has anyone explored LLVM and how it might by married with ANTLR ASTs?

[1] http://llvm.cs.uiuc.edu
    A compiler infrastructure designed for compile-time, link-time,
    runtime, and "idle-time" optimization of programs from arbitrary
    programming languages

Thanks,
- Bryan
From pgonzalez at bluel.com  Mon Dec  5 10:47:10 2005
From: pgonzalez at bluel.com (Pete Gonzalez)
Date: Mon Dec  5 10:47:20 2005
Subject: [antlr-interest] Visual Studio syntax highlighting for
	an	Antlrgrammar
In-Reply-To: <1133804254.23188@mx9.mysite4now.com>
References: <1133804254.23188@mx9.mysite4now.com>
Message-ID: <43948B2E.5040609@bluel.com>

Don Caton wrote:
> I'm in the process of doing just that.  You have to take a slightly
> different approach to your lexer.  Normally, you lex comments as a single
> token which is ultimately discarded (e.g. $setType( Token::Skip )).
> 
> In a syntax highlighting parser, you want to parse the comment begin and end
> markers separately and don't discard them.  Once you've seen a begin comment
> token you need to remember that, which you can do by using the 'state'
> parameter to ScanTokenAndProvideInfoAboutIt().  Once you're in a comment
> "state", force the color for each successive token to be the comment color
> until you see an ending comment token.

It sounds like your approach is to manually handle each problem with custom 
modifications.  I think this might be difficult in the general case of 
multiline strings, XML comments, or nested languages (e.g. we have islands 
of SQL expressions in one of our grammars).  The end result might be a less 
readable grammar, and a fair amount of work compared to the fully-automatic 
scenario with Flex.

The impression I'm getting is that recursive descent lexers are actually 
inferior with the kind of optimizations required for responsive syntax 
highlighting.  I looked at the code for another high-quality text editor, 
and they use hand-coded lexers for each language, with a global integer 
state just like Flex.  Maybe Microsoft's interface is intentionally 
encouraging this approach?  My kludge was to substitute a flex-style lexer 
in C#; it works great and was very easy to integrate.

It is aesthetically pleasing that Antlr's lexer and parser share a common 
algorithm.  However, this experience is building a case that Antlr's 
approach is less versatile (and possibly slower?) when it comes to the lexer.

> I'm still working on this, but it seems to work ok.  I briefly considered
> using the Babel interface but it's not well documented, the quality of the
> sample code leaves something to be desired, and it seems to have fewer
> capabilities than the managed language service interfaces.  And I really
> didn't want to spend the time learning flex/bison when I already have an
> Antlr grammar for my language.

  Also, the managed interface is an actual supported API, whereas Babel is 
an MFC-style "framework" of cut+paste code fragments.

Cheers,
-Pete
From dcaton at shorelinesoftware.com  Mon Dec  5 11:50:46 2005
From: dcaton at shorelinesoftware.com (Don Caton)
Date: Mon Dec  5 11:50:46 2005
Subject: [antlr-interest] Visual Studio syntax highlighting for
	an	Antlrgrammar
In-Reply-To: <43948B2E.5040609@bluel.com>
Message-ID: <1133812908.5705@mx9.mysite4now.com>

Pete:

> It sounds like your approach is to manually handle each 
> problem with custom modifications.  I think this might be 
> difficult in the general case of multiline strings, XML 
> comments, or nested languages (e.g. we have islands of SQL 
> expressions in one of our grammars).  The end result might be 
> a less readable grammar, and a fair amount of work compared 
> to the fully-automatic scenario with Flex.

Well, I was hoping to reuse the existing lexer for our compiler but that
didn't seem practical once I got into it.  Syntax highlighers want to know
about things that the compiler doesn't.  But so far, it has only required
fairly minor changes to our lexer.  This particular language doesn't have
multiline strings so the only token that can span multiple lines is a
multiline comment.  So the only difference between the compiler's lexer and
the syntax highlighter's lexer is its handling of comments.

> The impression I'm getting is that recursive descent lexers 
> are actually inferior with the kind of optimizations required 
> for responsive syntax highlighting.

Not having experience with other lexer/parser generators, I don't know.

> It is aesthetically pleasing that Antlr's lexer and parser 
> share a common algorithm.  However, this experience is 
> building a case that Antlr's approach is less versatile (and 
> possibly slower?) when it comes to the lexer.

I've been able to squeeze a lot of performance out of Antlr by cleaning up
the C++ code so that the compiler can inline most of it.  It made a huge
difference.

Don


From maikmerten at gmx.net  Mon Dec  5 13:09:59 2005
From: maikmerten at gmx.net (Maik Merten)
Date: Mon Dec  5 13:08:46 2005
Subject: [antlr-interest] Force nodes for grammar rules
Message-ID: <4394ACA7.2030005@gmx.net>

Hello,

I know that ANTLR generates abstract syntax trees and doesn't include
nodes for every grammar-rule applied. This is discussed in the FAQ (
http://www.jguru.com/faq/view.jsp?EID=814505 ) and this behaviour is a
Good Thing(tm).

However, for the project i am involved with it is considered extremely
handy to have the actual parse tree (there may be cases where the exact
sequence of productions gives information about the "context" - which we
could exploit instead of doing more extensive analysis).

I may be cursed with blindness but I am not aware of a way to force the
parse tree into the "AST" tree. Is there any? Can we modify the grammar
in a way that ensures that every rule applied gets a node?


Thank you,

Maik
From gudnabrsam at yahoo.com  Mon Dec  5 13:22:59 2005
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec  5 13:23:09 2005
Subject: [antlr-interest] Force nodes for grammar rules
In-Reply-To: <4394ACA7.2030005@gmx.net>
Message-ID: <20051205212259.77991.qmail@web30914.mail.mud.yahoo.com>

read the ANTLR Tree Construction portion of the
manual; search for "AST Action Translation".  Is this
what you want?

HTH,
Matt

--- Maik Merten <maikmerten@gmx.net> wrote:

> Hello,
> 
> I know that ANTLR generates abstract syntax trees
> and doesn't include
> nodes for every grammar-rule applied. This is
> discussed in the FAQ (
> http://www.jguru.com/faq/view.jsp?EID=814505 ) and
> this behaviour is a
> Good Thing(tm).
> 
> However, for the project i am involved with it is
> considered extremely
> handy to have the actual parse tree (there may be
> cases where the exact
> sequence of productions gives information about the
> "context" - which we
> could exploit instead of doing more extensive
> analysis).
> 
> I may be cursed with blindness but I am not aware of
> a way to force the
> parse tree into the "AST" tree. Is there any? Can we
> modify the grammar
> in a way that ensures that every rule applied gets a
> node?
> 
> 
> Thank you,
> 
> Maik
> 



		
__________________________________________ 
Yahoo! DSL ? Something to write home about. 
Just $16.99/mo. or less. 
dsl.yahoo.com 

From ewbank at gmail.com  Mon Dec  5 14:30:28 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon Dec  5 14:30:32 2005
Subject: [antlr-interest] Force nodes for grammar rules
In-Reply-To: <4394ACA7.2030005@gmx.net>
References: <4394ACA7.2030005@gmx.net>
Message-ID: <dd3a065f0512051430n27418b80ud673f5ca6a3cc5ea@mail.gmail.com>

There's no automatic way to do it.  You would have to make sure that
every production has an action of the form
     { ## = #( #PRODUCTION_ID,"production_name"], ## ); }
Of course, the leaf nodes, such as identifier, etc, might need
different processing...

hope this helps,
- Bryan

On 12/5/05, Maik Merten <maikmerten@gmx.net> wrote:
> Hello,
>
> I know that ANTLR generates abstract syntax trees and doesn't include
> nodes for every grammar-rule applied. This is discussed in the FAQ (
> http://www.jguru.com/faq/view.jsp?EID=814505 ) and this behaviour is a
> Good Thing(tm).
>
> However, for the project i am involved with it is considered extremely
> handy to have the actual parse tree (there may be cases where the exact
> sequence of productions gives information about the "context" - which we
> could exploit instead of doing more extensive analysis).
>
> I may be cursed with blindness but I am not aware of a way to force the
> parse tree into the "AST" tree. Is there any? Can we modify the grammar
> in a way that ensures that every rule applied gets a node?
>
>
> Thank you,
>
> Maik
>
From robgreene at gmail.com  Mon Dec  5 20:25:29 2005
From: robgreene at gmail.com (Rob Greene)
Date: Mon Dec  5 20:25:32 2005
Subject: [antlr-interest] Must all grammar rules be implemented for tree
	parsers?
Message-ID: <738584f80512052025j7a228e4cy8b955079ad480054@mail.gmail.com>

>From the example "An Example Tree Transformation" at
http://www.antlr.org/doc/sor.html#_bb1, I think I can do some basic
tree optimization before getting to the point of generating code for
my compiler.

1) From my experimenting, I cannot just pick nodes that are
optimizable, can I? From what I'm seeing, I think I need to build
enough of the language into the tree parser to get to the optimizable
parts. As a simple example, numeric constants that are operated on
together can be computed by the compiler instead of the resulting code
(ie, "a = 24 * 60" can be replaced with "a = 1440"). Am I correct in
this? I cannot just write a rule for the "*" in that example. I need
to write the rule for the "=" and anything else preceding it?

2) Is there a reference of optimizations that are listed on some web
site (or in the ANTLR docs that I somehow haven't found)? The only
ones I've thought of are numeric or string constants being used in an
expression.

Thanks!
-Rob
From gt54-antlr at cyconix.com  Tue Dec  6 01:14:41 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Tue Dec  6 01:14:49 2005
Subject: [antlr-interest] Must all grammar rules be implemented for tree
	parsers?
In-Reply-To: <738584f80512052025j7a228e4cy8b955079ad480054@mail.gmail.com>
References: <738584f80512052025j7a228e4cy8b955079ad480054@mail.gmail.com>
Message-ID: <43955681.6040602@cyconix.com>

Rob Greene wrote:
>>From the example "An Example Tree Transformation" at
> http://www.antlr.org/doc/sor.html#_bb1, I think I can do some basic
> tree optimization before getting to the point of generating code for
> my compiler.
> 
> 1) From my experimenting, I cannot just pick nodes that are
> optimizable, can I? From what I'm seeing, I think I need to build
> enough of the language into the tree parser to get to the optimizable
> parts. As a simple example, numeric constants that are operated on
> together can be computed by the compiler instead of the resulting code
> (ie, "a = 24 * 60" can be replaced with "a = 1440"). Am I correct in
> this? I cannot just write a rule for the "*" in that example. I need
> to write the rule for the "=" and anything else preceding it?
> 
> 2) Is there a reference of optimizations that are listed on some web
> site (or in the ANTLR docs that I somehow haven't found)? The only
> ones I've thought of are numeric or string constants being used in an
> expression.

Tony Hoare: "Premature optimisation is the root of all evil in programming".

If you've got a real application, then you're going to be lucky if your 
  parsers form anything more than a tiny fraction of the total work 
involved. I would concentrate on getting something working first 
(probably with manual tree parsing, at least to start with), which will 
give you a better overview of the whole process. The optimisations in 
the example tree transformation are useful for illustrating tree grammar 
ops, but I personally can't see that they're relevant to production code.

HTH

Paul

From ewbank at gmail.com  Tue Dec  6 02:06:36 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue Dec  6 02:06:39 2005
Subject: [antlr-interest] Must all grammar rules be implemented for tree
	parsers?
In-Reply-To: <738584f80512052025j7a228e4cy8b955079ad480054@mail.gmail.com>
References: <738584f80512052025j7a228e4cy8b955079ad480054@mail.gmail.com>
Message-ID: <dd3a065f0512060206k4266d5e0u86b54634569e3ff9@mail.gmail.com>

Hi Rob,

You asked, in part...

On 12/5/05, Rob Greene <robgreene@gmail.com> wrote:
> 1) From my experimenting, I cannot just pick nodes that are
> optimizable, can I? From what I'm seeing, I think I need to build
> enough of the language into the tree parser to get to the optimizable
> parts. As a simple example, numeric constants that are operated on
> together can be computed by the compiler instead of the resulting code
> (ie, "a = 24 * 60" can be replaced with "a = 1440"). Am I correct in
> this? I cannot just write a rule for the "*" in that example. I need
> to write the rule for the "=" and anything else preceding it?

Well, yes and no.  If you're careful, you can write a very simply tree
parser that wanders through the tree and hits only those nodes that
are "interesting"...

For example:

    program : #(PROGRAM ( expr )* ) ;

    expr
    { bool sawmatch = false; }
    :
        (
            // candidates for optimization
            ( #( op:ASGN do_binary_optimization[#op] )
            | #( op:PLUS do_binary_optimization[#op] )
            )
            { sawmatch = true; }
        )?
        ( {sawmatch == false}?
            #( . ( expr )* )
        )?
    ;

    do_binary_optimization
    [ RefAST &parent ]
    :
        ... whatever ...
    ;

This will "stop" only at ASGN and PLUS, and will dash through the rest
of the tree.  Using the "sawmatch" flag takes care of an ANTLR warning
if you have "( A | B | C | . )", because "A" and "." both match "A". 
Ugly at first, but it's an idiom we use for this type of operation.

Note that, if you are careful, you /can/ do operations in place as you
ask.  It just requires that you operate on the existing node, rather
than create a new node...

    replace_plus :
        #( #op:PLUS e1:expr e2:expr )
            {
                if (e1->getType() == LITERAL_INTEGER && e2->getType()
== LITERAL_INTEGER)
                {
                    // assuming a stack
                    int v1 = top(); pop();
                    int v2 = top(); pop();
                    push(v2+v1);

                    // tree surgery.  can't use "#op = #[LITERAL_INTEGER]"
                    // because this would not preserve the relationship to the
                    // parent node, whatever that may be.
                    #op->setType(LITERAL_INTEGER);
                    #op->setText("");
                    #op->setIntegerValue(top());
                    #op->setFirstChild(NullAST);
                }
            }
        ;
From lists at mkempka.de  Tue Dec  6 02:07:26 2005
From: lists at mkempka.de (Matthias Kempka)
Date: Tue Dec  6 02:07:32 2005
Subject: [SOLUTION] Re: [antlr-interest] Again: Source code position
In-Reply-To: <43919CCE.9080908@mkempka.de>
References: <43919CCE.9080908@mkempka.de>
Message-ID: <439562DE.6060003@mkempka.de>

Matthias Kempka wrote:

>Hello all,
>
>I'm aware that I'm not the first one to ask this question, but neither
>the FAQ nor the mailing list archive give me answers that I can work
>with, so here's my problem:
>
>I'm working with ANTLR 2.7.5 and the Java 1.5 Grammar by Michael Studmann.
>What I need is the source code position of an element in the AST.
>
>I see that the tokens that are created by the lexer have exactly the
>information I need. So I subclassed the CommonAST with a class named
>TokenPreservingAST. In the section Tokens{} in the Grammar I added the
>information which tokens should be represented by a TokenPreservingAST
>object.
>  
>
When I don't care about the Tokens{} in the grammar, but call

myParser.setASTNodeClass(TokenPreservingAST.class.getName());

before calling myParser.compilationUnit(), the ASTs are initialized correct.

Maybe, this is a thing for the FAQ.

Regards,
Matthias Kempka

From gt54-antlr at cyconix.com  Tue Dec  6 03:21:16 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Tue Dec  6 03:21:25 2005
Subject: [antlr-interest] C++, RefAST, &&, left-to-right eval: gcc bug?
Message-ID: <4395742C.3070804@cyconix.com>

I've got what appears to be a gcc bug (v3.4.3) when using the RefAST 
class with an && operator:

    // this calls 'getRvalue' and crashes if 'node' is '0'
    RefAST node = getFirstChild();
    if(node && !VCAST(node)->getRvalue()) {
      ...
    }

    // but this works as expected
    RefAST node = getFirstChild();
    if(node) {
       if(!VCAST(node)->getRvalue()) {
          ...
       }
    }

I use the first form a lot and it only seems to be a problem in one 
place. I've had a look at gcc's bugzilla, but this doesn't seem to be 
covered. Has anyone else seen this and have a workaround?

Thanks -

Paul

From mail at martin-probst.com  Tue Dec  6 04:57:12 2005
From: mail at martin-probst.com (Martin Probst)
Date: Tue Dec  6 04:57:23 2005
Subject: [antlr-interest] Must all grammar rules be implemented for
	tree parsers?
In-Reply-To: <43955681.6040602@cyconix.com>
References: <738584f80512052025j7a228e4cy8b955079ad480054@mail.gmail.com>
	<43955681.6040602@cyconix.com>
Message-ID: <1133873832.8428.6.camel@localhost.localdomain>

Hi,

> > 2) Is there a reference of optimizations that are listed on some web
> > site (or in the ANTLR docs that I somehow haven't found)? The only
> > ones I've thought of are numeric or string constants being used in an
> > expression.
> 
> Tony Hoare: "Premature optimisation is the root of all evil in programming".

I think he was referring to code-rewriting rules? As for those they are
very different with respect to the domain & type of the language -
functional, imperative, object oriented, declarative languages all have
different patterns. E.g. tail call optimisation is essential in
functional languages, and more or less irrelevant in others.

I don't know of a good collection, but if anyone does, please go
ahead :-)

Martin

From donalmurtagh at yahoo.co.uk  Tue Dec  6 05:19:07 2005
From: donalmurtagh at yahoo.co.uk (Donal Murtagh)
Date: Tue Dec  6 05:19:11 2005
Subject: [antlr-interest] preserving whitespace
Message-ID: <20051206131907.3768.qmail@web32004.mail.mud.yahoo.com>

Hi,

In Terence's article:
http://www.antlr.org/article/preserving.token.order/preserving.token.order.tml

He describes a means of preserving the original token sequence and whitespace. A shortcoming of
his solution is that whitespace occurring in between statements is lost. Overcoming this is left
as an exercise for the reader :o)

Have any readers figured out how to modify the solution in order to overcome this? If so, I'd be
grateful if they'd share it.

Best Wishes,
Don






		
___________________________________________________________ 
How much free photo storage do you get? Store your holiday 
snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com
From ewbank at gmail.com  Tue Dec  6 07:58:15 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue Dec  6 07:58:22 2005
Subject: [antlr-interest] preserving whitespace
In-Reply-To: <20051206131907.3768.qmail@web32004.mail.mud.yahoo.com>
References: <20051206131907.3768.qmail@web32004.mail.mud.yahoo.com>
Message-ID: <dd3a065f0512060758j62bfa78ei53d72bcc42352292@mail.gmail.com>

I think you misread the article.  All whitespace is preserved by the
TokenStreamTracker object.  The problem is that whitespace before or
after the interesting tokens is not easily accessible.  That means
that "a + b     " will be displayed as "a + b" - the trailing
whitespace is not contained within the sequence of tokens tracked.
(nor is leading whitespace).

Perhaps the TokenStreamTracker could be generous and harvest adjacent
white-space tokens when a sequence is asked for(?), but that's really
dependent on exactly what you want to do.

Hope this helps,
- Bryan Ewbank

On 12/6/05, Donal Murtagh <donalmurtagh@yahoo.co.uk> wrote:
> Hi,
>
> In Terence's article:
> http://www.antlr.org/article/preserving.token.order/preserving.token.order.tml
>
> He describes a means of preserving the original token sequence and whitespace. A shortcoming of
> his solution is that whitespace occurring in between statements is lost. Overcoming this is left
> as an exercise for the reader :o)
>
> Have any readers figured out how to modify the solution in order to overcome this? If so, I'd be
> grateful if they'd share it.
>
> Best Wishes,
> Don
>
>
>
>
>
>
>
> ___________________________________________________________
> How much free photo storage do you get? Store your holiday
> snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com
>
From kverma at hotmail.com  Tue Dec  6 08:00:01 2005
From: kverma at hotmail.com (Kamal Verma)
Date: Tue Dec  6 08:00:06 2005
Subject: [antlr-interest] preserving whitespace
In-Reply-To: <20051206131907.3768.qmail@web32004.mail.mud.yahoo.com>
Message-ID: <BAY110-F1590F2EDA1D0808237E94EC9400@phx.gbl>

I tried it long ago wothout any success, and then I lost intrest. I will 
also like to hear from folks who tried or have any ideas.

Also, the article says,

     "Currently, there is no obvious means of doing this simply in ANTLR"

I was wondering if ANTL v3 will make it any easier?

Thanks and regards,
-Kamal

>From: Donal Murtagh <donalmurtagh@yahoo.co.uk>
>Hi,
>
>In Terence's article:
>http://www.antlr.org/article/preserving.token.order/preserving.token.order.tml
>
>He describes a means of preserving the original token sequence and 
>whitespace. A shortcoming of
>his solution is that whitespace occurring in between statements is lost. 
>Overcoming this is left
>as an exercise for the reader :o)
>
>Have any readers figured out how to modify the solution in order to 
>overcome this? If so, I'd be
>grateful if they'd share it.

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today - it's FREE! 
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/

From zilong.wu at gmail.com  Tue Dec  6 08:26:26 2005
From: zilong.wu at gmail.com (WU Zilong)
Date: Tue Dec  6 08:27:01 2005
Subject: [antlr-interest] How to get a recursive/tree content structure of a
	html using html.g ?
Message-ID: <2a5062320512060826k48b90c0l2442b88a38f6ddcf@mail.gmail.com>

Hi all,

    I'm a newbie and meet a problem when using the html.g in the C++
examples. I wish to get the structure of the input html. Such as I get
a node named <html> </html> as root, which has sub-node <head></head>
and <body></body>, and also <head></head> and <body></body> node have
their own sub-nodes. It's something like a tree strucutre. How could I
do?
   Maybe I need to add AST support? I tried by adding buildAST=true
to options field. And in the sample I got the <html> </html> tag with
parser.getAST(). My question is that why the child number of the ast
(derived by parser.getAST()) is 0? Of course there are many other tags
such as <head></head> and <body></body> under <html></html>. How can I
get the sub nodes?

   Thanks

   Andy
From maikmerten at gmx.net  Tue Dec  6 08:58:26 2005
From: maikmerten at gmx.net (Maik Merten)
Date: Tue Dec  6 08:57:03 2005
Subject: [antlr-interest] Force nodes for grammar rules
In-Reply-To: <dd3a065f0512051430n27418b80ud673f5ca6a3cc5ea@mail.gmail.com>
References: <4394ACA7.2030005@gmx.net>
	<dd3a065f0512051430n27418b80ud673f5ca6a3cc5ea@mail.gmail.com>
Message-ID: <4395C332.9000801@gmx.net>

Bryan Ewbank wrote:
> There's no automatic way to do it.  You would have to make sure that
> every production has an action of the form
>      { ## = #( #PRODUCTION_ID,"production_name"], ## ); }
> Of course, the leaf nodes, such as identifier, etc, might need
> different processing...

Thank you for your proposal. We're already using that approach:

pr_BasicStatements :
	pr_Assignment | pr_LogStatement | pr_LoopConstruct |
pr_ConditionalConstruct |
	pr_SelectCaseConstruct
{
## = #([BasicStatements,"BasicStatements"], ##);
};


The "BasicStatements"-node isn't included in the AST in some cases, though.


Maik
From maikmerten at gmx.net  Tue Dec  6 08:59:55 2005
From: maikmerten at gmx.net (Maik Merten)
Date: Tue Dec  6 08:58:30 2005
Subject: [antlr-interest] Force nodes for grammar rules
In-Reply-To: <20051205212259.77991.qmail@web30914.mail.mud.yahoo.com>
References: <20051205212259.77991.qmail@web30914.mail.mud.yahoo.com>
Message-ID: <4395C38B.9070507@gmx.net>

Matt Benson wrote:
> read the ANTLR Tree Construction portion of the
> manual; search for "AST Action Translation".  Is this
> what you want?

Thanks for your answer. I reread that part of the manual but couldn't
identfiy something usable.

Maik
From ewbank at gmail.com  Tue Dec  6 09:26:47 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue Dec  6 09:26:53 2005
Subject: [antlr-interest] Force nodes for grammar rules
In-Reply-To: <4395C332.9000801@gmx.net>
References: <4394ACA7.2030005@gmx.net>
	<dd3a065f0512051430n27418b80ud673f5ca6a3cc5ea@mail.gmail.com>
	<4395C332.9000801@gmx.net>
Message-ID: <dd3a065f0512060926w7af9258cl52dbe972d7984ae4@mail.gmail.com>

On 12/6/05, Maik Merten <maikmerten@gmx.net> wrote:
> We're already using that approach:
>
> pr_BasicStatements :
>       pr_Assignment
>       | pr_LogStatement
>       | pr_LoopConstruct
>       | pr_ConditionalConstruct
>       | pr_SelectCaseConstruct
> {
> ## = #([BasicStatements,"BasicStatements"], ##);
> };
>
>
> The "BasicStatements"-node isn't included in the AST in some cases, though.

Maik,

I'm guessing, as "in some cases" is hard to diagnose from afar.... However...

If you look at the generated code, you should see that with your
original production, the intermediate node is only added when a
pr_SelectCaseConstruct is matched.  If you want to have that action
done for all alternatives, then you need to add an extra set of
parenthesis around the alternatives:

    pr_BasicStatements :
        ( pr_Assignment
        | pr_LogStatement
        | pr_LoopConstruct
        | pr_ConditionalConstruct
        | pr_SelectCaseConstruct
        )
        { ## = #([BasicStatements,"BasicStatements"], ##); }
    ;

Hope this works :-)
- Bryan Ewbank
From lucianaleal2002 at yahoo.com.br  Tue Dec  6 09:30:38 2005
From: lucianaleal2002 at yahoo.com.br (Luciana Nunes Leal)
Date: Tue Dec  6 09:30:44 2005
Subject: [antlr-interest] How can I capture an error?
Message-ID: <20051206173038.39080.qmail@web33309.mail.mud.yahoo.com>

Hi all,
   
  I?d like to know how can I capture an error?
  For example, I defined the grammar, generate de lexer and the parser. After, I create a class that execute the parser, like below:
   
  ...
  LNCLexer lexer = new LNCLexer(stringReader);
LNCParser parser = new LNCParser(lexer);
parser.rule();
...
   
  But I need to capture errors like this: "line 1:1: unexpected token: when". The method doesn?t throw exceptions.
   
  Thanks in advance, 
  Luciana.

		
---------------------------------
 Yahoo! doce lar. Fa?a do Yahoo! sua homepage.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051206/843302dd/attachment.html
From maikmerten at gmx.net  Tue Dec  6 09:41:18 2005
From: maikmerten at gmx.net (Maik Merten)
Date: Tue Dec  6 09:39:54 2005
Subject: [antlr-interest] Force nodes for grammar rules
In-Reply-To: <dd3a065f0512060926w7af9258cl52dbe972d7984ae4@mail.gmail.com>
References: <4394ACA7.2030005@gmx.net>	<dd3a065f0512051430n27418b80ud673f5ca6a3cc5ea@mail.gmail.com>	<4395C332.9000801@gmx.net>
	<dd3a065f0512060926w7af9258cl52dbe972d7984ae4@mail.gmail.com>
Message-ID: <4395CD3E.5020104@gmx.net>

> I'm guessing, as "in some cases" is hard to diagnose from afar.... However...

Oh, yeah... right. Sorry for being that fuzzy. We just didn't nail "in
some cases" down yet...

> If you look at the generated code, you should see that with your
> original production, the intermediate node is only added when a
> pr_SelectCaseConstruct is matched.  If you want to have that action
> done for all alternatives, then you need to add an extra set of
> parenthesis around the alternatives:

I guess that explains what's going on. Thank you very much for your help!


Maik
From open.zone at virgin.net  Tue Dec  6 10:12:51 2005
From: open.zone at virgin.net (Micheal J)
Date: Tue Dec  6 09:57:11 2005
Subject: [antlr-interest] Visual Studio syntax highlighting for an
	Antlrgrammar
In-Reply-To: <4393F603.4060501@bluel.com>
Message-ID: <003501c5fa90$ae9b5fe0$6b02a8c0@hercules>

> Pete Gonzalez wrote:
> Currently I'm just focusing on syntax highlighting (which 
> uses the lexer 
> but not the parser).  The IDE text editor is optimized to prevent the 
> entire file from being rescanned whenever something changes.  
> The required 
> C# interface looks like this:
> 
>    void IScanner.SetSource(string source, int offset);
>    bool IScanner.ScanTokenAndProvideInfoAboutIt(TokenInfo tokenInfo,
>      ref int state);
> 
> The idea is that the editor passes a single line of text to 
> SetSource(), 
> and then calls ScanTokenAndProvideInfoAboutIt() repeatedly to 
> obtain the 
> colored tokens for that line.  In this situation, the only context 
> available to the lexer is a single "state" integer (which for 
> Babel stores 
> flex's "yy_start" global variable).  Unfortunately, since Antlr is a 
> recursive descent design, there isn't an obvious way to 
> restart the lexer 
> e.g. in the middle of a multiline comment.  Has anyone else 
> dealt with this 
> problem before?

An ANTLR v2 lexer's state is encapsulated in the LexerShareInputState(+ the
InputBuffer). You also need to track the Stream's state of course. Assuming
you can seek forwards and backwards at will in your stream, won't copying
the state object(s) and storing in an array give you a single state integer
(the array index)?.

Once can imagine methods int GetLexerState(), void RestoreLexerState(int)
and void DeleteLexerState(int)...

> Later, Pete Gonzalez also wrote:
> The impression I'm getting is that recursive descent lexers 
> are actually 
> inferior with the kind of optimizations required for 
> responsive syntax 
> highlighting.

Perhaps. Or it may just be that VSIP's design favours flex/bison-like tools.

> I looked at the code for another high-quality 
> text editor, 
> and they use hand-coded lexers for each language, with a 
> global integer 
> state just like Flex.

Is this an open-source editor?. Id like to see the code you refer to.

> Maybe Microsoft's interface is intentionally 
> encouraging this approach?  My kludge was to substitute a 
> flex-style lexer 
> in C#; it works great and was very easy to integrate.
> 
> It is aesthetically pleasing that Antlr's lexer and parser 
> share a common 
> algorithm.  However, this experience is building a case that Antlr's 
> approach is less versatile (and possibly slower?) when it 
> comes to the lexer.

ANTLR's lexer are generally currently slower in v2 than the Flex variant.
But they are more versatile (that's why they are slower). And they can be
developed (and debugged) much more quickly esp. for more complex lexing
scenarios (at least in my experience).


Cheers,

Micheal

From monty at codetransform.com  Tue Dec  6 10:53:26 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Tue Dec  6 10:53:35 2005
Subject: [antlr-interest] Force nodes for grammar rules
In-Reply-To: <4395C332.9000801@gmx.net>
References: <4394ACA7.2030005@gmx.net>	<dd3a065f0512051430n27418b80ud673f5ca6a3cc5ea@mail.gmail.com>
	<4395C332.9000801@gmx.net>
Message-ID: <4395DE26.5050003@codetransform.com>

Maik Merten wrote:
> Bryan Ewbank wrote:
> 
>>There's no automatic way to do it.  You would have to make sure that
>>every production has an action of the form
>>     { ## = #( #PRODUCTION_ID,"production_name"], ## ); }
>>Of course, the leaf nodes, such as identifier, etc, might need
>>different processing...
> 
> 
> Thank you for your proposal. We're already using that approach:
> 
> pr_BasicStatements :
> 	pr_Assignment | pr_LogStatement | pr_LoopConstruct |
> pr_ConditionalConstruct |
> 	pr_SelectCaseConstruct
> {
> ## = #([BasicStatements,"BasicStatements"], ##);
> };
> 
> 
> The "BasicStatements"-node isn't included in the AST in some cases, though.

Yeah, you have it building on just the last alt.  Put your whole match
inside of parens

( pr_Assignment | .... ) {##=#([BasicStatements,"BasicStatements"], ##);}

Another more automatic way of doing this would be to modify the code
generator -- in debug mode is calls enterRule() and exitRule() I think.
 Messing with that might get you where you want to go but will be a
little more dangerous than doing it manually.

Monty
From parrt at cs.usfca.edu  Tue Dec  6 14:27:10 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Dec  6 14:26:13 2005
Subject: [antlr-interest] created new antlr-dev mailing list
Message-ID: <338CB143-2106-474B-9424-FDA9D99A92FA@cs.usfca.edu>

Howdy,

For anyone wants to listen in on the conversation between people  
building back-ends and runtime support for ANTLR v3, see the archive  
or join:

http://www.antlr.org/mailman/listinfo/antlr-dev

Ter
From waxline at dsndata.com  Tue Dec  6 17:41:56 2005
From: waxline at dsndata.com (Dan Axline)
Date: Tue Dec  6 17:42:03 2005
Subject: [antlr-interest] antlr build problem
Message-ID: <43963DE4.6080503@dsndata.com>

I get this error when running make:

>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
>> make -C ./antlr all
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
*** compiling 0 Java file(s)
javac: no source files

...

xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
                       >> E R R O R <<
============================================================

/usr/local/waxline/programs/j2sdk1.4.2_05/bin/javac -d . -sourcepath
/usr/local/waxline/downloads/antlr-2.7.5 -classpath
/usr/local/waxline/tmp_antlr/antlr/antlr.jar:/usr/local/waxline/programs/j2sdk1.4.2_05/lib:.

============================================================
Got an error while trying to execute  command  above.  Error
messages (if any) must have shown before. The exit code was:
exit(2)
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
make[1]: *** [/usr/local/waxline/tmp_antlr/antlr/antlr.jar] Error 2
make: *** [all] Error 1


I tried figuring out what is wrong with the Makefile, but I'm out of
my depth there.  Apparently $ARGV is empty in javac.sh...

Here is a script describing how I am trying to install antlr:

#!/bin/bash

BASE=/usr/local/waxline
DOWNLOADS=$BASE/downloads
TMP=$BASE/tmp_antlr
SRC=$DOWNLOADS/antlr-2.7.5
INSTALL=$BASE/programs/antlr-2.7.5

cd $DOWNLOADS
wget http://www.antlr.org/download/antlr-2.7.5.tar.gz
tar -zxvf antlr-2.7.5.tar.gz
mkdir $TMP
cd $TMP
$SRC/configure --prefix=$INSTALL
make

Any ideas about where I am going wrong?

From parrt at cs.usfca.edu  Tue Dec  6 17:55:28 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Dec  6 17:54:30 2005
Subject: [antlr-interest] just wasted another 2 hours on nutch search for
	antlr.org
Message-ID: <0E197E3D-9F58-4CD4-93FA-310FBFE103D9@cs.usfca.edu>

ok, so it crawls and should let me see the results.  It was working  
but crashing the server; I had a problem with not enough file  
descriptors...somebody told me to bump to 8000.  But anyway, some  
path stuff changed and I decided to upgrade...now I have a really  
bizarre error that makes no sense...can't find some classes and I  
have literally every jar (yes there are like 10) in the path...the  
class it can't find is in a jar in the path.  I give up.  Nutch /  
java are too smart for me. :(

Ter
From parrt at cs.usfca.edu  Tue Dec  6 18:22:14 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Dec  6 18:21:16 2005
Subject: [antlr-interest] search uses google now
Message-ID: <1F514CF3-3B4B-4412-87AE-148D49408374@cs.usfca.edu>

Ok, i gave up on nutch.  Prashant had a great idea...just use the  
site:antlr.org option for google.  SO, type in a search and it will  
give you antlr results (redirects to google).

Ter
From pgonzalez at bluel.com  Tue Dec  6 19:27:09 2005
From: pgonzalez at bluel.com (Pete Gonzalez)
Date: Tue Dec  6 19:27:30 2005
Subject: [antlr-interest] Visual Studio syntax highlighting for
	an	Antlrgrammar
In-Reply-To: <003501c5fa90$ae9b5fe0$6b02a8c0@hercules>
References: <003501c5fa90$ae9b5fe0$6b02a8c0@hercules>
Message-ID: <4396568D.5000601@bluel.com>


Micheal J wrote:
> An ANTLR v2 lexer's state is encapsulated in the LexerShareInputState(+ the
> InputBuffer). You also need to track the Stream's state of course. Assuming
> you can seek forwards and backwards at will in your stream, won't copying
> the state object(s) and storing in an array give you a single state integer
> (the array index)?.

I don't see how this is possible.  For example, the Antlr lexer contains 
loops that read all the characters in a comment, with no way to exit or 
resume the loop.

>>I looked at the code for another high-quality 
>>text editor, 
>>and they use hand-coded lexers for each language, with a 
>>global integer 
>>state just like Flex.
> Is this an open-source editor?. Id like to see the code you refer to.

Sure, take a look at the LexCPP.cxx here:
http://cvs.sourceforge.net/viewcvs.py/scintilla/scintilla/src/

The state is called "initStyle".

Cheers,
-Pete

From open.zone at virgin.net  Tue Dec  6 20:16:12 2005
From: open.zone at virgin.net (Micheal J)
Date: Tue Dec  6 20:00:27 2005
Subject: [antlr-interest] Visual Studio syntax highlighting for
	an	Antlrgrammar
In-Reply-To: <4396568D.5000601@bluel.com>
Message-ID: <003801c5fae4$f60ea6d0$6b02a8c0@hercules>

> Micheal J wrote:
> > An ANTLR v2 lexer's state is encapsulated in the 
> > LexerShareInputState(+ the InputBuffer). You also need to track the 
> > Stream's state of course. Assuming you can seek forwards 
> and backwards 
> > at will in your stream, won't copying the state object(s) 
> and storing 
> > in an array give you a single state integer (the array index)?.
> 
> I don't see how this is possible.  For example, the Antlr 
> lexer contains 
> loops that read all the characters in a comment, with no way 
> to exit or 
> resume the loop.

My mistake. I just re-read your post(s) and noticed you mentioned
stopping/resuming in the middle of a rule too (multi-line comment).

> > Is this an open-source editor?. Id like to see the code you 
> refer to.
> 
> Sure, take a look at the LexCPP.cxx here:
> http://cvs.sourceforge.net/viewcvs.py/scintilla/scintilla/src/
> 
> The state is called "initStyle".


Thanks,

Micheal

From donalmurtagh at yahoo.co.uk  Wed Dec  7 01:18:14 2005
From: donalmurtagh at yahoo.co.uk (Donal Murtagh)
Date: Wed Dec  7 01:18:17 2005
Subject: [antlr-interest] preserving whitespace
In-Reply-To: <dd3a065f0512060758j62bfa78ei53d72bcc42352292@mail.gmail.com>
Message-ID: <20051207091814.5799.qmail@web32012.mail.mud.yahoo.com>

Hi Bryan,

Thanks for your response. My understanding of the article is the same as you've described. The
shortcoming I mentioned below is that "whitespace occurring in between statements [not tokens]" is
omitted.  

I think it's more accurate to characterise this behaviour as a shortcoming rather than a design
choice. If this whitespace were preserved, the client could always remove it if required, but if
it's "automatically" discarded....

I appreciate that the TokenStreamTracker object keeps *all* the tokens, but the problem is that if
you walk the tree and ask a node to print out it's children (including whitespace),
leading/tailing whitespace is omitted. 

Best Wishes,
Don

--- Bryan Ewbank <ewbank@gmail.com> wrote:

> I think you misread the article.  All whitespace is preserved by the
> TokenStreamTracker object.  The problem is that whitespace before or
> after the interesting tokens is not easily accessible.  That means
> that "a + b     " will be displayed as "a + b" - the trailing
> whitespace is not contained within the sequence of tokens tracked.
> (nor is leading whitespace).
> 
> Perhaps the TokenStreamTracker could be generous and harvest adjacent
> white-space tokens when a sequence is asked for(?), but that's really
> dependent on exactly what you want to do.
> 
> Hope this helps,
> - Bryan Ewbank
> 
> On 12/6/05, Donal Murtagh <donalmurtagh@yahoo.co.uk> wrote:
> > Hi,
> >
> > In Terence's article:
> > http://www.antlr.org/article/preserving.token.order/preserving.token.order.tml
> >
> > He describes a means of preserving the original token sequence and whitespace. A shortcoming
> of
> > his solution is that whitespace occurring in between statements is lost. Overcoming this is
> left
> > as an exercise for the reader :o)
> >
> > Have any readers figured out how to modify the solution in order to overcome this? If so, I'd
> be
> > grateful if they'd share it.
> >
> > Best Wishes,
> > Don
> >
> >
> >
> >
> >
> >
> >
> > ___________________________________________________________
> > How much free photo storage do you get? Store your holiday
> > snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com
> >
> 



	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com
From mail at martin-probst.com  Wed Dec  7 01:23:19 2005
From: mail at martin-probst.com (Martin Probst)
Date: Wed Dec  7 01:23:34 2005
Subject: [antlr-interest] How can I capture an error?
In-Reply-To: <20051206173038.39080.qmail@web33309.mail.mud.yahoo.com>
References: <20051206173038.39080.qmail@web33309.mail.mud.yahoo.com>
Message-ID: <1133947400.8428.23.camel@localhost.localdomain>

Hi,

> I?d like to know how can I capture an error?

Did you read the manual about error handling? There is an option called
"defaultErrorHandler". Look that up.

Martin
> 

From donalmurtagh at yahoo.co.uk  Wed Dec  7 01:40:07 2005
From: donalmurtagh at yahoo.co.uk (Donal Murtagh)
Date: Wed Dec  7 01:40:30 2005
Subject: [antlr-interest] preserving whitespace
In-Reply-To: <BAY110-F1590F2EDA1D0808237E94EC9400@phx.gbl>
Message-ID: <20051207094007.24017.qmail@web32009.mail.mud.yahoo.com>

Hi Kamal,

Where Terence says: "Currently, there is no obvious means of doing this simply in ANTLR", he's
referring to preserving original token sequence in ASTs IF YOU DON'T HAVE THE EXTRA CLASSES
PROVIDED IN THE ARTICLE, rather than the shortcoming I've described. 

Apparently the ability to preserve the original format will be "standard equipment" in ANTLR v.3,
which I believe is due for release in spring 2006.

Cheers,
Don

--- Kamal Verma <kverma@hotmail.com> wrote:

> I tried it long ago wothout any success, and then I lost intrest. I will 
> also like to hear from folks who tried or have any ideas.
> 
> Also, the article says,
> 
>      "Currently, there is no obvious means of doing this simply in ANTLR"
> 
> I was wondering if ANTL v3 will make it any easier?
> 
> Thanks and regards,
> -Kamal



		
___________________________________________________________ 
To help you stay safe and secure online, we've developed the all new Yahoo! Security Centre. http://uk.security.yahoo.com
From RamosD.External at infineon.com  Wed Dec  7 03:20:07 2005
From: RamosD.External at infineon.com (RamosD.External@infineon.com)
Date: Wed Dec  7 03:20:12 2005
Subject: [antlr-interest] Behavior of LA(n) at EOF?
Message-ID: <00BDEDEA1DCF5B47A49C12B11EED928F0683C838@porse201.eu.infineon.com>

HI , I see your sugestion to resolve the problem of comment on the last
line of file. The solution resolve this problem but if I have a comment
in the first line this solution have problems. My file is like this:

//test
...
//(here is the end of file without new line)

Please could yo help me.

	Daniel Ramos
From thiago.silva at kdemail.net  Wed Dec  7 04:12:14 2005
From: thiago.silva at kdemail.net (Thiago Silva)
Date: Wed Dec  7 06:09:17 2005
Subject: [antlr-interest] Parser acessing lexer rules info for error recovery
Message-ID: <200512071212.14514.thiago.silva@kdemail.net>

Hello, 
I'm having a problem on parser error recovery. Some times I need lexer rules 
info to proceed with the recovery. But I'm not so sure the way to proceed, 
after reading the manual, the generated sources and antlr sources.

As a simple example:

----------------------
class SomeParser extends Parser

somerule : (....);

exception
catch[...] {
   //here I need to check, for instance, if LA(1) is a T_DATATYPE
  //or if LA(1) belongs to the token section (testLiteralsTable()?)
}


class SomeParser extends Lexer;

T_DATATYPE : T_FOO | T_BAR

T_FOO: "foo";
T_BAR: "bar"
----------------------

Now, what I'm doing is checking the LA in the catch block, manually writing 
(again) the members of T_DATATYPE:

catch[..]
 if(la_token == T_FOO | la_token == T_BAR) {
   //print a warning message
 } else {
   //print a different warning message
 }


So, if T_DATATYPE changes, I would have to update all the catch[] blocks that 
checks for T_DATATYPE.

Did I miss something in the docs? Or is this the only way possible to do it?
By the way, I'm using C++.

Thanks in advance,
Thiago

From PKronenberg at technicacorp.com  Wed Dec  7 07:00:07 2005
From: PKronenberg at technicacorp.com (Peter Kronenberg)
Date: Wed Dec  7 06:58:09 2005
Subject: [antlr-interest] Catching errors
Message-ID: <2AC4B3D9C33D8F49B5D9C3C53A99605401431045@mail-hq1.Technica1.com>

How can I trap parsing errors from Antlr?  When there is a syntax error
in the expression, I get something like this on System.err:

line 1:16: unexpected token: 80

But in my Java code, the call to the parser returns with no errors. The
only indication that there is a problem is that parser.getAST() returns
null.  So I can detect that there is an error, but I'd like to be able
to trap the text of the error so I can display it properly in the
client. 


Peter Kronenberg
Software Engineer
(703) 885-1222
pkronenberg@technicacorp.com


The information contained in this transmission may contain privileged and confidential information. It is intended only for the use of the person(s) named above. If you are not the intended recipient, you are hereby notified that any review, dissemination, distribution or duplication of this communication is strictly prohibited. If you are not the intended recipient, please contact the sender by reply e-mail and destroy all copies of the original message. Technica Corporation does not represent this e-mail to be free from any virus, fault or defect and it is therefore the responsibility of the recipient to first scan it for viruses, faults and defects. To reply to our e-mail administrator directly, please send an e-mail to postmaster@technicacorp.com. Thank you.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051207/0ee46627/attachment-0001.html
From dskolovos at gmail.com  Wed Dec  7 07:02:24 2005
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Wed Dec  7 07:02:30 2005
Subject: [antlr-interest] Catching errors
In-Reply-To: <2AC4B3D9C33D8F49B5D9C3C53A99605401431045@mail-hq1.Technica1.com>
References: <2AC4B3D9C33D8F49B5D9C3C53A99605401431045@mail-hq1.Technica1.com>
Message-ID: <4396F980.20102@gmail.com>

Hi Peter,

Just add the following (or similar) code in your parser and lexer in the 
.g file (fragement taken from OCL.g)

	private Vector errors = new Vector();
	private Vector warnings = new Vector();
	
	/**@return The number of errors found in the parser*/
	public int errorNumber(){
		return errors.size();
	}
	
	/**@return The number of warnings found in the parser*/
	public int warningNumber(){
		return warnings.size();
	}
	
	/**@return All errors messages found in the parser*/
	public String [] errors () {
		String [] ret = new String [errors.size()];
		for (int i = 0; i < ret.length; ++i)
			ret[i] = (String)errors.elementAt(i);
		return ret;
	}
	
	/**@return All warning messages found in the parser*/
	public String [] warnings () {
		String [] ret = new String [warnings.size()];
		for (int i = 0; i < ret.length; ++i)
			ret[i] = (String)warnings.elementAt(i);
		return ret;
	}

	public void reportError(RecognitionException ex) {
		errors.addElement(ex.getMessage());
	}
	
	public void reportError(String s) {
		errors.addElement(s);
	}
	
	public void reportWarning(String s) {
		warnings.addElement(s);
	}

Cheers,
Dimitrios

Peter Kronenberg wrote:

> How can I trap parsing errors from Antlr?  When there is a syntax 
> error in the expression, I get something like this on System.err:
>
> line 1:16: unexpected token: 80
>
> But in my Java code, the call to the parser returns with no errors. 
> The only indication that there is a problem is that parser.getAST() 
> returns null.  So I can detect that there is an error, but I'd like to 
> be able to trap the text of the error so I can display it properly in 
> the client.
>
>
> Peter Kronenberg
> Software Engineer
> (703) 885-1222
> pkronenberg@technicacorp.com
>
> The information contained in this transmission may contain privileged 
> and confidential information. It is intended only for the use of the 
> person(s) named above. If you are not the intended recipient, you are 
> hereby notified that any review, dissemination, distribution or 
> duplication of this communication is strictly prohibited. If you are 
> not the intended recipient, please contact the sender by reply e-mail 
> and destroy all copies of the original message. Technica Corporation 
> does not represent this e-mail to be free from any virus, fault or 
> defect and it is therefore the responsibility of the recipient to 
> first scan it for viruses, faults and defects. To reply to our e-mail 
> administrator directly, please send an e-mail to 
> postmaster@technicacorp.com <mailto:postmaster@technicacorp.com>. 
> Thank you.
>
>  
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051207/4c280fb1/attachment.html
From donalmurtagh at yahoo.co.uk  Wed Dec  7 07:21:22 2005
From: donalmurtagh at yahoo.co.uk (Donal Murtagh)
Date: Wed Dec  7 07:21:29 2005
Subject: [antlr-interest] problem with Terence's preserving token sequence
	implementation?
Message-ID: <20051207152122.58770.qmail@web32013.mail.mud.yahoo.com>

Hi,

I've been using the approach advocated by TP in:
http://www.antlr.org/article/preserving.token.order/preserving.token.order.tml

in order to preserve the original token sequence in my file. Using the code provided with the
article, I tried to build an AST that tracks the min/max index position of it's children, but I
noticed that on a few occassions the following method in ASTMinMax is throwing a
NullPointerException

public String getText() {   
  return token.getText();
}

I temporarily changed this method to:

public String getText() {   
  if (token == null)
    return "FOO";
  return token.getText();
}

It turns out that each node "FOO" is a node that I am returning "manually" from a rule, e.g. 

parentRule
:	"A_PARENT"!
	LBRACE!
		( processChildren )*
	RBRACE!
	{
		// add this node as the parent of this rule
  		parentRule = #(#[PARENT_TOKEN, "ParentNodeText"], parentRule);
	}
;

I can sort of see why this is causing a problem - because the nodes are not being added in the
"usual" sequence, i.e. the children are processed before the parent node is added.

If anyone knows how to modify this example in order to support nodes added in this fashion, I'd be
grateful if they'd let me know.

Cheers,
Don


		
___________________________________________________________ 
To help you stay safe and secure online, we've developed the all new Yahoo! Security Centre. http://uk.security.yahoo.com
From parrt at cs.usfca.edu  Wed Dec  7 07:53:55 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec  7 07:53:59 2005
Subject: [antlr-interest] preserving whitespace
In-Reply-To: <20051207091814.5799.qmail@web32012.mail.mud.yahoo.com>
References: <20051207091814.5799.qmail@web32012.mail.mud.yahoo.com>
Message-ID: <DFAD2CCE-DEF9-41F6-832B-1E1D1ADE9C23@cs.usfca.edu>

Howdy...i think i remember the limitation being also that you can't  
print out tokens that don't get into the tree and their surrounding  
whitespace.  Like semicolons don't make it into the tree.

Ter
From oliver.zeigermann at gmail.com  Wed Dec  7 08:45:04 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Wed Dec  7 08:45:11 2005
Subject: [antlr-interest] got rule memoization working :)
In-Reply-To: <A181ADF3-A58E-4775-8F4A-073296087442@cs.usfca.edu>
References: <A181ADF3-A58E-4775-8F4A-073296087442@cs.usfca.edu>
Message-ID: <9da4f4520512070845k1fe7b4ady@mail.gmail.com>

Is this similiar to the chart parsers used in NLP?

Oliver

2005/12/4, Terence Parr <parrt@cs.usfca.edu>:
> Ok, took me a few hours to get this exactly right, but much of it was
> figuring out how to build the cache...John Mitchell and I kinda came
> to a conclusion by phone but I didn't implement it.  For now, my
> cache keeps all info around and it could get big; I'll fix later.
> You can turn it off with option
>
>    -nomemo        when backtracking don't generate memoization code
>
> Anyway, this would be really easy to implement manually (if
> tediously) for v2.  This should give you all the info you need to
> know to implement:
>
> http://www.antlr.org/blog/antlr3/lookahead.tml
>
> Enjoy...I must say that this is all pretty slick. :)
>
> I'll push to the depot soon...I'll release 3.0ea7 this week I hope.
>
> Ter
>
From madcapmaggie at yahoo.com  Wed Dec  7 08:50:49 2005
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Wed Dec  7 08:50:52 2005
Subject: [antlr-interest] Parser acessing lexer rules info for error
	recovery
In-Reply-To: <200512071212.14514.thiago.silva@kdemail.net>
Message-ID: <20051207165049.57131.qmail@web30213.mail.mud.yahoo.com>

If you need to make the same test in multiple  catch
blocks, you can
write a function to do it and just call it in all the
catch blocks.

 

--- Thiago Silva <thiago.silva@kdemail.net> wrote:

> Hello, 
> I'm having a problem on parser error recovery. Some
> times I need lexer rules 
> info to proceed with the recovery. But I'm not so
> sure the way to proceed, 
> after reading the manual, the generated sources and
> antlr sources.
> 
> As a simple example:
> 
> ----------------------
> class SomeParser extends Parser
> 
> somerule : (....);
> 
> exception
> catch[...] {
>    //here I need to check, for instance, if LA(1) is
> a T_DATATYPE
>   //or if LA(1) belongs to the token section
> (testLiteralsTable()?)
> }
> 
> 
> class SomeParser extends Lexer;
> 
> T_DATATYPE : T_FOO | T_BAR
> 
> T_FOO: "foo";
> T_BAR: "bar"
> ----------------------
> 
> Now, what I'm doing is checking the LA in the catch
> block, manually writing 
> (again) the members of T_DATATYPE:
> 
> catch[..]
>  if(la_token == T_FOO | la_token == T_BAR) {
>    //print a warning message
>  } else {
>    //print a different warning message
>  }
> 
> 
> So, if T_DATATYPE changes, I would have to update
> all the catch[] blocks that 
> checks for T_DATATYPE.
> 
> Did I miss something in the docs? Or is this the
> only way possible to do it?
> By the way, I'm using C++.
> 
> Thanks in advance,
> Thiago
> 
> 

From gabriel.adrian.radu at googlemail.com  Wed Dec  7 08:59:16 2005
From: gabriel.adrian.radu at googlemail.com (Gabriel Radu)
Date: Wed Dec  7 08:59:24 2005
Subject: [antlr-interest] Antlr v3 realease date
Message-ID: <67e2ed240512070859k740ab47m@mail.gmail.com>

Dear all,


Does anyone know when Antlr v3 will be released? At least with 10
years accuracy? :-)

I am writing a grammar and I wonder whether to try to get an Antlr v3
(alpha/beta) and write for that, in hope that v3 will be finished by
the time I will finish my grammar.



Best regards,
Gabriel Radu
From parrt at cs.usfca.edu  Wed Dec  7 09:35:41 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec  7 09:34:40 2005
Subject: [antlr-interest] Antlr v3 realease date
In-Reply-To: <67e2ed240512070859k740ab47m@mail.gmail.com>
References: <67e2ed240512070859k740ab47m@mail.gmail.com>
Message-ID: <16FF5382-3717-4AA5-ACA3-FEE54D929250@cs.usfca.edu>


On Dec 7, 2005, at 8:59 AM, Gabriel Radu wrote:

> Dear all,
>
>
> Does anyone know when Antlr v3 will be released? At least with 10
> years accuracy? :-)

I expect sometime near end of summer 2006 :)

> I am writing a grammar and I wonder whether to try to get an Antlr v3
> (alpha/beta) and write for that, in hope that v3 will be finished by
> the time I will finish my grammar.

It is changing a lot still, but it is pretty damn cool!  Some people  
are using it, but only experts or gluttons for punishment should try  
it.  A new release will be out this week with linear speed  
backtracking support!

Ter
From parrt at cs.usfca.edu  Wed Dec  7 09:41:13 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec  7 09:40:12 2005
Subject: [antlr-interest] got rule memoization working :)
In-Reply-To: <9da4f4520512070845k1fe7b4ady@mail.gmail.com>
References: <A181ADF3-A58E-4775-8F4A-073296087442@cs.usfca.edu>
	<9da4f4520512070845k1fe7b4ady@mail.gmail.com>
Message-ID: <66D62762-DD6E-4598-84B7-8CD84D1BB14D@cs.usfca.edu>


On Dec 7, 2005, at 8:45 AM, Oliver Zeigermann wrote:

> Is this similiar to the chart parsers used in NLP?

Yup, both use partial result memoization to avoid redundant  
computation.  Bryan Ford calls his top-down parser that does this:  
packrat parsing.

Ter

From thiago.silva at kdemail.net  Wed Dec  7 07:32:14 2005
From: thiago.silva at kdemail.net (Thiago Silva)
Date: Wed Dec  7 09:46:07 2005
Subject: [antlr-interest] Parser acessing lexer rules info for error
	recovery
In-Reply-To: <20051207165049.57131.qmail@web30213.mail.mud.yahoo.com>
References: <20051207165049.57131.qmail@web30213.mail.mud.yahoo.com>
Message-ID: <200512071532.15299.thiago.silva@kdemail.net>

Yeah, thats something I've already done. But, still, I have to keep the 
function up to date. Not that this is hard (they are all simple rules, at 
most), but it's not good having to replicate something I've already defined 
elsewhere. 

I was wondering if wouldn't be possible to acess the lexer and ask it if a 
given token matches a given rule. For me, it seems natural to be able to do 
such thing. But, so far, looking at the sources, it doesn't seem possible. 

thanks for your reply,
Thiago

On Wednesday 07 December 2005 16:50, you wrote:
> If you need to make the same test in multiple  catch
> blocks, you can
> write a function to do it and just call it in all the
> catch blocks.
>
> --- Thiago Silva <thiago.silva@kdemail.net> wrote:
> > Hello,
> > I'm having a problem on parser error recovery. Some
> > times I need lexer rules
> > info to proceed with the recovery. But I'm not so
> > sure the way to proceed,
> > after reading the manual, the generated sources and
> > antlr sources.
> >
> > As a simple example:
> >
> > ----------------------
> > class SomeParser extends Parser
> >
> > somerule : (....);
> >
> > exception
> > catch[...] {
> >    //here I need to check, for instance, if LA(1) is
> > a T_DATATYPE
> >   //or if LA(1) belongs to the token section
> > (testLiteralsTable()?)
> > }
> >
> >
> > class SomeParser extends Lexer;
> >
> > T_DATATYPE : T_FOO | T_BAR
> >
> > T_FOO: "foo";
> > T_BAR: "bar"
> > ----------------------
> >
> > Now, what I'm doing is checking the LA in the catch
> > block, manually writing
> > (again) the members of T_DATATYPE:
> >
> > catch[..]
> >  if(la_token == T_FOO | la_token == T_BAR) {
> >    //print a warning message
> >  } else {
> >    //print a different warning message
> >  }
> >
> >
> > So, if T_DATATYPE changes, I would have to update
> > all the catch[] blocks that
> > checks for T_DATATYPE.
> >
> > Did I miss something in the docs? Or is this the
> > only way possible to do it?
> > By the way, I'm using C++.
> >
> > Thanks in advance,
> > Thiago
From madcapmaggie at yahoo.com  Wed Dec  7 10:13:36 2005
From: madcapmaggie at yahoo.com (Peggy Fieland)
Date: Wed Dec  7 10:13:41 2005
Subject: [antlr-interest] Parser acessing lexer rules info for error
	recovery
In-Reply-To: <200512071532.15299.thiago.silva@kdemail.net>
Message-ID: <20051207181336.1465.qmail@web30201.mail.mud.yahoo.com>

assuming you meant 

  class somelexer extends lexer ...

in your parser you can say:
  if (LA(1) == T_DATATYPE) ...
or 
  if (LT(1).getText() == "FOO" ...

If you actually have to check something against the
keyword tokens you'll
need to be a bit trickier.


--- Thiago Silva <thiago.silva@kdemail.net> wrote:

> Yeah, thats something I've already done. But, still,
> I have to keep the 
> function up to date. Not that this is hard (they are
> all simple rules, at 
> most), but it's not good having to replicate
> something I've already defined 
> elsewhere. 
> 
> I was wondering if wouldn't be possible to acess the
> lexer and ask it if a 
> given token matches a given rule. For me, it seems
> natural to be able to do 
> such thing. But, so far, looking at the sources, it
> doesn't seem possible. 
> 
> thanks for your reply,
> Thiago
> 
> On Wednesday 07 December 2005 16:50, you wrote:
> > If you need to make the same test in multiple 
> catch
> > blocks, you can
> > write a function to do it and just call it in all
> the
> > catch blocks.
> >
> > --- Thiago Silva <thiago.silva@kdemail.net> wrote:
> > > Hello,
> > > I'm having a problem on parser error recovery.
> Some
> > > times I need lexer rules
> > > info to proceed with the recovery. But I'm not
> so
> > > sure the way to proceed,
> > > after reading the manual, the generated sources
> and
> > > antlr sources.
> > >
> > > As a simple example:
> > >
> > > ----------------------
> > > class SomeParser extends Parser
> > >
> > > somerule : (....);
> > >
> > > exception
> > > catch[...] {
> > >    //here I need to check, for instance, if
> LA(1) is
> > > a T_DATATYPE
> > >   //or if LA(1) belongs to the token section
> > > (testLiteralsTable()?)
> > > }
> > >
> > >
> > > class SomeParser extends Lexer;
> > >
> > > T_DATATYPE : T_FOO | T_BAR
> > >
> > > T_FOO: "foo";
> > > T_BAR: "bar"
> > > ----------------------
> > >
> > > Now, what I'm doing is checking the LA in the
> catch
> > > block, manually writing
> > > (again) the members of T_DATATYPE:
> > >
> > > catch[..]
> > >  if(la_token == T_FOO | la_token == T_BAR) {
> > >    //print a warning message
> > >  } else {
> > >    //print a different warning message
> > >  }
> > >
> > >
> > > So, if T_DATATYPE changes, I would have to
> update
> > > all the catch[] blocks that
> > > checks for T_DATATYPE.
> > >
> > > Did I miss something in the docs? Or is this the
> > > only way possible to do it?
> > > By the way, I'm using C++.
> > >
> > > Thanks in advance,
> > > Thiago
> 

From parrt at cs.usfca.edu  Wed Dec  7 10:15:03 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec  7 10:14:02 2005
Subject: [antlr-interest] antlr 2.7.6rc1 available
Message-ID: <E8D52065-4804-41CA-8AB2-F39406EE8DDA@cs.usfca.edu>

http://www.antlr.org/download/antlr-2.7.6rc1.tar.gz

enjoy...i'm sure I screwed up the release with all the config stuff,  
but please try it out.  lib/antlr.jar is the jar you need.

Ter
From parrt at cs.usfca.edu  Wed Dec  7 10:32:52 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec  7 10:31:51 2005
Subject: [antlr-interest] changes for 2.7.6
Message-ID: <2D1174D7-56D5-4D98-BDC8-3A0C7DBDAE0A@cs.usfca.edu>

http://www.antlr.org/blog/CHANGES-2.7.6.txt
From prashant.deva at gmail.com  Wed Dec  7 10:43:05 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Dec  7 10:43:11 2005
Subject: [antlr-interest] ANTLR Studio and antlr 2.7.6
Message-ID: <41fed8f80512071043q442cda59g15257d76d20775d7@mail.gmail.com>

For those wondering, a *free* update to ANTLR Studio *will* be available
which will use antlr 2.7.6 when 2.7.6 final is released.

Currently ANTLR Studio uses antlr 2.7.5 to generate your code and there is
no way to make it use 2.7.6, although you can distribute your final programs
with any version of antlr (including 2.7.6) if you like.
--
Prashant Deva
Creator, ANTLR Studio,www.antlrstudio.com
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051208/f3d639b0/attachment.html
From thiago.silva at kdemail.net  Wed Dec  7 09:25:52 2005
From: thiago.silva at kdemail.net (Thiago Silva)
Date: Wed Dec  7 11:26:13 2005
Subject: [antlr-interest] Parser acessing lexer rules info for error
	recovery
In-Reply-To: <20051207181336.1465.qmail@web30201.mail.mud.yahoo.com>
References: <20051207181336.1465.qmail@web30201.mail.mud.yahoo.com>
Message-ID: <200512071725.53012.thiago.silva@kdemail.net>

Oh-oh, I guess I made a little confusion. my mistake! 

Turns out that I can't do a lexer rule T_DATATYPE naturally, cause it would 
conflict with a T_IDENTIFIER (wich matches standard letters/numbers and so 
on, showing all those nondeterminism warnings).

T_IDENTIFIER : T_LETTER ( T_LETTER | T_DIGIT )*;
T_DATATYPE : "foo" | "bar"; //show warnings 

So I move the "foo" and "bar" datatypes to tokens{} secion. Now, there is no 
way to group those tokens in a lexer rule, since the tokens in tokens{} 
secion (sadly) are not visible to the lexer section:

tokens { T_FOO="foo"; T_BAR="bar"; }
T_DATATYPE : T_FOO | T_BAR; //error, T_FOO and T_BAR not declared


Latter, I created a parser rule for datatype:

datatype : T_FOO | T_BAR; //T_FOO and T_BAR declared on lexer's tokens{} 
section

But, in the error handling functions, there is no way to check if a given 
token is a datatype on a single call/comparision (ie. call the generated 
function datatype() and pass it a token to analize).

So, my last alternative (the one that motivated me to write to the list) was 
to call testLiteralsTable() on my catch[] blocks. This wouldn't solve the 
problem in a clean way, but would help. But then, that doesn't seem to be 
possible (AFAIK there is no way to access this method from the parser).

I wonder now what kind of new features v3 would have.
Is there any docs informing that?

On Wednesday 07 December 2005 18:13, Peggy Fieland wrote:
> assuming you meant
>
>   class somelexer extends lexer ...
>
> in your parser you can say:
>   if (LA(1) == T_DATATYPE) ...
> or
>   if (LT(1).getText() == "FOO" ...
>
> If you actually have to check something against the
> keyword tokens you'll
> need to be a bit trickier.
>
> --- Thiago Silva <thiago.silva@kdemail.net> wrote:
> > Yeah, thats something I've already done. But, still,
> > I have to keep the
> > function up to date. Not that this is hard (they are
> > all simple rules, at
> > most), but it's not good having to replicate
> > something I've already defined
> > elsewhere.
> >
> > I was wondering if wouldn't be possible to acess the
> > lexer and ask it if a
> > given token matches a given rule. For me, it seems
> > natural to be able to do
> > such thing. But, so far, looking at the sources, it
> > doesn't seem possible.
> >
> > thanks for your reply,
> > Thiago
> >
> > On Wednesday 07 December 2005 16:50, you wrote:
> > > If you need to make the same test in multiple
> >
> > catch
> >
> > > blocks, you can
> > > write a function to do it and just call it in all
> >
> > the
> >
> > > catch blocks.
> > >
> > > --- Thiago Silva <thiago.silva@kdemail.net> wrote:
> > > > Hello,
> > > > I'm having a problem on parser error recovery.
> >
> > Some
> >
> > > > times I need lexer rules
> > > > info to proceed with the recovery. But I'm not
> >
> > so
> >
> > > > sure the way to proceed,
> > > > after reading the manual, the generated sources
> >
> > and
> >
> > > > antlr sources.
> > > >
> > > > As a simple example:
> > > >
> > > > ----------------------
> > > > class SomeParser extends Parser
> > > >
> > > > somerule : (....);
> > > >
> > > > exception
> > > > catch[...] {
> > > >    //here I need to check, for instance, if
> >
> > LA(1) is
> >
> > > > a T_DATATYPE
> > > >   //or if LA(1) belongs to the token section
> > > > (testLiteralsTable()?)
> > > > }
> > > >
> > > >
> > > > class SomeParser extends Lexer;
> > > >
> > > > T_DATATYPE : T_FOO | T_BAR
> > > >
> > > > T_FOO: "foo";
> > > > T_BAR: "bar"
> > > > ----------------------
> > > >
> > > > Now, what I'm doing is checking the LA in the
> >
> > catch
> >
> > > > block, manually writing
> > > > (again) the members of T_DATATYPE:
> > > >
> > > > catch[..]
> > > >  if(la_token == T_FOO | la_token == T_BAR) {
> > > >    //print a warning message
> > > >  } else {
> > > >    //print a different warning message
> > > >  }
> > > >
> > > >
> > > > So, if T_DATATYPE changes, I would have to
> >
> > update
> >
> > > > all the catch[] blocks that
> > > > checks for T_DATATYPE.
> > > >
> > > > Did I miss something in the docs? Or is this the
> > > > only way possible to do it?
> > > > By the way, I'm using C++.
> > > >
> > > > Thanks in advance,
> > > > Thiago
From ron at iesys.com.au  Wed Dec  7 14:19:52 2005
From: ron at iesys.com.au (de Jong, Ron)
Date: Wed Dec  7 14:21:23 2005
Subject: [antlr-interest] Tree Construction Basics
Message-ID: <F811E702E247DF47BFB8B8057E4234010130E5@sydmail.iesys.com.au>

I can't seem to get AST node construction working in 2.7.5.

 

I copied the following parser rule from the ANTLR manual:

 

 

begin!

: INT PLUS i:INT

{ #begin = #(PLUS INT i); }

;

 

 

all of the symbols are defined but I get the error message:

 

expecting ')', found 'I'

 

Any ideas?

 

Cheers,

Ron

This e-mail (which includes any attachments) is intended only for the
use of the individual or entity named above and may contain information
that is confidential and privileged and the copyright of Intelligent
Energy Systems Pty Ltd or a third party. Any views expressed in this
e-mail are those of the individual sender, except where the sender
specifically states them to be the views of Intelligent Energy Systems
Pty Ltd. There is no warranty that this e-mail is error or virus free.
If you are not the intended recipient, you must not disclose or use the
information contained in it. If you have received this e-mail in error,
please notify the sender immediately by return e-mail and delete the
original message.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051208/a8db8a82/attachment.html
From prashant.deva at gmail.com  Wed Dec  7 16:43:33 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Dec  7 16:43:35 2005
Subject: [antlr-interest] Tree Construction Basics
In-Reply-To: <F811E702E247DF47BFB8B8057E4234010130E5@sydmail.iesys.com.au>
References: <F811E702E247DF47BFB8B8057E4234010130E5@sydmail.iesys.com.au>
Message-ID: <41fed8f80512071643h3059b315x207a09d5415ecbbe@mail.gmail.com>

You need to put buildAST=true in your options section of the parser to turn
on AST construction :-)



--
Prashant Deva
Creator, ANTLR Studio,www.antlrstudio.com
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051208/78e3a9d9/attachment.html
From inshua at gmail.com  Thu Dec  8 00:22:52 2005
From: inshua at gmail.com (=?GB2312?B?0MLC8g==?=)
Date: Thu Dec  8 01:18:40 2005
Subject: [antlr-interest] Hi,what means "=>"?
Message-ID: <2506dcb70512080022q2253284ai@mail.gmail.com>

I'm learning the samples,in TinyC demo,there is

declaration
 : (variable) => variable
 | function
 ;

I found "=>" in the manual.
  {...}?
 semantic predicate
 (...)=>
 syntactic predicate
These 2 sentences are too short to understand.
Can someone tell me about that ~

thx.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051208/442b4caf/attachment.html
From mail at martin-probst.com  Thu Dec  8 01:21:00 2005
From: mail at martin-probst.com (Martin Probst)
Date: Thu Dec  8 01:21:05 2005
Subject: [antlr-interest] Hi,what means "=>"?
In-Reply-To: <2506dcb70512080022q2253284ai@mail.gmail.com>
References: <2506dcb70512080022q2253284ai@mail.gmail.com>
Message-ID: <1134033660.8005.4.camel@localhost.localdomain>


> 
> I found "=>" in the manual.
> {...}? 
> semantic predicate 
> (...)=> 
> syntactic predicate 
> These 2 sentences are too short to understand.
> Can someone tell me about that ~

Did you try to look up syntactic predicate in the manual?

Martin

From geiroves at online.no  Thu Dec  8 03:00:24 2005
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Thu Dec  8 03:00:31 2005
Subject: [antlr-interest] Hi,what means "=>"?
In-Reply-To: <2506dcb70512080022q2253284ai@mail.gmail.com>
Message-ID: <000001c5fbe6$98ef32f0$0100a8c0@rexii>

Hello,
 
=> is the syntax for a Syntactic Predicate. Syntactic Predicates are
used to initiate a Geussing Mode of the parser:
If the current rule you are referring to cannot be resolved with the
lookhead you are using (K=1, K=2 meaning 1 or 2 Tokens lookahead), then
you have two options: Either increase K to more tokens lookahead: 
 
However this slows down the entire parser, or using Syntctic Predicates
to help the the parser to see what will be matched next.
 
Syntactic Predicates MUST be used when the potential lookahead must be
infinite to match the next rule, e.g. A method call with arbitrary
number of parameters.
 
Assuming a keywordless language, the following will not match however
large you set K
 
methodCallOrDeclaration
 : methodCall
 | methodDeclaration 
 
methodCall
 : ID "("  (ID)*  ")" ";"!
 ;
 
methodDeclaration
 : ID "("  (ID)*  ")"  "=" "{"  ... "}" ";"!
 ; 
 
We will get an ambiguity between rule 1 and 2 above in
methodCallOrDeclaration
 
Using a Syntactic Predicate we can make it work:
 
methodCallOrDeclaration
 : (methodCall) => methodCall
 | methodDeclaration 
 ; 
 
Note that the Syntactic Predicate MUST come before the Rule is resolves
the ambiguity for
 
Geir Ove
 
 
 

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of ????
Sent: 8. desember 2005 09:23
To: antlr-interest@antlr.org
Subject: [antlr-interest] Hi,what means "=>"?


I'm learning the samples,in TinyC demo,there is 
 
declaration
 : (variable) => variable
 | function
 ;
 
I found "=>" in the manual.

{...}? 
semantic predicate 

(...)=> 
syntactic predicate 
These 2 sentences are too short to understand.
Can someone tell me about that ~
 
thx.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051208/60ecc300/attachment.html
From open.zone at virgin.net  Thu Dec  8 06:47:29 2005
From: open.zone at virgin.net (Micheal J)
Date: Thu Dec  8 06:31:45 2005
Subject: [antlr-interest] Switching buildAST to true causes
	"InvalidASTnode type" error.
In-Reply-To: <20051202203110.26634.qmail@web25801.mail.ukl.yahoo.com>
Message-ID: <007101c5fc06$50c6b410$6b02a8c0@hercules>

Sorry about the delay in replying. This is the fix I mentioned previously
for the issue in ASTFactory.cs.

It is a replacement for the existing setMaxNodeType(). It's probably best to
try it with 2.7.6.

--------------------------------------------------------------------
public void setMaxNodeType( int NodeType )
{
	//Debug.WriteLine(this, "NodeType = " + NodeType + " and
NodeList.Length = " + nodeTypeList_.Length);
	if (heteroList_ == null)
	{
		heteroList_ = new FactoryEntry[NodeType+1];
	}
	else
	{
		int length = heteroList_.Length;

		if ( NodeType >= length )
		{
			FactoryEntry[] newList = new
FactoryEntry[NodeType+1];
			Array.Copy(heteroList_, 0, newList, 0, length);
			heteroList_ = newList;
		}
		else if ( NodeType < length )
		{
			FactoryEntry[] newList = new
FactoryEntry[NodeType+1];
			Array.Copy(heteroList_, 0, newList, 0,
(NodeType+1));
			heteroList_ = newList;
		}
	}
	//Debug.WriteLine(this, "NodeType = " + NodeType + " and
NodeList.Length = " + nodeTypeList_.Length);
}
------------------------------------------------------------

From endigitalmind at yahoo.co.uk  Thu Dec  8 08:10:36 2005
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Thu Dec  8 08:10:39 2005
Subject: [antlr-interest] Switching buildAST to true causes
	"InvalidASTnode type" error.
In-Reply-To: <007101c5fc06$50c6b410$6b02a8c0@hercules>
Message-ID: <20051208161036.67149.qmail@web25808.mail.ukl.yahoo.com>


--- Micheal J <open.zone@virgin.net> wrote:

> Sorry about the delay in replying. This is the fix I
> mentioned previously
> for the issue in ASTFactory.cs.

No problem Micheal.
> 
> It is a replacement for the existing
> setMaxNodeType(). It's probably best to
> try it with 2.7.6.
> 
I saw the comment in the release notes for 2.7.6 but
haven't had a moment to download it and give it a go.
That's this weekend's fun.


	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com
From parrt at cs.usfca.edu  Thu Dec  8 11:15:47 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec  8 11:14:42 2005
Subject: [antlr-interest] speaking of => etc...
Message-ID: <420346E2-C273-4D10-A3BA-90EE2EE4D9FC@cs.usfca.edu>

So, we have a syntax / notation problem for predicates now.  I am  
proposing the following new notation:

[...]		optional subrule
(...)?		syntactic predicate
a : (alt)? | ... ;	syntactic predicate wrapping whole production
{...}?		_hoisting_ disambiguating semantic predicate
{...}=>	gated semantic predicate
rule		rule reference
<rule(args)>	rule reference with args
ID		token reference
<ID(args)>	token reference with options

The blog shows my reasoning:

http://www.antlr.org/blog/antlr3/lookahead.tml

Ter
From dragonoe at mcmaster.ca  Thu Dec  8 12:00:31 2005
From: dragonoe at mcmaster.ca (Olivier Dragon)
Date: Thu Dec  8 11:56:04 2005
Subject: [antlr-interest] speaking of => etc...
In-Reply-To: <420346E2-C273-4D10-A3BA-90EE2EE4D9FC@cs.usfca.edu>
References: <420346E2-C273-4D10-A3BA-90EE2EE4D9FC@cs.usfca.edu>
Message-ID: <20051208200031.GA17701@dragon.homelinux.org>

On Thu, Dec 08, 2005 at 11:15:47AM -0800, Terence Parr wrote:
> So, we have a syntax / notation problem for predicates now.  I am  
> proposing the following new notation:
> 
> [...]		optional subrule
> (...)?		syntactic predicate
> a : (alt)? | ... ;	syntactic predicate wrapping whole production
> {...}?		_hoisting_ disambiguating semantic predicate
> {...}=>	gated semantic predicate
> rule		rule reference
> <rule(args)>	rule reference with args
> ID		token reference
> <ID(args)>	token reference with options
> 
> The blog shows my reasoning:

As someone who is very much used to UNIX style regular expressions I
find this quite combersome, especially the new optional subrule syntax.
I think (...)? is quite intuitive as a "maybe". How about this:

(...)?             optional subrule
(...)#>            syntactic predicate
{...}>>            hoisting disambiguating semantic predicate
{...}=>            gated semantic predicate

That way we keep the optional subrule syntax, the synpred diffrentiates
itself from sempreds by the brackets, as well as shows it does not hoist
nor is evaluated if unnecessary with the different arrow, and hoisting
looks like it's going deep with >>.

And I like the consistency of having ">" mean some kind of predicate.

Just my 2 cents.

-Olivier

-- 
          __-/|    ? ?     |\-__
     __--/  /  \   (^^)   /  \  \--__
  _-/   /   /  /\ / ( )  /\  \   \   \-_
 /  /   /  /  /  (   ^^ ~  \  \  \   \  \
 / Oli Dragon    ( dragonoe@mcmaster.ca \
/  B.Eng. Sfwr   (     )    \    \  \    \
/  /  /    /__--_ (   ) __--__\    \  \  \
|  /  /  _/        \_ \_       \_  \  \  |
 \/  / _/            \_ \_       \_ \  \/
  \_/ /                -\_\        \ \_/
    \/                    )         \/
                        *~
        ___--<***************>--___
       [http://dragon.homelinux.org]
        ~~~--<***************>--~~~
From open.zone at virgin.net  Thu Dec  8 12:23:19 2005
From: open.zone at virgin.net (Micheal J)
Date: Thu Dec  8 12:07:34 2005
Subject: [antlr-interest] speaking of => etc...
In-Reply-To: <20051208200031.GA17701@dragon.homelinux.org>
Message-ID: <007801c5fc35$3b118f80$6b02a8c0@hercules>

> How about this:
> 
> (...)?             optional subrule
> (...)#>            syntactic predicate
> {...}>>            hoisting disambiguating semantic predicate
> {...}=>            gated semantic predicate

Better. Much better. We could protect/leverage more of what ANTLR-ites
already learned:

 (...)?             optional subrule
 (...)=>            syntactic predicate
 {...}>>            hoisting disambiguating semantic predicate
 {...}@>            gated semantic predicate

Everthing else stays the same as they are now.

Micheal

From mental at rydia.net  Thu Dec  8 12:08:05 2005
From: mental at rydia.net (mental@rydia.net)
Date: Thu Dec  8 12:08:12 2005
Subject: [antlr-interest] speaking of => etc...
In-Reply-To: <420346E2-C273-4D10-A3BA-90EE2EE4D9FC@cs.usfca.edu>
References: <420346E2-C273-4D10-A3BA-90EE2EE4D9FC@cs.usfca.edu>
Message-ID: <1134072485.439892a50c72e@www.rydia.net>

Quoting Terence Parr <parrt@cs.usfca.edu>:

> So, we have a syntax / notation problem for predicates now.  I am
> proposing the following new notation:
>
> [...]		optional subrule
> (...)?		syntactic predicate
> a : (alt)? | ... ;	syntactic predicate wrapping whole production
> {...}?		_hoisting_ disambiguating semantic predicate
> {...}=>	gated semantic predicate
> rule		rule reference
> <rule(args)>	rule reference with args
> ID		token reference
> <ID(args)>	token reference with options
>
> The blog shows my reasoning:
>
> http://www.antlr.org/blog/antlr3/lookahead.tml

Hmmm.  Two thoughts:

  1. If you're keeping (...)* and (...)+,
     it'd be weird having(...)? do something totally
     unrelated.  I know I'd keep typing (...)? when I meant
     [...] right next to a (...)* or something.

     Maybe make them [...]* and [...]+ instead also?

     That way, [] is consistently used for grouping where there
     are optional occurrences.

     Alternately, perhaps leave (...) alone, and give [...]? to
     syntactic predicates?

  2. If we've got <>, why also parens?  It seems a bit
     belt-and-suspenders.

     <LCURLY type=BLOCK, text="BLOCK", line=n>

     Would that introduce any ambiguities?  It seems more
     readible, but I don't know offhand what's allowed as
     an argument value.

-mental
From canfield at computer.org  Thu Dec  8 12:19:47 2005
From: canfield at computer.org (Bill Canfield)
Date: Thu Dec  8 12:16:46 2005
Subject: [antlr-interest] speaking of => etc...
Message-ID: <43989563.7000603@computer.org>

Olivier Dragon wrote:
> (...)?             optional subrule
> (...)#>            syntactic predicate
> {...}>>            hoisting disambiguating semantic predicate
> {...}=>            gated semantic predicate

I agree with Olivier, ()? is a time-honored convention.  I hope the 
ANTLR 2 conventions of ()?, ()*, and ()+ would be carried forward.

Also, why bother changing the [] argument syntax?

If consistency is a goal, it seems like all predicates should be wrapped 
in curlies.  Regular parens denote syntax grouping.  Square brackets for 
arguments.

And in the name of all that's holy, please don't bring in angle 
brackets!  What's next, dollar signs and percents?  :-).

Bill
From mental at rydia.net  Thu Dec  8 12:27:53 2005
From: mental at rydia.net (mental@rydia.net)
Date: Thu Dec  8 12:27:59 2005
Subject: [antlr-interest] speaking of => etc...
In-Reply-To: <43989563.7000603@computer.org>
References: <43989563.7000603@computer.org>
Message-ID: <1134073673.4398974978e18@www.rydia.net>

Quoting Bill Canfield <canfield@computer.org>:

> Olivier Dragon wrote:
> > (...)?             optional subrule
> > (...)#>            syntactic predicate
> > {...}>>            hoisting disambiguating semantic predicate
> > {...}=>            gated semantic predicate
>
> I agree with Olivier, ()? is a time-honored convention.  I hope
> the ANTLR 2 conventions of ()?, ()*, and ()+ would be carried
> forward.

I'm not fond of #> and >> specifically (they don't seem very
mnemonic to me), but otherwise this is better than the approach I
suggested.

-mental
From mail at martin-probst.com  Thu Dec  8 12:26:17 2005
From: mail at martin-probst.com (Martin Probst)
Date: Thu Dec  8 12:29:59 2005
Subject: [antlr-interest] speaking of => etc...
In-Reply-To: <007801c5fc35$3b118f80$6b02a8c0@hercules>
References: <007801c5fc35$3b118f80$6b02a8c0@hercules>
Message-ID: <1134073577.10899.0.camel@localhost.localdomain>

Am Donnerstag, den 08.12.2005, 20:23 +0000 schrieb Micheal J:
> > How about this:
> > 
> > (...)?             optional subrule
> > (...)#>            syntactic predicate
> > {...}>>            hoisting disambiguating semantic predicate
> > {...}=>            gated semantic predicate
> 
> Better. Much better. We could protect/leverage more of what ANTLR-ites
> already learned:
> 
>  (...)?             optional subrule
>  (...)=>            syntactic predicate
>  {...}>>            hoisting disambiguating semantic predicate
>  {...}@>            gated semantic predicate
> 
> Everthing else stays the same as they are now.

+1. Much better.

Martin

From jimi at temporal-wave.com  Thu Dec  8 13:31:20 2005
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu Dec  8 13:31:23 2005
Subject: [antlr-interest] speaking of => etc...
Message-ID: <B36CCC332A32904F8FA3DE134A23533615BF46@wavemachine.temporal-wave.com>



> And in the name of all that's holy, please don't bring in angle 
> brackets!  What's next, dollar signs and percents?  :-).

rule
 scope { String fred }
 : blah blah bl=blah

   {    $rule::fred = $bl.toString() }
 ;

Too late to object to dollars! Now, what should % be used for?...

Actually I wonder about the option of making a verbose and a symbolic
syntax. Most people look at things akin: {fred} ##<$>><1>//!!%

And go "huh?", whereas once you are familiar with the symbols it is
easy. If there were more wordy forms like (sorry, couldn't resist the %
here ;-)):

%synpred   [ ]
%rulepred  [ ]
%hoistpred [ ]
%gatepred  [ ]

And so on, it might be useful for people new to the stuff, though I
don't suggest this being the only form.

However, the hash/pound symbol # looks to me very much like a gate,
otherwise it means NOT in a lot of languages I have to work with. 

Optional rules being [ ] depends on what language manual you are looking
at of course. A lot of manuals seem to use {}:

CRT {Identifier}

- Identifier is optional

And use [] for "one of":

WRITE [Identifier | Expression] {:}


I think that once the symbols are settled upon that people will soon
forget the ANTLR 2 syntax (which could of course be a bit of a problem
when you go back to look at ANTLR 2 grammars). 

I think then that the best thing to do is be mindful of "syntaxes which
have gone before" but in the main to concentrate on making the ANTLR3
syntax as logical as possible.

Jim
From parrt at cs.usfca.edu  Thu Dec  8 14:25:59 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec  8 14:24:53 2005
Subject: [antlr-interest] still more => wars ;)
Message-ID: <A6E0B0EE-37A2-4E61-82B0-2967429C6B0F@cs.usfca.edu>

Ok, so I not overjoyed with what you guys propose either ;)  Adding  
random new symbols is probably not the answer. :)

How about the following which is identical to what ANTLR v2 does.  To  
get hoisted preds though you'll need the '=>' not '?'.

(...) => 	syntactic predicate
{...} =>	_hoisting_ disambiguating semantic predicate
{...}?		gated semantic predicate

[which is now consistent in terms of whether or not the predicate is  
forced] or flipped and less consistent:

(...) => 	syntactic predicate
{...}?		_hoisting_ disambiguating semantic predicate
{...} =>	gated semantic predicate

or still flipped but what I have implemented already:

(...) => 	syntactic predicate
{...}?		_hoisting_ disambiguating semantic predicate
{...}? =>	gated semantic predicate

I vote for the first syntax.  I could also go with {...}? => for sem  
pred.

Ter
From mail at martin-probst.com  Thu Dec  8 14:42:59 2005
From: mail at martin-probst.com (Martin Probst)
Date: Thu Dec  8 14:43:11 2005
Subject: [antlr-interest] speaking of => etc...
In-Reply-To: <B36CCC332A32904F8FA3DE134A23533615BF46@wavemachine.temporal-wave.com>
References: <B36CCC332A32904F8FA3DE134A23533615BF46@wavemachine.temporal-wave.com>
Message-ID: <1134081779.10899.4.camel@localhost.localdomain>

Hi,

> Actually I wonder about the option of making a verbose and a symbolic
> syntax. Most people look at things akin: {fred} ##<$>><1>//!!%

I'm also a fan of a more wordy syntax in general (we all hate Perl,
don't we?) but in the case of ANTLR I think it wouldn't help much.

People are used to use special characters for all the magic in language
recognition, and using full words within the rules (as opposed to
"scope" etc.) would limit the choice of rule names. Adding a special
character in front of the word is the worst of the two worlds, imho.

Martin

From chris at lotuscat.com  Thu Dec  8 14:45:06 2005
From: chris at lotuscat.com (Chris Black)
Date: Thu Dec  8 14:46:39 2005
Subject: [antlr-interest] still more => wars ;)
In-Reply-To: <A6E0B0EE-37A2-4E61-82B0-2967429C6B0F@cs.usfca.edu>
References: <A6E0B0EE-37A2-4E61-82B0-2967429C6B0F@cs.usfca.edu>
Message-ID: <4398B772.7060006@lotuscat.com>

Terence Parr wrote:

> Ok, so I not overjoyed with what you guys propose either ;)  Adding  
> random new symbols is probably not the answer. :)
>
> How about the following which is identical to what ANTLR v2 does.  To  
> get hoisted preds though you'll need the '=>' not '?'.
>
> (...) =>     syntactic predicate
> {...} =>    _hoisting_ disambiguating semantic predicate
> {...}?        gated semantic predicate

Would (...)? syntax still mean the same thing it does in ANTLR 2.7.x? If 
so, I'm cool with the above proposed syntax, although I'd prefer {...} 
?=> for gated semantic predicate. That way "=>" always means a predicate 
of some sort.

Chris
From parrt at cs.usfca.edu  Thu Dec  8 14:53:52 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec  8 14:52:46 2005
Subject: [antlr-interest] still more => wars ;)
In-Reply-To: <4398B772.7060006@lotuscat.com>
References: <A6E0B0EE-37A2-4E61-82B0-2967429C6B0F@cs.usfca.edu>
	<4398B772.7060006@lotuscat.com>
Message-ID: <CEEF7500-A324-4FE8-BFE4-C556049F23A1@cs.usfca.edu>


On Dec 8, 2005, at 2:45 PM, Chris Black wrote:

> Terence Parr wrote:
>
>> Ok, so I not overjoyed with what you guys propose either ;)   
>> Adding  random new symbols is probably not the answer. :)
>>
>> How about the following which is identical to what ANTLR v2 does.   
>> To  get hoisted preds though you'll need the '=>' not '?'.
>>
>> (...) =>     syntactic predicate
>> {...} =>    _hoisting_ disambiguating semantic predicate
>> {...}?        gated semantic predicate
>
> Would (...)? syntax still mean the same thing it does in ANTLR 2.7.x?

Yes.

> If so, I'm cool with the above proposed syntax, although I'd prefer  
> {...} ?=> for gated semantic predicate. That way "=>" always means  
> a predicate of some sort.

So, you'd vote for:

(...) =>     syntactic predicate
{...} =>    _hoisting_ disambiguating semantic predicate
{...}? =>  gated semantic predicate

Hmm...the two kinds of sem preds are pretty similar this way.  I do  
like the => implies predicate though.  I wonder what we could do to  
indicate gated.  Loring's original suggestion was


which is verbose but these are not used much and it's clear what we  
mean w/o new syntax.  We could then do

(...) => 	syntactic predicate
{...}?		_hoisting_ disambiguating semantic predicate
( {...}? ) =>  gated semantic predicate

leaving everything the way they are now but adding the last syntax.

Ter

From mail at martin-probst.com  Thu Dec  8 15:07:39 2005
From: mail at martin-probst.com (Martin Probst)
Date: Thu Dec  8 15:07:56 2005
Subject: [antlr-interest] still more => wars ;)
In-Reply-To: <CEEF7500-A324-4FE8-BFE4-C556049F23A1@cs.usfca.edu>
References: <A6E0B0EE-37A2-4E61-82B0-2967429C6B0F@cs.usfca.edu>
	<4398B772.7060006@lotuscat.com>
	<CEEF7500-A324-4FE8-BFE4-C556049F23A1@cs.usfca.edu>
Message-ID: <1134083259.10899.11.camel@localhost.localdomain>

> Hmm...the two kinds of sem preds are pretty similar this way.  I do  
> like the => implies predicate though.  I wonder what we could do to  
> indicate gated.  Loring's original suggestion was

Something missing here?

> which is verbose but these are not used much and it's clear what we  
> mean w/o new syntax.  We could then do
> 
> (...) => 	syntactic predicate
> {...}?		_hoisting_ disambiguating semantic predicate
> ( {...}? ) =>  gated semantic predicate

Well, 7 special characters for the semantic predicate is certainly
verbose, but in my opinion not more accessible. Plus it probably doesn't
mean much to new users. Plus there hoisting semantic predicates get the
syntax which is now used for semantic predicates, which are closer to
gated ones, or not? Is there purpose in there?

Martin

From parrt at cs.usfca.edu  Thu Dec  8 15:14:25 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec  8 15:13:19 2005
Subject: [antlr-interest] still more => wars ;)
In-Reply-To: <1134083259.10899.11.camel@localhost.localdomain>
References: <A6E0B0EE-37A2-4E61-82B0-2967429C6B0F@cs.usfca.edu>
	<4398B772.7060006@lotuscat.com>
	<CEEF7500-A324-4FE8-BFE4-C556049F23A1@cs.usfca.edu>
	<1134083259.10899.11.camel@localhost.localdomain>
Message-ID: <F4BDD24A-8C49-4BC0-BCBD-BA9F83E543E0@cs.usfca.edu>


On Dec 8, 2005, at 3:07 PM, Martin Probst wrote:

>> Hmm...the two kinds of sem preds are pretty similar this way.  I do
>> like the => implies predicate though.  I wonder what we could do to
>> indicate gated.  Loring's original suggestion was
>
> Something missing here?

Sorry...I meant: ({...}?)=>

>> which is verbose but these are not used much and it's clear what we
>> mean w/o new syntax.  We could then do
>>
>> (...) => 	syntactic predicate
>> {...}?		_hoisting_ disambiguating semantic predicate
>> ( {...}? ) =>  gated semantic predicate
>
> Well, 7 special characters for the semantic predicate is certainly
> verbose

Yes, but I suspect you'll not need a gated pred very often.  Less  
then once a grammar.

> , but in my opinion not more accessible.

Well, it's an idiom rather than explicit syntax.  It does mean what  
we say though: fail if the predicate fails.  Note that it is a valid  
syntactic predicate.

> Plus it probably doesn't
> mean much to new users. Plus there hoisting semantic predicates get  
> the
> syntax which is now used for semantic predicates, which are closer to
> gated ones, or not? Is there purpose in there?

Yes, but hoisted is what we want; we just don't have them in v2.   
Normally you'll do the terse {...}?.

I'm not in love with the ({...}?)=> but it doesn't require new syntax  
at all.

Ter
From chris at lotuscat.com  Thu Dec  8 15:16:44 2005
From: chris at lotuscat.com (Chris Black)
Date: Thu Dec  8 15:18:21 2005
Subject: [antlr-interest] still more => wars ;)
In-Reply-To: <CEEF7500-A324-4FE8-BFE4-C556049F23A1@cs.usfca.edu>
References: <A6E0B0EE-37A2-4E61-82B0-2967429C6B0F@cs.usfca.edu>	<4398B772.7060006@lotuscat.com>
	<CEEF7500-A324-4FE8-BFE4-C556049F23A1@cs.usfca.edu>
Message-ID: <4398BEDC.1080100@lotuscat.com>

Terence Parr wrote:

>
> On Dec 8, 2005, at 2:45 PM, Chris Black wrote:
>
>> Terence Parr wrote:
>
>
> So, you'd vote for:
>
> (...) =>     syntactic predicate
> {...} =>    _hoisting_ disambiguating semantic predicate
> {...}? =>  gated semantic predicate
>
> Hmm...the two kinds of sem preds are pretty similar this way.  I do  
> like the => implies predicate though.  I wonder what we could do to  
> indicate gated.  Loring's original suggestion was
>
>
> which is verbose but these are not used much and it's clear what we  
> mean w/o new syntax.  We could then do
>
> (...) =>     syntactic predicate
> {...}?        _hoisting_ disambiguating semantic predicate
> ( {...}? ) =>  gated semantic predicate
>
> leaving everything the way they are now but adding the last syntax.
>
I think a good guiding principal on these sort of things is to shoot for 
as much consistency as possible. That is, if you can make "=>" always 
mean "predicate" (or at least semantic predicate), and have something 
else always mean hoisting, and yet another notation for gated, that 
would be the easiest to remember and understand in my opinion. So maybe:

(...) => syntactic predicate
{...} => semantic predicate
{...} ?=> hoisting disambiguating semantic predicate
{...} *=> gated semantic predicate
And, if they exist (I don't know what hoisting is, etc), to keep things 
consistent:
(...) ?=> hoisting disambiguation syntactic predicate
(...) *=> gated syntactic predicate

As you can see, I also prefer all the notation to be part of the "=>" 
sequence rather than split up. You'll also notice that {...} is always 
semantic and (...) always syntactic.

Chris
From duboimat at iro.umontreal.ca  Thu Dec  8 15:33:44 2005
From: duboimat at iro.umontreal.ca (duboimat@iro.umontreal.ca)
Date: Thu Dec  8 15:33:48 2005
Subject: [antlr-interest] csharp grammar and custom nodes
Message-ID: <20051208183344.06o2hkqpwggc4w4w@webmail.iro.umontreal.ca>

Hi,

When i deleted the custom node that it is included in the csharp grammar(i.e
CodeCritic.Nodes.NamespaceNode), some childs in the tree is printed empty.  So
I have to create my own node to remplace it.  I don't know how to create a
custom node in C#.  I have seen an exemple in java but my custom class in C# is
not called.

How can I create a custom node for C# grammar like
CodeCritic.Nodes.NamespaceNode , I don't know which function should I have to
overload.

Thank you for your help
mat

----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.
From jimi at temporal-wave.com  Thu Dec  8 15:43:18 2005
From: jimi at temporal-wave.com (Jim Idle)
Date: Thu Dec  8 15:43:23 2005
Subject: [antlr-interest] speaking of => etc...
Message-ID: <B36CCC332A32904F8FA3DE134A23533615BF47@wavemachine.temporal-wave.com>

I don't disagree in fact - especially the % bit, which was a lame joke
;-). I was just wondering whether there was some way to make it more
accessible to people starting out, the new tree rewrite stuff should
help quite a bit though because now I think about it, most of the
questions in the group seem to be about the syntax for that in ANTLR 2. 

IMO the ANTLR 3 Tree stuff is much more intuitive, but then again, once
you have stared at things long enough, almost anything starts to become
familiar (though I am not going to start using Perl or Python any time
soon myself).

Jim

-----Original Message-----
From: Martin Probst [mailto:mail@martin-probst.com] 
Sent: Thursday, December 08, 2005 2:43 PM
To: Jim Idle
Cc: Bill Canfield; antlr-interest@antlr.org
Subject: RE: [antlr-interest] speaking of => etc...

Hi,

> Actually I wonder about the option of making a verbose and a symbolic
> syntax. Most people look at things akin: {fred} ##<$>><1>//!!%

I'm also a fan of a more wordy syntax in general (we all hate Perl,
don't we?) but in the case of ANTLR I think it wouldn't help much.

People are used to use special characters for all the magic in language
recognition, and using full words within the rules (as opposed to
"scope" etc.) would limit the choice of rule names. Adding a special
character in front of the word is the worst of the two worlds, imho.

Martin

From ron at iesys.com.au  Thu Dec  8 21:56:27 2005
From: ron at iesys.com.au (de Jong, Ron)
Date: Thu Dec  8 21:57:23 2005
Subject: [antlr-interest] Literals translation
Message-ID: <F811E702E247DF47BFB8B8057E4234010130EC@sydmail.iesys.com.au>

Hi List,

 

To simplify my parser I would really like the lexer to convert

the string INFINITY to be a FLOAT of a particular value.

I couldn't see any easy way to do this apart from overriding
testLiteralsTable().

I was hoping to do this declaratively.

 

Cheers,

Ron

 

This e-mail (which includes any attachments) is intended only for the
use of the individual or entity named above and may contain information
that is confidential and privileged and the copyright of Intelligent
Energy Systems Pty Ltd or a third party. Any views expressed in this
e-mail are those of the individual sender, except where the sender
specifically states them to be the views of Intelligent Energy Systems
Pty Ltd. There is no warranty that this e-mail is error or virus free.
If you are not the intended recipient, you must not disclose or use the
information contained in it. If you have received this e-mail in error,
please notify the sender immediately by return e-mail and delete the
original message.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051209/17f711f1/attachment.html
From mental at rydia.net  Thu Dec  8 22:58:11 2005
From: mental at rydia.net (MenTaLguY)
Date: Thu Dec  8 22:57:23 2005
Subject: [antlr-interest] still more => wars ;)
In-Reply-To: <4398BEDC.1080100@lotuscat.com>
References: <A6E0B0EE-37A2-4E61-82B0-2967429C6B0F@cs.usfca.edu>
	<4398B772.7060006@lotuscat.com>
	<CEEF7500-A324-4FE8-BFE4-C556049F23A1@cs.usfca.edu>
	<4398BEDC.1080100@lotuscat.com>
Message-ID: <1134111491.30512.288.camel@localhost.localdomain>

On Thu, 2005-12-08 at 17:16 -0600, Chris Black wrote:
> (...) => syntactic predicate
> {...} => semantic predicate
> {...} ?=> hoisting disambiguating semantic predicate
> {...} *=> gated semantic predicate

I tend to favor this scheme.  As Chris said, (...) is syntactic, {...}
is semantic, and arrow means predicate.  I don't think I'd forget that
easily.

I wonder whether we could do different types of arrows here, though,
rather sticking funny tails on them?

e.g.:

 predicate: =>
 hoisting disambiguating predicate: ->
 gated predicate: >>

-mental
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20051209/5fc67c4c/attachment.bin
From mail at martin-probst.com  Fri Dec  9 01:21:09 2005
From: mail at martin-probst.com (Martin Probst)
Date: Fri Dec  9 01:21:16 2005
Subject: [antlr-interest] speaking of => etc...
In-Reply-To: <B36CCC332A32904F8FA3DE134A23533615BF47@wavemachine.temporal-wave.com>
References: <B36CCC332A32904F8FA3DE134A23533615BF47@wavemachine.temporal-wave.com>
Message-ID: <1134120069.8108.13.camel@localhost.localdomain>

Hi,

> the new tree rewrite stuff should
> help quite a bit though because now I think about it, most of the
> questions in the group seem to be about the syntax for that in ANTLR 2.

Well, apart from the questions from people who obviously didn't even
bother to look into the manual or ask Google (btw: why? isn't that a lot
less work than registering with a mailing list etc.?) most questions are
like "what is ##". And that's just very difficult to find in the manual
- I don't think it's because the syntax is bad. 

ANTLR 3s syntax will be more natural, but without proper documentation
it won't help much. Good syntax is easy to learn and remember, but you
still need to explain it.

Martin

From kroepke at dolphin-services.de  Fri Dec  9 01:38:53 2005
From: kroepke at dolphin-services.de (Kay Roepke)
Date: Fri Dec  9 01:39:01 2005
Subject: [antlr-interest] still more => wars ;)
In-Reply-To: <1134111491.30512.288.camel@localhost.localdomain>
References: <A6E0B0EE-37A2-4E61-82B0-2967429C6B0F@cs.usfca.edu>
	<4398B772.7060006@lotuscat.com>
	<CEEF7500-A324-4FE8-BFE4-C556049F23A1@cs.usfca.edu>
	<4398BEDC.1080100@lotuscat.com>
	<1134111491.30512.288.camel@localhost.localdomain>
Message-ID: <41BC2954-CC6E-42ED-8FF9-23FBA8343A6C@dolphin-services.de>


On 9. Dec 2005, at 7:58 Uhr, MenTaLguY wrote:

> I wonder whether we could do different types of arrows here, though,
> rather sticking funny tails on them?
>
> e.g.:
>
>  predicate: =>
>  hoisting disambiguating predicate: ->
>  gated predicate: >>

I'd rather not see that.
While it is true that the difference in still only one character, I  
really
favor "funny tails". If I think arrow, I see the pictures of => and - 
 > in my mind.
(Having to deal with Perl a lot I actually think of => as a comma,  
but that's a different story...;)

Coming up with good candidate "tails" for hoisting and gated preds  
will make them easier to recognize, IMHO,
simply because the tail will stand out more than '=' vs. '-'.
Of course this always implies you don't use an intelligent editor  
with syntax coloring. (<general>And please refrain
from advertising one to me.</general>)

I really like the syn (...), sem {...}, arrow is pred rules, OTOH as  
Terence put it:
"I'm not in love with the ({...}?)=> but it doesn't require new  
syntax at all."
But still, I think that it is a bit to cumbersome to type all that.  
One is bound to mess up at some time,
given that it would probably be used very little. I'd like to see  
something terse, which I can remember at will.

- k

From linteng118 at hotmail.com  Fri Dec  9 04:47:10 2005
From: linteng118 at hotmail.com (Lin Teng)
Date: Fri Dec  9 04:47:12 2005
Subject: [antlr-interest] Problem about C++ runtime model compiled by
	pathscale compiler under redhat(x86-
Message-ID: <BAY104-F262587847D2A2F66539CEE84450@phx.gbl>

Hi ,
  I try to post this message to antlr-interest but get rejected by some 
unknown
reason. I run into a problem in c++ run time model, hope I can get some help
from you.
  I attemp to get antlr-2.7.5 to compiler my grammer. It is perfectly 
compiled
by pathscale compiler (2.1.99) under Redhat (AMD Opertron). Unfortanetly, 
every
time below message will be thrown,
terminate called after throwing an instance of
'antlr::NoViableAltForCharException'

The intresting fact I discovered is that it dies when it tries to parse an
interger.

And then I came back to check one of examples (calc) came with antlr, it 
looks
like same error occur. Passing --trace to antlr to generate trace info, the 
run
time error message is something similar

terminate called after throwing an instance of
'antlr::NoViableAltForCharException'
>expr; LA(1)==Abort (core dumped)

Any ideas?

Teng


From jimi at temporal-wave.com  Fri Dec  9 08:17:48 2005
From: jimi at temporal-wave.com (Jim Idle)
Date: Fri Dec  9 08:18:00 2005
Subject: [antlr-interest] speaking of => etc...
Message-ID: <B36CCC332A32904F8FA3DE134A23533615BF49@wavemachine.temporal-wave.com>

Yes - I agree here too. 

I am willing to put some effort into documentation of ANTLR 3. Hence I
suggested the twiki originally, though we didn't get that far with that
- Ter, any chance of trying twiki out this time? It has always worked
first time when I have used it, with non of those email issues and it
has all the required plug-ins such as doxygen links and so on.

Jim



-----Original Message-----
From: Martin Probst [mailto:mail@martin-probst.com] 

> most questions are like "what is ##". And that's just very difficult
to 
> find in the manual - I don't think it's because the syntax is bad. 

> ANTLR 3s syntax will be more natural, but without proper documentation
> it won't help much. Good syntax is easy to learn and remember, but you
> still need to explain it.


From parrt at cs.usfca.edu  Fri Dec  9 09:44:35 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec  9 09:43:24 2005
Subject: [antlr-interest] still more => wars ;)
In-Reply-To: <1134111491.30512.288.camel@localhost.localdomain>
References: <A6E0B0EE-37A2-4E61-82B0-2967429C6B0F@cs.usfca.edu>
	<4398B772.7060006@lotuscat.com>
	<CEEF7500-A324-4FE8-BFE4-C556049F23A1@cs.usfca.edu>
	<4398BEDC.1080100@lotuscat.com>
	<1134111491.30512.288.camel@localhost.localdomain>
Message-ID: <C20A5AA3-500D-42FD-A15A-A4127C0ABF47@cs.usfca.edu>


On Dec 8, 2005, at 10:58 PM, MenTaLguY wrote:

> On Thu, 2005-12-08 at 17:16 -0600, Chris Black wrote:
>> (...) => syntactic predicate
>> {...} => semantic predicate
>> {...} ?=> hoisting disambiguating semantic predicate
>> {...} *=> gated semantic predicate
>
> I tend to favor this scheme.  As Chris said, (...) is syntactic, {...}
> is semantic, and arrow means predicate.  I don't think I'd forget that
> easily.
>
> I wonder whether we could do different types of arrows here, though,
> rather sticking funny tails on them?
>
> e.g.:
>
>  predicate: =>
>  hoisting disambiguating predicate: ->
>  gated predicate: >>

Don't forget folks that -> is the rewrite operator.

a : A B -> B A ;

Ter
From parrt at cs.usfca.edu  Fri Dec  9 09:49:04 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec  9 09:47:55 2005
Subject: [antlr-interest] still more predicate syntax (resolution?)
Message-ID: <F68EA5A4-4B40-478F-808F-0856246732FE@cs.usfca.edu>

Ok, I forgot something.  Semantic predicates used for disambiguation  
don't need to be on the left edge precisely.  They just need to be  
visible to a decision.  Here's a nice little example I like:

a : ID (',' ID)* {p}? (',' ID)* ;

Clearly ",b,c" is a problem for the first loop as it doesn't know  
whether to match or terminate.  ANTLR v3 uses semantic information,  
p, to resolve.  In this case, the loop will continue while !p and LA 
(1)==',' which I think is pretty slick.

So, {...}? must be the disambig sem pred as => would look weird in  
the middle of a production.  (...)=> makes too much sense so we leave  
that as the syn pred.  For gated sem pred, I'm going to leave as I  
have it now: {...}? => which says semantic predicate that implies  
matching the production.

Ok, I guess I had the right answer to start with. Hooray for me. :)   
And now back to your regularly scheduled mailing list...

Ter
From open.zone at virgin.net  Sat Dec 10 01:40:45 2005
From: open.zone at virgin.net (Micheal J)
Date: Sat Dec 10 01:25:01 2005
Subject: [antlr-interest] ANN: kcsparse - an ANTLR C# parser with optional
	Flex lexer
Message-ID: <000201c5fd6d$ccd9b710$6b02a8c0@hercules>

Hi,

We have uploaded a new ANTLR grammar to the ANTLR website. kcsparse'
contains a modular set of ANTLR grammars that can be used to build a fully
unicode compliant lexer and parser for the ECMA-334 C# language (or C#
v1.0). You can find kscparse on the ANTLR website at
http://www.antlr.org/grammar/list.

kscparse is built for ANTLR 2.7.6 but can be made to work with previous
versions of ANTLR 2.7.x. It does not include a full C# preprocessor but it
does support "sanitized" usage of all C# preprocessor directives. By this we
mean this: if what is left after simply deleting all lines that contain
preprocessing directives from a source file is a legal C# program, then that
original file has sanitized use of preprocessing directives and can be
parsed by kcsparse.

A couple of novel features of kcsparse is that it (a) includes a flex lexer
and, (b) has a basic pretty printer implemented as a treewalker. The flex
lexer isn't as complaint as the ANTLR lexer particularly in respect to full
unicode compliance (all versions of C# flex tested exhibited either serious
performance problems and/or buggy output when fed a specification that had
the full unicode support of the ANTLR lexer). It is nevertheless a
substantial example of integrating a Flex lexer with an ANTLR parser in C#.
The pretty printer is hopefully a useful example of treeparsing and basic
prettyprinting.

Known issues:
- kcsparse's build file won't find antlr.runtime.dll and antlr.astframe.dll
when used with ANTLR v2.7.6rc1 and earlier (use the attached build file
instead or edit the supplied one)

Please address queries, patches and other similar questions to the ANTLR
mailing list. Given enough interest and support, kcsparse may evolve a full
C# preprocessor, full C# 2.0 support and hopefully an alternative TreeDL
based syntax tree and prettyprinter.


Cheers,


Micheal

-------------- next part --------------
A non-text attachment was scrubbed...
Name: csharp_v1.build
Type: application/octet-stream
Size: 5658 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20051210/f923c753/csharp_v1.obj
From inshua at gmail.com  Sat Dec 10 07:33:26 2005
From: inshua at gmail.com (=?GB2312?B?0MLC8g==?=)
Date: Sat Dec 10 07:33:28 2005
Subject: [antlr-interest] How to define multi and div?
Message-ID: <2506dcb70512100733w69f261c8j@mail.gmail.com>

I'm studing the expression parsing.
here I define the multi expr and div expr.

multiExpr
     :     (parenExpr | divExpr) (MULTI^ parenExpr)+
     ;
divExpr
      :    (parenExpr | multiExpr) (DIV^ parenExpr)+
      ;


this define raised recurse error. thoe in fact, the left of  multi expr can
be div expr.and each other.

can you give me some suggest ?
thanks~
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051210/9cb865c8/attachment.html
From scott at javadude.com  Sat Dec 10 08:13:17 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Sat Dec 10 08:13:44 2005
Subject: [antlr-interest] How to define multi and div?
In-Reply-To: <2506dcb70512100733w69f261c8j@mail.gmail.com>
Message-ID: <200512101602.jBAG2dk9011238@s2.eroute.net>

Because they have the same precedence, they should really be the same rule.
For a really good treatment of expressions (if I do say so myself),
including this exact case , see my ANTLR Tutorial at
 
 http://javadude.com/articles/antlrtut
 
-- Scott


  _____  

From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.
org] On Behalf Of ??
Sent: Saturday, December 10, 2005 10:33 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] How to define multi and div?


I'm studing the expression parsing.
here I define the multi expr and div expr.
 
multiExpr
     :     (parenExpr | divExpr) (MULTI^ parenExpr)+
     ;
divExpr
      :    (parenExpr | multiExpr) (DIV^ parenExpr)+
      ;
 
 
this define raised recurse error. thoe in fact, the left of  multi expr can
be div expr.and each other.
 
can you give me some suggest ?
thanks~

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051210/ba5d9c5c/attachment.html
From sohail at taggedtype.net  Sat Dec 10 10:15:51 2005
From: sohail at taggedtype.net (Sohail Somani)
Date: Sat Dec 10 10:16:12 2005
Subject: [antlr-interest] How to define multi and div?
In-Reply-To: <200512101602.jBAG2dk9011238@s2.eroute.net>
References: <200512101602.jBAG2dk9011238@s2.eroute.net>
Message-ID: <1134238551.7805.0.camel@localhost.localdomain>

On Sat, 2005-12-10 at 11:13 -0500, Scott Stanchfield wrote:
> Because they have the same precedence, they should really be the same
> rule. For a really good treatment of expressions (if I do say so
> myself), including this exact case , see my ANTLR Tutorial at
>  
>  http://javadude.com/articles/antlrtut
>  

Its a really good treatment :) 

Its quite annoying when there are no operators with the same precedence
(I think I had like 19 rules!)

From ewbank at gmail.com  Sat Dec 10 11:35:46 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Sat Dec 10 11:35:48 2005
Subject: [antlr-interest] How to define multi and div?
In-Reply-To: <1134238551.7805.0.camel@localhost.localdomain>
References: <200512101602.jBAG2dk9011238@s2.eroute.net>
	<1134238551.7805.0.camel@localhost.localdomain>
Message-ID: <dd3a065f0512101135q140a49dt5356bc60f609982c@mail.gmail.com>

Others have covered left-to-right tree construction pretty well - very
nice tutorial, too.

For completeness, right-to-left evaluation is handled by rule recursion, rather
than by a while-loop within the rule:

    left_to_right:  operand ( OPERATOR^ operand )* ;
    right_to_left:  operand ( OPERATOR^ right_to_left )? ;
    shared_l_to_r:  operand ( ( OPER1^ | OPER2^ ) operand )*;
    shared_r_to_l:  operand ( ( OPER1^ | OPER2^ ) shared_r_to_l )?;

Hope this helps,
- Bryan
From endigitalmind at yahoo.co.uk  Sat Dec 10 12:19:28 2005
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Sat Dec 10 12:19:30 2005
Subject: [antlr-interest] antlr.net-2.7.6.exe available?
Message-ID: <20051210201928.59905.qmail@web25811.mail.ukl.yahoo.com>

Is there an antlr.net-2.7.6.exe available?




		
___________________________________________________________ 
Yahoo! Exclusive Xmas Game, help Santa with his celebrity party - http://santas-christmas-party.yahoo.net/
From parrt at cs.usfca.edu  Sat Dec 10 12:23:11 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Dec 10 12:22:00 2005
Subject: [antlr-interest] antlr.net-2.7.6.exe available?
In-Reply-To: <20051210201928.59905.qmail@web25811.mail.ukl.yahoo.com>
References: <20051210201928.59905.qmail@web25811.mail.ukl.yahoo.com>
Message-ID: <2A238246-FFB1-4D4A-9129-0F2DB7B25D83@cs.usfca.edu>


On Dec 10, 2005, at 12:19 PM, Phil Ritchie wrote:

> Is there an antlr.net-2.7.6.exe available?

Not until somebody builds one.  I'm going out with 2.7.6rc2 in a day  
or so.

Ter
From endigitalmind at yahoo.co.uk  Sat Dec 10 13:25:08 2005
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Sat Dec 10 13:25:13 2005
Subject: [antlr-interest] antlr.net-2.7.6.exe available?
In-Reply-To: <2A238246-FFB1-4D4A-9129-0F2DB7B25D83@cs.usfca.edu>
Message-ID: <20051210212508.68870.qmail@web25814.mail.ukl.yahoo.com>


--- Terence Parr <parrt@cs.usfca.edu> wrote:

> 
> On Dec 10, 2005, at 12:19 PM, Phil Ritchie wrote:
> 
> > Is there an antlr.net-2.7.6.exe available?
> 
> Not until somebody builds one.  I'm going out with
> 2.7.6rc2 in a day  
> or so.

OK. Thanks.
> 
> Ter
> 



		
___________________________________________________________ 
NEW Yahoo! Cars - sell your car and browse thousands of new and used cars online! http://uk.cars.yahoo.com/
From inshua at gmail.com  Sat Dec 10 20:04:56 2005
From: inshua at gmail.com (=?GB2312?B?0MLC8g==?=)
Date: Sat Dec 10 20:04:59 2005
Subject: [antlr-interest] How to define multi and div?
In-Reply-To: <200512101602.jBAG2dk9011238@s2.eroute.net>
References: <2506dcb70512100733w69f261c8j@mail.gmail.com>
	<200512101602.jBAG2dk9011238@s2.eroute.net>
Message-ID: <2506dcb70512102004h860d500g@mail.gmail.com>

I 'd found this way in samples ,it did not define MULTI and DIV but define

MULTI_DIV : * | /

but in this way , the multi expr and div expr cannot be recognized in the
parser, in the following step, I should test the text of the AST node to
decide how to run the whole expression.

A same rule cannot be split ?

05-12-11Scott Stanchfield <scott@javadude.com> 
>
> Because they have the same precedence, they should really be the same
> rule. For a really good treatment of expressions (if I do say so myself),
> including this exact case , see my ANTLR Tutorial at
>
>  http://javadude.com/articles/antlrtut
>
> -- Scott
>
>  ------------------------------
> *From:* antlr-interest-bounces@antlr.org [mailto:
> antlr-interest-bounces@antlr.org] *On Behalf Of *??
> *Sent:* Saturday, December 10, 2005 10:33 AM
> *To:* antlr-interest@antlr.org
> *Subject:* [antlr-interest] How to define multi and div?
>
>
>  I'm studing the expression parsing.
> here I define the multi expr and div expr.
>
> multiExpr
>      :     (parenExpr | divExpr) (MULTI^ parenExpr)+
>      ;
> divExpr
>       :    (parenExpr | multiExpr) (DIV^ parenExpr)+
>       ;
>
>
> this define raised recurse error. thoe in fact, the left of  multi expr
> can be div expr.and each other.
>
> can you give me some suggest ?
> thanks~
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051211/7f659300/attachment.html
From ewbank at gmail.com  Sun Dec 11 07:03:53 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Sun Dec 11 07:03:56 2005
Subject: [antlr-interest] How to define multi and div?
In-Reply-To: <2506dcb70512102004h860d500g@mail.gmail.com>
References: <2506dcb70512100733w69f261c8j@mail.gmail.com>
	<200512101602.jBAG2dk9011238@s2.eroute.net>
	<2506dcb70512102004h860d500g@mail.gmail.com>
Message-ID: <dd3a065f0512110703j19ce9f3ay77679ba58b566026@mail.gmail.com>

It cannot be *split*, because of the ambiguity.  It can be joined into
one rule, though.  Since MULTI and DIV are at the same precedence
level, you need to build the grammar to accept either one:

    mulitdivExpr
	:  parenExpr ( ( MULTI^ | DIV^ ) parenExpr )* ;

This says to match a parenExpr, with zero or more following MULTI or
DIV operation.  Perhaps it's easier to see if it's written this
(equivalent) way:

    mulitdivExpr
	:  parenExpr			// A
	    ( MULTI^ parenExpr		// * B
	    | DIV^ parenExpr		// / B
	    )*
	;

Hope this helps,
- Bryan

On 12/10/05, ?p <inshua@gmail.com> wrote:
> I 'd found this way in samples ,it did not define MULTI and DIV but define
>
> MULTI_DIV : * | /
>
> but in this way , the multi expr and div expr cannot be recognized in the
> parser, in the following step, I should test the text of the AST node to
> decide how to run the whole expression.
>
> A same rule cannot be split ?
From endigitalmind at yahoo.co.uk  Sun Dec 11 08:31:36 2005
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Sun Dec 11 08:31:38 2005
Subject: [antlr-interest] Switching buildAST to true causes
	"InvalidASTnode type" error.
In-Reply-To: <007101c5fc06$50c6b410$6b02a8c0@hercules>
Message-ID: <20051211163136.76171.qmail@web25803.mail.ukl.yahoo.com>


--- Micheal J <open.zone@virgin.net> wrote:

> Sorry about the delay in replying. This is the fix I
> mentioned previously
> for the issue in ASTFactory.cs.
> 
> It is a replacement for the existing
> setMaxNodeType(). It's probably best to
> try it with 2.7.6.
> 
Micheal, implemented the fix into 2.7.5 and that whole
sample works perfectly now. I'll give 2.7.6 a go once
an antlr.NET-2.7.6 becomes available.



		
___________________________________________________________ 
NEW Yahoo! Cars - sell your car and browse thousands of new and used cars online! http://uk.cars.yahoo.com/
From andy at exchange.voelkel.us  Sun Dec 11 10:16:51 2005
From: andy at exchange.voelkel.us (Andy Voelkel)
Date: Sun Dec 11 10:11:46 2005
Subject: [antlr-interest] PDF of the Antlr Reference?
Message-ID: <7AE2E53336B37440A20C9590DB11BCB9C08C60@EXVS01.ex.dslextreme.net>

Is there anywhere I could download a copy of the Antlr Reference manual,
both to print out a hardcopy version, and to have available when I am
not connected to the internet?

Thanks!

- Andy Voelkel
From prashant.deva at gmail.com  Sun Dec 11 10:14:17 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Sun Dec 11 10:14:20 2005
Subject: [antlr-interest] PDF of the Antlr Reference?
In-Reply-To: <7AE2E53336B37440A20C9590DB11BCB9C08C60@EXVS01.ex.dslextreme.net>
References: <7AE2E53336B37440A20C9590DB11BCB9C08C60@EXVS01.ex.dslextreme.net>
Message-ID: <41fed8f80512111014l3fa0dc2bi9c3f130ab9b9e739@mail.gmail.com>

Well there is no pdf available, but the standard antlr download
contains the doc in html which you can read/print offline.
--
Prashant Deva
Creator, ANTLR Studio,www.antlrstudio.com
Founder, Placid Systems, www.placidsystems.com
From parrt at cs.usfca.edu  Sun Dec 11 10:17:49 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Dec 11 10:16:34 2005
Subject: [antlr-interest] PDF of the Antlr Reference?
In-Reply-To: <7AE2E53336B37440A20C9590DB11BCB9C08C60@EXVS01.ex.dslextreme.net>
References: <7AE2E53336B37440A20C9590DB11BCB9C08C60@EXVS01.ex.dslextreme.net>
Message-ID: <092369A8-6AE1-44D2-96A3-A4D2995473AB@cs.usfca.edu>

searching on the antlr.org site for "antlr manual pdf" finds this in  
the file sharing:

http://ftp.camk.edu.pl/private/chris/antlrman/antlrman.pdf

Ter

On Dec 11, 2005, at 10:16 AM, Andy Voelkel wrote:

> Is there anywhere I could download a copy of the Antlr Reference  
> manual,
> both to print out a hardcopy version, and to have available when I am
> not connected to the internet?
>
> Thanks!
>
> - Andy Voelkel

From parrt at cs.usfca.edu  Sun Dec 11 10:32:42 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Dec 11 10:31:27 2005
Subject: [antlr-interest] error handling v3 style
Message-ID: <02836D0F-2CC5-40D0-A424-E6B395AFE554@cs.usfca.edu>

For v3, I'm going to allow the usual spec of exceptions on the end of  
rules:

a : A B
   | C D
   ;
exception [label]
catch [exceptionType exceptionVariable]
   { action }
catch ...
catch ...

For control freaks, the templates for code gen can be altered  
trivially (and from within the grammar file).  Now, wouldn't it be  
interesting if we had "error productions" sort of like yacc tries to  
fake.  The idea is to provide error alts that match common  
ungrammatical sentences:

a : A B
    | C D
    / B A {error("don't you mean A B?"); recover();}
    / A {error("don't you want a B with that?"); recover();}
    ;

where (I've randomly used / to mean error alt but we probably want  
something better and more obvious).  This means if any of the first  
two alts fail, then rewind and try to match one of the last two (with  
full backtracking turned on as the productions will be highly  
ambiguous often).

Now, that only matches what the erroneous productions look like and  
you have to manually do the recovery step.  Should we allow you to  
specify the recovery language?  This would be an interesting feature  
that let you recover with a grammar fragment not an action.  For  
example, you might want to skip until you see the outermost '}' of a  
method.  You could do this with

method
	: type ID ...
	;
	exception
		catch[RecognitionException e]
			( {level>0}? ('}' {level--;} | .) )*

So instead of an action, you provide a grammar fragment (here a tough  
one with context-sensitive matching).

Do we need a combination of matching error sequences and then  
sophisticated error recovery strategies?

Is that interesting to any of you folks out there building systems?

Does anybody use the paraphrase feature from v2?

ID
options {
   paraphrase = "an identifier";
}
   : ('a'..'z'|'A'..'Z'|'_')
     ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
   ;

It says "an identifier" instead of ID in error messages.

Ter

From mail at martin-probst.com  Sun Dec 11 14:15:33 2005
From: mail at martin-probst.com (Martin Probst)
Date: Sun Dec 11 14:16:14 2005
Subject: [antlr-interest] error handling v3 style
In-Reply-To: <02836D0F-2CC5-40D0-A424-E6B395AFE554@cs.usfca.edu>
References: <02836D0F-2CC5-40D0-A424-E6B395AFE554@cs.usfca.edu>
Message-ID: <1134339333.18451.17.camel@localhost.localdomain>

> Does anybody use the paraphrase feature from v2?

Yes, I do. And it's nice. Btw. there was once something about
internationalization support with those messages - it might be nice to
have a "printf" like template for those errors - possibly runtime
configurable.

Martin

From parrt at cs.usfca.edu  Sun Dec 11 14:27:18 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun Dec 11 14:26:01 2005
Subject: [antlr-interest] error handling v3 style
In-Reply-To: <1134339333.18451.17.camel@localhost.localdomain>
References: <02836D0F-2CC5-40D0-A424-E6B395AFE554@cs.usfca.edu>
	<1134339333.18451.17.camel@localhost.localdomain>
Message-ID: <9E651EF8-2F81-412F-A328-9C69B6DD83EC@cs.usfca.edu>


On Dec 11, 2005, at 2:15 PM, Martin Probst wrote:

>> Does anybody use the paraphrase feature from v2?
>
> Yes, I do. And it's nice. Btw. there was once something about
> internationalization support with those messages - it might be nice to
> have a "printf" like template for those errors - possibly runtime
> configurable.

Interesting...the paraphrase would be a StringTemplate that I pass  
some standard data...

Ter
From mail at martin-probst.com  Sun Dec 11 14:46:16 2005
From: mail at martin-probst.com (Martin Probst)
Date: Sun Dec 11 14:46:25 2005
Subject: [antlr-interest] error handling v3 style
In-Reply-To: <9E651EF8-2F81-412F-A328-9C69B6DD83EC@cs.usfca.edu>
References: <02836D0F-2CC5-40D0-A424-E6B395AFE554@cs.usfca.edu>
	<1134339333.18451.17.camel@localhost.localdomain>
	<9E651EF8-2F81-412F-A328-9C69B6DD83EC@cs.usfca.edu>
Message-ID: <1134341176.18451.27.camel@localhost.localdomain>

> >> Does anybody use the paraphrase feature from v2?
> >
> > Yes, I do. And it's nice. Btw. there was once something about
> > internationalization support with those messages - it might be nice to
> > have a "printf" like template for those errors - possibly runtime
> > configurable.
> 
> Interesting...the paraphrase would be a StringTemplate that I pass  
> some standard data...

Thinking a little bit longer I'm not completly sure it's worth the
effort. I guess if you want really good error reporting, including i18n
and proper texts, you might have a bigger system you're using anyways -
in that case it might be easier to just retrieve the information from
the ANTLR exception and do all the formatting/translation yourself.

On the other hand, you might just allow people passing a message bundle
to the parser, providing format strings. That's probably flexible enough
for almost everything, and in Java those things come as a language
feature.

Martin

From doug00 at gmail.com  Sun Dec 11 21:46:45 2005
From: doug00 at gmail.com (Doug H)
Date: Sun Dec 11 21:46:51 2005
Subject: [antlr-interest] Re: antlr.net-2.7.6.exe available?
Message-ID: <439D0EC5.9090502@gmail.com>

Just download http://www.ikvm.net/
and run:
ikvmc.exe -target:exe -main:antlr.Tool antlr.jar

From endigitalmind at yahoo.co.uk  Mon Dec 12 03:12:11 2005
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Mon Dec 12 03:12:13 2005
Subject: [antlr-interest] Grammar for Windows Resource format.
Message-ID: <20051212111211.32599.qmail@web25807.mail.ukl.yahoo.com>

Does anyone know of a grammar for Windows resource
files (*.rc) of have one that they'd be willing to
share?

Phil


		
___________________________________________________________ 
Yahoo! Exclusive Xmas Game, help Santa with his celebrity party - http://santas-christmas-party.yahoo.net/
From inshua at gmail.com  Mon Dec 12 06:42:12 2005
From: inshua at gmail.com (=?GB2312?B?0MLC8g==?=)
Date: Mon Dec 12 06:42:15 2005
Subject: [antlr-interest] How to define multi and div?
In-Reply-To: <dd3a065f0512110703j19ce9f3ay77679ba58b566026@mail.gmail.com>
References: <2506dcb70512100733w69f261c8j@mail.gmail.com>
	<200512101602.jBAG2dk9011238@s2.eroute.net>
	<2506dcb70512102004h860d500g@mail.gmail.com>
	<dd3a065f0512110703j19ce9f3ay77679ba58b566026@mail.gmail.com>
Message-ID: <2506dcb70512120642r756e3fe7r@mail.gmail.com>

I see.same structure must in a rule...

Now it works OK.

Thank u very much.


2005/12/11, Bryan Ewbank <ewbank@gmail.com>:
>
> It cannot be *split*, because of the ambiguity.  It can be joined into
> one rule, though.  Since MULTI and DIV are at the same precedence
> level, you need to build the grammar to accept either one:
>
>    mulitdivExpr
>        :  parenExpr ( ( MULTI^ | DIV^ ) parenExpr )* ;
>
> This says to match a parenExpr, with zero or more following MULTI or
> DIV operation.  Perhaps it's easier to see if it's written this
> (equivalent) way:
>
>    mulitdivExpr
>        :  parenExpr                    // A
>            ( MULTI^ parenExpr          // * B
>            | DIV^ parenExpr            // / B
>            )*
>        ;
>
> Hope this helps,
> - Bryan
>
> On 12/10/05, ?p <inshua@gmail.com> wrote:
> > I 'd found this way in samples ,it did not define MULTI and DIV but
> define
> >
> > MULTI_DIV : * | /
> >
> > but in this way , the multi expr and div expr cannot be recognized in
> the
> > parser, in the following step, I should test the text of the AST node to
> > decide how to run the whole expression.
> >
> > A same rule cannot be split ?
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051212/633d8667/attachment.html
From lists at lischke-online.de  Mon Dec 12 08:07:46 2005
From: lists at lischke-online.de (Mike Lischke)
Date: Mon Dec 12 08:08:39 2005
Subject: [antlr-interest] Grammar for Windows Resource format.
In-Reply-To: <20051212111211.32599.qmail@web25807.mail.ukl.yahoo.com>
Message-ID: <023601c5ff36$311e3fb0$0a00a8c0@Wanderer>

[grr, had to resend this mail because the list address is not set as reply address, what a time waster, I really hate
that]


Phil, 

> Does anyone know of a grammar for Windows resource files
> (*.rc) of have one that they'd be willing to share?

I have written a parser for rc files a year ago. I wanted to publish it already for a long while but since I did not
need it after all and nobody on the list seemed to be interested I kept it close so far. Let me put it into my public
Subversion server (www.soft-gems.net/WebSVN). Ok, see the "Windows *.rc file parser and converter" repository.

The project was actually something to convert *.rc files to xml (for further processing). It is quite complete, although
it does not have an attached documentation. There is a demo app (all written in Eclipse and ANTLR 2.7.x), so you have at
least a starting point (and it is well documented). It contains handling for unlimited include file nesting, a macro
table class, an evaluator and works with various encodings. Two things are missing. One is support for any meta
language. There seems to be kind of a superior language, stuff inserted by the MSVC "designer", which is originally not
part of the *.rc language spec and nowhere mentioned. I asked at several places for more info on that meta stuff, but
got no answer. Of my about 800 rc files only 5 or so contain this stuff so it shouldn't matter much. On the other hand
there is also support for a few specialities produced by the Borland resource compiler.

The second thing is that switching the encoding on the fly is not possible yet. According to the rc spec it is allowed
to specify a language and sublanguage in the file to allow for differently encoded strings. The reader works well also
with Unicode files (although I never found one so far) but switching the input language is difficult, as you have to set
up a new reader every time but have to make sure already buffered input makes it into the new reader. This is also the
reason why I added InputStreamReaderEx.java the project (which is a derivation of InputStreamReader.java). It was
planned to be used as starting point for that task but I never finished it.

There is also a full featured preprocessor, which handles line splicing and trigraph sequences (I mentioned unlimited
include file handling already). Last but not least the macro table implementation supports charizing and stringizing and
can also handle macros with empty parameters, like FOO(bar,,,,,,bar).

Let me know if this is what you need.

Mike
--
www.soft-gems.net 

From gudnabrsam at yahoo.com  Mon Dec 12 08:43:06 2005
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Mon Dec 12 08:43:08 2005
Subject: [antlr-interest] nondeterminism
Message-ID: <20051212164306.37565.qmail@web30902.mail.mud.yahoo.com>

I am having trouble recognizing nondeterminisms.  I
get warnings like
FooParser.g:106:17: warning:nondeterminism between
alts 1 and 2 of block upon
FooParser.g:106:17:     k==1:LPAREN
FooParser.g:106:17:    
k==2:"null",IDENT,BEANREF,BEANCOPY,STRING_LITERAL,LBRACK,LPAREN,RPAREN,"true","false",NUM_INT,NUM_DOUBLE,NUM_LONG,NUM_FLOAT

The generated code looks as though it will behave in
the way I want.  Are there any rules of thumb that may
help me better understand what ANTLR is flagging, so
that I can know better how to (a) remove the condition
that generates the warning, (b) work around the
condition with predicates, or (c) shut off the warning
confident that I am not missing anything

?

TIA,
Matt

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From John.Ericson at thomson.com  Mon Dec 12 09:22:59 2005
From: John.Ericson at thomson.com (John.Ericson@thomson.com)
Date: Mon Dec 12 09:23:08 2005
Subject: [antlr-interest] Delimited identifiers and suffix functions
Message-ID: <C3A072E2F8962C4BBF413A00D9FBEFDC05794491@TSHUSMIANMSG07.ERF.THOMSON.COM>

I am having a problem with parser nondeterminism between alt 1 and the
exit branch of the following rule (simplified)...

member : identifier (DOT identifier)*
	   (DOT LASTCHILD
	 | DOT LAG OPEN_PAREN index CLOSE_PAREN)*
       ;

I want to successfully parse the following types of members...

ident0.ident1.ident2.identN
ident0.ident1.ident2.identN.lastchild
ident0.ident1.ident2.identN.lastchild.lag(1)


Any ideas?

	John Ericson
	Sr. Programmer/Analyst
	Thomson Medstat

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051212/3a6958ec/attachment.html
From parrt at cs.usfca.edu  Mon Dec 12 09:54:39 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 12 09:53:17 2005
Subject: [antlr-interest] Delimited identifiers and suffix functions
In-Reply-To: <C3A072E2F8962C4BBF413A00D9FBEFDC05794491@TSHUSMIANMSG07.ERF.THOMSON.COM>
References: <C3A072E2F8962C4BBF413A00D9FBEFDC05794491@TSHUSMIANMSG07.ERF.THOMSON.COM>
Message-ID: <5DF9D5D9-9EA9-42FE-92F7-403EA19487FF@cs.usfca.edu>

as long as identifier does not include LASTCHILD nor LAG, you're  
cool.  Ignore the warning.
Ter
On Dec 12, 2005, at 9:22 AM, <John.Ericson@thomson.com>  
<John.Ericson@thomson.com> wrote:

> I am having a problem with parser nondeterminism between alt 1 and  
> the exit branch of the following rule (simplified)...
>
> member : identifier (DOT identifier)*
>            (DOT LASTCHILD
>          | DOT LAG OPEN_PAREN index CLOSE_PAREN)*
>        ;
>
> I want to successfully parse the following types of members...
>
> ident0.ident1.ident2.identN
> ident0.ident1.ident2.identN.lastchild
> ident0.ident1.ident2.identN.lastchild.lag(1)
>
> Any ideas?
>
> John Ericson
> Sr. Programmer/Analyst
> Thomson Medstat
>

From jbb at acm.org  Mon Dec 12 10:07:51 2005
From: jbb at acm.org (John B. Brodie)
Date: Mon Dec 12 10:08:01 2005
Subject: [antlr-interest] Delimited identifiers and suffix functions
In-Reply-To: <C3A072E2F8962C4BBF413A00D9FBEFDC05794491@TSHUSMIANMSG07.ERF.THOMSON.COM>
	(John.Ericson@thomson.com)
References: <C3A072E2F8962C4BBF413A00D9FBEFDC05794491@TSHUSMIANMSG07.ERF.THOMSON.COM>
Message-ID: <E1Els5X-0003X2-00@gecko>

>I am having a problem with parser nondeterminism between alt 1 and the
>exit branch of the following rule (simplified)...
>
>member : identifier (DOT identifier)*
>	   (DOT LASTCHILD
>	 | DOT LAG OPEN_PAREN index CLOSE_PAREN)*
>       ;
>
>I want to successfully parse the following types of members...
>
>ident0.ident1.ident2.identN
>ident0.ident1.ident2.identN.lastchild
>ident0.ident1.ident2.identN.lastchild.lag(1)
>
>
>Any ideas?


untested but perhaps something similar to:

member : identifier ( member_tail )? ;

member_tail : DOT ( (identifier (member_tail)? ) | another_tail )

another_tail :
      (LASTCHILD | (LAG OPEN_PAREN index CLOSE_PAREN)) (DOT another_tail)? 
    ;



hope this helps...
   -jbb
From mail at martin-probst.com  Mon Dec 12 11:28:29 2005
From: mail at martin-probst.com (Martin Probst)
Date: Mon Dec 12 11:28:38 2005
Subject: [antlr-interest] Delimited identifiers and suffix functions
In-Reply-To: <C3A072E2F8962C4BBF413A00D9FBEFDC05794491@TSHUSMIANMSG07.ERF.THOMSON.COM>
References: <C3A072E2F8962C4BBF413A00D9FBEFDC05794491@TSHUSMIANMSG07.ERF.THOMSON.COM>
Message-ID: <1134415709.10619.1.camel@localhost.localdomain>

Depending on the rest of your grammar you might be able to lex the DOT
together with the preceding element. E.g. "ident0." becomes IDENT_W_DOT
instead of IDENT DOT, and your rule would be
(IDENT_W_DOT)* ( IDENT | LAG OPEN_PAREN ... )*

Martin

Am Montag, den 12.12.2005, 12:22 -0500 schrieb John.Ericson@thomson.com:
> I am having a problem with parser nondeterminism between alt 1 and the
> exit branch of the following rule (simplified)...
> 
> member : identifier (DOT identifier)* 
>            (DOT LASTCHILD 
>          | DOT LAG OPEN_PAREN index CLOSE_PAREN)* 
>        ;
> 
> I want to successfully parse the following types of members...
> 
> ident0.ident1.ident2.identN 
> ident0.ident1.ident2.identN.lastchild 
> ident0.ident1.ident2.identN.lastchild.lag(1)
> 
> 
> Any ideas?
> 
>         John Ericson 
>         Sr. Programmer/Analyst 
>         Thomson Medstat
>         

From Ari.Steinberg at EMBARCADERO.COM  Mon Dec 12 12:29:37 2005
From: Ari.Steinberg at EMBARCADERO.COM (Ari Steinberg)
Date: Mon Dec 12 13:10:43 2005
Subject: [antlr-interest] Lexer question
Message-ID: <715057EB65FC7E47923FE408F290ADFD0104F931@ettoma01.embarcadero.com>

Hi Guys,

Hopefully someone can help me out.  I would like my lexer to create a
special INVALID_CHARACTER token for any invalid characters it finds and
send them along to the parser so that it can be handled in the parser.

I have my char vocabulary set to '\0'..'\377' and have the filter option
set to a INVALID_CHARACTER.  This way all invalid characters ( such as
Unicode characters ) are matched by the filter rule.

Doing this I can report the character as an error but I really do need
that character to still be a part of the token stream ( rather then
ignored ).  So far the only way I've thought of to be able to accomplish
this is to make all my rules protected and have one giant rule that
matches all my subrules, this would be a major pain.  It's either that
or hack into the lexer generator and make the filter rule create and
return a token.

Any one have any better ideas?

Thanks,
Ari

Ari Steinberg
Engineer Extraordinaire @
Embarcadero Technologies
416-593-1585 x231
ari.steinberg at embarcadero.com
From inshua at gmail.com  Tue Dec 13 01:41:23 2005
From: inshua at gmail.com (=?GB2312?B?0MLC8g==?=)
Date: Tue Dec 13 01:41:26 2005
Subject: [antlr-interest] Hi, I've made out a demo of expression parser and
	eval~
Message-ID: <2506dcb70512130141j2f44a95at@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: look.png
Type: image/png
Size: 10302 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20051213/d9039bd4/look.png
From inshua at gmail.com  Tue Dec 13 01:42:25 2005
From: inshua at gmail.com (=?GB2312?B?0MLC8g==?=)
Date: Tue Dec 13 01:42:30 2005
Subject: [antlr-interest] Re: Hi,
	I've made out a demo of expression parser and eval~
In-Reply-To: <2506dcb70512130141j2f44a95at@mail.gmail.com>
References: <2506dcb70512130141j2f44a95at@mail.gmail.com>
Message-ID: <2506dcb70512130142m10f7410ck@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: ExpressionAST.zip
Type: application/zip
Size: 13262 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20051213/acbdc347/ExpressionAST-0001.zip
From nadesai at cse.iitb.ac.in  Tue Dec 13 02:35:48 2005
From: nadesai at cse.iitb.ac.in (Desai Nishitkumar Ashokkumar)
Date: Tue Dec 13 02:36:50 2005
Subject: [antlr-interest] email id needed 
Message-ID: <Pine.LNX.4.61.0512131602270.2096@nsl-14.cse.iitb.ac.in>


Hi,
      Can anybody tell me the email-id of Monty Zukowski AND John Mitchell 
who has written the grammar for C ?

I need help regarding the parsing of linux kernel using the gcc grammar 
given at http://www.antlr.org/grammar/cgram/.

Thanks.

-Nishit
From ewbank at gmail.com  Tue Dec 13 05:45:06 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue Dec 13 05:45:10 2005
Subject: [antlr-interest] email id needed
In-Reply-To: <Pine.LNX.4.61.0512131602270.2096@nsl-14.cse.iitb.ac.in>
References: <Pine.LNX.4.61.0512131602270.2096@nsl-14.cse.iitb.ac.in>
Message-ID: <dd3a065f0512130545jacd6004nfadf0398c61ecaf1@mail.gmail.com>

This list (antlr-interest@antlr.org) is a pretty good way to contact
them - they are both frequent contributors...

On 12/13/05, Desai Nishitkumar Ashokkumar <nadesai@cse.iitb.ac.in> wrote:
> Can anybody tell me the email-id of Monty Zukowski AND John Mitchell
> who has written the grammar for C ?
From atripp at jazillian.com  Tue Dec 13 08:02:08 2005
From: atripp at jazillian.com (Andy Tripp)
Date: Tue Dec 13 08:00:05 2005
Subject: [antlr-interest] Jazillian C to Java translator
Message-ID: <439EF080.90907@jazillian.com>

Hi fellow ANTLR users,

Forgive me, this is a little bit of a plug for my product, but I thought
many of you maybe interested.

My company, Jazillian, makes a product that translates C source to Java 
source.
You can read all about it at http://www.jazillian.com
Of course, it uses ANTLR, both for the C lexer and for expression parsing.
It takes a different approach than you'd probably expect, though. It 
performs
a series of rule-based pattern matching, as opposed to the more traditional
AST-walking approach. More details at http://www.jazillian.com/does.html
and http://www.jazillian.com/how.html

We have a referral program, in which you can make money by simply referring
us to someone you know who may be interested in converting C to Java.
Details at http://www.jazillian.com/referral.html. Feel free to call me at
732-345-1219 to find out more, or even if you'd like to discuss how this
thing works or how I use ANTLR.

Andy Tripp

From nadesai at cse.iitb.ac.in  Tue Dec 13 08:20:16 2005
From: nadesai at cse.iitb.ac.in (Desai Nishitkumar Ashokkumar)
Date: Tue Dec 13 08:20:23 2005
Subject: [antlr-interest] regarding gcc C grammar
Message-ID: <Pine.LNX.4.61.0512132147550.3247@nsl-14.cse.iitb.ac.in>

Hi monty,

     I am trying to parse linux kernel using the gcc grammar (by 
monty) given in ANTLR, but it gives some error.

Following code is part of the preprocesed kernel code and it is not parsed
by gcc grammar given at ... http://www.antlr.org/grammar/cgram/.

-------------------------------

static inline __attribute__((always_inline)) void set_bit(int nr, volatile
unsigned long * addr)
{
  __asm__ __volatile__( ""
   "btsl %1,%0"
   :"=m" ((*(volatile long *) addr))
   :"Ir" (nr));
}

---------------------------------

Can anyone please help me out in this ? In
http://www.antlr.org/grammar/cgram//announce.txt it is written that it is
tested on linux kernel. So, does anyone have any new/changed grammar for 
gcc C ? or Can anyone please tell me that which rules I have to add to 
successfully parse the kernel code.

-- 
Nishit Desai
M.Tech II year 
Computer Science & Engg.
IIT Bombay
From parrt at cs.usfca.edu  Tue Dec 13 10:15:57 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Dec 13 10:14:32 2005
Subject: [antlr-interest] Jazillian C to Java translator
In-Reply-To: <439EF080.90907@jazillian.com>
References: <439EF080.90907@jazillian.com>
Message-ID: <CEDC6857-AC79-4C00-959B-0548A0323D46@cs.usfca.edu>

Hi Andy, I couldn't find info on your rule-based translation...i'm  
dying to read about it...can you point me at something or explain here?
Thanks,
Ter

From zhixueyong at hotmail.com  Tue Dec 13 12:58:53 2005
From: zhixueyong at hotmail.com (Xue Yong Zhi)
Date: Tue Dec 13 13:03:06 2005
Subject: [antlr-interest] Re: Lexer question
References: <715057EB65FC7E47923FE408F290ADFD0104F931@ettoma01.embarcadero.com>
Message-ID: <dnncmd$rhv$1@sea.gmane.org>

How about this:
Make vocabulary set large enough to accept any character.
Then create a lexer rule like this:
INVALID_CHARACTER
:     '\378'..'\FFFE'
;

btw, I am not sure if you understand antlr well. For antlr generated lexer, 
nextToken() is your "giant" rule.
Even though there are lots of public methods(each correspondes to a rule, 
good for unit testing), parser will only call nextToken().
So if you do not mind to use exception to catch invalid characters, then you 
do not have to anything special.

-- 
Xue Yong Zhi
http://seclib.blogspot.com


"Ari Steinberg" <Ari.Steinberg@EMBARCADERO.COM> 
wrote in message 
news:715057EB65FC7E47923FE408F290ADFD0104F931@ettoma01.embarcadero.com...
Hi Guys,

Hopefully someone can help me out.  I would like my lexer to create a
special INVALID_CHARACTER token for any invalid characters it finds and
send them along to the parser so that it can be handled in the parser.

I have my char vocabulary set to '\0'..'\377' and have the filter option
set to a INVALID_CHARACTER.  This way all invalid characters ( such as
Unicode characters ) are matched by the filter rule.

Doing this I can report the character as an error but I really do need
that character to still be a part of the token stream ( rather then
ignored ).  So far the only way I've thought of to be able to accomplish
this is to make all my rules protected and have one giant rule that
matches all my subrules, this would be a major pain.  It's either that
or hack into the lexer generator and make the filter rule create and
return a token.

Any one have any better ideas?





From prashant.deva at gmail.com  Wed Dec 14 00:33:29 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed Dec 14 00:33:32 2005
Subject: [antlr-interest] Jazillian C to Java translator
In-Reply-To: <CEDC6857-AC79-4C00-959B-0548A0323D46@cs.usfca.edu>
References: <439EF080.90907@jazillian.com>
	<CEDC6857-AC79-4C00-959B-0548A0323D46@cs.usfca.edu>
Message-ID: <41fed8f80512140033g49114885x60cbc1bd24f15205@mail.gmail.com>

I would be interested in knowing about this too.

On 12/13/05, Terence Parr <parrt@cs.usfca.edu> wrote:
> Hi Andy, I couldn't find info on your rule-based translation...i'm
> dying to read about it...can you point me at something or explain here?
> Thanks,
> Ter
>
>


--
Prashant Deva
Creator, ANTLR Studio,www.antlrstudio.com
Founder, Placid Systems, www.placidsystems.com
From soawork at web.de  Wed Dec 14 05:29:54 2005
From: soawork at web.de (SOA Work)
Date: Wed Dec 14 05:29:59 2005
Subject: [antlr-interest] antlr suitable for xml languages? (like bpel and
	are there existing grammaires)
Message-ID: <581013691@web.de>


 

Hi,

im new to antlr (to parsing at all for being honest). 

I am planning to create a parser for the bpel language. Now my questions (as mentioned in the subject):

1. can i parse xml languages like bpel, wsdl, xhtml or soap messages with antlr? or is it more simple just to use some xml parsers?

2. if using antlr for parsing bpel, does somebody know existing grammair files for this language?

 

thx a lot in advance

greetings

dominik



Verschicken Sie romantische, coole und witzige Bilder per SMS! 
Jetzt bei WEB.DE FreeMail: http://f.web.de/?mc=021193 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051214/dbb59cb5/attachment.html
From scott at javadude.com  Wed Dec 14 06:04:26 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Wed Dec 14 06:05:00 2005
Subject: [antlr-interest] antlr suitable for xml languages? (like bpel
	andare there existing grammaires)
In-Reply-To: <581013691@web.de>
Message-ID: <200512141353.jBEDrIk9012971@s2.eroute.net>

Sure, but I'd recommend looking at ANTXR, which is a fork I made from ANTLR
specifically for XML parsing. I use it for several projects at work and it's
saved me a metric butload of time.
 
See http://javadude.com/tools/antxr
 
You need to write a grammar, but it has a more xml feel than ANTLR and you
don't need to write the scanner (you can use SAX or XMLPULL for the scanner)
 
Eventually I plan to write a base-grammar creator that takes an XSD or DTD
as input and creates a basic ANTXR grammar, but I haven't had the time...
 
Feel free to email me with any questions!
-- Scott


  _____  

From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of SOA Work
Sent: Wednesday, December 14, 2005 8:30 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] antlr suitable for xml languages? (like bpel
andare there existing grammaires)



 

Hi,

im new to antlr (to parsing at all for being honest). 

I am planning to create a parser for the bpel language. Now my questions (as
mentioned in the subject):

1. can i parse xml languages like bpel, wsdl, xhtml or soap messages with
antlr? or is it more simple just to use some xml parsers?

2. if using antlr for parsing bpel, does somebody know existing grammair
files for this language?

 

thx a lot in advance

greetings

dominik



  <https://img.web.de/p.gif> 	
Verschicken Sie romantische, coole und witzige Bilder per SMS!   
Jetzt bei WEB.DE FreeMail:  <http://f.web.de/?mc=! 021193>
http://f.web.de/?mc=021193  	

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051214/e71703b3/attachment.html
From open.zone at virgin.net  Wed Dec 14 06:44:04 2005
From: open.zone at virgin.net (Micheal J)
Date: Wed Dec 14 06:28:15 2005
Subject: [antlr-interest] antlr suitable for xml languages? (like
	bpelandare there existing grammaires)
In-Reply-To: <200512141353.jBEDrIk9012971@s2.eroute.net>
Message-ID: <002201c600bc$d50e3e90$6b02a8c0@hercules>

Please don't post HTML mail to the list guys.

> Sure, but I'd recommend looking at ANTXR, which is a fork I made
> from ANTLR specifically for XML parsing. I use it for several 
> projects at work and it's saved me a metric butload of time.

> Eventually I plan to write a base-grammar creator that takes 
> an XSD or DTD as input and creates a basic ANTXR grammar, but 
> I haven't had the time...

Scott, what would one gain from using ANTXR rather than a standard XML
parser validating with an XSD/DTD.

Micheal

From dskolovos at gmail.com  Wed Dec 14 06:25:29 2005
From: dskolovos at gmail.com (Dimitrios Kolovos)
Date: Wed Dec 14 06:30:32 2005
Subject: [antlr-interest] antlr suitable for xml languages? (like bpel
	and	are there existing grammaires)
In-Reply-To: <581013691@web.de>
References: <581013691@web.de>
Message-ID: <43A02B59.9070905@gmail.com>

Hi Dominik,

I would personally recommend going the SAX-DOM route. With libraries 
such as JDOM or dom4j you actually get the AST (in that case DOM) for 
free. Moreover, you can specify a W3C Schema or DTD to perform 
validation on your input. Finally, you can use XPath (e.g. Jaxen) to 
query your DOM.

Since the problem of parsing and managing XML documents has been solved 
in its general case - from stable and sophisticated libraries such as 
those mentioned above - I see no reason to re-implment the wheel and 
construct your own XML parser with ANTLR (espacially if you start 
thinking about escaping characters, different encodings etc).

Just my two pence,
Dimitrios

SOA Work wrote:

>  
>
> Hi,
>
> im new to antlr (to parsing at all for being honest).
>
> I am planning to create a parser for the bpel language. Now my 
> questions (as mentioned in the subject):
>
> 1. can i parse xml languages like bpel, wsdl, xhtml or soap messages 
> with antlr? or is it more simple just to use some xml parsers?
>
> 2. if using antlr for parsing bpel, does somebody know existing 
> grammair files for this language?
>
>  
>
> thx a lot in advance
>
> greetings
>
> dominik
>
>
>
> Verschicken Sie romantische, coole und witzige Bilder per SMS!   
> Jetzt bei WEB.DE FreeMail: *http://f.web.de/?mc=021193* 
> <http://f.web.de/?mc=%21%0A%20021193>  
>
From amohombe at yahoo.com  Wed Dec 14 06:36:21 2005
From: amohombe at yahoo.com (Ahmed Mohombe)
Date: Wed Dec 14 06:44:44 2005
Subject: [antlr-interest] Re: antlr suitable for xml languages? (like bpel
 andare there existing grammaires)
In-Reply-To: <200512141353.jBEDrIk9012971@s2.eroute.net>
References: <581013691@web.de> <200512141353.jBEDrIk9012971@s2.eroute.net>
Message-ID: <dnpal5$hml$1@sea.gmane.org>

> Eventually I plan to write a base-grammar creator that takes an XSD or 
> DTD as input and creates a basic ANTXR grammar,
This sounds very, very interesting :).
Especially since DTD is very simple, and generating from it, I suppose would
bring a pretty good productivity increase.

Ahmed.


From scott at javadude.com  Wed Dec 14 06:55:21 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Wed Dec 14 06:55:57 2005
Subject: [antlr-interest] antlr suitable for xml languages?
	(likebpelandare there existing grammaires)
In-Reply-To: <002201c600bc$d50e3e90$6b02a8c0@hercules>
Message-ID: <200512141444.jBEEi8k9032729@s2.eroute.net>

Context, readability, maintainability and "non-missability".

First, I'll discount DOM right away for memory concerns, readability, and
"missability". Quite simply, you can forget to traverse a child tag...

Now a few details RE SAX:
Context: Instead of having monster if/else in a SAX parser and having to
keep track of "in which context is that <name> tag?", the rules do it for
you.

Readability: Nice grammar vs single large method with long if/else and
accompanying structure to keep track of location.

Maintainability: If you need to add handing for a new subtag or attribute,
is it easier to find the right spot in the grammar or in a hand-written
if/else-based method.

Non-missability: With SAX you can easily have a trailing else that ignores
some tags you didn't mean to ignore. With ANTXR, you must specify each tag.
(You can specify an explicit ANY_TAG if you really need to, but it's more
explicit and can have nested subtags)


Quick ANTXR example:

XML:
<?xml version="1.0"?>
<people>
  <person ssn="111-11-1111">
    <firstName>Terence</firstName>
    <lastName>Parr</lastName>
  </person>
  <person ssn="222-22-2222">
    <firstName>Scott</firstName>
    <lastName>Stanchfield</lastName>
  </person>
  <person ssn="333-33-3333">
    <firstName>James</firstName>
    <lastName>Stewart</lastName>
  </person>
</people>

ANTXR grammar:
header {
package com.javadude.antlr.sample.xml;
}

class PeopleParser extends Parser;

document
  : <people> EOF;

<people>
  : (<person>)*
  ;

<person> 
  { System.out.println("ssn=" + @ssn); }
  : ( <firstName>
    | <lastName>
    )*
  ;

<firstName>
  : PCDATA
  ;

<lastName>
  : PCDATA
  ;


You can add actions, semantic and syntactic preds, etc, just like in normal
ANTLR, but with some extra syntax help. For a more detailed example, look
near the bottom of the ANTXR page for the GUIParser example.

Of course YMMV, but everyone I've shown this to (& who's actually used it)
thinks it's significantly faster to write and easier to maintain an XML
parser this way.

The best way to find out is to try a few simple parsers and see how it
feels...

Later,
-- Scott



> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Micheal J
> 
> Scott, what would one gain from using ANTXR rather than a 
> standard XML parser validating with an XSD/DTD.
> 
> Micheal
> 


From scott at javadude.com  Wed Dec 14 06:57:53 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Wed Dec 14 06:58:29 2005
Subject: [antlr-interest] Re: antlr suitable for xml languages? (like bpel
	andare there existing grammaires)
In-Reply-To: <dnpal5$hml$1@sea.gmane.org>
Message-ID: <200512141446.jBEEkek9001676@s2.eroute.net>

Take it a step further -- if you use the to-be-written tool to generate the
grammar and don't change the structure, you can generate a new one when the
DTD or schema changes, and diff. This is even better if you use the "print
grammar" option of antxr (same as in antlr) to just see the grammar rules.
You'd know exactly what needs to change... 

Wish I had the time right now, but if someone else wants to write such a
tool I'd be thrilled...
-- Scott

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Ahmed Mohombe
> Sent: Wednesday, December 14, 2005 9:36 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Re: antlr suitable for xml 
> languages? (like bpel andare there existing grammaires)
> 
> > Eventually I plan to write a base-grammar creator that 
> takes an XSD or 
> > DTD as input and creates a basic ANTXR grammar,
> This sounds very, very interesting :).
> Especially since DTD is very simple, and generating from it, 
> I suppose would bring a pretty good productivity increase.
> 
> Ahmed.
> 
> 


From mail at martin-probst.com  Wed Dec 14 07:34:34 2005
From: mail at martin-probst.com (Martin Probst)
Date: Wed Dec 14 07:34:46 2005
Subject: [antlr-interest] antlr suitable for xml languages?
	(likebpelandare there existing grammaires)
In-Reply-To: <200512141444.jBEEi8k9032729@s2.eroute.net>
References: <200512141444.jBEEi8k9032729@s2.eroute.net>
Message-ID: <1134574474.6385.23.camel@localhost.localdomain>

Hi,

> First, I'll discount DOM right away for memory concerns, readability, and
> "missability". Quite simply, you can forget to traverse a child tag...

I concur with Scott, DOM is probably the definite worst-case of a
library. It's complex, unwieldy, unintuitive and doesn't fit any of the
languages implementing it. As an additional bonus it's slow by spec,
e.g. the spec mandates certain behaviours which are impossible to
implement without a major speed & memory impact.

Every user should by all means avoid using DOM if he can. Of course you
could try to implement your parser in one of the many XML languages out
there, e.g. C-omega or E4X, XQuery, XSLT etc, but all of them don't
really seem suitable for that.

However there is a much simpler approach, using XML binding tools like
XML Beans to convert an XML schema into some Java code that will
transform your XML documents into your domain objects. The drawback is
that you'll have to learn XML schema, plus the limitations of XML
schema, but I'd guess it would still be a lot easier.

Martin

From mail at martin-probst.com  Wed Dec 14 07:35:49 2005
From: mail at martin-probst.com (Martin Probst)
Date: Wed Dec 14 07:36:00 2005
Subject: [antlr-interest] Re: antlr suitable for xml languages? (like
	bpel andare there existing grammaires)
In-Reply-To: <200512141446.jBEEkek9001676@s2.eroute.net>
References: <200512141446.jBEEkek9001676@s2.eroute.net>
Message-ID: <1134574550.6385.25.camel@localhost.localdomain>

Well, IMHO that tool is called XML beans, available for download from
the Apache project. It skips the grammar step though ...

On Wed, 2005-12-14 at 09:57 -0500, Scott Stanchfield wrote:
> Take it a step further -- if you use the to-be-written tool to generate the
> grammar and don't change the structure, you can generate a new one when the
> DTD or schema changes, and diff. This is even better if you use the "print
> grammar" option of antxr (same as in antlr) to just see the grammar rules.
> You'd know exactly what needs to change... 
> 
> Wish I had the time right now, but if someone else wants to write such a
> tool I'd be thrilled...
> -- Scott
> 
> > -----Original Message-----
> > From: antlr-interest-bounces@antlr.org 
> > [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Ahmed Mohombe
> > Sent: Wednesday, December 14, 2005 9:36 AM
> > To: antlr-interest@antlr.org
> > Subject: [antlr-interest] Re: antlr suitable for xml 
> > languages? (like bpel andare there existing grammaires)
> > 
> > > Eventually I plan to write a base-grammar creator that 
> > takes an XSD or 
> > > DTD as input and creates a basic ANTXR grammar,
> > This sounds very, very interesting :).
> > Especially since DTD is very simple, and generating from it, 
> > I suppose would bring a pretty good productivity increase.
> > 
> > Ahmed.
> > 
> > 
> 
> 
> 

From Ari.Steinberg at EMBARCADERO.COM  Wed Dec 14 07:42:35 2005
From: Ari.Steinberg at EMBARCADERO.COM (Ari Steinberg)
Date: Wed Dec 14 07:42:44 2005
Subject: [antlr-interest] Re: Lexer question
Message-ID: <715057EB65FC7E47923FE408F290ADFD0104F9D8@ettoma01.embarcadero.com>

Funny how sometimes the simplest solutions can be overlooked.  Initially
I was trying to avoid specifying a large vocabulary set but what you
suggested works perfectly.

I know that the lexer creates the nextToken() method but what I was
looking for was to specify a rule that would always be the last else in
it.  The filter rule fit this purpose but it doesn't allow you to return
any tokens( which I need to do ).

Anyway, thanks for the suggestion.  It's helped.
Ari

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Xue Yong Zhi
Sent: Tuesday, December 13, 2005 3:59 PM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Re: Lexer question

How about this:
Make vocabulary set large enough to accept any character.
Then create a lexer rule like this:
INVALID_CHARACTER
:     '\378'..'\FFFE'
;

btw, I am not sure if you understand antlr well. For antlr generated
lexer, 
nextToken() is your "giant" rule.
Even though there are lots of public methods(each correspondes to a
rule, 
good for unit testing), parser will only call nextToken().
So if you do not mind to use exception to catch invalid characters, then
you 
do not have to anything special.

-- 
Xue Yong Zhi
http://seclib.blogspot.com


"Ari Steinberg" <Ari.Steinberg@EMBARCADERO.COM> 
wrote in message 
news:715057EB65FC7E47923FE408F290ADFD0104F931@ettoma01.embarcadero.com..
.
Hi Guys,

Hopefully someone can help me out.  I would like my lexer to create a
special INVALID_CHARACTER token for any invalid characters it finds and
send them along to the parser so that it can be handled in the parser.

I have my char vocabulary set to '\0'..'\377' and have the filter option
set to a INVALID_CHARACTER.  This way all invalid characters ( such as
Unicode characters ) are matched by the filter rule.

Doing this I can report the character as an error but I really do need
that character to still be a part of the token stream ( rather then
ignored ).  So far the only way I've thought of to be able to accomplish
this is to make all my rules protected and have one giant rule that
matches all my subrules, this would be a major pain.  It's either that
or hack into the lexer generator and make the filter rule create and
return a token.

Any one have any better ideas?




From geiroves at online.no  Wed Dec 14 07:57:14 2005
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Wed Dec 14 07:57:16 2005
Subject: [antlr-interest] nondeterminism
In-Reply-To: <20051212164306.37565.qmail@web30902.mail.mud.yahoo.com>
Message-ID: <003001c600c7$0e554900$b5fcf70a@rexii>

Hello,

I think we need to see your grammar to understand why you get this
problem. In general, what happens is that with a given lookahead, ANTLR
gives this error message when it cannot distingusih between two rules. 

In general, I add one rule at a time, because the ANTLR error messages
can be really hard to track when rules recurse !


For eksampel, I have the following two rules that works OK

expressionEquality throws GeosParserException,
GeosCalculatorTerminateException
	:  expressionRelations ((EQUALS^ | NOTEQUALS^)
expressionRelations)*
	;

expressionRelations throws GeosParserException,
GeosCalculatorTerminateException
	: simpleExpression ((GT^ | LT^ | GTE^ | LTE^) simpleExpression)*
	;	

Now, If I add another rule to expressionEquality  like below, I get a
non-determinism 
(Silly to introduce ID there, but it demonstrates the concept !)


expressionEquality throws GeosParserException,
GeosCalculatorTerminateException
	:  (expressionRelations | ID) ((EQUALS^ | NOTEQUALS^)
(expressionRelations))*
	;

warning:nondeterminism between alts 1 and 2 of block upon
k==1:ID
k==2:SEMI,COMMA,RPAREN,AND,OR,XOR,EQUALS,NOTEQUALS,RSQUARE


However, I can write out the expressionEquality rule as follows: 

expressionEquality throws GeosParserException,
GeosCalculatorTerminateException
	:  expressionRelations ((EQUALS^ | NOTEQUALS^) {allowNull =
true;} expressionRelations {allowNull = false;})*
	| ID ((EQUALS^ | NOTEQUALS^) {allowNull = true;}
expressionRelations {allowNull = false;})*
	;	

Now, I can use a Syntactic Predicate to resolve this problem: 

expressionEquality throws GeosParserException,
GeosCalculatorTerminateException
	: (ID (EQUALS | NOTEQULLS)) => ID ((EQUALS^ | NOTEQUALS^)
{allowNull = true;}  expressionRelations {allowNull = false;})*
	|  expressionRelations ((EQUALS^ | NOTEQUALS^) {allowNull =
true;} expressionRelations {allowNull = false;})*
	;	

Now I get NO error messages !

NOTE: I then had to move the conflicting rule to alternative 1, because
the Syntactic Predicate must come **before** the rule it resolves a
conflict with.


Hope this helps

Geir Ove

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Matt Benson
Sent: 12. desember 2005 17:43
To: Antlr List
Subject: [antlr-interest] nondeterminism


I am having trouble recognizing nondeterminisms.  I
get warnings like
FooParser.g:106:17: warning:nondeterminism between
alts 1 and 2 of block upon
FooParser.g:106:17:     k==1:LPAREN
FooParser.g:106:17:    
k==2:"null",IDENT,BEANREF,BEANCOPY,STRING_LITERAL,LBRACK,LPAREN,RPAREN,"
true","false",NUM_INT,NUM_DOUBLE,NUM_LONG,NUM_FLOAT

The generated code looks as though it will behave in
the way I want.  Are there any rules of thumb that may
help me better understand what ANTLR is flagging, so
that I can know better how to (a) remove the condition
that generates the warning, (b) work around the
condition with predicates, or (c) shut off the warning confident that I
am not missing anything

?

TIA,
Matt

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 



From gudnabrsam at yahoo.com  Wed Dec 14 10:25:29 2005
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Wed Dec 14 10:25:31 2005
Subject: [antlr-interest] nondeterminism
In-Reply-To: <003001c600c7$0e554900$b5fcf70a@rexii>
Message-ID: <20051214182529.51910.qmail@web30901.mail.mud.yahoo.com>

Thanks for the reply, Geir.  I had resolved the
particular problem I was having by, yep, the use of a
couple of syntactic preds.  But it was very nearly
blind luck that helped me figure out where to put
them, which is why I left my request for
"nondeterminism resolution guidelines" open.  Reading
your example probably gelled a little bit of what I
had done Monday, but leads me to the conclusion that
the line number ANTLR reports is the most useful piece
of info I'll get from antlr.Tool, since it at least
shows me where to look for one of the ambiguous
constructs.  What really perplexes me is that every
time I get caught up in a nondeterminism, increasing k
does absolutely no good.  Not that I want to have a
grammar where k=10 or some such, but I find it
interesting that most of the types of nondeterminisms
I introduce cannot be resolved by lookahead tweaking. 
That may be related to the fact that many of my
problems were, IIRC, caused by optional rules and
subrules rather than the types of ambiguities you
outlined here.  Without thinking hard enough to hurt
my head right now, it seems sensible that increasing k
adds no benefit when the ambiguity refers to something
_missing_.

Anyway, thanks again for your input.  Feel free
(anyone) to comment on any of my musings as well.

-Matt

--- Geir Ove Skjaervik <geiroves@online.no> wrote:

> Hello,
> 
> I think we need to see your grammar to understand
> why you get this
> problem. In general, what happens is that with a
> given lookahead, ANTLR
> gives this error message when it cannot distingusih
> between two rules. 
> 
> In general, I add one rule at a time, because the
> ANTLR error messages
> can be really hard to track when rules recurse !
> 
> 
> For eksampel, I have the following two rules that
> works OK
> 
> expressionEquality throws GeosParserException,
> GeosCalculatorTerminateException
> 	:  expressionRelations ((EQUALS^ | NOTEQUALS^)
> expressionRelations)*
> 	;
> 
> expressionRelations throws GeosParserException,
> GeosCalculatorTerminateException
> 	: simpleExpression ((GT^ | LT^ | GTE^ | LTE^)
> simpleExpression)*
> 	;	
> 
> Now, If I add another rule to expressionEquality 
> like below, I get a
> non-determinism 
> (Silly to introduce ID there, but it demonstrates
> the concept !)
> 
> 
> expressionEquality throws GeosParserException,
> GeosCalculatorTerminateException
> 	:  (expressionRelations | ID) ((EQUALS^ |
> NOTEQUALS^)
> (expressionRelations))*
> 	;
> 
> warning:nondeterminism between alts 1 and 2 of block
> upon
> k==1:ID
>
k==2:SEMI,COMMA,RPAREN,AND,OR,XOR,EQUALS,NOTEQUALS,RSQUARE
> 
> 
> However, I can write out the expressionEquality rule
> as follows: 
> 
> expressionEquality throws GeosParserException,
> GeosCalculatorTerminateException
> 	:  expressionRelations ((EQUALS^ | NOTEQUALS^)
> {allowNull =
> true;} expressionRelations {allowNull = false;})*
> 	| ID ((EQUALS^ | NOTEQUALS^) {allowNull = true;}
> expressionRelations {allowNull = false;})*
> 	;	
> 
> Now, I can use a Syntactic Predicate to resolve this
> problem: 
> 
> expressionEquality throws GeosParserException,
> GeosCalculatorTerminateException
> 	: (ID (EQUALS | NOTEQULLS)) => ID ((EQUALS^ |
> NOTEQUALS^)
> {allowNull = true;}  expressionRelations {allowNull
> = false;})*
> 	|  expressionRelations ((EQUALS^ | NOTEQUALS^)
> {allowNull =
> true;} expressionRelations {allowNull = false;})*
> 	;	
> 
> Now I get NO error messages !
> 
> NOTE: I then had to move the conflicting rule to
> alternative 1, because
> the Syntactic Predicate must come **before** the
> rule it resolves a
> conflict with.
> 
> 
> Hope this helps
> 
> Geir Ove
> 
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-bounces@antlr.org] On Behalf
> Of Matt Benson
> Sent: 12. desember 2005 17:43
> To: Antlr List
> Subject: [antlr-interest] nondeterminism
> 
> 
> I am having trouble recognizing nondeterminisms.  I
> get warnings like
> FooParser.g:106:17: warning:nondeterminism between
> alts 1 and 2 of block upon
> FooParser.g:106:17:     k==1:LPAREN
> FooParser.g:106:17:    
>
k==2:"null",IDENT,BEANREF,BEANCOPY,STRING_LITERAL,LBRACK,LPAREN,RPAREN,"
> true","false",NUM_INT,NUM_DOUBLE,NUM_LONG,NUM_FLOAT
> 
> The generated code looks as though it will behave in
> the way I want.  Are there any rules of thumb that
> may
> help me better understand what ANTLR is flagging, so
> that I can know better how to (a) remove the
> condition
> that generates the warning, (b) work around the
> condition with predicates, or (c) shut off the
> warning confident that I
> am not missing anything
> 
> ?
> 
> TIA,
> Matt
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam
> protection around 
> http://mail.yahoo.com 
> 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From parrt at cs.usfca.edu  Wed Dec 14 16:40:24 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec 14 16:38:55 2005
Subject: [antlr-interest] ANTLR 3.0 early access 7 released
Message-ID: <F72C1BD4-229E-4E02-B936-A936E7C4C5C9@cs.usfca.edu>

Hi,

Just pushed 3.0ea7:

http://www.antlr.org/download/antlr-3.0ea1.tar.gz

and examples:

http://www.antlr.org/download/examples-v3.tar.gz

The ruby example is just my start on it...python grammar was ported  
to v3, but I'm not sure it's right yet.

Enjoy.  Many many updates in 3.0ea7.  See the README.txt

Ter
From parrt at cs.usfca.edu  Wed Dec 14 17:33:25 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec 14 17:31:54 2005
Subject: [antlr-interest] ANTLR 2.7.6 release candidate 2 available
Message-ID: <EB606550-6206-4619-AB35-05207FC10D71@cs.usfca.edu>

Howdy,

Here is the 2nd release candidate...a number of C# fixes.

http://www.antlr.org/download/antlr-2.7.6rc2.tar.gz

Ter
From parrt at cs.usfca.edu  Wed Dec 14 18:21:44 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec 14 18:20:13 2005
Subject: [antlr-interest] ANTLR 3.0 early access 7 released
In-Reply-To: <F72C1BD4-229E-4E02-B936-A936E7C4C5C9@cs.usfca.edu>
References: <F72C1BD4-229E-4E02-B936-A936E7C4C5C9@cs.usfca.edu>
Message-ID: <1DDCA6C9-B464-4E14-8C17-71B8AE38CEE0@cs.usfca.edu>


On Dec 14, 2005, at 4:40 PM, Terence Parr wrote:

> Hi,
>
> Just pushed 3.0ea7:
>
> http://www.antlr.org/download/antlr-3.0ea1.tar.gz

Make that

http://www.antlr.org/download/antlr-3.0ea7.tar.gz

oops.
Ter

From sohail at taggedtype.net  Wed Dec 14 18:38:50 2005
From: sohail at taggedtype.net (Sohail Somani)
Date: Wed Dec 14 18:38:59 2005
Subject: [antlr-interest] antlr suitable for xml languages? (like bpel
	and are there existing grammaires)
In-Reply-To: <581013691@web.de>
References: <581013691@web.de>
Message-ID: <1134614330.7654.6.camel@localhost.localdomain>

On Wed, 2005-12-14 at 14:29 +0100, SOA Work wrote:
> Hi,
> 
> im new to antlr (to parsing at all for being honest). 
> 
> I am planning to create a parser for the bpel language. Now my
> questions (as mentioned in the subject):
> 
> 1. can i parse xml languages like bpel, wsdl, xhtml or soap messages
> with antlr? or is it more simple just to use some xml parsers?
> 
> 2. if using antlr for parsing bpel, does somebody know existing
> grammair files for this language?

Quite honestly I am surprised Java libraries don't take more advantage
of its introspection abilities. For example, take a look at
http://xmlobject.base-art.net/. 

A library like this allows you to basically define the DTD in code as
well as giving you a set of "strongly typed" classes that you can use to
manipulate the XML (all with one declaration of course). This has saved
me a metric buttload of time at work as well. Especially since I never
have to even know I'm reading XML.

Do such libraries exist in Java? I am not sure.

>From personal experience, I think XML parsers as we know them for these
types of environments should be a thing of the past. But thats just
IMHO :)

I wonder if EaseXml works in Jython :)

Sohail

From antlr-list at arizona-software.ch  Wed Dec 14 20:10:25 2005
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Wed Dec 14 20:10:33 2005
Subject: [antlr-interest] ANTLRWorks 1.0ea6 released!
Message-ID: <4921CEC1-A8DB-4F6B-A5B6-085BB28D0A8C@arizona-software.ch>

Hello!

ANTLRWorks 1.0ea6 is now available at this URL:

http://www.antlr.org/works/index.html

This version fixes and improves several things. I would like to  
emphasis some new features:
- new graphical representation of the parse tree (both in interpreter  
and debugger) that can be also exported to eps
- click on an input token in debugger selects the corresponding token  
in the grammar and in the parse tree
- breakpoints in the input text and in the grammar (the latest wasn't  
working correctly)
- refactoring feature to convert literals to/from single/double/c- 
style quote
- and much more

The ANTLRWorks jar has everything you need including the latest  
version of ANTLR 3.0ea7 and StringTemplate 2.3b4.

Mac OS X users can now download a special bundled version of  
ANTLRWorks: this version has a proper icon in the dock and allow the  
drag and drop of files into ANTLRWorks (like any good Mac OS X  
application).

The web page has been also updated with new images and a new video of  
the debugger in action (including the new graphical parse tree  
representation).

Enjoy this new release!

Jean Bovet


*** History ***

Version 1.0ea6 - 12/14/05

- new: graphical representation of the parse tree (interpreter and  
debugger) that can also be exported to bitmap or eps
- new: show artificial Tokens rule
- new: click on an input token (debugger) selects the corresponding  
token in the grammar and in the parse tree
- new: breakpoints in input text (right-click to toggle the  
breakpoint on any tokens)
- new: breakpoints in grammar now works (click in the editor gutter  
to enable/disable them)
- new: convert literal quote refactoring tools (to single, to double  
or c-style quote)
- new: now available as a bundle for Mac OS X (can now drag a grammar  
file to its icon in the dock)
- new: handle now the tokenVocab options

- improved debugger: display the event where the debugger stopped at
- improved decision DFA: vectorial representation where states can be  
moved using the mouse
- improved decision DFA: exportable to EPS and bitmap image
- improved export to EPS: file size has been reduced by up to 1/2 of  
the previous generated size
- improved show generated code: automatically generate the code if  
needed
- improved: auto-scrolling when following ambiguous paths in syntax  
diagram
- improved: smooth scrolling when jumping to rule in the grammar

- move caret to decision location when displaying DFA decision
- rules list can be sorted (group are not sorted)
- can open the file using Perforce automatically when saving it if it  
was closed

- debugger input text is now saved and restored in preferences
- improved caret visibility with wider caret in grammar text

- improved message redirection to editor console
- improved debugger token outline when a token spans on multiple lines
- improved underlying menu update system
- report a message if ANTLR installation is corrupted

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051214/0f9c5063/attachment.html
From iank at bearcave.com  Wed Dec 14 20:42:12 2005
From: iank at bearcave.com (Ian Kaplan)
Date: Wed Dec 14 20:42:21 2005
Subject: [antlr-interest] antlr suitable for xml languages? (like
	bpelandare there existing grammaires)
Message-ID: <200512150442.jBF4gCJ25465@shell2.webquarry.com>


> Scott, what would one gain from using ANTXR rather than a standard XML
> parser validating with an XSD/DTD.

  This directed at Scott, but I hope you'll forgive me if I throw in
  by two cents...

  There are reasons to use XSD - mainly that they're standard.

  However, the validation of a document against an XSD is, as far as I
  can tell, undefined.  The XSD does not actually define a grammer in
  any form that is formally defined.  For example, LL(1), LR(1),
  LALR(1) etc...  The validators seem to do recursive tree matching.
  Just because something validates does not mean it is correct.

  In contract, if you uses an real grammar with real validation (as
  ANTLR does), you would have a defined validation and reliability.

  Seeing what has been done with XSDs, I have had to wonder if anyone
  who worked on this stuff ever took an undergrad compiler course.

  Ian (who is not a huge fan of W3C)

From duboimat at iro.umontreal.ca  Wed Dec 14 21:31:23 2005
From: duboimat at iro.umontreal.ca (duboimat@iro.umontreal.ca)
Date: Wed Dec 14 21:31:28 2005
Subject: [antlr-interest] i need your opinions about antlr
In-Reply-To: <4921CEC1-A8DB-4F6B-A5B6-085BB28D0A8C@arizona-software.ch>
References: <4921CEC1-A8DB-4F6B-A5B6-085BB28D0A8C@arizona-software.ch>
Message-ID: <20051215003123.jdo368ki040sgcc8@webmail.iro.umontreal.ca>

hello,

i would like to know your opinion

I have to use a heteregnous tree to support different langages at the 
same time.
In my project i will do a lot of tree transformation on these trees by using
some algorythms.  I would like also to use string template(st) as ouput to
target a specific langagues.  My goal is to have a generic input and output

Is it better to do that with antlr v3 or v2.
When i used st in a tree parser I have some repetition on the ouput.
it didn't work well when i included st in a recursive call.

so, if I create my own nodes and push each node in the template (string
template) by calling them. (like a big stack that i push each node into it)

What is the better way to push a tree into string template model?

thank you for your opinion,
Mat

----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

From sohail at taggedtype.net  Wed Dec 14 21:53:06 2005
From: sohail at taggedtype.net (Sohail Somani)
Date: Wed Dec 14 21:53:13 2005
Subject: [antlr-interest] i need your opinions about antlr
In-Reply-To: <20051215003123.jdo368ki040sgcc8@webmail.iro.umontreal.ca>
References: <4921CEC1-A8DB-4F6B-A5B6-085BB28D0A8C@arizona-software.ch>
	<20051215003123.jdo368ki040sgcc8@webmail.iro.umontreal.ca>
Message-ID: <1134625987.8429.3.camel@localhost.localdomain>

On Thu, 2005-12-15 at 00:31 -0500, duboimat@iro.umontreal.ca wrote:
> hello,
> 
> i would like to know your opinion
> 
> I have to use a heteregnous tree to support different langages at the 
> same time.
> In my project i will do a lot of tree transformation on these trees by using
> some algorythms.  I would like also to use string template(st) as ouput to
> target a specific langagues.  My goal is to have a generic input and output
> 
> Is it better to do that with antlr v3 or v2.
> When i used st in a tree parser I have some repetition on the ouput.
> it didn't work well when i included st in a recursive call.
> 
> so, if I create my own nodes and push each node in the template (string
> template) by calling them. (like a big stack that i push each node into it)

I've had good results with this model. In retrospect, I would have
preferred to have had a TreeParser generate the StringTemplate.

Sohail

From prashant.deva at gmail.com  Thu Dec 15 00:15:57 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Thu Dec 15 00:16:00 2005
Subject: [antlr-interest] i need your opinions about antlr
In-Reply-To: <20051215003123.jdo368ki040sgcc8@webmail.iro.umontreal.ca>
References: <4921CEC1-A8DB-4F6B-A5B6-085BB28D0A8C@arizona-software.ch>
	<20051215003123.jdo368ki040sgcc8@webmail.iro.umontreal.ca>
Message-ID: <41fed8f80512150015v201e5df3n56995f7d6ea2409@mail.gmail.com>

>
> > Is it better to do that with antlr v3 or v2.
>


ANTLR 3 is not ready for production quality code yet, so you are much better
off with v2.

--
Prashant Deva
Creator, ANTLR Studio,www.antlrstudio.com
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051215/89c717c6/attachment-0001.html
From mail at martin-probst.com  Thu Dec 15 01:08:33 2005
From: mail at martin-probst.com (Martin Probst)
Date: Thu Dec 15 01:08:38 2005
Subject: [antlr-interest] antlr suitable for xml languages? (like bpel
	and are there existing grammaires)
In-Reply-To: <1134614330.7654.6.camel@localhost.localdomain>
References: <581013691@web.de> <1134614330.7654.6.camel@localhost.localdomain>
Message-ID: <1134637713.8448.12.camel@localhost.localdomain>

> Quite honestly I am surprised Java libraries don't take more advantage
> of its introspection abilities. 

Well, because reflection at least used to be really slow (it's better
now afaik) and the Java way is static typing, not dynamic fiddling at
runtime. These dynamic projects might be nice for the quick small
project, but for really big stuff static typing and (more or less)
rigorous structures are a pro.

> A library like this allows you to basically define the DTD in code as
> well as giving you a set of "strongly typed" classes that you can use to
> manipulate the XML (all with one declaration of course).

Well, you can do that at compile time with tools like XML Beans in Java.
Why would you want to do something like that at runtime?

> Do such libraries exist in Java? I am not sure.

Well, mentioned XML beans and such, there are afaik dozens of XML
binding libraries, from expensive commercial grade to open source.

Martin

From ewbank at gmail.com  Thu Dec 15 02:39:27 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu Dec 15 02:39:32 2005
Subject: [antlr-interest] i need your opinions about antlr
In-Reply-To: <1134625987.8429.3.camel@localhost.localdomain>
References: <4921CEC1-A8DB-4F6B-A5B6-085BB28D0A8C@arizona-software.ch>
	<20051215003123.jdo368ki040sgcc8@webmail.iro.umontreal.ca>
	<1134625987.8429.3.camel@localhost.localdomain>
Message-ID: <dd3a065f0512150239g641e831haa30797d7512a6fa@mail.gmail.com>

Sohail,

Can you please elaborate?  I don't think I understand what you mean;
if I do, I don't see how it would be done.

How would you use a TreeParser to /generate/ a StringTemplate?

On 12/15/05, Sohail Somani <sohail@taggedtype.net> wrote:
> I've had good results with this model. In retrospect, I would have
> preferred to have had a TreeParser generate the StringTemplate.
>
> Sohail
>
>
From geiroves at online.no  Thu Dec 15 03:22:13 2005
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Thu Dec 15 03:22:15 2005
Subject: [antlr-interest] nondeterminism
In-Reply-To: <20051214182529.51910.qmail@web30901.mail.mud.yahoo.com>
Message-ID: <000001c60169$cd680ce0$83fff70a@rexii>

Hello again,

Yes, ANTLR often get problems resolving Ambiguities, and the reason for
this can bee read in the ANTLR docs  that I have quoted below.

WARNING: Because of this limitation, I often find that Introducing an
Ambiugity in one rule, may lead to ANTLR reporting the problem in
another rule at a great depth from the rule where the problem was
introduced.

This is why I find that it is important to do an ANTLR compile each time
I write a new rule / change a rule. If I write a lot of new rules and
then compile, I will often get error messages that leaves me CLUELESS at
what the problem is !


***************** Start From ANTLR Documentation **********************

k: Setting the lookahead depth

You may set the lookahead depth for any grammar (parser, lexer, or
tree-walker), by using the k=
option:
class MyLexer extends Lexer;
options { k=3; }
...
Setting the lookahead depth changes the maximum number of tokens that
will be examined to select
alternative productions, and test for exit conditions of the EBNF
constructs (...)?, (...)+, and (...)*. The
lookahead analysis is linear approximate (as opposed to full LL(k) ).
This is a bit involved to explain in
detail, but consider this example with k=2:
r : ( A B | B A )
| A A
;


Full LL(k) analysis would resolve the ambiguity and produce a lookahead
test for the first alternate like:
if ( (LA(1)==A && LA(2)==B) || (LA(1)==B && LA(2)==A) )
However, linear approximate analysis would logically OR the lookahead
sets at each depth, resulting in
a test like:
if ( (LA(1)==A || LA(1)==B) && (LA(2)==A || LA(2)==B) )
Which is ambiguous with the second alternate for {A,A}. Because of this,
setting the lookahead depth
very high tends to yield diminishing returns in most cases, because the
lookahead sets at large depths
will include almost everything.

***************** End From ANTLR Documentation **********************

Geir Ove




-----Original Message-----
From: Matt Benson [mailto:gudnabrsam@yahoo.com] 
Sent: 14. desember 2005 19:25
To: Geir Ove Skjaervik; 'Antlr List'
Subject: RE: [antlr-interest] nondeterminism


Thanks for the reply, Geir.  I had resolved the
particular problem I was having by, yep, the use of a
couple of syntactic preds.  But it was very nearly
blind luck that helped me figure out where to put
them, which is why I left my request for
"nondeterminism resolution guidelines" open.  Reading
your example probably gelled a little bit of what I
had done Monday, but leads me to the conclusion that
the line number ANTLR reports is the most useful piece
of info I'll get from antlr.Tool, since it at least
shows me where to look for one of the ambiguous
constructs.  What really perplexes me is that every
time I get caught up in a nondeterminism, increasing k
does absolutely no good.  Not that I want to have a
grammar where k=10 or some such, but I find it
interesting that most of the types of nondeterminisms
I introduce cannot be resolved by lookahead tweaking. 
That may be related to the fact that many of my
problems were, IIRC, caused by optional rules and
subrules rather than the types of ambiguities you
outlined here.  Without thinking hard enough to hurt
my head right now, it seems sensible that increasing k
adds no benefit when the ambiguity refers to something _missing_.

Anyway, thanks again for your input.  Feel free
(anyone) to comment on any of my musings as well.

-Matt

--- Geir Ove Skjaervik <geiroves@online.no> wrote:

> Hello,
> 
> I think we need to see your grammar to understand
> why you get this
> problem. In general, what happens is that with a
> given lookahead, ANTLR
> gives this error message when it cannot distingusih
> between two rules.
> 
> In general, I add one rule at a time, because the
> ANTLR error messages
> can be really hard to track when rules recurse !
> 
> 
> For eksampel, I have the following two rules that
> works OK
> 
> expressionEquality throws GeosParserException, 
> GeosCalculatorTerminateException
> 	:  expressionRelations ((EQUALS^ | NOTEQUALS^)
> expressionRelations)*
> 	;
> 
> expressionRelations throws GeosParserException, 
> GeosCalculatorTerminateException
> 	: simpleExpression ((GT^ | LT^ | GTE^ | LTE^)
> simpleExpression)*
> 	;	
> 
> Now, If I add another rule to expressionEquality
> like below, I get a
> non-determinism 
> (Silly to introduce ID there, but it demonstrates
> the concept !)
> 
> 
> expressionEquality throws GeosParserException, 
> GeosCalculatorTerminateException
> 	:  (expressionRelations | ID) ((EQUALS^ |
> NOTEQUALS^)
> (expressionRelations))*
> 	;
> 
> warning:nondeterminism between alts 1 and 2 of block
> upon
> k==1:ID
>
k==2:SEMI,COMMA,RPAREN,AND,OR,XOR,EQUALS,NOTEQUALS,RSQUARE
> 
> 
> However, I can write out the expressionEquality rule
> as follows:
> 
> expressionEquality throws GeosParserException, 
> GeosCalculatorTerminateException
> 	:  expressionRelations ((EQUALS^ | NOTEQUALS^)
> {allowNull =
> true;} expressionRelations {allowNull = false;})*
> 	| ID ((EQUALS^ | NOTEQUALS^) {allowNull = true;}
expressionRelations 
> {allowNull = false;})*
> 	;	
> 
> Now, I can use a Syntactic Predicate to resolve this
> problem:
> 
> expressionEquality throws GeosParserException, 
> GeosCalculatorTerminateException
> 	: (ID (EQUALS | NOTEQULLS)) => ID ((EQUALS^ |
> NOTEQUALS^)
> {allowNull = true;}  expressionRelations {allowNull
> = false;})*
> 	|  expressionRelations ((EQUALS^ | NOTEQUALS^)
> {allowNull =
> true;} expressionRelations {allowNull = false;})*
> 	;	
> 
> Now I get NO error messages !
> 
> NOTE: I then had to move the conflicting rule to
> alternative 1, because
> the Syntactic Predicate must come **before** the
> rule it resolves a
> conflict with.
> 
> 
> Hope this helps
> 
> Geir Ove
> 
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Matt Benson
> Sent: 12. desember 2005 17:43
> To: Antlr List
> Subject: [antlr-interest] nondeterminism
> 
> 
> I am having trouble recognizing nondeterminisms.  I
> get warnings like
> FooParser.g:106:17: warning:nondeterminism between
> alts 1 and 2 of block upon
> FooParser.g:106:17:     k==1:LPAREN
> FooParser.g:106:17:    
>
k==2:"null",IDENT,BEANREF,BEANCOPY,STRING_LITERAL,LBRACK,LPAREN,RPAREN,"
> true","false",NUM_INT,NUM_DOUBLE,NUM_LONG,NUM_FLOAT
> 
> The generated code looks as though it will behave in
> the way I want.  Are there any rules of thumb that
> may
> help me better understand what ANTLR is flagging, so
> that I can know better how to (a) remove the
> condition
> that generates the warning, (b) work around the
> condition with predicates, or (c) shut off the
> warning confident that I
> am not missing anything
> 
> ?
> 
> TIA,
> Matt
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam
> protection around
> http://mail.yahoo.com 
> 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 



From antlr at shmuelhome.mine.nu  Thu Dec 15 04:44:14 2005
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Thu Dec 15 04:43:24 2005
Subject: [antlr-interest] How incompatable is antlr 3 with antlr 2
Message-ID: <43A1651E.6070003@shmuelhome.mine.nu>

Would it be hard to write a tool that takes an antlr 2 grammar and 
converts it to antlr 3?


-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.371 / Virus Database: 267.13.13/200 - Release Date: 12/14/2005

From krishanu at cal.interrasystems.com  Thu Dec 15 04:53:42 2005
From: krishanu at cal.interrasystems.com (Krishanu Debnath)
Date: Thu Dec 15 04:51:50 2005
Subject: [antlr-interest] How incompatable is antlr 3 with antlr 2
In-Reply-To: <43A1651E.6070003@shmuelhome.mine.nu>
References: <43A1651E.6070003@shmuelhome.mine.nu>
Message-ID: <43A16756.3090609@cal.interrasystems.com>

shmuel siegel wrote:
> Would it be hard to write a tool that takes an antlr 2 grammar and 
> converts it to antlr 3?
> 
> 
Yes, It would be of great help if we have a change log. It will help
people who are not so frequent in this NG, but use ANTLR now and then.

Thanks,
Krishanu

-- 
"First rule of optimization: Don't do it.
  Second rule of optimization (advanced users only): Don't do it yet."

From scott at javadude.com  Thu Dec 15 05:49:19 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Thu Dec 15 05:49:58 2005
Subject: [antlr-interest] antlr suitable for xml languages?
	(likebpelandare there existing grammaires)
In-Reply-To: <200512150442.jBF4gCJ25465@shell2.webquarry.com>
Message-ID: <200512151338.jBFDbvk9007350@s2.eroute.net>

lol... (with you, not at you ;)

The way I've written ANTXR generally assumes that you'd be using an XSD or
DTD to do the actual "validity checking", and that you're just using ANTXR
to give structure to your understanding of the XML. That's optional of
course, and you could really use the grammar to do that validation.

I don't think I'd recommend that though. My intent was to keep the ANTXR
grammar very simple, clean, and readable.

Later,
-- Scott



> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Ian Kaplan
> Sent: Wednesday, December 14, 2005 11:42 PM
> To: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] antlr suitable for xml 
> languages? (likebpelandare there existing grammaires)
> 
> 
> > Scott, what would one gain from using ANTXR rather than a 
> standard XML 
> > parser validating with an XSD/DTD.
> 
>   This directed at Scott, but I hope you'll forgive me if I throw in
>   by two cents...
> 
>   There are reasons to use XSD - mainly that they're standard.
> 
>   However, the validation of a document against an XSD is, as far as I
>   can tell, undefined.  The XSD does not actually define a grammer in
>   any form that is formally defined.  For example, LL(1), LR(1),
>   LALR(1) etc...  The validators seem to do recursive tree matching.
>   Just because something validates does not mean it is correct.
> 
>   In contract, if you uses an real grammar with real validation (as
>   ANTLR does), you would have a defined validation and reliability.
> 
>   Seeing what has been done with XSDs, I have had to wonder if anyone
>   who worked on this stuff ever took an undergrad compiler course.
> 
>   Ian (who is not a huge fan of W3C)
> 


From open.zone at virgin.net  Thu Dec 15 08:55:04 2005
From: open.zone at virgin.net (Micheal J)
Date: Thu Dec 15 08:39:14 2005
Subject: [antlr-interest] Away till the New Year
Message-ID: <000301c60198$4c924930$6b02a8c0@hercules>

Last minute change of plans blah..blah. I won't have regular access to the
internet over the period starting tomorrow esssentialy. 

Anyways, have a good one guys.


Micheal

From parrt at cs.usfca.edu  Thu Dec 15 08:46:04 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec 15 08:46:05 2005
Subject: [antlr-interest] Re: tree parser generating templates
In-Reply-To: <dd3a065f0512150239g641e831haa30797d7512a6fa@mail.gmail.com>
References: <4921CEC1-A8DB-4F6B-A5B6-085BB28D0A8C@arizona-software.ch>
	<20051215003123.jdo368ki040sgcc8@webmail.iro.umontreal.ca>
	<1134625987.8429.3.camel@localhost.localdomain>
	<dd3a065f0512150239g641e831haa30797d7512a6fa@mail.gmail.com>
Message-ID: <25AEE3E6-FA9B-45D5-AAD0-6320C7A77F2A@cs.usfca.edu>


On Dec 15, 2005, at 2:39 AM, Bryan Ewbank wrote:

> Sohail,
>
> Can you please elaborate?  I don't think I understand what you mean;
> if I do, I don't see how it would be done.
>
> How would you use a TreeParser to /generate/ a StringTemplate?

In v2, you just manually request a template for, say, assignment and  
stuff it with values.  Either return or spit out that template's  
output.  In v3, it's a bit easier but the same process:

tree grammar T;
options { output=template; }
...
assign : ID '=' expr -> assigntemplate(lhs={$ID.text}, rhs= 
{$expr.template}) ;

In this case, assign returns a template.  [actually, the $ID.text is  
broken in the tree parser for v3 at the moment, but that is my  
intention].  The assigntemplate is defined somewhere in a group file.

Ter
From rodney at mfoundry.com  Thu Dec 15 08:46:21 2005
From: rodney at mfoundry.com (Rodney Aiglstorfer)
Date: Thu Dec 15 08:46:24 2005
Subject: [antlr-interest] ANTLR needs and animal book
Message-ID: <D1CD9357-25FF-4D12-9FB6-B829169FDBBF@mfoundry.com>

Hello all,

I am new to ANTLR but am already deriving a ton of benefit from the  
tool.  The one question I have is why hasn't anyone published a book  
on ANTLR with, say O'reilly?  I recently did an analysis into what my  
options where and let me say that ANTLR is by far the best  
solution ... a book would simply be the final touch to formalizing it  
as a legitimate technology for the masses.

</thought>

Rodney Aiglstorfer

---------------------------------------------
Rodney Aiglstorfer   Co-Founder and CTO
p 415.887.1014   m 415.465.2412   y! raiglstorfer
web http://www.mfoundry.com
blog http://www.mobuser.com


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051215/0e0484d6/attachment-0001.html
From parrt at cs.usfca.edu  Thu Dec 15 08:52:10 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec 15 08:52:12 2005
Subject: [antlr-interest] ANTLR needs and animal book
In-Reply-To: <D1CD9357-25FF-4D12-9FB6-B829169FDBBF@mfoundry.com>
References: <D1CD9357-25FF-4D12-9FB6-B829169FDBBF@mfoundry.com>
Message-ID: <0B393C7D-B0F8-40B5-A271-AEA949A65A48@cs.usfca.edu>


On Dec 15, 2005, at 8:46 AM, Rodney Aiglstorfer wrote:

> Hello all,
>
> I am new to ANTLR but am already deriving a ton of benefit from the  
> tool.  The one question I have is why hasn't anyone published a  
> book on ANTLR with, say O'reilly?  I recently did an analysis into  
> what my options where and let me say that ANTLR is by far the best  
> solution ... a book would simply be the final touch to formalizing  
> it as a legitimate technology for the masses.

Hi Rodney,

I plan on doing one as soon as I finish v3; got to get some academic  
papers out this next year too :(

Ter

From duboimat at iro.umontreal.ca  Thu Dec 15 10:24:34 2005
From: duboimat at iro.umontreal.ca (duboimat@iro.umontreal.ca)
Date: Thu Dec 15 10:24:38 2005
Subject: [antlr-interest] Re: tree parser generating templates
In-Reply-To: <25AEE3E6-FA9B-45D5-AAD0-6320C7A77F2A@cs.usfca.edu>
References: <4921CEC1-A8DB-4F6B-A5B6-085BB28D0A8C@arizona-software.ch>
	<20051215003123.jdo368ki040sgcc8@webmail.iro.umontreal.ca>
	<1134625987.8429.3.camel@localhost.localdomain>
	<dd3a065f0512150239g641e831haa30797d7512a6fa@mail.gmail.com>
	<25AEE3E6-FA9B-45D5-AAD0-6320C7A77F2A@cs.usfca.edu>
Message-ID: <20051215132434.m7dclxsruokssck8@webmail.iro.umontreal.ca>

>
> On Dec 15, 2005, at 2:39 AM, Bryan Ewbank wrote:
>
>> Sohail,
>>
>> Can you please elaborate?  I don't think I understand what you mean;
>> if I do, I don't see how it would be done.
>>
>> How would you use a TreeParser to /generate/ a StringTemplate?
>
> In v2, you just manually request a template for, say, assignment and  
> stuff it with values.  Either return or spit out that template's  
> output.  In v3, it's a bit easier but the same process:
>
> tree grammar T;
> options { output=template; }
> ...
> assign : ID '=' expr -> assigntemplate(lhs={$ID.text}, rhs= 
> {$expr.template}) ;
>
> In this case, assign returns a template.  [actually, the $ID.text is  
> broken in the tree parser for v3 at the moment, but that is my  
> intention].  The assigntemplate is defined somewhere in a group file.
>
> Ter
>
In v2, i have tried to manually request a template like

program : #( PROGRAM( block )+
		 {
	program_st.setAttribute("header","My header");
		...

block :	#( BLOCK( thread )+

  	       	{
		StringTemplate t= printmodele("module");
		program_st.setAttribute("module",t);
		thread_st.reset();
		}

and I have a init function

class LangWalker extends TreeParser;
{
StringTemplateGroup group; TextReader str;
StringTemplate program_st,header_st,block_st,thread_st,
assign_st,plus_st,moins_st,div_st,star_st;
StringTemplate code;

public void init()
	{
	str = new StreamReader("program.st");
	group= new StringTemplateGroup(str);
        ...

To build the program I have to put a template into another one.
if i build lines I have to regroup it to build a block .

It work only when i use st for a subset of the program . I can't regroup all
subset to built a program without having repetition from another subset with a
new value. May be a need to reset the template with its value.

Is there another to do a manually request in v2?

mat



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

From andy at exchange.voelkel.us  Thu Dec 15 10:27:06 2005
From: andy at exchange.voelkel.us (Andy Voelkel)
Date: Thu Dec 15 10:27:18 2005
Subject: [antlr-interest] ANTLR needs and animal book
Message-ID: <7AE2E53336B37440A20C9590DB11BCB9D131EE@EXVS01.ex.dslextreme.net>


>> Hello all,
>>
>> I am new to ANTLR but am already deriving a ton of benefit from the  
>> tool.  The one question I have is why hasn't anyone published a  
>> book on ANTLR with, say O'reilly?  I recently did an analysis into  
>> what my options where and let me say that ANTLR is by far the best  
>> solution ... a book would simply be the final touch to formalizing  
>> it as a legitimate technology for the masses.
>
>Hi Rodney,
>
>I plan on doing one as soon as I finish v3; got to get some academic  
>papers out this next year too :(
>
>Ter

That is a really great idea! I'm glad to hear it. Do you have a
publisher?
- Andy
From parrt at cs.usfca.edu  Thu Dec 15 10:31:03 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec 15 10:31:05 2005
Subject: [antlr-interest] ANTLR needs and animal book
In-Reply-To: <7AE2E53336B37440A20C9590DB11BCB9D131EE@EXVS01.ex.dslextreme.net>
References: <7AE2E53336B37440A20C9590DB11BCB9D131EE@EXVS01.ex.dslextreme.net>
Message-ID: <8AABCF68-502E-49B0-8E83-A8041E769CE1@cs.usfca.edu>


On Dec 15, 2005, at 10:27 AM, Andy Voelkel wrote:
> That is a really great idea! I'm glad to hear it. Do you have a
> publisher?

Nope...i assumed O'Reilly was the proper answer though I've been  
contacted by others I'd consider if oreilly refused for some strange  
reason...or if they gave me a less good deal ;)

Ter
From parrt at cs.usfca.edu  Thu Dec 15 10:32:41 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec 15 10:32:42 2005
Subject: [antlr-interest] Re: tree parser generating templates
In-Reply-To: <20051215132434.m7dclxsruokssck8@webmail.iro.umontreal.ca>
References: <4921CEC1-A8DB-4F6B-A5B6-085BB28D0A8C@arizona-software.ch>
	<20051215003123.jdo368ki040sgcc8@webmail.iro.umontreal.ca>
	<1134625987.8429.3.camel@localhost.localdomain>
	<dd3a065f0512150239g641e831haa30797d7512a6fa@mail.gmail.com>
	<25AEE3E6-FA9B-45D5-AAD0-6320C7A77F2A@cs.usfca.edu>
	<20051215132434.m7dclxsruokssck8@webmail.iro.umontreal.ca>
Message-ID: <8E6D0D28-D6DD-4834-AC7A-B8E8C3189A9C@cs.usfca.edu>


On Dec 15, 2005, at 10:24 AM, duboimat@iro.umontreal.ca wrote:
> class LangWalker extends TreeParser;
> {
> StringTemplateGroup group; TextReader str;
> StringTemplate program_st,header_st,block_st,thread_st,
> assign_st,plus_st,moins_st,div_st,star_st;
> StringTemplate code;
>
> public void init()
> 	{
> 	str = new StreamReader("program.st");
> 	group= new StringTemplateGroup(str);

Ok, first thing:use a group file format and StringTemplateGroup.  See  
the article I have up on using ANTLR+ST.

>        ...
>
> To build the program I have to put a template into another one.
> if i build lines I have to regroup it to build a block .
>
> It work only when i use st for a subset of the program . I can't  
> regroup all
> subset to built a program without having repetition from another  
> subset with a
> new value. May be a need to reset the template with its value.

I have that functionality but I've never once used it...

> Is there another to do a manually request in v2?

see the article :)

Ter
From duboimat at iro.umontreal.ca  Thu Dec 15 11:01:27 2005
From: duboimat at iro.umontreal.ca (duboimat@iro.umontreal.ca)
Date: Thu Dec 15 11:01:30 2005
Subject: [antlr-interest] Re: tree parser generating templates
In-Reply-To: <8E6D0D28-D6DD-4834-AC7A-B8E8C3189A9C@cs.usfca.edu>
References: <4921CEC1-A8DB-4F6B-A5B6-085BB28D0A8C@arizona-software.ch>
	<20051215003123.jdo368ki040sgcc8@webmail.iro.umontreal.ca>
	<1134625987.8429.3.camel@localhost.localdomain>
	<dd3a065f0512150239g641e831haa30797d7512a6fa@mail.gmail.com>
	<25AEE3E6-FA9B-45D5-AAD0-6320C7A77F2A@cs.usfca.edu>
	<20051215132434.m7dclxsruokssck8@webmail.iro.umontreal.ca>
	<8E6D0D28-D6DD-4834-AC7A-B8E8C3189A9C@cs.usfca.edu>
Message-ID: <20051215140127.050j3z4bw4gowsww@webmail.iro.umontreal.ca>


>
> On Dec 15, 2005, at 10:24 AM, duboimat@iro.umontreal.ca wrote:
>> class LangWalker extends TreeParser;
>> {
>> StringTemplateGroup group; TextReader str;
>> StringTemplate program_st,header_st,block_st,thread_st,
>> assign_st,plus_st,moins_st,div_st,star_st;
>> StringTemplate code;
>>
>> public void init()
>> 	{
>> 	str = new StreamReader("program.st");
>> 	group= new StringTemplateGroup(str);
>
> Ok, first thing:use a group file format and StringTemplateGroup.  See 
>  the article I have up on using ANTLR+ST.
>
>>        ...
>>
>> To build the program I have to put a template into another one.
>> if i build lines I have to regroup it to build a block .
>>
>> It work only when i use st for a subset of the program . I can't  
>> regroup all
>> subset to built a program without having repetition from another  
>> subset with a
>> new value. May be a need to reset the template with its value.
>
> I have that functionality but I've never once used it...
>
>> Is there another to do a manually request in v2?
>
> see the article :)
>
> Ter
>
I have seen this article
Language Translation Using ANTLR and StringTemplate
I have begun my project with this article

my group file is included in program.st file.
In my program.st

group sim;
program(header,block) ::=<< Created by $header$   Program: $block$ >>
header()::=<<header>>
block(thread) ::=<< Block: $thread$ >>
thread(statement) ::= <<Thread : >>
...
assign(lhs,rhs) ::= << $lhs$ = $rhs$; >>
plus(lhs,rhs) ::= << $lhs$ + $rhs$ >>
moins(lhs,rhs) ::= << $lhs$ - $rhs$ >>
div(lhs,rhs) ::= << $lhs$ / $rhs$ >>
star(lhs,rhs) ::= << $lhs$ * $rhs$ >>

In my example , the program is composed of block, the block is composed of
thread , the thread is composed of statement ...

The article doesn't show how to use antlr + st with tree.
if I call template from tree parser class
like
        code = template("variable");        }
        code.setAttribute("type", t);
        code.setAttribute("name", d);

String template will not regroup all template together with its value to get a
final code.

mat




----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

From antlr-list at arizona-software.ch  Thu Dec 15 11:28:39 2005
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Thu Dec 15 11:28:50 2005
Subject: [antlr-interest] ANTLRWorks 1.0ea6 released!
In-Reply-To: <43A13F65.5030801@essware.com>
References: <4921CEC1-A8DB-4F6B-A5B6-085BB28D0A8C@arizona-software.ch>
	<43A13F65.5030801@essware.com>
Message-ID: <6452EDB3-7253-4EA1-A0C0-F37B4A686D1C@arizona-software.ch>

Oops.. there is a problem on my side. Let me just find out what's  
going on on my Windows box and I will post a new release with a fix.

Thanks for the report!

Jean

Le 15 d?c. 05 ? 02:03, Liu Detang a ?crit :

> Hi All,
>
> Does anybody have the following error while launching  
> antlrworks-1.0ea6.jar on Windows XP?  Please refer to the attached  
> capture.
>
> C:\Mydownload\ANTLR>echo %CLASSPATH%
> %ANTLR_HOME%\lib\antlr-3.0ea1.jar;%ANTLR_HOME%\lib\antlr-2.7.5.jar;% 
> ANTLR_HOME%\
> lib\stringtemplate-2.2b1.jar
>
> C:\Mydownload\ANTLR>java -version
> java version "1.4.2_04"
> Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_04-b05)
> Java HotSpot(TM) Client VM (build 1.4.2_04-b05, mixed mode)
>
> C:\Mydownload\ANTLR>java -jar antlrworks-1.0ea6.jar
> java.io.FileNotFoundException: \tmp\redirect.err =-O (The system  
> cannot find the pat
> h specified)
>         at java.io.FileOutputStream.open(Native Method)
>         at java.io.FileOutputStream.<init>(FileOutputStream.java:179)
>         at java.io.FileOutputStream.<init>(FileOutputStream.java:70)
>         at org.antlr.works.IDE.checkEnvironment(IDE.java:162)
>         at org.antlr.works.IDE.appDidLaunch(IDE.java:99)
>         at edu.usfca.xj.appkit.app.XJApplication$1.run 
> (XJApplication.java:159)
>         at java.awt.event.InvocationEvent.dispatch 
> (InvocationEvent.java:178)
>         at java.awt.EventQueue.dispatchEvent(EventQueue.java:454)
>         at java.awt.EventDispatchThread.pumpOneEventForHierarchy 
> (EventDispatchTh
> read.java:201)
>         at java.awt.EventDispatchThread.pumpEventsForHierarchy 
> (EventDispatchThre
> ad.java:151)
>         at java.awt.EventDispatchThread.pumpEvents 
> (EventDispatchThread.java:145)
>
>         at java.awt.EventDispatchThread.pumpEvents 
> (EventDispatchThread.java:137)
>
>         at java.awt.EventDispatchThread.run 
> (EventDispatchThread.java:100)
>
> Jean Bovet wrote:
>> Hello!
>>
>> ANTLRWorks 1.0ea6 is now available at this URL:
>>
>> http://www.antlr.org/works/index.html
>>
>> This version fixes and improves several things. I would like to  
>> emphasis some new features:
>> - new graphical representation of the parse tree (both in  
>> interpreter and debugger) that can be also exported to eps
>> - click on an input token in debugger selects the corresponding  
>> token in the grammar and in the parse tree
>> - breakpoints in the input text and in the grammar (the latest  
>> wasn't working correctly)
>> - refactoring feature to convert literals to/from single/double/c- 
>> style quote
>> - and much more
>>
>> The ANTLRWorks jar has everything you need including the latest  
>> version of ANTLR 3.0ea7 and StringTemplate 2.3b4.
>>
>> Mac OS X users can now download a special bundled version of  
>> ANTLRWorks: this version has a proper icon in the dock and allow  
>> the drag and drop of files into ANTLRWorks (like any good Mac OS X  
>> application).
>>
>> The web page has been also updated with new images and a new video  
>> of the debugger in action (including the new graphical parse tree  
>> representation).
>>
>> Enjoy this new release!
>>
>> Jean Bovet
>>
>>
>> *** History ***
>>
>> Version 1.0ea6 - 12/14/05
>>
>> - new: graphical representation of the parse tree (interpreter and  
>> debugger) that can also be exported to bitmap or eps
>> - new: show artificial Tokens rule
>> - new: click on an input token (debugger) selects the  
>> corresponding token in the grammar and in the parse tree
>> - new: breakpoints in input text (right-click to toggle the  
>> breakpoint on any tokens)
>> - new: breakpoints in grammar now works (click in the editor  
>> gutter to enable/disable them)
>> - new: convert literal quote refactoring tools (to single, to  
>> double or c-style quote)
>> - new: now available as a bundle for Mac OS X (can now drag a  
>> grammar file to its icon in the dock)
>> - new: handle now the tokenVocab options
>>
>> - improved debugger: display the event where the debugger stopped at
>> - improved decision DFA: vectorial representation where states can  
>> be moved using the mouse
>> - improved decision DFA: exportable to EPS and bitmap image
>> - improved export to EPS: file size has been reduced by up to 1/2  
>> of the previous generated size
>> - improved show generated code: automatically generate the code if  
>> needed
>> - improved: auto-scrolling when following ambiguous paths in  
>> syntax diagram
>> - improved: smooth scrolling when jumping to rule in the grammar
>>
>> - move caret to decision location when displaying DFA decision
>> - rules list can be sorted (group are not sorted)
>> - can open the file using Perforce automatically when saving it if  
>> it was closed
>>
>> - debugger input text is now saved and restored in preferences
>> - improved caret visibility with wider caret in grammar text
>>
>> - improved message redirection to editor console
>> - improved debugger token outline when a token spans on multiple  
>> lines
>> - improved underlying menu update system
>> - report a message if ANTLR installation is corrupted
>>
> <antlrworks-error.JPG>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051215/9ac79922/attachment-0001.html
From antlr-list at arizona-software.ch  Thu Dec 15 12:24:32 2005
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Thu Dec 15 12:24:40 2005
Subject: [antlr-interest] ANTLRWorks 1.0ea7 released (fix for Windows)
Message-ID: <15640D5E-C71A-4ACF-A5E5-9B6EEB3B2554@arizona-software.ch>

Hello!

ANTLRWorks 1.0ea7 is now available at this URL:

http://www.antlr.org/works/index.html

It should now launch properly on Windows machine. Please let me know  
if you have any problem (send me the stack trace from the console if  
appropriate).

Thanks!

Jean

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051215/084657f0/attachment.html
From kroepke at dolphin-services.de  Thu Dec 15 16:50:13 2005
From: kroepke at dolphin-services.de (Kay Roepke)
Date: Thu Dec 15 16:50:20 2005
Subject: [antlr-interest] ANTLRWorks hiccup?
Message-ID: <D4671948-003D-4469-A399-2DF21472F0AC@dolphin-services.de>

Excuse if I'm being stupid, too tired, or just plain blind, but  
shouldn't this be a valid lexer grammar:

------
lexer grammar Lexer;

START	:	ID WS+ ID
	;

ID  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
     ;

WS	:	(' ' | '\t' | '\n' | '\r')
	;


-----

ANTLRWorks keeps telling me that it can't show the DFA/NFA diagram  
for the rules, because there's no start rule to be found.
This is certainly not the case, and ANTLR happily produces a lexer  
for me.
Manually deleting the "lexer" part from the first line and then  
typing it again fixes the issue?!?

The generated source (by ANTLR) seems to be ok to me...

puzzled,

Kay
From antlr-list at arizona-software.ch  Thu Dec 15 17:01:38 2005
From: antlr-list at arizona-software.ch (Jean Bovet)
Date: Thu Dec 15 17:01:44 2005
Subject: [antlr-interest] ANTLRWorks hiccup?
In-Reply-To: <D4671948-003D-4469-A399-2DF21472F0AC@dolphin-services.de>
References: <D4671948-003D-4469-A399-2DF21472F0AC@dolphin-services.de>
Message-ID: <411CFD9B-2AB8-40A5-B827-E3403D4B196B@arizona-software.ch>

No, you are not blind... it is just that ANTLRWorks is doesn't fully  
handle pure lexer/parser/tree grammar (removing the lexer transform  
the grammar to a "combined" grammar that is currently correctly  
handled by ANTLRWorks). Note that ANTLRWorks will also report some  
syntax errors if you are using some rewrite or tree syntax (which  
doesn't prevent all the other features to work well - it's only  
esthetic).

Most of these issues will be fixed in the next release (I will  
working more on pure lexer/parser grammar in the following weeks).

Thanks for reporting the problem.

Jean Bovet

Le 15 d?c. 05 ? 16:50, Kay Roepke a ?crit :

> Excuse if I'm being stupid, too tired, or just plain blind, but  
> shouldn't this be a valid lexer grammar:
>
> ------
> lexer grammar Lexer;
>
> START	:	ID WS+ ID
> 	;
>
> ID  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
>     ;
>
> WS	:	(' ' | '\t' | '\n' | '\r')
> 	;
>
>
> -----
>
> ANTLRWorks keeps telling me that it can't show the DFA/NFA diagram  
> for the rules, because there's no start rule to be found.
> This is certainly not the case, and ANTLR happily produces a lexer  
> for me.
> Manually deleting the "lexer" part from the first line and then  
> typing it again fixes the issue?!?
>
> The generated source (by ANTLR) seems to be ok to me...
>
> puzzled,
>
> Kay

From sohail at taggedtype.net  Thu Dec 15 23:55:52 2005
From: sohail at taggedtype.net (Sohail Somani)
Date: Thu Dec 15 23:56:00 2005
Subject: [antlr-interest] Re: tree parser generating templates
In-Reply-To: <20051215140127.050j3z4bw4gowsww@webmail.iro.umontreal.ca>
References: <4921CEC1-A8DB-4F6B-A5B6-085BB28D0A8C@arizona-software.ch>
	<20051215003123.jdo368ki040sgcc8@webmail.iro.umontreal.ca>
	<1134625987.8429.3.camel@localhost.localdomain>
	<dd3a065f0512150239g641e831haa30797d7512a6fa@mail.gmail.com>
	<25AEE3E6-FA9B-45D5-AAD0-6320C7A77F2A@cs.usfca.edu>
	<20051215132434.m7dclxsruokssck8@webmail.iro.umontreal.ca>
	<8E6D0D28-D6DD-4834-AC7A-B8E8C3189A9C@cs.usfca.edu>
	<20051215140127.050j3z4bw4gowsww@webmail.iro.umontreal.ca>
Message-ID: <1134719752.7972.5.camel@localhost.localdomain>

On Thu, 2005-12-15 at 14:01 -0500, duboimat@iro.umontreal.ca wrote:
> >
> > On Dec 15, 2005, at 10:24 AM, duboimat@iro.umontreal.ca wrote:
> >> class LangWalker extends TreeParser;
> >> {
> >> StringTemplateGroup group; TextReader str;
> >> StringTemplate program_st,header_st,block_st,thread_st,
> >> assign_st,plus_st,moins_st,div_st,star_st;
> >> StringTemplate code;
> >>
> >> public void init()
> >> 	{
> >> 	str = new StreamReader("program.st");
> >> 	group= new StringTemplateGroup(str);
> >
> > Ok, first thing:use a group file format and StringTemplateGroup.  See 
> >  the article I have up on using ANTLR+ST.
> >
> >>        ...
> >>
> >> To build the program I have to put a template into another one.
> >> if i build lines I have to regroup it to build a block .
> >>
> >> It work only when i use st for a subset of the program . I can't  
> >> regroup all
> >> subset to built a program without having repetition from another  
> >> subset with a
> >> new value. May be a need to reset the template with its value.
> >
> > I have that functionality but I've never once used it...
> >
> >> Is there another to do a manually request in v2?
> >
> > see the article :)
> >
> > Ter
> >
> I have seen this article
> Language Translation Using ANTLR and StringTemplate
> I have begun my project with this article
> 
> my group file is included in program.st file.
> In my program.st
> 
> group sim;
> program(header,block) ::=<< Created by $header$   Program: $block$ >>
> header()::=<<header>>
> block(thread) ::=<< Block: $thread$ >>
> thread(statement) ::= <<Thread : >>
> ...
> assign(lhs,rhs) ::= << $lhs$ = $rhs$; >>
> plus(lhs,rhs) ::= << $lhs$ + $rhs$ >>
> moins(lhs,rhs) ::= << $lhs$ - $rhs$ >>
> div(lhs,rhs) ::= << $lhs$ / $rhs$ >>
> star(lhs,rhs) ::= << $lhs$ * $rhs$ >>
> 
> In my example , the program is composed of block, the block is composed of
> thread , the thread is composed of statement ...
> 
> The article doesn't show how to use antlr + st with tree.
> if I call template from tree parser class
> like
>         code = template("variable");        }
>         code.setAttribute("type", t);
>         code.setAttribute("name", d);
> 
> String template will not regroup all template together with its value to get a
> final code.

You have to do something like:

class StringTemplateGenerator extends SomeParser;

myTreeRule[returns StringTemplate ret=template("my_language_element");]
	: ... {ret.setAttribute("my_attribute",some_value);}
	;

then in the driver:

StringTemplateGenerator stgen = new StringTemplateGenerator(...);

StringTemplate result = stgen.myTreeRule();
System.out.println(result);

This is the way I would've liked to have done it, but I did it like the
article told me to and did it in the parser.

Oh well, I'll fix it in my 0.2 release :)

Sohail

From sohail at taggedtype.net  Fri Dec 16 00:14:12 2005
From: sohail at taggedtype.net (Sohail Somani)
Date: Fri Dec 16 00:14:20 2005
Subject: [antlr-interest] antlr suitable for xml languages? (like bpel
	and are there existing grammaires)
In-Reply-To: <1134637713.8448.12.camel@localhost.localdomain>
References: <581013691@web.de> <1134614330.7654.6.camel@localhost.localdomain>
	<1134637713.8448.12.camel@localhost.localdomain>
Message-ID: <1134720853.7972.9.camel@localhost.localdomain>

On Thu, 2005-12-15 at 10:08 +0100, Martin Probst wrote:
> > Quite honestly I am surprised Java libraries don't take more advantage
> > of its introspection abilities. 
> 
> Well, because reflection at least used to be really slow (it's better
> now afaik) and the Java way is static typing, not dynamic fiddling at
> runtime. These dynamic projects might be nice for the quick small
> project, but for really big stuff static typing and (more or less)
> rigorous structures are a pro.

I'm not going to turn this into a static vs dynamic typing issue, I'm
not :X!

I agree that it would probably not be all that useful for larger
projects. I just don't think that traditional XML parsers should be
allowed to live anymore :)

> > A library like this allows you to basically define the DTD in code as
> > well as giving you a set of "strongly typed" classes that you can use to
> > manipulate the XML (all with one declaration of course).
> 
> Well, you can do that at compile time with tools like XML Beans in Java.
> Why would you want to do something like that at runtime?

I will do some research on this. Thanks! Although thedailywtf.com tells
me Beans in Java go well with Access databases linked through Word
documents (or something like that).

Sohail

From ric.klaren at gmail.com  Fri Dec 16 03:55:41 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Fri Dec 16 03:55:45 2005
Subject: [antlr-interest] Problem about C++ runtime model compiled by
	pathscale compiler under redhat(x86-
In-Reply-To: <BAY104-F262587847D2A2F66539CEE84450@phx.gbl>
References: <BAY104-F262587847D2A2F66539CEE84450@phx.gbl>
Message-ID: <bc607a4e0512160355p2671bb83n6d63cc612c81ecc1@mail.gmail.com>

Hi,

On 12/9/05, Lin Teng <linteng118@hotmail.com> wrote:
>   I try to post this message to antlr-interest but get rejected by some
> unknown
> reason. I run into a problem in c++ run time model, hope I can get some help
> from you.
>   I attemp to get antlr-2.7.5 to compiler my grammer. It is perfectly
> compiled
> by pathscale compiler (2.1.99) under Redhat (AMD Opertron). Unfortanetly,
> every
> time below message will be thrown,
> terminate called after throwing an instance of
> 'antlr::NoViableAltForCharException'

Could it be that the pathscale compiler does not have exception
support enabled by default? You can quickly test this by compiling a
small program with a dummy try { throw } catch { }. Or check the
documentation of the compiler if extra options are needed to enable
exception support.

Cheers,

Ric
From atripp at jazillian.com  Fri Dec 16 06:15:47 2005
From: atripp at jazillian.com (Andy Tripp)
Date: Fri Dec 16 06:17:52 2005
Subject: [antlr-interest] Jazillian C to Java translator
Message-ID: <43A2CC13.1040906@jazillian.com>

Hi guys,

Thanks for your interest in Jazillian.
This page: http://www.jazillian.com/does.html gives a flavor for what it 
does, at a high level.
This page: http://www.jazillian.com/how.html gives a fairly complete 
list of the various transformation
rules.

As for a design/implementation document, I don't have a complete one yet 
so I'll try to explain a bit here.
I apply a series of about 150 transformation rules. Each rule consists 
of a match() method that
does a pattern match, and an apply() with does the transformation. For 
example, the PrintfRule.match()
method just looks for a "printf" token, and the PrintfRule.apply() 
method replaces all the tokens in the
printf statement with tokens for an equivalent Java System.out.println() 
call.

I have a full class hierarchy of rules. At the top are various abstract 
classes, but also things like
FileRenameRule, which just renames files to match Java naming 
conventions. At the bottom of the
rule hierarchy are things like SnippetsRule, which reads a file 
containing simple text transformation rules like:

NULL --> 0   // replace NULL with 0
unsigned -->         // Java has no unsigned keyword, just delete it
v1 = sizeof v2 / sizeof (char *); --> v1 = v2.length;  // just one of 
many ways to get string length in C

Note that the pattern matcher allows placeholders such as "v1" and "v2" 
above, for which any variable
can be matched. There is also an "x" placeholder which will match anything:
if (false) { x } -->      // just delete any code that will never get used.

In addition to the 150 rules written in Java, there are hundreds of 
these simple pattern-match-and-replace rules.
All of this is done with streams of tokens on a set of C files. I have 
built a library of various functions for
working with these token streams for:

matching patterns and doing replacements, inserts, deletes, moves
symbol table stuff: finding variable declarations, types, references, etc.
All the stuff I would have gotten for free if I where doing the 
traditional tree-transform approach: function scopes,
 start and end of variables and statements, etc

I did pay a heavy price to implement my transformations on token streams 
rather than ASTs, but I am still happy
with the result. For example, I have an elaborate isDeclaration() method 
that tries to figure out if a given token is
a variable or function declaration by examining nearby tokens. The 
payoff is that I can simply write hundreds of
rules like the ones above without having to think about ASTs.

My GotoRemoverRule is just an implementation of one of the well-known 
goto removal algorithms, adopted to use
my library of token-stream functions. I handle preprocessor stuff by 
cheating: I've added rules to Monty's
cgram grammar to handle cpp constructs, but only when they appear where 
people usually put them. In this way,
I can be smart and make the same changes a human would do (as opposed to 
forcing a user to run cpp before running
Jazillian). So I can make changes like:
#define X 1    becomes   public final static int X = 1;
#define f(x) x+1   becomes  static int f(int x) { return x+1}

(This sharp crowd is now shaking their collective head. "How do you even 
know that x is an int? This
macro works on any type!" Answer: I looked at every reference of x. "But 
what if you weren't so lucky
and  you need a "float" version of f? Answer: I'm doing the best I can. 
I either handle that today, or
will get to it soon :)

C structs, unions, and enums become their own Java classes. I generate 
Java 1.4 code - not generating
any 1.5 stuff (like enums) yet. I do no magical "make it object 
oriented" tricks: each C file becomes a Java
class. And I generate the code that a human would generate. For example:
printf("i=%d  s=%s\n");   becomes System.out.println("i=" + i + " s=" + s);
(i.e. I see that you're ending with a newline, and so calling println. I 
will never generate a Java printf call.
That would work, but it's not what a real person would do).

Pointers are the toughest issue. I basically analyze all pointer usage, 
looking for the three most common
usages of pointers:
As an array index (in which case, I change the pointer to a Java int, 
and make the pointee an array
As some sort of pointer-based data structure (linked list, tree, 
whatever), which requires just minor syntax changes
As a way of doing pass-by-reference

I use ANTLR for all C lexing. The only place I use ANTLR for parsing and 
AST generation is for handling
expressions. Java's boolean type is required in certain places, where C 
programs use an int because
there's no built-in boolean type. So when we have "if (x)", I really 
have no choice other than to go ahead
and build an AST from "x" (which could be a large, complex expression), 
and then walk thru the AST
replacing various "int" nodes with "boolean" ones.

I guess that's it off the top of my head. I'll be happy to give more 
specifics if you have questions.
I'm currently working on a C++ version. I'm proud still have much of my 
sanity left after trying to map
templates to generics. That's not to say that I'm ever going to get it 
to work, but I see keeping my sanity
as a big plus :)

Andy
From inshua at gmail.com  Fri Dec 16 06:24:42 2005
From: inshua at gmail.com (=?GB2312?B?0MLC8g==?=)
Date: Fri Dec 16 06:24:44 2005
Subject: [antlr-interest] Jazillian C to Java translator
In-Reply-To: <43A2CC13.1040906@jazillian.com>
References: <43A2CC13.1040906@jazillian.com>
Message-ID: <2506dcb70512160624i27c49945n@mail.gmail.com>

Hi , Andy

it's a great work you make, very nice.

I'm doing similiar work, .... may you spend some time to make a demo of
translating for newer? such as me. :)

a simple demo as translating

1+1

to

1 add 1

thank you very much~~

2005/12/16, Andy Tripp <atripp@jazillian.com>:
>
> Hi guys,
>
> Thanks for your interest in Jazillian.
> This page: http://www.jazillian.com/does.html gives a flavor for what it
> does, at a high level.
> This page: http://www.jazillian.com/how.html gives a fairly complete
> list of the various transformation
> rules.
>
> As for a design/implementation document, I don't have a complete one yet
> so I'll try to explain a bit here.
> I apply a series of about 150 transformation rules. Each rule consists
> of a match() method that
> does a pattern match, and an apply() with does the transformation. For
> example, the PrintfRule.match()
> method just looks for a "printf" token, and the PrintfRule.apply()
> method replaces all the tokens in the
> printf statement with tokens for an equivalent Java System.out.println()
> call.
>
> I have a full class hierarchy of rules. At the top are various abstract
> classes, but also things like
> FileRenameRule, which just renames files to match Java naming
> conventions. At the bottom of the
> rule hierarchy are things like SnippetsRule, which reads a file
> containing simple text transformation rules like:
>
> NULL --> 0   // replace NULL with 0
> unsigned -->         // Java has no unsigned keyword, just delete it
> v1 = sizeof v2 / sizeof (char *); --> v1 = v2.length;  // just one of
> many ways to get string length in C
>
> Note that the pattern matcher allows placeholders such as "v1" and "v2"
> above, for which any variable
> can be matched. There is also an "x" placeholder which will match
> anything:
> if (false) { x } -->      // just delete any code that will never get
> used.
>
> In addition to the 150 rules written in Java, there are hundreds of
> these simple pattern-match-and-replace rules.
> All of this is done with streams of tokens on a set of C files. I have
> built a library of various functions for
> working with these token streams for:
>
> matching patterns and doing replacements, inserts, deletes, moves
> symbol table stuff: finding variable declarations, types, references, etc.
> All the stuff I would have gotten for free if I where doing the
> traditional tree-transform approach: function scopes,
> start and end of variables and statements, etc
>
> I did pay a heavy price to implement my transformations on token streams
> rather than ASTs, but I am still happy
> with the result. For example, I have an elaborate isDeclaration() method
> that tries to figure out if a given token is
> a variable or function declaration by examining nearby tokens. The
> payoff is that I can simply write hundreds of
> rules like the ones above without having to think about ASTs.
>
> My GotoRemoverRule is just an implementation of one of the well-known
> goto removal algorithms, adopted to use
> my library of token-stream functions. I handle preprocessor stuff by
> cheating: I've added rules to Monty's
> cgram grammar to handle cpp constructs, but only when they appear where
> people usually put them. In this way,
> I can be smart and make the same changes a human would do (as opposed to
> forcing a user to run cpp before running
> Jazillian). So I can make changes like:
> #define X 1    becomes   public final static int X = 1;
> #define f(x) x+1   becomes  static int f(int x) { return x+1}
>
> (This sharp crowd is now shaking their collective head. "How do you even
> know that x is an int? This
> macro works on any type!" Answer: I looked at every reference of x. "But
> what if you weren't so lucky
> and  you need a "float" version of f? Answer: I'm doing the best I can.
> I either handle that today, or
> will get to it soon :)
>
> C structs, unions, and enums become their own Java classes. I generate
> Java 1.4 code - not generating
> any 1.5 stuff (like enums) yet. I do no magical "make it object
> oriented" tricks: each C file becomes a Java
> class. And I generate the code that a human would generate. For example:
> printf("i=%d  s=%s\n");   becomes System.out.println("i=" + i + " s=" +
> s);
> (i.e. I see that you're ending with a newline, and so calling println. I
> will never generate a Java printf call.
> That would work, but it's not what a real person would do).
>
> Pointers are the toughest issue. I basically analyze all pointer usage,
> looking for the three most common
> usages of pointers:
> As an array index (in which case, I change the pointer to a Java int,
> and make the pointee an array
> As some sort of pointer-based data structure (linked list, tree,
> whatever), which requires just minor syntax changes
> As a way of doing pass-by-reference
>
> I use ANTLR for all C lexing. The only place I use ANTLR for parsing and
> AST generation is for handling
> expressions. Java's boolean type is required in certain places, where C
> programs use an int because
> there's no built-in boolean type. So when we have "if (x)", I really
> have no choice other than to go ahead
> and build an AST from "x" (which could be a large, complex expression),
> and then walk thru the AST
> replacing various "int" nodes with "boolean" ones.
>
> I guess that's it off the top of my head. I'll be happy to give more
> specifics if you have questions.
> I'm currently working on a C++ version. I'm proud still have much of my
> sanity left after trying to map
> templates to generics. That's not to say that I'm ever going to get it
> to work, but I see keeping my sanity
> as a big plus :)
>
> Andy
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051216/557ac7f5/attachment-0001.html
From BBKing at starbridgesystems.com  Fri Dec 16 11:45:32 2005
From: BBKing at starbridgesystems.com (Brannon King)
Date: Fri Dec 16 11:45:19 2005
Subject: [antlr-interest] Please help with arbitrary arrangements and old
	BNF syntax
Message-ID: <4EFE19E52F4F844D997F24D759C4A23BD1C866@etg2.etg.local>

Suppose I have the following parser rule snipped from edif.org:

written :
	LP! "written"
	     timeStamp
	     ( < author > | < program > | < dataOrigin > |
	     property | comment | userData )*
	RP!;

Where the angle brackets mean that those can only appear once (in an
arbitrary order). How do I enforce this in an ANTLR grammar?

In a similar vein, is this the right way to limit an identifier length?

IDENTIFIER
	options {testLiterals=true;} //make sure it's not a built in
function
	:	(ALPHA|'&')	a:('_'|ALPHA|DIGIT)*
{a.getText().length() < 256}? ; //less than 256 chars total

Thanks for your time
From sohail at taggedtype.net  Fri Dec 16 12:14:13 2005
From: sohail at taggedtype.net (sohail@taggedtype.net)
Date: Fri Dec 16 12:14:21 2005
Subject: [antlr-interest] Please help with arbitrary arrangements and 
	old BNF syntax
In-Reply-To: <4EFE19E52F4F844D997F24D759C4A23BD1C866@etg2.etg.local>
References: <4EFE19E52F4F844D997F24D759C4A23BD1C866@etg2.etg.local>
Message-ID: <49677.127.0.0.1.1134764053.squirrel@taggedtype.net>

> Suppose I have the following parser rule snipped from edif.org:
>
> written :
> 	LP! "written"
> 	     timeStamp
> 	     ( < author > | < program > | < dataOrigin > |
> 	     property | comment | userData )*
> 	RP!;
>
> Where the angle brackets mean that those can only appear once (in an
> arbitrary order). How do I enforce this in an ANTLR grammar?

Personally, I don't think this should be done in the parser. You should do
this as part of your semantic analysis (i.e. TreeParser). But thats just
IMHO.

> In a similar vein, is this the right way to limit an identifier length?
>
> IDENTIFIER
> 	options {testLiterals=true;} //make sure it's not a built in
> function
> 	:	(ALPHA|'&')	a:('_'|ALPHA|DIGIT)*
> {a.getText().length() < 256}? ; //less than 256 chars total

Its the easiest isn't it :)
From sohail at taggedtype.net  Fri Dec 16 12:16:49 2005
From: sohail at taggedtype.net (sohail@taggedtype.net)
Date: Fri Dec 16 12:16:58 2005
Subject: [antlr-interest] Please help with arbitrary arrangements and  
	old BNF syntax
In-Reply-To: <49677.127.0.0.1.1134764053.squirrel@taggedtype.net>
References: <4EFE19E52F4F844D997F24D759C4A23BD1C866@etg2.etg.local>
	<49677.127.0.0.1.1134764053.squirrel@taggedtype.net>
Message-ID: <49733.127.0.0.1.1134764209.squirrel@taggedtype.net>

>> Suppose I have the following parser rule snipped from edif.org:
>>
>> written :
>> 	LP! "written"
>> 	     timeStamp
>> 	     ( < author > | < program > | < dataOrigin > |
>> 	     property | comment | userData )*
>> 	RP!;
>>
>> Where the angle brackets mean that those can only appear once (in an
>> arbitrary order). How do I enforce this in an ANTLR grammar?
>
> Personally, I don't think this should be done in the parser. You should do
> this as part of your semantic analysis (i.e. TreeParser). But thats just
> IMHO.

Although, now that I think of it, perhaps you could use booleans and gate
the < author > rule with a semantic predicate like {!seenAuthor}? < author
> {seenAuthor=true;}

Something like this atleast. But then your use won't know exactly why it
failed (I think)
From geiroves at online.no  Fri Dec 16 12:33:03 2005
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Fri Dec 16 12:33:07 2005
Subject: [antlr-interest] Please help with arbitrary arrangements and
	oldBNF syntax
In-Reply-To: <4EFE19E52F4F844D997F24D759C4A23BD1C866@etg2.etg.local>
Message-ID: <000001c6027f$eadb4aa0$0100a8c0@rexii>

Hello,


I haven't tried this, but I am pretty sure the following would do the
trick:
I use a semtic predicates to rule out choices already chosen. Maybe
there are other ways to do this.
I put the code together real fast, so exuse me if there are logical
errors:


written 
	: w1 w2 w3
	;

w1
	:  a:author | p:program | d:dataOrigin w2[a, p, d]
	;

w2[AST a, AST p, AST d]	
	: {a != null}? p1:program | d1:dataOrigin w3[p1, d1]
	| {p != null}? a2:author | d2:dataOrigin w4[a2, d2]
	| {d != null}? a3:author | p3:program w5[a3, p2]
	;


w3[AST p, AST d]	
	: {p != null}? dataOrigin 
	| {d != null}? program 
	;

w4[AST a, AST d]	
	: {a != null}? dataOrigin 
	| {d != null}? program 
	;


w5[AST a, AST p]	
	: {a != null}? program 
	| {p != null}? author 
	;


Geir Ove

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Brannon King
Sent: 16. desember 2005 20:46
To: antlr-interest@antlr.org
Subject: [antlr-interest] Please help with arbitrary arrangements and
oldBNF syntax


Suppose I have the following parser rule snipped from edif.org:

written :
	LP! "written"
	     timeStamp
	     ( < author > | < program > | < dataOrigin > |
	     property | comment | userData )*
	RP!;

Where the angle brackets mean that those can only appear once (in an
arbitrary order). How do I enforce this in an ANTLR grammar?

In a similar vein, is this the right way to limit an identifier length?

IDENTIFIER
	options {testLiterals=true;} //make sure it's not a built in
function
	:	(ALPHA|'&')	a:('_'|ALPHA|DIGIT)*
{a.getText().length() < 256}? ; //less than 256 chars total

Thanks for your time



From gudnabrsam at yahoo.com  Fri Dec 16 12:33:55 2005
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Fri Dec 16 12:34:00 2005
Subject: [antlr-interest] Please help with arbitrary arrangements and old
	BNF syntax
In-Reply-To: <4EFE19E52F4F844D997F24D759C4A23BD1C866@etg2.etg.local>
Message-ID: <20051216203355.17472.qmail@web30901.mail.mud.yahoo.com>

Also, when you have a set as small as three, you could
use this non-scaling approach:

test
  :  (  foo (bar (baz)? | baz)?
     |  bar (foo (baz)? | baz)?
     |  baz (foo (bar)? | bar)?
     )?
  ;

FWIW,
Matt

--- Brannon King <BBKing@starbridgesystems.com> wrote:

> Suppose I have the following parser rule snipped
> from edif.org:
> 
> written :
> 	LP! "written"
> 	     timeStamp
> 	     ( < author > | < program > | < dataOrigin > |
> 	     property | comment | userData )*
> 	RP!;
> 
> Where the angle brackets mean that those can only
> appear once (in an
> arbitrary order). How do I enforce this in an ANTLR
> grammar?
> 
> In a similar vein, is this the right way to limit an
> identifier length?
> 
> IDENTIFIER
> 	options {testLiterals=true;} //make sure it's not a
> built in
> function
> 	:	(ALPHA|'&')	a:('_'|ALPHA|DIGIT)*
> {a.getText().length() < 256}? ; //less than 256
> chars total
> 
> Thanks for your time
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From geiroves at online.no  Fri Dec 16 12:39:45 2005
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Fri Dec 16 12:39:48 2005
Subject: [antlr-interest] Please help with arbitrary arrangements and
	oldBNF syntax
In-Reply-To: <20051216203355.17472.qmail@web30901.mail.mud.yahoo.com>
Message-ID: <000101c60280$dac23d30$0100a8c0@rexii>

Hello,

Neat ! Surely more elegant than my solution :-)


Geir Ove

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Matt Benson
Sent: 16. desember 2005 21:34
To: Brannon King; antlr-interest@antlr.org
Subject: Re: [antlr-interest] Please help with arbitrary arrangements
and oldBNF syntax


Also, when you have a set as small as three, you could
use this non-scaling approach:

test
  :  (  foo (bar (baz)? | baz)?
     |  bar (foo (baz)? | baz)?
     |  baz (foo (bar)? | bar)?
     )?
  ;

FWIW,
Matt

--- Brannon King <BBKing@starbridgesystems.com> wrote:

> Suppose I have the following parser rule snipped
> from edif.org:
> 
> written :
> 	LP! "written"
> 	     timeStamp
> 	     ( < author > | < program > | < dataOrigin > |
> 	     property | comment | userData )*
> 	RP!;
> 
> Where the angle brackets mean that those can only
> appear once (in an
> arbitrary order). How do I enforce this in an ANTLR
> grammar?
> 
> In a similar vein, is this the right way to limit an identifier 
> length?
> 
> IDENTIFIER
> 	options {testLiterals=true;} //make sure it's not a
> built in
> function
> 	:	(ALPHA|'&')	a:('_'|ALPHA|DIGIT)*
> {a.getText().length() < 256}? ; //less than 256
> chars total
> 
> Thanks for your time
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 



From gudnabrsam at yahoo.com  Fri Dec 16 12:41:13 2005
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Fri Dec 16 12:41:22 2005
Subject: [antlr-interest] Please help with arbitrary arrangements and old
	BNF syntax
In-Reply-To: <20051216203355.17472.qmail@web30901.mail.mud.yahoo.com>
Message-ID: <20051216204113.48945.qmail@web30913.mail.mud.yahoo.com>

oh, actually, I guess that'd have to be:

test
  :  (  foo (bar (baz)? | baz (bar)?)?
     |  bar (foo (baz)? | baz (foo)?)?
     |  baz (foo (bar)? | bar (foo)?)?
     )?
  ;

Definitely wouldn't want to take this much past
three... ;)

-Matt

--- Matt Benson <gudnabrsam@yahoo.com> wrote:

> Also, when you have a set as small as three, you
> could
> use this non-scaling approach:
> 
> test
>   :  (  foo (bar (baz)? | baz)?
>      |  bar (foo (baz)? | baz)?
>      |  baz (foo (bar)? | bar)?
>      )?
>   ;
> 
> FWIW,
> Matt
> 
> --- Brannon King <BBKing@starbridgesystems.com>
> wrote:
> 
> > Suppose I have the following parser rule snipped
> > from edif.org:
> > 
> > written :
> > 	LP! "written"
> > 	     timeStamp
> > 	     ( < author > | < program > | < dataOrigin >
> |
> > 	     property | comment | userData )*
> > 	RP!;
> > 
> > Where the angle brackets mean that those can only
> > appear once (in an
> > arbitrary order). How do I enforce this in an
> ANTLR
> > grammar?
> > 
> > In a similar vein, is this the right way to limit
> an
> > identifier length?
> > 
> > IDENTIFIER
> > 	options {testLiterals=true;} //make sure it's not
> a
> > built in
> > function
> > 	:	(ALPHA|'&')	a:('_'|ALPHA|DIGIT)*
> > {a.getText().length() < 256}? ; //less than 256
> > chars total
> > 
> > Thanks for your time
> > 
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam
> protection around 
> http://mail.yahoo.com 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From duboimat at iro.umontreal.ca  Fri Dec 16 12:55:33 2005
From: duboimat at iro.umontreal.ca (duboimat@iro.umontreal.ca)
Date: Fri Dec 16 12:55:38 2005
Subject: [antlr-interest] Re: tree parser generating templates
In-Reply-To: <1134719752.7972.5.camel@localhost.localdomain>
References: <4921CEC1-A8DB-4F6B-A5B6-085BB28D0A8C@arizona-software.ch>
	<20051215003123.jdo368ki040sgcc8@webmail.iro.umontreal.ca>
	<1134625987.8429.3.camel@localhost.localdomain>
	<dd3a065f0512150239g641e831haa30797d7512a6fa@mail.gmail.com>
	<25AEE3E6-FA9B-45D5-AAD0-6320C7A77F2A@cs.usfca.edu>
	<20051215132434.m7dclxsruokssck8@webmail.iro.umontreal.ca>
	<8E6D0D28-D6DD-4834-AC7A-B8E8C3189A9C@cs.usfca.edu>
	<20051215140127.050j3z4bw4gowsww@webmail.iro.umontreal.ca>
	<1134719752.7972.5.camel@localhost.localdomain>
Message-ID: <20051216155533.pj4lv5wdckcsskgk@webmail.iro.umontreal.ca>

Quoting Sohail Somani <sohail@taggedtype.net>:

> On Thu, 2005-12-15 at 14:01 -0500, duboimat@iro.umontreal.ca wrote:
>> >
>> > On Dec 15, 2005, at 10:24 AM, duboimat@iro.umontreal.ca wrote:
>> >> class LangWalker extends TreeParser;
>> >> {
>> >> StringTemplateGroup group; TextReader str;
>> >> StringTemplate program_st,header_st,block_st,thread_st,
>> >> assign_st,plus_st,moins_st,div_st,star_st;
>> >> StringTemplate code;
>> >>
>> >> public void init()
>> >> 	{
>> >> 	str = new StreamReader("program.st");
>> >> 	group= new StringTemplateGroup(str);
>> >
>> > Ok, first thing:use a group file format and StringTemplateGroup.  See
>> >  the article I have up on using ANTLR+ST.
>> >
>> >>        ...
>> >>
>> >> To build the program I have to put a template into another one.
>> >> if i build lines I have to regroup it to build a block .
>> >>
>> >> It work only when i use st for a subset of the program . I can't
>> >> regroup all
>> >> subset to built a program without having repetition from another
>> >> subset with a
>> >> new value. May be a need to reset the template with its value.
>> >
>> > I have that functionality but I've never once used it...
>> >
>> >> Is there another to do a manually request in v2?
>> >
>> > see the article :)
>> >
>> > Ter
>> >
>> I have seen this article
>> Language Translation Using ANTLR and StringTemplate
>> I have begun my project with this article
>>
>> my group file is included in program.st file.
>> In my program.st
>>
>> group sim;
>> program(header,block) ::=<< Created by $header$   Program: $block$ >>
>> header()::=<<header>>
>> block(thread) ::=<< Block: $thread$ >>
>> thread(statement) ::= <<Thread : >>
>> ...
>> assign(lhs,rhs) ::= << $lhs$ = $rhs$; >>
>> plus(lhs,rhs) ::= << $lhs$ + $rhs$ >>
>> moins(lhs,rhs) ::= << $lhs$ - $rhs$ >>
>> div(lhs,rhs) ::= << $lhs$ / $rhs$ >>
>> star(lhs,rhs) ::= << $lhs$ * $rhs$ >>
>>
>> In my example , the program is composed of block, the block is composed of
>> thread , the thread is composed of statement ...
>>
>> The article doesn't show how to use antlr + st with tree.
>> if I call template from tree parser class
>> like
>>         code = template("variable");        }
>>         code.setAttribute("type", t);
>>         code.setAttribute("name", d);
>>
>> String template will not regroup all template together with its 
>> value to get a
>> final code.
>
> You have to do something like:
>
> class StringTemplateGenerator extends SomeParser;
>
> myTreeRule[returns StringTemplate ret=template("my_language_element");]
> 	: ... {ret.setAttribute("my_attribute",some_value);}
> 	;
>
> then in the driver:
>
> StringTemplateGenerator stgen = new StringTemplateGenerator(...);
>
> StringTemplate result = stgen.myTreeRule();
> System.out.println(result);
>
> This is the way I would've liked to have done it, but I did it like the
> article told me to and did it in the parser.
>
> Oh well, I'll fix it in my 0.2 release :)
>
> Sohail
>
Thank for your help Ter and Sohail.
I have rewritten my code according to your comments and it 's a better way.
I connected srting template directly in my tree walker.

thank a lot
mat


----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

From gudnabrsam at yahoo.com  Fri Dec 16 13:08:58 2005
From: gudnabrsam at yahoo.com (Matt Benson)
Date: Fri Dec 16 13:09:00 2005
Subject: [antlr-interest] Please help with arbitrary arrangements and
	oldBNF syntax
In-Reply-To: <000101c60280$dac23d30$0100a8c0@rexii>
Message-ID: <20051216210858.51253.qmail@web30914.mail.mud.yahoo.com>

well, except that, even after my fix, it's probably
much more complicated with the other elements in
Brannon's original example... the part that I skimmed
originally.  ;)

-Matt

--- Geir Ove Skjaervik <geiroves@online.no> wrote:

> Hello,
> 
> Neat ! Surely more elegant than my solution :-)
> 
> 
> Geir Ove
> 
> -----Original Message-----
> From: antlr-interest-bounces@antlr.org
> [mailto:antlr-interest-bounces@antlr.org] On Behalf
> Of Matt Benson
> Sent: 16. desember 2005 21:34
> To: Brannon King; antlr-interest@antlr.org
> Subject: Re: [antlr-interest] Please help with
> arbitrary arrangements
> and oldBNF syntax
> 
> 
> Also, when you have a set as small as three, you
> could
> use this non-scaling approach:
> 
> test
>   :  (  foo (bar (baz)? | baz)?
>      |  bar (foo (baz)? | baz)?
>      |  baz (foo (bar)? | bar)?
>      )?
>   ;
> 
> FWIW,
> Matt
> 
> --- Brannon King <BBKing@starbridgesystems.com>
> wrote:
> 
> > Suppose I have the following parser rule snipped
> > from edif.org:
> > 
> > written :
> > 	LP! "written"
> > 	     timeStamp
> > 	     ( < author > | < program > | < dataOrigin >
> |
> > 	     property | comment | userData )*
> > 	RP!;
> > 
> > Where the angle brackets mean that those can only
> > appear once (in an
> > arbitrary order). How do I enforce this in an
> ANTLR
> > grammar?
> > 
> > In a similar vein, is this the right way to limit
> an identifier 
> > length?
> > 
> > IDENTIFIER
> > 	options {testLiterals=true;} //make sure it's not
> a
> > built in
> > function
> > 	:	(ALPHA|'&')	a:('_'|ALPHA|DIGIT)*
> > {a.getText().length() < 256}? ; //less than 256
> > chars total
> > 
> > Thanks for your time
> > 
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam
> protection around 
> http://mail.yahoo.com 
> 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From mritun at gmail.com  Sat Dec 17 01:28:10 2005
From: mritun at gmail.com (Akhilesh Mritunjai)
Date: Sat Dec 17 01:25:32 2005
Subject: [antlr-interest] Jazillian C to Java translator
In-Reply-To: <43A2CC13.1040906@jazillian.com>
References: <43A2CC13.1040906@jazillian.com>
Message-ID: <op.s1w8k8dz5qofyi@mritunjai.intra.powailabs.com>

Hi Andy

Great work!

On Fri, 16 Dec 2005 19:45:47 +0530, Andy Tripp <atripp@jazillian.com>  
wrote:
> unsigned -->         // Java has no unsigned keyword, just delete it

This one is tricky. A human will promote to next higher type (signed char  
-> short, signed int -> long) otherwise runtime results will be funky.  
Unsigned and signed have VERY different meanings of sign bit.


-- 
- Akhilesh

Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
From no.reply at haefelinger.net  Sat Dec 17 06:04:39 2005
From: no.reply at haefelinger.net (wolfgang haefelinger)
Date: Sat Dec 17 06:22:02 2005
Subject: [antlr-interest] Re: antlr build problem
References: <43963DE4.6080503@dsndata.com>
Message-ID: <do15sd$u4k$1@sea.gmane.org>

Hi Dan,

I  tried  your  script  and it works fine on my machine. Let's have
then a closer look at the Makefile

    antlr/Makefile[.in]

You will fine the Makefile template (Makefile.in) in the $SRC/antlr
directory; the instance (Makefile) in $TMP/antlr.

The relevant rule for compiling Java source code is something like

## rule how to compile java files
/home/geronimo/opt/tmp_antlr/antlr/antlr.jar :: $(antlr_java_FILES)
       [..]
        @ /bin/sh /home/geronimo/opt/tmp_antlr/scripts/javac.sh $?
       [..]

All Java files are listed in variable $(antlr_java_FILES) defined
a couple of lines above this rule.

The basic idea is to compile only those Java files newer than the
target "antlr.jar". This gets expressed by "$?".

An explanation for compiling "zero" files would therefore be that
there is just no file newer than "antlr.jar".

This is however contradicted by the fact that rule above gets
triggered, i.e. there must be at least one file in $(antlr_java_FILES)
newer than "antlr.jar"!

Perhaps "$?" is not working?
=> Please replace "$?" by "$(antlr_java_FILES)" and run "make"
again.

If you see a difference now then I really wonder which flavour of
"make" you are using?

Let's assume nothing has changed, it's still not working. In this
case it's now time to have a look at

    scripts/javac.sh[.in].

because I assume now that arguments provided by the script caller
are lost somewhere in the darkness of shell programming ..

=> Please modify scripts/javac.sh so that your first two lines are
looking like

#!/bin/sh
set -x

Warning: please make sure that "javac.sh" is still in UNIX style
after your modifications, i.e. lines still end with '\n' and not
with '\r\n'. If this is a problem for you, you can alternativly
also change the Makefile to read

    @ /bin/sh -x /home/geronimo/opt/tmp_antlr/scripts/javac.sh $?


Having done this, please run 'make' again and collect it's output:

 make 2>&1 | tee antlr.log

You should now "see" a lot of additional output. Perhaps it gives
you a clue what went wrong. In any case, please send me the log
file:

    me => ora dot et dot labora at web dot de

Cheers,
Wolfgang.








"Dan Axline" <waxline@dsndata.com> wrote in 
message news:43963DE4.6080503@dsndata.com...
>I get this error when running make:
>
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
>>> make -C ./antlr all
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
> *** compiling 0 Java file(s)
> javac: no source files
>
> ...
>
> xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
>                       >> E R R O R <<
> ============================================================
>
> /usr/local/waxline/programs/j2sdk1.4.2_05/bin/javac -d . -sourcepath
> /usr/local/waxline/downloads/antlr-2.7.5 -classpath
> /usr/local/waxline/tmp_antlr/antlr/antlr.jar:/usr/local/waxline/programs/j2sdk1.4.2_05/lib:.
>
> ============================================================
> Got an error while trying to execute  command  above.  Error
> messages (if any) must have shown before. The exit code was:
> exit(2)
> xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
> make[1]: *** [/usr/local/waxline/tmp_antlr/antlr/antlr.jar] Error 2
> make: *** [all] Error 1
>
>
> I tried figuring out what is wrong with the Makefile, but I'm out of
> my depth there.  Apparently $ARGV is empty in javac.sh...
>
> Here is a script describing how I am trying to install antlr:
>
> #!/bin/bash
>
> BASE=/usr/local/waxline
> DOWNLOADS=$BASE/downloads
> TMP=$BASE/tmp_antlr
> SRC=$DOWNLOADS/antlr-2.7.5
> INSTALL=$BASE/programs/antlr-2.7.5
>
> cd $DOWNLOADS
> wget http://www.antlr.org/download/antlr-2.7.5.tar.gz
> tar -zxvf antlr-2.7.5.tar.gz
> mkdir $TMP
> cd $TMP
> $SRC/configure --prefix=$INSTALL
> make
>
> Any ideas about where I am going wrong?
>
> 



From atripp at jazillian.com  Sun Dec 18 17:56:07 2005
From: atripp at jazillian.com (Andy Tripp)
Date: Sun Dec 18 17:58:10 2005
Subject: [antlr-interest] Jazillian C to Java translator
Message-ID: <43A61337.7090302@jazillian.com>

>
>
>Hi Andy
>
>Great work!
>
>On Fri, 16 Dec 2005 19:45:47 +0530, Andy Tripp <atripp at jazillian.com <http://www.antlr.org/mailman/listinfo/antlr-interest>>  
>wrote:
>>/ unsigned -->         // Java has no unsigned keyword, just delete it
>/
>This one is tricky. A human will promote to next higher type (signed char  
>-> short, signed int -> long) otherwise runtime results will be funky.  
>Unsigned and signed have VERY different meanings of sign bit.
>  
>

Right, lots of them are tricky :) I'm careful to clearly state that the 
translation is NOT fully guaranteed
to run correctly. Also, these mappings are in a text file, so the user 
can change them, delete them, or
add their own. And I continue to add smarts as time goes on. For 
example, here I might examine all
references (i.e. static analysis) to try to determine whether it's safe 
to just remove the "unsigned" keyword.

>
>-- 
>- Akhilesh
>
From sunshine at public.kherson.ua  Mon Dec 19 00:11:59 2005
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 19 00:12:17 2005
Subject: [antlr-interest] Lemon parser. Any comments?
Message-ID: <BFCC37EF.46689%sunshine@public.kherson.ua>

Hi list,

I have search archive of this list and no one mention of Lemon parser vs
ANTLR.

Anybody have any comments ?
    
    http://www.hwaci.com/sw/lemon/

It looks to be more powerful and easier for use than YACC,
And even faster.


-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]


From prashant.deva at gmail.com  Mon Dec 19 01:06:57 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Mon Dec 19 01:07:01 2005
Subject: [antlr-interest] Lemon parser. Any comments?
In-Reply-To: <BFCC37EF.46689%sunshine@public.kherson.ua>
References: <BFCC37EF.46689%sunshine@public.kherson.ua>
Message-ID: <41fed8f80512190106i22b40184qbfc0b9d13eb2e514@mail.gmail.com>

Does it have an ide like ANTLR Studio ;-)
--
Prashant Deva
Creator, ANTLR Studio,www.antlrstudio.com
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051219/25149e99/attachment.html
From geiroves at online.no  Mon Dec 19 01:39:10 2005
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Mon Dec 19 01:39:11 2005
Subject: [antlr-interest] Lemon parser. Any comments?
In-Reply-To: <BFCC37EF.46689%sunshine@public.kherson.ua>
Message-ID: <001101c60480$123424d0$a1fff60a@rexii>

Hello,

Well, it is a LALR(1) parser: If it has no functionality aka Syntactic
Predicates, you are stuck with parsing languages having lots of keywords
to resolve ambiguities. That wouldn't work for my current project, where
there is very few keywords indeed.

Geir Ove

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Ruslan Zasukhin
Sent: 19. desember 2005 09:12
To: antlr-interest@antlr.org
Subject: [antlr-interest] Lemon parser. Any comments?


Hi list,

I have search archive of this list and no one mention of Lemon parser vs
ANTLR.

Anybody have any comments ?
    
    http://www.hwaci.com/sw/lemon/

It looks to be more powerful and easier for use than YACC,
And even faster.


-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information http://www.paradigmasoft.com

[I feel the need: the need for speed]




From ewbank at gmail.com  Mon Dec 19 01:44:40 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon Dec 19 01:44:43 2005
Subject: [antlr-interest] Lemon parser. Any comments?
In-Reply-To: <BFCC37EF.46689%sunshine@public.kherson.ua>
References: <BFCC37EF.46689%sunshine@public.kherson.ua>
Message-ID: <dd3a065f0512190144m17a3e8cfn70cd2535f683674e@mail.gmail.com>

I can't compare ANTLR and lemon, nor can I comment on speed.  I did
poke at lemon a while back, and thought it was better than yacc/bison
because of the difference in how rules are specified.  Also, since
lemon is in the public domain, some folks might be happier with it
than with bison.

The biggest difference is that, as the documents say, "In yacc and
bison, the parser calls the tokenizer. In Lemon, the tokenizer calls
the parser."

Please let us know what you find...

On 12/19/05, Ruslan Zasukhin <sunshine@public.kherson.ua> wrote:
> I have search archive of this list and no one mention of Lemon parser vs
> ANTLR.
>
> Anybody have any comments ?
>
>     http://www.hwaci.com/sw/lemon/
>
> It looks to be more powerful and easier for use than YACC,
> And even faster.
From mp.lists at free.fr  Mon Dec 19 02:30:39 2005
From: mp.lists at free.fr (mp.lists@free.fr)
Date: Mon Dec 19 02:30:48 2005
Subject: [antlr-interest] antlr suitable for xml languages? (like bpel and
	are there existing grammaires)
In-Reply-To: <581013691@web.de>
References: <581013691@web.de>
Message-ID: <17318.35791.183707.920861@calefacens.low-entropy.hn.org>

Hello, Dominik,

SOA Work writes:
|
| Hi,
|
| im new to antlr (to parsing at all for being honest).
|
| I am planning to create a parser for the bpel language. Now my questions (as mentioned in the subject):
|
| 1. can i parse xml languages like bpel, wsdl, xhtml or soap messages with antlr? or is it more simple just to use some xml parsers?
|
If you are interested in strict checking for schema conformity, it is
probably much easier to use one of the xml parser generators like
xmlbeans, castor or jaxb.  With xmlbeans, you have a running bpel-parser
in 1 hour -- download included.

Sole reason, I can presently imagine to justify a decision for a generic
parser generator, is, if you have a framework, which should only include
one parser generator and you intend to parse many different languages.
Otherwise, the xml-parser generators mentioned above are probably hard
to beat by a generic parser generator when it comes to parse xml.


| 2. if using antlr for parsing bpel, does somebody know existing grammair files for this language?
|
You can start with an xml grammar and, if needed, extend it later for
particular bpel|wsdl syntax features.
A group of the University of Munich evolved the xml grammar of the
xml spec.  You can take that as starting point.  But you will have to
do further work to decide, which rules should go into the tokenizer
and which should be part of the L2-grammar.

If you really want to do it, you can ask me for an even evolved grammar
as a starting point.



Hope, this helps yet,

~   Markus


From gt54-antlr at cyconix.com  Mon Dec 19 02:52:56 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Mon Dec 19 02:53:03 2005
Subject: [antlr-interest] Lemon parser. Any comments?
In-Reply-To: <dd3a065f0512190144m17a3e8cfn70cd2535f683674e@mail.gmail.com>
References: <BFCC37EF.46689%sunshine@public.kherson.ua>
	<dd3a065f0512190144m17a3e8cfn70cd2535f683674e@mail.gmail.com>
Message-ID: <43A69108.2010703@cyconix.com>

Bryan Ewbank wrote:
> Also, since
> lemon is in the public domain, some folks might be happier with it
> than with bison.

Bison is GPL'ed. My understanding is that they copyright the 
Bison-generated files, but they don't claim any rights on the grammar 
itself. It seems (to me, anyway!) that you can use Bison in commercial 
products with no GPL-related problems.

> The biggest difference is that, as the documents say, "In yacc and
> bison, the parser calls the tokenizer. In Lemon, the tokenizer calls
> the parser."

There seem to be various Bison hacks around to do it both ways. I think 
this may become a supported feature at some point.

Paul

From mp.lists at free.fr  Mon Dec 19 05:46:50 2005
From: mp.lists at free.fr (Markus)
Date: Mon Dec 19 05:46:58 2005
Subject: [antlr-interest] antlr suitable for xml languages? (like bpel and
	are there existing grammaires)
In-Reply-To: <588666774@web.de>
References: <588666774@web.de>
Message-ID: <17318.47562.489507.371375@calefacens.low-entropy.hn.org>

SOA Work writes:
 > 
...
 > 
 > 1. I think the efford writing a grammair file with antxr is not as huge as with plain antlr
 > 
What about writing an XML Schema parser and extending it with
functionality to generate an antxr grammar?  This would deliver a
schema compatible antxr grammar for _any_ xml subgrammar.

Or did anybody do this already??


 > 2. the generated parser should be realy fast
 > 
 > 3. generating the files results in about 30 java files with sometimes strange names and complex relations. if i want to use simple datatypes (and i want to) i have to spend several hours to wrap the generated klasses to simple ones.
 > 
...
 > 
 > mp.lists@free.fr schrieb am 19.12.05 11:31:11:
 > 
...
 > 
 > Sole reason, I can presently imagine to justify a decision for a generic
 > parser generator, is, if you have a framework, which should only include
 > one parser generator and you intend to parse many different languages.
 > Otherwise, the xml-parser generators mentioned above are probably hard
 > to beat by a generic parser generator when it comes to parse xml.
 > 
O.k., I revise my statement above.  For _my_ purpose a rich type set
was more important than a small number of Java files.  But I see, that
there may be other preferences.


Cheers,

   Markus


From gt54-antlr at cyconix.com  Mon Dec 19 07:41:52 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Mon Dec 19 07:42:13 2005
Subject: [antlr-interest] Lemon parser. Any comments?
In-Reply-To: <BFCC7D7C.466D2%sunshine@public.kherson.ua>
References: <BFCC7D7C.466D2%sunshine@public.kherson.ua>
Message-ID: <43A6D4C0.4050500@cyconix.com>

[I'm assuming that this was meant to go to the list, so I've copied your 
entire message below...]

Ruslan Zasukhin wrote:
> On 12/19/05 12:52 PM, "Paul Johnson" <gt54-antlr@cyconix.com> wrote:
> 
> 
>>>The biggest difference is that, as the documents say, "In yacc and
>>>bison, the parser calls the tokenizer. In Lemon, the tokenizer calls
>>>the parser."
>>
>>There seem to be various Bison hacks around to do it both ways. I think
>>this may become a supported feature at some point.
> 
> 
> For me the most interesting features of lemon comparing to YACC are:
> 
> * no $n values, instead easy named parameters
> 
> * no global variables, so can be used in threads
> 
> * can run several parsers in the same time.
> 
> * faster of YACC (claimed)
> 
> * also they have auto-destructors for terminal symbols.
> 
> So at least 5 features over YACC.



---------------

> * no $n values, instead easy named parameters

I've never really seen this as a problem; it seems natural enough in 
normal use.

> * no global variables, so can be used in threads

'%pure-parser' will give you a re-entrant parser; all the globals are 
turned into locals. I haven't tried this.

> * can run several parsers in the same time.

I already do this, and I know of others doing the same. You can do this 
even without the re-entrant option by changing the prefix on the global 
names (-p option on the command line??)

> * faster of YACC (claimed)

No idea, I'm afraid. However, parsing is a small fraction of my total 
compilation time.

> * also they have auto-destructors for terminal symbols.

Not sure that I understand this. However, I've had no memory leak problems.

Note also that Bison has had multi-token lookahead for several years now 
(it uses GLR).

Paul

From sunshine at public.kherson.ua  Mon Dec 19 07:57:44 2005
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 19 07:57:50 2005
Subject: [antlr-interest] Lemon parser. Any comments?
In-Reply-To: <43A6D4C0.4050500@cyconix.com>
Message-ID: <BFCCA518.46706%sunshine@public.kherson.ua>

On 12/19/05 5:41 PM, "Paul Johnson" <gt54-antlr@cyconix.com> wrote:

Hi Paul,

>> * no $n values, instead easy named parameters
> 
> I've never really seen this as a problem; it seems natural enough in
> normal use.
> 
>> * no global variables, so can be used in threads
> 
> '%pure-parser' will give you a re-entrant parser; all the globals are
> turned into locals. I haven't tried this.

Do you mean option of YACC ?
 
>> * can run several parsers in the same time.
> 
> I already do this, and I know of others doing the same. You can do this
> even without the re-entrant option by changing the prefix on the global
> names (-p option on the command line??)

Again, I assume you talk about YACC, not ANTLR, right ?
 
>> * faster of YACC (claimed)
> 
> No idea, I'm afraid. However, parsing is a small fraction of my total
> compilation time.

You are lucky 

I have spend today again the whole day doing different benches and
profiling.  

In loop with INSERT of million records, we get ANTLR pure time 470 seconds,
Our db engine do all rest work on low level in 58 second.

SqlLite with that Lemon parser do all in 132 seconds.

So we can allow parser to eat maximum (132 - 58) = 70 seconds.
But not 470 seconds.
 
>> * also they have auto-destructors for terminal symbols.
> 
> Not sure that I understand this. However, I've had no memory leak problems.
> 
> Note also that Bison has had multi-token lookahead for several years now
> (it uses GLR).

Aha. Ok. Thank you.

-- 
Best regards,

Ruslan Zasukhin
VP Engineering and New Technology
Paradigma Software, Inc

Valentina - Joining Worlds of Information
http://www.paradigmasoft.com

[I feel the need: the need for speed]


From gt54-antlr at cyconix.com  Mon Dec 19 08:43:22 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Mon Dec 19 08:43:30 2005
Subject: [antlr-interest] Lemon parser. Any comments?
In-Reply-To: <BFCCA518.46706%sunshine@public.kherson.ua>
References: <BFCCA518.46706%sunshine@public.kherson.ua>
Message-ID: <43A6E32A.6080408@cyconix.com>

Ruslan Zasukhin wrote:
> On 12/19/05 5:41 PM, "Paul Johnson" <gt54-antlr@cyconix.com> wrote:

>>'%pure-parser' will give you a re-entrant parser; all the globals are
>>turned into locals. I haven't tried this.
> 
> 
> Do you mean option of YACC ?

Sorry, forgot to say that I was talking about Bison, not YACC. This is a 
Bison declaration. Not sure how many people are still using plain-old-yacc.

>>>* can run several parsers in the same time.
>>
>>I already do this, and I know of others doing the same. You can do this
>>even without the re-entrant option by changing the prefix on the global
>>names (-p option on the command line??)
> 
> 
> Again, I assume you talk about YACC, not ANTLR, right ?

Yes (well, Bison (and, I think, at least MKS YACC)). This is starting to 
get off-topic for an ANTLR list... :)

Paul

From BBKing at starbridgesystems.com  Mon Dec 19 15:26:16 2005
From: BBKing at starbridgesystems.com (Brannon King)
Date: Mon Dec 19 15:26:02 2005
Subject: [antlr-interest] lisp-like issues
Message-ID: <4EFE19E52F4F844D997F24D759C4A23BD1CB1B@etg2.etg.local>

Suppose I have a grammar like the following:
 
(funcName returnName param1 param2 (funcName ...) ...)
 
(The actual grammar is EDIF and it is LISP-like).
 
I set all my built-in funcNames as tokens in the Lexer. The Lexer
Identifier rule picks up funcName, retName, param, etc. However, there
is no restriction in the language that the returnName or params be
different from any of the built-in function names. Function calls just
happen to be the first item in the list. So when I tell the Identifier
rule to testLiterals, I get errors when my other params have the same
name as a function. When I tell it to not test literals, I get an error
on the very first function that looks like this: expecting "funcName",
found 'funcName'. I don't know what is signified by the double quotes
vs. the single quotes on that error. Can someone explain that to me?
After that point I tried exporting the Parser's vocab to the Lexer. That
seemed to get rid of the above error. I wished I knew why. However, it
created an error that shows up when I try to print the AST tree with
toStringTree that looks like: expecting FUNCNAME, found 'funcName'. 

What I don't understand is 
1. why I cannot or how I should do a testLiterals in the parser instead
of the Lexer
2. why I would need to export the vocabularies under any circumstance
where I have all the tokens already listed in the Lexer's token section
3. what the advantages are to having the tokens in the lexer
4. why the toStringTree cannot find EDIF (am I supposed to importVocab
into that somehow?)
5. how I could test for literals only when there was an immediately
preceding open paren
5. should I be including the opening paren and WS as part of the
keywords?
6. with a simple language like LISP where the entirety of the hierarchy
is hardcoded into the parentheses, am I even on the right track with
code like the following?

Here is some of the code:

class EDIFParser extends Parser;
options
{
	k = 2;
	buildAST = true;
	exportVocab = EDIF;
}
edif :
	LP! EDIF^ edifFileNameDef
	RP!;
edifFileNameDef :
	IDENTIFIER | name | rename;
name :
	LP! NAME^ IDENTIFIER ( display )* RP!;
...

class EDIFLexer extends Lexer;
options
{
	k = 2; //2 for the double char newline
	testLiterals = false;
	charVocabulary = '\3'..'\377'; //ascii
	caseSensitiveLiterals = false;
	caseSensitive = false;
	importVocab = EDIF;		// Call its vocabulary "EDIF"
}
tokens
{
	EDIF="edif";
}

IDENTIFIER
	options {testLiterals=false;}
	:	(ALPHA|'&')	a:(options {greedy=true;}:
'_'|ALPHA|DIGIT)*
		{(a == null)? true: (a.getText().length() < 256)}? ; //
256 max chars
protected DIGIT: ('0'..'9');
protected ALPHA: ('a'..'z');
WHITESPACE	: ( ' ' | '\t' | '\f'
		| ( options { generateAmbigWarnings=false; }
					: "\r\n"  // DOS/Windows
					| '\r'	// Macintosh
					| '\n'	// UNIX
					) { newline(); }
		)
		{ $setType(Token.SKIP); }
		;
LP		: "(" ;
RP		: ")" ;

Thanks again for your time.
From scott at javadude.com  Mon Dec 19 20:08:59 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Mon Dec 19 20:09:26 2005
Subject: [antlr-interest] antlr suitable for xml languages? (like bpel
	andare there existing grammaires)
In-Reply-To: <17318.47562.489507.371375@calefacens.low-entropy.hn.org>
Message-ID: <200512200356.jBK3uqk7009542@s2.eroute.net>

> SOA Work writes:
>  >
>  > 1. I think the efford writing a grammair file with antxr 
> is not as huge as with plain antlr  > What about writing an 
> XML Schema parser and extending it with functionality to 
> generate an antxr grammar?  This would deliver a schema 
> compatible antxr grammar for _any_ xml subgrammar.
> 
> Or did anybody do this already??

I mentioned that several notes back. I was planning to do this but haven't
had the time. I was thinking of using the eclipse xsd stuff to read a schema
and then create the grammar.

This would also help when the schema changes -- you could diff a
newly-generated antxr grammar against the "grammar-only" output of an older
grammar and see exactly what needs to change. This would be a huge leg up
against any other kind of XML processor.

Later,
-- Scott

From Oliver.Kowalke at infineon.com  Tue Dec 20 00:19:19 2005
From: Oliver.Kowalke at infineon.com (Oliver.Kowalke@infineon.com)
Date: Tue Dec 20 00:19:24 2005
Subject: [antlr-interest] problem with TreeParser grammar -> <AST>:
	unexpected AST node: 'abc'
Message-ID: <7509DD89A305F34E9EF16F1EEDFB80AF030BFE1F@drsse401.eu.infineon.com>

Hello,
I don't know why the tree parser grammar doesn't work if I try to parse
" otype in ('abc','efg') ":

<AST>: unexpected AST node: 'abc'

Could please help me?
Regards,
Oliver

Grammar:

header "pre_include_hpp" 
{
	#include <string>
	#include <antlr/AST.hpp>
}

options
{
	language="Cpp";
	namespace="ymfl";
}



/////////////////////////////////////////////////////////////////////
//	Lexer
/////////////////////////////////////////////////////////////////////

class FilterLexer extends Lexer;

options 
{
    k=2;
    exportVocab=YMFL;
    charVocabulary='\u0000'..'\u007F';
    caseSensitive=false;
	caseSensitiveLiterals=false;
}

tokens
{
	ADDER = "adder";
	IN = "in";
	OTYPE = "otype";
	REPEATER = "repeater";
	XSIZE = "xsize";
	YSIZE = "ysize";
}

protected MINUS
	options { paraphrase = "-"; }
	: '-'
;

protected PLUS
	options { paraphrase = "+"; }
	: '+'
;

protected POINT
	options { paraphrase = "."; }
	: '.'
;

protected SIGNUM
	options { paraphrase = "'-' or '+'"; }
	: MINUS | PLUS
;

protected DIGIT
	options { paraphrase = "an digit"; }
	: '0'..'9'
;

protected INT
	options { paraphrase = "an integer"; }
	: ( SIGNUM )? ( DIGIT )+
;

protected EXPONENT
	options { paraphrase = "an signed exponent"; }
	: 'e' ( SIGNUM )? ( DIGIT )+
;

protected REAL
	options { paraphrase = "an real"; }
	: ( SIGNUM )?
	( POINT ( DIGIT )+ ( EXPONENT )?
	| ( DIGIT )+ POINT ( ( DIGIT )+ )? ( EXPONENT )?
	)
;

protected LETTER
	options { paraphrase = "an letter"; }
	: 'a'..'z'
;

COMMA
	options { paraphrase = ","; }
	: ","
;

AND
	options { paraphrase = "&&"; }
	: "&&"
;

OR
	options { paraphrase = "||"; }
	: "||"
;

NOT
	options { paraphrase = "!"; }
	: '!'
;

LPAREN
	options { paraphrase = "("; }
	: '('
;

RPAREN
	options { paraphrase = ")"; }
	: ')'
;

EQ
	options { paraphrase = "=="; }
	: "=="
;

NEQ
	options { paraphrase = "!="; }
	: "!="
;

STRING
	options { paraphrase = "an string"; }
	: '\''
    ( ~( '\'' | '"' | '\n' | '\r' ) )*
    ( '\''
    | // nothing -- write error message
    )
;

REAL_or_INT
	: ( ( SIGNUM )? ( DIGIT )+ POINT ) => REAL { $setType( REAL ); }
	| ( ( SIGNUM )? POINT ( DIGIT )+ ) => REAL { $setType( REAL ); }
	| ( ( SIGNUM )? ( DIGIT )+ ) => INT { $setType( INT ); }
;

DELIM 
	options { paraphrase = "an delimeter (' ' \t \f \r \n)"; }
	: ( ' '
	| '\t'
	| '\f'
	|	( "\r\n"
		| '\r'
		| '\n'
		)
		{ newline(); }
	)
	{ $setType( antlr::Token::SKIP ); }
;

IDENT
	options {testLiterals=true;}
	: ('a'..'z') ('a'..'z'|'0'..'9')*
;


/////////////////////////////////////////////////////////////////////
//	Parser
/////////////////////////////////////////////////////////////////////

class FilterParser extends Parser;

options 
{	
	k=2;
    exportVocab=YMFL;
	buildAST=true;
}

otype_in_op
	:
	OTYPE IN^ strlist
;

existence_op
	:
	ADDER | REPEATER
;

relation_op
	:
	( XSIZE | YSIZE ) ( EQ^ | NEQ^ ) ( INT | REAL )
;

primitive
	: 
	existence_op | relation_op | otype_in_op | LPAREN^ expression
RPAREN!
;

negation_expression
	:
	primitive | NOT^ primitive
;

expression
	:
	negation_expression ( ( AND^ | OR^ ) negation_expression )*
;

run
	:
	expression EOF
;

strlist
	:
	LPAREN ( STRING | ( STRING COMMA )+ STRING ) RPAREN
;


/////////////////////////////////////////////////////////////////////
//	TreeParser
/////////////////////////////////////////////////////////////////////

class FilterTreeParser extends TreeParser;

options 
{	
	k=2;
    importVocab=YMFL;
}

existence_op
	:
	ADDER | REPEATER
;

number
	:
	INT | REAL
;

strlist
	:
	LPAREN ( STRING | ( STRING COMMA )+ STRING ) RPAREN
;

expression
	:
		#(AND expression expression)
	|
		#(OR expression expression)
	|
		#(NOT expression)
	|
		#(LPAREN expression)
	|
		#(EQ ( XSIZE number | YSIZE number ) )
	|
		#(NEQ ( XSIZE number | YSIZE number) )
	|
		#(IN OTYPE strlist)
	|
		existence_op
;
From mail at martin-probst.com  Tue Dec 20 01:51:12 2005
From: mail at martin-probst.com (Martin Probst)
Date: Tue Dec 20 01:51:19 2005
Subject: [antlr-interest] antlr suitable for xml languages? (like bpel
	andare there existing grammaires)
In-Reply-To: <200512200356.jBK3uqk7009542@s2.eroute.net>
References: <200512200356.jBK3uqk7009542@s2.eroute.net>
Message-ID: <1135072273.9796.8.camel@localhost.localdomain>

> > What about writing an XML Schema parser and extending it
> > with functionality to generate an antxr grammar?
>
> I mentioned that several notes back. I was planning to do this but haven't
> had the time. I was thinking of using the eclipse xsd stuff to read a schema
> and then create the grammar.

I don't know how easy it will be to integrate the eclipse xsd stuff, but
keep in mind that XML Schema is probably one of the most complicated and
hardest to implement XML specs there is. I think there still isn't a
single tool that gets it right, plus there is no single opinion on what
is actually right.

Martin

From scott at javadude.com  Tue Dec 20 05:15:47 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Tue Dec 20 05:18:13 2005
Subject: [antlr-interest] antlr suitable for xml languages? (like
	bpelandare there existing grammaires)
In-Reply-To: <1135072273.9796.8.camel@localhost.localdomain>
Message-ID: <200512201304.jBKD3bkD021476@s2.eroute.net>

Sounds like someone had some really bad experiences with XML schema...

Do you have some refs that talk about the types of problems people have had
so I know what to be looking for?

Thanks,
-- Scott 

> -----Original Message-----
> From: Martin Probst [mailto:mail@martin-probst.com] 
> Sent: Tuesday, December 20, 2005 4:51 AM
> To: Scott Stanchfield
> Cc: pilzecker@free.fr; 'SOA Work'; antlr-interest@antlr.org
> Subject: RE: [antlr-interest] antlr suitable for xml 
> languages? (like bpelandare there existing grammaires)
> 
> > > What about writing an XML Schema parser and extending it with 
> > > functionality to generate an antxr grammar?
> >
> > I mentioned that several notes back. I was planning to do this but 
> > haven't had the time. I was thinking of using the eclipse 
> xsd stuff to 
> > read a schema and then create the grammar.
> 
> I don't know how easy it will be to integrate the eclipse xsd 
> stuff, but keep in mind that XML Schema is probably one of 
> the most complicated and hardest to implement XML specs there 
> is. I think there still isn't a single tool that gets it 
> right, plus there is no single opinion on what is actually right.
> 
> Martin
> 


From mail at martin-probst.com  Tue Dec 20 08:12:30 2005
From: mail at martin-probst.com (Martin Probst)
Date: Tue Dec 20 08:12:38 2005
Subject: [antlr-interest] antlr suitable for xml languages? (like
	bpelandare there existing grammaires)
In-Reply-To: <200512201304.jBKD3bkD021476@s2.eroute.net>
References: <200512201304.jBKD3bkD021476@s2.eroute.net>
Message-ID: <1135095150.9796.20.camel@localhost.localdomain>

> Sounds like someone had some really bad experiences with XML schema...

I think that should be "everyone", at least everybody is complaining
about it :-)

> Do you have some refs that talk about the types of problems people have had
> so I know what to be looking for?

Nah, not really. Luckily I neither had to nor tried to implement it -
it's more like a well known fact, and there was also once a webpage
comparing the state of the implementations, which was pretty horrible.

Maybe you can find something on the xml-dev list.

Martin

From thiago.arrais at gmail.com  Tue Dec 20 09:26:09 2005
From: thiago.arrais at gmail.com (Thiago Arrais)
Date: Tue Dec 20 09:26:11 2005
Subject: [antlr-interest] Unexpected char when generating lexer
Message-ID: <e163e2f50512200926i5562ebb1t@mail.gmail.com>

I am trying to create a lexer that needs to convert ASCII three-letter
code. I have a rule that looks like

1 ASCII
2	: "NUL" { $setText("\u0000"); }
3	| "SOH" { $setText("\u0001"); }
4	| "STX" { $setText("\u0002"); }
5	| "ETX" { $setText("\u0003"); }
6	;

When trying to generate the lexer, Antlr gives me the error
"unexpected char: 'u'" at lines 2-5.

Is this expected behavior? Does antlr actually care about what's
inside the semantic actions?

I need the lexer to map the codes to those unicode values. Can anyone
think of a workaround?

Regards,

Thiago Arrais
From dev at arabink.com  Tue Dec 20 10:08:33 2005
From: dev at arabink.com (Gregg Reynolds)
Date: Tue Dec 20 10:08:46 2005
Subject: [antlr-interest] Unexpected char when generating lexer
In-Reply-To: <e163e2f50512200926i5562ebb1t@mail.gmail.com>
References: <e163e2f50512200926i5562ebb1t@mail.gmail.com>
Message-ID: <43A848A1.6030604@arabink.com>

Thiago Arrais wrote:
> I am trying to create a lexer that needs to convert ASCII three-letter
> code. I have a rule that looks like
> 
> 1 ASCII
> 2	: "NUL" { $setText("\u0000"); }
> 3	| "SOH" { $setText("\u0001"); }
> 4	| "STX" { $setText("\u0002"); }
> 5	| "ETX" { $setText("\u0003"); }
> 6	;
> 
> When trying to generate the lexer, Antlr gives me the error
> "unexpected char: 'u'" at lines 2-5.
> 
Try using single quotes:  '\u0000'.  That works for me.
From thiago.arrais at gmail.com  Tue Dec 20 12:28:25 2005
From: thiago.arrais at gmail.com (Thiago Arrais)
Date: Tue Dec 20 12:28:27 2005
Subject: [antlr-interest] Unexpected char when generating lexer
In-Reply-To: <43A848A1.6030604@arabink.com>
References: <e163e2f50512200926i5562ebb1t@mail.gmail.com>
	<43A848A1.6030604@arabink.com>
Message-ID: <e163e2f50512201228v3961eda5q@mail.gmail.com>

2005/12/20, Gregg Reynolds <dev@arabink.com>:
> Try using single quotes:  '\u0000'.  That works for me.

Weird. The following grammar (with single quotes) gives me the same error.

---- start grammar ---
class TestLexer extends Lexer;

ASCII : "NUL" { $setText('\u0000'); } ;
---- end grammar ---

I have antlr 2.7.5 here. What version are you using?

This is pretty weird, the docs for my version say that the semantic
action blocks are simple character sequences. Although, in these
special case, they aren't (i.e. the '$' isn't pure Java and needs to
be translated into Java code by antlr).

When fed with this other slightly different grammar, antlr is able to
generate code. This one doesn't have the '$' special character.

---- start grammar ---
class TestLexer extends Lexer;

ASCII : "NUL" { setText("\u0000") ;} ;
---- end grammar ---

This approach worked for me, but I wonder if there is any hidden issue now.

Any ideas?

Thanks,

Thiago Arrais
From h.kocher at pharmatechnik.de  Tue Dec 20 12:17:55 2005
From: h.kocher at pharmatechnik.de (Dr. Kocher, Hartmut)
Date: Tue Dec 20 12:33:07 2005
Subject: [antlr-interest] How to use a value more than once?
Message-ID: <D43540A44D3F794787378D8B08E8AE5355B502@staexc01.pharmatechnik.de>

Hi,

 

I'm trying to build a first prototype using ANTLR3 and ST.

 

I need to reuse a value more than once because I want it to use in two
different templates.

 

Here's an artificial example to keep it short:

 

I parsed two properties name and text (Identifier and String).

 

Something like:  

rules : rule*;

rule : name text -> ...???;

 

Now I have two templates. One generates code like

 

private MyClass _<name>; 

 

The other template generates:

 

void Init() {

   _<name> = new MyClass();

  _<name>.Text = <text>;

}

 

This should be repeated for all parsed values.

 

How can I call two different templates with the same values? The "->"
syntax only allows to call one template at a time. I thought about
filling two lists with expanded templates. Still I don't know how to
call two different templates.

 

What's the preferred way to handle this?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051220/db515b07/attachment.html
From seclib at seclib.com  Tue Dec 20 12:40:15 2005
From: seclib at seclib.com (Xue Yong Zhi)
Date: Tue Dec 20 12:44:13 2005
Subject: [antlr-interest] Re: Unexpected char when generating lexer
In-Reply-To: <e163e2f50512201228v3961eda5q@mail.gmail.com>
References: <e163e2f50512200926i5562ebb1t@mail.gmail.com>	<43A848A1.6030604@arabink.com>
	<e163e2f50512201228v3961eda5q@mail.gmail.com>
Message-ID: <43A86C2F.3030703@seclib.com>

I have seen a similar issue and did what you did (remove '$').
Look like a bug for me.

Xue Yong Zhi
http://seclib.blogspot.com

Thiago Arrais wrote:
> 2005/12/20, Gregg Reynolds <dev@arabink.com>:
> 
>>Try using single quotes:  '\u0000'.  That works for me.
> 
> 
> Weird. The following grammar (with single quotes) gives me the same error.
> 
> ---- start grammar ---
> class TestLexer extends Lexer;
> 
> ASCII : "NUL" { $setText('\u0000'); } ;
> ---- end grammar ---
> 
> I have antlr 2.7.5 here. What version are you using?
> 
> This is pretty weird, the docs for my version say that the semantic
> action blocks are simple character sequences. Although, in these
> special case, they aren't (i.e. the '$' isn't pure Java and needs to
> be translated into Java code by antlr).
> 
> When fed with this other slightly different grammar, antlr is able to
> generate code. This one doesn't have the '$' special character.
> 
> ---- start grammar ---
> class TestLexer extends Lexer;
> 
> ASCII : "NUL" { setText("\u0000") ;} ;
> ---- end grammar ---
> 
> This approach worked for me, but I wonder if there is any hidden issue now.
> 
> Any ideas?
> 
> Thanks,
> 
> Thiago Arrais
> 

From seclib at seclib.com  Tue Dec 20 12:41:08 2005
From: seclib at seclib.com (Xue Yong Zhi)
Date: Tue Dec 20 12:54:01 2005
Subject: [antlr-interest] Re: Unexpected char when generating lexer
In-Reply-To: <e163e2f50512201228v3961eda5q@mail.gmail.com>
References: <e163e2f50512200926i5562ebb1t@mail.gmail.com>	<43A848A1.6030604@arabink.com>
	<e163e2f50512201228v3961eda5q@mail.gmail.com>
Message-ID: <43A86C64.8000806@seclib.com>

I have seen a similar issue and did what you did (remove '$').
Look like a bug for me.

Xue Yong Zhi
http://seclib.blogspot.com

Thiago Arrais wrote:
> 2005/12/20, Gregg Reynolds <dev@arabink.com>:
> 
>>Try using single quotes:  '\u0000'.  That works for me.
> 
> 
> Weird. The following grammar (with single quotes) gives me the same error.
> 
> ---- start grammar ---
> class TestLexer extends Lexer;
> 
> ASCII : "NUL" { $setText('\u0000'); } ;
> ---- end grammar ---
> 
> I have antlr 2.7.5 here. What version are you using?
> 
> This is pretty weird, the docs for my version say that the semantic
> action blocks are simple character sequences. Although, in these
> special case, they aren't (i.e. the '$' isn't pure Java and needs to
> be translated into Java code by antlr).
> 
> When fed with this other slightly different grammar, antlr is able to
> generate code. This one doesn't have the '$' special character.
> 
> ---- start grammar ---
> class TestLexer extends Lexer;
> 
> ASCII : "NUL" { setText("\u0000") ;} ;
> ---- end grammar ---
> 
> This approach worked for me, but I wonder if there is any hidden issue now.
> 
> Any ideas?
> 
> Thanks,
> 
> Thiago Arrais
> 

From parrt at cs.usfca.edu  Tue Dec 20 12:56:14 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Dec 20 12:54:18 2005
Subject: [antlr-interest] lisp-like issues
In-Reply-To: <4EFE19E52F4F844D997F24D759C4A23BD1CB1B@etg2.etg.local>
References: <4EFE19E52F4F844D997F24D759C4A23BD1CB1B@etg2.etg.local>
Message-ID: <6049D17D-42BD-41E5-8F5E-43A8A8E26020@cs.usfca.edu>


On Dec 19, 2005, at 3:26 PM, Brannon King wrote:

> Suppose I have a grammar like the following:
>
> (funcName returnName param1 param2 (funcName ...) ...)
>
> (The actual grammar is EDIF and it is LISP-like).
>
> I set all my built-in funcNames as tokens in the Lexer. The Lexer
> Identifier rule picks up funcName, retName, param, etc. However, there
> is no restriction in the language that the returnName or params be
> different from any of the built-in function names. Function calls just
> happen to be the first item in the list. So when I tell the Identifier
> rule to testLiterals, I get errors when my other params have the same
> name as a function. When I tell it to not test literals, I get an  
> error
> on the very first function that looks like this: expecting "funcName",
> found 'funcName'.

This is the standard "my keywords can be variables" problem.  I  
suggest not having keywords as LISP type stuff usually  doesn't.   
Just treat everything uniformly like ID (no "literals" in your grammar).

Ter
From parrt at cs.usfca.edu  Tue Dec 20 12:58:54 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Dec 20 12:56:59 2005
Subject: [antlr-interest] problem with TreeParser grammar -> <AST>:
	unexpected AST node: 'abc'
In-Reply-To: <7509DD89A305F34E9EF16F1EEDFB80AF030BFE1F@drsse401.eu.infineon.com>
References: <7509DD89A305F34E9EF16F1EEDFB80AF030BFE1F@drsse401.eu.infineon.com>
Message-ID: <6E259BE9-BA0F-430B-AA9F-BEE29D712AA2@cs.usfca.edu>


On Dec 20, 2005, at 12:19 AM, <Oliver.Kowalke@infineon.com>  
<Oliver.Kowalke@infineon.com> wrote:

> Hello,
> I don't know why the tree parser grammar doesn't work if I try to  
> parse
> " otype in ('abc','efg') ":
>
> <AST>: unexpected AST node: 'abc'
>
> Could please help me?

That seems weird.  Have you printed out the tree to verify you are  
tree parsing what you think you are?  Is there a token type mismatch  
somehow?

Ter

From parrt at cs.usfca.edu  Tue Dec 20 13:05:44 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Dec 20 13:03:48 2005
Subject: [antlr-interest] How to use a value more than once?
In-Reply-To: <D43540A44D3F794787378D8B08E8AE5355B502@staexc01.pharmatechnik.de>
References: <D43540A44D3F794787378D8B08E8AE5355B502@staexc01.pharmatechnik.de>
Message-ID: <F6B5ECA9-66D9-4B1D-8E8C-92A8EA4E95E9@cs.usfca.edu>


On Dec 20, 2005, at 12:17 PM, Dr. Kocher, Hartmut wrote:
> Hi,
>
> I?m trying to build a first prototype using ANTLR3 and ST.
>
> I need to reuse a value more than once because I want it to use in  
> two different templates.
>
> Here?s an artificial example to keep it short:
>
> I parsed two properties name and text (Identifier and String).
>
> Something like:
>
> rules : rule*;
>
> rule : name text -> ????;
>
> Now I have two templates. One generates code like
>
>  private MyClass _<name>;
>
>  The other template generates:
>
>  void Init() {
>
>    _<name> = new MyClass();
>
>   _<name>.Text = <text>;
>
> }
>
> This should be repeated for all parsed values.
Hi Hartmut, can those MyClass and init output fragments be generated  
from the same template?  You could reuse the attribute (iterating  
over it twice).

If the attributes have to be pushed into multiple templates, you'd  
have to do that manually.  I guess you'd also have to return multiple  
templates manually, right?

Hmm...you want to say this:

rule : name text -> t1(args), t2(args) ;

or something?  Interesting.  How would we refer to this though with a  
rule label?  At the moment, $label.st is the sole template generated  
for a rule.

Ter

From dev at arabink.com  Tue Dec 20 13:54:46 2005
From: dev at arabink.com (Gregg Reynolds)
Date: Tue Dec 20 13:54:58 2005
Subject: [antlr-interest] Unexpected char when generating lexer
In-Reply-To: <e163e2f50512201228v3961eda5q@mail.gmail.com>
References: <e163e2f50512200926i5562ebb1t@mail.gmail.com>	
	<43A848A1.6030604@arabink.com>
	<e163e2f50512201228v3961eda5q@mail.gmail.com>
Message-ID: <43A87DA6.7060809@arabink.com>

Thiago Arrais wrote:
> 2005/12/20, Gregg Reynolds <dev@arabink.com>:
> 
>>Try using single quotes:  '\u0000'.  That works for me.
> 
> 
> Weird. The following grammar (with single quotes) gives me the same error.
> 
Exactly the same message?  That seems odd indeed.  If I understand Java 
correctly,

Sorry, I read and replied in haste.  It looks like maybe a bug.  I dug 
around in the source a bit; it may be in mTEXT_ARG in ActionLexer.java, 
which (I think) gets control after "$setText(" is recognized and looks 
chars up in BitSets that I don't understand; that's as far as I could 
get.  The message seems to come from NoViableAltForCharException.java. 
(This is antlr-2.7.5)

As a work around I would experiment by e.g. putting a space in front of 
\u0000, using a variable, etc.  Or, do you have an editor that will 
allow you to insert the hex value directly?

Also try something like \u0065 or the like to see if "ordinary" chars 
work.  Maybe find the lowest \u00xx that will work.  There's a 
hard-coded test for LA(2) >= '\u0003' && LA(2) <= '\u00ff'.  Dunno why.

FYI: I'm primarily interested in using unicode with Antlr; does anybody 
know of any documentation on the semantics of the BitSets defined in 
ActionLexer?  Presumably they represent character classes of some sort?

Another general question:  does Antlr read in a grammar file as a byte 
stream or a character stream?

Hope it helps,

gregg
From andy at exchange.voelkel.us  Tue Dec 20 14:37:58 2005
From: andy at exchange.voelkel.us (Andy Voelkel)
Date: Tue Dec 20 14:38:10 2005
Subject: [antlr-interest] building the C# runtime (stupid newbie question)
Message-ID: <7AE2E53336B37440A20C9590DB11BCB9ED768A@EXVS01.ex.dslextreme.net>

I am to the point in my ANTLR learning curve where I would like to use
the ANTRL C# runtime. It seemed like I needed to download the whole
source release to do this, so I did.
(Note: I already had the cygwin tools from another project, but having
to get these tools and install them in order to unpack tar and gzip
files is a big hassle for many Windows users. Would it be tremendously
difficult to have a zip file version of the release?)
Anyway, I found the .sln file in /lib/csharp and opened it from Visual
Studio .NET 2003. I was informed that the files needed to be converted
to the newest format. The first time I tried to let this happen I ran
into some file saving problem presumably caused by read-only files. So I
started the whole process over after unpacking the ANTLR release again
and making all the files writeable. 
This time, the file conversion seemed to go OK, but when I tried to
build the solution, I got this error:
"The solution file
'C:\docs\ABC\ANTLR\antlr-2.7.5\lib\csharp\antlr.net-runtime-2.7.2.sln'
was not written successfully. Check that the location is available, the
file is writeable and there is enough room on the disk".
At this point, I went to the ANTLR reference manual to look for clues.
Under the section describing how to build the C# runtime, it said to
first make sure the installation was performed as described in the
"Installation Guide". I have not been able to find any "Installation
Guide". I did a search on the ANTLR site but couldn't find any clues.
Can anyone help me out of this mess?
- Andy
From BBKing at starbridgesystems.com  Tue Dec 20 14:51:52 2005
From: BBKing at starbridgesystems.com (Brannon King)
Date: Tue Dec 20 14:51:56 2005
Subject: [antlr-interest] lisp-like issues
Message-ID: <4EFE19E52F4F844D997F24D759C4A23BD1CD72@etg2.etg.local>

Thanks for the response. Here is what I ended up doing for the
lisp-style language. I left all the keywords that immediately followed
opening parens as tokens in the lexer. However, I changed my identifier
in the lexer to look like this: 

IDENTIFIER
	options {testLiterals=false;} //a built-in function name should
still parse okay
	:
		(ALPHA|'&')	a:(options {greedy=true;}:
'_'|ALPHA|DIGIT)*
		{(a == null)? true: (a.getText().length() < 256)}? //
256 max chars
		{if(lastToken == LPAREN) _ttype =
testLiteralsTable(_ttype); 
		lastToken = _ttype;} ;

I declared lastToken in the Lexer header and used it with all my
non-protected lexer types.

That worked beautifully but then I had the issue with tokens that were
not immediately following a paren. I changed them to look like this:

//in the parser header:
	private final String[] directions = { "INOUT", "INPUT" ,
"OUTPUT" };

//in the parser rules:
direction :
	LP! DIRECTION^ i:IDENTIFIER
		 { -1 != Arrays.binarySearch(directions,
i.getText().toUpperCase()) }?
	RP!;

That methodology worked for the rest of the built-in tokens. Is there
some reason that the throw generated by that last piece of code does not
output line and character numbers by default? I think that would be
useful. I also think it should output the getText for all variables used
in it; if I failed to get a match then I definitely want to know what it
was using to compare. 
From Oliver.Kowalke at infineon.com  Wed Dec 21 00:01:23 2005
From: Oliver.Kowalke at infineon.com (Oliver.Kowalke@infineon.com)
Date: Wed Dec 21 00:01:29 2005
Subject: AW: [antlr-interest] problem with TreeParser grammar -> <AST>:0:0:
	expecting ), found ', '
Message-ID: <7509DD89A305F34E9EF16F1EEDFB80AF0176DE26@drsse401.eu.infineon.com>

I've tested it with antlr-2.7.4.:
If I parse "otype in ('abc')" it works. 
If I try to parse "otype in ('abc','efg')" I get this error:

<AST>:0:0: expecting ), found ','

It seams that the rule

strlist : LPAREN ( STRING COMMA )* STRING RPAREN;

used in

expression : #(IN OTYPE strlist)

in the tree walker doesn't fit. Why? How to fix?
Oliver


>> Hello,
>> I don't know why the tree parser grammar doesn't work if I try to
>> parse
>> " otype in ('abc','efg') ":
>>
>> <AST>: unexpected AST node: 'abc'
>>
>> Could please help me?
>
>That seems weird.  Have you printed out the tree to verify you are
>tree parsing what you think you are?  Is there a token type mismatch
>somehow?
From h.kocher at pharmatechnik.de  Wed Dec 21 00:05:06 2005
From: h.kocher at pharmatechnik.de (Dr. Kocher, Hartmut)
Date: Wed Dec 21 00:08:25 2005
Subject: WG: [antlr-interest] How to use a value more than once?
Message-ID: <D43540A44D3F794787378D8B08E8AE5355B536@staexc01.pharmatechnik.de>

Hi Terence,

actually, it's worse :-)

I want to generate GUI classes (controls like Textfield, Checkbox, etc.). Because each control has different properties to set, I have different templates for each control type. In the window, I have to combine those templates into one Form class (.NET). Therefore, I have two lists of templates: one for setting up the fields in the form, another to initialize the controls. Therefore, I have to call the templates in my subrules but use it in the main rule.

The actual grammar goes something like this:

form : FORM ID '{' control* '}';
control: textfield|checkbox|... ;
textfield: TEXTFIELD ID label SEMI;

You get the idea...

For textfield I have to generate at least two templates with

Textfield <name>;

And another

<name> = new Textfield();
<name>.Text = <label>;
...

Those may be different for each control.
In the form I expand these in two places: as a field declaration and in the contructor.

So it would be useful to be able to
- call multiple templates per rule.
- add templates to lists (currently, there's only a shortcut for the one and only return value (p+=... syntax).

BTW, I think it would be useful if a rule like 'control' above would return the template of textfield or checkbox by default instead of nothing. If the user doesn't use the template, no harm is done. If he wants another template he can override it using the -> syntax.

Finally, another solution to my problem would be to make multiple passes thru the grammar, one to get the fields, one to build the contructor method. So I could build a tree parser first. Then make multiple passes thru the AST. Can I specify multiple parsers in the same combined grammar? That would be nice.

Kind regards
Hartmut

-----Urspr?ngliche Nachricht-----
Von: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] Im Auftrag von Terence Parr
Gesendet: Dienstag, 20. Dezember 2005 22:06
An: ANTLR Interest
Betreff: Re: [antlr-interest] How to use a value more than once?


On Dec 20, 2005, at 12:17 PM, Dr. Kocher, Hartmut wrote:
> Hi,
>
> I'm trying to build a first prototype using ANTLR3 and ST.
>
> I need to reuse a value more than once because I want it to use in  
> two different templates.
>
> Here's an artificial example to keep it short:
>
> I parsed two properties name and text (Identifier and String).
>
> Something like:
>
> rules : rule*;
>
> rule : name text -> ...???;
>
> Now I have two templates. One generates code like
>
>  private MyClass _<name>;
>
>  The other template generates:
>
>  void Init() {
>
>    _<name> = new MyClass();
>
>   _<name>.Text = <text>;
>
> }
>
> This should be repeated for all parsed values.
Hi Hartmut, can those MyClass and init output fragments be generated  
from the same template?  You could reuse the attribute (iterating  
over it twice).

If the attributes have to be pushed into multiple templates, you'd  
have to do that manually.  I guess you'd also have to return multiple  
templates manually, right?

Hmm...you want to say this:

rule : name text -> t1(args), t2(args) ;

or something?  Interesting.  How would we refer to this though with a  
rule label?  At the moment, $label.st is the sole template generated  
for a rule.

Ter

From gt54-antlr at cyconix.com  Wed Dec 21 01:25:37 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Wed Dec 21 01:25:46 2005
Subject: [antlr-interest] problem with TreeParser grammar ->
	<AST>:	unexpected AST node: 'abc'
In-Reply-To: <7509DD89A305F34E9EF16F1EEDFB80AF030BFE1F@drsse401.eu.infineon.com>
References: <7509DD89A305F34E9EF16F1EEDFB80AF030BFE1F@drsse401.eu.infineon.com>
Message-ID: <43A91F91.1070900@cyconix.com>

Oliver.Kowalke@infineon.com wrote:
> 		#(IN OTYPE strlist)

Should that be #(IN strlist)?

Paul

From Oliver.Kowalke at infineon.com  Wed Dec 21 01:40:15 2005
From: Oliver.Kowalke at infineon.com (Oliver.Kowalke@infineon.com)
Date: Wed Dec 21 01:40:26 2005
Subject: AW: [antlr-interest] problem with TreeParser grammar
	-><AST>:	unexpected AST node: 'abc'
Message-ID: <7509DD89A305F34E9EF16F1EEDFB80AF030BFE25@drsse401.eu.infineon.com>

>> 		#(IN OTYPE strlist)
>Should that be #(IN strlist)?

OTYPE is a token. I've distinguish between "otype in ('abc','efg')" and
"stepp in ('klm')". So I think I have to put it in the tree grammar?!

Oliver
From Oliver.Kowalke at infineon.com  Wed Dec 21 02:10:12 2005
From: Oliver.Kowalke at infineon.com (Oliver.Kowalke@infineon.com)
Date: Wed Dec 21 02:10:17 2005
Subject: AW: [antlr-interest] problem with TreeParser grammar-><AST> - solved
Message-ID: <7509DD89A305F34E9EF16F1EEDFB80AF030BFE27@drsse401.eu.infineon.com>

Hello,
Error was raised by a mistake in a lexer rule. Strlist rules should be:

strlist : LPARAN STRING ( STRING COMMA )* RPARAN

Oliver
From gabriel.adrian.radu at googlemail.com  Wed Dec 21 02:50:33 2005
From: gabriel.adrian.radu at googlemail.com (Gabriel Radu)
Date: Wed Dec 21 02:50:35 2005
Subject: [antlr-interest] problem with TreeParser grammar -> <AST>:0:0:
	expecting ), found ', '
In-Reply-To: <7509DD89A305F34E9EF16F1EEDFB80AF0176DE26@drsse401.eu.infineon.com>
References: <7509DD89A305F34E9EF16F1EEDFB80AF0176DE26@drsse401.eu.infineon.com>
Message-ID: <67e2ed240512210250v590dfd65n@mail.gmail.com>

Try this construct instead
strlist : LPAREN STRING ( COMMA  STRING )* RPAREN;


On 21/12/05, Oliver.Kowalke@infineon.com <Oliver.Kowalke@infineon.com> wrote:
> I've tested it with antlr-2.7.4.:
> If I parse "otype in ('abc')" it works.
> If I try to parse "otype in ('abc','efg')" I get this error:
>
> <AST>:0:0: expecting ), found ','
>
> It seams that the rule
>
> strlist : LPAREN ( STRING COMMA )* STRING RPAREN;
>
> used in
>
> expression : #(IN OTYPE strlist)
>
> in the tree walker doesn't fit. Why? How to fix?
> Oliver
>
>
> >> Hello,
> >> I don't know why the tree parser grammar doesn't work if I try to
> >> parse
> >> " otype in ('abc','efg') ":
> >>
> >> <AST>: unexpected AST node: 'abc'
> >>
> >> Could please help me?
> >
> >That seems weird.  Have you printed out the tree to verify you are
> >tree parsing what you think you are?  Is there a token type mismatch
> >somehow?
>
From h.kocher at pharmatechnik.de  Wed Dec 21 03:01:19 2005
From: h.kocher at pharmatechnik.de (Dr. Kocher, Hartmut)
Date: Wed Dec 21 03:21:27 2005
Subject: [antlr-interest] Problem with return values in ANTLR 3
Message-ID: <D43540A44D3F794787378D8B08E8AE5355B5D7@staexc01.pharmatechnik.de>

I try to return a boolean value from a rule (instead of the usual
template).

 

Here's the simple rule:

 

checkedState returns [boolean result]

            : 'Checked' '=' ('true' {$result = true; } |'false') ';'

            ;

 

 

Below's the code that's getting generated (ANTLR 3, EA7) (stripped down
to some interesting parts):

 

My thought's on this:

1)       The result class seems to be OK. The Boolean field is added.
Maybe it should be public as well...

2)       The local variable "result" either has the wrong type or is not
needed at all.

3)       Instead of "result = true" I would have expected that
"retval.result = true" would be generated.

4)       Instead of returning "result", it should return "retval" as
usual.

 

Any ideas?

 

BTW: How would one access the result value in another rule?
$checkedState.result ???

 

public static class checkedState_return extends RuleReturnScope {

        boolean result;

        public StringTemplate st;

        public StringTemplate getTemplate() { return st; }

    };

 

    // $ANTLR start checkedState

    public checkedState_return checkedState() throws
RecognitionException {   

 

        checkedState_return retval = new checkedState_return();

        retval.start = (Token)input.LT(1);

        checkedState_return result;

 

 

...

            switch (alt4) {

                case 1 :

                    // C:\XTplus\GUI\ANTLR\GuiParser.g:29:26: 'true'

                    {

 

                    match(input,15,FOLLOW_15_in_checkedState178);

 

                    result = true; 

 

 

                    // TEMPLATE REWRITE

 

 

                    }

                    break;

...

        return result;

 

    }

    // $ANTLR end checkedState

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051221/fb8c78bf/attachment-0001.html
From endigitalmind at yahoo.co.uk  Wed Dec 21 04:36:29 2005
From: endigitalmind at yahoo.co.uk (Phil Ritchie)
Date: Wed Dec 21 04:36:33 2005
Subject: [antlr-interest] building the C# runtime (stupid newbie question)
In-Reply-To: <7AE2E53336B37440A20C9590DB11BCB9ED768A@EXVS01.ex.dslextreme.net>
Message-ID: <20051221123629.99688.qmail@web25802.mail.ukl.yahoo.com>



--- Andy Voelkel <andy@exchange.voelkel.us> wrote:

> I am to the point in my ANTLR learning curve where I
> would like to use
> the ANTRL C# runtime. It seemed like I needed to
> download the whole
> source release to do this, so I did.
> (Note: I already had the cygwin tools from another
> project, but having
> to get these tools and install them in order to
> unpack tar and gzip
> files is a big hassle for many Windows users. Would
> it be tremendously
> difficult to have a zip file version of the
> release?)
> Anyway, I found the .sln file in /lib/csharp and
> opened it from Visual
> Studio .NET 2003. I was informed that the files
> needed to be converted
> to the newest format. The first time I tried to let
> this happen I ran
> into some file saving problem presumably caused by
> read-only files. So I
> started the whole process over after unpacking the
> ANTLR release again
> and making all the files writeable. 
> This time, the file conversion seemed to go OK, but
> when I tried to
> build the solution, I got this error:
> "The solution file
>
'C:\docs\ABC\ANTLR\antlr-2.7.5\lib\csharp\antlr.net-runtime-2.7.2.sln'
> was not written successfully. Check that the
> location is available, the
> file is writeable and there is enough room on the
> disk".
> At this point, I went to the ANTLR reference manual
> to look for clues.
> Under the section describing how to build the C#
> runtime, it said to
> first make sure the installation was performed as
> described in the
> "Installation Guide". I have not been able to find
> any "Installation
> Guide". I did a search on the ANTLR site but
> couldn't find any clues.
> Can anyone help me out of this mess?
> - Andy
> 
It sounds to me like there's a problem with file
access rights. I've built the last couple of releases
with VS 2003 and had no problems at all. Have you
tried copying the folder that the project and it's
files are in to another location and build it there?



	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com
From parrt at cs.usfca.edu  Wed Dec 21 11:29:53 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec 21 11:27:57 2005
Subject: WG: [antlr-interest] How to use a value more than once?
In-Reply-To: <D43540A44D3F794787378D8B08E8AE5355B536@staexc01.pharmatechnik.de>
References: <D43540A44D3F794787378D8B08E8AE5355B536@staexc01.pharmatechnik.de>
Message-ID: <A3F2F7F1-C5D9-479E-8D53-8171FF6F5BA0@cs.usfca.edu>


On Dec 21, 2005, at 12:05 AM, Dr. Kocher, Hartmut wrote:
> I want to generate GUI classes (controls like Textfield, Checkbox,  
> etc.). Because each control has different properties to set, I have  
> different templates for each control type. In the window, I have to  
> combine those templates into one Form class (.NET). Therefore, I  
> have two lists of templates: one for setting up the fields in the  
> form, another to initialize the controls. Therefore, I have to call  
> the templates in my subrules but use it in the main rule.
>
> The actual grammar goes something like this:
>
> form : FORM ID '{' control* '}';
> control: textfield|checkbox|... ;
> textfield: TEXTFIELD ID label SEMI;
>
> You get the idea...
>
> For textfield I have to generate at least two templates with
>
> Textfield <name>;
>
> And another
>
> <name> = new Textfield();
> <name>.Text = <label>;
> ...

Can you collect the big templates in one pass and then simply pass a  
list of these templates to another template?  For example, antlr v3 I  
collect a bunch of rule templates for generating code and then I pass  
it to the header file template so it can iterate over the templates  
and pull out various attributes like the rule name to generate the  
header.  Templates can be treated as data objects :)

> So it would be useful to be able to
> - call multiple templates per rule.

We'd need a naming scheme to refer to them from the invoking rule.

> - add templates to lists (currently, there's only a shortcut for  
> the one and only return value (p+=... syntax).
>
> BTW, I think it would be useful if a rule like 'control' above  
> would return the template of textfield or checkbox by default  
> instead of nothing. If the user doesn't use the template, no harm  
> is done. If he wants another template he can override it using the - 
> > syntax.

True.  Was wondering about this.  THe problem is that it's only  
useful when you refer to a single rule in a production...not that  
common.  When there are multiple elements in a production, what do  
you do?

> Finally, another solution to my problem would be to make multiple  
> passes thru the grammar, one to get the fields, one to build the  
> contructor method. So I could build a tree parser first. Then make  
> multiple passes thru the AST. Can I specify multiple parsers in the  
> same combined grammar? That would be nice.

That gets awkward.  You need to have actions that say "if (pass==1)"  
etc...

Ter
From parrt at cs.usfca.edu  Wed Dec 21 11:31:18 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec 21 11:29:17 2005
Subject: [antlr-interest] Problem with return values in ANTLR 3
In-Reply-To: <D43540A44D3F794787378D8B08E8AE5355B5D7@staexc01.pharmatechnik.de>
References: <D43540A44D3F794787378D8B08E8AE5355B5D7@staexc01.pharmatechnik.de>
Message-ID: <63B620EB-1324-4D91-9363-39FE0C48ADCB@cs.usfca.edu>


On Dec 21, 2005, at 3:01 AM, Dr. Kocher, Hartmut wrote:

> I try to return a boolean value from a rule (instead of the usual  
> template).
>
>
>
> Here?s the simple rule:
>
>
>
> checkedState returns [boolean result]
>
>             : 'Checked' '=' ('true' {$result = true; } |'false') ';'
>
>             ;
>
>
>
> Below?s the code that?s getting generated (ANTLR 3, EA7) (stripped  
> down to some interesting parts):
>
>  My thought?s on this:
>
> 1)       The result class seems to be OK. The Boolean field is  
> added. Maybe it should be public as well?
>
> 2)       The local variable ?result? either has the wrong type or  
> is not needed at all.
>
> 3)       Instead of ?result = true? I would have expected that  
> ?retval.result = true? would be generated.
>
> 4)       Instead of returning ?result?, it should return ?retval?  
> as usual.
>
>  Any ideas?

Seems like a bug...adding to list.

> BTW: How would one access the result value in another rule?  
> $checkedState.result ???

Yes, or $label.result

Ter

From jimi at temporal-wave.com  Wed Dec 21 15:09:45 2005
From: jimi at temporal-wave.com (Jim Idle)
Date: Wed Dec 21 15:09:48 2005
Subject: [antlr-interest] Problem with return values in ANTLR 3
Message-ID: <B36CCC332A32904F8FA3DE134A23533615BF89@wavemachine.temporal-wave.com>

I have found that you need to do this (though it is probably a bug and
you should use the $ - please notify wildly if you change this Ter as my
grammars will suddenly break for no apparent reason ;-)):

: 'Checked' '=' ('true' {result = true; } |'false') ';'

-----Original Message-----
From: antlr-interest-bounces@antlr.org [mailto:antlr-interest- 

On Dec 21, 2005, at 3:01 AM, Dr. Kocher, Hartmut wrote:

> I try to return a boolean value from a rule (instead of the usual  
> template).
>
>             : 'Checked' '=' ('true' {$result = true; } |'false') ';'
>
>             ;

Seems like a bug...adding to list.
From parrt at cs.usfca.edu  Wed Dec 21 15:14:02 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec 21 15:12:02 2005
Subject: [antlr-interest] Problem with return values in ANTLR 3
In-Reply-To: <B36CCC332A32904F8FA3DE134A23533615BF89@wavemachine.temporal-wave.com>
References: <B36CCC332A32904F8FA3DE134A23533615BF89@wavemachine.temporal-wave.com>
Message-ID: <C11511ED-694B-4A41-94F7-C24469470D5C@cs.usfca.edu>


On Dec 21, 2005, at 3:09 PM, Jim Idle wrote:

> I have found that you need to do this (though it is probably a bug and
> you should use the $ - please notify wildly if you change this Ter  
> as my
> grammars will suddenly break for no apparent reason ;-)):
>
> : 'Checked' '=' ('true' {result = true; } |'false') ';'

This should not compile ultimately, though it does now.  I will later  
add _ or whatever so that you must properly use $.  The solution here  
cannot be done with any input fix...i'm working on the fix right  
now.  Almost done.

Ter
From BBKing at starbridgesystems.com  Wed Dec 21 15:33:29 2005
From: BBKing at starbridgesystems.com (Brannon King)
Date: Wed Dec 21 15:33:47 2005
Subject: [antlr-interest] ANTLR lexer vs. JFace RuleBasedScanner
Message-ID: <4EFE19E52F4F844D997F24D759C4A23BD6835C@etg2.etg.local>

I am writing a text language plugin for Eclipse. I have a custom
ReconcilingStrategy that uses the ANTLR parser to locate errors, and the
markers are updated accordingly. It works great. For syntax highlighting
I'm at a loss. What is not obvious to me is how to avoid the
PresentationReconciler, or at least make it use my scan/parse already
performed. It doesn't make sense to me that I would need more than one
scanner.

Can someone point me to an example where ANTLR is used for syntax
highlighting in an Eclipse TextEditor project? Thanks.
From parrt at cs.usfca.edu  Wed Dec 21 15:44:12 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec 21 15:42:13 2005
Subject: [antlr-interest] Problem with return values in ANTLR 3
In-Reply-To: <D43540A44D3F794787378D8B08E8AE5355B5D7@staexc01.pharmatechnik.de>
References: <D43540A44D3F794787378D8B08E8AE5355B5D7@staexc01.pharmatechnik.de>
Message-ID: <9A00E9C8-86A7-460A-B215-5A4429AE4833@cs.usfca.edu>

Hartmut,

This has been fixed in the depot.  Want a tarball?

Ter
From mail at martin-probst.com  Thu Dec 22 01:25:37 2005
From: mail at martin-probst.com (Martin Probst)
Date: Thu Dec 22 01:25:47 2005
Subject: [antlr-interest] ANTLR lexer vs. JFace RuleBasedScanner
In-Reply-To: <4EFE19E52F4F844D997F24D759C4A23BD6835C@etg2.etg.local>
References: <4EFE19E52F4F844D997F24D759C4A23BD6835C@etg2.etg.local>
Message-ID: <1135243537.5503.2.camel@localhost.localdomain>

> For syntax highlighting I'm at a loss. What is not obvious to me is
> how to avoid the PresentationReconciler, or at least make it use my
> scan/parse already performed.

As far as I understand that underdocumented and overcomplicated API, you
can't. They consider reconciling and text highlighting to be two
completely different things (which might actually be a sane decision).
You can however implement the Scanner interface and return tokens
wrapping the ANTLR tokens.

> Can someone point me to an example where ANTLR is used for syntax
> highlighting in an Eclipse TextEditor project? Thanks.

I guess ANTLREclipse does?

Martin

From scott at javadude.com  Thu Dec 22 02:49:46 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Thu Dec 22 02:50:27 2005
Subject: [antlr-interest] ANTLR lexer vs. JFace RuleBasedScanner
In-Reply-To: <1135243537.5503.2.camel@localhost.localdomain>
Message-ID: <200512221037.jBMAbPk9017233@s2.eroute.net>

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Martin Probst

> > Can someone point me to an example where ANTLR is used for syntax 
> > highlighting in an Eclipse TextEditor project? Thanks.
> 
> I guess ANTLREclipse does?

Correct

-- Scott


From prashant.deva at gmail.com  Thu Dec 22 05:29:13 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Thu Dec 22 05:29:16 2005
Subject: [antlr-interest] ANTLR Studio NEW WEBSITE!
Message-ID: <41fed8f80512220529y2b6eb618t479f69307be223b3@mail.gmail.com>

The cool new website for ANTLR Studio is ready!

Visit it at -

www.placidsystems.com

The old link to antlrstudio.com now redirects to placidsystems.com.

Enjoy!
--
Prashant Deva
Creator, ANTLR Studio,www.antlrstudio.com
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051222/522dd44d/attachment.html
From prashant.deva at gmail.com  Thu Dec 22 05:31:48 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Thu Dec 22 05:31:52 2005
Subject: [antlr-interest] Re: ANTLR Studio NEW WEBSITE!
In-Reply-To: <41fed8f80512220529y2b6eb618t479f69307be223b3@mail.gmail.com>
References: <41fed8f80512220529y2b6eb618t479f69307be223b3@mail.gmail.com>
Message-ID: <41fed8f80512220531o56799856jfd923b90ffe86656@mail.gmail.com>

I forgot to mention that the sign up area still needs to be put under the
new design.
That should be done by tomorrow.

But the rest of the website is still there for you to enjoy :)

If you run across any problem or bad links please inform me.

--
Prashant Deva
Creator, ANTLR Studio,www.antlrstudio.com
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051222/dfc2d3a1/attachment.html
From parrt at cs.usfca.edu  Thu Dec 22 16:14:21 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec 22 16:16:40 2005
Subject: [antlr-interest] anybody use exception[label]?
Message-ID: <30A3DE7E-5362-4E16-B920-BF479DA2595D@cs.usfca.edu>

Hi,

Anybody use the feature where you can attach an exception to a label  
to put in a specific try/catch?

a : A b:B
    ;
   exception[b]
     catch[RecognitionException re] {...}

???

Thanks,
Ter
From smcg2297 at frii.com  Thu Dec 22 16:40:29 2005
From: smcg2297 at frii.com (Stuart)
Date: Thu Dec 22 16:51:24 2005
Subject: [antlr-interest] lexer question from newbie
Message-ID: <dofh1u$krm$1@sea.gmane.org>

I am trying to use Antlr for the first time.  I have used 
yacc/lex only a couple times, and this is my first time 
using an LL parser so I am basically clueless... :-)

Below is my attempt at a lexer for a simple LaTeX-like
language.  It was fine until I added the ECHR rule.  
Now, I get a warning:
  latex.g: warning:lexical nondeterminism between rules CMD and TEXT upon
  latex.g:     k==1:'\\'
  latex.g:     k==2:'A'..'Z','a'..'z'
 
I know I do not understand LL parsing but I thought
that with k=2 the lexer could decide between an ECHR
and a CMD when it sees a '\\', and that any [a-zA-Z]'s 
that follow would be either TCHRs (ending up in a TEXT 
token) or part of a CMD, according to whether a CMD 
or TEXT/TCHR/ECHR was already being parsed.  
So I can't see where the ambiguity is coming from.
How can "\\A" be anything but a CMD?
Obviously I am missing something (probably very obvious).  
Can someone enlighten me, and more importantly, give 
me some hints on how to fix this? 

//------------------------------------
class LatexLexer extends Lexer;
options {
    k = 2; 
    charVocabulary='\u0000'..'\u007F'; // ascii 
    }
LCB : '{' ;
RCB : '}' ;
CMD : '\\' ( 'a'..'z' | 'A'..'Z' )+ ('*')? ;
protected
ECHR : '\\' (' ' | '&' | '$' | '%' | '{' | '}') ;
protected
TCHR : (~( '\\' | '{' | '}' | '[' | ']' | '\n')) ;
TEXT : (TCHR | ECHR | '\n' {$nl})+ ;
//-----------------------------------


From parrt at cs.usfca.edu  Thu Dec 22 16:55:43 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec 22 16:58:01 2005
Subject: [antlr-interest] lexer question from newbie
In-Reply-To: <dofh1u$krm$1@sea.gmane.org>
References: <dofh1u$krm$1@sea.gmane.org>
Message-ID: <C1F9B0BE-4ED0-4FA3-B1ED-387FC2362B83@cs.usfca.edu>


On Dec 22, 2005, at 4:40 PM, Stuart wrote:

> I am trying to use Antlr for the first time.  I have used
> yacc/lex only a couple times, and this is my first time
> using an LL parser so I am basically clueless... :-)
>
> Below is my attempt at a lexer for a simple LaTeX-like
> language.  It was fine until I added the ECHR rule.
> Now, I get a warning:
>   latex.g: warning:lexical nondeterminism between rules CMD and  
> TEXT upon
>   latex.g:     k==1:'\\'
>   latex.g:     k==2:'A'..'Z','a'..'z'

I think this is a limitation of the linear approx lookahead.  It  
improperly combines sets to \A looks like TEXT can match it.  Since  
CMD is first, it will resolve properly, however.  You can ignore the  
error I'm pretty sure.  Sorry for the ugliness.

Ter

From parrt at cs.usfca.edu  Thu Dec 22 17:16:14 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec 22 17:18:32 2005
Subject: [antlr-interest] ANTLR 2.7.6 released :)
Message-ID: <BBDF36F5-B98B-4178-BABF-95A9BD54EBF0@cs.usfca.edu>

Howdy,

ANTLR 2.7.6 is ready (i hope!).  A bug fix release (with small new  
features).  Thanks to all the people that submitted patches and the  
language target folks: Micheal Jordan, Kunle Odutola, Anthony  
Oguntimehin, Wolfgang Hafelinger, Marq Kole, Ric Klaren.  Thanks to  
Scott Stanchfield and Prashant Deva for their nice enhancements /  
fixes.  Who am I missing?

http://www.antlr.org/download.html

I only have the source download up there.  I'm assuming that the  
geniuses like Wolfgang that know about .msi etc... will build those  
and email them to me ;)  I'll update the page.

Ter
From inshua at gmail.com  Thu Dec 22 18:09:33 2005
From: inshua at gmail.com (=?GB2312?B?0MLC8g==?=)
Date: Thu Dec 22 18:09:38 2005
Subject: [antlr-interest] help,
	is there anybody tell me the text range of a AST node?
Message-ID: <2506dcb70512221809q2304ea15t@mail.gmail.com>

i try getLine() and getColumn(), but it's always be 0 and 1.

i'd spent many days to explorer the source code, it's seemed TOKEN never
related to AST NODE,is it?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051223/ba1aa4fb/attachment.html
From duboimat at iro.umontreal.ca  Thu Dec 22 18:20:58 2005
From: duboimat at iro.umontreal.ca (duboimat@iro.umontreal.ca)
Date: Thu Dec 22 18:21:03 2005
Subject: [antlr-interest] ANTLR 2.7.6 released :)
In-Reply-To: <BBDF36F5-B98B-4178-BABF-95A9BD54EBF0@cs.usfca.edu>
References: <BBDF36F5-B98B-4178-BABF-95A9BD54EBF0@cs.usfca.edu>
Message-ID: <20051222212058.pi7ad7yr0gwoskko@webmail.iro.umontreal.ca>

Hello,

I'm trying to compile the example include in the download file
antlr-2.7.6\examples\csharp\csharp_v1

When I tried to compile it with java antlr.Tool it doesn't generate csharp
files.
I don't know if it's 2.7.6 version or the g file in the example are the 
problem.
I do like :
java antlr.Tool files1.g files2.g

thank you,
mat


Quoting Terence Parr <parrt@cs.usfca.edu>:

> Howdy,
>
> ANTLR 2.7.6 is ready (i hope!).  A bug fix release (with small new  
> features).  Thanks to all the people that submitted patches and the  
> language target folks: Micheal Jordan, Kunle Odutola, Anthony  
> Oguntimehin, Wolfgang Hafelinger, Marq Kole, Ric Klaren.  Thanks to  
> Scott Stanchfield and Prashant Deva for their nice enhancements /  
> fixes.  Who am I missing?
>
> http://www.antlr.org/download.html
>
> I only have the source download up there.  I'm assuming that the  
> geniuses like Wolfgang that know about .msi etc... will build those  
> and email them to me ;)  I'll update the page.
>
> Ter
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

From smcg2297 at frii.com  Thu Dec 22 18:23:42 2005
From: smcg2297 at frii.com (Stuart)
Date: Thu Dec 22 18:24:05 2005
Subject: [antlr-interest] Re: lexer question from newbie
References: <dofh1u$krm$1@sea.gmane.org>
	<C1F9B0BE-4ED0-4FA3-B1ED-387FC2362B83@cs.usfca.edu>
Message-ID: <dofn3i$3qf$1@sea.gmane.org>


"Terence Parr" <parrt@cs.usfca.edu> wrote in message
news:C1F9B0BE-4ED0-4FA3-B1ED-387FC2362B83@cs.usfca.edu...
>
> On Dec 22, 2005, at 4:40 PM, Stuart wrote:
>
> > I am trying to use Antlr for the first time.  I have used
> > yacc/lex only a couple times, and this is my first time
> > using an LL parser so I am basically clueless... :-)
> >
> > Below is my attempt at a lexer for a simple LaTeX-like
> > language.  It was fine until I added the ECHR rule.
> > Now, I get a warning:
> >   latex.g: warning:lexical nondeterminism between rules CMD and
> > TEXT upon
> >   latex.g:     k==1:'\\'
> >   latex.g:     k==2:'A'..'Z','a'..'z'
>
> I think this is a limitation of the linear approx lookahead.  It
> improperly combines sets to \A looks like TEXT can match it.  Since
> CMD is first, it will resolve properly, however.  You can ignore the
> error I'm pretty sure.  Sorry for the ugliness.
>
> Ter

Thanks for the reply, but I'm not sure that's the problem.
test2.g is the lexer with the problem I posted (and copy of
below).  test1.g is the same lexer but with the ECHR rule
removed (which works ok).  The test2 grammar gives the
same (wrong) results (exception) whether the the CMD
rule is at the start of the rules, or the end.

Here are results produced by both lexers (edited to add
token names after the token numbers):

C:> python test2.py
\cmd text \xcmd ytext
["\cmd",<6>CMD,line=1,col=1]
error: exception caught while lexing:  unexpected char: 'x'

C:> python test1.py
\cmd text \xcmd ytext
["\cmd",<6>CMD,line=1,col=1]
[" text ",<8>TEXT,line=1,col=5]
["\xcmd",<6>CMD,line=1,col=11]
^Z
[" ytext
",<8>TEXT,line=1,col=16]

Test2 fails the same way whether the CMD rule is at the top
or the bottom of the rule set.

Below is test2.g again (test1.g is same except ECHR was
removed.)  As I said, when compiled test2 generates the
warning:
  test2.g: warning:lexical nondeterminism between rules CMD and TEXT upon
  test2.g:     k==1:'\\'
  test2.g:     k==2:'A'..'Z','a'..'z'
But when ECHR is removed (test1.g) no warning is generated,
and the result is correct (my definition of correct :-).

test2.g:
---------
options {language="Python";}
class test2 extends Lexer;
options {
    k = 2;
    charVocabulary='\u0000'..'\u007F'; // ascii
    }
LCB : '{' ;
RCB : '}' ;
protected
ECHR : '\\' (' ' | '&' | '$' | '%' | '{' | '}') ;
protected
TCHR : (~( '\\' | '{' | '}' | '[' | ']' | '\n')) ;
TEXT : (TCHR | ECHR | '\n' {$nl})+ ;
CMD : '\\' ( 'a'..'z' | 'A'..'Z' )+ ('*')? ;


From parrt at cs.usfca.edu  Thu Dec 22 20:55:35 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec 22 20:55:40 2005
Subject: [antlr-interest] ANTLR 2.7.6 released :)
In-Reply-To: <20051222212058.pi7ad7yr0gwoskko@webmail.iro.umontreal.ca>
References: <BBDF36F5-B98B-4178-BABF-95A9BD54EBF0@cs.usfca.edu>
	<20051222212058.pi7ad7yr0gwoskko@webmail.iro.umontreal.ca>
Message-ID: <47CDE919-2D98-40C4-8C79-F97937239C7E@cs.usfca.edu>


On Dec 22, 2005, at 6:20 PM, duboimat@iro.umontreal.ca wrote:

> Hello,
>
> I'm trying to compile the example include in the download file
> antlr-2.7.6\examples\csharp\csharp_v1
>
> When I tried to compile it with java antlr.Tool it doesn't generate  
> csharp
> files.
> I don't know if it's 2.7.6 version or the g file in the example are  
> the problem.
> I do like :
> java antlr.Tool files1.g files2.g

Salut! :)

Strange.  Well, one thing: try one file at a time ;)

Ter
From prashant.deva at gmail.com  Fri Dec 23 00:56:32 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Fri Dec 23 00:56:36 2005
Subject: [antlr-interest] ANTLR 2.7.6. - VERY MAJOR PROBLEM
Message-ID: <41fed8f80512230056g32a194a6se8094f042fa6ea57@mail.gmail.com>

There is a major problem with the antlr jar in 2.7.6 release.

The build seems to be bad and there are NO FILES in the 'antlr' package.
All the subpackages exist but the 'antlr' package does not contain any
files.

Please continue using antlr 2.7.5 till this problem is fixed.

--
Prashant Deva
Creator, ANTLR Studio
Founder, Placid Systems, www.placidsystems.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051223/77a0db3e/attachment.html
From max.andersen at jboss.com  Fri Dec 23 01:00:58 2005
From: max.andersen at jboss.com (Max Rydahl Andersen)
Date: Fri Dec 23 01:01:20 2005
Subject: [antlr-interest] ANTLR 2.7.6 released :)
In-Reply-To: <BBDF36F5-B98B-4178-BABF-95A9BD54EBF0@cs.usfca.edu>
References: <BBDF36F5-B98B-4178-BABF-95A9BD54EBF0@cs.usfca.edu>
Message-ID: <op.s18bbwvjsj49yt@max>


> ANTLR 2.7.6 is ready (i hope!).  A bug fix release (with small new  
> features).  Thanks to all the people that submitted patches and the  
> language target folks: Micheal Jordan, Kunle Odutola, Anthony  
> Oguntimehin, Wolfgang Hafelinger, Marq Kole, Ric Klaren.  Thanks to  
> Scott Stanchfield and Prashant Deva for their nice enhancements /  
> fixes.  Who am I missing?

Me ;)

Just one question - is this release equal to the last RC or has there been
any changes ?

-- 
--
Max Rydahl Andersen
callto://max.rydahl.andersen

Hibernate
max@hibernate.org
http://hibernate.org

JBoss Inc
max.andersen@jboss.com
From hwk.cortex-brainware at t-online.de  Fri Dec 23 03:12:52 2005
From: hwk.cortex-brainware at t-online.de (hwk.cortex-brainware@t-online.de)
Date: Fri Dec 23 03:14:43 2005
Subject: AW: WG: [antlr-interest] How to use a value more than once?
In-Reply-To: <A3F2F7F1-C5D9-479E-8D53-8171FF6F5BA0@cs.usfca.edu>
Message-ID: <1Epkr5-1Adf0K0@fwd31.sul.t-online.de>

I think there are some common scenarios:

1) Call different templates (even when I only return one template, I might
use some templates during calculation). We could use a common syntax here
like $ST["name"] to extract a template form the group. This would be a
reserved word. Better yet: How about defining a string template group in the
grammar:

group MyTemplates;  // This only a defines a property in the parser to set a
string template group. Later, we could allow to define the templates inline.

Then one could call templates of the group using a syntax like
MyTemplates::Name. There would be a default group, which is used if the
group name is omitted. 

-> xxx  calls default group "xxx" and returns this as result
-> MyTemplates::xxx calls "xxx" in the the MyTemplates group and returns
this as result.

Within actions $MyTemplates::xxx would call the template. 

Now, we could nest them:

-> ResultTemplate(MyTemplates::xxx($Name), MyTemplates::yyy($Id)), or
whatever...

2) Build a collection of templates. These are useful to pass them to other
templates...

Currently, only the result of a rule can be added to a list. This could be
expanded to support multiple lists, one per template.

Just allow the same syntax to be used in front of each template call:
myList+=MyTemplates::xxx adds the template to a list called myList.

Maybe we should add the possibility to define lists in a scope:
scope global {
Templatecollection myList;  // or something like that
}

Use it like this: global::myList+=MyTemplates::xxx(...).

Overall, I think, template manipulation within ANTLR should be expanded. Of
course, I can code that now within actions but it would be far more user
friendly if normal cases could be expressed in a standard and uniform way.

I have several 2.7.5 grammars in C# and Java, which only differs in the
action code because of different method and class names. Using ANTLR 3 with
templates I was hoping to move all differences to a set of templates. This
only works if templates can be manipulated within ANTLR itself.

Kind regards


BTW: I was thinking about using multiple passes using the same action code,
but using different template groups for each pass...

 
Dr. Hartmut Kocher
Cortex Brainware GmbH


-----Urspr?ngliche Nachricht-----

> So it would be useful to be able to
> - call multiple templates per rule.

We'd need a naming scheme to refer to them from the invoking rule.

> - add templates to lists (currently, there's only a shortcut for  
> the one and only return value (p+=... syntax).
>
> BTW, I think it would be useful if a rule like 'control' above  
> would return the template of textfield or checkbox by default  
> instead of nothing. If the user doesn't use the template, no harm  
> is done. If he wants another template he can override it using the - 
> > syntax.

True.  Was wondering about this.  THe problem is that it's only  
useful when you refer to a single rule in a production...not that  
common.  When there are multiple elements in a production, what do  
you do?

> Finally, another solution to my problem would be to make multiple  
> passes thru the grammar, one to get the fields, one to build the  
> contructor method. So I could build a tree parser first. Then make  
> multiple passes thru the AST. Can I specify multiple parsers in the  
> same combined grammar? That would be nice.

That gets awkward.  You need to have actions that say "if (pass==1)"  
etc...

Ter


From BBKing at starbridgesystems.com  Fri Dec 23 08:13:58 2005
From: BBKing at starbridgesystems.com (Brannon King)
Date: Fri Dec 23 08:13:43 2005
Subject: [antlr-interest] anybody use exception[label]?
Message-ID: <4EFE19E52F4F844D997F24D759C4A23BD685AC@etg2.etg.local>


>Anybody use the feature where you can attach an exception to a label to
put in a specific try/catch?

I've been using the exception catch in the parser like this:

cornerType :
	LP! CORNERTYPE^ i:IDENTIFIER
		 { -1 != Arrays.binarySearch(cornerTypes,
i.getText().toUpperCase()) }?
	RP!;
	exception catch[SemanticException ex]{
		throw new SemanticException("line " + i.getLine() + ":"
+ i.getColumn() + ":" + LT(1).getColumn() +
			": expecting one of [" +
arrayToString(cornerTypes,", ") + "], found " + i.getText(),
		i.getFilename(), i.getLine(), i.getColumn());
	}

What advantage would using the label give me? And how would that even
change behavior?
From BBKing at starbridgesystems.com  Fri Dec 23 08:28:49 2005
From: BBKing at starbridgesystems.com (Brannon King)
Date: Fri Dec 23 08:28:34 2005
Subject: [antlr-interest] anybody use exception[label]?
Message-ID: <4EFE19E52F4F844D997F24D759C4A23BD685DB@etg2.etg.local>

This is a test message to see if I fixed my email tool so that my posts
shows up in the proper thread tree.
From parrt at cs.usfca.edu  Fri Dec 23 09:02:01 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec 23 09:02:04 2005
Subject: [antlr-interest] ANTLR 2.7.6. - VERY MAJOR PROBLEM
In-Reply-To: <41fed8f80512230056g32a194a6se8094f042fa6ea57@mail.gmail.com>
References: <41fed8f80512230056g32a194a6se8094f042fa6ea57@mail.gmail.com>
Message-ID: <1E1099CA-F058-42AC-9599-F392800282A3@cs.usfca.edu>

Fixed. Pushed.
Ter
On Dec 23, 2005, at 12:56 AM, Prashant Deva wrote:

> There is a major problem with the antlr jar in 2.7.6 release.
>
> The build seems to be bad and there are NO FILES in the 'antlr'  
> package.
> All the subpackages exist but the 'antlr' package does not contain  
> any files.
>
> Please continue using antlr 2.7.5 till this problem is fixed.
>
> -- 
> Prashant Deva
> Creator, ANTLR Studio
> Founder, Placid Systems, www.placidsystems.com

From parrt at cs.usfca.edu  Fri Dec 23 09:04:28 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec 23 09:04:30 2005
Subject: [antlr-interest] ANTLR 2.7.6 released :)
In-Reply-To: <op.s18bbwvjsj49yt@max>
References: <BBDF36F5-B98B-4178-BABF-95A9BD54EBF0@cs.usfca.edu>
	<op.s18bbwvjsj49yt@max>
Message-ID: <883683DD-DCA2-45B3-A60F-5BDF1E2F93C3@cs.usfca.edu>


On Dec 23, 2005, at 1:00 AM, Max Rydahl Andersen wrote:

>
>> ANTLR 2.7.6 is ready (i hope!).  A bug fix release (with small new  
>> features).  Thanks to all the people that submitted patches and  
>> the language target folks: Micheal Jordan, Kunle Odutola, Anthony  
>> Oguntimehin, Wolfgang Hafelinger, Marq Kole, Ric Klaren.  Thanks  
>> to Scott Stanchfield and Prashant Deva for their nice  
>> enhancements / fixes.  Who am I missing?
>
> Me ;)
>
> Just one question - is this release equal to the last RC or has  
> there been
> any changes ?

Python got some bug tweaks and I added two methods to  
TokenStreamRewriteEngine.java.  I'm pretty sure that's it.  Oh wait.   
I think the C# guys reorganized their bits.  You should be ok, but  
I'd grab the new files to be sure.

Ter

From scott at javadude.com  Fri Dec 23 09:04:57 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Fri Dec 23 09:05:03 2005
Subject: [antlr-interest] ANTLR 2.7.6. - VERY MAJOR PROBLEM
In-Reply-To: <1E1099CA-F058-42AC-9599-F392800282A3@cs.usfca.edu>
Message-ID: <200512231652.jBNGqGXG024504@s2.eroute.net>

I'll try to test this out against the eclipse plugin & integrate with it
this weekend. Been insanely busy at work (prepping for CES).

-- Scott

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
> Sent: Friday, December 23, 2005 12:02 PM
> To: ANTLR Interest
> Subject: Re: [antlr-interest] ANTLR 2.7.6. - VERY MAJOR PROBLEM
> 
> Fixed. Pushed.
> Ter
> On Dec 23, 2005, at 12:56 AM, Prashant Deva wrote:
> 
> > There is a major problem with the antlr jar in 2.7.6 release.
> >
> > The build seems to be bad and there are NO FILES in the 'antlr'  
> > package.
> > All the subpackages exist but the 'antlr' package does not 
> contain any 
> > files.
> >
> > Please continue using antlr 2.7.5 till this problem is fixed.
> >
> > --
> > Prashant Deva
> > Creator, ANTLR Studio
> > Founder, Placid Systems, www.placidsystems.com
> 


From parrt at cs.usfca.edu  Fri Dec 23 09:09:39 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec 23 09:09:41 2005
Subject: [antlr-interest] anybody use exception[label]?
In-Reply-To: <4EFE19E52F4F844D997F24D759C4A23BD685AC@etg2.etg.local>
References: <4EFE19E52F4F844D997F24D759C4A23BD685AC@etg2.etg.local>
Message-ID: <243B6352-321F-430A-9ACE-548DFFF3F771@cs.usfca.edu>


On Dec 23, 2005, at 8:13 AM, Brannon King wrote:
> I've been using the exception catch in the parser like this:
>
> cornerType :
> 	LP! CORNERTYPE^ i:IDENTIFIER
> 		 { -1 != Arrays.binarySearch(cornerTypes,
> i.getText().toUpperCase()) }?
> 	RP!;
> 	exception catch[SemanticException ex]{
> 		throw new SemanticException("line " + i.getLine() + ":"
> + i.getColumn() + ":" + LT(1).getColumn() +
> 			": expecting one of [" +
> arrayToString(cornerTypes,", ") + "], found " + i.getText(),
> 		i.getFilename(), i.getLine(), i.getColumn());
> 	}
>
> What advantage would using the label give me? And how would that even
> change behavior?

With a label, the exception try/catch is put around just that  
construct no the whole rule. :)  You could then specify how a missing  
ID should be handled and then let the parser *continue* w/o jumping  
out of the rule.

Ter
From parrt at cs.usfca.edu  Fri Dec 23 09:10:29 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec 23 09:10:30 2005
Subject: [antlr-interest] ANTLR 2.7.6. - VERY MAJOR PROBLEM
In-Reply-To: <200512231652.jBNGqGXG024504@s2.eroute.net>
References: <200512231652.jBNGqGXG024504@s2.eroute.net>
Message-ID: <F2A29413-7EE9-4787-BD81-B8E5672BBE46@cs.usfca.edu>


On Dec 23, 2005, at 9:04 AM, Scott Stanchfield wrote:

> I'll try to test this out against the eclipse plugin & integrate  
> with it
> this weekend. Been insanely busy at work (prepping for CES).

ok.  Should have all of your updates :)

Ter
From BBKing at starbridgesystems.com  Fri Dec 23 09:13:40 2005
From: BBKing at starbridgesystems.com (Brannon King)
Date: Fri Dec 23 09:13:28 2005
Subject: [antlr-interest] anybody use exception[label]?
Message-ID: <4EFE19E52F4F844D997F24D759C4A23BD6866E@etg2.etg.local>

This is another test message for getting the right thread tree.
From brannonking at yahoo.com  Fri Dec 23 09:29:59 2005
From: brannonking at yahoo.com (Brannon King)
Date: Fri Dec 23 09:29:45 2005
Subject: [antlr-interest] anybody use exception[label]?
In-Reply-To: <4EFE19E52F4F844D997F24D759C4A23BD685AC@etg2.etg.local>
Message-ID: <000901c607e6$80a223e0$ac46b642@starbridgesystems.com>

Test round 4, and, hopefully, the last test. Sorry to bother with these. I
hate wasting everyone's time.

From brannonking at yahoo.com  Fri Dec 23 10:05:18 2005
From: brannonking at yahoo.com (Brannon King)
Date: Fri Dec 23 10:05:10 2005
Subject: [antlr-interest] ANTLR Eclipse plugin newsgroup
Message-ID: <000e01c607eb$71c12470$ac46b642@starbridgesystems.com>

Schweet. Now that my email system is working right, I can continue a
conversation from yesterday though I am going to have to start a new thread
because of my new address.

First, I'm not sure this is the right place to discuss ANTLR-Eclipse
projects or integration. If not here, where? It appears that the
ANTLREclipse plugin forum on Sourceforge only gets used on rare occasions.

Second, contrary to Scott's posting yesterday that states that ANTLREclipse
uses the ANTLR lexer/parser for syntax highlighting, it does not. I have the
AntlrCodeScanner.java in front of me, and I assure you that it does syntax
highlighting using the same methods as the other Eclipse plugins I've seen:
it uses a list of keywords. I pulled the file from the SourceForge
yesterday. It is possible that I did not get the right file, though the same
(or similar) file is in org.antlr.eclipse.ui_4.0.0.b2 in my Eclipse plugins
folder.

I cannot see that it does on-the-fly syntax markers either (and I don't
think I've seen any show up during my editing), though it can quite easily
be done with code like the following:

 this(lexer, 2);
 this.file = ((IFileEditorInput)editor.getEditorInput()).getFile();
 this.editor = editor;
 this.doc = doc;
public void reportError(RecognitionException ex) 
{
  try 
  {
    file.deleteMarkers(IMarker.PROBLEM, true, IResource.DEPTH_ONE);
  } 
  catch (CoreException e1) 
  {
    e1.printStackTrace();
  }
  Map attributes = new HashMap();
  int line = ex.getLine()-1;
  MarkerUtilities.setMessage(attributes, ex.getMessage());
  MarkerUtilities.setLineNumber(attributes, line);
  try 
  {
    int offset = doc.getLineOffset(line);
    MarkerUtilities.setCharStart(attributes, offset);
    MarkerUtilities.setCharEnd(attributes, offset + ex.getColumn()+6);
    attributes.put(IMarker.SEVERITY, IMarker.SEVERITY_ERROR);
    MarkerUtilities.createMarker(file, attributes, IMarker.PROBLEM);
  } 
  catch (BadLocationException e) 
  {
    e.printStackTrace();
  }
  catch (CoreException x) 
  {
    x.printStackTrace();
  }
}



From ahornbeck at yahoo.com  Fri Dec 23 10:10:26 2005
From: ahornbeck at yahoo.com (Ashley Neal Hornbeck)
Date: Fri Dec 23 10:10:29 2005
Subject: [antlr-interest] =?iso-8859-1?q?Bit_Mask_Field_Indicator_=96_new?=
	=?iso-8859-1?q?bie_question?=
Message-ID: <20051223181026.9235.qmail@web30015.mail.mud.yahoo.com>


I need to parse network messages from a legacy system.  The messages use a hex
encoded bit mask that indicates which optional fields are present.  For example:

01T105FOO::BAR

01 -> Message Version number
T1 -> Message Type 1
05 -> Hex encoded bit mask - 0000 0101
FOO -> Optional field position 3 (indicated by 0x04)
:: -> Header terminator
BAR -> Optional payload (indicated by 0x01)

There are a number of message types with similar but different structure for this
system.  I am considering ANTLR as a potential solution so I don't have to hand code
a lexer/parser for each of the variants.  So far the only thing I can figure out is
to define 2^8 tokens with a rather large look ahead ? not practical.  Being new to
ANTLR I am either missing something or trying to use the wrong tool.

Guidance please.  Am I missing something or using the wrong tool.  If the wrong
tool, any thoughts on another Java solution? 

Thanks in advance,

-Ash
From scott at javadude.com  Fri Dec 23 10:12:35 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Fri Dec 23 10:12:43 2005
Subject: [antlr-interest] ANTLR Eclipse plugin newsgroup
In-Reply-To: <000e01c607eb$71c12470$ac46b642@starbridgesystems.com>
Message-ID: <200512231759.jBNHxsnQ020267@s2.eroute.net>

oh, you're right -- I was thinking about the "grammar only" page in the
editor. I think (but I'm not sure) that the outline view uses an antlr
scanner, though.

(I didn't mess with that area much)

Thanks for the correction!

It doesn't do on-the-fly markers (yet), but it does add markers after saving
the file based on the java compile and the antlr run.

I'll take a look at adding some code like that and see what happens...

Thanks,
-- Scott

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Brannon King
> Sent: Friday, December 23, 2005 1:05 PM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] ANTLR Eclipse plugin newsgroup
> 
> Schweet. Now that my email system is working right, I can 
> continue a conversation from yesterday though I am going to 
> have to start a new thread because of my new address.
> 
> First, I'm not sure this is the right place to discuss 
> ANTLR-Eclipse projects or integration. If not here, where? It 
> appears that the ANTLREclipse plugin forum on Sourceforge 
> only gets used on rare occasions.
> 
> Second, contrary to Scott's posting yesterday that states 
> that ANTLREclipse uses the ANTLR lexer/parser for syntax 
> highlighting, it does not. I have the AntlrCodeScanner.java 
> in front of me, and I assure you that it does syntax 
> highlighting using the same methods as the other Eclipse 
> plugins I've seen:
> it uses a list of keywords. I pulled the file from the 
> SourceForge yesterday. It is possible that I did not get the 
> right file, though the same (or similar) file is in 
> org.antlr.eclipse.ui_4.0.0.b2 in my Eclipse plugins folder.
> 
> I cannot see that it does on-the-fly syntax markers either 
> (and I don't think I've seen any show up during my editing), 
> though it can quite easily be done with code like the following:
> 
>  this(lexer, 2);
>  this.file = ((IFileEditorInput)editor.getEditorInput()).getFile();
>  this.editor = editor;
>  this.doc = doc;
> public void reportError(RecognitionException ex) {
>   try
>   {
>     file.deleteMarkers(IMarker.PROBLEM, true, IResource.DEPTH_ONE);
>   }
>   catch (CoreException e1)
>   {
>     e1.printStackTrace();
>   }
>   Map attributes = new HashMap();
>   int line = ex.getLine()-1;
>   MarkerUtilities.setMessage(attributes, ex.getMessage());
>   MarkerUtilities.setLineNumber(attributes, line);
>   try
>   {
>     int offset = doc.getLineOffset(line);
>     MarkerUtilities.setCharStart(attributes, offset);
>     MarkerUtilities.setCharEnd(attributes, offset + ex.getColumn()+6);
>     attributes.put(IMarker.SEVERITY, IMarker.SEVERITY_ERROR);
>     MarkerUtilities.createMarker(file, attributes, IMarker.PROBLEM);
>   }
>   catch (BadLocationException e)
>   {
>     e.printStackTrace();
>   }
>   catch (CoreException x)
>   {
>     x.printStackTrace();
>   }
> }
> 
> 
> 


From mfeldmeier at metadata.com  Fri Dec 23 10:43:55 2005
From: mfeldmeier at metadata.com (Mike Feldmeier)
Date: Fri Dec 23 10:32:02 2005
Subject: [antlr-interest] Please enlighten a new user..
Message-ID: <A1A439DEF700D14EB1320CCB8B0611260A012A@serverguy02.metadata.com>

Greetings,

 

I have been using ANTLR for about three days now.  I have read the reference guide and two tutorials, but I still don?t understand this problem.  Note I said ?read? and not necessary ?understand?.

 

Given the following rules:

 

class TestLexer extends Lexer;

 

options

{

            k = 5;

}

 

A: "data";

B: "database" | "by";

 

I get the following warning (it seems to work, I just despise warnings):

 

test.g: warning:lexical nondeterminism between rules A and B upon

test.g:     k==1:'d'

test.g:     k==2:'a'

test.g:     k==3:'t'

test.g:     k==4:'a'

test.g:     k==5:<end-of-token>

 

Interestingly, if I take out the ?| ?by?? from rule B, the warning disappears.

 

Am I just being blatantly new?  I see no reason why this should happen from what I?ve read.  Could someone explain this, or point to a specific place in documentation that explains this?

 

Thanks,

Mike

 


-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.371 / Virus Database: 267.14.5/212 - Release Date: 12/23/2005
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051223/0f99abe5/attachment.html
From ewbank at gmail.com  Fri Dec 23 10:51:28 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Dec 23 10:51:31 2005
Subject: [antlr-interest] Re: Please enlighten a new user..
In-Reply-To: <dd3a065f0512231050n50987c7fp99b39d5c574c0c26@mail.gmail.com>
References: <A1A439DEF700D14EB1320CCB8B0611260A012A@serverguy02.metadata.com>
	<dd3a065f0512231050n50987c7fp99b39d5c574c0c26@mail.gmail.com>
Message-ID: <dd3a065f0512231051x4f4a8354l62520d752fd7430b@mail.gmail.com>

<resend, to list...>

On 12/23/05, Mike Feldmeier <mfeldmeier@metadata.com> wrote:
> I have been using ANTLR for about three days now.  I have read the reference
> guide and two tutorials, but I still don't understand this problem.
>
>   A: "data";
>   B: "database" | "by";
>
> I get the following warning (it seems to work, I just despise warnings):
>
> test.g: warning:lexical nondeterminism between rules A and B upon
> test.g:     k==1:'d'
> test.g:     k==2:'a'
> test.g:     k==3:'t'
> test.g:     k==4:'a'
> test.g:     k==5:<end-of-token>
>
> Interestingly, if I take out the ''| "by"'' from rule B, the warning
> disappears.

I think the problem is linear approximate lookahead, coupled with the
fact that end-of-token is used as a placeholder past the end of the
input.  The problem is that "by" at the end of the stream is
represented for k=5 as:

    k==1:'b'
    k==2:'y'
    k==3:<end-of-token>
    k==4:<end-of-token>
    k==5:<end-of-token>

So that means rule B matches for:

    k==1:'d' or 'b'
    k==2:'a' or 'y'
    k==3:'t' or <end-of-token>
    k==4:'a' or <end-of-token>
    k==5:'b' or <end-of-token>

Look at that last entry again, and remember these are sets.  That
means that if I see "data<EOF>", rule A can obviously match, but rule
B is also a candidate ("data" from "database", followed by
<end-of-token> from "by<EOF>").

Rather than trying to match these in the lexer, take a look at the
discussion of keywords and identifiers in the documentation -- match
an identifier, then change the match for those identifiers that happen
to be keywords.

Hope this helps,
- Bryan
From parrt at cs.usfca.edu  Fri Dec 23 12:24:57 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec 23 12:27:14 2005
Subject: [antlr-interest] improving template support in antlr v3
In-Reply-To: <1Epkr5-1Adf0K0@fwd31.sul.t-online.de>
References: <1Epkr5-1Adf0K0@fwd31.sul.t-online.de>
Message-ID: <3E88B21C-5BA4-4B0C-AD8A-B04947242459@cs.usfca.edu>

On Dec 23, 2005, at 3:12 AM, hwk.cortex-brainware@t-online.de wrote:
> I think there are some common scenarios:
>
> 1) Call different templates (even when I only return one template,  
> I might
> use some templates during calculation). We could use a common  
> syntax here
> like $ST["name"] to extract a template form the group. This would be a
> reserved word.

Yes, i have been working with this cool start-up company recently and  
I have been trying to use the template stuff.  I have not needed  
multiple templates from a single rule, but let me add my own  
frustrations here and we can probably come up with a nice bit of  
extension.  John Mitchell suggested this exact strategy...get  
something working (avoiding the complicated thing I was designing)  
and then try to build something with it! ;)

So, I do this a few times in a Java grammar:

StringTemplate fcallST = templateLib.getInstanceOf("fcall");
fcallST.setAttribute("ids", $type.st);  // type is a rule reference  
above
$anEnclosingTemplateVisibleHere.setAttribute("fcalls",fcallST);

Wouldn't it be nice to do as you say (a rewrite like constructor but  
in an action):

StringTemplate fcallST = $fcall(ids=$type.st);

and then we could have a syntax like pyStringTemplate to use array  
syntax instead of setAttribute:

$anEnclosingTemplateVisibleHere["fcalls"] = fcallST;

The problem of course is clear: The dollar syntax $x.y is way to  
simple to handle the above and it's ambiguous anyway.  We'd need a  
keyword as you say I think, but that makes it messy.

<sidetracked>
Actually, given that I must be consistent across output options, how  
will we build trees inline?

{AST t = ^($ID.text, $INT.text);}

I suppose we could make ^ significant like we did with #(...)  
before.  Hmm...What would a node constructor be?

^ID["blort]

I suppose that would be ok.
</sidetracked>

So, do we need a special symbol for inline stringtemplate stuff?   
Ick.  @ is action, $ is attribute.  Hm...keyword is probably better.   
Ack...can't just randomly look for a keyword...need a symbol.   
Hmm...well, what about, symbol plus braces:

StringTemplate fcallST = ${fcall(ids=$type.st)};
${anEnclosingTemplateVisibleHere["fcalls"] = fcallST};

I don't like overloading $ though but I hate to create another  
special symbol just for templates like:

StringTemplate fcallST = %{fcall(ids=$type.st)}
%{anEnclosingTemplateVisibleHere["fcalls"] = fcallST};

Is there some generic thing I could do with %{...}?  Ick.  Would they  
have to nest?

%{anEnclosingTemplateVisibleHere["fcalls"] = %{fcall(ids=$type.st)}};

Probably.  To me that is not very readable to the casual observer  
where the explicit is very readable.

Perhaps your $templates::fcall(ids=$type.st) would work with  
"templates" being the keyword / built-in scope of templates.   
Actually that would work. :)

StringTemplate fcallST = $templates::fcall(ids=$type.st);
$anEnclosingTemplateVisibleHere.setAttribute("fcalls",fcallST);

It saves a bit of typing and is more clear. :)

> Better yet: How about defining a string template group in the
> grammar:
>
> group MyTemplates;  // This only a defines a property in the parser  
> to set a
> string template group. Later, we could allow to define the  
> templates inline.

I think you want this to be dynamic so, as you request below, you can  
reset the template group for each pass using setTemplateLib().

> Then one could call templates of the group using a syntax like
> MyTemplates::Name. There would be a default group, which is used if  
> the
> group name is omitted.

We can just use the $templates::name(...) generic mechanism so we can  
dynamically change the actual group.  Your way might be useful with  
the ST interface I plan on implementing.  In this way, I could verify  
that your template names actually make sense.  Heh, i like it!

> -> xxx  calls default group "xxx" and returns this as result
> -> MyTemplates::xxx calls "xxx" in the the MyTemplates group and  
> returns
> this as result.

Interesting.  You want to be able to define multiple template  
libraries?  Ok, so

$templates::fcall(...)
$MyTemplates::blort(...)

I dislike overriding the $scope::x syntax so much, but it seems like  
it would work.  How would we specify the new template groups?

templates Java;
templates Debug;

then you could say $Java::fcall(...) and $Debug::dump(...).  But, the  
lib names should be interfaces so you're not locked into a specific  
template group, right?  This would generate methods like:

setJavaTemplateLib(...)

in the parser so you could set the actual lib.

How often would this multiple template lib thing be used do you think?

> Within actions $MyTemplates::xxx would call the template.
>
> Now, we could nest them:
>
> -> ResultTemplate(MyTemplates::xxx($Name), MyTemplates::yyy($Id)), or
> whatever...

Yup.

Oh, right we'd need to allow

-> Java::fcall(...)

syntax too.

> 2) Build a collection of templates. These are useful to pass them  
> to other
> templates...
>
> Currently, only the result of a rule can be added to a list. This  
> could be
> expanded to support multiple lists, one per template.
>
> Just allow the same syntax to be used in front of each template call:
> myList+=MyTemplates::xxx adds the template to a list called myList.

Is that in an action?  You can pass in multiple templates to fill  
with templates you create in that rule.  You can pass multiple return  
values back and just add to a list manually.  How often do you need  
to return multiple templates though?  When I need this I just access  
the outer template where they will go and then setAttribute for each  
new template.  I've yet to need multiple return templates.

> Maybe we should add the possibility to define lists in a scope:
> scope global {
> Templatecollection myList;  // or something like that
> }
>
> Use it like this: global::myList+=MyTemplates::xxx(...).

We're getting closer and closer to the simple neutral action language  
I was thinking of adding later ;)  Hm...this is getting a big much. I  
think:

global::myList.add($MyTemplates::xxx());

would be just as good ;)

> Overall, I think, template manipulation within ANTLR should be  
> expanded. Of

I plan on it...just trying to let actual need guide us. :)

> course, I can code that now within actions but it would be far more  
> user
> friendly if normal cases could be expressed in a standard and  
> uniform way.

Yes, let's come up with a nice extension.

> I have several 2.7.5 grammars in C# and Java, which only differs in  
> the
> action code because of different method and class names. Using  
> ANTLR 3 with
> templates I was hoping to move all differences to a set of  
> templates. This
> only works if templates can be manipulated within ANTLR itself.

Can't you just a different template group with setTemplateLib?

> Kind regards
>
>
> BTW: I was thinking about using multiple passes using the same  
> action code,
> but using different template groups for each pass...

Are you using setTemplateLib?

Let me add my own frustrations now.

This is a drag:

packageDefinition
	:	'package' identifier SEMI -> {$identifier.st}
	;

Could we do this?

packageDefinition
	:	'package' identifier SEMI -> identifier
	;

What if we always returned the template for a single element?

type
	:	identifier
	|	builtInType
	;

the template for identifier / builtInType would be autocopied to  
$type.st return value.  I don't like this actually... it's not  
consistent with having multiple elements in a production.  Perhaps

type
	:	identifier -> identifier
	|	builtInType
	;

is "better".  Weird looking though.

Here is a case where I might have just plain foo instead of a.b.c.   
In either case I need to set the return type.  I hate doing ( x ->  
template(...) ) syntax in the middle of a rule.  I want that -> on  
the end!  Here is what I do now:

identifier
	:	(i=IDENT -> qid(id={$i.text}))
		( DOT i=IDENT {$identifier.st.setAttribute("id",$i.text);} )*
	;

Oh, actually we can do this properly even now.  Duh, just queue up  
the IDs.

identifier
	:	ids+=IDENT ( DOT ids+=IDENT )*
                 -> qid(id={toStrings($ids)})
	;

I've posted this to the blog too.

http://www.antlr.org/blog/antlr3/rewrite.tml

Ter
From ceckak at alumni.washington.edu  Fri Dec 23 16:31:03 2005
From: ceckak at alumni.washington.edu (Ken and Timi Cecka)
Date: Fri Dec 23 16:31:19 2005
Subject: [antlr-interest] Is there a way to pass parameters to rules?
Message-ID: <doi4s8$mar$1@sea.gmane.org>

Hi All,

I know rules can return a value with the 'returns' keyword, but is there any
way to pass a value to a rule when it's invoked?

In developing my treeparser, I'm repeatedly finding that I want a rule to
simply modify the object being constructed by the caller, and it's not
always easy or convenient to construct a return type that temporarily
encapsulates the results of the rule so that they can be passed up.  It
would be much simpler of the caller could pass a pointer down and allow the
rule to modify the object directly.

Ken

From scott at javadude.com  Fri Dec 23 18:19:34 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Fri Dec 23 18:19:49 2005
Subject: [antlr-interest] Is there a way to pass parameters to rules?
In-Reply-To: <doi4s8$mar$1@sea.gmane.org>
Message-ID: <200512240206.jBO26oXQ004947@s2.eroute.net>

Sure:

targetRule [String foo, Person p]
	:	...
	;

callingRule
	{ Person p = new Person(); }
	:	targetRule["blah blah", p]
	;

-- Scott


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Ken 
> and Timi Cecka
> Sent: Friday, December 23, 2005 7:31 PM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Is there a way to pass parameters to rules?
> 
> Hi All,
> 
> I know rules can return a value with the 'returns' keyword, 
> but is there any way to pass a value to a rule when it's invoked?
> 
> In developing my treeparser, I'm repeatedly finding that I 
> want a rule to simply modify the object being constructed by 
> the caller, and it's not always easy or convenient to 
> construct a return type that temporarily encapsulates the 
> results of the rule so that they can be passed up.  It would 
> be much simpler of the caller could pass a pointer down and 
> allow the rule to modify the object directly.
> 
> Ken
> 


From ceckak at alumni.washington.edu  Fri Dec 23 18:26:06 2005
From: ceckak at alumni.washington.edu (Ken Cecka)
Date: Fri Dec 23 18:26:15 2005
Subject: [antlr-interest] RE: Is there a way to pass parameters to rules?
References: <doi4s8$mar$1@sea.gmane.org>
	<200512240206.jBO26oXQ004947@s2.eroute.net>
Message-ID: <doibju$2j4$1@sea.gmane.org>

Perfect - thanks!

Scott Stanchfield wrote:

> Sure:
> 
> targetRule [String foo, Person p]
> :     ...
> ;
> 
> callingRule
> { Person p = new Person(); }
> :     targetRule["blah blah", p]
> ;
> 
> -- Scott
> 
> 
>> -----Original Message-----
>> From: antlr-interest-bounces@antlr.org
>> [mailto:antlr-interest-bounces@antlr.org]
>> [On Behalf Of Ken
>> and Timi Cecka
>> Sent: Friday, December 23, 2005 7:31 PM
>> To: antlr-interest@antlr.org
>> Subject: [antlr-interest] Is there a way to pass parameters to rules?
>> 
>> Hi All,
>> 
>> I know rules can return a value with the 'returns' keyword,
>> but is there any way to pass a value to a rule when it's invoked?
>> 
>> In developing my treeparser, I'm repeatedly finding that I
>> want a rule to simply modify the object being constructed by
>> the caller, and it's not always easy or convenient to
>> construct a return type that temporarily encapsulates the
>> results of the rule so that they can be passed up.  It would
>> be much simpler of the caller could pass a pointer down and
>> allow the rule to modify the object directly.
>> 
>> Ken
>>


From parrt at cs.usfca.edu  Sat Dec 24 15:56:43 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat Dec 24 15:58:57 2005
Subject: [antlr-interest] template dependency graphs (DOT/graphviz)
Message-ID: <8961A30A-AC39-4978-A93F-B3CFAA9E6272@cs.usfca.edu>

Howdy,

In order to make it easier for people to build code generators for  
ANTLR v3, I've added a feature to StringTemplate so it knows how to  
give you a DOT diagram showing all the enclosing template  
relationships (with or w/o the attribute list).  I've enclosed the  
graph for the lexer of simplec.g from the example-v3 group.   
(naturally, the graph is a ST so you can set node style attributes  
like width, fontsize, etc...  the joy of ST). :)

This will be generally useful for people building complicated output  
structures with StringTemplate.

For v3 target builders: I've commented out the code in  
CodeGenerator.java that dumps this stuff.  It's line 389 as of when I  
am submitting this and the updated ST.  You don't need to sync new ST  
unless you want to uncomment.

DOT/graphviz kicks butt!

Ter

-------------- next part --------------
A non-text attachment was scrubbed...
Name: STgraph.pdf
Type: application/pdf
Size: 18757 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20051224/92462da0/STgraph.pdf
-------------- next part --------------

From kroepke at dolphin-services.de  Sat Dec 24 17:19:16 2005
From: kroepke at dolphin-services.de (Kay Roepke)
Date: Sat Dec 24 17:19:26 2005
Subject: [antlr-interest] needed: grammar to provoke multiple cyclicDFAs 
Message-ID: <A659FA90-4586-448A-B546-668114D3FB7A@dolphin-services.de>

Hi!

For testing purposes I want to have a rather simple lexer grammar  
which will generate two cyclicDFAs to be used.
At the moment I'm at a loss to produce such a grammar.

Does anyone have an idea? Or is that not possible?
Everything I tried to throw at ANTLR seems to end up in one DFA...

Kay
From craig at palantir.co.za  Sun Dec 25 21:50:27 2005
From: craig at palantir.co.za (Craig Main)
Date: Sun Dec 25 21:50:44 2005
Subject: [antlr-interest] Problem with Separators
Message-ID: <20051226055036.7B510DCC25@www.antlr.org>

Hi,

 

I am using a grammar and a tree to recognise a simple expression grammar.

At the moment, the rules for using semi colons ';' are very strict, and I
need to relax them somewhat.

 

The grammar parses the following spectacularly well.

if (10 < 4 and 4 < 1) {

     c = 10

} else

   m = 20;

a = 10;

b = 40

 

I would like to be able to (optionally) terminate the last statement (b =
40) with a semi-colon, and also optionally terminate the c = 10 with a semi
colon so that the following is also valid.

 

if (10 < 4 and 4 < 1) {

     c = 10;

} else

   m = 20;

a = 10;

b = 40;

 

Could someone help with this please? I am really struggling with k=1, I am
happy to increase k, but my attempts have failed so far. I am sure I am
missing something simple.

I have placed the grammar below. I am aware that I need to somehow use the
semi as a statement terminator rather than a statement separator. I have
attempted to do this but I am really struggling to keep it all working with
that approach. If you have the time please give me some specifics, I would
appreciate it.

 

// THE GRAMMAR.G FILE, THE TREE FOLLOWS

 

rules                     {log.Debug(null);}

                        : (statement (SEMI! statement)*)?

                          {#rules = #([RULESET, "RULESET"], #rules);}

                          EOF!

                        ;

 

statementSequence       : statementBlock

                        | statement

                        | SEMI!

                        ;

 

statementBlock            {log.Debug(null);}

                        : LCURL! (statement (SEMI! statement)*)? RCURL!

                        ;

 

statement                 {log.Debug(null);}

                        : assignmentStatement

                        | constantStatement

                        | ifStatement

                        ;

 

ifStatement               {log.Debug(null);}

                        : TOK_IF^ LPAREN! conditional RPAREN!
statementSequence

                          (

                             options {

                                 warnWhenFollowAmbig = false;

                             }

                          : TOK_ELSE statementSequence

                          )?

                        ;

 

conditional               {log.Debug(null);}

                        : logicalOr

                        ;

 

logicalOr               : logicalAnd (TOK_OR^ logicalAnd)*

                        ;

 

logicalAnd              : equalityExpression (TOK_AND^ equalityExpression)*

                        ;

 

equalityExpression      : relational ((NOT_EQUAL^ | EQUAL^) relational)*

                        ;

 

relational                {log.Debug(null);}

                        : expression

                          ((LTHAN^

                          | GTHAN^

                          | LTE^

                          | GTE^)

                          expression)*

                        ;

 

constantStatement : TOK_CONST^ id:ID ASSIGN factor

                        ;

 

assignmentStatement : id:ID ASSIGN^ expression

                        ;

 

expression : term ((PLUS^|MINUS^) term)*

                        ;

 

term : factor ((MULTIPLY^|DIVIDE^) factor)*

                        ;

 

factor : (ID LPAREN) => function

                        | literal

                        ;

 

Function : id:ID^ {#id.setType(METHOD_CALL);} LPAREN! arguments RPAREN!

                        ;

 

Arguments : (expression (COMMA! expression)*)?

                          {#arguments = #(#[ELIST,"ELIST"], #arguments);}

                        ;

 

Literal : id:ID^

                        | fl:FLOAT^

                        | LPAREN^ expression RPAREN

                        ;

// THE TREE GRAMMAR FILE

rules                   : #(RULESET (statement)*)

                        ;

 

statement                        : #(ASSIGN id:ID result=expression {
log.Info(string.Format("{0} = {1}", id.getText(), result)); } ) 

                                 | #(TOK_CONST cid:ID ASSIGN result=term)
{log.Info("constant decl");}

                                 | {log.Debug("inside");}

                                   #(TOK_IF condition (statement)*
({log.Debug("in-else");} TOK_ELSE (statement)* {log.Debug("out-else");})?)

                                   {log.Debug("outside");}

                                 ;

condition                        

returns [object result]

                                 : #(TOK_OR l=condition r=condition)

                                    | #(TOK_AND l=condition r=condition)

                                    | #(NOT_EQUAL l=condition r=condition)

                                    | #(EQUAL l=condition r=condition)

                                    | #(LTHAN l=condition r=condition)

                                    | #(GTHAN l=condition r=condition)

                                    | #(LTE l=condition r=condition)

                                    | #(GTE l=condition r=condition)

                                 | result=expression
{log.Debug("condition->expression");}

                                 ;

expression

returns [object result]         : #(PLUS l=term r=term)
{result=ExpressionOperation.Add(l,r);}

                                 | #(MINUS l=term r=term)
{result=ExpressionOperation.Subtract(l,r);}

                                 | #(MULTIPLY l=term r=term)
{result=ExpressionOperation.Multiply(l,r);}

                                 | #(DIVIDE l=term r=term)
{result=ExpressionOperation.Divide(l,r);}                                 

                                 | result=term {log.Debug("term");}

                                 ;

term

returns [object result]         : result=literal

                                 | #(m:METHOD_CALL #(ELIST (expr=expression
{log.Info(string.Format("e{0}",expr));})*)) {log.Info(string.Format("Method
Call {0}", m.getText()));}

                                 ;

 

literal

returns [object result]          : id:ID { result = id.getText(); }

                                 | fl:FLOAT { result =
double.Parse(fl.getText()); }

                                 | #(LPAREN expression)

                                 ;

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051226/4269fb3f/attachment-0001.html
From sohail at taggedtype.net  Sun Dec 25 23:06:20 2005
From: sohail at taggedtype.net (Sohail Somani)
Date: Sun Dec 25 23:06:27 2005
Subject: [antlr-interest] Problem with Separators
In-Reply-To: <20051226055036.7B510DCC25@www.antlr.org>
References: <20051226055036.7B510DCC25@www.antlr.org>
Message-ID: <1135580780.28623.6.camel@localhost.localdomain>

On Mon, 2005-12-26 at 07:50 +0200, Craig Main wrote:

> I am using a grammar and a tree to recognise a simple expression
> grammar.
> 
> At the moment, the rules for using semi colons ?;? are very strict,
> and I need to relax them somewhat.

I think the problem is simplified if you don't ignore end of lines. That
is, if you can say that this is not a valid statement:

if (blah) {
c 
=
10;
}
else
{
c
=




15+


414123;
}

If this is an invalid statement (its valid c++, assuming appropriate
declarations), then you can have SEMI_COLON | EOL as your rule
terminator.

Now, if its a valid statement, I am not so sure what you can do. The
python guys mustve had to do a similar thing, but then the properly
translated snippet above wouldn't be a valid sentence. So, make your
life easier and make it an invalid statement. If you need to justify it,
you can always say that it forces people to break up complicated
expressions :) The c++ grammar is also available www.antlr.org but I'd
be scared to look at that guy.

BOL!

Sohail

From krishanu at cal.interrasystems.com  Mon Dec 26 02:26:44 2005
From: krishanu at cal.interrasystems.com (Krishanu Debnath)
Date: Mon Dec 26 02:25:02 2005
Subject: [antlr-interest] 2.7.6 build problem
Message-ID: <43AFC564.70502@cal.interrasystems.com>

Hello,

I am trying to install antlr-2.7.6 release in my linux redhat 9.2
machine. I downloaded the source distribution today(Dec 26, 2005).

krishanu@meghna[162] uname -a
Linux meghna 2.4.20-8 #1 Thu Mar 13 17:54:28 EST 2003 i686 i686 i386 
GNU/Linux
krishanu@meghna[163]

I am using following java version.

krishanu@meghna[149] java -version
java version "1.3.1_13"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.3.1_13-b03)
Java HotSpot(TM) Client VM (build 1.3.1_13-b03, mixed mode)
krishanu@meghna[150]

Next I tried to build and install antlr for C++.

krishanu@meghna[182] pwd
/u/krishanu/my_local/build_area/antlr-2.7.6
krishanu@meghna[141] echo $srcdir
/u/krishanu/ANTLR/antlr-2.7.6/
krishanu@meghna[142] $srcdir/configure --disable-java --disable-python 
--disable-csharp --enable-cxx --enable-verbose --enable-debug 
--enable-examples --prefix=/u/krishanu/my_local/
[..]
krishanu@meghna[160] make
[..]
krishanu@meghna[160] make install
[..]

Everything went fine so far except few warnings during build. Next I
tried to run an example.

krishanu@meghna[183] cd examples/cpp/calc
krishanu@meghna[188] ls
Makefile
krishanu@meghna[190] make
make: *** [/u/krishanu/my_local/build_area/antlr-2.7.6/antlr/antlr.jar] 
Error 1
krishanu@meghna[191]

It failed. Then I try to build it manually.

krishanu@meghna[191] /u/krishanu/my_local/bin/antlr 
/u/krishanu/ANTLR/antlr-2.7.6/examples/cpp/calc/calc.g
Exception in thread "main" java.lang.NoClassDefFoundError: antlr/Tool

If I echo classpath from antlr script, It points to 
/u/krishanu/my_local//lib/antlr.jar .

krishanu@meghna[192] ls /u/krishanu/my_local/lib/antlr.jar
/u/krishanu/my_local/lib/antlr.jar
krishanu@meghna[193]

I am unable to find the reason behind it. Can anyone please provide any
help? Or pointer to any document if this has been discussed before.

Thanks,
Krishanu

-- 
"I prefer a successful software vendor to a sharp-tongued critic
any day of the week."
--PJ Plauger
From parrt at cs.usfca.edu  Mon Dec 26 08:51:02 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 26 08:51:04 2005
Subject: [antlr-interest] 2.7.6 build problem
In-Reply-To: <43AFC564.70502@cal.interrasystems.com>
References: <43AFC564.70502@cal.interrasystems.com>
Message-ID: <51386A37-1A72-4CC1-9AA7-6A9F296FF407@cs.usfca.edu>

Hi.  For a few hours there, the antlr.jar was in lib but I realized  
that the build script expected it in main antlr dir so I updated the  
tar.gz.  Try moving antlr.jar up a dir.

Ter

From parrt at cs.usfca.edu  Mon Dec 26 11:03:58 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 26 11:06:02 2005
Subject: [antlr-interest] needed: grammar to provoke multiple cyclicDFAs 
In-Reply-To: <A659FA90-4586-448A-B546-668114D3FB7A@dolphin-services.de>
References: <A659FA90-4586-448A-B546-668114D3FB7A@dolphin-services.de>
Message-ID: <B023ED25-D486-4848-8D32-A99FAA4ABB0F@cs.usfca.edu>


On Dec 24, 2005, at 5:19 PM, Kay Roepke wrote:

> Hi!
>
> For testing purposes I want to have a rather simple lexer grammar  
> which will generate two cyclicDFAs to be used.
> At the moment I'm at a loss to produce such a grammar.
>
> Does anyone have an idea? Or is that not possible?
> Everything I tried to throw at ANTLR seems to end up in one DFA...

You need two rules, each with a cyclic DFA.  Prefix with x and z to  
make Tokens rule acyclic.

X : 'x' ('y'+ 'a'|'y'+ 'b') ;

Z : 'z' ('y'+ 'a'|'y'+ 'b') ;

that might work :)

Ter
From hwk.cortex-brainware at t-online.de  Mon Dec 26 15:47:12 2005
From: hwk.cortex-brainware at t-online.de (hwk.cortex-brainware@t-online.de)
Date: Mon Dec 26 15:47:48 2005
Subject: AW: [antlr-interest] improving template support in antlr v3
In-Reply-To: <3E88B21C-5BA4-4B0C-AD8A-B04947242459@cs.usfca.edu>
Message-ID: <1Er23t-02WSpM0@fwd27.sul.t-online.de>

Some quick remarks, before I go off skiing :-)

Basically, I like the idea of defining several template groups to organize
things. So the idea would be to define several groups, like you suggested
using

templates Java;
templates Debug;

And yes, I see those as a placeholder so we can still load groups
dynamically, which gives us polymorphism for free.

I prefer the Java::foo syntax over a similar syntax using string parameters
(Java["foo"]) for several reasons:
- similar to a C++ function call.
- template could be checked at compile time for existence, once interfaces
can be defined for string templates.

One more explanation why I want template handling (and template lists within
ANTLR): I have grammars, for which I generate a Java and a C#
implementation. The problem is that simple things like lists have different
names and interfaces for both languages (List, add() in Java, IList, Add()
in C#). Therefore, I have to rewrite my action code all over the place. If I
can handle simple things like adding a template to a list, or calling a
template from within ANTLR, correct code would be generated for Java and C#
automatically and I could keep my action code the same...

So global::myList.add($MyTemplates::xxx()); would be OK as long as it is
translated to the proper target language.

BTW, I do call setTemplateLibrary in between phases when I use multiple
passes thru the same grammar. It actually works very nicely, if you use C#
with partial classes! A great feature that's missing in Java...

I'll be back next year :-)

So I wish you and everybody on the list a Happy New Year 2006!

Dr. Hartmut Kocher
Cortex Brainware GmbH


-----Urspr?ngliche Nachricht-----
Von: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] Im Auftrag von Terence Parr
Gesendet: Freitag, 23. Dezember 2005 21:25
An: ANTLR Interest; stringtemplate-interest
Betreff: [antlr-interest] improving template support in antlr v3

On Dec 23, 2005, at 3:12 AM, hwk.cortex-brainware@t-online.de wrote:
> I think there are some common scenarios:
>
> 1) Call different templates (even when I only return one template,  
> I might
> use some templates during calculation). We could use a common  
> syntax here
> like $ST["name"] to extract a template form the group. This would be a
> reserved word.

Yes, i have been working with this cool start-up company recently and  
I have been trying to use the template stuff.  I have not needed  
multiple templates from a single rule, but let me add my own  
frustrations here and we can probably come up with a nice bit of  
extension.  John Mitchell suggested this exact strategy...get  
something working (avoiding the complicated thing I was designing)  
and then try to build something with it! ;)

So, I do this a few times in a Java grammar:

StringTemplate fcallST = templateLib.getInstanceOf("fcall");
fcallST.setAttribute("ids", $type.st);  // type is a rule reference  
above
$anEnclosingTemplateVisibleHere.setAttribute("fcalls",fcallST);

Wouldn't it be nice to do as you say (a rewrite like constructor but  
in an action):

StringTemplate fcallST = $fcall(ids=$type.st);

and then we could have a syntax like pyStringTemplate to use array  
syntax instead of setAttribute:

$anEnclosingTemplateVisibleHere["fcalls"] = fcallST;

The problem of course is clear: The dollar syntax $x.y is way to  
simple to handle the above and it's ambiguous anyway.  We'd need a  
keyword as you say I think, but that makes it messy.

<sidetracked>
Actually, given that I must be consistent across output options, how  
will we build trees inline?

{AST t = ^($ID.text, $INT.text);}

I suppose we could make ^ significant like we did with #(...)  
before.  Hmm...What would a node constructor be?

^ID["blort]

I suppose that would be ok.
</sidetracked>

So, do we need a special symbol for inline stringtemplate stuff?   
Ick.  @ is action, $ is attribute.  Hm...keyword is probably better.   
Ack...can't just randomly look for a keyword...need a symbol.   
Hmm...well, what about, symbol plus braces:

StringTemplate fcallST = ${fcall(ids=$type.st)};
${anEnclosingTemplateVisibleHere["fcalls"] = fcallST};

I don't like overloading $ though but I hate to create another  
special symbol just for templates like:

StringTemplate fcallST = %{fcall(ids=$type.st)}
%{anEnclosingTemplateVisibleHere["fcalls"] = fcallST};

Is there some generic thing I could do with %{...}?  Ick.  Would they  
have to nest?

%{anEnclosingTemplateVisibleHere["fcalls"] = %{fcall(ids=$type.st)}};

Probably.  To me that is not very readable to the casual observer  
where the explicit is very readable.

Perhaps your $templates::fcall(ids=$type.st) would work with  
"templates" being the keyword / built-in scope of templates.   
Actually that would work. :)

StringTemplate fcallST = $templates::fcall(ids=$type.st);
$anEnclosingTemplateVisibleHere.setAttribute("fcalls",fcallST);

It saves a bit of typing and is more clear. :)

> Better yet: How about defining a string template group in the
> grammar:
>
> group MyTemplates;  // This only a defines a property in the parser  
> to set a
> string template group. Later, we could allow to define the  
> templates inline.

I think you want this to be dynamic so, as you request below, you can  
reset the template group for each pass using setTemplateLib().

> Then one could call templates of the group using a syntax like
> MyTemplates::Name. There would be a default group, which is used if  
> the
> group name is omitted.

We can just use the $templates::name(...) generic mechanism so we can  
dynamically change the actual group.  Your way might be useful with  
the ST interface I plan on implementing.  In this way, I could verify  
that your template names actually make sense.  Heh, i like it!

> -> xxx  calls default group "xxx" and returns this as result
> -> MyTemplates::xxx calls "xxx" in the the MyTemplates group and  
> returns
> this as result.

Interesting.  You want to be able to define multiple template  
libraries?  Ok, so

$templates::fcall(...)
$MyTemplates::blort(...)

I dislike overriding the $scope::x syntax so much, but it seems like  
it would work.  How would we specify the new template groups?

templates Java;
templates Debug;

then you could say $Java::fcall(...) and $Debug::dump(...).  But, the  
lib names should be interfaces so you're not locked into a specific  
template group, right?  This would generate methods like:

setJavaTemplateLib(...)

in the parser so you could set the actual lib.

How often would this multiple template lib thing be used do you think?

> Within actions $MyTemplates::xxx would call the template.
>
> Now, we could nest them:
>
> -> ResultTemplate(MyTemplates::xxx($Name), MyTemplates::yyy($Id)), or
> whatever...

Yup.

Oh, right we'd need to allow

-> Java::fcall(...)

syntax too.

> 2) Build a collection of templates. These are useful to pass them  
> to other
> templates...
>
> Currently, only the result of a rule can be added to a list. This  
> could be
> expanded to support multiple lists, one per template.
>
> Just allow the same syntax to be used in front of each template call:
> myList+=MyTemplates::xxx adds the template to a list called myList.

Is that in an action?  You can pass in multiple templates to fill  
with templates you create in that rule.  You can pass multiple return  
values back and just add to a list manually.  How often do you need  
to return multiple templates though?  When I need this I just access  
the outer template where they will go and then setAttribute for each  
new template.  I've yet to need multiple return templates.

> Maybe we should add the possibility to define lists in a scope:
> scope global {
> Templatecollection myList;  // or something like that
> }
>
> Use it like this: global::myList+=MyTemplates::xxx(...).

We're getting closer and closer to the simple neutral action language  
I was thinking of adding later ;)  Hm...this is getting a big much. I  
think:

global::myList.add($MyTemplates::xxx());

would be just as good ;)

> Overall, I think, template manipulation within ANTLR should be  
> expanded. Of

I plan on it...just trying to let actual need guide us. :)

> course, I can code that now within actions but it would be far more  
> user
> friendly if normal cases could be expressed in a standard and  
> uniform way.

Yes, let's come up with a nice extension.

> I have several 2.7.5 grammars in C# and Java, which only differs in  
> the
> action code because of different method and class names. Using  
> ANTLR 3 with
> templates I was hoping to move all differences to a set of  
> templates. This
> only works if templates can be manipulated within ANTLR itself.

Can't you just a different template group with setTemplateLib?

> Kind regards
>
>
> BTW: I was thinking about using multiple passes using the same  
> action code,
> but using different template groups for each pass...

Are you using setTemplateLib?

Let me add my own frustrations now.

This is a drag:

packageDefinition
	:	'package' identifier SEMI -> {$identifier.st}
	;

Could we do this?

packageDefinition
	:	'package' identifier SEMI -> identifier
	;

What if we always returned the template for a single element?

type
	:	identifier
	|	builtInType
	;

the template for identifier / builtInType would be autocopied to  
$type.st return value.  I don't like this actually... it's not  
consistent with having multiple elements in a production.  Perhaps

type
	:	identifier -> identifier
	|	builtInType
	;

is "better".  Weird looking though.

Here is a case where I might have just plain foo instead of a.b.c.   
In either case I need to set the return type.  I hate doing ( x ->  
template(...) ) syntax in the middle of a rule.  I want that -> on  
the end!  Here is what I do now:

identifier
	:	(i=IDENT -> qid(id={$i.text}))
		( DOT i=IDENT {$identifier.st.setAttribute("id",$i.text);}
)*
	;

Oh, actually we can do this properly even now.  Duh, just queue up  
the IDs.

identifier
	:	ids+=IDENT ( DOT ids+=IDENT )*
                 -> qid(id={toStrings($ids)})
	;

I've posted this to the blog too.

http://www.antlr.org/blog/antlr3/rewrite.tml

Ter


From parrt at cs.usfca.edu  Mon Dec 26 16:20:01 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon Dec 26 16:22:05 2005
Subject: [antlr-interest] added new domains
Message-ID: <49ADAEDC-3547-4DCD-95A2-567A0903ED84@cs.usfca.edu>

Howdy, I just added

http://www.parsergenerator.org

and

http://www.templateengine.org

pointing to antlr and stringtemplate sites, respectively.  May draw  
traffic, help validate site content.

Ter
From geiroves at online.no  Tue Dec 27 00:38:14 2005
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Tue Dec 27 00:38:15 2005
Subject: [antlr-interest] added new domains
In-Reply-To: <49ADAEDC-3547-4DCD-95A2-567A0903ED84@cs.usfca.edu>
Message-ID: <000001c60ac0$e21dcc00$0100a8c0@rexii>

Hello,

Merry Christmas to you all, and a Happy New Year.

I have a few questions about the new sites launched: I cannot find links
to them from the ANTLR main page, why is that? As I have said before, I
do not think it is a smart move to announce important information like
this **only** for insiders that read **every** posting to the group!

And, the WIKI pages that **are** linked from the www.antlr.org do still
not work.

I am using the site browser found in GetRight to find out what is hidden
at the ANTLR site, and you may e.g. find: 

http://www.placidsystems.com/ where ANTLR Studio is announced. Again I
cannot find a link to this tool from the main page. I am puzzled by
this.

New potential users will judge the tool from Main Page and what they can
find linked from that page.

The problem is all this hidden information does not make ANTLR more
approachable, on the contrary.


Geir Ove

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: 27. desember 2005 01:20
To: ANTLR Interest; stringtemplate-interest
Subject: [antlr-interest] added new domains


Howdy, I just added

http://www.parsergenerator.org

and

http://www.templateengine.org

pointing to antlr and stringtemplate sites, respectively.  May draw  
traffic, help validate site content.

Ter



From parrt at cs.usfca.edu  Tue Dec 27 10:07:06 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue Dec 27 10:09:08 2005
Subject: [antlr-interest] added new domains
In-Reply-To: <000001c60ac0$e21dcc00$0100a8c0@rexii>
References: <000001c60ac0$e21dcc00$0100a8c0@rexii>
Message-ID: <4B1DC89E-F8CC-4EB9-A809-27DA6FB26EDD@cs.usfca.edu>


On Dec 27, 2005, at 12:38 AM, Geir Ove Skjaervik wrote:

> Hello,
>
> Merry Christmas to you all, and a Happy New Year.
>
> I have a few questions about the new sites launched: I cannot find  
> links
> to them from the ANTLR main page, why is that? As I have said  
> before, I
> do not think it is a smart move to announce important information like
> this **only** for insiders that read **every** posting to the group!

Hi Geir,

Uh...they are only to get google to rank the sites higher for those  
search terms embedded in the domains.  Nothing more, nothing less.

> And, the WIKI pages that **are** linked from the www.antlr.org do  
> still
> not work.

I only have two hands and both are busy at the moment. ;)

> I am using the site browser found in GetRight to find out what is  
> hidden
> at the ANTLR site, and you may e.g. find:
>
> http://www.placidsystems.com/ where ANTLR Studio is announced. Again I
> cannot find a link to this tool from the main page. I am puzzled by
> this.

Yes, a news link is appropriate.  Thanks.

Ter
From jon at jaggersoft.com  Tue Dec 27 16:20:13 2005
From: jon at jaggersoft.com (Jon Jagger)
Date: Tue Dec 27 16:08:56 2005
Subject: [antlr-interest] using antlr for multiple parse phases?
Message-ID: <43B1DA3D.60603@jaggersoft.com>

I would like to know if its possible to use antlr so the token stream 
input at 'phase N' is built from the ast output at 'phase N-1'
(and if so, is the lookahead information still computed correctly)?
Thanks


From parrt at cs.usfca.edu  Wed Dec 28 10:26:21 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec 28 10:28:19 2005
Subject: [antlr-interest] using antlr for multiple parse phases?
In-Reply-To: <43B1DA3D.60603@jaggersoft.com>
References: <43B1DA3D.60603@jaggersoft.com>
Message-ID: <39935DB0-6938-4150-BD39-4B8E84C1D402@cs.usfca.edu>


On Dec 27, 2005, at 4:20 PM, Jon Jagger wrote:

> I would like to know if its possible to use antlr so the token  
> stream input at 'phase N' is built from the ast output at 'phase N-1'
> (and if so, is the lookahead information still computed correctly)?

Yup, though people usually use trees not token streams for multiple  
phases.

Ter
From ktilton at nyc.rr.com  Wed Dec 28 14:42:17 2005
From: ktilton at nyc.rr.com (Kenny Tilton)
Date: Wed Dec 28 14:42:21 2005
Subject: [antlr-interest] Getting Started -> NoClassDefFoundError: Main/class
Message-ID: <43B314C9.2000004@nyc.rr.com>

Hi, newby here. I have 20kloc of "C" I want to translate to Common Lisp, 
looks like Antlr is the way to go.

I downloaded the prebuilt antlr win32 exe and had no problem processing 
the t.g file as described on the Getting Started page: 
http://www.antlr.org/article/cutpaste/index.html

Once I got my classpath environment variable set correctly, I also had 
no problem with the next step:

   javac *.java

But on the next step:

   java Main
  Exception in thread "main" java.lang.NoClassDefFoundError: Main/class

Of course there /is/ a class called Main in the code geenrated by antlr, 
so I am at a loss. Unfortunately I have barely done a thousand lines of 
Java (ten years ago) so I am stuck on what I am sure is just a simple 
mistake.

thx, kenny
From parrt at cs.usfca.edu  Wed Dec 28 14:43:19 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed Dec 28 14:45:16 2005
Subject: [antlr-interest] Getting Started -> NoClassDefFoundError:
	Main/class
In-Reply-To: <43B314C9.2000004@nyc.rr.com>
References: <43B314C9.2000004@nyc.rr.com>
Message-ID: <C5342CE1-406E-4E10-A6FD-6177E17A08E5@cs.usfca.edu>


On Dec 28, 2005, at 2:42 PM, Kenny Tilton wrote:
>   java Main
>  Exception in thread "main" java.lang.NoClassDefFoundError: Main/class
>
> Of course there /is/ a class called Main in the code geenrated by  
> antlr, so I am at a loss. Unfortunately I have barely done a  
> thousand lines of Java (ten years ago) so I am stuck on what I am  
> sure is just a simple mistake.

Your classpath has to have the dir in it that has Main.class  
file. :)  Make sure it has '.' (dot) for example.

Ter

From ktilton at nyc.rr.com  Wed Dec 28 16:28:39 2005
From: ktilton at nyc.rr.com (Kenny Tilton)
Date: Wed Dec 28 16:28:45 2005
Subject: [antlr-interest] Getting Started ->
	NoClassDefFoundError:	Main/class
In-Reply-To: <C5342CE1-406E-4E10-A6FD-6177E17A08E5@cs.usfca.edu>
References: <43B314C9.2000004@nyc.rr.com>
	<C5342CE1-406E-4E10-A6FD-6177E17A08E5@cs.usfca.edu>
Message-ID: <43B32DB7.7050108@nyc.rr.com>

Terence Parr wrote:

>
> On Dec 28, 2005, at 2:42 PM, Kenny Tilton wrote:
>
>>   java Main
>>  Exception in thread "main" java.lang.NoClassDefFoundError: Main/class
>>
>> Of course there /is/ a class called Main in the code geenrated by  
>> antlr, so I am at a loss. Unfortunately I have barely done a  
>> thousand lines of Java (ten years ago) so I am stuck on what I am  
>> sure is just a simple mistake.
>
>
> Your classpath has to have the dir in it that has Main.class  file. :)

Yikes! That occurred to me but I ruled out Java not using the present 
working directory. :) Thanks!

kenny
From henryb at ntlworld.com  Thu Dec 29 04:05:30 2005
From: henryb at ntlworld.com (Henry Butowsky)
Date: Thu Dec 29 03:34:30 2005
Subject: [antlr-interest] TEMPLATES
Message-ID: <43B3D10A.6040709@ntlworld.com>

Hi Guys,
	This isn't strictly an antlr problem, but I'm desperate for some help.
	
Basically I would like to know how to create a pointer to a class that 
has been generated by a template.
In my code I want some thing like the following to work.
If someone could tell me what TEMPLATE POINTER is I would be very gratefu



TEMPLATE_POINTER Var_Type(nc_type type) {

static VarOp<short> VS;
static VarOp<int> Vl;
static VarOp<float> Vf;
static VarOp<double> Vd;

	
if (type ==NC_SHORT) TEPLATE_POINTER= &VS
if (type ==NC_INT) TEPLATE_POINTER= &Vl
if (type ==NC_FLOAT) TEPLATE_POINTER= &Vf
if (type ==NC_DOUBLE) TEPLATE_POINTER= &Vd

return TEMPLATE_POINTER

}

regards Henry

From diese.adresse.nutze.ich at nurfuerspam.de  Thu Dec 29 08:17:48 2005
From: diese.adresse.nutze.ich at nurfuerspam.de (diese.adresse.nutze.ich@nurfuerspam.de)
Date: Thu Dec 29 08:17:53 2005
Subject: [antlr-interest] Pretty Printer / Beautifier with Antlr
Message-ID: <2710.1135873068@www60.gmx.net>

Hi guys,

I am trying to write an pretty printer for a language I have designed. It is
a fairly simple one and the pretty printer isn't supposed to do lots of
stuff:
Actually, the only thing I'd like it to do is
- indent text
- insert / remove line breaks after certain (not all) keywords.

Due to performance criterias and this simple objective I thought I should be
able to do the pretty printing without building the whole AST. Hence I am
thinking about taking the tokens one by one from the lexer. Then I'll check
whether the token I just received is a keyword I'd like to indent / push in
a newline.
The problem I have now is that sometimes there are keywords in the middle of
an expression, and I want to indent this expression. That would mean I have
to backtrack... and that doesn't sound elegant to me.

Anyone with a better idea, e.g. a little ANTLR Parser that does the trick?

I'd appreciate your input a lot,

Travis

-- 
Telefonieren Sie schon oder sparen Sie noch?
NEU: GMX Phone_Flat http://www.gmx.net/de/go/telefonie
From pwhitaker at autobase.net  Thu Dec 29 10:54:47 2005
From: pwhitaker at autobase.net (pwhitaker@autobase.net)
Date: Thu Dec 29 10:54:50 2005
Subject: [antlr-interest] StringTemplate : delimter other than dollar sign?
Message-ID: <1135882486.71669@autobase.net>

I'm using the C# port of StringTemplate. Working this library into a auto sales project, the dollar sign is not a good choice due to frequent currency references. I've noticed the symbol seems to be interwoven in the template code. Has anybody changed this character? Is there an effective way to make sure that I change it in all the right places? I would like to try the pound symbol instead (#).

Thanks,
Paul Whitaker
From parrt at cs.usfca.edu  Thu Dec 29 12:21:30 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu Dec 29 12:23:25 2005
Subject: [antlr-interest] StringTemplate : delimter other than dollar sign?
In-Reply-To: <1135882486.71669@autobase.net>
References: <1135882486.71669@autobase.net>
Message-ID: <2271E58B-6235-43D5-83D2-380DDE3BC574@cs.usfca.edu>


On Dec 29, 2005, at 10:54 AM, pwhitaker@autobase.net wrote:

> I'm using the C# port of StringTemplate. Working this library into  
> a auto sales project, the dollar sign is not a good choice due to  
> frequent currency references. I've noticed the symbol seems to be  
> interwoven in the template code. Has anybody changed this  
> character? Is there an effective way to make sure that I change it  
> in all the right places? I would like to try the pound symbol  
> instead (#).

At least with the Java version you can use <...> if you pass in the  
AngleBracketTemplateLexer.class :)  See the unit tests.

Ter
From luisl at scarab.co.za  Thu Dec 29 12:36:18 2005
From: luisl at scarab.co.za (Luis Leal)
Date: Thu Dec 29 12:36:32 2005
Subject: [antlr-interest] StringTemplate : delimter other than dollar sign?
In-Reply-To: <1135882486.71669@autobase.net>
Message-ID: <MPEMLILMNEOKCPPBGEMKOEEOCJAA.luisl@scarab.co.za>

Hi Paul,

You can use angle brackets instead of dollar signs. Use the following
constructor:

StringTemplateGroup group = new StringTemplateGroup("sqlstuff", "/tmp",
typeof(AngleBracketTemplateLexer));

Regards

Luis

-----Original Message-----
From: pwhitaker@autobase.net [mailto:pwhitaker@autobase.net]
Sent: 29 December 2005 08:55 PM
To: antlr-interest@antlr.org
Subject: [antlr-interest] StringTemplate : delimter other than dollar
sign?


I'm using the C# port of StringTemplate. Working this library into a auto
sales project, the dollar sign is not a good choice due to frequent currency
references. I've noticed the symbol seems to be interwoven in the template
code. Has anybody changed this character? Is there an effective way to make
sure that I change it in all the right places? I would like to try the pound
symbol instead (#).

Thanks,
Paul Whitaker



From ktilton at nyc.rr.com  Thu Dec 29 16:26:46 2005
From: ktilton at nyc.rr.com (Kenny Tilton)
Date: Thu Dec 29 16:26:53 2005
Subject: [antlr-interest] import XXX; -> eror '.' expected
Message-ID: <43B47EC6.2050704@nyc.rr.com>

Still a newby, to Antlr and Java....

I ran antlr on the StdCParser.g in the cgram download.

The resulting StdCLexer.java begins:

// $ANTLR 2.7.5 (20050201): "StdCParser.g" -> "StdCLexer.java"$

import java.io.InputStream;
...etc...
import antlr.SemanticException;

        import CToken;
        import java.io.*;
        import LineObject;
        import antlr.*;

javac (under SDK 1.4.2_10) whines about '.' expected just before the 
semi-colon on both CToken abd LineObject. I double-checked my classpath 
setting to make sure the home directory was in the path.

A little Googling turned up an article saying import actually requires a 
package name, since there is no need to import something in the same 
package. The writer indicated that prior to 1.4 one could get away with 
the above practice, but in 1.4 they started enforcing the rule.

Am I on the right track, or am I missing something more important? In 
the meantime I will change the StdCParser.g to not have those two 
imports and soldier on.

kenny

From yair at razim.com  Thu Dec 29 20:39:00 2005
From: yair at razim.com (Yair Raz)
Date: Thu Dec 29 20:39:16 2005
Subject: [antlr-interest] MATLAB grammar
Message-ID: <005f01c60cfa$f4904250$0201a8c0@YairThinkPad>

Does any one know if there is ANTLR grammar (lexer and parser) for MATLAB?

 

-----------------------------------

 <mailto:yair@razim.com> yair@razim.com

Phone  (408) 499-7025

Fax:    (408) 746-2806

-----------------------------------

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051229/225c644c/attachment.html
From pwhitaker at autobase.net  Fri Dec 30 05:44:46 2005
From: pwhitaker at autobase.net (Paul Whitaker)
Date: Fri Dec 30 05:47:03 2005
Subject: [antlr-interest] StringTemplate : delimter other than dollar sign?
In-Reply-To: <MPEMLILMNEOKCPPBGEMKOEEOCJAA.luisl@scarab.co.za>
Message-ID: <000001c60d47$35633110$fc0210ac@abcorp.net>

Luis,

Thanks for the reply and the tip! I will try that, although it still may not
be effective since I am working within an HTML editor. This gives me hope
that there's potential to change the symbol though. It would appear that I
could create a new Lexer for, say, the pound symbol as a delimiter... Any
tips on getting started with that, before I dive in? I've never worked with
Antlr before this project.

Thanks again!
Paul

-----Original Message-----
From: Luis Leal [mailto:luisl@scarab.co.za] 
Sent: Thursday, December 29, 2005 3:36 PM
To: pwhitaker@autobase.net; antlr-interest@antlr.org
Subject: RE: [antlr-interest] StringTemplate : delimter other than dollar
sign?

Hi Paul,

You can use angle brackets instead of dollar signs. Use the following
constructor:

StringTemplateGroup group = new StringTemplateGroup("sqlstuff", "/tmp",
typeof(AngleBracketTemplateLexer));

Regards

Luis

-----Original Message-----
From: pwhitaker@autobase.net [mailto:pwhitaker@autobase.net]
Sent: 29 December 2005 08:55 PM
To: antlr-interest@antlr.org
Subject: [antlr-interest] StringTemplate : delimter other than dollar sign?


I'm using the C# port of StringTemplate. Working this library into a auto
sales project, the dollar sign is not a good choice due to frequent currency
references. I've noticed the symbol seems to be interwoven in the template
code. Has anybody changed this character? Is there an effective way to make
sure that I change it in all the right places? I would like to try the pound
symbol instead (#).

Thanks,
Paul Whitaker


From ktilton at nyc.rr.com  Fri Dec 30 08:31:55 2005
From: ktilton at nyc.rr.com (Kenny Tilton)
Date: Fri Dec 30 08:31:59 2005
Subject: [antlr-interest] tricky (to this newby) translation problem
Message-ID: <43B560FB.5000509@nyc.rr.com>

First of all, thanks to all for Antlr. I have taken my first baby step 
translating k&r C to Common Lisp and am feeling a lot better about 
converting 23kloc of "C" to Lisp. :)

I took the cgram example as my headstart, deriving from GnuCEmitter.g to 
get a new AnsiCLEmitter.g. My first change was in the translation of "C" 
enums. First, here is how I want to translate:

    "C": enum myEnum {zero, two=2, three };

   Common Lisp: (def-enum (myEnum) zero (two 2) three)

(Aside to the curious: no, CL does not have def-enum, I will have to 
write that.)

Now here is my problem. The recognizer for an enumerator such as "zero" 
or "two=2" looks like this:

   enumerator
        :       i:ID            { print( i ); }
                ( b:ASSIGN      { print( b ); }
                  expr
                )?
        ;

But my problem is that, if the match with an ASSIGN happens, I need to 
get a left-parens /in front/ of the emitted ID. Otherwise I have to 
always wrap enumerators in parens:

    (def-enum (myEnum) (zero) (two 2) (three))

Not the end of the world, but I am hoping I can make the emitted CL as 
nice as possible.

My first try was (roughly):

   enumerator
        :   i:ID          {print( i ); }
        | (j:ID          {print("("); print( j ); }
               ASSIGN      {print(" "); }
               expr        {print(")");}       
               )
      ;

But that gives me a nondeterminism warning when the grammar is processed 
by antlr and a mismatchedTokenException runtime error.

Full marks to the Antlr examples, I have gotten this far without 
learning too much about parsing. I will dive into the doc now to see if 
this idiom can be handled better, just asking here first in case this is 
a no-brainer someone can explain easily (or steer me to the right doc).

kenny

From parrt at cs.usfca.edu  Fri Dec 30 10:14:34 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec 30 10:16:27 2005
Subject: [antlr-interest] tricky (to this newby) translation problem
In-Reply-To: <43B560FB.5000509@nyc.rr.com>
References: <43B560FB.5000509@nyc.rr.com>
Message-ID: <D9B16557-E9F1-4018-B743-EF231C9F021B@cs.usfca.edu>


On Dec 30, 2005, at 8:31 AM, Kenny Tilton wrote:
>   enumerator
>        :       i:ID            { print( i ); }
>                ( b:ASSIGN      { print( b ); }
>                  expr
>                )?
>        ;
>
> But my problem is that, if the match with an ASSIGN happens, I need  
> to get a left-parens /in front/ of the emitted ID. Otherwise I have  
> to always wrap enumerators in parens:

Hi.  First let me suggest using StringTemplate in combination with  
ANTLR:

http://www.codegeneration.net/tiki-read_article.php?articleId=77

As to your problem.  Try this

enumerator
        :       i:ID
                ( b:ASSIGN      { print( i ); print( b ); }
                  expr
		 |            { print( i ); } // empty grammatical production
                )
        ;

Ter

From ewbank at gmail.com  Fri Dec 30 10:18:57 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri Dec 30 10:19:02 2005
Subject: [antlr-interest] tricky (to this newby) translation problem
In-Reply-To: <43B560FB.5000509@nyc.rr.com>
References: <43B560FB.5000509@nyc.rr.com>
Message-ID: <dd3a065f0512301018i3416f64fn58da7e30b03fd9cd@mail.gmail.com>

On 12/30/05, Kenny Tilton <ktilton@nyc.rr.com> wrote:
>    enumerator
>         :       i:ID            { print( i ); }
>                 ( b:ASSIGN      { print( b ); }
>                   expr
>                 )?
>         ;
>
> But my problem is that, if the match with an ASSIGN happens, I need to
> get a left-parens /in front/ of the emitted ID. Otherwise I have to
> always wrap enumerators in parens:

There's two ways you can do this; one is to use an intermediate form - a tree
parser - so that you move the ASSIGN above the id and the expr.  This is,
argueably, the ANTLR way.  There's a section on tree parsers in the
PDF manual that should help...

    // parser
    enumerator:
        : ID ( ASSIGN^ expr )?
        ;

    // tree parser - next pass
    enumerator:
        : i:ID { print i ; }
        | #( ASSIGN j:ID e:expr ) { print "(", j, e, ")"; }
        ;


The other way is very much like what you tried, but with a twist to
avoid the ambiguity:

    enumerator
        :   i:ID
            (
                ASSIGN      { print("("); print( i ); print(" "); }
                expr        {print(")");}
            |
                // no "= expr" - just need the name
                { print( i ); }
            )
        ;

On reflection, there's a third way that might be better only because
it normalizes the output lisp, and that is to always produce the
parens and the assigned value.  This helps to reduce the ambiguity and
variation in the lisp output...

    enumerators
    { int c = 0; }
    : ( c=enumerator[c] { c = c+1; } )+
    ;

    enumerator
    [int cur]
    returns [int nxt=cur+1]
        :   i:ID
            (
                ASSIGN      { print ( "(", i, " " ); }
                cur=expr    { nxt = nxt+1; }
            |
                // no "= expr" - assign the defined value
                { print ( "(", i, " ", cur, ")" ); }
            )
            ;

This will result in always having the equivalent number in the list. 
note that this is a sketch of what's needed; the actualy code will be
different based on what exactly you are wanting to do.
From sohail at taggedtype.net  Fri Dec 30 11:36:08 2005
From: sohail at taggedtype.net (Sohail Somani)
Date: Fri Dec 30 11:36:19 2005
Subject: [antlr-interest] tricky (to this newby) translation problem
In-Reply-To: <D9B16557-E9F1-4018-B743-EF231C9F021B@cs.usfca.edu>
References: <43B560FB.5000509@nyc.rr.com>
	<D9B16557-E9F1-4018-B743-EF231C9F021B@cs.usfca.edu>
Message-ID: <1135971369.17502.1.camel@localhost.localdomain>

On Fri, 2005-12-30 at 10:14 -0800, Terence Parr wrote:
> 
> Hi.  First let me suggest using StringTemplate in combination with  
> ANTLR:
> 
> http://www.codegeneration.net/tiki-read_article.php?articleId=77
> 

This is a good example. I wonder if we should write one that does a
TreeParser too. imho, thats the best route to take with StringTemplate.
What do you think?

From parrt at cs.usfca.edu  Fri Dec 30 11:40:07 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec 30 11:41:59 2005
Subject: [antlr-interest] tricky (to this newby) translation problem
In-Reply-To: <1135971369.17502.1.camel@localhost.localdomain>
References: <43B560FB.5000509@nyc.rr.com>
	<D9B16557-E9F1-4018-B743-EF231C9F021B@cs.usfca.edu>
	<1135971369.17502.1.camel@localhost.localdomain>
Message-ID: <27540197-0158-488A-8F86-13D05B2CF7DF@cs.usfca.edu>


On Dec 30, 2005, at 11:36 AM, Sohail Somani wrote:

> On Fri, 2005-12-30 at 10:14 -0800, Terence Parr wrote:
>>
>> Hi.  First let me suggest using StringTemplate in combination with
>> ANTLR:
>>
>> http://www.codegeneration.net/tiki-read_article.php?articleId=77
>>
>
> This is a good example. I wonder if we should write one that does a
> TreeParser too. imho, thats the best route to take with  
> StringTemplate.
> What do you think?

Yes, a great idea.  I've done that myself to good effect.  You'll  
note that ANTLR v3 has a first parser phase to get an AST and then 3  
tree passes to build NFAs, etc... plus a final tree pass, codegen.g,  
that spews out templates to generate code.  My new "best practices"  
philosophy for difficult/complex translations then is parsing to  
trees with multiple tree passes and a final ST construction pass.

Ter
From ktilton at nyc.rr.com  Fri Dec 30 13:05:49 2005
From: ktilton at nyc.rr.com (Kenny Tilton)
Date: Fri Dec 30 13:05:53 2005
Subject: [antlr-interest] tricky (to this newby) translation problem
In-Reply-To: <dd3a065f0512301018i3416f64fn58da7e30b03fd9cd@mail.gmail.com>
References: <43B560FB.5000509@nyc.rr.com>
	<dd3a065f0512301018i3416f64fn58da7e30b03fd9cd@mail.gmail.com>
Message-ID: <43B5A12D.1090508@nyc.rr.com>

Bryan Ewbank wrote:

>On 12/30/05, Kenny Tilton <ktilton@nyc.rr.com> wrote:
>  
>
>>   enumerator
>>        :       i:ID            { print( i ); }
>>                ( b:ASSIGN      { print( b ); }
>>                  expr
>>                )?
>>        ;
>>
>>But my problem is that, if the match with an ASSIGN happens, I need to
>>get a left-parens /in front/ of the emitted ID. Otherwise I have to
>>always wrap enumerators in parens:
>>    
>>
>
>There's two ways you can do this; one is to use an intermediate form - a tree
>parser - so that you move the ASSIGN above the id and the expr.  This is,
>argueably, the ANTLR way.  There's a section on tree parsers in the
>PDF manual that should help...
>
>    // parser
>    enumerator:
>        : ID ( ASSIGN^ expr )?
>        ;
>
>    // tree parser - next pass
>    enumerator:
>        : i:ID { print i ; }
>        | #( ASSIGN j:ID e:expr ) { print "(", j, e, ")"; }
>        ;
>
>  
>
Yes, that really tackles the problem head on. Nice.

>The other way is very much like what you tried, but with a twist to
>avoid the ambiguity:
>
>    enumerator
>        :   i:ID
>            (
>                ASSIGN      { print("("); print( i ); print(" "); }
>                expr        {print(")");}
>            |
>                // no "= expr" - just need the name
>                { print( i ); }
>            )
>        ;
>  
>
Also good. And now I do not have to learn where to put the tree parser. 
:) But something tells me that before long I will have to break down and 
learn more about parsing. That's OK, it seems like fun and the on-line 
doc and support here is great.

>On reflection, there's a third way that might be better only because
>it normalizes the output lisp, and that is to always produce the
>parens and the assigned value.  This helps to reduce the ambiguity and
>variation in the lisp output...
>
>    enumerators
>    { int c = 0; }
>    : ( c=enumerator[c] { c = c+1; } )+
>    ;
>
>    enumerator
>    [int cur]
>    returns [int nxt=cur+1]
>        :   i:ID
>            (
>                ASSIGN      { print ( "(", i, " " ); }
>                cur=expr    { nxt = nxt+1; }
>            |
>                // no "= expr" - assign the defined value
>                { print ( "(", i, " ", cur, ")" ); }
>            )
>            ;
>
>This will result in always having the equivalent number in the list. 
>  
>
Cool. But I have done Lisp "enum" macros in the past and always go with 
the approach in which one has an option to vary the syntax:

   (defenum zero one (five 5) six (seven))

That makes the resulting code as maintainable as a C enum just by 
inserting or removing items with default enumeration, and Lisp macros 
often give the programmer a little flexibility like this to minimize 
visual clutter.

Thx for the great suggestions to work from.

kenny

From ktilton at nyc.rr.com  Fri Dec 30 13:07:33 2005
From: ktilton at nyc.rr.com (Kenny Tilton)
Date: Fri Dec 30 13:08:02 2005
Subject: [antlr-interest] tricky (to this newby) translation problem
In-Reply-To: <D9B16557-E9F1-4018-B743-EF231C9F021B@cs.usfca.edu>
References: <43B560FB.5000509@nyc.rr.com>
	<D9B16557-E9F1-4018-B743-EF231C9F021B@cs.usfca.edu>
Message-ID: <43B5A195.2060601@nyc.rr.com>

[resending to list....]

Terence Parr wrote:

>
> On Dec 30, 2005, at 8:31 AM, Kenny Tilton wrote:
>
>>   enumerator
>>        :       i:ID            { print( i ); }
>>                ( b:ASSIGN      { print( b ); }
>>                  expr
>>                )?
>>        ;
>>
>> But my problem is that, if the match with an ASSIGN happens, I need  
>> to get a left-parens /in front/ of the emitted ID. Otherwise I have  
>> to always wrap enumerators in parens:
>
>
> Hi.  First let me suggest using StringTemplate in combination with  
> ANTLR:
>
> http://www.codegeneration.net/tiki-read_article.php?articleId=77

Actually I did look at that first because it sounded perfect, but that
article was greek to me so I looked for something I could grok without
learning about parsing. I know that sounds strange and that by the time
I am done I will have learned quite a bit, but I have a hard time
understanding doc. otoh, GnuCEmitter.g was on the face of it something I
could work from with a little guesswork.

The funny thing is that I just want to translate one old C app to Common
Lisp (CL) so I can resume development with my new preferred language. An
hour of hand translation was enough to send me looking for a translator.
Antlr looks brilliant, but I am also having to get up to speed on Java
and now parsing.

So believe it or not I am getting actual results without really having
learned anything yet! Full marks to the great examples, especially Cgram.

>
> As to your problem.  Try this
>
> enumerator
>        :       i:ID
>                ( b:ASSIGN      { print( i ); print( b ); }
>                  expr
>          |            { print( i ); } // empty grammatical production
>                )
>        ;
>
Diabolical. I like it. :)

Thx, kenny

From ktilton at nyc.rr.com  Fri Dec 30 13:15:33 2005
From: ktilton at nyc.rr.com (Kenny Tilton)
Date: Fri Dec 30 13:15:45 2005
Subject: [antlr-interest] tricky (to this newby) translation problem
In-Reply-To: <43B5A195.2060601@nyc.rr.com>
References: <43B560FB.5000509@nyc.rr.com>
	<D9B16557-E9F1-4018-B743-EF231C9F021B@cs.usfca.edu>
	<43B5A195.2060601@nyc.rr.com>
Message-ID: <43B5A375.5080209@nyc.rr.com>

Kenny Tilton wrote:

>
> Terence Parr wrote:
>
>>
>>
>> Hi.  First let me suggest using StringTemplate in combination with  
>> ANTLR:
>>
>> http://www.codegeneration.net/tiki-read_article.php?articleId=77
>
>
> Actually I did look at that first because it sounded perfect, but that
> article was greek to me so I looked for something I could grok without
> learning about parsing. 

I meant to mention: My other rationalization for being too lazy or dumb 
to figure out StringTemplate was that its raison d'etre seemed to be 
multiple targets, and I just need to get from C to Common Lisp. Does ST 
have other advantages besides multiple targets?

kenny
From sohail at taggedtype.net  Fri Dec 30 13:43:03 2005
From: sohail at taggedtype.net (Sohail Somani)
Date: Fri Dec 30 13:43:14 2005
Subject: [antlr-interest] tricky (to this newby) translation problem
In-Reply-To: <43B5A375.5080209@nyc.rr.com>
References: <43B560FB.5000509@nyc.rr.com>
	<D9B16557-E9F1-4018-B743-EF231C9F021B@cs.usfca.edu>
	<43B5A195.2060601@nyc.rr.com>  <43B5A375.5080209@nyc.rr.com>
Message-ID: <1135978984.18970.0.camel@localhost.localdomain>

On Fri, 2005-12-30 at 16:15 -0500, Kenny Tilton wrote:
> 
> I meant to mention: My other rationalization for being too lazy or dumb 
> to figure out StringTemplate was that its raison d'etre seemed to be 
> multiple targets, and I just need to get from C to Common Lisp. Does ST 
> have other advantages besides multiple targets?

Its "kind of" better than having print statements throughout your code,
plus lazy evaluation (iirc). Other than that, I don't think so.

From parrt at cs.usfca.edu  Fri Dec 30 13:42:40 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec 30 13:44:32 2005
Subject: [antlr-interest] tricky (to this newby) translation problem
In-Reply-To: <43B5A375.5080209@nyc.rr.com>
References: <43B560FB.5000509@nyc.rr.com>
	<D9B16557-E9F1-4018-B743-EF231C9F021B@cs.usfca.edu>
	<43B5A195.2060601@nyc.rr.com> <43B5A375.5080209@nyc.rr.com>
Message-ID: <91AE7F3D-A73D-48E4-A844-DE5CFA576992@cs.usfca.edu>

On Dec 30, 2005, at 1:15 PM, Kenny Tilton wrote:
> I meant to mention: My other rationalization for being too lazy or  
> dumb to figure out StringTemplate was that its raison d'etre seemed  
> to be multiple targets, and I just need to get from C to Common  
> Lisp. Does ST have other advantages besides multiple targets?

Yup :)  Clarity; easier to read an exemplar than imagine emergent  
behavior of code interspersed with prints.  Robustness.  Ease of  
development (can change templates w/o recompiling etc...).  Most  
importantly, next week when your boss says "you need a new target",  
you're ready. ;)

Ter
From parrt at cs.usfca.edu  Fri Dec 30 13:44:01 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec 30 13:45:51 2005
Subject: [antlr-interest] tricky (to this newby) translation problem
In-Reply-To: <1135978984.18970.0.camel@localhost.localdomain>
References: <43B560FB.5000509@nyc.rr.com>
	<D9B16557-E9F1-4018-B743-EF231C9F021B@cs.usfca.edu>
	<43B5A195.2060601@nyc.rr.com> <43B5A375.5080209@nyc.rr.com>
	<1135978984.18970.0.camel@localhost.localdomain>
Message-ID: <C0CD2EAB-251D-4A97-B2F6-9C25285CBA5B@cs.usfca.edu>


On Dec 30, 2005, at 1:43 PM, Sohail Somani wrote:

> On Fri, 2005-12-30 at 16:15 -0500, Kenny Tilton wrote:
>>
>> I meant to mention: My other rationalization for being too lazy or  
>> dumb
>> to figure out StringTemplate was that its raison d'etre seemed to be
>> multiple targets, and I just need to get from C to Common Lisp.  
>> Does ST
>> have other advantages besides multiple targets?
>
> Its "kind of" better than having print statements throughout your  
> code,
> plus lazy evaluation (iirc). Other than that, I don't think so.

Yeah, i forgot to mention that decoupling order of computation from  
order of output is crucial to difficult problems; e.g., languages  
like C where you need to generate headers for functions you've not  
parsed yet in the input stream. :)

Ter

From mtraverso at gmail.com  Fri Dec 30 17:06:24 2005
From: mtraverso at gmail.com (Martin Traverso)
Date: Fri Dec 30 17:06:26 2005
Subject: [antlr-interest] How to best resolve ambiguity?
Message-ID: <82b9e79a0512301706p799ec3a1ue62f9316917ac0e0@mail.gmail.com>

Howdy,

What is the best way to resolve the ambiguities caused by 'D' a in rule c in
the following grammar?

grammar T;
a: b ('+' b)*;
b: c ('*' c)*;
c: 'D' a
   | 'x';


Essentially, I want it to parse stuff like:

x * x + x * x
D x * x + x * x    (should parse as D ((x * x) + (x * x)) )
x + D x * x + x * x  (should parse as x + D ((x * x) + (x * x)) )
D x + D x  (should parse as D (x + D x) )
etc.

Thanks,
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051230/50b6a646/attachment.html
From parrt at cs.usfca.edu  Fri Dec 30 17:13:19 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec 30 17:15:10 2005
Subject: [antlr-interest] How to best resolve ambiguity?
In-Reply-To: <82b9e79a0512301706p799ec3a1ue62f9316917ac0e0@mail.gmail.com>
References: <82b9e79a0512301706p799ec3a1ue62f9316917ac0e0@mail.gmail.com>
Message-ID: <C0250B47-29C6-438F-A1D7-74EED8F06327@cs.usfca.edu>


On Dec 30, 2005, at 5:06 PM, Martin Traverso wrote:

> Howdy,
>
> What is the best way to resolve the ambiguities caused by 'D' a in  
> rule c in the following grammar?
>
> grammar T;
> a: b ('+' b)*;
> b: c ('*' c)*;
> c: 'D' a
>    | 'x';
>
Which rule has the ambiguity?  All the (...)* loops, right?  That  
unterminated 'a' in 'c' will cause trouble...a true ambiguity I  
think.  That said, set k=1 in the (...)* subrules and it will  
greedily and happily do the "natural" thing I think.

Ter
From mtraverso at gmail.com  Fri Dec 30 18:40:11 2005
From: mtraverso at gmail.com (Martin Traverso)
Date: Fri Dec 30 18:40:14 2005
Subject: [antlr-interest] How to best resolve ambiguity?
In-Reply-To: <C0250B47-29C6-438F-A1D7-74EED8F06327@cs.usfca.edu>
References: <82b9e79a0512301706p799ec3a1ue62f9316917ac0e0@mail.gmail.com>
	<C0250B47-29C6-438F-A1D7-74EED8F06327@cs.usfca.edu>
Message-ID: <82b9e79a0512301840l52de0914yb7d0b4ab085b9529@mail.gmail.com>

Ok, I did some testing, and antlr seems to be doing the natural thing even
without explicitly setting k=1. What threw me off was that when I compiled
the grammar I got the following errors:

test.g:6:7: Decision can match input such as "'+'" using multiple
alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input
test.g:7:7: Decision can match input such as "'*'" using multiple
alternatives: 1, 2
As a result, alternative(s) 2 were disabled for that input

But looking at the generated code it doesn't seem like any alt was disabled.

If I change the (..)* to (..)?, antlr does seem to disable the alt by
converting the (..)? to (..). But then, setting k=1 as suggested will have
no effect whatsoever.


On a related note, any idea why antlr complains with "2:16: The following
alternatives are unreachable: 2" for the following grammar? A bug, maybe?

grammar T;
a    :  'x' ('+' a)? ;

BTW, this is with the latest version in perforce.

Martin

On 12/30/05, Terence Parr <parrt@cs.usfca.edu> wrote:
>
>
> On Dec 30, 2005, at 5:06 PM, Martin Traverso wrote:
>
> > Howdy,
> >
> > What is the best way to resolve the ambiguities caused by 'D' a in
> > rule c in the following grammar?
> >
> > grammar T;
> > a: b ('+' b)*;
> > b: c ('*' c)*;
> > c: 'D' a
> >    | 'x';
> >
> Which rule has the ambiguity?  All the (...)* loops, right?  That
> unterminated 'a' in 'c' will cause trouble...a true ambiguity I
> think.  That said, set k=1 in the (...)* subrules and it will
> greedily and happily do the "natural" thing I think.
>
> Ter
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051230/ab8b7a18/attachment-0001.html
From parrt at cs.usfca.edu  Fri Dec 30 18:45:55 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec 30 18:47:46 2005
Subject: [antlr-interest] How to best resolve ambiguity?
In-Reply-To: <82b9e79a0512301840l52de0914yb7d0b4ab085b9529@mail.gmail.com>
References: <82b9e79a0512301706p799ec3a1ue62f9316917ac0e0@mail.gmail.com>
	<C0250B47-29C6-438F-A1D7-74EED8F06327@cs.usfca.edu>
	<82b9e79a0512301840l52de0914yb7d0b4ab085b9529@mail.gmail.com>
Message-ID: <44CE1574-04BA-4383-B8C6-7E10695E0E3E@cs.usfca.edu>


On Dec 30, 2005, at 6:40 PM, Martin Traverso wrote:

> Ok, I did some testing, and antlr seems to be doing the natural  
> thing even without explicitly setting k=1. What threw me off was  
> that when I compiled the grammar I got the following errors:
>
> test.g:6:7: Decision can match input such as "'+'" using multiple  
> alternatives: 1, 2
> As a result, alternative(s) 2 were disabled for that input
> test.g:7:7: Decision can match input such as "'*'" using multiple  
> alternatives: 1, 2
> As a result, alternative(s) 2 were disabled for that input
>
> But looking at the generated code it doesn't seem like any alt was  
> disabled.

Actually, alt 2 is the exit branch for a single alt (...)* loop so  
it's essentially saying it won't ever exit upon '+'. :)

> On a related note, any idea why antlr complains with "2:16: The  
> following alternatives are unreachable: 2" for the following  
> grammar? A bug, maybe?
>
> grammar T;
> a    :  'x' ('+' a)? ;

For one, ANTLR must complain that there is no rule obviously followed  
by EOF.  In this case, though, I think it's saying that there is no  
input that will predict bypassing the (...)?, which of course there  
isn't due to lack of start rule.  It should become ('+' a) in the  
output and probably never terminate. :)

hooray for ANTLR v3's analysis engine. :) ;)

Ter
From mtraverso at gmail.com  Fri Dec 30 19:30:20 2005
From: mtraverso at gmail.com (Martin Traverso)
Date: Fri Dec 30 19:30:24 2005
Subject: [antlr-interest] How to best resolve ambiguity?
In-Reply-To: <44CE1574-04BA-4383-B8C6-7E10695E0E3E@cs.usfca.edu>
References: <82b9e79a0512301706p799ec3a1ue62f9316917ac0e0@mail.gmail.com>
	<C0250B47-29C6-438F-A1D7-74EED8F06327@cs.usfca.edu>
	<82b9e79a0512301840l52de0914yb7d0b4ab085b9529@mail.gmail.com>
	<44CE1574-04BA-4383-B8C6-7E10695E0E3E@cs.usfca.edu>
Message-ID: <82b9e79a0512301930t494645bcia1267e8a7c117e5e@mail.gmail.com>

> Actually, alt 2 is the exit branch for a single alt (...)* loop so
> it's essentially saying it won't ever exit upon '+'. :)


I'm not sure I understand that... If I comment out the 'D' a alt from rule
c,  ANTLR stops complaining, but the generated code for rule a is the same
as when I leave it in. Regardless, isn't this true of even the simplest
(...)*, I mean, the fact that it won't exit upon matching what's between the
parenthesis (i.e., it has to keep looping)?

> On a related note, any idea why antlr complains with "2:16: The
> > following alternatives are unreachable: 2" for the following
> > grammar? A bug, maybe?
> >
> > grammar T;
> > a    :  'x' ('+' a)? ;
>
> For one, ANTLR must complain that there is no rule obviously followed
> by EOF.  In this case, though, I think it's saying that there is no
> input that will predict bypassing the (...)?, which of course there
> isn't due to lack of start rule.  It should become ('+' a) in the
> output and probably never terminate. :)


Yup, that's exactly what's happening. If I add a parent rule that simply
calls rule a, it starts working. Cool! :)

Thanks!

Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20051230/c60bae1f/attachment.html
From parrt at cs.usfca.edu  Fri Dec 30 19:34:45 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec 30 19:36:34 2005
Subject: [antlr-interest] How to best resolve ambiguity?
In-Reply-To: <82b9e79a0512301930t494645bcia1267e8a7c117e5e@mail.gmail.com>
References: <82b9e79a0512301706p799ec3a1ue62f9316917ac0e0@mail.gmail.com>
	<C0250B47-29C6-438F-A1D7-74EED8F06327@cs.usfca.edu>
	<82b9e79a0512301840l52de0914yb7d0b4ab085b9529@mail.gmail.com>
	<44CE1574-04BA-4383-B8C6-7E10695E0E3E@cs.usfca.edu>
	<82b9e79a0512301930t494645bcia1267e8a7c117e5e@mail.gmail.com>
Message-ID: <199F7941-F5EB-43A9-9C15-47D3E25BF8F5@cs.usfca.edu>

On Dec 30, 2005, at 7:30 PM, Martin Traverso wrote:
>> Actually, alt 2 is the exit branch for a single alt (...)* loop so
>> it's essentially saying it won't ever exit upon '+'. :)
>
> I'm not sure I understand that... If I comment out the 'D' a alt  
> from rule c,  ANTLR stops complaining, but the generated code for  
> rule a is the same as when I leave it in.

Yep.  It's doing the right thing; it's just warning you that it could  
actually match the Da by not jumping into the loop.

> Regardless, isn't this true of even the simplest (...)*, I mean,  
> the fact that it won't exit upon matching what's between the  
> parenthesis ( i.e., it has to keep looping)?

Yes, as we define all loops to be greedy.  You may want the warning  
though as it usually indicates you have weird thing in my language or  
grammar like, blech, allowing random trailing semicolons and commas  
like certain unmentioned languages. ;)

Ter
From jbarnesweb at yahoo.com  Fri Dec 30 19:52:33 2005
From: jbarnesweb at yahoo.com (Jeff Barnes)
Date: Fri Dec 30 19:52:36 2005
Subject: [antlr-interest] How to best resolve ambiguity?
In-Reply-To: <199F7941-F5EB-43A9-9C15-47D3E25BF8F5@cs.usfca.edu>
Message-ID: <20051231035233.46450.qmail@web54507.mail.yahoo.com>

> Yes, as we define all loops to be greedy.  You may want the warning  
> though as it usually indicates you have weird thing in my language or  
> grammar like, blech, allowing random trailing semicolons and commas  
> like certain unmentioned languages. ;)
 
Yeah, I had to rub my eyes a few times when I compiled this the first time:
 
public class Test
{
    public static void main(String[] args)
    {
        byte[] a = {0,0,0,}
        ;
        ;
        ;
    }
}
 
Regards,
Jeff
From parrt at cs.usfca.edu  Fri Dec 30 19:56:48 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri Dec 30 19:58:37 2005
Subject: [antlr-interest] How to best resolve ambiguity?
In-Reply-To: <20051231035233.46450.qmail@web54507.mail.yahoo.com>
References: <20051231035233.46450.qmail@web54507.mail.yahoo.com>
Message-ID: <F29C7442-F618-4468-8570-F62B5672B798@cs.usfca.edu>


On Dec 30, 2005, at 7:52 PM, Jeff Barnes wrote:
> Yeah, I had to rub my eyes a few times when I compiled this the  
> first time:
>
> public class Test
> {
>     public static void main(String[] args)
>     {
>         byte[] a = {0,0,0,}
>         ;
>         ;
>         ;
>     }
> }

Yeah, the only ambiguities I think I get in the python parser grammar  
are from wackiness such as this. ;)

Ter
From andrew at adersoftware.com  Sat Dec 31 15:29:50 2005
From: andrew at adersoftware.com (Andrew Deren)
Date: Sat Dec 31 15:28:24 2005
Subject: [antlr-interest] StringTemplate : delimter other than dollar sign?
In-Reply-To: <000001c60d47$35633110$fc0210ac@abcorp.net>
Message-ID: <200512311528335.SM02448@ANDREW>

Paul,
You can try using my TemplateEngine which uses #.
It's primary use for HTML (but can be used in other scenarios) and you can
use homesite from macromedia that supports # (as TemplateEngine syntax is
based on cold fusion).
You can find it at:
http://www.adersoftware.com/index.cfm?page=templateEngine2

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Paul Whitaker
Sent: Friday, December 30, 2005 7:45 AM
To: luisl@scarab.co.za; antlr-interest@antlr.org
Subject: RE: [antlr-interest] StringTemplate : delimter other than dollar
sign?

Luis,

Thanks for the reply and the tip! I will try that, although it still may not
be effective since I am working within an HTML editor. This gives me hope
that there's potential to change the symbol though. It would appear that I
could create a new Lexer for, say, the pound symbol as a delimiter... Any
tips on getting started with that, before I dive in? I've never worked with
Antlr before this project.

Thanks again!
Paul

-----Original Message-----
From: Luis Leal [mailto:luisl@scarab.co.za] 
Sent: Thursday, December 29, 2005 3:36 PM
To: pwhitaker@autobase.net; antlr-interest@antlr.org
Subject: RE: [antlr-interest] StringTemplate : delimter other than dollar
sign?

Hi Paul,

You can use angle brackets instead of dollar signs. Use the following
constructor:

StringTemplateGroup group = new StringTemplateGroup("sqlstuff", "/tmp",
typeof(AngleBracketTemplateLexer));

Regards

Luis

-----Original Message-----
From: pwhitaker@autobase.net [mailto:pwhitaker@autobase.net]
Sent: 29 December 2005 08:55 PM
To: antlr-interest@antlr.org
Subject: [antlr-interest] StringTemplate : delimter other than dollar sign?


I'm using the C# port of StringTemplate. Working this library into a auto
sales project, the dollar sign is not a good choice due to frequent currency
references. I've noticed the symbol seems to be interwoven in the template
code. Has anybody changed this character? Is there an effective way to make
sure that I change it in all the right places? I would like to try the pound
symbol instead (#).

Thanks,
Paul Whitaker




