From parrt at cs.usfca.edu  Sun May  1 11:01:09 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun May  1 11:00:53 2005
Subject: [antlr-interest] translation of $x references in v3.0
Message-ID: <1c446b791a54ca971794a057d3942fb9@cs.usfca.edu>

Howdy,

I'm neck deep in the action translation at the moment; mostly 
refactoring and adding unit tests after speaking with John Mitchell 
yesterday at length.  After he smacked me around a little, I am 
convinced that I need to make some changes.  One is that we will use $x 
to refer to the stuff you're used to like parameters, return values, 
token labels, and rule labels; @x.y will refer to the new dynamic 
attribute stuff that you've been hearing about.  John and I agreed that 
a separate symbol is justified as the dynamic attributes are so 
different than the regular attributes.

Anyway, on to simple $x references.  One of the things that drives me 
nuts in 2.x is that sometimes you can forget the #x or $x and have it 
still get through ANTLR to compile and run...but #x, for example, is 
different than x!  Ack!  This kind of bug has trapped me for hours 
sometimes.

My proposal is that all labels and simple attributes like parameters 
are generated with a prefix or something so that you cannot 
accidentally reference them in an action.  This helps me track which 
return values you access, for example, which helps me generate better 
code.  If nobody references a rule return value, I won't generate code 
for it. :)

So if you had:

a[String s, int x] returns [float y]
   : id=ID f=field {s, x, y, id, f.z;}
   ;
field returns [int z]
   : ...
   ;

you'd get compilation errors on s, x, y, id, and f.  You need to do

a[String s, int x] returns [float y]
   : id=ID f=field {$s, $x, $y, $id, $f.z;}
   ;

Note that multiple return values require that I build a struct or 
simple class to hold the values so s and x do not even exist as simple 
variable references.

Anybody care to comment?

Ter
I've posted this to one of the blogs:
http://www.antlr.org/blog/antlr3/rewrite.tml
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From ora.et.labora at web.de  Sun May  1 12:44:06 2005
From: ora.et.labora at web.de (wolfgang haefelinger)
Date: Sun May  1 12:44:35 2005
Subject: [antlr-interest] Re: Bug in antlr.py (Python runtime module)
References: <d4oi4o$mt2$1@sea.gmane.org>
Message-ID: <d53b6a$ku3$1@sea.gmane.org>

Hello Benjamin,

thanks for reporting this problem. There's no need to report bugs
in the jGuru forum.  This mailing  list  will do as well. You may
also send Python related problems (or wishes)  directly  to me  -
ora dot et dot labora at web dot de (Wolfgang Haefelinger).

Thanks again,
Wolfgang.


"Benjamin Niemann" <pink@odahoda.de> wrote in 
message news:d4oi4o$mt2$1@sea.gmane.org...
> Hello,
>
> I just started to use my favourite parser generator with my favourite
> programming language ;)
>
> Here's a small bug that a have found:
> In antlr.py from 2.7.5, line 242-250
>
> -----------------------------------------------------------------------
>            sb.append("expecting char ")
>            if self.mismatchType == MismatchedCharException.NOT_RANGE:
>                sb.append("NOT ")
>            sb.append("in range: ")
>            appendCharName(sb, self.expecting)
>            sb.append("..")
>            appendCharName(sb, self.upper)
>            sb.append(", found ")
>            appendCharName(sb, self.foundChar)
> -----------------------------------------------------------------------
>
> This should be 3*'self.appendCharName' (as it is correctly done a few 
> lines
> above and below).
>
> The FAQ says that I should post bug reports in the jGuru forum, but I'm 
> not
> in the mood today to register on just another website and I'm working on a
> slow computer where browsing website with flash ads is quite a pain. I
> could also directly mail to one of the 'antlr for python' maintainers.
> What's the preferred way? (Only if I find more issues or course ;)
>
> -- 
> Benjamin Niemann
> Email: pink at odahoda dot de
> WWW: http://www.odahoda.de/
>
> 



From Loring.G.Craymer at jpl.nasa.gov  Sun May  1 14:00:35 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Sun May  1 14:00:37 2005
Subject: [antlr-interest] translation of $x references in v3.0
In-Reply-To: <1c446b791a54ca971794a057d3942fb9@cs.usfca.edu>
Message-ID: <200505012100.j41L0ZDQ028113@xmta1.jpl.nasa.gov>

Ter--

I think the right answer is "It's about time that that particular defect was
fixed!"  However, that will make it harder to port existing ANTLR 2 apps to
ANTLR 3 (at least the Byzantine ones).  I'd suggest either having a flag for
ANTLR 2 compatibility on this or putting the suffix (and prefix--I prefer
prefixes to suffixes, but ANTLR 2 uses suffixes) under user control.

I gather that you are considering $ as the prefix character.  Not a good
choice in general--that would make it hard to have a BASIC target or any of
the UNIX shell scripting languages--although it does fit the Java/C++/C#
targets.  In fact, I'd vote against having more than one special character
for attributes in actions:  the only feature it provides the user is to
allow duplicate use of names and it complicates the translation mechanism
for the ANTLR backend developer.

Come to think of it, I would suggest considering 

@id = ID

Instead of  id = ID in your example.

--Loring

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Terence Parr
> Sent: Sunday, May 01, 2005 11:01 AM
> To: 'ANTLR Interest'
> Subject: [antlr-interest] translation of $x references in v3.0
> 
> Howdy,
> 
> I'm neck deep in the action translation at the moment; mostly
> refactoring and adding unit tests after speaking with John Mitchell
> yesterday at length.  After he smacked me around a little, I am
> convinced that I need to make some changes.  One is that we will use $x
> to refer to the stuff you're used to like parameters, return values,
> token labels, and rule labels; @x.y will refer to the new dynamic
> attribute stuff that you've been hearing about.  John and I agreed that
> a separate symbol is justified as the dynamic attributes are so
> different than the regular attributes.
> 
> Anyway, on to simple $x references.  One of the things that drives me
> nuts in 2.x is that sometimes you can forget the #x or $x and have it
> still get through ANTLR to compile and run...but #x, for example, is
> different than x!  Ack!  This kind of bug has trapped me for hours
> sometimes.
> 
> My proposal is that all labels and simple attributes like parameters
> are generated with a prefix or something so that you cannot
> accidentally reference them in an action.  This helps me track which
> return values you access, for example, which helps me generate better
> code.  If nobody references a rule return value, I won't generate code
> for it. :)
> 
> So if you had:
> 
> a[String s, int x] returns [float y]
>    : id=ID f=field {s, x, y, id, f.z;}
>    ;
> field returns [int z]
>    : ...
>    ;
> 
> you'd get compilation errors on s, x, y, id, and f.  You need to do
> 
> a[String s, int x] returns [float y]
>    : id=ID f=field {$s, $x, $y, $id, $f.z;}
>    ;
> 
> Note that multiple return values require that I build a struct or
> simple class to hold the values so s and x do not even exist as simple
> variable references.
> 
> Anybody care to comment?
> 
> Ter
> I've posted this to one of the blogs:
> http://www.antlr.org/blog/antlr3/rewrite.tml
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com

From scott at javadude.com  Sun May  1 14:16:45 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Sun May  1 14:17:02 2005
Subject: [antlr-interest] translation of $x references in v3.0
In-Reply-To: <1c446b791a54ca971794a057d3942fb9@cs.usfca.edu>
Message-ID: <200505012214.j41MEViP024439@s2.eroute.net>

First, I'd suggest you make parameters and return values hash tables (or
some other simple dictionary). Very easy to manage that way.

As for $, I think you should have them be represented by some prefixed or
suffixed name in the generated code, like __foo or something unlikely to
collide with user-defined names. That way, $x and x are really two different
names in the code.


For @ I'd much rather see something that's user configurable along the lines
of xml namespace prefixes. (Right now I'm using it for XML attributes)

What do I mean?

First, I'd like to see plugins that can scan and modify the action code.
These plugins could replace special template expressions when scanning the
code, and there could be more than one plugin active.

If there's only one plugin active (let's say xml processing), something like
@foo would just mean "the foo attribute of the current tag".

If there's more than one plugin active for other code generation fun, you
could assign prefixes in the grammar. For example, suppose we were doing an
xml parser that wanted to collect some stuff into a list while it's parsing.
We could have a "data structure" plugin that provides simple structure
support.

For example (very loose syntax here...)


01 options(plugins) {
02     @=com.javadude.antlr.xml
03     @data=com.javadude.antlr.data.structure
04 }
05 
06 ...
07 
08 something options {@xmlTag="some-thing";}
09   : 
10     (fee  { @data:add("fees", $fee); )*
11
12     ( fie @data:add("fies", $fie); )+
13 
14     fo
15
16     { doSomething(@id, $fo, @data:list("fee"), @data:list("fie"));
17   ;


To explain:

01: defines plugin prefixes
    Anything with "@" is delegated to a plugin based
    on these prefixes. "@" refs w/o a prefix use the
    "default" (line 02), others use the prefix mapping

08: ANTLR delegates the @xmlTag option to the default
    plugin for the grammar (com.javadude.antlr.xml)
    The plugin processes the option or returns an
    exception describing why it didn't like it

10: @data:add is translated by the
    com.javadude.antlr.data.structure plugin
    $fee picks up the last result from a fee rule call
    (The fee result is passed to @data:add)

17: @id is translated by the default plugin. In this
    example, the XML plugin says "@ in action code means
    get the attribute"


Overall, this is pretty simple, but we have to find the right hooks to add
in antlr for the plugins. I did some of this for the xml plugin, but it
isn't general enough yet. In the above example, we need at least:

public interface Plugin {
  void option(String name, String value);
  boolean canTranslateAction(String action);
  String translateAction(String action);
  void startRule(...);
  void endRule(...);
  // and perhaps some code generation hooks
}


[I know that some folks will say "you can just generate a tree and write a
tree parser for your custom actions instead of plugins". I know I can. I
don't want to. Not everything needs trees.

I've written several parsers at my last few jobs, mostly for simple
expression or XML parsing. Esp in the XML case, I don't want a tree b/c
it'll take up too much RAM (ala DOM). I want simple scan & process parsing.

If I'm writing a language translator or compiler, trees are very nice. For
expression and XML parsing, they can be overkill.]


That's my 10c, some of which I've already mentioned in earlier posts (but
this might be a little more coherent)

Later,
-- Scott


From scott at javadude.com  Sun May  1 14:23:19 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Sun May  1 14:23:28 2005
Subject: [antlr-interest] translation of $x references in v3.0
In-Reply-To: <200505012100.j41L0ZDQ028113@xmta1.jpl.nasa.gov>
Message-ID: <200505012221.j41ML5iP026196@s2.eroute.net>

> Come to think of it, I would suggest considering 
> 
> @id = ID
> Instead of  id = ID in your example.

> > [from Ter's post]
> > a[String s, int x] returns [float y]
> >    : id=ID f=field {$s, $x, $y, $id, $f.z;}
> >    ;

I like that... Makes it easier to read which is a rule or token ref...

I'd agree with $ being a problem as well... But @ is a problem for the same
reason (perl, for example).

Sounds like we should let the specifiers be, uh, specified:

options {
  referencePrefix="$";
  pluginPrefix="@";
}

(the defaults?)

or

options {
  referencePrefix="%";
  pluginPrefix="~";
}

Thoughts?
-- Scott


From Loring.G.Craymer at jpl.nasa.gov  Sun May  1 16:10:07 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Sun May  1 16:10:09 2005
Subject: [antlr-interest] translation of $x references in v3.0
In-Reply-To: <200505012221.j41ML5iP026196@s2.eroute.net>
Message-ID: <200505012310.j41NA6MI005653@xmta2.jpl.nasa.gov>

> -----Original Message-----
> From: Scott Stanchfield [mailto:scott@javadude.com]
> Sent: Sunday, May 01, 2005 2:23 PM
> To: 'Loring Craymer'; 'Terence Parr'; 'ANTLR Interest'
> Subject: RE: [antlr-interest] translation of $x references in v3.0
> 
> > Come to think of it, I would suggest considering
> >
> > @id = ID
> > Instead of  id = ID in your example.
> 
> > > [from Ter's post]
> > > a[String s, int x] returns [float y]
> > >    : id=ID f=field {$s, $x, $y, $id, $f.z;}
> > >    ;
> 
> I like that... Makes it easier to read which is a rule or token ref...
> 
> I'd agree with $ being a problem as well... But @ is a problem for the
> same
> reason (perl, for example).
> 
> Sounds like we should let the specifiers be, uh, specified:

Scott--

I started thinking in that direction myself, and then realized "Duh!
Special characters in actions are the responsibility of the ANTLR backend
developer for a given target language".  The ANTLR implementation needs to
provide the hooks for applying the translation, but it is the backend
"action parser" that is responsible for identifying tokens to be translated.

--Loring
  
> 
> options {
>   referencePrefix="$";
>   pluginPrefix="@";
> }
> 
> (the defaults?)
> 
> or
> 
> options {
>   referencePrefix="%";
>   pluginPrefix="~";
> }
> 
> Thoughts?
> -- Scott


From Bharath.Sundararaman at starthis.com  Mon May  2 06:53:16 2005
From: Bharath.Sundararaman at starthis.com (Bharath Sundararaman)
Date: Mon May  2 06:53:25 2005
Subject: [antlr-interest] charScanner panic.
Message-ID: <B1180416E5C44E49AE556D23DBB45B290486B8@webmail.starthis.com>

Hi,
 
I have antlr.jar in both my build dependencies (jar file) and my runtime dependencies (org.antlr plugin). The CharScanner does not panic anymore but now my application is unable to locate my custom AST and it pops the "can't find AST node/type" error. 
 
I added the org.antlr plugin to the runtime classpath of my plugin and the "ClassNotFoundException: antlr.CommonToken" is not thrown anymore but the "Can't find AST node/type" exception appears and it leads to a ClassCastException in my parser. The weird thing is, both my custom AST and my parser are in the same package. The application which uses my parser should be able to use the AST which lies in the same package but it doesn't
 
Any ideas?

________________________________

From: Scott Stanchfield [mailto:scott@javadude.com]
Sent: Fri 4/29/2005 9:07 PM
To: Bharath Sundararaman; antlr-interest@antlr.org
Subject: RE: [antlr-interest] charScanner panic.


Btw: In the antlr 2.7.6 candidate I sent to Ter, I added a system property that you can set to make antlr throw a RuntimeException for panic instead of System.exit... The default is still System.exit, though.
 
Later,
-- Scott


________________________________

	From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Bharath Sundararaman
	Sent: Friday, April 29, 2005 1:31 PM
	To: antlr-interest@antlr.org
	Subject: [antlr-interest] charScanner panic.
	
	

	Hi all,

	 

	I have an application that passes code to my ANTLR compiler. Recently, when the code is passed, the CharScanner's panic() method is called which causes a system exit. I over-rode the panic() method and prevented the system from exiting which led to "can't find AST node type: packageName.ASTName" exception. 

	 

	 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050502/95e9d7e1/attachment.html
From kafeltz at terra.com.br  Mon May  2 09:24:15 2005
From: kafeltz at terra.com.br (Ismael Santos Kafeltz)
Date: Mon May  2 11:35:41 2005
Subject: [antlr-interest] Common Intermediate Language Grammar
Message-ID: <20050502162418.708B3BA4073@bugala.terra.com.br>

I tried to compile your source code and
I guess it is missing the following
files:

 

BaseCILLexer.cs
CILParserTokenTypes.cs
CILLexerTokenTypes.cs

 

The file in:
http://pascallacroix.free.fr/CIL/CILPars
er1_0.zip should be updated.

 

Thanks for the attention.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050502/dae61898/attachment-0001.html
From matthew.ford at forward.com.au  Sun May  1 15:37:07 2005
From: matthew.ford at forward.com.au (Matthew Ford)
Date: Mon May  2 11:35:48 2005
Subject: [antlr-interest] translation of $x references in v3.0
References: <200505012100.j41L0ZDQ028113@xmta1.jpl.nasa.gov>
Message-ID: <001401c54e9e$4e49dcf0$0200a8c0@notebook>

I agree with Loring, and vote for just one prefix.  (the backwards
compatible switch sounds good too)
matthew

> In fact, I'd vote against having more than one special character
> for attributes in actions:  the only feature it provides the user is to
> allow duplicate use of names and it complicates the translation mechanism
> for the ANTLR backend developer.
>

From parrt at cs.usfca.edu  Mon May  2 11:38:49 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon May  2 11:38:30 2005
Subject: [antlr-interest] translation of $x references in v3.0
In-Reply-To: <001401c54e9e$4e49dcf0$0200a8c0@notebook>
References: <200505012100.j41L0ZDQ028113@xmta1.jpl.nasa.gov>
	<001401c54e9e$4e49dcf0$0200a8c0@notebook>
Message-ID: <eb02596a6d45b02a3f76f9c381e6122d@cs.usfca.edu>


On May 1, 2005, at 3:37 PM, Matthew Ford wrote:

> I agree with Loring, and vote for just one prefix.  (the backwards
> compatible switch sounds good too)
> matthew
>
>> In fact, I'd vote against having more than one special character
>> for attributes in actions:  the only feature it provides the user is 
>> to
>> allow duplicate use of names and it complicates the translation 
>> mechanism
>> for the ANTLR backend developer.

Hi Matthew,

My logic is that dynamic attributes are such different critters than 
regular args/return-values/labels attributes that they should be 
clearly marked syntactically as different.  I use the "what is 
a.b.c.d?" argument in Java as a case in point.  That could be any 
number of things.  We'll try it out this Summer and then back it out if 
everyone hates it. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From Loring.G.Craymer at jpl.nasa.gov  Mon May  2 12:45:23 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Mon May  2 12:45:28 2005
Subject: [antlr-interest] translation of $x references in v3.0
In-Reply-To: <eb02596a6d45b02a3f76f9c381e6122d@cs.usfca.edu>
References: <200505012100.j41L0ZDQ028113@xmta1.jpl.nasa.gov>
	<001401c54e9e$4e49dcf0$0200a8c0@notebook>
	<eb02596a6d45b02a3f76f9c381e6122d@cs.usfca.edu>
Message-ID: <6.2.1.2.2.20050502122631.029ba0c0@mail.jpl.nasa.gov>

Ter--

To the user, having two special characters converts the simple question of 
"what is a.b.c.d" to "Should I write $a.b.c.d or @a.b.c.d here?  For that 
matter, what is $a.b.c.d and how does it differ functionally from 
@a.b.c.d?  And what is @a.b.c.d, anyway?"  Unless these are used in wildly 
different ways--which seems inconceivable except as a design failing--the 
user should only have to worry about one consistent interface to data 
(attributes).

Since you are solving the a versus #a problem, I don't think that it makes 
sense to introduce a similar but more extreme problem.

--Loring

At 11:38 AM 5/2/2005, Terence Parr wrote:

>On May 1, 2005, at 3:37 PM, Matthew Ford wrote:
>
>>I agree with Loring, and vote for just one prefix.  (the backwards
>>compatible switch sounds good too)
>>matthew
>>
>>>In fact, I'd vote against having more than one special character
>>>for attributes in actions:  the only feature it provides the user is to
>>>allow duplicate use of names and it complicates the translation mechanism
>>>for the ANTLR backend developer.
>
>Hi Matthew,
>
>My logic is that dynamic attributes are such different critters than 
>regular args/return-values/labels attributes that they should be clearly 
>marked syntactically as different.  I use the "what is a.b.c.d?" argument 
>in Java as a case in point.  That could be any number of things.  We'll 
>try it out this Summer and then back it out if everyone hates it. :)
>
>Ter
>--
>CS Professor & Grad Director, University of San Francisco
>Creator, ANTLR Parser Generator, http://www.antlr.org
>Cofounder, http://www.jguru.com


From nbsherid at secsme.org.au  Mon May  2 12:54:09 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Mon May  2 12:54:07 2005
Subject: [antlr-interest] Common Intermediate Language Grammar
In-Reply-To: <20050502162418.708B3BA4073@bugala.terra.com.br>
Message-ID: <000401c54f50$b4e6cdd0$0500a8c0@nigel>

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Ismael Santos Kafeltz
Sent: Tuesday, 3 May 2005 2:24 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Common Intermediate Language Grammar

 

I tried to compile your source code and I guess it is missing the following
files:

 

BaseCILLexer.cs
CILParserTokenTypes.cs
CILLexerTokenTypes.cs

 

The file in: http://pascallacroix.free.fr/CIL/CILParser1_0.zip should be
updated.

 

Thanks for the attention.

 

 

I haven't used the CIL grammar, but it sound's like you need to run the
grammar through ANTLR first, to generate the Parser, Lexer and *TokenTypes
files!!

 

Nigel

 

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435
  

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050503/cfc487be/attachment.html
From johnm-antlr at non.net  Mon May  2 13:36:07 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon May  2 13:35:48 2005
Subject: [antlr-interest] translation of $x references in v3.0
In-Reply-To: <6.2.1.2.2.20050502122631.029ba0c0@mail.jpl.nasa.gov>
References: <200505012100.j41L0ZDQ028113@xmta1.jpl.nasa.gov>
	<001401c54e9e$4e49dcf0$0200a8c0@notebook>
	<eb02596a6d45b02a3f76f9c381e6122d@cs.usfca.edu>
	<6.2.1.2.2.20050502122631.029ba0c0@mail.jpl.nasa.gov>
Message-ID: <17014.36663.314164.703682@despot.non.net>

>>>>> "Loring" == Loring Craymer <Loring.G.Craymer@jpl.nasa.gov> writes:
[...]

> To the user, having two special characters converts the simple question
> of "what is a.b.c.d" to "Should I write $a.b.c.d or @a.b.c.d here?  For
> that matter, what is $a.b.c.d and how does it differ functionally from
> @a.b.c.d?  And what is @a.b.c.d, anyway?"  Unless these are used in
> wildly different ways--which seems inconceivable except as a design
> failing--the user should only have to worry about one consistent
> interface to data (attributes).

One reason is that this makes it harder to accidentally use those dangerous
dynamic attributes by accident.  Which, I believe was part of your argument
for not building them into Antlr v3 in the first place.  Geez.

@x.y are always, only dynamic attributes.

$i are always, only the various local, statically-scoped variables.

Take care,
	John
From johnm-antlr at non.net  Mon May  2 13:39:12 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon May  2 13:38:53 2005
Subject: [antlr-interest] translation of $x references in v3.0
In-Reply-To: <001401c54e9e$4e49dcf0$0200a8c0@notebook>
References: <200505012100.j41L0ZDQ028113@xmta1.jpl.nasa.gov>
	<001401c54e9e$4e49dcf0$0200a8c0@notebook>
Message-ID: <17014.36848.530981.762865@despot.non.net>

>>>>> "Matthew" == Matthew Ford <matthew.ford@forward.com.au> writes:
[...]

> I agree with Loring, and vote for just one prefix.  (the backwards
> compatible switch sounds good too)

Eek!  Have you used the mix of dynamic and non-dynamically scoped variables
in any languages?  Say, with Lisp?  The lack of distinctiveness (can) cause
major problems.

Thanks,
	John
From ewbank at gmail.com  Mon May  2 13:49:13 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon May  2 13:49:21 2005
Subject: [antlr-interest] loose tree walker?
Message-ID: <dd3a065f0505021349357e242e@mail.gmail.com>

I'm seeking guidance and information. Let's say I'm doing a tree
transformation to replace "elif" with "if" everywhere it occurs.

I can either be very precise and walk the entire tree as it is
supposed to be formed now:
    prog : ( stmt )* ;
    stmt : ( stmt_if | stmt_for | ... ) ;
    stmt_if : #(IF expr stmt ( stmt_elif | stmt )? );
    stmt_elif #(ELIF expr stmt ( stmt )? ) { ... convert elif to if ... } ;
    // omitting expr and the rest of the grammar

Or I can do a loose tree walker, like this:

    traverseKids : ( traverseTree )* ;
    traverseTree : ( (ELIF) => stmt_elif | #( . traverseKids ) );
    stmt_elif : #(ELIF traverseKids ) { ... convert elif to if ... } ;

The second has some appeal to me simply because it removes the rest of
the tree and the dependencies on how that tree is shaped.

what do others do?
From monty at codetransform.com  Mon May  2 10:57:41 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Mon May  2 13:58:11 2005
Subject: [antlr-interest] loose tree walker?
In-Reply-To: <dd3a065f0505021349357e242e@mail.gmail.com>
References: <dd3a065f0505021349357e242e@mail.gmail.com>
Message-ID: <42766A15.7060807@codetransform.com>

Bryan Ewbank wrote:
> I'm seeking guidance and information. Let's say I'm doing a tree
> transformation to replace "elif" with "if" everywhere it occurs.
> 
> I can either be very precise and walk the entire tree as it is
> supposed to be formed now:
>     prog : ( stmt )* ;
>     stmt : ( stmt_if | stmt_for | ... ) ;
>     stmt_if : #(IF expr stmt ( stmt_elif | stmt )? );
>     stmt_elif #(ELIF expr stmt ( stmt )? ) { ... convert elif to if ... } ;
>     // omitting expr and the rest of the grammar
> 
> Or I can do a loose tree walker, like this:
> 
>     traverseKids : ( traverseTree )* ;
>     traverseTree : ( (ELIF) => stmt_elif | #( . traverseKids ) );
>     stmt_elif : #(ELIF traverseKids ) { ... convert elif to if ... } ;
> 
> The second has some appeal to me simply because it removes the rest of
> the tree and the dependencies on how that tree is shaped.
> 
> what do others do?
> 

Either will work.  I prefer the former mysql because it reminds me of 
the elif rules that can be removed in the next pass, and because I like 
to think about things in a structured way, the latter I consider to be 
more like search/replace.  When you have more grammatical context 
deciding your translations you will be forced to use the former style.

Monty
From Loring.G.Craymer at jpl.nasa.gov  Mon May  2 16:44:04 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Mon May  2 16:44:11 2005
Subject: [antlr-interest] translation of $x references in v3.0
In-Reply-To: <17014.36663.314164.703682@despot.non.net>
References: <200505012100.j41L0ZDQ028113@xmta1.jpl.nasa.gov>
	<001401c54e9e$4e49dcf0$0200a8c0@notebook>
	<eb02596a6d45b02a3f76f9c381e6122d@cs.usfca.edu>
	<6.2.1.2.2.20050502122631.029ba0c0@mail.jpl.nasa.gov>
	<17014.36663.314164.703682@despot.non.net>
Message-ID: <6.2.1.2.2.20050502152213.02b63298@mail.jpl.nasa.gov>

At 01:36 PM 5/2/2005, John D. Mitchell wrote:
> >>>>> "Loring" == Loring Craymer <Loring.G.Craymer@jpl.nasa.gov> writes:
>[...]
>
> > To the user, having two special characters converts the simple question
> > of "what is a.b.c.d" to "Should I write $a.b.c.d or @a.b.c.d here?  For
> > that matter, what is $a.b.c.d and how does it differ functionally from
> > @a.b.c.d?  And what is @a.b.c.d, anyway?"  Unless these are used in
> > wildly different ways--which seems inconceivable except as a design
> > failing--the user should only have to worry about one consistent
> > interface to data (attributes).
>
>One reason is that this makes it harder to accidentally use those dangerous
>dynamic attributes by accident.  Which, I believe was part of your argument
>for not building them into Antlr v3 in the first place.  Geez.

Nope--I objected to locking the implementation of them into a dictionary 
(keyword lookup) and still do.  The analysis cost of class construction for 
classes containing attributes is not that onerous, and the set of 
attributes can be determined from the grammar at the time it is processed 
by ANTLR.  "Dynamic" (as in hash table) is an implementation choice with an 
associated performance cost.  For Java, you pay the implementation cost of 
hashing up front--all objects have hash codes, so the performance cost of a 
hash table for attribute lookup is at worst a factor of 2 or so (access 
overhead should be on the order of a factor of 2--less if access is through 
method calls, more if fields are directly dereferenced--but that limit is 
approached only when attributes are not used much for computing)-  [This is 
not a diatribe against hash tables, just where they are placed.  ANTLR 
should use hash tables to gather attributes during analysis, but generate 
classes with attributes defined as fields; the user should not suffer a 
performance hit because hash tables are generated for his code 
automatically.  At issue is the tradeoff between performance and 
functionality:  in this case, there is no differential in functionality, 
but the performance differential could be significant.]

--Loring


>@x.y are always, only dynamic attributes.
>
>$i are always, only the various local, statically-scoped variables.
>
>Take care,
>         John


From Loring.G.Craymer at jpl.nasa.gov  Mon May  2 17:10:44 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Mon May  2 17:10:48 2005
Subject: [antlr-interest] loose tree walker?
In-Reply-To: <dd3a065f0505021349357e242e@mail.gmail.com>
References: <dd3a065f0505021349357e242e@mail.gmail.com>
Message-ID: <6.2.1.2.2.20050502165244.02b63150@mail.jpl.nasa.gov>

It depends.  With 2.8, I would tend to generate the full tree grammar and 
process the elifs within that context.  With manual grammar generation, 
I've taken the "loose" approach to get something up fast.  The full grammar 
will be more maintainable over the long run if other features are to be 
added, but you can always fold the "loose" grammar into a full grammar later.

--Loring


At 01:49 PM 5/2/2005, Bryan Ewbank wrote:
>I'm seeking guidance and information. Let's say I'm doing a tree
>transformation to replace "elif" with "if" everywhere it occurs.
>
>I can either be very precise and walk the entire tree as it is
>supposed to be formed now:
>     prog : ( stmt )* ;
>     stmt : ( stmt_if | stmt_for | ... ) ;
>     stmt_if : #(IF expr stmt ( stmt_elif | stmt )? );
>     stmt_elif #(ELIF expr stmt ( stmt )? ) { ... convert elif to if ... } ;
>     // omitting expr and the rest of the grammar
>
>Or I can do a loose tree walker, like this:
>
>     traverseKids : ( traverseTree )* ;
>     traverseTree : ( (ELIF) => stmt_elif | #( . traverseKids ) );
>     stmt_elif : #(ELIF traverseKids ) { ... convert elif to if ... } ;
>
>The second has some appeal to me simply because it removes the rest of
>the tree and the dependencies on how that tree is shaped.
>
>what do others do?


From scott at javadude.com  Mon May  2 19:47:11 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Mon May  2 19:48:25 2005
Subject: [antlr-interest] translation of $x references in v3.0
In-Reply-To: <6.2.1.2.2.20050502152213.02b63298@mail.jpl.nasa.gov>
Message-ID: <200505030345.j433jEKp002044@s2.eroute.net>

I'm gonna back up Loring on this one...

If things can be hardened at translation time, they should be. The only time
you should be dynamic at runtime is if you must. This happens sometimes
(like when parsing XML and finding attributes), but many cases should be
able to be hard generated.

> [This is not a 
> diatribe against hash tables, just where they are placed.  

Later,
-- Scott


From monty at codetransform.com  Mon May  2 21:12:54 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Mon May  2 21:10:43 2005
Subject: [antlr-interest] translation of $x references in v3.0
In-Reply-To: <200505012310.j41NA6MI005653@xmta2.jpl.nasa.gov>
References: <200505012310.j41NA6MI005653@xmta2.jpl.nasa.gov>
Message-ID: <f3267a7bfb54d9dc3388c3ae29c8df85@codetransform.com>


On May 1, 2005, at 4:10 PM, Loring Craymer wrote:
>>
>> Sounds like we should let the specifiers be, uh, specified:
>
> Scott--
>
> I started thinking in that direction myself, and then realized "Duh!
> Special characters in actions are the responsibility of the ANTLR 
> backend
> developer for a given target language".  The ANTLR implementation 
> needs to
> provide the hooks for applying the translation, but it is the backend
> "action parser" that is responsible for identifying tokens to be 
> translated.
>

I'm in agreement here for sure!

Monty

From johnm-antlr at non.net  Mon May  2 23:51:58 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon May  2 23:51:40 2005
Subject: [antlr-interest] translation of $x references in v3.0
In-Reply-To: <6.2.1.2.2.20050502152213.02b63298@mail.jpl.nasa.gov>
References: <200505012100.j41L0ZDQ028113@xmta1.jpl.nasa.gov>
	<001401c54e9e$4e49dcf0$0200a8c0@notebook>
	<eb02596a6d45b02a3f76f9c381e6122d@cs.usfca.edu>
	<6.2.1.2.2.20050502122631.029ba0c0@mail.jpl.nasa.gov>
	<17014.36663.314164.703682@despot.non.net>
	<6.2.1.2.2.20050502152213.02b63298@mail.jpl.nasa.gov>
Message-ID: <17015.8078.810206.675393@despot.non.net>

>>>>> "Loring" == Loring Craymer <Loring.G.Craymer@jpl.nasa.gov> writes:
[...]

> Nope--I objected to locking the implementation of them into a dictionary
> (keyword lookup) and still do.  The analysis cost of class construction
> for classes containing attributes is not that onerous, and the set of
> attributes can be determined from the grammar at the time it is processed
> by ANTLR.  "Dynamic" (as in hash table) is an implementation choice with
> an associated performance cost.  For Java, you pay the implementation
> cost of hashing up front--all objects have hash codes, so the performance
> cost of a hash table for attribute lookup is at worst a factor of 2 or so
> (access overhead should be on the order of a factor of 2--less if access
> is through method calls, more if fields are directly dereferenced--but
> that limit is approached only when attributes are not used much for
> computing)- [This is not a diatribe against hash tables, just where they
> are placed.  ANTLR should use hash tables to gather attributes during
> analysis, but generate classes with attributes defined as fields; the
> user should not suffer a performance hit because hash tables are
> generated for his code automatically.  At issue is the tradeoff between
> performance and functionality: in this case, there is no differential in
> functionality, but the performance differential could be significant.]

I'm confused by your harangue.  What does this implementation detail have
to do with the topic of @ being used to refer to dynamically-scoped
attributes?

Thanks,
	John

From Loring.G.Craymer at jpl.nasa.gov  Tue May  3 01:49:09 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Tue May  3 01:49:12 2005
Subject: [antlr-interest] translation of $x references in v3.0
In-Reply-To: <17015.8078.810206.675393@despot.non.net>
Message-ID: <200505030849.j438n7SO031491@xmta2.jpl.nasa.gov>

John--

 

Your modesty is overwhelming.  Don't you think that you should have quoted
your own statement

 

At 01:36 PM 5/2/2005, John D. Mitchell wrote:

>One reason is that this makes it harder to accidentally use those 

>dangerous dynamic attributes by accident.  Which, I believe was part of 

>your argument for not building them into Antlr v3 in the first place.
Geez.

 

to which I was replying?  Somehow I prefer to be quoted in context.

 

--Loring

 

> -----Original Message-----

> From: John D. Mitchell [mailto:johnm-antlr@non.net]

> Sent: Monday, May 02, 2005 11:52 PM

> To: Loring Craymer

> Cc: 'ANTLR Interest'

> Subject: Re: [antlr-interest] translation of $x references in v3.0

> 

> >>>>> "Loring" == Loring Craymer <Loring.G.Craymer@jpl.nasa.gov> writes:

> [...]

> 

> > Nope--I objected to locking the implementation of them into a dictionary

> > (keyword lookup) and still do.  The analysis cost of class construction

> > for classes containing attributes is not that onerous, and the set of

> > attributes can be determined from the grammar at the time it is

> processed

> > by ANTLR.  "Dynamic" (as in hash table) is an implementation choice with

> > an associated performance cost.  For Java, you pay the implementation

> > cost of hashing up front--all objects have hash codes, so the

> performance

> > cost of a hash table for attribute lookup is at worst a factor of 2 or

> so

> > (access overhead should be on the order of a factor of 2--less if access

> > is through method calls, more if fields are directly dereferenced--but

> > that limit is approached only when attributes are not used much for

> > computing)- [This is not a diatribe against hash tables, just where they

> > are placed.  ANTLR should use hash tables to gather attributes during

> > analysis, but generate classes with attributes defined as fields; the

> > user should not suffer a performance hit because hash tables are

> > generated for his code automatically.  At issue is the tradeoff between

> > performance and functionality: in this case, there is no differential in

> > functionality, but the performance differential could be significant.]

> 

> I'm confused by your harangue.  What does this implementation detail have

> to do with the topic of @ being used to refer to dynamically-scoped

> attributes?

> 

> Thanks,

>     John

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050503/4e5fa5f3/attachment.html
From ali.jan at gmail.com  Tue May  3 04:20:07 2005
From: ali.jan at gmail.com (Muhammad Ali)
Date: Tue May  3 04:20:10 2005
Subject: [antlr-interest] XQuery Grammar?
Message-ID: <8acb5ef805050304204f4a439@mail.gmail.com>

Hello everyone,

I have been unsuccessful in finding an XQuery Grammar for antlr on the web 
so far. Does such a thing exist?
If not, could anyone give me pointers on how to prepare an XQuery Grammar 
for use with antlr? Any issues that I need to be aware of?

Thanks.

Ali
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050503/55695f74/attachment.html
From PKronenberg at technicacorp.com  Tue May  3 08:04:44 2005
From: PKronenberg at technicacorp.com (Peter Kronenberg)
Date: Tue May  3 08:03:23 2005
Subject: [antlr-interest] Heterogeneous trees
Message-ID: <2AC4B3D9C33D8F49B5D9C3C53A9960549081B8@mail-hq1.Technica1.com>

I'm writing a parser that builds a heterogeneous tree.  The nodes are
based on the token type.  But I'm having a problem when a predicate is
needed to determine the correct token type.  Here's a contrived example.
An IDENT followed by SPECIAL1, I want to create a SPECIAL1 AST.  But an
IDENT by itself should be reflected as a SPECIAL2 type.
Before I added the different AST's, this parser worked, but now, the
IDENT node is just created using the default type.  How can I get it to
honor the AST that's specified in the tokens section?

tokens {
  SPECIAL1<AST=Special1AST>;
  SPECIAL2<AST=Special2AST>;
}

expr: (IDENT SPECIAL1)=> IDENT SPECIAL^ | i:IDENT^ {#i.setType(SPECIAL2)


Peter Kronenberg
Software Engineer
(703) 885-1222
pkronenberg@technicacorp.com


The information contained in this transmission may contain privileged and confidential information. It is intended only for the use of the person(s) named above. If you are not the intended recipient, you are hereby notified that any review, dissemination, distribution or duplication of this communication is strictly prohibited. If you are not the intended recipient, please contact the sender by reply e-mail and destroy all copies of the original message. Technica Corporation does not represent this e-mail to be free from any virus, fault or defect and it is therefore the responsibility of the recipient to first scan it for viruses, faults and defects. To reply to our e-mail administrator directly, please send an e-mail to postmaster@technicacorp.com. Thank you.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050503/11b99b37/attachment-0001.html
From serge.bogdanov at intel.com  Tue May  3 08:11:47 2005
From: serge.bogdanov at intel.com (Bogdanov, Serge)
Date: Tue May  3 08:11:55 2005
Subject: [antlr-interest] Heterogeneous trees
Message-ID: <EFA13842B4FD55469C1A837C9C84964402638737@hdsmsx401.amr.corp.intel.com>

Peter,

            It looks like you are trying to abuse antlr. I guess you
should've done it differently:

tokens { 
  SPECIAL1<AST=Special1AST>; 
  IDENT<AST=Special2AST>; 
} 

expr: (IDENT SPECIAL1)=> IDENT! SPECIAL^ | IDENT^ ;

 

or

 

expr: (IDENT SPECIAL1)=> IDENT SPECIAL^<AST=Special1AST> |
IDENT^<AST=Special2AST>;

 

>> Sergey Bogdanov

intel massachusetts

M/S HD2-246
77 Reed Road, 
Hudson, MA  01749

Tel: (978)553-2724

________________________________

From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Peter Kronenberg
Sent: Tuesday, May 03, 2005 11:05 AM
To: antlr-interest@antlr.org
Subject: [antlr-interest] Heterogeneous trees

 

I'm writing a parser that builds a heterogeneous tree.  The nodes are
based on the token type.  But I'm having a problem when a predicate is
needed to determine the correct token type.  Here's a contrived example.
An IDENT followed by SPECIAL1, I want to create a SPECIAL1 AST.  But an
IDENT by itself should be reflected as a SPECIAL2 type.

Before I added the different AST's, this parser worked, but now, the
IDENT node is just created using the default type.  How can I get it to
honor the AST that's specified in the tokens section?

tokens { 
  SPECIAL1<AST=Special1AST>; 
  SPECIAL2<AST=Special2AST>; 
} 

expr: (IDENT SPECIAL1)=> IDENT SPECIAL^ | i:IDENT^ {#i.setType(SPECIAL2)


 

Peter Kronenberg 
Software Engineer 
(703) 885-1222 
pkronenberg@technicacorp.com 

The information contained in this transmission may contain privileged
and confidential information. It is intended only for the use of the
person(s) named above. If you are not the intended recipient, you are
hereby notified that any review, dissemination, distribution or
duplication of this communication is strictly prohibited. If you are not
the intended recipient, please contact the sender by reply e-mail and
destroy all copies of the original message. Technica Corporation does
not represent this e-mail to be free from any virus, fault or defect and
it is therefore the responsibility of the recipient to first scan it for
viruses, faults and defects. To reply to our e-mail administrator
directly, please send an e-mail to postmaster@technicacorp.com. Thank
you.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050503/75afe448/attachment.html
From ml-antlr at riverside-machines.co.uk  Tue May  3 08:30:35 2005
From: ml-antlr at riverside-machines.co.uk (Evan Lavelle)
Date: Tue May  3 08:30:39 2005
Subject: [antlr-interest] Java-lite install?
Message-ID: <4277991B.1070304@riverside-machines.co.uk>

I don't use Java at all (and know nothing about it), and was hoping to
use ANTLR to generate C++ code, or at least code that I can link with
C++ using gcj/gcc.

What I've done so far is to download the sources, and to compile them
using Luca Di Gaspero's makefile, producing the 'cantlr' executable. I
then had a go at running the simple example on the 'Getting started with
ANTLR' page. cantlr processes the example grammar file (t.g) correctly,
but if I then run 'gcj *.java' I get various error messages along the
lines of:

L.java:25: error: Class or interface `antlr.SemanticException' not found
in import.

This class was compiled in by Luca's makefile, and I've got no idea
what's going on. Any pointers? Is cantlr all that's required, or do I
need to do something else?

BTW - I had a go at an RPM installation, but gave up following
dependency meltdown.

Thanks

Evan





From johnm-antlr at non.net  Tue May  3 08:50:28 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Tue May  3 08:50:11 2005
Subject: [antlr-interest] Java-lite install?
In-Reply-To: <4277991B.1070304@riverside-machines.co.uk>
References: <4277991B.1070304@riverside-machines.co.uk>
Message-ID: <17015.40388.593638.579177@despot.non.net>

>>>>> "Evan" == Evan Lavelle <ml-antlr@riverside-machines.co.uk> writes:
> I don't use Java at all (and know nothing about it), and was hoping to
> use ANTLR to generate C++ code, or at least code that I can link with C++
> using gcj/gcc.

Cool.  I'd be very interested in hearing how that turns out.

[...]
> L.java:25: error: Class or interface `antlr.SemanticException' not found
> in import.

Sounds like a CLASSPATH error.

Here's a page that seems to talk specifically and GCJ and setting the
classpath.
http://www.hopelesscase.com:81/gcj/README2

Here's the canonical Sun page on setting the CLASSPATH:
http://java.sun.com/j2se/1.4.2/docs/tooldocs/solaris/classpath.html

Have fun,
	John
From johnm-antlr at non.net  Tue May  3 09:07:33 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Tue May  3 09:07:13 2005
Subject: [antlr-interest] 'netiquette (was: translation of $x references in
	v3.0)
In-Reply-To: <200505030849.j438n7SO031491@xmta2.jpl.nasa.gov>
References: <17015.8078.810206.675393@despot.non.net>
	<200505030849.j438n7SO031491@xmta2.jpl.nasa.gov>
Message-ID: <17015.41413.7830.480772@despot.non.net>

>>>>> "Loring" == Loring Craymer <Loring.G.Craymer@jpl.nasa.gov> writes:
[...]

> Your modesty is overwhelming.  Don't you think that you should have
> quoted your own statement
[...]
> to which I was replying?  Somehow I prefer to be quoted in context.

Huh?  It's called 'netiquette and one of the facets is trimming down posts
to not waste people's time, focus on the parts that one is actually
replying to, etc.

Also, if you look at the headers of the message you'll see quite clearly
that I preserved the In-Reply-To: and References: headers so that the
complete thread of conversation can be followed by anybody.


As to the elided context that you seem to having a problem with, all of the
discussion that the cabal has had as a group (and in which you participated
both in person and via email) and that has taken place in public has been
very clear about what the point that @ is about dynamically scoped
attributes.  I apologize for assuming that people understood that. I shall
endeavour to always be explicit about dynamically scoped attributes in the
future.


Still, I'm confused since you haven't actually answered the question:

>> I'm confused by your harangue.  What does this implementation detail
>> have to do with the topic of @ being used to refer to dynamically-scoped
>> attributes?


Finally, I am quite concerned that the 'netiquette and just plain decency
level in the conversations lately in this forum has gone so far down the
toilet so quickly.  There are plenty of other fora in which that is
acceptable (or even expected) but historically, this forum has been really
quite good and that has contributed to its utility (on many levels).

Thanks,
	John
From Loring.G.Craymer at jpl.nasa.gov  Tue May  3 11:47:09 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Tue May  3 11:47:14 2005
Subject: [antlr-interest] Java-lite install?
In-Reply-To: <4277991B.1070304@riverside-machines.co.uk>
References: <4277991B.1070304@riverside-machines.co.uk>
Message-ID: <6.2.1.2.2.20050503114425.027bb048@mail.jpl.nasa.gov>

Ric built gcj support into ANTLR starting with 2.7.3.  There should be 
install notes somewhere in the distribution--it's just a matter of 
configuring with the proper flags, I believe.

--Loring


At 08:30 AM 5/3/2005, Evan Lavelle wrote:
>I don't use Java at all (and know nothing about it), and was hoping to
>use ANTLR to generate C++ code, or at least code that I can link with
>C++ using gcj/gcc.
>
>What I've done so far is to download the sources, and to compile them
>using Luca Di Gaspero's makefile, producing the 'cantlr' executable. I
>then had a go at running the simple example on the 'Getting started with
>ANTLR' page. cantlr processes the example grammar file (t.g) correctly,
>but if I then run 'gcj *.java' I get various error messages along the
>lines of:
>
>L.java:25: error: Class or interface `antlr.SemanticException' not found
>in import.
>
>This class was compiled in by Luca's makefile, and I've got no idea
>what's going on. Any pointers? Is cantlr all that's required, or do I
>need to do something else?
>
>BTW - I had a go at an RPM installation, but gave up following
>dependency meltdown.
>
>Thanks
>
>Evan
>
>
>
>


From ewbank at gmail.com  Tue May  3 12:37:28 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue May  3 12:37:34 2005
Subject: [antlr-interest] ANTLR 2.7.5 problem(?) with #[...] construct
Message-ID: <dd3a065f050503123767ed1b8d@mail.gmail.com>

I have the following in my *.g file:
280   #( EXPR initval:value
281       {
282           RefTreeNode decl = #( #[DECL,"DECL"], #id, #t );
283           RefTreeNode init = #( #[ASGN, "="], copyTree(#id), #initval );
284           init = #( #[STMT,"STMT"], #( #[EXPR,"EXPR"], init ) );
285           decl->setNextSibling( RefAST(init) );
286           ## = decl;
287       }
288    )

The problem is that the #[EXPR,"EXPR"] is being detected as a hit for
the /EXPR/ node in the tree pattern, rather than as a directive to
create a new node.

Any suggestions?
From nbsherid at secsme.org.au  Tue May  3 13:36:00 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Tue May  3 13:35:56 2005
Subject: [antlr-interest] XQuery Grammar?
In-Reply-To: <8acb5ef805050304204f4a439@mail.gmail.com>
Message-ID: <000201c5501f$b801a150$0500a8c0@nigel>

 

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Muhammad Ali
Sent: Tuesday, 3 May 2005 9:20 PM
To: antlr-interest@antlr.org
Subject: [antlr-interest] XQuery Grammar?

 

Hello everyone,

I have been unsuccessful in finding an XQuery Grammar for antlr on the web
so far. Does such a thing exist?
If not, could anyone give me pointers on how to prepare an XQuery Grammar
for use with antlr? Any issues that I need to be aware of?

Thanks.

Ali

 

 

The biggest problem is usually left-recursion ? most grammars are specified
as LALR or LR compatible, but ANTLR uses LL(k). There are a few good pages
on the web that need to explain what to do, if that is indeed the case.

 

http://www.javadude.com/articles/alrtoll.html

http://www.zenspider.com/Languages/PCCTS/LR2LL.html

 

Nigel

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050504/1ace9333/attachment.html
From dcaton at shorelinesoftware.com  Tue May  3 13:47:28 2005
From: dcaton at shorelinesoftware.com (Don Caton)
Date: Tue May  3 13:47:47 2005
Subject: [antlr-interest] ANTLR 2.7.5 problem(?) with #[...] construct
In-Reply-To: <dd3a065f050503123767ed1b8d@mail.gmail.com>
Message-ID: <1115153470.15264@mx9.mysite4now.com>

You don't need the '#' before the '[', e.g.:

  init = #( [STMT,"STMT"], #( [EXPR,"EXPR"], init ) );

Maybe that's confusing the parser.  But why not just put the action
following the rule, rather than embedding it in the rule?

 #( EXPR initval:value )
 {
    RefTreeNode decl = ...
 };

Unless there's more to your code, the end result is the same and the parser
will have seen the ending paren of the rule, so there's no question that
what follows is action code.

--
Don
 

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Bryan Ewbank
> Sent: Tuesday, May 03, 2005 3:37 PM
> To: ANTLR Interest
> Subject: [antlr-interest] ANTLR 2.7.5 problem(?) with #[...] construct
> 
> I have the following in my *.g file:
> 280   #( EXPR initval:value
> 281       {
> 282           RefTreeNode decl = #( #[DECL,"DECL"], #id, #t );
> 283           RefTreeNode init = #( #[ASGN, "="], 
> copyTree(#id), #initval );
> 284           init = #( #[STMT,"STMT"], #( #[EXPR,"EXPR"], init ) );
> 285           decl->setNextSibling( RefAST(init) );
> 286           ## = decl;
> 287       }
> 288    )
> 
> The problem is that the #[EXPR,"EXPR"] is being detected as a 
> hit for the /EXPR/ node in the tree pattern, rather than as a 
> directive to create a new node.
> 
> Any suggestions?
> 


From metzgerm at iro.umontreal.ca  Tue May  3 13:51:26 2005
From: metzgerm at iro.umontreal.ca (Michel Metzger)
Date: Tue May  3 13:51:30 2005
Subject: [antlr-interest] XQuery Grammar?
In-Reply-To: <8acb5ef805050304204f4a439@mail.gmail.com>
References: <8acb5ef805050304204f4a439@mail.gmail.com>
Message-ID: <4277E44E.2010705@iro.umontreal.ca>

Muhammad Ali a ?crit :

> I have been unsuccessful in finding an XQuery Grammar for antlr on the 
> web so far. Does such a thing exist?

What do you want to do with your grammar ? Why not use standard XML
methods/tools like DOM, SAX, XML Schema, XPath,... to use your XQuery
document ?

Michel.

From ml-antlr at riverside-machines.co.uk  Tue May  3 14:55:26 2005
From: ml-antlr at riverside-machines.co.uk (Evan Lavelle)
Date: Tue May  3 14:55:30 2005
Subject: [antlr-interest] Java-lite install?
In-Reply-To: <6.2.1.2.2.20050503114425.027bb048@mail.jpl.nasa.gov>
References: <4277991B.1070304@riverside-machines.co.uk>
	<6.2.1.2.2.20050503114425.027bb048@mail.jpl.nasa.gov>
Message-ID: <4277F34E.8080005@riverside-machines.co.uk>

Loring Craymer wrote:
> Ric built gcj support into ANTLR starting with 2.7.3.  There should be 
> install notes somewhere in the distribution--it's just a matter of 
> configuring with the proper flags, I believe.

There doesn't seem to be anything specific in configure, or in 
INSTALL.txt or README.txt. gcj is supported, but configure only appears 
to check for it if you have a Java runtime installed. If you haven't got 
a Java runtime, configure doesn't attempt to compile the ANTLR sources 
at all. However, Luca's makefile, which isn't part of the distribution, 
does use gcj to compile ANTLR itself. That's my limited and possibly 
incorrect understanding of what's going on, anyway.

What I'd like to do, if possible, is just to use gcj to compile the 
sources to a shared library, which produces C++ code. This does, I 
think, seem to be possible, judging from various snippets in the FAQ and 
elsewhere, but I haven't quite got to this stage...

Evan


From ric.klaren at gmail.com  Tue May  3 15:17:27 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Tue May  3 15:17:35 2005
Subject: [antlr-interest] Java-lite install?
In-Reply-To: <6.2.1.2.2.20050503114425.027bb048@mail.jpl.nasa.gov>
References: <4277991B.1070304@riverside-machines.co.uk>
	<6.2.1.2.2.20050503114425.027bb048@mail.jpl.nasa.gov>
Message-ID: <4277F877.10504@gmail.com>

Loring Craymer wrote:
> Ric built gcj support into ANTLR starting with 2.7.3.  There should be 
> install notes somewhere in the distribution--it's just a matter of 
> configuring with the proper flags, I believe.

It got lost in the configure/Makefile rework for 2.7.5. I posted an 
updated Makefile a little while ago though (based probably on the one 
mentioned).

Evan Lavelle wrote:
>> I don't use Java at all (and know nothing about it), and was hoping to
>> use ANTLR to generate C++ code, or at least code that I can link with
>> C++ using gcj/gcc.
>>
>> What I've done so far is to download the sources, and to compile them
>> using Luca Di Gaspero's makefile, producing the 'cantlr' executable. I
>> then had a go at running the simple example on the 'Getting started with
>> ANTLR' page. cantlr processes the example grammar file (t.g) correctly,
>> but if I then run 'gcj *.java' I get various error messages along the
>> lines of:
>>
>> L.java:25: error: Class or interface `antlr.SemanticException' not found
>> in import.
>>
>> This class was compiled in by Luca's makefile, and I've got no idea
>> what's going on. Any pointers? Is cantlr all that's required, or do I
>> need to do something else?

You still need the java support library if you want to build from 
generated java files to native parser binaries. I don't think there's a 
Makefile floating around for that case. (It was also not supported in 
the Makefiles from 2.7.4) Basically just grab everything from the antlr 
directory except the swing stuff (the same as with building the native 
antlr binary) make a library of that and link it to the generated 
parser. Or if you use gcj as javac replacement you just have to make a 
jar file from the support lib (the default antlr Makefiles should be 
able to make that for you, then just point to it in the classpath or 
commandline)

>> BTW - I had a go at an RPM installation, but gave up following
>> dependency meltdown.

It often helps to build rebuild from the src.rpm if it's supplied. That 
usually fixes any distribution induced dependencies. (rpmbuild --rebuild 
<the.src.rpm>)

Cheers,

Ric
From ArnarB at oddi.is  Wed May  4 01:33:22 2005
From: ArnarB at oddi.is (Arnar Birgisson)
Date: Wed May  4 01:33:54 2005
Subject: [antlr-interest] XQuery Grammar?
Message-ID: <s27888ed.083@emil.oddi.is>

Hullo..

Michel wrote: 
> What do you want to do with your grammar ? Why not use standard XML
> methods/tools like DOM, SAX, XML Schema, XPath,... to use your XQuery
> document ?

XQuery is not XML based itself, it's a procedural language. Thus, a specific parser is needed if one wants to build an XQuery processor.

Here's a sample XQuery:

<results>
  {
    let $a := doc("http://bstore1.example.com/bib/bib.xml")//author
    for $last in distinct-values($a/last),
        $first in distinct-values($a[last=$last]/first)
    order by $last, $first
    return
        <result>
            <author>
               <last>{ $last }</last>
               <first>{ $first }</first>
            </author>
            {
                for $b in doc("http://bstore1.example.com/bib.xml")/bib/book
                where some $ba in $b/author 
                      satisfies ($ba/last = $last and $ba/first=$first)
                return $b/title
            }
        </result>
  }
</results> 


- Arnar


From eml at riverside-machines.co.uk  Tue May  3 08:21:35 2005
From: eml at riverside-machines.co.uk (Evan Lavelle)
Date: Wed May  4 08:19:22 2005
Subject: [antlr-interest] Java-lite install?
Message-ID: <427796FF.3020907@riverside-machines.co.uk>

I don't use Java at all (and know nothing about it), and was hoping to 
use ANTLR to generate C++ code, or at least code that I can link with 
C++ using gcj/gcc.

What I've done so far is to download the sources, and to compile them 
using Luca Di Gaspero's makefile, producing the 'cantlr' executable. I 
then had a go at running the simple example on the 'Getting started with 
ANTLR' page. cantlr processes the example grammar file (t.g) correctly, 
but if I then run 'gcj *.java' I get various error messages along the 
lines of:

L.java:25: error: Class or interface `antlr.SemanticException' not found 
in import.

This class was compiled in by Luca's makefile, and I've got no idea 
what's going on. Any pointers? Is cantlr all that's required, or do I 
need to do something else?

BTW - I had a go at an RPM installation, but gave up following 
dependency meltdown.

Thanks

Evan



From mail at martin-probst.com  Wed May  4 09:43:51 2005
From: mail at martin-probst.com (Martin Probst)
Date: Wed May  4 09:43:56 2005
Subject: [antlr-interest] XQuery Grammar?
In-Reply-To: <8acb5ef805050304204f4a439@mail.gmail.com>
References: <8acb5ef805050304204f4a439@mail.gmail.com>
Message-ID: <1115225031.8551.2.camel@localhost.localdomain>

Take a look at eXist, it's an open source XML database supporting
XQuery, and AFAIK it uses ANTLR to parse statements.

If you decide to write it on you own, beware of the keywordless-nes of
XQuery - attribute can be both a keyword an a QName selecting an element
called "attribute". There is a document about lexing XQuery on the spec
page that describes how to build a lexer for XQuery, doing so with
ANTLRs standard Lexer tools is quite difficult.

Regards,
Martin

On Di, 2005-05-03 at 16:20 +0500, Muhammad Ali wrote:
> Hello everyone,
> 
> I have been unsuccessful in finding an XQuery Grammar for antlr on the
> web so far. Does such a thing exist?
> If not, could anyone give me pointers on how to prepare an XQuery
> Grammar for use with antlr? Any issues that I need to be aware of?
> 
> Thanks.
> 
> Ali

From mail at martin-probst.com  Wed May  4 09:54:40 2005
From: mail at martin-probst.com (Martin Probst)
Date: Wed May  4 09:54:43 2005
Subject: [antlr-interest] Java-lite install?
In-Reply-To: <4277991B.1070304@riverside-machines.co.uk>
References: <4277991B.1070304@riverside-machines.co.uk>
Message-ID: <1115225680.8551.7.camel@localhost.localdomain>

Hi,
maybe I'm mistaking you, but if you want to generate C++ code with ANTLR
you need to put an option on top of you grammar (*.g file):
options {
  language = "Cpp";
}
This will instruct ANTLR to generate C++ files instead of java so you
don't have to fiddle around with gcj. The examples included in the
distribution are (mostly?) Java examples, so you will have to take a
look at the manual for more information on the C++ part of ANTLR.

Regards,
Martin

On Di, 2005-05-03 at 16:30 +0100, Evan Lavelle wrote:
> I don't use Java at all (and know nothing about it), and was hoping to
> use ANTLR to generate C++ code, or at least code that I can link with
> C++ using gcj/gcc.
> 
> What I've done so far is to download the sources, and to compile them
> using Luca Di Gaspero's makefile, producing the 'cantlr' executable. I
> then had a go at running the simple example on the 'Getting started with
> ANTLR' page. cantlr processes the example grammar file (t.g) correctly,
> but if I then run 'gcj *.java' I get various error messages along the
> lines of:
> 
> L.java:25: error: Class or interface `antlr.SemanticException' not found
> in import.
> 
> This class was compiled in by Luca's makefile, and I've got no idea
> what's going on. Any pointers? Is cantlr all that's required, or do I
> need to do something else?
> 
> BTW - I had a go at an RPM installation, but gave up following
> dependency meltdown.
> 
> Thanks
> 
> Evan
> 
> 
> 
> 
> 
> 

From noreply at haefelinger.net  Thu May  5 01:06:13 2005
From: noreply at haefelinger.net (geronimo)
Date: Thu May  5 01:17:52 2005
Subject: [antlr-interest] Re: Java-lite install?
In-Reply-To: <427796FF.3020907@riverside-machines.co.uk>
References: <427796FF.3020907@riverside-machines.co.uk>
Message-ID: <d5cjoj$2c1$1@sea.gmane.org>

Hey,

Evan Lavelle wrote:
> I don't use Java at all (and know nothing about it), and was hoping to 
> use ANTLR to generate C++ code, or at least code that I can link with 
> C++ using gcj/gcc.

There's no need to know Java except that you should be able to install a
JRE or JDK. Antlr 2.7.5 has been tested with javac, jikes and gcj.

> What I've done so far is to download the sources  [..]

Not necessary as there are binary distros for Windows, Linux, Cygwin. If
you are really unhappy with them, go ahead and build from scratch.

> and to compile them using Luca Di Gaspero's makefile, producing the 
 > 'cantlr' executable.

There's no particular need for this (and Luca's Makefile is not in sync
with 2.7.5 anyway).

Note that ANTLR's binary distro contains

  bin/antlr.bat (Windows)
  bin/antlr.sh  (Unix)

as a convinient way to run the ANTLR compiler. Again, Java is required 
to execute both scripts.

> BTW - I had a go at an RPM installation, but gave up following 
> dependency meltdown.

Which RPM are you using, what dependency meltdown do you mean. Which
Linux are you using???


Cheers,
Wolfgang.

From ml-antlr at riverside-machines.co.uk  Thu May  5 06:42:51 2005
From: ml-antlr at riverside-machines.co.uk (Evan Lavelle)
Date: Thu May  5 06:42:59 2005
Subject: [antlr-interest] Java-lite install?
In-Reply-To: <427796FF.3020907@riverside-machines.co.uk>
References: <427796FF.3020907@riverside-machines.co.uk>
Message-ID: <427A22DB.6000204@riverside-machines.co.uk>

All fixed - summary, for the interested:

I installed from source and am running a C++ generator without needing 
or using a Java runtime (no JDK, JRE, jars, CLASSPATHs, whatever). In 
fact, Java is completely unnecessary, except that a Java compiler is 
needed to build the ANTLR executable.

The source installation created libantlr.a from lib/cpp/src, but it 
didn't attempt to build ANTLR itself, because I don't have a Java 
runtime (although I do have gcj). configure doesn't attempt to build 
ANTLR using gcj by itself.

To build ANTLR, I used Luca's makefile, which requires gcj; I couldn't 
find Ric's makefile. Wolfgang thinks there's a problem with 2.7.5 and 
Luca's makefile, but I haven't yet run into any issues.

I would have preferred a dynamic library, but cantlr and libantlr.a (and 
the header files) are all that's required. It would be nice if the 
distribution had an option to do a minimal install of this sort.

On the issue of dependencies, I'm on RedHat 7.2, with recent 
gcc/gcj/libc. antlr-2.7.5-1.i586.rpm requires a new coreutils, coreutils 
requires a new libacl, libselinux, and tetex, and so on. They all 
require libc.so.6, which I have, but I can't persuade rpm that I've got 
it. This is all bizzarely complicated for such a simple install (why on 
earth should I install a 16Mbyte tetex to run ANTLR?!)

I modded the cut-n-paste example to produce a C++ version (step 2 on the 
'getting started' page); the existing one is Java-centric. I've attached 
the two files, together with a simple makefile. It might be nice to put 
this on the webpage, for the Java-illiterati like myself.

Thanks -

Evan
-------------- next part --------------
header {
   #include <iostream>
   using std::cout;
   using std::endl;
}

options {
   language="Cpp";
}

class P extends Parser;

startRule
    :   n:NAME
        {cout << "Hi there, " << n->getText() << endl;}
    ;

class L extends Lexer;

// one-or-more letters followed by a newline
NAME:   ( 'a'..'z'|'A'..'Z' )+ NEWLINE
    ;

NEWLINE
    :   '\r' '\n'   // DOS
    |   '\n'        // UNIX
    ;
-------------- next part --------------
LIBDIR = /usr/local/lib
LIBS   = -lantlr
CC     = g++
ANTLR  = cantlr
CFLAGS = -c -g -Wall

SRCS   = main L P
OBJS   = $(addsuffix .o, $(SRCS))

.SUFFIXES:

main : $(OBJS)
	$(CC) $(OBJS) -o $@ -L$(LIBDIR) $(LIBS) 2>&1 | c++filt

main.o : main.cpp L.hpp P.hpp
	$(CC) $(CFLAGS) main.cpp -o $@

%.o : %.cpp
	$(CC) $(CFLAGS) $< -o $@

# this is a pattern rule, to ensure that $(ANTLR) is run only once, not 4 times
L.cp% L.hp% P.cp% P.hp% : t.g
	$(ANTLR) $<

# stop make from deleting intermediate files
.SECONDARY : L.cpp P.cpp

clean :
	rm -f main *.o L.* P.* PTokenTypes.* *~
-------------- next part --------------
#include <iostream>

#include "L.hpp"
#include "P.hpp"

int main()
{
	ANTLR_USING_NAMESPACE(std)
	ANTLR_USING_NAMESPACE(antlr)

	try {
      L lexer(std::cin);
      P parser(lexer);
		parser.startRule();
	}
	catch( ANTLRException& e )
	{
		cerr << "exception: " << e.getMessage() << endl;
		return -1;
	}
	catch( exception& e )
	{
		cerr << "exception: " << e.what() << endl;
		return -1;
	}
	return 0;
}
From octavian_nita_2004 at yahoo.com  Thu May  5 08:37:31 2005
From: octavian_nita_2004 at yahoo.com (Octavian Nita)
Date: Thu May  5 08:37:33 2005
Subject: [antlr-interest] Tree building, first class values, please HELP!
Message-ID: <20050505153731.36150.qmail@web54210.mail.yahoo.com>

Hello everybody!

I'm trying to put together a Lua->Java translator
and I have a tree building problem. In Lua, functions
are first class values so they can be assigned to vars
just like any other 'normal' value; more than that,
they can also be returned from functions, so an
expression like:

a("Foo-1")("Foo-2");

is correct (provided that the call to a returns a
function that takes one argument, of course).
I'm using the following rules:

protected
fCallSuf : (fCallHelp help) => fCallHelp fCallSuf
           { #fCallSuf = #([FCALL, "FCALL"],
fCallSuf); }
         | fCallHelp
         | tableHelp fCallSuf
         ;
fCall : ( IDENT | (LPAREN! exp RPAREN!) ) fCallSuf
        { #fCall = #([FCALL, "FCALL"], fCall); }
      ;

My problem is that I get the following output:
( FCALL a ( FCALL ( ExpList "Foo-1" )
                  ( ExpList "Foo-2" ) ) )
while what I actually want is something like:

FCALL
|
---FCALL
|  |
|  ---a
|  |
|  ---ExpList
|
|
---ExpList
   |
   ---"Foo-2"

What can I do?
Thanks!



		
__________________________________ 
Do you Yahoo!? 
Yahoo! Small Business - Try our new resources site!
http://smallbusiness.yahoo.com/resources/ 
From fanyang_32 at yahoo.ca  Thu May  5 08:45:05 2005
From: fanyang_32 at yahoo.ca (Fan Yang)
Date: Thu May  5 08:45:11 2005
Subject: [antlr-interest] how to deal with the number and identifier tokens
	overlap problem?
Message-ID: <20050505154505.97559.qmail@web52805.mail.yahoo.com>

Hi,
 
I encountered the number and identifier tokens overlap problem, for example, 1000-MAIN, the lexer will return INTEGER 1000 and a parsing error instead of "1000-MAIN" as IDENTIFIER. 
 
INTEGER:
('0'...'9')+
;
 
IDENTIFIER:
(('a'..'z')|('0'..'9'))+ (('-')+ (('a'..'z')|('0'..'9'))+)*
;
 
After researching for a while on anltr news group, I know that I can use left factoring or increase lookahead characters(not for this case) to fix this problem. I tried to use syntax predicate as showing in the following code snippet, but the lexer seems running for ever, never return.
 
IDENTIFIER:
( (('a'..'z')|('0'..'9'))+ (('-')+ (('a'..'z')|('0'..'9'))+)*)=>

 (('a'..'z')|('0'..'9'))+ (('-')+ (('a'..'z')|('0'..'9'))+)*
|
 ('0'...'9')+ {_ttype = INTEGER;}

;
 
Would you please tell me how to fix this kind problem? Any suggestion will be appreciated.
 
Fan
 
 



---------------------------------
Post your free ad now! Yahoo! Canada Personals
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050505/80af3b53/attachment.html
From ml-antlr at riverside-machines.co.uk  Thu May  5 10:29:18 2005
From: ml-antlr at riverside-machines.co.uk (Evan Lavelle)
Date: Thu May  5 10:29:23 2005
Subject: [antlr-interest] Installation problem: old antlr-mode.el
Message-ID: <427A57EE.6000802@riverside-machines.co.uk>

The antlr-mode.el file in antlr-2.7.5/extras is v2.1, from 2001. This 
doesn't work with xemacs 21.4-14. The current version is 2.2c, which 
does work with xemacs 21.4-14, and which can be found at 
http://antlr-mode.sourceforge.net/.

Evan


From johnm-antlr at non.net  Thu May  5 10:38:37 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Thu May  5 10:38:18 2005
Subject: [antlr-interest] how to deal with the number and identifier tokens
	overlap problem?
In-Reply-To: <20050505154505.97559.qmail@web52805.mail.yahoo.com>
References: <20050505154505.97559.qmail@web52805.mail.yahoo.com>
Message-ID: <17018.23069.833244.183210@despot.non.net>

>>>>> "Fan" == Fan Yang <fanyang_32@yahoo.ca> writes:
[...]

> I encountered the number and identifier tokens overlap problem, for
> example, 1000-MAIN, the lexer will return INTEGER 1000 and a parsing
> error instead of "1000-MAIN" as IDENTIFIER.

Is there some reason that you're allowing identifiers to start with a
digit?

Anyways, in terms of the technique to handle this type of overlap, you
might want to check out the Java lexer. In particular the handling of '.'.

Hope this helps,
		John
From oliver.zeigermann at gmail.com  Thu May  5 14:26:37 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Thu May  5 14:26:40 2005
Subject: [antlr-interest] Downloading 2.8
Message-ID: <9da4f45205050514262cccbbee@mail.gmail.com>

Folks!

Is this

http://www.openchannelsoftware.org/orders/index.php?group_id=339

the right way to get 2.8? Can't believe this. Who is going to sign
that license and fax it back? Also when searching for antlr and "2.8"
with Google you will not find this.

I am confused. Why are things like this?

Oliver
From Loring.G.Craymer at jpl.nasa.gov  Thu May  5 15:47:13 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Thu May  5 15:47:17 2005
Subject: [antlr-interest] Downloading 2.8
In-Reply-To: <9da4f45205050514262cccbbee@mail.gmail.com>
References: <9da4f45205050514262cccbbee@mail.gmail.com>
Message-ID: <6.2.1.2.2.20050505153826.02b7e008@mail.jpl.nasa.gov>

Oliver--

Yes, that's the right way to get 2.8.  The restrictions are ones that 
Caltech/JPL agreed to license software through open channel.  Note that the 
license only applies to some of the files (and none of the library 
classes)--I'd prefer a more open distribution policy, but the license 
conditions are to allow Open Channel to retain commercialization rights in 
exchange for collecting the information about distribution that NASA 
requires.  Eventually, I plan to bootstrap a version which uses ANTLR trees 
to implement the grammar generation algorithm and is free of the Open 
Channel distribution restrictions.

Ter was going to post a pointer on the main ANTLR site.  I've been too busy 
to do much about publicizing the release except in this forum.

--Loring


At 02:26 PM 5/5/2005, Oliver Zeigermann wrote:
>Folks!
>
>Is this
>
>http://www.openchannelsoftware.org/orders/index.php?group_id=339
>
>the right way to get 2.8? Can't believe this. Who is going to sign
>that license and fax it back? Also when searching for antlr and "2.8"
>with Google you will not find this.
>
>I am confused. Why are things like this?
>
>Oliver


From johnm-antlr at non.net  Thu May  5 15:51:09 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Thu May  5 15:50:51 2005
Subject: [antlr-interest] Downloading 2.8
In-Reply-To: <9da4f45205050514262cccbbee@mail.gmail.com>
References: <9da4f45205050514262cccbbee@mail.gmail.com>
Message-ID: <17018.41821.745954.859623@despot.non.net>

>>>>> "Oliver" == Oliver Zeigermann <oliver.zeigermann@gmail.com> writes:
[...]

> Is this

> http://www.openchannelsoftware.org/orders/index.php?group_id=339

> the right way to get 2.8? Can't believe this.

Yeah, it's kind of scary.  Personally, I won't sign that license agreement.

[...]
> I am confused. Why are things like this?

Well, to be clear, remember that that is an *experimental* branch of Antlr
called Antlr v2.8e.  Loring has done a ton of work over the years with
Antlr, particularly in the area of tree handling.

Loring works at NASA JPL and that is a US government organizaation.  Loring
spent a lot of time and effort getting that bureaucracy to let him release
his Antlr work and that's the best result that they could work out.

Hope this helps,
		John
From johnm-antlr at non.net  Thu May  5 15:53:28 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Thu May  5 15:53:08 2005
Subject: [antlr-interest] Downloading 2.8
In-Reply-To: <6.2.1.2.2.20050505153826.02b7e008@mail.jpl.nasa.gov>
References: <9da4f45205050514262cccbbee@mail.gmail.com>
	<6.2.1.2.2.20050505153826.02b7e008@mail.jpl.nasa.gov>
Message-ID: <17018.41960.848946.701898@despot.non.net>

>>>>> "Loring" == Loring Craymer <Loring.G.Craymer@jpl.nasa.gov> writes:
[...]

> Eventually, I plan to bootstrap a version which uses ANTLR trees to
> implement the grammar generation algorithm and is free of the Open
> Channel distribution restrictions.

Cool!

Rock on,
	John
From kiranreddyd at yahoo.co.in  Fri May  6 03:08:24 2005
From: kiranreddyd at yahoo.co.in (kiranreddyd)
Date: Fri May  6 10:05:39 2005
Subject: [antlr-interest] (?_Lock@_Mutex@std) already defined in
	antlr.lib(TokenStreamRewriteEngine.obj
Message-ID: <d5ffmo+t2s0@eGroups.com>

Hi, 


I am using VC7 compiler....I have downloaded antlr-2.7.5.msi zipped 
and antlr-2.7.5.exe. 


I have generated parser for the grammer using antlr-
2.7.5.exe...after that created a project and tried to build my 
project... 


I am getting the following error: error LNK2005: "public: void 
__thiscall std::_Mutex::_Lock(void)" (?_Lock@_Mutex@std@@QAEXXZ) 
already defined in antlr.lib(TokenStreamRewriteEngine.obj) 


My project includes someother files...but no where those files I am 
using _Mutex and _Lock... 

Thanks in advance 
Regards 
Kiran




From tmandal at cal.interrasystems.com  Thu May  5 09:16:26 2005
From: tmandal at cal.interrasystems.com (Tapodyuti Mandal)
Date: Fri May  6 10:05:55 2005
Subject: [antlr-interest] Exception handling
Message-ID: <427A46DA.1080404@cal.interrasystems.com>

Hello Everybody,
   I'm facing problem using ANTLR with gcc3.2.3 on Linux 7.2. The problem
is with catch-throw. The parser is throwing MisMatchToken exception. There's
a catch immediately after throw. The catch doesn't work. It finally 
gives SIGABORT
signal. The same code works fine for gcc2.96. Can anyone shed some light 
on the
problem? I'm using antlr-2.7.4.

Thanks in advance,
Tapodyuti


From ml-antlr at riverside-machines.co.uk  Fri May  6 10:20:46 2005
From: ml-antlr at riverside-machines.co.uk (Evan Lavelle)
Date: Fri May  6 10:20:58 2005
Subject: [antlr-interest] Downloading 2.8
In-Reply-To: <9da4f45205050514262cccbbee@mail.gmail.com>
References: <9da4f45205050514262cccbbee@mail.gmail.com>
Message-ID: <427BA76E.1090808@riverside-machines.co.uk>

Oliver Zeigermann wrote:

> Folks!
> 
> Is this
> 
> http://www.openchannelsoftware.org/orders/index.php?group_id=339
> 
> the right way to get 2.8? Can't believe this. Who is going to sign
> that license and fax it back? 

My guess is - nobody who actually bothers to read it. It doesn't even 
make sense, and contains a number of contradictions. To start with, how 
can OCS attempt to license 'part of antlr.g'? What happens if I also 
modify antlr.g? Is this covered under the original licence, or OCS's?

Secondly, the licence grants the recipient the right to modify the code 
*only* for non-commercial "private internal purposes solely by 
recipient". You also have to agree not to assert ownership of any 
modifications (unlike OCS, which has done exactly that). But OCS then 
asserts a right "to negotiate with Recipient a separate agreement for 
the right to commercialize and/or publish Modifications"!

Evan



From Richard.Ney at Aspect.com  Fri May  6 18:26:24 2005
From: Richard.Ney at Aspect.com (Ney, Richard)
Date: Fri May  6 18:26:29 2005
Subject: [antlr-interest] Problems with STRING Literals
Message-ID: <B4D3CECB886F164AA5EC912A1D082BCEDB13E3@sac1exch3.aspect.com>

I have a parser/lexer combination that parsers SQL. I have a rule for my
lexer for STRING_LITERAL with the goal of leaving the string surrounded
with single quotes.

 

STRING_LITERAL

      : '\'' (~('"'|'\''|'\\'))* '\''

      | '\"'! { $append("'"); } (~('"'|'\\'))* '\"'! { $append("'"); }

      ;

 

Now I can parser a statement with a string like this

 

select t1.cur_state_name from K_US_CORE_AGT_STAT t1 where  (
t1.cur_state_name in ("AVAIL"))

 

but I can't parser this one

 

select t1.cur_state_name from K_US_CORE_AGT_STAT t1 where  (
t1.cur_state_name in ('AVAIL'))

 

I get a lexer error 

exception: line 1:93: expecting ''', found ')'

 

Since the rule appears to read past the last ' character. What am I
doing wrong with this rule?

 

Richard Ney                                                         

Principal Software Engineer

Aspect Communications

1310 Ridder Park Drive

San Jose, CA 95131-2313

 

916.797.9602          Home Office

408.325.2464       SJ Office

www.aspect.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050506/103e9031/attachment.html
From vidar at hawkis.com  Sat May  7 06:37:03 2005
From: vidar at hawkis.com (Vidar =?iso-8859-1?q?H=E5kestad?=)
Date: Sat May  7 06:32:11 2005
Subject: [antlr-interest] Not possible to specify the Java package statement
	in the grammar?
Message-ID: <200505071537.03714.vidar@hawkis.com>

Hello
Using ANTLR 2.7.5.
I cannot see how I can get the generated code to be part of a particular Java 
package.
If I specify a {...} clause before the declaration of the parser class, the 
code gets included *AFTER* the imports (but before the generated class). If I 
specify a package (e.g. package com.hawkis.xyzparser;) before the parser 
definition I get a grammar syntax error.

Would it be possible to allow for a package specification directly in the 
grammar file?

As it is now, I have to insert the package statement every time i generate new 
code. Using Eclipse with its ANTLR plugin means pasting in the package 
statement into the generated files each time I've pressed Ctrl+S.

Regards
Vidar
From scott at javadude.com  Sat May  7 07:18:11 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Sat May  7 07:18:27 2005
Subject: [antlr-interest] Not possible to specify the Java package
	statementin the grammar?
In-Reply-To: <200505071537.03714.vidar@hawkis.com>
Message-ID: <200505071515.j47FFU4Z019178@s2.eroute.net>

at the top of the file add

header {
  package your.pkg.name; 
}

Later,
-- Scott


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Vidar H?kestad
> Sent: Saturday, May 07, 2005 9:37 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Not possible to specify the Java 
> package statementin the grammar?
> 
> Hello
> Using ANTLR 2.7.5.
> I cannot see how I can get the generated code to be part of a 
> particular Java package.
> If I specify a {...} clause before the declaration of the 
> parser class, the code gets included *AFTER* the imports (but 
> before the generated class). If I specify a package (e.g. 
> package com.hawkis.xyzparser;) before the parser definition I 
> get a grammar syntax error.
> 
> Would it be possible to allow for a package specification 
> directly in the grammar file?
> 
> As it is now, I have to insert the package statement every 
> time i generate new code. Using Eclipse with its ANTLR plugin 
> means pasting in the package statement into the generated 
> files each time I've pressed Ctrl+S.
> 
> Regards
> Vidar
> 


From geiroves at online.no  Sat May  7 23:43:12 2005
From: geiroves at online.no (Geir Ove Skjaervik)
Date: Sat May  7 23:43:19 2005
Subject: [antlr-interest] Not possible to specify the Java package
	statementin the grammar?
In-Reply-To: <200505071537.03714.vidar@hawkis.com>
Message-ID: <001101c55399$3541bed0$0100a8c0@rexii>

Hello,

I do not know if this will do the trick for you, but you could use the
import statement in the .g file as this:

header {
package no.oss.gos;
import antlr.CommonToken;
import no.oss.gos.MyPackage;
import java.util.*;
}

class YourParser extends Parser;

......


Geir Ove
Norway



-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Vidar H?kestad
Sent: 7. mai 2005 15:37
To: antlr-interest@antlr.org
Subject: [antlr-interest] Not possible to specify the Java package
statementin the grammar?


Hello
Using ANTLR 2.7.5.
I cannot see how I can get the generated code to be part of a particular
Java 
package.
If I specify a {...} clause before the declaration of the parser class,
the 
code gets included *AFTER* the imports (but before the generated class).
If I 
specify a package (e.g. package com.hawkis.xyzparser;) before the parser

definition I get a grammar syntax error.

Would it be possible to allow for a package specification directly in
the 
grammar file?

As it is now, I have to insert the package statement every time i
generate new 
code. Using Eclipse with its ANTLR plugin means pasting in the package 
statement into the generated files each time I've pressed Ctrl+S.

Regards
Vidar


From parrt at cs.usfca.edu  Sun May  8 15:11:54 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun May  8 15:12:08 2005
Subject: [antlr-interest] a beautiful "StringTemplate code generation" moment
Message-ID: <E5D62870-A538-404E-A813-9369348D6EA2@cs.usfca.edu>

Hi.

Last Friday, I had a beautiful "StringTemplate code generation  
moment" when working on ANTLR v3; it was cool enough that I wrote up  
a big blurb in the "blog":

http://www.antlr.org/blog/antlr3/codegen.tml

Here's the key insight: lazy evaluation is insanely useful when  
building translators (the blog entry describes a great example).   
Don't build code generators without StringTemplate! ;)

Ter

From john.carlson3 at sbcglobal.net  Sun May  8 22:05:53 2005
From: john.carlson3 at sbcglobal.net (John Carlson)
Date: Sun May  8 22:04:50 2005
Subject: [antlr-interest] GUI for building ANTLR grammars
Message-ID: <427EEFB1.40703@sbcglobal.net>

Is there any interest in building a GUI for creating  ANTLR grammars, 
similar to Grammex?   see:

http://lieber.www.media.mit.edu/people/lieber/Lieberary/Grammex/Grammex-Intro.html 

From parrt at cs.usfca.edu  Sun May  8 23:01:49 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun May  8 23:01:51 2005
Subject: [antlr-interest] GUI for building ANTLR grammars
In-Reply-To: <427EEFB1.40703@sbcglobal.net>
References: <427EEFB1.40703@sbcglobal.net>
Message-ID: <93a0b54b5dc758f0a22f290fe6bbe692@cs.usfca.edu>

On May 8, 2005, at 10:05 PM, John Carlson wrote:
> Is there any interest in building a GUI for creating  ANTLR grammars,  
> similar to Grammex?   see:
>
> http://lieber.www.media.mit.edu/people/lieber/Lieberary/Grammex/ 
> Grammex-Intro.html

Hi.  I was just discussing a similar mechanism to integrate into  
ANTLRWorks with Jean Bovet.  Hopefully something interesting will  
happen in that area this Fall :)

Ter

From ric.klaren at gmail.com  Mon May  9 00:13:32 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon May  9 00:13:34 2005
Subject: [antlr-interest] (?_Lock@_Mutex@std) already defined in
	antlr.lib(TokenStreamRewriteEngine.obj
In-Reply-To: <d5ffmo+t2s0@eGroups.com>
References: <d5ffmo+t2s0@eGroups.com>
Message-ID: <bc607a4e05050900134a00a255@mail.gmail.com>

On 5/6/05, kiranreddyd <kiranreddyd@yahoo.co.in> wrote:
> I am using VC7 compiler....I have downloaded antlr-2.7.5.msi zipped
> and antlr-2.7.5.exe.
> 
> I have generated parser for the grammer using antlr-
> 2.7.5.exe...after that created a project and tried to build my
> project...
> 
> I am getting the following error: error LNK2005: "public: void
> __thiscall std::_Mutex::_Lock(void)" (?_Lock@_Mutex@std@@QAEXXZ)
> already defined in antlr.lib(TokenStreamRewriteEngine.obj)
> 
> My project includes someother files...but no where those files I am
> using _Mutex and _Lock...

This is probably something due to mixing different settings for
building the library and the project. Mutex & Lock hint that it's the
multithreading option (not a VC user so I don't know the details)

I have received some fixes for the TokenStreamRewriteEngine but I
don't think those would address this. Anycase if it's that specific
file that triggers stuff it is safe to omit it from the project unless
you need the functionality.

Cheers,

Ric
From glenn.schuetze at gmail.com  Mon May  9 12:57:18 2005
From: glenn.schuetze at gmail.com (=?ISO-8859-1?Q?Glenn_Sch=FCtze?=)
Date: Mon May  9 12:56:39 2005
Subject: [antlr-interest] problems with contructing AST and walking
Message-ID: <3E6250F5-F0C1-4896-87E3-85BDD03715F4@gmail.com>

Hi!

I have to write a "compiler" to transfer eODL-source-codes  to a  
repository. I'm using ANTLR to parse programs and to build up an AST.
I have the following problem:

A possible extract I have to parse:
interface foo : AA::BB::CC , EE::FF::GG {
...
}

It's an interface which inherits from defined interfaces AA::BB::CC  
and EE::FF::GG.
I have to store these inheritance specification:

Interface's names which I collect in the AST don't appear in the rule  
<interface_inheritance_spec>. I only get the first Interface: in my  
example: AA::BB::CC


here the extract from the parser, where interface_inheritance_spec is  
something like :AA::BB::CC

interface_inheritance_spec:
             ":"^ scoped_name ( ","! scoped_name )*
;

scoped_name :
               "::"^ scoped_name_rest        //then it is full qualified
     |         scoped_name_rest
     ;

scoped_name_rest :
             IDENT^ ( "::"! IDENT )*
;

here is the appropriate extract from the tree walker:

interface_inheritance_spec { ArrayList<String> ine; ArrayList<String>  
inr ; } :
       #( ":" ine = scoped_name
               {
                                 System.out.println("##############");
                                 for ( String s : ine )  
{ System.out.println(s); }
                                 System.out.println("##############");
               }
                             (
                                       // this branch never seems to  
be entered, but I need it:-)
                                       inr = scoped_name
                                                     {
                                                             
System.out.println("############## hinteres");
                                                            for  
( String s : inr ) { System.out.println(s); }
                                                             
System.out.println("############## hinteres");
                                                     }
                             )*
       )
;


// That seems to work well! debug printing of ArrayLists works.
scoped_name returns [ ArrayList<String> strs ] { ArrayList<String>  
in; strs = new ArrayList<String>(); } :
         #( "::" in = scoped_name_rest )
                     {
                                 in.add("::");
                                 return in;
                     }
     |    in = scoped_name_rest
                     {
                                 strs = in; return strs;
                     }
     ;

scoped_name_rest returns [ArrayList<String> strs] { strs = new  
ArrayList<String>(); int i = 0;} :
             #( ide:IDENT
                                 {
                                          strs.add(ide.getText());
                                 }
                         ( idr:IDENT
                                         {
                                                     strs.add 
(idr.getText());
                                         }
                         )*
             )
             {
                  return strs; }
         ;





Thank you very much!!!
Bye, Glenn.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050509/a02a7606/attachment-0001.html
From cblack0 at yahoo.com  Mon May  9 13:18:53 2005
From: cblack0 at yahoo.com (Chris Black)
Date: Mon May  9 13:18:58 2005
Subject: [antlr-interest] detecting transitions in stanza-based files
Message-ID: <20050509201853.70759.qmail@web31414.mail.mud.yahoo.com>

I've been writing grammars for various stanza-based
data files for awhile now and have discovered a few
good practices (some of which were guided by responses
to my post to this list a year ago:
http://www.antlr.org/pipermail/antlr-interest/2004-May/007890.html).


I am still experiencing some difficulties and would
like some input from the list.

Firstly the issue which provoked this posting, I have
a data format that looks like:

some,header
fields,I parse,fine

more,header,stuff
more,header,stuff
more,header,stuff

Data Type:,Foo,,,,,,,,,,,,,
real,data,num,num,num,num....
real,data,num,num,num,num....
real,data,num,num,num,num....
Data Type:,Bar,,,,,,,,,,,,,
real,data,num,num,num,num....
real,data,num,num,num,num....
real,data,num,num,num,num....

The problem I am having is detecting the transition
between real data lines and the start of the next
stanza starting with a data type header. In addition
sometimes the data type header is just:
Foo,,,,,,,

All the extra commas are sometimes there, sometimes
not, depending on whether the data file has been
mangled by excel or not.

Parts of my grammar are posted below. Note that I use
curDT to track the last seen data type header string
and use that to set the AST token type for the stanza.

In previous parsers I didn't have much of a problem
because there were newlines separating stanzas, but in
this case there aren't and my grammar does not seem to
detect the change from a bunch of record line rule
matches into a data header match rule.

What is the best way of handling this transition? I am
wondering if semantic/syntactic predicates may be the
best way of writing a grammar to handle this sort of
situation as currently even when working my grammars
be spittin' mad nondeterminism warnings on
compilations, yo!

I'd greatly appreciate any advice on how to handle
this transition or general pointers on stanza-based
parsers or things I'm doing wrong.

The relevant parts of my grammar are:

advancedDataTypeHeader:!
	{ System.err.println("adv header");
System.err.flush(); }
	FIELD DELIM
	dataType:FIELD
	(DELIM)*
	NEWLINE
	{
		curDT = dataType.getText();
	} ;

basicDataTypeHeader:!
	{ System.err.println("basic header");
System.err.flush(); }
	firstToken:FIELD
	(DELIM)* NEWLINE
	{
		String firstTokenStr = firstToken.getText();
		if(firstTokenStr.startsWith("Result")) {
			curDT = "Median";
		} else {
			curDT = "Count";
		}
	} ;

dataTypeHeader:! (advancedDataTypeHeader |
basicDataTypeHeader) ;

dataStanza: dataTypeHeader
	recordLine (recordLine)+ 
	(NEWLINE!)?
	{ 
		if(curDT.equals("Median")) {
			## = #([MEDIANSTANZA, curDT], ##);
		} else if(curDT.equals("Count")) {
			## = #([COUNTSTANZA, curDT], ##);
		} else {
			## = #([IGNORESTANZA, curDT], ##);
		}
	}
	;

recordLine: FIELD^ DELIM! optionalSampleName
	DELIM! FIELD 
	(DELIM! FIELD)+
	optionalNotes NEWLINE ;

Thanks in advance,
Chris

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From ric.klaren at gmail.com  Mon May  9 15:11:17 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon May  9 15:12:16 2005
Subject: [antlr-interest] Exception handling
In-Reply-To: <427A46DA.1080404@cal.interrasystems.com>
References: <427A46DA.1080404@cal.interrasystems.com>
Message-ID: <427FE005.1050203@gmail.com>

Tapodyuti Mandal wrote:
>   I'm facing problem using ANTLR with gcc3.2.3 on Linux 7.2. The problem
> is with catch-throw. The parser is throwing MisMatchToken exception. 
> There's
> a catch immediately after throw. The catch doesn't work. It finally 
> gives SIGABORT
> signal. The same code works fine for gcc2.96. Can anyone shed some light 
> on the
> problem? I'm using antlr-2.7.4.

First guess maybe some stale .o files wandering around compiled with 
another version of gcc/or other options. Linking stuff from 2.96 with 
3.2.x ones is probably not a good idea. If I recall right there were 
some ABI changes between those versions. Note that 2.96 is a redhat hack 
and not an official gcc release (the first versions of it were horrible).

Second guess compiler bug. Upgrade gcc. the last 3.4.x ones are pretty 
reliable.

Cheers,

Ric
From liigo at hotpop.com  Mon May  9 19:51:24 2005
From: liigo at hotpop.com (liigo)
Date: Mon May  9 19:51:41 2005
Subject: [antlr-interest] The most import questions for me about antlr?
Message-ID: <op.sqjgvyx5o3wyor@prog6>

Hi, all
I'm a newbie of antrl!

1.
     I want to make my new language..or call it a script, such as  
python,ruby,lua,etc.
and use the new language write a "program" and "run" it.
please note, Not olny "parse" the program, but also "RUN" it!

Can antlr help me?  I do think it can help me, but I do not know How to do.
Would you like to tell me how to start? or give me a sample.


2.
     I found a lot of grammar file(*.g) at www.antlr.org, but how to use it?
If i can use the *.g to make my new language?


thanks!
liigo

From jbb at acm.org  Mon May  9 21:13:17 2005
From: jbb at acm.org (John B. Brodie)
Date: Mon May  9 21:14:44 2005
Subject: [antlr-interest] The most import questions for me about antlr?
In-Reply-To: <op.sqjgvyx5o3wyor@prog6> (message from liigo on Tue, 10 May 2005
	10:51:24 +0800)
References: <op.sqjgvyx5o3wyor@prog6>
Message-ID: <E1DVM7R-0004F5-00@gecko>

Sir or Madam :-

You asked:
>1.
>     I want to make my new language..or call it a script, such as  
>python,ruby,lua,etc.
>and use the new language write a "program" and "run" it.
>please note, Not olny "parse" the program, but also "RUN" it!
>
>Can antlr help me?  I do think it can help me, but I do not know How to do.

Of course Antlr can help you in this endeavor.

>Would you like to tell me how to start? or give me a sample.

As a beginning, define your new language as a Context Free Grammar (CFG)
(in the sense of the Chomsky hierarchy). Probably best to divide this CFG
specification into 2 pieces:

   a) Lexical Analysis (e.g. use a Regular Language) which consumes
      characters and produces Tokens; and

   b) Syntax Analysis (e.g. use a Context Free Grammar in the LL(k) form)
      which consumes Tokens and produces an Abstract Syntax Tree (AST).

Next, specify a Tree Walker which traverses the AST produced by the Syntax
Analysis to perform a Semantic Analysis of the program to be run
(e.g. answer the question: is this a correct program?); this step should
probably transform the input AST into another AST suitable for
interpretation.

Finally, specify a Tree Walker which traverses the resultant semantically
correct AST to "run" the input program.

And so you end up with 4 Antlr specifications: a Lexer, a Parser, and 2
Tree Walkers.

>2.
>     I found a lot of grammar file(*.g) at www.antlr.org, but how to use it?
>If i can use the *.g to make my new language?

1) Use these grammar examples to learn more about what Antlr can do for you.

2) Extract appropriate snippets from these grammars to help you process
   your language.



Hope this helps...
   -jbb
From nbsherid at secsme.org.au  Mon May  9 21:23:17 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Mon May  9 21:23:25 2005
Subject: [antlr-interest] The most import questions for me about antlr?
In-Reply-To: <op.sqjgvyx5o3wyor@prog6>
Message-ID: <000001c55517$fdd30140$9829198a@nigelnote>



> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of liigo
> Sent: Tuesday, 10 May 2005 12:51 PM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] The most import questions for me about antlr?
> 
> Hi, all
> I'm a newbie of antrl!
> 
> 1.
>      I want to make my new language..or call it a script, such as
> python,ruby,lua,etc.
> and use the new language write a "program" and "run" it.
> please note, Not olny "parse" the program, but also "RUN" it!
> 
> Can antlr help me?  I do think it can help me, but I do not know How to
> do.
> Would you like to tell me how to start? or give me a sample.
> 

Hi Liigo,

A grammar file defines the context-free rules of your language, and any
actions that you take when you encounter the rule. You will most likely need
both rules and actions! The grammar you define allows ANTLR to generate a
Lexer and Parser (and maybe Tree Parser) for you to match the elements
contained within the input file (e.g. the script files written by your
users). Once it matches those elements though, you must use then use actions
to do the things you want, or use tree parser rules to structure your
Abstract Syntax Tree (AST) nodes in the order you want. 

In a real compiler or interpreter, you might need to do various semantic
checks first (context-sensitive, rather than context-free). Phase one is
checking identifiers or types (if they are relevant to your language), etc.
You can do this with both the actions of ANTLR (either parser or tree
parser), or by calling methods on the objects used in the target language
you tell ANTLR to use (Java, C#, Python, C++). 

Then you will probably want to convert the parsed expressions/statements of
your language into some other form (i.e. compilation to byte codes or
assembly language of chosen target architecture), or execute the statements
using an interpreter. Currently, I am using the second method for my
language (for now!) by calling functions recursively on the Java objects I
have defined. 

You *could* use tree parsers for some of this stuff, but I am yet to come
across a good example of an interpreter or compiler using tree parsers.
Hopefully, someone else here could suggest an example or sample that others
can find and examine in a more complete compiler scenario.

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435

From liigo at hotpop.com  Mon May  9 23:08:06 2005
From: liigo at hotpop.com (liigo)
Date: Mon May  9 23:09:07 2005
Subject: [antlr-interest] The mo	st import questions for me about antlr?
In-Reply-To: <000201c5551e$c3703de0$9829198a@nigelnote>
References: <000201c5551e$c3703de0$9829198a@nigelnote>
Message-ID: <op.sqjpzs06o3wyor@prog6>


Is there anyone who has made his own language(script) with help by antlr?
Would you please give me a samples?




 Tue, 10 May 2005 13:11:46 +0800Nigel Sheridan-Smith  
<nbsherid@secsme.org.au> :

>> -----Original Message-----
>> From: liigo [mailto:liigo@hotpop.com]
>> Sent: Tuesday, 10 May 2005 2:56 PM
>> To: Nigel Sheridan-Smith
>> Subject: Re: (-)RE: [antlr-interest] The  
>> most import
>> questions for me about antlr?
>>
>>  Tue, 10 May 2005 12:23:17 +0800Nigel Sheridan-Smith
>> <nbsherid@secsme.org.au> :
>>
>> Hi Nigel,
>>
>> Thank you very much for help.
>> I have other questions:
>>    antlr just do parse the script, and I must do the interprete?
>>    Antlr will generate some source file(*.java/*.cpp...), and I must
>> "change" these file to do my things?
>>
>> Maybe I need some examples:)
>>
>
> Yes, it will parse the script for you, but you must build your own  
> interpreter. However, ANTLR tries to help with that too if you use the  
> tree parsers.
>
> The output from your "language.g" file will be source files (*.java,  
> *.cpp, *.cs, etc) that you can compile. You will need at least another  
> class to run the lexer and parser from. Generally, it's not advisable to  
> modify the source files generated later on - rather, you add actions to  
> the grammar file and run ANTLR to regenerate again.
>
> Have a look at this tutorial. It has a neat expression evaluator example:
>
> http://supportweb.cs.bham.ac.uk/documentation/tutorials/docsystem/build/tutorials/antlr/antlrhome.html
>
> and the other tutorials here:
>
> http://www.antlr.org/doc/getting-started.html
>
> Cheers
>
> Nigel
>
> --
> Nigel Sheridan-Smith
> PhD research student
>
> Faculty of Engineering
> University of Technology, Sydney
> Phone: 02 9514 7946
> Fax: 02 9514 2435
>
>



From ali.jan at gmail.com  Mon May  9 23:41:59 2005
From: ali.jan at gmail.com (Muhammad Ali)
Date: Mon May  9 23:42:01 2005
Subject: [antlr-interest] abstract factory LT(1)
Message-ID: <8acb5ef8050509234164d2bf65@mail.gmail.com>

Hi everyone,

I have genereated some C# code from a grammar file for antlr that I 
downloaded.

The generated code has a lot of calls like this:

[code]
tmp1_AST = (XQueryAST) astFactory.create(LT(1));
[/code]

This gives me errors because LT is also defined in the same file as a field 
to represent the 'less-than' (<) token.

Anyway, what is LT(1)? Is there something else with which I can replace it?

Thanks...

Regards,
Ali
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050510/21b7ea9c/attachment.html
From lists at andreas-jung.com  Tue May 10 01:49:47 2005
From: lists at andreas-jung.com (Andreas Jung)
Date: Tue May 10 01:49:50 2005
Subject: [antlr-interest] Compiling 2.7.5 on MacOSX
Message-ID: <85C1F0A5A551E57E28BA139A@[192.168.0.20]>


I am trying to compile V 2.7.5 on MacOSX (Tiger) using Java 1.4. However 
this fails.
Any hints?

Andreas

-------------

>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
>> make -C ./antlr all
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
*** compiling 209 Java file(s)

Found 1 semantic error compiling "ASTFactory.java":

                                <
    26. public class ASTFactory {
   . . .
   410. }
        >
*** Semantic Error: A class file was not generated for the type 
"antlr.ASTFactory" because a library method that it depends on was not fo
und. See system messages for more information.

Found 1 semantic error compiling 
"/Users/ajung/src/antlr-2.7.5/antlr/../antlr/build/Tool.java":

                          <
    47. public class Tool {
   . . .
   177. }
        >
*** Semantic Error: A class file was not generated for the type 
"antlr.build.Tool" because a library method that it depends on was not fo
und. See system messages for more information.

Found 1 semantic error compiling 
"/Users/ajung/src/antlr-2.7.5/antlr/../antlr/debug/LLkDebuggingParser.java":

 
<
    18. public class LLkDebuggingParser extends LLkParser implements 
DebuggingParser {
   . . .
   234. }
        >
*** Semantic Error: A class file was not generated for the type 
"antlr.debug.LLkDebuggingParser" because a library method that it depends
 on was not found. See system messages for more information.

Found 21 semantic errors compiling 
"/Users/ajung/src/antlr-2.7.5/antlr/../antlr/debug/misc/ASTFrame.java":

    13. import java.awt.*;
               ^------^
*** Semantic Error: You need to modify your classpath, sourcepath, 
bootclasspath, and/or extdirs setup. Jikes could not find package "jav
a.awt" in:
 
/System/Library/Frameworks/JavaVM.framework/Versions/1.3.1/Classes/classes.jar
                /Users/ajung/src/antlr-2.7.5/antlr/antlr.jar
                /Users/ajung/src/antlr-2.7.5/scripts/..



    14. import java.awt.event.*;
               ^------------^
*** Semantic Error: You need to modify your classpath, sourcepath, 
bootclasspath, and/or extdirs setup. Jikes could not find package "jav
a.awt.event" in:
 
/System/Library/Frameworks/JavaVM.framework/Versions/1.3.1/Classes/classes.jar
                /Users/ajung/src/antlr-2.7.5/antlr/antlr.jar
                /Users/ajung/src/antlr-2.7.5/scripts/..
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 186 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050510/b09b2dfc/attachment.bin
From open.zone at virgin.net  Tue May 10 02:04:15 2005
From: open.zone at virgin.net (Micheal J)
Date: Tue May 10 01:50:54 2005
Subject: [antlr-interest] abstract factory LT(1)
In-Reply-To: <8acb5ef8050509234164d2bf65@mail.gmail.com>
Message-ID: <000601c5553f$413cc750$6502a8c0@hercules>

LT() is an accessor for lookahead tokens. It is a standard part of ANTLR's
runtime library so, no you shouldn't be looking to change it.
 
Change LT in your grammar file to LTHAN, LESSTHAN or similar.
 
Micheal
ANTLR/C#

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Muhammad Ali
Sent: 10 May 2005 07:42
To: antlr-interest@antlr.org
Subject: [antlr-interest] abstract factory LT(1)


Hi everyone,

I have genereated some C# code from a grammar file for antlr that I
downloaded.

The generated code has a lot of calls like this:

[code]
          tmp1_AST = (XQueryAST) astFactory.create(LT(1));
[/code]

This gives me errors because LT is also defined in the same file as a field
to represent the 'less-than' (<) token.  

Anyway, what is LT(1)? Is there something else with which I can replace it?

Thanks...

Regards,
Ali


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050510/3da3966e/attachment-0001.html
From nbsherid at secsme.org.au  Tue May 10 02:27:59 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Tue May 10 02:27:55 2005
Subject: [antlr-interest] Compiling 2.7.5 on MacOSX
In-Reply-To: <85C1F0A5A551E57E28BA139A@[192.168.0.20]>
Message-ID: <001d01c55542$8e73e690$0500a8c0@nigel>


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Andreas Jung
> Sent: Tuesday, 10 May 2005 6:50 PM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Compiling 2.7.5 on MacOSX
> 
> 
> I am trying to compile V 2.7.5 on MacOSX (Tiger) using Java 1.4. However
> this fails.
> Any hints?
> 

Umm... looks like a CLASSPATH problem. Does jikes come with the java
libraries? Can you find rt.jar, etc?

Can you submit more information about the exact errors? These error messages
don't actually say what the "library method" is...

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435


From demakov at ispras.ru  Tue May 10 03:22:00 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Tue May 10 03:22:04 2005
Subject: [antlr-interest] abstract factory LT(1)
References: <8acb5ef8050509234164d2bf65@mail.gmail.com>
Message-ID: <011001c5554a$1a4fdeb0$8cc79553@marlboro>

It is method, not field:

Parser.cs:
/*Return the ith token of lookahead */
public abstract Token LT(int i);

Try to rename LT -> LESS_THAN

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com



  ----- Original Message ----- 
  From: Muhammad Ali 
  To: antlr-interest@antlr.org 
  Sent: Tuesday, May 10, 2005 10:41 AM
  Subject: [antlr-interest] abstract factory LT(1)


  Hi everyone,

  I have genereated some C# code from a grammar file for antlr that I downloaded.

  The generated code has a lot of calls like this:

  [code]
            tmp1_AST = (XQueryAST) astFactory.create(LT(1));
  [/code]

  This gives me errors because LT is also defined in the same file as a field to represent the 'less-than' (<) token.

  Anyway, what is LT(1)? Is there something else with which I can replace it?

  Thanks...

  Regards,
  Ali
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050510/a9a7d2f1/attachment.html
From chris at lotuscat.com  Tue May 10 06:40:14 2005
From: chris at lotuscat.com (Chris Black)
Date: Tue May 10 06:40:21 2005
Subject: [antlr-interest] detecting transitions in stanza-based files
In-Reply-To: <20050509201853.70759.qmail@web31414.mail.mud.yahoo.com>
References: <20050509201853.70759.qmail@web31414.mail.mud.yahoo.com>
Message-ID: <4280B9BE.10905@lotuscat.com>

Chris Black wrote:

>[snip]
>  
>
I decided perhaps paring down my query would make it a bit easier to 
read. Sorry for the initial long-winded post. My main problem is trying 
to detect a transition between lines of 3+ FIELDs long and one of less 
than 3 FIELDs. I have a token stream after the lexer has run like:
FIELD DELIM FIELD NEWLINE
FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE
FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE
FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE
FIELD DELIM FIELD NEWLINE
FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE
FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE
FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE

My difficulty is detecting the transitions from a series of long lines 
to the short line separating the stanzas.
What seems to be happening is my rule to match a long line is trying to 
be applied to the short line since I am in a rule looking for any number 
of long lines. Why is this? To simplify, it seems like if I have a few 
rules like:

multStanzas: (stanza)+
stanza: shortLine (longLine)+

shortLine: FIELD DELIM FIELD DELIM FIELD NEWLINE
longLine: FIELD DELIM FIELD (DELIM FIELD)+ NEWLINE

That it tries to match the whole file as one stanza. I thought that once 
the longLine match failed seeing a short line of less than three FIELDs 
that ANTLR would then try to match with a longLine rule. What am I 
missing or doing wrong?

Thanks,
Chris

>Firstly the issue which provoked this posting, I have
>a data format that looks like:
>
>some,header
>fields,I parse,fine
>
>more,header,stuff
>more,header,stuff
>more,header,stuff
>
>Data Type:,Foo,,,,,,,,,,,,,
>real,data,num,num,num,num....
>real,data,num,num,num,num....
>real,data,num,num,num,num....
>Data Type:,Bar,,,,,,,,,,,,,
>real,data,num,num,num,num....
>real,data,num,num,num,num....
>real,data,num,num,num,num....
>
>The problem I am having is detecting the transition
>between real data lines and the start of the next
>stanza starting with a data type header. In addition
>sometimes the data type header is just:
>Foo,,,,,,,
>
>All the extra commas are sometimes there, sometimes
>not, depending on whether the data file has been
>mangled by excel or not.
>
>Parts of my grammar are posted below. Note that I use
>curDT to track the last seen data type header string
>and use that to set the AST token type for the stanza.
>
>In previous parsers I didn't have much of a problem
>because there were newlines separating stanzas, but in
>this case there aren't and my grammar does not seem to
>detect the change from a bunch of record line rule
>matches into a data header match rule.
>
>What is the best way of handling this transition? I am
>wondering if semantic/syntactic predicates may be the
>best way of writing a grammar to handle this sort of
>situation as currently even when working my grammars
>be spittin' mad nondeterminism warnings on
>compilations, yo!
>
>I'd greatly appreciate any advice on how to handle
>this transition or general pointers on stanza-based
>parsers or things I'm doing wrong.
>
>The relevant parts of my grammar are:
>
>advancedDataTypeHeader:!
>	{ System.err.println("adv header");
>System.err.flush(); }
>	FIELD DELIM
>	dataType:FIELD
>	(DELIM)*
>	NEWLINE
>	{
>		curDT = dataType.getText();
>	} ;
>
>basicDataTypeHeader:!
>	{ System.err.println("basic header");
>System.err.flush(); }
>	firstToken:FIELD
>	(DELIM)* NEWLINE
>	{
>		String firstTokenStr = firstToken.getText();
>		if(firstTokenStr.startsWith("Result")) {
>			curDT = "Median";
>		} else {
>			curDT = "Count";
>		}
>	} ;
>
>dataTypeHeader:! (advancedDataTypeHeader |
>basicDataTypeHeader) ;
>
>dataStanza: dataTypeHeader
>	recordLine (recordLine)+ 
>	(NEWLINE!)?
>	{ 
>		if(curDT.equals("Median")) {
>			## = #([MEDIANSTANZA, curDT], ##);
>		} else if(curDT.equals("Count")) {
>			## = #([COUNTSTANZA, curDT], ##);
>		} else {
>			## = #([IGNORESTANZA, curDT], ##);
>		}
>	}
>	;
>
>recordLine: FIELD^ DELIM! optionalSampleName
>	DELIM! FIELD 
>	(DELIM! FIELD)+
>	optionalNotes NEWLINE ;
>
>Thanks in advance,
>Chris
>  
>
From ewbank at gmail.com  Tue May 10 07:57:21 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue May 10 07:57:26 2005
Subject: [antlr-interest] detecting transitions in stanza-based files
In-Reply-To: <4280B9BE.10905@lotuscat.com>
References: <20050509201853.70759.qmail@web31414.mail.mud.yahoo.com>
	<4280B9BE.10905@lotuscat.com>
Message-ID: <dd3a065f050510075736af0ccc@mail.gmail.com>

The core problem is that shortLine and longLine have the same
left-match.  If this is true, it's perhaps best to simply /parse/
everything (assume longLine?), then use a tree walker to break out
stanzas using a semantic predicate.

On 5/10/05, Chris Black <chris@lotuscat.com> wrote:
> multStanzas: (stanza)+
> stanza: shortLine (longLine)+
> 
> shortLine: FIELD DELIM FIELD DELIM FIELD NEWLINE
> longLine: FIELD DELIM FIELD (DELIM FIELD)+ NEWLINE
From andreas at andreas-jung.com  Tue May 10 01:47:10 2005
From: andreas at andreas-jung.com (Andreas Jung)
Date: Tue May 10 08:00:16 2005
Subject: [antlr-interest] Compiling 2.7.5 on MacOSX
Message-ID: <7AE63798B540CBDA3C2BF54D@[192.168.0.20]>

I tried to compile V 2.7.5 on MacOSX (Tiger) using Java 1.4. This fails in 
the following bad way:

>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
>> make -C ./antlr all
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
*** compiling 209 Java file(s)

Found 1 semantic error compiling "ASTFactory.java":

                                <
    26. public class ASTFactory {
   . . .
   410. }
        >
*** Semantic Error: A class file was not generated for the type 
"antlr.ASTFactory" because a library method that it depends on was not fo
und. See system messages for more information.

Found 1 semantic error compiling 
"/Users/ajung/src/antlr-2.7.5/antlr/../antlr/build/Tool.java":

                          <
    47. public class Tool {
   . . .
   177. }
        >
*** Semantic Error: A class file was not generated for the type 
"antlr.build.Tool" because a library method that it depends on was not fo
und. See system messages for more information.

Found 1 semantic error compiling 
"/Users/ajung/src/antlr-2.7.5/antlr/../antlr/debug/LLkDebuggingParser.java":

 
<
    18. public class LLkDebuggingParser extends LLkParser implements 
DebuggingParser {
   . . .
   234. }
        >
*** Semantic Error: A class file was not generated for the type 
"antlr.debug.LLkDebuggingParser" because a library method that it depends
 on was not found. See system messages for more information.

Found 21 semantic errors compiling 
"/Users/ajung/src/antlr-2.7.5/antlr/../antlr/debug/misc/ASTFrame.java":

    13. import java.awt.*;
               ^------^
*** Semantic Error: You need to modify your classpath, sourcepath, 
bootclasspath, and/or extdirs setup. Jikes could not find package "jav
a.awt" in:
 
/System/Library/Frameworks/JavaVM.framework/Versions/1.3.1/Classes/classes.jar
                /Users/ajung/src/antlr-2.7.5/antlr/antlr.jar
                /Users/ajung/src/antlr-2.7.5/scripts/..



    14. import java.awt.event.*;
               ^------------^
*** Semantic Error: You need to modify your classpath, sourcepath, 
bootclasspath, and/or extdirs setup. Jikes could not find package "jav
a.awt.event" in:
 
/System/Library/Frameworks/JavaVM.framework/Versions/1.3.1/Classes/classes.jar
                /Users/ajung/src/antlr-2.7.5/antlr/antlr.jar
                /Users/ajung/src/antlr-2.7.5/scripts/..

....


Any ideas how to get it compiled?

-aj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 186 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050510/cebc59e4/attachment.bin
From andreas at andreas-jung.com  Tue May 10 02:39:57 2005
From: andreas at andreas-jung.com (Andreas Jung)
Date: Tue May 10 08:00:17 2005
Subject: [antlr-interest] Compiling 2.7.5 on MacOSX
In-Reply-To: <001d01c55542$8e73e690$0500a8c0@nigel>
References: <001d01c55542$8e73e690$0500a8c0@nigel>
Message-ID: <EF5FD2708D84B77BC2BCBB78@[192.168.0.20]>



--On Dienstag, 10. Mai 2005 19:27 Uhr +1000 Nigel Sheridan-Smith 
<nbsherid@secsme.org.au> wrote:

>
>> -----Original Message-----
>> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
>> bounces@antlr.org] On Behalf Of Andreas Jung
>> Sent: Tuesday, 10 May 2005 6:50 PM
>> To: antlr-interest@antlr.org
>> Subject: [antlr-interest] Compiling 2.7.5 on MacOSX
>>
>>
>> I am trying to compile V 2.7.5 on MacOSX (Tiger) using Java 1.4. However
>> this fails.
>> Any hints?
>>
>
> Umm... looks like a CLASSPATH problem. Does jikes come with the java
> libraries? Can you find rt.jar, etc?
>
> Can you submit more information about the exact errors? These error
> messages don't actually say what the "library method" is...


jikes was a good hint. Looks like the configure searches for jikes first.
Setting JAVAC=javac resolved the problem.

Andreas

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 186 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050510/412ef716/attachment.bin
From chris at lotuscat.com  Tue May 10 08:08:58 2005
From: chris at lotuscat.com (Chris Black)
Date: Tue May 10 08:09:05 2005
Subject: [antlr-interest] detecting transitions in stanza-based files
In-Reply-To: <dd3a065f050510075736af0ccc@mail.gmail.com>
References: <20050509201853.70759.qmail@web31414.mail.mud.yahoo.com>	<4280B9BE.10905@lotuscat.com>
	<dd3a065f050510075736af0ccc@mail.gmail.com>
Message-ID: <4280CE8A.3020602@lotuscat.com>

Bryan Ewbank wrote:

>The core problem is that shortLine and longLine have the same
>left-match.  If this is true, it's perhaps best to simply /parse/
>everything (assume longLine?), then use a tree walker to break out
>stanzas using a semantic predicate.
>  
>
shortLine and longLine do have the same left-match, but I thought a 
sufficient value for the k lookahead would take care of that. I don't 
understand why it doesn't. My current structure is a lexer that just 
generates FIELDs, DELIMs and NEWLINEs, a parser that looks at this token 
stream to generate an AST with the stanzas separated out using marker 
tokens and such, and then a tree parser that goes through this tree 
fetching out FIELDs and arranging them into a data structure. Is this a 
fundamentally incorrect approach? Since my lexer and tree parser already 
work (and still work fine on many input files), I was hoping to do the 
fix in parser space, perhaps using syntactic predicates.
I've never done syntactic or semantic predicates and am reading up on 
them now. Shouldn't there be a way to handle the longLine/shortLine with 
syntactic predicates such as:
line: FIELD DELIM FIELD DELIM FIELD NEWLINE => shortLine
     | FIELD DELIM FIELD DELIM FIELD DELIM FIELD => longLine

With a sufficient lookahead? Would this work?

Thanks again,
Chris

>On 5/10/05, Chris Black <chris@lotuscat.com> wrote:
>  
>
>>multStanzas: (stanza)+
>>stanza: shortLine (longLine)+
>>
>>shortLine: FIELD DELIM FIELD DELIM FIELD NEWLINE
>>longLine: FIELD DELIM FIELD (DELIM FIELD)+ NEWLINE
>>    
>>

From ewbank at gmail.com  Tue May 10 10:05:26 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue May 10 10:05:30 2005
Subject: [antlr-interest] detecting transitions in stanza-based files
In-Reply-To: <4280CE8A.3020602@lotuscat.com>
References: <20050509201853.70759.qmail@web31414.mail.mud.yahoo.com>
	<4280B9BE.10905@lotuscat.com>
	<dd3a065f050510075736af0ccc@mail.gmail.com>
	<4280CE8A.3020602@lotuscat.com>
Message-ID: <dd3a065f05051010053f84d00f@mail.gmail.com>

Oh, I see.  The original example was different, so I went the wrong way ;-(.

Yes, you should be able to do that.  Easiest is something like this (a
syntactic predicate that forces matches of shortLine to be processed
by shortLine).

   line : ( shortLine ) => shortLine
        | longLine
        ;

> line: FIELD DELIM FIELD DELIM FIELD NEWLINE => shortLine
>      | FIELD DELIM FIELD DELIM FIELD DELIM FIELD => longLine

>>shortLine: FIELD DELIM FIELD DELIM FIELD NEWLINE
>>longLine: FIELD DELIM FIELD (DELIM FIELD)+ NEWLINE

should be
  longLine: FIELD DELIM FIELD DELIM FIELD (DELIM FIELD)+ NEWLINE
From ric.klaren at gmail.com  Tue May 10 12:35:21 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Tue May 10 12:35:40 2005
Subject: [antlr-interest] detecting transitions in stanza-based files
In-Reply-To: <4280B9BE.10905@lotuscat.com>
References: <20050509201853.70759.qmail@web31414.mail.mud.yahoo.com>
	<4280B9BE.10905@lotuscat.com>
Message-ID: <42810CF9.7080807@gmail.com>

Chris Black wrote:
> I decided perhaps paring down my query would make it a bit easier to 
> read. Sorry for the initial long-winded post. My main problem is trying 
> to detect a transition between lines of 3+ FIELDs long and one of less 
> than 3 FIELDs. I have a token stream after the lexer has run like:

> FIELD DELIM FIELD NEWLINE
> FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE
...
> FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE
> FIELD DELIM FIELD NEWLINE
> FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE
...
> FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE
> 
> My difficulty is detecting the transitions from a series of long lines 
> to the short line separating the stanzas.
> What seems to be happening is my rule to match a long line is trying to 
> be applied to the short line since I am in a rule looking for any number 
> of long lines. Why is this? To simplify, it seems like if I have a few 
> rules like:
> 
> multStanzas: (stanza)+
> stanza: shortLine (longLine)+
> 
> shortLine: FIELD DELIM FIELD DELIM FIELD NEWLINE
> longLine: FIELD DELIM FIELD (DELIM FIELD)+ NEWLINE
> 
> That it tries to match the whole file as one stanza. I thought that once 
> the longLine match failed seeing a short line of less than three FIELDs 
> that ANTLR would then try to match with a longLine rule. What am I 
> missing or doing wrong?

I guess that this might work it prevents entering the longLine rule if 
there's a shortline on the input (without ridiculous k size):

multStanzas: (stanza)+
stanza: shortLine ( { if( LA(6) == NEWLINE ) break;  }: longLine)+

Maybe also a check on EOF is necessary.

I think a token filter approach might work as well. Put between the 
lexer and parser a filter that inserts before every stanza a synthetic 
token that marks the start of a line. Keep a reference to this start 
marker. Then in the filter buffer up input to the first NEWLINE or EOF 
whilst counting the number of fields so far. When you get to the NEWLINE 
update the start marker's tokentype ($setType) to something like 
SHORTLINE or LONGLINE. At that point you can pass the start marker to 
the calling parser from the filter. And wait until the calling parser 
has consumed the input the filter has read so far and redo from start.

Your actual parser would then see:

shortline: SHORTLINE (FIELD DELIM)+ NEWLINE ;
longline: LONGLINE (FIELD DELIM)+ NEWLINE ;

My guess is that it would perform better than a syntactic predicate.

Cheers,

Ric
From chris at lotuscat.com  Tue May 10 15:11:37 2005
From: chris at lotuscat.com (Chris Black)
Date: Tue May 10 15:11:43 2005
Subject: [antlr-interest] detecting transitions in stanza-based files
In-Reply-To: <42810CF9.7080807@gmail.com>
References: <20050509201853.70759.qmail@web31414.mail.mud.yahoo.com>
	<4280B9BE.10905@lotuscat.com> <42810CF9.7080807@gmail.com>
Message-ID: <42813199.9010402@lotuscat.com>

Thanks for all your help everyone, I think I'm going to do a combination 
approach using a TokenFilter (perhaps extending the newer 
TokenStreamRewriteEngine) to add imaginary tokens to tag the beginning 
of stanzas and also remove extraneous DELIMs. Part of my difficulty in 
writing these parsers is many times people want them to work on csv-type 
files that have been mangled by excel. Excel likes to add enough 
delimiters at the end of every line so that all lines have an equal 
number of columns, this leads to lots of rules in my grammars that end 
in "(DELIM)* NEWLINE" which I understand can be inefficient and also 
lead to some nondeterminism difficulties. I am going to have my 
TokenFilter remove these. This will change my parser flow so the file 
goes through the lexer, goes through the filter parser, goes through my 
tree building parser, and then goes through the tree parser. Hopefully 
by simplifying the tree building parser this will be acceptably quick.

I plan to have a rule that matches a short line (the stanza 
headers/separators), one that matches a long line (actual data records) 
and one that matches 2 or more DELIMs in a row at the end of a line. The 
stanza header rule will add an imaginary token that marks the beginning 
of a stanza and the end of line rule will remove extraneous DELIMs. 
Hopefully this will work, the one problem I see is that having DELIM 
(DELIM)+ NEWLINE at the end of a line would lead to nondeterminisms for 
finite lookahead, so I will most likely need to make some sort of 
predicate system that matches all the possible types of lines (short 
with extra delims, short w/o extra delims, long with extra delims and 
long w/o extra delims).

I'll start work on this tomorrow so if anyone has any 
advice/input/pointers to examples/docs I'd appreciate it.

Thanks again!
Chris

Ric Klaren wrote:

> Chris Black wrote:
>
>> I decided perhaps paring down my query would make it a bit easier to 
>> read. Sorry for the initial long-winded post. My main problem is 
>> trying to detect a transition between lines of 3+ FIELDs long and one 
>> of less than 3 FIELDs. I have a token stream after the lexer has run 
>> like:
>
>
>> FIELD DELIM FIELD NEWLINE
>> FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE
>
> ...
>
>> FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE
>> FIELD DELIM FIELD NEWLINE
>> FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE
>
> ...
>
>> FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE
>>
>> My difficulty is detecting the transitions from a series of long 
>> lines to the short line separating the stanzas.
>> What seems to be happening is my rule to match a long line is trying 
>> to be applied to the short line since I am in a rule looking for any 
>> number of long lines. Why is this? To simplify, it seems like if I 
>> have a few rules like:
>>
>> multStanzas: (stanza)+
>> stanza: shortLine (longLine)+
>>
>> shortLine: FIELD DELIM FIELD DELIM FIELD NEWLINE
>> longLine: FIELD DELIM FIELD (DELIM FIELD)+ NEWLINE
>>
>> That it tries to match the whole file as one stanza. I thought that 
>> once the longLine match failed seeing a short line of less than three 
>> FIELDs that ANTLR would then try to match with a longLine rule. What 
>> am I missing or doing wrong?
>
>
> I guess that this might work it prevents entering the longLine rule if 
> there's a shortline on the input (without ridiculous k size):
>
> multStanzas: (stanza)+
> stanza: shortLine ( { if( LA(6) == NEWLINE ) break;  }: longLine)+
>
> Maybe also a check on EOF is necessary.
>
> I think a token filter approach might work as well. Put between the 
> lexer and parser a filter that inserts before every stanza a synthetic 
> token that marks the start of a line. Keep a reference to this start 
> marker. Then in the filter buffer up input to the first NEWLINE or EOF 
> whilst counting the number of fields so far. When you get to the 
> NEWLINE update the start marker's tokentype ($setType) to something 
> like SHORTLINE or LONGLINE. At that point you can pass the start 
> marker to the calling parser from the filter. And wait until the 
> calling parser has consumed the input the filter has read so far and 
> redo from start.
>
> Your actual parser would then see:
>
> shortline: SHORTLINE (FIELD DELIM)+ NEWLINE ;
> longline: LONGLINE (FIELD DELIM)+ NEWLINE ;
>
> My guess is that it would perform better than a syntactic predicate.
>
> Cheers,
>
> Ric


From lance at thinkingworks.com  Tue May 10 15:47:34 2005
From: lance at thinkingworks.com (Lance Gutteridge)
Date: Tue May 10 15:47:01 2005
Subject: [antlr-interest] Thanks
Message-ID: <6.1.2.0.2.20050510153454.025f07e0@pop3.thinkingworks.com>

This is not a question, just a thanks to Terence and all the others who 
work on ANTLR.

I was doing a project that needed a small language (well it was small when 
it started - isn't that the way).  I considered writing my own parser on 
the basis that the language was simple and I was on a deadline, and I 
didn't want to take the learning curve hit.  (I had used ANTLR some years 
earlier but I had forgotten most of that).

In any event I decided to go with ANTLR.  That certainly was the right 
decision.

I found all kinds of examples on various web sites and I was able to put my 
language together pretty quickly.  It has grown and grown.  I am so glad 
that I decided to go with a real parser instead of some cobbled together 
Java code that I was thinking of.  Making changes to the grammar has been 
so easy with ANTLR.

For example.  Just now I decided to add comments to the language.  I had 
ignored white space and I was thinking that adding comments might be 
difficult.  I found an example on a web site cut and pasted the lines into 
my grammar and lo and behold - single line comments.  So cool.

If I have a problem now its that adding constructs into the language is so 
easy that I'm in danger of adding too much stuff.

I'm like a lot of programmers in that I've always wanted to do my own 
language.  I'm working on the specific domain of accounting systems and I 
have always thought there was a need for a tool that actually addressed 
that specific domain in the right way.  So now I get to design my own 
language and ANTLR has saved me from the grunt work of doing all that 
parsing and let me concentrate on the specific constructs that I want.

Thanks Terence et al.

Lance


From chris at lotuscat.com  Wed May 11 11:06:50 2005
From: chris at lotuscat.com (Chris Black)
Date: Wed May 11 11:06:58 2005
Subject: [antlr-interest] Using a Parser as a TokenFilter
Message-ID: <428249BA.8020702@lotuscat.com>

I'm trying to accomplish some token filtering by following Monty's 
document http://www.codetransform.com/filterexample.html but am running 
into a few problems. This is related to the previous thread about 
detecting transitions in stanza-based files. Initially I thought the 
TokenStreamRewriteFilter would be a good base class, but it turns out 
that it doesn't implement TokenStream and is instead for spitting actual 
text back out.

The goal is to insert imaginary tokens to help the downline parser in 
some cases (when I see short lines) and remove some tokens in other 
cases. I thought this would be relatively easy but I think I'm missing 
something.

To start I'm just trying to do the killing of extra commas at the end of 
the line thing, I have something like what is at the end of this 
message. Not only does this give me a stack overflow error when it 
actually does encounter extra commas, but it also seems to cause an 
"unexpected token: null" error in the downline parser in other cases, 
even after adding an EOF at the end of the main rule. After 
building/running with -trace, I think this may have something to do with 
the lookahead being filled with nulls.

At this point I feel like I'm missing something fundamental because I've 
been trying to get this filter idea to work for hours. Does anyone have 
a working example or any pointers?

Chris

PS Sorry for the mess, I had tried to have a special endOfLine rule but 
I don't think that will work since there would be nondeterminism and no 
way to detect the transition from line body to the last three tokens 
that I know of. In regex I could anchor this to the end of the line. I 
looked at mark/rewind but haven't figured out the proper way to do this. 
But at this point that is the least of my problems :)

// filter to change lines like "foo,bar,baz,,,,,,,," into "foo,bar,baz,"
    public void consume() {
        try {
          if(LA(1) == DELIM && LA(2) == DELIM && LA(3) == DELIM) {
              //System.out.println("skipping extra commas");
              //System.out.flush();
              queue.append(LT(1)); consumeUntil(NEWLINE);
          } else {
              queue.append(LT(1));
          }
          super.consume();
        } catch(TokenStreamException e) {
            System.err.println("error in consume");
            System.err.println(e);
            e.printStackTrace();
        }
    }
   
    public Token nextToken() throws TokenStreamException {
        Token ret;
        if(queue.length() <= 0) {
            try {
                line();
            } catch(RecognitionException e) { ; }
            catch(TokenStreamException e) { ; }
        }
        if(queue.length() > 0) {
            ret = queue.elementAt(0);
            queue.removeFirst();
            return ret;
        }
        System.out.println("no more queue, returning EOF");
        return new Token(Token.EOF_TYPE,"");
    }
}

line:
    (NEWLINE) => emptyLine
    | ((FIELD | DELIM)+ NEWLINE) => contentLine
    ;

emptyLine: NEWLINE ;

contentLine: (FIELD | DELIM)+ NEWLINE ;
//contentLine: (FIELD | DELIM)+ endOfLine ;

endOfLine:
    (DELIM FIELD NEWLINE) => fieldNewlineEOL
    | (FIELD DELIM NEWLINE) => fieldDelimNewlineEOL
    | (DELIM DELIM NEWLINE) => extraDelimsEOL
    ;
   
fieldNewlineEOL: DELIM FIELD NEWLINE ;

fieldDelimNewlineEOL: FIELD DELIM NEWLINE ;

extraDelimsEOL: DELIM (DELIM!)+ NEWLINE ;
From kevin at bantamtech.com  Wed May 11 11:33:41 2005
From: kevin at bantamtech.com (Kevin Williams)
Date: Wed May 11 11:33:49 2005
Subject: [antlr-interest] yaml and antlr
Message-ID: <42825005.9080804@bantamtech.com>

Greetings all,

Has anyone ever implemented the yaml[1] spec using antlr? I would love 
to be able to use yaml in .NET. The spec seems rather daunting though, 
especially since I haven't used antlr for anything (yet). I made a quick 
attempt before realizing I have *a lot* to learn.

Cheers,

Kevin


[1] http://www.yaml.org/

----------
Scanned for viruses by ClamAV
From Jon.Rand at thomson.com  Wed May 11 12:28:18 2005
From: Jon.Rand at thomson.com (Jon.Rand@thomson.com)
Date: Wed May 11 12:28:15 2005
Subject: [antlr-interest] detecting transitions in stanza-based files
Message-ID: <C3A072E2F8962C4BBF413A00D9FBEFDC02C8F549@TSHUSMIANMSG07.ERF.THOMSON.COM>

Chris Black wrote:
>> Excel likes to add enough delimiters at the end of every 
>> line so that all lines have an equal number of columns, 
>> this leads to lots of rules in my grammars that end 
>> in "(DELIM)* NEWLINE" which I understand can be 
>> inefficient and also lead to some nondeterminism 
>> difficulties. I am going to have my TokenFilter remove 
>> these. 

Could you use a regular expression against the input string to remove
the extraneous delimiters before you pass the input to ANTLR?  Then you
wouldn't have to clutter your grammar with stuff that essentially does
exactly the same thing.  It's not a pure ANTLR solution, but it might
make your grammar a lot easier to deal with.

Jon

From chris at lotuscat.com  Wed May 11 12:33:55 2005
From: chris at lotuscat.com (Chris Black)
Date: Wed May 11 12:34:10 2005
Subject: [antlr-interest] detecting transitions in stanza-based files
In-Reply-To: <C3A072E2F8962C4BBF413A00D9FBEFDC02C8F549@TSHUSMIANMSG07.ERF.THOMSON.COM>
References: <C3A072E2F8962C4BBF413A00D9FBEFDC02C8F549@TSHUSMIANMSG07.ERF.THOMSON.COM>
Message-ID: <42825E23.5060001@lotuscat.com>

Jon.Rand@thomson.com wrote:

>Chris Black wrote:
>  
>
>>>Excel likes to add enough delimiters at the end of every 
>>>line so that all lines have an equal number of columns, 
>>>this leads to lots of rules in my grammars that end 
>>>in "(DELIM)* NEWLINE" which I understand can be 
>>>inefficient and also lead to some nondeterminism 
>>>difficulties. I am going to have my TokenFilter remove 
>>>these. 
>>>      
>>>
>
>Could you use a regular expression against the input string to remove
>the extraneous delimiters before you pass the input to ANTLR?  Then you
>wouldn't have to clutter your grammar with stuff that essentially does
>exactly the same thing.  It's not a pure ANTLR solution, but it might
>make your grammar a lot easier to deal with.
>
>Jon
>
>  
>
I'm getting to the point of doing that, but I had hoped to be able to 
make a token filter to do this. I'm also kind of trying to justify the 
use of antlr over regexps, and resorting to regexp to solve a problem 
that I can't fix in ANTLR doesn't help :)

Chris
From prashant.deva at gmail.com  Wed May 11 12:54:33 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed May 11 12:54:37 2005
Subject: [antlr-interest] Suggestion for antlr-interest mailing list
Message-ID: <41fed8f805051112541aedbf8c@mail.gmail.com>

Currently when you reply to a mail from the mailing list, the default
address in the mail is that of the author of the mail ,and not of the
list itself.

This has led me a lot of times in accidentally replying to only the
person itself, and not the mailing list, as i have forgotton to modify
the reply field to point to 'antlr-interest' instead of the address of
the person.

Thus i propose that the mailing list should have a reply-to field so
that by default all replies are sent to the mailing list and not the
person who mailed to the list.

mailing lists at netbeans.org implement the same functionality and
this way it is ensured that all replies go by default to the list
iteself and not the author.

PRASHANT
From rvjansen at xs4all.nl  Wed May 11 12:57:43 2005
From: rvjansen at xs4all.nl (=?ISO-8859-1?Q?Ren=E9_Jansen?=)
Date: Wed May 11 12:57:48 2005
Subject: [antlr-interest] Suggestion for antlr-interest mailing list
In-Reply-To: <41fed8f805051112541aedbf8c@mail.gmail.com>
References: <41fed8f805051112541aedbf8c@mail.gmail.com>
Message-ID: <2DE862E7-F352-4294-A304-109C89445D24@xs4all.nl>

Hi Prashant,

though I agree, it is different on different mailing lists; also, it  
is a semi-'religious' issue better not discussed.

Ren?.

On 11 mei 2005, at 21:54, Prashant Deva wrote:

> Currently when you reply to a mail from the mailing list, the default
> address in the mail is that of the author of the mail ,and not of the
> list itself.
>
> This has led me a lot of times in accidentally replying to only the
> person itself, and not the mailing list, as i have forgotton to modify
> the reply field to point to 'antlr-interest' instead of the address of
> the person.
>
> Thus i propose that the mailing list should have a reply-to field so
> that by default all replies are sent to the mailing list and not the
> person who mailed to the list.
>
> mailing lists at netbeans.org implement the same functionality and
> this way it is ensured that all replies go by default to the list
> iteself and not the author.
>
> PRASHANT
>
>
>

From johnm-antlr at non.net  Wed May 11 13:29:44 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Wed May 11 13:29:28 2005
Subject: [antlr-interest] Suggestion for antlr-interest mailing list
In-Reply-To: <41fed8f805051112541aedbf8c@mail.gmail.com>
References: <41fed8f805051112541aedbf8c@mail.gmail.com>
Message-ID: <17026.27448.183719.198807@despot.non.net>

Please see the archives of this mailing list for plenty of discussion of
why reply-to: munging is wrong, what you can do, etc.

Thanks,
	John
From Loring.G.Craymer at jpl.nasa.gov  Wed May 11 13:44:49 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Wed May 11 13:49:51 2005
Subject: [antlr-interest] yaml and antlr
In-Reply-To: <42825005.9080804@bantamtech.com>
References: <42825005.9080804@bantamtech.com>
Message-ID: <6.2.1.2.2.20050511133432.02a39300@mail.jpl.nasa.gov>

There's some interesting work at
http://homepages.ihug.com.au/~zenaan/zenaan/files/
including an approach to generate an ANTLR grammar from the yaml spec.

--Loring


At 11:33 AM 5/11/2005, Kevin Williams wrote:
>Greetings all,
>
>Has anyone ever implemented the yaml[1] spec using antlr? I would love to 
>be able to use yaml in .NET. The spec seems rather daunting though, 
>especially since I haven't used antlr for anything (yet). I made a quick 
>attempt before realizing I have *a lot* to learn.
>
>Cheers,
>
>Kevin
>
>
>[1] http://www.yaml.org/
>
>----------
>Scanned for viruses by ClamAV


From gt54-antlr at cyconix.com  Wed May 11 14:31:43 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Wed May 11 14:31:49 2005
Subject: [antlr-interest] Suggestion for antlr-interest mailing list
In-Reply-To: <41fed8f805051112541aedbf8c@mail.gmail.com>
References: <41fed8f805051112541aedbf8c@mail.gmail.com>
Message-ID: <428279BF.70303@cyconix.com>

Prashant Deva wrote:
> Currently when you reply to a mail from the mailing list, the default
> address in the mail is that of the author of the mail ,and not of the
> list itself.
> 
> This has led me a lot of times in accidentally replying to only the
> person itself, and not the mailing list, as i have forgotton to modify
> the reply field to point to 'antlr-interest' instead of the address of
> the person.
> 
> Thus i propose that the mailing list should have a reply-to field so
> that by default all replies are sent to the mailing list and not the
> person who mailed to the list.

I agree. However, when you set up a Mailman mailing list, you (the list 
administrator) are 'strongly encouraged' to set the Reply-To field to 
the poster, not the list, and this is the default. The justification is 
given in <http://www.unicom.com/pw/reply-to-harmful.html>. FWIW, I think 
the article is nonsense.

From chris at lotuscat.com  Wed May 11 14:46:02 2005
From: chris at lotuscat.com (Chris Black)
Date: Wed May 11 14:46:13 2005
Subject: [antlr-interest] SUCCESS! (mostly) detecting transitions in
	stanza-based files
In-Reply-To: <42813199.9010402@lotuscat.com>
References: <20050509201853.70759.qmail@web31414.mail.mud.yahoo.com>	<4280B9BE.10905@lotuscat.com>
	<42810CF9.7080807@gmail.com> <42813199.9010402@lotuscat.com>
Message-ID: <42827D1A.5050803@lotuscat.com>

First of all, thanks to everyone on the list who read my message, 
especially those who replied :)
The main issue I was having was that with a bunch of extra commas added 
at the end of lines by excel as well as the lack of a newline between 
stanzas, I was having trouble detecting the transitions between stanzas. 
After much reading and fiddling around, I now have a preliminary 
TokenFilter that ONLY looks to analyze these transitions, and when it 
finds one it adds an imaginary token. This approach was proposed by Ric 
it worked out quite well and did not seem to slow things down too much. 
I followed Monty's article 
http://www.codetransform.com/filterexample.html. I had to create my own 
TokenQueue to avoid modifying core antlr classes. It would be nice if 
the ANTLR distribution's TokenQueue was public and had a length method 
to facilitate this sort of filtering for others.

Now to my remaining (small) issue :)  For some reason when my 
parser/treeparser take input from the filtered TokenStream, I get a 
spurrious message to stderr:
line n:1: unexpected token: null

I've looked this up and googled around, but none of the fixes suggested 
get rid of this. I've added token matches for EOF as well as changing my 
filter to put out an extra NEWLINE rather than an EOF. I've noticed that 
I don't ever get the println I added to the return EOF condition in 
nextToken(). Any ideas?

Thanks again everyone,
Chris

For those who are curious, here is my token filter and the glue that 
makes it usable:
header {
    package mypackage;
    import antlr.*;
}

class StanzaParser extends Parser;
options {
    importVocab=CSV;
    k=2;
}

tokens {
    STANZASEPARATOR;
}

{
    MyTokenQueue queue = new MyTokenQueue(8);
   
    public void consume() {
        try {
            queue.append(LT(1));
        } catch(TokenStreamException e) {
            System.err.println("error in consume");
            System.err.println(e);
            e.printStackTrace();
        }
      super.consume();
    }
   
    public Token nextToken() throws TokenStreamException {
        Token ret;
        if(queue.length() <= 0) {
            try {
                line();
            } catch(RecognitionException e) { ; }
            catch(TokenStreamException e) { ; }
        }
        if(queue.length() > 0) {
            ret = queue.elementAt(0);
            queue.removeFirst();
            return ret;
        }
        System.out.println("no more queue, returning EOF");
        return new Token(Token.EOF_TYPE,"end of file");
    }
}

line:
    (NEWLINE) => emptyLine
    | ((FIELD | DELIM)+ NEWLINE) => contentLine
    | (DELIM (FIELD | DELIM)+ NEWLINE) => delim1stLine
    ;

emptyLine: NEWLINE ;

delim1stLine: DELIM (FIELD | DELIM)+ NEWLINE ;

contentLine: firstTok:FIELD
    {
        String firstText = firstTok.getText();
        if(firstText.startsWith("Data Type") || 
firstText.startsWith("DataType")
            || firstText.equals("Count") || firstText.equals("Result")) {
            queue.append(new Token(STANZASEPARATOR,"stanza sep"));
        }
    }
    (FIELD | DELIM)* NEWLINE
    ;

--- and here is the glue ---
package mypackage;

import antlr.*;

/**
 * A filtering TokenStream that adds special markers at stanza separations
 * to make downstream parsing much easier
 */
public class StanzaMarker implements TokenStream {
  StanzaParser filter;
 
  public StanzaMarker(TokenStream input) {
    filter = new StanzaParser(input);
  }
 
  public Token nextToken() throws TokenStreamException {
    Token tok = filter.nextToken();
    return tok;
  }
}

Chris Black wrote:

> Thanks for all your help everyone, I think I'm going to do a 
> combination approach using a TokenFilter (perhaps extending the newer 
> TokenStreamRewriteEngine) to add imaginary tokens to tag the beginning 
> of stanzas and also remove extraneous DELIMs. Part of my difficulty in 
> writing these parsers is many times people want them to work on 
> csv-type files that have been mangled by excel. Excel likes to add 
> enough delimiters at the end of every line so that all lines have an 
> equal number of columns, this leads to lots of rules in my grammars 
> that end in "(DELIM)* NEWLINE" which I understand can be inefficient 
> and also lead to some nondeterminism difficulties. I am going to have 
> my TokenFilter remove these. This will change my parser flow so the 
> file goes through the lexer, goes through the filter parser, goes 
> through my tree building parser, and then goes through the tree 
> parser. Hopefully by simplifying the tree building parser this will be 
> acceptably quick.
>
> I plan to have a rule that matches a short line (the stanza 
> headers/separators), one that matches a long line (actual data 
> records) and one that matches 2 or more DELIMs in a row at the end of 
> a line. The stanza header rule will add an imaginary token that marks 
> the beginning of a stanza and the end of line rule will remove 
> extraneous DELIMs. Hopefully this will work, the one problem I see is 
> that having DELIM (DELIM)+ NEWLINE at the end of a line would lead to 
> nondeterminisms for finite lookahead, so I will most likely need to 
> make some sort of predicate system that matches all the possible types 
> of lines (short with extra delims, short w/o extra delims, long with 
> extra delims and long w/o extra delims).
>
> I'll start work on this tomorrow so if anyone has any 
> advice/input/pointers to examples/docs I'd appreciate it.
>
> Thanks again!
> Chris
>
> Ric Klaren wrote:
>
>> Chris Black wrote:
>>
>>> I decided perhaps paring down my query would make it a bit easier to 
>>> read. Sorry for the initial long-winded post. My main problem is 
>>> trying to detect a transition between lines of 3+ FIELDs long and 
>>> one of less than 3 FIELDs. I have a token stream after the lexer has 
>>> run like:
>>
>>
>>
>>> FIELD DELIM FIELD NEWLINE
>>> FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE
>>
>>
>> ...
>>
>>> FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE
>>> FIELD DELIM FIELD NEWLINE
>>> FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE
>>
>>
>> ...
>>
>>> FIELD DELIM FIELD DELIM FIELD DELIM FIELD DELIM NEWLINE
>>>
>>> My difficulty is detecting the transitions from a series of long 
>>> lines to the short line separating the stanzas.
>>> What seems to be happening is my rule to match a long line is trying 
>>> to be applied to the short line since I am in a rule looking for any 
>>> number of long lines. Why is this? To simplify, it seems like if I 
>>> have a few rules like:
>>>
>>> multStanzas: (stanza)+
>>> stanza: shortLine (longLine)+
>>>
>>> shortLine: FIELD DELIM FIELD DELIM FIELD NEWLINE
>>> longLine: FIELD DELIM FIELD (DELIM FIELD)+ NEWLINE
>>>
>>> That it tries to match the whole file as one stanza. I thought that 
>>> once the longLine match failed seeing a short line of less than 
>>> three FIELDs that ANTLR would then try to match with a longLine 
>>> rule. What am I missing or doing wrong?
>>
>>
>>
>> I guess that this might work it prevents entering the longLine rule 
>> if there's a shortline on the input (without ridiculous k size):
>>
>> multStanzas: (stanza)+
>> stanza: shortLine ( { if( LA(6) == NEWLINE ) break;  }: longLine)+
>>
>> Maybe also a check on EOF is necessary.
>>
>> I think a token filter approach might work as well. Put between the 
>> lexer and parser a filter that inserts before every stanza a 
>> synthetic token that marks the start of a line. Keep a reference to 
>> this start marker. Then in the filter buffer up input to the first 
>> NEWLINE or EOF whilst counting the number of fields so far. When you 
>> get to the NEWLINE update the start marker's tokentype ($setType) to 
>> something like SHORTLINE or LONGLINE. At that point you can pass the 
>> start marker to the calling parser from the filter. And wait until 
>> the calling parser has consumed the input the filter has read so far 
>> and redo from start.
>>
>> Your actual parser would then see:
>>
>> shortline: SHORTLINE (FIELD DELIM)+ NEWLINE ;
>> longline: LONGLINE (FIELD DELIM)+ NEWLINE ;
>>
>> My guess is that it would perform better than a syntactic predicate.
>>
>> Cheers,
>>
>> Ric
>
>
>

From rdclark at nextquestion.net  Tue May 10 09:14:43 2005
From: rdclark at nextquestion.net (Richard Clark)
Date: Wed May 11 15:04:19 2005
Subject: [antlr-interest] detecting transitions in stanza-based files
In-Reply-To: <4280CE8A.3020602@lotuscat.com>
References: <20050509201853.70759.qmail@web31414.mail.mud.yahoo.com>	<4280B9BE.10905@lotuscat.com>
	<dd3a065f050510075736af0ccc@mail.gmail.com>
	<4280CE8A.3020602@lotuscat.com>
Message-ID: <1B60032B-6559-48C8-A2CE-48791886F8CD@nextquestion.net>

I've had better luck by keeping the ANTLR side simple and using a bit  
of Java code. Something like this (which is off the top of my head):

tokens
     { LONG_LINE; SHORT_LINE; }

stanza
     :    STANZA
         {  // Classify this according to length
             AST probe = #stanza;
             int length = 0;
             while (probe != null) {
                 probe = probe.getNextSibling();
                 length++;
             }
             if (length > 3)
                 #stanza = (#[LONG_LINE, "long"], #stanza);
             else
                 #stanza = (#[SHORT_LINE, "short"], #stanza);
       }
     ;

STANZA
     :    (FIELD DELIM)+ NEWLINE
     ;

I'd normally run a tree walker next, which is why stanza is emitting  
tokens at the end. You could choose to do that, or replace the  
"#stanza = ..." code with actual action to take.

If you do run a tree walker next, you could hoist the logic up into  
there, letting it count the list elements and make the appropriate  
decision.

  ...Richard


On May 10, 2005, at 8:08, Chris Black wrote:

> Bryan Ewbank wrote:
>
>
>> The core problem is that shortLine and longLine have the same
>> left-match.  If this is true, it's perhaps best to simply /parse/
>> everything (assume longLine?), then use a tree walker to break out
>> stanzas using a semantic predicate.
>>
>>
> shortLine and longLine do have the same left-match, but I thought a  
> sufficient value for the k lookahead would take care of that. I  
> don't understand why it doesn't. My current structure is a lexer  
> that just generates FIELDs, DELIMs and NEWLINEs, a parser that  
> looks at this token stream to generate an AST with the stanzas  
> separated out using marker tokens and such, and then a tree parser  
> that goes through this tree fetching out FIELDs and arranging them  
> into a data structure. Is this a fundamentally incorrect approach?  
> Since my lexer and tree parser already work (and still work fine on  
> many input files), I was hoping to do the fix in parser space,  
> perhaps using syntactic predicates.
> I've never done syntactic or semantic predicates and am reading up  
> on them now. Shouldn't there be a way to handle the longLine/ 
> shortLine with syntactic predicates such as:
> line: FIELD DELIM FIELD DELIM FIELD NEWLINE => shortLine
>     | FIELD DELIM FIELD DELIM FIELD DELIM FIELD => longLine
>
> With a sufficient lookahead? Would this work?
>
> Thanks again,
> Chris
>
>
>> On 5/10/05, Chris Black <chris@lotuscat.com> wrote:
>>
>>
>>> multStanzas: (stanza)+
>>> stanza: shortLine (longLine)+
>>>
>>> shortLine: FIELD DELIM FIELD DELIM FIELD NEWLINE
>>> longLine: FIELD DELIM FIELD (DELIM FIELD)+ NEWLINE
>>>
>>>
>
>

From tblumenfeld at rapidtrials.com  Tue May 10 09:54:45 2005
From: tblumenfeld at rapidtrials.com (Tracy Blumenfeld)
Date: Wed May 11 15:04:26 2005
Subject: [antlr-interest] Ignore Whitespace
Message-ID: <E7B4287B39E49A47AE21DE021315D55008463A@RAPID01.rapidtrials.local>



Tracy Blumenfeld
President & CEO 
RapidTrials
1008 Upper Gulph Rd
Wayne, PA 19087
P: 610-989-0660
F: 610-989-0599
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Tracy Blumenfeld.vcf
Type: text/x-vcard
Size: 149 bytes
Desc: Tracy Blumenfeld.vcf
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050510/df2b7f4c/TracyBlumenfeld.vcf
From ewbank at gmail.com  Wed May 11 15:34:37 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Wed May 11 15:34:40 2005
Subject: [antlr-interest] detecting transitions in stanza-based files
In-Reply-To: <1B60032B-6559-48C8-A2CE-48791886F8CD@nextquestion.net>
References: <20050509201853.70759.qmail@web31414.mail.mud.yahoo.com>
	<4280B9BE.10905@lotuscat.com>
	<dd3a065f050510075736af0ccc@mail.gmail.com>
	<4280CE8A.3020602@lotuscat.com>
	<1B60032B-6559-48C8-A2CE-48791886F8CD@nextquestion.net>
Message-ID: <dd3a065f05051115345a408d82@mail.gmail.com>

Richard,

That's really rather elegant.  I have to remember that idiom.

On 5/10/05, Richard Clark <rdclark@nextquestion.net> wrote:
> stanza
>      :    STANZA
>          {  // Classify this according to length
>              AST probe = #stanza;
>              int length = 0;
>              while (probe != null) {
>                  probe = probe.getNextSibling();
>                  length++;
>              }
>              if (length > 3)
>                  #stanza = (#[LONG_LINE, "long"], #stanza);
>              else
>                  #stanza = (#[SHORT_LINE, "short"], #stanza);
>        }
>      ;
From k.allan-antlr at au.darkbluesea.com  Wed May 11 23:46:32 2005
From: k.allan-antlr at au.darkbluesea.com (Ken Allan)
Date: Wed May 11 23:46:42 2005
Subject: [antlr-interest] Examples of using treeparsers to reduce a ruleset
Message-ID: <4282FBC8.2050102@au.darkbluesea.com>

Hi,

I was just wondering if there were any websites that you guys could 
point me to with respect to using treeparser code to reduce (optimize) 
an AST.

I currently have grammer to produce from input:
"a b c d ( e f ) g OR h (NOT i NOT j) AND k OR l"

AST trees of the form:
( AND a b c d ( AND e f ) ( OR g h ) ( OR ( AND ( AND ( NOT i ) ( NOT j 
) ) k ) l ) )

I would like to reduce this to:
( AND a b c d e f ( OR g h ) ( OR k ( AND l ( NOT ( OR i j ) )

The essential steps I wish to take are:
   flatten nested ANDs
   flatten nested ORs
   move ORs within ANDs  as far right as possible
   move ANDs within ORs as far right as possible
   move NOTs within ANDs and ORs as far right as  possible
   convert multiple sequential NOTs in an AND tree into a single NOT of 
the OR of the subnodes
   convert multiple sequential NOTs in an OR tree into a single NOT of 
the AND of the subnodes

eg for the last 2:

( AND ( NOT a ) ( NOT b ) )  => ( NOT ( OR a b ) )
( OR ( NOT a ) ( NOT b ) )  => ( NOT ( AND a b ) )

I realize what I am trying to do is very complicated and understand that 
I may have to do it by hand, but I was wondering if it can be done 
nevertheless...

Thanks!

From ric.klaren at gmail.com  Thu May 12 01:17:34 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Thu May 12 01:17:37 2005
Subject: [antlr-interest] Using a Parser as a TokenFilter
In-Reply-To: <428249BA.8020702@lotuscat.com>
References: <428249BA.8020702@lotuscat.com>
Message-ID: <bc607a4e05051201175140b5e1@mail.gmail.com>

Hi,

On 5/11/05, Chris Black <chris@lotuscat.com> wrote:
> To start I'm just trying to do the killing of extra commas at the end of
> the line thing, I have something like what is at the end of this
> message. Not only does this give me a stack overflow error when it
> actually does encounter extra commas, but it also seems to cause an
> "unexpected token: null" error in the downline parser in other cases,
> even after adding an EOF at the end of the main rule. After
> building/running with -trace, I think this may have something to do with
> the lookahead being filled with nulls.

> // filter to change lines like "foo,bar,baz,,,,,,,," into "foo,bar,baz,"
>     public void consume() {
>         try {
>           if(LA(1) == DELIM && LA(2) == DELIM && LA(3) == DELIM) {
>               //System.out.println("skipping extra commas");
>               //System.out.flush();
>               queue.append(LT(1)); consumeUntil(NEWLINE);
>           } else {
>               queue.append(LT(1));
>           }
>           super.consume();
>         } catch(TokenStreamException e) {
>             System.err.println("error in consume");
>             System.err.println(e);
>             e.printStackTrace();
>         }
>     }

>     public Token nextToken() throws TokenStreamException {
>         Token ret;
>         if(queue.length() <= 0) {
>             try {
>                 line();
>             } catch(RecognitionException e) { ; }
>             catch(TokenStreamException e) { ; }
>         }
>         if(queue.length() > 0) {
>             ret = queue.elementAt(0);
>             queue.removeFirst();
>             return ret;
>         }
>         System.out.println("no more queue, returning EOF");
>         return new Token(Token.EOF_TYPE,"");
>     }
> }

Make sure that you get some input or a definite EOF situation when you
call line. You might have to put a while on the queue.lenght() <= 0 in
stead of an if. (depends on the implementation of the line rule)

> line:
>     (NEWLINE) => emptyLine
>     | ((FIELD | DELIM)+ NEWLINE) => contentLine
>     ;

I'd get rid of these predicates. They serve no purpose. My rule of
thumb: when you got a rule with every alternative guarded with a
syntactic predicate then you're probably doing something wrong (you
get rules that might not consume input and that's usually good for
strange stuff).

The lookahead you're looking at is not ambiguous and in the case of
erroneous input the rule might not consume anything. Also you're not
handling EOF... e.g. in case of EOF you'll get an RecognitionException
that gets eaten by nextToken (silently as well) (try adding a few
println's to the bits that eat exceptions, for a filter I wrote a
while back some of them needed extra handling).

The following rule is a lot simpler. Try to differentiate between the
things you want with some attributes in this filter (e.g. when you
call the line rule from nextToken set an attribute that you started a
line and reset a counter for the fields then update the counter in the
closure below. You might also want to set a flag in the (NEWLINE|EOF)
bit. So you can detect better how the line rule ended (and when the
next line will start!). I also miss the code that inserts the marker
at the start of the line.

line:
    (FIELD | DELIM)* ( NEWLINE | EOF )
    ;

Or something like:

line:
|  FIELD (DELIM FIELD)* (DELIM)* eol
|  (DELIM)* eol
;

eol:( NEWLINE | EOF );

Also first get things to work with the marking of the stanza's then
add the comma eating. When a filter starts eating input it might eat
all the input and that takes some extra handling if I recall right.
It's probably a good idea to let the line rule finish in nextToken
then check the tail of the queue for trailing comma's and nuke them
from the queue.

Tip: Read the code generated for the line rule and get a feel for how
it interacts with your consume & nextToken method. In this case it is
also feasible to handcode the filter since it's not that complex
parsing wise.

I'm afraid I might not be too coherent/clear in this post but there
should be some tips in it that might get you going again. I'll look
again at it when I'm at home again.

Cheers,

Ric
From serafettin_sentuerk at intergral.com  Thu May 12 06:12:08 2005
From: serafettin_sentuerk at intergral.com (Serafettin Senturk)
Date: Thu May 12 06:12:17 2005
Subject: [antlr-interest] Tree parser samples
Message-ID: <ANEFKENHALPOILMBNJFGCEJKCAAA.serafettin_sentuerk@intergral.com>


 Hi,

 I read almost all the documentations about tree parsers and reference
manual of Antlr for tree parsers. Now I want to use it practically. For that
reason, can anybody send a couple of sample files that contain tree
parser(walker) grammar. In the documents i cannot find that much practical
usage of tree walkers.

 Thanks in advance
  Serafettin




From chris at lotuscat.com  Thu May 12 06:22:40 2005
From: chris at lotuscat.com (Chris Black)
Date: Thu May 12 06:22:49 2005
Subject: [antlr-interest] Tree parser samples
In-Reply-To: <ANEFKENHALPOILMBNJFGCEJKCAAA.serafettin_sentuerk@intergral.com>
References: <ANEFKENHALPOILMBNJFGCEJKCAAA.serafettin_sentuerk@intergral.com>
Message-ID: <428358A0.4060209@lotuscat.com>

Serafettin Senturk wrote:

> Hi,
>
> I read almost all the documentations about tree parsers and reference
>manual of Antlr for tree parsers. Now I want to use it practically. For that
>reason, can anybody send a couple of sample files that contain tree
>parser(walker) grammar. In the documents i cannot find that much practical
>usage of tree walkers.
>
> Thanks in advance
>  Serafettin
>  
>
In addition to the manual, there are fully working examples in an 
examples directory if you download the full source tarball of antlr. 
examples/java/treewalk/treewalk.g, transform and imagNodeAST might be 
good starting points.

Chris
From desiree.kraus at gmx.de  Thu May 12 06:44:44 2005
From: desiree.kraus at gmx.de (Desiree Kraus)
Date: Thu May 12 06:44:48 2005
Subject: [antlr-interest] ANTLR C++ Parser
Message-ID: <29039.1115905484@www34.gmx.net>

Hello,

I'm working on my master thesis in computer science at the moment. I have a
tool that can read C and do some optimazations and other stuff with it. My
job is it now to expand this tool, so that it can cope with C++ (or at least
a subset of C++). 

A part of it, is a parser of course. The Parser the tool uses right now is
lex/yacc based and generates C++ output. I tried expanding this parser so
that it can read C++, but I didn't really cope with that (after some
googling on the net, I guess I'm not the only one having this problem).

Now I've found ANTLR and wonder if I could use it for my purposes. But I'm
not quite sure if what I'm thinking about would work. "My" tool is C++ based
and as I've read, ANTLR is Java-based. At the moment, I don't really know
how to put that together, because I need a parser that can work with and
instatiate my C++-classes I have built. Is something like this possible?

I have found an C++ grammar on the ANTLR website. Does anyone of you know,
if this grammar works and if it can parse all C++-Features? If there are
features, that aren't supported, which ones are that?

I hope someone can give me a hint.

Bye,
Desiree

-- 
+++ Lassen Sie Ihren Gedanken freien Lauf... z.B. per FreeSMS +++
GMX bietet bis zu 100 FreeSMS/Monat: http://www.gmx.net/de/go/mail
From chris at lotuscat.com  Thu May 12 07:52:46 2005
From: chris at lotuscat.com (Chris Black)
Date: Thu May 12 07:52:58 2005
Subject: [antlr-interest] Using a Parser as a TokenFilter
In-Reply-To: <bc607a4e05051201175140b5e1@mail.gmail.com>
References: <428249BA.8020702@lotuscat.com>
	<bc607a4e05051201175140b5e1@mail.gmail.com>
Message-ID: <42836DBE.9000604@lotuscat.com>

Ric Klaren wrote:

>Hi,
>
>On 5/11/05, Chris Black <chris@lotuscat.com> wrote:
>  
>
> [stuff deleted]
>
>>line:
>>    (NEWLINE) => emptyLine
>>    | ((FIELD | DELIM)+ NEWLINE) => contentLine
>>    ;
>>    
>>
>
>I'd get rid of these predicates. They serve no purpose. My rule of
>thumb: when you got a rule with every alternative guarded with a
>syntactic predicate then you're probably doing something wrong (you
>get rules that might not consume input and that's usually good for
>strange stuff).
>
>  
>
Good point. I have changed it to just use | alternatives.

>The lookahead you're looking at is not ambiguous and in the case of
>erroneous input the rule might not consume anything. Also you're not
>handling EOF... e.g. in case of EOF you'll get an RecognitionException
>that gets eaten by nextToken (silently as well) (try adding a few
>println's to the bits that eat exceptions, for a filter I wrote a
>while back some of them needed extra handling).
>
>  
>
Added some printlns in nextToken exception handlers, never printed 
anything. probably not a bad idea to have them in there though.

>The following rule is a lot simpler. Try to differentiate between the
>things you want with some attributes in this filter (e.g. when you
>call the line rule from nextToken set an attribute that you started a
>line and reset a counter for the fields then update the counter in the
>closure below. You might also want to set a flag in the (NEWLINE|EOF)
>bit. So you can detect better how the line rule ended (and when the
>next line will start!). I also miss the code that inserts the marker
>at the start of the line.
>
>line:
>    (FIELD | DELIM)* ( NEWLINE | EOF )
>    ;
>
>Or something like:
>
>line:
>|  FIELD (DELIM FIELD)* (DELIM)* eol
>|  (DELIM)* eol
>;
>
>eol:( NEWLINE | EOF );
>
>  
>
I switched to having the eol rule, this actually turned out to stop the 
spurrious unexpected null token errors I was seeing from the downline 
parser as well.

>Also first get things to work with the marking of the stanza's then
>add the comma eating. When a filter starts eating input it might eat
>all the input and that takes some extra handling if I recall right.
>It's probably a good idea to let the line rule finish in nextToken
>then check the tail of the queue for trailing comma's and nuke them
>from the queue.
>
>  
>
Probably a better approach, before getting your reply I gave up on the 
trailing DELIM eating for a bit and switched focus to adding imaginary 
tokens. This solved my downline problems on its own. I may do further 
work to kill the trailing delims to clean up the downstream parser 
anyway in the future.

>Tip: Read the code generated for the line rule and get a feel for how
>it interacts with your consume & nextToken method. In this case it is
>also feasible to handcode the filter since it's not that complex
>parsing wise.
>
>I'm afraid I might not be too coherent/clear in this post but there
>should be some tips in it that might get you going again. I'll look
>again at it when I'm at home again.
>
>Cheers,
>
>Ric
>  
>
I appreciate all the help! For the curious, here is what I have now:
header {
    package mypackage;
    import antlr.*;
}

class StanzaParser extends Parser;
options {
    importVocab=CSV;
    k=2;
}

tokens {
    STANZASEPARATOR;
}

{
    MyTokenQueue queue = new MyTokenQueue(8);
   
    public void consume() {
        try {
            queue.append(LT(1));
        } catch(TokenStreamException e) {
            System.err.println("error in consume");
            System.err.println(e);
            e.printStackTrace();
        }
      super.consume();
    }
   
    public Token nextToken() throws TokenStreamException {
        Token ret;
        if(queue.length() <= 0) {
            try {
                line();
            } catch(RecognitionException e) {
                System.err.println("recog exception in nextToken");
                System.err.println(e);
                e.printStackTrace();
            }
            catch(TokenStreamException e) {
                System.err.println("tokenstream exception in nextToken");
                System.err.println(e);
                e.printStackTrace();
            }
        }
        if(queue.length() > 0) {
            ret = queue.elementAt(0);
            queue.removeFirst();
            return ret;
        }
        System.out.println("no more queue, returning EOF");
        return new Token(Token.EOF_TYPE,"end of file");
    }
}

line: (emptyLine | contentLine | delim1stLine) ;

emptyLine: eol ;

delim1stLine: DELIM (FIELD | DELIM)+ eol ;

contentLine: firstTok:FIELD
    {
        String firstText = firstTok.getText();
        if(firstText.startsWith("Data Type") || 
firstText.startsWith("DataType")
            || firstText.equals("Count") || firstText.equals("Result")) {
            queue.append(new Token(STANZASEPARATOR,"stanza sep"));
        }
    }
    (FIELD | DELIM)* eol
    ;
   
eol: (NEWLINE | EOF) ;
From chris at lotuscat.com  Thu May 12 08:02:45 2005
From: chris at lotuscat.com (Chris Black)
Date: Thu May 12 08:02:52 2005
Subject: [antlr-interest] SUCCESS! (mostly) detecting transitions in
	stanza-based files
In-Reply-To: <42827D1A.5050803@lotuscat.com>
References: <20050509201853.70759.qmail@web31414.mail.mud.yahoo.com>	<4280B9BE.10905@lotuscat.com>
	<42810CF9.7080807@gmail.com> <42813199.9010402@lotuscat.com>
	<42827D1A.5050803@lotuscat.com>
Message-ID: <42837015.8040105@lotuscat.com>

Just a follow up to let everyone know I've resolved the unexpected 
token: null problem. Ric noted that I wasn't handling/matching EOFs in 
my token filter (StanzaParser). I changed to using an eol rule and the 
spurrious errors from the downline parser went away. I am still not 
getting any prints from the catchall rule where I return a self-built 
EOF token, but I think this is because the downstream parser must stop 
as soon as a nextToken call gives and EOF (which came from a matching 
rule). I also did a bit of cleaning up and extra prints. I'd like to 
restate my call for a usable TokenQueue in the default ANTLR package 
since I've found this token filtering approach to be quite helpful. See 
http://www.codetransform.com/filterexample.html for Monty's article that 
I based my filter on.

Thanks again to all!
Chris

Here is what I have now:
header {
   package mypackage;
   import antlr.*;
}

class StanzaParser extends Parser;
options {
   importVocab=CSV;
   k=2;
}

tokens {
   STANZASEPARATOR;
}

{
   MyTokenQueue queue = new MyTokenQueue(8);
     public void consume() {
       try {
           queue.append(LT(1));
       } catch(TokenStreamException e) {
           System.err.println("error in consume");
           System.err.println(e);
           e.printStackTrace();
       }
     super.consume();
   }
     public Token nextToken() throws TokenStreamException {
       Token ret;
       if(queue.length() <= 0) {
           try {
               line();
           } catch(RecognitionException e) {
               System.err.println("recog exception in nextToken");
               System.err.println(e);
               e.printStackTrace();
           }
           catch(TokenStreamException e) {
               System.err.println("tokenstream exception in nextToken");
               System.err.println(e);
               e.printStackTrace();
           }
       }
       if(queue.length() > 0) {
           ret = queue.elementAt(0);
           queue.removeFirst();
           return ret;
       }
       System.out.println("no more queue, returning EOF");
       return new Token(Token.EOF_TYPE,"end of file");
   }
}

line: (emptyLine | contentLine | delim1stLine) ;

emptyLine: eol ;

delim1stLine: DELIM (FIELD | DELIM)+ eol ;

contentLine: firstTok:FIELD
   {
       String firstText = firstTok.getText();
       if(firstText.startsWith("Data Type") || 
firstText.startsWith("DataType")
           || firstText.equals("Count") || firstText.equals("Result")) {
           queue.append(new Token(STANZASEPARATOR,"stanza sep"));
       }
   }
   (FIELD | DELIM)* eol
   ;
  eol: (NEWLINE | EOF) ;
From wiggjd at lsbu.ac.uk  Thu May 12 09:52:03 2005
From: wiggjd at lsbu.ac.uk (David Wigg)
Date: Thu May 12 09:52:08 2005
Subject: [antlr-interest] Re: ANTLR C++ Parser
Message-ID: <60204.81.86.227.116.1115916723.squirrel@webmail.lsbu.ac.uk>

Hello Desiree,

As the latest author of CPP_parser.g I think I can say that it
parses most of C++.

Our version does produce a parser written in C++.

Not being a genius, I think ANTLR is much easier to understand
than Lex/Yacc (top-down instead of bottom-up) but if you are
familiar with Yacc then I think you will some unlearning to
do.

If you are still interested in this version then I suggest you
try compiling and running it with our test data to get a feel
for how ANTLR works.

If you are then still interested please let me know as I am
working on an updated version which I hope will be ready in
the summer.

Best of luck,

David.

Message: 7
Date: Thu, 12 May 2005 15:44:44 +0200 (MEST)
From: "Desiree Kraus" <desiree.kraus@gmx.de>
Subject: [antlr-interest] ANTLR C++ Parser
To: antlr-interest@antlr.org
Message-ID: <29039.1115905484@www34.gmx.net>
Content-Type: text/plain; charset="us-ascii"

Hello,

I'm working on my master thesis in computer science at the
moment. I have a tool that can read C and do some
optimazations and other stuff with it. My job is it now to
expand this tool, so that it can cope with C++ (or at least a
subset of C++).

A part of it, is a parser of course. The Parser the tool uses
right now is lex/yacc based and generates C++ output. I tried
expanding this parser so that it can read C++, but I didn't
really cope with that (after some googling on the net, I guess
I'm not the only one having this problem).

Now I've found ANTLR and wonder if I could use it for my
purposes. But I'm not quite sure if what I'm thinking about
would work. "My" tool is C++ based and as I've read, ANTLR is
Java-based. At the moment, I don't really know how to put that
together, because I need a parser that can work with and
instatiate my C++-classes I have built. Is something like this
possible?

I have found an C++ grammar on the ANTLR website. Does anyone
of you know, if this grammar works and if it can parse all
C++-Features? If there are features, that aren't supported,
which ones are that?

I hope someone can give me a hint.

Bye,
Desiree

-- 
+++ Lassen Sie Ihren Gedanken freien Lauf... z.B. per FreeSMS
+++
GMX bietet bis zu 100 FreeSMS/Monat:
http://www.gmx.net/de/go/mail


------------------------------



From quagly at mitzit.net  Thu May 12 16:13:28 2005
From: quagly at mitzit.net (Michael West)
Date: Thu May 12 16:13:37 2005
Subject: [antlr-interest] how to print tokens?
Message-ID: <20050512231328.GA3338@quag>

I have a thousand sql select statements and need to report on the tables
and
views they refer to.  Can antlr help me with this?  Should antlr help me
with this?

Almost all of the sql is sqlserver2000.  The grammer at:
http://www.antlr.org/grammar/1062280680642/MS_SQL_SELECT.html

seems to parse fine, and I can have it print out matches to simple leaf
rules using element labels.  Can I do it with rule references?  I don't
see how.

I think I would be happy if I could just print out all of the leaves
attached to
the tokens which match a rule.  It seems that AST is more suited to
this, but this is not an AST grammer.

This is my first look at antlr so I am probably looking at my problem in
the wrong way.  I have been through the tutorials and read much of the
antlr spec.

~Michael West

From nbsherid at secsme.org.au  Thu May 12 19:33:48 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Thu May 12 19:33:37 2005
Subject: [antlr-interest] how to print tokens?
In-Reply-To: <20050512231328.GA3338@quag>
Message-ID: <000201c55764$319c9a60$0500a8c0@nigel>


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Michael West
> Sent: Friday, 13 May 2005 9:13 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] how to print tokens?
> 
> I have a thousand sql select statements and need to report on the tables
> and
> views they refer to.  Can antlr help me with this?  Should antlr help me
> with this?
> 
> Almost all of the sql is sqlserver2000.  The grammer at:
> http://www.antlr.org/grammar/1062280680642/MS_SQL_SELECT.html
> 
> seems to parse fine, and I can have it print out matches to simple leaf
> rules using element labels.  Can I do it with rule references?  I don't
> see how.
> 
> I think I would be happy if I could just print out all of the leaves
> attached to
> the tokens which match a rule.  It seems that AST is more suited to
> this, but this is not an AST grammer.
> 

You need to find the relevant rules, and add some actions, and probably some
return values... replace the following 3 rules, and tell us how it goes!


subTableSource
    :								{String
s=null;}
    (
      LPAREN (
            (joinedTables) => joinedTables RPAREN
          | (queryExpression) => queryExpression RPAREN alias1 // "derived
table", mandatory alias
          )
    | (function) => function (alias1)?
    | s=dbObject
{System.out.println(s);}
		(alias1)? ( (WITH)? LPAREN tableHint (COMMA tableHint)*
RPAREN )?
    | Variable (alias1)?
    | (CONTAINSTABLE | FREETEXTTABLE) LPAREN
        dbObject COMMA (dbObject | STAR) COMMA (stringLiteral | Variable)
(COMMA Integer)?
        RPAREN (alias1)?
    | COLON COLON function (alias1)? // built-in function
    )
    ;

dbObject returns [String s]
    // server.catalog.schema.object
    // server.catalog..object
    :
    (s=identifier | IDENTITYCOL | ROWGUIDCOL | keywordAsIdentifier) (
          DOT (identifier | IDENTITYCOL | ROWGUIDCOL | keywordAsIdentifier)
        | (DOT DOT) => DOT DOT (identifier | IDENTITYCOL | ROWGUIDCOL |
keywordAsIdentifier)
    )*
    ;

identifier returns [String s]
    :
      a:NonQuotedIdentifier			{s=a.getText();}
    | b:QuotedIdentifier			{s=b.getText();}
    ;

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435



From nbsherid at secsme.org.au  Thu May 12 19:57:10 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Thu May 12 19:57:00 2005
Subject: [antlr-interest] how to print tokens?
In-Reply-To: <000201c55764$319c9a60$0500a8c0@nigel>
Message-ID: <000001c55767$755a5730$0500a8c0@nigel>

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Nigel Sheridan-Smith
> Sent: Friday, 13 May 2005 12:34 PM
> To: antlr-interest@antlr.org
> Subject: RE: [antlr-interest] how to print tokens?
> 
> 
> > -----Original Message-----
> > From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> > bounces@antlr.org] On Behalf Of Michael West
> > Sent: Friday, 13 May 2005 9:13 AM
> > To: antlr-interest@antlr.org
> > Subject: [antlr-interest] how to print tokens?
> >
> > I have a thousand sql select statements and need to report on the tables
> > and
> > views they refer to.  Can antlr help me with this?  Should antlr help me
> > with this?
> >
> > Almost all of the sql is sqlserver2000.  The grammer at:
> > http://www.antlr.org/grammar/1062280680642/MS_SQL_SELECT.html
> >
> > seems to parse fine, and I can have it print out matches to simple leaf
> > rules using element labels.  Can I do it with rule references?  I don't
> > see how.
> >
> > I think I would be happy if I could just print out all of the leaves
> > attached to
> > the tokens which match a rule.  It seems that AST is more suited to
> > this, but this is not an AST grammer.
> >
> 
> You need to find the relevant rules, and add some actions, and probably
> some
> return values... replace the following 3 rules, and tell us how it goes!
>

Whoops... it's for C#, not Java... see the attachments. That should get you
started...

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435
 


-------------- next part --------------
A non-text attachment was scrubbed...
Name: sql.g
Type: application/octet-stream
Size: 19528 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050513/3dd35f3b/sql-0001.obj
-------------- next part --------------

using System;

public class SqlMain
{
	public static void Main ()
	{
        SqlLexer lex = new SqlLexer (Console.In);
        
        /* Create the parser */
        SqlParser par = new SqlParser (lex);
		
		par.statement();
	}
}
		
From serafettin_sentuerk at intergral.com  Fri May 13 07:56:29 2005
From: serafettin_sentuerk at intergral.com (Serafettin Senturk)
Date: Fri May 13 07:56:40 2005
Subject: [antlr-interest] Tree translation
Message-ID: <ANEFKENHALPOILMBNJFGCELMCAAA.serafettin_sentuerk@intergral.com>


 Hello,

 In my tree parser, i simply want to change the "function" keywords in my
source AST to the "method" keyword in my target AST.

 For that, I have written the following code in my tree parser :

 func_def!
	:	#("function" id:IDENT id2:((elist)?) id3:stat) { #func_def = #("method",
id, id2, id3); }

	;

 But it does not work, it complains like that :

 java.lang.Error: Unresolved compilation problem:
	The method add(AST) in the type ASTArray is not applicable for the
arguments (String)

 I don't know how to resolve this problem. Is there anyone who can know the
answer to this problem?

 Regards,
 Serafettin




From parrt at cs.usfca.edu  Fri May 13 08:03:29 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri May 13 08:03:31 2005
Subject: [antlr-interest] Tree translation
In-Reply-To: <ANEFKENHALPOILMBNJFGCELMCAAA.serafettin_sentuerk@intergral.com>
References: <ANEFKENHALPOILMBNJFGCELMCAAA.serafettin_sentuerk@intergral.com>
Message-ID: <1E928BCE-2840-4F5C-B4A4-43816B3DB82B@cs.usfca.edu>


On May 13, 2005, at 7:56 AM, Serafettin Senturk wrote:

>
>  Hello,
>
>  In my tree parser, i simply want to change the "function" keywords  
> in my
> source AST to the "method" keyword in my target AST.
>
>  For that, I have written the following code in my tree parser :
>
>  func_def!
>     :    #("function" id:IDENT id2:((elist)?) id3:stat) { #func_def  
> = #("method",
> id, id2, id3); }
>
>     ;
>
>  But it does not work, it complains like that :
>
>  java.lang.Error: Unresolved compilation problem:
>     The method add(AST) in the type ASTArray is not applicable for the
> arguments (String)

Sure.  Use #[METHOD,"method"] not "method" in the tree constructor.   
Also look at the generated code as it usually explains the issues.

See ya,
Ter


From demakov at ispras.ru  Fri May 13 08:03:27 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Fri May 13 08:03:34 2005
Subject: [antlr-interest] Tree translation
References: <ANEFKENHALPOILMBNJFGCELMCAAA.serafettin_sentuerk@intergral.com>
Message-ID: <028901c557cc$eaab58d0$8cc79553@marlboro>

Clean & rebuild all your code,

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


----- Original Message ----- 
From: "Serafettin Senturk" <serafettin_sentuerk@intergral.com>
To: <antlr-interest@antlr.org>
Sent: Friday, May 13, 2005 6:56 PM
Subject: [antlr-interest] Tree translation


> 
>  Hello,
> 
>  In my tree parser, i simply want to change the "function" keywords in my
> source AST to the "method" keyword in my target AST.
> 
>  For that, I have written the following code in my tree parser :
> 
>  func_def!
> : #("function" id:IDENT id2:((elist)?) id3:stat) { #func_def = #("method",
> id, id2, id3); }
> 
> ;
> 
>  But it does not work, it complains like that :
> 
>  java.lang.Error: Unresolved compilation problem:
> The method add(AST) in the type ASTArray is not applicable for the
> arguments (String)
> 
>  I don't know how to resolve this problem. Is there anyone who can know the
> answer to this problem?
> 
>  Regards,
>  Serafettin
> 
> 
> 
> 

From serafettin_sentuerk at intergral.com  Fri May 13 09:10:49 2005
From: serafettin_sentuerk at intergral.com (Serafettin Senturk)
Date: Fri May 13 09:10:56 2005
Subject: [antlr-interest] Specific tree node translation
Message-ID: <ANEFKENHALPOILMBNJFGOEMACAAA.serafettin_sentuerk@intergral.com>


 Hello,

 In my tree parser for the translation of "function" to "method", i write
the whole tree structure again in the action part like:

 { #func_def = #(#[METHOD,"method"],id, id2, id3); }

  but i only want to change the "method" part. How can i do it specifically?

  Regards,
 Serafettin







From open.zone at virgin.net  Fri May 13 10:29:29 2005
From: open.zone at virgin.net (Micheal J)
Date: Fri May 13 10:15:58 2005
Subject: [antlr-interest] Specific tree node translation
In-Reply-To: <ANEFKENHALPOILMBNJFGOEMACAAA.serafettin_sentuerk@intergral.com>
Message-ID: <000701c557e1$51599290$6402a8c0@hercules>

>  Hello,
> 
>  In my tree parser for the translation of "function" to 
> "method", i write the whole tree structure again in the 
> action part like:
> 
>  { #func_def = #(#[METHOD,"method"],id, id2, id3); }
> 
>   but i only want to change the "method" part. How can i do 
> it specifically?

Something like this maybe?

#func_def.setText("method");
#func_def.setType(METHOD);

You will need to play around to get the correct syntax etc.

Micheal

From quagly at mitzit.net  Sat May 14 06:41:33 2005
From: quagly at mitzit.net (Michael West)
Date: Sat May 14 06:41:38 2005
Subject: [antlr-interest] how to print tokens?
In-Reply-To: <000001c55767$755a5730$0500a8c0@nigel>
References: <000201c55764$319c9a60$0500a8c0@nigel>
	<000001c55767$755a5730$0500a8c0@nigel>
Message-ID: <20050514134133.GA7706@quag>

> Whoops... it's for C#, not Java... see the attachments. That should get you
> started...
> 
> Nigel

I am using Java with this grammer, I just removed the C# option.  I
didn't see any code in the grammer so I figured this was fine. 

I see what you are doing by passing the values up the rule chain, that
makes sense.  Haven't got it to complile cleanly yet though.  Attached it my
modified grammer.

The output of the antlr.Tool looks fine to me:
------------
java antlr.Tool sql.g
ANTLR Parser Generator   Version 2.7.5 (20050509)   1989-2005 jGuru.com
sql.g:105:5: warning:Rule 'identifier' returns a value
sql.g:106:12: warning:Rule 'identifier' returns a value
sql.g:140:26: warning:Rule 'dbObject' returns a value
sql.g:141:26: warning:Rule 'dbObject' returns a value
sql.g:339:16: warning:Rule 'identifier' returns a value
sql.g:340:33: warning:Rule 'identifier' returns a value
sql.g:263:7: warning:Rule 'identifier' returns a value
sql.g:279:7: warning:Rule 'dbObject' returns a value
sql.g:272:7: warning:Rule 'dbObject' returns a value
sql.g:254:11: warning:Rule 'identifier' returns a value
sql.g:199:9: warning:Rule 'dbObject' returns a value
sql.g:199:25: warning:Rule 'dbObject' returns a value
sql.g:313:6: warning:Rule 'dbObject' returns a value
sql.g:228:19: warning:Rule 'identifier' returns a value
sql.g:228:50: warning:Rule 'identifier' returns a value
sql.g:229:23: warning:Rule 'identifier' returns a value
sql.g:248:15: warning:Rule 'identifier' returns a value
sql.g:302:7: warning:Rule 'dbObject' returns a value
sql.g:331:33: warning:Rule 'identifier' returns a value
------------

But when I compile I get:
-----------
javac -classpath '.:/usr/local/lib/antlr.jar' *.java

SqlParser.java:4504: cannot resolve symbol
symbol  : variable s
location: class SqlParser
     s=dbObject();

SqlParser.java:4506:
cannot resolve symbol 
symbol : variable s 
location: class SqlParser
     System.out.println(s);
---------

Line 4504 is just the  s=dbObject(); part of the subTableSource method.  I don't see why this error. declaring s is the first thing the method does:

public final void subTableSource() throws RecognitionException,
TokenStreamException {
try {      // for error handling
  if ( inputState.guessing==0 ) {
     String s=null;
  }
  ...


-------------- next part --------------
// Version: 0.8
// ANTLR Version: 2.7.2
// Date: 2003.08.25
//
// Description: This is a MS SQL Server 2000 SELECT statement grammar.
//
// =======================================================================================
// Author: Tomasz Jastrzebski
// Contact: tdjastrzebski@yahoo.com
// Working parser/lexer generated based on this grammar will available for some time at:
// http://jastrzebski.europe.webmatrixhosting.net/mssqlparser.aspx 

//options {
    //language = "CSharp";
//}

// PARSER ********************************************************************************

class SqlParser extends Parser;
options {
    k = 2;
}

// starting rule
statement
    : selectStatement (SEMICOLON)? EOF
    ;

selectStatement
    :
    queryExpression
    (computeClause)?
    (forClause)?
    (optionClause)?
    ;

queryExpression
    : subQueryExpression (unionOperator subQueryExpression)* (orderByClause)?
    ;

subQueryExpression
    :
      querySpecification
    | LPAREN queryExpression RPAREN
    ;

querySpecification
    :
    selectClause
    (fromClause)?
    (whereClause)?
    (groupByClause (havingClause)? )?
    ;
        
selectClause
    : SELECT (ALL | DISTINCT)? (TOP Integer (PERCENT)? (WITH TIES)? )? selectList
    ;

whereClause
    : WHERE searchCondition
    ;

orderByClause
    : ORDER BY expression (ASC | DESC)? (COMMA expression (ASC | DESC)? )*
    ;

groupByClause
    : GROUP BY (ALL)? expression (COMMA expression)* (WITH (CUBE | ROLLUP) )?
    ;

havingClause
    : HAVING searchCondition
    ;

optionClause
    : OPTION LPAREN queryHint (COMMA queryHint)* RPAREN
    ;

queryHint
    :
      (HASH | ORDER) GROUP
    | (CONCAT | HASH | MERGE) UNION
    | (LOOP | MERGE | HASH) JOIN
    | FAST Integer
    | FORCE ORDER
    | MAXDOP Integer
    | ROBUST PLAN
    | KEEP PLAN
    | KEEPFIXED PLAN
    | EXPAND VIEWS
    ;

forClause
    :
    FOR (
      BROWSE
    | XML (RAW | AUTO | EXPLICIT) (COMMA XMLDATA)? (COMMA ELEMENTS)? (COMMA BINARY BASE64)
    )
    ;

computeClause
    :
    COMPUTE
    // only allowed functions are: AVG, COUNT, MAX, MIN, STDEV, STDEVP, VAR, VARP, SUM
    identifier LPAREN expression RPAREN
    (COMMA identifier LPAREN expression RPAREN)*
    (BY expression (COMMA expression)* )?
    ;

searchCondition
    : subSearchCondition ( (AND | OR) subSearchCondition )*
    ;

subSearchCondition
    :
    (NOT)? (
          (LPAREN searchCondition RPAREN) => LPAREN searchCondition RPAREN
        | predicate
        )
    ;

predicate
    :
    (
      expression (
        // expression comparisonOperator expression
        comparisonOperator (
            expression
          | (ALL | SOME | ANY) LPAREN selectStatement RPAREN
          )
      | IS (NOT)? NULL
      | (NOT)? (
            LIKE expression (ESCAPE expression)? // only single char
          | BETWEEN expression AND expression
          | IN LPAREN (
                (selectStatement) => selectStatement
              | expression (COMMA expression)*
              ) RPAREN
          )
      | CONTAINS LPAREN (dbObject | STAR) COMMA (stringLiteral | Variable) RPAREN
      | FREETEXT LPAREN (dbObject | STAR) COMMA (stringLiteral | Variable) RPAREN
      )
    | EXISTS LPAREN selectStatement RPAREN
    )
    ;

selectList
    : selectItem ( COMMA selectItem )*
    ;

selectItem
    :
      STAR // "*, *" is a valid select list
    | (
      // starts with: "alias = column_name"
      (alias2) => (
          (alias2 dbObject COMMA) => alias2 column
        | (alias2 dbObject (binaryOperator | LPAREN)) => alias2 expression
        | (alias2 column) => alias2 column
        | (alias2 expression) => alias2 expression
        )

      // all table columns: "table.*"
    | (tableColumns) => tableColumns
    
      // some shortcuts:
    | (dbObject (alias1)? COMMA) => column (alias1)?
    | (dbObject (binaryOperator | LPAREN) ) => expression (alias1)?
    
      // less obvious cases:
    | (column) => column (alias1)?
    | (expression) => expression (alias1)?
    )
    ;

fromClause
    : FROM tableSource (COMMA tableSource)*
    ;

tableSource
    : subTableSource (joinedTable)*
    ;

subTableSource
    :                                                           
	{String s=null;}
    (
      LPAREN (
            (joinedTables) => joinedTables RPAREN
          | (queryExpression) => queryExpression RPAREN alias1 // "derived table", mandatory alias
          )
    | (function) => function (alias1)?
    | s=dbObject
	{System.out.println(s);}
                (alias1)? ( (WITH)? LPAREN tableHint (COMMA tableHint)*
RPAREN )?
 | Variable (alias1)?
    | (CONTAINSTABLE | FREETEXTTABLE) LPAREN
        dbObject COMMA (dbObject | STAR) COMMA (stringLiteral | Variable)
(COMMA Integer)?
        RPAREN (alias1)?
    | COLON COLON function (alias1)? // built-in function
    )
    ;

joinedTable
    :
      CROSS JOIN subTableSource
      // "joinHint JOIN" is invalid join expression
    | ( (INNER | (LEFT | RIGHT | FULL) (OUTER)? ) (joinHint)? )? JOIN tableSource ON searchCondition
    ;    

joinedTables
    : subTableSource (joinedTable)+
    ;

joinHint
    :
      LOOP
    | HASH
    | MERGE
    | REMOTE
    ;

tableHint
    :
      INDEX (
          LPAREN (identifier | Integer) ( COMMA (identifier | Integer) )* RPAREN
        | ASSIGNEQUAL identifier    // old index hint syntax
        )
    | FASTFIRSTROW
    | HOLDLOCK
    | NOLOCK
    | PAGLOCK
    | READCOMMITED
    | READPAST
    | READUNCOMMITED
    | REPEATABLEREAD
    | ROWLOCK
    | SERIALIZABLE
    | TABLOCK
    | TABLOCKX
    | UPDLOCK
    | XLOCK
    ;

collate
    : COLLATE identifier
    ;
    
alias1
    : // alias name can also be single-quoted literal (but not for table names)
    (AS)? (
          identifier
        | stringLiteral
        | keywordAsIdentifier
        )
    ;

alias2
    :
    (
      identifier
    | stringLiteral
    | keywordAsIdentifier
    )
    ASSIGNEQUAL
    ;
    
tableColumns
    :
    o:dbObject DOT_STAR
    ;

column
    :
    (PLUS)* // "++column_name" is valid and updatable column name
    (
      dbObject
      // for expression like "(column)" SQL Server returns updatable column
    | LPAREN column RPAREN
    )
    (collate)? // it is not well documented but COLLATE can be used almost anywhere ...
    ;

expression
    : // current definition ignores operator precedence
      subExpression (binaryOperator subExpression)*
    ;

subExpression
    :
    (unaryOperator)?
    (
      constant
    | Variable
    | (function) => function
    | LPAREN (
          (selectStatement) => selectStatement // select statement returning a single value
        | expression
        ) RPAREN
    | dbObject    // column
    | parameterlessFunction
    | caseFunction
    | castFunction
    )
    (collate)?    // it is not well documented but COLLATE can be used almost everywhere ...
    ;

// todo: create a separate rule for aggregate functions
function
    : // LEFT and RIGHT keywords are also function names
    (dbObject | LEFT | RIGHT) LPAREN (
          expression (COMMA expression)*
        | STAR    // aggregate functions like Count(), Checksum() accept "*" as a parameter
        | (ALL | DISTINCT) (STAR | expression) // aggregate function
        | Variable ASSIGNEQUAL expression (COMMA Variable ASSIGNEQUAL expression)*
        )?
    RPAREN
    ;

caseFunction
    : CASE (
          expression (WHEN expression THEN expression)+
        | (WHEN searchCondition THEN expression)+    // boolean expression
        )
    (ELSE expression)? END
    ;

castFunction
    : CAST LPAREN expression AS identifier (LPAREN Integer (COMMA Integer)? RPAREN)? RPAREN
    ;

dbObject returns [String s]
    // server.catalog.schema.object
    // server.catalog..object
    :
    (s=identifier | IDENTITYCOL | ROWGUIDCOL | keywordAsIdentifier) (
          DOT (identifier | IDENTITYCOL | ROWGUIDCOL | keywordAsIdentifier)
        | (DOT DOT) => DOT DOT (identifier | IDENTITYCOL | ROWGUIDCOL | keywordAsIdentifier)
    )*
    ;

parameterlessFunction
    : // any others ?
      CURRENT_TIMESTAMP
    | CURRENT_USER
    | SESSION_USER
    | SYSTEM_USER
    ;

systemVariable
    :
      F_CONNECTIONS 
    | F_CPU_BUSY 
    | F_CURSOR_ROWS 
    | F_DATEFIRST 
    | F_DBTS 
    | F_ERROR 
    | F_FETCH_STATUS 
    | F_IDENTITY 
    | F_IDLE 
    | F_IO_BUSY 
    | F_LANGID 
    | F_LANGUAGE 
    | F_LOCK_TIMEOUT 
    | F_MAX_CONNECTIONS 
    | F_MAX_PRECISION 
    | F_NESTLEVEL 
    | F_OPTIONS 
    | F_PACK_RECEIVED 
    | F_PACK_SENT 
    | F_PACKET_ERRORS 
    | F_PROCID 
    | F_REMSERVER 
    | F_ROWCOUNT 
    | F_SERVERNAME 
    | F_SERVICENAME 
    | F_SPID 
    | F_TEXTSIZE 
    | F_TIMETICKS 
    | F_TOTAL_ERRORS 
    | F_TOTAL_READ 
    | F_TOTAL_WRITE 
    | F_TRANCOUNT 
    | F_VERSION
    ;    

keywordAsIdentifier
    :
    (
      AUTO
    | BASE64
    | BINARY
    | CAST
    | CONCAT
    | CUBE
    | ELEMENTS
    | EXPAND
    | EXPLICIT
    | FAST
    | FASTFIRSTROW
    | FORCE
    | HASH
    | KEEP
    | KEEPFIXED
    | LOOP
    | MAXDOP
    | MERGE
    | NOLOCK
    | PAGLOCK
    | RAW
    | READCOMMITED
    | READPAST
    | READUNCOMMITED
    | REMOTE
    | REPEATABLEREAD
    | ROBUST
    | ROLLUP
    | ROWLOCK
    | SERIALIZABLE
    | TABLOCK
    | TABLOCKX
    | TIES
    | UPDLOCK
    | VIEWS
    | XLOCK
    | XML
    | XMLDATA
    )
    ;

stringLiteral
    :
      UnicodeStringLiteral
    | ASCIIStringLiteral
    ;

identifier returns [String s]
    :
      a:NonQuotedIdentifier			{s=a.getText();}
    | b:QuotedIdentifier			{s=b.getText();}
    ;

constant
    : Integer | Real | NULL | stringLiteral | HexLiteral | Currency | ODBCDateTime | systemVariable
    ;

unaryOperator
    : PLUS | MINUS | TILDE
    ;
    
binaryOperator
    : arithmeticOperator | bitwiseOperator
    ;
    
arithmeticOperator
    : PLUS | MINUS | STAR | DIVIDE | MOD
    ;

bitwiseOperator
    : AMPERSAND | TILDE | BITWISEOR | BITWISEXOR
    ;

comparisonOperator
    :
      ASSIGNEQUAL | NOTEQUAL1 | NOTEQUAL2 | LESSTHANOREQUALTO1 | LESSTHANOREQUALTO2 
    | LESSTHAN | GREATERTHANOREQUALTO1 | GREATERTHANOREQUALTO2 | GREATERTHAN
    ;
        
logicalOperator
    : ALL | AND | ANY | BETWEEN | EXISTS | IN | LIKE | NOT | OR | SOME
    ;

unionOperator
    : UNION (ALL)?
    ;
    
// LEXER *********************************************************************************

class SqlLexer extends Lexer;

options {
    testLiterals = false;
    k = 2;
    caseSensitive = false;
    caseSensitiveLiterals = false;
    charVocabulary='\u0000'..'\uFFFE';
}

tokens {
    ADD = "add" ;
    ALL = "all" ;
    ALTER = "alter" ;
    AND = "and" ;
    ANY = "any" ;
    AS = "as" ;
    ASC = "asc" ;
    AUTHORIZATION = "authorization" ;
    AUTO = "auto" ;
    BACKUP = "backup" ;
    BASE64 = "base64" ;
    BEGIN = "begin" ;
    BETWEEN = "between" ;
    BINARY = "binary" ;
    BREAK = "break" ;
    BROWSE = "browse" ;
    BULK = "bulk" ;
    BY = "by" ;
    CASCADE = "cascade" ;
    CASE = "case" ;
    CAST = "cast" ;
    CHECK = "check" ;
    CHECKPOINT = "checkpoint" ;
    CLOSE = "close" ;
    CLUSTERED = "clustered" ;
    // COALESCE = "coalesce" ;
    COLLATE = "collate" ;
    COLUMN = "column" ;
    COMMIT = "commit" ;
    COMPUTE = "compute" ;
    CONCAT = "concat" ;
    CONSTRAINT = "constraint" ;
    CONTAINS = "contains" ;
    CONTAINSTABLE = "containstable" ;
    CONTINUE = "continue" ;
    // CONVERT = "convert" ;
    CREATE = "create" ;
    CROSS = "cross" ;
    CUBE = "cube" ;
    CURRENT = "current" ;
    CURRENT_DATE = "current_date" ;
    CURRENT_TIME = "current_time" ;
    CURRENT_TIMESTAMP = "current_timestamp" ;
    CURRENT_USER = "current_user" ;
    CURSOR = "cursor" ;
    DATABASE = "database" ;
    DBCC = "dbcc" ;
    DEALLOCATE = "deallocate" ;
    DECLARE = "declare" ;
    DEFAULT = "default" ;
    DELETE = "delete" ;
    DENY = "deny" ;
    DESC = "desc" ;
    DISK = "disk" ;
    DISTINCT = "distinct" ;
    DISTRIBUTED = "distributed" ;
    DOUBLE = "double" ;
    DROP = "drop" ;
    // DUMMY = "dummy" ;
    DUMP = "dump" ;
    ELEMENTS = "elements" ;
    ELSE = "else" ;
    END = "end" ;
    ERRLVL = "errlvl" ;
    ESCAPE = "escape" ;
    EXCEPT = "except" ;
    EXEC = "exec" ;
    EXECUTE = "execute" ;
    EXISTS = "exists" ;
    EXIT = "exit" ;
    EXPAND = "expand" ;
    EXPLICIT = "explicit" ;
    FAST = "fast" ;
    FASTFIRSTROW = "fastfirstrow" ;
    FETCH = "fetch" ;
    FILE = "file" ;
    FILLFACTOR = "fillfactor" ;
    FOR = "for" ;
    FORCE = "force" ;
    FOREIGN = "foreign" ;
    FREETEXT = "freetext" ;
    FREETEXTTABLE = "freetexttable" ;
    FROM = "from" ;
    FULL = "full" ;
    FUNCTION = "function" ;
    GOTO = "goto" ;
    GRANT = "grant" ;
    GROUP = "group" ;
    HASH = "hash" ;
    HAVING = "having" ;
    HOLDLOCK = "holdlock" ;
    IDENTITY = "identity" ;
    IDENTITY_INSERT = "identity_insert" ;
    IDENTITYCOL = "identitycol" ;
    IF = "if" ;
    IN = "in" ;
    INDEX = "index" ;
    INNER = "inner" ;
    INSERT = "insert" ;
    INTERSECT = "intersect" ;
    INTO = "into" ;
    IS = "is" ;
    JOIN = "join" ;
    KEEP = "keep" ;
    KEEPFIXED = "keepfixed" ;
    KEY = "key" ;
    KILL = "kill" ;
    LEFT = "left" ;
    LIKE = "like" ;
    LINENO = "lineno" ;
    LOAD = "load" ;
    LOOP = "loop" ;
    MAXDOP = "maxdop" ;
    MERGE = "merge" ;
    NATIONAL = "national" ;
    NOCHECK = "nocheck" ;
    NOLOCK = "nolock" ;
    NONCLUSTERED = "nonclustered" ;
    NOT = "not" ;
    NULL = "null" ;
    // NULLIF = "nullif" ;
    OF = "of" ;
    OFF = "off" ;
    OFFSETS = "offsets" ;
    ON = "on" ;
    OPEN = "open" ;
    OPENDATASOURCE = "opendatasource" ;
    OPENQUERY = "openquery" ;
    OPENROWSET = "openrowset" ;
    OPENXML = "openxml" ;
    OPTION = "option" ;
    OR = "or" ;
    ORDER = "order" ;
    OUTER = "outer" ;
    OVER = "over" ;
    PAGLOCK = "paglock" ;
    PERCENT = "percent" ;
    PLAN = "plan" ;
    PRECISION = "precision" ;
    PRIMARY = "primary" ;
    PRINT = "print" ;
    PROC = "proc" ;
    PROCEDURE = "procedure" ;
    PUBLIC = "public" ;
    RAISERROR = "raiserror" ;
    RAW = "raw" ;
    READ = "read" ;
    READCOMMITED = "readcommited" ;
    READPAST = "readpast" ;
    READTEXT = "readtext" ;
    READUNCOMMITED = "readuncommited" ;
    RECONFIGURE = "reconfigure" ;
    REFERENCES = "references" ;
    REMOTE = "remote" ;
    REPEATABLEREAD = "repeatableread" ;
    REPLICATION = "replication" ;
    RESTORE = "restore" ;
    RESTRICT = "restrict" ;
    RETURN = "return" ;
    REVOKE = "revoke" ;
    RIGHT = "right" ;
    ROBUST = "robust" ;
    ROLLBACK = "rollback" ;
    ROLLUP = "rollup" ;
    ROWCOUNT = "rowcount" ;
    ROWGUIDCOL = "rowguidcol" ;
    ROWLOCK = "rowlock" ;
    RULE = "rule" ;
    SAVE = "save" ;
    SCHEMA = "schema" ;
    SELECT = "select" ;
    SERIALIZABLE = "serializable" ;
    SESSION_USER = "session_user" ;
    SET = "set" ;
    SETUSER = "setuser" ;
    SHUTDOWN = "shutdown" ;
    SOME = "some" ;
    STATISTICS = "statistics" ;
    SYSTEM_USER = "system_user" ;
    TABLE = "table" ;
    TABLOCK = "tablock" ;
    TABLOCKX = "tablockx" ;
    TEXTSIZE = "textsize" ;
    THEN = "then" ;
    TIES = "ties" ;
    TO = "to" ;
    TOP = "top" ;
    TRAN = "tran" ;
    TRANSACTION = "transaction" ;
    TRIGGER = "trigger" ;
    TRUNCATE = "truncate" ;
    TSEQUAL = "tsequal" ;
    UNION = "union" ;
    UNIQUE = "unique" ;
    UPDATE = "update" ;
    UPDATETEXT = "updatetext" ;
    UPDLOCK = "updlock" ;
    USE = "use" ;
    USER = "user" ;
    VALUES = "values" ;
    VARYING = "varying" ;
    VIEW = "view" ;
    VIEWS = "views" ;
    WAITFOR = "waitfor" ;
    WHEN = "when" ;
    WHERE = "where" ;
    WHILE = "while" ;
    WITH = "with" ;
    WRITETEXT = "writetext" ;
    XLOCK = "xlock" ;
    XML = "xml" ;
    XMLDATA = "xmldata" ;
    
    // system variables
    F_CONNECTIONS = "@@connections" ;
    F_CPU_BUSY = "@@cpu_busy" ;
    F_CURSOR_ROWS = "@@cursor_rows" ;
    F_DATEFIRST = "@@datefirst" ;
    F_DBTS = "@@dbts" ;
    F_ERROR = "@@error" ;
    F_FETCH_STATUS = "@@fetch_status" ;
    F_IDENTITY = "@@identity" ;
    F_IDLE = "@@idle" ;
    F_IO_BUSY = "@@io_busy" ;
    F_LANGID = "@@langid" ;
    F_LANGUAGE = "@@language" ;
    F_LOCK_TIMEOUT = "@@lock_timeout" ;
    F_MAX_CONNECTIONS = "@@max_connections" ;
    F_MAX_PRECISION = "@@max_precision" ;
    F_NESTLEVEL = "@@nestlevel" ;
    F_OPTIONS = "@@options" ;
    F_PACK_RECEIVED = "@@pack_received" ;
    F_PACK_SENT = "@@pack_sent" ;
    F_PACKET_ERRORS = "@@packet_errors" ;
    F_PROCID = "@@procid" ;
    F_REMSERVER = "@@remserver" ;
    F_ROWCOUNT = "@@rowcount" ;
    F_SERVERNAME = "@@servername" ;
    F_SERVICENAME = "@@servicename" ;
    F_SPID = "@@spid" ;
    F_TEXTSIZE = "@@textsize" ;
    F_TIMETICKS = "@@timeticks" ;
    F_TOTAL_ERRORS = "@@total_errors" ;
    F_TOTAL_READ = "@@total_read" ;
    F_TOTAL_WRITE = "@@total_write" ;
    F_TRANCOUNT = "@@trancount" ;
    F_VERSION = "@@version" ;
}

// Operators

protected DOT:; // generated as a part of Number rule
COLON : ':' ;
COMMA : ',' ;
SEMICOLON : ';' ;

LPAREN : '(' ;
RPAREN : ')' ;
//LSQUARE : '[' ;
//RSQUARE : ']' ;

ASSIGNEQUAL : '=' ;
NOTEQUAL1 : "<>" ;
NOTEQUAL2 : "!=" ;
LESSTHANOREQUALTO1 : "<=" ;
LESSTHANOREQUALTO2 : "!>" ;
LESSTHAN : "<" ;
GREATERTHANOREQUALTO1 : ">=" ;
GREATERTHANOREQUALTO2 : "!<" ;
GREATERTHAN : ">" ;

DIVIDE : '/' ;
PLUS : '+' ;
MINUS : '-' ;
STAR : '*' ;
MOD : '%' ;

AMPERSAND : '&' ;
TILDE : '~' ;
BITWISEOR : '|' ;
BITWISEXOR : '^' ;
DOT_STAR : ".*" ;

Whitespace
    : (' ' | '\t' | '\n' | '\r')
    { _ttype = Token.SKIP; }
    ;

// COMMENTS
SingleLineComment
    : "--"( ~('\r' | '\n') )*
    { _ttype = Token.SKIP; }
    ;

MultiLineComment
    : "/*" (~'*')* '*' ('*' | ( ~('*' | '/') (~'*')* '*') )* '/'
    { _ttype = Token.SKIP; }
    ;

// LITERALS

protected
Letter
    : 'a'..'z' | '_' | '#' | '@' | '\u0080'..'\ufffe'
    ;

protected
Digit
    : '0'..'9'
    ;

protected
Integer :;

protected
Real :;

protected
Exponent
    : 'e' ( '+' | '-' )? (Digit)+
    ;

Number
    :
      ( (Digit)+ ('.' | 'e') ) => (Digit)+ ( '.' (Digit)* (Exponent)? | Exponent) { _ttype = Real; }
    | '.' { _ttype = DOT; } ( (Digit)+ (Exponent)? { _ttype = Real; } )?
    | (Digit)+ { _ttype = Integer; }
    | "0x" ('a'..'f' | Digit)* { _ttype = HexLiteral; } // "0x" is valid hex literal
    ;

protected
Currency
    : // generated as a part of NonQuotedIdentifier rule
    ('$' | '\u00a3'..'\u00a5' | '\u09f2'..'\u09f3' | '\u0e3f' | '\u20a0'..'\u20a4' | '\u20a6'..'\u20ab')
    ((Digit)+ ('.' (Digit)* )? | '.' (Digit)+)
    ;

ODBCDateTime
    : '{' (Whitespace)? ("ts" | 't' | 'd') (Whitespace)?
        ('n')? '\'' (~'\'')* '\'' ( '\'' (~'\'')* '\'' )* (Whitespace)? '}'
    ;

NonQuotedIdentifier
    options { testLiterals = true; }
    :
      (Currency) => Currency { _ttype = Currency; }
    | ('a'..'z' | '_' | '#' | '\u0080'..'\ufffe') (Letter | Digit)* // first char other than '@'
    ;

QuotedIdentifier
    :
    (
      '[' (~']')* ']' (']' (~']')* ']')*
    | '"' (~'"')* '"' ('"' (~'"')* '"')*
    )
    ;
    
Variable
    // test for literals in case of a function begining with '@' (eg. "@@ERROR")
    options { testLiterals = true; }
    : '@' (Letter | Digit)+
    ;
    
ASCIIStringLiteral
    :
    '\'' (~'\'')* '\'' ( '\'' (~'\'')* '\'' )*
    ;

UnicodeStringLiteral
    :
    'n' '\'' (~'\'')* '\'' ( '\'' (~'\'')* '\'' )*
    ;

// Numeric Constants

protected
HexLiteral // generated as a part of Number rule
    : // "0x" ('0'..'9' | 'a'..'f')*
    ;
From quagly at mitzit.net  Sat May 14 07:11:08 2005
From: quagly at mitzit.net (Michael West)
Date: Sat May 14 07:11:11 2005
Subject: [antlr-interest] how to print tokens?
In-Reply-To: <20050514134133.GA7706@quag>
References: <000201c55764$319c9a60$0500a8c0@nigel>
	<000001c55767$755a5730$0500a8c0@nigel> <20050514134133.GA7706@quag>
Message-ID: <20050514141108.GA9106@quag>

I went back and read the spec again.  The variable declaration needs to
come before the colon in the rule instead of after.  Now it is printing out stuff.  I
think I can take it from here.  I will let you know if I need more help.


Thank You.

From nbsherid at secsme.org.au  Sat May 14 20:17:58 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Sat May 14 20:17:58 2005
Subject: [antlr-interest] how to print tokens?
In-Reply-To: <20050514141108.GA9106@quag>
Message-ID: <000401c558fc$b1ac2920$0500a8c0@nigel>


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Michael West
> Sent: Sunday, 15 May 2005 12:11 AM
> To: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] how to print tokens?
> 
> I went back and read the spec again.  The variable declaration needs to
> come before the colon in the rule instead of after.  Now it is printing
> out stuff.  I
> think I can take it from here.  I will let you know if I need more help.
> 

Yeah sorry, I couldn't remember where it went and fixed it in the C# version
when I actually went to compile it...

Nigel

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435
 


From prashant.deva at gmail.com  Sat May 14 23:34:38 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Sat May 14 23:34:40 2005
Subject: [antlr-interest] Yet another idea for a completly generic TreeParser
Message-ID: <41fed8f805051423345359fe37@mail.gmail.com>

I have a sort of real twisted idea on how to make Antlr parse any kind of tree.

So lets see,
Problem: Currently we cannot parse stuff like xml dom trees since
their ast interface differs from the AST interface used by antlr tree
parsers.

Solution: All the solution suggested till now suggest to somehow adapt
the 2 different interfaces.
I have got a pretty twisted sort of solution for the whole thing.

What if you could change antlr itself to handle exactly your tree's interface?
Before you go all out bashing my post, read below ;)

Again think everything in terms of functionality and not java interfaces.

We have our antlr treeParser(TP), which requires a certain kind of
functionality that is implemented in the AST interface.

Our interface implements a tree like structure, that can provide the
same kind of functionality.

So instead of doing all the adapting and stuff, why don't we do this-

We take our codeGen of the treeParser.
Currently our codeGen is supposed to generate code for the AST interface.
We tell it to use our XYZ interface, we tell the codeGen how exactly
to achieve the same functionality of IAST from IXYZ.
Eg- instead of IAST.getFirstChild, it should generate IXYZ.getChild(0).

Thus we can leave both antlr and our tree as is, and just modify the
codegen to generate the same kind of funcionality to be used by our
tree. Thus , instead of making the interface of 2 trees similar, we
just put a constrain of having the functionality of the 2 trees same.

Then Antlr will use a completly typeSafe, specifically made TreeParser
for our interface.

The codeGen modification part can be made super simple inside an ide.

So what do you think?

PRASHANT
From andreas.andreakis at gmx.de  Sun May 15 05:11:27 2005
From: andreas.andreakis at gmx.de (Andreas Andreakis)
Date: Sun May 15 05:11:35 2005
Subject: [antlr-interest] Transforming a rule-based XML to Prolog like Syntax
Message-ID: <42873C6F.7050705@gmx.de>

Hallo,


I would like to convert a XML file (simmilar to the RuleML Language 
-description of facts and rules) into a Prolog like Code.
An EBNF Description of the target Language (the Prolog like on) is 
available.


I?m new to templating and language recognition engines such as ANTRL. 
I?ll already looked into the Getting Started Section and it mentions 
that I can produce a tree from which I could init a transformation. But 
I couldn?t see more detaild information on that and related to my purpose.


So my questions are:

1) is it generelly possible to do an XML -> Prolog like transformation 
using ANTRL ?

2-a) if yes (which I suppose), what do I have to pay attention on ?
2-b) if no, could you suggest another engine / api for doing it ?

3) please summarize the most important key-words, which I will have to 
look for in the documentation files.


thanx in advance,
Andreas
From parrt at cs.usfca.edu  Sun May 15 08:33:00 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun May 15 08:33:03 2005
Subject: [antlr-interest] Yet another idea for a completly generic
	TreeParser
In-Reply-To: <41fed8f805051423345359fe37@mail.gmail.com>
References: <41fed8f805051423345359fe37@mail.gmail.com>
Message-ID: <186FD68C-83DD-44E4-8D6F-D0BFF505985C@cs.usfca.edu>


On May 14, 2005, at 11:34 PM, Prashant Deva wrote:

> I have a sort of real twisted idea on how to make Antlr parse any  
> kind of tree.
>
> So lets see,
> Problem: Currently we cannot parse stuff like xml dom trees since
> their ast interface differs from the AST interface used by antlr tree
> parsers.
>
> Solution: All the solution suggested till now suggest to somehow adapt
> the 2 different interfaces.
> I have got a pretty twisted sort of solution for the whole thing.
>
> What if you could change antlr itself to handle exactly your tree's  
> interface?

Hi Prashant.  I like it. :)  A very interesting twist.  How general  
would it have to be I wonder to be useful.  For example, could it be  
just the method names to use?  Probably not.  I think that if we  
could agree on the available arguments to functions such as the child  
index etc... we could let the user specify templates.  This is one  
nice thing about using StringTemplate for code gen.

Loring and Monty and I discussed something like this for tokens and  
ASTs at the Oregon ANTLR cabal.  But we thought in terms of what  
properties you could have.  Perhaps we should go further and specify  
the templates used to do common operations.  For example, here's one  
kind of tree access using ST notation:

getChild(node,index) ::= "node.getChild(index)"

and here's another:

getChild(node,index) ::= "node.children[index]"

Interesting.  In this way there would be no penalty going through a  
tree adapter for example to access the other tree.

Hmm...I also like no casting...I'm getting mighty tired of casting  
when using data structures I can tell ya!

Great line of thinking!  Can anybody think of problems?

Ter

From Alexander.Royenko at cad.kiev.ua  Sun May 15 05:07:51 2005
From: Alexander.Royenko at cad.kiev.ua (Alexander N. Royenko)
Date: Sun May 15 08:33:19 2005
Subject: [antlr-interest] Distinguish vars starting from digit and integers
Message-ID: <opsqtfzdvjn2x057@cad.kiev.ua>

Hi, all

Can someone point me to the right way how to distinguish variables that  
starting from digit char like  00jSeven  and integers like 1982?

Thanks

-- 
Regards,
Alexander.
From ilia at obnovlenie.ru  Sun May 15 11:16:41 2005
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Sun May 15 11:17:05 2005
Subject: [antlr-interest] Lookahead problem
Message-ID: <auto-000182179832@frontend1.aha.ru>

I want to create a language with functions like ~func{}, variables #var and
arrays #var{1}{~func{}}.
Besides, curly bracers are allowed as plain-text: ~func{my list: {1,2,3} }

Here is a simple lexer/parser for a part of the task.

-----------------------------
class SimpleTaskLexer extends Lexer;
LCURL: '{';
RCURL: '}' ;
ANY: (~('~' | '{' | '}' | '#'))+;
 
protected NAME: ('A'..'Z' | 'a'..'z' | '0'..'9' | '_')+;
VARIABLE: '#' NAME;
FUNCTION: '~' NAME;
 
class SimpleTaskParser extends Parser;
expr:	function EOF;
function: FUNCTION curly_text;
curly_text: LCURL entries RCURL;
entries: entry entries |;
entry: ANY | function | curly_text;
---------------------------

The problem is that I can't add array to read #var{...}{...}
Where curly braces after #var denote array member number.

Naturally it would be:
1. entry: ANY | function | curly_text | variable;
2. variable: VARIABLE (curly_text)*;

But that leads to (for string 2.)
warning:nondeterminism upon
k==1:LCURL
between alt 1 and exit branch of block


I guess that's because parser reads var then it does not know where array
members end and usual curly text begins.
The logical answer is simple: get as many {} after #var as possible as array
members.

How to implement that? I tried lookahead like:
entry: ANY | function | curly_text |
	(VARIABLE (curly_text)*) => VARIABLE (curly_text)*
	| VARIABLE;
But it did not work..


From ewbank at gmail.com  Sun May 15 13:40:07 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Sun May 15 13:40:09 2005
Subject: [antlr-interest] Lookahead problem
In-Reply-To: <auto-000182179832@frontend1.aha.ru>
References: <auto-000182179832@frontend1.aha.ru>
Message-ID: <dd3a065f05051513405b8f67ed@mail.gmail.com>

> The logical answer is simple: get as many {} after #var as possible as array
> members.
> 
> How to implement that? I tried lookahead like:

Look up "greedy=true" in the PDF manual...

    variable : VARIABLE (options{greedy=true;}: curly_text )* ;

This option tells ANTLR that the ambiguity is to be resolved by "going
around again".

Hope this helps,
- Bryan
From ilia at obnovlenie.ru  Sun May 15 16:39:42 2005
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Sun May 15 16:39:46 2005
Subject: [antlr-interest] Let filter return token
Message-ID: <auto-000182230439@frontend1.aha.ru>

I have a grammar e.g

LCURL: '{';
RCURL: '}' ;
ASSIGN: ":=";
....

I want all tokens not matched by existing rules to be returned as ANY.
Looks like "filter" option is right for that, but how to let it return token
?

All I see is "protected" filtering rules introduced to scarf, not to
return..

From scott at javadude.com  Sun May 15 20:27:34 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Sun May 15 20:27:52 2005
Subject: [antlr-interest] Yet another idea for a completly generic
	TreeParser
In-Reply-To: <41fed8f805051423345359fe37@mail.gmail.com>
Message-ID: <200505160423.j4G4NWLE013300@s2.eroute.net>

A valid approach, and pretty similar to what I was proposing. The difference
is that you're doing  build-time translation (different code gen) rather
than a runtime gen (an AST model adapter).

Type safety is really the same either way; it's just in a different spot (in
the adapter vs in the code generator itself).

Performance of what you suggest should be a wee bit better, though
practically negligible.

I think this would be a tad harder to create and maintain than the adapter I
proposed, though, as you need to:

a) have the code generator allow a spec
b) understand the spec so you can write to it

vs just implementing a common ASTModel interface.

I'd be concerned that the code generator could have too many special cases
that are spread out and harder to test.

Both would satisfy what I'm looking for, though I think the adapter would be
a little easier overall.

Later,
-- Scott


From scott at javadude.com  Sun May 15 20:38:06 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Sun May 15 20:38:20 2005
Subject: [antlr-interest] Yet another idea for a completly
	genericTreeParser
In-Reply-To: <186FD68C-83DD-44E4-8D6F-D0BFF505985C@cs.usfca.edu>
Message-ID: <200505160434.j4G4Y4LI018249@s2.eroute.net>

The penalty is negligible (an extra method call which usually doesn't do
much but call a method in the real model.

I just thought of the real drawback here. You have to generate multiple
times to deal with different trees.

The bigger problem IMHO is coding-time compiler checking. With an adapter
solution (what I proposed), the adapter gets full compile time checking
against the AST Model interface *and* the target data structure.

With the code gen approach, everything is strings, and they could be rather
spread out.

Also with the code gen, you can really only do very direct translations that
Ter anticipated and provided hooks for. Using the ASTModel approach, you can
do whatever you want behind the scenes.

The key problem is:

> Loring and Monty and I discussed something like this for 
> tokens and ASTs at the Oregon ANTLR cabal.  But we thought in 
> terms of what properties you could have.  Perhaps we should 
> go further and specify the templates used to do common 
> operations.  For example, here's one kind of tree access 
> using ST notation:

You need to anticipate all the hooks instead of just exposing one simple
interface.


BTE: You should use generics in JDK 1.5.0. No more casting...


Why is the AST model approach so abhorrent to y'all??? I don't get it. It's
clean, simple, has several precedents, and is a simple application of a
common design pattern.

What are the problems with the ASTModel approach??? The *only* theoretical
problem is an extra method call, and let's face it, an extra method call is
negligible.


Why add complexity of code generation when the same problem can be solved by
exposing a single interface for the entire tree.

[LORING - Don't bother to reply to this post as we will obviously never
agree on this.]

PLEASE JUST MAKE IT AN OPTION!!! That's all I'm asking!

Later,
-- Scott




From demakov at ispras.ru  Mon May 16 00:07:04 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon May 16 00:07:10 2005
Subject: [antlr-interest] Distinguish vars starting from digit and integers
References: <opsqtfzdvjn2x057@cad.kiev.ua>
Message-ID: <005e01c559e5$ddbcadc0$8cc79553@marlboro>

For example, you can create lexer rule that match both variable names and integers
with action analyzing token text and qualifying token as name if it contains letters,
as integer literal - otherwise.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com

----- Original Message ----- 
From: "Alexander N. Royenko" <Alexander.Royenko@cad.kiev.ua>
To: <antlr-interest@antlr.org>
Sent: Sunday, May 15, 2005 4:07 PM
Subject: [antlr-interest] Distinguish vars starting from digit and integers


> Hi, all
> 
> Can someone point me to the right way how to distinguish variables that  
> starting from digit char like  00jSeven  and integers like 1982?
> 
> Thanks
> 
> -- 
> Regards,
> Alexander.

From Loring.G.Craymer at jpl.nasa.gov  Mon May 16 01:36:25 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Mon May 16 01:36:28 2005
Subject: [antlr-interest] Yet another idea for a completly
	genericTreeParser
In-Reply-To: <186FD68C-83DD-44E4-8D6F-D0BFF505985C@cs.usfca.edu>
Message-ID: <200505160836.j4G8aPo2016571@xmta3.jpl.nasa.gov>

The different approaches have different associated costs and tradeoffs.  At
issue are

1.)  Runtime overhead
	a.)  Performance
	b.)  Memory Usage
2.)  Implementation
3.)  Maintenance
	a.)  Who does it?
	b.)  How well will it be carried out.
4.)  Generality/flexibility
5.)  Capability

Scott's approach wins in 1b, loses in 1a--imposes a constant overhead on
ANTLR programs--ties mine in 2 and 3, and is slightly inferior to mine in 4
and 5 (monolithic implementation versus distributed functionality).

My approach--wrap the tree root with an AST adaptor class, and wrap and
child accessed through an adaptor--imposes no additional overhead to typical
ANTLR use, but has an associated cost of between 10 and 1000 wrapper objects
at runtime (probably under 50) since any object in play within the tree
walker has a wrapper.  That is, it loses in 1b, is second to Prashant's
approach for 1a, and wins (tied with Scott) in 2 and 3.  Prashant's approach
wins in 5 if the implementation supports generating trees with a hybrid
structure.

Prashant's approach wins in 1, since the added overhead is at compile time
(ANTLR invocation) and not runtime.  However, that does not mean his
approach is optimal:  ANTLR is designed for linked sibling lists, not for
child arrays.  The performance differential for sibling lists between the
adaptor approach and the compilation approach will be small.  The
compilation approach has the highest implementation cost--an adaptor will
cost 50-100 lines of code in the typical case, and more for complex tree
structures; Prashant's approach, on the other hand, will touch most
generated code to adapt between tree models (Ter listed the two common
structures; hybrid tree structures are also possible).  Also, the
implementation cost is borne by the ANTLR maintainers (Ter plus the backend
authors), not by the application developer.  Maintenance is in the hands of
the ANTLR maintainers with Prashant's approach.  That translates to a lose
in 3a, unless the ANTLR maintainer has applications depending on the
capability, and also in 3b for the same reason.  This approach probably
loses to the per-AST adaptor approach for 4, although it could break even if
significant effort were put into supporting hybrid tree structures (both
linked sibling lists and child arrays present).

The take home message?  The current level of support is near-optimal, as
surprising as that might seem.

--Loring

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Terence Parr
> Sent: Sunday, May 15, 2005 8:33 AM
> To: ANTLR Interest
> Subject: Re: [antlr-interest] Yet another idea for a completly
> genericTreeParser
> 
> 
> On May 14, 2005, at 11:34 PM, Prashant Deva wrote:
> 
> > I have a sort of real twisted idea on how to make Antlr parse any
> > kind of tree.
> >
> > So lets see,
> > Problem: Currently we cannot parse stuff like xml dom trees since
> > their ast interface differs from the AST interface used by antlr tree
> > parsers.
> >
> > Solution: All the solution suggested till now suggest to somehow adapt
> > the 2 different interfaces.
> > I have got a pretty twisted sort of solution for the whole thing.
> >
> > What if you could change antlr itself to handle exactly your tree's
> > interface?
> 
> Hi Prashant.  I like it. :)  A very interesting twist.  How general
> would it have to be I wonder to be useful.  For example, could it be
> just the method names to use?  Probably not.  I think that if we
> could agree on the available arguments to functions such as the child
> index etc... we could let the user specify templates.  This is one
> nice thing about using StringTemplate for code gen.
> 
> Loring and Monty and I discussed something like this for tokens and
> ASTs at the Oregon ANTLR cabal.  But we thought in terms of what
> properties you could have.  Perhaps we should go further and specify
> the templates used to do common operations.  For example, here's one
> kind of tree access using ST notation:
> 
> getChild(node,index) ::= "node.getChild(index)"
> 
> and here's another:
> 
> getChild(node,index) ::= "node.children[index]"
> 
> Interesting.  In this way there would be no penalty going through a
> tree adapter for example to access the other tree.
> 
> Hmm...I also like no casting...I'm getting mighty tired of casting
> when using data structures I can tell ya!
> 
> Great line of thinking!  Can anybody think of problems?
> 
> Ter

From scott at javadude.com  Mon May 16 04:38:02 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Mon May 16 04:38:33 2005
Subject: [antlr-interest] Yet another idea for a completlygenericTreeParser
In-Reply-To: <200505160836.j4G8aPo2016571@xmta3.jpl.nasa.gov>
Message-ID: <200505161234.j4GCY1LE012528@s2.eroute.net>

> [Loring's analysis of ASTNode, ASTModel, and Code generator tree parser
approaches]

A fairly resonable analysis, though I don't agree with the comments on 4&5
RE AST vs ASTModel or the final analysis. I do agree with the analysis on
the generator idea. (It's an interesting idea, but I think too much
impl/maintenance overhead)

Generality/Capability of ASTNode vs ASTModel is almost the same. I've
demonstrated that with the code example I posted. I challenge you to show me
something that the AST node approach can do that the AST Model cannot.

However, because ASTModel manages the entire tree, it has more context than
a single ASTNode, which can increase its capability. For example, the
ASTModel could use a hashmap of parent/child relationships to represent a
tree, whereas the ASTNode approach cannot.


GC aside, performance of ASTNode vs ASTModel is exactly equivalent if the
target data cannot be made to implement ASTNode or ASTModel. Both impose an
extra method call. If the data can be made to implement ASTNode or ASTModel,
there's no adapter needed, but depending on the actual data structure, the
ASTModel may impose a single extra method call to get to the real data,
whereas ASTNodes may be able to be the real data itself.

[Note that I feel unless you're parsing ANTLR-generated ASTs, the end data
should definitely *not* implement ASTNode directly, as that ties the data to
ANTLR. Adapters are the right approach for non-ANTLR generated trees, and
thus both ASTNode and ASTModel have the same method-call overhead]


When GC is considered, the ASTModel approach performs better because fewer
objects == less frequent GC.

The only other difference between ASTNode and ASTModel is memory usage.
Stating 50 extra objects is incorrect. You're only considering "single run"
scenarios.

Again, consider a scenario like parsing eclipse ASTs or a user request on a
web server. These are long-running processes which will invoke ANTLR
hundreds, thousands, or millions of times while they're running.

In such a case, 50 extra nodes each run becomes incredibly significant to
the GC frequency. (For a tree such as an AST of a Java program being edited
in Eclipse, this number would significantly higher, likely 300-1000 or more)

Suppose I'm editing for an hour in eclipse and the AST is parsed around 10
times per minute. That's 600 parses, x 50 objects, or 3000 objects to
collect. Compare this to 600 objects (ASTModel). [Using a higher estimate of
500 nodes, we're now at 30000 objects vs 600]

Note that the overhead of the ASTModel approach is constant; one object per
parse. The overhead of the ASTNode approach grows with the size of the tree.


In addition, the ASTModel approach easily allows the ASTNode approach as
well. All you need is a "default" ASTModel that works in terms of ASTNodes.
(Just like Swing's DefaultTreeModel uses TreeNodes.) Alternatively the code
generator could have a switch to generate one vs the other, which makes the
performance between ASTNode and ASTModel equal instead of one extra method
call to use ASTModel to work with ASTNodes.


Hence Flexibility is clearly better with the ASTModel, as it allows a
grammar writer to choose the style they desire.


The optimal solution is clearly the ASTModel approach on all fronts except
performance (only when compared to Prashant's proposal). Even then, the
performance difference is a negligible method call.


My 50c,
-- Scott


From prashant.deva at gmail.com  Mon May 16 06:00:39 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Mon May 16 06:00:43 2005
Subject: [antlr-interest] Yet another idea for a completly
	genericTreeParser
In-Reply-To: <200505160836.j4G8aPo2016571@xmta3.jpl.nasa.gov>
References: <186FD68C-83DD-44E4-8D6F-D0BFF505985C@cs.usfca.edu>
	<200505160836.j4G8aPo2016571@xmta3.jpl.nasa.gov>
Message-ID: <41fed8f805051606001fe4783@mail.gmail.com>

>Maintenance is in the hands of
> the ANTLR maintainers with Prashant's approach.  That translates to a lose
> in 3a, unless the ANTLR maintainer has applications depending on the
> capability, and also in 3b for the same reason. 

That depends on how easy it is to change the codeGen. As I said this
can be done in a real simple way inside an ide.
If its simple enough then common users can modify it to suit their
trees and the maintenance part can be shifted to the users, instead of
antlr maintainers.

PRASHANT

On 5/16/05, Loring Craymer <Loring.G.Craymer@jpl.nasa.gov> wrote:
> The different approaches have different associated costs and tradeoffs.  At
> issue are
> 
> 1.)  Runtime overhead
>         a.)  Performance
>         b.)  Memory Usage
> 2.)  Implementation
> 3.)  Maintenance
>         a.)  Who does it?
>         b.)  How well will it be carried out.
> 4.)  Generality/flexibility
> 5.)  Capability
> 
> Scott's approach wins in 1b, loses in 1a--imposes a constant overhead on
> ANTLR programs--ties mine in 2 and 3, and is slightly inferior to mine in 4
> and 5 (monolithic implementation versus distributed functionality).
> 
> My approach--wrap the tree root with an AST adaptor class, and wrap and
> child accessed through an adaptor--imposes no additional overhead to typical
> ANTLR use, but has an associated cost of between 10 and 1000 wrapper objects
> at runtime (probably under 50) since any object in play within the tree
> walker has a wrapper.  That is, it loses in 1b, is second to Prashant's
> approach for 1a, and wins (tied with Scott) in 2 and 3.  Prashant's approach
> wins in 5 if the implementation supports generating trees with a hybrid
> structure.
> 
> Prashant's approach wins in 1, since the added overhead is at compile time
> (ANTLR invocation) and not runtime.  However, that does not mean his
> approach is optimal:  ANTLR is designed for linked sibling lists, not for
> child arrays.  The performance differential for sibling lists between the
> adaptor approach and the compilation approach will be small.  The
> compilation approach has the highest implementation cost--an adaptor will
> cost 50-100 lines of code in the typical case, and more for complex tree
> structures; Prashant's approach, on the other hand, will touch most
> generated code to adapt between tree models (Ter listed the two common
> structures; hybrid tree structures are also possible).  Also, the
> implementation cost is borne by the ANTLR maintainers (Ter plus the backend
> authors), not by the application developer.  Maintenance is in the hands of
> the ANTLR maintainers with Prashant's approach.  That translates to a lose
> in 3a, unless the ANTLR maintainer has applications depending on the
> capability, and also in 3b for the same reason.  This approach probably
> loses to the per-AST adaptor approach for 4, although it could break even if
> significant effort were put into supporting hybrid tree structures (both
> linked sibling lists and child arrays present).
> 
> The take home message?  The current level of support is near-optimal, as
> surprising as that might seem.
> 
> --Loring
> 
> > -----Original Message-----
> > From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> > bounces@antlr.org] On Behalf Of Terence Parr
> > Sent: Sunday, May 15, 2005 8:33 AM
> > To: ANTLR Interest
> > Subject: Re: [antlr-interest] Yet another idea for a completly
> > genericTreeParser
> >
> >
> > On May 14, 2005, at 11:34 PM, Prashant Deva wrote:
> >
> > > I have a sort of real twisted idea on how to make Antlr parse any
> > > kind of tree.
> > >
> > > So lets see,
> > > Problem: Currently we cannot parse stuff like xml dom trees since
> > > their ast interface differs from the AST interface used by antlr tree
> > > parsers.
> > >
> > > Solution: All the solution suggested till now suggest to somehow adapt
> > > the 2 different interfaces.
> > > I have got a pretty twisted sort of solution for the whole thing.
> > >
> > > What if you could change antlr itself to handle exactly your tree's
> > > interface?
> >
> > Hi Prashant.  I like it. :)  A very interesting twist.  How general
> > would it have to be I wonder to be useful.  For example, could it be
> > just the method names to use?  Probably not.  I think that if we
> > could agree on the available arguments to functions such as the child
> > index etc... we could let the user specify templates.  This is one
> > nice thing about using StringTemplate for code gen.
> >
> > Loring and Monty and I discussed something like this for tokens and
> > ASTs at the Oregon ANTLR cabal.  But we thought in terms of what
> > properties you could have.  Perhaps we should go further and specify
> > the templates used to do common operations.  For example, here's one
> > kind of tree access using ST notation:
> >
> > getChild(node,index) ::= "node.getChild(index)"
> >
> > and here's another:
> >
> > getChild(node,index) ::= "node.children[index]"
> >
> > Interesting.  In this way there would be no penalty going through a
> > tree adapter for example to access the other tree.
> >
> > Hmm...I also like no casting...I'm getting mighty tired of casting
> > when using data structures I can tell ya!
> >
> > Great line of thinking!  Can anybody think of problems?
> >
> > Ter
> 
>
From ewbank at gmail.com  Mon May 16 08:30:37 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon May 16 08:30:41 2005
Subject: [antlr-interest] ANTLR C++ problem on AIX?
Message-ID: <dd3a065f0505160830697061c@mail.gmail.com>

When using C++ mode, has anyone else seen problems with xlC on AIX platforms?

We are getting segv's when a user-defined function that throws an
exception is called from within a #() expression in a user-defined
action; moving the function call out of the #() resolves/sidesteps the
problem.

Thanks for any comments,
- Bryan


What we are seeing:
---------
platform: rs6k64-ibm-aix5.1 architecture
compiler: xlC -- VisualAge C++ Professional / C for AIX Compiler, Version 6
problem:  segv's; resolved by code rewrite...

// SEGVs happen when constructNode() throws an exception
RefTreeNode expr = #( e, #( a, m, constructNode(v) ) );

// Moving the function that can throw errors out of the ANTLR construction
// bypasses the problem
RefTreeNode mv = constructNode(v);
RefTreeNode expr = #( e, #( a, m, mv ) );
From gt54-antlr at cyconix.com  Mon May 16 08:56:01 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Mon May 16 09:24:59 2005
Subject: [antlr-interest] How does AST construction work?
Message-ID: <4288C291.1080609@cyconix.com>

I'm working my way through the ref manual, and I'm having a problem 
understanding how an AST is created from a parser grammar. The 'example 
tree walker' grammar in the manual looks like this:

expr:   mexpr (PLUS^ mexpr)* SEMI!
     ;

mexpr
     :   atom (STAR^ atom)*
     ;

This is much the same as the 'calc' example in the distribution, and if 
I make and run this (the C++ version), and enter

 > Main
 > 2+4*5;

Then I get the following output from parser.getAST().toStringTree():

  ( + 2 ( * 4 5 ) )

As expected. But how does this happen? Only PLUS and STAR have AST 
annotations - how does ANTLR decide where to put 'mexpr' and 'atom' in 
the tree? And if I just enter a single digit as an 'expr' then the tree 
(of course) only has one entry - but is it a root and, if so, how?

Thanks -

Paul

From ewbank at gmail.com  Mon May 16 10:20:56 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon May 16 10:20:59 2005
Subject: [antlr-interest] How does AST construction work?
In-Reply-To: <4288C291.1080609@cyconix.com>
References: <4288C291.1080609@cyconix.com>
Message-ID: <dd3a065f050516102012b7e98b@mail.gmail.com>

Try removing the "^" from your example and look at the results.  This
should help...

Be default, ANTLR builds a list of all elements of a production - not a tree.

Each token that is matched in a grammar will be appended to a list,
then that list will be returned by the production.

You can override the default by using the "^" operator to make that
node the parent of the *current* list, and the "!" operator to prevent
something from being added to that list.  I emphasize current above
because it's possible to see more than one "^" operator in a
production - hard to grok, but sometimes very handy.

This model allows, for example, something like this:

   /*
    * result is #( LEFT_CURLY E1 E1 E1 E1 )
    */
   exprlist:  LEFT_CURLY^ expr_comma_list RIGHT_CURLY! ;
   expr_comma_list: expr ( COMMA! expr )* ;
   expr: E1;

to produce a single node representing the exprlist that contains every
expression matched by expr.  Generating lists rather than trees
isolates the shape of the resultant AST from the productions used to
match it.

The single-digit match you are seeing as a tree (e.g., in expr, above)
is explained away because it is constructing a a list with one element
-- which happens to work as if it were a tree.

> As expected. But how does this happen? Only PLUS and STAR have AST
> annotations - how does ANTLR decide where to put 'mexpr' and 'atom' in
> the tree? And if I just enter a single digit as an 'expr' then the tree
> (of course) only has one entry - but is it a root and, if so, how?
From ewbank at gmail.com  Mon May 16 10:24:38 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon May 16 10:24:40 2005
Subject: [antlr-interest] Re: ANTLR C++ problem on AIX?
In-Reply-To: <dd3a065f0505160830697061c@mail.gmail.com>
References: <dd3a065f0505160830697061c@mail.gmail.com>
Message-ID: <dd3a065f05051610242e858d28@mail.gmail.com>

Followup:

As Rosanne Rosanadana says:  "Oh...  Heh, heh.... Never Mind".

We've been bit by sequence points.  C++ defines operations only at
sequence points - more or less, at each ";" in the input - and
operation sequencing is undefined below that level.

One compiler was evaluating expression elements L-to-R ahead of time;
the other was evaluating them R-to-L.  Pulling the intermediate into a
separate statement ensured that (at the sequence point introduced) the
intermediate was defined.

I feel so silly for asking in the first place...

On 5/16/05, Bryan Ewbank <ewbank@gmail.com> wrote:
> When using C++ mode, has anyone else seen problems with xlC on AIX platforms?
> 
> We are getting segv's when a user-defined function that throws an
> exception is called from within a #() expression in a user-defined
> action; moving the function call out of the #() resolves/sidesteps the
> problem.
> 
> Thanks for any comments,
> - Bryan
> 
> What we are seeing:
> ---------
> platform: rs6k64-ibm-aix5.1 architecture
> compiler: xlC -- VisualAge C++ Professional / C for AIX Compiler, Version 6
> problem:  segv's; resolved by code rewrite...
> 
> // SEGVs happen when constructNode() throws an exception
> RefTreeNode expr = #( e, #( a, m, constructNode(v) ) );
> 
> // Moving the function that can throw errors out of the ANTLR construction
> // bypasses the problem
> RefTreeNode mv = constructNode(v);
> RefTreeNode expr = #( e, #( a, m, mv ) );
>
From tsan at tdias.com  Mon May 16 11:38:29 2005
From: tsan at tdias.com (Tjerk Santegoeds)
Date: Mon May 16 11:38:34 2005
Subject: [antlr-interest] Python antlr.py patch
Message-ID: <4288E8A5.5080300@tdias.com>


I'm currently playing a bit with ANTLR 2.7.5 and Python and believe I 
might have found some small bugs.

Attached it a patch that solves some problems for me.

Regards,
    Tjerk Santegoeds.
-------------- next part --------------
Index: antlr.py
===================================================================
--- antlr.py	(revision 9)
+++ antlr.py	(working copy)
@@ -986,7 +986,7 @@
         if isinstance(m,int):
             self.hideMask.add(m)
             return
-        if isinstance(m.BitMask):
+        if isinstance(m,BitMask):
             self.hideMask = m
             return
 
@@ -1609,10 +1609,13 @@
         self.set(bit,not off)
 
     def at(self,bit):
-        i = self.wordNumber(bit)
-        v = self.data[i]
-        m = self.bitMask(bit)
-        return v & m
+        try:
+            i = self.wordNumber(bit)
+            v = self.data[i]
+            m = self.bitMask(bit)
+            return v & m
+        except IndexError:
+            return False
 
 
 ###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###
@@ -2520,7 +2523,7 @@
         CommonAST.initialize(self,*args)
         if args and isinstance(args[0],Token):
             assert isinstance(args[0],CommonHiddenStreamToken)
-            self.hideenBefore = args[0].getHiddenBefore()
+            self.hiddenBefore = args[0].getHiddenBefore()
             self.hiddenAfter  = args[0].getHiddenAfter()
 
 ###xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx###
-------------- next part --------------
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.308 / Virus Database: 266.11.10 - Release Date: 13/05/2005
From monty at codetransform.com  Mon May 16 08:53:55 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Mon May 16 11:54:24 2005
Subject: [antlr-interest] SUCCESS! (mostly) detecting transitions
	in	stanza-based files
In-Reply-To: <42837015.8040105@lotuscat.com>
References: <20050509201853.70759.qmail@web31414.mail.mud.yahoo.com>	<4280B9BE.10905@lotuscat.com>	<42810CF9.7080807@gmail.com>
	<42813199.9010402@lotuscat.com>	<42827D1A.5050803@lotuscat.com>
	<42837015.8040105@lotuscat.com>
Message-ID: <4288C213.4090404@codetransform.com>

Chris Black wrote:
...
 > I'd like to
> restate my call for a usable TokenQueue in the default ANTLR package 
> since I've found this token filtering approach to be quite helpful. See 
> http://www.codetransform.com/filterexample.html for Monty's article that 
> I based my filter on.
> 
> Thanks again to all!
> Chris

I'm glad you were able to get the Token Filter approach to work for you. 
  It's definately something that can be better integrated into ANTLR the 
tool, and for certain problems it is the best approach.

I think Ter is hoping that these context sensitive lexing issues will 
disappear altogether with his new DFA based lexer.  I'd encourage you to 
try solving your problem with ANTLR 3 once Ter gets it out into the 
world.  With luck that may be this summer.

Sorry I couldn't jump into this thread while it was alive, I was on 
holiday and then buried in work afterwards.

Monty
From Loring.G.Craymer at jpl.nasa.gov  Mon May 16 13:22:53 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Mon May 16 13:22:56 2005
Subject: [antlr-interest] Yet another idea for a completlygenericTreeParser
In-Reply-To: <200505161234.j4GCY1LE012528@s2.eroute.net>
References: <200505160836.j4G8aPo2016571@xmta3.jpl.nasa.gov>
	<200505161234.j4GCY1LE012528@s2.eroute.net>
Message-ID: <6.2.1.2.2.20050516121939.029580d0@mail.jpl.nasa.gov>

At 04:38 AM 5/16/2005, Scott Stanchfield wrote:
> > [Loring's analysis of ASTNode, ASTModel, and Code generator tree parser
>approaches]
>
>A fairly resonable analysis, though I don't agree with the comments on 4&5
>RE AST vs ASTModel or the final analysis. I do agree with the analysis on
>the generator idea. (It's an interesting idea, but I think too much
>impl/maintenance overhead)
>
>Generality/Capability of ASTNode vs ASTModel is almost the same. I've
>demonstrated that with the code example I posted. I challenge you to show me
>something that the AST node approach can do that the AST Model cannot.

Flexibility is the differentiator here.  With a per-node adaptor, it is 
easy to plug in/re-use an adaptor type to deal with a subtree type.  The 
single adaptor leads to "every tree composite has a unique adaptor".  Think 
of having an adaptor factory that wraps each node type with an adaptor 
specific to that node type.


>However, because ASTModel manages the entire tree, it has more context than
>a single ASTNode, which can increase its capability. For example, the
>ASTModel could use a hashmap of parent/child relationships to represent a
>tree, whereas the ASTNode approach cannot.

Not true--you can always delegate adaptor functionality to a singleton 
state object.  I can't see a case where you would want to, though--the 
intelligence should be in the ANTLR grammar, not the adaptor.



>GC aside, performance of ASTNode vs ASTModel is exactly equivalent if the
>target data cannot be made to implement ASTNode or ASTModel. Both impose an
>extra method call. If the data can be made to implement ASTNode or ASTModel,
>there's no adapter needed, but depending on the actual data structure, the
>ASTModel may impose a single extra method call to get to the real data,
>whereas ASTNodes may be able to be the real data itself.

With a heterogeneous tree, your ASTModel will have an additional case 
statement.  Not a big performance impact, true, but the ASTNode approach 
will be slightly faster since each subtree has its own adaptor and no case 
statement.  The real performance differential is in the typical case where 
you don't need an adaptor, however.


>[Note that I feel unless you're parsing ANTLR-generated ASTs, the end data
>should definitely *not* implement ASTNode directly, as that ties the data to
>ANTLR. Adapters are the right approach for non-ANTLR generated trees, and
>thus both ASTNode and ASTModel have the same method-call overhead]
>
>
>When GC is considered, the ASTModel approach performs better because fewer
>objects == less frequent GC.
>
>The only other difference between ASTNode and ASTModel is memory usage.
>Stating 50 extra objects is incorrect. You're only considering "single run"
>scenarios.

No--the assumptions are that rules nest a max of about 10 levels deep and 
there are about 10 elements per rule worst case.  In practice, it is 
unlikely that you would keep all references in a rule; more likely, you 
would reuse adaptor reference variables and the total would be down around 
20.  Adaptors don't accumulate--instead, you have a small set of adaptors 
live at any one time.


>Again, consider a scenario like parsing eclipse ASTs or a user request on a
>web server. These are long-running processes which will invoke ANTLR
>hundreds, thousands, or millions of times while they're running.
>
>In such a case, 50 extra nodes each run becomes incredibly significant to
>the GC frequency. (For a tree such as an AST of a Java program being edited
>in Eclipse, this number would significantly higher, likely 300-1000 or more)
>
>Suppose I'm editing for an hour in eclipse and the AST is parsed around 10
>times per minute. That's 600 parses, x 50 objects, or 3000 objects to
>collect. Compare this to 600 objects (ASTModel). [Using a higher estimate of
>500 nodes, we're now at 30000 objects vs 600]

These are very small numbers for an hour's run--a fraction of a % of the 
total objects garbage collected.  Not to mention that 600 live nodes would 
be a sign of a pathological application.


>Note that the overhead of the ASTModel approach is constant; one object per
>parse. The overhead of the ASTNode approach grows with the size of the tree.

Not true.  It grows with the depth of the tree, not the size of the tree.



>In addition, the ASTModel approach easily allows the ASTNode approach as
>well. All you need is a "default" ASTModel that works in terms of ASTNodes.
>(Just like Swing's DefaultTreeModel uses TreeNodes.) Alternatively the code
>generator could have a switch to generate one vs the other, which makes the
>performance between ASTNode and ASTModel equal instead of one extra method
>call to use ASTModel to work with ASTNodes.

"It is possible to get the worst of both worlds if you really want to", eh?


>Hence Flexibility is clearly better with the ASTModel, as it allows a
>grammar writer to choose the style they desire.
>
>The optimal solution is clearly the ASTModel approach on all fronts except
>performance (only when compared to Prashant's proposal). Even then, the
>performance difference is a negligible method call.

It imposes an unnecessary penalty for routine use (i.e.:  it loses on 
performance grounds to both of the alternatives), adds an additional 
element of complexity to ANTLR, and the benefits are minimal at best (and I 
think that that is being generous).  Clear signs of a creeping featuritis 
request.  Good design is often about streamlining and rarely about adding 
barnacles (politics can make adding barnacles a part of system design that 
adds perceived value to sponsors--that can be "good" design practice in 
some cases).

As I've pointed out, it is possible to do everything that you originally 
requested with ANTLR 2 and per-live-node adaptors.  If you have problems 
that require ANTLR to work with non-ANTLR trees, why haven't you 
experimented with the per-node adaptor model to see if you can solve them, 
yet?

--Loring



>My 50c,
>-- Scott


From parrt at cs.usfca.edu  Mon May 16 13:43:27 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon May 16 13:43:06 2005
Subject: [antlr-interest] added challenge to antlr.org submit page
Message-ID: <BBE29C6B-4F54-4766-9B07-C3CDEFFE8A88@cs.usfca.edu>

Howdy,

So I got tired of the spam people were adding to the article section  
on the home page of antlr so I added a challenge that I'm assuming a  
spammer would not be able to casually answer:

http://www.antlr.org/submit/challenge?type=article

That should be the end of spam for the site. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Mon May 16 13:50:43 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon May 16 13:50:23 2005
Subject: [antlr-interest] ANTLR2005 workshop status
Message-ID: <F763869F-32EF-4220-AC49-62624F44030E@cs.usfca.edu>

Howdy folks,

I am in the process still of getting ACM SIGPLAN "in cooperation"  
status, but just a heads up...the workshop will be Oct 20-21 (Thur- 
Fri) this Fall at BEA Systems downtown San Francisco:

http://www.cs.usfca.edu/ANTLR2005.shtml

Please reserve the date.  We will only be able to handle 30 people  
max as that is the room size.  As usual, we are interested in  
presentations and/or short papers by practitioners and academics  
alike :)

Here is the summary from last year's ANTLR2004:

http://www.antlr.org/workshop/ANTLR2004/summary.tml

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From antlr at shmuelhome.mine.nu  Mon May 16 15:17:13 2005
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Mon May 16 15:18:01 2005
Subject: [antlr-interest] added challenge to antlr.org submit page
In-Reply-To: <BBE29C6B-4F54-4766-9B07-C3CDEFFE8A88@cs.usfca.edu>
References: <BBE29C6B-4F54-4766-9B07-C3CDEFFE8A88@cs.usfca.edu>
Message-ID: <42891BE9.9080001@shmuelhome.mine.nu>

Good online experiment site. 1323445798459 fails

Terence Parr wrote:
> Howdy,
> 
> So I got tired of the spam people were adding to the article section  on 
> the home page of antlr so I added a challenge that I'm assuming a  
> spammer would not be able to casually answer:
> 
> http://www.antlr.org/submit/challenge?type=article
> 
> That should be the end of spam for the site. :)
> 
> Ter
> -- 
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> 
> 
> 



-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.308 / Virus Database: 266.11.10 - Release Date: 5/13/2005



-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.308 / Virus Database: 266.11.10 - Release Date: 5/13/2005

From parrt at cs.usfca.edu  Mon May 16 15:25:03 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon May 16 15:24:44 2005
Subject: [antlr-interest] added challenge to antlr.org submit page
In-Reply-To: <42891BE9.9080001@shmuelhome.mine.nu>
References: <BBE29C6B-4F54-4766-9B07-C3CDEFFE8A88@cs.usfca.edu>
	<42891BE9.9080001@shmuelhome.mine.nu>
Message-ID: <0D1336B3-5BF0-4D29-AB8F-61677760BDC7@cs.usfca.edu>

Damn!  Well, I guess I didn't expect anyone to go beyond a 32-bit  
number ;)  I used Integer.parseInt to verify rather than a reg ex.

Try one that is <= 4 billion :)

Ter
On May 16, 2005, at 3:17 PM, shmuel siegel wrote:

> Good online experiment site. 1323445798459 fails
>
> Terence Parr wrote:
>
>> Howdy,
>> So I got tired of the spam people were adding to the article  
>> section  on the home page of antlr so I added a challenge that I'm  
>> assuming a  spammer would not be able to casually answer:
>> http://www.antlr.org/submit/challenge?type=article
>> That should be the end of spam for the site. :)
>> Ter
>> -- 
>> CS Professor & Grad Director, University of San Francisco
>> Creator, ANTLR Parser Generator, http://www.antlr.org
>> Cofounder, http://www.jguru.com
>>
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From sarobenalt at yahoo.com  Mon May 16 15:46:09 2005
From: sarobenalt at yahoo.com (Steven Robenalt)
Date: Mon May 16 15:55:56 2005
Subject: [antlr-interest] Problem with Tree Parser
Message-ID: <20050516224609.67483.qmail@web30407.mail.mud.yahoo.com>

Hi all,

I'm having trouble with a tree parser that I'm just
starting to build based on the Standard C parser. I'm
using the GnuCTreeWalker/GnuCEmitter as the starting
point, but this particular problem doesn't seem to be
related to the grammar itself.

In brief, I am attempting to parse a simple (no
preprocessor directives) header file containing only
structure declarations. The parser generates what
appears to be a complete and valid AST using automatic
AST generation. The tree parser is then applied to
simply convert the parse tree back to an equivalent
declaration. 

After all of the field declarations in the structure
have been emitted, The tree parser halts with a
ClassCastException when it encounters an ASTNULLType
node and tries to typecast it to a TNode:
 
     return (TNode)_t; 

where _t is ASTNULLType at this point in the parse.
Unfortunately, although ASTNULLType and TNode both
have a common ancestor interface, the classes are not
compatible for a type cast to TNode. This doesn't
appear to me to be related to the grammar, but rather
with the TNode class as related to a built-in ANTLR
type. I would appreciate hearing from anyone who may
have encountered this problem, particularly if you
have done any useful work with the example C grammar.
In particular, I would like to know if there is a
workaround or if I need to add something to the
grammar file to handle this situation.

I could post the grammar file, etc. but it would be
easier to use the posted example C grammar directly to
parse a struct declaration since I really haven't
deviated from it significantly at this point in the
process.

Thanks for any help you can offer,
- Steve Robenalt
sarobenalt@yahoo.com


From johnm-antlr at non.net  Mon May 16 16:31:25 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon May 16 16:31:08 2005
Subject: [antlr-interest] Problem with Tree Parser
In-Reply-To: <20050516224609.67483.qmail@web30407.mail.mud.yahoo.com>
References: <20050516224609.67483.qmail@web30407.mail.mud.yahoo.com>
Message-ID: <17033.11597.486886.553845@despot.non.net>

That sounds familiar. 

I have some fixes that aren't in the antlr.org version of the C grammars.
I'll dig through them tonight/in-the-morning and send you an update.

Take care,
	John

From ewbank at gmail.com  Mon May 16 16:48:18 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon May 16 16:48:21 2005
Subject: [antlr-interest] added challenge to antlr.org submit page
In-Reply-To: <0D1336B3-5BF0-4D29-AB8F-61677760BDC7@cs.usfca.edu>
References: <BBE29C6B-4F54-4766-9B07-C3CDEFFE8A88@cs.usfca.edu>
	<42891BE9.9080001@shmuelhome.mine.nu>
	<0D1336B3-5BF0-4D29-AB8F-61677760BDC7@cs.usfca.edu>
Message-ID: <dd3a065f05051616483747e1de@mail.gmail.com>

But Terence, you never said it was an "integer", just a sequence of digits ;-)

Get the right requirements!

On 5/16/05, Terence Parr <parrt@cs.usfca.edu> wrote:
> Damn!  Well, I guess I didn't expect anyone to go beyond a 32-bit
> number ;)  I used Integer.parseInt to verify rather than a reg ex.
From prashant.deva at gmail.com  Mon May 16 17:54:58 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Mon May 16 17:55:01 2005
Subject: [antlr-interest] Downloading papers from ACM
Message-ID: <41fed8f805051617544f66f14f@mail.gmail.com>

This is a little off topic, but i am sure someone can answer this.

I need to download some papers from acm . 

Are there any limitations on the pdfs purchased from acm, like you
cannot copy them to a diff comp or print them or something like that??

PRASHANT
From parrt at cs.usfca.edu  Mon May 16 17:58:54 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon May 16 17:58:39 2005
Subject: [antlr-interest] added challenge to antlr.org submit page
In-Reply-To: <dd3a065f05051616483747e1de@mail.gmail.com>
References: <BBE29C6B-4F54-4766-9B07-C3CDEFFE8A88@cs.usfca.edu>
	<42891BE9.9080001@shmuelhome.mine.nu>
	<0D1336B3-5BF0-4D29-AB8F-61677760BDC7@cs.usfca.edu>
	<dd3a065f05051616483747e1de@mail.gmail.com>
Message-ID: <F9DC31AB-7D8C-4EED-A6F3-547BC4919BF8@cs.usfca.edu>


On May 16, 2005, at 4:48 PM, Bryan Ewbank wrote:

> But Terence, you never said it was an "integer", just a sequence of  
> digits ;-)
>
> Get the right requirements!
I know I was banking on the laziness of programmers (as well as my  
own for just using Integer.parseInt)! ;)
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From scott at javadude.com  Mon May 16 22:14:29 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Mon May 16 22:15:11 2005
Subject: [antlr-interest] Yet another idea for a completlygenericTreeParser
In-Reply-To: <6.2.1.2.2.20050516121939.029580d0@mail.jpl.nasa.gov>
Message-ID: <200505170610.j4H6ARLE032742@s2.eroute.net>

Loring, I'm not getting into this argument with you again. Like I said, we
obviously don't agree and it's a waste of everyone's time.

People have heard both of our arguments (and know I'm right ;) ).

If this doesn't get into ANTLR I'll have to do it myself, because there's no
way I'm going through the overhead of tons of extra nodes or object pooling
to avoid the extra nodes if I can just have a single model object.

End of line.

-- Scott


From gt54-antlr at cyconix.com  Mon May 16 11:03:14 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Mon May 16 22:19:09 2005
Subject: [antlr-interest] Documentation?
Message-ID: <4288E062.7050505@cyconix.com>

I've read the reference manual, more-or-less, but I can't immediately 
see how that's going to be enough to start using ANTLR. From just a 
cursory look at the examples, I've found a couple of things which aren't 
documented - 'setFilename', for example, and ##. The whole area of AST 
generation also seems to be very lightly covered.

Have I missed something? Perhaps some old PCCTS docs? Anything at all?! 
I'm thinking about converting a lex/yacc grammar with a couple of 
hundred productions but, from what I've seen so far, I'm starting to get 
the feeling that perhaps I shouldn't...   :(

Thanks -

Paul

From parrt at cs.usfca.edu  Mon May 16 22:44:16 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon May 16 22:44:17 2005
Subject: [antlr-interest] Documentation?
In-Reply-To: <4288E062.7050505@cyconix.com>
References: <4288E062.7050505@cyconix.com>
Message-ID: <52B9467C-439F-4F3B-A4FE-88CD8D50518C@cs.usfca.edu>


On May 16, 2005, at 11:03 AM, Paul Johnson wrote:

> I've read the reference manual, more-or-less, but I can't  
> immediately see how that's going to be enough to start using ANTLR.  
> From just a cursory look at the examples, I've found a couple of  
> things which aren't documented - 'setFilename', for example, and  
> ##. The whole area of AST generation also seems to be very lightly  
> covered.

Worse!  The tree parsing is poorly implemented ;)  Well, to be fair,  
it has some annoying bugs and some bizarre inconsistencies that nail  
even me.  Sorry if you're having trouble.

> Have I missed something? Perhaps some old PCCTS docs? Anything at  
> all?! I'm thinking about converting a lex/yacc grammar with a  
> couple of hundred productions but, from what I've seen so far, I'm  
> starting to get the feeling that perhaps I shouldn't...   :(

Well, if you're used to building your own trees with yacc, you can  
just do that with antlr so you feel at home. :)

Have you seen my course notes?  Sometimes they help.

Also note that the 3.0 version will have all that tree stuff cleaned  
up and documented (hopefully in a nice book).

Ter

From Loring.G.Craymer at jpl.nasa.gov  Mon May 16 23:36:41 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Mon May 16 23:36:47 2005
Subject: [antlr-interest] Yet another idea for a 
	completlygenericTreeParser
In-Reply-To: <200505170610.j4H6ARLE032742@s2.eroute.net>
References: <6.2.1.2.2.20050516121939.029580d0@mail.jpl.nasa.gov>
	<200505170610.j4H6ARLE032742@s2.eroute.net>
Message-ID: <6.2.1.2.2.20050516225157.02ab8f78@mail.jpl.nasa.gov>

At 10:14 PM 5/16/2005, Scott Stanchfield wrote:
>Loring, I'm not getting into this argument with you again. Like I said, we
>obviously don't agree and it's a waste of everyone's time.
>
>People have heard both of our arguments (and know I'm right ;) ).
>
>If this doesn't get into ANTLR I'll have to do it myself, because there's no
>way I'm going through the overhead of tons of extra nodes or object pooling
>to avoid the extra nodes if I can just have a single model object.

Scott--

As I have pointed out several times, "tons of extra nodes" is not what the 
analysis shows.  If you do not have sufficient need for processing 
non-ANTLR trees to experiment with a mechanism which can be effectively 
used now, why do you expect to have sufficient need later to justify the 
effort of maintaining a modified version of ANTLR 3?

Basically, you have gotten into the "designer fools gold" trap.  (I've been 
there.)  Solving the core problem--using ANTLR tree grammars on non-ANTLR 
trees--has become secondary to the "one true solution".  Frankly, I would 
be quite happy to see an example of an ANTLR tree grammar being used to 
process non-ANTLR trees productively and I suspect that others would, 
too.  If you have a good reason for doing this, why not test to see if the 
idea really makes sense?

--Loring


>End of line.
>
>-- Scott


From krishanu.debnath at gmail.com  Mon May 16 23:41:38 2005
From: krishanu.debnath at gmail.com (Krishanu Debnath)
Date: Mon May 16 23:41:40 2005
Subject: [antlr-interest] Antlr C++ Class Reference
Message-ID: <9fa1fefc0505162341ddcef7f@mail.gmail.com>

Hello,

Looks like the 
 http://wwwhome.cs.utwente.nl/~klaren/antlr/support-docs/hierarchy.html 
link is broken now.  Do Ric/Anyone know any mirror of it? 

Thanks
Krishanu

-- 
"Sorting is *much* harder than you can imagine. I suggest you leave
 it to trained professionals."
--P.J. Plauger, comp.lang.c
From ric.klaren at gmail.com  Tue May 17 01:05:42 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Tue May 17 01:05:44 2005
Subject: [antlr-interest] Antlr C++ Class Reference
In-Reply-To: <9fa1fefc0505162341ddcef7f@mail.gmail.com>
References: <9fa1fefc0505162341ddcef7f@mail.gmail.com>
Message-ID: <bc607a4e05051701057c86542c@mail.gmail.com>

On 5/17/05, Krishanu Debnath <krishanu.debnath@gmail.com> wrote:
> Looks like the
>  http://wwwhome.cs.utwente.nl/~klaren/antlr/support-docs/hierarchy.html
> link is broken now.  Do Ric/Anyone know any mirror of it?

I will setup a new web place this week. The account there expired and
I did not get to moving the files to new webspace.

Note that you can rebuild the docs from the sources with doxygen
(www.doxygen.org) use the doxygen.cfg provided with the sources.

Cheers,

Ric
From Loring.G.Craymer at jpl.nasa.gov  Tue May 17 02:03:59 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Tue May 17 02:04:02 2005
Subject: [antlr-interest] Attribute proposal
In-Reply-To: <52B9467C-439F-4F3B-A4FE-88CD8D50518C@cs.usfca.edu>
References: <4288E062.7050505@cyconix.com>
	<52B9467C-439F-4F3B-A4FE-88CD8D50518C@cs.usfca.edu>
Message-ID: <6.2.1.2.2.20050517015051.02bec240@mail.jpl.nasa.gov>

I just uploaded an attribute proposal to the "Articles" on 
<http://www.antlr.org>.  I believe that it integrates and extends the 
better attribute ideas that were discussed at the original cabal and added 
to in mailing list discussions.  I believe that it is functionally complete 
and easily implemented, although improvement is certainly possible--my 
thinking on using an attribute syntax for semantic predicates is still not 
well developed.

Comments would be much appreciated.  The whitepaper is a bit terse; I will 
be happy to elaborate on any points which seem unclear.

--Loring


From gt54-antlr at cyconix.com  Tue May 17 02:52:44 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Tue May 17 02:52:53 2005
Subject: [antlr-interest] How does AST construction work?
In-Reply-To: <dd3a065f050516102012b7e98b@mail.gmail.com>
References: <4288C291.1080609@cyconix.com>
	<dd3a065f050516102012b7e98b@mail.gmail.com>
Message-ID: <4289BEEC.6060308@cyconix.com>

[I originally posted this about 15 hours ago, but it hasn't yet appeared 
on the list... giving it another go]

Thanks - I think the fog is slowly lifting...

Bryan Ewbank wrote:
> Try removing the "^" from your example and look at the results.  This
> should help...

I tried this, and the returned tree just contains '2':

expr : mexpr (PLUS mexpr)* SEMI! ;

mexpr : atom (STAR atom)* ;

-----
> Main
> 2+4*5;
  2
value is 2
-----

At first sight, it seems to me that the returned list should actually
have been ( 2 + 4 * 5 ) (with no root - or does the first parsed element
become the root by default?)

My reasoning is simply that the first call to mexpr returns the list
(2), then PLUS is appended, and the second call to mexpr returns the
list (4 STAR 5). How is it that just a single '2' is returned?

Thanks -

Paul


From gt54-antlr at cyconix.com  Tue May 17 03:05:46 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Tue May 17 03:05:52 2005
Subject: [antlr-interest] Documentation?
In-Reply-To: <52B9467C-439F-4F3B-A4FE-88CD8D50518C@cs.usfca.edu>
References: <4288E062.7050505@cyconix.com>
	<52B9467C-439F-4F3B-A4FE-88CD8D50518C@cs.usfca.edu>
Message-ID: <4289C1FA.30000@cyconix.com>

Terence Parr wrote:

> Well, if you're used to building your own trees with yacc, you can  just 
> do that with antlr so you feel at home. :)

Actually, there are 2 reasons I want to try ANTLR:

1) My grammar has recently got more complex and, for the first time, I 
need to add an AST to check one of the new constructs;

2) I've always had niggling problems with the single-token lookahead on 
lex/yacc, but I can more or less live with those.

So, I figured it would be simpler to learn ANTLR than to write my own 
tree-processing code, and I could get the lookahead as a bonus.

> Have you seen my course notes?  Sometimes they help.

Thanks - I'll give them a go.

> Also note that the 3.0 version will have all that tree stuff cleaned  up 
> and documented (hopefully in a nice book).

Sounds like you're missing a trick here. If I was getting 5K 
downloads/month, then I'd take a couple of months off, finish the book, 
and order myself a new yacht.  :)

Paul

From ewbank at gmail.com  Tue May 17 04:51:25 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue May 17 04:51:28 2005
Subject: [antlr-interest] How does AST construction work?
In-Reply-To: <4289BEEC.6060308@cyconix.com>
References: <4288C291.1080609@cyconix.com>
	<dd3a065f050516102012b7e98b@mail.gmail.com>
	<4289BEEC.6060308@cyconix.com>
Message-ID: <dd3a065f05051704515485cc6f@mail.gmail.com>

Your reasoning is correct that the elements are appended into a list.

I'm not sure how you are printing the '2' you saw, but I'm pretty sure
the whole list was returned - the first element of the list is the
tree containing '2' as its singleton root, and the rest of the list is
not printed.

In C++, for example, you would use toStringTree() to generate the '2',
but toStringList() will generate the list of elements.  I'm sure there
are similar functions - might even be the same names - in other
languages, but I don't know.

The "problem" with ANTLR here is that there is a list at the top
level; you must wrap another node around the top level to get a tree. 
This was a stumbling block for me initially:

  foo: expr { ## = #( #["FOO",FOO], ## ); } ;
  expr : mexpr (PLUS mexpr)* SEMI! ;
  mexpr : atom (STAR atom)* ;

Calling expr() will produce a list of matching tokens; calling foo()
instead will return a tree (i.e., a list with one element) with the
internal node FOO.

On 5/17/05, Paul Johnson <gt54-antlr@cyconix.com> wrote:
> I tried this, and the returned tree just contains '2':
> 
> expr : mexpr (PLUS mexpr)* SEMI! ;
> mexpr : atom (STAR atom)* ;
> 
> -----
> > Main
> > 2+4*5;
>   2
> value is 2
> -----
> 
> At first sight, it seems to me that the returned list should actually
> have been ( 2 + 4 * 5 ) (with no root - or does the first parsed element
> become the root by default?)
> 
> My reasoning is simply that the first call to mexpr returns the list
> (2), then PLUS is appended, and the second call to mexpr returns the
> list (4 STAR 5). How is it that just a single '2' is returned?
> 
> Thanks -
> Paul
From mail at martin-probst.com  Tue May 17 05:15:21 2005
From: mail at martin-probst.com (Martin Probst)
Date: Tue May 17 05:15:36 2005
Subject: [antlr-interest] Yet another idea for a completlygenericTreeParser
In-Reply-To: <6.2.1.2.2.20050516225157.02ab8f78@mail.jpl.nasa.gov>
References: <6.2.1.2.2.20050516121939.029580d0@mail.jpl.nasa.gov>	<200505170610.j4H6ARLE032742@s2.eroute.net>
	<6.2.1.2.2.20050516225157.02ab8f78@mail.jpl.nasa.gov>
Message-ID: <4289E059.8060306@martin-probst.com>

Hi,

just a small addition:

> As I have pointed out several times, "tons of extra nodes" is not what 
> the analysis shows.

That is true for the case when you maintain a list of unused wrapper 
nodes and reuse them. While that is definetly possible it create some 
effort to implement such a thing. Also, the statement from Sun is that 
it's nearly always a bad thing to do something like that (and I think 
they have good arguments for that).

So space performance wise you approach is only on a close par if you put 
some questionable extra burden on the ANTLR user.

But maybe the question we state is simply wrong. What is the use case 
for this? Where does an ANTLR user need to reuse trees generated by 
something he doesn't have access to?

Scott repeats his Eclipse IDE example, and in that case the overhead 
introduced by the current system might be 30000 nodes/hour, without node 
reuse. So what? I can't see any problem with GCing 30000 nodes/hour on a 
computer that's able to run Eclipse. I would be really surprised if that 
created an noticeable performance ditch.

With compilers & translators, I don't see the problem too. I would guess 
that only very few compilers actually consume "foreign" trees, and if 
they do, the performance overhead of some GCing compared to the overall 
cost is again neglectible.

The only application where you really have to pay that much attention to 
performance are probably high-load server applications. And in that 
case, most of the time you parse relatively short queries in a query 
language you implement yourself, so the tree is small and you probably 
have control over the type of the nodes anyways.

So basically my question is: who cares? If this is just about reducing 
GC cost in some IDE application by 30000 objects/hour (all of which are 
probably caught in generation 0) I really don't see the point of 
creating something complex, possibly hard to maintain, and of 
practically no use to most of the ANTLR users. Or even enforcing it on 
them(!), possibly resulting in a (very slight) performance reduction and 
again, maintenance overhead.

Regarding the casts in the parser, you can probably get rid of them in a 
lot easier way (--> generics).

Regards,
Martin
From stefan at amiq.ro  Tue May 17 05:11:12 2005
From: stefan at amiq.ro (stefan)
Date: Tue May 17 05:17:04 2005
Subject: [antlr-interest] variable names starting with underscore
Message-ID: <200505171511.13082.stefan@amiq.ro>

Hi!

       I have next piece of grammar:
.........................
rule_one
{ 
     String _st = null;
}
: #(RULE_ONE _st=other_rule)
;
....................

     During generation (using antlr-2.7.5) I get next error:

[antlr] TokenStreamException: unexpected char: '_'

    If I use 'st' instead of '_st' it works.

    Are underscores allowed at the begining of the variable name? Is this a 
(known) limitation/bug?

Thanks,
          Stefan.
From rodrigobamboo at gmail.com  Tue May 17 06:32:20 2005
From: rodrigobamboo at gmail.com (Rodrigo B. de Oliveira)
Date: Tue May 17 06:32:27 2005
Subject: [antlr-interest] boo code generator
Message-ID: <5917478b050517063238f90c76@mail.gmail.com>

Hey,

I've just created a boo code generator for antlr based on the existing
c# code generator. The idea is to share the same runtime library (as
it is already shipped with boo).

I wouldn't like to keep a private copy of antlr so the question is,
would it be possible to get BooCodeGenerator into the standard antlr
distribution?

Best wishes,
-- 
Rodrigo B. de Oliveira
From parrt at cs.usfca.edu  Tue May 17 10:36:05 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue May 17 10:35:45 2005
Subject: [antlr-interest] boo code generator
In-Reply-To: <5917478b050517063238f90c76@mail.gmail.com>
References: <5917478b050517063238f90c76@mail.gmail.com>
Message-ID: <259A8710-6FB2-48E7-837C-052207E41CD6@cs.usfca.edu>

On May 17, 2005, at 6:32 AM, Rodrigo B. de Oliveira wrote:
> Hey,
>
> I've just created a boo code generator for antlr based on the existing
> c# code generator. The idea is to share the same runtime library (as
> it is already shipped with boo).
>
> I wouldn't like to keep a private copy of antlr so the question is,
> would it be possible to get BooCodeGenerator into the standard antlr
> distribution?

If you share the runtime, is it literally just the one  
BooCodeGenerator.java file?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From rodrigobamboo at gmail.com  Tue May 17 10:49:33 2005
From: rodrigobamboo at gmail.com (Rodrigo B. de Oliveira)
Date: Tue May 17 10:49:38 2005
Subject: [antlr-interest] boo code generator
In-Reply-To: <259A8710-6FB2-48E7-837C-052207E41CD6@cs.usfca.edu>
References: <5917478b050517063238f90c76@mail.gmail.com>
	<259A8710-6FB2-48E7-837C-052207E41CD6@cs.usfca.edu>
Message-ID: <5917478b050517104967e28dd7@mail.gmail.com>

On 5/17/05, Terence Parr <parrt@cs.usfca.edu> wrote:
> On May 17, 2005, at 6:32 AM, Rodrigo B. de Oliveira wrote:
> > Hey,
>> ...
> > I wouldn't like to keep a private copy of antlr so the question is,
> > would it be possible to get BooCodeGenerator into the standard antlr
> > distribution?
> 
> If you share the runtime, is it literally just the one
> BooCodeGenerator.java file?
> 

Pretty much:

  BooCodeGenerator.java
  BooBlockFinishingInfo.java
  BooCharFormatter.java
  BooNameSpace.java

And changing the line 624 of DefineGrammarSymbols.java to the following:
            if ( !language.equals("Cpp") && !language.equals("CSharp")
&& !language.equals("Boo"))

I also have the calc example in boo. :)

Rodrigo
From parrt at cs.usfca.edu  Tue May 17 11:19:17 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue May 17 11:18:56 2005
Subject: [antlr-interest] boo code generator
In-Reply-To: <5917478b050517104967e28dd7@mail.gmail.com>
References: <5917478b050517063238f90c76@mail.gmail.com>
	<259A8710-6FB2-48E7-837C-052207E41CD6@cs.usfca.edu>
	<5917478b050517104967e28dd7@mail.gmail.com>
Message-ID: <19145349-7D5C-4A33-BA28-6D7027AFBE66@cs.usfca.edu>


On May 17, 2005, at 10:49 AM, Rodrigo B. de Oliveira wrote:
>> If you share the runtime, is it literally just the one
>> BooCodeGenerator.java file?
>>
> Pretty much:
>
>   BooCodeGenerator.java
>   BooBlockFinishingInfo.java
>   BooCharFormatter.java
>   BooNameSpace.java
>
> And changing the line 624 of DefineGrammarSymbols.java to the  
> following:
>             if ( !language.equals("Cpp") && !language.equals("CSharp")
> && !language.equals("Boo"))
>
> I also have the calc example in boo. :)

Interesting.  May I ask the indelicate question, "how popular is boo  
these days?" ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From rodrigobamboo at gmail.com  Tue May 17 11:51:18 2005
From: rodrigobamboo at gmail.com (Rodrigo B. de Oliveira)
Date: Tue May 17 11:51:24 2005
Subject: [antlr-interest] boo code generator
In-Reply-To: <19145349-7D5C-4A33-BA28-6D7027AFBE66@cs.usfca.edu>
References: <5917478b050517063238f90c76@mail.gmail.com>
	<259A8710-6FB2-48E7-837C-052207E41CD6@cs.usfca.edu>
	<5917478b050517104967e28dd7@mail.gmail.com>
	<19145349-7D5C-4A33-BA28-6D7027AFBE66@cs.usfca.edu>
Message-ID: <5917478b0505171151237ba2bd@mail.gmail.com>

On 5/17/05, Terence Parr <parrt@cs.usfca.edu> wrote:
> ...
> 
> Interesting.  May I ask the indelicate question, "how popular is boo
> these days?" ;)
> 

I'm not sure I can answer the question but let me try:

Our main discussion list currently has 138 subscribers.
Lots of links on http://del.icio.us/tag/boo/ and lots of blog posts on
the net (I don't think we've been /. yet though - thank god).
We have pretty nice addins for (Mono|Sharp)Develop.
There are at least 2 commercial products that I'm aware of shipping
boo in their next release (I'm not talking about IDEs).

Let's say popular enough to justify 4 files and one line change? ;)

Rodrigo
From Loring.G.Craymer at jpl.nasa.gov  Tue May 17 12:57:22 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Tue May 17 12:57:25 2005
Subject: [antlr-interest] boo code generator
In-Reply-To: <5917478b0505171151237ba2bd@mail.gmail.com>
References: <5917478b050517063238f90c76@mail.gmail.com>
	<259A8710-6FB2-48E7-837C-052207E41CD6@cs.usfca.edu>
	<5917478b050517104967e28dd7@mail.gmail.com>
	<19145349-7D5C-4A33-BA28-6D7027AFBE66@cs.usfca.edu>
	<5917478b0505171151237ba2bd@mail.gmail.com>
Message-ID: <6.2.1.2.2.20050517122827.02a129a8@mail.jpl.nasa.gov>

Rodrigo--

Boo looks very interesting at first glance:  Python with many of the warts 
fixed that prevent efficient compilation.  Have you built a Python->boo 
translator yet?

--Loring


At 11:51 AM 5/17/2005, Rodrigo B. de Oliveira wrote:
>On 5/17/05, Terence Parr <parrt@cs.usfca.edu> wrote:
> > ...
> >
> > Interesting.  May I ask the indelicate question, "how popular is boo
> > these days?" ;)
> >
>
>I'm not sure I can answer the question but let me try:
>
>Our main discussion list currently has 138 subscribers.
>Lots of links on http://del.icio.us/tag/boo/ and lots of blog posts on
>the net (I don't think we've been /. yet though - thank god).
>We have pretty nice addins for (Mono|Sharp)Develop.
>There are at least 2 commercial products that I'm aware of shipping
>boo in their next release (I'm not talking about IDEs).
>
>Let's say popular enough to justify 4 files and one line change? ;)
>
>Rodrigo


From rodrigobamboo at gmail.com  Tue May 17 13:01:38 2005
From: rodrigobamboo at gmail.com (Rodrigo B. de Oliveira)
Date: Tue May 17 13:28:23 2005
Subject: [antlr-interest] boo code generator
In-Reply-To: <6.2.1.2.2.20050517122827.02a129a8@mail.jpl.nasa.gov>
References: <5917478b050517063238f90c76@mail.gmail.com>
	<259A8710-6FB2-48E7-837C-052207E41CD6@cs.usfca.edu>
	<5917478b050517104967e28dd7@mail.gmail.com>
	<19145349-7D5C-4A33-BA28-6D7027AFBE66@cs.usfca.edu>
	<5917478b0505171151237ba2bd@mail.gmail.com>
	<6.2.1.2.2.20050517122827.02a129a8@mail.jpl.nasa.gov>
Message-ID: <5917478b05051713011808dc0a@mail.gmail.com>

Hi Loring,

On 5/17/05, Loring Craymer <Loring.G.Craymer@jpl.nasa.gov> wrote:
> Rodrigo--
> 
> Boo looks very interesting at first glance:  Python with many of the warts
> fixed that prevent efficient compilation.  Have you built a Python->boo
> translator yet?
> 

No. I haven't really thought about it but now that you mentioned this
looks like a very useful tool.

Rodrigo
From gt54-antlr at cyconix.com  Mon May 16 10:53:34 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Tue May 17 16:06:57 2005
Subject: [antlr-interest] How does AST construction work?
In-Reply-To: <dd3a065f050516102012b7e98b@mail.gmail.com>
References: <4288C291.1080609@cyconix.com>
	<dd3a065f050516102012b7e98b@mail.gmail.com>
Message-ID: <4288DE1E.20306@cyconix.com>

Thanks - I think the fog is slowly lifting...

Bryan Ewbank wrote:
> Try removing the "^" from your example and look at the results.  This
> should help...

I tried this, and the returned tree just contains '2':

expr : mexpr (PLUS mexpr)* SEMI! ;

mexpr : atom (STAR atom)* ;

-----
 > Main
 > 2+4*5;
  2
value is 2
-----

At first sight, it seems to me that the returned list should actually 
have been ( 2 + 4 * 5 ) (with no root - or does the first parsed element 
become the root by default?)

My reasoning is simply that the first call to mexpr returns the list 
(2), then PLUS is appended, and the second call to mexpr returns the 
list (4 STAR 5). How is it that just a single '2' is returned?

Thanks -

Paul

From mail at martin-probst.com  Tue May 17 16:14:07 2005
From: mail at martin-probst.com (Martin Probst)
Date: Tue May 17 16:14:12 2005
Subject: [antlr-interest] How does AST construction work?
In-Reply-To: <4288DE1E.20306@cyconix.com>
References: <4288C291.1080609@cyconix.com>
	<dd3a065f050516102012b7e98b@mail.gmail.com>
	<4288DE1E.20306@cyconix.com>
Message-ID: <1116371647.17176.7.camel@localhost.localdomain>

Hi,

> I tried this, and the returned tree just contains '2':

maybe your just running into ANTLRs sibling pointered trees?

Try this code to print your tree:

void printTree(AST ast) {
  System.out.println(ast);
  if (ast.getFirstChild() != null)
    printTree(ast.getFirstChild());
  if (ast.getNextSibling() != null)
    printTree(ast.getNextSibling());
}

The AST tree is sibling pointered, e.g. if you have a simpe list like 
( 1 2 3 4 )
you have to follow the getNextSibling() link from the node that contains
"1".

Sorry if this was too obvious, but that would at least make an
explanation...

Regards,
Martin

From parrt at cs.usfca.edu  Tue May 17 16:25:41 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue May 17 16:25:21 2005
Subject: [antlr-interest] How does AST construction work?
In-Reply-To: <4288DE1E.20306@cyconix.com>
References: <4288C291.1080609@cyconix.com>
	<dd3a065f050516102012b7e98b@mail.gmail.com>
	<4288DE1E.20306@cyconix.com>
Message-ID: <687F4236-C154-4A2B-B17D-B70C0AF04064@cs.usfca.edu>


On May 16, 2005, at 10:53 AM, Paul Johnson wrote:

> Thanks - I think the fog is slowly lifting...
>
> Bryan Ewbank wrote:
>
>> Try removing the "^" from your example and look at the results.  This
>> should help...
>>
>
> I tried this, and the returned tree just contains '2':

Use toStringList() not toString() :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From rahulkharche at gmail.com  Wed May 18 04:42:19 2005
From: rahulkharche at gmail.com (rahul)
Date: Wed May 18 04:42:25 2005
Subject: [antlr-interest] parsing MATLAB - 6.0/7.0 files
Message-ID: <831c289305051804425d243254@mail.gmail.com>

Hi

   I am looking at parsing MATLAB files using ANTLR. The earlier
version of MATLAB (6.x) had a file structure that looked like

function x = A(p1,p2)
...

function y = B(p3)
...

function z = C(p4)
...

with implicit ends to the function bodies. The new version 7.x has
introduced the concept of nested functions, much like PASCAL.

function x = A(p1, p2)
...
   function y = B(p3)
   ...
      function z = C(p4)
      ...
      end
   ...
   end
...
end

function D(p5)

...
end

For the reason of compatibility MATLAB retains both these file
structures and either can be used, but not mixed.

Is it possible to parse a file not knowing the format and using one
single grammar?

Or do I need to make a quick initial run through a file first to
detect the syntax and then invoke the parser to follow one of the
formats.

If one sigle grammar is possible would it be efficient, say if I
considered the use of syntactic predicates?

Thanks,
Rahul
From gbennett at requisoft.co.uk  Wed May 18 06:38:19 2005
From: gbennett at requisoft.co.uk (Gary Bennett)
Date: Wed May 18 06:38:23 2005
Subject: [antlr-interest] Simlpe grammar: Won't run at all.
Message-ID: <DA4F6E2951D4E848B6F9A8717F53BC300F5BEF@excserv.requisoft.co.uk>

Hello,

I'm just starting out with this.

I have this simple grammar (This is the simplest grammar showing the
error that is).

It generates antlr files but they won't run because:

	static public void initializeASTFactory( ASTFactory factory )
	{
		factory.setMaxNodeType(5); <<-- ArgumentException.
	}

Can anyone explain what I am doing wrong.

Many thanks.

// Basic Grammar 

options {
	language = "CSharp";
}

class TestParser extends Parser ;

options {
	buildAST = true;	// uses CommonAST by default
}

name: NAME ;

class TestLexer extends Lexer;

WS	:	(' '
	|	'\t'
	|	'\n'
	|	'\r')
	{ $setType(Token.SKIP);}
	;

NAME: 'a'
	;

class TestWalker extends TreeParser ;

name: nm:NAME
		{ 
			Console.WriteLine(" Name: {0}", nm.getText() ); 
		} 
	;

--------------------------------------------
Regards

Gary Bennett
Software Developer
Requisoft plc 
--------------------------------------------
From scott at javadude.com  Wed May 18 07:19:17 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Wed May 18 07:19:47 2005
Subject: [antlr-interest] Yet another idea for a completlygenericTreeParser
In-Reply-To: <6.2.1.2.2.20050516225157.02ab8f78@mail.jpl.nasa.gov>
Message-ID: <200505181515.j4IFEuES015849@s2.eroute.net>

> If you have a good reason for doing this, why not test to see if the idea
really makes sense?

If ANTLR let me EFICIENTLY do what I was looking for, I *would* have on
several occasions RE the Eclipse ASTs I've mentioned repeatedly. I've tried
and GC killed me.

Let it die. I'm done with this thread.
-- Scott 



From scott at javadude.com  Wed May 18 07:19:17 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Wed May 18 07:19:53 2005
Subject: [antlr-interest] Yet another idea for a completlygenericTreeParser
In-Reply-To: <4289E059.8060306@martin-probst.com>
Message-ID: <200505181515.j4IFEuER015849@s2.eroute.net>

> Scott repeats his Eclipse IDE example, and in that case the 
> overhead introduced by the current system might be 30000 
> nodes/hour, without node reuse. So what? I can't see any 
> problem with GCing 30000 nodes/hour on a computer that's able 
> to run Eclipse. I would be really surprised if that created 
> an noticeable performance ditch.

I my plugin were the *only* thing running during editing, it might not be as
big of a deal. But it's not. For an IDE to be useful, it can't constantly
trigger GC pauses as you type. Death by 1000 paper cuts.

I'm done asking for this. If Ter doesn't do it, I will as an ANTLR patch so
people who want it can use it.

Same for being able to write

  person
    : name+ address* 
    ;

instead of

  person
    : (name)+ (address)* 
    ;

-- Scott


From parrt at cs.usfca.edu  Wed May 18 07:57:40 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed May 18 07:57:38 2005
Subject: [antlr-interest] Simlpe grammar: Won't run at all.
In-Reply-To: <DA4F6E2951D4E848B6F9A8717F53BC300F5BEF@excserv.requisoft.co.uk>
References: <DA4F6E2951D4E848B6F9A8717F53BC300F5BEF@excserv.requisoft.co.uk>
Message-ID: <ED019603-8220-440D-ADD9-C7DDD4D1F428@cs.usfca.edu>


On May 18, 2005, at 6:38 AM, Gary Bennett wrote:

> Hello,
>
> I'm just starting out with this.
>
> I have this simple grammar (This is the simplest grammar showing the
> error that is).
>
> It generates antlr files but they won't run because:
>
>     static public void initializeASTFactory( ASTFactory factory )
>     {
>         factory.setMaxNodeType(5); <<-- ArgumentException.
>     }
>
> Can anyone explain what I am doing wrong.

Should that be a class type not a token type?

Ter

From gt54-antlr at cyconix.com  Wed May 18 08:21:35 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Wed May 18 08:44:12 2005
Subject: [antlr-interest] Problem building 'cgram' example
Message-ID: <428B5D7F.2000800@cyconix.com>

I'm having a problem building the C grammar in the distribution (with 
gcj, so I guess this may not have been tested). Unfortunately, I don't 
know any Java, so I have no idea what's causing the problem.. :)

Any input appreciated. StdCParser.g includes the line:

       { import CToken; ... }

This gets copied to the generated Java output files as:

----
import antlr.Token;
...
    import CToken; // line 27
----

When I compile the generated files I get an ambiguous class error:

----
gcj --classpath .:/eda/antlr/antlr-2.7.5/lib/antlr.jar -C StdCLexer.java
StdCLexer.java:27: error: Ambiguous class: `CToken' and `antlr.Token'.
    import CToken;
           ^
----

CToken is part of the example code, and is basically just:

----
import antlr.CommonToken;
public class CToken extends antlr.CommonToken {...}
----

Any ideas?

Thanks -

Paul

From gt54-antlr at cyconix.com  Wed May 18 07:53:41 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Wed May 18 09:03:24 2005
Subject: [antlr-interest] How does AST construction work?
In-Reply-To: <dd3a065f05051704515485cc6f@mail.gmail.com>
References: <4288C291.1080609@cyconix.com>	<dd3a065f050516102012b7e98b@mail.gmail.com>	<4289BEEC.6060308@cyconix.com>
	<dd3a065f05051704515485cc6f@mail.gmail.com>
Message-ID: <428B56F5.5060903@cyconix.com>

Bryan Ewbank wrote:
> 
> In C++, for example, you would use toStringTree() to generate the '2',
> but toStringList() will generate the list of elements.

Thanks everyone - toStringTree() returned the 2, and toStringList 
returned '2 + 4 * 5' as expected.

Paul

From monty at codetransform.com  Wed May 18 06:34:15 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Wed May 18 09:34:43 2005
Subject: [antlr-interest] parsing MATLAB - 6.0/7.0 files
In-Reply-To: <831c289305051804425d243254@mail.gmail.com>
References: <831c289305051804425d243254@mail.gmail.com>
Message-ID: <428B4457.5060502@codetransform.com>

rahul wrote:
> Hi
> 
>    I am looking at parsing MATLAB files using ANTLR. The earlier
> version of MATLAB (6.x) had a file structure that looked like
> 
> function x = A(p1,p2)
> ...
> 
> function y = B(p3)
> ...
> 
> function z = C(p4)
> ...
> 
> with implicit ends to the function bodies. The new version 7.x has
> introduced the concept of nested functions, much like PASCAL.
> 
> function x = A(p1, p2)
> ...
>    function y = B(p3)
>    ...
>       function z = C(p4)
>       ...
>       end
>    ...
>    end
> ...
> end
> 
> function D(p5)
> 
> ...
> end
> 
> For the reason of compatibility MATLAB retains both these file
> structures and either can be used, but not mixed.
> 
> Is it possible to parse a file not knowing the format and using one
> single grammar?
> 
> Or do I need to make a quick initial run through a file first to
> detect the syntax and then invoke the parser to follow one of the
> formats.
> 
> If one sigle grammar is possible would it be efficient, say if I
> considered the use of syntactic predicates?
> 
yeah, a syntactic predicate like ((~("end"))* "end")=> would tell you 
whether an end is coming up later.  Hopefully "end" is only used to end 
a function definition.

Monty
From parrt at cs.usfca.edu  Wed May 18 10:07:19 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed May 18 10:06:58 2005
Subject: [antlr-interest] Problem building 'cgram' example
In-Reply-To: <428B5D7F.2000800@cyconix.com>
References: <428B5D7F.2000800@cyconix.com>
Message-ID: <DC4E98D4-11EE-4B37-A9C6-483D572D8ED5@cs.usfca.edu>


On May 18, 2005, at 8:21 AM, Paul Johnson wrote:

> I'm having a problem building the C grammar in the distribution  
> (with gcj, so I guess this may not have been tested).  
> Unfortunately, I don't know any Java, so I have no idea what's  
> causing the problem.. :)

There are some posts and articles etc... about gcj I think.  Did you  
find them?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Wed May 18 10:08:20 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed May 18 10:08:00 2005
Subject: [antlr-interest] boo code generator
In-Reply-To: <5917478b0505171151237ba2bd@mail.gmail.com>
References: <5917478b050517063238f90c76@mail.gmail.com>
	<259A8710-6FB2-48E7-837C-052207E41CD6@cs.usfca.edu>
	<5917478b050517104967e28dd7@mail.gmail.com>
	<19145349-7D5C-4A33-BA28-6D7027AFBE66@cs.usfca.edu>
	<5917478b0505171151237ba2bd@mail.gmail.com>
Message-ID: <F46BA84F-D262-4C48-BBCB-D88BF5766A21@cs.usfca.edu>


On May 17, 2005, at 11:51 AM, Rodrigo B. de Oliveira wrote:
> Our main discussion list currently has 138 subscribers.
> Lots of links on http://del.icio.us/tag/boo/ and lots of blog posts on
> the net (I don't think we've been /. yet though - thank god).
> We have pretty nice addins for (Mono|Sharp)Develop.
> There are at least 2 commercial products that I'm aware of shipping
> boo in their next release (I'm not talking about IDEs).
>
> Let's say popular enough to justify 4 files and one line change? ;)

<snicker>.  Are you willing to maintain them etc...?

I'm not sure when 2.7.6 will come out, but it will be a bit as I have  
to get pre-release v3 out.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From monty at codetransform.com  Wed May 18 07:45:49 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Wed May 18 10:46:18 2005
Subject: [antlr-interest] parsing MATLAB - 6.0/7.0 files
In-Reply-To: <831c28930505181028160010a7@mail.gmail.com>
References: <831c289305051804425d243254@mail.gmail.com>	
	<428B4457.5060502@codetransform.com>
	<831c28930505181028160010a7@mail.gmail.com>
Message-ID: <428B551D.1000107@codetransform.com>

rahul wrote:
>   Unfortunately and 'end' can be used to end loops, IF and SWITCH
> blocks and has a special meaning within an indexed array construct
> like 'M(1:10, 5:end)', where 'M' is a two dimensional array and 'end'
> is the last element along that dimension.
>   Which then brings me onto two solutions, implement a fast stripped
> down scanner-parser that matches the above constructs and omitts the
> rest. Detect the format and use the information later. 

I think that would be easiest.

 > Or then use
> exception handling to catch the error and straighten out the generated
> AST after parsing.
> 

Sounds messier to me.

Monty

From parrt at cs.usfca.edu  Wed May 18 11:15:32 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed May 18 11:15:11 2005
Subject: [antlr-interest] votes on rule+ vs (rule)+
Message-ID: <FBA076E7-D7AB-410E-BDD4-DAC59CC4D750@cs.usfca.edu>

Hi,

I'm leaning towards allowing rule+ as Scott and others have asked  
for.  I usually am for consistency, but I'm wondering if this is a  
case where consistency with "standard" EBNF is better than forcing  
the ANTLR consistency that all subrules have parentheses.

Please, no long arguments!  A simple +1 or -1 or 0 will suffice with  
a few comments if you want.

Thanks,
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From metzgerm at iro.umontreal.ca  Wed May 18 11:17:07 2005
From: metzgerm at iro.umontreal.ca (Michel Metzger)
Date: Wed May 18 11:17:18 2005
Subject: [antlr-interest] votes on rule+ vs (rule)+
In-Reply-To: <FBA076E7-D7AB-410E-BDD4-DAC59CC4D750@cs.usfca.edu>
References: <FBA076E7-D7AB-410E-BDD4-DAC59CC4D750@cs.usfca.edu>
Message-ID: <428B86A3.4080206@iro.umontreal.ca>

+1

Terence Parr a ?crit :

> Hi,
>
> I'm leaning towards allowing rule+ as Scott and others have asked  
> for.  I usually am for consistency, but I'm wondering if this is a  
> case where consistency with "standard" EBNF is better than forcing  
> the ANTLR consistency that all subrules have parentheses.
>
> Please, no long arguments!  A simple +1 or -1 or 0 will suffice with  
> a few comments if you want.
>
> Thanks,
> Ter
> -- 
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com


From monty at codetransform.com  Wed May 18 08:21:01 2005
From: monty at codetransform.com (Monty Zukowski)
Date: Wed May 18 11:21:30 2005
Subject: [antlr-interest] votes on rule+ vs (rule)+
In-Reply-To: <FBA076E7-D7AB-410E-BDD4-DAC59CC4D750@cs.usfca.edu>
References: <FBA076E7-D7AB-410E-BDD4-DAC59CC4D750@cs.usfca.edu>
Message-ID: <428B5D5D.8020902@codetransform.com>

+1
Monty
From stefan at amiq.ro  Wed May 18 11:19:05 2005
From: stefan at amiq.ro (stefan)
Date: Wed May 18 11:24:57 2005
Subject: [antlr-interest] votes on rule+ vs (rule)+
In-Reply-To: <FBA076E7-D7AB-410E-BDD4-DAC59CC4D750@cs.usfca.edu>
References: <FBA076E7-D7AB-410E-BDD4-DAC59CC4D750@cs.usfca.edu>
Message-ID: <200505182119.05641.stefan@amiq.ro>

I agree +1 :) 

How will we write next rule:

a_rule:
    #(ANA ( woo {some actions;} )+ );

stefan.
On Wednesday 18 May 2005 21:15, Terence Parr wrote:
> Hi,
>
> I'm leaning towards allowing rule+ as Scott and others have asked
> for.  I usually am for consistency, but I'm wondering if this is a
> case where consistency with "standard" EBNF is better than forcing
> the ANTLR consistency that all subrules have parentheses.
>
> Please, no long arguments!  A simple +1 or -1 or 0 will suffice with
> a few comments if you want.
>
> Thanks,
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
From ewbank at gmail.com  Wed May 18 11:27:53 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Wed May 18 11:27:55 2005
Subject: [antlr-interest] votes on rule+ vs (rule)+
In-Reply-To: <428B5D5D.8020902@codetransform.com>
References: <FBA076E7-D7AB-410E-BDD4-DAC59CC4D750@cs.usfca.edu>
	<428B5D5D.8020902@codetransform.com>
Message-ID: <dd3a065f0505181127188465d0@mail.gmail.com>

Hey, I rolled a "20"!  All right!  That's +2, and my magic keyboard of
dvorak gives me another +4!

Oh... Uhm...  Well...


Never Mind...

+1.

- Bryan
From rodrigobamboo at gmail.com  Wed May 18 11:33:35 2005
From: rodrigobamboo at gmail.com (Rodrigo B. de Oliveira)
Date: Wed May 18 11:33:36 2005
Subject: [antlr-interest] boo code generator
In-Reply-To: <F46BA84F-D262-4C48-BBCB-D88BF5766A21@cs.usfca.edu>
References: <5917478b050517063238f90c76@mail.gmail.com>
	<259A8710-6FB2-48E7-837C-052207E41CD6@cs.usfca.edu>
	<5917478b050517104967e28dd7@mail.gmail.com>
	<19145349-7D5C-4A33-BA28-6D7027AFBE66@cs.usfca.edu>
	<5917478b0505171151237ba2bd@mail.gmail.com>
	<F46BA84F-D262-4C48-BBCB-D88BF5766A21@cs.usfca.edu>
Message-ID: <5917478b0505181133235f9705@mail.gmail.com>

On 5/18/05, Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> On May 17, 2005, at 11:51 AM, Rodrigo B. de Oliveira wrote:
> ...
> <snicker>.  Are you willing to maintain them etc...?
> 

Sure. I'm writing a new parser for boo in boo, this will certainly
give me the motivation to.

By the way: http://primates.ximian.com/~lluis/blog/pivot/entry.php?id=38
(hey Aaron ;))

> I'm not sure when 2.7.6 will come out, but it will be a bit as I have
> to get pre-release v3 out.
> 

Meanwhile I'll keep modified a copy in the boo repository.

Rodrigo
From ilia at obnovlenie.ru  Wed May 18 11:56:42 2005
From: ilia at obnovlenie.ru (Ilia Kantor)
Date: Wed May 18 11:56:48 2005
Subject: [antlr-interest] votes on rule+ vs (rule)+
In-Reply-To: <dd3a065f0505181127188465d0@mail.gmail.com>
Message-ID: <auto-000183951530@frontend1.aha.ru>

+1 against obligatory bracketing

 

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org 
> [mailto:antlr-interest-bounces@antlr.org] On Behalf Of Bryan Ewbank
> Sent: Wednesday, May 18, 2005 10:28 PM
> To: ANTLR Interest
> Subject: Re: [antlr-interest] votes on rule+ vs (rule)+
> 
> Hey, I rolled a "20"!  All right!  That's +2, and my magic 
> keyboard of dvorak gives me another +4!
> 
> Oh... Uhm...  Well...
> 
> 
> Never Mind...
> 
> +1.
> 
> - Bryan
> 

From parrt at cs.usfca.edu  Wed May 18 12:02:18 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed May 18 12:01:56 2005
Subject: [antlr-interest] votes on rule+ vs (rule)+
In-Reply-To: <200505182119.05641.stefan@amiq.ro>
References: <FBA076E7-D7AB-410E-BDD4-DAC59CC4D750@cs.usfca.edu>
	<200505182119.05641.stefan@amiq.ro>
Message-ID: <A4F443F6-2865-47D2-9C0F-A4C14E2A9339@cs.usfca.edu>

On May 18, 2005, at 11:19 AM, stefan wrote:
> I agree +1 :)
>
> How will we write next rule:
>
> a_rule:
>     #(ANA ( woo {some actions;} )+ );

Anything other than rule+ must have the (...)+ around it.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From csnyder at alumni.ncsu.edu  Wed May 18 12:09:59 2005
From: csnyder at alumni.ncsu.edu (Chris Snyder)
Date: Wed May 18 12:10:08 2005
Subject: [antlr-interest] votes on rule+ vs (rule)+
In-Reply-To: <FBA076E7-D7AB-410E-BDD4-DAC59CC4D750@cs.usfca.edu>
Message-ID: <20050518191002.0BB7E2A87D@bilbo.mebtel.net>

+1

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: Wednesday, May 18, 2005 2:16 PM
To: ANTLR Interest
Subject: [antlr-interest] votes on rule+ vs (rule)+

Hi,

I'm leaning towards allowing rule+ as Scott and others have asked  
for.  I usually am for consistency, but I'm wondering if this is a  
case where consistency with "standard" EBNF is better than forcing  
the ANTLR consistency that all subrules have parentheses.

Please, no long arguments!  A simple +1 or -1 or 0 will suffice with  
a few comments if you want.

Thanks,
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com




From rkmspence at mac.com  Wed May 18 12:23:21 2005
From: rkmspence at mac.com (Richard Spence)
Date: Wed May 18 12:52:52 2005
Subject: [antlr-interest] votes on rule+ vs (rule)+
Message-ID: <0cb8d90240d7038e7803e3dee574ec6b@mac.com>

I have to concur with the prevailing sentiment for
+1
.

I've encountered far too many related errors to consider it a serious 
'purity violation.'
:-)

--
-rkms

From parrt at cs.usfca.edu  Wed May 18 13:02:49 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed May 18 13:02:26 2005
Subject: [antlr-interest] ok, rule+ wins
Message-ID: <4102023A-92B3-4DCF-9BB1-07D4EF62A25D@cs.usfca.edu>

Hi,

Ok, thanks for the votes.  I'm looking at implementing it for v3  
first pre-release.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Wed May 18 13:17:35 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed May 18 13:17:15 2005
Subject: [antlr-interest] v3 pre-release usage data and stat collection
Message-ID: <414D2C5D-C094-45F5-8D5D-42C178130F37@cs.usfca.edu>

Howdy,

In an effort to provide a better product (both the GUI ANTLRWorks and  
antlr v3 itself), the pre-release coming out in a week or two will  
include extra code for debugging as well as usage/stats collection.   
This information will be collected continuously and stored in a file  
on your disk.  Once a week a dialog will pop-up in ANTLRWorks showing  
you the report it is planning on sending to my antlr.org server.  The  
stats/usage info will naturally be wiped clean of anything that could  
identify you or your company (e.g., no list of rules or machine name  
or whatever).

By knowing which features you use in the GUI we can focus on  
improving those features.  By tracking info about your grammar and  
how much lookahead is used during actual parsing, I can optimize  
ANTLR v3 for the full release.

How do people feel about this?  Seems like it shouldn't bother  
anybody and it will *only* occur during the pre-release days when  
we'll have debugging and other stuff in there anyway.  Most people  
will be waiting for a full release, but the courageous and intrepid  
v3 pre-release users will have to hit "OK" once a week in the  
GUI. ;)  Naturally if you don't use the GUI, you will never see the  
dialog and no data will be sent.

Regards,
Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From dcaton at shorelinesoftware.com  Wed May 18 14:38:55 2005
From: dcaton at shorelinesoftware.com (Don Caton)
Date: Wed May 18 14:39:46 2005
Subject: [antlr-interest] votes on rule+ vs (rule)+
In-Reply-To: <FBA076E7-D7AB-410E-BDD4-DAC59CC4D750@cs.usfca.edu>
Message-ID: <1116452623.3517@mx9.mysite4now.com>

+1


From mail at martin-probst.com  Wed May 18 14:40:16 2005
From: mail at martin-probst.com (Martin Probst)
Date: Wed May 18 14:40:20 2005
Subject: [antlr-interest] v3 pre-release usage data and stat collection
In-Reply-To: <414D2C5D-C094-45F5-8D5D-42C178130F37@cs.usfca.edu>
References: <414D2C5D-C094-45F5-8D5D-42C178130F37@cs.usfca.edu>
Message-ID: <1116452416.8909.1.camel@localhost.localdomain>

Hi,

> Once a week a dialog will pop-up in ANTLRWorks showing  
> you the report it is planning on sending to my antlr.org server.  The  
> stats/usage info will naturally be wiped clean of anything that could  
> identify you or your company (e.g., no list of rules or machine name  
> or whatever).

I think it's generally a good idea to build something like that into a
GUI. But keep in mind that probably >50% of all computer nerds are
really paranoid, so don't forget the option to show the actual
information it wants to send.

Regards,
Martin

From bharat at ambric.com  Wed May 18 14:42:19 2005
From: bharat at ambric.com (Bharat Purohit)
Date: Wed May 18 14:42:02 2005
Subject: [antlr-interest] Antlr plugin for eclipse problem
Message-ID: <C291E7B53B30114EA3EF037D279CD0EA112BD2@ben.ambric.local>

Hi,
 
I have been using the antlr plugin for eclipse successfully, but just
today I started getting funny behaviour.
If I create a project and turn on the antlr nature, after saving the .g
file, a Parser and Lexer does get generated, but it doesn't show up in
the eclipse project.
(I confirm that the classes get generated by looking at the directory).
The project does have the antlr nature turned on (I can see "Antlr" as
one of the builders)
 
Has anyone seen this behaviour and know the solution?
 
I am running the following;
 
*  Eclipse  Version: 3.1.0 Build id: I20050219-1500  
* org.antlr.eclipse.core_3.0.3 
* org.antlr.eclipse.ui_3.0.5 
* org.antlr_2.7.4
 
 
all on Windows XP
 
 
Bharat
------------
This email and any attachments may contain confidential and/or
privileged information.  
If you are not the intended recipient, please contact the sender and
delete all copies of this email and any attachments.
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050518/981bfc8f/attachment.html
From parrt at cs.usfca.edu  Wed May 18 15:00:03 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed May 18 14:59:42 2005
Subject: [antlr-interest] v3 pre-release usage data and stat collection
In-Reply-To: <1116452416.8909.1.camel@localhost.localdomain>
References: <414D2C5D-C094-45F5-8D5D-42C178130F37@cs.usfca.edu>
	<1116452416.8909.1.camel@localhost.localdomain>
Message-ID: <2E36FA8D-6190-43CF-B076-B3359AE922D2@cs.usfca.edu>


On May 18, 2005, at 2:40 PM, Martin Probst wrote:
>> Once a week a dialog will pop-up in ANTLRWorks showing
>> you the report it is planning on sending to my antlr.org server.  The
>> stats/usage info will naturally be wiped clean of anything that could
>> identify you or your company (e.g., no list of rules or machine name
>> or whatever).
>>
>
> I think it's generally a good idea to build something like that into a
> GUI. But keep in mind that probably >50% of all computer nerds are
> really paranoid, so don't forget the option to show the actual
> information it wants to send.

Most definitely.  It will show in a big dialog box and unless you  
unplug the ethernet cable, the data will find a nice home on  
antlr.org :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From bharat at ambric.com  Wed May 18 15:08:19 2005
From: bharat at ambric.com (Bharat Purohit)
Date: Wed May 18 15:08:03 2005
Subject: [antlr-interest] Antlr plugin for eclipse problem
Message-ID: <C291E7B53B30114EA3EF037D279CD0EA112BD5@ben.ambric.local>

After looking at the directory I can see that the antlr plugin is not
generating all the files it should
(for instance the TokenTypes.txt files are missing) -- is there some log
file that the plugin writes to so that I can see where it failed?
 
 
 
Bharat
------------
This email and any attachments may contain confidential and/or
privileged information.  
If you are not the intended recipient, please contact the sender and
delete all copies of this email and any attachments.
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050518/f7fad037/attachment.html
From parrt at cs.usfca.edu  Wed May 18 17:05:26 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed May 18 17:05:03 2005
Subject: [antlr-interest] Documentation?
In-Reply-To: <4289C1FA.30000@cyconix.com>
References: <4288E062.7050505@cyconix.com>
	<52B9467C-439F-4F3B-A4FE-88CD8D50518C@cs.usfca.edu>
	<4289C1FA.30000@cyconix.com>
Message-ID: <D63DF569-9A91-4ED1-9421-1244DB7621FD@cs.usfca.edu>


On May 17, 2005, at 3:05 AM, Paul Johnson wrote:
>> Also note that the 3.0 version will have all that tree stuff  
>> cleaned  up and documented (hopefully in a nice book).
>>
>
> Sounds like you're missing a trick here. If I was getting 5K  
> downloads/month, then I'd take a couple of months off, finish the  
> book, and order myself a new yacht.  :)

Well, you have to wonder how many people would actually by the book.   
I suspect I'll receive about $2.50 per book.  Even if 1000 per month  
bought the book would I start to see money.  I'm guessing it won't be  
that high, no matter how great I think the book will be. ;)  Doesn't  
matter, I'm not doing it for the money--I'm doing it so that we have  
some really great doc to go with a really great tool!

That said, I'll take all the pizza and beer money I can get.  If I  
start getting enough cash from it, I'll probably start hosting  
monthly parsing revival "meetings" with free pizza in San Francisco. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From ArnarB at oddi.is  Thu May 19 01:18:17 2005
From: ArnarB at oddi.is (Arnar Birgisson)
Date: Thu May 19 01:19:19 2005
Subject: [antlr-interest] votes on rule+ vs (rule)+
Message-ID: <s28c4c00.006@emil.oddi.is>

+1

Arnar

>>> Terence Parr <parrt@cs.usfca.edu> 18.5.2005 18:15:32 >>>
Hi,

I'm leaning towards allowing rule+ as Scott and others have asked  
for.  I usually am for consistency, but I'm wondering if this is a  
case where consistency with "standard" EBNF is better than forcing  
the ANTLR consistency that all subrules have parentheses.

Please, no long arguments!  A simple +1 or -1 or 0 will suffice with  
a few comments if you want.

Thanks,
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org 
Cofounder, http://www.jguru.com


From serafettin_sentuerk at intergral.com  Thu May 19 01:26:49 2005
From: serafettin_sentuerk at intergral.com (Serafettin Senturk)
Date: Thu May 19 01:26:57 2005
Subject: [antlr-interest] Tree parsing problem
Message-ID: <ANEFKENHALPOILMBNJFGAEAICBAA.serafettin_sentuerk@intergral.com>


  Hello,

  I am trying to display variables with dots like (a.b.c.d) in my AST
generated by tree parser. For this reason, I have written the following rule
in my parser:

  identifier
	:
		IDENT (DOT! IDENT)*
		{#identifier = #(#[ILIST,"ILIST"], identifier);}
	;

   The following is the one that i have written in my tree parser grammar:

	ilist
	:	#(ILIST (IDENT)*)
	;

   In this case, i cannot see the DOTs(.) in my AST. But i want to include
DOTs in the AST and see them. When i write (DOT^) or only DOT in my parser,
it does not work. Does anybody have an idea how i can include this DOTs in
my AST?

  Regards,
 Serafettin





From ckng at nrg.cs.usm.my  Thu May 19 01:59:12 2005
From: ckng at nrg.cs.usm.my (CK Ng)
Date: Thu May 19 01:59:33 2005
Subject: [antlr-interest] Suggestion needed
Message-ID: <002001c55c51$06dab4f0$44025ddb@ckng>

Hi,

I'm new in the parser technology, I would like to get some suggestions or 
opinions for my current project.

I've a byte stream (from a file or a live stream) to be parsed into useful 
data, preferably into java object. From what I've gathered from reading 
Antlr, I could write a grammar to define the data layout. However, writing a 
EBNF grammar is a non-trivial task for normal user. Instead of defining the 
data specification using EBNF, I would like to use more human friendly 
interface by defining my own definition language, which can be written and 
understand more easily by the average user.

I could do

[InputStream]-->[data grammar]-->[output - obj]

But, I'd like to:

[my definition file]-->[my definition grammar]-->[parser]-->AST

[InputStream]-->[ (based on AST above) ???]-->[output - obj]

where I'm missing a connection between the two.

My question is how do I make use of my parsed definition to parse the input 
stream?
All examples and questions I found are geared toward 1st scenario, yet to 
find any that match my case.


Thanks.

Regards,
CK Ng

From gbennett at requisoft.co.uk  Thu May 19 04:36:11 2005
From: gbennett at requisoft.co.uk (Gary Bennett)
Date: Thu May 19 04:36:13 2005
Subject: [antlr-interest] Antlr Bug?
Message-ID: <DA4F6E2951D4E848B6F9A8717F53BC300F5BF7@excserv.requisoft.co.uk>

There may be a problem with the c# code generator.

I have been having problems with this grammar: It generates files but
they won't run.

## Grammar Start ##

options {
	language = "CSharp";
}

class TestParser extends Parser ;

options {
	buildAST = true;	// uses CommonAST by default
}

name: n:NAME
	{ Console.WriteLine(" Name: {0}", n.getText() ); } 
	;

class TestLexer extends Lexer;

WS	:	(' '
	|	'\t'
	|	'\n'
	|	'\r')
	{ $setType(Token.SKIP); }
	;

NAME: 'a'
	;

## Grammar End ##

In the generated c# code you get this:

	static public void initializeASTFactory( ASTFactory factory )
	{
		factory.setMaxNodeType(5);
	}

But this leads to an argument exception - it doesn't like the 5 at all.

Change the 5 to a 6 manually and it works!

Assuming that the c# code generator is ok then what should I have done
to the grammar to have ended up with a 6 in the call instead of a 5!

--------------------------------------------
Regards

Gary Bennett
Software Developer
Requisoft plc 
--------------------------------------------
From gt54-antlr at cyconix.com  Wed May 18 10:30:26 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Thu May 19 06:13:13 2005
Subject: [antlr-interest] Problem building 'cgram' example
In-Reply-To: <DC4E98D4-11EE-4B37-A9C6-483D572D8ED5@cs.usfca.edu>
References: <428B5D7F.2000800@cyconix.com>
	<DC4E98D4-11EE-4B37-A9C6-483D572D8ED5@cs.usfca.edu>
Message-ID: <428B7BB2.40704@cyconix.com>

Terence Parr wrote:
> 
> On May 18, 2005, at 8:21 AM, Paul Johnson wrote:
> 
>> I'm having a problem building the C grammar in the distribution  (with 
>> gcj, so I guess this may not have been tested).  Unfortunately, I 
>> don't know any Java, so I have no idea what's  causing the problem.. :)
> 
> 
> There are some posts and articles etc... about gcj I think.  Did you  
> find them?

Yes... 7 hits on the website, and some more on Google/antlr-interest. 
Almost all of them are related to creating a binary of antlr itself; 
this particular problem is in using 'gcj -C' as a replacement for javac, 
which is what it's meant to be. I think you've built the Java parser 
using gcj like this, but there doesn't seem to be much else related in 
the archives. I'll have another look through.

Thanks

Paul

From gt54-antlr at cyconix.com  Thu May 19 01:29:05 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Thu May 19 06:44:13 2005
Subject: [antlr-interest] Documentation?
In-Reply-To: <D63DF569-9A91-4ED1-9421-1244DB7621FD@cs.usfca.edu>
References: <4288E062.7050505@cyconix.com>	<52B9467C-439F-4F3B-A4FE-88CD8D50518C@cs.usfca.edu>	<4289C1FA.30000@cyconix.com>
	<D63DF569-9A91-4ED1-9421-1244DB7621FD@cs.usfca.edu>
Message-ID: <428C4E51.5030704@cyconix.com>


> Well, you have to wonder how many people would actually by the book.   I 
> suspect I'll receive about $2.50 per book.  Even if 1000 per month  
> bought the book would I start to see money.  

Should cover your pension, anyway.

> 
> That said, I'll take all the pizza and beer money I can get.  If I  
> start getting enough cash from it, I'll probably start hosting  monthly 
> parsing revival "meetings" with free pizza in San Francisco. :)

Great - if you can wire me a 16,000 mile return air ticket I might come 
along!

Paul

From johnm-antlr at non.net  Thu May 19 07:45:23 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Thu May 19 07:45:04 2005
Subject: [antlr-interest] v3 pre-release usage data and stat collection
In-Reply-To: <414D2C5D-C094-45F5-8D5D-42C178130F37@cs.usfca.edu>
References: <414D2C5D-C094-45F5-8D5D-42C178130F37@cs.usfca.edu>
Message-ID: <17036.42627.414587.639137@despot.non.net>

>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
[...]

> How do people feel about this?  Seems like it shouldn't bother anybody
> and it will *only* occur during the pre-release days when we'll have
> debugging and other stuff in there anyway.  Most people will be waiting
> for a full release, but the courageous and intrepid v3 pre-release users
> will have to hit "OK" once a week in the GUI. ;) Naturally if you don't
> use the GUI, you will never see the dialog and no data will be sent.

I'm uncomfortable unless there's an option for people to turn off this
"phone home" system.

Take care,
	John

From torkildr at resheim.no  Thu May 19 07:45:37 2005
From: torkildr at resheim.no (Torkild =?utf-8?q?Ulv=C3=B8y_Resheim?=)
Date: Thu May 19 07:52:05 2005
Subject: [antlr-interest] Antlr plugin for eclipse problem
In-Reply-To: <C291E7B53B30114EA3EF037D279CD0EA112BD5@ben.ambric.local>
References: <C291E7B53B30114EA3EF037D279CD0EA112BD5@ben.ambric.local>
Message-ID: <200505191645.37581.torkildr@resheim.no>

On Thursday 19 May 2005 00:08, Bharat Purohit wrote:
> After looking at the directory I can see that the antlr plugin is not
> generating all the files it should
> (for instance the TokenTypes.txt files are missing) -- is there some log
> file that the plugin writes to so that I can see where it failed?
>
Hi Bharat

Try deleting all generated files and do the job again. If nothing happens then 
check the runtime error log.
-- 
Med vennlig hilsen / Kind regards                                  ((
Torkild Ulv?y Resheim, Senior Systemutvikler / Software Engineer    ))
Emma EDB AS, Trondheim, Norway. http://www.emmaedb.no             |----|_
Private pages: http://resheim.no - "Any sufficiently advanced     |    | )
bug is indistinguishable from a feature."                         |____|'
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050519/5c056053/attachment.bin
From krishanu.debnath at gmail.com  Thu May 19 08:37:33 2005
From: krishanu.debnath at gmail.com (Krishanu Debnath)
Date: Thu May 19 08:37:36 2005
Subject: [antlr-interest] Antlr C++ Class Reference
In-Reply-To: <bc607a4e05051701057c86542c@mail.gmail.com>
References: <9fa1fefc0505162341ddcef7f@mail.gmail.com>
	<bc607a4e05051701057c86542c@mail.gmail.com>
Message-ID: <9fa1fefc050519083728e727a4@mail.gmail.com>

On 5/17/05, Ric Klaren <ric.klaren@gmail.com> wrote:

[snip]
 
> Note that you can rebuild the docs from the sources with doxygen
> (www.doxygen.org) use the doxygen.cfg provided with the sources.
> 
> Cheers,
> 
> Ric
> 

Thanks Ric, it worked.

Krishanu
From ewbank at gmail.com  Thu May 19 09:18:52 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Thu May 19 09:18:55 2005
Subject: Fwd: [antlr-interest] Tree parsing problem
In-Reply-To: <dd3a065f05051909164a2f7014@mail.gmail.com>
References: <ANEFKENHALPOILMBNJFGAEAICBAA.serafettin_sentuerk@intergral.com>
	<dd3a065f05051909164a2f7014@mail.gmail.com>
Message-ID: <dd3a065f05051909184ebc8c40@mail.gmail.com>

The "!" after DOT in your grammar rules discards the DOTs from the
generated list of nodes.  If you want them in the list, remove the "!"
- but do you /really/ want them there, since you know what they are?

Another way is to use
   IDENT ( DOT^ IDENT )*
which builds a left-desending tree of binary nodes with the DOTs as
the intermediate nodes.

As a different way, you might consider allowing "." to be part of an
identifier, and then blow if apart later if needed...

On 5/19/05, Serafettin Senturk <serafettin_sentuerk@intergral.com> wrote:
>   I am trying to display variables with dots like (a.b.c.d) in my AST
> generated by tree parser. For this reason, I have written the following rule
> in my parser:
>
>   identifier
>         :
>                 IDENT (DOT! IDENT)*
>                 {#identifier = #(#[ILIST,"ILIST"], identifier);}
>         ;
>
>    The following is the one that i have written in my tree parser grammar:
>
>         ilist
>         :       #(ILIST (IDENT)*)
>         ;
>
>    In this case, i cannot see the DOTs(.) in my AST. But i want to include
> DOTs in the AST and see them. When i write (DOT^) or only DOT in my parser,
> it does not work. Does anybody have an idea how i can include this DOTs in
> my AST?
>
>   Regards,
>  Serafettin
>
>
>
>
>
>
From john at pybus.org  Thu May 19 09:50:15 2005
From: john at pybus.org (John Pybus)
Date: Thu May 19 10:17:22 2005
Subject: [antlr-interest] v3 pre-release usage data and stat collection
In-Reply-To: <414D2C5D-C094-45F5-8D5D-42C178130F37@cs.usfca.edu>
References: <414D2C5D-C094-45F5-8D5D-42C178130F37@cs.usfca.edu>
Message-ID: <428CC3C7.2060800@pybus.org>

Terence Parr wrote:
> How do people feel about this?  Seems like it shouldn't bother  anybody 
> and it will *only* occur during the pre-release days when  we'll have 
> debugging and other stuff in there anyway.  Most people  will be waiting 
> for a full release, but the courageous and intrepid  v3 pre-release 
> users will have to hit "OK" once a week in the  GUI. ;)  Naturally if 
> you don't use the GUI, you will never see the  dialog and no data will 
> be sent.

As described, making it obvious what's about to be sent with the option 
to cancel it, and for the pre-releases only, I don't see any problems 
with it, and it should help produce a better tuned release.

John
From parrt at cs.usfca.edu  Thu May 19 10:20:47 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu May 19 10:20:43 2005
Subject: [antlr-interest] v3 pre-release usage data and stat collection
In-Reply-To: <428CC3C7.2060800@pybus.org>
References: <414D2C5D-C094-45F5-8D5D-42C178130F37@cs.usfca.edu>
	<428CC3C7.2060800@pybus.org>
Message-ID: <77F949F6-62A6-460A-8902-106ADBFFFC5D@cs.usfca.edu>


On May 19, 2005, at 9:50 AM, John Pybus wrote:

> Terence Parr wrote:
>
>> How do people feel about this?  Seems like it shouldn't bother   
>> anybody and it will *only* occur during the pre-release days when   
>> we'll have debugging and other stuff in there anyway.  Most  
>> people  will be waiting for a full release, but the courageous and  
>> intrepid  v3 pre-release users will have to hit "OK" once a week  
>> in the  GUI. ;)  Naturally if you don't use the GUI, you will  
>> never see the  dialog and no data will be sent.
>>
>
> As described, making it obvious what's about to be sent with the  
> option to cancel it, and for the pre-releases only, I don't see any  
> problems with it, and it should help produce a better tuned release.

Hi John,

There won't be any way to cancel it minus unplugging ethernet.  Just  
like TiVo ;)  Your only choice will be to wait until a real release.   
This release is only for the intrepid, believe me.  In exchange for  
early access people will provide me with info to make the real  
release better.  Another reason for the required nature is that to  
get any hope of a scientific sample, I cannot let people self select  
to send data or not.

Also note that at this time the GUI is in a big state of flux and GUI  
source will not be provided for it for a couple of months.  The v3  
ANTLR source will all be available at pre-release of course.

Thanks,
Ter
From scott at javadude.com  Thu May 19 11:38:33 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Thu May 19 10:43:22 2005
Subject: [antlr-interest] ok, rule+ wins
In-Reply-To: <4102023A-92B3-4DCF-9BB1-07D4EF62A25D@cs.usfca.edu>
References: <4102023A-92B3-4DCF-9BB1-07D4EF62A25D@cs.usfca.edu>
Message-ID: <27910.65.114.139.158.1116527913.squirrel@65.114.139.158>

Awesome! Thanks for considering it and going with it!

I can now stave off carpal tunnel for another year....
-- Scott

> Hi,
>
> Ok, thanks for the votes.  I'm looking at implementing it for v3
> first pre-release.
>
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
>


From parrt at cs.usfca.edu  Thu May 19 10:56:00 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu May 19 10:55:39 2005
Subject: [antlr-interest] ok, rule+ wins
In-Reply-To: <27910.65.114.139.158.1116527913.squirrel@65.114.139.158>
References: <4102023A-92B3-4DCF-9BB1-07D4EF62A25D@cs.usfca.edu>
	<27910.65.114.139.158.1116527913.squirrel@65.114.139.158>
Message-ID: <9B06DEA3-9B9D-4A77-B661-F3A6F17FF36E@cs.usfca.edu>

It's implemented and unit tests built.  Works on '0'..'9'+ too....any  
grammar atom.  A sign that the new v3 is properly factored and well  
thought out: I added the grammar fragment and tree construction to a  
single rule in antlr.g and all future phases including DFA  
construction and code gen had no idea they had been hoodwinked!

Ter
On May 19, 2005, at 11:38 AM, Scott Stanchfield wrote:

> Awesome! Thanks for considering it and going with it!
>
> I can now stave off carpal tunnel for another year....
> -- Scott
>
>
>> Hi,
>>
>> Ok, thanks for the votes.  I'm looking at implementing it for v3
>> first pre-release.
>>
>> Ter
>> --
>> CS Professor & Grad Director, University of San Francisco
>> Creator, ANTLR Parser Generator, http://www.antlr.org
>> Cofounder, http://www.jguru.com
>>
>>
>
>
>

--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From fanyang_32 at yahoo.ca  Thu May 19 11:59:01 2005
From: fanyang_32 at yahoo.ca (Fan Yang)
Date: Thu May 19 11:59:04 2005
Subject: [antlr-interest] Stack Overflow in the tree parser
Message-ID: <20050519185901.45394.qmail@web52803.mail.yahoo.com>

Hi All,
 
When I'm using java parser(generate in C#) to parser the following code, StackOverflow Exception was threw in the tree parser. the problem is deep recursive function call in array initializor. 
 
 Would you please tell me how to deal with this problem(not mean to increase the stack size). Any suggestion will be appriciated.
 
Fan
 
 
 
The trouble maker source code :
 
    public Object[][] getContents() {
        return new Object[][] {
            { "LocaleString", "ja" }, // locale id based on iso codes
            { "CollationElements",
                // Japanese JIS order
                // Ignorables
                "&\u0486;\u30FC"                         // L. MARK
                + ";\u3099"                                // V. MARK
                + ";\u309A"                                // SV. MARK
                + ";\u30FB"                                // Kana MIDDLE DOT
                + ",\u303F"                                // IDEOGRAPHIC HALF FILL SPACE
                // Symbols
                + "&\u2212 <\u309B"                       // Kana-Gana V. SOUND MARK
                + "<\u309C"                                // Kana-Gana SV. SOUND MARK
                + "<\u309D"                                // Gana ITERATION MARK
                + ",\u30FD"                                // Kana ITERATION MARK
                + "<\u309E"                                // Gana V. ITERATION MARK
                + ",\u30FE"                                // Kana V. ITERATION MARK
                // Hiragana/Kanakana Letters
                // Remember that decomposition automatically turns
                // <ga> into <ka><length>, so <ga>,etc. don't need separate rules
                + "& Z <\u3042"                            // Gana A
                + ",\u3041"                                // Gana SMALL A
                + ",\u30A2"                                // Kana A
                + ",\u30A1"                                // Kana SMALL A
                + "<\u3044"                                // Gana I
                + ",\u3043"                                // Gana SMALL I
                + ",\u30A4"                                // Kana I
                + ",\u30A3"                                // Kana SMALL I
                + "<\u3046"                                // Gana U
                + ",\u3045"                                // Gana SMALL U
                + ",\u30A6"                                // Kana U
                + ",\u30A5"                                // Kana SMALL U
                + "<\u3048"                                // Gana E
                + ",\u3047"                                // Gana SMALL E
                + ",\u30A8"                                // Kana E
                + ",\u30A7"                                // Kana SMALL E
                + "<\u304A"                                // Gana O
                + ",\u3049"                                // Gana SMALL O
                + ",\u30AA"                                // Kana O
                + ",\u30A9"                                // Kana SMALL O
                + "<\u304B"                                // Gana KA
                + ",\u30AB"                                // Kana KA
                + ",\u30F5"                                // Kana SMALL KA
                + "<\u304D"                                // Gana KI
                + ",\u30AD"                                // Kana KI
                + "<\u304F"     // Gana KU
                + ",\u30AF"     // Kana KU
                + "<\u3051"     // Gana KE
                + ",\u30B1"     // Kana KE
                + ",\u30F6"     // Kana SMALL KE
                + "<\u3053"     // Gana KO
                + ",\u30B3"     // Kana KO
                + "<\u3055"     // Gana SA
                + ",\u30B5"     // Kana SA
                + "<\u3057"     // Gana SI
                + ",\u30B7"     // Kana SI
                + "<\u3059"     // Gana SU
                + ",\u30B9"     // Kana SU
                + "<\u305B"     // Gana SE
                + ",\u30BB"     // Kana SE
                + "<\u305D"     // Gana SO
                + ",\u30BD"     // Kana SO
...
more are here
...
                " < \u582f < \u69c7 < \u9059 < \u7464 < \u51dc < \u7199"
            }
        };
    }




---------------------------------
Post your free ad now! Yahoo! Canada Personals
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050519/589f2b49/attachment.html
From ckng at nrg.cs.usm.my  Thu May 19 19:28:31 2005
From: ckng at nrg.cs.usm.my (CK Ng)
Date: Thu May 19 19:29:04 2005
Subject: [antlr-interest] Suggestion needed
References: <002001c55c51$06dab4f0$44025ddb@ckng>
Message-ID: <005f01c55ce3$9f9ceb80$44025ddb@ckng>

I come across StringTemplate and it give me the following idea, can 
something like this be done? Anyone?

[my definition file]-->[parser < my definition grammar]-->AST

[AST above] --> [StringTemplate < template] --> [grammar 2]

[InputStream]-->[ parser < grammar 2] -->[output - obj]


Or is there other better approaches?

Regards,
CK Ng


----- Original Message ----- 
Sent: Thursday, May 19, 2005 4:59 PM
Subject: [antlr-interest] Suggestion needed


> Hi,
>
> I'm new in the parser technology, I would like to get some suggestions or 
> opinions for my current project.
>
> I've a byte stream (from a file or a live stream) to be parsed into useful 
> data, preferably into java object. From what I've gathered from reading 
> Antlr, I could write a grammar to define the data layout. However, writing 
> a EBNF grammar is a non-trivial task for normal user. Instead of defining 
> the data specification using EBNF, I would like to use more human friendly 
> interface by defining my own definition language, which can be written and 
> understand more easily by the average user.
>
> I could do
>
> [InputStream]-->[data grammar]-->[output - obj]
>
> But, I'd like to:
>
> [my definition file]-->[my definition grammar]-->[parser]-->AST
>
> [InputStream]-->[ (based on AST above) ???]-->[output - obj]
>
> where I'm missing a connection between the two.
>
> My question is how do I make use of my parsed definition to parse the 
> input stream?
> All examples and questions I found are geared toward 1st scenario, yet to 
> find any that match my case.
>
>
> Thanks.
>
> Regards,
> CK Ng
> 

From bharat at ambric.com  Fri May 20 08:50:47 2005
From: bharat at ambric.com (Bharat Purohit)
Date: Fri May 20 08:50:31 2005
Subject: [antlr-interest] gui to define grammar?
Message-ID: <C291E7B53B30114EA3EF037D279CD0EA112CA4@ben.ambric.local>

Hi,
 
Does anyone know of a tool that you can use to help you define grammar? 
Usually there are examples of the language that you want to capture --
so having a GUI where you can highlight text and say that this is a
keyword (for instance, this would turn into a TOKEN), would be really
useful.
 
Anyone built know of these?
 
 
 
 
Bharat
------------
This email and any attachments may contain confidential and/or
privileged information.  
If you are not the intended recipient, please contact the sender and
delete all copies of this email and any attachments.
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050520/f9310283/attachment.html
From voytechs at yahoo.com  Fri May 20 09:19:18 2005
From: voytechs at yahoo.com (Mark Bednarczyk)
Date: Fri May 20 09:18:38 2005
Subject: [antlr-interest] JNetStream's NPL and ANTLR
Message-ID: <PLENJLPIEOPEDJJNCHDHAECFFHAA.voytechs@yahoo.com>

I just want to introduce myself to the ANTLR group as I will probably have
lots of questions and would like suggestions as to how best utilize ANTLR in
my own OpenSource project JNetStream.

http://jnetstream.sf.org

I am not a network programmer by trade but by hobby. My profession is as
Network Analyst and Architect. So naturally most of the code I produce has
to do with "networks".

JNetStream is a packet decoder that uses a special purpose language called
NPL (Network Protocol Language). The language is very C/JAVA like but with
specific language statements and keywords that are geared towards helping
network gurus write Network Protocol Definitions. I build my own scanners,
parsers, linker and interpreter from scratch, but I find that I have to fix
a lot of wrong turns I made in the low level compiler area. The NPL language
itself has withstood some pretty hefty tests and requirements from the
network community and proved very resilient.

I have a user guide that goes into JNetStream in general and goes over the
NPL syntax and constructs:

http://jnetstream.sourceforge.net/docs/userguide.html

My bigger goal is to allow users to write and contribute NPL definitions for
all network protocols and binary structures known to man through a special
database. Then updates can be downloaded of just the definitions into
already deployed installations of my decoder. Companies already write
definitions for their custom protocols and use NPL to describe them.  Also
further language enhancements will be made to allow users to build many
different high level analysis algorithms that can analyze captured network
traffic. Again all downloadable from central database I call netrepository.

The database and tools will reside at this address. http://netrepository.org
(Currently website is empty!)


I'm still looking through ANTLR's documentation and it looks like a
wonderful fit for my purpose. So expect a few questions from me over next
coming weeks. I welcome any input as well.

Cheers,
mark....
voytechs@yahoo.com


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050520/f58f9bc6/attachment.html
From parrt at cs.usfca.edu  Fri May 20 10:19:20 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri May 20 10:18:55 2005
Subject: [antlr-interest] gui to define grammar?
In-Reply-To: <C291E7B53B30114EA3EF037D279CD0EA112CA4@ben.ambric.local>
References: <C291E7B53B30114EA3EF037D279CD0EA112CA4@ben.ambric.local>
Message-ID: <9174514E-FB44-41C8-8DC7-59370DAE8A76@cs.usfca.edu>

On May 20, 2005, at 8:50 AM, Bharat Purohit wrote:
>
> Does anyone know of a tool that you can use to help you define  
> grammar?
> Usually there are examples of the language that you want to capture  
> -- so having a GUI where you can highlight text and say that this  
> is a keyword (for instance, this would turn into a TOKEN), would be  
> really useful.
>
> Anyone built know of these?

Jean Bovet and I are planning on doing something like that; hopefully  
this Fall. :)

Terence

--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From Loring.G.Craymer at jpl.nasa.gov  Fri May 20 12:48:12 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Fri May 20 12:48:29 2005
Subject: [antlr-interest] v3 pre-release usage data and stat
  collection
In-Reply-To: <414D2C5D-C094-45F5-8D5D-42C178130F37@cs.usfca.edu>
References: <414D2C5D-C094-45F5-8D5D-42C178130F37@cs.usfca.edu>
Message-ID: <6.2.1.2.2.20050520121210.02a8d778@mail.jpl.nasa.gov>

Ter--

Like others, I'm uncomfortable about spyware of any sort--even Microsoft 
has gotten civilized enough to send reports only when there are serious 
problems (crashes) and to ask if you want the report sent.  In this case, I 
think that it is the wrong paradigm.  Much better to my mind would be a bug 
reporting and tracking system--Scarab, Bugzilla, or something 
equivalent--with voting to help establish priority.  RFEs are at least as 
important as fixes to existing features, and usage stats will be unhelpful 
for an alpha prototype.  Features that are used frequently probably work; 
features used infrequently are either minimally useful, defective, or 
unknown to the user--into which category should they be tossed?

Usage tracking makes sense if the design is mature.  That cannot be the 
case here.  Intelligent feedback is needed to improve the product; results 
from a feedback automaton are not likely to be very useful.  Also:  having 
a feedback automaton at this stage will "taint" release versions.  If you 
play "Big Brother" at this stage, users will be suspicious that you have 
perfected spying in the release versions and no longer inform the 
user.  [Having source code will help to allay this fear, but probably not 
entirely.]


At 01:17 PM 5/18/2005, Terence Parr wrote:
>...
>By knowing which features you use in the GUI we can focus on
>improving those features.  By tracking info about your grammar and
>how much lookahead is used during actual parsing, I can optimize
>ANTLR v3 for the full release.

That sounds nice, but in reality you would probably get much more 
information from processing ANTLR 2 grammars translated to ANTLR 3.


>How do people feel about this?  Seems like it shouldn't bother
>anybody and it will *only* occur during the pre-release days when
>we'll have debugging and other stuff in there anyway.  Most people
>will be waiting for a full release, but the courageous and intrepid
>v3 pre-release users will have to hit "OK" once a week in the
>GUI. ;)  Naturally if you don't use the GUI, you will never see the
>dialog and no data will be sent.

Forget the spyware, install a bug tracking database which users contribute 
to.  Save the spyware for class labs--there it might provide information 
for designing a help system for newbies.

--Loring


>Regards,
>Terence
>--
>CS Professor & Grad Director, University of San Francisco
>Creator, ANTLR Parser Generator, http://www.antlr.org
>Cofounder, http://www.jguru.com


From fanyang_32 at yahoo.ca  Fri May 20 13:04:31 2005
From: fanyang_32 at yahoo.ca (Fan Yang)
Date: Fri May 20 13:04:35 2005
Subject: [antlr-interest] "finally" blocks 
Message-ID: <20050520200431.29101.qmail@web52810.mail.yahoo.com>

Hi,

Long time ago, Paul posted the request on adding
finally blocks to Antlr. later there were some
discussion on it, but nothing happened later.

I think not only java need it but also MS dot net(C#)
languages need finally blocks, actually maybe all the
languages which have garbage collection implementation
need finally block to simulate destructor.

It need to modify antlr itself and compile it again
under unix or cgwin on windows, I don't have both
enviroment, Can somedody do it? thank you.

Fan


>In using ANTLR with Java, it would be nice to be able
to specify
>	"finally" blocks, e.g.:
>
>		someRule
>		    : SOME TOKEN
>		    ;
>		    exception
>		    catch [ MyException e ] {
>		        // ...
>		    }
>		    finally {
>		    	// ...
>		    }
>
>	Or just a "finally" block alone.
>
>	- Paul

______________________________________________________________________ 
Post your free ad now! http://personals.yahoo.ca
From jim.crafton at gmail.com  Sat May 21 16:17:40 2005
From: jim.crafton at gmail.com (Jim Crafton)
Date: Sat May 21 16:17:44 2005
Subject: [antlr-interest] Capturing comments
Message-ID: <e88138500505211617508a5e9b@mail.gmail.com>

Is there a good example of a way to capture a block of C/C++ style
comments and store them in a custom AST class? I have a custom AST
class and I'm storing the line/col of all the nodes, but I'd also like
ot store off comments as well. For example, consider the following:

/**
Some comments here...
*/
class Foo {

};

I'd like to capture the "Some comments here..." text and associate it
with the "Foo" node. Is that possible?

Thanks 

Jim
From hammett at uol.com.br  Sun May 22 20:12:47 2005
From: hammett at uol.com.br (hammett)
Date: Sun May 22 20:12:58 2005
Subject: [antlr-interest] Optional tokens
Message-ID: <001301c55f45$4c33ea20$0200000a@powermachine>

Howdy!

I'm struggling with my grammar where I need to express that SEMI or NEWLINE 
is required to signal the end of my statements while should be totally 
ignored elsewhere.

So, a possible AST could be

NEWLINE
TypeDefinition
NEWLINE
  MethodDefintion
  NEWLINE
    Statements either SEMI or NEWLINE must be used to end each statement
      But NEWLINEs on the code should be ignored

Being concrete

-- --
# a comment (Token.SKIP)

class MyClass

  def self.initialize
    x, y = 1, 2
    puts x, y
  end

end
-- --

Any help would be great!

-- 
Cheers,
hammett
http://www.castleproject.org/~hammett


From jbb at acm.org  Sun May 22 20:44:30 2005
From: jbb at acm.org (John B. Brodie)
Date: Sun May 22 20:45:58 2005
Subject: [antlr-interest] Optional tokens
In-Reply-To: <001301c55f45$4c33ea20$0200000a@powermachine> (message from
	hammett on Mon, 23 May 2005 00:12:47 -0300)
References: <001301c55f45$4c33ea20$0200000a@powermachine>
Message-ID: <E1Da3ri-0006Jh-00@gecko>

Greetings!

On Mon, 23 May 2005 00:12:47 -0300 hammett <hammett@uol.com.br> wrote:

>I'm struggling with my grammar where I need to express that SEMI or NEWLINE 
>is required to signal the end of my statements while should be totally 
>ignored elsewhere.

...snip...

>Being concrete
>
>-- --
># a comment (Token.SKIP)
>
>class MyClass
>
>  def self.initialize
>    x, y = 1, 2
>    puts x, y
>  end
>
>end
>-- --
>
>Any help would be great!

I am sorry that I will not be very helpful in your quest, but I have to
ask the following.  Do you really expect that:

    x ; , ; y ; = ; 1 ; , ; 2

would parse to the same AST as:

    x, y = 1, 2

you did say that SEMI is to be totally ignored anywhere except at the
end of a statement...

and so just where does a statement end anyway? (answering this may
lead you to the answer of your original question)

Just Asking...
   -jbb
From hammett at uol.com.br  Sun May 22 20:59:29 2005
From: hammett at uol.com.br (hammett)
Date: Sun May 22 20:59:38 2005
Subject: [antlr-interest] Optional tokens
References: <001301c55f45$4c33ea20$0200000a@powermachine>
	<E1Da3ri-0006Jh-00@gecko>
Message-ID: <000601c55f4b$d1f3d110$0200000a@powermachine>

Hiya!

----- Original Message ----- 
From: "John B. Brodie" <jbb@acm.org>

> Do you really expect that:
>
>    x ; , ; y ; = ; 1 ; , ; 2
>
> would parse to the same AST as:
>
>    x, y = 1, 2

Call me a dreamer! :-D

> you did say that SEMI is to be totally ignored anywhere except at the
> end of a statement...
>
> and so just where does a statement end anyway? (answering this may
> lead you to the answer of your original question)

I'm more concerned with NEWLINE... answering your question, I did:

statement:
    :
    (
      declarationStmt
      |
      compoundStmt
      |
      expressionStmt
    )
    (SEMI!|NEWLINE!)
    ;

But having NEWLINE as a real token obligates me to deal with it everywhere, 
that's the bottom line problem...

Thanks,

-- 
Cheers,
hammett
http://www.castleproject.org/~hammett





From antlr at shmuelhome.mine.nu  Sun May 22 22:49:38 2005
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Sun May 22 22:50:53 2005
Subject: [antlr-interest] Optional tokens
In-Reply-To: <000601c55f4b$d1f3d110$0200000a@powermachine>
References: <001301c55f45$4c33ea20$0200000a@powermachine>	<E1Da3ri-0006Jh-00@gecko>
	<000601c55f4b$d1f3d110$0200000a@powermachine>
Message-ID: <42916EF2.3000206@shmuelhome.mine.nu>

hammett wrote:
> ----- Original Message ----- From: "John B. Brodie" <jbb@acm.org>
> 
>> Do you really expect that:
>>
>>    x ; , ; y ; = ; 1 ; , ; 2
>>
>> would parse to the same AST as:
>>
>>    x, y = 1, 2
> 
> 
> Call me a dreamer! :-D
> 
>> you did say that SEMI is to be totally ignored anywhere except at the
>> end of a statement...
>>
>> and so just where does a statement end anyway? (answering this may
>> lead you to the answer of your original question)
> 
> 
> I'm more concerned with NEWLINE... answering your question, I did:
> 
> statement:
>    :
>    (
>      declarationStmt
>      |
>      compoundStmt
>      |
>      expressionStmt
>    )
>    (SEMI!|NEWLINE!)
>    ;
> 
> But having NEWLINE as a real token obligates me to deal with it 
> everywhere, that's the bottom line problem...

I will repeat John's question. If a NEWLINE can occur anywhere, where 
does a statement end? If it can only occur (and must occur) at a 
statement end then defactoring and putting it at the end of each of your 
statement types will should solve your problem.
From hammett at uol.com.br  Sun May 22 23:52:32 2005
From: hammett at uol.com.br (hammett)
Date: Sun May 22 23:52:42 2005
Subject: [antlr-interest] Optional tokens
References: <001301c55f45$4c33ea20$0200000a@powermachine>	<E1Da3ri-0006Jh-00@gecko><000601c55f4b$d1f3d110$0200000a@powermachine>
	<42916EF2.3000206@shmuelhome.mine.nu>
Message-ID: <001001c55f63$ff323a50$0200000a@powermachine>

Hiya!

> I will repeat John's question. If a NEWLINE can occur anywhere, where does 
> a statement end? If it can only occur (and must occur) at a statement end 
> then defactoring and putting it at the end of each of your statement types 
> will should solve your problem.

Allow me to rephrase my problem: a NEWLINE is meaningless anywhere but at 
statements end, which means that it must be ignored as a token anywhere but 
at statements end.

I believe aspl VBScript grammar solved that nicely. Gonna use their 
approach.


Thanks

-- 
Cheers,
hammett
http://www.castleproject.org/~hammett


From ric.klaren at gmail.com  Mon May 23 01:20:15 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon May 23 01:20:19 2005
Subject: [antlr-interest] Capturing comments
In-Reply-To: <e88138500505211617508a5e9b@mail.gmail.com>
References: <e88138500505211617508a5e9b@mail.gmail.com>
Message-ID: <bc607a4e05052301204f8eb574@mail.gmail.com>

Hi,

On 5/22/05, Jim Crafton <jim.crafton@gmail.com> wrote:
> Is there a good example of a way to capture a block of C/C++ style
> comments and store them in a custom AST class? I have a custom AST
> class and I'm storing the line/col of all the nodes, but I'd also like
> ot store off comments as well. For example, consider the following:
> 
> /**
> Some comments here...
> */
> class Foo {
> 
> };
> 
> I'd like to capture the "Some comments here..." text and associate it
> with the "Foo" node. Is that possible?

Check out the hidden token stream examples in the distribution that
should get you started. There should also be a number of threads on
this topic in the archive (hidden token stream would probably be a
good search term).

Cheers,

Ric
From ric.klaren at gmail.com  Mon May 23 04:07:30 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon May 23 04:07:33 2005
Subject: [antlr-interest] Optional tokens
In-Reply-To: <001301c55f45$4c33ea20$0200000a@powermachine>
References: <001301c55f45$4c33ea20$0200000a@powermachine>
Message-ID: <bc607a4e05052304072f7cdcf0@mail.gmail.com>

Hi,

On 5/23/05, hammett <hammett@uol.com.br> wrote:
> I'm struggling with my grammar where I need to express that SEMI or NEWLINE
> is required to signal the end of my statements while should be totally
> ignored elsewhere.
> 
> So, a possible AST could be
> 
> NEWLINE
> TypeDefinition
> NEWLINE
>   MethodDefintion
>   NEWLINE
>     Statements either SEMI or NEWLINE must be used to end each statement
>       But NEWLINEs on the code should be ignored

Bit of a fundamental question do you need/want the newlines in your
ast? In general you'd want to reduce complexity of the stuff you're
parsing the further you go down in your 'parser-stack'. E.g. in lexer
and parser you deal with hopefully most of the irregularity of your
language and spit out a AST that's more geared towards easily
processing the input. Sometimes you'd need extra tree transformations
to come to a really regular AST that you can process very easily
(hardly any ambiguities by introducing imaginary tokens, reordering
etc..)

Unless you of course do some transformations that require keeping
around the whitespace and such, then disregard my comment :)

Cheers,

Ric
From antlr at shmuelhome.mine.nu  Mon May 23 04:27:32 2005
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Mon May 23 04:29:05 2005
Subject: [antlr-interest] Optional tokens
In-Reply-To: <001001c55f63$ff323a50$0200000a@powermachine>
References: <001301c55f45$4c33ea20$0200000a@powermachine>	<E1Da3ri-0006Jh-00@gecko><000601c55f4b$d1f3d110$0200000a@powermachine>	<42916EF2.3000206@shmuelhome.mine.nu>
	<001001c55f63$ff323a50$0200000a@powermachine>
Message-ID: <4291BE24.3000704@shmuelhome.mine.nu>

hammett wrote:

>> I will repeat John's question. If a NEWLINE can occur anywhere, where 
>> does a statement end? If it can only occur (and must occur) at a 
>> statement end then defactoring and putting it at the end of each of 
>> your statement types will should solve your problem.
>
>
> Allow me to rephrase my problem: a NEWLINE is meaningless anywhere but 
> at statements end, which means that it must be ignored as a token 
> anywhere but at statements end.
>
> I believe aspl VBScript grammar solved that nicely. Gonna use their 
> approach.
>
I don't know VBScript but I do know the problems with parsing javascript 
and the solutions are not elegant. In javascript, semicolons are 
optional but do mean EOS if present. EOL is usually  meaningless except 
when occuring between incompatable tokens and then it means semicolon. 
So basically, when the parser doesn't understand what it gets it tells 
the lexer "try again with a semicolon". Unless of course EOL follows 
break, continue, or return in which case it is unconditionally a 
semicolon. Not a nice language.
The simplest way to handle this is for the lexer to know the token pairs 
that are acceptable to the parser and replace EOL by semicolon whenever 
not doing so would create an illegal pair.
I hope this gives you some insight into the problem that you are facing. 
Alternatively, somebody can suggest a clean method for dealing with 
javascripts virtual semicolon.
From hammett at uol.com.br  Mon May 23 04:31:05 2005
From: hammett at uol.com.br (hammett)
Date: Mon May 23 04:31:16 2005
Subject: [antlr-interest] Optional tokens
References: <001301c55f45$4c33ea20$0200000a@powermachine>
	<bc607a4e05052304072f7cdcf0@mail.gmail.com>
Message-ID: <000801c55f8a$e8bbe240$0200000a@powermachine>

Hi there,

----- Original Message ----- 
From: "Ric Klaren" <ric.klaren@gmail.com>

> Bit of a fundamental question do you need/want the newlines in your
> ast? 

No no, it was bed time so I sort of confused AST with my token stream :-D

-- 
Cheers,
hammett
http://www.castleproject.org/~hammett


From serafettin_sentuerk at intergral.com  Mon May 23 04:54:56 2005
From: serafettin_sentuerk at intergral.com (Serafettin Senturk)
Date: Mon May 23 04:55:04 2005
Subject: [antlr-interest] Writing out the source code
Message-ID: <ANEFKENHALPOILMBNJFGAEFECBAA.serafettin_sentuerk@intergral.com>


 Hello,

 I have got my transformed tree(AST) by the help of tree parser. Does
anybody have an idea how i can now write this AST as a source code in an
external file? again using another tree parser or how?


  Regards,
 Serafettin


From stefan at amiq.ro  Mon May 23 05:30:19 2005
From: stefan at amiq.ro (stefan)
Date: Mon May 23 05:36:11 2005
Subject: [antlr-interest] Writing out the source code
In-Reply-To: <ANEFKENHALPOILMBNJFGAEFECBAA.serafettin_sentuerk@intergral.com>
References: <ANEFKENHALPOILMBNJFGAEFECBAA.serafettin_sentuerk@intergral.com>
Message-ID: <200505231530.19492.stefan@amiq.ro>

On Monday 23 May 2005 14:54, Serafettin Senturk wrote:
>  Hello,
>
>  I have got my transformed tree(AST) by the help of tree parser. Does
> anybody have an idea how i can now write this AST as a source code in an
> external file? again using another tree parser or how?
You may inherit the tree parser grammar you use now. The new, inherited, 
grammar looks, from a structural point of view, identical with the old one. 
Now you must stuff actions that take the parameters values from the rules and 
put them in some string templates. As you can see below:

OriginalGrammar extends TreeParser;

program:
    #(PROGRAM some_declaration_1 some_declaration_2)
   ;

and, new, modified grammar looks like:

NewGrammar extends OriginalGrammar;

program returns [StringTemplate res = null]
{
   StringTemplate decl_1 = null, decl_2 = null;
} :
    #(PROGRAM id:ID decl_1=some_declaration_1 decl_2=some_declaration_2)
   {
          res = SomeStringTemplateFactory.getStringTemplate("my_program");
          res.setAttribute("id", id.getText());
          res.setAttribute("declaration_1", decl_1);
          res.setAttribute("declaration_2", decl_2);
          // printing action
          System.out.println("->", res.toString());
          // saving action
         BufferedWriter _bw = new BufferedWriter(new FileWriter("path"));
         res.write(SomeStringTemplateFactory.getStringTemplateWriter(_bw));
         _bw.flush();
         _bw.close();
   }
   ;

   The rule "program" is the top/entry rule of your tree, while the 
"declaration_#" are other rules.
   Class "SomeStringTemplateFactory" can be a custom factory or the one 
provided by the string-template package.
   Each node in tree grammar will have a different string template associated 
with it in order to accomodate the different language structures.

    The  template file may look like :

group my_root_group;

my_program(id, declaration_1, declaration_2) ::=<<
MY_PROGRAM $id$ is {
        // my first declaration
        $declaration_1$ ;
        // some coments
        // second, funny, declaration
        HAHAHA 
              $declaration_2$
        AHAHAH
}
>>

      Other usefull information you may find at : 
http://www.codegeneration.net/tiki-read_article.php?articleId=77
       For more info on string templates look at: www.stringtemplate.org
       For more info on how to stuff actions in tree parser see antlr manual.
>
>   Regards,
>  Serafettin
From gregbedwell at gmail.com  Mon May 23 02:59:45 2005
From: gregbedwell at gmail.com (Greg Bedwell)
Date: Mon May 23 10:46:54 2005
Subject: [antlr-interest] Exiting on parser errors
Message-ID: <4c3df4d3050523025976fdf1aa@mail.gmail.com>

I'm new to ANTLR so I expect this is a pretty simple question.  I've
looked through the docs and tohugh I;ve found stuff hinting towards
this I've not been able to see a simple explanation as far as I can
see.

I'm using ANTLR to generate C++ to parse a simple language of my own
design.  Initially I wrote my own parser but as the language grew more
complex I decided to see what a proper tool could do.  It's worked
wonders and I can't fault it, but I'm just running into a simple
problem.

Whenever the parser encounters a syntax error it tells me the location
of the error and what was expected which is great but then it
continues on through.  Due to the legacy of the program I am
incorporating it into it will still pass the created data structure
through to the next stage which causes a segmentation fault when
errors have been found.

I know I *could* build in some checks at this stage of the program for
invalid data structures and exit the program there, but I'm sure there
must be an easier way to do it from ANTLR.

In simple terms, I just want to call exit(1) as soon as the first
syntax error is detected by ANTLR and the error message is displayed.

Thanks.
From mattiasw at gmail.com  Mon May 23 07:07:59 2005
From: mattiasw at gmail.com (Mattias)
Date: Mon May 23 10:47:07 2005
Subject: [antlr-interest] Please make the archive searchable
Message-ID: <97ef4c8105052307073bad1b9c@mail.gmail.com>

I normally use lex+yacc and I am used to have default cases at the
bottom of the lexer.

I got " warning:lexical nondeterminism between rules HOUR24 and IGNORE upon"

and search antlr.org for " lexical nondeterminism " and didn't get any
pointer to a solution except turning of the warning

I hoped I would find some kind of answer at antlr.org or in the mailing list.

http://www.antlr.org/pipermail/antlr-interest/

but it isn't searchable. I also went to jguru, but no searching
available there unless you are a premium member.

Except for the the warnings, antlr works well.

-- Mattias
From parrt at cs.usfca.edu  Mon May 23 10:51:06 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon May 23 10:50:42 2005
Subject: [antlr-interest] Exiting on parser errors
In-Reply-To: <4c3df4d3050523025976fdf1aa@mail.gmail.com>
References: <4c3df4d3050523025976fdf1aa@mail.gmail.com>
Message-ID: <F313949D-4C67-48EF-ACF5-5877309BEA8E@cs.usfca.edu>


On May 23, 2005, at 2:59 AM, Greg Bedwell wrote:
>
> In simple terms, I just want to call exit(1) as soon as the first
> syntax error is detected by ANTLR and the error message is displayed.

Hi.  THere is an option to turn off automatic error stuff.  Then the  
first exception thrown will blast out of the parser. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Mon May 23 10:53:17 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon May 23 10:52:52 2005
Subject: [antlr-interest] Please make the archive searchable
In-Reply-To: <97ef4c8105052307073bad1b9c@mail.gmail.com>
References: <97ef4c8105052307073bad1b9c@mail.gmail.com>
Message-ID: <26765891-A948-4F8E-A5EC-A8293CCBF1EA@cs.usfca.edu>


On May 23, 2005, at 7:07 AM, Mattias wrote:

> I normally use lex+yacc and I am used to have default cases at the
> bottom of the lexer.
>
> I got " warning:lexical nondeterminism between rules HOUR24 and  
> IGNORE upon"
>
> and search antlr.org for " lexical nondeterminism " and didn't get any
> pointer to a solution except turning of the warning
>
> I hoped I would find some kind of answer at antlr.org or in the  
> mailing list.
>
> http://www.antlr.org/pipermail/antlr-interest/

http://www.antlr.org/search/results?query=lexical+nondeterminism

gives some answers...use the search box at antlr.org (not that it's  
any good...I'm going to jump on the site issues soon, but must get  
v3.0 antlr pre-release out the door first).

> but it isn't searchable. I also went to jguru, but no searching
> available there unless you are a premium member.

Ack...that should be fixed to not require that as a month ago.

> Except for the the warnings, antlr works well.

cool :)

Ter
>
> -- Mattias
>

--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From chris at lotuscat.com  Mon May 23 11:08:12 2005
From: chris at lotuscat.com (Chris Black)
Date: Mon May 23 11:08:33 2005
Subject: [antlr-interest] Exiting on parser errors
In-Reply-To: <4c3df4d3050523025976fdf1aa@mail.gmail.com>
References: <4c3df4d3050523025976fdf1aa@mail.gmail.com>
Message-ID: <42921C0C.9000105@lotuscat.com>

Greg Bedwell wrote:

>[stuff deleted]
>Whenever the parser encounters a syntax error it tells me the location
>of the error and what was expected which is great but then it
>continues on through.  Due to the legacy of the program I am
>incorporating it into it will still pass the created data structure
>through to the next stage which causes a segmentation fault when
>errors have been found.
>
>I know I *could* build in some checks at this stage of the program for
>invalid data structures and exit the program there, but I'm sure there
>must be an easier way to do it from ANTLR.
>
>In simple terms, I just want to call exit(1) as soon as the first
>syntax error is detected by ANTLR and the error message is displayed.
>  
>
Try putting "defaultErrorHandler=false;" in the options block of your 
grammar file. This will prevent ANTLR from catching the 
ReconitionExceptions and other Exceptions itself and just allow the 
exception to propagate back up to the method that is actually calling 
the parsers.

Hope this helps,
Chris
From cjhaga at student.matnat.uio.no  Mon May 23 10:53:16 2005
From: cjhaga at student.matnat.uio.no (Joachim B Haga)
Date: Mon May 23 11:14:15 2005
Subject: [antlr-interest] Re: Please make the archive searchable
References: <97ef4c8105052307073bad1b9c@mail.gmail.com>
Message-ID: <85sm0drfqr.fsf@riget.hn.org>

Mattias <mattiasw@gmail.com> writes:

> http://www.antlr.org/pipermail/antlr-interest/
> 
> but it isn't searchable. I also went to jguru, but no searching
> available there unless you are a premium member.

Try gmane

http://search.gmane.org/search.php?query=lexical+nondeterminism&email=&group=gmane.comp.parsers.antlr-interest&sort=date

-j.

From ewbank at gmail.com  Mon May 23 13:07:55 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Mon May 23 13:07:58 2005
Subject: [antlr-interest] Exiting on parser errors
In-Reply-To: <42921C0C.9000105@lotuscat.com>
References: <4c3df4d3050523025976fdf1aa@mail.gmail.com>
	<42921C0C.9000105@lotuscat.com>
Message-ID: <dd3a065f05052313077784780a@mail.gmail.com>

This is also a good technique if you want to attempt to recover at the
/statement/ level, rather than the /production/ level.  Disable
default error handlers, but then force a few key productions to have
error handling.

This gives the user more than one syntax error, but also provides you
the ability to quit after any are seen.

On 5/23/05, Chris Black <chris@lotuscat.com> wrote:
> Try putting "defaultErrorHandler=false;" in the options block of your
> grammar file. This will prevent ANTLR from catching the
> ReconitionExceptions and other Exceptions itself and just allow the
> exception to propagate back up to the method that is actually calling
> the parsers.
> 
> Hope this helps,
> Chris
>
From atripp at comcast.net  Mon May 23 15:52:45 2005
From: atripp at comcast.net (Andy Tripp)
Date: Mon May 23 15:52:42 2005
Subject: [antlr-interest] Writing out the source code
Message-ID: <42925EBD.1030502@comcast.net>

If it's a Java AST, you can use the existing JavaEmitter code.
I have a version that uses Java to walk the AST, and Terence has one
that uses an ANTLR treewalker...take your pick.
Both are available under "File Sharing" at antlr.org.

Andy
From point14 at magma.ca  Tue May 24 06:23:07 2005
From: point14 at magma.ca (Martin d Anjou)
Date: Tue May 24 06:23:13 2005
Subject: [antlr-interest] SystemVerilog anyone?
Message-ID: <Pine.LNX.4.61.0505240916110.14481@ordimartin.mda.zapto.org>

Hi,

Anyone has a SystemVerilog grammar that can be shared, GNU preferably?

Thanks,
Martin
From serafettin_sentuerk at intergral.com  Tue May 24 07:43:16 2005
From: serafettin_sentuerk at intergral.com (Serafettin Senturk)
Date: Tue May 24 07:43:26 2005
Subject: [antlr-interest] StringBuffer problem
Message-ID: <ANEFKENHALPOILMBNJFGGEHMCBAA.serafettin_sentuerk@intergral.com>


 Hello,

 I had a look at Java Emitter using AST as a tree walker. To get the Java
source code, it is using StringBuffer named output. But how can i see this
output result? I mean, how should i invoke this "JavaOutputTreeParser" from
my main program?

 I have tried the following, but it does not work:

 	StringBuffer output = null;
      JavaOutputTreeParser javaWriter = new JavaOutputTreeParser();
      javaWriter.scriptBody(t);  // t is an AST coming from tree walker for
transformation, scriptBody is my main rule reference
  	System.out.println(javaWriter.output);


  Regards,
 Serafettin


From gt54-antlr at cyconix.com  Tue May 24 06:54:07 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Tue May 24 07:56:34 2005
Subject: [antlr-interest] Anyone built the example C grammar successfully?
Message-ID: <429331FF.60603@cyconix.com>

Has anyone managed to build John Mitchell's/Monty Zukowski's C grammar 
(http://www.antlr.org/grammar/cgram)? I've tried this on gcj 3.3, gcj 
3.4.3, and javac 1.5.0_03, and none of them can compile more than a few 
files. I don't know any Java, which doesn't help, but it looks it may be 
like an import or compilation order problem:

---------
 > setenv CLASSPATH .:/eda/antlr/antlr-2.7.5/lib/antlr.jar
 > which javac
   /eda/jdk/jdk1.5.0_03/bin/javac
 > make -f Makefile >& temp
 > cat temp
  javac LineObject.java
  javac PreprocessorInfoChannel.java
  Note: PreprocessorInfoChannel.java uses unchecked or unsafe operations.
  Note: Recompile with -Xlint:unchecked for details.
  javac StdCParser.java
  ./TNode.java:9: '.' expected
  import CToken;
               ^
---------

and so on. gcj complains about ambiguous classes.

Thanks

Paul

From huyuxiao at gmail.com  Tue May 24 08:30:05 2005
From: huyuxiao at gmail.com (Yuxiao Hu)
Date: Tue May 24 08:30:08 2005
Subject: [antlr-interest] beginner's question
Message-ID: <4e83c739050524083055a411d4@mail.gmail.com>

Hi all,
I am learning ANTLR, and tried pasting the sample program in the
editor, but antlr gives the following error message:
ANTLR Parser Generator   Version 2.7.5 (20050426)   1989-2005 jGuru.com
TokenStreamException: expecting '(', found ' '

however, it does not tell me in which line this error is.
who can tell me where the problem is?
thanks

program:

class CalcParser extends Parser;

options {
	buildAST = true;
}

expr	:	mexpr (PLUS^ mexpr)* SEMI!
	;

mexpr	:	atom (STAR^ atom)*
	;

atom	:	INT
	;

class CalcLexer extends Lexer;

WS	:	(' '
	|	'\t'
	|	'\n'
	|	'\r')
		{ _ttype = Token.SKIP; }
	;

LPAREN	:	'('
	;

RPAREN	:	')'
	;

STAR	:	'*'
	;

PLUS	:	'+'
	;

SEMI	:	';'
	;

INT	:	('0'..'9')+
	;


class CalcTreeWalker extends TreeParser;

expr	:	# (PLUS expr expr)
	|	# (STAR expr expr)
	|	INT
	;
From aaron.feng at gmail.com  Tue May 24 09:19:55 2005
From: aaron.feng at gmail.com (Aaron Feng)
Date: Tue May 24 09:19:57 2005
Subject: [antlr-interest] boo code generator
In-Reply-To: <5917478b0505181133235f9705@mail.gmail.com>
References: <5917478b050517063238f90c76@mail.gmail.com>
	<259A8710-6FB2-48E7-837C-052207E41CD6@cs.usfca.edu>
	<5917478b050517104967e28dd7@mail.gmail.com>
	<19145349-7D5C-4A33-BA28-6D7027AFBE66@cs.usfca.edu>
	<5917478b0505171151237ba2bd@mail.gmail.com>
	<F46BA84F-D262-4C48-BBCB-D88BF5766A21@cs.usfca.edu>
	<5917478b0505181133235f9705@mail.gmail.com>
Message-ID: <4e3934860505240919447b12e0@mail.gmail.com>

Rodrigo,
  hey, Where did you get that awesome link from?  ;)  Anyways, I been
trying to get a hold of you on IRC.  I'm interested in doing some
ANTLR stuff with boo, if you have anything, drop me an email.

Thanx,

Aaron aka something... 

On 5/18/05, Rodrigo B. de Oliveira <rodrigobamboo@gmail.com> wrote:
> On 5/18/05, Terence Parr <parrt@cs.usfca.edu> wrote:
> >
> > On May 17, 2005, at 11:51 AM, Rodrigo B. de Oliveira wrote:
> > ...
> > <snicker>.  Are you willing to maintain them etc...?
> >
> 
> Sure. I'm writing a new parser for boo in boo, this will certainly
> give me the motivation to.
> 
> By the way: http://primates.ximian.com/~lluis/blog/pivot/entry.php?id=38
> (hey Aaron ;))
> 
> > I'm not sure when 2.7.6 will come out, but it will be a bit as I have
> > to get pre-release v3 out.
> >
> 
> Meanwhile I'll keep modified a copy in the boo repository.
> 
> Rodrigo
>
From johnm-antlr at non.net  Tue May 24 10:14:34 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Tue May 24 10:14:14 2005
Subject: [antlr-interest] Anyone built the example C grammar successfully?
In-Reply-To: <429331FF.60603@cyconix.com>
References: <429331FF.60603@cyconix.com>
Message-ID: <17043.24826.192782.398086@despot.non.net>

>>>>> "Paul" == Paul Johnson <gt54-antlr@cyconix.com> writes:
> Has anyone managed to build John Mitchell's/Monty Zukowski's C grammar
> (http://www.antlr.org/grammar/cgram)? I've tried this on gcj 3.3, gcj
> 3.4.3, and javac 1.5.0_03, and none of them can compile more than a few
> files. I don't know any Java, which doesn't help, but it looks it may be
> like an import or compilation order problem:

I've been working with it using Java v1.4.x recently without problem.
But, I haven't tried it with either Java v1.5.x or GCJ.


[...]
> ./TNode.java:9: '.' expected import CToken; ^

Hmm... Is that a clash with the new "static" imports in Java v1.5?

Thanks,
	John
From gt54-antlr at cyconix.com  Tue May 24 10:56:34 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Tue May 24 10:57:16 2005
Subject: [antlr-interest] Anyone built the example C grammar successfully?
In-Reply-To: <17043.24826.192782.398086@despot.non.net>
References: <429331FF.60603@cyconix.com>
	<17043.24826.192782.398086@despot.non.net>
Message-ID: <42936AD2.4080401@cyconix.com>

John D. Mitchell wrote:
>>>>>>"Paul" == Paul Johnson <gt54-antlr@cyconix.com> writes:
>>
>>Has anyone managed to build John Mitchell's/Monty Zukowski's C grammar
>>(http://www.antlr.org/grammar/cgram)? I've tried this on gcj 3.3, gcj
>>3.4.3, and javac 1.5.0_03, and none of them can compile more than a few
>>files. I don't know any Java, which doesn't help, but it looks it may be
>>like an import or compilation order problem:
> 
> I've been working with it using Java v1.4.x recently without problem.
> But, I haven't tried it with either Java v1.5.x or GCJ.
> 
>>./TNode.java:9: '.' expected import CToken; ^
>  
> Hmm... Is that a clash with the new "static" imports in Java v1.5?

Don't think so - I found a backwards-compatibility flag for javac, and 
it's not making any difference:

 > javac -source 1.4 -classpath .:/eda/antlr/antlr-2.7.5/lib/antlr.jar 
StdCParser.java

   ./TNode.java:9: '.' expected
   import CToken;
                ^

The error message produced by gcj is different - it complains about an 
ambiguous class definition (see 
<http://www.antlr.org/pipermail/antlr-interest/2005-May/012212.html>, 
also related to CToken). The fact that both gcj and javac point to the 
same import does seem to imply a problem with the code, at least to 
someone who knows as little Java as I do.

Thanks -

Paul

From johnm-antlr at non.net  Tue May 24 11:32:36 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Tue May 24 11:32:18 2005
Subject: [antlr-interest] Anyone built the example C grammar successfully?
In-Reply-To: <42936AD2.4080401@cyconix.com>
References: <429331FF.60603@cyconix.com>
	<17043.24826.192782.398086@despot.non.net>
	<42936AD2.4080401@cyconix.com>
Message-ID: <17043.29508.308515.628415@despot.non.net>

[Let's take the rest of this discussion to direct email and we can post the
resolution at the end.]

>>>>> "Paul" == Paul Johnson <gt54-antlr@cyconix.com> writes:
>>>>>> John D. Mitchell wrote:
[...]

>> Hmm... Is that a clash with the new "static" imports in Java v1.5?

> Don't think so - I found a backwards-compatibility flag for javac, and
> it's not making any difference:

>> javac -source 1.4 -classpath .:/eda/antlr/antlr-2.7.5/lib/antlr.jar
> StdCParser.java

Can you try it using JDK v1.4.x and let me know what you get.  I literally
just rebuilt my copy of the cgram stuff using Sun's JDK v1.4.2 and it was
fine.  I do have some as yet unpublished hacks in my copy though.

Thanks,
	John
From gt54-antlr at cyconix.com  Tue May 24 12:19:00 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Tue May 24 12:19:37 2005
Subject: [antlr-interest] Anyone built the example C grammar successfully?
In-Reply-To: <17043.29508.308515.628415@despot.non.net>
References: <429331FF.60603@cyconix.com>	<17043.24826.192782.398086@despot.non.net>	<42936AD2.4080401@cyconix.com>
	<17043.29508.308515.628415@despot.non.net>
Message-ID: <42937E24.1000204@cyconix.com>

John D. Mitchell wrote:

> Can you try it using JDK v1.4.x and let me know what you get.  I literally
> just rebuilt my copy of the cgram stuff using Sun's JDK v1.4.2 and it was
> fine.  I do have some as yet unpublished hacks in my copy though.

I'm off on holiday for 2 weeks on Thursday, and I think I'm rapidly 
running up against the law of diminishing returns here (I don't actually 
need Java at all in my app; I was just hoping to do a sanity check 
before converting your grammar to C++. I can tell you, I'm going to be 
*really* grateful to dump the various Java compilers/VMs/assorted bits 
I've downloaded over the last couple of weeks).

And, I mean this in the nicest possible way, but I've already tried 3 
compilers (and failed to build a fourth, as well as failing to download 
a fifth, and installed a new OS along the way), so I can't immediately 
see that trying a sixth is going to bring anything to the party. If it 
works with javac 1.4 then I'm not sure that we've actually learnt 
anything. I just needed a sanity check to make sure that I wasn't being 
stupid.

Thanks -

Paul

From johnm-antlr at non.net  Tue May 24 12:45:41 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Tue May 24 12:45:22 2005
Subject: [antlr-interest] Anyone built the example C grammar successfully?
In-Reply-To: <42937E24.1000204@cyconix.com>
References: <429331FF.60603@cyconix.com>
	<17043.24826.192782.398086@despot.non.net>
	<42936AD2.4080401@cyconix.com>
	<17043.29508.308515.628415@despot.non.net>
	<42937E24.1000204@cyconix.com>
Message-ID: <17043.33893.241607.945669@despot.non.net>

>>>>> "Paul" == Paul Johnson <gt54-antlr@cyconix.com> writes:
[...]

> I'm off on holiday for 2 weeks on Thursday, and I think I'm rapidly
> running up against the law of diminishing returns here (I don't actually
> need Java at all in my app; I was just hoping to do a sanity check before
> converting your grammar to C++. I can tell you, I'm going to be *really*
> grateful to dump the various Java compilers/VMs/assorted bits I've
> downloaded over the last couple of weeks).

Is there some particular reason you need to switch to C++?

Basically, as Antlr v3 fleshes out, I'm going to be redoing the C grammar
in that.

> And, I mean this in the nicest possible way, but I've already tried 3
> compilers (and failed to build a fourth, as well as failing to download a
> fifth, and installed a new OS along the way), so I can't immediately see
> that trying a sixth is going to bring anything to the party. If it works
> with javac 1.4 then I'm not sure that we've actually learnt anything. I
> just needed a sanity check to make sure that I wasn't being stupid.

Sure we (will) have.  Java v1.5 has a lot of little nasty corners where
things have change and GCJ is still a fair ways away from completeness.
Sun's JDK is the benchmark against which any such work should be checked
and the current stable, production quality is the latest Sun JDK v1.4.2_0x
release.

Take care,
	John
From Loring.G.Craymer at jpl.nasa.gov  Tue May 24 13:10:23 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Tue May 24 13:10:27 2005
Subject: [antlr-interest] Anyone built the example C grammar successfully?
In-Reply-To: <42936AD2.4080401@cyconix.com>
References: <429331FF.60603@cyconix.com>
	<17043.24826.192782.398086@despot.non.net>
	<42936AD2.4080401@cyconix.com>
Message-ID: <6.2.1.2.2.20050524130659.02a81618@mail.jpl.nasa.gov>

Paul--

Try deleting the "import CToken;" line and see what that does.  As I read 
the spec, "CToken" is not a "canonical name"--I think that it needs package 
qualifiers for that.

--Loring


At 10:56 AM 5/24/2005, Paul Johnson wrote:
>John D. Mitchell wrote:
>>>>>>>"Paul" == Paul Johnson <gt54-antlr@cyconix.com> writes:
>>>
>>>Has anyone managed to build John Mitchell's/Monty Zukowski's C grammar
>>>(http://www.antlr.org/grammar/cgram)? I've tried this on gcj 3.3, gcj
>>>3.4.3, and javac 1.5.0_03, and none of them can compile more than a few
>>>files. I don't know any Java, which doesn't help, but it looks it may be
>>>like an import or compilation order problem:
>>I've been working with it using Java v1.4.x recently without problem.
>>But, I haven't tried it with either Java v1.5.x or GCJ.
>>
>>>./TNode.java:9: '.' expected import CToken; ^
>>
>>Hmm... Is that a clash with the new "static" imports in Java v1.5?
>
>Don't think so - I found a backwards-compatibility flag for javac, and 
>it's not making any difference:
>
> > javac -source 1.4 -classpath .:/eda/antlr/antlr-2.7.5/lib/antlr.jar 
> StdCParser.java
>
>   ./TNode.java:9: '.' expected
>   import CToken;
>                ^
>
>The error message produced by gcj is different - it complains about an 
>ambiguous class definition (see 
><http://www.antlr.org/pipermail/antlr-interest/2005-May/012212.html>, 
>also related to CToken). The fact that both gcj and javac point to the 
>same import does seem to imply a problem with the code, at least to 
>someone who knows as little Java as I do.
>
>Thanks -
>
>Paul


From parrt at cs.usfca.edu  Tue May 24 16:40:18 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue May 24 16:39:54 2005
Subject: [antlr-interest] beginner's question
In-Reply-To: <4e83c739050524083055a411d4@mail.gmail.com>
References: <4e83c739050524083055a411d4@mail.gmail.com>
Message-ID: <F11C26DD-142A-4966-9A86-3A4EB4B23594@cs.usfca.edu>


On May 24, 2005, at 8:30 AM, Yuxiao Hu wrote:
> class CalcTreeWalker extends TreeParser;
>
> expr    :    # (PLUS expr expr)
>     |    # (STAR expr expr)
>     |    INT

expr    :       #(PLUS expr expr)
         |       #(STAR expr expr)
         |       INT
         ;

remove spaces. :)

T
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From ewbank at gmail.com  Tue May 24 17:32:35 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue May 24 17:32:37 2005
Subject: [antlr-interest] beginner's question
In-Reply-To: <F11C26DD-142A-4966-9A86-3A4EB4B23594@cs.usfca.edu>
References: <4e83c739050524083055a411d4@mail.gmail.com>
	<F11C26DD-142A-4966-9A86-3A4EB4B23594@cs.usfca.edu>
Message-ID: <dd3a065f050524173279cf09f9@mail.gmail.com>

Good catch, Ter; these old eyes missed it.  Specifically, the space
between "#" and "(" prevents recognition of the "#(" operator.

On 5/24/05, Terence Parr <parrt@cs.usfca.edu> wrote:
> On May 24, 2005, at 8:30 AM, Yuxiao Hu wrote:
> > expr    :    # (PLUS expr expr)
> >     |    # (STAR expr expr)
> >     |    INT
> 
> expr    :       #(PLUS expr expr)
>          |       #(STAR expr expr)
>          |       INT
>          ;
> 
> remove spaces. :)
From parrt at cs.usfca.edu  Tue May 24 18:14:05 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue May 24 18:13:39 2005
Subject: [antlr-interest] beginner's question
In-Reply-To: <dd3a065f050524173279cf09f9@mail.gmail.com>
References: <4e83c739050524083055a411d4@mail.gmail.com>
	<F11C26DD-142A-4966-9A86-3A4EB4B23594@cs.usfca.edu>
	<dd3a065f050524173279cf09f9@mail.gmail.com>
Message-ID: <683A853F-3647-4B56-B3E7-86126E836898@cs.usfca.edu>


On May 24, 2005, at 5:32 PM, Bryan Ewbank wrote:

> Good catch, Ter; these old eyes missed it.  Specifically, the space
> between "#" and "(" prevents recognition of the "#(" operator.

I had to look 3 times before I saw it! ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Tue May 24 18:17:17 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue May 24 18:16:50 2005
Subject: [antlr-interest] stats
Message-ID: <B2DF417C-A7EE-4723-8E1F-1E91D8D01302@cs.usfca.edu>

Hi,

In light of just how sensitive this area is (collecting usage stats),  
we're going to have a preference you can set to "never", "remind me  
weekly", "do it now".  You will always be able to refuse sending  
info.  Here is a sample grammar report on the java.g file:

ANTLR Grammar Report; Stats Version 1
Grammar: JavaParser
Type: combined
Target language: Java
Rules: 68
Productions: 108
Decisions: 93
Cyclic DFA decisions: 3
Min fixed k: 1
Max fixed k: 2
Average fixed k: 1.1222222222222222
Standard deviation of fixed k: 0.3293772734489574
Min acyclic DFA states: 2
Max acyclic DFA states: 12
Average acyclic DFA states: 2.533333333333333
Standard deviation of acyclic DFA states: 1.5302199298492565
Total acyclic DFA states: 228
Min cyclic DFA states: 11
Max cyclic DFA states: 27
Average cyclic DFA states: 17.666666666666668
Standard deviation of cyclic DFA states: 8.32666399786453
Total cyclic DFA states: 53
Vocabulary size: 152
DFA creation time in ms: 7077

ANTLRWorks itself will have a report and so will the parser runtime.   
If you turn on -report, you'll see these numbers yourself on each run  
of antlr.  Pretty useful stuff if you ask me.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From lloyd at nova-mind.com  Tue May 24 21:58:52 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Tue May 24 21:59:04 2005
Subject: [antlr-interest] inherited grammar!
Message-ID: <019f01c560e6$73462a90$9800a8c0@gideone14f6c02>

I downloaded the C grammar file and tryed to extends it.
(from there: http://www.antlr.org/grammar/cgram)

I created my own
ObjectiveCParser.g file in which I declare
    class ObjectiveCParser extends GnuCParser;

But this one inherit from:
    class GnuCParser extends StdCParser;

But it, itself, inherit from:
    class StdCParser extends Parser;

on the command line to generate the GnuCParser.java they call:
java antlr.Tool -glib "StdCParser.g" GnuCParser.g

So I though, to generate my ObjectiveCParser.java I could try:
java antlr.Tool -glib "GnuCParser.g StdCParser.g" ObjectiveCParser.g
or
java antlr.Tool -glib "GnuCParser.g" -glib "StdCParser.g" ObjectiveCParser.g
or
java antlr.Tool -glib "StdCParser.g" -glib "GnuCParser.g" ObjectiveCParser.g

but none of that worked...
BTW the GnuCParser is generated, compiled and working.

Any ideas?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050525/072ef428/attachment.html
From lloyd at nova-mind.com  Tue May 24 22:20:43 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Tue May 24 22:20:55 2005
Subject: [antlr-interest] inherited grammar!
References: <019f01c560e6$73462a90$9800a8c0@gideone14f6c02>
Message-ID: <02c501c560e9$8040e430$9800a8c0@gideone14f6c02>

just replying myself, so you don't bother....
 $(ANTLR) -glib "GnuCParser.g;StdCParser.g" ObjectiveCParser.g

  ----- Original Message ----- 
  From: Lloyd Dupont 
  To: antlr-interest@antlr.org 
  Sent: Wednesday, May 25, 2005 2:58 PM
  Subject: [antlr-interest] inherited grammar!


  I downloaded the C grammar file and tryed to extends it.
  (from there: http://www.antlr.org/grammar/cgram)

  I created my own
  ObjectiveCParser.g file in which I declare
      class ObjectiveCParser extends GnuCParser;

  But this one inherit from:
      class GnuCParser extends StdCParser;

  But it, itself, inherit from:
      class StdCParser extends Parser;

  on the command line to generate the GnuCParser.java they call:
  java antlr.Tool -glib "StdCParser.g" GnuCParser.g

  So I though, to generate my ObjectiveCParser.java I could try:
  java antlr.Tool -glib "GnuCParser.g StdCParser.g" ObjectiveCParser.g 
  or
  java antlr.Tool -glib "GnuCParser.g" -glib "StdCParser.g" ObjectiveCParser.g
  or
  java antlr.Tool -glib "StdCParser.g" -glib "GnuCParser.g" ObjectiveCParser.g

  but none of that worked...
  BTW the GnuCParser is generated, compiled and working.

  Any ideas?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050525/67f48fa5/attachment-0001.html
From serafettin_sentuerk at intergral.com  Tue May 24 23:54:41 2005
From: serafettin_sentuerk at intergral.com (Serafettin Senturk)
Date: Tue May 24 23:54:38 2005
Subject: [antlr-interest] Invoking Java Emitter
Message-ID: <ANEFKENHALPOILMBNJFGCEIFCBAA.serafettin_sentuerk@intergral.com>

 
  Hello,

  I had a look at Java Emitter using AST as a tree walker. To get the Java
source code, it is using StringBuffer named output. But how can i see this
output result? I mean, how should i invoke this "JavaOutputTreeParser" from
my main program?

 I have tried the following, but it does not work:

 	StringBuffer output = null;
      JavaOutputTreeParser javaWriter = new JavaOutputTreeParser();
      javaWriter.scriptBody(t);  // t is an AST coming from tree walker for
transformation, scriptBody is my main rule reference
  	System.out.println(javaWriter.output);


  Regards,
 Serafettin

From stefan at amiq.ro  Wed May 25 00:00:43 2005
From: stefan at amiq.ro (stefan)
Date: Wed May 25 00:06:34 2005
Subject: [antlr-interest] grammar inheritance & warnings
Message-ID: <200505251000.43200.stefan@amiq.ro>

Hi, 

     I have two grammars, let's say A & B like :   

A extends TreeParser;
...................
B extends A; // it only modifies existing rules
...................

     In the generation phase I get a lot of messages like:

[antlr] /path/to/expandedB.g:1319:33: warning:Rule 'some_rule' returns a 
value.

     Is there a way to turn off all those messages?

tx,
      stefan.
From ric.klaren at gmail.com  Wed May 25 00:45:09 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Wed May 25 00:45:13 2005
Subject: [antlr-interest] grammar inheritance & warnings
In-Reply-To: <200505251000.43200.stefan@amiq.ro>
References: <200505251000.43200.stefan@amiq.ro>
Message-ID: <bc607a4e05052500456c411439@mail.gmail.com>

Hi,

On 5/25/05, stefan <stefan@amiq.ro> wrote:
>      I have two grammars, let's say A & B like :
> 
> A extends TreeParser;
> ...................
> B extends A; // it only modifies existing rules
> ...................
> 
>      In the generation phase I get a lot of messages like:
> 
> [antlr] /path/to/expandedB.g:1319:33: warning:Rule 'some_rule' returns a
> value.
> 
>      Is there a way to turn off all those messages?

Other than adding dummy assignments no.

Cheers,

Ric
From gt54-antlr at cyconix.com  Wed May 25 01:04:30 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Wed May 25 01:05:30 2005
Subject: [antlr-interest] inherited grammar!
In-Reply-To: <02c501c560e9$8040e430$9800a8c0@gideone14f6c02>
References: <019f01c560e6$73462a90$9800a8c0@gideone14f6c02>
	<02c501c560e9$8040e430$9800a8c0@gideone14f6c02>
Message-ID: <4294318E.9060503@cyconix.com>

Lloyd Dupont wrote:

>     BTW the GnuCParser is generated, compiled and working.

Hi Lloyd - just curious; did you have problems building GnuCParser? Are 
you using a recent cgram from the website, and can you tell me which 
compiler/version you're using, and which version of ANTLR? Did you have 
to make any changes?

I can't compile cgram. I've also had mail from one other ANTLR user 
saying that there were several problems, and he never got it to run the 
tests correctly; he had to rewrite cgram.

Thanks -

Paul

From gt54-antlr at cyconix.com  Wed May 25 01:13:18 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Wed May 25 01:16:13 2005
Subject: [antlr-interest] inherited grammar!
In-Reply-To: <4294318E.9060503@cyconix.com>
References: <019f01c560e6$73462a90$9800a8c0@gideone14f6c02>	<02c501c560e9$8040e430$9800a8c0@gideone14f6c02>
	<4294318E.9060503@cyconix.com>
Message-ID: <4294339E.3070502@cyconix.com>

Sorry guys - that should have been off-list. Not pressing the right buttons.

From atripp at comcast.net  Wed May 25 07:27:17 2005
From: atripp at comcast.net (Andy Tripp)
Date: Wed May 25 07:27:14 2005
Subject: [antlr-interest] Anyone built the example C grammar successfully?
Message-ID: <42948B45.9090301@comcast.net>

Yes, that's the solution. I had hit this problem too.
Java 1.5 doesn't let you do this "import this class that's not in a 
package" thing.
That import is not needed anyway.

Andy

>Paul--
>
>Try deleting the "import CToken;" line and see what that does.  As I read 
>the spec, "CToken" is not a "canonical name"--I think that it needs package 
>qualifiers for that.
>
>--Loring
>
>
>At 10:56 AM 5/24/2005, Paul Johnson wrote:
>>John D. Mitchell wrote:
>>>>>>>>"Paul" == Paul Johnson <gt54-antlr at cyconix.com <http://www.antlr.org/mailman/listinfo/antlr-interest>> writes:
>>>>
>>>>Has anyone managed to build John Mitchell's/Monty Zukowski's C grammar
>>>>(http://www.antlr.org/grammar/cgram)? I've tried this on gcj 3.3, gcj
>>>>3.4.3, and javac 1.5.0_03, and none of them can compile more than a few
>>>>files. I don't know any Java, which doesn't help, but it looks it may be
>>>>like an import or compilation order problem:
>>>I've been working with it using Java v1.4.x recently without problem.
>>>But, I haven't tried it with either Java v1.5.x or GCJ.
>>>
>>>>./TNode.java:9: '.' expected import CToken; ^
>>>
>>>Hmm... Is that a clash with the new "static" imports in Java v1.5?
>>
>>Don't think so - I found a backwards-compatibility flag for javac, and 
>>it's not making any difference:
>>
>> > javac -source 1.4 -classpath .:/eda/antlr/antlr-2.7.5/lib/antlr.jar 
>> StdCParser.java
>>
>>   ./TNode.java:9: '.' expected
>>   import CToken;
>>                ^
>>
>>The error message produced by gcj is different - it complains about an 
>>ambiguous class definition (see 
>><http://www.antlr.org/pipermail/antlr-interest/2005-May/012212.html>, 
>>also related to CToken). The fact that both gcj and javac point to the 
>>same import does seem to imply a problem with the code, at least to 
>>someone who knows as little Java as I do.
>>
>>Thanks -
>>
>>Paul
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050525/e1aed10f/attachment.html
From whittaker55 at yahoo.com  Wed May 25 08:21:57 2005
From: whittaker55 at yahoo.com (henry whittaker)
Date: Wed May 25 08:22:01 2005
Subject: [antlr-interest] Javadoc -style extensions
Message-ID: <20050525152157.2688.qmail@web54102.mail.yahoo.com>

Hi,

I'd like to extend the grammar I'm working up to use
Javadoc-style language annotations so that optional
metadata can be embedded as Javadoc comments.

I've looked at the examples of this in the
documentation and there are two mechanisms
highlighted, the primary one using multiplexed lexers
and hidden tokens. 

I don't want to parse all javadoc-style comments
though, only those preceding certain language
structures so I am reluctant to extend the lexer.
Instead I was considering the following:
  Have the lexer emit javadoc comments as a single
token
  Add a filter that strips and stores the Javadoc
comments in a WeakHashMap mapped to the next visible
token.
  Create a method on the filter that returns the
parsed Javadoc structure on-request (using a
javadoc-specifc lexer initialised with line/col of
javadoc comment).
  Invoke the new filter method from my grammar at all
locations where optional javadoc is required, called
with the first token of the rule I want to annotate.

Is there any problems with this approach or is there a
better way to do this?

Also, are there any grammars already available for
parsing javadoc comments? If not, I'd be happy to post
mine (once it's written :)!)

Cheers,

Henry

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
From parrt at cs.usfca.edu  Wed May 25 09:56:38 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed May 25 09:56:40 2005
Subject: [antlr-interest] grammar inheritance & warnings
In-Reply-To: <bc607a4e05052500456c411439@mail.gmail.com>
References: <200505251000.43200.stefan@amiq.ro>
	<bc607a4e05052500456c411439@mail.gmail.com>
Message-ID: <85A5773A-0D3F-407F-A633-E5CCFB15731A@cs.usfca.edu>


On May 25, 2005, at 12:45 AM, Ric Klaren wrote:

> Hi,
>
> On 5/25/05, stefan <stefan@amiq.ro> wrote:
>
>>      I have two grammars, let's say A & B like :
>>
>> A extends TreeParser;
>> ...................
>> B extends A; // it only modifies existing rules
>> ...................
>>
>>      In the generation phase I get a lot of messages like:
>>
>> [antlr] /path/to/expandedB.g:1319:33: warning:Rule 'some_rule'  
>> returns a
>> value.
>>
>>      Is there a way to turn off all those messages?
>>
>
> Other than adding dummy assignments no.

In v3 those warnings are not issued.  They are truly annoying.

Ter

From gt54-antlr at cyconix.com  Wed May 25 10:43:58 2005
From: gt54-antlr at cyconix.com (Paul Johnson)
Date: Wed May 25 10:44:05 2005
Subject: [antlr-interest] Anyone built the example C grammar successfully?
In-Reply-To: <6.2.1.2.2.20050524130659.02a81618@mail.jpl.nasa.gov>
References: <429331FF.60603@cyconix.com>
	<17043.24826.192782.398086@despot.non.net>
	<42936AD2.4080401@cyconix.com>
	<6.2.1.2.2.20050524130659.02a81618@mail.jpl.nasa.gov>
Message-ID: <4294B95E.5030106@cyconix.com>

Loring Craymer wrote:
> Paul--
> 
> Try deleting the "import CToken;" line and see what that does.  As I 
> read the spec, "CToken" is not a "canonical name"--I think that it needs 
> package qualifiers for that.

Thanks Loring - that did the job (I commented out 6 imports in 3 grammar 
files), and I can now compile on both gcj and javac 1.5.

Cheers

Paul

From ric.klaren at gmail.com  Wed May 25 15:22:04 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Wed May 25 15:22:04 2005
Subject: [antlr-interest] Javadoc -style extensions
In-Reply-To: <20050525152157.2688.qmail@web54102.mail.yahoo.com>
References: <20050525152157.2688.qmail@web54102.mail.yahoo.com>
Message-ID: <4294FA8C.8010901@gmail.com>

henry whittaker wrote:
> I'd like to extend the grammar I'm working up to use
> Javadoc-style language annotations so that optional
> metadata can be embedded as Javadoc comments.
> 
> I've looked at the examples of this in the
> documentation and there are two mechanisms
> highlighted, the primary one using multiplexed lexers
> and hidden tokens. 
> 
> I don't want to parse all javadoc-style comments
> though, only those preceding certain language
> structures so I am reluctant to extend the lexer.
> Instead I was considering the following:
>   Have the lexer emit javadoc comments as a single
> token

 From this point on I'd personally be inclined to just stuff the whole 
lot in an AST and then use a tree walker combined with the javadoc 
parser to insert pieces of AST in the spots where you want them. My 
guess is that it will give a simpler and more extensible solution. But 
YMMV. Both approaches should work.

>   Add a filter that strips and stores the Javadoc
> comments in a WeakHashMap mapped to the next visible
> token.
>   Create a method on the filter that returns the
> parsed Javadoc structure on-request (using a
> javadoc-specifc lexer initialised with line/col of
> javadoc comment).
>   Invoke the new filter method from my grammar at all
> locations where optional javadoc is required, called
> with the first token of the rule I want to annotate.
> 
> Is there any problems with this approach or is there a
> better way to do this?

> Also, are there any grammars already available for
> parsing javadoc comments? If not, I'd be happy to post
> mine (once it's written :)!)

If there is one it's probably listed on antlr.org.

Cheers,

Ric
From lloyd at nova-mind.com  Wed May 25 15:35:18 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Wed May 25 15:35:31 2005
Subject: [antlr-interest] inherited grammar!
References: <019f01c560e6$73462a90$9800a8c0@gideone14f6c02>
	<02c501c560e9$8040e430$9800a8c0@gideone14f6c02>
	<4294318E.9060503@cyconix.com>
Message-ID: <033001c5617a$0875f620$9800a8c0@gideone14f6c02>

No, the cgram compile sraight away....
I used Java 1.5, antlr-2.7.5
there is n version information for cgram, but I used one downloaded a couple 
of days ago.
I set these environment variables:
set PATH=C:\Lloyd-Dev\ANTLR 
stuff;C:\jdk1.5.0_03\bin;C:\MinGW\bin;C:\GNUstep\Development\msys\1.0\bin;%PATH%
set CLASSPATH=C:\Lloyd-Dev\ANTLR stuff\antlr-2.7.5\antlr-2.7.5.jar;.

(important in the PATH are make, java & javac)
(important in the CLASSPATH are antrl & '.')

the only problem I had, so far, is that this cgram doesn't manage 
__attribute__
I'm adding that and ObjectiveC parsing

----- Original Message ----- 
From: "Paul Johnson" <gt54-antlr@cyconix.com>
To: "Lloyd Dupont" <lloyd@nova-mind.com>
Cc: <antlr-interest@antlr.org>
Sent: Wednesday, May 25, 2005 6:04 PM
Subject: Re: [antlr-interest] inherited grammar!


> Lloyd Dupont wrote:
>
>>     BTW the GnuCParser is generated, compiled and working.
>
> Hi Lloyd - just curious; did you have problems building GnuCParser? Are 
> you using a recent cgram from the website, and can you tell me which 
> compiler/version you're using, and which version of ANTLR? Did you have to 
> make any changes?
>
> I can't compile cgram. I've also had mail from one other ANTLR user saying 
> that there were several problems, and he never got it to run the tests 
> correctly; he had to rewrite cgram.
>
> Thanks -
>
> Paul
> 

From lloyd at nova-mind.com  Wed May 25 15:37:18 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Wed May 25 15:37:32 2005
Subject: [antlr-interest] grammar inheritance & warnings
References: <200505251000.43200.stefan@amiq.ro><bc607a4e05052500456c411439@mail.gmail.com>
	<85A5773A-0D3F-407F-A633-E5CCFB15731A@cs.usfca.edu>
Message-ID: <034301c5617a$500d23f0$9800a8c0@gideone14f6c02>

speaking of v3.
where and when could we get it?

----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: "ANTLR Interest" <antlr-interest@antlr.org>
Sent: Thursday, May 26, 2005 2:56 AM
Subject: Re: [antlr-interest] grammar inheritance & warnings


> 
> On May 25, 2005, at 12:45 AM, Ric Klaren wrote:
> 
>> Hi,
>>
>> On 5/25/05, stefan <stefan@amiq.ro> wrote:
>>
>>>      I have two grammars, let's say A & B like :
>>>
>>> A extends TreeParser;
>>> ...................
>>> B extends A; // it only modifies existing rules
>>> ...................
>>>
>>>      In the generation phase I get a lot of messages like:
>>>
>>> [antlr] /path/to/expandedB.g:1319:33: warning:Rule 'some_rule'  
>>> returns a
>>> value.
>>>
>>>      Is there a way to turn off all those messages?
>>>
>>
>> Other than adding dummy assignments no.
> 
> In v3 those warnings are not issued.  They are truly annoying.
> 
> Ter
>
From nbsherid at secsme.org.au  Wed May 25 16:08:55 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Wed May 25 16:09:02 2005
Subject: [antlr-interest] grammar inheritance & warnings
In-Reply-To: <034301c5617a$500d23f0$9800a8c0@gideone14f6c02>
Message-ID: <000001c5617e$b9addd00$9829198a@nigelnote>


> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Lloyd Dupont
> Sent: Thursday, 26 May 2005 8:37 AM
> To: Terence Parr; ANTLR Interest
> Subject: Re: [antlr-interest] grammar inheritance & warnings
> 
> speaking of v3.
> where and when could we get it?
> 

Coming soon to a store near you!

(Read: pre-release is in a few months; end of the northern hemisphere summer
I believe)

> >
> > On May 25, 2005, at 12:45 AM, Ric Klaren wrote:
> >
> >>>
> >>
> >> Other than adding dummy assignments no.
> >
> > In v3 those warnings are not issued.  They are truly annoying.
> >

Hmmm... I don't know about that... I often use those warnings to work out
how much of the grammar I still need to fill in with return values.

Can you make it a command-line switch? How many people here make use of such
warnings as a sanity/completeness check? 

Nigel



From lloyd at nova-mind.com  Wed May 25 16:24:51 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Wed May 25 16:25:04 2005
Subject: [antlr-interest] super grammar surprise
Message-ID: <039001c56180$f4036ae0$9800a8c0@gideone14f6c02>

I'm writting a subgrammar of the GNU-C grammar.
I don't know if my problem is due to a 4 level inheritance (Parser -> StdCParser -> GnuCParser -> ObjectiveCParser) but anyway, I had the surprise that the class code (as in:
    class MyParser extends Parser;
    {
        // class code
    }
    idList : ( ID )+;   // parser rule definition
) is not passed on the subclass?!
Is it a bug or a feature?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050526/5876db00/attachment.html
From parrt at cs.usfca.edu  Wed May 25 16:38:37 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed May 25 16:38:12 2005
Subject: [antlr-interest] Re: when can I get v3 early access release?
In-Reply-To: <034301c5617a$500d23f0$9800a8c0@gideone14f6c02>
References: <200505251000.43200.stefan@amiq.ro><bc607a4e05052500456c411439@mail.gmail.com>
	<85A5773A-0D3F-407F-A633-E5CCFB15731A@cs.usfca.edu>
	<034301c5617a$500d23f0$9800a8c0@gideone14f6c02>
Message-ID: <AAC242FB-3A3E-4D58-B87B-3D650FBC69D6@cs.usfca.edu>


On May 25, 2005, at 3:37 PM, Lloyd Dupont wrote:

> speaking of v3.
> where and when could we get it?
>

Probably next week :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From lloyd at nova-mind.com  Wed May 25 16:38:05 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Wed May 25 16:38:21 2005
Subject: [antlr-interest] super grammar surprise
References: <039001c56180$f4036ae0$9800a8c0@gideone14f6c02>
Message-ID: <039e01c56182$cda7dbe0$9800a8c0@gideone14f6c02>

mmhh... I guess it's a feature, as it let you 'override' the declared code.
well I have to copy paste I suppose....

BTW if I don't declare any class code in my subgrammar the supergrammar class code is used, sweet ;)
  ----- Original Message ----- 
  From: Lloyd Dupont 
  To: antlr-interest@antlr.org 
  Sent: Thursday, May 26, 2005 9:24 AM
  Subject: [antlr-interest] super grammar surprise


  I'm writting a subgrammar of the GNU-C grammar.
  I don't know if my problem is due to a 4 level inheritance (Parser -> StdCParser -> GnuCParser -> ObjectiveCParser) but anyway, I had the surprise that the class code (as in:
      class MyParser extends Parser;
      {
          // class code
      }
      idList : ( ID )+;   // parser rule definition
  ) is not passed on the subclass?!
  Is it a bug or a feature?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050526/94f02527/attachment.html
From parrt at cs.usfca.edu  Wed May 25 16:39:34 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed May 25 16:39:05 2005
Subject: [antlr-interest] grammar inheritance & warnings
In-Reply-To: <000001c5617e$b9addd00$9829198a@nigelnote>
References: <000001c5617e$b9addd00$9829198a@nigelnote>
Message-ID: <E860961B-6640-4853-954A-410D64C029B6@cs.usfca.edu>


On May 25, 2005, at 4:08 PM, Nigel Sheridan-Smith wrote:
> Hmmm... I don't know about that... I often use those warnings to  
> work out
> how much of the grammar I still need to fill in with return values.
>
> Can you make it a command-line switch? How many people here make  
> use of such
> warnings as a sanity/completeness check?

Yeah, that's why I put it in in the first place but like in a  
programming language that warned you about not using return values,  
it gets to be annoying...

Anybody else wanna comment?

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From lloyd at nova-mind.com  Wed May 25 16:39:59 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Wed May 25 16:40:12 2005
Subject: [antlr-interest] Re: when can I get v3 early access release?
References: <200505251000.43200.stefan@amiq.ro><bc607a4e05052500456c411439@mail.gmail.com><85A5773A-0D3F-407F-A633-E5CCFB15731A@cs.usfca.edu><034301c5617a$500d23f0$9800a8c0@gideone14f6c02>
	<AAC242FB-3A3E-4D58-B87B-3D650FBC69D6@cs.usfca.edu>
Message-ID: <03aa01c56183$116b4560$9800a8c0@gideone14f6c02>

That's great!
Including the latest to be released ANTLR IDE, the much awaited and 
acclaimed ANTLRWorks?

----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: "ANTLR Interest" <antlr-interest@antlr.org>
Sent: Thursday, May 26, 2005 9:38 AM
Subject: [antlr-interest] Re: when can I get v3 early access release?


>
> On May 25, 2005, at 3:37 PM, Lloyd Dupont wrote:
>
>> speaking of v3.
>> where and when could we get it?
>>
>
> Probably next week :)
>
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> 

From ewbank at gmail.com  Wed May 25 16:57:47 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Wed May 25 16:57:49 2005
Subject: [antlr-interest] super grammar surprise
In-Reply-To: <039e01c56182$cda7dbe0$9800a8c0@gideone14f6c02>
References: <039001c56180$f4036ae0$9800a8c0@gideone14f6c02>
	<039e01c56182$cda7dbe0$9800a8c0@gideone14f6c02>
Message-ID: <dd3a065f05052516572be2345a@mail.gmail.com>

Trust in the #include to preserve behaviors...

class MyBlurfl extends MyParser
{
#include "commoncruft.foo"
}

T'would be nice if there were either true class inheritance, or
multiple inheritance to capture non-production behaviors.


On 5/25/05, Lloyd Dupont <lloyd@nova-mind.com> wrote:
>  
> mmhh... I guess it's a feature, as it let you 'override' the declared code. 
> well I have to copy paste I suppose.... 
>   
> BTW if I don't declare any class code in my subgrammar the supergrammar
> class code is used, sweet ;)
>  
>  
> ----- Original Message ----- 
> From: Lloyd Dupont 
> To: antlr-interest@antlr.org 
> Sent: Thursday, May 26, 2005 9:24 AM 
> Subject: [antlr-interest] super grammar surprise 
> 
>  
> I'm writting a subgrammar of the GNU-C grammar. 
> I don't know if my problem is due to a 4 level inheritance (Parser ->
> StdCParser -> GnuCParser -> ObjectiveCParser) but anyway, I had the surprise
> that the class code (as in: 
>     class MyParser extends Parser;
>     { 
>         // class code 
>     } 
>     idList : ( ID )+;   // parser rule definition
> ) is not passed on the subclass?! 
> Is it a bug or a feature?
From lloyd at nova-mind.com  Wed May 25 17:02:43 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Wed May 25 17:02:56 2005
Subject: [antlr-interest] super grammar surprise
References: <039001c56180$f4036ae0$9800a8c0@gideone14f6c02><039e01c56182$cda7dbe0$9800a8c0@gideone14f6c02>
	<dd3a065f05052516572be2345a@mail.gmail.com>
Message-ID: <03d301c56186$3df11990$9800a8c0@gideone14f6c02>

Good idea!
...
For C program.....!! :(

----- Original Message ----- 
From: "Bryan Ewbank" <ewbank@gmail.com>
To: "ANTLR Interest" <antlr-interest@antlr.org>
Sent: Thursday, May 26, 2005 9:57 AM
Subject: Re: [antlr-interest] super grammar surprise


Trust in the #include to preserve behaviors...

class MyBlurfl extends MyParser
{
#include "commoncruft.foo"
}

T'would be nice if there were either true class inheritance, or
multiple inheritance to capture non-production behaviors.


On 5/25/05, Lloyd Dupont <lloyd@nova-mind.com> wrote:
>
> mmhh... I guess it's a feature, as it let you 'override' the declared 
> code.
> well I have to copy paste I suppose....
>
> BTW if I don't declare any class code in my subgrammar the supergrammar
> class code is used, sweet ;)
>
>
> ----- Original Message ----- 
> From: Lloyd Dupont
> To: antlr-interest@antlr.org
> Sent: Thursday, May 26, 2005 9:24 AM
> Subject: [antlr-interest] super grammar surprise
>
>
> I'm writting a subgrammar of the GNU-C grammar.
> I don't know if my problem is due to a 4 level inheritance (Parser ->
> StdCParser -> GnuCParser -> ObjectiveCParser) but anyway, I had the 
> surprise
> that the class code (as in:
>     class MyParser extends Parser;
>     {
>         // class code
>     }
>     idList : ( ID )+;   // parser rule definition
> ) is not passed on the subclass?!
> Is it a bug or a feature? 

From prashant.deva at gmail.com  Wed May 25 18:39:41 2005
From: prashant.deva at gmail.com (Prashant Deva)
Date: Wed May 25 18:39:43 2005
Subject: [antlr-interest] Re-Thinking Antlr's Error recovery
Message-ID: <41fed8f8050525183929d62010@mail.gmail.com>

I was just thinking a bit about the concept of antlr's error recovery.
The current mechanism leads one error to several errors.

Take for example this statement containing an error -

int a = 20 adas dasd   sdf sdf adasd ;
 
Now according to antlr's current error recovery mechanism, after
reaching '20', the parser would try to apply some other rule to the
flawed input ( which would again give an error).

But that is not what we want. What we would really like is some way to
tell the parser to consume until the ';' and then start parsing from
next statement.

So in essence, what we really want most of the time is NOT 'error
recovery' but 'error containment', ie we want to 'contain' the error
till the ';'.

This can be applied almost everywhere, lets say we have -

if (asdasd (asd ) { //missing bracket
........
.....

} 

again the best thing to do in this situation would be to consume until
the '}', otherwise the single error of a missing bracket would lead to
like 200 errors when it tries to look for it inside the opening '{'
and recover there.

So do we really need error 'recovery' or should it be error 'containment'.
 
PRASHANT
From jim.crafton at gmail.com  Wed May 25 18:42:38 2005
From: jim.crafton at gmail.com (Jim Crafton)
Date: Wed May 25 18:42:44 2005
Subject: [antlr-interest] determing the character position of an AST node
Message-ID: <e8813850050525184236cbcc04@mail.gmail.com>

Is it possible to get the character position of an AST node within the
text stream being parsed?
From parrt at cs.usfca.edu  Wed May 25 19:53:26 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed May 25 19:53:30 2005
Subject: [antlr-interest] Re: when can I get v3 early access release?
In-Reply-To: <03aa01c56183$116b4560$9800a8c0@gideone14f6c02>
References: <200505251000.43200.stefan@amiq.ro><bc607a4e05052500456c411439@mail.gmail.com><85A5773A-0D3F-407F-A633-E5CCFB15731A@cs.usfca.edu><034301c5617a$500d23f0$9800a8c0@gideone14f6c02>
	<AAC242FB-3A3E-4D58-B87B-3D650FBC69D6@cs.usfca.edu>
	<03aa01c56183$116b4560$9800a8c0@gideone14f6c02>
Message-ID: <CCAD866B-3C09-4883-9B84-1F3CFC636740@cs.usfca.edu>


On May 25, 2005, at 4:39 PM, Lloyd Dupont wrote:

> That's great!

Yeah, but it won't do trees or tree parsing yet.

> Including the latest to be released ANTLR IDE, the much awaited and  
> acclaimed ANTLRWorks?

Yep!

Ter

>
> ----- Original Message ----- From: "Terence Parr" <parrt@cs.usfca.edu>
> To: "ANTLR Interest" <antlr-interest@antlr.org>
> Sent: Thursday, May 26, 2005 9:38 AM
> Subject: [antlr-interest] Re: when can I get v3 early access release?
>
>
>
>>
>> On May 25, 2005, at 3:37 PM, Lloyd Dupont wrote:
>>
>>
>>> speaking of v3.
>>> where and when could we get it?
>>>
>>>
>>
>> Probably next week :)
>>
>> Ter
>> --
>> CS Professor & Grad Director, University of San Francisco
>> Creator, ANTLR Parser Generator, http://www.antlr.org
>> Cofounder, http://www.jguru.com
>>
>
>

From parrt at cs.usfca.edu  Wed May 25 19:58:51 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Wed May 25 19:58:54 2005
Subject: [antlr-interest] Re-Thinking Antlr's Error recovery
In-Reply-To: <41fed8f8050525183929d62010@mail.gmail.com>
References: <41fed8f8050525183929d62010@mail.gmail.com>
Message-ID: <038A60A3-FC02-48D2-A390-25AA352EDFFB@cs.usfca.edu>

Hi Prashant.  You'll find that v3 has a much better error recovery  
scheme.  You get one error until you successfully resync and only  
then can you get another error.  It also computes the context- 
sensitive FOLLOw set so you get a very accurate recovery.

Ter
On May 25, 2005, at 6:39 PM, Prashant Deva wrote:

> I was just thinking a bit about the concept of antlr's error recovery.
> The current mechanism leads one error to several errors.
>
> Take for example this statement containing an error -
>
> int a = 20 adas dasd   sdf sdf adasd ;
>
> Now according to antlr's current error recovery mechanism, after
> reaching '20', the parser would try to apply some other rule to the
> flawed input ( which would again give an error).
>
> But that is not what we want. What we would really like is some way to
> tell the parser to consume until the ';' and then start parsing from
> next statement.
>
> So in essence, what we really want most of the time is NOT 'error
> recovery' but 'error containment', ie we want to 'contain' the error
> till the ';'.
>
> This can be applied almost everywhere, lets say we have -
>
> if (asdasd (asd ) { //missing bracket
> ........
> .....
>
> }
>
> again the best thing to do in this situation would be to consume until
> the '}', otherwise the single error of a missing bracket would lead to
> like 200 errors when it tries to look for it inside the opening '{'
> and recover there.
>
> So do we really need error 'recovery' or should it be error  
> 'containment'.
>
> PRASHANT
>

From johnm-antlr at non.net  Wed May 25 20:05:40 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Wed May 25 20:05:22 2005
Subject: [antlr-interest] grammar inheritance & warnings
In-Reply-To: <E860961B-6640-4853-954A-410D64C029B6@cs.usfca.edu>
References: <000001c5617e$b9addd00$9829198a@nigelnote>
	<E860961B-6640-4853-954A-410D64C029B6@cs.usfca.edu>
Message-ID: <17045.15620.220240.568622@despot.non.net>

>>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
[...]

>> Can you make it a command-line switch? How many people here make use of
>> such warnings as a sanity/completeness check?

> Yeah, that's why I put it in in the first place but like in a programming
> language that warned you about not using return values, it gets to be
> annoying...

> Anybody else wanna comment?

FWIW, I kind of like them.  I'd like a pragma to turn it off more
selectively.

Hope this helps,
		John
From johnm-antlr at non.net  Wed May 25 20:11:37 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Wed May 25 20:11:18 2005
Subject: [antlr-interest] super grammar surprise
In-Reply-To: <039e01c56182$cda7dbe0$9800a8c0@gideone14f6c02>
References: <039001c56180$f4036ae0$9800a8c0@gideone14f6c02>
	<039e01c56182$cda7dbe0$9800a8c0@gideone14f6c02>
Message-ID: <17045.15977.812817.68467@despot.non.net>

>>>>> "Lloyd" == Lloyd Dupont <lloyd@nova-mind.com> writes:
[...]

> mmhh... I guess it's a feature, as it let you 'override' the declared
> code.  well I have to copy paste I suppose....

Yeah, I really hate that "feature".

The Antlr v2 grammar inheritance was really a big experiement and, well,
there's some good and some bad.

Take care,
	John

P.S.	Is the Obj-C grammar something that you can contribute to the
	distribution?
From lloyd at nova-mind.com  Wed May 25 21:04:04 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Wed May 25 21:04:18 2005
Subject: [antlr-interest] super grammar surprise
References: <039001c56180$f4036ae0$9800a8c0@gideone14f6c02><039e01c56182$cda7dbe0$9800a8c0@gideone14f6c02>
	<17045.15977.812817.68467@despot.non.net>
Message-ID: <058401c561a7$f638d6c0$9800a8c0@gideone14f6c02>

I have to discuss with my boss about that.
However the parsing of the ObjectiveC grammar in itself being quite simple 
in fact (ObjectiveC being a really thin object oriented superset of C (as 
opposed to.. C++!!)) I guess it won't be much of an issue...

----- Original Message ----- 
From: "John D. Mitchell" <johnm-antlr@non.net>
To: "Lloyd Dupont" <lloyd@nova-mind.com>
Cc: <antlr-interest@antlr.org>
Sent: Thursday, May 26, 2005 1:11 PM
Subject: Re: [antlr-interest] super grammar surprise


>>>>>> "Lloyd" == Lloyd Dupont <lloyd@nova-mind.com> writes:
> [...]
>
>> mmhh... I guess it's a feature, as it let you 'override' the declared
>> code.  well I have to copy paste I suppose....
>
> Yeah, I really hate that "feature".
>
> The Antlr v2 grammar inheritance was really a big experiement and, well,
> there's some good and some bad.
>
> Take care,
> John
>
> P.S. Is the Obj-C grammar something that you can contribute to the
> distribution? 

From lloyd at nova-mind.com  Wed May 25 21:51:04 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Wed May 25 21:51:16 2005
Subject: [antlr-interest] C-grammar bug
Message-ID: <05d001c561ae$8658af90$9800a8c0@gideone14f6c02>

initially I believed the __attibute__ implementation was just missing.
In fact it turns out it's faulty ^^

I'm going to debug that (partially)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050526/1f26d15c/attachment.html
From ric.klaren at gmail.com  Thu May 26 00:25:32 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Thu May 26 00:25:35 2005
Subject: [antlr-interest] grammar inheritance & warnings
In-Reply-To: <17045.15620.220240.568622@despot.non.net>
References: <000001c5617e$b9addd00$9829198a@nigelnote>
	<E860961B-6640-4853-954A-410D64C029B6@cs.usfca.edu>
	<17045.15620.220240.568622@despot.non.net>
Message-ID: <bc607a4e05052600253934d207@mail.gmail.com>

On 5/26/05, John D. Mitchell <johnm-antlr@non.net> wrote:
> >>>>> "Terence" == Terence Parr <parrt@cs.usfca.edu> writes:
> > Yeah, that's why I put it in in the first place but like in a programming
> > language that warned you about not using return values, it gets to be
> > annoying...
> 
> > Anybody else wanna comment?
> 
> FWIW, I kind of like them.  I'd like a pragma to turn it off more
> selectively.

Just put (void) in front of them... erm.. ;)

Ric
From igor.inas at gmail.com  Thu May 26 02:26:48 2005
From: igor.inas at gmail.com (Igor Inas)
Date: Thu May 26 02:26:50 2005
Subject: [antlr-interest] ANTLR 2.7.5 Bug (affects lexers in C#,
	Java and C++)
In-Reply-To: <000201c54049$586a7810$6702a8c0@hercules>
References: <e8a3df20777c53fddea878c62bb55f4f@cs.usfca.edu>
	<000201c54049$586a7810$6702a8c0@hercules>
Message-ID: <aa245b550505260226166d217a@mail.gmail.com>

On 4/13/05, Micheal J <open.zone@virgin.net> wrote:
> > On Apr 5, 2005, at 1:19 PM, Luis Leal wrote:
> >
> > > Hi,
> > >
> > > I've found the following small bug in the 2.7.5 C# runtime
> > for which I
> > > couldn't find a report on the list. (I haven't checked the java or
> > > other runtimes).
> > >
> > > Lexers generated with defaultErrorHandler=true contain a
> > reference to
> > > a recover method which does not seem to be implemented.
> > Copying the
> > > recover method from Parser.cs to CharScanner.cs resolves
> > the problem.
> >
> > Hmm...Michael can correct me, but I thought we fixed that
> > right before
> > 2.7.5 shipped...maybe it was just after.
> >
> > Ter
> 
> We fixed a related issue in Parsers Ter, not this one. ;-)
> 
> ANTLR lexers don't (shouldn't?) have the recover() method so, it could be
> classed as a bug in the C# codegen since it shouldn't be generating calls to
> recover() for lexers.
> 
> I've confirmed that this issue also affects the Java and C++ codegens
> (Python doesn't yet generate the recover() method) so, should I:
> 
> 1. Fix the C#, Java and C++ codegens so they don't generate recover() for
> lexers (they will use the old consume()/consumeUntil() methods instead).
> 
> OR
> 
> 2. Add recover() to the CharScanner class for C#, Java and C++ (as Luis did
> for C# in his private copy of ANTLR).
> 
> The effort involved is about the same in either case.
> 
> Micheal
> ANTLR/C#

What is the current status of this issue? It's not fixed either in
2.7.5 jar or 2.7.5 source code on the web page. I had to recompile
antlr source codes and add the recover method to CharScanner
yesterday. Quite unpleasant solution for a minor bug.

Igor Inas
From open.zone at virgin.net  Thu May 26 03:15:56 2005
From: open.zone at virgin.net (Micheal J)
Date: Thu May 26 03:02:14 2005
Subject: [antlr-interest] ANTLR 2.7.5 Bug (affects lexers in C#,
	Java and C++)
In-Reply-To: <aa245b550505260226166d217a@mail.gmail.com>
Message-ID: <002601c561db$e7d22c10$6502a8c0@hercules>


> What is the current status of this issue? It's not fixed 
> either in 2.7.5 jar or 2.7.5 source code on the web page. I 
> had to recompile antlr source codes and add the recover 
> method to CharScanner yesterday. Quite unpleasant solution 
> for a minor bug.

It has been fixed in the depot and will be part of the next release of the
ANTLR v2.x product which probably won't be until after the initial
release(s) of ANTLR v3.

Micheal

From Anthony.Youngman at eca-international.com  Thu May 26 04:02:17 2005
From: Anthony.Youngman at eca-international.com (Anthony Youngman)
Date: Thu May 26 04:02:22 2005
Subject: [antlr-interest] v3 pre-release usage data and stat collection
Message-ID: <C7FE35004D40FD45AA342991B88CE4040128FF0E@lnml1.eca-international.local>

Oh well, that won't cause me any grief then :-)

If my computer tries to find antlr.org down its ethernet cable, it's not
going to have much success, as it's just a crossover to my wife's pc!

Cheers,
Wol

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: 19 May 2005 18:21
To: ANTLR Interest
Subject: Re: [antlr-interest] v3 pre-release usage data and stat
collection



There won't be any way to cancel it minus unplugging ethernet.  Just  
like TiVo ;)  Your only choice will be to wait until a real release.   
This release is only for the intrepid, believe me.  In exchange for  
early access people will provide me with info to make the real  
release better.  Another reason for the required nature is that to  
get any hope of a scientific sample, I cannot let people self select  
to send data or not.



****************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

****************************************************************************

From igor.inas at gmail.com  Thu May 26 04:14:03 2005
From: igor.inas at gmail.com (Igor Inas)
Date: Thu May 26 04:14:05 2005
Subject: [antlr-interest] C to assembler compiler
Message-ID: <aa245b55050526041435eca355@mail.gmail.com>

I am taking a course in compilers this year. The practical part of the
exam was to implement a compiler which translates C source code to
assembler. The C is a very very simple one, with no pointers, no
arrays as arguments and so on.

We were instructed to use bison, but the first paragraph of bison
manual says: "You need to be fluent in C programming in order to use
Bison." which made me to look after a Java alternative. And since
Antlr has a very nice webpage I chose that one :)

The result can be downloaded at http://sprite.edi.fmph.uniba.sk/~inas/antlr/

There are still some unresolved issues, and at the end, when deadline
was coming near, I wrote more and more ugly code.

Though the documentation for antlr is a very good one, and the mailing
list contains lots of usefull tips, I missed practical examples of
parsers and compilers written in Antlr on the web, so I hope, this can
be usefull to newcomers.

Igor Inas
From antlr at shmuelhome.mine.nu  Thu May 26 05:35:48 2005
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Thu May 26 05:37:34 2005
Subject: [antlr-interest] metrics for grammar compliance
Message-ID: <4295C2A4.2080708@shmuelhome.mine.nu>

Can somebody in this group refer me to work done to determine the 
distance of a sample data stream from a given grammar. For instance, if 
I wanted to determine whether a given data stream was more likely to be 
java or c++, what kind of compliance metrics could I use.


-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.322 / Virus Database: 266.11.17 - Release Date: 5/25/2005

From open.zone at virgin.net  Thu May 26 07:56:34 2005
From: open.zone at virgin.net (Micheal J)
Date: Thu May 26 07:42:53 2005
Subject: [antlr-interest] C to assembler compiler
In-Reply-To: <aa245b55050526041435eca355@mail.gmail.com>
Message-ID: <002a01c56203$1c08f460$6502a8c0@hercules>

> I am taking a course in compilers this year. The practical 
> part of the exam was to implement a compiler which translates 
> C source code to assembler. The C is a very very simple one, 
> with no pointers, no arrays as arguments and so on.
> 
> We were instructed to use bison, but the first paragraph of 
> bison manual says: "You need to be fluent in C programming in 
> order to use Bison." which made me to look after a Java 
> alternative. And since Antlr has a very nice webpage I chose 
> that one :)

I'd suggest learning Flex/Bison anyways (despite ANTLR's obvious strengths).
Perhaps Jflex/CUP - or Jflex/Jay - if Java is your preferred implementation
language.

Doesn't hurt to have the additional skill/option...

> The result can be downloaded at 
> http://sprite.edi.fmph.uniba.sk/~inas/antlr/
> 
> There are still 
> some unresolved issues, and at the end, when deadline was 
> coming near, I wrote more and more ugly code.

My quick perusal noticed the lack of a symbol table. Didn't think you could
parse most languages without such a beast, did I miss something?

Micheal

From johnm-antlr at non.net  Thu May 26 07:58:35 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Thu May 26 07:58:16 2005
Subject: [antlr-interest] grammar inheritance & warnings
In-Reply-To: <bc607a4e05052600253934d207@mail.gmail.com>
References: <000001c5617e$b9addd00$9829198a@nigelnote>
	<E860961B-6640-4853-954A-410D64C029B6@cs.usfca.edu>
	<17045.15620.220240.568622@despot.non.net>
	<bc607a4e05052600253934d207@mail.gmail.com>
Message-ID: <17045.58395.985068.301502@despot.non.net>

>>>>> "Ric" == Ric Klaren <ric.klaren@gmail.com> writes:
[...]

>> FWIW, I kind of like them.  I'd like a pragma to turn it off more
>> selectively.

> Just put (void) in front of them... erm.. ;)

No, that would be a redefinition (which should cause a different warning :-).

Thanks,
	John
From igor.inas at gmail.com  Thu May 26 08:11:28 2005
From: igor.inas at gmail.com (Igor Inas)
Date: Thu May 26 08:11:32 2005
Subject: [antlr-interest] C to assembler compiler
In-Reply-To: <002a01c56203$1c08f460$6502a8c0@hercules>
References: <aa245b55050526041435eca355@mail.gmail.com>
	<002a01c56203$1c08f460$6502a8c0@hercules>
Message-ID: <aa245b550505260811614ca205@mail.gmail.com>

On 5/26/05, Micheal J <open.zone@virgin.net> wrote:
> > I am taking a course in compilers this year. The practical
> > part of the exam was to implement a compiler which translates
> > C source code to assembler. The C is a very very simple one,
> > with no pointers, no arrays as arguments and so on.
> >
> > We were instructed to use bison, but the first paragraph of
> > bison manual says: "You need to be fluent in C programming in
> > order to use Bison." which made me to look after a Java
> > alternative. And since Antlr has a very nice webpage I chose
> > that one :)
> 
> I'd suggest learning Flex/Bison anyways (despite ANTLR's obvious strengths).
> Perhaps Jflex/CUP - or Jflex/Jay - if Java is your preferred implementation
> language.
> 

Hmm, I was not able to find Bison alternatives for Java before. I will
have a look at CUP and Jay later perhaps.

> Doesn't hurt to have the additional skill/option...
> 
> > The result can be downloaded at
> > http://sprite.edi.fmph.uniba.sk/~inas/antlr/
> >
> > There are still
> > some unresolved issues, and at the end, when deadline was
> > coming near, I wrote more and more ugly code.
> 
> My quick perusal noticed the lack of a symbol table. Didn't think you could
> parse most languages without such a beast, did I miss something?
> 

I only use parser to generate AST. I do all the semantic checking and
other actions on the second pass on the AST.

> Micheal
> 
>
From teddemc at yahoo.com  Thu May 26 14:48:25 2005
From: teddemc at yahoo.com (Matthew Tedder)
Date: Thu May 26 14:48:29 2005
Subject: [antlr-interest] Why does this conflict?
Message-ID: <20050526214826.56903.qmail@web52904.mail.yahoo.com>


I created this to add boolean literals:

// Boolean Literal
BOOLIT
  : "true"
  | "false"
  ;

And it seems to conflict with:

DENT
  options {testLiterals=true;}
  : ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9')*
  ;

With this antlr.Tool output:

ANTLR Parser Generator   Version 2.7.3   1989-2004
jGuru.com
morph.g: warning:lexical nondeterminism between rules
IDENT and BOOLIT upon
morph.g:     k==1:'f','t'
morph.g:     k==2:'a','r'



		
__________________________________ 
Do you Yahoo!? 
Yahoo! Small Business - Try our new Resources site
http://smallbusiness.yahoo.com/resources/
From parrt at cs.usfca.edu  Thu May 26 15:05:17 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu May 26 15:04:51 2005
Subject: [antlr-interest] Why does this conflict?
In-Reply-To: <20050526214826.56903.qmail@web52904.mail.yahoo.com>
References: <20050526214826.56903.qmail@web52904.mail.yahoo.com>
Message-ID: <7C54EFC0-3538-4D8C-8C1C-7AC71C6FF347@cs.usfca.edu>


On May 26, 2005, at 2:48 PM, Matthew Tedder wrote:
> I created this to add boolean literals:
>
> // Boolean Literal
> BOOLIT
>   : "true"
>   | "false"
>   ;
>
> And it seems to conflict with:
>
> DENT
>   options {testLiterals=true;}
>   : ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9')*
>   ;

Hi.  This is a typical issue with ANTLR 2.x.  You need to use  
literals for stuff liek "true".  See the example grammars for how  
they handle literals :)

v3 won't have this problem.

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From nbsherid at secsme.org.au  Thu May 26 17:13:43 2005
From: nbsherid at secsme.org.au (Nigel Sheridan-Smith)
Date: Thu May 26 17:13:43 2005
Subject: [antlr-interest] Why does this conflict?
In-Reply-To: <20050526214826.56903.qmail@web52904.mail.yahoo.com>
Message-ID: <000001c56250$f161ee80$0500a8c0@nigel>



> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Matthew Tedder
> Sent: Friday, 27 May 2005 7:48 AM
> To: antlr-interest@antlr.org
> Subject: [antlr-interest] Why does this conflict?
> 
> 
> I created this to add boolean literals:
> 
> // Boolean Literal
> BOOLIT
>   : "true"
>   | "false"
>   ;
> 
> And it seems to conflict with:
> 
> DENT
>   options {testLiterals=true;}
>   : ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9')*
>   ;
> 
> With this antlr.Tool output:
> 
> ANTLR Parser Generator   Version 2.7.3   1989-2004
> jGuru.com
> morph.g: warning:lexical nondeterminism between rules
> IDENT and BOOLIT upon
> morph.g:     k==1:'f','t'
> morph.g:     k==2:'a','r'
> 


BOOLLIT is a token in the lexer... If you switch it to a parser rule then
"true" and "false" will be treated as IDENT initially, but then these
"literals" will be changed to their own tokens "LITERAL_true" and
"LITERAL_false". 

So, for example, do something like the following in the parser:


expression: const_value | identifier;
identifier: IDENT;
const_value: NUMBER | boolean;
boolean: "true" | "false";


And in the lexer:


NUMBER: ('0'..'9')+ ;
IDENT: ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9')* ;



The reason for the conflict is that "true" and "false" are treated as tokens
to be discovered and constructed (in the lexer), rather than literals which
are reinterpreted from another token after they are constructed (at some
point, further down the track).

Nigel 

--
Nigel Sheridan-Smith
PhD research student

Faculty of Engineering
University of Technology, Sydney
Phone: 02 9514 7946
Fax: 02 9514 2435


From lloyd at nova-mind.com  Thu May 26 17:19:04 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Thu May 26 17:19:11 2005
Subject: [antlr-interest] predicate, uh?
Message-ID: <07cd01c56251$b211ef40$9800a8c0@gideone14f6c02>

I have a simple grammar rule like that (inheriting from cgram)

objcMethodDefinition  returns [String selName]
{
 selName = "";
}
 : ( PLUS | MINUS ) (castExpr)? 
  (
    ( ID COLON )=> 
     id0:ID COLON (castExpr)? ID { selName = id0.getText() + ":"; }
     ( 
      (id1:ID  { selName += id1.getText(); })? (COLON) (castExpr)? ID { selName += ":"; }
     ) *
   | id2:ID { selName = id2.getText(); }
  )
 
note: there is no explicit end to this rule, because I reuse it for both declaration (ending by a ';') and definition (ending by '{').

when I test it I get this parsing error (while evaluating the (ID COLON)=> !!!) (on something as simple as "- foo { ...."
ANTLR Parsing Error: # 1 "":line 22:1896: unexpected token: { token name:LCURLY
line 22:1896: unexpected token: {
        at ObjectiveCParser.postfixExpr(ObjectiveCParser.java:5876)
        at ObjectiveCParser.unaryExpr(ObjectiveCParser.java:5293)
        at ObjectiveCParser.castExpr(ObjectiveCParser.java:1548)
        at ObjectiveCParser.objcMethodDefinition(ObjectiveCParser.java:1129)
        at ObjectiveCParser.objcClassImplementation(ObjectiveCParser.java:1056)
        at ObjectiveCParser.externalDef(ObjectiveCParser.java:213)
        at ObjectiveCParser.externalList(ObjectiveCParser.java:1649)
        at ObjectiveCParser.translationUnit(ObjectiveCParser.java:1610)
        at Test.main(Test.java:40)

?!!!
how come? 
what did I do wrong?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050527/a71d32c3/attachment.html
From lloyd at nova-mind.com  Thu May 26 21:00:38 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Thu May 26 21:00:44 2005
Subject: [antlr-interest] predicate, uh?: bug in c-grammar
References: <07cd01c56251$b211ef40$9800a8c0@gideone14f6c02>
Message-ID: <009401c56270$a56e36d0$9800a8c0@gideone14f6c02>

found it!
for some obscure reason castExpr could be something else than a cast. expression such as sizof(), __alignof().... are recognized by castExp(??!!!)
why they put such production in castExpr is beyond my uderstanding, but at least it's solved.
(I now use a subrule like that:
protected strictCast: 
     (LPAREN)=> castExpr
     |
     ;
)

Anyway I would call that 'another bug in the c-grammar'
I think that should be fixed, other could fall for the same trap!

PS: not to denigrate the c-grammar which is a great job, and I guess hard to debug for lack of advanced grammar checking tool, just to warn future users: it's slightly bugged!

  ----- Original Message ----- 
  From: Lloyd Dupont 
  To: antlr-interest@antlr.org 
  Sent: Friday, May 27, 2005 10:19 AM
  Subject: [antlr-interest] predicate, uh?


  I have a simple grammar rule like that (inheriting from cgram)

  objcMethodDefinition  returns [String selName]
  {
   selName = "";
  }
   : ( PLUS | MINUS ) (castExpr)? 
    (
      ( ID COLON )=> 
       id0:ID COLON (castExpr)? ID { selName = id0.getText() + ":"; }
       ( 
        (id1:ID  { selName += id1.getText(); })? (COLON) (castExpr)? ID { selName += ":"; }
       ) *
     | id2:ID { selName = id2.getText(); }
    )
   
  note: there is no explicit end to this rule, because I reuse it for both declaration (ending by a ';') and definition (ending by '{').

  when I test it I get this parsing error (while evaluating the (ID COLON)=> !!!) (on something as simple as "- foo { ...."
  ANTLR Parsing Error: # 1 "":line 22:1896: unexpected token: { token name:LCURLY
  line 22:1896: unexpected token: {
          at ObjectiveCParser.postfixExpr(ObjectiveCParser.java:5876)
          at ObjectiveCParser.unaryExpr(ObjectiveCParser.java:5293)
          at ObjectiveCParser.castExpr(ObjectiveCParser.java:1548)
          at ObjectiveCParser.objcMethodDefinition(ObjectiveCParser.java:1129)
          at ObjectiveCParser.objcClassImplementation(ObjectiveCParser.java:1056)
          at ObjectiveCParser.externalDef(ObjectiveCParser.java:213)
          at ObjectiveCParser.externalList(ObjectiveCParser.java:1649)
          at ObjectiveCParser.translationUnit(ObjectiveCParser.java:1610)
          at Test.main(Test.java:40)

  ?!!!
  how come? 
  what did I do wrong?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050527/abf362e0/attachment.html
From lloyd at nova-mind.com  Thu May 26 22:17:01 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Thu May 26 22:17:07 2005
Subject: [antlr-interest] C to assembler compiler
References: <aa245b55050526041435eca355@mail.gmail.com><002a01c56203$1c08f460$6502a8c0@hercules>
	<aa245b550505260811614ca205@mail.gmail.com>
Message-ID: <010101c5627b$5117a250$9800a8c0@gideone14f6c02>

personally I thinking starting with ANTLR is not a problem.....
the only issing thing is a 'ANTLR for the dummy' book
but you could try to be patient and perseverant and read the online book, 
although it's not for the dummy it's more friendly than many spec!

----- Original Message ----- 
From: "Igor Inas" <igor.inas@gmail.com>
To: "'antlr-interest' Interest" <antlr-interest@antlr.org>
Sent: Friday, May 27, 2005 1:11 AM
Subject: Re: [antlr-interest] C to assembler compiler


On 5/26/05, Micheal J <open.zone@virgin.net> wrote:
> > I am taking a course in compilers this year. The practical
> > part of the exam was to implement a compiler which translates
> > C source code to assembler. The C is a very very simple one,
> > with no pointers, no arrays as arguments and so on.
> >
> > We were instructed to use bison, but the first paragraph of
> > bison manual says: "You need to be fluent in C programming in
> > order to use Bison." which made me to look after a Java
> > alternative. And since Antlr has a very nice webpage I chose
> > that one :)
>
> I'd suggest learning Flex/Bison anyways (despite ANTLR's obvious 
> strengths).
> Perhaps Jflex/CUP - or Jflex/Jay - if Java is your preferred 
> implementation
> language.
>

Hmm, I was not able to find Bison alternatives for Java before. I will
have a look at CUP and Jay later perhaps.

> Doesn't hurt to have the additional skill/option...
>
> > The result can be downloaded at
> > http://sprite.edi.fmph.uniba.sk/~inas/antlr/
> >
> > There are still
> > some unresolved issues, and at the end, when deadline was
> > coming near, I wrote more and more ugly code.
>
> My quick perusal noticed the lack of a symbol table. Didn't think you 
> could
> parse most languages without such a beast, did I miss something?
>

I only use parser to generate AST. I do all the semantic checking and
other actions on the second pass on the AST.

> Micheal
>
> 

From lloyd at nova-mind.com  Thu May 26 22:29:17 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Thu May 26 22:29:21 2005
Subject: [antlr-interest] GNU-C grammar problem/needed enhancement (anyone got
	a fix?)
References: <039001c56180$f4036ae0$9800a8c0@gideone14f6c02>
	<4294E6E3.5030502@codetransform.com>
Message-ID: <010d01c5627d$07e9bd00$9800a8c0@gideone14f6c02>

that would be nice if it could parse a precompiled <stdlib.h> (on windows 
with GCC).

I have a very simple program like
--- simple.c --
#include <stdlib.h>

main() { printf("done\n"); }
--------------
I precompile it with
gcc -E simple.c > simple.p.c

Then I try to run the cgram's test demo on it:
java -classpath  $(CLASSPATH)  Test simple.p.c

I get a huge number of error.
fortunately I have the feeling it's all due only to incorrect __attribute__ 
parsing (not so easy as they could sprout almost everywhere).

Does anyone have a version parsing a preprocessed stdlib? (or if not tested, 
seemingly supporting __attribute__)

From davmac at deakin.edu.au  Thu May 26 22:37:23 2005
From: davmac at deakin.edu.au (Davin McCall)
Date: Thu May 26 22:32:00 2005
Subject: [antlr-interest] predicate, uh?: bug in c-grammar
In-Reply-To: <009401c56270$a56e36d0$9800a8c0@gideone14f6c02>
References: <07cd01c56251$b211ef40$9800a8c0@gideone14f6c02>
	<009401c56270$a56e36d0$9800a8c0@gideone14f6c02>
Message-ID: <4296B213.7020608@deakin.edu.au>

Not sure if it applies in this particular case, but often things are 
done that way to make precedence work. If this is the case then 
"castExpr" should be interpreted as a rule matching "any expression 
whose precedence is equal to or higher than a cast".

For a simple example, consider multiplication and addition:

--- begin pseudo-grammar ---
Expression: AdditionExpr

MultExpr: INTEGER "*" INTEGER

AdditionExpr:
          MultExpr
          | AdditionExpr "+" MultExpr
--- end pseudo-grammar ---

... So that "4 + 5 * 6" is correctly parsed as (+ (* 5 6)) rather than 
(* (+ 4 5) 6) for instance. However, "AdditionExpr" will match "2 * 3", 
an expression whose precedence is higher than addition.

Davin


Lloyd Dupont wrote:

> found it!
> for some obscure reason castExpr could be something else than a cast. 
> expression such as sizof(), __alignof().... are recognized by 
> castExp(??!!!)
> why they put such production in castExpr is beyond my uderstanding, 
> but at least it's solved.
> (I now use a subrule like that:
> protected strictCast:
>      (LPAREN)=> castExpr
>      |
>      ;
> )
>  
> Anyway I would call that 'another bug in the c-grammar'
> I think that should be fixed, other could fall for the same trap!
>  
> PS: not to denigrate the c-grammar which is a great job, and I guess 
> hard to debug for lack of advanced grammar checking tool, just to warn 
> future users: it's slightly bugged!
>  
>
>     ----- Original Message -----
>     *From:* Lloyd Dupont <mailto:lloyd@nova-mind.com>
>     *To:* antlr-interest@antlr.org <mailto:antlr-interest@antlr.org>
>     *Sent:* Friday, May 27, 2005 10:19 AM
>     *Subject:* [antlr-interest] predicate, uh?
>
>     I have a simple grammar rule like that (inheriting from cgram)
>      
>     objcMethodDefinition  returns [String selName]
>     {
>      selName = "";
>     }
>      : ( PLUS | MINUS ) (castExpr)?
>       (
>         ( ID COLON )=> 
>          id0:ID COLON (castExpr)? ID { selName = id0.getText() + ":"; }
>          (
>           (id1:ID  { selName += id1.getText(); })? (COLON) (castExpr)?
>     ID { selName += ":"; }
>          ) *
>        | id2:ID { selName = id2.getText(); }
>       )
>      
>     note: there is no explicit end to this rule, because I reuse it
>     for both declaration (ending by a ';') and definition (ending by '{').
>      
>     when I test it I get this parsing error (while evaluating the (ID
>     COLON)=> !!!) (on something as simple as "- foo { ...."
>     ANTLR Parsing Error: # 1 "":line 22:1896: unexpected token: {
>     token name:LCURLY
>     line 22:1896: unexpected token: {
>             at ObjectiveCParser.postfixExpr(ObjectiveCParser.java:5876)
>             at ObjectiveCParser.unaryExpr(ObjectiveCParser.java:5293)
>             at ObjectiveCParser.castExpr(ObjectiveCParser.java:1548)
>             at
>     ObjectiveCParser.objcMethodDefinition(ObjectiveCParser.java:1129)
>             at
>     ObjectiveCParser.objcClassImplementation(ObjectiveCParser.java:1056)
>             at ObjectiveCParser.externalDef(ObjectiveCParser.java:213)
>             at ObjectiveCParser.externalList(ObjectiveCParser.java:1649)
>             at
>     ObjectiveCParser.translationUnit(ObjectiveCParser.java:1610)
>             at Test.main(Test.java:40)
>      
>     ?!!!
>     how come?
>     what did I do wrong?
>


-- 
Davin McCall, Research Programmer
Deakin University, Burwood, Australia.
Phone: 03 9251 7045 International: +61 3 9251 7045
Email: Davin.McCall@deakin.edu.au
Website: http://www.deakin.edu.au
Deakin University CRICOS Provider Code 00113B (Vic)

From johnm-antlr at non.net  Thu May 26 22:42:55 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Thu May 26 22:42:36 2005
Subject: [antlr-interest] predicate, uh?: bug in c-grammar
In-Reply-To: <4296B213.7020608@deakin.edu.au>
References: <07cd01c56251$b211ef40$9800a8c0@gideone14f6c02>
	<009401c56270$a56e36d0$9800a8c0@gideone14f6c02>
	<4296B213.7020608@deakin.edu.au>
Message-ID: <17046.45919.235310.907548@despot.non.net>

>>>>> "Davin" == Davin McCall <davmac@deakin.edu.au> writes:
[...]

> Not sure if it applies in this particular case, but often things are done
> that way to make precedence work. If this is the case then "castExpr"
> should be interpreted as a rule matching "any expression whose precedence
> is equal to or higher than a cast".

Exactly so.

IIRC, there are also some potentially odd sounding lingo used because
that's the terms used in the C standard document.

Thanks,
	John
From parrt at cs.usfca.edu  Thu May 26 09:00:12 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Thu May 26 23:07:42 2005
Subject: [antlr-interest] v3 pre-release usage data and stat collection
In-Reply-To: <C7FE35004D40FD45AA342991B88CE4040128FF0E@lnml1.eca-international.local>
References: <C7FE35004D40FD45AA342991B88CE4040128FF0E@lnml1.eca-international.local>
Message-ID: <DC57A31D-D536-4975-B4B3-7D212736BBE7@cs.usfca.edu>


On May 26, 2005, at 4:02 AM, Anthony Youngman wrote:

> Oh well, that won't cause me any grief then :-)
>
> If my computer tries to find antlr.org down its ethernet cable,  
> it's not
> going to have much success, as it's just a crossover to my wife's pc!

Hi :)  Per my last post about this, we're going to make it voluntary. :)

Ter
From ewbank at gmail.com  Fri May 27 02:35:39 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri May 27 02:35:43 2005
Subject: [antlr-interest] GNU-C grammar problem/needed enhancement (anyone
	got a fix?)
In-Reply-To: <010d01c5627d$07e9bd00$9800a8c0@gideone14f6c02>
References: <039001c56180$f4036ae0$9800a8c0@gideone14f6c02>
	<4294E6E3.5030502@codetransform.com>
	<010d01c5627d$07e9bd00$9800a8c0@gideone14f6c02>
Message-ID: <dd3a065f05052702354f33d677@mail.gmail.com>

To determine if it's __attribute__, can you add the following to simple.c:
   #define __attribute__(x) /* i.e., make it go away */
and get a clean parse?

On 5/27/05, Lloyd Dupont <lloyd@nova-mind.com> wrote:
> that would be nice if it could parse a precompiled <stdlib.h> (on windows
> with GCC).
> 
> I have a very simple program like
> --- simple.c --
> #include <stdlib.h>
> 
> main() { printf("done\n"); }
> --------------
> I precompile it with
> gcc -E simple.c > simple.p.c
> 
> Then I try to run the cgram's test demo on it:
> java -classpath  $(CLASSPATH)  Test simple.p.c
> 
> I get a huge number of error.
> fortunately I have the feeling it's all due only to incorrect __attribute__
> parsing (not so easy as they could sprout almost everywhere).
> 
> Does anyone have a version parsing a preprocessed stdlib? (or if not tested,
> seemingly supporting __attribute__)
> 
>
From Anthony.Youngman at eca-international.com  Fri May 27 07:03:43 2005
From: Anthony.Youngman at eca-international.com (Anthony Youngman)
Date: Fri May 27 07:03:49 2005
Subject: [antlr-interest] Optional tokens
Message-ID: <C7FE35004D40FD45AA342991B88CE4040128FF13@lnml1.eca-international.local>

Not sure how closely it approximates to your problem, but you could also
look at some DATABASIC grammars.

There's one with MaVerick (www.maverick-dbms.org), Monty's REVELATION
grammar, and there should be a very simple "demo grammar" of mine
somewhere on the Antlr site.

The problem these BASICs have is in handling IF/THEN/ELSE. Normally ';'
and <lf> are interchangeable to mean "end of statement", but if (and
only if) a statement follows a conditional (THEN or ELSE) on the same
line, the meaning of <lf> changes to "end of conditional block".

As a result, my grammar treats <lf> as a token, but mostly throws it
away. I can't remember how I do it, and don't have access to my .g at
the moment...

Cheers,
Wol

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of hammett
Sent: 23 May 2005 07:53
To: antlr-interest@antlr.org
Subject: Re: [antlr-interest] Optional tokens

Hiya!

> I will repeat John's question. If a NEWLINE can occur anywhere, where
does 
> a statement end? If it can only occur (and must occur) at a statement
end 
> then defactoring and putting it at the end of each of your statement
types 
> will should solve your problem.

Allow me to rephrase my problem: a NEWLINE is meaningless anywhere but
at 
statements end, which means that it must be ignored as a token anywhere
but 
at statements end.

I believe aspl VBScript grammar solved that nicely. Gonna use their 
approach.


Thanks

-- 
Cheers,
hammett
http://www.castleproject.org/~hammett




****************************************************************************

This transmission is intended for the named recipient only. It may contain private and confidential information. If this has come to you in error you must not act on anything disclosed in it, nor must you copy it, modify it, disseminate it in any way, or show it to anyone. Please e-mail the sender to inform us of the transmission error or telephone ECA International immediately and delete the e-mail from your information system.

Telephone numbers for ECA International offices are: Sydney +61 (0)2 8272 5300, Hong Kong + 852 2121 2388, London +44 (0)20 7351 5000 and New York +1 212 582 2333.

****************************************************************************

From ttest at gmx.de  Fri May 27 10:40:46 2005
From: ttest at gmx.de (ttest)
Date: Fri May 27 10:40:54 2005
Subject: [antlr-interest] Inefficiency in lexer
Message-ID: <20050527174051.B2DF3DCC21@www.antlr.org>

Hi,

while looking thru my generated lexer code I came across the following
switch statement which is unnecessarily inefficient.

switch ( LA(1)) {
case '\n':  case '\r':  case ' ':  case '0':
case '1':  case '2':  case '3':  case '4':
case '5':  case '6':  case '7':  case '8':
case '9':  case 'A':  case 'B':  case 'C':
case 'D':  case 'E':  case 'F':  case 'G':
case 'H':  case 'I':  case 'J':  case 'K':
case 'L':  case 'M':  case 'N':  case 'O':
case 'P':  case 'Q':  case 'R':  case 'S':
case 'T':  case 'U':  case 'V':  case 'W':
case 'X':  case 'Y':  case 'Z':  case 'a':
case 'b':  case 'c':  case 'd':  case 'e':
case 'f':  case 'g':  case 'h':  case 'i':
case 'j':  case 'k':  case 'l':  case 'm':
case 'n':  case 'o':  case 'p':  case 'q':
case 'r':  case 's':  case 't':  case 'u':
case 'v':  case 'w':  case 'x':  case 'y':
case 'z':
{
	mText(true);
	theRetToken=_returnToken;
	break;
}

A better alternative which could also be easily generated from character
classes using .. i. e. 'a'..'z' would be the following.

char c = LA(1);
if( c=='\n' || c=='\r' || c==' '
	|| (c>='0' && c<='9')
	|| (c>='A' && c<='Z')
	|| (c>='a' && c<='z')
	)
{
	mText(true);
	theRetToken=_returnToken;
	break;
}

Greets,

Christian

From ewbank at gmail.com  Fri May 27 10:56:02 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Fri May 27 10:56:04 2005
Subject: [antlr-interest] Inefficiency in lexer
In-Reply-To: <20050527174051.B2DF3DCC21@www.antlr.org>
References: <20050527174051.B2DF3DCC21@www.antlr.org>
Message-ID: <dd3a065f050527105610207ae8@mail.gmail.com>

Why's this inefficient?  LA is called once in both cases, and the
switch can be converted to a lookup table that is faster than the
multiple comparisons of the alternate code.

- Bryan

On 5/27/05, ttest <ttest@gmx.de> wrote:
> Hi,
> 
> while looking thru my generated lexer code I came across the following
> switch statement which is unnecessarily inefficient.
> 
> switch ( LA(1)) {
> case '\n':  case '\r':  case ' ':  case '0':
> case '1':  case '2':  case '3':  case '4':
> case '5':  case '6':  case '7':  case '8':
> case '9':  case 'A':  case 'B':  case 'C':
> case 'D':  case 'E':  case 'F':  case 'G':
> case 'H':  case 'I':  case 'J':  case 'K':
> case 'L':  case 'M':  case 'N':  case 'O':
> case 'P':  case 'Q':  case 'R':  case 'S':
> case 'T':  case 'U':  case 'V':  case 'W':
> case 'X':  case 'Y':  case 'Z':  case 'a':
> case 'b':  case 'c':  case 'd':  case 'e':
> case 'f':  case 'g':  case 'h':  case 'i':
> case 'j':  case 'k':  case 'l':  case 'm':
> case 'n':  case 'o':  case 'p':  case 'q':
> case 'r':  case 's':  case 't':  case 'u':
> case 'v':  case 'w':  case 'x':  case 'y':
> case 'z':
> {
>         mText(true);
>         theRetToken=_returnToken;
>         break;
> }
> 
> A better alternative which could also be easily generated from character
> classes using .. i. e. 'a'..'z' would be the following.
> 
> char c = LA(1);
> if( c=='\n' || c=='\r' || c==' '
>         || (c>='0' && c<='9')
>         || (c>='A' && c<='Z')
>         || (c>='a' && c<='z')
>         )
> {
>         mText(true);
>         theRetToken=_returnToken;
>         break;
> }
> 
> Greets,
> 
> Christian
> 
>
From ttest at gmx.de  Fri May 27 12:19:34 2005
From: ttest at gmx.de (ttest)
Date: Fri May 27 12:19:41 2005
Subject: [antlr-interest] Inefficiency in lexer
In-Reply-To: <20050527190003.D91A5DCDEC@www.antlr.org>
Message-ID: <20050527191939.6FE7CDCC21@www.antlr.org>

Hi again,

I'm not sure if Java is really that smart. I would think that LA(1) is
compared to every character one at a time which would be inefficient.

What would the lookup table look like?

I guess the key in the table would be the char returned by LA(1) and what
would the values be in that table? The memory location where execution
continues?

Then the lookup table would be 2^16*6=393216=390K bytes big which would be
pretty much.

Christian

-----Original Message-----
Message: 7
Date: Fri, 27 May 2005 13:56:02 -0400
From: Bryan Ewbank <ewbank@gmail.com>
Subject: Re: [antlr-interest] Inefficiency in lexer
To: ANTLR Interest <antlr-interest@antlr.org>
Message-ID: <dd3a065f050527105610207ae8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Why's this inefficient?  LA is called once in both cases, and the
switch can be converted to a lookup table that is faster than the
multiple comparisons of the alternate code.

- Bryan

On 5/27/05, ttest <ttest@gmx.de> wrote:
> Hi,
> 
> while looking thru my generated lexer code I came across the following
> switch statement which is unnecessarily inefficient.
> 
> switch ( LA(1)) {
> case '\n':  case '\r':  case ' ':  case '0':
> case '1':  case '2':  case '3':  case '4':
> case '5':  case '6':  case '7':  case '8':
> case '9':  case 'A':  case 'B':  case 'C':
> case 'D':  case 'E':  case 'F':  case 'G':
> case 'H':  case 'I':  case 'J':  case 'K':
> case 'L':  case 'M':  case 'N':  case 'O':
> case 'P':  case 'Q':  case 'R':  case 'S':
> case 'T':  case 'U':  case 'V':  case 'W':
> case 'X':  case 'Y':  case 'Z':  case 'a':
> case 'b':  case 'c':  case 'd':  case 'e':
> case 'f':  case 'g':  case 'h':  case 'i':
> case 'j':  case 'k':  case 'l':  case 'm':
> case 'n':  case 'o':  case 'p':  case 'q':
> case 'r':  case 's':  case 't':  case 'u':
> case 'v':  case 'w':  case 'x':  case 'y':
> case 'z':
> {
>         mText(true);
>         theRetToken=_returnToken;
>         break;
> }
> 
> A better alternative which could also be easily generated from character
> classes using .. i. e. 'a'..'z' would be the following.
> 
> char c = LA(1);
> if( c=='\n' || c=='\r' || c==' '
>         || (c>='0' && c<='9')
>         || (c>='A' && c<='Z')
>         || (c>='a' && c<='z')
>         )
> {
>         mText(true);
>         theRetToken=_returnToken;
>         break;
> }
> 
> Greets,
> 
> Christian
> 
>


------------------------------

_______________________________________________
antlr-interest mailing list
antlr-interest@antlr.org
http://www.antlr.org/mailman/listinfo/antlr-interest


End of antlr-interest Digest, Vol 6, Issue 47
*********************************************

From parrt at cs.usfca.edu  Fri May 27 13:52:26 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Fri May 27 13:51:58 2005
Subject: [antlr-interest] Inefficiency in lexer
In-Reply-To: <20050527191939.6FE7CDCC21@www.antlr.org>
References: <20050527191939.6FE7CDCC21@www.antlr.org>
Message-ID: <DE30013A-0E92-4543-BB01-D2D19B877480@cs.usfca.edu>


On May 27, 2005, at 12:19 PM, ttest wrote:

> Hi again,
>
> I'm not sure if Java is really that smart. I would think that LA(1) is
> compared to every character one at a time which would be inefficient.
>
> What would the lookup table look like?
>
> I guess the key in the table would be the char returned by LA(1)  
> and what
> would the values be in that table? The memory location where execution
> continues?
>
> Then the lookup table would be 2^16*6=393216=390K bytes big which  
> would be
> pretty much.

Java VMs claim to do a binary search for sparse data and a look up  
table for contiguous data.  In this case, binary search is the best  
we can do with a switch.  Sometimes an IF is better.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From easjolly at ix.netcom.com  Sat May 28 08:18:37 2005
From: easjolly at ix.netcom.com (Susan Jolly)
Date: Sat May 28 08:18:41 2005
Subject: [antlr-interest] Parsers in different directories?
In-Reply-To: <20050525235753.5A196DCD7F@www.antlr.org>
Message-ID: <20050528151838.E0B10DCC39@www.antlr.org>

I am attempting to use the same large lexer with several different trial
parsers that each only handle a subset of the lexer tokens. I am using this
approach as a means of modularizing the parser development. I may also end
up using two pipelined parsers.

I'd really like to have these different parsers in different directories
(and different Java packages) from each other and from their common lexer.

Meanwhile there is common supporting code in another directory/package that
needs to implement what should be a common xParserTokenTypes interface. 

The problem is how to ensure consistency in the token vocabularies,
especially given that the supporting code makes use of the token types.

The solution I've found so far is to have an exportVocab SHARED option in
the lexer and to copy  SHAREDTokenTypes.txt to each of the directories where
a parser is located. Then I use importVocab  SHARED (but no exportVocab)
with each parser so that each of the XParserTokenTypes interfaces is
equivalent with respect to the assignments. I then pick one of these to be
used by the shared supporting code.  Is there a better way?

Thanks,
Susan



From ewbank at gmail.com  Sat May 28 10:21:19 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Sat May 28 10:21:22 2005
Subject: [antlr-interest] Parsers in different directories?
In-Reply-To: <20050528151838.E0B10DCC39@www.antlr.org>
References: <20050525235753.5A196DCD7F@www.antlr.org>
	<20050528151838.E0B10DCC39@www.antlr.org>
Message-ID: <dd3a065f05052810215112e29@mail.gmail.com>

I use the same technique; you can also compare the generated *.txt
files to make sure that a typo didn't introduce another token (been
there, done that).

So long as all *.txt files have the same content, any of them should work.

There is a disabled (commented out, I think) option to make ANTLR
generate a warning if new tokens are defined by the grammar, rather
than just using the imported set of tokens.  You should be able to
find it - I don't have the sources handy...

On 5/28/05, Susan Jolly <easjolly@ix.netcom.com> wrote:
> I am attempting to use the same large lexer with several different trial
> parsers that each only handle a subset of the lexer tokens. I am using this
> approach as a means of modularizing the parser development. I may also end
> up using two pipelined parsers.
> 
> I'd really like to have these different parsers in different directories
> (and different Java packages) from each other and from their common lexer.
> 
> Meanwhile there is common supporting code in another directory/package that
> needs to implement what should be a common xParserTokenTypes interface.
> 
> The problem is how to ensure consistency in the token vocabularies,
> especially given that the supporting code makes use of the token types.
> 
> The solution I've found so far is to have an exportVocab SHARED option in
> the lexer and to copy  SHAREDTokenTypes.txt to each of the directories where
> a parser is located. Then I use importVocab  SHARED (but no exportVocab)
> with each parser so that each of the XParserTokenTypes interfaces is
> equivalent with respect to the assignments. I then pick one of these to be
> used by the shared supporting code.  Is there a better way?
> 
> Thanks,
> Susan
From gbr at newtechlaw.com  Sat May 28 12:29:55 2005
From: gbr at newtechlaw.com (Gerald B. Rosenberg)
Date: Sat May 28 12:27:40 2005
Subject: [antlr-interest] Q re disambiguating tokens
Message-ID: <4.3.2.7.2.20050528120220.00ca95c0@morpho.newtechlaw.com>

Cannot seem to find the way of distinguishing lexer tokens defined by 
different strings.

Given a lexer spec:

options
{
     k = 10;
     filter = false;
}

ABBREV:
	( "rangle"
	| "langle"
	)
;

WORDS:
	( '\41'..'\377' )+
;

WS: -- standard definition -- ;


If the lexer input text stream contains the word 'ranges', I get a lexer 
exception of expecting 'l', found 'e'

If I set filter=true, I get a WORDS token containing only the string "s", 
which is the unconsumed part of the input stream.

My desired output is a WORDS token containing "ranges".

Is there a way to get the lexer to compare against entire token strings; 
that is, to do a look ahead on the input stream?

Thanks.
----
Gerald B. Rosenberg, Esq.
NewTechLaw
285 Hamilton Avenue, Suite 520
Palo Alto, CA  94301-2576

650.325.2100  (office)  /  650.703.1724  (cell)
650.325.2107  (fax)

www.newtechlaw.com


From parrt at cs.usfca.edu  Sat May 28 12:37:03 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sat May 28 12:36:35 2005
Subject: [antlr-interest] Q re disambiguating tokens
In-Reply-To: <4.3.2.7.2.20050528120220.00ca95c0@morpho.newtechlaw.com>
References: <4.3.2.7.2.20050528120220.00ca95c0@morpho.newtechlaw.com>
Message-ID: <0D7B2F3C-197C-45BF-9265-95FCC13FAB2F@cs.usfca.edu>


On May 28, 2005, at 12:29 PM, Gerald B. Rosenberg wrote:

> Cannot seem to find the way of distinguishing lexer tokens defined  
> by different strings.

Hi.  Wow a programmer attorney :)

The issue you have is that rangle is a literal.  Don't define a  
special rule for it.  You will have noted probably that ANTLR  
complained about ABBREV and WORDS being nondeterministic.

Regards,
Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From antlr at shmuelhome.mine.nu  Sun May 29 02:58:13 2005
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Sun May 29 02:58:53 2005
Subject: [antlr-interest] Why does this conflict?
In-Reply-To: <000001c56250$f161ee80$0500a8c0@nigel>
References: <000001c56250$f161ee80$0500a8c0@nigel>
Message-ID: <42999235.6090803@shmuelhome.mine.nu>

I thank you for calling attention to the difference between parser 
literals and lexer tokens. It is a nice way to eliminate many annoying 
non-determinism warnings when looking for both keywords and identifiers.

But there is a gotya which I was lucky enough to catch in one of my test 
cases. In my lexer, I strip the quotes from strings since I don't need 
them in my tree (and also don't want them in my output). Unfortunately 
that makes them candidates for reinterpretation.

Solution, override testLiteralsTable in the lexer
    public int testLiteralsTable(int ttype)
    {
        if (ttype == PreprocessorParserTokenTypes.STRING)
            return ttype;
        else
            return super.testLiteralsTable(ttype);
    }



-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.322 / Virus Database: 267.2.0 - Release Date: 5/27/2005

From mail at martin-probst.com  Sun May 29 08:07:27 2005
From: mail at martin-probst.com (Martin Probst)
Date: Sun May 29 08:07:35 2005
Subject: [antlr-interest] Why does this conflict?
In-Reply-To: <42999235.6090803@shmuelhome.mine.nu>
References: <000001c56250$f161ee80$0500a8c0@nigel>
	<42999235.6090803@shmuelhome.mine.nu>
Message-ID: <4299DAAF.1030709@martin-probst.com>

It's probably easier and cleaner to put
STRING {
   testLiterals=false;
}:
  ....

into the parser...

shmuel siegel wrote:
> I thank you for calling attention to the difference between parser 
> literals and lexer tokens. It is a nice way to eliminate many annoying 
> non-determinism warnings when looking for both keywords and identifiers.
> 
> But there is a gotya which I was lucky enough to catch in one of my test 
> cases. In my lexer, I strip the quotes from strings since I don't need 
> them in my tree (and also don't want them in my output). Unfortunately 
> that makes them candidates for reinterpretation.
> 
> Solution, override testLiteralsTable in the lexer
>    public int testLiteralsTable(int ttype)
>    {
>        if (ttype == PreprocessorParserTokenTypes.STRING)
>            return ttype;
>        else
>            return super.testLiteralsTable(ttype);
>    }
> 
> 
> 


From parrt at cs.usfca.edu  Sun May 29 12:45:53 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Sun May 29 12:45:24 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
Message-ID: <3F569E28-57F2-4148-AC58-A339CE19E9AC@cs.usfca.edu>

Howdy,

In the old days, public domain was the most generous license to use  
for software.  Oddly enough, now it's not good at all.  I think a  
large company with 3 letters in their name has emailed me like 4  
times from different groups asking if I have a certification from  
every contributor of patches over the last 15 years that they had the  
right to submit the patch and that they granted me a license etc...   
You get the picture.  Basically, nobody wants to use software anymore  
that could include stolen work etc...

Going forward, I must ask that people submit everything through the  
website, which will track everything and have a "contributor's  
license" agreement etc...  It just asks that you certify you created  
whatever you're sending in and give me license to do whatever I want  
with it.  Here is my tentative language (in the box at the bottom):

http://www.antlr.org/misc/feedback

Comments on the language and/or issues?

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From lloyd at nova-mind.com  Sun May 29 15:36:57 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Sun May 29 15:37:05 2005
Subject: [antlr-interest] GNU-C grammar problem/needed enhancement
	(anyonegot a fix?)
References: <039001c56180$f4036ae0$9800a8c0@gideone14f6c02><4294E6E3.5030502@codetransform.com><010d01c5627d$07e9bd00$9800a8c0@gideone14f6c02>
	<dd3a065f05052702354f33d677@mail.gmail.com>
Message-ID: <006101c5649e$ecd06d60$9800a8c0@gideone14f6c02>

I did something similar, I cull it iout during the lexing phase... (with 
Token.SKIP!!)

----- Original Message ----- 
From: "Bryan Ewbank" <ewbank@gmail.com>
To: "ANTLR Interest" <antlr-interest@antlr.org>
Sent: Friday, May 27, 2005 7:35 PM
Subject: Re: [antlr-interest] GNU-C grammar problem/needed enhancement 
(anyonegot a fix?)


To determine if it's __attribute__, can you add the following to simple.c:
   #define __attribute__(x) /* i.e., make it go away */
and get a clean parse?

On 5/27/05, Lloyd Dupont <lloyd@nova-mind.com> wrote:
> that would be nice if it could parse a precompiled <stdlib.h> (on windows
> with GCC).
>
> I have a very simple program like
> --- simple.c --
> #include <stdlib.h>
>
> main() { printf("done\n"); }
> --------------
> I precompile it with
> gcc -E simple.c > simple.p.c
>
> Then I try to run the cgram's test demo on it:
> java -classpath  $(CLASSPATH)  Test simple.p.c
>
> I get a huge number of error.
> fortunately I have the feeling it's all due only to incorrect 
> __attribute__
> parsing (not so easy as they could sprout almost everywhere).
>
> Does anyone have a version parsing a preprocessed stdlib? (or if not 
> tested,
> seemingly supporting __attribute__)
>
> 

From brianlsmith at gmail.com  Sun May 29 15:59:27 2005
From: brianlsmith at gmail.com (Brian Smith)
Date: Sun May 29 15:59:29 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <3F569E28-57F2-4148-AC58-A339CE19E9AC@cs.usfca.edu>
References: <3F569E28-57F2-4148-AC58-A339CE19E9AC@cs.usfca.edu>
Message-ID: <b0aab04e05052915595cd0512@mail.gmail.com>

I don't understand this part:

"You understand that Terence may not incorporate your submission into
the ANTLR project and you certify the following"

This part is saying that the contributor has the right to license this
to for a specific purpose (to relicense to others via the BSD
license), but he is instead going to license it to you under the
totally different license described in the second sentence (which he
has not promised that he has the right to do):

"I created this contribution in whole or in part and I have the right
to license it to Terence Parr, the primary author of the ANTLR
project, for release under the BSD license. I grant Terence Parr a
nonexclusive, irrevocable, royalty-free, worldwide license to
reproduce, distribute, prepare derivative works, and otherwise use
this contribution as part of the ANTLR project, associated
documentation, books, and tools at no cost to Terence Parr or to ANTLR
users."

I think that you should just remove the second sentence. Also, *which*
version of the BSD license are you referring to? I think it would be
better to include the license right there on the page, so the
contributor knows what he is agreeing to.

If clause three is really important then I recommend finding an
existing license with such an indemnity clause in it, and using that
license instead of BSD. If I use ANTLR in my projects, then are you
going to imdemnify me for any wrongdoing on your part? I doubt it. So,
why should I imdemnify you? This clause is scary enough that I would
probably never contribute any code using this form (because, if
nothing else, I don't have enough legal knowledge to know exactly what
I would be agreeing to here).

- Brian (contributor to ANTLR 2.7.x)



On 5/29/05, Terence Parr <parrt@cs.usfca.edu> wrote:
> Howdy,
> 
> In the old days, public domain was the most generous license to use
> for software.  Oddly enough, now it's not good at all.  I think a
> large company with 3 letters in their name has emailed me like 4
> times from different groups asking if I have a certification from
> every contributor of patches over the last 15 years that they had the
> right to submit the patch and that they granted me a license etc...
> You get the picture.  Basically, nobody wants to use software anymore
> that could include stolen work etc...
> 
> Going forward, I must ask that people submit everything through the
> website, which will track everything and have a "contributor's
> license" agreement etc...  It just asks that you certify you created
> whatever you're sending in and give me license to do whatever I want
> with it.  Here is my tentative language (in the box at the bottom):
> 
> http://www.antlr.org/misc/feedback
> 
> Comments on the language and/or issues?
> 
> Terence
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
> 
>
From lloyd at nova-mind.com  Sun May 29 20:47:23 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Sun May 29 20:47:32 2005
Subject: [antlr-interest] forest growing
Message-ID: <00f501c564ca$4ae32a20$9800a8c0@gideone14f6c02>

I want to make a custom tree but I have problem with the syntax.

my rue is something like:

objClassDef:
    name:ID (COLON! superclass:ID)? (LT! protocol1:ID (protocol2:COMMA! ID)* GT!)?
    (methodName SEMI!) *
    ;

I would like a tree looking like
#(OBJC_CLASS_DEF ID /*name*/ (ID /*superclass*/)? #(PROTOCOL (ID)+)? (methodName) *)

how do I do that?
thanks ;)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050530/0922b80a/attachment.html
From lloyd at nova-mind.com  Sun May 29 20:52:56 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Sun May 29 20:53:06 2005
Subject: [antlr-interest] forest growing
References: <00f501c564ca$4ae32a20$9800a8c0@gideone14f6c02>
Message-ID: <00fe01c564cb$116f9070$9800a8c0@gideone14f6c02>

well, I used a protected subrule for protocol and it worked......

  ----- Original Message ----- 
  From: Lloyd Dupont 
  To: antlr-interest@antlr.org 
  Sent: Monday, May 30, 2005 1:47 PM
  Subject: [antlr-interest] forest growing


  I want to make a custom tree but I have problem with the syntax.

  my rue is something like:

  objClassDef:
      name:ID (COLON! superclass:ID)? (LT! protocol1:ID (protocol2:COMMA! ID)* GT!)?
      (methodName SEMI!) *
      ;

  I would like a tree looking like
  #(OBJC_CLASS_DEF ID /*name*/ (ID /*superclass*/)? #(PROTOCOL (ID)+)? (methodName) *)

  how do I do that?
  thanks ;)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050530/ebe9ae8f/attachment.html
From lloyd at nova-mind.com  Sun May 29 21:08:33 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Sun May 29 21:08:41 2005
Subject: [antlr-interest] change a portion of a tree
Message-ID: <010801c564cd$3f5d0060$9800a8c0@gideone14f6c02>

here (in red) I tried to edit a portion of my tree, but that didn't work.. any idea?

objcClassDefinition
 : AT_INTERFACE! tName:ID
  (
           // 1st declaration
          (COLON! ID)? /* super class */
          (objcProtocolList)? /* protocols */
           // instance variable
          (
                LCURLY
                ( declaration ) *
                RCURLY
           )?
      |
           // or just a category 
           LPAREN! tCat:ID RPAREN!
           { #tCat = #( #[ObjcCATEGORY, "categorie"], #tCat); }
  )
  ( objcMethodName SEMI!  ) *
  AT_END!
  { ## = #( #[ObjcCLASS_DEF, "@interface"], ##); }
 ;
protected objcProtocolList
 : LT! ID (COMMA! ID) * GT!
  { ## = #( #[ObjcPROTOCOL, "@protocol"], ##); }
 ;

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050530/dd873e4d/attachment.html
From lloyd at nova-mind.com  Sun May 29 21:38:21 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Sun May 29 21:38:32 2005
Subject: [antlr-interest] change a portion of a tree (trying)
References: <010801c564cd$3f5d0060$9800a8c0@gideone14f6c02>
Message-ID: <013301c564d1$6998ef20$9800a8c0@gideone14f6c02>

objcClassDefinition
 : AT_INTERFACE! tName:ID
  (
           // 1st declaration
          (COLON! ID)? /* super class */
          (objcProtocolList)? /* protocols */
           // instance variable
          (
                LCURLY
                ( declaration ) *
                RCURLY
           )?
      |!
           // or just a category 
           cat:( LPAREN! tCat:ID RPAREN! )
           { 
                #cat = #( #[ObjcCATEGORY, "categorie"], #tCat ); 
                ##.addChild(#cat);
           }
  )
  ( objcMethodName SEMI!  ) *
  AT_END!
  { ## = #( #[ObjcCLASS_DEF, "@interface"], ##); }
 ;

but doesn't work exactly as intended...
I have a tree like
ObjcCLASS_DECLARATION
    + ID /* tName */
    + ID /* my cat name */
        + ObjcCategory
            + ID /* my cat name */

instead of
ObjcCLASS_DECLARATION
    + ID /* tName */
    + ObjcCategory
        + ID /* my cat name */


?? quite puzzling ...

----- Original Message ----- 
  From: Lloyd Dupont 
  To: antlr-interest@antlr.org 
  Sent: Monday, May 30, 2005 2:08 PM
  Subject: [antlr-interest] change a portion of a tree


  here (in red) I tried to edit a portion of my tree, but that didn't work.. any idea?

  objcClassDefinition
   : AT_INTERFACE! tName:ID
    (
             // 1st declaration
            (COLON! ID)? /* super class */
            (objcProtocolList)? /* protocols */
             // instance variable
            (
                  LCURLY
                  ( declaration ) *
                  RCURLY
             )?
        |
             // or just a category 
             LPAREN! tCat:ID RPAREN!
             { #tCat = #( #[ObjcCATEGORY, "categorie"], #tCat); }
    )
    ( objcMethodName SEMI!  ) *
    AT_END!
    { ## = #( #[ObjcCLASS_DEF, "@interface"], ##); }
   ;
  protected objcProtocolList
   : LT! ID (COMMA! ID) * GT!
    { ## = #( #[ObjcPROTOCOL, "@protocol"], ##); }
   ;

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050530/cc6d5b32/attachment-0001.html
From davmac at deakin.edu.au  Sun May 29 22:22:32 2005
From: davmac at deakin.edu.au (Davin McCall)
Date: Sun May 29 22:17:08 2005
Subject: [antlr-interest] change a portion of a tree (trying)
In-Reply-To: <013301c564d1$6998ef20$9800a8c0@gideone14f6c02>
References: <010801c564cd$3f5d0060$9800a8c0@gideone14f6c02>
	<013301c564d1$6998ef20$9800a8c0@gideone14f6c02>
Message-ID: <429AA318.3010701@deakin.edu.au>

Looks like you need to change the bluish part to:

           // or just a category
           cat:( LPAREN! tCat:ID RPAREN! )
           {
                ## = #( #[ObjcCATEGORY, "categorie"], #tCat );
           }

What you had:

                #cat = #( #[ObjcCATEGORY, "categorie"], #tCat );
                ##.addChild(#cat);

... first sets #cat to
    ObjCATEGORY
    + ID
... but ## is still ID, so "##.addChild(#cat)" then gives you:
    ID
    + ObjCATEGORY
       + ID

Hope this helps,

Davin



Lloyd Dupont wrote:

> objcClassDefinition
>  : AT_INTERFACE! tName:ID
>   (
>            // 1st declaration
>           (COLON! ID)? /* super class */
>           (objcProtocolList)? /* protocols */
>            // instance variable
>           (
>                 LCURLY
>                 ( declaration ) *
>                 RCURLY
>            )?
>       |!
>            // or just a category
>            cat:( LPAREN! tCat:ID RPAREN! )
>            {
>                 #cat = #( #[ObjcCATEGORY, "categorie"], #tCat );
>                 ##.addChild(#cat);
>            }
>   )
>   ( objcMethodName SEMI!  ) *
>   AT_END!
>   { ## = #( #[ObjcCLASS_DEF, "@interface"], ##); }
>  ;
> but doesn't work exactly as intended...
> I have a tree like
> ObjcCLASS_DECLARATION
>     + ID /* tName */
>     + ID /* my cat name */
>         + ObjcCategory
>             + ID /* my cat name */
>  
> instead of
> ObjcCLASS_DECLARATION
>     + ID /* tName */
>     + ObjcCategory
>         + ID /* my cat name */
>  
>  
> ?? quite puzzling ...
>  
> ----- Original Message -----
>
>     *From:* Lloyd Dupont <mailto:lloyd@nova-mind.com>
>     *To:* antlr-interest@antlr.org <mailto:antlr-interest@antlr.org>
>     *Sent:* Monday, May 30, 2005 2:08 PM
>     *Subject:* [antlr-interest] change a portion of a tree
>
>     here (in red) I tried to edit a portion of my tree, but that
>     didn't work.. any idea?
>      
>     objcClassDefinition
>      : AT_INTERFACE! tName:ID
>       (
>                // 1st declaration
>               (COLON! ID)? /* super class */
>               (objcProtocolList)? /* protocols */
>                // instance variable
>               (
>                     LCURLY
>                     ( declaration ) *
>                     RCURLY
>                )?
>           |
>                // or just a category
>                LPAREN! tCat:ID RPAREN!
>                { #tCat = #( #[ObjcCATEGORY, "categorie"], #tCat); }
>       )
>       ( objcMethodName SEMI!  ) *
>       AT_END!
>       { ## = #( #[ObjcCLASS_DEF, "@interface"], ##); }
>      ;
>     protected objcProtocolList
>      : LT! ID (COMMA! ID) * GT!
>       { ## = #( #[ObjcPROTOCOL, "@protocol"], ##); }
>      ;
>      
>


-- 
Davin McCall, Research Programmer
Deakin University, Burwood, Australia.
Phone: 03 9251 7045 International: +61 3 9251 7045
Email: Davin.McCall@deakin.edu.au
Website: http://www.deakin.edu.au
Deakin University CRICOS Provider Code 00113B (Vic)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050530/fbfe6baf/attachment.html
From lloyd at nova-mind.com  Sun May 29 22:37:21 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Sun May 29 22:37:32 2005
Subject: [antlr-interest] change a portion of a tree (trying)
References: <010801c564cd$3f5d0060$9800a8c0@gideone14f6c02>
	<013301c564d1$6998ef20$9800a8c0@gideone14f6c02>
	<429AA318.3010701@deakin.edu.au>
Message-ID: <015201c564d9$a7ad23f0$9800a8c0@gideone14f6c02>

thanks for that ;)
  ----- Original Message ----- 
  From: Davin McCall 
  To: Lloyd Dupont 
  Cc: antlr-interest@antlr.org 
  Sent: Monday, May 30, 2005 3:22 PM
  Subject: Re: [antlr-interest] change a portion of a tree (trying)


  Looks like you need to change the bluish part to:

             // or just a category 
             cat:( LPAREN! tCat:ID RPAREN! )
             { 
                  ## = #( #[ObjcCATEGORY, "categorie"], #tCat ); 
             }

  What you had:

                  #cat = #( #[ObjcCATEGORY, "categorie"], #tCat ); 
                  ##.addChild(#cat);

  ... first sets #cat to
      ObjCATEGORY
      + ID
  ... but ## is still ID, so "##.addChild(#cat)" then gives you:
      ID
      + ObjCATEGORY
         + ID

  Hope this helps,

  Davin



  Lloyd Dupont wrote: 
    objcClassDefinition
     : AT_INTERFACE! tName:ID
      (
               // 1st declaration
              (COLON! ID)? /* super class */
              (objcProtocolList)? /* protocols */
               // instance variable
              (
                    LCURLY
                    ( declaration ) *
                    RCURLY
               )?
          |!
               // or just a category 
               cat:( LPAREN! tCat:ID RPAREN! )
               { 
                    #cat = #( #[ObjcCATEGORY, "categorie"], #tCat ); 
                    ##.addChild(#cat);
               }
      )
      ( objcMethodName SEMI!  ) *
      AT_END!
      { ## = #( #[ObjcCLASS_DEF, "@interface"], ##); }
     ;

    but doesn't work exactly as intended...
    I have a tree like
    ObjcCLASS_DECLARATION
        + ID /* tName */
        + ID /* my cat name */
            + ObjcCategory
                + ID /* my cat name */

    instead of
    ObjcCLASS_DECLARATION
        + ID /* tName */
        + ObjcCategory
            + ID /* my cat name */


    ?? quite puzzling ...

    ----- Original Message ----- 
      From: Lloyd Dupont 
      To: antlr-interest@antlr.org 
      Sent: Monday, May 30, 2005 2:08 PM
      Subject: [antlr-interest] change a portion of a tree


      here (in red) I tried to edit a portion of my tree, but that didn't work.. any idea?

      objcClassDefinition
       : AT_INTERFACE! tName:ID
        (
                 // 1st declaration
                (COLON! ID)? /* super class */
                (objcProtocolList)? /* protocols */
                 // instance variable
                (
                      LCURLY
                      ( declaration ) *
                      RCURLY
                 )?
            |
                 // or just a category 
                 LPAREN! tCat:ID RPAREN!
                 { #tCat = #( #[ObjcCATEGORY, "categorie"], #tCat); }
        )
        ( objcMethodName SEMI!  ) *
        AT_END!
        { ## = #( #[ObjcCLASS_DEF, "@interface"], ##); }
       ;
      protected objcProtocolList
       : LT! ID (COMMA! ID) * GT!
        { ## = #( #[ObjcPROTOCOL, "@protocol"], ##); }
       ;





-- 
Davin McCall, Research Programmer
Deakin University, Burwood, Australia.
Phone: 03 9251 7045 International: +61 3 9251 7045
Email: Davin.McCall@deakin.edu.au
Website: http://www.deakin.edu.au
Deakin University CRICOS Provider Code 00113B (Vic)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050530/e0e98f95/attachment.html
From Loring.G.Craymer at jpl.nasa.gov  Sun May 29 23:20:42 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Sun May 29 23:20:44 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <3F569E28-57F2-4148-AC58-A339CE19E9AC@cs.usfca.edu>
Message-ID: <200505300620.j4U6Ke78008008@xmta1.jpl.nasa.gov>



> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Terence Parr
> Sent: Sunday, May 29, 2005 12:46 PM
> To: ANTLR Interest
> Subject: [antlr-interest] submission of patches, fixes, other
> contributions
> 
> Howdy,
> 
> In the old days, public domain was the most generous license to use
> for software.  Oddly enough, now it's not good at all.  I think a

Not odd at all.  Try doing a search on "public domain copyright law".  The
legal consensus is that works published after 1978 cannot be made public
domain before 70 years after the last author dies.
[<http://www.copyright.cornell.edu/training/Hirtle_Public_Domain.htm> puts
works between 1978 and 1989 as being transiently in the public domain (until
the author claims copyright), but that is the exception.]

> large company with 3 letters in their name has emailed me like 4
> times from different groups asking if I have a certification from
> every contributor of patches over the last 15 years that they had the
> right to submit the patch and that they granted me a license etc...
> You get the picture.  Basically, nobody wants to use software anymore
> that could include stolen work etc...

It isn't so much stolen work, I suspect, as it is work for which someone
could capriciously decide to sue because they changed their mind about "PD"
status.

> 
> Going forward, I must ask that people submit everything through the
> website, which will track everything and have a "contributor's
> license" agreement etc...  It just asks that you certify you created
> whatever you're sending in and give me license to do whatever I want
> with it.  Here is my tentative language (in the box at the bottom):
> 
> http://www.antlr.org/misc/feedback
> 
> Comments on the language and/or issues?

It doesn't explicitly mention copyright.  I expect the language should state
the the person agreeing is the copyright holder for the contribution.  Also,
talk to your legal people at USF.  You don't have "deep pockets", but USF
does, and you could be exposing the University to potential lawsuits for
employing you.  [Contribution author sues user; user sues USF.]  This is
very murky water; talk to a lawyer.  If the USF lawyers can't give you good
advice, try giving someone on the UCB law faculty a call.

--Loring

> 
> Terence
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com

From ric.klaren at gmail.com  Mon May 30 11:39:10 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Mon May 30 11:39:09 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <200505300620.j4U6Ke78008008@xmta1.jpl.nasa.gov>
References: <200505300620.j4U6Ke78008008@xmta1.jpl.nasa.gov>
Message-ID: <429B5DCE.8010905@gmail.com>

Loring Craymer wrote:
> Not odd at all.  Try doing a search on "public domain copyright law".  The
> legal consensus is that works published after 1978 cannot be made public
> domain before 70 years after the last author dies.

I guess that would push the release date for antlr3 a bit far back.

Ric
From oliver.zeigermann at gmail.com  Mon May 30 13:31:55 2005
From: oliver.zeigermann at gmail.com (Oliver Zeigermann)
Date: Mon May 30 13:31:59 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <F762DB06-79D1-4C3B-B1BE-3DF55BF27F22@cs.usfca.edu>
References: <3F569E28-57F2-4148-AC58-A339CE19E9AC@cs.usfca.edu>
	<9da4f45205052913252174fdfc@mail.gmail.com>
	<F762DB06-79D1-4C3B-B1BE-3DF55BF27F22@cs.usfca.edu>
Message-ID: <9da4f45205053013315935b150@mail.gmail.com>

On 5/30/05, Terence Parr <parrt@cs.usfca.edu> wrote:
> 
> On May 29, 2005, at 1:25 PM, Oliver Zeigermann wrote:
> 
> > This looks very good. As already indicated by the text, larger
> > contributions might be saver if they included something signed and
> > faxed.
> 
> Yeah.  I'm thinking of removing the (last) indemnification clause
> where they agree to hold me harmless.  There is very little chance of
> them copying code from somebody else to send me a patch as it's
> specific to my code and it seems to scare some people.  Do you think
> I need it?

I would keep it. There may be scenarios where someone actually has
written and submitted a patch, but it is owned by someone else (e.g.
his/her employer). In this case you shall not be liable for that.

Oliver
From parrt at cs.usfca.edu  Mon May 30 13:43:43 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon May 30 13:43:13 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <b0aab04e05052915595cd0512@mail.gmail.com>
References: <3F569E28-57F2-4148-AC58-A339CE19E9AC@cs.usfca.edu>
	<b0aab04e05052915595cd0512@mail.gmail.com>
Message-ID: <88C713D6-B4EB-48CE-8194-B67A054B0B99@cs.usfca.edu>


On May 29, 2005, at 3:59 PM, Brian Smith wrote:

> I don't understand this part:
>
> "You understand that Terence may not incorporate your submission into
> the ANTLR project and you certify the following"

Ooops...made it say "may or may not".

> This part is saying that the contributor has the right to license this
> to for a specific purpose (to relicense to others via the BSD
> license), but he is instead going to license it to you under the
> totally different license described in the second sentence (which he
> has not promised that he has the right to do):
>
> "I created this contribution in whole or in part and I have the right
> to license it to Terence Parr, the primary author of the ANTLR
> project, for release under the BSD license. I grant Terence Parr a
> nonexclusive, irrevocable, royalty-free, worldwide license to
> reproduce, distribute, prepare derivative works, and otherwise use
> this contribution as part of the ANTLR project, associated
> documentation, books, and tools at no cost to Terence Parr or to ANTLR
> users."
>
> I think that you should just remove the second sentence. Also, *which*

I have tweaked everything to say The ANTLR Project instead of me  
alone.  You must grant me the license so I have the power to release  
it I think though, right?

> version of the BSD license are you referring to? I think it would be

the "good"/new one ;)

> better to include the license right there on the page, so the
> contributor knows what he is agreeing to.

I'm trying to keep it as small as possible...  perhaps a link.  Ok,  
added.

> If clause three is really important then I recommend finding an
> existing license with such an indemnity clause in it, and using that
> license instead of BSD. If I use ANTLR in my projects, then are you
> going to imdemnify me for any wrongdoing on your part? I doubt it.

Many have asked but I've said no until now because I couldn't  
guarantee the chain of certified open-sourceness/rights.  For my  
part, I surely would give the indemnification.

> So,
> why should I imdemnify you?

Against your own stealing of software?  Seems an easy thing to agree  
to unless you plan on submitting something not yours, right? ;)

> This clause is scary enough that I would
> probably never contribute any code using this form (because, if
> nothing else, I don't have enough legal knowledge to know exactly what
> I would be agreeing to here).

I agree that it is scary.  I've become immune perhaps after signing  
so many contracts with that clause it in during my business days.

Per my other email, I'm looking into removing the clause.

Ter

--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Mon May 30 14:38:41 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon May 30 14:38:10 2005
Subject: [antlr-interest] antlr credits page
Message-ID: <57FD9412-986A-4755-A381-7D7F1D133F25@cs.usfca.edu>

Howdy,

In an effort to get more formal with the contributors and  
contributions, I'm also doing a credits page:

http://www.antlr.org/credits.html

I know I'm missing somebody important...ugh.  If I forgot you or  
somebody you know, please let me know.

Naturally, hundreds of contributions have come in over the years and  
i can't include each one by name; I'm trying to hit the major  
contributors here (for example, the ones that actively maintain code  
or have an active research relationship with the ANTLR Project).

Thanks,
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From Loring.G.Craymer at jpl.nasa.gov  Mon May 30 15:46:26 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Mon May 30 15:46:27 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <429B5DCE.8010905@gmail.com>
Message-ID: <200505302246.j4UMkOp4020685@xmta3.jpl.nasa.gov>

> -----Original Message-----

> From: Ric Klaren [mailto:ric.klaren@gmail.com]

> Sent: Monday, May 30, 2005 11:39 AM

> To: Loring Craymer

> Cc: 'Terence Parr'; 'ANTLR Interest'

> Subject: Re: [antlr-interest] submission of patches, fixes, other

> contributions

> 

> Loring Craymer wrote:

> > Not odd at all.  Try doing a search on "public domain copyright law".

> The

> > legal consensus is that works published after 1978 cannot be made public

> > domain before 70 years after the last author dies.

> 

> I guess that would push the release date for antlr3 a bit far back.

 

It could be worse--it's 120 years if you don't know when the body was buried
...

 

Cheers!

 

--Loring

 

> 

> Ric

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050530/6b27d509/attachment.html
From parrt at cs.usfca.edu  Mon May 30 16:10:40 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon May 30 16:10:11 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <200505302246.j4UMkOp4020685@xmta3.jpl.nasa.gov>
References: <200505302246.j4UMkOp4020685@xmta3.jpl.nasa.gov>
Message-ID: <42D22FDF-0E1C-412B-9CC9-A67F448C205A@cs.usfca.edu>


On May 30, 2005, at 3:46 PM, Loring Craymer wrote:
> > > legal consensus is that works published after 1978 cannot be  
> made public
>
> > > domain before 70 years after the last author dies.
>
> >
>
> > I guess that would push the release date for antlr3 a bit far back.
>
>
>
> It could be worse--it's 120 years if you don't know when the body  
> was buried ...

Reports of my early demise are greatly exaggerated ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From johnm-antlr at non.net  Mon May 30 17:43:29 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon May 30 17:43:11 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <88C713D6-B4EB-48CE-8194-B67A054B0B99@cs.usfca.edu>
References: <3F569E28-57F2-4148-AC58-A339CE19E9AC@cs.usfca.edu>
	<b0aab04e05052915595cd0512@mail.gmail.com>
	<88C713D6-B4EB-48CE-8194-B67A054B0B99@cs.usfca.edu>
Message-ID: <17051.45873.453057.626349@despot.non.net>

Here's an example from which to work:
http://www.netbeans.org/kb/faqs/jca.html


Also, as I've noted previously, the (revised) BSD license doesn't really
have the necessary and sufficient legal coverage anymore (especially
w.r.t. to the cantakerous and costly issues such as patents).  Check out
the "Academic Free License" (AFL):
http://opensource.org/licenses/afl-2.1.php

Given what you're asking contributors to agree to, the AFL matches that for
the license of the software itself.

Have fun,
	John
From lloyd at nova-mind.com  Mon May 30 17:52:51 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Mon May 30 17:53:02 2005
Subject: [antlr-interest] a few questions
Message-ID: <020f01c5657b$1312d030$9800a8c0@gideone14f6c02>

1st about lookahaed...
I have a big super grammar (the C grammar from ANTLR web site), which is uncorrectly implemented in some place 
So I thought of culling out unworking keyword (namely __attribute__ & __inline__)(as they don't bother me too much) with something like

class ObjectiveCLexer extends GnuCLexer;
ID:
    ("__attribute__") => SKIP_ATTRIBUTE { $setType(Token.SKIP); }
    | ( "__inline__") => "__inline__" { $setType(Token.SKIP); }
    | // classical ID code
    ;
protected SKIP_ATTRIBUTE
 : "__attribute__" (Whitespace)? LPAREN LPAREN ATTRIBUTE_PARAMS RPAREN RPAREN
 ;
protected  ATTRIBUTE_PARAMS
 : ( ~('(' | ')')
  | LPAREN SKIP_ATTRIBUTE RPAREN
  )*
 ;

It work's ok in most cases, excpet sometime I have ID like "__isacii" or "__inline__this_function_next" which confuse the lexer due to insuffisent lookahead.
I cannot override the symbol table (because it would require me to copy/paste all the class code, which I rather avoid), so I was thinking to put a lookahead of, let's say, 25 characters. what about that? any counter-indication?

2nd I have a problem with some unreservde keyword. something like that:
typeQualifier
        :       "const"
        |       "volatile"
        // -- ObjectiveC addition --
        |  protocolQualifier
        ;

protocolQualifier
  :  "in"
      |  "out"
      |  "inout"
      |  "bycopy"
      |  "byref"
      |  "oneway"
      ;

these protocolQualifiers are not reserved word! so they could be used as variable name, for example like that:
struct MyStruct
{
    int byref;
    int out;
}

and because they are not ID they break my parsing of MyStruct..... any ideas?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050531/7a3df1e9/attachment-0001.html
From scott at javadude.com  Mon May 30 17:55:16 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Mon May 30 17:55:31 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <88C713D6-B4EB-48CE-8194-B67A054B0B99@cs.usfca.edu>
Message-ID: <200505310149.j4V1mvPI020401@s2.eroute.net>

I'd recommend taking a peek at

http://eclipse.org/legal/index.html

CPL is pretty good, and they recently tweaked it to create the EPL. Issues
such as patent litigation are addressed, and is the main reason EPL was
created.

Lots of lawyers from big three-letter acronym companies were involved in
this one, and it's flexible enough to warrant a look...

Later,
- Scott


From lloyd at nova-mind.com  Mon May 30 17:56:53 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Mon May 30 17:57:02 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
References: <3F569E28-57F2-4148-AC58-A339CE19E9AC@cs.usfca.edu><b0aab04e05052915595cd0512@mail.gmail.com><88C713D6-B4EB-48CE-8194-B67A054B0B99@cs.usfca.edu>
	<17051.45873.453057.626349@despot.non.net>
Message-ID: <021e01c5657b$a380b0b0$9800a8c0@gideone14f6c02>

Is it important to have long licence document to make it valid?
isn't there any short, BSD style, valid licence?
what about this one:
http://opensource.org/licenses/zlib-license.php ?

----- Original Message ----- 
From: "John D. Mitchell" <johnm-antlr@non.net>
To: "ANTLR Interest" <antlr-interest@antlr.org>
Sent: Tuesday, May 31, 2005 10:43 AM
Subject: Re: [antlr-interest] submission of patches, fixes, other 
contributions


> Here's an example from which to work:
> http://www.netbeans.org/kb/faqs/jca.html
>
>
> Also, as I've noted previously, the (revised) BSD license doesn't really
> have the necessary and sufficient legal coverage anymore (especially
> w.r.t. to the cantakerous and costly issues such as patents).  Check out
> the "Academic Free License" (AFL):
> http://opensource.org/licenses/afl-2.1.php
>
> Given what you're asking contributors to agree to, the AFL matches that 
> for
> the license of the software itself.
>
> Have fun,
> John 

From scott at javadude.com  Mon May 30 18:14:31 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Mon May 30 18:14:53 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <021e01c5657b$a380b0b0$9800a8c0@gideone14f6c02>
Message-ID: <200505310208.j4V289PG030116@s2.eroute.net>

> Is it important to have long licence document to make it valid?

The name of the game is "Cover Thy Ass" 

-- Scott



From lloyd at nova-mind.com  Mon May 30 18:20:29 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Mon May 30 18:20:39 2005
Subject: [antlr-interest] question about ANTLR3.0
Message-ID: <023701c5657e$ef9b6370$9800a8c0@gideone14f6c02>

will it have improved grammar inheritance?

for example being able to declare method in a subgrammar, without needing to copy paste all super-grammar code?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050531/f71db825/attachment.html
From lloyd at nova-mind.com  Mon May 30 18:32:14 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Mon May 30 18:32:28 2005
Subject: [antlr-interest] [BUG] ANTLR-2.7.5 hang...
Message-ID: <024501c56580$93c86410$9800a8c0@gideone14f6c02>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: cgram.tgz
Type: application/octet-stream
Size: 30529 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050531/09506908/cgram-0001.obj
From parrt at cs.usfca.edu  Mon May 30 18:29:04 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Mon May 30 18:47:13 2005
Subject: [antlr-interest] question about ANTLR3.0
In-Reply-To: <023701c5657e$ef9b6370$9800a8c0@gideone14f6c02>
References: <023701c5657e$ef9b6370$9800a8c0@gideone14f6c02>
Message-ID: <5853B37B-EC7A-4D32-B6D5-671FEA7B75E6@cs.usfca.edu>


On May 30, 2005, at 6:20 PM, Lloyd Dupont wrote:

> will it have improved grammar inheritance?

It will not even have grammar inheritance...i feel it was a mistake  
except in a few cases.

> for example being able to declare method in a subgrammar, without  
> needing to copy paste all super-grammar code?

I will be creating another mechanism based upon RCS :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From lloyd at nova-mind.com  Mon May 30 18:55:36 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Mon May 30 18:55:45 2005
Subject: [antlr-interest] semantic predicate problem
Message-ID: <025701c56583$d71ab4e0$9800a8c0@gideone14f6c02>

I'm trying to resolve my problem with this ID which "could be" keyword, by doing a semantic predicate in a parser rule.
something like that:

someStruct
    : something (structWithContextualKeyword)? somethingElse

structWithContextualKeyword
    :    A_KEYWORD
    |    AN_OTHER_KEYWORD
    |    aSpecialId
    ;

aSpecialID
    :    {  isSpecialID(LT(1).getText()) } ?
            t:ID { t.setType(SPECIAL_ID); }
    ;

but this bring me plenty of parsing time error with a stack trace pointing to aSpecialID,
so I tried something like that:
aSpecialID
    :    { isSpecialID(LT(1).getText()) } ?
            t:ID { t.setType(SPECIAL_ID); }
        |
    ;

but this cause the program to hang (no output, no token consume, ..)
so...
any idea?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050531/3f6f065b/attachment.html
From jbb at acm.org  Mon May 30 19:18:47 2005
From: jbb at acm.org (John B. Brodie)
Date: Mon May 30 19:18:54 2005
Subject: [antlr-interest] question about ANTLR3.0
In-Reply-To: <5853B37B-EC7A-4D32-B6D5-671FEA7B75E6@cs.usfca.edu> (message from
	Terence Parr on Mon, 30 May 2005 18:29:04 -0700)
References: <023701c5657e$ef9b6370$9800a8c0@gideone14f6c02>
	<5853B37B-EC7A-4D32-B6D5-671FEA7B75E6@cs.usfca.edu>
Message-ID: <E1DcwL9-0002Xw-00@gecko>

Greetings!

Terence Parr replied, in part, to Lloyd Dupont:

Lloyd>> for example being able to declare method in a subgrammar, without  
Lloyd>> needing to copy paste all super-grammar code?

Ter> I will be creating another mechanism based upon RCS :)

and I ask about .....................................^^^

RCS is Revision Control System ... or ... ???
(sorry if this has already been discussed here)

Thanks
   -jbb
From gbr at newtechlaw.com  Mon May 30 19:34:01 2005
From: gbr at newtechlaw.com (Gerald B. Rosenberg)
Date: Mon May 30 19:35:26 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <021e01c5657b$a380b0b0$9800a8c0@gideone14f6c02>
References: <3F569E28-57F2-4148-AC58-A339CE19E9AC@cs.usfca.edu>
	<b0aab04e05052915595cd0512@mail.gmail.com>
	<88C713D6-B4EB-48CE-8194-B67A054B0B99@cs.usfca.edu>
	<17051.45873.453057.626349@despot.non.net>
Message-ID: <4.3.2.7.2.20050530181737.06f27bf0@morpho.newtechlaw.com>

Lots of good discussion.  There are, however, a number of issues that 
should not be glazed over too quickly:

First off, be aware that Terence's initial query specifically concerned an 
contributor's license agreement.  Licenses such as the BSD, AFL and EPL are 
structured for use by an entity like the Antlr Project to license out 
aggregated contributions.  The suggestion to consider the JCA is a good one.

Even if applicable, be aware that the BSD, AFL and EPL are really very 
different in the areas significant to Terence.  While short and neat, the 
BSD license leaves many issues completely un-addressed.

The AFL was purposefully designed to be comprehensive to the issues, but it 
purposefully puts the entire risk and liability of error on the 
licensor/distributor.  Given that it is a "free" license, the licensor is 
not collecting anything of economic value that could be used to cover this 
accumulated risk.  Under the AFL, even a threat of litigation would likely 
be sufficient, in a practical sense, to shutter an open source vendor.

Conversely, the EPL places the entire risk on the end user -- the people at 
the greatest distance and with the least knowledge and often the least 
ability to exercise recourse for anything wrongfully contributed.  As 
Terence has experienced, large(r) corporations particularly do not like 
these types of licenses (for software they are licensing in) due to the 
burden and uncertainty of even attempting to verify the original 
contributions.

The questions raised about the warrantee/indemnity clause have caused 
Terence to question keeping it.  The suggestion is that it is 
chilling.  Well, actually, I believe that is a good thing.  The great 
strength of the open source community are the contributors.  Not just in 
terms of the nature and quality of the software they produce, but also of 
their awareness of the larger business issues and willingness to discuss, 
evaluate, and educate others in them.

With free software, it is almost by definition impossible to balance 
economic risk.  Therefore, the one best place to prevent the contribution 
of legally encumbered code is at the very outset.  Anyone not savvy or 
experienced enough to understand the consequences of a particular 
contribution should be cautioned to raise the appropriate questions prior 
to making the contribution.  To that end, Terence's warrantee clause is 
appropriate.

(Yes, I am a lawyer.  No, this should not be taken as specific legal 
advise.  Yes, I am a user of Antlr.  No, I do not represent Antlr, etc.)

Best,
Gerald

----
Gerald B. Rosenberg, Esq.
NewTechLaw
285 Hamilton Avenue, Suite 520
Palo Alto, CA  94301-2576

650.325.2100  (office)  /  650.703.1724  (cell)
650.325.2107  (fax)

www.newtechlaw.com


From johnm-antlr at non.net  Mon May 30 19:40:58 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon May 30 19:40:46 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <021e01c5657b$a380b0b0$9800a8c0@gideone14f6c02>
References: <3F569E28-57F2-4148-AC58-A339CE19E9AC@cs.usfca.edu>
	<b0aab04e05052915595cd0512@mail.gmail.com>
	<88C713D6-B4EB-48CE-8194-B67A054B0B99@cs.usfca.edu>
	<17051.45873.453057.626349@despot.non.net>
	<021e01c5657b$a380b0b0$9800a8c0@gideone14f6c02>
Message-ID: <17051.52922.773268.161002@despot.non.net>

>>>>> "Lloyd" == Lloyd Dupont <lloyd@nova-mind.com> writes:
[...]

> Is it important to have long licence document to make it valid?  isn't
> there any short, BSD style, valid licence?  what about this one:
> http://opensource.org/licenses/zlib-license.php ?

Nope.  As with the BSD/MIT license, that doesn't cover any of the serious
intellectual property issues that are so contentious these days.

Take care,
	John
From lloyd at nova-mind.com  Mon May 30 19:43:55 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Mon May 30 19:44:07 2005
Subject: [antlr-interest] question about ANTLR3.0
References: <023701c5657e$ef9b6370$9800a8c0@gideone14f6c02><5853B37B-EC7A-4D32-B6D5-671FEA7B75E6@cs.usfca.edu>
	<E1DcwL9-0002Xw-00@gecko>
Message-ID: <029501c5658a$97870e30$9800a8c0@gideone14f6c02>

I think it's.. a pun, a joke and an answer!
the idea is probably: ok, no more inherited grammar but I wrote my grammar 
based on this other one.
what if the author of the original one make a change to its grammar I want 
to use as well?

I have to merger the changes...
=> RCS!

----- Original Message ----- 
From: "John B. Brodie" <jbb@acm.org>
To: <parrt@cs.usfca.edu>
Cc: <antlr-interest@antlr.org>
Sent: Tuesday, May 31, 2005 12:18 PM
Subject: Re: [antlr-interest] question about ANTLR3.0


> Greetings!
>
> Terence Parr replied, in part, to Lloyd Dupont:
>
> Lloyd>> for example being able to declare method in a subgrammar, without
> Lloyd>> needing to copy paste all super-grammar code?
>
> Ter> I will be creating another mechanism based upon RCS :)
>
> and I ask about .....................................^^^
>
> RCS is Revision Control System ... or ... ???
> (sorry if this has already been discussed here)
>
> Thanks
>   -jbb 

From Loring.G.Craymer at jpl.nasa.gov  Mon May 30 19:51:57 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Mon May 30 19:51:58 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <200505310208.j4V289PG030116@s2.eroute.net>
Message-ID: <200505310251.j4V2ps4s016739@xmta2.jpl.nasa.gov>

If lawsuits could not be used as an element of corporate warfare, length
would not matter.  As it is, one goal of an Open Source license is to make
lawsuits untenable, whether by secondary (and primary) developers against
users or by users against developers or by third parties (as in the SCO/IBM
case).  With lawyers involved, clauses get added to eliminate sources of
lawsuits (and it doesn't matter if the sources would be spurious or not:
lawsuits can tie up day-to-day operations of a business) and the license
grows.

 

For some perspective on how Open Source lawsuits can be used in corporate
warfare, see

http://informationweek.com/story/showArticle.jhtml?articleID=160902263

http://news.com.com/2010-1071_3-1020184.html

and other articles relating to the SCO/IBM Linux lawsuit.  Also, take a look
at

http://www.cioinsight.com/article2/0,1397,1779913,00.asp

for an example of copyright abuse in other arenas.

 

Fortunately, Open Source software usually benefits all parties involved so
lawsuits are uncommon.  Unfortunately, that also means that Open Source
licenses have not adequately been tested in court.

 

--Loring

 

> -----Original Message-----

> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-

> bounces@antlr.org] On Behalf Of Scott Stanchfield

> Sent: Monday, May 30, 2005 6:15 PM

> To: 'Lloyd Dupont'; 'John D. Mitchell'; 'ANTLR Interest'

> Subject: RE: [antlr-interest] submission of patches, fixes, other

> contributions

> 

> > Is it important to have long licence document to make it valid?

> 

> The name of the game is "Cover Thy Ass"

> 

> -- Scott

> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050530/4d0b020d/attachment.html
From johnm-antlr at non.net  Mon May 30 19:56:20 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon May 30 19:56:02 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <4.3.2.7.2.20050530181737.06f27bf0@morpho.newtechlaw.com>
References: <3F569E28-57F2-4148-AC58-A339CE19E9AC@cs.usfca.edu>
	<b0aab04e05052915595cd0512@mail.gmail.com>
	<88C713D6-B4EB-48CE-8194-B67A054B0B99@cs.usfca.edu>
	<17051.45873.453057.626349@despot.non.net>
	<4.3.2.7.2.20050530181737.06f27bf0@morpho.newtechlaw.com>
Message-ID: <17051.53844.670563.184246@despot.non.net>

>>>>> "Gerald" == Gerald B Rosenberg <gbr@newtechlaw.com> writes:
[...]

> The questions raised about the warrantee/indemnity clause have caused
> Terence to question keeping it.  The suggestion is that it is chilling.
> Well, actually, I believe that is a good thing.  The great strength of
> the open source community are the contributors.  Not just in terms of the
> nature and quality of the software they produce, but also of their
> awareness of the larger business issues and willingness to discuss,
> evaluate, and educate others in them.

Indeed.

I pointed out the AFL specifically because it matches the warranties asked
for by the draft contributor "license" that Ter posted.


> With free software, it is almost by definition impossible to balance
> economic risk.  Therefore, the one best place to prevent the contribution
> of legally encumbered code is at the very outset.  Anyone not savvy or
> experienced enough to understand the consequences of a particular
> contribution should be cautioned to raise the appropriate questions prior
> to making the contribution.  To that end, Terence's warrantee clause is
> appropriate.

I understand your contention but I must disagree.  It seems quite
hypocritical to require a level of warranty from contributors that is not
the same as what is given to the users.

Thanks,
	John
From gbr at newtechlaw.com  Mon May 30 21:41:31 2005
From: gbr at newtechlaw.com (Gerald B. Rosenberg)
Date: Mon May 30 21:45:23 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <17051.53844.670563.184246@despot.non.net>
References: <4.3.2.7.2.20050530181737.06f27bf0@morpho.newtechlaw.com>
	<3F569E28-57F2-4148-AC58-A339CE19E9AC@cs.usfca.edu>
	<b0aab04e05052915595cd0512@mail.gmail.com>
	<88C713D6-B4EB-48CE-8194-B67A054B0B99@cs.usfca.edu>
	<17051.45873.453057.626349@despot.non.net>
	<4.3.2.7.2.20050530181737.06f27bf0@morpho.newtechlaw.com>
Message-ID: <4.3.2.7.2.20050530202639.06f93bc8@morpho.newtechlaw.com>

At 07:56 PM 5/30/2005, you wrote:

>I understand your contention but I must disagree.  It seems quite
>hypocritical to require a level of warranty from contributors that is not
>the same as what is given to the users.

Just to be clear, it is not a question of sharing risk with the users.  It 
is properly a question of the personal responsibility and integrity of the 
*contributors* to protect the entire community -- themselves, the project 
and the users -- from the introduction of unnecessary risk.  The AFL merely 
stops the progression of risk assessment at the level of the project lead 
from reaching the users; the EPL instead tries to diffuse risk entirely to 
the users.  Neither really deals with reducing risk to begin with, i.e., 
addressing the contributors, which is what I understand to be Terence's issue.

Now to your point.  What I suggest is not hypocritical, but you are correct 
that the protections are asymmetric.  The free software market place is not 
zero sum gain, but zero sum.  Wish the economic model was different, but 
without monetization, there is no rational way to transfer risk in any 
direction.  In such situations, the only way to remain viable is to 
minimize as much as possible risk from the outset.

It is important to realize that, after almost 30 years, there have been 
very few actual or even attempted adjudications of these clauses.  Even so, 
the sensitivity of the community to the issue remains very high.  It is an 
emotional and often very personal issue.  I do not believe that any 
balancing of the interests in any direction will reduce that.  But, given 
the sensitivity, I believe it best for all concerned to be sensitive from 
the outset, and to work to that end as it tends to protect all.

As a practical matter, regardless of any technically legal asymmetry in the 
license wording (and to a certainty if the risk is equally shared), the 
contributor, the project and the community will all likely loose everything 
in defense of even a minimally credible legal challenge.

Best,
Gerald

----
Gerald B. Rosenberg, Esq.
NewTechLaw
285 Hamilton Avenue, Suite 520
Palo Alto, CA  94301-2576

650.325.2100  (office)  /  650.703.1724  (cell)
650.325.2107  (fax)

www.newtechlaw.com


From mail at martin-probst.com  Mon May 30 23:34:00 2005
From: mail at martin-probst.com (Martin Probst)
Date: Mon May 30 23:34:05 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <4.3.2.7.2.20050530202639.06f93bc8@morpho.newtechlaw.com>
References: <4.3.2.7.2.20050530181737.06f27bf0@morpho.newtechlaw.com>
	<3F569E28-57F2-4148-AC58-A339CE19E9AC@cs.usfca.edu>
	<b0aab04e05052915595cd0512@mail.gmail.com>
	<88C713D6-B4EB-48CE-8194-B67A054B0B99@cs.usfca.edu>
	<17051.45873.453057.626349@despot.non.net>
	<4.3.2.7.2.20050530181737.06f27bf0@morpho.newtechlaw.com>
	<4.3.2.7.2.20050530202639.06f93bc8@morpho.newtechlaw.com>
Message-ID: <1117521240.8932.3.camel@localhost.localdomain>

Hi,

> It is important to realize that, after almost 30 years, there have 
> been very few actual or even attempted adjudications of these
> clauses.

You probably know that, but just to mention: in Germany the GPL (and if
I'm not mistaken, the LGPL too) has been approved in court several times
now. Though the issue was always about some vendor not adhering the
"contribute back" part of the license. The court argued that even if
someone might come to the conclusion that the GPL is not valid wrt
German law, there would have been nothing that allowed the vendor to use
that source in the first place.

Regards,
Martin

From lloyd at nova-mind.com  Mon May 30 23:39:18 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Mon May 30 23:39:29 2005
Subject: [antlr-interest] semantic predicate
Message-ID: <031501c565ab$794e1320$9800a8c0@gideone14f6c02>

do they work?


normaly a rule (or subrule) like
rule: { false }? SOME_TOKEN;

should never be called!
unfortunately, if I added it I have plenty of error messages!

kind of puzzled...
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050531/def8c142/attachment.html
From demakov at ispras.ru  Mon May 30 23:57:50 2005
From: demakov at ispras.ru (Alexey Demakov)
Date: Mon May 30 23:57:54 2005
Subject: [antlr-interest] semantic predicate
References: <031501c565ab$794e1320$9800a8c0@gideone14f6c02>
Message-ID: <009101c565ae$0f61a6e0$8cc79553@marlboro>

No, rule will not be called when semantic predicate is in alternative
from where rule is called. Semantic predicate in rule have no effect
on call, but is additional state check.

So, rule will not be called in this situation:

another_rule:
     { false }? rule
   | ANOTHER_TOKEN
;

Try to look at ANTLR generated code.

Regards,
Alexey

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com


  ----- Original Message ----- 
  From: Lloyd Dupont 
  To: antlr-interest@antlr.org 
  Sent: Tuesday, May 31, 2005 10:39 AM
  Subject: [antlr-interest] semantic predicate


  do they work?


  normaly a rule (or subrule) like
  rule: { false }? SOME_TOKEN;

  should never be called!
  unfortunately, if I added it I have plenty of error messages!

  kind of puzzled...
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050531/61b59699/attachment.html
From gbr at newtechlaw.com  Tue May 31 00:02:41 2005
From: gbr at newtechlaw.com (Gerald B. Rosenberg)
Date: Mon May 30 23:59:30 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <1117521240.8932.3.camel@localhost.localdomain>
References: <4.3.2.7.2.20050530202639.06f93bc8@morpho.newtechlaw.com>
	<4.3.2.7.2.20050530181737.06f27bf0@morpho.newtechlaw.com>
	<3F569E28-57F2-4148-AC58-A339CE19E9AC@cs.usfca.edu>
	<b0aab04e05052915595cd0512@mail.gmail.com>
	<88C713D6-B4EB-48CE-8194-B67A054B0B99@cs.usfca.edu>
	<17051.45873.453057.626349@despot.non.net>
	<4.3.2.7.2.20050530181737.06f27bf0@morpho.newtechlaw.com>
	<4.3.2.7.2.20050530202639.06f93bc8@morpho.newtechlaw.com>
Message-ID: <4.3.2.7.2.20050530234325.06fd5510@morpho.newtechlaw.com>

At 08:34 AM 5/31/2005, Martin Probst wrote:

>Hi,
>
> > It is important to realize that, after almost 30 years, there have
> > been very few actual or even attempted adjudications of these
> > clauses.
>
>You probably know that, but just to mention: in Germany the GPL (and if
>I'm not mistaken, the LGPL too) has been approved in court several times
>now. Though the issue was always about some vendor not adhering the
>"contribute back" part of the license.

Several actions, but only one that I have heard of -- Dutch, I thought -- 
that has actually come to a judicial decision.

>The court argued that even if
>someone might come to the conclusion that the GPL is not valid wrt
>German law, there would have been nothing that allowed the vendor to use
>that source in the first place.

If I am not mistaken, you are referring to one of the preliminary motions 
-- interesting, but we will have to wait for something final.  And, of 
course you heard that many of our leading US Senators consider it 
high-treason for our Supreme Court justices to even read international 
court decisions.  Priceless ... (in the intellectually bankrupt sense).

Best,
Gerald
----
Gerald B. Rosenberg, Esq.
NewTechLaw
285 Hamilton Avenue, Suite 520
Palo Alto, CA  94301-2576

650.325.2100  (office)  /  650.703.1724  (cell)
650.325.2107  (fax)

www.newtechlaw.com


From Loring.G.Craymer at jpl.nasa.gov  Tue May 31 00:15:15 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Tue May 31 00:15:19 2005
Subject: [antlr-interest] semantic predicate
In-Reply-To: <009101c565ae$0f61a6e0$8cc79553@marlboro>
Message-ID: <200505310715.j4V7FFxo011151@xmta1.jpl.nasa.gov>

Yeah, semantic predicate hoisting is a sorely missed feature in ANTLR 2.
PCCTS worked the way Lloyd would like, and ANTLR 3 will as well.  It makes
keyword handling (especially when keywords are not reserved words) much
easier.

 

--Loring

 

  _____  

From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Alexey Demakov
Sent: Monday, May 30, 2005 11:58 PM
To: antlr-interest@antlr.org
Subject: Re: [antlr-interest] semantic predicate

 

No, rule will not be called when semantic predicate is in alternative

from where rule is called. Semantic predicate in rule have no effect

on call, but is additional state check.

 

So, rule will not be called in this situation:

 

another_rule:

     { false }? rule

   | ANOTHER_TOKEN

;

 

Try to look at ANTLR generated code.

 

Regards,
Alexey

 

-----
Alexey Demakov
TreeDL: Tree Description Language: http://treedl.sourceforge.net
RedVerst Group: http://www.unitesk.com

 

----- Original Message ----- 

From: Lloyd Dupont <mailto:lloyd@nova-mind.com>  

To: antlr-interest@antlr.org 

Sent: Tuesday, May 31, 2005 10:39 AM

Subject: [antlr-interest] semantic predicate

 

do they work?

 

 

normaly a rule (or subrule) like

rule: { false }? SOME_TOKEN;

 

should never be called!

unfortunately, if I added it I have plenty of error messages!

 

kind of puzzled...

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050531/15719e0c/attachment-0001.html
From ric.klaren at gmail.com  Tue May 31 04:17:41 2005
From: ric.klaren at gmail.com (Ric Klaren)
Date: Tue May 31 04:17:44 2005
Subject: [antlr-interest] a few questions
In-Reply-To: <020f01c5657b$1312d030$9800a8c0@gideone14f6c02>
References: <020f01c5657b$1312d030$9800a8c0@gideone14f6c02>
Message-ID: <bc607a4e05053104174d3dc639@mail.gmail.com>

On 5/31/05, Lloyd Dupont <lloyd@nova-mind.com> wrote:
> I have a big super grammar (the C grammar from ANTLR web site), which is
> uncorrectly implemented in some place 
> So I thought of culling out unworking keyword (namely __attribute__ &
> __inline__)(as they don't bother me too much) with something like 
>   
> class ObjectiveCLexer extends GnuCLexer; 
> ID: 
>     ("__attribute__") => SKIP_ATTRIBUTE { $setType(Token.SKIP); } 
>     | ( "__inline__") => "__inline__" { $setType(Token.SKIP); } 
>     | // classical ID code 
>     ; 

(don't have much antlr docs/code handy atm, I might have misremembered
a thing or two)

This is probably a bit friendlier than the big lookahead option:

ID:  // classical ID code 
       ....
     {
        if( $getText.equals("__attribute__") || .. )
            $setType(Token.SKIP);
     }
; 

If you have literal checking turned on for ID then you could also move
it into the testLiterals method by overriding that one.

> 2nd I have a problem with some unreservde keyword. something like that: 
> typeQualifier
>         :       "const"
>         |       "volatile" 
>         // -- ObjectiveC addition --
>         |  protocolQualifier
>         ; 
>   
> protocolQualifier
>   :  "in"
>       |  "out"
>       |  "inout"
>       |  "bycopy"
>       |  "byref"
>       |  "oneway"
>       ; 
>   
> these protocolQualifiers are not reserved word! so they could be used as
> variable name, for example like that: 
> struct MyStruct 
> { 
>     int byref; 
>     int out; 
> } 
>   
> and because they are not ID they break my parsing of MyStruct..... any
> ideas? 

Hard to say what's best. You might want to deal with 'const' etc. as
if they were ID's in the parser and deal there with them being
reserved/non reserved keywords (or only with the protocolQualifier).
Probably at the expense of some ambiguity. There's some stuff in the
archives about id/keyword problems.

Cheers,

Ric
From sk at z.pl  Tue May 31 07:47:34 2005
From: sk at z.pl (Sebastian Kaliszewski)
Date: Tue May 31 07:43:21 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
Message-ID: <429C7906.3020501@z.pl>

Terence Parr wrote:
 > Howdy,
 >
 > In the old days, public domain was the most generous license to use  for 
software.  Oddly enough, now it's not good at all.  I think a  large company 
with 3 letters in their name has emailed me like 4  times from different 
groups asking if I have a certification from  every contributor of patches 
over the last 15 years that they had the  right to submit the patch and that 
they granted me a license etc...   You get the picture.  Basically, nobody 
wants to use software anymore  that could include stolen work etc...
 >
 > Going forward, I must ask that people submit everything through the 
website, which will track everything and have a "contributor's  license" 
agreement etc...  It just asks that you certify you created  whatever you're 
sending in and give me license to do whatever I want  with it.  Here is my 
tentative language (in the box at the bottom):
 >
 > http://www.antlr.org/misc/feedback
 >
 > Comments on the language and/or issues?


Well, it seems still to be somewhat fragile. I think the clean & sure way 
would be something like:
I transfer the copyright of this submission to Terence Parr. This tranfer is 
effective immediately, it is permanent and irrevocable. I certify that I 
have the full legal right to do the aforementioned transfer, and I certify 
that my work does not violate any third party rights. I give Terence Parr 
the right to declare in any form, that I'm the contributor of the product 
according to product's licence (BSD licence). The aforementioned declaration 
mans puting my name (but tnothing more) in any published form of 
contributors list.


This last 2 sentences might be important in many juristiction (most of 
Europe, I think) where there are strong provacy protection laws.

rgds
-- 
Sebastian Kaliszewski
From johnm-antlr at non.net  Tue May 31 08:58:18 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Tue May 31 08:57:59 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <4.3.2.7.2.20050530202639.06f93bc8@morpho.newtechlaw.com>
References: <4.3.2.7.2.20050530181737.06f27bf0@morpho.newtechlaw.com>
	<3F569E28-57F2-4148-AC58-A339CE19E9AC@cs.usfca.edu>
	<b0aab04e05052915595cd0512@mail.gmail.com>
	<88C713D6-B4EB-48CE-8194-B67A054B0B99@cs.usfca.edu>
	<17051.45873.453057.626349@despot.non.net>
	<4.3.2.7.2.20050530202639.06f93bc8@morpho.newtechlaw.com>
Message-ID: <17052.35226.478767.667560@despot.non.net>

>>>>> "Gerald" == Gerald B Rosenberg <gbr@newtechlaw.com> writes:
[...]

> Now to your point.  What I suggest is not hypocritical, but you are
> correct that the protections are asymmetric.  The free software market
> place is not zero sum gain, but zero sum.  Wish the economic model was
> different, but without monetization, there is no rational way to transfer
> risk in any direction.  In such situations, the only way to remain viable
> is to minimize as much as possible risk from the outset.

It's both asymmetric and hypocritical.  One of the big points about the
intent of the F/OSS world is the removal of hypocrisy.  I.e. the point of
all of this is *more* than just the legal minimums.

[...]

> As a practical matter, regardless of any technically legal asymmetry in
> the license wording (and to a certainty if the risk is equally shared),
> the contributor, the project and the community will all likely loose
> everything in defense of even a minimally credible legal challenge.

Yes, indeed, transaction costs in the current legal climate are utterly
ridiculous.

As to the "likely to loose everything", that's still a very open question.

Take care,
	John
From ewbank at gmail.com  Tue May 31 10:37:14 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue May 31 10:37:37 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <17052.35226.478767.667560@despot.non.net>
References: <4.3.2.7.2.20050530181737.06f27bf0@morpho.newtechlaw.com>
	<3F569E28-57F2-4148-AC58-A339CE19E9AC@cs.usfca.edu>
	<b0aab04e05052915595cd0512@mail.gmail.com>
	<88C713D6-B4EB-48CE-8194-B67A054B0B99@cs.usfca.edu>
	<17051.45873.453057.626349@despot.non.net>
	<4.3.2.7.2.20050530202639.06f93bc8@morpho.newtechlaw.com>
	<17052.35226.478767.667560@despot.non.net>
Message-ID: <dd3a065f050531103767c853f2@mail.gmail.com>

I think this is the same topic; sorry if I misunderstood...

Some of us do software for a living, and we have signed something with
our employer saying "all my software belong to you" (more or less).

That means, using me as an example, that I cannot simply send a patch
to ANTLR; I have to get my employer to say it is "a good thing" to
contribute to ANTLR.

By saying Terence can blame me if my employer comes hunting for blood,
it gets him out of the middle.  He has a paper trail saying I told him
it was okay, so they can come hunting my head instead of Terence's.

Yes, there is F/OSS.  No, I can't blithely contribute to it - my
employer is paying for exclusive use.

On 5/31/05, John D. Mitchell <johnm-antlr@non.net> wrote:
> >>>>> "Gerald" == Gerald B Rosenberg <gbr@newtechlaw.com> writes:
> [...]
> 
> > Now to your point.  What I suggest is not hypocritical, but you are
> > correct that the protections are asymmetric.  The free software market
> > place is not zero sum gain, but zero sum.  Wish the economic model was
> > different, but without monetization, there is no rational way to transfer
> > risk in any direction.  In such situations, the only way to remain viable
> > is to minimize as much as possible risk from the outset.
> 
> It's both asymmetric and hypocritical.  One of the big points about the
> intent of the F/OSS world is the removal of hypocrisy.  I.e. the point of
> all of this is *more* than just the legal minimums.
From johnm-antlr at non.net  Tue May 31 10:48:40 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Tue May 31 10:48:22 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <dd3a065f050531103767c853f2@mail.gmail.com>
References: <4.3.2.7.2.20050530181737.06f27bf0@morpho.newtechlaw.com>
	<3F569E28-57F2-4148-AC58-A339CE19E9AC@cs.usfca.edu>
	<b0aab04e05052915595cd0512@mail.gmail.com>
	<88C713D6-B4EB-48CE-8194-B67A054B0B99@cs.usfca.edu>
	<17051.45873.453057.626349@despot.non.net>
	<4.3.2.7.2.20050530202639.06f93bc8@morpho.newtechlaw.com>
	<17052.35226.478767.667560@despot.non.net>
	<dd3a065f050531103767c853f2@mail.gmail.com>
Message-ID: <17052.41848.209054.963918@despot.non.net>

>>>>> "Bryan" == Bryan Ewbank <ewbank@gmail.com> writes:
[...]

> I think this is the same topic; sorry if I misunderstood...

It is.  It's two sides of the same roll of coins. :-)


> Some of us do software for a living, and we have signed something with
> our employer saying "all my software belong to you" (more or less).

Indeed.

> That means, using me as an example, that I cannot simply send a patch to
> ANTLR; I have to get my employer to say it is "a good thing" to
> contribute to ANTLR.

Yes.

> By saying Terence can blame me if my employer comes hunting for blood, it
> gets him out of the middle.  He has a paper trail saying I told him it
> was okay, so they can come hunting my head instead of Terence's.

Alas, if they want to, they can still come after Ter's head even with your
indemnification.

> Yes, there is F/OSS.  No, I can't blithely contribute to it - my employer
> is paying for exclusive use.

Bummer,
	John
From parrt at cs.usfca.edu  Tue May 31 11:29:42 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue May 31 11:29:41 2005
Subject: [antlr-interest] [BUG] ANTLR-2.7.5 hang...
In-Reply-To: <024501c56580$93c86410$9800a8c0@gideone14f6c02>
References: <024501c56580$93c86410$9800a8c0@gideone14f6c02>
Message-ID: <2F29D71F-AA17-47F7-86B8-B415F344610D@cs.usfca.edu>

Hi...I'm swamped at the moment trying to get 3.0 early-access out,  
but if you have large lookahead, ANTLR will take forever.  Try a  
syntactic predicate for the tough areas.  I'd stay with k=3 or  
something for large grammars.

Ter

On May 30, 2005, at 6:32 PM, Lloyd Dupont wrote:

> I have this simple (ahum) grammar which hang during  
> compilation..... I mean while creating antlr -glib ".."  
> ObjectiveCGrammar.g
>
> any idea?
> maybe I used a lookahead too big? (I'll try smaller ones..)
> <cgram.tgz>

--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Tue May 31 11:30:50 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue May 31 11:30:20 2005
Subject: [antlr-interest] a request about "reply-all" to list
Message-ID: <5DE52FD6-A8AD-4630-94BA-EE542BC6B7B4@cs.usfca.edu>

Hi,

I get duplicates of every email people send in response to my posts  
because they leave it as replying to me and the list.  Please take  
the 2 seconds to mail to a single address: the list.  I have enough  
trouble looking through all the email as it is. ;)

Thanks!
Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Tue May 31 11:31:30 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue May 31 11:30:58 2005
Subject: [antlr-interest] question about ANTLR3.0
In-Reply-To: <E1DcwL9-0002Xw-00@gecko>
References: <023701c5657e$ef9b6370$9800a8c0@gideone14f6c02>
	<5853B37B-EC7A-4D32-B6D5-671FEA7B75E6@cs.usfca.edu>
	<E1DcwL9-0002Xw-00@gecko>
Message-ID: <F8F7B894-726C-42B8-BFD9-19A054F5D7A1@cs.usfca.edu>


On May 30, 2005, at 7:18 PM, John B. Brodie wrote:

> Greetings!
>
> Terence Parr replied, in part, to Lloyd Dupont:
>
> Lloyd>> for example being able to declare method in a subgrammar,  
> without
> Lloyd>> needing to copy paste all super-grammar code?
>
> Ter> I will be creating another mechanism based upon RCS :)
>
> and I ask about .....................................^^^
>
> RCS is Revision Control System ... or ... ???
> (sorry if this has already been discussed here)

Yep, a glorified RCS mechanism, which formalizes what programmers due  
by hand naturally. :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Tue May 31 11:32:12 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue May 31 11:31:43 2005
Subject: [antlr-interest] question about ANTLR3.0
In-Reply-To: <029501c5658a$97870e30$9800a8c0@gideone14f6c02>
References: <023701c5657e$ef9b6370$9800a8c0@gideone14f6c02><5853B37B-EC7A-4D32-B6D5-671FEA7B75E6@cs.usfca.edu>
	<E1DcwL9-0002Xw-00@gecko>
	<029501c5658a$97870e30$9800a8c0@gideone14f6c02>
Message-ID: <A8253D10-D284-4072-8260-F396AA876423@cs.usfca.edu>


On May 30, 2005, at 7:43 PM, Lloyd Dupont wrote:

> I think it's.. a pun, a joke and an answer!
> the idea is probably: ok, no more inherited grammar but I wrote my  
> grammar based on this other one.
> what if the author of the original one make a change to its grammar  
> I want to use as well?
>
> I have to merger the changes...
> => RCS!

At it's most basic level, yes, this is the idea.

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From hammett at uol.com.br  Tue May 31 11:33:58 2005
From: hammett at uol.com.br (hammett)
Date: Tue May 31 11:34:10 2005
Subject: [antlr-interest] a request about "reply-all" to list
References: <5DE52FD6-A8AD-4630-94BA-EE542BC6B7B4@cs.usfca.edu>
Message-ID: <006201c5660f$4ed60a80$0200000a@powermachine>

Hi there,

Can't you configure the list to always use "Reply to: list" ?
It would save us the aggravation of changing the to: field or hitting reply 
to all :-D


-- 
Cheers,
hammett
http://www.castleproject.org/~hammett

----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: "ANTLR Interest" <antlr-interest@antlr.org>
Sent: Tuesday, May 31, 2005 3:30 PM
Subject: [antlr-interest] a request about "reply-all" to list


> Hi,
>
> I get duplicates of every email people send in response to my posts 
> because they leave it as replying to me and the list.  Please take  the 2 
> seconds to mail to a single address: the list.  I have enough  trouble 
> looking through all the email as it is. ;)
>
> Thanks!
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
>
> 


From Loring.G.Craymer at jpl.nasa.gov  Tue May 31 11:46:40 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Tue May 31 11:46:43 2005
Subject: [antlr-interest] a request about "reply-all" to list
In-Reply-To: <5DE52FD6-A8AD-4630-94BA-EE542BC6B7B4@cs.usfca.edu>
Message-ID: <200505311846.j4VIkeRg028943@xmta3.jpl.nasa.gov>

Ter--

I find that very irritating myself, but consider that a design flaw that
should be fixed at the source--the mail list handler--and not by those of us
using the system.  This has been a source of recurring discussions on the
mailing list, with IIRC Mitchell arguing for the current mode as "proper
etiquette".

I see this as one of those cases where "civil disobedience" is
appropriate--you should fix the problem, not us.  In fact, the dual messages
may be a plus until that happens--it keeps the aggravation level high enough
that the problem might get fixed!

--Loring

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Terence Parr
> Sent: Tuesday, May 31, 2005 11:31 AM
> To: ANTLR Interest
> Subject: [antlr-interest] a request about "reply-all" to list
> 
> Hi,
> 
> I get duplicates of every email people send in response to my posts
> because they leave it as replying to me and the list.  Please take
> the 2 seconds to mail to a single address: the list.  I have enough
> trouble looking through all the email as it is. ;)
> 
> Thanks!
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com

From parrt at cs.usfca.edu  Tue May 31 12:09:39 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue May 31 12:09:08 2005
Subject: [antlr-interest] a request about "reply-all" to list
In-Reply-To: <006201c5660f$4ed60a80$0200000a@powermachine>
References: <5DE52FD6-A8AD-4630-94BA-EE542BC6B7B4@cs.usfca.edu>
	<006201c5660f$4ed60a80$0200000a@powermachine>
Message-ID: <E595FF8E-ACA7-4636-872D-0CB87DB69C8B@cs.usfca.edu>


On May 31, 2005, at 11:33 AM, hammett wrote:

> Hi there,
>
> Can't you configure the list to always use "Reply to: list" ?
> It would save us the aggravation of changing the to: field or  
> hitting reply to all :-D

Hi. :)
This was ad nauseum when we set up the list.  We can't set the list  
as the reply to...all sorts of headaches.  The entire email  
infrastructure is hosed as we all know from just SPAM  
considerations.  I can't fix the world and so I can't set the email  
list to "do the right thing".  Hence, I must ask people to remove the  
extra email address manually.

Terence
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From griffon26 at kfk4ever.com  Tue May 31 13:40:11 2005
From: griffon26 at kfk4ever.com (Maurice van der Pot)
Date: Tue May 31 13:41:22 2005
Subject: [antlr-interest] a request about "reply-all" to list
In-Reply-To: <200505311846.j4VIkeRg028943@xmta3.jpl.nasa.gov>
References: <5DE52FD6-A8AD-4630-94BA-EE542BC6B7B4@cs.usfca.edu>
	<200505311846.j4VIkeRg028943@xmta3.jpl.nasa.gov>
Message-ID: <20050531204011.GI8632@kfk4ever.com>

On Tue, May 31, 2005 at 11:46:40AM -0700, Loring Craymer wrote:
> I find that very irritating myself, but consider that a design flaw that
> should be fixed at the source--the mail list handler--and not by those of us
> using the system.  This has been a source of recurring discussions on the
> mailing list, with IIRC Mitchell arguing for the current mode as "proper
> etiquette".

If Mitchell or whoever already was arguing for this, he probably would
have mentioned http://www.unicom.com/pw/reply-to-harmful.html. Just in
case he didn't, please read it.

> I see this as one of those cases where "civil disobedience" is
> appropriate--you should fix the problem, not us.  In fact, the dual messages
> may be a plus until that happens--it keeps the aggravation level high enough
> that the problem might get fixed!

Maybe you should be blaming your mail client instead. The client I'm
using allows me to define lists I am subscribed to and has 3 options for
replying: reply (to author only, which should be the reply-to), list
reply (to the list address that I defined) and group reply (to all
recipients).

And while we're talking about things that irritate, I find top-posting
and quoting entire messages without using them as context to be quite 
annoying as well.

Regards,
Maurice.

-- 
Maurice van der Pot

Gentoo Linux Developer   griffon26@gentoo.org     http://www.gentoo.org
Creator of BiteMe!       griffon26@kfk4ever.com   http://www.kfk4ever.com

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20050531/11ed33ca/attachment.bin
From Loring.G.Craymer at jpl.nasa.gov  Tue May 31 14:35:15 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Tue May 31 14:35:21 2005
Subject: [antlr-interest] a request about "reply-all" to list
In-Reply-To: <20050531204011.GI8632@kfk4ever.com>
Message-ID: <200505312135.j4VLZFPF030473@xmta1.jpl.nasa.gov>



> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Maurice van der Pot
> Sent: Tuesday, May 31, 2005 1:40 PM
> To: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] a request about "reply-all" to list
> 
> On Tue, May 31, 2005 at 11:46:40AM -0700, Loring Craymer wrote:
> > I find that very irritating myself, but consider that a design flaw that
> > should be fixed at the source--the mail list handler--and not by those
> of us
> > using the system.  This has been a source of recurring discussions on
> the
> > mailing list, with IIRC Mitchell arguing for the current mode as "proper
> > etiquette".
> 
> If Mitchell or whoever already was arguing for this, he probably would
> have mentioned http://www.unicom.com/pw/reply-to-harmful.html. Just in
> case he didn't, please read it.

I've read it; the technical arguments are weak, largely because this is a
user-interface issue and the author ignores that. It presupposes a very
different view of mailing lists--that "reply to sender" is common
usage--that does not apply here.  [I do belong to lists for which the
argument could apply--those are typically small lists which are only
transiently used.]  The failure mode for this list is not to broadcast
personal email, but to reply to the sender instead of the group.

> 
> > I see this as one of those cases where "civil disobedience" is
> > appropriate--you should fix the problem, not us.  In fact, the dual
> messages
> > may be a plus until that happens--it keeps the aggravation level high
> enough
> > that the problem might get fixed!
> 
> Maybe you should be blaming your mail client instead. The client I'm
> using allows me to define lists I am subscribed to and has 3 options for
> replying: reply (to author only, which should be the reply-to), list
> reply (to the list address that I defined) and group reply (to all
> recipients).

Let's see, now:  "There is a design defect in the core software package
which we do not intend to fix and which causes us problems as well as the
user community.  All users should work around this so that we do not suffer
from our own mistakes".  Do you really find that a compelling argument?

> And while we're talking about things that irritate, I find top-posting
> and quoting entire messages without using them as context to be quite
> annoying as well.

Sorry about that:  I started worrying less about cutting messages when the
incidence of off-the-wall replies and misattributions went way up on this
list.

--Loring

> 
> Regards,
> Maurice.
> 
> --
> Maurice van der Pot
> 
> Gentoo Linux Developer   griffon26@gentoo.org     http://www.gentoo.org
> Creator of BiteMe!       griffon26@kfk4ever.com   http://www.kfk4ever.com


From Loring.G.Craymer at jpl.nasa.gov  Tue May 31 14:56:11 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Tue May 31 14:56:15 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <dd3a065f050531103767c853f2@mail.gmail.com>
Message-ID: <200505312156.j4VLuBWi008965@xmta3.jpl.nasa.gov>

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Bryan Ewbank
> Sent: Tuesday, May 31, 2005 10:37 AM
> To: ANTLR Interest
> Subject: Re: [antlr-interest] submission of patches, fixes, other
> contributions
> 
> I think this is the same topic; sorry if I misunderstood...

No, you're right on target.

> 
> Some of us do software for a living, and we have signed something with
> our employer saying "all my software belong to you" (more or less).

Usually it's not quite that bad; it's "all my software developed on company
time".

> 
> That means, using me as an example, that I cannot simply send a patch
> to ANTLR; I have to get my employer to say it is "a good thing" to
> contribute to ANTLR.

And if your employer is like mine, that contribution cannot be just "given
away", it must be licensed intellectual property.

> 
> By saying Terence can blame me if my employer comes hunting for blood,
> it gets him out of the middle.  He has a paper trail saying I told him
> it was okay, so they can come hunting my head instead of Terence's.

Or someone else can go after your company, as with SCO and IBM.

> 
> Yes, there is F/OSS.  No, I can't blithely contribute to it - my
> employer is paying for exclusive use.

Yes, and Open Source contributions are usually acceptable where "public
domain" is not--intellectual property has become a sensitive issue.  I think
that Gerald's comments have been good advice, and I'm sure that the IP legal
business is booming.

If ANTLR 2 had been released under a formal Open Source license, I could
have released 2.8 under that.  Without one, and with current copyright law,
I could not.

> 
> On 5/31/05, John D. Mitchell <johnm-antlr@non.net> wrote:
> > >>>>> "Gerald" == Gerald B Rosenberg <gbr@newtechlaw.com> writes:
> > [...]
> >
> > > Now to your point.  What I suggest is not hypocritical, but you are
> > > correct that the protections are asymmetric.  The free software market
> > > place is not zero sum gain, but zero sum.  Wish the economic model was
> > > different, but without monetization, there is no rational way to
> transfer
> > > risk in any direction.  In such situations, the only way to remain
> viable
> > > is to minimize as much as possible risk from the outset.
> >
> > It's both asymmetric and hypocritical.  One of the big points about the
> > intent of the F/OSS world is the removal of hypocrisy.  I.e. the point
> of
> > all of this is *more* than just the legal minimums.

[And up one level in the discussion:]  I am uncertain as to whether there is
real asymmetry or not and certainly have no clue as to what the "legal
minimums" are--they have yet to be determined through court cases.  "Thou
shalt not sue for software failures" seems to me to be a pretty stringent
restriction on the user (but "don't leave home without it").  "Thou shalt
not wittingly enable a lawsuit" seems a fair restriction on contributors.

--Loring

From hwk at cortex-brainware.de  Tue May 31 14:56:52 2005
From: hwk at cortex-brainware.de (Dr. Hartmut Kocher)
Date: Tue May 31 14:57:19 2005
Subject: [antlr-interest] C# Bug in CharScanner
Message-ID: <1DdEjV-0s9X9s0@fwd24.sul.t-online.de>

I think I found a bug in the C# CharScanner:

 

The rewind() method does not take into account the case insensitive flag.
Therefore, if the scanner is rewound after a wrong prediction, it throws an
exception if the case of a case insensitive token does not match.

 

I think the correct implementation should be:

 

          public virtual void  rewind(int pos)

          {

                inputState.input.rewind(pos);

                //setColumn(inputState.tokenStartColumn);

                if (caseSensitive)

                {

                     cached_LA2 = inputState.input.LA(2);

                     cached_LA1 = inputState.input.LA(1);

                }

                else

                {

                     cached_LA2 = toLower(inputState.input.LA(2));

                     cached_LA1 = toLower(inputState.input.LA(1));

                }

          }

 

Kind regards

 

Dr. Hartmut Kocher

Cortex Brainware GmbH

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050531/aa344817/attachment.html
From brianlsmith at gmail.com  Tue May 31 15:06:58 2005
From: brianlsmith at gmail.com (Brian Smith)
Date: Tue May 31 15:07:01 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <200505312156.j4VLuBWi008965@xmta3.jpl.nasa.gov>
References: <dd3a065f050531103767c853f2@mail.gmail.com>
	<200505312156.j4VLuBWi008965@xmta3.jpl.nasa.gov>
Message-ID: <b0aab04e0505311506661e1b68@mail.gmail.com>

On 5/31/05, Loring Craymer <Loring.G.Craymer@jpl.nasa.gov> wrote:
> "Thou shalt not wittingly enable a lawsuit" seems a fair
> restriction on contributors.

I agree, but the proposed terms are much more strict than that. The
proposed terms state that a contributor has to pay for all defense
costs in all lawsuits, whether or not they knowingly created that
situation, and even whether or not the lawsuit has any basis or not.
From Loring.G.Craymer at jpl.nasa.gov  Tue May 31 15:19:30 2005
From: Loring.G.Craymer at jpl.nasa.gov (Loring Craymer)
Date: Tue May 31 15:19:33 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <b0aab04e0505311506661e1b68@mail.gmail.com>
Message-ID: <200505312219.j4VMJVDI016041@xmta1.jpl.nasa.gov>

Brian--

That's true, but I interpret that phrasing as for intimidation purposes only
since Ter did not insist on a signed document--there is no paper trail.
Now, if that clause were contractually binding, it would be a different
story.  In any case, I expect that to disappear after Ter talks to the USF
lawyers.

--Loring

> -----Original Message-----
> From: antlr-interest-bounces@antlr.org [mailto:antlr-interest-
> bounces@antlr.org] On Behalf Of Brian Smith
> Sent: Tuesday, May 31, 2005 3:07 PM
> To: antlr-interest@antlr.org
> Subject: Re: [antlr-interest] submission of patches, fixes, other
> contributions
> 
> On 5/31/05, Loring Craymer <Loring.G.Craymer@jpl.nasa.gov> wrote:
> > "Thou shalt not wittingly enable a lawsuit" seems a fair
> > restriction on contributors.
> 
> I agree, but the proposed terms are much more strict than that. The
> proposed terms state that a contributor has to pay for all defense
> costs in all lawsuits, whether or not they knowingly created that
> situation, and even whether or not the lawsuit has any basis or not.

From johnm-antlr at non.net  Tue May 31 15:49:33 2005
From: johnm-antlr at non.net (John D. Mitchell)
Date: Tue May 31 15:49:14 2005
Subject: [antlr-interest] a request about "reply-all" to list
In-Reply-To: <200505312135.j4VLZFPF030473@xmta1.jpl.nasa.gov>
References: <20050531204011.GI8632@kfk4ever.com>
	<200505312135.j4VLZFPF030473@xmta1.jpl.nasa.gov>
Message-ID: <17052.59901.551035.925938@despot.non.net>

>>>>> "Loring" == Loring Craymer <Loring.G.Craymer@jpl.nasa.gov> writes:
[...]

>> If Mitchell or whoever already was arguing for this, he probably would
>> have mentioned http://www.unicom.com/pw/reply-to-harmful.html. Just in
>> case he didn't, please read it.

> I've read it; the technical arguments are weak, largely because this is a
> user-interface issue and the author ignores that. It presupposes a very
> different view of mailing lists--that "reply to sender" is common
> usage--that does not apply here.  [I do belong to lists for which the
> argument could apply--those are typically small lists which are only
> transiently used.]  The failure mode for this list is not to broadcast
> personal email, but to reply to the sender instead of the group.

Google "mail-followup-to".

Almost everybody thinks that their holier-than-thou position is better than
the other.  Alas, this problem, like the hackery and problems caused by
mucking around with the fact that hard-tabs == 8 spaces, is so baked-in to
so many difference pieces of software that there is no real solution that
doesn't involve switching to a different header.

Sigh,
	John

P.S.	Ter: You might try running an email duplicate detector.
From gbr at newtechlaw.com  Tue May 31 15:44:08 2005
From: gbr at newtechlaw.com (Gerald B. Rosenberg)
Date: Tue May 31 15:53:15 2005
Subject: [antlr-interest] Summary/Cheat Sheet?
Message-ID: <4.3.2.7.2.20050531153354.0b5cfef8@pop3.newtechlaw.com>


Found this all-to-brief syntax summary in an old non-Antlr mailing 
list.  Anyone have something similar that is more complete?  In particular, 
including summary descriptions of the LT, LA, $, #, ##, n:TOKEN (variable 
reference) constructs.

Have not seen it in the Antlr.org documentation, but think that it would be 
a good addition.

Thanks,
Gerald


===================================================
ANTLR grammars are written in a kind of EBNF, which makes them very
readable:

rule
         :       TOKEN
         |       nonterminal
         |       (optional)?
         |       (zero_or_more)*
         |       (one_or_more)?
         ;

syntactic_predicates                    // finite lookahead, back-tracking
         :       (A A b) => A A b
         |       (A)* b
         ;

semantic_predicates
         :       { conditional_code; } => rule
         |       { conditional_code; } => rule
         |       foo
         ;

automatic Abstract Syntax Tree generation with grammar annotations (^):

mult_expr
         :       add_expr ((STAR^ | SLASH^) add_expr)
         ;

add_expr
         :       atom ((PLUS^ | MINUS^) atom)
         ;

----
Gerald B. Rosenberg, Esq.
NewTechLaw
285 Hamilton Avenue, Suite 520
Palo Alto, CA  94301-2576

650.325.2100  (office)  /  650.703.1724  (cell)
650.325.2107  (facsimile)

www.newtechlaw.com


CONFIDENTIALITY NOTICE:  This email message (including any attachments) is 
being sent by an attorney, is for the sole use of the intended recipient, 
and may contain confidential and privileged information.  Any unauthorized 
review, use, disclosure or distribution is prohibited.  If you are not the 
intended recipient, please contact the sender immediately by reply e-mail 
and delete all copies of this message and any attachments without retaining 
a copy. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050531/51e98501/attachment.html
From lloyd at nova-mind.com  Tue May 31 16:14:38 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Tue May 31 16:15:04 2005
Subject: [antlr-interest] Summary/Cheat Sheet?
References: <4.3.2.7.2.20050531153354.0b5cfef8@pop3.newtechlaw.com>
Message-ID: <039001c56636$8543b000$9800a8c0@gideone14f6c02>

out of pure curiosity, what's attracting a lawyer to the ANTLR tool?
  ----- Original Message ----- 
  From: Gerald B. Rosenberg 
  To: antlr-interest@antlr.org 
  Sent: Wednesday, June 01, 2005 8:44 AM
  Subject: [antlr-interest] Summary/Cheat Sheet?


  Found this all-to-brief syntax summary in an old non-Antlr mailing list.  Anyone have something similar that is more complete?  In particular, including summary descriptions of the LT, LA, $, #, ##, n:TOKEN (variable reference) constructs.  


  Have not seen it in the Antlr.org documentation, but think that it would be a good addition.


  Thanks,
  Gerald



  ===================================================
  ANTLR grammars are written in a kind of EBNF, which makes them very
  readable:


  rule
          :       TOKEN
          |       nonterminal
          |       (optional)?
          |       (zero_or_more)*
          |       (one_or_more)?
          ;


  syntactic_predicates                    // finite lookahead, back-tracking
          :       (A A b) => A A b
          |       (A)* b
          ;


  semantic_predicates
          :       { conditional_code; } => rule
          |       { conditional_code; } => rule
          |       foo
          ;


  automatic Abstract Syntax Tree generation with grammar annotations (^):


  mult_expr
          :       add_expr ((STAR^ | SLASH^) add_expr)
          ;


  add_expr
          :       atom ((PLUS^ | MINUS^) atom)
          ;

  ----
  Gerald B. Rosenberg, Esq.
  NewTechLaw
  285 Hamilton Avenue, Suite 520
  Palo Alto, CA  94301-2576

  650.325.2100  (office)  /  650.703.1724  (cell)
  650.325.2107  (facsimile)

  www.newtechlaw.com


  CONFIDENTIALITY NOTICE:  This email message (including any attachments) is being sent by an attorney, is for the sole use of the intended recipient, and may contain confidential and privileged information.  Any unauthorized review, use, disclosure or distribution is prohibited.  If you are not the intended recipient, please contact the sender immediately by reply e-mail and delete all copies of this message and any attachments without retaining a copy. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050601/d9434193/attachment.html
From gbr at newtechlaw.com  Tue May 31 16:51:54 2005
From: gbr at newtechlaw.com (Gerald B. Rosenberg)
Date: Tue May 31 16:55:36 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <b0aab04e0505311506661e1b68@mail.gmail.com>
References: <200505312156.j4VLuBWi008965@xmta3.jpl.nasa.gov>
	<dd3a065f050531103767c853f2@mail.gmail.com>
	<200505312156.j4VLuBWi008965@xmta3.jpl.nasa.gov>
Message-ID: <4.3.2.7.2.20050531155035.0b5d80f0@pop3.newtechlaw.com>

At 03:06 PM 5/31/2005, Brian Smith wrote:

>On 5/31/05, Loring Craymer <Loring.G.Craymer@jpl.nasa.gov> wrote:
> > "Thou shalt not wittingly enable a lawsuit" seems a fair
> > restriction on contributors.
>
>I agree, but the proposed terms are much more strict than that. The
>proposed terms state that a contributor has to pay for all defense
>costs in all lawsuits, whether or not they knowingly created that
>situation, and even whether or not the lawsuit has any basis or not.

Yes, this is the perennial problem of where best to stick the 
liability.  With the person who trips over a sprinkler head on your front 
lawn?  You could sue them, but how do you parse it if at the time they were 
a guest at your party.  The underinsured or uninsured motorist who swerves 
into your car trying to avoid a little kid chasing a ball into the 
street?  Sue the kids parents?  How about the bicyclist and your 
car.  Doesn't matter who hit whom, the car's driver is always taken to be 
at fault.

We face tremendous risks just driving to work and back each day.  Most 
never consider them, or if they did they would never drive.  In truth, the 
real risk is quite small.

Even so, risk liability usually works out to being borne by those most able 
to minimize or prevent the act in the first place.  In your car, you are 
presumed to be accepting the risks of just being there, even if "there" is 
at the end of series of events that you had no affirmative control 
over.  There are special cases - paramedics, police officers, etc. where 
the societal equities outweigh the normal placement of liability.  Maybe 
free software contributors should be an equally protected class.  Until 
then, they are the gatekeepers in the best position to determine the likely 
risk not only to themselves, but to the entire community -- a community 
that repeatedly demonstrates a willingness to fully participate in the 
decision-making just for the asking.  You are not alone.

Finally, the costs of an unfounded lawsuit are placed by the court on the 
loser, not the defendant/contributor.  And, if you did not knowingly create 
the problem -- someone else gave you the software to contribute after 
fraudulently removing the license markings -- then they are (predominantly) 
liable.  Of course, you would not think to bring a stranger's suitcase onto 
an airplane, why would you think to contribute code that you were not 
entirely sure of the origins.  If you wrote it, then you know the 
derivation and the risks to you and the community.

Maybe this is all obvious/lengthy/pedantic, and if so I apologize.  It is, 
however, the basic message I give to companies that are considering 
bringing some "free" software tool in-house: that contributors tend to be 
extremely conscientious about what they put their name to in making a 
contribution and that there is a non-transferable and often un-quantifiable 
risk just for participating.


----
Gerald B. Rosenberg, Esq.
NewTechLaw
285 Hamilton Avenue, Suite 520
Palo Alto, CA  94301-2576

650.325.2100  (office)  /  650.703.1724  (cell)
650.325.2107  (facsimile)

www.newtechlaw.com


CONFIDENTIALITY NOTICE:  This email message (including any attachments) is 
being sent by an attorney, is for the sole use of the intended recipient, 
and may contain confidential and privileged information.  Any unauthorized 
review, use, disclosure or distribution is prohibited.  If you are not the 
intended recipient, please contact the sender immediately by reply e-mail 
and delete all copies of this message and any attachments without retaining 
a copy. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050531/390aa99b/attachment-0001.html
From scott at javadude.com  Tue May 31 18:07:01 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Tue May 31 18:07:18 2005
Subject: [antlr-interest] a request about "reply-all" to list
In-Reply-To: <200505311846.j4VIkeRg028943@xmta3.jpl.nasa.gov>
Message-ID: <200506010200.j5120WPG027730@s2.eroute.net>

I couldn't agree more ;)

I am very tired of people holding up ancient "netiquette" guidelines that
can easily be outmoded by simple tool changes. (Among these I also include
use of HTML and top-posting, both of which could be easily reformatted by a
server for those who want/don't want HTML [without scripting] or prefer
top/bottom posting.

*Every* other mailing list I'm on (and there are tons) sets the proper
reply-to header. Let's get this fixed, please.

Thanks,
-- Scott

> I find that very irritating myself, but consider that a 
> design flaw that should be fixed at the source--the mail list 
> handler--and not by those of us using the system.  This has 
> been a source of recurring discussions on the mailing list, 
> with IIRC Mitchell arguing for the current mode as "proper etiquette".


From scott at javadude.com  Tue May 31 18:12:02 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Tue May 31 18:12:14 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <200505312156.j4VLuBWi008965@xmta3.jpl.nasa.gov>
Message-ID: <200506010205.j5125bPH002085@s2.eroute.net>

> > Some of us do software for a living, and we have signed 
> something with 
> > our employer saying "all my software belong to you" (more or less).
> 
> Usually it's not quite that bad; it's "all my software 
> developed on company time".

Not quite:

"All your software are belong to us"

-- Scott


From scott at javadude.com  Tue May 31 18:12:02 2005
From: scott at javadude.com (Scott Stanchfield)
Date: Tue May 31 18:12:28 2005
Subject: [antlr-interest] a request about "reply-all" to list
In-Reply-To: <20050531204011.GI8632@kfk4ever.com>
Message-ID: <200506010205.j5125bPI002085@s2.eroute.net>

Ahem. 

One server. Many users.

Where does it make sense to fix the problem. Hmmmm...

Oh, I know, let's blame the many different clients that the many different
users like and use.

If you find top-posting annoying, the server should allow you to reformat
messages (like this one)that are only top posts. Some folks like
top-posting, esp if reading individual mails. I realize it's harder for
digest-readers, but the constant page-forward requirement of bottom posting
makes it hard for single-mail readers. In short, the server should be smart
enough to have a reformatting option.

Later,
-- Scott

> Maybe you should be blaming your mail client instead. The 
> client I'm using allows me to define lists I am subscribed to 
> and has 3 options for
> replying: reply (to author only, which should be the 
> reply-to), list reply (to the list address that I defined) 
> and group reply (to all recipients).
> 
> And while we're talking about things that irritate, I find 
> top-posting and quoting entire messages without using them as 
> context to be quite annoying as well.


From ewbank at gmail.com  Tue May 31 18:17:02 2005
From: ewbank at gmail.com (Bryan Ewbank)
Date: Tue May 31 18:17:05 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
In-Reply-To: <200506010205.j5125bPH002085@s2.eroute.net>
References: <200505312156.j4VLuBWi008965@xmta3.jpl.nasa.gov>
	<200506010205.j5125bPH002085@s2.eroute.net>
Message-ID: <dd3a065f0505311817804a117@mail.gmail.com>

Now *thats* the quote I was looking for.  Thanks!

On 5/31/05, Scott Stanchfield <scott@javadude.com> wrote:
> > > Some of us do software for a living, and we have signed
> > something with
> > > our employer saying "all my software belong to you" (more or less).
> >
> > Usually it's not quite that bad; it's "all my software
> > developed on company time".
> 
> Not quite:
> 
> "All your software are belong to us"
> 
> -- Scott
> 
> 
>
From lloyd at nova-mind.com  Tue May 31 18:25:02 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Tue May 31 18:25:14 2005
Subject: [antlr-interest] submission of patches, fixes, other contributions
References: <200505312156.j4VLuBWi008965@xmta3.jpl.nasa.gov><200506010205.j5125bPH002085@s2.eroute.net>
	<dd3a065f0505311817804a117@mail.gmail.com>
Message-ID: <041a01c56648$bcc4cde0$9800a8c0@gideone14f6c02>

lucky me: "All your software related to our business belong to us"
much better, and fair as well I would say.

----- Original Message ----- 
From: "Bryan Ewbank" <ewbank@gmail.com>
To: "ANTLR Interest" <antlr-interest@antlr.org>
Sent: Wednesday, June 01, 2005 11:17 AM
Subject: Re: [antlr-interest] submission of patches, fixes, other 
contributions


Now *thats* the quote I was looking for.  Thanks!

On 5/31/05, Scott Stanchfield <scott@javadude.com> wrote:
> > > Some of us do software for a living, and we have signed
> > something with
> > > our employer saying "all my software belong to you" (more or less).
> >
> > Usually it's not quite that bad; it's "all my software
> > developed on company time".
>
> Not quite:
>
> "All your software are belong to us"
>
> -- Scott
>
>
> 

From parrt at cs.usfca.edu  Tue May 31 18:29:39 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue May 31 18:29:08 2005
Subject: [antlr-interest] almost there!
Message-ID: <A5E6E6C2-58B5-4D8A-A159-B3D7638E7845@cs.usfca.edu>

Hi.  Despite all the unhappy discussions of legal liabilities etc...  
I am happy to report that I'm throwing caution to the wind and will  
be releasing an early access ANTLR v3 hopefully tomorrow. ;) It will  
include Jean Bovet's astounding ANTLRWorks GUI dev environment. :)

Then I take a break (probably doing jury duty) then tree stuff then  
grad student recruiting in Asia then rewrite v3 in v3 (it's in 2.7.5  
at the moment) then alpha release? :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From lloyd at nova-mind.com  Tue May 31 18:42:43 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Tue May 31 18:42:54 2005
Subject: [antlr-interest] almost there!
References: <A5E6E6C2-58B5-4D8A-A159-B3D7638E7845@cs.usfca.edu>
Message-ID: <043301c5664b$3508d9c0$9800a8c0@gideone14f6c02>

Sounds great!
Ha, the joyce of quiet, happy, uneventful life ;) !!

Humor: Do you think of putting grammar inehritance back for version 5.0 ?

----- Original Message ----- 
From: "Terence Parr" <parrt@cs.usfca.edu>
To: "ANTLR Interest" <antlr-interest@antlr.org>
Sent: Wednesday, June 01, 2005 11:29 AM
Subject: [antlr-interest] almost there!


> Hi.  Despite all the unhappy discussions of legal liabilities etc...  
> I am happy to report that I'm throwing caution to the wind and will  
> be releasing an early access ANTLR v3 hopefully tomorrow. ;) It will  
> include Jean Bovet's astounding ANTLRWorks GUI dev environment. :)
> 
> Then I take a break (probably doing jury duty) then tree stuff then  
> grad student recruiting in Asia then rewrite v3 in v3 (it's in 2.7.5  
> at the moment) then alpha release? :)
> 
> Ter
> --
> CS Professor & Grad Director, University of San Francisco
> Creator, ANTLR Parser Generator, http://www.antlr.org
> Cofounder, http://www.jguru.com
>
From parrt at cs.usfca.edu  Tue May 31 18:52:24 2005
From: parrt at cs.usfca.edu (Terence Parr)
Date: Tue May 31 18:51:54 2005
Subject: [antlr-interest] almost there!
In-Reply-To: <043301c5664b$3508d9c0$9800a8c0@gideone14f6c02>
References: <A5E6E6C2-58B5-4D8A-A159-B3D7638E7845@cs.usfca.edu>
	<043301c5664b$3508d9c0$9800a8c0@gideone14f6c02>
Message-ID: <B051565D-9059-45A6-A13E-4F3CC0844764@cs.usfca.edu>

On May 31, 2005, at 6:42 PM, Lloyd Dupont wrote:
> Sounds great!
> Ha, the joyce of quiet, happy, uneventful life ;) !!

:)

Yeah, it's been a long road.  2 solid years of coding and designing  
the LL(*) algorithm (not to mention significant updates to  
StringTemplate and writing that StringTemplate paper etc...).  Never  
a dull moment.

This ANTLR v3 is thing of beauty on the inside (well, I need to do  
another refactoring pass) compared to 2.x, but that ain't saying  
much. ;)

ANTLRWorks is a dream come true as well.

I'm dying to hear what people think...

> Humor: Do you think of putting grammar inehritance back for version  
> 5.0 ?

Sure. ;)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com

From csnyder at alumni.ncsu.edu  Tue May 31 18:54:01 2005
From: csnyder at alumni.ncsu.edu (Chris Snyder)
Date: Tue May 31 18:54:08 2005
Subject: [antlr-interest] almost there!
In-Reply-To: <A5E6E6C2-58B5-4D8A-A159-B3D7638E7845@cs.usfca.edu>
Message-ID: <20050601015405.7E58F2A80C@bilbo.mebtel.net>

That's great news. Can't wait to check it out.

-----Original Message-----
From: antlr-interest-bounces@antlr.org
[mailto:antlr-interest-bounces@antlr.org] On Behalf Of Terence Parr
Sent: Tuesday, May 31, 2005 9:30 PM
To: ANTLR Interest
Subject: [antlr-interest] almost there!

Hi.  Despite all the unhappy discussions of legal liabilities etc...  
I am happy to report that I'm throwing caution to the wind and will  
be releasing an early access ANTLR v3 hopefully tomorrow. ;) It will  
include Jean Bovet's astounding ANTLRWorks GUI dev environment. :)

Then I take a break (probably doing jury duty) then tree stuff then  
grad student recruiting in Asia then rewrite v3 in v3 (it's in 2.7.5  
at the moment) then alpha release? :)

Ter
--
CS Professor & Grad Director, University of San Francisco
Creator, ANTLR Parser Generator, http://www.antlr.org
Cofounder, http://www.jguru.com




From lloyd at nova-mind.com  Tue May 31 23:47:07 2005
From: lloyd at nova-mind.com (Lloyd Dupont)
Date: Tue May 31 23:47:19 2005
Subject: [antlr-interest] a few questions
References: <020f01c5657b$1312d030$9800a8c0@gideone14f6c02>
	<bc607a4e05053104174d3dc639@mail.gmail.com>
Message-ID: <00a401c56675$bb163a10$9800a8c0@gideone14f6c02>

Neat ;)

----- Original Message ----- 
From: "Ric Klaren" <ric.klaren@gmail.com>

This is probably a bit friendlier than the big lookahead option:

ID:  // classical ID code 
       ....
     {
        if( $getText.equals("__attribute__") || .. )
            $setType(Token.SKIP);
     }
; 


From antlr at shmuelhome.mine.nu  Tue May 31 23:53:36 2005
From: antlr at shmuelhome.mine.nu (shmuel siegel)
Date: Tue May 31 23:53:37 2005
Subject: [antlr-interest] almost there!
In-Reply-To: <A5E6E6C2-58B5-4D8A-A159-B3D7638E7845@cs.usfca.edu>
References: <A5E6E6C2-58B5-4D8A-A159-B3D7638E7845@cs.usfca.edu>
Message-ID: <429D5B70.70200@shmuelhome.mine.nu>

Terence Parr wrote:
> then rewrite v3 in v3 (it's in 2.7.5  at 
> the moment)

Is it a compatability issue (the language has changed), or an 
optimization issue (v3 lets you do it better), or both?


-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.322 / Virus Database: 267.3.3 - Release Date: 5/31/2005



-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.322 / Virus Database: 267.3.3 - Release Date: 5/31/2005

From paul.snow at conformative.com  Tue May 31 17:41:33 2005
From: paul.snow at conformative.com (Paul Snow)
Date: Wed Jun  1 09:31:50 2005
Subject: [antlr-interest] Stumped!  Nondeterminism between...
Message-ID: <429D043D.2040903@conformative.com>

I don't see this nondeterminism...

Here is my lex grammer, which is supposed to parse out columns, and 
respect comments:

*class Column_Lexer extends Lexer;
options { k=6;  charVocabulary = '\3'..'\377'; filter=JUNK;}

{
    public boolean done = false;
    public void uponEOF() throws TokenStreamException, CharStreamException
    {
        done=true;
    }
}

protected
STRING2 : ('\'' (~('\''))* '\'');

STRING : ('"' (~('"'))* '"') | STRING2 ;
 
 
protected
COMMENTBODY : '/' '*' (~'*'|('*' ~'/'))* '*' '/' ;

protected
COMMENTLINE : "//" (~'\n')* ;

protected
TCL_COMMENT : '#' (~'\n')*;

COMMENT: COMMENTBODY | COMMENTLINE | TCL_COMMENT;

NEWLINE :(('\r' '\n') | '\n' | '\r'){newline(); /**/};

WS :((' '| '\t')+) ;

protected
COLUMN_CHARS: (~( '#' | '\'' | '"' | ' ' | '\t' | '\r' | '\n') )+ ;

COLUMN:  COLUMN_CHARS ;

protected JUNK :  (~('\n'|'\r')) *
    { _ttype = Token.SKIP;
        String x = $getText +"";
        System.out.flush();
        System.err.println("Unable to lex '" + x + "'");
        byte b[] = x.getBytes();
        for(int i=0;i<b.length;i++){ System.err.print((int) b[i]+"."); }
        System.err.flush();
        consume();
    };   
*
Here are my errors:

    Severity    Description    Resource    In Folder    Location   
    Creation Time
    1    lexical nondeterminism between rules COMMENT and COLUMN upon
    k==1:'#'
    k==2:'\u0003'..'\u0008','\u000b','\u000c','\u000e'..'\u001f','!','$'..'&','('..'\u00ff'
    k==3:<end-of-token>,'\u0003'..'\u0008','\u000b','\u000c','\u000e'..'\u001f','!','$'..'&','('..'\u00ff'
    k==4:<end-of-token>,'\u0003'..'\u0008','\u000b','\u000c','\u000e'..'\u001f','!','$'..'&','('..'\u00ff'
    k==5:<end-of-token>,'\u0003'..'\u0008','\u000b','\u000c','\u000e'..'\u001f','!','$'..'&','('..'\u00ff'
    k==6:<end-of-token>,'\u0003'..'\u0008','\u000b','\u000c','\u000e'..'\u001f','!','$'..'&','('..'\u00ff' 


    Severity    Description    Resource    In Folder    Location  
     Creation Time
    1    lexical nondeterminism between rules STRING and COLUMN upon
    k==1:'"','\''
    k==2:'\u0003'..'\u0008','\u000b','\u000c','\u000e'..'\u001f','!','$'..'&','('..'\u00ff'
    k==3:<end-of-token>,'\u0003'..'\u0008','\u000b','\u000c','\u000e'..'\u001f','!','$'..'&','('..'\u00ff'
    k==4:<end-of-token>,'\u0003'..'\u0008','\u000b','\u000c','\u000e'..'\u001f','!','$'..'&','('..'\u00ff'
    k==5:<end-of-token>,'\u0003'..'\u0008','\u000b','\u000c','\u000e'..'\u001f','!','$'..'&','('..'\u00ff'
    k==6:<end-of-token>,'\u0003'..'\u0008','\u000b','\u000c','\u000e'..'\u001f','!','$'..'&','('..'\u00ff'  


Your help is appreciated!

Paul

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20050531/1c996807/attachment.html
