From andreasklimke at yahoo.com  Wed May  1 04:15:46 2002
From: andreasklimke at yahoo.com (andreasklimke)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Started work on Matlab grammar
Message-ID: <aaoip2+vhtm@eGroups.com>

Hi,

I have started to work on an Antlr grammar for Matlab m-files a couple
of days ago.
I am using the parser and lexer for the MATCH compiler (Bison/Flex)
written by Pramod G. Joisha (et.al) from the article "The design and
implementation of a parser and scanner for the Matlab Language in the
Match Compiler" as basis for the grammar.

If someone else is working on this, too, or if someone has other
versions of a Matlab grammar, I'd apreachiate if you could let me
know.

Andreas


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed May  1 09:44:09 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Started work on Matlab grammar
In-Reply-To: <aaoip2+vhtm@eGroups.com>
Message-ID: <A9002DB2-5D22-11D6-A07A-0030653DE0D6@jguru.com>


On Wednesday, May 1, 2002, at 04:15  AM, andreasklimke wrote:

> Hi,
>
> I have started to work on an Antlr grammar for Matlab m-files a couple
> of days ago.
> I am using the parser and lexer for the MATCH compiler (Bison/Flex)
> written by Pramod G. Joisha (et.al) from the article "The design and
> implementation of a parser and scanner for the Matlab Language in the
> Match Compiler" as basis for the grammar.
>
> If someone else is working on this, too, or if someone has other
> versions of a Matlab grammar, I'd apreachiate if you could let me
> know.

Heh, that sounds awesome.  Let the group know if you have trouble and 
when you finish :)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Wed May  1 11:45:01 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Re: Started work on Matlab grammar
In-Reply-To: <aaoip2+vhtm@eGroups.com>
Message-ID: <aapd3d+hh1t@eGroups.com>

--- In antlr-interest@y..., "andreasklimke" <andreasklimke@y...> 
wrote:
> Hi,
> 
> I have started to work on an Antlr grammar for Matlab m-files a 
couple

Hey, let me add a kudos call to Ter's and say, GROOVY!

Now let me ask a deeper question: what is this for?

(I'll always have a soft spot in my heart for Matlab, which played a 
large part in my successfully completing engineering school!)

Good luck, Andreas!

JSRS


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Wed May  1 11:47:08 2002
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] the tree parser example
Message-ID: <Pine.LNX.4.10.10205011135520.1095-101000@moselle.com>


Hi gang,

This message is intended mostly for Lloyd Dupont, but feel free to peruse
it if you are not him.  :)

Attached is a zip file containing the entire ProtoC project.  ProtoC is a
prototype-based, OO language that fits somewhere in the C family of
languages.

(What does "prototype-based" mean?  Glad you asked.  In short, there is no
such thing as a "class", though everything is an object.  Hm.  How about
some examples?  Omega, NewtonScript, the long-running Dr. Dobbs language
Bob, and the grandaddy of them all, Self.)

For a brief and very outdated overview of the language, see
http://www.moselle.com/jsrs/protoc/protoc.html.

A few notes about the code (caveat emptor!):
* It's a Microsoft Visual Studio .NET project.

* It's my first ANTLR project of any real size.

* You'll find the ANTLR grammar in pc.g, under the pcc subproject.

* The ProtoC compiler (pcc) takes a string or file, runs it through the
ANTLR code, which results in a bytecode assembly language text string.  
This is then fed to the assembler (pcasm).  The resulting bytecode is
executed by the virtual machine (pcvm), using a very dynamic runtime
library of objects (pcobjs).

* Oh yeah, I should mention that while the project compiles and runs,
there are some logic errors in the output.  This is NOT a finished
project!  :)


A few notes about the ANTLR part:
* The lexer, parser, and tree walker are all in one file.

* I don't have any tree transform optimizers yet.  When I get around to
that, I'll probably make a tree walker superclass, and then have all the
walkers (including the final assembly code emission walker) descend from
it.

* But for now, the parser just emits a tree, and the tree walker just
makes a single pass and dumps code.

I'll be hapy to entertain questions.

Enjoy, hope this helps,
JSRS


J. Stephen Riley Silber
======================================
 "Pig, your freedom lies before you!  Flee into the
  forest and join your piggy friends!"

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: ProtoC.zip
Type: application/zip
Size: 233956 bytes
Desc: 
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20020501/43e9cbb0/ProtoC.zip
From jsrs701 at yahoo.com  Wed May  1 12:03:43 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Re: the tree parser example
In-Reply-To: <Pine.LNX.4.10.10205011135520.1095-101000@moselle.com>
Message-ID: <aape6f+mmkr@eGroups.com>

--- In antlr-interest@y..., "J. Stephen Riley Silber" <jsrs701@y...> 
wrote:
> For a brief and very outdated overview of the language, see
> http://www.moselle.com/jsrs/protoc/protoc.html.

(Razafraggin' automatic markup of URL's in Yahoo Groups postings...)

That link should not have a period at the end.  It should be

   http://www.moselle.com/jsrs/protoc/protoc.html

There.

JSRS


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Wed May  1 15:14:19 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Started work on Matlab grammar
References: <aaoip2+vhtm@eGroups.com>
Message-ID: <001001c1f15d$8a81cee0$0200a8c0@matthewfnb>

Hi Andreas,
I would be interested in being involved.  I have written a small grammar for
GAUSS, a competitor to MATLAB, but GAUSS, running as an interpreter, is
twice as fast as compiled MATLAB.

I would be interested in converting MATLAB to GAUSS.  MATLAB has allot more
toolboxes then GAUSS.

I would want to use ANTLR for all parts of the process.  I think I have a
student version of MATLAB around the place somewhere.  Feel free to contact
me directly.

all the best
matthew

----- Original Message -----
From: "andreasklimke" <andreasklimke@yahoo.com>
To: <antlr-interest@yahoogroups.com>
Sent: Wednesday, May 01, 2002 9:15 PM
Subject: [antlr-interest] Started work on Matlab grammar


> Hi,
>
> I have started to work on an Antlr grammar for Matlab m-files a couple
> of days ago.
> I am using the parser and lexer for the MATCH compiler (Bison/Flex)
> written by Pramod G. Joisha (et.al) from the article "The design and
> implementation of a parser and scanner for the Matlab Language in the
> Match Compiler" as basis for the grammar.
>
> If someone else is working on this, too, or if someone has other
> versions of a Matlab grammar, I'd apreachiate if you could let me
> know.
>
> Andreas
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From todd.blanchard at cacheon.com  Wed May  1 18:35:57 2002
From: todd.blanchard at cacheon.com (Todd Blanchard)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Anybody got an ObjectiveC grammar?
Message-ID: <201DE2FDBE551E46A77474DE8AA141452B6DAD@EX1.cacheon.com>

Sweet!  Thanks.

-----Original Message-----
From: Terence Parr [mailto:parrt@jguru.com]
Sent: Tuesday, April 30, 2002 11:18 AM
To: antlr-interest@yahoogroups.com
Subject: Re: [antlr-interest] Anybody got an ObjectiveC grammar?


Heh I found it!

http://www.antlr.org/1.33/contrib/ObjC.g

At the website all the time folks :)  I new I got it from NeXT at one 
point...they forced me to strip actions, but here is the grammar :)

Ter

On Tuesday, April 30, 2002, at 11:00  AM, David Ewing wrote:

> on 4/30/02 11:33 AM, Terence Parr at parrt@jguru.com wrote:
>
>>
>> On Tuesday, April 30, 2002, at 10:30  AM, Todd Blanchard wrote:
>>
>>> Got some stuff to do on Cocoa...
>>
>> I'll bet the guys at apple have one laying around for PCCTS; I helped
>> 'em build it at NeXT back in the glory days.  I wonder if they'd give

>> it
>> up.  I'll send you out an email...
>
> There was a yacc grammar posted to the macosx-dev email list at
> omnigroup.com a little over a year ago. It looked like it included
> everything OK, but I didn't look at it too closely. You could look at 
> their
> archives.
>
> And yes, we do have the ObjC grammar for PCCTS here. I can ask about 
> giving
> it out, but no promises.
>
> Also, gcc includes support for ObjC. Looking at its grammar files
might
> prove useful too. It's probably the best source for the "real"
language
> since it's the compiler we use.
>
> Dave
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Wed May  1 15:23:08 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] the tree parser example
References: <Pine.LNX.4.10.10205011135520.1095-101000@moselle.com>
Message-ID: <000a01c1f1a0$b349e3b0$f0bb0ad2@hermes>

thanks...
I will check that, speak to you later ...


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Wed May  1 23:53:39 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Anybody got an ObjectiveC grammar?
References: <201DE2FDBE551E46A77474DE8AA141452B6DAD@EX1.cacheon.com>
Message-ID: <001d01c1f1a6$842113f0$0101a8c0@daemon>

> Heh I found it!
> 
> http://www.antlr.org/1.33/contrib/ObjC.g
> 
> At the website all the time folks :)  I new I got it from NeXT at one 
> point...they forced me to strip actions, but here is the grammar :)

That's great, but .... do you know if it's complete?

I checked it only to find that it did not contain any statement
definitions. E.g. the rule "compound_statement" is used but
nowhere defined (or am I missing some other file?).

Silvain


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dewing at apple.com  Thu May  2 08:54:17 2002
From: dewing at apple.com (David Ewing)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Anybody got an ObjectiveC grammar?
In-Reply-To: <001d01c1f1a6$842113f0$0101a8c0@daemon>
Message-ID: <B8F6BD49.17753%dewing@apple.com>

on 5/2/02 12:53 AM, Silvain Piree at s.piree@enneya.com wrote:

>> Heh I found it!
>> 
>> http://www.antlr.org/1.33/contrib/ObjC.g
>> 
>> At the website all the time folks :)  I new I got it from NeXT at one
>> point...they forced me to strip actions, but here is the grammar :)
> 
> That's great, but .... do you know if it's complete?
> 
> I checked it only to find that it did not contain any statement
> definitions. E.g. the rule "compound_statement" is used but
> nowhere defined (or am I missing some other file?).

I don't believe it's intended to be complete. I believe it's meant to work
as part of the C++ grammar for PCCTS.

I think it would be wise to grab the ObjC grammar out of gcc 3 sources and
merge the productions into the antlr C grammar. It might be good enough to
merge the antlr ObjC grammar, but it's possible that there have been ObjC
language changes since that was written. I really don't know what might have
changes, but that PCCTS grammar is pretty old.

Dave

P.S. The gcc ObjC grammar can be found in Apple's Darwin open source
repository in gcc3/gcc/c-parse.in. That file is passed through sed to
produce the yacc input files, and the ObjC portions are conveniently wrapped
in "ifobjc"/"end ifobjc" lines.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Thu May  2 09:18:04 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Anybody got an ObjectiveC grammar?
Message-ID: <170826586F3BD511910D0200C110AAA8032B4905@memail03.bco-home.com>

> I don't believe it's intended to be complete. I believe it's 
> meant to work
> as part of the C++ grammar for PCCTS.
> 
> I think it would be wise to grab the ObjC grammar out of gcc 
> 3 sources and
> merge the productions into the antlr C grammar.

I agree, except you should be able to make ObjC a "grammar subclass" of the
GnuC grammar pretty easily (just as the GCC grammar subclasses ANSI C).
That will make it a bit easier to update in the future with respect to
changes of the GNU C grammar and/or ObjC grammar.  I'll be happy to add
objc.g to the GCC translation framework when it is ready.  Also appreciated
would be tiny complete preprocessed test programs to verify each feature of
the ObjC extension.

Monty 
www.codetransform.com/gcc.html

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From zieren at gmx.de  Thu May  2 12:22:00 2002
From: zieren at gmx.de (zieren@gmx.de)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] ANTLR exception rethrowing
Message-ID: <8O4HCrVBMVB@zieren.de>

Hi,

I've got a question about exception handling in tree parsers (Java code  
generator). When an exception handler is attached to a rule, ANTLR  
generates corresponding catch statements. Now, if the tree parser uses  
syntactic predicates, the generated code looks like this:

------------------------------schnipp------------------------------
try { // for error handling
    exc1 = _t==ASTNULL ? null : (AST)_t;
    b=tCondition(_t); // this rule throws UndefinedVariableException
    _t = _retTree;
}
catch ( UndefinedVariableException undefVarEx ) {
    if (inputState.guessing==0) {
        // do something...
    } else {
        throw undefVarEx ; // <-- this is what I don't understand
    }
}
------------------------------schnapp------------------------------

Why is the caught exception rethrown? Since it is not derived from  
antlr.RecognitionException, I now have to declare it in the rule's throws  
clause. But I want the rule itself to handle the exception. How do I go  
about this?

Is this maybe a design fault? Should I - in a tree parser - only throw  
exceptions derived from antlr.RecognitionException, which every rule  
throws anyway?

Hmm... come to think of it... if inputState.guessing != 0, meaning that  
the tree parser is testing for a syntactic predicate, isn't it impossible  
that any exception other than antlr.RecognitionException (and subclasses)  
is thrown?

Hope I made myself clear & thanx in advance for any help!

Greetings,
J?rg

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Thu May  2 16:20:46 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] No code generated with -diagnostic option?
Message-ID: <aashke+hpsm@eGroups.com>


Hi gang,

I'm using the C++ code generator, and I've noticed that when I use 
the -diagnostic option on the command line, it's not generating 
any .cpp or .hpp files.  Is something on my end wrong, or is this by 
design?

And if it's by design, why?

thanks,
JSRS


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri May  3 01:27:27 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] No code generated with -diagnostic option?
In-Reply-To: <aashke+hpsm@eGroups.com>; from jsrs701@yahoo.com on Thu, May 02, 2002 at 11:20:46PM -0000
References: <aashke+hpsm@eGroups.com>
Message-ID: <20020503102727.K4616@cs.utwente.nl>

On Thu, May 02, 2002 at 11:20:46PM -0000, jsrs701 wrote:
> I'm using the C++ code generator, and I've noticed that when I use 
> the -diagnostic option on the command line, it's not generating 
> any .cpp or .hpp files.  Is something on my end wrong, or is this by 
> design?

-diagnostic generates a .txt file with diagnostics

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From andreasklimke at yahoo.com  Fri May  3 02:34:25 2002
From: andreasklimke at yahoo.com (andreasklimke)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Re: Matlab grammar - What is this for?
In-Reply-To: <aapd3d+hh1t@eGroups.com>
Message-ID: <aatlj1+jjt3@eGroups.com>

Hi,
for my PhD thesis, I started to work on an application that will have
to process m files, and generate some additional Matlab code around
it. Since this will not involve compilation of the code, I may not
need a grammar that is complete in every respect.

For other projects, such as Otter, CONLAB, or the MATCH compiler (they
have published their grammar), the grammar was required for a parser
as part of a compiler that emits native parallel code or makes use of
libraries supporting parallel architectures (The Mathwork's Matlab
compiler does not support this). So a lot of work has been done here.

Thanks to all of you for the support- I will post intermediate results
or questions that arise I am not sure of how to solve with AntLR.

Andreas


--- In antlr-interest@y..., "jsrs701" <jsrs701@y...> wrote:
> --- In antlr-interest@y..., "andreasklimke" <andreasklimke@y...> 
> wrote:
> > Hi,
> > 
> > I have started to work on an Antlr grammar for Matlab m-files a 
> couple
> 
> Hey, let me add a kudos call to Ter's and say, GROOVY!
> 
> Now let me ask a deeper question: what is this for?
> 
> (I'll always have a soft spot in my heart for Matlab, which played a 
> large part in my successfully completing engineering school!)
> 
> Good luck, Andreas!
> 
> JSRS


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tjmather at tjmather.com  Sat May  4 10:59:28 2002
From: tjmather at tjmather.com (tmather)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Java source to C/C++ source translator
Message-ID: <ab17i0+am23@eGroups.com>

I'm interested in writing a Java to C++ or C source code translator
using ANTLR.  I was wondering if anybody has done this or would
be interested in this project.

This could be done using the Java 1.3 and tree grammer to parse the
Java source code, then using the parse tree to output C++ and/or C.
To convert from using the Java libraries we could use the C++ STLport
library.

I'd like to use this to create a C++ or C version of the Apache POI
libraries.  POI is an open source library to access OLE/Excel/MSWord
files, and is written in Java.

Thanks,
TJ


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Sun May  5 10:05:01 2002
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] the tree parser example
In-Reply-To: <Pine.LNX.4.10.10205011135520.1095-101000@moselle.com>
References: <Pine.LNX.4.10.10205011135520.1095-101000@moselle.com>
Message-ID: <15573.26173.201888.793070@non.non.net>

>>>>> "J" == J Stephen Riley Silber <jsrs701@yahoo.com> writes:
[...]
> Attached is a zip file containing the entire ProtoC project.

Administrivia/Netiquette:

	Do NOT send large files to mailing lists!  Just put the files up on
	a ftp/http site and provide the URL for the files.

[...]
> For a brief and very outdated overview of the language, see
> http://www.moselle.com/jsrs/protoc/protoc.html.

Are the specs available in something that is readable (as opposed to .rtf)
by people not supporting Microsoft?

Thanks,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Sun May  5 17:11:36 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] A question  regarding Token Stream Multiplexing (aka "Lexer states")
Message-ID: <ab4hno+sjqj@eGroups.com>

Is there a very simple example that demonstrates how to change lexer 
states in the lexer when parsing ?  

For example I have one lexer that processes text but if it sees <!-- 
or </ or < it should go to the one that processes tags.  In my code I 
have put : 

HTMLCOMMENT : "<!" {selector.select("HTMLTagLexer");};

Unfortunately when I enter a valid HTML comment(For example <!-- 
Hello -->) I get the following error message :

line 1: unexpected token: <!
exception: antlr.TokenStreamRecognitionException: unexpected char: -

What is causing this and how can I solve it ?

I would appreciate all advice offered.

Thanks in advance

John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Sun May  5 23:14:42 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] A question  regarding Token Stream Multiplexing (aka "Lexer states")
References: <ab4hno+sjqj@eGroups.com>
Message-ID: <001601c1f4c5$50cc1050$3cb00ad2@hermes>

> Is there a very simple example that demonstrates how to change lexer 
> states in the lexer when parsing ?  

yes.....
I send it to you ...

hmm.. but I already send it to you ?
don't you like my example ?

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: lexerstate.tgz
Type: application/x-compressed
Size: 1933 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20020506/d196f9ce/lexerstate.bin
From klaren at cs.utwente.nl  Mon May  6 02:04:19 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] A question  regarding Token Stream Multiplexing (aka "Lexer states")
In-Reply-To: <ab4hno+sjqj@eGroups.com>; from johnclarke@hotmail.com on Mon, May 06, 2002 at 12:11:36AM -0000
References: <ab4hno+sjqj@eGroups.com>
Message-ID: <20020506110419.A6528@cs.utwente.nl>

Hi,

On Mon, May 06, 2002 at 12:11:36AM -0000, johnclarke72 wrote:
> Is there a very simple example that demonstrates how to change lexer 
> states in the lexer when parsing ?

You might consider looking at the examples directory of the distribution to
be specific at the multiLexer example.

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Mon May  6 05:42:18 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Re: A question  regarding Token Stream Multiplexing (aka "Lexer states")
In-Reply-To: <001601c1f4c5$50cc1050$3cb00ad2@hermes>
Message-ID: <ab5tna+3pid@eGroups.com>

Lloyd,
      Your example was very instructive and I have learnt a lot from 
it.  I just wanted to see if I understood the example enough to use 
this technique myself.

I hope that I have not caused offence.  You have helped me a lot.

Best Wishes

John

> > Is there a very simple example that demonstrates how to change 
lexer 
> > states in the lexer when parsing ?  
> 
> yes.....
> I send it to you ...
> 
> hmm.. but I already send it to you ?
> don't you like my example ?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Mon May  6 07:14:55 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Re: A question  regarding Token Stream Multiplexing (aka "Lexer states")
In-Reply-To: <20020506110419.A6528@cs.utwente.nl>
Message-ID: <ab634v+glri@eGroups.com>

When I compile and run the application I then enter <!-- test --> and 
expect to see :
HTML Comment : <!-- test --> on the screen.  But all I see is :

line 1: unexpected token: <!-
exception: antlr.TokenStreamRecognitionException: unexpected char: -

I cannot see what is causing the problem.  It is probably something 
very simple that I have missed out.  I would be grateful for any 
advice offered.

Best Wishes

John

The Grammar for the Text Lexer
==============================

// Import the Required Classes
header
{
   import java.util.*;
   import antlr.*;
}

// The Class
class TextLexer extends Lexer;

// Set the Options for the Lexer
options
{
  k=3;                                  // Set the Look Ahead to 3 
Characters
  charVocabulary = '\1' .. '\377';      // Set the Lexer Character 
Vocabulary
  testLiterals = false;                 // Don't test against the 
Literals table
}

// The routine that will allow us to switch between Selectors
{
    // The current Selector
    TokenStreamSelector selector;

    // The method that will enable us to switch between Selectors
    public void setSelector(TokenStreamSelector tokenStreamSelector)
    {
        selector = tokenStreamSelector;
    }

}

HTMLCOMMENT : "<!-" {selector.select("HTMLTagLexer");};

// TEXT
WORD : ( ~ (' '|'\r'|'\n'|'\t'|'<') ) +;

// Ignore all White Space
WS      :       (       ' '
                |       '\t'
		|	'\r' '\n' { newline(); }
		|	'\n' { newline(); }
		)
		{$setType(Token.SKIP);}	//ignore this token
	;

The Grammar for the Tag Lexer
=============================
// Import the Required Classes
header
{
   import java.util.*;
   import antlr.*;
}

// The Class
class HTMLTagLexer extends Lexer;

// Set the Options for the Lexer
options
{
  k=3;                                  // Set the Look Ahead to 3 
Characters
  charVocabulary = '\1' .. '\377';      // Set the Lexer Character 
Vocabulary
  testLiterals = false;                 // Don't test against the 
Literals table
  importVocab = Tagged;                 // The Vocabulary to import
  exportVocab = HTMLTags;               // Export the Vocabulary to 
HTMLTags
}

// The routine that will allow us to switch between Selectors
{
    // The current Selector
    TokenStreamSelector selector;

    // The method that will enable us to switch between Selectors
    public void setSelector(TokenStreamSelector tokenStreamSelector)
    {
        selector = tokenStreamSelector;
    }

}

// HTML Comment Definition
HTMLCOMMENT : "<!--" (options { greedy=false; }: .) * "-->";

// Ignore all White Space
WS      :       (       ' '
                |       '\t'
		|	'\r' '\n' { newline(); }
		|	'\n' { newline(); }
		)
		{$setType(Token.SKIP);}	//ignore this token
	;

The Grammar for the Parser
==========================

// Import the Required Classes
header
{
   import java.util.*;
   import antlr.*;
}

// The Class
class HTMLParser extends Parser;

// Set the Options for the Parser
options
{
  importVocab = Tagged;                 // The Vocabulary to import
}

// Define the starting point for processing the HTML
processData :
(
 text:WORD {System.out.println("TEXT " + text.getText());}
 | comment:HTMLComment {System.out.println("HTML Comment " + 
comment.getText());}
)+;

The Java Application
====================

import java.io.*;
import antlr.*;

// The HTMLParserApp Class
class HTMLParserApp
{
 
   // The Main function
   public static void main(String[] args)
   {
      try
      {
         // Create the required Lexers
         HTMLTagLexer htmlTagLexer = new HTMLTagLexer(new 
DataInputStream(System.in));
         TextLexer textLexer = new TextLexer
(htmlTagLexer.getInputState());

         // Create the TokenStreamSelector and add the required 
Lexers to it
         TokenStreamSelector tokenStreamSelector = new 
TokenStreamSelector();
         tokenStreamSelector.addInputStream
(htmlTagLexer,"HTMLTagLexer");
         tokenStreamSelector.addInputStream(textLexer,"TextLexer");

         // Select the starting Lexer
         tokenStreamSelector.select("TextLexer");

         // Add the TokenStreamSelector to the Required Lexers
         htmlTagLexer.setSelector(tokenStreamSelector);
         textLexer.setSelector(tokenStreamSelector);

         // Create the HTML Parser
         HTMLParser htmlParser = new HTMLParser(tokenStreamSelector);

         // Process the HTML
         htmlParser.processData();
        
      } catch(Exception e)
        {
          System.err.println("exception: "+e);
        }
    }
}



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon May  6 07:43:37 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Re: A question  regarding Token Stream Multi
	plexing (aka "Lexer states")
Message-ID: <170826586F3BD511910D0200C110AAA8032B4911@memail03.bco-home.com>

In your main lexer you match "<!-" and then switch to HTMLTagLexer.  So what
is left to match is "- test -->".  It then tries to match that first '-'
against either the HTMLCOMMENT or WS rules but neither work, so it complains
that it doesn't know what to do.  HTMLCOMMENT should probably be something
like

HTMLCOMMENT :  (options { greedy=false; }: .) * "-->" {selector.pop();};

And why do you have a WS rule in the HTMLTagLexer?  Do you need it there?

Monty

> -----Original Message-----
> From: johnclarke72 [mailto:johnclarke@hotmail.com]
> Sent: Monday, May 06, 2002 7:15 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: A question regarding Token Stream
> Multiplexing (aka "Lexer states")
> 
> 
> When I compile and run the application I then enter <!-- test --> and 
> expect to see :
> HTML Comment : <!-- test --> on the screen.  But all I see is :
> 
> line 1: unexpected token: <!-
> exception: antlr.TokenStreamRecognitionException: unexpected char: -
> 
> I cannot see what is causing the problem.  It is probably something 
> very simple that I have missed out.  I would be grateful for any 
> advice offered.
> 
> Best Wishes
> 
> John
> 
> The Grammar for the Text Lexer
> ==============================
> 
> // Import the Required Classes
> header
> {
>    import java.util.*;
>    import antlr.*;
> }
> 
> // The Class
> class TextLexer extends Lexer;
> 
> // Set the Options for the Lexer
> options
> {
>   k=3;                                  // Set the Look Ahead to 3 
> Characters
>   charVocabulary = '\1' .. '\377';      // Set the Lexer Character 
> Vocabulary
>   testLiterals = false;                 // Don't test against the 
> Literals table
> }
> 
> // The routine that will allow us to switch between Selectors
> {
>     // The current Selector
>     TokenStreamSelector selector;
> 
>     // The method that will enable us to switch between Selectors
>     public void setSelector(TokenStreamSelector tokenStreamSelector)
>     {
>         selector = tokenStreamSelector;
>     }
> 
> }
> 
> HTMLCOMMENT : "<!-" {selector.select("HTMLTagLexer");};
> 
> // TEXT
> WORD : ( ~ (' '|'\r'|'\n'|'\t'|'<') ) +;
> 
> // Ignore all White Space
> WS      :       (       ' '
>                 |       '\t'
> 		|	'\r' '\n' { newline(); }
> 		|	'\n' { newline(); }
> 		)
> 		{$setType(Token.SKIP);}	//ignore this token
> 	;
> 
> The Grammar for the Tag Lexer
> =============================
> // Import the Required Classes
> header
> {
>    import java.util.*;
>    import antlr.*;
> }
> 
> // The Class
> class HTMLTagLexer extends Lexer;
> 
> // Set the Options for the Lexer
> options
> {
>   k=3;                                  // Set the Look Ahead to 3 
> Characters
>   charVocabulary = '\1' .. '\377';      // Set the Lexer Character 
> Vocabulary
>   testLiterals = false;                 // Don't test against the 
> Literals table
>   importVocab = Tagged;                 // The Vocabulary to import
>   exportVocab = HTMLTags;               // Export the Vocabulary to 
> HTMLTags
> }
> 
> // The routine that will allow us to switch between Selectors
> {
>     // The current Selector
>     TokenStreamSelector selector;
> 
>     // The method that will enable us to switch between Selectors
>     public void setSelector(TokenStreamSelector tokenStreamSelector)
>     {
>         selector = tokenStreamSelector;
>     }
> 
> }
> 
> // HTML Comment Definition
> HTMLCOMMENT : "<!--" (options { greedy=false; }: .) * "-->";
> 
> // Ignore all White Space
> WS      :       (       ' '
>                 |       '\t'
> 		|	'\r' '\n' { newline(); }
> 		|	'\n' { newline(); }
> 		)
> 		{$setType(Token.SKIP);}	//ignore this token
> 	;
> 
> The Grammar for the Parser
> ==========================
> 
> // Import the Required Classes
> header
> {
>    import java.util.*;
>    import antlr.*;
> }
> 
> // The Class
> class HTMLParser extends Parser;
> 
> // Set the Options for the Parser
> options
> {
>   importVocab = Tagged;                 // The Vocabulary to import
> }
> 
> // Define the starting point for processing the HTML
> processData :
> (
>  text:WORD {System.out.println("TEXT " + text.getText());}
>  | comment:HTMLComment {System.out.println("HTML Comment " + 
> comment.getText());}
> )+;
> 
> The Java Application
> ====================
> 
> import java.io.*;
> import antlr.*;
> 
> // The HTMLParserApp Class
> class HTMLParserApp
> {
>  
>    // The Main function
>    public static void main(String[] args)
>    {
>       try
>       {
>          // Create the required Lexers
>          HTMLTagLexer htmlTagLexer = new HTMLTagLexer(new 
> DataInputStream(System.in));
>          TextLexer textLexer = new TextLexer
> (htmlTagLexer.getInputState());
> 
>          // Create the TokenStreamSelector and add the required 
> Lexers to it
>          TokenStreamSelector tokenStreamSelector = new 
> TokenStreamSelector();
>          tokenStreamSelector.addInputStream
> (htmlTagLexer,"HTMLTagLexer");
>          tokenStreamSelector.addInputStream(textLexer,"TextLexer");
> 
>          // Select the starting Lexer
>          tokenStreamSelector.select("TextLexer");
> 
>          // Add the TokenStreamSelector to the Required Lexers
>          htmlTagLexer.setSelector(tokenStreamSelector);
>          textLexer.setSelector(tokenStreamSelector);
> 
>          // Create the HTML Parser
>          HTMLParser htmlParser = new HTMLParser(tokenStreamSelector);
> 
>          // Process the HTML
>          htmlParser.processData();
>         
>       } catch(Exception e)
>         {
>           System.err.println("exception: "+e);
>         }
>     }
> }
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Mon May  6 10:50:50 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Re: A question  regarding Token Stream Multi plexing (aka "Lexer states")
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4911@memail03.bco-home.com>
Message-ID: <ab6fpq+684k@eGroups.com>

How can I modify it so that when the Text Lexer detects the <!-- 
start of a HTML comment how can I pass the whole comment (<!-- test --
>) through to the Tag Lexer ?

The white space rule is put in as a precaution.

Thanks

John

--- In antlr-interest@y..., mzukowski@y... wrote:
> In your main lexer you match "<!-" and then switch to 
HTMLTagLexer.  So what
> is left to match is "- test -->".  It then tries to match that 
first '-'
> against either the HTMLCOMMENT or WS rules but neither work, so it 
complains
> that it doesn't know what to do.  HTMLCOMMENT should probably be 
something
> like
> 
> HTMLCOMMENT :  (options { greedy=false; }: .) * "-->" {selector.pop
();};
> 
> And why do you have a WS rule in the HTMLTagLexer?  Do you need it 
there?
> 
> Monty
> 
> > -----Original Message-----
> > From: johnclarke72 [mailto:johnclarke@h...]
> > Sent: Monday, May 06, 2002 7:15 AM
> > To: antlr-interest@y...
> > Subject: [antlr-interest] Re: A question regarding Token Stream
> > Multiplexing (aka "Lexer states")
> > 
> > 
> > When I compile and run the application I then enter <!-- test --> 
and 
> > expect to see :
> > HTML Comment : <!-- test --> on the screen.  But all I see is :
> > 
> > line 1: unexpected token: <!-
> > exception: antlr.TokenStreamRecognitionException: unexpected 
char: -
> > 
> > I cannot see what is causing the problem.  It is probably 
something 
> > very simple that I have missed out.  I would be grateful for any 
> > advice offered.
> > 
> > Best Wishes
> > 
> > John
> > 
> > The Grammar for the Text Lexer
> > ==============================
> > 
> > // Import the Required Classes
> > header
> > {
> >    import java.util.*;
> >    import antlr.*;
> > }
> > 
> > // The Class
> > class TextLexer extends Lexer;
> > 
> > // Set the Options for the Lexer
> > options
> > {
> >   k=3;                                  // Set the Look Ahead to 
3 
> > Characters
> >   charVocabulary = '\1' .. '\377';      // Set the Lexer 
Character 
> > Vocabulary
> >   testLiterals = false;                 // Don't test against the 
> > Literals table
> > }
> > 
> > // The routine that will allow us to switch between Selectors
> > {
> >     // The current Selector
> >     TokenStreamSelector selector;
> > 
> >     // The method that will enable us to switch between Selectors
> >     public void setSelector(TokenStreamSelector 
tokenStreamSelector)
> >     {
> >         selector = tokenStreamSelector;
> >     }
> > 
> > }
> > 
> > HTMLCOMMENT : "<!-" {selector.select("HTMLTagLexer");};
> > 
> > // TEXT
> > WORD : ( ~ (' '|'\r'|'\n'|'\t'|'<') ) +;
> > 
> > // Ignore all White Space
> > WS      :       (       ' '
> >                 |       '\t'
> > 		|	'\r' '\n' { newline(); }
> > 		|	'\n' { newline(); }
> > 		)
> > 		{$setType(Token.SKIP);}	//ignore this token
> > 	;
> > 
> > The Grammar for the Tag Lexer
> > =============================
> > // Import the Required Classes
> > header
> > {
> >    import java.util.*;
> >    import antlr.*;
> > }
> > 
> > // The Class
> > class HTMLTagLexer extends Lexer;
> > 
> > // Set the Options for the Lexer
> > options
> > {
> >   k=3;                                  // Set the Look Ahead to 
3 
> > Characters
> >   charVocabulary = '\1' .. '\377';      // Set the Lexer 
Character 
> > Vocabulary
> >   testLiterals = false;                 // Don't test against the 
> > Literals table
> >   importVocab = Tagged;                 // The Vocabulary to 
import
> >   exportVocab = HTMLTags;               // Export the Vocabulary 
to 
> > HTMLTags
> > }
> > 
> > // The routine that will allow us to switch between Selectors
> > {
> >     // The current Selector
> >     TokenStreamSelector selector;
> > 
> >     // The method that will enable us to switch between Selectors
> >     public void setSelector(TokenStreamSelector 
tokenStreamSelector)
> >     {
> >         selector = tokenStreamSelector;
> >     }
> > 
> > }
> > 
> > // HTML Comment Definition
> > HTMLCOMMENT : "<!--" (options { greedy=false; }: .) * "-->";
> > 
> > // Ignore all White Space
> > WS      :       (       ' '
> >                 |       '\t'
> > 		|	'\r' '\n' { newline(); }
> > 		|	'\n' { newline(); }
> > 		)
> > 		{$setType(Token.SKIP);}	//ignore this token
> > 	;
> > 
> > The Grammar for the Parser
> > ==========================
> > 
> > // Import the Required Classes
> > header
> > {
> >    import java.util.*;
> >    import antlr.*;
> > }
> > 
> > // The Class
> > class HTMLParser extends Parser;
> > 
> > // Set the Options for the Parser
> > options
> > {
> >   importVocab = Tagged;                 // The Vocabulary to 
import
> > }
> > 
> > // Define the starting point for processing the HTML
> > processData :
> > (
> >  text:WORD {System.out.println("TEXT " + text.getText());}
> >  | comment:HTMLComment {System.out.println("HTML Comment " + 
> > comment.getText());}
> > )+;
> > 
> > The Java Application
> > ====================
> > 
> > import java.io.*;
> > import antlr.*;
> > 
> > // The HTMLParserApp Class
> > class HTMLParserApp
> > {
> >  
> >    // The Main function
> >    public static void main(String[] args)
> >    {
> >       try
> >       {
> >          // Create the required Lexers
> >          HTMLTagLexer htmlTagLexer = new HTMLTagLexer(new 
> > DataInputStream(System.in));
> >          TextLexer textLexer = new TextLexer
> > (htmlTagLexer.getInputState());
> > 
> >          // Create the TokenStreamSelector and add the required 
> > Lexers to it
> >          TokenStreamSelector tokenStreamSelector = new 
> > TokenStreamSelector();
> >          tokenStreamSelector.addInputStream
> > (htmlTagLexer,"HTMLTagLexer");
> >          tokenStreamSelector.addInputStream
(textLexer,"TextLexer");
> > 
> >          // Select the starting Lexer
> >          tokenStreamSelector.select("TextLexer");
> > 
> >          // Add the TokenStreamSelector to the Required Lexers
> >          htmlTagLexer.setSelector(tokenStreamSelector);
> >          textLexer.setSelector(tokenStreamSelector);
> > 
> >          // Create the HTML Parser
> >          HTMLParser htmlParser = new HTMLParser
(tokenStreamSelector);
> > 
> >          // Process the HTML
> >          htmlParser.processData();
> >         
> >       } catch(Exception e)
> >         {
> >           System.err.println("exception: "+e);
> >         }
> >     }
> > }
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> >


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue May  7 08:12:40 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] simple tree transformation
Message-ID: <170826586F3BD511910D0200C110AAA8032B491C@memail03.bco-home.com>

> From: Sebastian Danicic [mailto:mas01sd@gold.ac.uk]
> Would it be possible for you to show me a little example of a simple
> program transformation?
> 
> A good one would be something that converts:
> 
> if (B) s1 else s2 => if (B) s2 else s1
> 
> or something equally simple. Just so I understand how to 
> manipulate the AST.

I would make an antlr "grammar subclass" of GnuCTreeGrammar with just this
method in it, with the "if" section modified as below.  The subclass must be
marked with the "buildAST=true" option.  

The entire statementBody method must be here, you can't just subclass an
alternative.  Of course if you had a need to, you could refactor
GnuCTreeGrammar into one more suited to your needs.  For instance
statementBody could reference a few rules, one for plain statements, one for
iterations, one for jumps, one for labeled statments, one for selection
statements.  So if you were doing lots of different passes that just looked
at iteration statements you would only need to subclass the
iterationStatement rule.  

For the "if" alternative I turned off the automatic tree building since I
want to construct the tree in a different order.  If I were simply modifying
the nodes in place (changing their text) then I would let antlr build the
tree.  Once a tree is built, however, it is hard to swap those nodes around
because nodes contain within them links to their firstChild and nextSibling.
A common mistake is to let antlr build the tree and then swap two nodes
accidently creating a circular structure.

Then I labeled all the elements I want for my tree.  Note that antlr does
not have any positional notation for nodes--you can't say #1, #2, etc.
Finally I construct the tree as I want it, in this case with the statements
switched. 

statementBody
        :       SEMI                    // Empty statements

        |       compoundStatement       // Group of statements

        |       #(NStatementExpr expr)                    // Expressions

// Iteration statements:

        |       #( "while" expr statement )
        |       #( "do" statement expr )
        |       #( "for"
                expr expr expr
                statement
                )


// Jump statements:

        |       #( "goto" expr )
        |       "continue" 
        |       "break"
        |       #( "return" ( expr )? )


// Labeled statements:
        |       #( NLabel ID (statement)? )
        |       #( "case" expr (statement)? )
        |       #( "default" (statement)? )



// Selection statements:

        |       #(! ifst:"if"
                    e:expr s1:statement  
                    ( el:"else" s2:statement )?
                 ) {##=#(ifst, e, s2, el, s1);}
        |       #( "switch" expr statement )



        ;

Monty
www.codetransform.com

> -----Original Message-----
> From: Sebastian Danicic [mailto:mas01sd@gold.ac.uk]
> Sent: Tuesday, May 07, 2002 1:53 AM
> To: mzukowski@bco.com
> Subject: cgram
> 
> 
> Dear Monty,
> 
> I'm a member of the VASTT (http://www.brunel.ac.uk/~csstmmh2/vast/).
> We would like to write a slicer and other program 
> transformations for C
> using your system.
> 
> Would it be possible for you to show me a little example of a simple
> program transformation.
> 
> A good one would be something that converts:
> 
> if (B) s1 else s2 => if (B) s2 else s1
> 
> or something equally simple. Just so I understand how to 
> manipulate the
> AST.
> 
> Thank you very much in advance for your help.
> 
> Sebastian Danicic (http://www.mcs.gold.ac.uk/~mas01sd/)
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From andreasklimke at yahoo.com  Tue May  7 08:42:00 2002
From: andreasklimke at yahoo.com (andreasklimke)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Lexer Problem: Double meaning of single quote character
Message-ID: <ab8sk8+gvkp@eGroups.com>

Matlab allows the single quote character (') to have two meanings:
  1) The conjugate transpose operator (a matrix operation)
  2) Delimiter of a string literal

Example:
(A+B)' : Transpose of A+B
'hello' : String hello

The quote should be recognized as transpose operator only following
certain tokens, such as ), ], an indentifier IDENT, etc.
Otherwise, it should be recognized as the beginning of a string
literal. It looks like having lexer states/lexer multiplexing does not
really fit this problem, I guess there is a better way of doing it.

I have written the following lexer rules, which detect the transpose
after a right parenthesis correctly; however, instead of returning two
tokens RPAREN and CTRANSPOSE (this is what I really want), it looks
like I can only return ONE token indicating both (which I did below).

Another option: Is it possible for a rule that's being processed to
know the previously returned token, or can I somehow set a flag (e.g.
R_PAREN=true) so I can manually transport this information? This would
make this problem easy to solve.

A little hint to point me in the right direction would be great.

- Andreas



RPAREN_OR_CTRANSPOSE
    :   RPAREN                      { $setType(RPAREN); }
    |   (RPAREN '\'') => CTRANSPOSE { $setType(RPAREN_CTRANSPOSE); }
    ;

protected
CTRANSPOSE
    :   (RPAREN '\'')
        { System.out.println("Matched transpose"); }
    ;

protected
RPAREN	: ')' ;

STRING_LITERAL
    :   '\'' (~'\'')* '\''
    ;


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue May  7 09:21:34 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Lexer Problem: Double meaning of single quot
	e character
Message-ID: <170826586F3BD511910D0200C110AAA8032B491D@memail03.bco-home.com>

Maybe the easiest way would be to add a lookback buffer.  Something like the
class below.  It works for k=1.  If you need k=2 or higher then let me look
at the complete lexer to see if it will work.  At k=2 antlr was ignoring the
synpred because it had stuff in LA(2) to disambiguate with, but I'm not sure
if it was a bug or artifact of having this tiny toy grammar.

class MatlabLexer extends Lexer;
options
  {
    k = 1;
  }

{
  int lastMatched=null;  

  protected Token makeToken(int t)
  {
    if ( t != Token.SKIP) {
        lastMatched=t;
    }
    Token tok = (Token) super.makeToken(t);

    return tok;
  }

  protected bool transposePrefixMatched() 
  {
    return lastMatched=RPAREN | lastMatched=IDENT;//etc.
  }
}

RPAREN	: ')' ;

STRING_LITERAL
    : ('\'')=>{transposePrefixMatched()}? '\'' {$setType(TRANSPOSE);}  
      | '\'' (~'\'')* '\''
    ;

Monty
www.codetransform.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue May  7 12:39:17 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] RE: cgram
Message-ID: <170826586F3BD511910D0200C110AAA8032B491E@memail03.bco-home.com>

> It looks like you've done this by slighlty changing the parser.
> Am I right? Or have I misunderstood?
> 
> What I was expecting to do was to use your GnuCTreeParser to 
> create the
> AST, write my own functions which manipulate the AST, and 
> then use your
> GnuCEmitter to tranlsate back to source code. 
> 
> I think I need some functions for pulling apart and putting 
> together your
> AST. Is this a sensible approach?
>

Excellent question.  I keep forgetting that people are going to look at this
toolkit who aren't familiar with antlr.

You could in fact write your own routines to manipulate the AST, but there's
a better way.  You'll notice that I subclassed GnuCTreeParser, not
GnuCParser.  The tree grammar itself defines the exact structure of the
trees, which makes it easy to pick and choose the structures you want to
deal with.  

Tree grammars are a powerful abstraction in antlr.  The argument goes: why
write a parser by hand when you have a grammatical tool like antlr?  Now
that you're manipulating trees why write it by hand when you can use antlr's
tree grammars.  Tree parsing is special because a tree has two
dimensions--child and sibling.  For this reason it is limited to k=1.  When
I created the C AST I took care to make the tree well structured and easily
parsable.  Studying the parser and the tree parser side by side you will see
the latter to be much more clear and concise.

A tree grammar can also give you the proper context of the tree structure
you are analyzing.  For instance if you wanted to do something special with
only those expressions used in a case statement, you could write some rules
like:

statementBody:
...
#( "case" caseExpr (statement)? )
...

caseExpr: expr {your analysis here of the case expr...;} ;

Now only expressions that are for the case decision will ever make it
through caseExpr, and you can do your special analysis in that rule.  

The reason I created GnuCTreeParser was to have a grammar to subclass from.
Each pass of a transformation system would be a separate subclass of it.
The first passes are usually just for analysis, and they have the option
"buildAST=false" so they don't alter the tree.  Transformation passes have
the option "buildAST=true" since they are changing the tree.  The chain of
transformations is controlled by you feeding the resulting tree into the
next stage, the final stage probably being to the GnuCTreeEmitter for source
output.  During development you can feed the resulting tree into
GnuCTreeParser after every stage to detect malformed trees.

Do you have any more specific examples of analysis or transformation that I
can try to explain in terms of tree grammars?  If so I would very much like
to continue this discussion on the antlr-interest@yahoogroups.com list or in
the antlr forum http://www.jguru.com/forums/ANTLR.  I suspect there are
others out there with similar questions.  It might make a good FAQ entry.

Monty
www.codetransform.com

> -----Original Message-----
> From: Sebastian Danicic [mailto:mas01sd@gold.ac.uk]
> Sent: Tuesday, May 07, 2002 10:33 AM
> To: mzukowski@yci.com
> Subject: RE: cgram
> 
> 
> Dear Monty,
> 
> It looks like you've done this by slighlty changing the parser.
> Am I right? Or have I misunderstood?
> 
> What I was expecting to do was to use your GnuCTreeParser to 
> create the
> AST, write my own functions which manipulate the AST, and 
> then use your
> GnuCEmitter to tranlsate back to source code. 
> 
> I think I need some functions for pulling apart and putting 
> together your
> AST. Is this a sensible approach?
> 
> thanks again
> 
> Sebastian
> 
> 
> 
> On Tue, 7 May 2002 mzukowski@yci.com wrote:
> 
> > Sebastian, with your permission I will post the following to the
> > antlr-interest list.  If you decline permission I will 
> simply post the
> > question and answer without references to your name, email 
> or website.
> > 
> > > From: Sebastian Danicic [mailto:mas01sd@gold.ac.uk]
> > > Would it be possible for you to show me a little example 
> of a simple
> > > program transformation?
> > > 
> > > A good one would be something that converts:
> > > 
> > > if (B) s1 else s2 => if (B) s2 else s1
> > > 
> > > or something equally simple. Just so I understand how to 
> > > manipulate the AST.
> > 
> > I would make an antlr "grammar subclass" of GnuCTreeGrammar 
> with just this
> > method in it, with the "if" section modified as below.  The 
> subclass must be
> > marked with the "buildAST=true" option.  
> > 
> > The entire statementBody method must be here, you can't 
> just subclass an
> > alternative.  Of course if you had a need to, you could refactor
> > GnuCTreeGrammar into one more suited to your needs.  For instance
> > statementBody could reference a few rules, one for plain 
> statements, one for
> > iterations, one for jumps, one for labeled statments, one 
> for selection
> > statements.  So if you were doing lots of different passes 
> that just looked
> > at iteration statements you would only need to subclass the
> > iterationStatement rule.  
> > 
> > For the "if" alternative I turned off the automatic tree 
> building since I
> > want to construct the tree in a different order.  If I were 
> simply modifying
> > the nodes in place (changing their text) then I would let 
> antlr build the
> > tree.  Once a tree is built, however, it is hard to swap 
> those nodes around
> > because nodes contain within them links to their firstChild 
> and nextSibling.
> > A common mistake is to let antlr build the tree and then 
> swap two nodes
> > accidently creating a circular structure.
> > 
> > Then I labeled all the elements I want for my tree.  Note 
> that antlr does
> > not have any positional notation for nodes--you can't say 
> #1, #2, etc.
> > Finally I construct the tree as I want it, in this case 
> with the statements
> > switched. 
> > 
> > statementBody
> >         :       SEMI                    // Empty statements
> > 
> >         |       compoundStatement       // Group of statements
> > 
> >         |       #(NStatementExpr expr)                    
> // Expressions
> > 
> > // Iteration statements:
> > 
> >         |       #( "while" expr statement )
> >         |       #( "do" statement expr )
> >         |       #( "for"
> >                 expr expr expr
> >                 statement
> >                 )
> > 
> > 
> > // Jump statements:
> > 
> >         |       #( "goto" expr )
> >         |       "continue" 
> >         |       "break"
> >         |       #( "return" ( expr )? )
> > 
> > 
> > // Labeled statements:
> >         |       #( NLabel ID (statement)? )
> >         |       #( "case" expr (statement)? )
> >         |       #( "default" (statement)? )
> > 
> > 
> > 
> > // Selection statements:
> > 
> >         |       #(! ifst:"if"
> >                     e:expr s1:statement  
> >                     ( el:"else" s2:statement )?
> >                  ) {##=#(ifst, e, s2, el, s1);}
> >         |       #( "switch" expr statement )
> > 
> > 
> > 
> >         ;
> > 
> > Monty
> > 
> > > -----Original Message-----
> > > From: Sebastian Danicic [mailto:mas01sd@gold.ac.uk]
> > > Sent: Tuesday, May 07, 2002 1:53 AM
> > > To: mzukowski@bco.com
> > > Subject: cgram
> > > 
> > > 
> > > Dear Monty,
> > > 
> > > I'm a member of the VASTT 
> (http://www.brunel.ac.uk/~csstmmh2/vast/).
> > > We would like to write a slicer and other program 
> > > transformations for C
> > > using your system.
> > > 
> > > Would it be possible for you to show me a little example 
> of a simple
> > > program transformation.
> > > 
> > > A good one would be something that converts:
> > > 
> > > if (B) s1 else s2 => if (B) s2 else s1
> > > 
> > > or something equally simple. Just so I understand how to 
> > > manipulate the
> > > AST.
> > > 
> > > Thank you very much in advance for your help.
> > > 
> > > Sebastian Danicic (http://www.mcs.gold.ac.uk/~mas01sd/)
> > > 
> > > 
> > 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Tue May  7 13:04:54 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] tree parser example PDF docs and ANTLR Patterns (was Re: the tree parser exampl)
In-Reply-To: <15573.26173.201888.793070@non.non.net>
Message-ID: <ab9c16+c6qp@eGroups.com>

--- In antlr-interest@y..., "John D. Mitchell" <johnm-antlr@n...> 
wrote:
> 	Do NOT send large files to mailing lists!  Just put the files 
up on
> 	a ftp/http site and provide the URL for the files.

Oops, my bad.  I forgot to remove the browse database file from the 
archive before posting it, which made a 92KB zip file jump to 232KB.  
Apologies.

> Are the specs available in something that is readable (as opposed 
to .rtf)
> by people not supporting Microsoft?

Though I'm tempted to say "no" (as this is a Win32-targeted project), 
I went ahead and put up PDF versions.  They are available from the 
same page (http://www.moselle.com/jsrs/protoc/protoc.html).

<aside>
Also, check out http://www.nllgg.nl/Ted/ for RTF on Unix.  File 
formats, like all inanimate objects, are inherently neither good nor 
evil; it's just the apps that make them so.  :-)
</aside>

One of these days I'll update the specs.  Things have changed in the 
{C} world a LOT in the last couple of weeks (including the entire 
read/write slot resolution system, which is kinda the whole point of 
the language).

Speaking of medium-sized ANTLR projects, has anyone else thought 
about putting together an ANTLR Patterns collection?  A few that I'm 
thinking about, to whit:

* Expression parsers with precedence
* Successively applied tree parsers for optimization/transformation 
sequences
* Text scanners (like Ter's "really big lookahead" article) vs...
* Compilers
* Interpreters

What do people think?

JSRS


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Tue May  7 14:08:35 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] tree parser example PDF docs and ANTLR Patterns (was Re: the tree parser exampl)
In-Reply-To: <ab9c16+c6qp@eGroups.com>
Message-ID: <ab9foj+e7bq@eGroups.com>

--- In antlr-interest@y..., "jsrs701" <jsrs701@y...> wrote:
> Speaking of medium-sized ANTLR projects, has anyone else thought 
> about putting together an ANTLR Patterns collection?  A few that I'm 

I think that your idea is good, but not quite on target.  I think that 
the items you mention tend to have to do with grammar structuring 
(a catalog of refactoring principles would be useful), rewriting, and 
interfacing to backend processors.  These are all worthy topics.  Some 
specifics follow.

> thinking about, to whit:
> 
> * Expression parsers with precedence

This is a tree structuring issue, and the principle is "structure your 
grammar so that the syntax trees reflect operator precedence".  The 
Calc examples demonstrate this.

> * Successively applied tree parsers for optimization/transformation 
> sequences

This is on applying rewrite rules for grammar transformation.  There 
has been quite a bit of research on rewriting, and it would be 
interesting to interface the BURG (bottom up rewrite 
generator)algorithm with ANTLR to do the "match pattern and rewrite" 
approach to rule and tree transformation (as opposed to ANTLR's match 
rule and rewrite according to user annotations).

BTW, I just received a letter that okays release of my rewriting 
support and tree grammar generation extensions under copyright.  Now I 
have to find out what else I need to do to actually release it, but I 
can hope for an early June release.  This is probably a good starting 
point for incorporating meta-level rewrite rules--the extensions 
generate a syntax tree for the output grammar from an input grammar.

> * Text scanners (like Ter's "really big lookahead" article) vs...
> * Compilers

This is a matter of interfacing to a backend.  An interesting start in 
this direction would be for someone to generate RTL from a transformed 
ANTLR syntax tree.  Monty's GNU C grammar is much cleaner than the GNU 
C flex/bison (at least the gcc front end used to be a case of "abandon 
hope all ye who enter here"--I haven't looked at the source since a 
1.xx release) and an ANTLR C++ front end would be a major improvement.

> * Interpreters

I don't know of an interpreter written in ANTLR, although Ter has 
provided a few hooks for the purpose.  It would be interesting to hear 
of any experiences with ANTLR in this area.

> 
> What do people think?
> 
> JSRS

--Loring Craymer


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sunshine at public.kherson.ua  Tue May  7 14:21:57 2002
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] ... and ANTLR Patterns
In-Reply-To: <ab9c16+c6qp@eGroups.com>
Message-ID: <B8FE1DE4.13650%sunshine@public.kherson.ua>

on 5/7/02 23:04, jsrs701 at jsrs701@yahoo.com wrote:

> Speaking of medium-sized ANTLR projects, has anyone else thought
> about putting together an ANTLR Patterns collection?  A few that I'm
> thinking about, to whit:
> 
> * Expression parsers with precedence
> * Successively applied tree parsers for optimization/transformation
> sequences
> * Text scanners (like Ter's "really big lookahead" article) vs...
> * Compilers
> * Interpreters
> 
> What do people think?

This will be great STEP for ANTLR.

If continue this logic...I again want remind to Terr, that I was very
disappointed by "inheritance" of ANTLR.

When I have read about "inheritance" of grammar I was sure that I can have
few grammars that extend one other (like C++ classes), and I was going to
have 

    grammar A
        -----> grammar B
        -----> grammar C

All in one application. I did expect to see that ANTL will generate 3
classes:
        

    class A_Parser
    class B_Parser : public A_parser
    class C_Parser : public A_parser
    
Instead I have to see only B and C classes that just CONTAIN common part of
A grammar :-(

Terr, you need ... No, you MUST invent how produce classes as I above.

Also will be great to have EASY way include that PATTERNS of grammar by
simple "include" and later referencing of a root rule of pattern.
    

-- 
Best regards,
Ruslan Zasukhin

-------------------------
Paradigma.

e-mail: ruslan@paradigmasoft.com
web   : http://www.paradigmasoft.com

To subscribe to the Valentina mail list
send a letter to valentina-on@lists.macserve.net



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue May  7 14:50:51 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] tree parser example PDF docs and ANTLR Patte
	rns (was Re: the tree parser exampl)
Message-ID: <170826586F3BD511910D0200C110AAA8032B4922@memail03.bco-home.com>

> This is on applying rewrite rules for grammar transformation.  There 
> has been quite a bit of research on rewriting, and it would be 
> interesting to interface the BURG (bottom up rewrite 
> generator)algorithm with ANTLR to do the "match pattern and rewrite" 
> approach to rule and tree transformation (as opposed to ANTLR's match 
> rule and rewrite according to user annotations).

Antlr also does have some tree matching routines built in.  See the
implementations of the methods below in antlr.BaseAST
    public boolean equals(AST t);
    public boolean equalsList(AST t);
    public boolean equalsListPartial(AST t);
    public boolean equalsTree(AST t);
    public boolean equalsTreePartial(AST t);
    public ASTEnumeration findAll(AST tree);
    public ASTEnumeration findAllPartial(AST subtree);

I've not needed these for my projects but would be interested in hearing how
people use them.  

> BTW, I just received a letter that okays release of my rewriting 
> support and tree grammar generation extensions under 
> copyright.  Now I 
> have to find out what else I need to do to actually release it, but I 
> can hope for an early June release.  This is probably a good starting 
> point for incorporating meta-level rewrite rules--the extensions 
> generate a syntax tree for the output grammar from an input grammar.

That's great news!

> > * Compilers
> 
> This is a matter of interfacing to a backend.  An interesting 
> start in 
> this direction would be for someone to generate RTL from a 
> transformed 
> ANTLR syntax tree.  Monty's GNU C grammar is much cleaner 
> than the GNU 
> C flex/bison (at least the gcc front end used to be a case of 
> "abandon 
> hope all ye who enter here"--I haven't looked at the source since a 
> 1.xx release) and an ANTLR C++ front end would be a major improvement.

It was pretty ugly.  I'm no YACC expert, so I gave up trying to deduce the
actual grammar from the flex/bison code.  I understand that David Wigg and
his group are porting it from Java to C++.  The Aspect C tool is being
written with it.  It's a source to source tool but should have some
interesting analysis and transformations going on in it.

 
> > * Interpreters
> 
> I don't know of an interpreter written in ANTLR, although Ter has 
> provided a few hooks for the purpose.  It would be 
> interesting to hear 
> of any experiences with ANTLR in this area.

Sinan has written a BASIC interpreter.  It's the tinybasic example in the
antlr distribution.

Monty
www.codetransform.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From awinkler at indra.com  Tue May  7 16:10:17 2002
From: awinkler at indra.com (catharinaamber)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Improving Tree Walker Execution for Loops
Message-ID: <ab9msp+5obq@eGroups.com>

Hi,

I'm looking for suggestions for how I can improve execution time for
loops in my tree walker.  Here are the statements for my while loop:

while_statement :
  #(WHILE a : CONDITION
      {
        in_loop = true;

        while (1 == while_condition(a, 1))
        {}

        in_loop = false;
      }
    )
  ;


while_condition[int f] returns [int yes]
{
    yes = 0;
} :
  c : CONDITION cb : CODE_BLOCK
    {
      yes = cond (c)->getInt();
#ifdef EVALUATOR_DEBUG
      cout << "f = " << f << " yes = " << yes << endl;
#endif

      if (f == yes)
      {
        try
        {
          code_block (cb);
        }
        catch (BreakStatementException &ex)
        {
          // If there is a break statement in the loop, exit.
          yes = 0;
        }
        catch (ContinueStatementException &ex)
        {
          // If there is a continue statement in the loop,
          // continue to the test/condition.  Nothing happens
          // here, we just catch the exception that stops 
          // the loop control flow.
        }
      }
    }
  ;

code_block returns [Value *ret_val]:
  #(CODE_BLOCK ret_val = statement)
      {
#ifdef EVALUATOR_DEBUG
        cout << "      code_block return val: " << *ret_val << endl;
#endif
      }
  ;

The syntax is like C.  The loops typically iterate 2000 times, and
there are 25+ loops.

Thanks for any suggestions.

--Anna


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Tue May  7 16:41:44 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] tree parser example PDF docs and ANTLR Patte rns (was Re: the tree parser exampl)
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4922@memail03.bco-home.com>
Message-ID: <ab9ono+c0id@eGroups.com>

--- In antlr-interest@y..., mzukowski@y... wrote:
> Antlr also does have some tree matching routines built in.  See the
> implementations of the methods below in antlr.BaseAST
>     public boolean equals(AST t);
>     public boolean equalsList(AST t);
>     public boolean equalsListPartial(AST t);
>     public boolean equalsTree(AST t);
>     public boolean equalsTreePartial(AST t);
>     public ASTEnumeration findAll(AST tree);
>     public ASTEnumeration findAllPartial(AST subtree);
> 
> I've not needed these for my projects but would be interested in 
hearing how
> people use them.  
> 

These are actually translations of SORCERER match utilities.  I'd be 
surprised if they are in active use: if I remember correctly, Ter used 
them in some of the early SORCERER examples, but they became unused as 
SORCERER matured.  After Gary Funck finished hammering on SORCERER, it 
was a pretty decent tool.  I was surprised to encounter them in ANTLR 
2.

For the findAll and findAllPartial methods to be very useful for 
rewriting, they would need to return pointers to parents or left 
siblings of the matched trees so that references could be patched.

Cheers!

--Loring

> Monty
> www.codetransform.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed May  8 08:39:56 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] ... and ANTLR Patterns
In-Reply-To: <B8FE1DE4.13650%sunshine@public.kherson.ua>
Message-ID: <D91165B7-6299-11D6-A07A-0030653DE0D6@jguru.com>


On Tuesday, May 7, 2002, at 02:21  PM, Ruslan Zasukhin wrote:
> If continue this logic...I again want remind to Terr, that I was very
> disappointed by "inheritance" of ANTLR.

Ah...the "inheritance is screwed up" guy :)  Howdy.  Long time no chat.

I think you'll find by my prior letters in this list that grammar 
inheritance cannot operate exactly like class inheritance...i even made 
a FAQ entry:

http://www.jguru.com/faq/view.jsp?EID=68255

So you are bound to be disappointed if you don't realize what is going 
on.  The crux of the problem is that if you, for example, modify what an 
expr is by subclassing then you necessarily modify the lookahead sets 
for a whole bunch of other rules.  I MUST...repeat MUST reproduce this 
rule to have it's altered lookahead sets useful to your subclass.  Rules 
whose sets do not change are also included because I was too busy to 
figure out which had changed ;)

BTW, inheritance even in java is a fancy word for "include plus 
override", right?  Just because you can see it happen in antlr shouldn't 
bother you at all.

I trust this is the last we'll hear about this? ;)

Terence

> When I have read about "inheritance" of grammar I was sure that I can 
> have
> few grammars that extend one other (like C++ classes), and I was going 
> to
> have
>
>     grammar A
>         -----> grammar B
>         -----> grammar C
>
> All in one application. I did expect to see that ANTL will generate 3
> classes:
>
>
>     class A_Parser
>     class B_Parser : public A_parser
>     class C_Parser : public A_parser
>
> Instead I have to see only B and C classes that just CONTAIN common 
> part of
> A grammar :-(
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed May  8 08:42:49 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] tree parser example PDF docs and ANTLR Patte rns (was Re: the tree parser exampl)
In-Reply-To: <ab9ono+c0id@eGroups.com>
Message-ID: <400EBEEF-629A-11D6-A07A-0030653DE0D6@jguru.com>


On Tuesday, May 7, 2002, at 04:41  PM, lgcraymer wrote:

> --- In antlr-interest@y..., mzukowski@y... wrote:
>> Antlr also does have some tree matching routines built in.  See the
>> implementations of the methods below in antlr.BaseAST
>>     public boolean equals(AST t);
>>     public boolean equalsList(AST t);
>>     public boolean equalsListPartial(AST t);
>>     public boolean equalsTree(AST t);
>>     public boolean equalsTreePartial(AST t);
>>     public ASTEnumeration findAll(AST tree);
>>     public ASTEnumeration findAllPartial(AST subtree);
>>
>> I've not needed these for my projects but would be interested in
> hearing how
>> people use them.
>>
>
> These are actually translations of SORCERER match utilities.  I'd be
> surprised if they are in active use: if I remember correctly, Ter used
> them in some of the early SORCERER examples, but they became unused as
> SORCERER matured.  After Gary Funck finished hammering on SORCERER, it
> was a pretty decent tool.  I was surprised to encounter them in ANTLR
> 2.
>
> For the findAll and findAllPartial methods to be very useful for
> rewriting, they would need to return pointers to parents or left
> siblings of the matched trees so that references could be patched.

Yeah, there was a tree "scanf" routine in old days that returned 
pointers to various nodes like this:

tscant("#(DOT %1:ID %2:ID)", &a, &b);

that would set pointers a and b for you :)  Handy.  It was kinda like 
SORCERER interpreted.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed May  8 08:47:02 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] simple tree transformation
Message-ID: <170826586F3BD511910D0200C110AAA8032B4927@memail03.bco-home.com>

I made an error in this example.  There is always the possibility of an if
without an else.  So this:
>         |       #(! ifst:"if"
>                     e:expr s1:statement  
>                     ( el:"else" s2:statement )?
>                  ) {##=#(ifst, e, s2, el, s1);}

Should have the action in the else closure:

      |       #(! ifst:"if"
                  e:expr s1:statement  
                  ( el:"else" s2:statement {##=#(ifst, e, s2, el, s1);})?
               ) 

Monty

www.codetransform.com

> -----Original Message-----
> From: mzukowski@yci.com [mailto:mzukowski@yci.com]
> Sent: Tuesday, May 07, 2002 8:13 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] simple tree transformation
> 
> 
> > From: Sebastian Danicic [mailto:mas01sd@gold.ac.uk]
> > Would it be possible for you to show me a little example of a simple
> > program transformation?
> > 
> > A good one would be something that converts:
> > 
> > if (B) s1 else s2 => if (B) s2 else s1
> > 
> > or something equally simple. Just so I understand how to 
> > manipulate the AST.
> 
> I would make an antlr "grammar subclass" of GnuCTreeGrammar 
> with just this
> method in it, with the "if" section modified as below.  The 
> subclass must be
> marked with the "buildAST=true" option.  
> 
> The entire statementBody method must be here, you can't just 
> subclass an
> alternative.  Of course if you had a need to, you could refactor
> GnuCTreeGrammar into one more suited to your needs.  For instance
> statementBody could reference a few rules, one for plain 
> statements, one for
> iterations, one for jumps, one for labeled statments, one for 
> selection
> statements.  So if you were doing lots of different passes 
> that just looked
> at iteration statements you would only need to subclass the
> iterationStatement rule.  
> 
> For the "if" alternative I turned off the automatic tree 
> building since I
> want to construct the tree in a different order.  If I were 
> simply modifying
> the nodes in place (changing their text) then I would let 
> antlr build the
> tree.  Once a tree is built, however, it is hard to swap 
> those nodes around
> because nodes contain within them links to their firstChild 
> and nextSibling.
> A common mistake is to let antlr build the tree and then swap 
> two nodes
> accidently creating a circular structure.
> 
> Then I labeled all the elements I want for my tree.  Note 
> that antlr does
> not have any positional notation for nodes--you can't say #1, #2, etc.
> Finally I construct the tree as I want it, in this case with 
> the statements
> switched. 
> 
> statementBody
>         :       SEMI                    // Empty statements
> 
>         |       compoundStatement       // Group of statements
> 
>         |       #(NStatementExpr expr)                    // 
> Expressions
> 
> // Iteration statements:
> 
>         |       #( "while" expr statement )
>         |       #( "do" statement expr )
>         |       #( "for"
>                 expr expr expr
>                 statement
>                 )
> 
> 
> // Jump statements:
> 
>         |       #( "goto" expr )
>         |       "continue" 
>         |       "break"
>         |       #( "return" ( expr )? )
> 
> 
> // Labeled statements:
>         |       #( NLabel ID (statement)? )
>         |       #( "case" expr (statement)? )
>         |       #( "default" (statement)? )
> 
> 
> 
> // Selection statements:
> 
>         |       #(! ifst:"if"
>                     e:expr s1:statement  
>                     ( el:"else" s2:statement )?
>                  ) {##=#(ifst, e, s2, el, s1);}
>         |       #( "switch" expr statement )
> 
> 
> 
>         ;
> 
> Monty
> www.codetransform.com
> 
> > -----Original Message-----
> > From: Sebastian Danicic [mailto:mas01sd@gold.ac.uk]
> > Sent: Tuesday, May 07, 2002 1:53 AM
> > To: mzukowski@bco.com
> > Subject: cgram
> > 
> > 
> > Dear Monty,
> > 
> > I'm a member of the VASTT (http://www.brunel.ac.uk/~csstmmh2/vast/).
> > We would like to write a slicer and other program 
> > transformations for C
> > using your system.
> > 
> > Would it be possible for you to show me a little example of a simple
> > program transformation.
> > 
> > A good one would be something that converts:
> > 
> > if (B) s1 else s2 => if (B) s2 else s1
> > 
> > or something equally simple. Just so I understand how to 
> > manipulate the
> > AST.
> > 
> > Thank you very much in advance for your help.
> > 
> > Sebastian Danicic (http://www.mcs.gold.ac.uk/~mas01sd/)
> > 
> > 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sunshine at public.kherson.ua  Wed May  8 09:44:38 2002
From: sunshine at public.kherson.ua (Ruslan Zasukhin)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] ... and ANTLR Patterns
In-Reply-To: <D91165B7-6299-11D6-A07A-0030653DE0D6@jguru.com>
Message-ID: <B8FF2E11.136FC%sunshine@public.kherson.ua>

on 5/8/02 18:39, Terence Parr at parrt@jguru.com wrote:

> On Tuesday, May 7, 2002, at 02:21  PM, Ruslan Zasukhin wrote:
>> If continue this logic...I again want remind to Terr, that I was very
>> disappointed by "inheritance" of ANTLR.
> 
> Ah...the "inheritance is screwed up" guy :)  Howdy.  Long time no chat.

Hi Terr,
 
> I think you'll find by my prior letters in this list that grammar
> inheritance cannot operate exactly like class inheritance...i even made
> a FAQ entry:
> 
> http://www.jguru.com/faq/view.jsp?EID=68255
> 
> So you are bound to be disappointed if you don't realize what is going
> on.  The crux of the problem is that if you, for example, modify what an
> expr is by subclassing then you necessarily modify the lookahead sets
> for a whole bunch of other rules.  I MUST...repeat MUST reproduce this
> rule to have it's altered lookahead sets useful to your subclass.  Rules
> whose sets do not change are also included because I was too busy to
> figure out which had changed ;)

I see your point, but

1) you mean that expr can be overridden in sub-grammar ?
Or you mean that a sub-grammar ALWAYS change lookahed set?

In the first case you can PROHIBIT overridden.
In the second you can try resolve task sending lookahead sets as parameter.

> BTW, inheritance even in java is a fancy word for "include plus
> override", right?  Just because you can see it happen in antlr shouldn't
> bother you at all.
> 
> I trust this is the last we'll hear about this? ;)

:-) I don't know.

I was going to have simple Expr parser, and its subclass -- SQL parser.

Of course I can use single C++ class, and use Expr() as entry point for the
first parser.... 

I just do not like possible repetition of code in case we really have
several subclasses.


-- 
Best regards,
Ruslan Zasukhin

-------------------------
Paradigma.

e-mail: ruslan@paradigmasoft.com
web   : http://www.paradigmasoft.com

To subscribe to the Valentina mail list
send a letter to valentina-on@lists.macserve.net



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From praveen_c at yahoo.com  Wed May  8 13:33:21 2002
From: praveen_c at yahoo.com (praveen_c)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Match until "<@"
Message-ID: <abc22h+qa59@eGroups.com>

Hi all,

Just wondering what is wrong with the following Lexer rule. I'm 
trying to match all characters until reach the combination "<@" 
including white space, new lines...everything.

MULTI_LINE_TEXT: ( options { greedy=false; } : .)* (~("<@"));

It gives me wierd errors. Is this the right way to specify when I 
want to have something matched until I see a combination. If you 
think there is a better way, please let me know.

Thanks in advance for any help,
Praveen.





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed May  8 13:42:36 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Match until "<@"
Message-ID: <170826586F3BD511910D0200C110AAA8032B4931@memail03.bco-home.com>

You are asking it to match until it doesn't see "<@".  How about:

MULTI_LINE_TEXT: ( options { greedy=false; } : .)* "<@";

Monty

> -----Original Message-----
> From: praveen_c [mailto:praveen_c@yahoo.com]
> Sent: Wednesday, May 08, 2002 1:33 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Match until "<@"
> 
> 
> Hi all,
> 
> Just wondering what is wrong with the following Lexer rule. I'm 
> trying to match all characters until reach the combination "<@" 
> including white space, new lines...everything.
> 
> MULTI_LINE_TEXT: ( options { greedy=false; } : .)* (~("<@"));
> 
> It gives me wierd errors. Is this the right way to specify when I 
> want to have something matched until I see a combination. If you 
> think there is a better way, please let me know.
> 
> Thanks in advance for any help,
> Praveen.
> 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From praveen_c at yahoo.com  Wed May  8 15:24:40 2002
From: praveen_c at yahoo.com (praveen_c)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Re: Match until "<@"
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4931@memail03.bco-home.com>
Message-ID: <abc8j8+lc61@eGroups.com>

Monty,

Wow that response was quick! Thanks for the reply. But I donot wan't 
the "<@" piece to be included in the current token. This should be 
part of another token. Should I use !"<@" then?

Thanks again,
Praveen.

--- In antlr-interest@y..., mzukowski@y... wrote:
> You are asking it to match until it doesn't see "<@".  How about:
> 
> MULTI_LINE_TEXT: ( options { greedy=false; } : .)* "<@";
> 
> Monty
> 
> > -----Original Message-----
> > From: praveen_c [mailto:praveen_c@y...]
> > Sent: Wednesday, May 08, 2002 1:33 PM
> > To: antlr-interest@y...
> > Subject: [antlr-interest] Match until "<@"
> > 
> > 
> > Hi all,
> > 
> > Just wondering what is wrong with the following Lexer rule. I'm 
> > trying to match all characters until reach the combination "<@" 
> > including white space, new lines...everything.
> > 
> > MULTI_LINE_TEXT: ( options { greedy=false; } : .)* (~("<@"));
> > 
> > It gives me wierd errors. Is this the right way to specify when I 
> > want to have something matched until I see a combination. If you 
> > think there is a better way, please let me know.
> > 
> > Thanks in advance for any help,
> > Praveen.
> > 
> > 
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> >


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed May  8 16:50:49 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Match until "<@"
In-Reply-To: <abc22h+qa59@eGroups.com>
Message-ID: <6C69557C-62DE-11D6-B0EB-0030653DE0D6@jguru.com>


On Wednesday, May 8, 2002, at 01:33  PM, praveen_c wrote:

> Hi all,
>
> Just wondering what is wrong with the following Lexer rule. I'm
> trying to match all characters until reach the combination "<@"
> including white space, new lines...everything.
>
> MULTI_LINE_TEXT: ( options { greedy=false; } : .)* (~("<@"));
>
> It gives me wierd errors. Is this the right way to specify when I
> want to have something matched until I see a combination. If you
> think there is a better way, please let me know.

What is the k value?  Has to be 2 at least.  Also, note that you have 
asked it to match anything until it sees NOT <@.  If you don't want 
the <@ in this token, you have a problem that is hard for a lexer since 
any token can follow MULTI_LINE_TEXT in principle.  You should probably 
use a semantic predicate that tells it how to break out:

MLT : ( {!(LA(1)=='<'&&LA(2)=='@')}? . ) ;

That will work, but I dislike syntax checks in semantic predicates.  
Seems this "break out of the loop" issue came up before...might check 
the archives.

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu May  9 10:34:54 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] ... and ANTLR Patterns
In-Reply-To: <B8FF2E11.136FC%sunshine@public.kherson.ua>
Message-ID: <1330DAAA-6373-11D6-B0EB-0030653DE0D6@jguru.com>

On Wednesday, May 8, 2002, at 09:44  AM, Ruslan Zasukhin wrote:
> I see your point, but
>
> 1) you mean that expr can be overridden in sub-grammar ?
> Or you mean that a sub-grammar ALWAYS change lookahed set?

Both.  By overriding you can change the lookahead of other rules.

> In the first case you can PROHIBIT overridden.

What's the point of subclassing if you can't override? ;)

> In the second you can try resolve task sending lookahead sets as 
> parameter.

That is not always possible because I often encode sets in raw java like 
LA(1)==IDENT for efficiency.  You are suggesting a more interpreted 
model which would easily work, but would be slower.

>> BTW, inheritance even in java is a fancy word for "include plus
>> override", right?  Just because you can see it happen in antlr 
>> shouldn't
>> bother you at all.
>>
>> I trust this is the last we'll hear about this? ;)
>
> :-) I don't know.
>
> I was going to have simple Expr parser, and its subclass -- SQL parser.
>
> Of course I can use single C++ class, and use Expr() as entry point for 
> the
> first parser....
>
> I just do not like possible repetition of code in case we really have
> several subclasses.

Unless you are deploying on a small device, it can't possibly matter if 
I replicate some code, can it?

Ter
> --
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Thu May  9 14:45:05 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Still having problems with the lexer code
Message-ID: <abeql1+6qlv@eGroups.com>

A number of people have offered me advice regarding this problem but 
so far I have not been able to solve it.

When I compile and run the application I then enter <!-- test --> and 
expect to see :
HTML Comment : <!-- test --> on the screen. But all I see is :

line 1: unexpected token: <!-
exception: antlr.TokenStreamRecognitionException: unexpected char: -

I cannot see what is causing the problem. It is probably something 
very simple that I have missed out. I would be grateful for any 
advice offered.

Best Wishes

John

The Grammar for the Text Lexer
==============================

// Import the Required Classes
header
{
import java.util.*;
import antlr.*;
}

// The Class
class TextLexer extends Lexer;

// Set the Options for the Lexer
options
{
k=3; // Set the Look Ahead to 3 
Characters
charVocabulary = '\1' .. '\377'; // Set the Lexer Character 
Vocabulary
testLiterals = false; // Don't test against the 
Literals table
}

// The routine that will allow us to switch between Selectors
{
// The current Selector
TokenStreamSelector selector;

// The method that will enable us to switch between Selectors
public void setSelector(TokenStreamSelector tokenStreamSelector)
{
selector = tokenStreamSelector;
}

}

HTMLCOMMENT : "<!-" {selector.select("HTMLTagLexer");};

// TEXT
WORD : ( ~ (' '|'\r'|'\n'|'\t'|'<') ) +;

// Ignore all White Space
WS : ( ' '
| '\t'
| '\r' '\n' { newline(); }
| '\n' { newline(); }
)
{$setType(Token.SKIP);} //ignore this token
;

The Grammar for the Tag Lexer
=============================
// Import the Required Classes
header
{
import java.util.*;
import antlr.*;
}

// The Class
class HTMLTagLexer extends Lexer;

// Set the Options for the Lexer
options
{
k=3; // Set the Look Ahead to 3 
Characters
charVocabulary = '\1' .. '\377'; // Set the Lexer Character 
Vocabulary
testLiterals = false; // Don't test against the 
Literals table
importVocab = Tagged; // The Vocabulary to import
exportVocab = HTMLTags; // Export the Vocabulary to 
HTMLTags
}

// The routine that will allow us to switch between Selectors
{
// The current Selector
TokenStreamSelector selector;

// The method that will enable us to switch between Selectors
public void setSelector(TokenStreamSelector tokenStreamSelector)
{
selector = tokenStreamSelector;
}

}

// HTML Comment Definition
HTMLCOMMENT : "<!--" (options { greedy=false; }: .) * "-->";

// Ignore all White Space
WS : ( ' '
| '\t'
| '\r' '\n' { newline(); }
| '\n' { newline(); }
)
{$setType(Token.SKIP);} //ignore this token
;

The Grammar for the Parser
==========================

// Import the Required Classes
header
{
import java.util.*;
import antlr.*;
}

// The Class
class HTMLParser extends Parser;

// Set the Options for the Parser
options
{
importVocab = Tagged; // The Vocabulary to import
}

// Define the starting point for processing the HTML
processData :
(
text:WORD {System.out.println("TEXT " + text.getText());}
| comment:HTMLComment {System.out.println("HTML Comment " + 
comment.getText());}
)+;

The Java Application
====================

import java.io.*;
import antlr.*;

// The HTMLParserApp Class
class HTMLParserApp
{

// The Main function
public static void main(String[] args)
{
try
{
// Create the required Lexers
HTMLTagLexer htmlTagLexer = new HTMLTagLexer(new 
DataInputStream(System.in));
TextLexer textLexer = new TextLexer
(htmlTagLexer.getInputState());

// Create the TokenStreamSelector and add the required 
Lexers to it
TokenStreamSelector tokenStreamSelector = new 
TokenStreamSelector();
tokenStreamSelector.addInputStream
(htmlTagLexer,"HTMLTagLexer");
tokenStreamSelector.addInputStream(textLexer,"TextLexer");

// Select the starting Lexer
tokenStreamSelector.select("TextLexer");

// Add the TokenStreamSelector to the Required Lexers
htmlTagLexer.setSelector(tokenStreamSelector);
textLexer.setSelector(tokenStreamSelector);

// Create the HTML Parser
HTMLParser htmlParser = new HTMLParser(tokenStreamSelector);

// Process the HTML
htmlParser.processData();

} catch(Exception e)
{
System.err.println("exception: "+e);
}
}
}



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu May  9 15:28:50 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Still having problems with the lexer code
In-Reply-To: <abeql1+6qlv@eGroups.com>
Message-ID: <22A07618-639C-11D6-B0EB-0030653DE0D6@jguru.com>

Hi John...jumping in late, but it seems that if you are staying in the 
"lexer" world to do your parsing within, you should just call the rule 
that parses that grammar.  I designed the selector stream stuff for 
having an outside agent, like the parser, switch selectors.  Does the 
javadoc example help at all?

I'd suggest merging the lexers and have the grammar for stuff inside 
comment.  OH, also not that once <!-- is matched by HTMLCOMMENT in the 
first lexer, it cannot appear in the other lexer (already consumed).  
That is probably the source of your problem.

Ter

On Thursday, May 9, 2002, at 02:45  PM, johnclarke72 wrote:

> A number of people have offered me advice regarding this problem but
> so far I have not been able to solve it.
>
> When I compile and run the application I then enter <!-- test --> and
> expect to see :
> HTML Comment : <!-- test --> on the screen. But all I see is :
>
> line 1: unexpected token: <!-
> exception: antlr.TokenStreamRecognitionException: unexpected char: -
>
> I cannot see what is causing the problem. It is probably something
> very simple that I have missed out. I would be grateful for any
> advice offered.
>
> Best Wishes
>
> John
>
> The Grammar for the Text Lexer
> ==============================
>
> // Import the Required Classes
> header
> {
> import java.util.*;
> import antlr.*;
> }
>
> // The Class
> class TextLexer extends Lexer;
>
> // Set the Options for the Lexer
> options
> {
> k=3; // Set the Look Ahead to 3
> Characters
> charVocabulary = '\1' .. '\377'; // Set the Lexer Character
> Vocabulary
> testLiterals = false; // Don't test against the
> Literals table
> }
>
> // The routine that will allow us to switch between Selectors
> {
> // The current Selector
> TokenStreamSelector selector;
>
> // The method that will enable us to switch between Selectors
> public void setSelector(TokenStreamSelector tokenStreamSelector)
> {
> selector = tokenStreamSelector;
> }
>
> }
>
> HTMLCOMMENT : "<!-" {selector.select("HTMLTagLexer");};
>
> // TEXT
> WORD : ( ~ (' '|'\r'|'\n'|'\t'|'<') ) +;
>
> // Ignore all White Space
> WS : ( ' '
> | '\t'
> | '\r' '\n' { newline(); }
> | '\n' { newline(); }
> )
> {$setType(Token.SKIP);} //ignore this token
> ;
>
> The Grammar for the Tag Lexer
> =============================
> // Import the Required Classes
> header
> {
> import java.util.*;
> import antlr.*;
> }
>
> // The Class
> class HTMLTagLexer extends Lexer;
>
> // Set the Options for the Lexer
> options
> {
> k=3; // Set the Look Ahead to 3
> Characters
> charVocabulary = '\1' .. '\377'; // Set the Lexer Character
> Vocabulary
> testLiterals = false; // Don't test against the
> Literals table
> importVocab = Tagged; // The Vocabulary to import
> exportVocab = HTMLTags; // Export the Vocabulary to
> HTMLTags
> }
>
> // The routine that will allow us to switch between Selectors
> {
> // The current Selector
> TokenStreamSelector selector;
>
> // The method that will enable us to switch between Selectors
> public void setSelector(TokenStreamSelector tokenStreamSelector)
> {
> selector = tokenStreamSelector;
> }
>
> }
>
> // HTML Comment Definition
> HTMLCOMMENT : "<!--" (options { greedy=false; }: .) * "-->";
>
> // Ignore all White Space
> WS : ( ' '
> | '\t'
> | '\r' '\n' { newline(); }
> | '\n' { newline(); }
> )
> {$setType(Token.SKIP);} //ignore this token
> ;
>
> The Grammar for the Parser
> ==========================
>
> // Import the Required Classes
> header
> {
> import java.util.*;
> import antlr.*;
> }
>
> // The Class
> class HTMLParser extends Parser;
>
> // Set the Options for the Parser
> options
> {
> importVocab = Tagged; // The Vocabulary to import
> }
>
> // Define the starting point for processing the HTML
> processData :
> (
> text:WORD {System.out.println("TEXT " + text.getText());}
> | comment:HTMLComment {System.out.println("HTML Comment " +
> comment.getText());}
> )+;
>
> The Java Application
> ====================
>
> import java.io.*;
> import antlr.*;
>
> // The HTMLParserApp Class
> class HTMLParserApp
> {
>
> // The Main function
> public static void main(String[] args)
> {
> try
> {
> // Create the required Lexers
> HTMLTagLexer htmlTagLexer = new HTMLTagLexer(new
> DataInputStream(System.in));
> TextLexer textLexer = new TextLexer
> (htmlTagLexer.getInputState());
>
> // Create the TokenStreamSelector and add the required
> Lexers to it
> TokenStreamSelector tokenStreamSelector = new
> TokenStreamSelector();
> tokenStreamSelector.addInputStream
> (htmlTagLexer,"HTMLTagLexer");
> tokenStreamSelector.addInputStream(textLexer,"TextLexer");
>
> // Select the starting Lexer
> tokenStreamSelector.select("TextLexer");
>
> // Add the TokenStreamSelector to the Required Lexers
> htmlTagLexer.setSelector(tokenStreamSelector);
> textLexer.setSelector(tokenStreamSelector);
>
> // Create the HTML Parser
> HTMLParser htmlParser = new HTMLParser(tokenStreamSelector);
>
> // Process the HTML
> htmlParser.processData();
>
> } catch(Exception e)
> {
> System.err.println("exception: "+e);
> }
> }
> }
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Thu May  9 15:56:18 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Re: Still having problems with the lexer code
In-Reply-To: <22A07618-639C-11D6-B0EB-0030653DE0D6@jguru.com>
Message-ID: <abeuqi+5bo0@eGroups.com>

Terence,
        Thanks for your reply.  I am extremely new to ANTLR and to be 
honest although I think I understand the example I can't seem to 
develop one based upon that.

I hope that I am not asking much how could I get this to work ?  
Would it also be possible to explain why it would work in the 
ammended version ?

Thanks

John

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> Hi John...jumping in late, but it seems that if you are staying in 
the 
> "lexer" world to do your parsing within, you should just call the 
rule 
> that parses that grammar.  I designed the selector stream stuff for 
> having an outside agent, like the parser, switch selectors.  Does 
the 
> javadoc example help at all?
> 
> I'd suggest merging the lexers and have the grammar for stuff 
inside 
> comment.  OH, also not that once <!-- is matched by HTMLCOMMENT in 
the 
> first lexer, it cannot appear in the other lexer (already 
consumed).  
> That is probably the source of your problem.
> 
> Ter
> 
> On Thursday, May 9, 2002, at 02:45  PM, johnclarke72 wrote:
> 
> > A number of people have offered me advice regarding this problem 
but
> > so far I have not been able to solve it.
> >
> > When I compile and run the application I then enter <!-- test --> 
and
> > expect to see :
> > HTML Comment : <!-- test --> on the screen. But all I see is :
> >
> > line 1: unexpected token: <!-
> > exception: antlr.TokenStreamRecognitionException: unexpected 
char: -
> >
> > I cannot see what is causing the problem. It is probably something
> > very simple that I have missed out. I would be grateful for any
> > advice offered.
> >
> > Best Wishes
> >
> > John
> >
> > The Grammar for the Text Lexer
> > ==============================
> >
> > // Import the Required Classes
> > header
> > {
> > import java.util.*;
> > import antlr.*;
> > }
> >
> > // The Class
> > class TextLexer extends Lexer;
> >
> > // Set the Options for the Lexer
> > options
> > {
> > k=3; // Set the Look Ahead to 3
> > Characters
> > charVocabulary = '\1' .. '\377'; // Set the Lexer Character
> > Vocabulary
> > testLiterals = false; // Don't test against the
> > Literals table
> > }
> >
> > // The routine that will allow us to switch between Selectors
> > {
> > // The current Selector
> > TokenStreamSelector selector;
> >
> > // The method that will enable us to switch between Selectors
> > public void setSelector(TokenStreamSelector tokenStreamSelector)
> > {
> > selector = tokenStreamSelector;
> > }
> >
> > }
> >
> > HTMLCOMMENT : "<!-" {selector.select("HTMLTagLexer");};
> >
> > // TEXT
> > WORD : ( ~ (' '|'\r'|'\n'|'\t'|'<') ) +;
> >
> > // Ignore all White Space
> > WS : ( ' '
> > | '\t'
> > | '\r' '\n' { newline(); }
> > | '\n' { newline(); }
> > )
> > {$setType(Token.SKIP);} //ignore this token
> > ;
> >
> > The Grammar for the Tag Lexer
> > =============================
> > // Import the Required Classes
> > header
> > {
> > import java.util.*;
> > import antlr.*;
> > }
> >
> > // The Class
> > class HTMLTagLexer extends Lexer;
> >
> > // Set the Options for the Lexer
> > options
> > {
> > k=3; // Set the Look Ahead to 3
> > Characters
> > charVocabulary = '\1' .. '\377'; // Set the Lexer Character
> > Vocabulary
> > testLiterals = false; // Don't test against the
> > Literals table
> > importVocab = Tagged; // The Vocabulary to import
> > exportVocab = HTMLTags; // Export the Vocabulary to
> > HTMLTags
> > }
> >
> > // The routine that will allow us to switch between Selectors
> > {
> > // The current Selector
> > TokenStreamSelector selector;
> >
> > // The method that will enable us to switch between Selectors
> > public void setSelector(TokenStreamSelector tokenStreamSelector)
> > {
> > selector = tokenStreamSelector;
> > }
> >
> > }
> >
> > // HTML Comment Definition
> > HTMLCOMMENT : "<!--" (options { greedy=false; }: .) * "-->";
> >
> > // Ignore all White Space
> > WS : ( ' '
> > | '\t'
> > | '\r' '\n' { newline(); }
> > | '\n' { newline(); }
> > )
> > {$setType(Token.SKIP);} //ignore this token
> > ;
> >
> > The Grammar for the Parser
> > ==========================
> >
> > // Import the Required Classes
> > header
> > {
> > import java.util.*;
> > import antlr.*;
> > }
> >
> > // The Class
> > class HTMLParser extends Parser;
> >
> > // Set the Options for the Parser
> > options
> > {
> > importVocab = Tagged; // The Vocabulary to import
> > }
> >
> > // Define the starting point for processing the HTML
> > processData :
> > (
> > text:WORD {System.out.println("TEXT " + text.getText());}
> > | comment:HTMLComment {System.out.println("HTML Comment " +
> > comment.getText());}
> > )+;
> >
> > The Java Application
> > ====================
> >
> > import java.io.*;
> > import antlr.*;
> >
> > // The HTMLParserApp Class
> > class HTMLParserApp
> > {
> >
> > // The Main function
> > public static void main(String[] args)
> > {
> > try
> > {
> > // Create the required Lexers
> > HTMLTagLexer htmlTagLexer = new HTMLTagLexer(new
> > DataInputStream(System.in));
> > TextLexer textLexer = new TextLexer
> > (htmlTagLexer.getInputState());
> >
> > // Create the TokenStreamSelector and add the required
> > Lexers to it
> > TokenStreamSelector tokenStreamSelector = new
> > TokenStreamSelector();
> > tokenStreamSelector.addInputStream
> > (htmlTagLexer,"HTMLTagLexer");
> > tokenStreamSelector.addInputStream(textLexer,"TextLexer");
> >
> > // Select the starting Lexer
> > tokenStreamSelector.select("TextLexer");
> >
> > // Add the TokenStreamSelector to the Required Lexers
> > htmlTagLexer.setSelector(tokenStreamSelector);
> > textLexer.setSelector(tokenStreamSelector);
> >
> > // Create the HTML Parser
> > HTMLParser htmlParser = new HTMLParser(tokenStreamSelector);
> >
> > // Process the HTML
> > htmlParser.processData();
> >
> > } catch(Exception e)
> > {
> > System.err.println("exception: "+e);
> > }
> > }
> > }
> >
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/
> >
> >
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu May  9 20:23:23 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] tree parsers vs visitors & xml translators etc...
Message-ID: <489F6094-63C5-11D6-A97B-0030653DE0D6@jguru.com>

Heh, just found a very good reason to use a tree grammar over a simple 
AST visitor or any other translator you'd find in the XML world: 
visitors have to look for your pattern over the whole tree whereas a 
tree grammar specifies precisely where to look and, most importantly, 
when to stop looking!  On large ASTs such as those representing Java 
programs this can be a big win.

For example, I'm working on the java parser / tree parser we have.  My 
first tree phase will pick up class/interface and method definitions.  
Naturally, these are all at the outermost layers within the Java ASTs 
and it would not make sense to look into every expression in your java 
program looking for class defs.  The tree parser knows these constructs 
exist at the highest level and therefore does not traverse all the 
expressions (I use '.' wildcard to terminate the walk when I know 
there's no hope of finding deeper class defs).

I'm guessing that most visitor patterns and all XSLT type stuff will 
search the whole damn tree looking for node of type CLASS_DEF.  
<snicker>.

Can anybody comment on the visitor/xslt side?  How would you do this 
"find class defs" problem efficiently?

Hooray for tree grammars!  And now back to your regularly scheduled 
lives...

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Thu May  9 23:33:37 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] tree parsers vs visitors & xml translators etc...
References: <489F6094-63C5-11D6-A97B-0030653DE0D6@jguru.com>
Message-ID: <002b01c1f7ec$9f49c900$0101a8c0@daemon>

> Can anybody comment on the visitor/xslt side?  
> How would you do this "find class defs" problem efficiently?

The problem with Java is that you also have anonymous
classes that can be defined within methods as part of an
expression.

So, if you really want to find ALL class definitions, then
you also have to analyze methods and expressions :-(

A good XPath implementation will support indexing
of elements, so that a query like "//class" will not need
to traverse the tree, but instead only needs to look in the
index (which is very efficient).

ANTLR tree transformation certainly can be usefull,
but the simplicity of XPath queries nested in your java
source is difficult to beat for many simple purposes.

Silvain



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sander at aqris.com  Fri May 10 03:06:46 2002
From: sander at aqris.com (=?iso-8859-1?Q?Sander_M=E4gi?=)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] tree parsers vs visitors & xml translators etc...
References: <489F6094-63C5-11D6-A97B-0030653DE0D6@jguru.com> <002b01c1f7ec$9f49c900$0101a8c0@daemon>
Message-ID: <031b01c1f80a$646a8b30$1200a8c0@sander>

Hi,

Is it also simple to find all "potentially exportable" classes with xpath
query.

Consider this example:

class InterestingClass {
    class InterestingInner {
    }

    {
        class UninterestingClass {
            class UninterestingInner {
            }
        }
    }
}

What would be the xpath query to get all 'Interesting' classes - the ones
that will be potentially usable from other classes.

Sander

----- Original Message -----
From: "Silvain Piree" <s.piree@enneya.com>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, May 10, 2002 9:33 AM
Subject: Re: [antlr-interest] tree parsers vs visitors & xml translators
etc...


> > Can anybody comment on the visitor/xslt side?
> > How would you do this "find class defs" problem efficiently?
>
> The problem with Java is that you also have anonymous
> classes that can be defined within methods as part of an
> expression.
>
> So, if you really want to find ALL class definitions, then
> you also have to analyze methods and expressions :-(
>
> A good XPath implementation will support indexing
> of elements, so that a query like "//class" will not need
> to traverse the tree, but instead only needs to look in the
> index (which is very efficient).
>
> ANTLR tree transformation certainly can be usefull,
> but the simplicity of XPath queries nested in your java
> source is difficult to beat for many simple purposes.
>
> Silvain
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Fri May 10 03:25:46 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] tree parsers vs visitors & xml translators etc...
References: <489F6094-63C5-11D6-A97B-0030653DE0D6@jguru.com> <002b01c1f7ec$9f49c900$0101a8c0@daemon> <031b01c1f80a$646a8b30$1200a8c0@sander>
Message-ID: <001901c1f80d$0d0aa7f0$0101a8c0@daemon>

> What would be the xpath query to get all 'Interesting' classes 
> - the ones that will be potentially usable from other classes.

How about: "//class[not(parent::method)]" ?

Tree parsers are great for complex transformations,
but XPath is a nice alternative for simple queries.

Silvain



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Fri May 10 03:30:13 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] tree parsers vs visitors & xml translators etc...
References: <489F6094-63C5-11D6-A97B-0030653DE0D6@jguru.com> <002b01c1f7ec$9f49c900$0101a8c0@daemon> <031b01c1f80a$646a8b30$1200a8c0@sander>
Message-ID: <002901c1f80d$ac321070$0101a8c0@daemon>

Oops, forgot you were using instance initializer instead
of method.

So that should be: 
    "//class[not(parent::method)][not(parent::initializer)]"

Silvain

p.s. using attributes you can further simplify this query, e.g.
       "//classes[not(@hidden)]"



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri May 10 09:08:11 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] tree parsers vs visitors & xml translators etc...
In-Reply-To: <002b01c1f7ec$9f49c900$0101a8c0@daemon>
Message-ID: <20630D48-6430-11D6-A97B-0030653DE0D6@jguru.com>


On Thursday, May 9, 2002, at 11:33  PM, Silvain Piree wrote:

>> Can anybody comment on the visitor/xslt side?
>> How would you do this "find class defs" problem efficiently?
>
> The problem with Java is that you also have anonymous
> classes that can be defined within methods as part of an
> expression.

Fortunately for me I care only about named classes ;)  Man do I hate 
this inner class crap...really made Java complicated just because we 
can't have function pointers...ick.  Add generics and we're right back 
to C++ (well, nothing can be that complicated) ;)

> So, if you really want to find ALL class definitions, then
> you also have to analyze methods and expressions :-(
>
> A good XPath implementation will support indexing
> of elements, so that a query like "//class" will not need
> to traverse the tree, but instead only needs to look in the
> index (which is very efficient).

Ah...i wondered if anybody would actually do that.  That is good.  Now, 
can they do two-level indexing so I can find all nested classes?  I know 
it can do it by asking about the parent for context, but can it do it 
via the index so it is fast?

> ANTLR tree transformation certainly can be usefull,
> but the simplicity of XPath queries nested in your java
> source is difficult to beat for many simple purposes.

I would totally agree.  When I used to build a lot of translators, 
having a simple inline capability with a method call to find subtrees 
within a tree was very useful even for just printing stuff out.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From praveen_c at yahoo.com  Sun May 12 16:26:50 2002
From: praveen_c at yahoo.com (praveen_c)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: Match until "<@"
In-Reply-To: <6C69557C-62DE-11D6-B0EB-0030653DE0D6@jguru.com>
Message-ID: <abmtnq+3bv0@eGroups.com>

Terence,

Thanks for the reply.

In your previous mail you mentioned that this kind of problem is 
hard for a lexer. Suppose I have tokens T1, T2 and T3 that my 
lexer can recognize. I want all the REMAINING text that is not part 
of T1, T2 and T3 to be another token T4( assume that T1, T2 and T3 
can occur in any order ). Is there an easy way to specify this in 
the grammar? I think I can come up with a long semantic predicate 
that is negation of T1, T2 and T3. But like you said that doesn't 
sound very clean.

So here is my question, is this a limitation of Parser Generators? 
or is this specific to antlr. Am I better off using another Parser 
Generator like JavaCC?

Before somebody flames at my post, please note that I'm just 
learning 
about Parser Generators and I donot have a CS degree.

Thanks for your time,
Praveen.

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> 
> On Wednesday, May 8, 2002, at 01:33  PM, praveen_c wrote:
> 
> > Hi all,
> >
> > Just wondering what is wrong with the following Lexer rule. I'm
> > trying to match all characters until reach the combination "<@"
> > including white space, new lines...everything.
> >
> > MULTI_LINE_TEXT: ( options { greedy=false; } : .)* (~("<@"));
> >
> > It gives me wierd errors. Is this the right way to specify when I
> > want to have something matched until I see a combination. If you
> > think there is a better way, please let me know.
> 
> What is the k value?  Has to be 2 at least.  Also, note that you 
have 
> asked it to match anything until it sees NOT <@.  If you don't 
want 
> the <@ in this token, you have a problem that is hard for a lexer 
since 
> any token can follow MULTI_LINE_TEXT in principle.  You should 
probably 
> use a semantic predicate that tells it how to break out:
> 
> MLT : ( {!(LA(1)=='<'&&LA(2)=='@')}? . ) ;
> 
> That will work, but I dislike syntax checks in semantic 
predicates.  
> Seems this "break out of the loop" issue came up before...might 
check 
> the archives.
> 
> Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From brian-l-smith at uiowa.edu  Sun May 12 21:29:46 2002
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] ANTLR meta-syntax question
Message-ID: <3CDF413A.9050003@uiowa.edu>

I am new to ANTLR. I have found that it seems fairly straightforward to 
convert a BNF grammar to work with ANTLR. But, I am having trouble 
understanding why ANTLR insists on me using parentheses when they seem 
redundant to me. For example, I have a rule:

A    :    B+;

I expect to match one or more B's. But, ANTLR complains unless I rewrite 
the rule as:

A    :   (B)+;

To me, the parentheses are not necessary. Am I doing something wrong? Is 
there a particular reason that ANTLR requires the parentheses? I prefer 
to use parentheses only for grouping.

Thanks,
Brian



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon May 13 02:11:45 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: Still having problems with the lexer code
In-Reply-To: <abeuqi+5bo0@eGroups.com>; from johnclarke@hotmail.com on Thu, May 09, 2002 at 10:56:18PM -0000
References: <22A07618-639C-11D6-B0EB-0030653DE0D6@jguru.com> <abeuqi+5bo0@eGroups.com>
Message-ID: <20020513111145.B5121@cs.utwente.nl>

Hi,

On Thu, May 09, 2002 at 10:56:18PM -0000, johnclarke72 wrote:
> I hope that I am not asking much how could I get this to work ?  
> Would it also be possible to explain why it would work in the 
> ammended version ?

There's a number of things that can go wrong in the setup of a project with
multiple parsers/lexers.

- depending on how you organized the files and did import/export vocabs,
  and depending on the order of compilation the different parsers/lexers
  in your project might end up with a different understanding of the tokens.
- mistakes in begin/end tokens and lexer switching.

In files you sent in there's probably a problem with probably both and the
mistake Terence noted.

DISCLAIMER: I did not really try to understand the exact parsing problem
you have I'm assuming your parsing html and want to treat comments
differently or something.

Your HTMLParserApp.java looks good.

Suppose:

<htmlstuff>
<!-- a comment -->
</htmlstuff>

Now just after the parser is started the selector is using the textlexer.
So this one starts recognizing 'words'. Until The begin tag "<!-" is seen.
This tag is read from the input stream then the taglexer is started. At
that point the file pointer is after the "<!-". (So in taglexer you have to
remove the "<!--" as Terence noted (note also the difference in tokens
"<!-" vs. "<!--" probably typo, antlr does very little to protect you from
typos like this :( ))

Ok. Now we're inside the taglexer here you'd want to keep on parsing using
the taglexer up to and including the close tag "-->" after that you need to
switch back to the textlexer, since we have more file to parse and we're
definitely not in a html comment anymore. E.g. add an action to the close
token:

HTMLCOMMENT : 
   (options { greedy=false; }: .) *
   "-->" { selector.select("HTMLTagLexer"); }
;

So now you switched back to the textlexer (note that we now enter the
textlexer with the input stream after the close tag) Now the mechanics of
switching between lexers should be ok. (Never try to switch lexers from the
parser unless you really know what you are doing, in general this does not
work)

Next problem. You may have noted that in the multiLexer example a Common
vocabulary is imported in several places. This one is used to make sure
that all lexers/parsers have the same understanding about the tokens (e.g.
that both lexers return the same values for common tokens to the parser)

This you can do by A) using the CommonTokenTypes import trick as in the
multilexer example B) chaining the lexers/parsers and observing the right
order in processing them with antlr.

An option is doing it like this:

In the textlexer:

   exportVocab = Text;

In the taglexer:

   importVocab = Text;     // get previous definitions
   exportVocab = HTMLTags; // Export the Vocabulary to HTMLTags

In the parser:

   importVocab = HTMLTags; // The Vocabulary to import

Then *always* observe the following order in processing the files with antlr:
1: textlexer 2: taglexer 3: parser.

You can always check the generated xxxTokenTypes.txt files to see what
numbers are given to tokens.

Hope this helps,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Mon May 13 06:04:33 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] ANTLR meta-syntax question
Message-ID: <170826586F3BD511910D0200C110AAA8032B4944@memail03.bco-home.com>

ANTLR requires the parenthesis.  It makes it easier to associate actions
with the proper construct, e.g. inside or outside of the ()+ closure.

Monty

> -----Original Message-----
> From: Brian Smith [mailto:brian-l-smith@uiowa.edu]
> Sent: Sunday, May 12, 2002 9:30 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] ANTLR meta-syntax question
> 
> 
> I am new to ANTLR. I have found that it seems fairly 
> straightforward to 
> convert a BNF grammar to work with ANTLR. But, I am having trouble 
> understanding why ANTLR insists on me using parentheses when 
> they seem 
> redundant to me. For example, I have a rule:
> 
> A    :    B+;
> 
> I expect to match one or more B's. But, ANTLR complains 
> unless I rewrite 
> the rule as:
> 
> A    :   (B)+;
> 
> To me, the parentheses are not necessary. Am I doing 
> something wrong? Is 
> there a particular reason that ANTLR requires the 
> parentheses? I prefer 
> to use parentheses only for grouping.
> 
> Thanks,
> Brian
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon May 13 06:25:17 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] ANTLR meta-syntax question
In-Reply-To: <3CDF413A.9050003@uiowa.edu>; from brian-l-smith@uiowa.edu on Sun, May 12, 2002 at 11:29:46PM -0500
References: <3CDF413A.9050003@uiowa.edu>
Message-ID: <20020513152517.B823@cs.utwente.nl>

Hi,

On Sun, May 12, 2002 at 11:29:46PM -0500, Brian Smith wrote:
> I am new to ANTLR. I have found that it seems fairly straightforward to 
> convert a BNF grammar to work with ANTLR. But, I am having trouble 
> understanding why ANTLR insists on me using parentheses when they seem 
> redundant to me. For example, I have a rule:
> 
> A    :    B+;
> 
> I expect to match one or more B's. But, ANTLR complains unless I rewrite 
> the rule as:
> 
> A    :   (B)+;
> 
> To me, the parentheses are not necessary. Am I doing something wrong? Is 
> there a particular reason that ANTLR requires the parentheses? I prefer 
> to use parentheses only for grouping.

This is just as it's defined in antlr's syntax. The parentheses belong to
the construct.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Innovation makes enemies of all those who prospered under the old
   regime, and only lukewarm support is forthcoming from those who would
               prosper under the new. --- Niccol Machiavelli


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sander at aqris.com  Mon May 13 08:54:24 2002
From: sander at aqris.com (=?iso-8859-1?Q?Sander_M=E4gi?=)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Any known good ways to recover from simple parse errors
Message-ID: <02be01c1fa96$74434a90$1200a8c0@sander>

Hi,

I am looking for advice on creating a parser that could recover from common parsing errors.

What I want to achieve is to modify java parser so that when it hits a missing semicolon or unmatching brace error it would mark a construct it was working on as invalid and try to detect where the next logical construct starts.

Does anyone know if there is public research or samples available on this topic or can just offer good advice on how would be best to start with it.

thanks!

Sander M?gi


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020513/b7950840/attachment.html
From parrt at jguru.com  Mon May 13 10:32:58 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: Match until "<@"
In-Reply-To: <abmtnq+3bv0@eGroups.com>
Message-ID: <7775D08B-6697-11D6-A920-0030653DE0D6@jguru.com>


On Sunday, May 12, 2002, at 04:26  PM, praveen_c wrote:

> Terence,
>
> Thanks for the reply.
>
> In your previous mail you mentioned that this kind of problem is
> hard for a lexer. Suppose I have tokens T1, T2 and T3 that my
> lexer can recognize. I want all the REMAINING text that is not part
> of T1, T2 and T3 to be another token T4( assume that T1, T2 and T3
> can occur in any order ). Is there an easy way to specify this in
> the grammar? I think I can come up with a long semantic predicate
> that is negation of T1, T2 and T3. But like you said that doesn't
> sound very clean.

Hmm...seems like maybe your grammar, (T1|T2|T3), would have an action 
after that switched the lexer to see the T4 lexer...Hmm...is it a 
sequence of T1..T3?  If so that is harder...you will need a trigger in 
your lexer or parser somehow to know when to switch.  Typically the 
language is the problem when you can't figure out what the "trigger" 
is.  I.e., your language is highly context sensitive or something.

> So here is my question, is this a limitation of Parser Generators?
> or is this specific to antlr. Am I better off using another Parser
> Generator like JavaCC?

As I say, you might take a look at the language spec.  Is this something 
that you folks wrote?  Can you change it?

> Before somebody flames at my post, please note that I'm just
> learning
> about Parser Generators and I donot have a CS degree.

No flame wars here. :)  We are a cuddly sort of mailing list :) ;)

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From drm at xilinx.com  Mon May 13 11:28:02 2002
From: drm at xilinx.com (Dennis Marsa)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] token stream synchronization
Message-ID: <3CE005B2.F9F8E5A6@xilinx.com>

The default exception handler generated by ANTLR includes
calls to both consume() and consumeUntil() as in:

  catch (RecognitionException& ex) {
    if( inputState->guessing == 0 ) {
      reportError(ex);
      consume();
      consumeUntil(_tokenSet_0);
    } else {
      throw;
    }
  }

The call to consume() discards the bad token that led
to the exception being thrown.  consumeUntil() discards
0 or more additional tokens until one is found that is
in the rule's follow set, or EOF is found.

Consequently, the 1st token (the one that caused the
exception to be thrown) is never compared against the
follow set.

Thus, it is never possible to resynchronize the token
stream *and* consume 0 tokens.  The first token will
*always* be discarded (by the consume() call), even if
it is a token that is in the follow set.

Is this a requirement?  Is there some reason the first
token should not be compared against the follow aet
as well?

Is there a fundamental reason that the following exception
handler (call to consume() removed) would not be as effective
as the original?  The benefit would be that synchronizations
that consume 0 tokens are now possible.

  catch (RecognitionException& ex) {
    if( inputState->guessing == 0 ) {
      reportError(ex);
      consumeUntil(_tokenSet_0);
    } else {
      throw;
    }
  }

Regards,

Dennis Marsa

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Mon May 13 13:53:20 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Any known good ways to recover from simple parse errors
Message-ID: <000001c1fad1$62ce9860$6564020a@beaconit.com.au>

This is what I used for commands, you may be able to modify it for
statements inside a Java program.
matthew
----- Original Message -----
From: "Matthew Ford" <matthew.ford@forward.com.au>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, August 24, 2001 9:07 AM
Subject: Recovery from exceptions


> This is what I posted previously
> If I get any positive feed back I might be encourage to submit an FAQ
>
> matthew
> ----- Original Message -----
> From: "Matthew Ford" <matthew.ford@forward.com.au>
> To: <antlr-interest@yahoogroups.com>
> Sent: Saturday, June 30, 2001 9:05 AM
> Subject: Re: [antlr-interest] how do i skip unmatched characters?
>
>
> > I had this problem when handling commands comming in via telnet
> > I think this should be a common requirement.  There should be an FAQ
about
> > it.
> > matthew
> >
> > This is what I did to skip to the next ; and then continue parsing
> > (ErrorLog and Debug are my own reporting logs)
> >
> >
> > In the Parser
> >
> > options {
> >  k = 1;                           // one token lookahead
> >  defaultErrorHandler = false;     // Don't generate parser error
handlers
> >  buildAST = true;
> >   importVocab = TIMEFRAMECOMMONLEXER;
> >   exportVocab = TIMEFRAMESERVERPARSER;
> >
> > }
> >
> >
> > {
> >
> >  ICommandGeneratorServer commandGenerator;
> >  TimeFrameCommonLexer TFlexer;
> >  static String nl = System.getProperty("line.separator","\n");
> >
> >  final static int MAJOR = 401;
> >  final static int TRANSLATION_ERROR = 1;
> >   final static int  FIELD_QUALIFIER_ERROR = 2;
> >   final static int  QUERY_NOT_DEFINED = 3;
> >  final static int NO_AGE_INDEX = 4;
> >
> >  public TimeFrameCommandsParser(TimeFrameCommonLexer lexer,
> >      ICommandGeneratorServer commandGenerator, IScope iScope) {
> >   this(lexer);
> >   TFlexer = lexer;
> >    this.commandGenerator = commandGenerator;
> >   this.iScope = iScope;
> >  }
> >
> >  public void reportError(ANTLRException ex) {
> >     Debug.out("in reportError", MAJOR, 0);
> >
> >    commandGenerator.translationError(TFlexer.getLineBuffer(),
> >
> >
>
0,0,null,null,TimeFrameException.makeTimeFrameException(MAJOR,TRANSLATION_ER
> > ROR,ex.getMessage()));
> >     Debug.out("******* end reportError *******", MAJOR, 0);
> >  }
> >
> >
> >
> >  public void processError(ANTLRException ex) throws
TokenStreamException,
> >     CharStreamException {
> >   // actually only throws TokenStreamIOException others caught here
> >   int tokenType=0;
> >   LexerSharedInputState inputState = TFlexer.getInputState();
> >   inputState.guessing = 0; // clear guessing mode
> >     Debug.out("in processError", MAJOR, 0);
> >     if (!errorFlag) { // first error
> >      reportError(ex);
> >      errorFlag=true;  // block new errors until after syncing.
> >     }
> >
> >   do {
> >    try {
> >     if (ex instanceof TokenStreamRecognitionException) {
> >      TokenStreamRecognitionException rex =
> > (TokenStreamRecognitionException)ex;
> >       // get underlying exception
> >      ex = null; // have handled this one now
> >      if ((rex.recog instanceof MismatchedCharException) ||
> >         (rex.recog instanceof NoViableAltForCharException)) {
> >       try {
> >           TFlexer.consume(); // remove current error char;
> >       } catch (CharStreamException cse) {
> >        if ( cse instanceof CharStreamIOException ) {
> >         throw new
TokenStreamIOException(((CharStreamIOException)cse).io);
> >        } else {
> >         throw new TokenStreamIOException(new
> IOException(cse.getMessage()));
> >        }
> >       }
> >      }
> >       }
> >
> >       tokenType = LA(1);
> >        if ((tokenType != EOF) && (tokenType != SEMI)) {
> >         consume(); // remove ;
> >           Debug.out("Input buffer:'"+TFlexer.getLineBuffer()+"'", MAJOR,
> 0);
> >        }
> >
> >    } catch (TokenStreamRecognitionException ex1) {
> >      ex = ex1; // and loop
> > //      TFlexer.consume(); // remove current error char;
> >       Debug.out("** found :"+ ex1, MAJOR, 0);
> >    } catch (TokenStreamRetryException ex1) {
> >       Debug.out("** found :"+ ex1, MAJOR, 0);
> >      throw new TokenStreamIOException(new
IOException(ex1.getMessage()));
> >    }
> >     } while ( tokenType != SEMI && tokenType != EOF && !isEOF());
> >     Debug.out("** end processError *******", MAJOR, 0);
> >     // if telnet print prompt again (How??)
> >
> >  }
> >
> >  private boolean errorFlag = false;
> >
> >  private boolean eofFlag = false;
> >
> >  public boolean isEOF() {
> >   return eofFlag;
> >   }
> >
> >  private void clearErrorFlag() {
> >   errorFlag = false;
> >  }
> >
> >
> >
> > After the SEMI is seen I expect to find a new statement
> > if I do then after I find a valid statement I call clearErrorFlag()
> >
> > // SetAttribute("attribute1","attributeValue");
> > setattribute!
> > : SETATTRIBUTE
> >   LPAREN attr:STRING_LITERAL COMMA value:STRING_LITERAL RPAREN SEMI
> >  { clearErrorFlagAndScope();
> >
>
commandGenerator.setAttribute(TFlexer.getLineBuffer(),attr.getText(),value.g
> > etText());
> >  }
> > ;
> >
> >
> >
> > Finally to tie it all together
> >
> > In the main program I start the parser like this (in its own thread)
> > The command the parser finds are put on a command stack to be handled by
> > another thread.  This lets you issue cancel commands at any time.
> >
> >  /**
> >   * The method reads in commands one by one.
> >   */
> >  public void run() {
> >   Debug.out(""+GlobalData.nl+" ---------- InputThread " + connectionNo +
"
> > starts.",MAJOR,0);
> >
> >   try {
> >    do {
> >     try {
> >      Debug.out("InputThread Call Parser",MAJOR,0);
> >      parser.program();
> >     } catch (RecognitionException ex) {
> >      ErrorLog.log.println("RecognitionException: "+ ex.getMessage());
> >      Debug.out("InputThread RecognitionException: "+
> > ex.getMessage(),MAJOR,0);
> >      parser.processError(ex);
> >     } catch (TokenStreamRecognitionException ex) {
> >      ErrorLog.log.println("TokenStreamRecognitionException: " +
> > ex.getMessage());
> >      Debug.out("InputThread TokenStreamRecognitionException: " +
> > ex.getMessage(),MAJOR,0);
> >      parser.processError(ex);
> >     } catch (TokenStreamRetryException ex) {
> >      ErrorLog.log.println("TokenStreamRetryException: " +
> ex.getMessage());
> >      Debug.out("InputThread TokenStreamRetryException: " +
> > ex.getMessage(),MAJOR,0);
> >      parser.processError(ex);
> >     } catch(TokenStreamIOException ex) {
> >      Debug.out("InputThread TokenStreamIOException: " +
> > ex.getMessage(),MAJOR,0);
> >      if (getStopped()) {
> >       break;
> >      }
> >     }
> >     if (parser.isEOF()) {
> >      Debug.out("parser found EOF *****************",MAJOR,0);
> >      break; // do not call the program again
> >     }
> >    } while (!getStopped());  // was while true
> >
> >   }
> >   catch(Exception e) { //TokenStream IO exceptions or
CharStreamExceptions
> >    Debug.out(ExceptionBuffer.getStackTrace(e), Debug.STACKTRACE, 0);
> >    // Close stream on IO errors
> >    if (e instanceof antlr.TokenStreamIOException) {
> >     Debug.out("TokenStreamIOException: one connection is lost",MAJOR,0);
> >     listener.cancelConnection();
> >    }
> >     else {
> >      Debug.out("other exception:",MAJOR,0);
> >     TimeFrameException tfe =
> > TimeFrameException.makeTimeFrameException(MAJOR,EXCEPTION,e.toString() +
> > e.getMessage());
> >     Errors error = new Errors(tfe);
> >     beaconit.serverutils.CommandLog.log.printCommand(sessionNo,
> > connectionNo, error.toLogText());
> >     ErrorLog.log.printError(sessionNo, connectionNo, error, "");
> >     stack.add(error);
> >    }
> >   }
> >
> >
> > This is how I stop the input thread
> >  /**
> >   * This method is used to set the stop flag.
> >   */
> >  synchronized public void stopThread() {
> >   Debug.out("stopThread is called in InputThread " +
> connectionNo,MAJOR,0);
> >   stopped = true;
> >  }
> >
> >  /**
> >   * Synchronized method returns the status of stop flag.
> >   * @return the status of stop flag.
> >   */
> >  synchronized public boolean getStopped() {
> >   return stopped;
> >  }
> >
> > ----- Original Message -----
> > From: "Stdiobe" <stdiobe@enneya.com>
> > To: <antlr-interest@yahoogroups.com>
> > Sent: Saturday, June 30, 2001 4:47 AM
> > Subject: [antlr-interest] how do i skip unmatched characters?
> >
> >
> > >
> > > Hi,
> > >
> > > when the lexer generated by ANTLR encounters an unmatched character,
> > > it throws a TokenStreamRecognitionException which causes my lexer
> > > to exit (and also my parser).
> > >
> > > Does anyone know how I can skip unmatched characters in the lexer
> > > by reporting the error to the user (with linenumber, etc.), and have
> > > the lexer continue scanning for valid tokens.
> > >
> > > Stdiobe.
> > >
> > >
> > >
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
> > >
> > >
> >
>
>




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Tue May 14 00:03:37 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: ANTLR meta-syntax question
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4944@memail03.bco-home.com>
Message-ID: <abqcs9+2t51@eGroups.com>

--- In antlr-interest@y..., mzukowski@y... wrote:
> ANTLR requires the parenthesis.  It makes it easier to associate 
actions
> with the proper construct, e.g. inside or outside of the ()+ 
closure.
> 

Hi Brian,

Since you're new to ANTLR, that might not make much sense without an 
example, though it's a very good answer.

A: ( B )+ ;

That seems redundant, sure.  But what about when you add the actions 
that Monty mentioned?

A: ( B { /* do something with this particular B */ } )+
   { /* do something with the group of matched B's */ }
 ;

How would you do that without the parentheses?

ANTLR just requires them, whether or not the actions are there.  Such 
is life.  But I've found that I end up using the parentheses a lot 
more than I first expect once I start assigning actions.

JSRS


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From brian-l-smith at uiowa.edu  Tue May 14 01:13:32 2002
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] More ANTLR meta-syntax questions
References: <abqcs9+2t51@eGroups.com>
Message-ID: <3CE0C72C.1090200@uiowa.edu>

jsrs701 wrote:

>--- In antlr-interest@y..., mzukowski@y... wrote:
>
>>ANTLR requires the parenthesis.  It makes it easier to associate 
>>
>actions with the proper construct, e.g. inside or outside of the ()+ 
>
>closure.
>
>
>Hi Brian,
>
>Since you're new to ANTLR, that might not make much sense without an 
>example, though it's a very good answer.
>
>A: ( B )+ ;
>
>That seems redundant, sure.  But what about when you add the actions 
>that Monty mentioned?
>
>A: ( B { /* do something with this particular B */ } )+
>   { /* do something with the group of matched B's */ }
> ;
>
>How would you do that without the parentheses?
>
Thank you for your answers. I realize that they help when usiong the 
"options { ... }" construct, actions, and predicates. It just seems odd 
to me that they are required even when not using these constructs. But, 
I will deal with it.

Actually, I have a few other questions about how ANTLR works and why 
certain things are the way they are. I read through the FAQ and didn't 
see answers to these, but I apologize in advance if I missed them somewhere:

(1) Why does ANTLR bother with seperating the lexical rules from the 
parsing rules? In particular, it requires that lexical rules start with 
an uppercase letter and parser rules start with a lowercase letter, and 
the rules are defined in seperate sections. Is it just an enforced 
(historical) convention or is there a philisophical reason for it? I 
have found that even with my first grammer (a modified OCL grammar), I 
wanted to move rules between the parser and the lexer fairly freely but 
each time I was forced to do a search and replace on the grammar file to 
change letter case, even though the rule body was exactly the same. 
Also, I have found that the ANTLR syntax makes the distinction between 
lexer and parser seem almost arbitrary since they are both specified 
with EBNF.

(2) In ANTLR, you have to specify a lookahead distince (k) for the 
parser. My OCL grammar is LL(1) for all rules except one, which requires 
2 tokens of lookahead. So, I changed my grammar to be specified as 
LL(2). Does this affect the performance of my LL(1) rules? Is there a 
runtime performance penalty to saying k=2 for rules where k=1 is 
sufficient? If not, is it (theoretically) possible for ANTLR to compute 
the minimum value of k needed for my grammar to be unambiguous?

(3) I know that I have to use a syntactic predicate for "infinite" 
lookahead. But, if I only need a larger-than-k finite lookahead (say, 
two tokens when k=1), is there any advantage to using a syntactic 
predicate instead of increasing the value of k (e.g. performance)? I 
would rather increase k since my grammar is then more readable

(4) I know that ANTLR handles grammars that are "approximately" LL(k), 
and that LL(k) is a subset of LALR(1). But, is LL(k)+syntactic 
predicates still a subset of LALR(1)? That is, are there LALR(1), 
LALR(k), or LR(k) grammars that cannot be specified in ANTLR's 
LL(k)+syntactic predicates?

Thanks a lot,
Brian





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Tue May 14 01:57:01 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] More ANTLR meta-syntax questions
In-Reply-To: <3CE0C72C.1090200@uiowa.edu>
Message-ID: <20020514085701.22015.qmail@web14809.mail.yahoo.com>

> (2) In ANTLR, you have to specify a lookahead distince (k) for the 
> parser. My OCL grammar is LL(1) for all rules except one, which requires 
> 2 tokens of lookahead. So, I changed my grammar to be specified as 
> LL(2). Does this affect the performance of my LL(1) rules? Is there a 
> runtime performance penalty to saying k=2 for rules where k=1 is 
> sufficient? If not, is it (theoretically) possible for ANTLR to compute 
> the minimum value of k needed for my grammar to be unambiguous?

No, there is no performance penalty. ANTLR always computes the minimum
lookahead required for each rule (can be different from rule to rule). The
value of k is just an upper limit, above which ANTLR gives a non-determinism
warning.

This also answers (3), I guess. For the others, maybe someone more savvy
will answer.

Regards,
Bogdan


> (3) I know that I have to use a syntactic predicate for "infinite" 
> lookahead. But, if I only need a larger-than-k finite lookahead (say, 
> two tokens when k=1), is there any advantage to using a syntactic 
> predicate instead of increasing the value of k (e.g. performance)? I 
> would rather increase k since my grammar is then more readable
> 
> (4) I know that ANTLR handles grammars that are "approximately" LL(k), 
> and that LL(k) is a subset of LALR(1). But, is LL(k)+syntactic 
> predicates still a subset of LALR(1)? That is, are there LALR(1), 
> LALR(k), or LR(k) grammars that cannot be specified in ANTLR's 
> LL(k)+syntactic predicates?
> 
> Thanks a lot,
> Brian
> 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
LAUNCH - Your Yahoo! Music Experience
http://launch.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue May 14 02:22:54 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Any known good ways to recover from simple parse errors
In-Reply-To: <02be01c1fa96$74434a90$1200a8c0@sander>; from sander@aqris.com on Mon, May 13, 2002 at 06:54:24PM +0300
References: <02be01c1fa96$74434a90$1200a8c0@sander>
Message-ID: <20020514112252.A1103@cs.utwente.nl>

Hi,

On Mon, May 13, 2002 at 06:54:24PM +0300, Sander Mgi wrote:
> I am looking for advice on creating a parser that could recover from common
> parsing errors.
> 
> What I want to achieve is to modify java parser so that when it hits a
> missing semicolon or unmatching brace error it would mark a construct it
> was working on as invalid and try to detect where the next logical
> construct starts.
> 
> Does anyone know if there is public research or samples available on this
> topic or can just offer good advice on how would be best to start with it.

You can try and find the papers on the cocktail toolbox from gmd. They use
a automatic error recovery mechanism that most of the time get's things
right by skipping forward some tokens or by inserting some tokens until a
valid input stream comes into mind. This mechanism should be portable to
antlr. Maybe there's enough info already in the antlr generated parsers to
build this. With custom error handlers. If you can't find the docs mail me
I still have some postscripts lying about....

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue May 14 10:55:26 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] More ANTLR meta-syntax questions
In-Reply-To: <3CE0C72C.1090200@uiowa.edu>
Message-ID: <C531A288-6763-11D6-B06A-0030653DE0D6@jguru.com>


On Tuesday, May 14, 2002, at 01:13  AM, Brian Smith wrote:
> (1) Why does ANTLR bother with seperating the lexical rules from the
> parsing rules? In particular, it requires that lexical rules start with
> an uppercase letter and parser rules start with a lowercase letter, and
> the rules are defined in seperate sections. Is it just an enforced
> (historical) convention or is there a philisophical reason for it? I
> have found that even with my first grammer (a modified OCL grammar), I
> wanted to move rules between the parser and the lexer fairly freely but
> each time I was forced to do a search and replace on the grammar file to
> change letter case, even though the rule body was exactly the same.
> Also, I have found that the ANTLR syntax makes the distinction between
> lexer and parser seem almost arbitrary since they are both specified
> with EBNF.

Take a look at my "building a translator by hand" PDF draft chapter of 
my book at the antlr.org site.   Look for "The Limitations of Combined 
Syntactic and Lexical Recognizers". It explains that you need a queue of 
tokens between lexer and parser (at least with k>1 top-down approach...I 
suspect that LR-based systems can do without it much of the time).  The 
difference is doing either:

1) go get me an identifier

vs

2) get a token (and then let the parser branch on what you find)

> (2) In ANTLR, you have to specify a lookahead distince (k) for the
> parser. My OCL grammar is LL(1) for all rules except one, which requires
> 2 tokens of lookahead. So, I changed my grammar to be specified as
> LL(2). Does this affect the performance of my LL(1) rules? Is there a
> runtime performance penalty to saying k=2 for rules where k=1 is

No.  ANTLR uses minimum necessary.

> sufficient? If not, is it (theoretically) possible for ANTLR to compute
> the minimum value of k needed for my grammar to be unambiguous?

Yes. this is automatic.  Slick, eh?

> (4) I know that ANTLR handles grammars that are "approximately" LL(k),
> and that LL(k) is a subset of LALR(1). But, is LL(k)+syntactic
> predicates still a subset of LALR(1)? That is, are there LALR(1),
> LALR(k), or LR(k) grammars that cannot be specified in ANTLR's
> LL(k)+syntactic predicates?

LR reduces to LL(k) if I put actions in the "right" spot. ;)  Nice 
little proof of this.  Anyway, adding syntactic predicates to any parser 
technology takes you beyond full LR(k) in strength as it is essentially 
backtracking.  There are some bizarre cases where backtracking won't 
even let you parse all unambiguous grammars, but it's pretty close.  
LL+syn preds is very powerful but still you need to avoid using them too 
freely for speed reasons.  I'm guessing the answer to your last question 
is that in theory LL+preds can handle anything LR(k) for fixed k can 
handle.

Add semantic predicates and ANTLR kicks all their butts! ;)

I got really pissed off the other day when i was updating the Java 
grammar--I wanted full LL(k) rather than my approx decisions...almost 
made me take a week off to go implement it! ;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Tue May 14 12:05:47 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: More ANTLR meta-syntax questions
In-Reply-To: <C531A288-6763-11D6-B06A-0030653DE0D6@jguru.com>
Message-ID: <abrn6b+h91k@eGroups.com>


> On Tuesday, May 14, 2002, at 01:13  AM, Brian Smith wrote:
> > (1) Why does ANTLR bother with seperating the lexical rules from 
the
> > parsing rules? In particular, it requires that lexical rules start 
with
> > an uppercase letter and parser rules start with a lowercase 
letter, and
> > the rules are defined in seperate sections. Is it just an enforced
> > (historical) convention or is there a philisophical reason for it? 
I

The reason is historical ANTLR implementation practice--right now, the 
grammar analysis depends on being able to distinguish token 
identifiers from rule identifiers.  That is done during parsing of 
grammar files because ANTLR uses a custom tree structure internally.  
If ANTLR were changed to use ASTs internally, it would be possible to 
maintain tables of lexer identifiers for use in the analysis phase and 
do away with the lexer/parser rule naming conventions.  I don't know 
if that is a good idea or not--the current distinction may help 
readability.

> > have found that even with my first grammer (a modified OCL 
grammar), I
> > wanted to move rules between the parser and the lexer fairly 
freely but

That is unusual--most of the time, you can just cut and paste a lexer 
grammar from one of the ANTLR examples and modify as appropriate.

> > each time I was forced to do a search and replace on the grammar 
file to
> > change letter case, even though the rule body was exactly the 
same.
> > Also, I have found that the ANTLR syntax makes the distinction 
between
> > lexer and parser seem almost arbitrary since they are both 
specified
> > with EBNF.

It does the same for tree grammars, too, and that can be confusing 
because ANTLR uses only one token of lookahead/lookdown (trees are not 
streams) when treewalking.  Also, lexer rules cannot have tree 
annotations ( ^ ! ), and parsers can only apply ^ to tokens.  EBNF 
describes the common syntax of lexers, parsers, and tree walkers; 
however each type of grammar extends on this base.  Lexer grammars 
have characters--'a'--parsers and tree walkers have tree annotations 
(^ !), and tree walkers have roots ( #( ).

--Loring Craymer





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From brian-l-smith at uiowa.edu  Tue May 14 13:23:25 2002
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] More ANTLR meta-syntax questions
References: <C531A288-6763-11D6-B06A-0030653DE0D6@jguru.com>
Message-ID: <3CE1723D.7010905@uiowa.edu>

Terence,

Thanks for your reply (and thanks to everybody else as well). I have 
responded inline below.

Another question I forgot to ask is: would it be possible to combine the 
ANTLR syntax for characters and strings, so that the single-quote (') 
and the double-quote (") become synonyms for each other? I have seen 
that some other parser-generating tools do not seem to distingush 
between strings and characters syntactically. This would allow me to 
write "'" instead of '\'' and '""' instead of "\"\"". Also, I think this 
kind of change would be backwards-compatibile.

Also, I would like to contribute an appropriate JAR manifest for 
antlr.jar but I don't see any place where I can send it. Can I just send 
it to the list as an attachment? I would like in particular to add the 
versioning information to the manifest so that a better answer to the 
"how can I tell what version of antlr.jar I have" FAQ.

Terence Parr wrote:

>Take a look at my "building a translator by hand" PDF draft chapter of 
>my book at the antlr.org site.   Look for "The Limitations of Combined 
>Syntactic and Lexical Recognizers". It explains that you need a queue of 
>tokens between lexer and parser (at least with k>1 top-down approach...I 
>suspect that LR-based systems can do without it much of the time).  The 
>difference is doing either:
>
Thanks, I will read the chapter. As Loring pointed out, when I add 
actions, tree annotations, etc., I will likely see that there is not 
much similarity between lexer and parser rules anymore. But, I still 
don't see why it is necessary to use character case to distinguish 
between lexer rules and parser rules.

 >> sufficient? If not, is it (theoretically) possible for ANTLR to 
compute the minimum value
 >> of k needed for my grammar to be unambiguous?
 > Yes. this is automatic. Slick, eh?


Yes, that is cool.

 > LR reduces to LL(k) if I put actions in the "right" spot. ;)
 > Nice little proof of this.

Could you point me to the proof? Also, if you have "functional" actions, 
are LL(k) and LR(k) then equivalent? Also, with functional actions, is 
your "approximate" LL(k) equivalent to full LL(k)?

 > Anyway, adding syntactic predicates to any parser technology takes you
 > beyond full LR(k) in strength as it is essentially backtracking.

Thanks.

>I got really pissed off the other day when i was updating the Java 
>grammar--I wanted full LL(k) rather than my approx decisions...almost 
>made me take a week off to go implement it! ;)
>
Would you mind posting this example? I'm really curious to see a 
"real-world" case where you would want full LL(k) instead of the linear 
approximation.

Thanks,
Brian



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Tue May 14 17:40:50 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Unanswered FAQ question: how to handle multiple return values?
Message-ID: <absaqi+e8ie@eGroups.com>


Hi gang,

There's a FAQ question that I suddenly am very interested in.  :)

http://www.jguru.com/forums/view.jsp?EID=305752

"ANTLR allows to specify multiple return values for a rule. What is 
the syntax to get those from a subrule? In PCCTS rule specifikation 
and usage looked the same: rule > [ret1,ret2] How do I express this 
with ANTLR 2.*?"

Anybody know how to handle this?  Besides you, Ter?  I would hope you 
already know the answer to this.  :)

thanks,
JSRS


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Tue May 14 17:46:13 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Documentation error--can someone fix it?
Message-ID: <absb4l+2ut5@eGroups.com>


In the command-line options, the docs say to use "-traceTreeWalker".  
Alas, the code insists that you use "-traceTreeParser".  That was 
annoying to figure out.  :)

I'm still running 2.7.1, so if someone's already done this, thanks.

JSRS


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From praveen_c at yahoo.com  Tue May 14 18:23:02 2002
From: praveen_c at yahoo.com (praveen_c)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: Match until "<@"
In-Reply-To: <7775D08B-6697-11D6-A920-0030653DE0D6@jguru.com>
Message-ID: <absd9m+uf7a@eGroups.com>

Hi,

I agree our grammar is context sensitive. After going through the 
examples provided, my impression is that we can use a Parser 
Generator if the boundaries are clearly defined between tokens( like 
a block of code would begin with '{' and end with '}' etc ). 
Otherwise the grammar will have to use predicates. right? In my case 
these are special tokens that we use in HTML templates....somewhat 
like JSP tags.

The only tags that I can have in my HTML templates are below:

Token 1:   (not exactly a token, but for convenience...)
--------------------------
<@loop identifierOrKeyword 1234>
   some text here....
</loop>
--------------------------

Token 2:
--------------------------
<@somesimpletexthere>
--------------------------

Token 3:
--------------------------
everything that's not part of token 3
--------------------------

Token 1 and Token 2 can occur in any order within a given HTML 
template. Note that token 3 is nothing but the remaining text i.e. 
HTML code.

Not sure if that makes it easy....

And I donot have the luxury to change this grammar as it already is 
being used in several apps. I wish my grammar is well defined like a 
language....

I made some progress in terms of Token 3 after reading your mail. But 
still a lot more needs to be done. 

Thanks,
Praveen.

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> 
> On Sunday, May 12, 2002, at 04:26  PM, praveen_c wrote:
> 
> > Terence,
> >
> > Thanks for the reply.
> >
> > In your previous mail you mentioned that this kind of problem is
> > hard for a lexer. Suppose I have tokens T1, T2 and T3 that my
> > lexer can recognize. I want all the REMAINING text that is not 
part
> > of T1, T2 and T3 to be another token T4( assume that T1, T2 and T3
> > can occur in any order ). Is there an easy way to specify this in
> > the grammar? I think I can come up with a long semantic predicate
> > that is negation of T1, T2 and T3. But like you said that doesn't
> > sound very clean.
> 
> Hmm...seems like maybe your grammar, (T1|T2|T3), would have an 
action 
> after that switched the lexer to see the T4 lexer...Hmm...is it a 
> sequence of T1..T3?  If so that is harder...you will need a trigger 
in 
> your lexer or parser somehow to know when to switch.  Typically the 
> language is the problem when you can't figure out what 
the "trigger" 
> is.  I.e., your language is highly context sensitive or something.
> 
> > So here is my question, is this a limitation of Parser Generators?
> > or is this specific to antlr. Am I better off using another Parser
> > Generator like JavaCC?
> 
> As I say, you might take a look at the language spec.  Is this 
something 
> that you folks wrote?  Can you change it?
> 
> > Before somebody flames at my post, please note that I'm just
> > learning
> > about Parser Generators and I donot have a CS degree.
> 
> No flame wars here. :)  We are a cuddly sort of mailing list :) ;)
> 
> Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From praveen_c at yahoo.com  Tue May 14 18:27:12 2002
From: praveen_c at yahoo.com (praveen_c)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: Match until "<@"
In-Reply-To: <7775D08B-6697-11D6-A920-0030653DE0D6@jguru.com>
Message-ID: <absdhg+o4r8@eGroups.com>

Hi,

I agree our grammar is context sensitive. After going through the 
examples provided, my impression is that we can use a Parser 
Generator if the boundaries are clearly defined between tokens( like 
a block of code would begin with '{' and end with '}' etc ). 
Otherwise the grammar will have to use predicates. right? In my case 
these are special tokens that we use in HTML templates....somewhat 
like JSP tags.

The only tags that I can have in my HTML templates are below:

Token 1: (not exactly a token, but for convenience...)
--------------------------
<@loop identifierOrKeyword 1234>
some text here....
</loop>
--------------------------

Token 2:
--------------------------
<@somesimpletexthere>
--------------------------

Token 3:
--------------------------
everything that's not part of token 1 and token 2
--------------------------

Token 1 and Token 2 can occur in any order within a given HTML 
template. Note that token 3 is nothing but the remaining text i.e. 
HTML code.

Not sure if that makes it easy....

And I donot have the luxury to change this grammar as it already is 
being used in several apps. I wish my grammar is well defined like a 
language....

I made some progress in terms of Token 3 after reading your mail. But 
still a lot more needs to be done. 

Thanks,
Praveen.


--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> 
> On Sunday, May 12, 2002, at 04:26  PM, praveen_c wrote:
> 
> > Terence,
> >
> > Thanks for the reply.
> >
> > In your previous mail you mentioned that this kind of problem is
> > hard for a lexer. Suppose I have tokens T1, T2 and T3 that my
> > lexer can recognize. I want all the REMAINING text that is not 
part
> > of T1, T2 and T3 to be another token T4( assume that T1, T2 and T3
> > can occur in any order ). Is there an easy way to specify this in
> > the grammar? I think I can come up with a long semantic predicate
> > that is negation of T1, T2 and T3. But like you said that doesn't
> > sound very clean.
> 
> Hmm...seems like maybe your grammar, (T1|T2|T3), would have an 
action 
> after that switched the lexer to see the T4 lexer...Hmm...is it a 
> sequence of T1..T3?  If so that is harder...you will need a trigger 
in 
> your lexer or parser somehow to know when to switch.  Typically the 
> language is the problem when you can't figure out what 
the "trigger" 
> is.  I.e., your language is highly context sensitive or something.
> 
> > So here is my question, is this a limitation of Parser Generators?
> > or is this specific to antlr. Am I better off using another Parser
> > Generator like JavaCC?
> 
> As I say, you might take a look at the language spec.  Is this 
something 
> that you folks wrote?  Can you change it?
> 
> > Before somebody flames at my post, please note that I'm just
> > learning
> > about Parser Generators and I donot have a CS degree.
> 
> No flame wars here. :)  We are a cuddly sort of mailing list :) ;)
> 
> Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue May 14 18:29:05 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Documentation error--can someone fix it?
In-Reply-To: <absb4l+2ut5@eGroups.com>
Message-ID: <253988D8-67A3-11D6-9642-0030653DE0D6@jguru.com>


On Tuesday, May 14, 2002, at 05:46  PM, jsrs701 wrote:

>
> In the command-line options, the docs say to use "-traceTreeWalker".
> Alas, the code insists that you use "-traceTreeParser".  That was
> annoying to figure out.  :)
>
> I'm still running 2.7.1, so if someone's already done this, thanks.

I'll look into it.
Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Wed May 15 04:35:20 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Unanswered FAQ question: how to handle multiple return values?
In-Reply-To: <absaqi+e8ie@eGroups.com>; from jsrs701@yahoo.com on Wed, May 15, 2002 at 12:40:50AM -0000
References: <absaqi+e8ie@eGroups.com>
Message-ID: <20020515133520.C1103@cs.utwente.nl>

On Wed, May 15, 2002 at 12:40:50AM -0000, jsrs701 wrote:
> There's a FAQ question that I suddenly am very interested in.  :)
> 
> http://www.jguru.com/forums/view.jsp?EID=305752

For some vague reason jguru doesn't show a reply button :P

> "ANTLR allows to specify multiple return values for a rule. What is 
> the syntax to get those from a subrule? In PCCTS rule specifikation 
> and usage looked the same: rule > [ret1,ret2] How do I express this 
> with ANTLR 2.*?"
> 
> Anybody know how to handle this?  Besides you, Ter?  I would hope you 
> already know the answer to this.  :)

Think this is a documentation bug. Not 100% sure though, I really cannot
recall anything in the codegenerators that would support this.

In C++ I'd use a 'tuple' class like provided by the boost library
(www.boost.org).

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Wed May 15 04:37:53 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Documentation error--can someone fix it?
In-Reply-To: <253988D8-67A3-11D6-9642-0030653DE0D6@jguru.com>; from parrt@jguru.com on Tue, May 14, 2002 at 06:29:05PM -0700
References: <absb4l+2ut5@eGroups.com> <253988D8-67A3-11D6-9642-0030653DE0D6@jguru.com>
Message-ID: <20020515133752.D1103@cs.utwente.nl>

On Tue, May 14, 2002 at 06:29:05PM -0700, Terence Parr wrote:
> > In the command-line options, the docs say to use "-traceTreeWalker".
> > Alas, the code insists that you use "-traceTreeParser".  That was
> > annoying to figure out.  :)
> >
> > I'm still running 2.7.1, so if someone's already done this, thanks.
> 
> I'll look into it.

Fixed it ages ago. Also --help -h and antlr without parameters list the
right thing (-traceTreeParser).

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
              of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed May 15 09:32:21 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] More ANTLR meta-syntax questions
References: <C531A288-6763-11D6-B06A-0030653DE0D6@jguru.com>
Message-ID: <3CE28D95.9E414139@boeing.com>

Terence Parr wrote:
> 
[...]
> 
> I got really pissed off the other day when i was updating the Java
> grammar--I wanted full LL(k) rather than my approx decisions...almost
> made me take a week off to go implement it! ;)
> 
> Ter


We need a list of things that will piss you off. ;-)


Anyway, an obvious answer to Parser/Lexer separation is

the statement :

 rule1: "k" "e" "y" "w" "o" "r" "d" another_rule ; // requires k=8 ( or
7)

 and 

 rule2: Keyword another_rule ; // requires k=1 


 Now if your rules are such that moving from rule1 yo rule2 is simply
moving the
keyword to the lexer, then obviously a k=8 lookahead is the same for
parser and lexer.
However with many keywords, it quickly gets out of hand ( if not for the
computer,
at least for the human ....)...

Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From chris_rudolph at apple.com  Wed May 15 09:55:25 2002
From: chris_rudolph at apple.com (Chris Rudolph)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Objective-C Codegen?
Message-ID: <B907E10D.11BFB%chris_rudolph@apple.com>

Hi all,

Is anyone working on an objective-c codegen option? Given the closeness to
Java, I'd imagine it wouldn't be too much work.

Cheers,
Chris.

-- 
Chris Rudolph, Apple Computer, Inc.
rudy@apple.com





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed May 15 10:08:41 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Objective-C Codegen?
Message-ID: <170826586F3BD511910D0200C110AAA8032B4957@memail03.bco-home.com>

No one is that I know of.  I've thought about it before, and would love to
see one.  The main thing lacking that I know of is exception handling.  I
fell off the NeXT bandwagon around NeXTSTEP 3.1 :(  Have things changed for
exception handling, or is it still macros wrapped around setjmp/longjmp?
How would you translate a try/catch/throw into ObjC?

I would be happy to help, either through this list or as a contractor.

Monty

www.codetransform.com


> -----Original Message-----
> From: Chris Rudolph [mailto:chris_rudolph@apple.com]
> Sent: Wednesday, May 15, 2002 9:55 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Objective-C Codegen?
> 
> 
> Hi all,
> 
> Is anyone working on an objective-c codegen option? Given the 
> closeness to
> Java, I'd imagine it wouldn't be too much work.
> 
> Cheers,
> Chris.
> 
> -- 
> Chris Rudolph, Apple Computer, Inc.
> rudy@apple.com
> 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed May 15 10:27:53 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Objective-C Codegen?
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4957@memail03.bco-home.com>
Message-ID: <1694E27B-6829-11D6-A700-0030653DE0D6@jguru.com>

Hi Chris,

I know of a guy at Apple with a piece of one...I'll send their emails to 
you directly.

Thanks,
Ter

On Wednesday, May 15, 2002, at 10:08  AM, mzukowski@yci.com wrote:

> No one is that I know of.  I've thought about it before, and would love 
> to
> see one.  The main thing lacking that I know of is exception 
> handling.  I
> fell off the NeXT bandwagon around NeXTSTEP 3.1 :(  Have things changed 
> for
> exception handling, or is it still macros wrapped around setjmp/longjmp?
> How would you translate a try/catch/throw into ObjC?
>
> I would be happy to help, either through this list or as a contractor.
>
> Monty
>
> www.codetransform.com
>
>
>> -----Original Message-----
>> From: Chris Rudolph [mailto:chris_rudolph@apple.com]
>> Sent: Wednesday, May 15, 2002 9:55 AM
>> To: antlr-interest@yahoogroups.com
>> Subject: [antlr-interest] Objective-C Codegen?
>>
>>
>> Hi all,
>>
>> Is anyone working on an objective-c codegen option? Given the
>> closeness to
>> Java, I'd imagine it wouldn't be too much work.
>>
>> Cheers,
>> Chris.
>>
>> --
>> Chris Rudolph, Apple Computer, Inc.
>> rudy@apple.com
>>
>>
>>
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to
>> http://docs.yahoo.com/info/terms/
>>
>>
>>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From warkda at yahoo.com  Wed May 15 14:59:57 2002
From: warkda at yahoo.com (warkda)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] x86 assembly language grammar?
Message-ID: <abulot+mis7@eGroups.com>

Hi,

Does anyone have or know the location of an ANTLR grammar for x86 
assembly language? Ideally, it should be for the TASM version of x86 
assembly, and the grammar should correctly identify assembler 
directives.

(E)BNF would also be nice. Even an English-based comprehensive 
description of the language accepted by TASM would be useful.

TIA,

Mihai



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From chris_rudolph at apple.com  Wed May 15 20:41:24 2002
From: chris_rudolph at apple.com (Chris Rudolph)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Objective-C Codegen?
Message-ID: <B9087874.11D75%chris_rudolph@apple.com>

On 5/15/02 10:08 AM, "mzukowski@yci.com" <mzukowski@yci.com> wrote:

> No one is that I know of.  I've thought about it before, and would love to
> see one.  The main thing lacking that I know of is exception handling.  I
> fell off the NeXT bandwagon around NeXTSTEP 3.1 :(  Have things changed for
> exception handling, or is it still macros wrapped around setjmp/longjmp?
> How would you translate a try/catch/throw into ObjC?
> 
> I would be happy to help, either through this list or as a contractor.
> 
> Monty
> 
> www.codetransform.com

Hi Monty,

Apple's verison of Obj-C uses NS_DURING, NS_HANDLER, NS_ENDHANDLER which
pretty much wrap setjmp/longjmp.

I'll let you know what I discover.

Cheers,
Chris.

-- 
Chris Rudolph, Apple Computer, Inc.
rudy@apple.com




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hiro at kanagawa-u.ac.jp  Wed May 15 22:04:37 2002
From: hiro at kanagawa-u.ac.jp (Hiroyuki Sato)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Objective-C Codegen?
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4957@memail03.bco-home.com>
Message-ID: <6BA89BE8-688A-11D6-8187-003065C7E804@kanagawa-u.ac.jp>

I'm newbie Objective-C and ANTLR

As far as I know, gsantlr is one of Code Generator for Objective-C.
http://www.gnustepweb.org/TDocs/gsantlr/

gsantlr still loacking many features.
for example, Exception Handler.

I modified gnantlr for my study (ObjC and ANTLR)
and succeed to translate some example programs
calc, HTML and so on.

But I could not translate many example which using Exception Handler
So, I also want to know to translate a try/catch/throw into ObjC.
For example, how to translate following code into Objective-C?

try {
   ...
   ...
   try {   // try in catch
   } catch( FooException e ){
   } catch( Exception ex ){
   }
} catch ( BarExceptionException e ){
   try { // try in catch
      ...
      ...
   } catch (Exception ex ){
      throw ex;
   }
} catch ( Exception e ){
  throw e;
}

On 2002.05.16, at 02:08, mzukowski@yci.com wrote:

> No one is that I know of.  I've thought about it before, and would love 
> to
> see one.  The main thing lacking that I know of is exception 
> handling.  I
> fell off the NeXT bandwagon around NeXTSTEP 3.1 :(  Have things changed 
> for
> exception handling, or is it still macros wrapped around setjmp/longjmp?
> How would you translate a try/catch/throw into ObjC?
>
> I would be happy to help, either through this list or as a contractor.
>
> Monty
>
> www.codetransform.com
>
>
>> -----Original Message-----
>> From: Chris Rudolph [mailto:chris_rudolph@apple.com]
>> Sent: Wednesday, May 15, 2002 9:55 AM
>> To: antlr-interest@yahoogroups.com
>> Subject: [antlr-interest] Objective-C Codegen?
>>
>>
>> Hi all,
>>
>> Is anyone working on an objective-c codegen option? Given the
>> closeness to
>> Java, I'd imagine it wouldn't be too much work.
>>
>> Cheers,
>> Chris.
>>
>> --
>> Chris Rudolph, Apple Computer, Inc.
>> rudy@apple.com
>>
--
Hiroyuki Sato
Kanagawa University.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hiro at kanagawa-u.ac.jp  Wed May 15 22:18:04 2002
From: hiro at kanagawa-u.ac.jp (Hiroyuki Sato)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Objective-C Codegen?
In-Reply-To: <6BA89BE8-688A-11D6-8187-003065C7E804@kanagawa-u.ac.jp>
Message-ID: <4C97C60F-688C-11D6-8187-003065C7E804@kanagawa-u.ac.jp>

When you download gsantlr,
just execute

% cvs -d :pserver:anoncvs@cvs.gnustep.org:/cvsroot/gnustep login
CVS password: <return>
% cvs -d :pserver:anoncvs@cvs.gnustep.org:/cvsroot/gnustep co gsantlr

On 2002.05.16, at 14:04, Hiroyuki Sato wrote:

> I'm newbie Objective-C and ANTLR
>
> As far as I know, gsantlr is one of Code Generator for Objective-C.
> http://www.gnustepweb.org/TDocs/gsantlr/
>
> gsantlr still loacking many features.
> for example, Exception Handler.
>
--
Hiroyuki Sato
CCSO, Kanagawa University.
Voice: +81-45-491-2572
FAX: +81-45-491-2575


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From chris_rudolph at apple.com  Wed May 15 22:36:00 2002
From: chris_rudolph at apple.com (Chris Rudolph)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Objective-C Codegen?
In-Reply-To: <6BA89BE8-688A-11D6-8187-003065C7E804@kanagawa-u.ac.jp>
Message-ID: <B9089350.11DA0%chris_rudolph@apple.com>

On 5/15/02 10:04 PM, "Hiroyuki Sato" <hiro@kanagawa-u.ac.jp> wrote:

> I'm newbie Objective-C and ANTLR
> 
> As far as I know, gsantlr is one of Code Generator for Objective-C.
> http://www.gnustepweb.org/TDocs/gsantlr/
> 
> gsantlr still loacking many features.
> for example, Exception Handler.
> 
> I modified gnantlr for my study (ObjC and ANTLR)
> and succeed to translate some example programs
> calc, HTML and so on.
> 
> But I could not translate many example which using Exception Handler
> So, I also want to know to translate a try/catch/throw into ObjC.
> For example, how to translate following code into Objective-C?
> 
> try {
>  ...
>  ...
>  try {   // try in catch
>  } catch( FooException e ){
>  } catch( Exception ex ){
>  }
> } catch ( BarExceptionException e ){
>  try { // try in catch
>     ...
>     ...
>  } catch (Exception ex ){
>     throw ex;
>  }
> } catch ( Exception e ){
> throw e;
> }
> 
> On 2002.05.16, at 02:08, mzukowski@yci.com wrote:
> 

Hi Hiroyuki,

How about:

- (void) blah
{
    NS_DURING
    {
        NS_DURING
        {
            NSException*    ex = [ NSException exceptionWithName:
@"BlahException"
                                                       reason: @"just
because"
                                                     userInfo: nil ];
            [ ex raise ];

        }          
        NS_HANDLER    // exception is local variable localException
        {
            if( [ [ localException name ] isEqualToString: @"BlahException"
] )
            {
                // ...
            }
            
            [ localException raise ];
        }
        NS_ENDHANDLER
    }              
    NS_HANDLER    // exception is local variable localException
    {
        if( [ [ localException name ] isEqualToString: @"BlahException" ] )
        {
            // ...
        }
    }
    NS_ENDHANDLER
}

Cheers,
Chris


-- 
Chris Rudolph, Apple Computer, Inc.
rudy@apple.com



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From hiro at kanagawa-u.ac.jp  Wed May 15 23:02:34 2002
From: hiro at kanagawa-u.ac.jp (Hiroyuki Sato)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Objective-C Codegen?
In-Reply-To: <B9089350.11DA0%chris_rudolph@apple.com>
Message-ID: <83DDDE94-6892-11D6-8187-003065C7E804@kanagawa-u.ac.jp>

Hi Chris.

How about following arrow point?
In fact, when I use filter=RULE feature in lexer,
ANTLR for Java generate following code in nextToken().

try {
   ...
   ...
   try {   // try in catch
   } catch( FooException e ){
   } catch( Exception ex ){
   }
} catch ( BarExceptionException e ){
   try { // try in catch               <--
      ...                              <-- How to translate into ObjC?
      ...                              <--
   } catch (Exception ex ){            <--
      throw ex;                        <--
   }                                   <--
} catch ( Exception e ){
  throw e;
}

- (void) blah
{
     NS_DURING
     {
         NS_DURING
         {
             NSException*    ex = [ NSException 
exceptionWithName:@"BlahException"
                                                  reason: @"just because"
                                                      userInfo: nil ];
             [ ex raise ];
         }
         NS_HANDLER    // exception is local variable localException
         {
             if( [ [ localException name ] isEqualToString: 
@"BlahException"] )
             {
                 // ...
             }

             [ localException raise ];
         }
         NS_ENDHANDLER
     }
     NS_HANDLER    // exception is local variable localException
     {
         if( [ [ localException name ] isEqualToString: 
@"BlahException" ] )
         {
             // ....
             NS_DURING               <----
             {                       <---- Is this correct ?
             }                       <----
             NS_HANDLER              <----
             {                       <----
             }                       <----
             NS_ENDHANDLER           <----
         }
     }
     NS_ENDHANDLER
}

On 2002.05.16, at 14:36, Chris Rudolph wrote:

>> For example, how to translate following code into Objective-C?
>>
>> try {
>>  ...
>>  ...
>>  try {   // try in catch
>>  } catch( FooException e ){
>>  } catch( Exception ex ){
>>  }
>> } catch ( BarExceptionException e ){
>>  try { // try in catch
>>     ...
>>     ...
>>  } catch (Exception ex ){
>>     throw ex;
>>  }
>> } catch ( Exception e ){
>> throw e;
>> }
>>
>> On 2002.05.16, at 02:08, mzukowski@yci.com wrote:
>>
>
> Hi Hiroyuki,
>
> How about:
>
> - (void) blah
> {
>     NS_DURING
>     {
>         NS_DURING
>         {
>             NSException*    ex = [ NSException exceptionWithName:
> @"BlahException"
>                                                        reason: @"just
> because"
>                                                      userInfo: nil ];
>             [ ex raise ];
>
>         }
>         NS_HANDLER    // exception is local variable localException
>         {
>             if( [ [ localException name ] isEqualToString: 
> @"BlahException"
> ] )
>             {
>                 // ...
>             }
>
>             [ localException raise ];
>         }
>         NS_ENDHANDLER
>     }
>     NS_HANDLER    // exception is local variable localException
>     {
>         if( [ [ localException name ] isEqualToString: 
> @"BlahException" ] )
>         {
>             // ...
>         }
>     }
>     NS_ENDHANDLER
> }
>
> Cheers,
> Chris
>
>
--
Hiroyuki Sato
CCSO, Kanagawa University.
Voice: +81-45-491-2572
FAX: +81-45-491-2575


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu May 16 08:31:01 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Problems with Unicode support in ANTLR
Message-ID: <ac0jbl+j7ut@eGroups.com>

Hi All,

I am currently trying to develop a Lexer (and later a Parser) using 
ANTLR for a langauge that must be able to deal with UNICODE 
extensively.

The basic issue is that since the defintion of the language (as does 
Java in fact) refers to Unicode Categories or Classes, I need a way 
to direct ANTLR to accept or reject all the caharacters defined to be 
in such Unicode classes. I can see three general solutions to this:

a) Use ANTLR's has built-in support for Unicode that includes 
categories and classes

   This would be ideal but ANTLR hasn't evolved to this state yet.  :-
(


b) Use a rule that matches any character but then applies a predicate 
to validate the character. For instance:

        protected UNICODE_CLASS_Nl
          :  (   { IsUnicodeClass_Nl(LA(1)) }? . 
             |   { IsUnicodeClass_Nl(esc_char.getText()) }? 
esc_char:UNICODE_ESCAPE_SEQUENCE 
             )
        ;

   This was my first course of action but it lead to a LOT of 
ambiguity warnings that I don't know how to turn off ;-(
   Any ideas how to turn this warnings off selectively please?


c) Define all the UNICODE categories directly within the ANTLR 
definition file
   (Can one ANTLR definition file #include another ANTLR definition 
file with all such UNICODE classes?).

   For instance:

        protected UNICODE_CLASS_Nl           // Unicode Category or 
Class: Nl
          :  ( '\u16EE'..'\u16F0' 
             | '\u2160'..'\u2183'
             | '\u3007'..'\u3007'
             | '\u3021'..'\u3029'
             | '\u3038'..'\u303A'
             )
           ;

   This option had the effect of generating HUGE lexer files - 
currently over 100kB with four categories partially defined. There 
are 32 such categories although I only need about half. And lots of 
errors because of the numeric size of parameters to the calls 
to 'matchRange'. The first range above - '\u16EE'..'\u16F0' - 
generates the following call:

          matchRange('\x4543d','\x45430');

I suspect this is due to a bug in the C# codegenerator (IOW it's 
probably my bug since I am part of the team that wrote that) because 
all the character values in the definition are valid. I have used the 
the following option:

           charVocabulary		= '\u0003'..'\uFFFE';


CONCLUSION:

I would have loved to be able to use option (a). Since I don't have 
that option I thought option (b) would be clearer and more succint 
than (c) and would perform better given it's vastly reduced codesize. 

I will track down the origins of the errors on option (c) but I 
dislike it because it results in a huge ANTLR definition file and a 
huge generated Lexer/Parser source file. Am I right in thinking it 
would result in perhaps the least performant parsers?

What do you fine people suggest?


Cheers,

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From brian-l-smith at uiowa.edu  Thu May 16 10:31:14 2002
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Problems with Unicode support in ANTLR
References: <ac0jbl+j7ut@eGroups.com>
Message-ID: <3CE3ECE2.2060503@uiowa.edu>

Are the predefined Unicode blocks that are handled by 
java.lang.Character.UnicodeBlock sufficient for what you need? Or, do 
you need a different classification?

I was thinking of patching ANTLR's Java generator to be able to use 
named unicode character catagories as "pre-defined" "protected" lexer 
rules, but supporting anything more than the Character class handles is 
over my head.

Also, the ANTLR documentation isn't really very clear about what kind of 
Unicode support ANTLR already has. What are the limitations?

- Brian

micheal_jor wrote:

>Hi All,
>
>I am currently trying to develop a Lexer (and later a Parser) using 
>ANTLR for a langauge that must be able to deal with UNICODE 
>extensively.
>
>The basic issue is that since the defintion of the language (as does 
>Java in fact) refers to Unicode Categories or Classes, I need a way 
>to direct ANTLR to accept or reject all the caharacters defined to be 
>in such Unicode classes. I can see three general solutions to this:
>
>a) Use ANTLR's has built-in support for Unicode that includes 
>categories and classes
>
>   This would be ideal but ANTLR hasn't evolved to this state yet.  :-
>(
>
>
>b) Use a rule that matches any character but then applies a predicate 
>to validate the character. For instance:
>
>        protected UNICODE_CLASS_Nl
>          :  (   { IsUnicodeClass_Nl(LA(1)) }? . 
>             |   { IsUnicodeClass_Nl(esc_char.getText()) }? 
>esc_char:UNICODE_ESCAPE_SEQUENCE 
>             )
>        ;
>
>   This was my first course of action but it lead to a LOT of 
>ambiguity warnings that I don't know how to turn off ;-(
>   Any ideas how to turn this warnings off selectively please?
>
>
>c) Define all the UNICODE categories directly within the ANTLR 
>definition file
>   (Can one ANTLR definition file #include another ANTLR definition 
>file with all such UNICODE classes?).
>
>   For instance:
>
>        protected UNICODE_CLASS_Nl           // Unicode Category or 
>Class: Nl
>          :  ( '\u16EE'..'\u16F0' 
>             | '\u2160'..'\u2183'
>             | '\u3007'..'\u3007'
>             | '\u3021'..'\u3029'
>             | '\u3038'..'\u303A'
>             )
>           ;
>
>   This option had the effect of generating HUGE lexer files - 
>currently over 100kB with four categories partially defined. There 
>are 32 such categories although I only need about half. And lots of 
>errors because of the numeric size of parameters to the calls 
>to 'matchRange'. The first range above - '\u16EE'..'\u16F0' - 
>generates the following call:
>
>          matchRange('\x4543d','\x45430');
>
>I suspect this is due to a bug in the C# codegenerator (IOW it's 
>probably my bug since I am part of the team that wrote that) because 
>all the character values in the definition are valid. I have used the 
>the following option:
>
>           charVocabulary		= '\u0003'..'\uFFFE';
>
>
>CONCLUSION:
>
>I would have loved to be able to use option (a). Since I don't have 
>that option I thought option (b) would be clearer and more succint 
>than (c) and would perform better given it's vastly reduced codesize. 
>
>I will track down the origins of the errors on option (c) but I 
>dislike it because it results in a huge ANTLR definition file and a 
>huge generated Lexer/Parser source file. Am I right in thinking it 
>would result in perhaps the least performant parsers?
>
>What do you fine people suggest?
>
>
>Cheers,
>
>Micheal
>
>
>
>
> 
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
>




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Thu May 16 13:18:36 2002
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] More ANTLR meta-syntax questions
In-Reply-To: <C531A288-6763-11D6-B06A-0030653DE0D6@jguru.com>
References: <3CE0C72C.1090200@uiowa.edu>
	<C531A288-6763-11D6-B06A-0030653DE0D6@jguru.com>
Message-ID: <15588.5148.533786.508972@non.non.net>

>>>>> "Terence" == Terence Parr <parrt@jguru.com> writes:
[...]
> Add semantic predicates and ANTLR kicks all their butts! ;)

Yeah!

> I got really pissed off the other day when i was updating the Java
> grammar--I wanted full LL(k) rather than my approx decisions...almost
> made me take a week off to go implement it! ;)

Don't tease me!

:-),
	John "No pressure" Mitchell

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu May 16 13:59:42 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] More ANTLR meta-syntax questions
In-Reply-To: <15588.5148.533786.508972@non.non.net>
Message-ID: <D82D3803-690F-11D6-B455-0030653DE0D6@jguru.com>


On Thursday, May 16, 2002, at 01:18  PM, John D. Mitchell wrote:

>>>>>> "Terence" == Terence Parr <parrt@jguru.com> writes:
> [...]
>> Add semantic predicates and ANTLR kicks all their butts! ;)
>
> Yeah!
>
>> I got really pissed off the other day when i was updating the Java
>> grammar--I wanted full LL(k) rather than my approx decisions...almost
>> made me take a week off to go implement it! ;)
>
> Don't tease me!
>
> :-),
> 	John "No pressure" Mitchell

Whhhhhaaat?  No mention of sem pred hoisting?!  Gees, you're getting 
soft in your old age, John! <guffaw>.

Yepper, would be nice. :)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu May 16 14:04:30 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR
In-Reply-To: <3CE3ECE2.2060503@uiowa.edu>
Message-ID: <ac16su+9vre@eGroups.com>

--- In antlr-interest@y..., Brian Smith <brian-l-smith@u...> wrote:
> Are the predefined Unicode blocks that are handled by 
> java.lang.Character.UnicodeBlock sufficient for what you need? Or, 
do 
> you need a different classification?

No Unicode blocks are a different concept from Unicode General 
Categories. I don't think Java's standard libraries support Unicode 
categories.

The open source ICU4J from IBM supports Unicode much better and the 
has UCharacter and UCharacterCategory classes that do the job for me.

http://oss.software.ibm.com/icu4j/

> I was thinking of patching ANTLR's Java generator to be able to use 
> named unicode character catagories as "pre-defined" "protected" 
lexer 
> rules, but supporting anything more than the Character class 
handles is 
> over my head.

Thet would a useful addition - I mean the ability to define 
such "preset" rules in ANTLR. I can do the work for Unicode 
categories once the basic framework is in place.

ter, is it OK to have ANTLR rely on additional libraries or would I 
have to somehow port the Unicode required functionality into ANTLR 
directly.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From brian-l-smith at uiowa.edu  Thu May 16 15:05:41 2002
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR
References: <ac16su+9vre@eGroups.com>
Message-ID: <3CE42D35.4020702@uiowa.edu>

micheal_jor wrote:
> --- In antlr-interest@y..., Brian Smith <brian-l-smith@u...> wrote:
> 
> No Unicode blocks are a different concept from Unicode General 
> Categories. I don't think Java's standard libraries support Unicode 
> categories.

Okay, I see what you are talking about. Java's Character class does have 
support for some catagories; see 
http://java.sun.com/j2se/1.4/docs/api/java/lang/Character.html

Please look at the listed catagories and let me know if it is too 
limited. In particular, java.lang.Character.getType(), and the static 
final catagory constants.

>>I was thinking of patching ANTLR's Java generator to be able to use 
>>named unicode character catagories as "pre-defined" "protected" 
>> lexer rules, but supporting anything more than the Character class 
>> handles is over my head.
> 
> Thet would a useful addition - I mean the ability to define 
> such "preset" rules in ANTLR. I can do the work for Unicode 
> categories once the basic framework is in place.

> ter, is it OK to have ANTLR rely on additional libraries or would I 
> have to somehow port the Unicode required functionality into ANTLR 
> directly.

I would rather not have my Unicode-parsing application depend on IBM's 
library since I would have to distribute it. I think that the 
java.lang.Character class's support is sufficient.

Presumably, the modified ANTLR would then generate code like this:
     int type = Character.getType(LA(1));
     switch (type) {
        case Character.END_PUNCTUATION:
             mRULE(true);
             theRetToken=_returnToken;
             break;
        ....
     }

What do you think?

- Brian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Thu May 16 15:10:56 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR
References: <ac16su+9vre@eGroups.com>
Message-ID: <001b01c1fd26$8dbad1e0$0200a8c0@matthewfnb>

I have a Unicode example I did in Antlr (Java output) some time ago.  I
thought Unicode was fixed.
I include the code here (it also covers adding fonts to Java).
matthew
----- Original Message -----
From: "micheal_jor" <open.zone@virgin.net>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, May 17, 2002 7:04 AM
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR


> --- In antlr-interest@y..., Brian Smith <brian-l-smith@u...> wrote:
> > Are the predefined Unicode blocks that are handled by
> > java.lang.Character.UnicodeBlock sufficient for what you need? Or,
> do
> > you need a different classification?
>
> No Unicode blocks are a different concept from Unicode General
> Categories. I don't think Java's standard libraries support Unicode
> categories.
>
> The open source ICU4J from IBM supports Unicode much better and the
> has UCharacter and UCharacterCategory classes that do the job for me.
>
> http://oss.software.ibm.com/icu4j/
>
> > I was thinking of patching ANTLR's Java generator to be able to use
> > named unicode character catagories as "pre-defined" "protected"
> lexer
> > rules, but supporting anything more than the Character class
> handles is
> > over my head.
>
> Thet would a useful addition - I mean the ability to define
> such "preset" rules in ANTLR. I can do the work for Unicode
> categories once the basic framework is in place.
>
> ter, is it OK to have ANTLR rely on additional libraries or would I
> have to somehow port the Unicode required functionality into ANTLR
> directly.
>
> Micheal
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Unicode.zip
Type: application/x-zip-compressed
Size: 11625 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20020517/b59c51cc/Unicode.bin
From open.zone at virgin.net  Thu May 16 18:29:20 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR
In-Reply-To: <3CE42D35.4020702@uiowa.edu>
Message-ID: <ac1mdg+5ph1@eGroups.com>


> Okay, I see what you are talking about. Java's Character class does 
have 
> support for some catagories; see 
> http://java.sun.com/j2se/1.4/docs/api/java/lang/Character.html
> 
> Please look at the listed catagories and let me know if it is too 
> limited. In particular, java.lang.Character.getType(), and the 
static 
> final catagory constants.

I saw the static constants but could see that they were used 
anywhere. Not surprisingly, I don't believe someone actually 
thought "getType()" makes sense as the accessor for a character's 
Unicode General Category -- what happened to getCategory() or 
getGeneralCategory()?. Sheez!

In any case, you are right that the feature is supported.


> I would rather not have my Unicode-parsing application depend on 
IBM's 
> library since I would have to distribute it. I think that the 
> java.lang.Character class's support is sufficient.

For the feature we've discussed fo far, yes it is. The license for 
IBM's package doesn't forbid extracting what we need into ANTLR if 
memory serves.

> Presumably, the modified ANTLR would then generate code like this:
>      int type = Character.getType(LA(1));
>      switch (type) {
>         case Character.END_PUNCTUATION:
>              mRULE(true);
>              theRetToken=_returnToken;
>              break;
>         ....
>      }
> 

Erm....Terrence are you there?  ;-)

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu May 16 18:53:39 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR
In-Reply-To: <ac1mdg+5ph1@eGroups.com>
Message-ID: <E8E6DF36-6938-11D6-AB08-0030653DE0D6@jguru.com>

> Erm....Terrence are you there?  ;-)

Who me? ;)  I've been waiting to see what direction people would point 
me. ;)  I've just looked at the source for Character.getType() and all 
those wacky mysterious tables at the bottom of the Character.java source.

Recall that ANTLR generates bitsets on its own.  If you say (' '|'\t') 
or 'a'..'z' you'll see that antlr tests LA(1) is member "some bitset 
defined in bottom of lexer file".  What we need is for ANTLR to be aware 
of the standard categories (UnicodeBlocks) like LOWERCASE_LETTER.  The 
only problem is that we'll have to convert LOWERCASE_LETTER to a 
straight bitset that maps char -> yes/no if it's in that set.  So we 
could do test LA(1), the next char of lookahead, against it.  Also, 
don't forget that ANTLR needs to do the grammar analysis so that it can 
determine if you have a nondetermism.  For example, I presume the 
following would be ambiguous/nondeterministic:

DUH : LOWERCASE_LETTER | BASIC_LATIN | BENGALI ;

I believe I could predefine all these character categories and then 
simply let you refer to them.  Note that for every set you reference 
though would be a potentially very big uncompressed bitset.  Worst case, 
if you have digit \uFFFE defined, you'd have about 65 kilobits in the 
set or about 8k per bitset.  Every time I have to combine this set with 
a character or another set, that's another 8k worst case.  I could 
probably make a simple compression that ignored long runs of zeros on 
the front of the bit set.

Is this the kind of thing you would need?  I.e., to be able to 
specifically refer to predefined Java character blocks as predefined 
ANTLR "characters"?

Ter

On Thursday, May 16, 2002, at 06:29  PM, micheal_jor wrote:

>
>> Okay, I see what you are talking about. Java's Character class does
> have
>> support for some catagories; see
>> http://java.sun.com/j2se/1.4/docs/api/java/lang/Character.html
>>
>> Please look at the listed catagories and let me know if it is too
>> limited. In particular, java.lang.Character.getType(), and the
> static
>> final catagory constants.
>
> I saw the static constants but could see that they were used
> anywhere. Not surprisingly, I don't believe someone actually
> thought "getType()" makes sense as the accessor for a character's
> Unicode General Category -- what happened to getCategory() or
> getGeneralCategory()?. Sheez!
>
> In any case, you are right that the feature is supported.
>
>
>> I would rather not have my Unicode-parsing application depend on
> IBM's
>> library since I would have to distribute it. I think that the
>> java.lang.Character class's support is sufficient.
>
> For the feature we've discussed fo far, yes it is. The license for
> IBM's package doesn't forbid extracting what we need into ANTLR if
> memory serves.
>
>> Presumably, the modified ANTLR would then generate code like this:
>>      int type = Character.getType(LA(1));
>>      switch (type) {
>>         case Character.END_PUNCTUATION:
>>              mRULE(true);
>>              theRetToken=_returnToken;
>>              break;
>>         ....
>>      }
>>
>
> Erm....Terrence are you there?  ;-)
>
> Micheal
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu May 16 19:41:34 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR
In-Reply-To: <E8E6DF36-6938-11D6-AB08-0030653DE0D6@jguru.com>
Message-ID: <ac1qku+c5f6@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> > Erm....Terrence are you there?  ;-)
> 
> Who me? ;)  I've been waiting to see what direction people would 
point 
> me. ;)  I've just looked at the source for Character.getType() and 
all 
> those wacky mysterious tables at the bottom of the Character.java 
source.

And now you've got me doing the same ;-)

The 
> only problem is that we'll have to convert LOWERCASE_LETTER to a 
> straight bitset that maps char -> yes/no if it's in that set.  So 
we 
> could do test LA(1), the next char of lookahead, against it.  Also, 
> don't forget that ANTLR needs to do the grammar analysis so that it 
can 
> determine if you have a nondetermism.  For example, I presume the 
> following would be ambiguous/nondeterministic:
> 
> DUH : LOWERCASE_LETTER | BASIC_LATIN | BENGALI ;

Perhaps a restriction on combining pre-defined UnicodeBlocks and 
UnicodeCategories in this manner since they rarely make sense 
together?

I see UnicodeBlock as being more useful in setting CharVocabulary 
option although that may just be because I'm relatively unfamilair 
with them. In fact I think that is what it is.....ignore me.

> I believe I could predefine all these character categories and then 
> simply let you refer to them.  Note that for every set you 
reference 
> though would be a potentially very big uncompressed bitset.  Worst 
case, 
> if you have digit \uFFFE defined, you'd have about 65 kilobits in 
the 
> set or about 8k per bitset.  Every time I have to combine this set 
with 
> a character or another set, that's another 8k worst case.  I could 
> probably make a simple compression that ignored long runs of zeros 
on 
> the front of the bit set.

Perhaps a separation of BitSet's implementation from it's interface 
so one could create a SparseRangeBitSet implementation that simply 
stores a list of the ranges of "YES" characters (or NO depending 
which is more compact) permitted as perhaps two int arrays and only 
generates a "traditional" BitSet if it is essential to do so.

> Is this the kind of thing you would need?  I.e., to be able to 
> specifically refer to predefined Java character blocks as 
predefined 
> ANTLR "characters"?

Yes, that would a very good start for better Unicode support in ANTLR.

Cheers,

Micheal

PS     Would you be kind enough to look at my original post please?
       I would like your opinion on choosing between (b) and (c) and, 
the questions I raised about both [ e.g. how to shut off the warnings 
on (b) ]


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Thu May 16 19:54:33 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR
References: <ac1qku+c5f6@eGroups.com>
Message-ID: <004501c1fd4e$2f4bd5a0$0200a8c0@matthewfnb>

Perhaps I am missing the thrust of this exchange, but
my requirement for Unicode in Antlr is to support an English command set and
foreign language (initially Japanese)
variable names.
This talk of character blocks seems too restrictive.
I need full Unicode support to cover the possible variable names.
matthew
----- Original Message -----
From: "micheal_jor" <open.zone@virgin.net>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, May 17, 2002 12:41 PM
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR


> --- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> > > Erm....Terrence are you there?  ;-)
> >
> > Who me? ;)  I've been waiting to see what direction people would
> point
> > me. ;)  I've just looked at the source for Character.getType() and
> all
> > those wacky mysterious tables at the bottom of the Character.java
> source.
>
> And now you've got me doing the same ;-)
>
> The
> > only problem is that we'll have to convert LOWERCASE_LETTER to a
> > straight bitset that maps char -> yes/no if it's in that set.  So
> we
> > could do test LA(1), the next char of lookahead, against it.  Also,
> > don't forget that ANTLR needs to do the grammar analysis so that it
> can
> > determine if you have a nondetermism.  For example, I presume the
> > following would be ambiguous/nondeterministic:
> >
> > DUH : LOWERCASE_LETTER | BASIC_LATIN | BENGALI ;
>
> Perhaps a restriction on combining pre-defined UnicodeBlocks and
> UnicodeCategories in this manner since they rarely make sense
> together?
>
> I see UnicodeBlock as being more useful in setting CharVocabulary
> option although that may just be because I'm relatively unfamilair
> with them. In fact I think that is what it is.....ignore me.
>
> > I believe I could predefine all these character categories and then
> > simply let you refer to them.  Note that for every set you
> reference
> > though would be a potentially very big uncompressed bitset.  Worst
> case,
> > if you have digit \uFFFE defined, you'd have about 65 kilobits in
> the
> > set or about 8k per bitset.  Every time I have to combine this set
> with
> > a character or another set, that's another 8k worst case.  I could
> > probably make a simple compression that ignored long runs of zeros
> on
> > the front of the bit set.
>
> Perhaps a separation of BitSet's implementation from it's interface
> so one could create a SparseRangeBitSet implementation that simply
> stores a list of the ranges of "YES" characters (or NO depending
> which is more compact) permitted as perhaps two int arrays and only
> generates a "traditional" BitSet if it is essential to do so.
>
> > Is this the kind of thing you would need?  I.e., to be able to
> > specifically refer to predefined Java character blocks as
> predefined
> > ANTLR "characters"?
>
> Yes, that would a very good start for better Unicode support in ANTLR.
>
> Cheers,
>
> Micheal
>
> PS     Would you be kind enough to look at my original post please?
>        I would like your opinion on choosing between (b) and (c) and,
> the questions I raised about both [ e.g. how to shut off the warnings
> on (b) ]
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu May 16 20:10:46 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR
In-Reply-To: <004501c1fd4e$2f4bd5a0$0200a8c0@matthewfnb>
Message-ID: <ac1sbm+8aom@eGroups.com>


> Perhaps I am missing the thrust of this exchange, but
> my requirement for Unicode in Antlr is to support an English 
command set and
> foreign language (initially Japanese)
> variable names.
> This talk of character blocks seems too restrictive.
> I need full Unicode support to cover the possible variable names.

ANTLR allows you to set the charVocabulary to include almost all 
Unicode character values (the exceptions being \uFFFF - used for EOF -
 and perhaps \u0000..\u0002).

The discussion is about making ANTLR smarter so that it understands 
standard character groupings so that ANTLR .g files may be more 
compact (and understandable). There might also be a performance 
benefit (or deficit).

This is very important IMO. I have included part of the definition 
required for a sample Unicode category if done manually in an ANTLR 
definition file. It is auto-generated by a tool I wrote and may 
contain errors ;-)

I believe it illustrates the value of these proposals quite nicely.

Micheal


==========================================================

Unicode Category or Class: Lu

| '\u0041'..'\u005A' 
| '\u00C0'..'\u00D6' 
| '\u00D8'..'\u00DE' 
| '\u0100' 
| '\u0102' 
| '\u0104' 
| '\u0106' 
| '\u0108' 
| '\u010A' 
| '\u010C' 
| '\u010E' 
| '\u0110' 
| '\u0112' 
| '\u0114' 
| '\u0116' 
| '\u0118' 
| '\u011A' 
| '\u011C' 
| '\u011E' 
| '\u0120' 
| '\u0122' 
| '\u0124' 
| '\u0126' 
| '\u0128' 
| '\u012A' 
| '\u012C' 
| '\u012E' 
| '\u0130' 
| '\u0132' 
| '\u0134' 
| '\u0136' 
| '\u0139' 
| '\u013B' 
| '\u013D' 
| '\u013F' 
| '\u0141' 
| '\u0143' 
| '\u0145' 
| '\u0147' 
| '\u014A' 
| '\u014C' 
| '\u014E' 
| '\u0150' 
| '\u0152' 
| '\u0154' 
| '\u0156' 
| '\u0158' 
| '\u015A' 
| '\u015C' 
| '\u015E' 
| '\u0160' 
| '\u0162' 
| '\u0164' 
| '\u0166' 
| '\u0168' 
| '\u016A' 
| '\u016C' 
| '\u016E' 
| '\u0170' 
| '\u0172' 
| '\u0174' 
| '\u0176' 
| '\u0178'..'\u0179' 
| '\u017B' 
| '\u017D' 
| '\u0181'..'\u0182' 
| '\u0184' 
| '\u0186'..'\u0187' 
| '\u0189'..'\u018B' 
| '\u018E'..'\u0191' 
| '\u0193'..'\u0194' 
| '\u0196'..'\u0198' 
| '\u019C'..'\u019D' 
| '\u019F'..'\u01A0' 
| '\u01A2' 
| '\u01A4' 
| '\u01A6'..'\u01A7' 
| '\u01A9' 
| '\u01AC' 
| '\u01AE'..'\u01AF' 
| '\u01B1'..'\u01B3' 
| '\u01B5' 
| '\u01B7'..'\u01B8' 
| '\u01BC' 
| '\u01C4' 
| '\u01C7' 
| '\u01CA' 
| '\u01CD' 
| '\u01CF' 
| '\u01D1' 
| '\u01D3' 
| '\u01D5' 
| '\u01D7' 
| '\u01D9' 
| '\u01DB' 
| '\u01DE' 
| '\u01E0' 
| '\u01E2' 
| '\u01E4' 
| '\u01E6' 
| '\u01E8' 
| '\u01EA' 
| '\u01EC' 
| '\u01EE' 
| '\u01F1' 
| '\u01F4' 
| '\u01F6'..'\u01F8' 
| '\u01FA' 
| '\u01FC' 
| '\u01FE' 
| '\u0200' 
| '\u0202' 
| '\u0204' 
| '\u0206' 
| '\u0208' 
| '\u020A' 
| '\u020C' 
| '\u020E' 
| '\u0210' 
| '\u0212' 
| '\u0214' 
| '\u0216' 
| '\u0218' 
| '\u021A' 
| '\u021C' 
| '\u021E' 
| '\u0220' 
| '\u0222' 
| '\u0224' 
| '\u0226' 
| '\u0228' 
| '\u022A' 
| '\u022C' 
| '\u022E' 
| '\u0230' 
| '\u0232' 
| '\u0386' 
| '\u0388'..'\u038A' 
| '\u038C' 
| '\u038E'..'\u038F' 
| '\u0391'..'\u03A1' 
| '\u03A3'..'\u03AB' 
| '\u03D2'..'\u03D4' 
| '\u03D8' 
| '\u03DA' 
| '\u03DC' 
| '\u03DE' 
| '\u03E0' 
| '\u03E2' 
| '\u03E4' 
| '\u03E6' 
| '\u03E8' 
| '\u03EA' 
| '\u03EC' 
| '\u03EE' 
| '\u03F4' 
| '\u0400'..'\u042F' 
| '\u0460' 
| '\u0462' 
| '\u0464' 
| '\u0466' 
| '\u0468' 
| '\u046A' 
| '\u046C' 
| '\u046E' 
| '\u0470' 
| '\u0472' 
| '\u0474' 
| '\u0476' 
| '\u0478' 
| '\u047A' 
| '\u047C' 
| '\u047E' 
| '\u0480' 
| '\u048A' 
| '\u048C' 
| '\u048E' 
| '\u0490' 
| '\u0492' 
| '\u0494' 
| '\u0496' 
| '\u0498' 
| '\u049A' 
| '\u049C' 
| '\u049E' 
| '\u04A0' 
| '\u04A2' 
| '\u04A4' 
| '\u04A6' 
| '\u04A8' 
| '\u04AA' 
| '\u04AC' 
| '\u04AE' 
| '\u04B0' 
| '\u04B2' 
| '\u04B4' 
| '\u04B6' 
| '\u04B8' 
| '\u04BA' 
| '\u04BC' 
| '\u04BE' 
| '\u04C0'..'\u04C1' 
| '\u04C3' 
| '\u04C5' 
| '\u04C7' 
| '\u04C9' 
| '\u04CB' 
| '\u04CD' 
| '\u04D0' 
| '\u04D2' 
| '\u04D4' 
| '\u04D6' 
| '\u04D8' 
| '\u04DA' 
| '\u04DC' 
| '\u04DE' 
| '\u04E0' 
| '\u04E2' 
| '\u04E4' 
| '\u04E6' 
| '\u04E8' 
| '\u04EA' 
| '\u04EC' 
| '\u04EE' 
| '\u04F0' 
| '\u04F2' 
| '\u04F4' 
| '\u04F8' 
| '\u0500' 
| '\u0502' 
| '\u0504' 
| '\u0506' 
| '\u0508' 
| '\u050A' 
| '\u050C' 
| '\u050E' 
| '\u0531'..'\u0556' 
| '\u10A0'..'\u10C5' 
| '\u1E00' 
| '\u1E02' 
| '\u1E04' 
| '\u1E06' 
| '\u1E08' 
| '\u1E0A' 
| '\u1E0C' 
| '\u1E0E' 
| '\u1E10' 
| '\u1E12' 
| '\u1E14' 
| '\u1E16' 
| '\u1E18' 
| '\u1E1A' 
| '\u1E1C' 
| '\u1E1E' 
| '\u1E20' 
| '\u1E22' 
| '\u1E24' 
| '\u1E26' 
| '\u1E28' 
| '\u1E2A' 
| '\u1E2C' 
| '\u1E2E' 
| '\u1E30' 
| '\u1E32' 
| '\u1E34' 
| '\u1E36' 
| '\u1E38' 
| '\u1E3A' 
| '\u1E3C' 
| '\u1E3E' 
| '\u1E40' 
| '\u1E42' 
| '\u1E44' 
| '\u1E46' 
| '\u1E48' 
| '\u1E4A' 
| '\u1E4C' 
| '\u1E4E' 
| '\u1E50' 
| '\u1E52' 
| '\u1E54' 
| '\u1E56' 
| '\u1E58' 
| '\u1E5A' 
| '\u1E5C' 
| '\u1E5E' 
| '\u1E60' 
| '\u1E62' 
| '\u1E64' 
| '\u1E66' 
| '\u1E68' 
| '\u1E6A' 
| '\u1E6C' 
| '\u1E6E' 
| '\u1E70' 
| '\u1E72' 
| '\u1E74' 
| '\u1E76' 
| '\u1E78' 
| '\u1E7A' 
| '\u1E7C' 
| '\u1E7E' 
| '\u1E80' 
| '\u1E82' 
| '\u1E84' 
| '\u1E86' 
| '\u1E88' 
| '\u1E8A' 
| '\u1E8C' 
| '\u1E8E' 
| '\u1E90' 
| '\u1E92' 
| '\u1E94' 
| '\u1EA0' 
| '\u1EA2' 
| '\u1EA4' 
| '\u1EA6' 
| '\u1EA8' 
| '\u1EAA' 
| '\u1EAC' 
| '\u1EAE' 
| '\u1EB0' 
| '\u1EB2' 
| '\u1EB4' 
| '\u1EB6' 
| '\u1EB8' 
| '\u1EBA' 
| '\u1EBC' 
| '\u1EBE' 
| '\u1EC0' 
| '\u1EC2' 
| '\u1EC4' 
| '\u1EC6' 
| '\u1EC8' 
| '\u1ECA' 
| '\u1ECC' 
| '\u1ECE' 
| '\u1ED0' 
| '\u1ED2' 
| '\u1ED4' 
| '\u1ED6' 
| '\u1ED8' 
| '\u1EDA' 
| '\u1EDC' 
| '\u1EDE' 
| '\u1EE0' 
| '\u1EE2' 
| '\u1EE4' 
| '\u1EE6' 
| '\u1EE8' 
| '\u1EEA' 
| '\u1EEC' 
| '\u1EEE' 
| '\u1EF0' 
| '\u1EF2' 
| '\u1EF4' 
| '\u1EF6' 
| '\u1EF8' 
| '\u1F08'..'\u1F0F' 
| '\u1F18'..'\u1F1D' 
| '\u1F28'..'\u1F2F' 
| '\u1F38'..'\u1F3F' 
| '\u1F48'..'\u1F4D' 
| '\u1F59' 
| '\u1F5B' 
| '\u1F5D' 
| '\u1F5F' 
| '\u1F68'..'\u1F6F' 
| '\u1FB8'..'\u1FBB' 
| '\u1FC8'..'\u1FCB' 
| '\u1FD8'..'\u1FDB' 
| '\u1FE8'..'\u1FEC' 
| '\u1FF8'..'\u1FFB' 
| '\u2102' 
| '\u2107' 
| '\u210B'..'\u210D' 
| '\u2110'..'\u2112' 
| '\u2115' 
| '\u2119'..'\u211D' 
| '\u2124' 
| '\u2126' 
| '\u2128' 
| '\u212A'..'\u212D' 
| '\u2130'..'\u2131' 
| '\u2133' 
| '\u213E'..'\u213F' 
| '\u2145' 
| '\uFF21'..'\uFF3A' 
| '\u010400'..'\u010425' 
| '\u01D400'..'\u01D419' 
| '\u01D434'..'\u01D44D' 
| '\u01D468'..'\u01D481' 
| '\u01D49C' 
| '\u01D49E'..'\u01D49F' 
| '\u01D4A2' 
| '\u01D4A5'..'\u01D4A6' 
| '\u01D4A9'..'\u01D4AC' 
| '\u01D4AE'..'\u01D4B5' 
| '\u01D4D0'..'\u01D4E9' 
| '\u01D504'..'\u01D505' 
| '\u01D507'..'\u01D50A' 
| '\u01D50D'..'\u01D514' 
| '\u01D516'..'\u01D51C' 
| '\u01D538'..'\u01D539' 
| '\u01D53B'..'\u01D53E' 
| '\u01D540'..'\u01D544' 
| '\u01D546' 
| '\u01D54A'..'\u01D550' 
| '\u01D56C'..'\u01D585' 
| '\u01D5A0'..'\u01D5B9' 
| '\u01D5D4'..'\u01D5ED' 
| '\u01D608'..'\u01D621' 
| '\u01D63C'..'\u01D655' 
| '\u01D670'..'\u01D689' 
| '\u01D6A8'..'\u01D6C0' 
| '\u01D6E2'..'\u01D6FA' 
| '\u01D71C'..'\u01D734' 
| '\u01D756'..'\u01D76E' 
| '\u01D790'..'\u01D7A8' 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Thu May 16 20:29:46 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR
References: <ac1sbm+8aom@eGroups.com>
Message-ID: <004c01c1fd53$17ade5f0$0200a8c0@matthewfnb>

This approach would not work for me as I need

IDENT
 options {testLiterals=true;
     paraphrase = "an identifier";}
 : ('a'..'z'|'_'|'$'|'\u0080'..'\uFFFE')
('a'..'z'|'_'|'0'..'9'|'$'|'\u0080'..'\uFFFE')*
 ;

So rather then sub-blocks, what I need is an efficient compression method to
store these bitsets in the Antlr.
matthew

----- Original Message -----
From: "micheal_jor" <open.zone@virgin.net>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, May 17, 2002 1:10 PM
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR


>
> > Perhaps I am missing the thrust of this exchange, but
> > my requirement for Unicode in Antlr is to support an English
> command set and
> > foreign language (initially Japanese)
> > variable names.
> > This talk of character blocks seems too restrictive.
> > I need full Unicode support to cover the possible variable names.
>
> ANTLR allows you to set the charVocabulary to include almost all
> Unicode character values (the exceptions being \uFFFF - used for EOF -
>  and perhaps \u0000..\u0002).
>
> The discussion is about making ANTLR smarter so that it understands
> standard character groupings so that ANTLR .g files may be more
> compact (and understandable). There might also be a performance
> benefit (or deficit).
>
> This is very important IMO. I have included part of the definition
> required for a sample Unicode category if done manually in an ANTLR
> definition file. It is auto-generated by a tool I wrote and may
> contain errors ;-)
>
> I believe it illustrates the value of these proposals quite nicely.
>
> Micheal
>
>
> ==========================================================
>
> Unicode Category or Class: Lu
>
> | '\u0041'..'\u005A'
> | '\u00C0'..'\u00D6'
> | '\u00D8'..'\u00DE'
> | '\u0100'
> | '\u0102'
> | '\u0104'
> | '\u0106'
> | '\u0108'
> | '\u010A'
> | '\u010C'
> | '\u010E'
> | '\u0110'
> | '\u0112'
> | '\u0114'
> | '\u0116'
> | '\u0118'
> | '\u011A'
> | '\u011C'
> | '\u011E'
> | '\u0120'
> | '\u0122'
> | '\u0124'
> | '\u0126'
> | '\u0128'
> | '\u012A'
> | '\u012C'
> | '\u012E'
> | '\u0130'
> | '\u0132'
> | '\u0134'
> | '\u0136'
> | '\u0139'
> | '\u013B'
> | '\u013D'
> | '\u013F'
> | '\u0141'
> | '\u0143'
> | '\u0145'
> | '\u0147'
> | '\u014A'
> | '\u014C'
> | '\u014E'
> | '\u0150'
> | '\u0152'
> | '\u0154'
> | '\u0156'
> | '\u0158'
> | '\u015A'
> | '\u015C'
> | '\u015E'
> | '\u0160'
> | '\u0162'
> | '\u0164'
> | '\u0166'
> | '\u0168'
> | '\u016A'
> | '\u016C'
> | '\u016E'
> | '\u0170'
> | '\u0172'
> | '\u0174'
> | '\u0176'
> | '\u0178'..'\u0179'
> | '\u017B'
> | '\u017D'
> | '\u0181'..'\u0182'
> | '\u0184'
> | '\u0186'..'\u0187'
> | '\u0189'..'\u018B'
> | '\u018E'..'\u0191'
> | '\u0193'..'\u0194'
> | '\u0196'..'\u0198'
> | '\u019C'..'\u019D'
> | '\u019F'..'\u01A0'
> | '\u01A2'
> | '\u01A4'
> | '\u01A6'..'\u01A7'
> | '\u01A9'
> | '\u01AC'
> | '\u01AE'..'\u01AF'
> | '\u01B1'..'\u01B3'
> | '\u01B5'
> | '\u01B7'..'\u01B8'
> | '\u01BC'
> | '\u01C4'
> | '\u01C7'
> | '\u01CA'
> | '\u01CD'
> | '\u01CF'
> | '\u01D1'
> | '\u01D3'
> | '\u01D5'
> | '\u01D7'
> | '\u01D9'
> | '\u01DB'
> | '\u01DE'
> | '\u01E0'
> | '\u01E2'
> | '\u01E4'
> | '\u01E6'
> | '\u01E8'
> | '\u01EA'
> | '\u01EC'
> | '\u01EE'
> | '\u01F1'
> | '\u01F4'
> | '\u01F6'..'\u01F8'
> | '\u01FA'
> | '\u01FC'
> | '\u01FE'
> | '\u0200'
> | '\u0202'
> | '\u0204'
> | '\u0206'
> | '\u0208'
> | '\u020A'
> | '\u020C'
> | '\u020E'
> | '\u0210'
> | '\u0212'
> | '\u0214'
> | '\u0216'
> | '\u0218'
> | '\u021A'
> | '\u021C'
> | '\u021E'
> | '\u0220'
> | '\u0222'
> | '\u0224'
> | '\u0226'
> | '\u0228'
> | '\u022A'
> | '\u022C'
> | '\u022E'
> | '\u0230'
> | '\u0232'
> | '\u0386'
> | '\u0388'..'\u038A'
> | '\u038C'
> | '\u038E'..'\u038F'
> | '\u0391'..'\u03A1'
> | '\u03A3'..'\u03AB'
> | '\u03D2'..'\u03D4'
> | '\u03D8'
> | '\u03DA'
> | '\u03DC'
> | '\u03DE'
> | '\u03E0'
> | '\u03E2'
> | '\u03E4'
> | '\u03E6'
> | '\u03E8'
> | '\u03EA'
> | '\u03EC'
> | '\u03EE'
> | '\u03F4'
> | '\u0400'..'\u042F'
> | '\u0460'
> | '\u0462'
> | '\u0464'
> | '\u0466'
> | '\u0468'
> | '\u046A'
> | '\u046C'
> | '\u046E'
> | '\u0470'
> | '\u0472'
> | '\u0474'
> | '\u0476'
> | '\u0478'
> | '\u047A'
> | '\u047C'
> | '\u047E'
> | '\u0480'
> | '\u048A'
> | '\u048C'
> | '\u048E'
> | '\u0490'
> | '\u0492'
> | '\u0494'
> | '\u0496'
> | '\u0498'
> | '\u049A'
> | '\u049C'
> | '\u049E'
> | '\u04A0'
> | '\u04A2'
> | '\u04A4'
> | '\u04A6'
> | '\u04A8'
> | '\u04AA'
> | '\u04AC'
> | '\u04AE'
> | '\u04B0'
> | '\u04B2'
> | '\u04B4'
> | '\u04B6'
> | '\u04B8'
> | '\u04BA'
> | '\u04BC'
> | '\u04BE'
> | '\u04C0'..'\u04C1'
> | '\u04C3'
> | '\u04C5'
> | '\u04C7'
> | '\u04C9'
> | '\u04CB'
> | '\u04CD'
> | '\u04D0'
> | '\u04D2'
> | '\u04D4'
> | '\u04D6'
> | '\u04D8'
> | '\u04DA'
> | '\u04DC'
> | '\u04DE'
> | '\u04E0'
> | '\u04E2'
> | '\u04E4'
> | '\u04E6'
> | '\u04E8'
> | '\u04EA'
> | '\u04EC'
> | '\u04EE'
> | '\u04F0'
> | '\u04F2'
> | '\u04F4'
> | '\u04F8'
> | '\u0500'
> | '\u0502'
> | '\u0504'
> | '\u0506'
> | '\u0508'
> | '\u050A'
> | '\u050C'
> | '\u050E'
> | '\u0531'..'\u0556'
> | '\u10A0'..'\u10C5'
> | '\u1E00'
> | '\u1E02'
> | '\u1E04'
> | '\u1E06'
> | '\u1E08'
> | '\u1E0A'
> | '\u1E0C'
> | '\u1E0E'
> | '\u1E10'
> | '\u1E12'
> | '\u1E14'
> | '\u1E16'
> | '\u1E18'
> | '\u1E1A'
> | '\u1E1C'
> | '\u1E1E'
> | '\u1E20'
> | '\u1E22'
> | '\u1E24'
> | '\u1E26'
> | '\u1E28'
> | '\u1E2A'
> | '\u1E2C'
> | '\u1E2E'
> | '\u1E30'
> | '\u1E32'
> | '\u1E34'
> | '\u1E36'
> | '\u1E38'
> | '\u1E3A'
> | '\u1E3C'
> | '\u1E3E'
> | '\u1E40'
> | '\u1E42'
> | '\u1E44'
> | '\u1E46'
> | '\u1E48'
> | '\u1E4A'
> | '\u1E4C'
> | '\u1E4E'
> | '\u1E50'
> | '\u1E52'
> | '\u1E54'
> | '\u1E56'
> | '\u1E58'
> | '\u1E5A'
> | '\u1E5C'
> | '\u1E5E'
> | '\u1E60'
> | '\u1E62'
> | '\u1E64'
> | '\u1E66'
> | '\u1E68'
> | '\u1E6A'
> | '\u1E6C'
> | '\u1E6E'
> | '\u1E70'
> | '\u1E72'
> | '\u1E74'
> | '\u1E76'
> | '\u1E78'
> | '\u1E7A'
> | '\u1E7C'
> | '\u1E7E'
> | '\u1E80'
> | '\u1E82'
> | '\u1E84'
> | '\u1E86'
> | '\u1E88'
> | '\u1E8A'
> | '\u1E8C'
> | '\u1E8E'
> | '\u1E90'
> | '\u1E92'
> | '\u1E94'
> | '\u1EA0'
> | '\u1EA2'
> | '\u1EA4'
> | '\u1EA6'
> | '\u1EA8'
> | '\u1EAA'
> | '\u1EAC'
> | '\u1EAE'
> | '\u1EB0'
> | '\u1EB2'
> | '\u1EB4'
> | '\u1EB6'
> | '\u1EB8'
> | '\u1EBA'
> | '\u1EBC'
> | '\u1EBE'
> | '\u1EC0'
> | '\u1EC2'
> | '\u1EC4'
> | '\u1EC6'
> | '\u1EC8'
> | '\u1ECA'
> | '\u1ECC'
> | '\u1ECE'
> | '\u1ED0'
> | '\u1ED2'
> | '\u1ED4'
> | '\u1ED6'
> | '\u1ED8'
> | '\u1EDA'
> | '\u1EDC'
> | '\u1EDE'
> | '\u1EE0'
> | '\u1EE2'
> | '\u1EE4'
> | '\u1EE6'
> | '\u1EE8'
> | '\u1EEA'
> | '\u1EEC'
> | '\u1EEE'
> | '\u1EF0'
> | '\u1EF2'
> | '\u1EF4'
> | '\u1EF6'
> | '\u1EF8'
> | '\u1F08'..'\u1F0F'
> | '\u1F18'..'\u1F1D'
> | '\u1F28'..'\u1F2F'
> | '\u1F38'..'\u1F3F'
> | '\u1F48'..'\u1F4D'
> | '\u1F59'
> | '\u1F5B'
> | '\u1F5D'
> | '\u1F5F'
> | '\u1F68'..'\u1F6F'
> | '\u1FB8'..'\u1FBB'
> | '\u1FC8'..'\u1FCB'
> | '\u1FD8'..'\u1FDB'
> | '\u1FE8'..'\u1FEC'
> | '\u1FF8'..'\u1FFB'
> | '\u2102'
> | '\u2107'
> | '\u210B'..'\u210D'
> | '\u2110'..'\u2112'
> | '\u2115'
> | '\u2119'..'\u211D'
> | '\u2124'
> | '\u2126'
> | '\u2128'
> | '\u212A'..'\u212D'
> | '\u2130'..'\u2131'
> | '\u2133'
> | '\u213E'..'\u213F'
> | '\u2145'
> | '\uFF21'..'\uFF3A'
> | '\u010400'..'\u010425'
> | '\u01D400'..'\u01D419'
> | '\u01D434'..'\u01D44D'
> | '\u01D468'..'\u01D481'
> | '\u01D49C'
> | '\u01D49E'..'\u01D49F'
> | '\u01D4A2'
> | '\u01D4A5'..'\u01D4A6'
> | '\u01D4A9'..'\u01D4AC'
> | '\u01D4AE'..'\u01D4B5'
> | '\u01D4D0'..'\u01D4E9'
> | '\u01D504'..'\u01D505'
> | '\u01D507'..'\u01D50A'
> | '\u01D50D'..'\u01D514'
> | '\u01D516'..'\u01D51C'
> | '\u01D538'..'\u01D539'
> | '\u01D53B'..'\u01D53E'
> | '\u01D540'..'\u01D544'
> | '\u01D546'
> | '\u01D54A'..'\u01D550'
> | '\u01D56C'..'\u01D585'
> | '\u01D5A0'..'\u01D5B9'
> | '\u01D5D4'..'\u01D5ED'
> | '\u01D608'..'\u01D621'
> | '\u01D63C'..'\u01D655'
> | '\u01D670'..'\u01D689'
> | '\u01D6A8'..'\u01D6C0'
> | '\u01D6E2'..'\u01D6FA'
> | '\u01D71C'..'\u01D734'
> | '\u01D756'..'\u01D76E'
> | '\u01D790'..'\u01D7A8'
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu May 16 22:59:19 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR
In-Reply-To: <004c01c1fd53$17ade5f0$0200a8c0@matthewfnb>
Message-ID: <ac267n+m84e@eGroups.com>

--- In antlr-interest@y..., "Matthew Ford" <Matthew.Ford@f...> wrote:
> This approach would not work for me as I need
> 
> IDENT
>  options {testLiterals=true;
>      paraphrase = "an identifier";}
>  : ('a'..'z'|'_'|'$'|'\u0080'..'\uFFFE')
> ('a'..'z'|'_'|'0'..'9'|'$'|'\u0080'..'\uFFFE')*
>  ;
> 
> So rather then sub-blocks, what I need is an efficient compression 
method to
> store these bitsets in the Antlr.

The \00800..\uFFFE range might be overkill as many characters in that 
range would not [normally] be usable as parts of an IDENT.

You are right that more efficient BitSet representation are needed 
for ANTLR's Unicode support in general.

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu May 16 23:13:54 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR
In-Reply-To: <004c01c1fd53$17ade5f0$0200a8c0@matthewfnb>
Message-ID: <43E1B2B6-695D-11D6-AB08-0030653DE0D6@jguru.com>


On Thursday, May 16, 2002, at 08:29  PM, Matthew Ford wrote:

> This approach would not work for me as I need
>
> IDENT
>  options {testLiterals=true;
>      paraphrase = "an identifier";}
>  : ('a'..'z'|'_'|'$'|'\u0080'..'\uFFFE')
> ('a'..'z'|'_'|'0'..'9'|'$'|'\u0080'..'\uFFFE')*
>  ;
>
> So rather then sub-blocks, what I need is an efficient compression 
> method to
> store these bitsets in the Antlr.

Hi Matthew,

What does your IDENT example result in?  I.e., what does ANTLR 
generate?  Something huge?  it should actually do range analysis on 
straight ranges, but will do a bit set for all else.

Note that \u0080..\uFFFE ain't sparse so a sparse bitset won't help...we 
need one that does ranges and sparseness :)  I guess that is what you're 
saying :)

Shouldn't be that hard to insert.  The question is: has the use of 
unicode made ANTLR go really slow during analysis (it shouldn't given 
that unicode ranges are limited to a few IDENT-like rules) or does it 
generate massive files (2.7.2aX that is as I've done lots of work in the 
bitsets)?

Also, the predefines are good for people that want to say "allow German 
character set" for the charVocabulary.

There is also a way to do standard character class compression like 
people use in lex and so on for NFA->DFA conversion.  I'm guessing 
though that large UNICODE *range* use is limited to charVocabulary and a 
few rules like IDENT.  Also, people writing languages that use 
punctuation from the Japanese character set, for example, might have 
UNICODE *chars* sprinkled all over the grammar...that is ok when they 
are treated as individual chars, thankfully; turn it into a set, 
however, and boom! 8k ;)

Thanks,
Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Thu May 16 23:07:47 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:48 2004
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR
References: <ac267n+m84e@eGroups.com>
Message-ID: <005301c1fd6b$72f85590$0200a8c0@matthewfnb>

I decided I would have trouble enumerating the characters that would never
appear in Ids
( given japanese is included there are probably less the 32000 to excluded
which still leave bitset problem).

So I put them all in.
matthew
----- Original Message -----
From: "micheal_jor" <open.zone@virgin.net>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, May 17, 2002 3:59 PM
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR


> --- In antlr-interest@y..., "Matthew Ford" <Matthew.Ford@f...> wrote:
> > This approach would not work for me as I need
> >
> > IDENT
> >  options {testLiterals=true;
> >      paraphrase = "an identifier";}
> >  : ('a'..'z'|'_'|'$'|'\u0080'..'\uFFFE')
> > ('a'..'z'|'_'|'0'..'9'|'$'|'\u0080'..'\uFFFE')*
> >  ;
> >
> > So rather then sub-blocks, what I need is an efficient compression
> method to
> > store these bitsets in the Antlr.
>
> The \00800..\uFFFE range might be overkill as many characters in that
> range would not [normally] be usable as parts of an IDENT.
>
> You are right that more efficient BitSet representation are needed
> for ANTLR's Unicode support in general.
>
> Micheal
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Fri May 17 00:14:41 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR
References: <43E1B2B6-695D-11D6-AB08-0030653DE0D6@jguru.com>
Message-ID: <005c01c1fd72$838b2d40$0200a8c0@matthewfnb>

Hi Ter,

Here is the code that is generated for Ident.
No big bitsets.  (You fixed that.)


 public final void mIDENT(boolean _createToken) throws RecognitionException,
CharStreamException, TokenStreamException {
  int _ttype; Token _token=null; int _begin=text.length();
  _ttype = IDENT;
  int _saveIndex;

  {
  switch ( LA(1)) {
  case 'a':  case 'b':  case 'c':  case 'd':
  case 'e':  case 'f':  case 'g':  case 'h':
  case 'i':  case 'j':  case 'k':  case 'l':
  case 'm':  case 'n':  case 'o':  case 'p':
  case 'q':  case 'r':  case 's':  case 't':
  case 'u':  case 'v':  case 'w':  case 'x':
  case 'y':  case 'z':
  {
   matchRange('a','z');
   break;
  }
  case '_':
  {
   match('_');
   break;
  }
  case '$':
  {
   match('$');
   break;
  }
  default:
   if (((LA(1) >= '\u0080' && LA(1) <= '\ufffe'))) {
    matchRange('\u0080','\uFFFE');
   }
  else {
   throw new NoViableAltForCharException((char)LA(1), getFilename(),
getLine());
  }
  }
  }
  {
  _loop8:
  do {
   switch ( LA(1)) {
   case 'a':  case 'b':  case 'c':  case 'd':
   case 'e':  case 'f':  case 'g':  case 'h':
   case 'i':  case 'j':  case 'k':  case 'l':
   case 'm':  case 'n':  case 'o':  case 'p':
   case 'q':  case 'r':  case 's':  case 't':
   case 'u':  case 'v':  case 'w':  case 'x':
   case 'y':  case 'z':
   {
    matchRange('a','z');
    break;
   }
   case '_':
   {
    match('_');
    break;
   }
   case '0':  case '1':  case '2':  case '3':
   case '4':  case '5':  case '6':  case '7':
   case '8':  case '9':
   {
    matchRange('0','9');
    break;
   }
   case '$':
   {
    match('$');
    break;
   }
   default:
    if (((LA(1) >= '\u0080' && LA(1) <= '\ufffe'))) {
     matchRange('\u0080','\uFFFE');
    }
   else {
    break _loop8;
   }
   }
  } while (true);
  }
  _ttype = testLiteralsTable(_ttype);
  if ( _createToken && _token==null && _ttype!=Token.SKIP ) {
   _token = makeToken(_ttype);
   _token.setText(new String(text.getBuffer(), _begin,
text.length()-_begin));
  }
  _returnToken = _token;
 }


----- Original Message -----
From: "Terence Parr" <parrt@jguru.com>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, May 17, 2002 4:13 PM
Subject: Re: [antlr-interest] Re: Problems with Unicode support in ANTLR


>
> On Thursday, May 16, 2002, at 08:29  PM, Matthew Ford wrote:
>
> > This approach would not work for me as I need
> >
> > IDENT
> >  options {testLiterals=true;
> >      paraphrase = "an identifier";}
> >  : ('a'..'z'|'_'|'$'|'\u0080'..'\uFFFE')
> > ('a'..'z'|'_'|'0'..'9'|'$'|'\u0080'..'\uFFFE')*
> >  ;
> >
> > So rather then sub-blocks, what I need is an efficient compression
> > method to
> > store these bitsets in the Antlr.
>
> Hi Matthew,
>
> What does your IDENT example result in?  I.e., what does ANTLR
> generate?  Something huge?  it should actually do range analysis on
> straight ranges, but will do a bit set for all else.
>
> Note that \u0080..\uFFFE ain't sparse so a sparse bitset won't help...we
> need one that does ranges and sparseness :)  I guess that is what you're
> saying :)
>
> Shouldn't be that hard to insert.  The question is: has the use of
> unicode made ANTLR go really slow during analysis (it shouldn't given
> that unicode ranges are limited to a few IDENT-like rules) or does it
> generate massive files (2.7.2aX that is as I've done lots of work in the
> bitsets)?
>
> Also, the predefines are good for people that want to say "allow German
> character set" for the charVocabulary.
>
> There is also a way to do standard character class compression like
> people use in lex and so on for NFA->DFA conversion.  I'm guessing
> though that large UNICODE *range* use is limited to charVocabulary and a
> few rules like IDENT.  Also, people writing languages that use
> punctuation from the Japanese character set, for example, might have
> UNICODE *chars* sprinkled all over the grammar...that is ok when they
> are treated as individual chars, thankfully; turn it into a set,
> however, and boom! 8k ;)
>
> Thanks,
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Fri May 17 00:21:48 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Re: Problems with Unicode support in ANTLR
References: <43E1B2B6-695D-11D6-AB08-0030653DE0D6@jguru.com>
Message-ID: <005f01c1fd73$8236a450$0200a8c0@matthewfnb>

That code Unicode was generated with Antlr 2.7.1  haven't tried anything
later since this seems to work.
matthew
----- Original Message -----
From: "Terence Parr" <parrt@jguru.com>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, May 17, 2002 4:13 PM
Subject: Re: [antlr-interest] Re: Problems with Unicode support in ANTLR


>
> On Thursday, May 16, 2002, at 08:29  PM, Matthew Ford wrote:
>
> > This approach would not work for me as I need
> >
> > IDENT
> >  options {testLiterals=true;
> >      paraphrase = "an identifier";}
> >  : ('a'..'z'|'_'|'$'|'\u0080'..'\uFFFE')
> > ('a'..'z'|'_'|'0'..'9'|'$'|'\u0080'..'\uFFFE')*
> >  ;
> >
> > So rather then sub-blocks, what I need is an efficient compression
> > method to
> > store these bitsets in the Antlr.
>
> Hi Matthew,
>
> What does your IDENT example result in?  I.e., what does ANTLR
> generate?  Something huge?  it should actually do range analysis on
> straight ranges, but will do a bit set for all else.
>
> Note that \u0080..\uFFFE ain't sparse so a sparse bitset won't help...we
> need one that does ranges and sparseness :)  I guess that is what you're
> saying :)
>
> Shouldn't be that hard to insert.  The question is: has the use of
> unicode made ANTLR go really slow during analysis (it shouldn't given
> that unicode ranges are limited to a few IDENT-like rules) or does it
> generate massive files (2.7.2aX that is as I've done lots of work in the
> bitsets)?
>
> Also, the predefines are good for people that want to say "allow German
> character set" for the charVocabulary.
>
> There is also a way to do standard character class compression like
> people use in lex and so on for NFA->DFA conversion.  I'm guessing
> though that large UNICODE *range* use is limited to charVocabulary and a
> few rules like IDENT.  Also, people writing languages that use
> punctuation from the Japanese character set, for example, might have
> UNICODE *chars* sprinkled all over the grammar...that is ok when they
> are treated as individual chars, thankfully; turn it into a set,
> however, and boom! 8k ;)
>
> Thanks,
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From scott at fmsinc.com  Fri May 17 20:04:06 2002
From: scott at fmsinc.com (Scott)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] C#
Message-ID: <D02359EA481CD311BBBA00104B9834E9D329A1@fms_mail.int.fmsinc.com>

Hello,
 
I apologize for dropping out of sight. After some discussions with
Management, I've been given the OK to release the C# code generator and
library. I had thought it was already cleared, but it appears I jumped the
gun. Unfortunately they don't want to release the VB.NET generator. I'm
still working on that :(. 
 
I realize the Micheal has already posted his C# library, but I'll add mine
for review/consumption. If Micheal wants to coordinate our efforts, I'd be
happy to do that. I would prefer to standardize on one port. I haven't
attempted to port this to ANTLR 2.7.2x, but based on my initial review the
changes should be minimal.
 
I've posted the port to my home box, which can be accessed at:
 
http://208.36.109.38/antlr-2.7.1-cs.zip
<http://208.36.109.38/antlr-2.7.1-cs.zip> 
 
There is a short readme.txt in the root directory, which may help you use
it. If not, I'll be monitoring this list.
 
The only grammar I've ported is calc.g. It should be enough to help you get
up to speed.
 
Sorry for the delay, 
 
Scott Ellis
FMS, Inc.
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020517/54499bd2/attachment.html
From open.zone at virgin.net  Sat May 18 10:07:51 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] URGENT: Problems with Unicode support in ANTLR
In-Reply-To: <ac0jbl+j7ut@eGroups.com>
Message-ID: <ac61p7+nabn@eGroups.com>

Hi,

Would ANLTR gurus please respond to my queries regarding the best 
option to take with respect to this message:

http://groups.yahoo.com/group/antlr-interest/message/5537

It is urgent and I would appreciate any help in making the best 
choice until we can improve ANTLR's native unicode support.

Cheers,

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Sat May 18 16:55:51 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] URGENT: Problems with Unicode support in ANTLR
References: <ac61p7+nabn@eGroups.com>
Message-ID: <000d01c1fec7$8a472570$0200a8c0@matthewfnb>

Ter,  I think the  codeGenBitsetTestThreshold=5;
is broken.

I have attached my test .g file and the lexer output.  no tokenSets were
generated.  All case statements.
matthew

the Ident rule was
IDENT_N1
 options {testLiterals=true;
     paraphrase = "N1 identifier";}
 :
('\u16EE'..'\u16F0'|'_'|'$'|'\u2160'..'\u2183'|'\u3007'..'\u3007'|'\u3021'..
'\u3029'|'\u3038'..'\u303A')

('\u16EE'..'\u16F0'|'_'|'0'..'9'|'$'|'\u2160'..'\u2183'|'\u3007'..'\u3007'|'
\u3021'..'\u3029'|'\u3038'..'\u303A')*
 ;

----- Original Message -----
From: "micheal_jor" <open.zone@virgin.net>
To: <antlr-interest@yahoogroups.com>
Sent: Sunday, May 19, 2002 3:07 AM
Subject: [antlr-interest] URGENT: Problems with Unicode support in ANTLR


> Hi,
>
> Would ANLTR gurus please respond to my queries regarding the best
> option to take with respect to this message:
>
> http://groups.yahoo.com/group/antlr-interest/message/5537
>
> It is urgent and I would appreciate any help in making the best
> choice until we can improve ANTLR's native unicode support.
>
> Cheers,
>
> Micheal
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Unicode.g
Type: application/octet-stream
Size: 2439 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20020519/4f95a48e/Unicode.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: UnicodeLexer.java
Type: application/octet-stream
Size: 8647 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20020519/4f95a48e/UnicodeLexer.obj
From open.zone at virgin.net  Sat May 18 17:07:20 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Re: While using preliminary C# code generator.
In-Reply-To: <aal4s2+j1pb@eGroups.com>
Message-ID: <ac6qbo+sqsl@eGroups.com>

> PS:
> I made changes for namespace too. But it is not to my liking. I can 
> share it if you are interested.
> 

Please share it. I think it's time for a bug-fix/minor update to the 
C# codegen files on the ANTLR site.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sat May 18 17:26:04 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Re: While using preliminary C# code generator.
In-Reply-To: <ac6qbo+sqsl@eGroups.com>
Message-ID: <0156D9B4-6ABF-11D6-9C9C-0030653DE0D6@jguru.com>


On Saturday, May 18, 2002, at 05:07  PM, micheal_jor wrote:

>> PS:
>> I made changes for namespace too. But it is not to my liking. I can
>> share it if you are interested.
>>
>
> Please share it. I think it's time for a bug-fix/minor update to the
> C# codegen files on the ANTLR site.

Sure guys...just create the update and I'll repost. :)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From antlr-interest at yahoogroups.com  Sun May 19 13:37:37 2002
From: antlr-interest at yahoogroups.com (antlr-interest@yahoogroups.com)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] New file uploaded to antlr-interest
Message-ID: <1021840657.120.13610.w51@yahoogroups.com>


Hello,

This email message is a notification to let you know that
a file has been uploaded to the Files area of the antlr-interest 
group.

  File        : / Click Here! 
  Uploaded by : henryjones18 <henryjones18@yahoo.co.uk> 
  Description : Look at all these different credit cards you can get! Good, bad, or no credit. 

You can access this file at the URL

http://groups.yahoo.com/group/antlr-interest/files/%20Click%20Here%21 

To learn more about file sharing for your group, please visit

http://help.yahoo.com/help/us/groups/files

Regards,

henryjones18 <henryjones18@yahoo.co.uk>
 





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sachin_sawant10 at yahoo.com  Mon May 20 05:52:38 2002
From: sachin_sawant10 at yahoo.com (sachin_sawant10)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Heterogeneous Token Object  example
Message-ID: <acarim+9q1f@eGroups.com>

Hi,

Could somebody give me a detail example on "how to create 
heterogeneous token object? I checked the explanation in the ANTLR 
manual but I find it difficult to understand.

Regards

Sachin



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Mon May 20 12:31:00 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Lexer vs Parser
Message-ID: <acbitk+cspk@eGroups.com>

Hi All,

Following on from my Unicode post, I would appreciate some advice on 
where to place some lexing/parsing decisions.

For instance with my definitions for Unicode categories, the 
characters to be recognized include the individual characters in the 
category as well as Unicode escape sequences that resolve to a 
characters in the category.

This what I did in the lexer:

protected UNICODE_CLASS_Nl
  : ( { IsUnicodeClass_Nl(LA(1)) }? . 
    | { IsUnicodeClass_Nl(esc_char.getText()) }? 
esc_char:UNICODE_ESCAPE_SEQUENCE 
    )
  ;

My question is should I be checking that the escape sequence resolves 
to a character in the category in the Lexer or should that be 
postponed to the Parser's battery of semantic analysis.

In general, what is a good rule of thumb for deciding what goes into 
a Lexer or a Parser. With Flex/Bison it is much easier since the 
lexer/parser have very different capabilities.

What do you fine people suggest?


Cheers,

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Mon May 20 16:15:29 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Lexer vs Parser
References: <acbitk+cspk@eGroups.com>
Message-ID: <000901c20054$3ca62710$6564020a@beaconit.com.au>

My general rule is make the final decision as early as possible.
This simplifies the later processes and enhances error detection.
matthew
----- Original Message -----
From: "micheal_jor" <open.zone@virgin.net>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, May 21, 2002 5:31 AM
Subject: [antlr-interest] Lexer vs Parser


> Hi All,
>
> Following on from my Unicode post, I would appreciate some advice on
> where to place some lexing/parsing decisions.
>
> For instance with my definitions for Unicode categories, the
> characters to be recognized include the individual characters in the
> category as well as Unicode escape sequences that resolve to a
> characters in the category.
>
> This what I did in the lexer:
>
> protected UNICODE_CLASS_Nl
>   : ( { IsUnicodeClass_Nl(LA(1)) }? .
>     | { IsUnicodeClass_Nl(esc_char.getText()) }?
> esc_char:UNICODE_ESCAPE_SEQUENCE
>     )
>   ;
>
> My question is should I be checking that the escape sequence resolves
> to a character in the category in the Lexer or should that be
> postponed to the Parser's battery of semantic analysis.
>
> In general, what is a good rule of thumb for deciding what goes into
> a Lexer or a Parser. With Flex/Bison it is much easier since the
> lexer/parser have very different capabilities.
>
> What do you fine people suggest?
>
>
> Cheers,
>
> Micheal
>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Mon May 20 18:37:55 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Re: Lexer vs Parser
In-Reply-To: <acbitk+cspk@eGroups.com>
Message-ID: <acc8dk+4hm2@eGroups.com>

--- In antlr-interest@y..., "micheal_jor" <open.zone@v...> wrote:
> Hi All,
> 
> Following on from my Unicode post, I would appreciate some advice on 
> where to place some lexing/parsing decisions.
> 
> For instance with my definitions for Unicode categories, the 
> characters to be recognized include the individual characters in the 
> category as well as Unicode escape sequences that resolve to a 
> characters in the category.
> 
> This what I did in the lexer:
> 
> protected UNICODE_CLASS_Nl
>   : ( { IsUnicodeClass_Nl(LA(1)) }? . 
>     | { IsUnicodeClass_Nl(esc_char.getText()) }? 
> esc_char:UNICODE_ESCAPE_SEQUENCE 
>     )
>   ;
> 
> My question is should I be checking that the escape sequence 
resolves 
> to a character in the category in the Lexer or should that be 
> postponed to the Parser's battery of semantic analysis.

Unless there is reason for the parser to see the escape sequence as a 
distinct token, do it in the lexer.  This problem usually does not 
arise because the normal development process is the more top-down 
approach of designing the parse grammar first, and the lexing grammar 
as a consequence--what tokens do I need to recognize, and what can be 
filtered out before it gets to the parsing phase.  I gather that you 
are faced with a complex lexing problem which makes it difficult to do 
this.

The grammar which is most subject to change is the parse grammar:  you 
want to keep that as simple as possible.  At the same time, the lexer 
is the fastest (potentially) processing phase--your language processor 
will be faster if the lexer does more work and the parser and tree 
walkers less.  Lexers tend to be "write once, then tweak"--it is 
usually easy to borrow an existing lexical grammar for a new language 
processor--while borrowed parse grammars often need extensive 
rewriting, even if the language being processed by the derived parser 
is the same as the one recognized by the original.  Actions need to be 
inserted, trees need to be built, and so forth.  When in doubt, try to 
keep the parse grammar as clean as possible.  Cleanliness in the 
lexing grammar often does not matter--it gets edited rarely.  If you 
build more than one tool to process one input language, then the 
parser and tree walkers are subject to change while the lexer probably 
is not.  Focus on minimizing the complexity of the parser and tree 
walker grammars--it will pay off!

> In general, what is a good rule of thumb for deciding what goes into 
> a Lexer or a Parser. With Flex/Bison it is much easier since the 
> lexer/parser have very different capabilities.

You've been led astray by Ter's unified EBNF approach.  ANTLR parsers 
have enough more capability than LALR parsers that you can avoid 
passing information from parser to lexer, something which corrupts 
complex lex/yacc (flex/bison) grammars into a difficult-to-maintain 
mess.  ANTLR lexers can do (in theory) tokenization in situations 
where flex cannot (Ter has a FORTRAN example documented somewhere), 
but the function of the lexer is the same:  to convert a character 
stream into a token stream for processing by the parser.  The parser 
recognizes syntax, and ANTLR provides some capabilities for 
semantics-directed parsing decisions (semantic predicates).  Predicate 
hoisting (not supported by ANTLR 2) adds additional capabilities to 
the parser.  The boundaries between lexer and parser should be sharper 
for ANTLR than for flex/bison!

> What do you fine people suggest?
> 
> 
> Cheers,
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From andreasklimke at yahoo.com  Tue May 21 01:32:37 2002
From: andreasklimke at yahoo.com (andreasklimke)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Re: Lexer problem: Double meaning of single quote character
Message-ID: <acd0n5+st5n@eGroups.com>

Hi Monty,

thanks to your advice, I solved the double meaning of the quote
character problem. With k=2, I had to make a minor change to make it
work, since the generated lexer code newer reached the second part of
the mSTRING_LITERAL function due to the initial test (if LA(1)==...".

This was your initial suggestion:

STRING_LITERAL
    : ('\'')=>{transposePrefixMatched()}? '\'' {$setType(TRANSPOSE);}  
      | '\'' (~'\'')* '\''


With k=2, the generated code then looked like this:

public final void mSTRING_LITERAL(boolean _createToken) throws 
...
if ((LA(1)=='\'')) {
  match('\'');
  {
   _loop71:
   do {
      ...
    } while (true);
  }
  match('\'');
}
else {
   boolean synPredMatched73 = false;
   if ((true&&(transposePrefixMatched()))) {
     int _m73 = mark();
     synPredMatched73 = true;
     inputState.guessing++;
...


I don't know if this behavior is intentional or a bug. Anyway, I
changed the grammar to look like this, and it seems to work fine now.

STRING_LITERAL
    : {!transposePrefixMatched()}? ('\'') (~'\'')* '\''
    | ('\'') {$setType(CTRANSPOSE); }
    ;

I am including the complete solution to the problem below, which is
very close to your initial suggestion.

Thank you very much again for your excellent advice & help,
Andreas



class QuoteAmbiguityLexer extends Lexer;

options {
    testLiterals=false;
    k=2;
}

{
    int lastMatched = 0;
    
    protected Token makeToken(int t) {
        if ( t != Token.SKIP) {
          lastMatched=t;
        }
        Token tok = (Token) super.makeToken(t);
        return tok;
    }

    protected boolean transposePrefixMatched() 
    {
        System.out.println("Testing...");
        return lastMatched==RPAREN;
    }
}

RPAREN		:   ')'	    ;

STRING_LITERAL
    : {!transposePrefixMatched()}? ('\'') (~'\'')* '\''
    | ('\'') {$setType(TRANSPOSE); }
    ;




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From nvseenu at yahoo.com  Tue May 21 21:18:20 2002
From: nvseenu at yahoo.com (Sreenu N.V.)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] About Flow Graph for JAVA programs
In-Reply-To: <1022010194.328.95551.m12@yahoogroups.com>
Message-ID: <20020522041820.9420.qmail@web20502.mail.yahoo.com>

Hello Group,
    I need your help desparately. I have to do "Test
Coverage Analyzer for JAVA". To do that job first of
all I need to construct "Flow Graph" of the source
program, so that it is helpful for analysis and in
later phases. 
   Please give me information how to construct flow
graph for the source code of programs written in JAVA.

   My advance thanks to all of you.
   Please help me in this regard.
reagards,
nvseenu,
india.




__________________________________________________
Do You Yahoo!?
LAUNCH - Your Yahoo! Music Experience
http://launch.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From geert-jan.laat-de at dsm.com  Tue May 21 23:37:12 2002
From: geert-jan.laat-de at dsm.com (Laat-de, Geert-Jan)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] CSymbolTable classes for C++
Message-ID: <51DF4D0F94E1D511AE9A00508BDF80A2C71BEB@nlurm00ntms001.urm03.dsm-group.com>

Hi,

I'm playing around with antlr, using the C++ output facility. In a number of
examples on the web a CSymbolTable class is used in java examples. Do you
know of the availability of this class in C++ ?

Best regards,

Geert-Jan de Laat

Disclaimer
1. This e-mail is for the intended recipient only. If you have received it
by mistake please let us know by reply and then delete it from your system;
access, disclosure, copying, distribution or reliance on any of it by anyone
else is prohibited.

2. If you as intended recipient have received this e-mail incorrectly,
please notify the sender (via e-mail) immediately. This e-mail is
confidential and may be legally privileged. DSM does not guarantee that the
information sent and/or received by or with this e-mail is correct and does
not accept any liability for damages related thereto.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed May 22 08:22:05 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Lexer vs Parser
References: <acbitk+cspk@eGroups.com>
Message-ID: <3CEBB79D.C4B02AC9@boeing.com>

micheal_jor wrote:
> 
> Hi All,
> 
> Following on from my Unicode post, I would appreciate some advice on
> where to place some lexing/parsing decisions.

 I look at the context dependence/well defined token boundaries.

 Mostly do everything you can in the lexer. I did write a Fortran 77
parser
that does mostly everything in the parser. Since fortran-like languages
don't 
have well defined keywords/delimiters.


 

 call xyz(5)= format(write(6,7))

 do 100 i=1.7

 format(x5h)=x(3)

 good luck...

 if then then=else  else if else=then then then=else


 Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Wed May 22 16:28:21 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] vocabulary (token) import and export
Message-ID: <ach9il+igtd@eGroups.com>

Hi gang,

I am confused.  I recently decided to bust up my mammoth .g file into 
three different files, one each for lexer, parser, and tree walker.

Well, I'm running into vocab hell from this.

What I want to do is have the lexer define some tokens that it uses 
and exports.

Then I want to have the parser define some tokens that IT uses and 
exports.

Then I want the tree walker to use all of those.

Unfortunately, it looks like by the time the parser is compiled, it 
has only exported the tokens that it uses, and left out all the 
tokens that only the lexer uses.  This is unfortunate, since then all 
the C++ files are compiled, and the Lexer.cpp file can't find a bunch 
of symbols that it needs!

Ack!

So anyone else have this problem?  What's the solution?  By the way, 
take it as a given that I cannot compile the C++ files right after 
compiling the .g file.

Thanks,
JSRS


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bob at werken.com  Wed May 22 20:40:20 2002
From: bob at werken.com (bob mcwhirter)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] vocabulary (token) import and export
In-Reply-To: <ach9il+igtd@eGroups.com>
Message-ID: <Pine.LNX.3.96.1020522233546.22972E-100000@exeter.exeter.org>


If there's a grammar that includes all tokens (in this case,
possibly your tree-walker), let that one be the exporter.

Though, I think the typical case is that the parser includes
all relevant tokens from the lexer, no?  You seem to indicate
that's not true, which confuses me, personally.

I find that my parser has it's own tokens, uses the 'public' 
lexer tokens, and constructs the tree using possibly more tree
tokens.

I don't see how a tree-walker can deal with lexer-based tokens
that the parser knows nothing about.  How'd the tree get a lexer
token without the parser seeing it?

Anyhow, there's really no distinction between parser, lexer and
tree-walker tokens.  The whole point is of course to unify them
into a single token set, and each parser may only use a subset
of the entire set.

So, if by some chance, there is no lexer/parser/tree-walker that
contains all tokens, simply add them in the tokens{} block, and
consider that file to be the master which does the exportVocab
and is antlr'd first.  All others importVocab, and are compile
subsequently.

btw, I've never worked with antlr/C++, so things may be different
from my java-based world view.

	-bob



On Wed, 22 May 2002, jsrs701 wrote:

> Hi gang,
> 
> I am confused.  I recently decided to bust up my mammoth .g file into 
> three different files, one each for lexer, parser, and tree walker.
> 
> Well, I'm running into vocab hell from this.
> 
> What I want to do is have the lexer define some tokens that it uses 
> and exports.
> 
> Then I want to have the parser define some tokens that IT uses and 
> exports.
> 
> Then I want the tree walker to use all of those.
> 
> Unfortunately, it looks like by the time the parser is compiled, it 
> has only exported the tokens that it uses, and left out all the 
> tokens that only the lexer uses.  This is unfortunate, since then all 
> the C++ files are compiled, and the Lexer.cpp file can't find a bunch 
> of symbols that it needs!
> 
> Ack!
> 
> So anyone else have this problem?  What's the solution?  By the way, 
> take it as a given that I cannot compile the C++ files right after 
> compiling the .g file.
> 
> Thanks,
> JSRS
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Wed May 22 21:35:57 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Should a Lexer barf on any input file?
Message-ID: <achrjd+4ba9@eGroups.com>

I added a driver loop similar to that below to my under-development 
Lexer to be able to test it as I go.

   while ( !done ) {
      Token t = lexer.nextToken();
      PrintLine("Token: "+t);
   }

My query is this: is it possible for the Lexer to barf on a file that 
the combined Parser/Lexer would accept?

Basically, I'm trying to determine if it is possible for the Lexer 
alone to reject a file that the Parser/Lexer combo accepts.

Cheers,

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Thu May 23 00:31:12 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] vocabulary (token) import and export
In-Reply-To: <ach9il+igtd@eGroups.com>; from jsrs701@yahoo.com on Wed, May 22, 2002 at 11:28:21PM -0000
References: <ach9il+igtd@eGroups.com>
Message-ID: <20020523093112.C761@cs.utwente.nl>

On Wed, May 22, 2002 at 11:28:21PM -0000, jsrs701 wrote:
> I am confused.  I recently decided to bust up my mammoth .g file into 
> three different files, one each for lexer, parser, and tree walker.
> 
> Well, I'm running into vocab hell from this.

Use the FAQ luke:

http://www.jguru.com/faq/view.jsp?EID=531842

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Thu May 23 06:53:43 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Should a Lexer barf on any input file?
Message-ID: <170826586F3BD511910D0200C110AAA8032B4984@memail03.bco-home.com>

> I added a driver loop similar to that below to my under-development 
> Lexer to be able to test it as I go.
> 
>    while ( !done ) {
>       Token t = lexer.nextToken();
>       PrintLine("Token: "+t);
>    }
> 
> My query is this: is it possible for the Lexer to barf on a file that 
> the combined Parser/Lexer would accept?
> 
> Basically, I'm trying to determine if it is possible for the Lexer 
> alone to reject a file that the Parser/Lexer combo accepts.

All a parser does is (indirectly through TokenBuffer) call lexer.nextToken()
over and over until EOF.  Unless you are doing something nasty like having
parser feedback to the lexer then I wouldn't expect to see a problem.  I
test my lexers like that all the time.  For instance:

		BASICLexer lexer = new BASICLexer ( dis );
	      lexer.setTokenObjectClass("ArevToken");
		t = lexer.nextToken();
		while (t.getType() != Token.EOF_TYPE ) {
		    String type = BASICParser._tokenNames[t.getType()];
                System.out.println( type + ": '"+t.getText()+"'" + " " +
t.toString() );
		    t = lexer.nextToken();
		}

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From wiggjd at sbu.ac.uk  Fri May 24 04:30:01 2002
From: wiggjd at sbu.ac.uk (David Wigg)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] CSymbolTable classes for C++
Message-ID: <3CEE2439.D16260A8@sbu.ac.uk>

Hello Geert-Jan,

In response to your recent enquiry about the availability of the
CSymbolTable class in C++. I am currently try to convert this class into
C++.

I do not seem to have any copies of CSymbolTable.java in my examples
directory. My version comes from the GNU.C available from
www.antlr.org/resources.html which I am trying to convert from ANTLR
producing Java code to ANTLR producing C++ code.

This is proving difficult for me. The conversion of the CSymbolTable is
a step in this process. If you would like further information, you can
contact me off list.

David
Researcher
South Bank University
London
UK

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sachin_sawant10 at yahoo.com  Fri May 24 04:44:30 2002
From: sachin_sawant10 at yahoo.com (sachin_sawant10)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] what is a problem with following grammer
Message-ID: <acl92u+plj8@eGroups.com>

My grammer file is as follows,

---------------------------------------------------------------------
class JSPParser extends Parser;

file:   (statement)+ 
	;

statement: (   WORD
             | STRING
	     | link
      )
	;

link    :		
                LINKSTART
		IMG
		LINEND
	
	;



class JSPLexer extends Lexer;
options {
	caseSensitive=false;
	k=7;
	filter=SCARF;
	charVocabulary='\3'..'\177';
}

LINKSTART
	:	"<i18n:link" 
		(WS (ATTR)*)?     
		">"		

	;

IMG    
        :      	"<i18n:img" 
		(WS (ATTR)*)?       
		"/>"		
	;

LINKEND
	:	"</i18n:link>" 
	;



protected
ATTR
options {
	ignore=WS;
}
	:	w:WORD '='
		(	s:STRING
		|	v:WORD
		)
	;

/** Match until next whitespace; can be file, int, etc... */
protected
WORD:	(
			options {
				generateAmbigWarnings=false;
			}
		:	'a'..'z' | '0'..'9' | '/' | '.' | '#' | '_'
		)+
	;

protected
STRING
	:	'"' (~'"')* '"'
	|	'\'' (~'\'')* '\''
	;


protected
WS	:	(	' '
		|	'\t'
		|	'\f'
		|	(	"\r\n"  // DOS
			|	'\r'    // Macintosh
			|	'\n'    // Unix (the right way)
			)
			{ newline(); }
		)
		
	;

protected
SCARF
	:	WS	// track line numbers while you scarf
	|	.
	;

--------------------------------------------------------------------

When I run the parser.file() on the following data

<i18n:link 
page="/aggregationServlet/app/aggregation/user/toViewAccount">
     <i18n:bean pageProperty="buttonCancelImage" border="0" 
altProperty="buttonCancelText" />
</i18n:link>


I get "line 3: expecting IMG, found '</i18n:link>'" error.

Could anybody help me to solve this issue?

Thanks

Sachin


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Fri May 24 05:08:32 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] what is a problem with following grammer
References: <acl92u+plj8@eGroups.com>
Message-ID: <006701c2031b$b9892b50$0200a8c0@matthewfnb>

 link    :
                 LINKSTART
 IMG
 LINEND

expands to

"<i18n:link" (WS (ATTR)*)?     ">"
 "<i18n:img" (WS (ATTR)*)?   "/>"
 "</i18n:link>"

you passed

<i18n:link  page="/aggregationServlet/app/aggregation/user/toViewAccount">
     <i18n:bean pageProperty="buttonCancelImage" border="0"
altProperty="buttonCancelText" />
</i18n:link>

There is no <i18n:img  so  link: complains

----- Original Message -----
From: "sachin_sawant10" <sachin_sawant10@yahoo.com>
To: <antlr-interest@yahoogroups.com>
Sent: Friday, May 24, 2002 9:44 PM
Subject: [antlr-interest] what is a problem with following grammer


> My grammer file is as follows,
>
> ---------------------------------------------------------------------
> class JSPParser extends Parser;
>
> file:   (statement)+
> ;
>
> statement: (   WORD
>              | STRING
>      | link
>       )
> ;
>
> link    :
>                 LINKSTART
> IMG
> LINEND
>
> ;
>
>
>
> class JSPLexer extends Lexer;
> options {
> caseSensitive=false;
> k=7;
> filter=SCARF;
> charVocabulary='\3'..'\177';
> }
>
> LINKSTART
> : "<i18n:link"
> (WS (ATTR)*)?
> ">"
>
> ;
>
> IMG
>         :      "<i18n:img"
> (WS (ATTR)*)?
> "/>"
> ;
>
> LINKEND
> : "</i18n:link>"
> ;
>
>
>
> protected
> ATTR
> options {
> ignore=WS;
> }
> : w:WORD '='
> ( s:STRING
> | v:WORD
> )
> ;
>
> /** Match until next whitespace; can be file, int, etc... */
> protected
> WORD: (
> options {
> generateAmbigWarnings=false;
> }
> : 'a'..'z' | '0'..'9' | '/' | '.' | '#' | '_'
> )+
> ;
>
> protected
> STRING
> : '"' (~'"')* '"'
> | '\'' (~'\'')* '\''
> ;
>
>
> protected
> WS : ( ' '
> | '\t'
> | '\f'
> | ( "\r\n"  // DOS
> | '\r'    // Macintosh
> | '\n'    // Unix (the right way)
> )
> { newline(); }
> )
>
> ;
>
> protected
> SCARF
> : WS // track line numbers while you scarf
> | .
> ;
>
> --------------------------------------------------------------------
>
> When I run the parser.file() on the following data
>
> <i18n:link
> page="/aggregationServlet/app/aggregation/user/toViewAccount">
>      <i18n:bean pageProperty="buttonCancelImage" border="0"
> altProperty="buttonCancelText" />
> </i18n:link>
>
>
> I get "line 3: expecting IMG, found '</i18n:link>'" error.
>
> Could anybody help me to solve this issue?
>
> Thanks
>
> Sachin
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pganelin at marketswitch.com  Fri May 24 07:18:00 2002
From: pganelin at marketswitch.com (Pavel Ganelin)
Date: Mon Dec 20 16:14:49 2004
Subject: ANTLR 2.7.2a build failed with Visual Studio. Fixes are
  included
Message-ID: <5.1.0.14.2.20020524100716.04beeb18@courier.marketswitch.com>

An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020524/45a98c5c/attachment.html
-------------- next part --------------
A non-text attachment was scrubbed...
Name: diff
Type: application/octet-stream
Size: 8375 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20020524/45a98c5c/diff.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: patch
Type: application/octet-stream
Size: 14889 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20020524/45a98c5c/patch.obj
From parrt at jguru.com  Fri May 24 13:14:29 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] new ORACLE 7 SQL Grammar posted
Message-ID: <DA7C20BE-6F52-11D6-8FCE-0030653DE0D6@jguru.com>

Folks,

Thanks to Brent Wiese, we now have an initial draft of an ORACLE 7 SQL 
grammar.  Check it out at:

http://www.antlr.org/grammars/ORACLE-7-SQL/

Send your comments/updates to Brent :)

Best regards,
Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Fri May 24 14:08:31 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] HowTo manipulate returned Token value?
Message-ID: <acma4f+rair@eGroups.com>

Hi All,

I suspect it should be possible to be able to manipulate the string 
value associated with a Token before it is returned from a lexer and 
perhaps insert additional tokens too.  ;-)

I am trying to deal with the C preprocessor and I wanted my 
CLangPreprocessorLexer to be able to return tokens for preprocessor 
directives. 

Given the following definition,

PRE_DEFINE
   : (PRE_WS)* '#' (PRE_WS)* "define" (PRE_WS)+ PRE_IDENT (PRE_WS)+ 
(PRE_DEFINE_PARAMS)? (PRE_WS)+ PRE_DEFINE_TOKENSTRING NEWLINE
   ;

ANTLR returns the whole line - including the NEWLINE char - as the 
value associated with token PRE_DEFINE. Can I manipulate the textual 
value associated with the tokens in the Lexer before they are 
returned?

Perhaps so I can return:
   PRE_DEFINE<"">                            then
   PRE_DEFINE_IDENT<ident-val>               then
   PRE_DEFINE_PARAMS<param-string>           then
   PRE_DEFINE_TOKENSTRING<token-string>      then
   PRE_NEWLINE

ADDITIONALLY...

I am working on two Parsers that would share the Lexer -- one that 
cares about preprocessor stuff and one that doesn't. I can't just 
ignore all PRE_xxxx tags in the second Parser as it might result in 
the Parser seeing code that the PRE_xxxx tokens would have flagged as 
conditionally excluded.

Can multiple Lexers be arranged as streams of "filters"?. I might be 
able to code a CLangPreprocessorStripperLexer that feeds on the first?

Or do I have no choice but to develop two versions of the Lexers or, 
have both my Parsers be aware of PRE_xxxx tokens?

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri May 24 14:31:17 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] HowTo manipulate returned Token value?
Message-ID: <170826586F3BD511910D0200C110AAA8032B498D@memail03.bco-home.com>

Antlr doesn't have a notion of returing multiple tokens in one call to
nextToken().  I've gotten by before by creating my own token buffer and
stuffing the extra tokens in there via actions.  Then I subclass my
generated lexer and override nextToken to check the buffer first, only if it
is empty does it call super.nextToken() to prime the buffer.  

It's pretty easy to define TokenFilters, that would be the way to go so you
can reuse the lexer for both parsers.

Monty

> -----Original Message-----
> From: micheal_jor [mailto:open.zone@virgin.net]
> Sent: Friday, May 24, 2002 2:09 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] HowTo manipulate returned Token value?
> 
> 
> Hi All,
> 
> I suspect it should be possible to be able to manipulate the string 
> value associated with a Token before it is returned from a lexer and 
> perhaps insert additional tokens too.  ;-)
> 
> I am trying to deal with the C preprocessor and I wanted my 
> CLangPreprocessorLexer to be able to return tokens for preprocessor 
> directives. 
> 
> Given the following definition,
> 
> PRE_DEFINE
>    : (PRE_WS)* '#' (PRE_WS)* "define" (PRE_WS)+ PRE_IDENT (PRE_WS)+ 
> (PRE_DEFINE_PARAMS)? (PRE_WS)+ PRE_DEFINE_TOKENSTRING NEWLINE
>    ;
> 
> ANTLR returns the whole line - including the NEWLINE char - as the 
> value associated with token PRE_DEFINE. Can I manipulate the textual 
> value associated with the tokens in the Lexer before they are 
> returned?
> 
> Perhaps so I can return:
>    PRE_DEFINE<"">                            then
>    PRE_DEFINE_IDENT<ident-val>               then
>    PRE_DEFINE_PARAMS<param-string>           then
>    PRE_DEFINE_TOKENSTRING<token-string>      then
>    PRE_NEWLINE
> 
> ADDITIONALLY...
> 
> I am working on two Parsers that would share the Lexer -- one that 
> cares about preprocessor stuff and one that doesn't. I can't just 
> ignore all PRE_xxxx tags in the second Parser as it might result in 
> the Parser seeing code that the PRE_xxxx tokens would have flagged as 
> conditionally excluded.
> 
> Can multiple Lexers be arranged as streams of "filters"?. I might be 
> able to code a CLangPreprocessorStripperLexer that feeds on the first?
> 
> Or do I have no choice but to develop two versions of the Lexers or, 
> have both my Parsers be aware of PRE_xxxx tokens?
> 
> Micheal
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From danfuzz at milk.com  Sun May 26 15:53:37 2002
From: danfuzz at milk.com (danfuzz)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Why is this nondeterministic?
Message-ID: <acrp1h+rsdq@eGroups.com>

The following is a very simplified version of a grammar I'm working
on (attached below). When I try to compile it, I get the following
warning:

warning: lexical nondeterminism between rules REGULAR and SPECIAL upon
/home/danfuzz/cvs/local/stuplate/com/milk/stuplate/abc.g:0: k==1:'a'
/home/danfuzz/cvs/local/stuplate/com/milk/stuplate/abc.g:0: k==2:'b'

I don't understand why it's nondeterministic, and so I'm not sure how
to change it. Help would be appreciated. Thanks!

-dan

##########

class AbcLexer extends Lexer;

options 
{
    k = 2;
    charVocabulary = 'a'..'c';
}

REGULAR:
    (REGULAR_BIT)+;

SPECIAL:
    'a' 'b'
;

protected
REGULAR_BIT:
    ('b' | 'c')
|   ('a' 'a')
|   ('a' 'c')
;


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sun May 26 16:18:54 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Why is this nondeterministic?
In-Reply-To: <acrp1h+rsdq@eGroups.com>
Message-ID: <F2A770D5-70FE-11D6-97F6-0030653DE0D6@jguru.com>


On Sunday, May 26, 2002, at 03:53  PM, danfuzz wrote:

> The following is a very simplified version of a grammar I'm working
> on (attached below). When I try to compile it, I get the following
> warning:
>
> warning: lexical nondeterminism between rules REGULAR and SPECIAL upon
> /home/danfuzz/cvs/local/stuplate/com/milk/stuplate/abc.g:0: k==1:'a'
> /home/danfuzz/cvs/local/stuplate/com/milk/stuplate/abc.g:0: k==2:'b'
>
> I don't understand why it's nondeterministic, and so I'm not sure how
> to change it. Help would be appreciated. Thanks!

Hi Dan,

The problem is that 'a' 'b' can start both REGULAR (via REGULAR_BIT) and 
SPECIAL.  The lexer, given "ab" input would not know which token to 
make.  This is an ambiguous grammar, which implies that it is also 
nondeterministic.

Regards,
Terence

> class AbcLexer extends Lexer;
>
> options
> {
>     k = 2;
>     charVocabulary = 'a'..'c';
> }
>
> REGULAR:
>     (REGULAR_BIT)+;
>
> SPECIAL:
>     'a' 'b'
> ;
>
> protected
> REGULAR_BIT:
>     ('b' | 'c')
> |   ('a' 'a')
> |   ('a' 'c')
> ;
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Sun May 26 16:59:01 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] How do I specify start-of-line (^ in [F]Lex in ANTLR Lexers?
Message-ID: <acrss5+5o0b@eGroups.com>

I am still struggling with handling preprocessor directives with 
ANTLR. ;-)

In addition to an answer for my question in the subject line, I would 
appreciate a link to examples of ANTLR projects that deals with 
preprocessor directives if such a thing exists -- maybe I can learn 
from them....

Thanks

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From brian-l-smith at uiowa.edu  Sun May 26 17:04:23 2002
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Why is this nondeterministic?
References: <F2A770D5-70FE-11D6-97F6-0030653DE0D6@jguru.com>
Message-ID: <3CF17807.5030803@uiowa.edu>

Terence,

I'm a newbie and I don't understand your answer (and I am not the 
original poster). There is a "simplified" version of the problem below 
(fewer subrules) that has a similar (the same?) nondeterminism. There is 
no way that REGULAR_BIT could match 'a' 'b'. So, whenever I see an 'a' 
'b' it must be a SPECIAL, right? In fact, that is what the generated 
code does.

Also, if you take the closure (...)+ off of regular_bit then it works. 
So, it must be a problem caused by strings longer than three characters, 
or a problem with the end-of-input case, AFAIK. Could somebody please 
demonstrate a string that is ambiguous with this lexer?

Thanks,
Brian

class AbcLexer extends Lexer;

options
{
     k = 2;
     charVocabulary = 'a'..'c';
}

REGULAR:
     (REGULAR_BIT)+;

SPECIAL:
     'a' 'b'
;

protected
REGULAR_BIT:
     ('b')
|   ('a' 'c')
;

Terence Parr wrote:
> On Sunday, May 26, 2002, at 03:53  PM, danfuzz wrote:
> 
> 
>>The following is a very simplified version of a grammar I'm working
>>on (attached below). When I try to compile it, I get the following
>>warning:
>>
>>warning: lexical nondeterminism between rules REGULAR and SPECIAL upon
>>/home/danfuzz/cvs/local/stuplate/com/milk/stuplate/abc.g:0: k==1:'a'
>>/home/danfuzz/cvs/local/stuplate/com/milk/stuplate/abc.g:0: k==2:'b'
>>
>>I don't understand why it's nondeterministic, and so I'm not sure how
>>to change it. Help would be appreciated. Thanks!
> 
> 
> Hi Dan,
> 
> The problem is that 'a' 'b' can start both REGULAR (via REGULAR_BIT) and 
> SPECIAL.  The lexer, given "ab" input would not know which token to 
> make.  This is an ambiguous grammar, which implies that it is also 
> nondeterministic.
> 
> Regards,
> Terence
> 
> 
>>class AbcLexer extends Lexer;
>>
>>options
>>{
>>    k = 2;
>>    charVocabulary = 'a'..'c';
>>}
>>
>>REGULAR:
>>    (REGULAR_BIT)+;
>>
>>SPECIAL:
>>    'a' 'b'
>>;
>>
>>protected
>>REGULAR_BIT:
>>    ('b' | 'c')
>>|   ('a' 'a')
>>|   ('a' 'c')
>>;
>>
>>
>>
>>
>>Your use of Yahoo! Groups is subject to 
>>http://docs.yahoo.com/info/terms/
>>
>>
> 
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sun May 26 17:20:47 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Why is this nondeterministic?
In-Reply-To: <3CF17807.5030803@uiowa.edu>
Message-ID: <9773CFD2-7107-11D6-97F6-0030653DE0D6@jguru.com>


On Sunday, May 26, 2002, at 05:04  PM, Brian Smith wrote:

> Terence,
>
> I'm a newbie and I don't understand your answer (and I am not the
> original poster). There is a "simplified" version of the problem below
> (fewer subrules) that has a similar (the same?) nondeterminism. There is
> no way that REGULAR_BIT could match 'a' 'b'. So, whenever I see an 'a'
> 'b' it must be a SPECIAL, right? In fact, that is what the generated
> code does.

In this particular case, it's a weakness of the linear approximate 
lookahead (i.e., it's weaker than your intuitive "this can't match ab" 
abilities).  See FAQ entitled:

"Can you explain more about ANTLR's tricky lexical lookahead issues 
related to seeing past the end of a token definition into the start of 
another?"

http://www.jguru.com/faq/view.jsp?EID=64316

> Also, if you take the closure (...)+ off of regular_bit then it works.

Correct, you've removed the loop which prevents 'b' from being in the 
2nd lookahead position at k=2, which keeps antlr from thinking 'b' can 
follow 'a' in that rule :)

Ter

> So, it must be a problem caused by strings longer than three characters,
> or a problem with the end-of-input case, AFAIK. Could somebody please
> demonstrate a string that is ambiguous with this lexer?
>
> Thanks,
> Brian
>
> class AbcLexer extends Lexer;
>
> options
> {
>      k = 2;
>      charVocabulary = 'a'..'c';
> }
>
> REGULAR:
>      (REGULAR_BIT)+;
>
> SPECIAL:
>      'a' 'b'
> ;
>
> protected
> REGULAR_BIT:
>      ('b')
> |   ('a' 'c')
> ;
>
> Terence Parr wrote:
>> On Sunday, May 26, 2002, at 03:53  PM, danfuzz wrote:
>>
>>
>>> The following is a very simplified version of a grammar I'm working
>>> on (attached below). When I try to compile it, I get the following
>>> warning:
>>>
>>> warning: lexical nondeterminism between rules REGULAR and SPECIAL upon
>>> /home/danfuzz/cvs/local/stuplate/com/milk/stuplate/abc.g:0: k==1:'a'
>>> /home/danfuzz/cvs/local/stuplate/com/milk/stuplate/abc.g:0: k==2:'b'
>>>
>>> I don't understand why it's nondeterministic, and so I'm not sure how
>>> to change it. Help would be appreciated. Thanks!
>>
>>
>> Hi Dan,
>>
>> The problem is that 'a' 'b' can start both REGULAR (via REGULAR_BIT) 
>> and
>> SPECIAL.  The lexer, given "ab" input would not know which token to
>> make.  This is an ambiguous grammar, which implies that it is also
>> nondeterministic.
>>
>> Regards,
>> Terence
>>
>>
>>> class AbcLexer extends Lexer;
>>>
>>> options
>>> {
>>>    k = 2;
>>>    charVocabulary = 'a'..'c';
>>> }
>>>
>>> REGULAR:
>>>    (REGULAR_BIT)+;
>>>
>>> SPECIAL:
>>>    'a' 'b'
>>> ;
>>>
>>> protected
>>> REGULAR_BIT:
>>>    ('b' | 'c')
>>> |   ('a' 'a')
>>> |   ('a' 'c')
>>> ;
>>>
>>>
>>>
>>>
>>> Your use of Yahoo! Groups is subject to
>>> http://docs.yahoo.com/info/terms/
>>>
>>>
>>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to 
>> http://docs.yahoo.com/info/terms/
>>
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sun May 26 17:23:56 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Why is this nondeterministic?
In-Reply-To: <9773CFD2-7107-11D6-97F6-0030653DE0D6@jguru.com>
Message-ID: <07F7AF18-7108-11D6-97F6-0030653DE0D6@jguru.com>

> "Can you explain more about ANTLR's tricky lexical lookahead issues
> related to seeing past the end of a token definition into the start of
> another?"
>
> http://www.jguru.com/faq/view.jsp?EID=64316

Ooops...i think this one is better:

http://www.jguru.com/faq/view.jsp?EID=264825

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From oobles at hotmail.com  Sun May 26 20:10:30 2002
From: oobles at hotmail.com (ooobles)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Looking for a simple answer. :)
Message-ID: <acs836+th27@eGroups.com>



Hi..

I've been working with ANTLR for a few weeks now and have had my head 
mashed a couple of times over trying to comprehend what it can't do.  
So far.. it didn't make me breakfast.. thats about all. :)  That is 
to say.. great job!

I'm working on trying to parse some syslog entries like..

httpd[13748]: 121 Statistics: duration=0.47 id=HI5l sent=586 rcvd=699 
srcif=eth0 src=192.168.42.232/3399 svsrc=10.0.0.2/2444 dstif=eth1 
dst=64.154.80.50/80 op=GET arg=http://hg1.hitbox.com/HG?
hc=w147&l=y&hb=WQ500202CFDV94EN0&cd=1&n=ProdAd result="302 Moved 
Temporarily" proto=http rule=4

The problem is in the value of various statistics.  For instance the 
arg value is a http request value.  Its value has the potential to 
contain all the nasty characters like = that completely destroys 
otherwise nicely formated line.

Ideally I'd like my grammer to be:

(ID ASSIGN VALUE)+       // for each name value pair.

The problem is how do I make the VALUE in the lexer match everything 
including the = up to the first WS character but not have VALUE match 
against everything else?

After reading much of the documents the best answer I could find was 
to create a seperate lexer, but this seems like overkill for a single 
rule???  Any other ideas?

Thanks,
David.





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dan.stanger at ieee.org  Mon May 27 07:26:37 2002
From: dan.stanger at ieee.org (Dan Stanger)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Looking for a simple answer. :)
References: <acs836+th27@eGroups.com>
Message-ID: <3CF2421D.95229653@ieee.org>

Adding a seperate lexer is not as hard as it looks.   I had to do this kind
of thing also,
and it really makes it easy to do.
Dan

ooobles wrote:

> Hi..
>
> I've been working with ANTLR for a few weeks now and have had my head
> mashed a couple of times over trying to comprehend what it can't do.
> So far.. it didn't make me breakfast.. thats about all. :)  That is
> to say.. great job!
>
> I'm working on trying to parse some syslog entries like..
>
> httpd[13748]: 121 Statistics: duration=0.47 id=HI5l sent=586 rcvd=699
> srcif=eth0 src=192.168.42.232/3399 svsrc=10.0.0.2/2444 dstif=eth1
> dst=64.154.80.50/80 op=GET arg=http://hg1.hitbox.com/HG?
> hc=w147&l=y&hb=WQ500202CFDV94EN0&cd=1&n=ProdAd result="302 Moved
> Temporarily" proto=http rule=4
>
> The problem is in the value of various statistics.  For instance the
> arg value is a http request value.  Its value has the potential to
> contain all the nasty characters like = that completely destroys
> otherwise nicely formated line.
>
> Ideally I'd like my grammer to be:
>
> (ID ASSIGN VALUE)+       // for each name value pair.
>
> The problem is how do I make the VALUE in the lexer match everything
> including the = up to the first WS character but not have VALUE match
> against everything else?
>
> After reading much of the documents the best answer I could find was
> to create a seperate lexer, but this seems like overkill for a single
> rule???  Any other ideas?
>
> Thanks,
> David.
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Mon May 27 07:37:57 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Looking for a simple answer. :)
In-Reply-To: <3CF2421D.95229653@ieee.org>
Message-ID: <20020527143757.14430.qmail@web14801.mail.yahoo.com>

ooobles wrote:

> Hi..
>
> > httpd[13748]: 121 Statistics: duration=0.47 id=HI5l sent=586 rcvd=699
> > srcif=eth0 src=192.168.42.232/3399 svsrc=10.0.0.2/2444 dstif=eth1
> > dst=64.154.80.50/80 op=GET arg=http://hg1.hitbox.com/HG?
> > hc=w147&l=y&hb=WQ500202CFDV94EN0&cd=1&n=ProdAd result="302 Moved
> > Temporarily" proto=http rule=4
> >
> > The problem is in the value of various statistics.  For instance the
> > arg value is a http request value.  Its value has the potential to
> > contain all the nasty characters like = that completely destroys
> > otherwise nicely formated line.
> >
> > Ideally I'd like my grammer to be:
> >
> > (ID ASSIGN VALUE)+       // for each name value pair.
> >
> > The problem is how do I make the VALUE in the lexer match everything
> > including the = up to the first WS character but not have VALUE match
> > against everything else?

Why don't you make your grammar 
(ID VALUE)+

where VALUE is something like:
VALUE: '='! (~(' ' | '\t' | '\r' | '\n'))*  ;

This assumes that VALUE starts imediately after '=' and ends with the first
white space, which seems to be always true, in your example.

Regards,
Bogdan

> > After reading much of the documents the best answer I could find was
> > to create a seperate lexer, but this seems like overkill for a single
> > rule???  Any other ideas?
> >
> > Thanks,
> > David.
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From glindholm at yahoo.com  Mon May 27 08:37:00 2002
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] How do I specify start-of-line (^ in [F]Lex in ANTLR Lexers?
In-Reply-To: <acrss5+5o0b@eGroups.com>
Message-ID: <20020527153700.27126.qmail@web12408.mail.yahoo.com>

ANTLR doesn't have a way of specifing start-of-line as part of a rule. 
Once you have entered a rule you can use a sematic predicate to check
what column your at, but this probably doesn't help you.

IMHO ANTLR is not well suited for writing a preprocessor as; 
1) Preprocessors are line-oriented and ANTLR isn't.
2) The output of an ANTLR lexer is a token stream where the 
output of a preprocessor is a character stream (or file) that
then gets fed into a lexer.

Greg


--- micheal_jor <open.zone@virgin.net> wrote:
> I am still struggling with handling preprocessor directives with 
> ANTLR. ;-)
> 
> In addition to an answer for my question in the subject line, I would
> 
> appreciate a link to examples of ANTLR projects that deals with 
> preprocessor directives if such a thing exists -- maybe I can learn 
> from them....
> 
> Thanks
> 
> Micheal
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From clinton_olsen at yahoo.com  Mon May 27 10:59:42 2002
From: clinton_olsen at yahoo.com (Clint Olsen)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] 2.7.a2 build issues
Message-ID: <20020527175942.GA90613@0lsen.net>

Hi:

In order to get Antlr to build on my Linux box, I had to doctor the
scripts/run-antlr and the scripts/Config.make.  There was a reference to
antlrall.jar which wasn't there in the distribution when I unpacked it.
Did I do something out of order?  What exactly is the difference between
antlrall.jar and antlr.jar?

Thanks,

-Clint

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon May 27 11:25:28 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] How do I specify start-of-line (^ in [F]Lex in ANTLR Lexers?
In-Reply-To: <20020527153700.27126.qmail@web12408.mail.yahoo.com>
Message-ID: <1EFF7452-719F-11D6-97F6-0030653DE0D6@jguru.com>


On Monday, May 27, 2002, at 08:37  AM, Greg Lindholm wrote:

> ANTLR doesn't have a way of specifing start-of-line as part of a rule.
> Once you have entered a rule you can use a sematic predicate to check
> what column your at, but this probably doesn't help you.
>
> IMHO ANTLR is not well suited for writing a preprocessor as;
> 1) Preprocessors are line-oriented and ANTLR isn't.
> 2) The output of an ANTLR lexer is a token stream where the
> output of a preprocessor is a character stream (or file) that
> then gets fed into a lexer.

Very good points...

Here is a strategy that you may not have considered: do a line oriented 
loop to get input and then when you find a directive in column one, use 
ANTLR to lex or parse just that line :)  Works great.

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon May 27 12:23:30 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] How do I specify start-of-line (^ in [F]Lex in ANTLR Lexers?
In-Reply-To: <20020527153700.27126.qmail@web12408.mail.yahoo.com>
Message-ID: <3A813156-71A7-11D6-97F6-0030653DE0D6@jguru.com>

I have added a FAQ entry (using your name and answer if that's ok Greg):

http://www.jguru.com/faq/view.jsp?EID=893706

Ter

On Monday, May 27, 2002, at 08:37  AM, Greg Lindholm wrote:

> ANTLR doesn't have a way of specifing start-of-line as part of a rule.
> Once you have entered a rule you can use a sematic predicate to check
> what column your at, but this probably doesn't help you.
>
> IMHO ANTLR is not well suited for writing a preprocessor as;
> 1) Preprocessors are line-oriented and ANTLR isn't.
> 2) The output of an ANTLR lexer is a token stream where the
> output of a preprocessor is a character stream (or file) that
> then gets fed into a lexer.
>
> Greg
>
>
> --- micheal_jor <open.zone@virgin.net> wrote:
>> I am still struggling with handling preprocessor directives with
>> ANTLR. ;-)
>>
>> In addition to an answer for my question in the subject line, I would
>>
>> appreciate a link to examples of ANTLR projects that deals with
>> preprocessor directives if such a thing exists -- maybe I can learn
>> from them....
>>
>> Thanks
>>
>> Micheal
>>
>>
>
>
> __________________________________________________
> Do You Yahoo!?
> Yahoo! - Official partner of 2002 FIFA World Cup
> http://fifaworldcup.yahoo.com
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jpschewe at mtu.net  Mon May 27 12:28:27 2002
From: jpschewe at mtu.net (Jon Schewe)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Inheritance of parsers not working quite right
Message-ID: <3CF288DB.4030903@mtu.net>

I'm using antlr 2.7.1 and working with a modified Java grammar.  I 
recently decided to addd 1.4 support, which means two grammars.  I have 
them inheriting from each other and something's not right.  The only 
change I have is one rule, statement, has an extra match rule at the end 
for the assert keyword.  So I put the full grammar in the supergrammar 
and just the statement rule in the sub grammar.

Now if the rule in the supergrammar has the or condition for the assert 
keyword and the subgrammar doesn't, then things work ok.  However if the 
supergrammar is missing support for the assert keyword and the 
subgrammar has support for the assert keyword, then calling the parser 
generated from the subgrammar doesn't recognize the assert keyword 
properly.  It's almost as if it was using the rules from the 
supergrammar and ignoring the subgrammar rules.  I put a print statement 
in the initialization for the statement rule and the right rules are 
getting called, just not working correctly.

Anyone have any ideas what's going on here?
-- 
Jon Schewe | http://mtu.net/~jpschewe | jpschewe@mtu.net
For I am convinced that neither death nor life, neither angels
nor demons, neither the present nor the future, nor any
powers, neither height nor depth, nor anything else in all
creation, will be able to separate us from the love of God that
is in Christ Jesus our Lord. - Romans 8:38-39


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon May 27 12:54:07 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Inheritance of parsers not working quite right
In-Reply-To: <3CF288DB.4030903@mtu.net>
Message-ID: <81754D2D-71AB-11D6-97F6-0030653DE0D6@jguru.com>

Hi Jon.  The first thing to check is that when you add a token, which 
changes the token type numbers of everything below its introduction in 
the grammar, that you have rebuilt the tree grammar.  In other words, 
when I added "assert" to my Java parser and then compiled and ran 
things, it bitched in the tree grammar.  ooops...forgot to regenerate 
from java.tree.g so that the new token types can get pushed thru to the 
JavaTreeParser.java :)

Ter

On Monday, May 27, 2002, at 12:28  PM, Jon Schewe wrote:

> I'm using antlr 2.7.1 and working with a modified Java grammar.  I
> recently decided to addd 1.4 support, which means two grammars.  I have
> them inheriting from each other and something's not right.  The only
> change I have is one rule, statement, has an extra match rule at the end
> for the assert keyword.  So I put the full grammar in the supergrammar
> and just the statement rule in the sub grammar.
>
> Now if the rule in the supergrammar has the or condition for the assert
> keyword and the subgrammar doesn't, then things work ok.  However if the
> supergrammar is missing support for the assert keyword and the
> subgrammar has support for the assert keyword, then calling the parser
> generated from the subgrammar doesn't recognize the assert keyword
> properly.  It's almost as if it was using the rules from the
> supergrammar and ignoring the subgrammar rules.  I put a print statement
> in the initialization for the statement rule and the right rules are
> getting called, just not working correctly.
>
> Anyone have any ideas what's going on here?
> --
> Jon Schewe | http://mtu.net/~jpschewe | jpschewe@mtu.net
> For I am convinced that neither death nor life, neither angels
> nor demons, neither the present nor the future, nor any
> powers, neither height nor depth, nor anything else in all
> creation, will be able to separate us from the love of God that
> is in Christ Jesus our Lord. - Romans 8:38-39
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon May 27 13:56:58 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] added a vrml.g
Message-ID: <48EC3688-71B4-11D6-97F6-0030653DE0D6@jguru.com>

Folks,

Added a start of a vrml grammar; see comments on this page:

http://www.antlr.org/resources.html

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From braden at endoframe.com  Mon May 27 14:39:38 2002
From: braden at endoframe.com (Braden McDaniel)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] added a vrml.g
In-Reply-To: <48EC3688-71B4-11D6-97F6-0030653DE0D6@jguru.com>
References: <48EC3688-71B4-11D6-97F6-0030653DE0D6@jguru.com>
Message-ID: <1022535578.30460.10222.camel@catalyst>

On Mon, 2002-05-27 at 16:56, Terence Parr wrote:
> Folks,
> 
> Added a start of a vrml grammar; see comments on this page:
> 
> http://www.antlr.org/resources.html

FYI: I've been using ANTLR in OpenVRML for some time. I haven't bothered
to submit a VRML grammar because I rely heavily on semantic predicates
for disambiguation:

http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/openvrml/openvrml-core/src/OpenVRML/Vrml97Parser.g?rev=1.30&content-type=text/vnd.viewcvs-markup

I'm able to use k=1, though. Also, I use a hand-written scanner.

The copyright on the file you have appears to be ripped out of the
lex/yacc parser SGI contributed. I seriously doubt it is correct in the
context of the ANTLR grammar. The VRML97 language authors are actually
Gavin Bell, Rikk Carey, and Chris Marrin.

-- 
Braden McDaniel                           e-mail: <braden@endoframe.com>
<http://endoframe.com>                    Jabber: <braden@jabber.org>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon May 27 14:54:56 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] added a vrml.g
In-Reply-To: <1022535578.30460.10222.camel@catalyst>
Message-ID: <620B91BA-71BC-11D6-BEBD-0030653DE0D6@jguru.com>


On Monday, May 27, 2002, at 02:39  PM, Braden McDaniel wrote:

> On Mon, 2002-05-27 at 16:56, Terence Parr wrote:
>> Folks,
>>
>> Added a start of a vrml grammar; see comments on this page:
>>
>> http://www.antlr.org/resources.html
>
> FYI: I've been using ANTLR in OpenVRML for some time. I haven't bothered
> to submit a VRML grammar because I rely heavily on semantic predicates
> for disambiguation:
>
> http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/openvrml/openvrml-
> core/src/OpenVRML/Vrml97Parser.g?rev=1.30&content-
> type=text/vnd.viewcvs-markup
>
> I'm able to use k=1, though. Also, I use a hand-written scanner.
>
> The copyright on the file you have appears to be ripped out of the
> lex/yacc parser SGI contributed. I seriously doubt it is correct in the
> context of the ANTLR grammar. The VRML97 language authors are actually
> Gavin Bell, Rikk Carey, and Chris Marrin.

I wondered about that.  Should I remove that comment?

Shall I just replace the whole thing with your grammar?

Regards,
Terence
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From danfuzz at milk.com  Mon May 27 14:59:46 2002
From: danfuzz at milk.com (danfuzz)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Re: Why is this nondeterministic?
In-Reply-To: <F2A770D5-70FE-11D6-97F6-0030653DE0D6@jguru.com>
Message-ID: <acua8i+71o2@eGroups.com>

Terence writes:
>The problem is that 'a' 'b' can start both REGULAR (via REGULAR_BIT) 
>and SPECIAL.  The lexer, given "ab" input would not know which token 
>to make.  This is an ambiguous grammar, which implies that it is 
>also nondeterministic.

Thanks for the quick reply. I'm still confused, though. I thought I
defined things such that REGULAR *can't* start with 'a' 'b'
(given that REGULAR_BIT matches 'a' 'a' and 'a' 'c' but not
'a' 'b').

My intent is for the lexer to return alternating tokens of
REGULAR or SPECIAL, where the text of REGULAR is a run of 'b's and 
'c's interspersed with "aa" and "ac" pairs (that is, 
"(b|c|aa|ac)*" in regex terms), and where the text of SPECIAL is 
always "ab".

Is it possible to say this with ANTLR? I noticed that, without
REGULAR being a closure (that is, saying just "REGULAR: 
REGULAR_BIT;") that the grammar compiles without complaint, so my
current workaround is to accumulate the REGULAR string  outside the 
lexer.

-dan

#####

Recap:

REGULAR: (REGULAR_BIT)+;
SPECIAL: 'a' 'b';

protected
REGULAR_BIT:
    ('b' | 'c')
|   ('a' 'a')
|   ('a' 'c')
;


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From glindholm at yahoo.com  Mon May 27 15:43:30 2002
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Tokens in fixed columns (e.g. COBOL)
In-Reply-To: <3A813156-71A7-11D6-97F6-0030653DE0D6@jguru.com>
Message-ID: <20020527224330.51372.qmail@web12408.mail.yahoo.com>


--- Terence Parr <parrt@jguru.com> wrote:
> I have added a FAQ entry (using your name and answer if that's ok
> Greg):
> 
> http://www.jguru.com/faq/view.jsp?EID=893706
> 
> Ter
Glad to help.

On a related note, a little while back I was working on lexer for COBOL
and was having problems with it's fixed column tokens (Linenum,
Continuation/Comment Indicator, Modcode).  Most of COBOL is free format
except for tokens that occur at 3 fixed margins (columns 1, 7, and 73).

In case anyone is interested or encounters a similar problem here is
the solution I came up with: I pass the imput file through a filter
that inserts "margin markers" into the input stream then use the
following MARGIN_TOKEN rule to figure out these special tokens.

/*
Margin tokens are tokens that are in fixed columns.
A "margin maker" ('\001') is artificially inserted into the character
stream at the margin column (1, 7, 73) so it can be used as a prefix to
a fixed column token.

The margin marker should be suffixed with a '!' so it is excluded from
the token text. The column position must also be ajusted to not count
the marker.

Use getColumn() in sematic predicates to determine which column we are
in and thus which token type to create.
*/
MARGIN_TOKEN:
    // T_LINENUM starts in column 1 and goes to the next margin or EOL
        { 1==getColumn()}?
        '\001'! (~('\001'|'\n'))*
        { $setType(T_LINENUM); setColumn(getColumn()-1); }

    // If the column 7 indicator is blank then skip.
    |   { 7==getColumn() && LA(2)==' '}?
        '\001'! ' '
        {   $setType(Token.SKIP); 
            setColumn(getColumn()-1); 
        }

    // T_CONTINUATION is a '-' in column 7
    |   { 7==getColumn() && LA(2)=='-'}?
        '\001'! '-'
        { $setType(T_CONTINUATION); setColumn(getColumn()-1); }

    // If the column 7 indicator area is not blank or continuation then
    // its a comment that goes to the next margin or EOL.
    |   { 7==getColumn() && LA(2)!=' ' && LA(2)!='-' }?
        '\001'!
            ( '*' { $setType(T_COMMENT); }
            | '/' { $setType(T_COMMENT); }
            | 'd' { $setType(T_DEBUG_COMMENT); }
            | '$' { $setType(T_SPECIAL_COMMENT); }
            )
            (~('\001'|'\n'))*
        { setColumn(getColumn()-1); }

    // T_MODCODE starts at column 73 and goes to EOL
    |   {73==getColumn()}?
        '\001'! (~'\n')*
        { $setType(T_MODCODE); setColumn(getColumn()-1); }
    ;

Greg


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jpschewe at mtu.net  Mon May 27 16:03:36 2002
From: jpschewe at mtu.net (Jon Schewe)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Inheritance of parsers not working quite right
References: <81754D2D-71AB-11D6-97F6-0030653DE0D6@jguru.com>
Message-ID: <3CF2BB48.7020101@mtu.net>

I'm not building a tree parser, just a basic parser.  No errors when 
compiling, just when running the generated parser.  Even tried building 
from scratch.

Terence Parr wrote:

> Hi Jon.  The first thing to check is that when you add a token, which 
> changes the token type numbers of everything below its introduction in 
> the grammar, that you have rebuilt the tree grammar.  In other words, 
> when I added "assert" to my Java parser and then compiled and ran 
> things, it bitched in the tree grammar.  ooops...forgot to regenerate 
> from java.tree.g so that the new token types can get pushed thru to the 
> JavaTreeParser.java :)
> 
> Ter
> 
> On Monday, May 27, 2002, at 12:28  PM, Jon Schewe wrote:
> 
> 
>>I'm using antlr 2.7.1 and working with a modified Java grammar.  I
>>recently decided to addd 1.4 support, which means two grammars.  I have
>>them inheriting from each other and something's not right.  The only
>>change I have is one rule, statement, has an extra match rule at the end
>>for the assert keyword.  So I put the full grammar in the supergrammar
>>and just the statement rule in the sub grammar.
>>
>>Now if the rule in the supergrammar has the or condition for the assert
>>keyword and the subgrammar doesn't, then things work ok.  However if the
>>supergrammar is missing support for the assert keyword and the
>>subgrammar has support for the assert keyword, then calling the parser
>>generated from the subgrammar doesn't recognize the assert keyword
>>properly.  It's almost as if it was using the rules from the
>>supergrammar and ignoring the subgrammar rules.  I put a print statement
>>in the initialization for the statement rule and the right rules are
>>getting called, just not working correctly.
>>
>>Anyone have any ideas what's going on here?
>>--
>>Jon Schewe | http://mtu.net/~jpschewe | jpschewe@mtu.net
>>For I am convinced that neither death nor life, neither angels
>>nor demons, neither the present nor the future, nor any
>>powers, neither height nor depth, nor anything else in all
>>creation, will be able to separate us from the love of God that
>>is in Christ Jesus our Lord. - Romans 8:38-39
>>
>>
>>
>>
>>Your use of Yahoo! Groups is subject to 
>>http://docs.yahoo.com/info/terms/
>>
>>
>>
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 



-- 
Jon Schewe | http://mtu.net/~jpschewe | jpschewe@mtu.net
For I am convinced that neither death nor life, neither angels
nor demons, neither the present nor the future, nor any
powers, neither height nor depth, nor anything else in all
creation, will be able to separate us from the love of God that
is in Christ Jesus our Lord. - Romans 8:38-39


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon May 27 16:06:02 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] Inheritance of parsers not working quite right
In-Reply-To: <3CF2BB48.7020101@mtu.net>
Message-ID: <50D47176-71C6-11D6-BEBD-0030653DE0D6@jguru.com>


On Monday, May 27, 2002, at 04:03  PM, Jon Schewe wrote:

> I'm not building a tree parser, just a basic parser.  No errors when
> compiling, just when running the generated parser.  Even tried building
> from scratch.

Ah.  Sorry 'bout that.  Ok, next thing to try is 2.7.2a2 to see if we 
fixed it already :)

Just lemme know :)

Thanks,
Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From braden at endoframe.com  Mon May 27 18:10:46 2002
From: braden at endoframe.com (Braden McDaniel)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] added a vrml.g
In-Reply-To: <620B91BA-71BC-11D6-BEBD-0030653DE0D6@jguru.com>
References: <620B91BA-71BC-11D6-BEBD-0030653DE0D6@jguru.com>
Message-ID: <1022548247.30455.10502.camel@catalyst>

On Mon, 2002-05-27 at 17:54, Terence Parr wrote:
> 
> On Monday, May 27, 2002, at 02:39  PM, Braden McDaniel wrote:
> 
> > On Mon, 2002-05-27 at 16:56, Terence Parr wrote:
> >> Folks,
> >>
> >> Added a start of a vrml grammar; see comments on this page:
> >>
> >> http://www.antlr.org/resources.html
> >
> > FYI: I've been using ANTLR in OpenVRML for some time. I haven't bothered
> > to submit a VRML grammar because I rely heavily on semantic predicates
> > for disambiguation:
> >
> > http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/openvrml/openvrml-
> > core/src/OpenVRML/Vrml97Parser.g?rev=1.30&content-
> > type=text/vnd.viewcvs-markup
> >
> > I'm able to use k=1, though. Also, I use a hand-written scanner.
> >
> > The copyright on the file you have appears to be ripped out of the
> > lex/yacc parser SGI contributed. I seriously doubt it is correct in the
> > context of the ANTLR grammar. The VRML97 language authors are actually
> > Gavin Bell, Rikk Carey, and Chris Marrin.
> 
> I wondered about that.  Should I remove that comment?

I think so.

> Shall I just replace the whole thing with your grammar?

Up to you. You are more than welcome to include it on ANTLR's resources
page if you like. I will point out that OpenVRML--and its ANTLR
grammar--are covered by the LGPL, as opposed to being in the public
domain like ANTLR.

-- 
Braden McDaniel                           e-mail: <braden@endoframe.com>
<http://endoframe.com>                    Jabber: <braden@jabber.org>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Tue May 28 00:03:01 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] ANTLR and ANT
In-Reply-To: <acs836+th27@eGroups.com>
Message-ID: <20020528070301.80452.qmail@web14801.mail.yahoo.com>

Hi all,

I wonder if there are people using ANT to build ANTLR files. The existing
task form the optional distribution of ANT has some flaws, when it comes to
determine if the target grammar needs to be recompiled or not. Most
annoying, it is not able to see that imported vocabularies have changed, and
doesn't recompile the grammar. 

I wrote a new ANTLR task, which uses a parser to analyze all dependencies,
and sent it to ant-dev. However, the process of review/adoption is very
slow, ANTLR not being their top priority. If someone is interested, I can
post the patch.

Regards,
Bogdan

__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From brian-l-smith at uiowa.edu  Tue May 28 00:26:51 2002
From: brian-l-smith at uiowa.edu (Brian Smith)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] ANTLR and ANT
References: <20020528070301.80452.qmail@web14801.mail.yahoo.com>
Message-ID: <3CF3313B.8070602@uiowa.edu>

Please do, I will use it for developing my (simple) parsers.

- Brian

Bogdan Mitu wrote:
> Hi all,
> 
> I wonder if there are people using ANT to build ANTLR files. The existing
> task form the optional distribution of ANT has some flaws, when it comes to
> determine if the target grammar needs to be recompiled or not. Most
> annoying, it is not able to see that imported vocabularies have changed, and
> doesn't recompile the grammar. 
> 
> I wrote a new ANTLR task, which uses a parser to analyze all dependencies,
> and sent it to ant-dev. However, the process of review/adoption is very
> slow, ANTLR not being their top priority. If someone is interested, I can
> post the patch.
> 
> Regards,
> Bogdan
> 
> __________________________________________________
> Do You Yahoo!?
> Yahoo! - Official partner of 2002 FIFA World Cup
> http://fifaworldcup.yahoo.com
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Tue May 28 00:45:43 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] ANTLR and ANT
References: <20020528070301.80452.qmail@web14801.mail.yahoo.com>
Message-ID: <00d501c2061b$aef65ca0$0101a8c0@daemon>


Bogdan,

> I wrote a new ANTLR task, which uses a parser to analyze all
> dependencies, and sent it to ant-dev. However, the process of 
> review/adoption is very slow, ANTLR not being their top priority. 
> If someone is interested, I can post the patch.

I've also made some small changes to the ANTLR task from ANT: 
I've added the ability to specify the location of base grammars
from which to inherit using "glib=...", "glib2=...", etc.

I've also added some checking to see if the base grammars are
more recent than the grammar to be processed, so ANTLR
is only activated when really needed. Works fine for me.

In what way do your changes of the ANTLR task solve that problem.
Most noteably, how do you know where the base grammars are
located? In my case they are in several different directories.

Kind greetings, Silvain



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Tue May 28 01:13:42 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] ANTLR and ANT
In-Reply-To: <00d501c2061b$aef65ca0$0101a8c0@daemon>
Message-ID: <20020528081342.89865.qmail@web14801.mail.yahoo.com>

Hi Silvain,

If I remember correctly, glib=..." is a command-line-only option. You
probably added new attributes to the ANTLR task. My modifications don't deal
with supergrammars (in fact I don't use them, I prefer to use literate
programming to produce different variations of a grammar). But your changes
and mine can be merged. To make more clear what modifications I made, here
is a fragment from my post to ant-dev:

>>>
Working with the ANTLR task I saw that it (the ANTLR task) is somehow
limited when it tries to determine if the source grammar is "dirty" or not:

- It considers the output of ANTLR to be one file per grammar, while in fact
there are 2 (or even 3): XxxParser.java, XxxParserTokenTypes.java and
possibly XxxParserTokenTypes.txt. If any of one is missing, the grammar
should be recompiled, which currently happens only for XxxParser.java.

- An ANTLR file can contain more than one grammar (any combination of lexer,
parser and tree parser grammars). Once again, multiple output files, and
each of them missing should trigger the recompilation of the grammar.

- ANTLR grammars can export/import token lists through "vocabulary files" -
XxxTokenTypes.txt. If the imported file is newer than the grammar file, the
grammar should be recompiled to include the correct tokens in generated
code.

The main problem lays in the method getGeneratedFile(), which returns only
one file, while in fact we need two lists of files, ones that are results of
the grammar, and should be *older* than the grammar, and a list of imported
files, which should be *younger* than the grammar file.
<<<

The new task parses the grammar file to determine all generated files and
all imported files, so that it can make a better decision. It doesn't know
anything about supergrammars. And you're right, it should. If you send me
your changes, I will try to incorporate them.

Regards,
Bogdan 


--- Silvain Piree <s.piree@enneya.com> wrote:
> 
> Bogdan,
> 
> > I wrote a new ANTLR task, which uses a parser to analyze all
> > dependencies, and sent it to ant-dev. However, the process of 
> > review/adoption is very slow, ANTLR not being their top priority. 
> > If someone is interested, I can post the patch.
> 
> I've also made some small changes to the ANTLR task from ANT: 
> I've added the ability to specify the location of base grammars
> from which to inherit using "glib=...", "glib2=...", etc.
> 
> I've also added some checking to see if the base grammars are
> more recent than the grammar to be processed, so ANTLR
> is only activated when really needed. Works fine for me.
> 
> In what way do your changes of the ANTLR task solve that problem.
> Most noteably, how do you know where the base grammars are
> located? In my case they are in several different directories.
> 
> Kind greetings, Silvain
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Tue May 28 01:29:27 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] ANTLR and ANT
References: <20020528081342.89865.qmail@web14801.mail.yahoo.com>
Message-ID: <00e901c20621$c9012ca0$0101a8c0@daemon>

Attached you'll find the patched ANTLR task for ANT.
It's a quick&dirty solution which adds attributes "glib", "glib2" and
"glib3", but it gets the job done.

Silvain

----- Original Message -----
From: "Bogdan Mitu" <bogdan_mt@yahoo.com>
To: <antlr-interest@yahoogroups.com>
Sent: Tuesday, May 28, 2002 10:13 AM
Subject: Re: [antlr-interest] ANTLR and ANT


> Hi Silvain,
>
> If I remember correctly, glib=..." is a command-line-only option. You
> probably added new attributes to the ANTLR task. My modifications don't
deal
> with supergrammars (in fact I don't use them, I prefer to use literate
> programming to produce different variations of a grammar). But your
changes
> and mine can be merged. To make more clear what modifications I made, here
> is a fragment from my post to ant-dev:
>
> >>>
> Working with the ANTLR task I saw that it (the ANTLR task) is somehow
> limited when it tries to determine if the source grammar is "dirty" or
not:
>
> - It considers the output of ANTLR to be one file per grammar, while in
fact
> there are 2 (or even 3): XxxParser.java, XxxParserTokenTypes.java and
> possibly XxxParserTokenTypes.txt. If any of one is missing, the grammar
> should be recompiled, which currently happens only for XxxParser.java.
>
> - An ANTLR file can contain more than one grammar (any combination of
lexer,
> parser and tree parser grammars). Once again, multiple output files, and
> each of them missing should trigger the recompilation of the grammar.
>
> - ANTLR grammars can export/import token lists through "vocabulary
files" -
> XxxTokenTypes.txt. If the imported file is newer than the grammar file,
the
> grammar should be recompiled to include the correct tokens in generated
> code.
>
> The main problem lays in the method getGeneratedFile(), which returns only
> one file, while in fact we need two lists of files, ones that are results
of
> the grammar, and should be *older* than the grammar, and a list of
imported
> files, which should be *younger* than the grammar file.
> <<<
>
> The new task parses the grammar file to determine all generated files and
> all imported files, so that it can make a better decision. It doesn't know
> anything about supergrammars. And you're right, it should. If you send me
> your changes, I will try to incorporate them.
>
> Regards,
> Bogdan
>
>
> --- Silvain Piree <s.piree@enneya.com> wrote:
> >
> > Bogdan,
> >
> > > I wrote a new ANTLR task, which uses a parser to analyze all
> > > dependencies, and sent it to ant-dev. However, the process of
> > > review/adoption is very slow, ANTLR not being their top priority.
> > > If someone is interested, I can post the patch.
> >
> > I've also made some small changes to the ANTLR task from ANT:
> > I've added the ability to specify the location of base grammars
> > from which to inherit using "glib=...", "glib2=...", etc.
> >
> > I've also added some checking to see if the base grammars are
> > more recent than the grammar to be processed, so ANTLR
> > is only activated when really needed. Works fine for me.
> >
> > In what way do your changes of the ANTLR task solve that problem.
> > Most noteably, how do you know where the base grammars are
> > located? In my case they are in several different directories.
> >
> > Kind greetings, Silvain
> >
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/
> >
> >
> >
>
>
> __________________________________________________
> Do You Yahoo!?
> Yahoo! - Official partner of 2002 FIFA World Cup
> http://fifaworldcup.yahoo.com
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: ANTLR.java
Type: application/octet-stream
Size: 7760 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20020528/be37edf0/ANTLR.obj
From bogdan_mt at yahoo.com  Tue May 28 02:20:16 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] ANTLR and ANT
In-Reply-To: <00e901c20621$c9012ca0$0101a8c0@daemon>
Message-ID: <20020528092016.20446.qmail@web14804.mail.yahoo.com>


--- Silvain Piree <s.piree@enneya.com> wrote:
> Attached you'll find the patched ANTLR task for ANT.
> It's a quick&dirty solution which adds attributes "glib", "glib2" and
> "glib3", but it gets the job done.
> 
> Silvain

I will include these. Thanks.

Bogdan

> ----- Original Message -----
> From: "Bogdan Mitu" <bogdan_mt@yahoo.com>
> To: <antlr-interest@yahoogroups.com>
> Sent: Tuesday, May 28, 2002 10:13 AM
> Subject: Re: [antlr-interest] ANTLR and ANT
> 
> 
> > Hi Silvain,
> >
> > If I remember correctly, glib=..." is a command-line-only option. You
> > probably added new attributes to the ANTLR task. My modifications don't
> deal
> > with supergrammars (in fact I don't use them, I prefer to use literate
> > programming to produce different variations of a grammar). But your
> changes
> > and mine can be merged. To make more clear what modifications I made,
> here
> > is a fragment from my post to ant-dev:
> >
> > >>>
> > Working with the ANTLR task I saw that it (the ANTLR task) is somehow
> > limited when it tries to determine if the source grammar is "dirty" or
> not:
> >
> > - It considers the output of ANTLR to be one file per grammar, while in
> fact
> > there are 2 (or even 3): XxxParser.java, XxxParserTokenTypes.java and
> > possibly XxxParserTokenTypes.txt. If any of one is missing, the grammar
> > should be recompiled, which currently happens only for XxxParser.java.
> >
> > - An ANTLR file can contain more than one grammar (any combination of
> lexer,
> > parser and tree parser grammars). Once again, multiple output files, and
> > each of them missing should trigger the recompilation of the grammar.
> >
> > - ANTLR grammars can export/import token lists through "vocabulary
> files" -
> > XxxTokenTypes.txt. If the imported file is newer than the grammar file,
> the
> > grammar should be recompiled to include the correct tokens in generated
> > code.
> >
> > The main problem lays in the method getGeneratedFile(), which returns
> only
> > one file, while in fact we need two lists of files, ones that are
> results
> of
> > the grammar, and should be *older* than the grammar, and a list of
> imported
> > files, which should be *younger* than the grammar file.
> > <<<
> >
> > The new task parses the grammar file to determine all generated files
> and
> > all imported files, so that it can make a better decision. It doesn't
> know
> > anything about supergrammars. And you're right, it should. If you send
> me
> > your changes, I will try to incorporate them.
> >
> > Regards,
> > Bogdan
> >
> >
> > --- Silvain Piree <s.piree@enneya.com> wrote:
> > >
> > > Bogdan,
> > >
> > > > I wrote a new ANTLR task, which uses a parser to analyze all
> > > > dependencies, and sent it to ant-dev. However, the process of
> > > > review/adoption is very slow, ANTLR not being their top priority.
> > > > If someone is interested, I can post the patch.
> > >
> > > I've also made some small changes to the ANTLR task from ANT:
> > > I've added the ability to specify the location of base grammars
> > > from which to inherit using "glib=...", "glib2=...", etc.
> > >
> > > I've also added some checking to see if the base grammars are
> > > more recent than the grammar to be processed, so ANTLR
> > > is only activated when really needed. Works fine for me.
> > >
> > > In what way do your changes of the ANTLR task solve that problem.
> > > Most noteably, how do you know where the base grammars are
> > > located? In my case they are in several different directories.
> > >
> > > Kind greetings, Silvain
> > >
> > >
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
> > >
> > >
> > >
> >
> >
> > __________________________________________________
> > Do You Yahoo!?
> > Yahoo! - Official partner of 2002 FIFA World Cup
> > http://fifaworldcup.yahoo.com
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
> >
> >
> >
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 

> ATTACHMENT part 2 application/octet-stream name=ANTLR.java



__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sachin_sawant10 at yahoo.com  Tue May 28 03:10:22 2002
From: sachin_sawant10 at yahoo.com (sachin_sawant10)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] How do I get rid of "unexpected token:null" error
Message-ID: <acvl2e+a0pt@eGroups.com>

I am using following grammer to parse JSP file. I want to read 
<i18n:img tags from the jsp page.

My grammer ---

class JSPParser extends Parser;

file:   (statement)+ 
	;

statement: (   WORD
             | STRING
	     | i:IMG {System.out.println("IMG Tag " + i.getText());}
      )
	;


class JSPLexer extends Lexer;
options {
	caseSensitive=false;
	k=7;
	filter=SCARF;
	charVocabulary='\3'..'\177';
}


IMG    
        :      	"<i18n:img" 
		(WS (ATTR)*)?       
		"/>"		
	;


protected
ATTR
options {
	ignore=WS;
}
	:	w:WORD '='
		(	s:STRING
		|	v:WORD
		)
	;

/** Match until next whitespace; can be file, int, etc... */
protected
WORD:	(
			options {
				generateAmbigWarnings=false;
			}
		:	'a'..'z' | '0'..'9' | '/' | '.' | '#' | '_'
		)+
	;

protected
STRING
	:	'"' (~'"')* '"'
	|	'\'' (~'\'')* '\''
	;


protected
WS	:	(	' '
		|	'\t'
		|	'\f'
		|	(	"\r\n"  // DOS
			|	'\r'    // Macintosh
			|	'\n'    // Unix (the right way)
			)
			{ newline(); }
		)
		
	;

protected
SCARF
	:	WS	// track line numbers while you scarf
	|	.
	;
-----------------------end of grammer --------------------------------

When I used the above grammer with any jsp files which does not 
have "<i18n:img" tag I get "unexpected token:null" error.  I also get 
the error when I use empty file as an input.

How do I get rid of it?

Regards

Sachin 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ericsmith at windsor.com  Tue May 28 03:49:17 2002
From: ericsmith at windsor.com (Smith, Eric V.)
Date: Mon Dec 20 16:14:49 2004
Subject: [antlr-interest] ANTLR and ANT
Message-ID: <1D532F5C75B30A46A78D5107B635DF8906F4A5@edzell.windsor.com>

While I'm not using ANT, I am using NANT[1] which has similar issues.
I'd be interested in seeing your code.

Thanks.

Eric.

[1] http://nant.sourceforge.net

> -----Original Message-----
> From: Bogdan Mitu [mailto:bogdan_mt@yahoo.com] 
> Sent: Tuesday, May 28, 2002 3:03 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] ANTLR and ANT
> 
> 
> Hi all,
> 
> I wonder if there are people using ANT to build ANTLR files. 
> The existing task form the optional distribution of ANT has 
> some flaws, when it comes to determine if the target grammar 
> needs to be recompiled or not. Most annoying, it is not able 
> to see that imported vocabularies have changed, and doesn't 
> recompile the grammar. 
> 
> I wrote a new ANTLR task, which uses a parser to analyze all 
> dependencies, and sent it to ant-dev. However, the process of 
> review/adoption is very slow, ANTLR not being their top 
> priority. If someone is interested, I can post the patch.
> 
> Regards,
> Bogdan
> 
> __________________________________________________
> Do You Yahoo!?
> Yahoo! - Official partner of 2002 FIFA World Cup 
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Tue May 28 04:25:04 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] ANT1.5.1b patch for ANTLR
In-Reply-To: <3CF3313B.8070602@uiowa.edu>
Message-ID: <20020528112504.15798.qmail@web14803.mail.yahoo.com>

Here is the patch that I send to ant-dev. Note that is is based on ANT
1.5.1beta and probably will not work with previous versions. I will post a
new patch for ANT 1.4 on this list, but it may take some time.

Bogdan

--- Brian Smith <brian-l-smith@uiowa.edu> wrote:
> Please do, I will use it for developing my (simple) parsers.
> 
> - Brian
>
> Bogdan Mitu wrote:
> > Hi all,
> > 
> > I wonder if there are people using ANT to build ANTLR files. The
> existing
> > task form the optional distribution of ANT has some flaws, when it comes
> to
> > determine if the target grammar needs to be recompiled or not. Most
> > annoying, it is not able to see that imported vocabularies have changed,
> and
> > doesn't recompile the grammar. 
> > 
> > I wrote a new ANTLR task, which uses a parser to analyze all
> dependencies,
> > and sent it to ant-dev. However, the process of review/adoption is very
> > slow, ANTLR not being their top priority. If someone is interested, I
> can
> > post the patch.
> > 
> > Regards,
> > Bogdan
> > 
> > __________________________________________________
> > Do You Yahoo!?
> > Yahoo! - Official partner of 2002 FIFA World Cup
> > http://fifaworldcup.yahoo.com
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> > 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com
 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: antlr_patch.zip
Type: application/x-zip-compressed
Size: 59236 bytes
Desc: antlr_patch.zip
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20020528/f2bf6d59/antlr_patch.bin
From mzukowski at yci.com  Tue May 28 06:43:16 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: Why is this nondeterministic?
Message-ID: <170826586F3BD511910D0200C110AAA8032B498F@memail03.bco-home.com>

Antlr lexers never know what is coming next and don't preserve state between
calls to nextToken().  You can get around this somewhat with multiple
lexers, but I don't see any advantage using that for this problem.  

In your case you could get by with putting the rules together and changing
the token type.  That way antlr looking ahead to the next token won't get
confused.

REGULAR: (REGULAR_BIT)+;
protected SPECIAL: 'a' 'b';

protected
REGULAR_BIT:
    ('b' | 'c')
|   ('a' 'a')
|   ('a' 'c')
|   SPECIAL {$setType(SPECIAL);}
;

Monty

> -----Original Message-----
> From: danfuzz [mailto:danfuzz@milk.com]
> Sent: Monday, May 27, 2002 3:00 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: Why is this nondeterministic?
> 
> 
> Terence writes:
> >The problem is that 'a' 'b' can start both REGULAR (via REGULAR_BIT) 
> >and SPECIAL.  The lexer, given "ab" input would not know which token 
> >to make.  This is an ambiguous grammar, which implies that it is 
> >also nondeterministic.
> 
> Thanks for the quick reply. I'm still confused, though. I thought I
> defined things such that REGULAR *can't* start with 'a' 'b'
> (given that REGULAR_BIT matches 'a' 'a' and 'a' 'c' but not
> 'a' 'b').
> 
> My intent is for the lexer to return alternating tokens of
> REGULAR or SPECIAL, where the text of REGULAR is a run of 'b's and 
> 'c's interspersed with "aa" and "ac" pairs (that is, 
> "(b|c|aa|ac)*" in regex terms), and where the text of SPECIAL is 
> always "ab".
> 
> Is it possible to say this with ANTLR? I noticed that, without
> REGULAR being a closure (that is, saying just "REGULAR: 
> REGULAR_BIT;") that the grammar compiles without complaint, so my
> current workaround is to accumulate the REGULAR string  outside the 
> lexer.
> 
> -dan
> 
> #####
> 
> Recap:
> 
> REGULAR: (REGULAR_BIT)+;
> SPECIAL: 'a' 'b';
> 
> protected
> REGULAR_BIT:
>     ('b' | 'c')
> |   ('a' 'a')
> |   ('a' 'c')
> ;
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From glindholm at yahoo.com  Tue May 28 07:53:54 2002
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] How do I get rid of "unexpected token:null" error
In-Reply-To: <acvl2e+a0pt@eGroups.com>
Message-ID: <20020528145354.28431.qmail@web12401.mail.yahoo.com>

I believe the problem is all your lexer rules expect IMG are protected.
Protected lexer rules do not return tokens.

Your parser statement rule wants to see WORD and STRING tokens so you
need to make these rules un-protected.

Greg
--- sachin_sawant10 <sachin_sawant10@yahoo.com> wrote:
> I am using following grammer to parse JSP file. I want to read 
> <i18n:img tags from the jsp page.
> 
> My grammer ---
> 
> class JSPParser extends Parser;
> 
> file:   (statement)+ 
> 	;
> 
> statement: (   WORD
>              | STRING
> 	     | i:IMG {System.out.println("IMG Tag " + i.getText());}
>       )
> 	;
> 
> 
> class JSPLexer extends Lexer;
> options {
> 	caseSensitive=false;
> 	k=7;
> 	filter=SCARF;
> 	charVocabulary='\3'..'\177';
> }
> 
> 
> IMG    
>         :      	"<i18n:img" 
> 		(WS (ATTR)*)?       
> 		"/>"		
> 	;
> 
> 
> protected
> ATTR
> options {
> 	ignore=WS;
> }
> 	:	w:WORD '='
> 		(	s:STRING
> 		|	v:WORD
> 		)
> 	;
> 
> /** Match until next whitespace; can be file, int, etc... */
> protected
> WORD:	(
> 			options {
> 				generateAmbigWarnings=false;
> 			}
> 		:	'a'..'z' | '0'..'9' | '/' | '.' | '#' | '_'
> 		)+
> 	;
> 
> protected
> STRING
> 	:	'"' (~'"')* '"'
> 	|	'\'' (~'\'')* '\''
> 	;
> 
> 
> protected
> WS	:	(	' '
> 		|	'\t'
> 		|	'\f'
> 		|	(	"\r\n"  // DOS
> 			|	'\r'    // Macintosh
> 			|	'\n'    // Unix (the right way)
> 			)
> 			{ newline(); }
> 		)
> 		
> 	;
> 
> protected
> SCARF
> 	:	WS	// track line numbers while you scarf
> 	|	.
> 	;
> -----------------------end of grammer
> --------------------------------
> 
> When I used the above grammer with any jsp files which does not 
> have "<i18n:img" tag I get "unexpected token:null" error.  I also get
> 
> the error when I use empty file as an input.
> 
> How do I get rid of it?
> 
> Regards
> 
> Sachin 
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Tue May 28 10:23:17 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Strange character Recognition.
Message-ID: <6791D870658F174FB863E2FA890000A37DCCEA@abyss4.advancedsw.com>

I have the following same code that is not parsing correctly.

public class DynAnyUtil
{
    static Any createDefaultAnyOfType(TypeCode typeCode, ORB orb) 
    {
        // The spec for DynAny differs from Any on initialization via type 
        // * false for boolean
        // * zero for numeric types
        // * zero for types octet, char, and wchar
        // * the empty string for string and wstring
        // * nil for object references
        // * a type code with a TCKind value of tk_null for type codes
        // * for Any values, an Any containing a type code with a TCKind
//   type and no value        
    }
}

Notice the dots.  They are not part of the standard ascii character set.
When I try to parse this file using the java.g that is shipped in the CPP
examples I get the error message :"unexpected char *".  I have the
charVocabulary set to charVocabulary = '\3'..'\377'.

Anybody have any ideas.  The file that I am trying to parse is shipped with
JDK 1.4.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Tue May 28 13:41:21 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: vocabulary (token) import and export
In-Reply-To: <20020523093112.C761@cs.utwente.nl>
Message-ID: <ad0q1h+olpp@eGroups.com>

Heh.  Worked like a charm.  And now I'm wondering why I didn't think 
of that in the first place.  Duh.

Thanks!
JSRS

--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:
> > Well, I'm running into vocab hell from this.
> 
> Use the FAQ luke:
> 
> http://www.jguru.com/faq/view.jsp?EID=531842
> 
> Ric
> -- 
> -----
+++++*****************************************************+++++++++---
----
>     ---- Ric Klaren ----- klaren@c... ----- +31 53 4893722  ----
> -----
+++++*****************************************************+++++++++---
----
>  Why don't we just invite them to dinner and massacre them all when 
they're
>   drunk? You heard the man. There's seven hundred thousand of them. 
Ah? ..
>            So it'd have to be something simple with pasta, then.
>                  From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From oobles at hotmail.com  Tue May 28 21:48:53 2002
From: oobles at hotmail.com (ooobles)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] charVocabulary problem solved. :)
Message-ID: <ad1mjl+8lv3@eGroups.com>


Hi Again..

I took Bogden's idea of using the = as part of the token.  Thanks.. 
great example of looking outside the square.  I ended up with a 
couple of rules with one of them like this..

EMAIL	:	'='! '<' ( options {greedy=false;} : . )* '>'
	;

Running a few tests through the parser I came across the following 
error:

antlr.TokenStreamRecognitionException: expecting '>', found 'u'

on the following line:

smtp[1622]: 121 Statistics: duration=0.74 user=<bugtraq-return-4852-
stewart=websecure.com.au@securityfocus.com> id=H8zI sent=4571 
rcvd=347 srcif=eth1 src=10.0.0.23/3363 cldst=10.0.0.2/25 
svsrc=192.168.42.251/4329 dstif=eth0 dst=192.168.42.250/25 op="To 1 
recips" arg=<F112nx5uGlshK8YeQVY0001437e@hotmail.com> result="250 OK" 
proto=smtp rule=12

I've tracked this down to the @ symbol in the 'user' value.  Can 
anyone explain why it should fail?  I have k=2.  The code antlr 
produced for the above rule follows.  The only spot I can see that 
this function could return is on the _tokenSet_1.member(LA(2)) call.

............................................ ding!

I just found my answer.  Amazing what thinking through a problem 
does.  I'll post it anyway just for anyone else who comes across the 
problem.

This has to do with the charVocabulary option.  Antlr only matches 
the characters used in the lexer.  This is what _tokenSet_1 is.. a 
list of valid characters.  For the lexer to recognise the general 
eight-bit character set I need to add charVocabulary = '\3'..'\377';

Just tested and it works.

Thanks!
David.






 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bals1978 at hotmail.com  Wed May 29 00:20:17 2002
From: bals1978 at hotmail.com (Balvinder Singh)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] COBOL
Message-ID: <F216JXOxJagXTi8M19V000005c2@hotmail.com>



Hi all,

   I'm writing cobol parser only for WORKING STORAGE AREA of data division. 
I'm using grammar rule and lexical rule for WORKING STORAGE AREA from VS 
COBOL II (http://adam.wins.uva.nl/~x/grammars/vs-cobol-ii/)

I have converted lexical rule to ANTLR format, but I'm getting conflicts for 
some of the rules, rules are as follows :


Literal : NonNumeric | Numeric
        ;

protected
NonNumeric : '"' ( (~'"') | '"' '"' )* '"'
           | '\'' ( (~'\'') | '\'' '\'')* '\''
           | ('X' 'x') '"' HexDigits '"'
           | ('X' 'x') '\'' HexDigits '\''
           ;

AphabeticUserDefinedWord : (('0'.. '9')+ ('-')*)* ('0' .. '9')* ('A' .. 
'Z' 'a' .. 'z') ('A' .. 'Z' 'a' .. 'z' '0' .. '9')* (('-')+ ('A' .. 'Z' 'a' 
.. 'z' '0' .. '9')+)*
                          ;
protected
Numeric : ('+' '-')?(('0' .. '9')* '.' ('0' .. '9')+ | ('0' .. '9')+)
        ;

protected
HexDigits : ('0' .. '9' 'A' .. 'F' 'a' .. 'f')+
          ;

PictureString : (Currency)? ((PicChar)+ (Repeat)?)+ (Punctuation ((PicChar)+ 
(Repeat)?)+)*
              ;

protected
Currency : ~('0' .. '9' | 'A' | 'B' | 'C' | 'D' | 'P' | 'R' | 'S' | 'V' | 
'X' |
'Z' | 'a' .. 'z' | '*' | '+' | '-' | '/' | ',' | '.' | ';' | '(' | ')' | '=' 
|
'\'' | '"' | '\n')
         ;

protected
PicChar : ('A' 'B' 'E' 'G' 'P' 'S' 'V' 'X' 'Z' 'a' 'b' 'e' 'g' 'p' 's' 'v' 
'x'
'z' '9' '0' '+' '-' '*' '$')
        | 'C' 'R'
        | 'D' 'B'
        ;

protected
Repeat : '(' ('0' .. '9')+ ')'
       ;

protected
Punctuation : ('/' ',' '.' ':')
            ;

LevelNumber : ('0')? ('1' .. '9')
            | ('1' .. '4') ('0' .. '9')
            | "66"
            | "77"
            | "88"
            ;

So conflicts are in AphabeticUserDefinedWord and NonNumeric.

can't we get some context from parsing rule and give it as input parameter 
to lexical rule or I have to change lexical rule.

can someone explain me with example .


balvinder




_________________________________________________________________
MSN Photos is the easiest way to share and print your photos: 
http://photos.msn.com/support/worldwide.aspx


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Wed May 29 00:51:59 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] COBOL
References: <F216JXOxJagXTi8M19V000005c2@hotmail.com>
Message-ID: <00b101c206e5$b6c9c870$0101a8c0@daemon>


Balvinder,

>  I'm writing cobol parser only for WORKING STORAGE AREA
> of data division. I'm using grammar rule and lexical rule for 
> WORKING STORAGE AREA from VS COBOL II 
> (http://adam.wins.uva.nl/~x/grammars/vs-cobol-ii/)

The Cobol grammar you are refering to was implemented using
the parser-generator from the University of Amsterdam which
is a "generalized LR" parser generator.

This GLR parser doesn't use a separate lexer for tokenizing the
way ANTLR does. If you want to use ANTLR then you need
a different solution, i.e. define tokens like identifier, integer, float, 
etc. and grammar rules like: 

    working_storage: "working" "storage" (data_definition)* ;
    data_definition: level_number data_name;
    level_numer: TOKEN_INTEGER ;
    data_name: TOKEN_IDENTIFIER ;

Hope this helps a bit, good luck, Silvain

p.s. you will probably need a separate lexer to tokenize the picture
      clause, which has different syntactic rules.
p.s. also, you'll need to find a solution for the missing period after a
      data definition, which is allowed by the ibm cobol compiler, but
      is not part of the official language specification.
p.s. and how do you intend to support the COPY statements in the
      working storage section?



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From kjell at oops.se  Wed May 29 05:49:10 2002
From: kjell at oops.se (Kjell Nilsson)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Can I get rid of these warnings?
In-Reply-To: <acvl2e+a0pt@eGroups.com>
Message-ID: <78C100AA-7302-11D6-95A5-0003930FD0FA@oops.se>

I have a grammar that generates some sort of a calulator. There are some
functions in the calculator that i have java functions to resolve.


The function sum(foo, ../bar) is resolved like this
line 273-275
	|	#(SUM s1:expr s2:expr)          {r = 
calculateSum(s1.getText(),s2.getText());}
	| 	KEYIDSTRING  	                {r = 
lookupKeyString(expr_AST_in.getText());}
	| 	RELATIVEKEYIDSTRING             {r = 
lookupRelativeKeyString(expr_AST_in.getText());}

but here I get this warning

ParserGenerator/AntCalc.g:273: warning:Rule 'expr' returns a value
ParserGenerator/AntCalc.g:273: warning:Rule 'expr' returns a value

The generated code works fine so I think I can be safe to use it  but is 
there an easy way to
avoid them.

Thanks for any hints
--kjell




The grammar looks like this


header {
package se.oops.o2.infospace.data;
import java.math.*;
import java.io.*;
import com.webobjects.foundation.*;
import se.oops.o2.infospace.util.*;
}

class CalcParser extends Parser;
options {
	codeGenMakeSwitchThreshold = 3;
	codeGenBitsetTestThreshold = 4;
	buildAST=true;
	ASTLabelType = "antlr.CommonAST";
}

calculate: assignExpr SEMI! ;

assignExpr: multExpr (
     pm: (PLUS^ | MINUS^)
     me: multExpr
     exception catch [ RecognitionException ex ] {
                     System.out.println("Caught error in assignExpr");
                     reportError(ex.toString());
     } )* ;

multExpr: postfixExpr ( ( MULT^ | DIV^ | MOD^ | UP^) postfixExpr )* ;

postfixExpr: absFunc | acosFunc | asinFunc | atanFunc | cosFunc | expFunc
              | invFunc | logFunc | sinFunc | sqrtFunc | tanFunc | powFunc
              | sqrFunc | cubeFunc | maxFunc | minFunc | decFunc | 
calculateSum | atom ;

absFunc: ABS^ LPAREN! assignExpr RPAREN! ;
acosFunc: ACOS^ LPAREN! assignExpr RPAREN! ;
asinFunc: ASIN^ LPAREN! assignExpr RPAREN! ;
atanFunc: ATAN^ LPAREN! assignExpr RPAREN! ;
cosFunc: COS^ LPAREN! assignExpr RPAREN! ;
expFunc: EXP^ LPAREN! assignExpr RPAREN! ;
invFunc: INV^ LPAREN! assignExpr RPAREN! ;
logFunc: LOG^ LPAREN! assignExpr RPAREN! ;
sinFunc: SIN^ LPAREN! assignExpr RPAREN! ;
sqrtFunc: SQRT^ LPAREN! assignExpr RPAREN! ;
tanFunc: TAN^ LPAREN! assignExpr RPAREN! ;
sqrFunc: SQR^ LPAREN! assignExpr RPAREN! ;
cubeFunc: CUBE^ LPAREN! assignExpr RPAREN! ;
powFunc: POW^ LPAREN! assignExpr COMMA! assignExpr RPAREN! ;
maxFunc: MAX^ LPAREN! assignExpr COMMA! assignExpr RPAREN! ;
minFunc: MIN^ LPAREN! assignExpr COMMA! assignExpr RPAREN! ;
decFunc: DEC^ LPAREN! assignExpr COMMA! unsignedInteger COMMA! 
unsignedInteger RPAREN! ;
calculateSum: SUM^ LPAREN! KEYIDSTRING COMMA! RELATIVEKEYIDSTRING 
RPAREN! ;
atom: signedNumber | ID | EEE | PI | LPAREN! assignExpr RPAREN! | 
variable;

variable: KEYIDSTRING | RELATIVEKEYIDSTRING;
signedNumber: unsignedNumber | MINUS^ unsignedNumber;
unsignedNumber: unsignedInteger | unsignedReal ;
unsignedInteger: NUM_INT ;
unsignedReal: NUM_REAL ;

dummy: DOT | DOTDOT ;

//////////////////////////////////////////////////////////////////////////
/

class CalcLexer extends Lexer;

options {
   k=2;
   caseSensitive = true;
   caseSensitiveLiterals = true;
}

tokens {
     SUM = "sum";
     VAR = "var" ;
     ABS = "abs" ;
     ACOS = "acos" ;
     ASIN = "asin" ;
     ATAN = "atan" ;
     COS = "cos" ;
     EXP = "exp" ;
     INV = "inv" ;
     LOG = "log" ;
     SIN = "sin" ;
     SQRT = "sqrt" ;
     TAN = "tan" ;
     SQR = "sqr" ;
     CUBE = "cube" ;
     POW = "pow";
     MAX = "max";
     MIN = "min";
     DEC = "dec";
     EEE = "E" ;
     PI = "pi" ;
}

WS: (' ' |'\t' | '\n' | '\r') { _ttype = Token.SKIP; } ;

ID	options { testLiterals = true; }
	: ('a'..'z'|'A'..'Z'|'_') (ID_CHAR)* ;

protected
DIGIT		: '0'..'9';

protected
ID_CHAR		: 'a'..'z' | 'A'..'Z' |'_' | DIGIT ;

protected
ID_PART		: (ID_CHAR)+ ( '.' (ID_CHAR)+)* '@' (DIGIT)+ ;

KEYIDSTRING	: '#' ID_PART ('/' ID_PART)* ;

RELATIVEKEYIDSTRING	: '.' ('.')? '/' ID_PART ('/' ID_PART)* ;

NUM_INT
	{boolean isDecimal=false;}
	:         (	'0' {isDecimal = true;} // special case for just '0'
		|	('1'..'9') ('0'..'9')*  {isDecimal=true;} // non-zero decimal
		)
		// only check to see if it's a float if looks like decimal so far
		(	{ LA(2)!='.' && LA(3)!='.' && isDecimal}?
			(	'.' ('0'..'9')* (EXPONENT)?
			|	EXPONENT
			)
			{ _ttype = NUM_REAL; }
		)?
	;

LPAREN:	'(' ;
RPAREN:	')' ;
MINUS: 	'-' ;
PLUS:	'+' ;
MULT: 	'*' ;
DIV:	'/' ;
MOD:	'%' ;
UP:	'^' ;
COMMA: 	',' ;
SEMI:	';' ;


// a couple protected methods to assist in matching floating point 
numbers
protected
EXPONENT
	:	('e') ('+'|'-')? ('0'..'9')+
	;

//////////////////////////////////////////////////////////////////////////
/

class CalcTreeWalker extends TreeParser;

{

     ////////// Start special 
functions ///////////////////////////////////////////

	public String answer;
	public Object delegate;

	public String answer() {
		return answer;
	}

	public void setAnswer(String value) {
		answer = value;
		if (delegate != null) {
			Object[] keys = { "Sender" };
			Object[] objects = { this };
			NSDictionary dict = new NSDictionary(objects, keys);
			try {
				//Object result = 
DelegateUtility.performMethodWithDelegate("parserDidAnswer", delegate, 
dict);
			} catch (Exception ex) {
			}
		}
	}

	public Object delegate() {
		return delegate;
	}

	public void setDelegate(Object value) {
		delegate = value;
	}

	public double lookupKeyString(String string) {
		String result = "0";
System.out.println("lookupKeyString: " + string);
             if(true) return 8.0;
		if (delegate() != null) {
			Object[] keys = { "Sender" , "KeyString" };
			Object[] objects = { this , string };
			NSDictionary dict = new NSDictionary(objects, keys);
			try {
			//result = (String) 
DelegateUtility.performMethodWithDelegate("parserWantsValueForKeyString", 
delegate, dict);
			} catch (Exception ex) {
			}
		}
		return new BigDecimal(result).doubleValue();
	}

	public double lookupRelativeKeyString(String string) {
		String result = "0";
System.out.println("lookupRelativeKeyString: " + string);
             if(true) return 7.0;
		if (delegate() != null) {
			Object[] keys = { "Sender" , "KeyString" };
			Object[] objects = { this , string };
			NSDictionary dict = new NSDictionary(objects, keys);
			try {
			//result = (String) 
DelegateUtility.performMethodWithDelegate("parserWantsValueForRelativeKeyString"
, delegate, dict);
			} catch (Exception ex) {
			}
		}
		return new BigDecimal(result).doubleValue();
	}

	public double calculateSum(String repetitionKeyString, String 
relativeKeyString) {
		String result = "0";
System.out.println("rep: \"" + repetitionKeyString + "\" rel: \"" + 
relativeKeyString + "\"");
if(true) return 47.0;
		if (delegate() != null) {
			Object[] keys = { "Sender", "RepetitionKeyString", 
"RelativeKeyString" };
			Object[] objects = { this, repetitionKeyString, relativeKeyString };
			NSDictionary dict = new NSDictionary(objects, keys);

			try {
				//result = (String) 
DelegateUtility.performMethodWithDelegate("parserWantsCalculatedSum", 
delegate, dict);
			} catch (Exception ex) {
			}
		}
		return new BigDecimal(result).doubleValue();
	}

	public double functionDec(double value, double decimals, double 
rounding) {
		BigDecimal result = new BigDecimal(value);
		if (rounding < 0 || rounding > 6) rounding = 
BigDecimal.ROUND_HALF_DOWN;
		if (decimals < 0) decimals = 0;
		result = result.setScale((int)decimals, (int)rounding);
		return result.doubleValue();
	}

     ////////// End special 
functions ///////////////////////////////////////////

}



expr returns [double r]
{
	double a,b,c;
	r=0;
}
	:	#(PLUS a=expr b=expr)		{r = a+b;}
         |	(#(MINUS expr expr))=> #(MINUS a=expr b=expr) {r = a-b;} | 
#(MINUS a=expr) {r = -a;}	
	|	#(MULT a=expr b=expr)		{r = a*b;}
	|	#(DIV a=expr b=expr)		{r = a/b;}
	|	#(MOD a=expr b=expr)		{r = a%b;}
	|	#(UP a=expr b=expr)		{r = Math.pow(a,b);}
	|	#(ABS a=expr)			{r = Math.abs(a);}
	|	#(ACOS a=expr)			{r = Math.acos(a);}
	|	#(ASIN a=expr)			{r = Math.asin(a);}
	|	#(ATAN a=expr)			{r = Math.atan(a);}
	|	#(COS a=expr)			{r = Math.cos(a);}
	|	#(EXP a=expr)			{r = Math.exp(a);}
	|	#(INV a=expr)			{r = 1/a;}
	|	#(LOG a=expr)			{r = Math.log(a);}
	|	#(SIN a=expr)			{r = Math.sin(a);}
	|	#(SQRT a=expr)			{r = Math.sqrt(a);}
	|	#(TAN a=expr)			{r = Math.tan(a);}
	|	#(SQR a=expr)			{r = a*a;}
	|	#(CUBE a=expr)			{r = a*a*a;}
	|	#(POW a=expr b=expr)		{r = Math.pow(a,b);}
	|	#(MAX a=expr b=expr)		{r = Math.max(a,b);}
	|	#(MIN a=expr b=expr)		{r = Math.min(a,b);}
	|	#(DEC a=expr b=expr c=expr)	{r = functionDec(a,b,c);}
	|	#(SUM s1:expr s2:expr)          {r = 
calculateSum(s1.getText(),s2.getText());}
	| 	KEYIDSTRING  	                {r = 
lookupKeyString(expr_AST_in.getText());}
	| 	RELATIVEKEYIDSTRING             {r = 
lookupRelativeKeyString(expr_AST_in.getText());}
	|	EEE				{r = Math.E;}
	|	PI				{r = Math.PI;}
	|	ni: NUM_INT			{r = (double)Double.parseDouble(ni.getText());}
	|	nr: NUM_REAL		        {r = (double)Double.parseDouble(nr.getText());}
	;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/enriched
Size: 9231 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20020529/40cd6b40/attachment.bin
From s.piree at enneya.com  Wed May 29 05:58:18 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Can I get rid of these warnings?
References: <78C100AA-7302-11D6-95A5-0003930FD0FA@oops.se>
Message-ID: <001601c20710$825f73c0$0101a8c0@daemon>

You've probably specified something like:

expr
    returns [something]
    : ..... 
    ;

Just remove the returns [...] clause and you're problem is gone.

Silvain
  ----- Original Message ----- 
  From: Kjell Nilsson 
  To: antlr-interest@yahoogroups.com 
  Sent: Wednesday, May 29, 2002 2:49 PM
  Subject: [antlr-interest] Can I get rid of these warnings?


  I have a grammar that generates some sort of a calulator. There are some 
  functions in the calculator that i have java functions to resolve. 


  The function sum(foo, ../bar) is resolved like this
  line 273-275
  | #(SUM s1:expr s2:expr) {r = calculateSum(s1.getText(),s2.getText());}
  | KEYIDSTRING {r = lookupKeyString(expr_AST_in.getText());}
  | RELATIVEKEYIDSTRING {r = lookupRelativeKeyString(expr_AST_in.getText());}

  but here I get this warning

  ParserGenerator/AntCalc.g:273: warning:Rule 'expr' returns a value
  ParserGenerator/AntCalc.g:273: warning:Rule 'expr' returns a value

  The generated code works fine so I think I can be safe to use it but is there an easy way to 
  avoid them.

  Thanks for any hints
  --kjell




  The grammar looks like this


  header {
  package se.oops.o2.infospace.data;
  import java.math.*;
  import java.io.*;
  import com.webobjects.foundation.*;
  import se.oops.o2.infospace.util.*;
  }

  class CalcParser extends Parser;
  options {
  codeGenMakeSwitchThreshold = 3;
  codeGenBitsetTestThreshold = 4;
  buildAST=true;
  ASTLabelType = "antlr.CommonAST"; 
  }

  calculate: assignExpr SEMI! ;

  assignExpr: multExpr ( 
  pm: (PLUS^ | MINUS^)
  me: multExpr 
  exception catch [ RecognitionException ex ] { 
  System.out.println("Caught error in assignExpr");
  reportError(ex.toString()); 
  } )* ;

  multExpr: postfixExpr ( ( MULT^ | DIV^ | MOD^ | UP^) postfixExpr )* ;

  postfixExpr: absFunc | acosFunc | asinFunc | atanFunc | cosFunc | expFunc 
  | invFunc | logFunc | sinFunc | sqrtFunc | tanFunc | powFunc 
  | sqrFunc | cubeFunc | maxFunc | minFunc | decFunc | calculateSum | atom ;

  absFunc: ABS^ LPAREN! assignExpr RPAREN! ;
  acosFunc: ACOS^ LPAREN! assignExpr RPAREN! ;
  asinFunc: ASIN^ LPAREN! assignExpr RPAREN! ;
  atanFunc: ATAN^ LPAREN! assignExpr RPAREN! ;
  cosFunc: COS^ LPAREN! assignExpr RPAREN! ;
  expFunc: EXP^ LPAREN! assignExpr RPAREN! ;
  invFunc: INV^ LPAREN! assignExpr RPAREN! ;
  logFunc: LOG^ LPAREN! assignExpr RPAREN! ;
  sinFunc: SIN^ LPAREN! assignExpr RPAREN! ;
  sqrtFunc: SQRT^ LPAREN! assignExpr RPAREN! ;
  tanFunc: TAN^ LPAREN! assignExpr RPAREN! ;
  sqrFunc: SQR^ LPAREN! assignExpr RPAREN! ;
  cubeFunc: CUBE^ LPAREN! assignExpr RPAREN! ;
  powFunc: POW^ LPAREN! assignExpr COMMA! assignExpr RPAREN! ;
  maxFunc: MAX^ LPAREN! assignExpr COMMA! assignExpr RPAREN! ;
  minFunc: MIN^ LPAREN! assignExpr COMMA! assignExpr RPAREN! ;
  decFunc: DEC^ LPAREN! assignExpr COMMA! unsignedInteger COMMA! unsignedInteger RPAREN! ;
  calculateSum: SUM^ LPAREN! KEYIDSTRING COMMA! RELATIVEKEYIDSTRING RPAREN! ;
  atom: signedNumber | ID | EEE | PI | LPAREN! assignExpr RPAREN! | variable;

  variable: KEYIDSTRING | RELATIVEKEYIDSTRING;
  signedNumber: unsignedNumber | MINUS^ unsignedNumber;
  unsignedNumber: unsignedInteger | unsignedReal ;
  unsignedInteger: NUM_INT ;
  unsignedReal: NUM_REAL ;

  dummy: DOT | DOTDOT ;

  ///////////////////////////////////////////////////////////////////////////

  class CalcLexer extends Lexer;

  options {
  k=2;
  caseSensitive = true;
  caseSensitiveLiterals = true;
  }

  tokens {
  SUM = "sum";
  VAR = "var" ;
  ABS = "abs" ;
  ACOS = "acos" ;
  ASIN = "asin" ;
  ATAN = "atan" ;
  COS = "cos" ;
  EXP = "exp" ;
  INV = "inv" ;
  LOG = "log" ;
  SIN = "sin" ;
  SQRT = "sqrt" ;
  TAN = "tan" ;
  SQR = "sqr" ;
  CUBE = "cube" ;
  POW = "pow";
  MAX = "max";
  MIN = "min";
  DEC = "dec";
  EEE = "E" ;
  PI = "pi" ;
  }

  WS: (' ' |'\t' | '\n' | '\r') { _ttype = Token.SKIP; } ;

  ID options { testLiterals = true; }
  : ('a'..'z'|'A'..'Z'|'_') (ID_CHAR)* ;

  protected
  DIGIT : '0'..'9';

  protected
  ID_CHAR : 'a'..'z' | 'A'..'Z' |'_' | DIGIT ;

  protected
  ID_PART : (ID_CHAR)+ ( '.' (ID_CHAR)+)* '@' (DIGIT)+ ;

  KEYIDSTRING : '#' ID_PART ('/' ID_PART)* ;

  RELATIVEKEYIDSTRING : '.' ('.')? '/' ID_PART ('/' ID_PART)* ;

  NUM_INT
  {boolean isDecimal=false;}
  : ( '0' {isDecimal = true;} // special case for just '0'
  | ('1'..'9') ('0'..'9')* {isDecimal=true;} // non-zero decimal
  )
  // only check to see if it's a float if looks like decimal so far
  ( { LA(2)!='.' && LA(3)!='.' && isDecimal}?
  ( '.' ('0'..'9')* (EXPONENT)?
  | EXPONENT
  )
  { _ttype = NUM_REAL; }
  )?
  ;

  LPAREN: '(' ;
  RPAREN: ')' ;
  MINUS: '-' ;
  PLUS: '+' ;
  MULT: '*' ;
  DIV: '/' ;
  MOD: '%' ;
  UP: '^' ;
  COMMA: ',' ;
  SEMI: ';' ;


  // a couple protected methods to assist in matching floating point numbers
  protected
  EXPONENT
  : ('e') ('+'|'-')? ('0'..'9')+
  ;

  ///////////////////////////////////////////////////////////////////////////

  class CalcTreeWalker extends TreeParser;

  {

  ////////// Start special functions ///////////////////////////////////////////

  public String answer;
  public Object delegate;

  public String answer() {
  return answer;
  }

  public void setAnswer(String value) {
  answer = value;
  if (delegate != null) {
  Object[] keys = { "Sender" };
  Object[] objects = { this };
  NSDictionary dict = new NSDictionary(objects, keys);
  try {
  //Object result = DelegateUtility.performMethodWithDelegate("parserDidAnswer", delegate, dict);
  } catch (Exception ex) {
  }
  }
  }

  public Object delegate() {
  return delegate;
  }

  public void setDelegate(Object value) {
  delegate = value;
  }

  public double lookupKeyString(String string) {
  String result = "0";
  System.out.println("lookupKeyString: " + string);
  if(true) return 8.0;
  if (delegate() != null) {
  Object[] keys = { "Sender" , "KeyString" };
  Object[] objects = { this , string };
  NSDictionary dict = new NSDictionary(objects, keys);
  try {
  //result = (String) DelegateUtility.performMethodWithDelegate("parserWantsValueForKeyString", delegate, dict);
  } catch (Exception ex) {
  }
  }
  return new BigDecimal(result).doubleValue();
  }

  public double lookupRelativeKeyString(String string) {
  String result = "0";
  System.out.println("lookupRelativeKeyString: " + string);
  if(true) return 7.0;
  if (delegate() != null) {
  Object[] keys = { "Sender" , "KeyString" };
  Object[] objects = { this , string };
  NSDictionary dict = new NSDictionary(objects, keys);
  try {
  //result = (String) DelegateUtility.performMethodWithDelegate("parserWantsValueForRelativeKeyString", delegate, dict);
  } catch (Exception ex) {
  }
  }
  return new BigDecimal(result).doubleValue();
  }

  public double calculateSum(String repetitionKeyString, String relativeKeyString) {
  String result = "0";
  System.out.println("rep: \"" + repetitionKeyString + "\" rel: \"" + relativeKeyString + "\"");
  if(true) return 47.0;
  if (delegate() != null) {
  Object[] keys = { "Sender", "RepetitionKeyString", "RelativeKeyString" };
  Object[] objects = { this, repetitionKeyString, relativeKeyString };
  NSDictionary dict = new NSDictionary(objects, keys);

  try {
  //result = (String) DelegateUtility.performMethodWithDelegate("parserWantsCalculatedSum", delegate, dict);
  } catch (Exception ex) {
  }
  }
  return new BigDecimal(result).doubleValue();
  }

  public double functionDec(double value, double decimals, double rounding) {
  BigDecimal result = new BigDecimal(value);
  if (rounding < 0 || rounding > 6) rounding = BigDecimal.ROUND_HALF_DOWN;
  if (decimals < 0) decimals = 0;
  result = result.setScale((int)decimals, (int)rounding);
  return result.doubleValue();
  }

  ////////// End special functions ///////////////////////////////////////////

  }



  expr returns [double r]
  {
  double a,b,c;
  r=0;
  }
  : #(PLUS a=expr b=expr) {r = a+b;}
  | (#(MINUS expr expr))=> #(MINUS a=expr b=expr) {r = a-b;} | #(MINUS a=expr) {r = -a;} 
  | #(MULT a=expr b=expr) {r = a*b;}
  | #(DIV a=expr b=expr) {r = a/b;}
  | #(MOD a=expr b=expr) {r = a%b;}
  | #(UP a=expr b=expr) {r = Math.pow(a,b);}
  | #(ABS a=expr) {r = Math.abs(a);}
  | #(ACOS a=expr) {r = Math.acos(a);}
  | #(ASIN a=expr) {r = Math.asin(a);}
  | #(ATAN a=expr) {r = Math.atan(a);}
  | #(COS a=expr) {r = Math.cos(a);}
  | #(EXP a=expr) {r = Math.exp(a);}
  | #(INV a=expr) {r = 1/a;}
  | #(LOG a=expr) {r = Math.log(a);}
  | #(SIN a=expr) {r = Math.sin(a);}
  | #(SQRT a=expr) {r = Math.sqrt(a);}
  | #(TAN a=expr) {r = Math.tan(a);}
  | #(SQR a=expr) {r = a*a;}
  | #(CUBE a=expr) {r = a*a*a;}
  | #(POW a=expr b=expr) {r = Math.pow(a,b);}
  | #(MAX a=expr b=expr) {r = Math.max(a,b);}
  | #(MIN a=expr b=expr) {r = Math.min(a,b);}
  | #(DEC a=expr b=expr c=expr) {r = functionDec(a,b,c);}
  | #(SUM s1:expr s2:expr) {r = calculateSum(s1.getText(),s2.getText());}
  | KEYIDSTRING {r = lookupKeyString(expr_AST_in.getText());}
  | RELATIVEKEYIDSTRING {r = lookupRelativeKeyString(expr_AST_in.getText());}
  | EEE {r = Math.E;}
  | PI {r = Math.PI;}
  | ni: NUM_INT {r = (double)Double.parseDouble(ni.getText());}
  | nr: NUM_REAL {r = (double)Double.parseDouble(nr.getText());}
  ;

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020529/b106387d/attachment.html
From sachin_sawant10 at yahoo.com  Wed May 29 06:23:02 2002
From: sachin_sawant10 at yahoo.com (sachin_sawant10)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] "<<" character in HTML -'s PCDATA
Message-ID: <ad2knm+8qs2@eGroups.com>

I am working with HTML grammer given in antlr examples. I want to 
include "<<" character in PCDATA token.

I changed PCDATA rule to - 

PCDATA
	:	(
			options {
				generateAmbigWarnings=false;
			}
		:	'\r' '\n'		{newline();}
		|	'\r'			{newline();}
		|	'\n'			{newline();}
		|       "<<"
		|	~('<'|'\n'|'\r'|'"'|'>')
		)+ 
	;

but I get "lexical nondeterminism" errors.

How do I solve this problem?

Regards

Sachin 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Wed May 29 06:36:40 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Ant 1.4.1 patch + supergrammars
In-Reply-To: <00e901c20621$c9012ca0$0101a8c0@daemon>
Message-ID: <20020529133640.70377.qmail@web14804.mail.yahoo.com>

Hi Ant users,

Attached is a patch for Ant 1.4.1 (the current stable Ant version). Aply
this patch to the "optional" package of Ant (and don't forget to put ANTLR
in your classpath, if it's not already there). The previous post was
intended for Ant developers, and worked only with Ant 1.5.1beta. The only
source that is different is ANTLR.java, also attached here. When porting
back the patch to Ant 1.4.1, i included (but not verified) the changes of
Silvain Piree to deal with up to 3 supergrammars. (Silvain, can you check
the supergrammar stuff is working, please?)

Happy ANTLR-ing with Ant,
Bogdan

P.S.
I will try to find a more general way to specify supergrammars - filesets or
something like this, but it may take some time. 

--- Silvain Piree <s.piree@enneya.com> wrote:
> Attached you'll find the patched ANTLR task for ANT.
> It's a quick&dirty solution which adds attributes "glib", "glib2" and
> "glib3", but it gets the job done.
> 
> Silvain
> 
> ----- Original Message -----
> From: "Bogdan Mitu" <bogdan_mt@yahoo.com>
> To: <antlr-interest@yahoogroups.com>
> Sent: Tuesday, May 28, 2002 10:13 AM
> Subject: Re: [antlr-interest] ANTLR and ANT
> 
> 
> > Hi Silvain,
> >
> > If I remember correctly, glib=..." is a command-line-only option. You
> > probably added new attributes to the ANTLR task. My modifications don't
> deal
> > with supergrammars (in fact I don't use them, I prefer to use literate
> > programming to produce different variations of a grammar). But your
> changes
> > and mine can be merged. To make more clear what modifications I made,
> here
> > is a fragment from my post to ant-dev:
> >
> > >>>
> > Working with the ANTLR task I saw that it (the ANTLR task) is somehow
> > limited when it tries to determine if the source grammar is "dirty" or
> not:
> >
> > - It considers the output of ANTLR to be one file per grammar, while in
> fact
> > there are 2 (or even 3): XxxParser.java, XxxParserTokenTypes.java and
> > possibly XxxParserTokenTypes.txt. If any of one is missing, the grammar
> > should be recompiled, which currently happens only for XxxParser.java.
> >
> > - An ANTLR file can contain more than one grammar (any combination of
> lexer,
> > parser and tree parser grammars). Once again, multiple output files, and
> > each of them missing should trigger the recompilation of the grammar.
> >
> > - ANTLR grammars can export/import token lists through "vocabulary
> files" -
> > XxxTokenTypes.txt. If the imported file is newer than the grammar file,
> the
> > grammar should be recompiled to include the correct tokens in generated
> > code.
> >
> > The main problem lays in the method getGeneratedFile(), which returns
> only
> > one file, while in fact we need two lists of files, ones that are
> results
> of
> > the grammar, and should be *older* than the grammar, and a list of
> imported
> > files, which should be *younger* than the grammar file.
> > <<<
> >
> > The new task parses the grammar file to determine all generated files
> and
> > all imported files, so that it can make a better decision. It doesn't
> know
> > anything about supergrammars. And you're right, it should. If you send
> me
> > your changes, I will try to incorporate them.
> >
> > Regards,
> > Bogdan
> >
> >
> > --- Silvain Piree <s.piree@enneya.com> wrote:
> > >
> > > Bogdan,
> > >
> > > > I wrote a new ANTLR task, which uses a parser to analyze all
> > > > dependencies, and sent it to ant-dev. However, the process of
> > > > review/adoption is very slow, ANTLR not being their top priority.
> > > > If someone is interested, I can post the patch.
> > >
> > > I've also made some small changes to the ANTLR task from ANT:
> > > I've added the ability to specify the location of base grammars
> > > from which to inherit using "glib=...", "glib2=...", etc.
> > >
> > > I've also added some checking to see if the base grammars are
> > > more recent than the grammar to be processed, so ANTLR
> > > is only activated when really needed. Works fine for me.
> > >
> > > In what way do your changes of the ANTLR task solve that problem.
> > > Most noteably, how do you know where the base grammars are
> > > located? In my case they are in several different directories.
> > >
> > > Kind greetings, Silvain
> > >
> > >
> > >
> > >
> > >
> > > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
> > >
> > >
> > >
> >
> >
> > __________________________________________________
> > Do You Yahoo!?
> > Yahoo! - Official partner of 2002 FIFA World Cup
> > http://fifaworldcup.yahoo.com
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
> >
> >
> >
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 

> ATTACHMENT part 2 application/octet-stream name=ANTLR.java



__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com
 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Ant_1.4.1_patch.zip
Type: application/x-zip-compressed
Size: 15362 bytes
Desc: Ant_1.4.1_patch.zip
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20020529/563bee74/Ant_1.4.1_patch.bin
-------------- next part --------------
/*
 * The Apache Software License, Version 1.1
 *
 * Copyright (c) 2000-2002 The Apache Software Foundation.  All rights
 * reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in
 *    the documentation and/or other materials provided with the
 *    distribution.
 *
 * 3. The end-user documentation included with the redistribution, if
 *    any, must include the following acknowlegement:
 *       "This product includes software developed by the
 *        Apache Software Foundation (http://www.apache.org/)."
 *    Alternately, this acknowlegement may appear in the software itself,
 *    if and wherever such third-party acknowlegements normally appear.
 *
 * 4. The names "The Jakarta Project", "Ant", and "Apache Software
 *    Foundation" must not be used to endorse or promote products derived
 *    from this software without prior written permission. For written
 *    permission, please contact apache@apache.org.
 *
 * 5. Products derived from this software may not be called "Apache"
 *    nor may "Apache" appear in their names without prior written
 *    permission of the Apache Group.
 *
 * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
 * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
 * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
 * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 * ====================================================================
 *
 * This software consists of voluntary contributions made by many
 * individuals on behalf of the Apache Software Foundation.  For more
 * information on the Apache Software Foundation, please see
 * <http://www.apache.org/>.
 */

package org.apache.tools.ant.taskdefs.optional.antlr;

import java.io.*;
import java.util.*;
import org.apache.tools.ant.*;
import org.apache.tools.ant.taskdefs.*;
import org.apache.tools.ant.types.*;
/**
 * @author Erik Meade, emeade@geekfarm.org
 * @author <a href="mailto:s.piree@enneya.com">Silvain Piree</a>
 * @author <a href="mailto:bogdan_mt@yahoo.com">Bogdan Mitu</a>
 */
public class ANTLR extends Task {

    private CommandlineJava commandline = new CommandlineJava();
    private File target;
    private File outputDirectory;
    private File glib;
    private File glib2;
    private File glib3;
    private boolean fork = false;
    private File dir;

    /** list of files generated by the current grammar file */
    private ArrayList generatedList = null;

    /** list of files imported by the current grammar file */
    private ArrayList importedList = null;


    public ANTLR() {
        commandline.setVm("java");
        commandline.setClassname("antlr.Tool");
    }

    public void setTarget(File target) {
        log("Setting target to: " + target.toString(), Project.MSG_VERBOSE);
        this.target = target;
    }

    public void setOutputdirectory(File outputDirectory) {
        log("Setting output directory to: " + outputDirectory.toString(), Project.MSG_VERBOSE);
        this.outputDirectory = outputDirectory;
    }

    public void setFork(boolean s) {
        this.fork = s;
    }

    public void setGlib(File glib) {
        this.glib = glib;
    }
    public void setGlib2(File glib) {
        this.glib2 = glib;
    }
    public void setGlib3(File glib) {
        this.glib3 = glib;
    }

    /**
     * The working directory of the process
     */
    public void setDir(File d) {
        this.dir = d;
    }


    public void execute() throws BuildException {
        validateAttributes();
        if (isTargetDirty()) {
            //
            // First we delete the affected files.
            // There seems to be a bug in ANTLR, at least in version 2.7.2a1,
            // so we need this workaround.
            //
            String generatedFileName;
            File generatedFile;
            for (int i = 0; i < generatedList.size(); i++) {
                generatedFileName = (String) generatedList.get(i);
                generatedFile = new File(outputDirectory, generatedFileName);
                generatedFile.delete();
            }

            if (glib != null) {
	            commandline.createArgument().setValue("-glib");
                String argument = new String(glib.getAbsolutePath());
                if (glib2 != null) argument = argument + ";" + glib2.getAbsolutePath();
                if (glib3 != null) argument = argument + ";" + glib3.getAbsolutePath();
                commandline.createArgument().setValue(argument);
			}

            //
            // Recompile the grammar.
            //
            commandline.createArgument().setValue("-o");
            commandline.createArgument().setValue(outputDirectory.toString());
            commandline.createArgument().setValue(target.toString());

            if (fork) {
                log("Forking " + commandline.toString(), Project.MSG_VERBOSE);
                int err = run(commandline.getCommandline());
                if (err == 1) {
                    throw new BuildException("ANTLR returned: "+err, location);
                }
            }
            else {
                Execute.runCommand(this, commandline.getCommandline());
            }
        }
    }

    private void validateAttributes() throws BuildException{
        if (target == null || !target.isFile()) {
            throw new BuildException("Invalid target: " + target);
        }

        // if no output directory is specified, use the target's directory
        if (outputDirectory == null) {
            String fileName = target.toString();
            setOutputdirectory(new File(target.getParent()));
        }
        if (!outputDirectory.isDirectory()) {
            throw new BuildException("Invalid output directory: " + outputDirectory);
        }
        if (fork && (dir == null || !dir.isDirectory())) {
            throw new BuildException("Invalid working directory: " + dir);
        }
    }

    /** Returns <code>true</code> if the target should be recompiled */ 
    private boolean isTargetDirty() {
        boolean isDirty = false;
        ANTLRParser parser = null;
        try {
            BufferedReader in = new BufferedReader(new FileReader(target));
            parser = new ANTLRParser(new ANTLRLexer(in));
            parser.grammar();
            in.close();
        } catch (Exception e) {
            // throw new BuildException("Unable to analize source file " + target.toString());				
			generatedList = new ArrayList();  // It is better to compile the grammar with ANTLR 
			return isDirty = true;	          // to get real error messages.
        }
        generatedList = parser.getGeneratedList();
        importedList = parser.getImportedList();

        String generatedFileName = null;
        File generatedFile = null;
        String importedFileName = null;
        File importedFile = null;
        int i;

        long importModifTime = 0;
        for (i = 0; i < importedList.size(); i++) {
            if (importedList.get(i) != null) {
                importedFileName = (String) importedList.get(i);
                importedFile = new File(outputDirectory, importedFileName);
                if (importedFile.lastModified() > importModifTime) {
                    importModifTime = importedFile.lastModified();
                }
            }
        }

        for (i = 0; i < generatedList.size(); i++) {
            generatedFileName = (String) generatedList.get(i);
            generatedFile = new File(outputDirectory, generatedFileName);
            if (target.lastModified() > generatedFile.lastModified() |
                importModifTime > generatedFile.lastModified()) 
            {
                isDirty = true;
            }
        }
		//FIXME
		if (glib != null && glib.lastModified() > generatedFile.lastModified())
        	isDirty = true;
		if (glib2 != null && glib2.lastModified() > generatedFile.lastModified())
        	isDirty = true;
		if (glib3 != null && glib3.lastModified() > generatedFile.lastModified())
        	isDirty = true;

       	return isDirty;
    }

    private int run(String[] command) throws BuildException {
        Execute exe = new Execute(new LogStreamHandler(this, Project.MSG_INFO,
                                                       Project.MSG_WARN), null);
        exe.setAntRun(project);
        exe.setWorkingDirectory(dir);
        exe.setCommandline(command);
        try {
            return exe.execute();
        } catch (IOException e) {
            throw new BuildException(e, location);
        }
    }

}




From Trey.Spiva at embarcadero.com  Wed May 29 07:26:19 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Strange character Recognition. (C++ Only)
Message-ID: <6791D870658F174FB863E2FA890000A37DCCF2@abyss4.advancedsw.com>

Additional Information: The '*' are really character 0x95.  My EMAIL client
converted them to '*' when I sent the email.  Sorry about the confusion.

When I use Anltr to create a Java parser every thing works create.  However
it is broken when I use Antlr to produce a C++ parser.

Any ideas would be greatly appreciated.

> I have the following same code that is not parsing correctly.
> 
> public class DynAnyUtil
> {
>     static Any createDefaultAnyOfType(TypeCode typeCode, ORB orb)
>     {
>         // The spec for DynAny differs from Any on initialization via type
>         // * false for boolean
>         // * zero for numeric types
>         // * zero for types octet, char, and wchar
>         // * the empty string for string and wstring
>         // * nil for object references
>         // * a type code with a TCKind value of tk_null for type codes
>         // * for Any values, an Any containing a type code with a TCKind
> //   type and no value
>     }
> }
> 
> Notice the dots.  They are not part of the standard ascii character set.
> When I try to parse this file using the java.g that is shipped in the CPP
> examples I get the error message :"unexpected char *".  I have the
> charVocabulary set to charVocabulary = '\3'..'\377'.
> 
> Anybody have any ideas.  The file that I am trying to parse is shipped
> with
> JDK 1.4.
> 
> 
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed May 29 08:55:03 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] COBOL
References: <F216JXOxJagXTi8M19V000005c2@hotmail.com>
Message-ID: <3CF4F9D7.29F5D5CC@boeing.com>

Balvinder Singh wrote:
> 
> Hi all,
> 
>    I'm writing cobol parser only for WORKING STORAGE AREA of data division.
> I'm using grammar rule and lexical rule for WORKING STORAGE AREA from VS
> COBOL II (http://adam.wins.uva.nl/~x/grammars/vs-cobol-ii/)
> 
> I have converted lexical rule to ANTLR format, but I'm getting conflicts for
> some of the rules, rules are as follows :
> 
> Literal : NonNumeric | Numeric
>         ;
> 
> protected
> NonNumeric : '"' ( (~'"') | '"' '"' )* '"'
>            | '\'' ( (~'\'') | '\'' '\'')* '\''
>            | ('X' 'x') '"' HexDigits '"'
>            | ('X' 'x') '\'' HexDigits '\''
>            ;
Factor this:

NonNumeric : '"' ( (~'"') | '"' '"' )* '"'
            | '\'' ( (~'\'') | '\'' '\'')* '\''
            | ('X' 'x')( '"' HexDigits '"' | '\'' HexDigits '\'')
            ;




> AphabeticUserDefinedWord : (('0'.. '9')+ ('-')*)* ('0' .. '9')* ('A' ..
> 'Z' 'a' .. 'z') ('A' .. 'Z' 'a' .. 'z' '0' .. '9')* (('-')+ ('A' .. 'Z' 'a'
> .. 'z' '0' .. '9')+)*
>                           ;

This is infinite lookahead. since you can have 9- , 99- etc...

Fix it by saying  
 AphabeticUserDefinedWord : ((('0'.. '9')+ ('-')*)=> ('0'.. '9')+
('-')*)* ('0' .. '9')* ('A' ..
 'Z' 'a' .. 'z') ('A' .. 'Z' 'a' .. 'z' '0' .. '9')* (('-')+ ('A' .. 'Z'
'a'
 .. 'z' '0' .. '9')+)*
                           ;




Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed May 29 08:58:32 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] 2.7.a2 build issues
References: <20020527175942.GA90613@0lsen.net>
Message-ID: <3CF4FAA8.75DD1851@boeing.com>

Clint Olsen wrote:
> 
> Hi:
> 
> In order to get Antlr to build on my Linux box, I had to doctor the
> scripts/run-antlr and the scripts/Config.make.  There was a reference to
> antlrall.jar which wasn't there in the distribution when I unpacked it.
> Did I do something out of order?  What exactly is the difference between
> antlrall.jar and antlr.jar?
> 
> Thanks,
> 
> -Clint

Some debugging classes are not in antlr.jar, like ASTFrame etc...

What I usually do is:

where the scripts are:

find antlr -name "*.class" -exec rm {} \;
javac -classpath . `find antlr -name "*.java" -print`
jar cvf antlreverything.jar `find antlr -name "*.class" -print`

or yet

jar cvf antlreverything.jar antlr


Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed May 29 08:57:21 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] 2.7.a2 build issues
Message-ID: <170826586F3BD511910D0200C110AAA8032B4998@memail03.bco-home.com>

antlr.jar is meant to be just the runtime classes.  It's for distributing
with a compiled parser.

antlrall.jar is supposed to be the entire antlr distribution, including
antlr.Tool and everything needed to generate parsers.

Monty

> -----Original Message-----
> From: Sinan [mailto:sinan.karasu@boeing.com]
> Sent: Wednesday, May 29, 2002 8:59 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] 2.7.a2 build issues
> 
> 
> Clint Olsen wrote:
> > 
> > Hi:
> > 
> > In order to get Antlr to build on my Linux box, I had to doctor the
> > scripts/run-antlr and the scripts/Config.make.  There was a 
> reference to
> > antlrall.jar which wasn't there in the distribution when I 
> unpacked it.
> > Did I do something out of order?  What exactly is the 
> difference between
> > antlrall.jar and antlr.jar?
> > 
> > Thanks,
> > 
> > -Clint
> 
> Some debugging classes are not in antlr.jar, like ASTFrame etc...
> 
> What I usually do is:
> 
> where the scripts are:
> 
> find antlr -name "*.class" -exec rm {} \;
> javac -classpath . `find antlr -name "*.java" -print`
> jar cvf antlreverything.jar `find antlr -name "*.class" -print`
> 
> or yet
> 
> jar cvf antlreverything.jar antlr
> 
> 
> Sinan
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed May 29 09:02:36 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] How do I get rid of "unexpected token:null" error
References: <acvl2e+a0pt@eGroups.com>
Message-ID: <3CF4FB9C.F387D23@boeing.com>

sachin_sawant10 wrote:
> 
[...]
> file:   (statement)+
>         ;
> 

file:   (statement)+ EOF
         ;

Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed May 29 09:01:10 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] added a vrml.g
References: <620B91BA-71BC-11D6-BEBD-0030653DE0D6@jguru.com> <1022548247.30455.10502.camel@catalyst>
Message-ID: <3CF4FB46.B039EDA1@boeing.com>

Braden McDaniel wrote:
> 
> On Mon, 2002-05-27 at 17:54, Terence Parr wrote:
[...]
> 
> > Shall I just replace the whole thing with your grammar?
> 
> Up to you. You are more than welcome to include it on ANTLR's resources
> page if you like. I will point out that OpenVRML--and its ANTLR
> grammar--are covered by the LGPL, as opposed to being in the public
> domain like ANTLR.
> 
> --
> Braden McDaniel                           e-mail: <braden@endoframe.com>
> <http://endoframe.com>                    Jabber: <braden@jabber.org>
> 
> 
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/

Maybe you should consider making antlr LGPL also. (I'd say GPL , but
....)

Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed May 29 09:06:06 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] How do I specify start-of-line (^ in [F]Lex in 
 ANTLR Lexers?
References: <1EFF7452-719F-11D6-97F6-0030653DE0D6@jguru.com>
Message-ID: <3CF4FC6E.9465D235@boeing.com>

Terence Parr wrote:
> 
> On Monday, May 27, 2002, at 08:37  AM, Greg Lindholm wrote:
> 
> > ANTLR doesn't have a way of specifing start-of-line as part of a rule.
> > Once you have entered a rule you can use a sematic predicate to check
> > what column your at, but this probably doesn't help you.
> >
> > IMHO ANTLR is not well suited for writing a preprocessor as;
> > 1) Preprocessors are line-oriented and ANTLR isn't.
> > 2) The output of an ANTLR lexer is a token stream where the
> > output of a preprocessor is a character stream (or file) that
> > then gets fed into a lexer.
> 
> Very good points...
> 
> Here is a strategy that you may not have considered: do a line oriented
> loop to get input and then when you find a directive in column one, use
> ANTLR to lex or parse just that line :)  Works great.
> 
> Ter

In TinyBasic, I use

line:nl statement;

where nl is a new line (unless it is the first line.....)

If I only knew how to push a token into the string before starting the
whole thing,
it'd a lot easier...

Then you can say

file { push(NL)} : (nl statement)+ ;


Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed May 29 09:17:32 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Why is this nondeterministic?
References: <acrp1h+rsdq@eGroups.com>
Message-ID: <3CF4FF1C.2D85B0D1@boeing.com>

danfuzz wrote:
> 
>
[...]

> 
> REGULAR:
>     (REGULAR_BIT)+;
> 


Try

REGULAR:
     REGULAR_BIT ((REGULAR_BIT)=>REGULAR_BIT)*;
 
Or what I like, 

REGULAR:
     REGULAR_BIT ((REGULAR_BIT)=>REGULAR)?;

Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From clinton_olsen at yahoo.com  Wed May 29 10:26:37 2002
From: clinton_olsen at yahoo.com (clinton_olsen)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: How do I specify start-of-line (^ in [F]Lex in ANTLR Lexers?
In-Reply-To: <20020527153700.27126.qmail@web12408.mail.yahoo.com>
Message-ID: <ad330e+61k1@eGroups.com>

Hi:

I'd like to qualify this with the fact that _any_ parser is 
typically not suited to to do a pre-processor.  This needs to be 
done in the lexer for the reasons stated by Greg.  Besides, you need 
the replaced input to be lexed before it can be passed to the parser.

-Clint

--- In antlr-interest@y..., Greg Lindholm <glindholm@y...> wrote:
> ANTLR doesn't have a way of specifing start-of-line as part of a 
rule. 
> Once you have entered a rule you can use a sematic predicate to 
check
> what column your at, but this probably doesn't help you.
> 
> IMHO ANTLR is not well suited for writing a preprocessor as; 
> 1) Preprocessors are line-oriented and ANTLR isn't.
> 2) The output of an ANTLR lexer is a token stream where the 
> output of a preprocessor is a character stream (or file) that
> then gets fed into a lexer.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bals1978 at hotmail.com  Wed May 29 10:13:50 2002
From: bals1978 at hotmail.com (Balvinder Singh)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] "<<" character in HTML -'s PCDATA
Message-ID: <OE39hcISPim9OciPXkm0000736b@hotmail.com>



 Hi Sachin,

  give lookahead of 2 in options for lexer like this :

 class HTMLLexer extends Lexer;
 options{
 k=2;
 }

 balvinder




 ----- Original Message -----
> From: "sachin_sawant10" <sachin_sawant10@yahoo.com>
> To: <antlr-interest@yahoogroups.com>
> Sent: Wednesday, May 29, 2002 6:53 PM
> Subject: [antlr-interest] "<<" character in HTML -'s PCDATA
>
>
> > I am working with HTML grammer given in antlr examples. I want to
> > include "<<" character in PCDATA token.
> >
> > I changed PCDATA rule to -
> >
> > PCDATA
> > : (
> > options {
> > generateAmbigWarnings=false;
> > }
> > : '\r' '\n' {newline();}
> > | '\r' {newline();}
> > | '\n' {newline();}
> > |       "<<"
> > | ~('<'|'\n'|'\r'|'"'|'>')
> > )+
> > ;
> >
> > but I get "lexical nondeterminism" errors.
> >
> > How do I solve this problem?
> >
> > Regards
> >
> > Sachin
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
http://docs.yahoo.com/info/terms/
> >
>
>

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bals1978 at hotmail.com  Wed May 29 11:04:10 2002
From: bals1978 at hotmail.com (Balvinder Singh)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] COBOL
Message-ID: <F113NjWOiy54DgI6bXm00005e47@hotmail.com>


Hi Sinan,

But If I will use your scheme, getting warning

warning:Syntactic predicate ignored for single alternative

what should I refactor?

balvinder



>From: Sinan <sinan.karasu@boeing.com>
>Reply-To: antlr-interest@yahoogroups.com
>To: antlr-interest@yahoogroups.com
>Subject: Re: [antlr-interest] COBOL
>Date: Wed, 29 May 2002 08:55:03 -0700
>
>Balvinder Singh wrote:
> >
> > Hi all,
> >
> >    I'm writing cobol parser only for WORKING STORAGE AREA of data 
>division.
> > I'm using grammar rule and lexical rule for WORKING STORAGE AREA from VS
> > COBOL II (http://adam.wins.uva.nl/~x/grammars/vs-cobol-ii/)
> >
> > I have converted lexical rule to ANTLR format, but I'm getting conflicts 
>for
> > some of the rules, rules are as follows :
> >
> > Literal : NonNumeric | Numeric
> >         ;
> >
> > protected
> > NonNumeric : '"' ( (~'"') | '"' '"' )* '"'
> >            | '\'' ( (~'\'') | '\'' '\'')* '\''
> >            | ('X' 'x') '"' HexDigits '"'
> >            | ('X' 'x') '\'' HexDigits '\''
> >            ;
>Factor this:
>
>NonNumeric : '"' ( (~'"') | '"' '"' )* '"'
>             | '\'' ( (~'\'') | '\'' '\'')* '\''
>             | ('X' 'x')( '"' HexDigits '"' | '\'' HexDigits '\'')
>             ;
>
>
>
>
> > AphabeticUserDefinedWord : (('0'.. '9')+ ('-')*)* ('0' .. '9')* ('A' 
>..
> > 'Z' 'a' .. 'z') ('A' .. 'Z' 'a' .. 'z' '0' .. '9')* (('-')+ ('A' .. 'Z' 
>'a'
> > .. 'z' '0' .. '9')+)*
> >                           ;
>
>This is infinite lookahead. since you can have 9- , 99- etc...
>
>Fix it by saying
>  AphabeticUserDefinedWord : ((('0'.. '9')+ ('-')*)=> ('0'.. '9')+
>('-')*)* ('0' .. '9')* ('A' ..
>  'Z' 'a' .. 'z') ('A' .. 'Z' 'a' .. 'z' '0' .. '9')* (('-')+ ('A' .. 'Z'
>'a'
>  .. 'z' '0' .. '9')+)*
>                            ;
>
>
>
>
>Sinan
>
>
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>




_________________________________________________________________
Get your FREE download of MSN Explorer at http://explorer.msn.com/intl.asp.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed May 29 11:40:57 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] COBOL
References: <F113NjWOiy54DgI6bXm00005e47@hotmail.com>
Message-ID: <3CF520B9.412DBDD8@boeing.com>

Balvinder Singh wrote:
> 
> Hi Sinan,
> 
> But If I will use your scheme, getting warning
> 
> warning:Syntactic predicate ignored for single alternative
> 
> what should I refactor?
> 
> balvinder
> 
> >From: Sinan <sinan.karasu@boeing.com>
> >Reply-To: antlr-interest@yahoogroups.com
> >To: antlr-interest@yahoogroups.com
> >Subject: Re: [antlr-interest] COBOL
> >Date: Wed, 29 May 2002 08:55:03 -0700
> >
> >Balvinder Singh wrote:
> > >
> > > Hi all,
> > >
> > >    I'm writing cobol parser only for WORKING STORAGE AREA of data
> >division.
> > > I'm using grammar rule and lexical rule for WORKING STORAGE AREA from VS
> > > COBOL II (http://adam.wins.uva.nl/~x/grammars/vs-cobol-ii/)
> > >
> > > I have converted lexical rule to ANTLR format, but I'm getting conflicts
> >for
> > > some of the rules, rules are as follows :
> > >
> > > Literal : NonNumeric | Numeric
> > >         ;
> > >
> > > protected
> > > NonNumeric : '"' ( (~'"') | '"' '"' )* '"'
> > >            | '\'' ( (~'\'') | '\'' '\'')* '\''
> > >            | ('X' 'x') '"' HexDigits '"'
> > >            | ('X' 'x') '\'' HexDigits '\''
> > >            ;
> >Factor this:
> >
> >NonNumeric : '"' ( (~'"') | '"' '"' )* '"'
> >             | '\'' ( (~'\'') | '\'' '\'')* '\''
> >             | ('X' 'x')( '"' HexDigits '"' | '\'' HexDigits '\'')
> >             ;
> >
> >
> >
> >
> > > AphabeticUserDefinedWord : (('0'.. '9')+ ('-')*)* ('0' .. '9')* ('A'
> >..
> > > 'Z' 'a' .. 'z') ('A' .. 'Z' 'a' .. 'z' '0' .. '9')* (('-')+ ('A' .. 'Z'
> >'a'
> > > .. 'z' '0' .. '9')+)*
> > >                           ;

Aha , didn't notice that before..

(1):

AphabeticUserDefinedWord : (('0'.. '9')+ ('-')*)* ('0' .. '9')*
('A'..'Z' 'a' .. 'z') ('A' .. 'Z' 'a' .. 'z' '0' .. '9')* (('-')+ ('A'
.. 'Z' 'a'.. 'z' '0' .. '9')+)*
                          ;
Has a genuine ambiguity....

(('0'.. '9')+ ('-')*)* ('0' .. '9')*

problem is with  ('-')* 

so you can have

 99

satisfied by ('0'.. '9')+

or

(('0'.. '9')+ ('-')*)* ('0' .. '9')*

Don't you really want

(('0'.. '9')+ ('-' ('0' .. '9')*)* )* 



in which case the solution would be (in case you still get
ambiguities...)

(('0'.. '9')+ (('-')=> '-' ('0' .. '9')*)* )* 

Which probably is not correct either, but then the rule you have has
another ambiguity, mainly

(('0'.. '9')+ ('-')*)* ('0' .. '9')* ('A'..'Z' 'a' .. 'z') ('A' .. 'Z'
'a' .. 'z' '0' .. '9')*

is equivalent to:

(('0'.. '9')+ ('-')*)*  ('A' .. 'Z' 'a' .. 'z' '0' .. '9')+


so. we get:


AphabeticUserDefinedWord : (('0'.. '9')+ ('-')*)* ('A' .. 'Z' 'a' .. 'z'
'0' .. '9')+ (('-')+ ('A' .. 'Z' 'a'.. 'z' '0' .. '9')+)*;

but then your rule really collapses to:


(2)

AlphabeticUserDefinedWord : ('A' .. 'Z' | 'a' .. 'z' | '0' .. '9')+ (
('-')+ ('A' .. 'Z' | 'a' .. 'z' | '0' .. '9') );

Check it.


It appears that whatever satisfies (1) , satisfies (2).

It appears that (1) tries to make some tokens start witn numeric, but it
fails...

A9--A9

will skip (('0'.. '9')+ ('-')*)* ('0' .. '9')*

and be parsed ( if it was not ambigous)

9A-9A will be parsed by:
('0' .. '9')* ('A'..'Z' 'a' .. 'z') ('A' .. 'Z' 'a' .. 'z' '0' .. '9')*
(('-')+ ('A' .. 'Z' 'a'.. 'z' '0' .. '9')+)*

So what you said is what you got , it is just that what you got is not
what you meant.

Try to start with rule (2) , and fix it as you go along....

If you specify case insensitive literals , then

AlphabeticUserDefinedWord : ('a' .. 'z' | '0' .. '9')+ ( ('-')+ ('a' ..
'z' |  '0' .. '9') );

BTW , do you really do not want the | between literals ??? I am
confused....

Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Wed May 29 11:44:43 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: How do I specify start-of-line (^ in [F]Lex in ANTLR Lexers?
In-Reply-To: <ad330e+61k1@eGroups.com>
Message-ID: <ad37ir+ur0g@eGroups.com>

--- In antlr-interest@y..., "clinton_olsen" <clinton_olsen@y...> 
wrote:
> I'd like to qualify this with the fact that _any_ parser is 
> typically not suited to to do a pre-processor.  This needs to be 
> done in the lexer for the reasons stated by Greg.  

Well, that does depend on what kind of preprocessor you're doing.

One of these days, I'm gonna take a crack at rebuilding James 
Gosling's ACE preprocessor using ANTLR.  ACE is not a character-
stream preprocessor (the way the original cpp is), but a syntax tree 
preprocessor.  (You can get more info on it at his homepage, 
http://java.sun.com/people/jag/ .  I HIGHLY recommend EVERYONE on 
this list read the paper; it is HIGHLY relevant to ANTLR.  After 
seeing this, you'll want all of your preprocessors to operate on 
syntax trees instead of character streams!)

> Besides, you need 
> the replaced input to be lexed before it can be passed to the
> parser.

It seems that that you're intending for the preprocessor to be 
running in the same process as the final parser?  Why not just build 
a separate preprocessor application, and shell out to it, the way cc 
calls cpp?

And really, for a character-stream preprocessor, ANTLR is probably 
overkill.  Or is your preprocessor significantly more complex than 
cpp?

(Please note, C++ afficionados, that I'm referring to the C 
PreProcessor when I say "cpp".)




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed May 29 11:49:21 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Can I get rid of these warnings?
References: <78C100AA-7302-11D6-95A5-0003930FD0FA@oops.se>
Message-ID: <3CF522B1.5DF915DB@boeing.com>

Kjell Nilsson wrote:
> 
> I have a grammar that generates some sort of a calulator. There are some
> functions in the calculator that i have java functions to resolve.
> 
> The function sum(foo, ../bar) is resolved like this
> line 273-275
> | #(SUM s1:expr s2:expr) {r = calculateSum(s1.getText(),s2.getText());}
> | KEYIDSTRING {r = lookupKeyString(expr_AST_in.getText());}
> | RELATIVEKEYIDSTRING {r = lookupRelativeKeyString(expr_AST_in.getText());}
> 
> but here I get this warning
> 
> ParserGenerator/AntCalc.g:273: warning:Rule 'expr' returns a value
> ParserGenerator/AntCalc.g:273: warning:Rule 'expr' returns a value
> 


No easy way...

It is harmless, but you can just assign it to a dummy variable, and let
it go out of scope. It's
creation is what takes time, not the assignment anyway, so you are not
losing anything.

Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Wed May 29 11:49:48 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: How do I specify start-of-line (^ in [F]
	Lex in ANTLR Lexers?
Message-ID: <170826586F3BD511910D0200C110AAA8032B499A@memail03.bco-home.com>

For syntax aware preprocessors for java that are in development see
www.brics.dk/metafront and one using antlr
http://www.ai.mit.edu/~jrb/jse/index.htm.  I don't think either are released
yet but they look promising.

Monty

> -----Original Message-----
> From: jsrs701 [mailto:jsrs701@yahoo.com]
> Sent: Wednesday, May 29, 2002 11:45 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: How do I specify start-of-line (^ in
> [F]Lex in ANTLR Lexers?
> 
> 
> --- In antlr-interest@y..., "clinton_olsen" <clinton_olsen@y...> 
> wrote:
> > I'd like to qualify this with the fact that _any_ parser is 
> > typically not suited to to do a pre-processor.  This needs to be 
> > done in the lexer for the reasons stated by Greg.  
> 
> Well, that does depend on what kind of preprocessor you're doing.
> 
> One of these days, I'm gonna take a crack at rebuilding James 
> Gosling's ACE preprocessor using ANTLR.  ACE is not a character-
> stream preprocessor (the way the original cpp is), but a syntax tree 
> preprocessor.  (You can get more info on it at his homepage, 
> http://java.sun.com/people/jag/ .  I HIGHLY recommend EVERYONE on 
> this list read the paper; it is HIGHLY relevant to ANTLR.  After 
> seeing this, you'll want all of your preprocessors to operate on 
> syntax trees instead of character streams!)
> 
> > Besides, you need 
> > the replaced input to be lexed before it can be passed to the
> > parser.
> 
> It seems that that you're intending for the preprocessor to be 
> running in the same process as the final parser?  Why not just build 
> a separate preprocessor application, and shell out to it, the way cc 
> calls cpp?
> 
> And really, for a character-stream preprocessor, ANTLR is probably 
> overkill.  Or is your preprocessor significantly more complex than 
> cpp?
> 
> (Please note, C++ afficionados, that I'm referring to the C 
> PreProcessor when I say "cpp".)
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Wed May 29 12:15:16 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: How do I specify start-of-line (^ in [F] Lex in ANTLR Lexers?
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B499A@memail03.bco-home.com>
Message-ID: <ad39c4+6f6q@eGroups.com>

To this list add the Moka Java-to-Java Extensible Compiler.

http://mozart-dev.sourceforge.net/moka.html

Dr. Dobbs did an article on it in their July, 2001 issue, for those 
that have it.  Really neat, has a great plug-in architecture that 
allows you to arbitrarily add to the language.  Also allows some 
aspect-oriented programming tricks.

--- In antlr-interest@y..., mzukowski@y... wrote:
> For syntax aware preprocessors for java that are in development see
> www.brics.dk/metafront and one using antlr
> http://www.ai.mit.edu/~jrb/jse/index.htm.  I don't think either are 
released
> yet but they look promising.
> 
> Monty
> 
> > -----Original Message-----
> > From: jsrs701 [mailto:jsrs701@y...]
> > Sent: Wednesday, May 29, 2002 11:45 AM
> > To: antlr-interest@y...
> > Subject: [antlr-interest] Re: How do I specify start-of-line (^ in
> > [F]Lex in ANTLR Lexers?
> > 
> > 
> > --- In antlr-interest@y..., "clinton_olsen" <clinton_olsen@y...> 
> > wrote:
> > > I'd like to qualify this with the fact that _any_ parser is 
> > > typically not suited to to do a pre-processor.  This needs to 
be 
> > > done in the lexer for the reasons stated by Greg.  
> > 
> > Well, that does depend on what kind of preprocessor you're doing.
> > 
> > One of these days, I'm gonna take a crack at rebuilding James 
> > Gosling's ACE preprocessor using ANTLR.  ACE is not a character-
> > stream preprocessor (the way the original cpp is), but a syntax 
tree 
> > preprocessor.  (You can get more info on it at his homepage, 
> > http://java.sun.com/people/jag/ .  I HIGHLY recommend EVERYONE on 
> > this list read the paper; it is HIGHLY relevant to ANTLR.  After 
> > seeing this, you'll want all of your preprocessors to operate on 
> > syntax trees instead of character streams!)
> > 
> > > Besides, you need 
> > > the replaced input to be lexed before it can be passed to the
> > > parser.
> > 
> > It seems that that you're intending for the preprocessor to be 
> > running in the same process as the final parser?  Why not just 
build 
> > a separate preprocessor application, and shell out to it, the way 
cc 
> > calls cpp?
> > 
> > And really, for a character-stream preprocessor, ANTLR is 
probably 
> > overkill.  Or is your preprocessor significantly more complex 
than 
> > cpp?
> > 
> > (Please note, C++ afficionados, that I'm referring to the C 
> > PreProcessor when I say "cpp".)
> > 
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From clinton_olsen at yahoo.com  Wed May 29 13:26:12 2002
From: clinton_olsen at yahoo.com (clinton_olsen)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: How do I specify start-of-line (^ in [F]Lex in ANTLR Lexers?
In-Reply-To: <ad37ir+ur0g@eGroups.com>
Message-ID: <ad3dh5+96bh@eGroups.com>

The advantage of doing an in-process replacement in the lexer is 
that you can still do fairly accurate line/column tracking in the 
lexer w/o using the "hinting" technique using cpp.

-Clint

--- In antlr-interest@y..., "jsrs701" <jsrs701@y...> wrote:
> It seems that that you're intending for the preprocessor to be 
> running in the same process as the final parser?  Why not just 
build 
> a separate preprocessor application, and shell out to it, the way 
cc 
> calls cpp?
> 
> And really, for a character-stream preprocessor, ANTLR is probably 
> overkill.  Or is your preprocessor significantly more complex than 
> cpp?
> 
> (Please note, C++ afficionados, that I'm referring to the C 
> PreProcessor when I say "cpp".)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed May 29 13:29:45 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
In-Reply-To: <ad37ir+ur0g@eGroups.com>
Message-ID: <D0A11A5C-7342-11D6-AB76-0030653DE0D6@jguru.com>


On Wednesday, May 29, 2002, at 11:44  AM, jsrs701 wrote:

> --- In antlr-interest@y..., "clinton_olsen" <clinton_olsen@y...>
> wrote:
>> I'd like to qualify this with the fact that _any_ parser is
>> typically not suited to to do a pre-processor.  This needs to be
>> done in the lexer for the reasons stated by Greg.
>
> Well, that does depend on what kind of preprocessor you're doing.
>
> One of these days, I'm gonna take a crack at rebuilding James
> Gosling's ACE preprocessor using ANTLR.  ACE is not a character-
> stream preprocessor (the way the original cpp is), but a syntax tree
> preprocessor.  (You can get more info on it at his homepage,
> http://java.sun.com/people/jag/ .  I HIGHLY recommend EVERYONE on
> this list read the paper; it is HIGHLY relevant to ANTLR.  After
> seeing this, you'll want all of your preprocessors to operate on
> syntax trees instead of character streams!)

Heh, that's pretty slick.  Reminds me of some stuff I'm thinking about 
for the "emitter" stage of translation.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Wed May 29 16:29:49 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
In-Reply-To: <D0A11A5C-7342-11D6-AB76-0030653DE0D6@jguru.com>
Message-ID: <ad3o9d+h3sp@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> Heh, that's pretty slick.  

Ain't it, though?  I used to work with a guy who worked on XNews with 
Gosling at the time, and he said that Gosling came bursting in one 
Monday morning with the ACE preprocessor all done and working.

The kick is that he only thought of it at about 11am on the Saturday 
before.

Yes, Gosling really is that friggin' cool.  :)

> Reminds me of some stuff I'm thinking about 
> for the "emitter" stage of translation.

What ho?  What is this?  Tell us, O Great One Our Leader!

JSRS


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From glindholm at yahoo.com  Wed May 29 17:49:05 2002
From: glindholm at yahoo.com (Greg Lindholm)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] COBOL
In-Reply-To: <3CF520B9.412DBDD8@boeing.com>
Message-ID: <20020530004905.16109.qmail@web12401.mail.yahoo.com>

--- Balvinder Singh wrote:
> AphabeticUserDefinedWord : (('0'.. '9')+ ('-')*)* ('0' .. '9')*
('A' ..
> 'Z' 'a' .. 'z') ('A' .. 'Z' 'a' .. 'z' '0' .. '9')* (('-')+ ('A' ..
'Z' 'a'
> .. 'z' '0' .. '9')+)*
> ;

Maybe this will help with COBOL user defined words.
What I did was factor them into 2 rules depending on if they start with
a letter or a digit.

// Identifier:
//      Start with a digit or letter
//      Middle can be digit, letter, or hyhen (or underscore)
//      Must have at least one letter
//      End with a digit or letter (*** NOT CHECKED ***)
//
// Acucobol:
//      BINARY: 'B' '#' ('0'|'1')+
//      OCTAL:  ('O' '#' | '%') ('0'..'7')+
//      HEX:    ('H'|'X') '#' (HEXDIGIT)+
//
// Micro Focus:
//      HEX:    'H' '"' ( HEXDIGIT)+ '"'
//      HEX:    'X' '"' ( HEXDIGIT)+ '"' (Non-numeric literal)


// Identifiers and Hex/Oct/Bin Literals can start with a letter
START_WITH_LETTER
    :
        ('b' '#') => 'b' '#' ('0'|'1')+
	    { $setType(T_NUMERIC_LITERAL); }
    |
        ('o' '#') => 'o' '#' ('0'..'7')+
	    { $setType(T_NUMERIC_LITERAL); }
    |
        (('h'|'x') '#') => ('h'|'x') '#' (HEXDIGIT)+
	    { $setType(T_NUMERIC_LITERAL); }
    |
        ('h' '"') => 'h' '"' (HEXDIGIT)+ '"'
	    { $setType(T_NUMERIC_LITERAL); }
    |
        ('x' '"') => 'x' '"' (HEXDIGIT)+ '"'
	    { $setType(T_HEX_LITERAL); }
    |
        LETTER (LETTER | DIGIT | HYPHEN)*
	    { $setType(T_IDENTIFIER); }
    ;

// Identifiers and unsigned numbers can start with a digit
START_WITH_DIGIT
    :   (DIGIT (DIGIT | HYPHEN)* LETTER) => 
            DIGIT (DIGIT | HYPHEN)* LETTER (LETTER | DIGIT | HYPHEN)*
	    { $setType(T_IDENTIFIER); }
    |   (DIGITS '.' DIGITS) => DIGITS '.' DIGITS (EXPONENT)?
        { $setType(T_FLOAT); }
    |   (DIGITS '.' EXPONENT) => DIGITS '.' EXPONENT
        { $setType(T_FLOAT); }
    |	DIGITS
        { $setType(T_INT); }
    ;

Greg


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed May 29 18:09:10 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
In-Reply-To: <ad3o9d+h3sp@eGroups.com>
Message-ID: <D8E382E5-7369-11D6-AB76-0030653DE0D6@jguru.com>


On Wednesday, May 29, 2002, at 04:29  PM, jsrs701 wrote:

> --- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
>> Heh, that's pretty slick.
>
> Ain't it, though?  I used to work with a guy who worked on XNews with
> Gosling at the time, and he said that Gosling came bursting in one
> Monday morning with the ACE preprocessor all done and working.
>
> The kick is that he only thought of it at about 11am on the Saturday
> before.
>
> Yes, Gosling really is that friggin' cool.  :)

I had lunch with him just before Java hit the bigtime...nice guy.  
Pretty unassuming for such a distinguished career.

>> Reminds me of some stuff I'm thinking about
>> for the "emitter" stage of translation.
>
> What ho?  What is this?  Tell us, O Great One Our Leader!

<snicker>

Very secret stuff ;)  Just trying to solve that last nasty problem of 
the "emitter".  You have a tree, but how the devil to you generate 
output without a million print statements.  I think I have a nice 
"output grammar" idea that is the inverse of the input grammar.  The 
prototype of this output template stuff is currently generating HTML 
pages on jGuru ;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Wed May 29 18:55:12 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
In-Reply-To: <D8E382E5-7369-11D6-AB76-0030653DE0D6@jguru.com>
Message-ID: <ad40q0+dm4m@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> I had lunch with him just before Java hit the bigtime...nice guy.  
> Pretty unassuming for such a distinguished career.

Yeah, my buddy said Gosling was one of the most even-keeled, well-
adjusted humans he'd ever met.  Pretty good for someone so smart.  :-)

> Very secret stuff ;)  Just trying to solve that last nasty problem 
of 
> the "emitter".  You have a tree, but how the devil to you generate 
> output without a million print statements.  I think I have a nice 
> "output grammar" idea that is the inverse of the input grammar.  

YES!  That would be great!  I think I see where you're going with 
that.  What kind of shape is it in?  When are you gonna RFC it for us?

JSRS


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Wed May 29 19:42:22 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
In-Reply-To: <ad40q0+dm4m@eGroups.com>
Message-ID: <DE3B87AE-7376-11D6-AB76-0030653DE0D6@jguru.com>


On Wednesday, May 29, 2002, at 06:55  PM, jsrs701 wrote:

> --- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
>> I had lunch with him just before Java hit the bigtime...nice guy.
>> Pretty unassuming for such a distinguished career.
>
> Yeah, my buddy said Gosling was one of the most even-keeled, well-
> adjusted humans he'd ever met.  Pretty good for someone so smart.  :-)
>
>> Very secret stuff ;)  Just trying to solve that last nasty problem
> of
>> the "emitter".  You have a tree, but how the devil to you generate
>> output without a million print statements.  I think I have a nice
>> "output grammar" idea that is the inverse of the input grammar.
>
> YES!  That would be great!  I think I see where you're going with
> that.  What kind of shape is it in?  When are you gonna RFC it for us?

As soon as I clear off other stuff like oh...making money ;)  Seriously 
though, Loring Craymer and I spoke today and agreed maybe it's time to 
start thinking about another "Dr T's Traveling Parsing Revival And Beer 
Tasting Festival" here in silicon valley to discuss output grammars and 
tree rewriting etc...

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Thu May 30 01:29:12 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
In-Reply-To: <DE3B87AE-7376-11D6-AB76-0030653DE0D6@jguru.com>; from parrt@jguru.com on Wed, May 29, 2002 at 07:42:22PM -0700
References: <ad40q0+dm4m@eGroups.com> <DE3B87AE-7376-11D6-AB76-0030653DE0D6@jguru.com>
Message-ID: <20020530102911.A5892@cs.utwente.nl>

Hi,

On Wed, May 29, 2002 at 07:42:22PM -0700, Terence Parr wrote:
> start thinking about another "Dr T's Traveling Parsing Revival And Beer 
> Tasting Festival" here in silicon valley to discuss output grammars and 
> tree rewriting etc...

Slightly related to this in fall I will very probably go to the states to
do some tool integration work with the people from Moebius/UltraSAN. This
means the uni will sponsor my tickets :)

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 'And this 'rebooting' business? Give it a good kicking, do you?' 'Oh, no,
  of course, we ... that is ... well, yes, in fact,' said Ponder. 'Adrian
    goes round the back and ... er ... prods it with his foot. But in a
     technical way,' he added. --- From: Hogfather by Terry Pratchett.

From klaren at cs.utwente.nl  Thu May 30 01:29:12 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
In-Reply-To: <DE3B87AE-7376-11D6-AB76-0030653DE0D6@jguru.com>; from parrt@jguru.com on Wed, May 29, 2002 at 07:42:22PM -0700
References: <ad40q0+dm4m@eGroups.com> <DE3B87AE-7376-11D6-AB76-0030653DE0D6@jguru.com>
Message-ID: <20020530102911.A5892@cs.utwente.nl>

Hi,

On Wed, May 29, 2002 at 07:42:22PM -0700, Terence Parr wrote:
> start thinking about another "Dr T's Traveling Parsing Revival And Beer 
> Tasting Festival" here in silicon valley to discuss output grammars and 
> tree rewriting etc...

Slightly related to this in fall I will very probably go to the states to
do some tool integration work with the people from Moebius/UltraSAN. This
means the uni will sponsor my tickets :)

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 'And this 'rebooting' business? Give it a good kicking, do you?' 'Oh, no,
  of course, we ... that is ... well, yes, in fact,' said Ponder. 'Adrian
    goes round the back and ... er ... prods it with his foot. But in a
     technical way,' he added. --- From: Hogfather by Terry Pratchett.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Thu May 30 02:10:45 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
In-Reply-To: <D8E382E5-7369-11D6-AB76-0030653DE0D6@jguru.com>
Message-ID: <20020530091045.53717.qmail@web14806.mail.yahoo.com>


--- Terence Parr <parrt@jguru.com> wrote:
...
 
> Very secret stuff ;)  Just trying to solve that last nasty problem of 
> the "emitter".  You have a tree, but how the devil to you generate 
> output without a million print statements.  I think I have a nice 
> "output grammar" idea that is the inverse of the input grammar.  The 
> prototype of this output template stuff is currently generating HTML 
> pages on jGuru ;)

Does this means that if write a translator from language A to language B, we
also have the translator from B to A, just inverting the grammars? That's
really great.

Is ANTLR 3.0 going to be AST-based? This will allow more people to
contribute, the current code is a bit entangled ...

Looking forward for your new stuff,
Bogdan

 
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Thu May 30 09:04:40 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Possible bug in Antlr.g
Message-ID: <6791D870658F174FB863E2FA890000A37DCCFF@abyss4.advancedsw.com>

I have been investigating why I am not able to get
charVocabulary='\3'..'\377'; to work in C++. 
I noticed something that I thought was odd and was wondering if I am reading
the antlr.g file 
incorrectly.
 
The parser rule lexerOptionsSpec references charSet when the option
"charVocabulary" is 
encountered.  charSet calls setBlockElement to retrieve the character set
range which 
calls the lexer rule CHAR_LITERAL to retrieve the start and end characters
in the range.
 
CHAR_LITERAL is defined as 
 
CHAR_LITERAL
   :  '\'' (ESC|~'\'') '\''
   ;
 
It seems to me that CHAR_LITERAL will only correctly match '\3' it will not
match '\377' because 
the rule does not have an (ESC|~'\'')*
 
Am I completely off?
 
Trey Spiva
Senior Software Engineer
trey.spiva@embarcadero.com
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020530/c30c3246/attachment.html
From klaren at cs.utwente.nl  Thu May 30 09:28:04 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Possible bug in Antlr.g
In-Reply-To: <6791D870658F174FB863E2FA890000A37DCCFF@abyss4.advancedsw.com>; from Trey.Spiva@embarcadero.com on Thu, May 30, 2002 at 10:04:40AM -0600
References: <6791D870658F174FB863E2FA890000A37DCCFF@abyss4.advancedsw.com>
Message-ID: <20020530182804.C5892@cs.utwente.nl>

Hi,

On Thu, May 30, 2002 at 10:04:40AM -0600, Trey Spiva wrote:
> CHAR_LITERAL is defined as 
>  
> CHAR_LITERAL
>    :  '\'' (ESC|~'\'') '\''
>    ;
..
> It seems to me that CHAR_LITERAL will only correctly match '\3' it will not
> match '\377' because 
> the rule does not have an (ESC|~'\'')*

But the ESC rule will match \377 (if I'm not off :) ) representing one
charachter. And in the other case it will match just one char '~'\'' which
seems to be ok to me.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Thu May 30 09:36:04 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Possible bug in Antlr.g
Message-ID: <6791D870658F174FB863E2FA890000A37DCD04@abyss4.advancedsw.com>

Yes you are correct.  I had the feeling that I was overlooking something.

Trey Spiva
Senior Software Engineer
trey.spiva@embarcadero.com


> -----Original Message-----
> From: Ric Klaren [mailto:klaren@cs.utwente.nl]
> Sent: Thursday, May 30, 2002 10:28 AM
> To: antlr-interest@yahoogroups.com
> Subject: Re: [antlr-interest] Possible bug in Antlr.g
> 
> Hi,
> 
> On Thu, May 30, 2002 at 10:04:40AM -0600, Trey Spiva wrote:
> > CHAR_LITERAL is defined as
> >
> > CHAR_LITERAL
> >    :  '\'' (ESC|~'\'') '\''
> >    ;
> ..
> > It seems to me that CHAR_LITERAL will only correctly match '\3' it will
> not
> > match '\377' because
> > the rule does not have an (ESC|~'\'')*
> 
> But the ESC rule will match \377 (if I'm not off :) ) representing one
> charachter. And in the other case it will match just one char '~'\'' which
> seems to be ok to me.
> 
> Cheers,
> 
> Ric
> --
> -----+++++*****************************************************+++++++++--
> -----
>     ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
> -----+++++*****************************************************+++++++++--
> -----
>      Human beings, who are almost unique in having the ability to learn
>    from the experience of others, are also remarkable for their apparent
>          disinclination to do so. --- Douglas Adams, Last Chance to See
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu May 30 10:14:26 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: In the Fall: Dr T's Traveling Parsing Revival And Beer Festival?
In-Reply-To: <20020530102911.A5892@cs.utwente.nl>
Message-ID: <B1EEB300-73F0-11D6-B7D9-0030653DE0D6@jguru.com>


On Thursday, May 30, 2002, at 01:29  AM, Ric Klaren wrote:

> Hi,
>
> On Wed, May 29, 2002 at 07:42:22PM -0700, Terence Parr wrote:
>> start thinking about another "Dr T's Traveling Parsing Revival And Beer
>> Tasting Festival" here in silicon valley to discuss output grammars and
>> tree rewriting etc...
>
> Slightly related to this in fall I will very probably go to the states 
> to
> do some tool integration work with the people from Moebius/UltraSAN. 
> This
> means the uni will sponsor my tickets :)

Awesome...where in the states will you be and when?

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu May 30 10:16:36 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
In-Reply-To: <20020530091045.53717.qmail@web14806.mail.yahoo.com>
Message-ID: <FF40F9C4-73F0-11D6-B7D9-0030653DE0D6@jguru.com>


On Thursday, May 30, 2002, at 02:10  AM, Bogdan Mitu wrote:

>
> --- Terence Parr <parrt@jguru.com> wrote:
> ...
>
>> Very secret stuff ;)  Just trying to solve that last nasty problem of
>> the "emitter".  You have a tree, but how the devil to you generate
>> output without a million print statements.  I think I have a nice
>> "output grammar" idea that is the inverse of the input grammar.  The
>> prototype of this output template stuff is currently generating HTML
>> pages on jGuru ;)
>
> Does this means that if write a translator from language A to language 
> B, we
> also have the translator from B to A, just inverting the grammars? 
> That's
> really great.

Well, not exactly...the output grammar looks like templates with holes 
to stick values or refer to other templates...er...rules. ;)

> Is ANTLR 3.0 going to be AST-based? This will allow more people to
> contribute, the current code is a bit entangled ...

It's funny how polite people.  Current code stinks; well, the output 
stuff does for sure ;)  I meant to do it well given my time constraints, 
but my halfway solution ended up sucking.  The next release will use 
output grammars to generate whatever language you want or that is are 
willing to support.

> Looking forward for your new stuff,

Me too :)

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Thu May 30 10:40:01 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: In the Fall: Dr T's Traveling Parsing Revival And Beer Festival?
In-Reply-To: <B1EEB300-73F0-11D6-B7D9-0030653DE0D6@jguru.com>
Message-ID: <ad5o5h+ac3i@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> > Slightly related to this in fall I will very probably go to the 
states 
> > to
> > do some tool integration work with the people from 
Moebius/UltraSAN. 
> > This
> > means the uni will sponsor my tickets :)
> 
> Awesome...where in the states will you be and when?

Well nuts.  Finally one of these things is gonna happen when I'm 
paying attention, and it looks like it'll likely happen when I'm 
running around the forrests at Ft. Bragg.

Let us say that if the Parsing Revival didn't happen until January, 
I'd be very pleased.  :)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu May 30 11:25:18 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
In-Reply-To: <FF40F9C4-73F0-11D6-B7D9-0030653DE0D6@jguru.com>
Message-ID: <ad5qqe+m0ik@eGroups.com>

> > Is ANTLR 3.0 going to be AST-based? This will allow more people to
> > contribute, the current code is a bit entangled ...
> 
> It's funny how polite people.  Current code stinks; well, the 
output 
> stuff does for sure ;)  I meant to do it well given my time 
constraints, 
> but my halfway solution ended up sucking.  The next release will 
use 
> output grammars to generate whatever language you want or that is 
are 
> willing to support.

Ter,

If you have or are happy to write up a project overview/metaphor for 
ANTLR v3 and to deliver specs as needed (until we learn how to write 
specs too), I willing to contribute some dev resource to help 
accelerate ANTLR v3's development.

Just say when.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu May 30 11:59:31 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
In-Reply-To: <ad5qqe+m0ik@eGroups.com>
Message-ID: <5F87D37E-73FF-11D6-B7D9-0030653DE0D6@jguru.com>


On Thursday, May 30, 2002, at 11:25  AM, micheal_jor wrote:

>>> Is ANTLR 3.0 going to be AST-based? This will allow more people to
>>> contribute, the current code is a bit entangled ...
>>
>> It's funny how polite people.  Current code stinks; well, the
> output
>> stuff does for sure ;)  I meant to do it well given my time
> constraints,
>> but my halfway solution ended up sucking.  The next release will
> use
>> output grammars to generate whatever language you want or that is
> are
>> willing to support.
>
> Ter,
>
> If you have or are happy to write up a project overview/metaphor for
> ANTLR v3 and to deliver specs as needed (until we learn how to write
> specs too), I willing to contribute some dev resource to help
> accelerate ANTLR v3's development.

Cool.  There should be lots of work for all...Loring is talking about an 
editor that highlights ambiguities etc... ;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu May 30 12:01:31 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: In the Fall: Dr T's Traveling Parsing Revival And Beer Festival?
In-Reply-To: <ad5o5h+ac3i@eGroups.com>
Message-ID: <A767C442-73FF-11D6-B7D9-0030653DE0D6@jguru.com>


On Thursday, May 30, 2002, at 10:40  AM, jsrs701 wrote:
> Well nuts.  Finally one of these things is gonna happen when I'm
> paying attention, and it looks like it'll likely happen when I'm
> running around the forrests at Ft. Bragg.

Ooh....that's gotta be hot this summer.  Heh, look out for pygmy 
rattlesnakes...I saw a snake show on tv where they went out and 
collected all the snakes from the dugouts before maneuvers ;)

> Let us say that if the Parsing Revival didn't happen until January,
> I'd be very pleased.  :)

We'll just have to have another one :)  Can't get enough parsing nor 
beer ya know ;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Thu May 30 14:44:09 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: In the Fall: Dr T's Traveling Parsing Revival And Beer Festival?
In-Reply-To: <A767C442-73FF-11D6-B7D9-0030653DE0D6@jguru.com>
Message-ID: <ad66f9+ll3f@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> > running around the forrests at Ft. Bragg.
> 
> Ooh....that's gotta be hot this summer.  Heh, look out for pygmy 

Oh, it's worse than that.  August and September will be at Ft. 
Benning, in south Georgia.  October through December will be at 
Bragg.  So this summer I'll be getting snakes and peanuts!

> We'll just have to have another one :)  Can't get enough parsing 
nor 
> beer ya know ;)

True on both counts.  I feel like I could actually follow the 
discussion at one of those events now, having finally implemented 
something significant in ANTLR.  Well, right up until my fifth beer, 
anyway...


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Thu May 30 15:50:26 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Bug with C++ charVocabulary option
Message-ID: <6791D870658F174FB863E2FA890000A37DCD07@abyss4.advancedsw.com>

When the C++ istream::get method is call it will return a char.  The data
type char is a signed value. 
Therefore, the range of a char is -127...127.  When the BitSit::member(int
el) is called it test uses the 
test:
 
if ( el < 0 || static_cast<unsigned int>(el) >= storage.size()) 
 
to test if a character is in the charVocabulary.  When a character value is
greater than 127 it will 
be a negative number.  Therfore the static_cast<unsigned int> will return a
really large number.
Subsequently the result of the cast will be larger than the storage size.  
 
Example:
charVocabulary='\3'...'\377'
el = -107 (0x95) [unsigned value = 149]
 
el fits in the range of the vocabulary.  When el is cast to unsigned int the
value becames 
42949667189 and fails the test.  So, BitSet::member return that the
character is not in
the charVocabulary.
 
When BitSet::member is change to look like
 
bool BitSet::member(int el) const
{
   unsigned char tempEL = (unsigned char)el;
   if ( tempEL < 0 || static_cast<unsigned int>(tempEL) >= storage.size())
            return false;
 
   return storage[tempEL];
}
 
Every thing works ok.  However this approach will not support Unicode.
 
 
 
Trey Spiva
Senior Software Engineer
trey.spiva@embarcadero.com
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020530/169734cd/attachment.html
From pete.forman at westerngeco.com  Fri May 31 01:11:19 2002
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] SQL string literals
Message-ID: <5.1.0.14.2.20020531082757.03af11a0@wgmail2.gatwick.eur.slb.com>

How might I handle the SQL style of quoting in string literals?
This allows the delimiter (' or ") to stand for itself in the string
if it is doubled.  Examples of a simplification of this are

   "foo" => foo
   "using ""quotes""" => using "quotes"
   """" => "
   "" => [empty string]

My naive solution is this:

class SqlLexer extends Lexer;

STRING
   : '"'! (~('"')|'"''"'!)*  '"'!
   ;

Which results in:

ANTLR Parser Generator   Version 2.7.2a2 (20020112-1)   1989-2002 jGuru.com
sql.g:4: warning: lexical nondeterminism upon
sql.g:4:        k==1:'"'
sql.g:4:        between alt 2 and exit branch of block


How might I get that to work?

My best workaround at the moment is to get the parser to concatenate
adjacent STRINGs inserting a quote.  For correctness the lexer should
be emitting whitespace tokens but that will clutter all the grammar.

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From prasad at aztec.soft.net  Fri May 31 13:58:16 2002
From: prasad at aztec.soft.net (Prasad K K)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] SQL string literals
In-Reply-To: <5.1.0.14.2.20020531082757.03af11a0@wgmail2.gatwick.eur.slb.com>
Message-ID: <NGBBLOOGNKEBNJFADBNLCEPHCBAA.prasad@aztec.soft.net>

Hi,

You can use this Lexer rule

SINGLE_QUOTED_STRING:
(
	('\'') ( (~('\'')) )* ('\'')
)+

- Prasad KK


-----Original Message-----
From: Pete Forman [mailto:pete.forman@westerngeco.com]
Sent: Friday, May 31, 2002 1:11 AM
To: antlr-interest
Subject: [antlr-interest] SQL string literals


How might I handle the SQL style of quoting in string literals?
This allows the delimiter (' or ") to stand for itself in the string
if it is doubled.  Examples of a simplification of this are

   "foo" => foo
   "using ""quotes""" => using "quotes"
   """" => "
   "" => [empty string]

My naive solution is this:

class SqlLexer extends Lexer;

STRING
   : '"'! (~('"')|'"''"'!)*  '"'!
   ;

Which results in:

ANTLR Parser Generator   Version 2.7.2a2 (20020112-1)   1989-2002 jGuru.com
sql.g:4: warning: lexical nondeterminism upon
sql.g:4:        k==1:'"'
sql.g:4:        between alt 2 and exit branch of block


How might I get that to work?

My best workaround at the moment is to get the parser to concatenate
adjacent STRINGs inserting a quote.  For correctness the lexer should
be emitting whitespace tokens but that will clutter all the grammar.

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri May 31 01:40:28 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Re: In the Fall: Dr T's Traveling Parsing Revival And Beer Festival?
In-Reply-To: <B1EEB300-73F0-11D6-B7D9-0030653DE0D6@jguru.com>; from parrt@jguru.com on Thu, May 30, 2002 at 10:14:26AM -0700
References: <20020530102911.A5892@cs.utwente.nl> <B1EEB300-73F0-11D6-B7D9-0030653DE0D6@jguru.com>
Message-ID: <20020531104028.D5892@cs.utwente.nl>

Hi,

On Thu, May 30, 2002 at 10:14:26AM -0700, Terence Parr wrote:
> Awesome...where in the states will you be and when?

The where is Urbana Michigan, and the when will become set somewhere this
summer depending on our progress on integrating our language within the
Moebius framework. Only thing that is sure is that it's somewhere after
september. After that I'll be put to slave labour for about a month and
then I'm available =)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
Wit is cultured insolence. --- Aristotle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri May 31 01:57:54 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Strange character Recognition. (C++ Only)
In-Reply-To: <6791D870658F174FB863E2FA890000A37DCCF2@abyss4.advancedsw.com>; from Trey.Spiva@embarcadero.com on Wed, May 29, 2002 at 08:26:19AM -0600
References: <6791D870658F174FB863E2FA890000A37DCD04@abyss4.advancedsw.com> <6791D870658F174FB863E2FA890000A37DCCF2@abyss4.advancedsw.com>
Message-ID: <20020531105754.E5892@cs.utwente.nl>

Hi,

On Wed, May 29, 2002 at 08:26:19AM -0600, Trey Spiva wrote:
> Additional Information: The '*' are really character 0x95.  My EMAIL client

> it is broken when I use Antlr to produce a C++ parser.

What is exactly broken ? I think I lost your previous mails on the subject..
Is the rule for the multi line comment broken, check the charactersets in
used in the rule.. so for instance if I run the java.g through my current
cvs version, then I see things like:

if ((LA(1) == static_cast<unsigned char>('\r')) &&
	(LA(2) == static_cast<unsigned char>('\n')) &&
	((LA(3) >= static_cast<unsigned char>('\3') &&
	LA(3) <= static_cast<unsigned char>('\377'))) &&
	((LA(4) >= static_cast<unsigned char>('\3')
	&& LA(4) <= static_cast<unsigned char>('\377')))) {
	match(static_cast<unsigned char>('\r'));

etc.

As you can see the 'big' charVocabulary is in there. If this is not the
case for you then upgrade your antlr distro (didn't catch which one you are
using). Is it in there then maybe something goes wrong in the character
reading traject (the LA() method and below) it could be that some
characters are mangled in some cases by buggy standard functions. Make a
testfile with just a comment and the offending character and trace through
it.

> > Notice the dots.  They are not part of the standard ascii character set.
> > When I try to parse this file using the java.g that is shipped in the CPP
> > examples I get the error message :"unexpected char *".  I have the
> > charVocabulary set to charVocabulary = '\3'..'\377'.

Which compiler/platform are you on?

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri May 31 02:08:39 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:50 2004
Subject: [antlr-interest] Bug with C++ charVocabulary option
In-Reply-To: <6791D870658F174FB863E2FA890000A37DCD07@abyss4.advancedsw.com>; from Trey.Spiva@embarcadero.com on Thu, May 30, 2002 at 04:50:26PM -0600
References: <6791D870658F174FB863E2FA890000A37DCD07@abyss4.advancedsw.com>
Message-ID: <20020531110839.F5892@cs.utwente.nl>

Hi,

Should have scanned my whole mailbox before answering previous mail :P

On Thu, May 30, 2002 at 04:50:26PM -0600, Trey Spiva wrote:
> el fits in the range of the vocabulary.  When el is cast to unsigned int the
> value becames 
> 42949667189 and fails the test.  So, BitSet::member return that the
> character is not in
> the charVocabulary.
>  
> When BitSet::member is change to look like
>  
> bool BitSet::member(int el) const
> {
>    unsigned char tempEL = (unsigned char)el;
>    if ( tempEL < 0 || static_cast<unsigned int>(tempEL) >= storage.size())
>             return false;
>  
>    return storage[tempEL];
> }

Change it to:

bool BitSet::member(unsigned int el) const
{
	if ( el >= storage.size())
		return false;

	return storage[el];
}

Also the add method:

void BitSet::add(unsigned int el)
{
	if( el >= storage.size() )
		storage.resize( el+1, false );

	storage[el] = true;
}

Hmmmm basically the complete LA(x) traject needs to be made unsigned int,
else we'll keep on having sign extension issues. It's something I already
noted as potential trouble. Your probably the first to really stumble on
it. Another approach is maybe adding a & 0xFF in a few places to strip away
sign extenstions....

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bals1978 at hotmail.com  Fri May 31 02:11:00 2002
From: bals1978 at hotmail.com (Balvinder Singh)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] SQL string literals
Message-ID: <F16173MRc3b2qYarBQX000043b3@hotmail.com>


Hi...

This is due to greedy apporach of lexer, it consumes " in loop.

use the following :

STRING
    : '"'! ( options { greedy=false; } (~('"')|'"''"'!)* ) '"'!
    ;


>From: Pete Forman <pete.forman@westerngeco.com>
>Reply-To: antlr-interest@yahoogroups.com
>To: antlr-interest <antlr-interest@yahoogroups.com>
>Subject: [antlr-interest] SQL string literals
>Date: Fri, 31 May 2002 09:11:19 +0100
>
>How might I handle the SQL style of quoting in string literals?
>This allows the delimiter (' or ") to stand for itself in the string
>if it is doubled.  Examples of a simplification of this are
>
>    "foo" => foo
>    "using ""quotes""" => using "quotes"
>    """" => "
>    "" => [empty string]
>
>My naive solution is this:
>
>class SqlLexer extends Lexer;
>
>STRING
>    : '"'! (~('"')|'"''"'!)*  '"'!
>    ;
>
>Which results in:
>
>ANTLR Parser Generator   Version 2.7.2a2 (20020112-1)   1989-2002 jGuru.com
>sql.g:4: warning: lexical nondeterminism upon
>sql.g:4:        k==1:'"'
>sql.g:4:        between alt 2 and exit branch of block
>
>
>How might I get that to work?
>
>My best workaround at the moment is to get the parser to concatenate
>adjacent STRINGs inserting a quote.  For correctness the lexer should
>be emitting whitespace tokens but that will clutter all the grammar.
>
>--
>Pete Forman                -./\.-  Disclaimer: This post is originated
>WesternGeco                  -./\.-   by myself and does not represent
>pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
>http://petef.port5.com           -./\.-   Hughes or their divisions.
>
>
>
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>




_________________________________________________________________
Join the worlds largest e-mail service with MSN Hotmail. 
http://www.hotmail.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pete.forman at westerngeco.com  Fri May 31 03:38:53 2002
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] SQL string literals
In-Reply-To: <F16173MRc3b2qYarBQX000043b3@hotmail.com>
Message-ID: <5.1.0.14.2.20020531113452.03ba8918@wgmail2.gatwick.eur.slb.com>

At 2002-05-31 14:41 +0530, Balvinder Singh wrote:
>This is due to greedy apporach of lexer, it consumes " in loop.
>
>use the following :
>
>STRING
>     : '"'! ( options { greedy=false; } (~('"')|'"''"'!)* ) '"'!
>     ;

That does not help, even after putting in the colon after the brace.

sql.g:4:10: warning:Being nongreedy only makes sense for (...)+ and (...)*
sql.g:4: warning: lexical nondeterminism upon
sql.g:4:        k==1:'"'
sql.g:4:        between alt 2 and exit branch of block

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pete.forman at westerngeco.com  Fri May 31 03:34:49 2002
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] SQL string literals
In-Reply-To: <NGBBLOOGNKEBNJFADBNLCEPHCBAA.prasad@aztec.soft.net>
References: <5.1.0.14.2.20020531082757.03af11a0@wgmail2.gatwick.eur.slb.com>
Message-ID: <5.1.0.14.2.20020531112549.03aeb140@wgmail2.gatwick.eur.slb.com>

At 2002-05-31 13:58 -0700, Prasad K K wrote:
>You can use this Lexer rule
>
>SINGLE_QUOTED_STRING:
>(
>         ('\'') ( (~('\'')) )* ('\'')
>)+

That does not address my question.  Single quotes have the same
behaviour in SQL as doubles.  The question I posed stuck to the
simple case of double quotes.  Here are some more examples of the
full SQL string syntax.

   'foo' => foo
    'using ''quotes''' => using 'quotes'
    '''' => '
    '' => [empty string]
    'mixed "quotes"' => mixed "quotes"
    "mixed 'quotes'" => mixed 'quotes'

-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri May 31 04:04:33 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Bug with C++ charVocabulary option
In-Reply-To: <20020531110839.F5892@cs.utwente.nl>; from klaren@cs.utwente.nl on Fri, May 31, 2002 at 11:08:39AM +0200
References: <6791D870658F174FB863E2FA890000A37DCD07@abyss4.advancedsw.com> <20020531110839.F5892@cs.utwente.nl>
Message-ID: <20020531130433.H5892@cs.utwente.nl>

On Fri, May 31, 2002 at 11:08:39AM +0200, Ric Klaren wrote:
> Hmmmm basically the complete LA(x) traject needs to be made unsigned int,
> else we'll keep on having sign extension issues. It's something I already
> noted as potential trouble. Your probably the first to really stumble on
> it. Another approach is maybe adding a & 0xFF in a few places to strip away
> sign extenstions....

Try the attached patch it seems to work on my setup. Oh yeah for MSVC dll
you have to change the vector<int> in the top to vector<unsigned int>
noticed it too late.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Innovation makes enemies of all those who prospered under the old
   regime, and only lukewarm support is forthcoming from those who would
               prosper under the new. --- Niccol Machiavelli


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
Change 667 by klaren@klaren.hawking.main on 2002/05/31 04:00:42

	  Fixed some sign extension issues.

Affected files ...

... //depot/code/org.antlr/main/main/lib/cpp/antlr/BitSet.hpp#7 edit
... //depot/code/org.antlr/main/main/lib/cpp/src/BitSet.cpp#7 edit
... //depot/code/org.antlr/main/main/lib/cpp/src/MismatchedCharException.cpp#5 edit
... //depot/code/org.antlr/main/main/lib/cpp/src/MismatchedTokenException.cpp#5 edit

Differences ...

==== //depot/code/org.antlr/main/main/lib/cpp/antlr/BitSet.hpp#7 (ktext) ====

@@ -13,7 +13,7 @@
 extern template class ANTLR_API ANTLR_USE_NAMESPACE(std)vector<int>;
 extern template class ANTLR_API ANTLR_USE_NAMESPACE(std)vector<bool>;
 #endif
-	
+
 /**A BitSet to replace java.util.BitSet.
  * Primary differences are that most set operators return new sets
  * as opposed to oring and anding "in place".  Further, a number of
@@ -41,15 +41,15 @@
 	ANTLR_USE_NAMESPACE(std)vector<bool> storage;
 
 public:
-	BitSet(int nbits=64);
-	BitSet(const unsigned long* bits_,int nlongs);
+	BitSet( unsigned int nbits=64 );
+	BitSet( const unsigned long* bits_, unsigned int nlongs);
 	~BitSet();
 
-	void add(int el);
+	void add( unsigned int el );
 
-	bool member(int el) const;
+	bool member( unsigned int el ) const;
 
-	ANTLR_USE_NAMESPACE(std)vector<int> toArray() const;
+	ANTLR_USE_NAMESPACE(std)vector<unsigned int> toArray() const;
 };
 
 #ifdef ANTLR_CXX_SUPPORTS_NAMESPACE

==== //depot/code/org.antlr/main/main/lib/cpp/src/BitSet.cpp#7 (ktext) ====

@@ -26,50 +26,45 @@
  * @author Terence Parr, MageLang Institute
  * @author <br><a href="mailto:pete@yamuna.demon.co.uk">Pete Wells</a>
  */
-BitSet::BitSet(int nbits)
-	: storage(nbits)
+BitSet::BitSet(unsigned int nbits)
+: storage(nbits)
 {
-	for (int i=0;i<nbits;i++) {
+	for (unsigned int i = 0; i < nbits ; i++ )
 		storage[i] = false;
-	}
 }
 
-BitSet::BitSet(const unsigned long* bits_,int nlongs)
-	: storage(nlongs*32)
+BitSet::BitSet( const unsigned long* bits_, unsigned int nlongs )
+: storage(nlongs*32)
 {
-	for ( int i = 0 ; i < nlongs*32; i++) {
+	for ( unsigned int i = 0 ; i < (nlongs * 32); i++)
 		storage[i] = (bits_[i>>5] & (1UL << (i&31))) ? true : false;
-	}
 }
 
 BitSet::~BitSet()
 {
 }
 
-void BitSet::add(int el)
+void BitSet::add(unsigned int el)
 {
-	// the string constructor here is a workaround for some crummy compiler.
-	if ( el < 0 )
-		throw ANTLR_USE_NAMESPACE(std)out_of_range(ANTLR_USE_NAMESPACE(std)string("antlr::BitSet.cpp - BitSet::add()"));
-
-	if( static_cast<unsigned int>(el) >= storage.size() )
+	if( el >= storage.size() )
 		storage.resize( el+1, false );
 
 	storage[el] = true;
 }
 
-bool BitSet::member(int el) const
+bool BitSet::member(unsigned int el) const
 {
-	if ( el < 0 || static_cast<unsigned int>(el) >= storage.size())
+	if ( el >= storage.size())
 		return false;
 
 	return storage[el];
 }
 
-ANTLR_USE_NAMESPACE(std)vector<int> BitSet::toArray() const
+ANTLR_USE_NAMESPACE(std)vector<unsigned int> BitSet::toArray() const
 {
-	ANTLR_USE_NAMESPACE(std)vector<int> elems;
-	for (unsigned int i=0;i<storage.size();i++) {
+	ANTLR_USE_NAMESPACE(std)vector<unsigned int> elems;
+	for (unsigned int i = 0; i < storage.size(); i++)
+	{
 		if (storage[i])
 			elems.push_back(i);
 	}

==== //depot/code/org.antlr/main/main/lib/cpp/src/MismatchedCharException.cpp#5 (ktext) ====

@@ -113,8 +113,9 @@
 	case NOT_SET :
 		{
 			s += ANTLR_USE_NAMESPACE(std)string("expecting ") + (mismatchType == NOT_SET ? "NOT " : "") + "one of (";
-			ANTLR_USE_NAMESPACE(std)vector<int> elems = set.toArray();
-			for (int i = 0; i < (int) elems.size(); i++) {
+			ANTLR_USE_NAMESPACE(std)vector<unsigned int> elems = set.toArray();
+			for ( unsigned int i = 0; i < elems.size(); i++ )
+			{
 				s += " '";
 				s += charName(elems[i]);
 				s += "'";

==== //depot/code/org.antlr/main/main/lib/cpp/src/MismatchedTokenException.cpp#5 (ktext) ====

@@ -181,8 +181,8 @@
 	case NOT_SET:
 		{
 			s += ANTLR_USE_NAMESPACE(std)string("expecting ") + (mismatchType == NOT_SET ? "NOT " : "") + "one of (";
-			ANTLR_USE_NAMESPACE(std)vector<int> elems = set.toArray();
-			for (int i = 0; i < (int) elems.size(); i++)
+			ANTLR_USE_NAMESPACE(std)vector<unsigned int> elems = set.toArray();
+			for ( unsigned int i = 0; i < elems.size(); i++ )
 			{
 				s += " ";
 				s += tokenName(elems[i]);



From bogdan_mt at yahoo.com  Fri May 31 04:25:57 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
In-Reply-To: <5F87D37E-73FF-11D6-B7D9-0030653DE0D6@jguru.com>
Message-ID: <20020531112557.15159.qmail@web14808.mail.yahoo.com>


--- Terence Parr <parrt@jguru.com> wrote:
> 
> On Thursday, May 30, 2002, at 11:25  AM, micheal_jor wrote:
> 
> >>> Is ANTLR 3.0 going to be AST-based? This will allow more people to
> >>> contribute, the current code is a bit entangled ...
> >>
> >> It's funny how polite people.  Current code stinks; well, the
> > output
> >> stuff does for sure ;)  I meant to do it well given my time
> > constraints,
> >> but my halfway solution ended up sucking.  The next release will
> > use
> >> output grammars to generate whatever language you want or that is
> > are
> >> willing to support.
> >
> > Ter,
> >
> > If you have or are happy to write up a project overview/metaphor for
> > ANTLR v3 and to deliver specs as needed (until we learn how to write
> > specs too), I willing to contribute some dev resource to help
> > accelerate ANTLR v3's development.
> 
> Cool.  There should be lots of work for all...Loring is talking about an 
> editor that highlights ambiguities etc... ;)

Here I might be able to help. I already have an editor with syntax highlight
for ANTLR, an improved Ant task, and kind of "unit test" framework for ANTLR
grammars. If someone needs them, just let me know.

Bogdan 

> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! - Official partner of 2002 FIFA World Cup
http://fifaworldcup.yahoo.com

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From development at hunsicker.de  Fri May 31 04:33:06 2002
From: development at hunsicker.de (Marco Hunsicker)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Bug in Java grammar 1.3
Message-ID: <200205311207.OAA26584@post.webmailer.de>

Hi all,

the latest java.g (1.18) fails to parse code like


      if (file.getClass() == (byte.class))


the problem being rule "unaryExpressionNotPlusMinus" which expects a
type cast after it matched "(byte" and fails because a "." (DOT)
follows.

	// If typecast is built in type, must be numeric operand
			// Also, no reason to backtrack if type keyword
like int, float...
			lpb:LPAREN^ {#lpb.setType(TYPECAST);}
builtInTypeSpec[true] RPAREN!
			unaryExpression

I fixed it by myself (using syntactic predicating) but having literally
no experience with ANTLR grammars (grammars at all...), I wonder if
there is a better way to deal with such a case. I've attached the
patch. Any comments highly appreciated.

Many thanks.


Marco

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
unaryExpressionNotPlusMinus
        :       BNOT^ unaryExpression
        |       LNOT^ unaryExpression

        |       (       // subrule allows option to shut off warnings
                        options {
                                // "(int" ambig with postfixExpr due to lack of sequence
                                // info in linear approximate LL(k).  It's ok.  Shut up.
                                generateAmbigWarnings=false;
                        }
                :       // If typecast is built in type, must be numeric operand
                        // Also, no reason to backtrack if type keyword like int, float...
                        lpb:LPAREN^
                        
                        (builtInTypeSpec[false] DOT)=>
                            identifier
                      | {#lpb.setType(JavaTokenTypes.TYPECAST);} builtInTypeSpec[true] 
                        
                        RPAREN! unaryExpression

                        // Have to backtrack to see if operator follows.  If no operator
                        // follows, it's a typecast.  No semantic checking needed to parse.
                        // if it _looks_ like a cast, it _is_ a cast; else it's a "(expr)"
                |       (LPAREN classTypeSpec[true] RPAREN unaryExpressionNotPlusMinus)=>
                        lp:LPAREN^ {#lp.setType(JavaTokenTypes.TYPECAST);} classTypeSpec[true] RPAREN!
                        unaryExpressionNotPlusMinus
                |       postfixExpression
                )
        ;
From bals1978 at hotmail.com  Fri May 31 04:58:00 2002
From: bals1978 at hotmail.com (Balvinder Singh)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] SQL string literals
Message-ID: <F55auSgupUj2pODjpA400004489@hotmail.com>




STRING
     : '"'! (~('"')|(options( {greedy=false;}):'"''"'!)* ) '"'!
     ;


>From: Pete Forman <pete.forman@westerngeco.com>
>Reply-To: antlr-interest@yahoogroups.com
>To: antlr-interest@yahoogroups.com
>Subject: Re: [antlr-interest] SQL string literals
>Date: Fri, 31 May 2002 11:38:53 +0100
>
>At 2002-05-31 14:41 +0530, Balvinder Singh wrote:
> >This is due to greedy apporach of lexer, it consumes " in loop.
> >
> >use the following :
> >
> >STRING
> >     : '"'! ( options { greedy=false; } (~('"')|'"''"'!)* ) '"'!
> >     ;
>
>That does not help, even after putting in the colon after the brace.
>
>sql.g:4:10: warning:Being nongreedy only makes sense for (...)+ and (...)*
>sql.g:4: warning: lexical nondeterminism upon
>sql.g:4:        k==1:'"'
>sql.g:4:        between alt 2 and exit branch of block
>
>--
>Pete Forman                -./\.-  Disclaimer: This post is originated
>WesternGeco                  -./\.-   by myself and does not represent
>pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
>http://petef.port5.com           -./\.-   Hughes or their divisions.
>
>
>
>
>Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>




_________________________________________________________________
Send and receive Hotmail on your mobile device: http://mobile.msn.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bals1978 at hotmail.com  Fri May 31 05:05:42 2002
From: bals1978 at hotmail.com (Balvinder Singh)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Suggestion
Message-ID: <F176VzREUP7s3DN71Jg0000a5ae@hotmail.com>


Hi all,

I wrote some lexical rule, plz verify it, these approach seems to me some 
fishy.

options{
k=3;
}

protected
Digit : '0' .. '9'
      ;

protected
Alphabet : 'A' .. 'Z'
         | 'a' .. 'z'
         ;

protected
AlphabeticUserDefinedWord : Alphabet (Alphabet | Digit | '-' | '_')*
                          | Digit (Digit | '-' | '_')* Alphabet
                          ;

protected
Literal : NonNumeric | Numeric
        ;

protected
NonNumeric : '"' ( (~'"') | '"' '"' )* '"'
           | '\'' ( (~'\'') | '\'' '\'')* '\''
           | ('X' | 'x') '"' HexDigits '"'
           | ('X' | 'x') '\'' HexDigits '\''
           ;
protected
Numeric : (('+' | '-')?('0' .. '9')* '.' ('0' .. '9')+)=>('+' | '-')?('0' .. 
'9')* '.' ('0' .. '9')+
        | ('+' | '-')? ('0' .. '9')+
        ;

protected
HexDigits : ('0' .. '9' | 'A' .. 'F' | 'a' .. 'f')+
          ;


protected
LevelNumber : (('0')? ('1' .. '9'))=> ('0')? ('1' .. '9')
            | (('1' .. '4') ('0' .. '9'))=> ('1' .. '4') ('0' .. '9')
            | ('6' '6')=>'6' '6'
            | ('7' '7')=>'7' '7'
            | ('8' '8')=>'8' '8'
            ;

protected
LiteralOrLevelNumber : (NonNumeric )=>NonNumeric { setType(Literal); }
                     | (Numeric)=>Numeric { setType(Literal); }
                     | (LevelNumber)=>LevelNumber { setType(LevelNumber); }
                     ;

protected
LiteralOrLevelNumberOrAlphabeticUserDefinedWord :
(LiteralOrLevelNumber)=>LiteralOrLevelNumber { 
setType(LiteralOrLevelNumber); }
                                                |
                                                
(AlphabeticUserDefinedWord)=>AlphabeticUserDefinedWord
                                                {
                                                
setType(AlphabeticUserDefinedWord);
                                                }
                                                ;



Initially I have conflict LiteralOrLevelNumber and AlphabeticUserDefinedWord 
then I made new Nonterminal LiteralOrLevelNumberOrAlphabeticUserDefinedWord, 
Is this approach is tech. Ok?


balvinder




_________________________________________________________________
Chat with friends online, try MSN Messenger: http://messenger.msn.com


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri May 31 07:57:36 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] SQL string literals
Message-ID: <170826586F3BD511910D0200C110AAA8032B499F@memail03.bco-home.com>

> STRING
>    : '"'! (~('"')|'"''"'!)*  '"'!
>    ;
> 
> Which results in:
> 
> ANTLR Parser Generator   Version 2.7.2a2 (20020112-1)   
> 1989-2002 jGuru.com
> sql.g:4: warning: lexical nondeterminism upon
> sql.g:4:        k==1:'"'
> sql.g:4:        between alt 2 and exit branch of block

I think a syntactic predicate would do the trick.  Try this:

STRING
   : '"'! (~('"')|('"''"')=>'"''"'!)*  '"'!
   ;

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pete.forman at westerngeco.com  Fri May 31 08:43:59 2002
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] SQL string literals
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B499F@memail03.bco-home
 .com>
Message-ID: <5.1.0.14.2.20020531164106.03b9f008@wgmail2.gatwick.eur.slb.com>

At 2002-05-31 07:57 -0700, mzukowski@yci.com wrote:
>I think a syntactic predicate would do the trick.  Try this:
>
>STRING
>    : '"'! (~('"')|('"''"')=>'"''"'!)*  '"'!
>    ;

sql.g:4: warning: lexical nondeterminism upon
sql.g:4:        k==1:'"'
sql.g:4:        between alt 2 and exit branch of block


-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From pete.forman at westerngeco.com  Fri May 31 08:40:53 2002
From: pete.forman at westerngeco.com (Pete Forman)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] SQL string literals
In-Reply-To: <F55auSgupUj2pODjpA400004489@hotmail.com>
Message-ID: <5.1.0.14.2.20020531163713.03b6cc28@wgmail2.gatwick.eur.slb.com>

At 2002-05-31 17:28 +0530, Balvinder Singh wrote:
>STRING
>      : '"'! (~('"')|(options( {greedy=false;}):'"''"'!)* ) '"'!
>      ;

sql.g:4:21: unexpected token: (
error: aborting grammar 'SqlLexer' due to errors
Exiting due to errors.


-- 
Pete Forman                -./\.-  Disclaimer: This post is originated
WesternGeco                  -./\.-   by myself and does not represent
pete.forman@westerngeco.com    -./\.-   opinion of Schlumberger, Baker
http://petef.port5.com           -./\.-   Hughes or their divisions.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri May 31 09:22:44 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] SQL string literals
In-Reply-To: <5.1.0.14.2.20020531164106.03b9f008@wgmail2.gatwick.eur.slb.com>; from pete.forman@westerngeco.com on Fri, May 31, 2002 at 04:43:59PM +0100
References: <170826586F3BD511910D0200C110AAA8032B499F@memail03.bco-home .com> <5.1.0.14.2.20020531164106.03b9f008@wgmail2.gatwick.eur.slb.com>
Message-ID: <20020531182244.I5892@cs.utwente.nl>

Hi,

On Fri, May 31, 2002 at 04:43:59PM +0100, Pete Forman wrote:
> At 2002-05-31 07:57 -0700, mzukowski@yci.com wrote:
> >I think a syntactic predicate would do the trick.  Try this:
> >
> >STRING
> >    : '"'! (~('"')|('"''"')=>'"''"'!)*  '"'!
> >    ;
>
> sql.g:4: warning: lexical nondeterminism upon
> sql.g:4:        k==1:'"'
> sql.g:4:        between alt 2 and exit branch of block

To sum up a few of the already posted things (I think the amount of '"'""'
etc. confused me here and there ;), so I rephrased/rewrote a few bits) :

You can :

STRING
: '"'!
	( { LA(2) == '\"' }? "\"\""! { $append('\"'); }
	| ~'"'
	)*
	'"'!
;

This gives a warning but that is ok. As you look at the code it does the
right thing. So you can turn of the warning:

STRING
: '"'!
	( options { warnWhenFollowAmbig=false; } : 
		{ LA(2) == '\"' }? "\"\""! { $append('\"'); }
	| ~'"'
	)*
	'"'!
;

Also:

STRING
: '"'!
	( ("\"\"") => "\"\""! { $append('\"'); }
	| ~'"'
	)*
	'"'!
;

Works but gives a warning. (slightly less efficient as the previous one)
Also here it's possible to turn of the warning...

Or:

Increase the lookahead.

class YourLexer extends Lexer;
options { k = 2 }

STRING
: '"'!
	( "\"\""! { $append('\"'); }
	| ~'"'
	)*
	'"'!
;

It is common to turn of warnings for 'known-to-be-good' cases. Usually a
quick glance at the generated code is enough to verify if this is valid.

HTH,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Innovation makes enemies of all those who prospered under the old
   regime, and only lukewarm support is forthcoming from those who would
               prosper under the new. --- Niccol Machiavelli


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Fri May 31 14:48:04 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
In-Reply-To: <20020531112557.15159.qmail@web14808.mail.yahoo.com>
Message-ID: <ad8r2k+67n9@eGroups.com>

--- In antlr-interest@y..., Bogdan Mitu <bogdan_mt@y...> wrote:
> 
> --- Terence Parr <parrt@j...> wrote:
> > Cool.  There should be lots of work for all...Loring is talking 
about an 
> > editor that highlights ambiguities etc... ;)
> 
> Here I might be able to help. I already have an editor with syntax 
highlight
> for ANTLR, an improved Ant task, and kind of "unit test" framework 
for ANTLR
> grammars. If someone needs them, just let me know.

That would help.  What I've actually been thinking about is an 
interactive development environment for ANTLR with
    1.)  Rule database.  This would make it easier to reuse pieces of 
grammars.
    2.)  Refactoring support.  This would include ordering 
alternatives to minimize "k" within a rule, computation of minimal 
syntactic predicates, etc.
    3.)  Tree grammar generation and storage of rewrites:  the idea is 
that you generate a tree grammar from a predecessor parse or tree 
grammar, and refactor the generated grammar.  After the predecessor 
grammar is changed, a new version of the tree grammar is generated and 
the refactorings applied automatically.
    4.)  Interactive grammar analysis and editing support for a 
multi-grammar chain (lexer, parser, multiple tree grammars).
    5.)  Output "grammar" support.  This is the last painful part of 
building ANTLR translators.
    6.)  Full LL(k) analysis and predicate hoisting (just to point out 
that John Mitchell has the right idea here).
    7.)  Testing support.
    8.)  Whatever else makes sense.  You mentioned reverse translation 
support in a previous post; that might be possible via adding 
"comments" on deleted nodes (! is not reversible otherwise) and 
figuring out how to generate an ANTLR grammar as output--I suspect 
that that would not be too difficult.

Except for the output grammar stuff (Ter's working on that), most of 
this is either an extension of the current ANTLR engine or borrows 
from other efforts.  My guess is that this would drastically reduce 
turnaround for developing a language translator.  I suspect that such 
an environment would make development of domain specific languages 
into ordinary programming practice.

--Loring

> 
> Bogdan 
> 
> > Ter



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Fri May 31 14:57:54 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
Message-ID: <170826586F3BD511910D0200C110AAA8032B49A5@memail03.bco-home.com>

I would add 

    9.)  Error history.  Some errors and warnings can't be turned off, even
when you want to.  It'd be nice to know what are only 'new' errors and
warnings.
    10.)  Built in version control.  I do an RCS checkin with every compile
because it's so easy to lose a semicolon or whatnot.  This should persist
across invocations of the editor, (persistent undo, basically) but not rely
on the normal version control someone is using for the whole project.

Monty
www.codetransform.com

> -----Original Message-----
> From: lgcraymer [mailto:lgc@mail1.jpl.nasa.gov]
> Sent: Friday, May 31, 2002 2:48 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
> 
> 
> --- In antlr-interest@y..., Bogdan Mitu <bogdan_mt@y...> wrote:
> > 
> > --- Terence Parr <parrt@j...> wrote:
> > > Cool.  There should be lots of work for all...Loring is talking 
> about an 
> > > editor that highlights ambiguities etc... ;)
> > 
> > Here I might be able to help. I already have an editor with syntax 
> highlight
> > for ANTLR, an improved Ant task, and kind of "unit test" framework 
> for ANTLR
> > grammars. If someone needs them, just let me know.
> 
> That would help.  What I've actually been thinking about is an 
> interactive development environment for ANTLR with
>     1.)  Rule database.  This would make it easier to reuse pieces of 
> grammars.
>     2.)  Refactoring support.  This would include ordering 
> alternatives to minimize "k" within a rule, computation of minimal 
> syntactic predicates, etc.
>     3.)  Tree grammar generation and storage of rewrites:  
> the idea is 
> that you generate a tree grammar from a predecessor parse or tree 
> grammar, and refactor the generated grammar.  After the predecessor 
> grammar is changed, a new version of the tree grammar is 
> generated and 
> the refactorings applied automatically.
>     4.)  Interactive grammar analysis and editing support for a 
> multi-grammar chain (lexer, parser, multiple tree grammars).
>     5.)  Output "grammar" support.  This is the last painful part of 
> building ANTLR translators.
>     6.)  Full LL(k) analysis and predicate hoisting (just to 
> point out 
> that John Mitchell has the right idea here).
>     7.)  Testing support.
>     8.)  Whatever else makes sense.  You mentioned reverse 
> translation 
> support in a previous post; that might be possible via adding 
> "comments" on deleted nodes (! is not reversible otherwise) and 
> figuring out how to generate an ANTLR grammar as output--I suspect 
> that that would not be too difficult.
> 
> Except for the output grammar stuff (Ter's working on that), most of 
> this is either an extension of the current ANTLR engine or borrows 
> from other efforts.  My guess is that this would drastically reduce 
> turnaround for developing a language translator.  I suspect that such 
> an environment would make development of domain specific languages 
> into ordinary programming practice.
> 
> --Loring
> 
> > 
> > Bogdan 
> > 
> > > Ter
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lgc at mail1.jpl.nasa.gov  Fri May 31 15:22:02 2002
From: lgc at mail1.jpl.nasa.gov (lgcraymer)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B49A5@memail03.bco-home.com>
Message-ID: <ad8t2a+2pou@eGroups.com>

--- In antlr-interest@y..., mzukowski@y... wrote:
> I would add 
> 
>     9.)  Error history.  Some errors and warnings can't be turned 
off, even
> when you want to.  It'd be nice to know what are only 'new' errors 
and
> warnings.

And interactive grammar development means that some errors will 
persist for several editing cycles until the grammar is "complete".  
An interactive environment will give us some incentive to make sure 
that there are no unfixable errors/warnings within ANTLR.  Getting rid 
of all causes for error messages is a part of the cleanup phase of 
development!

>     10.)  Built in version control.  I do an RCS checkin with every 
compile
> because it's so easy to lose a semicolon or whatnot.  This should 
persist
> across invocations of the editor, (persistent undo, basically) but 
not rely
> on the normal version control someone is using for the whole 
project.

Yes, indeed.  An interface to CVS (RCS) should be built in.  After 
working with VAJ, I don't think that we want to build in something 
less capable.

One other point that Ter and I have talked about and has been 
discussed in this NG:  this should be an open source effort with a 
civilized license (not GNU) that allows commercial use.

--Loring

> 
> Monty
> www.codetransform.com
> 
> > -----Original Message-----
> > From: lgcraymer [mailto:lgc@m...]
> > Sent: Friday, May 31, 2002 2:48 PM
> > To: antlr-interest@y...
> > Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
> > 
> > 
> > --- In antlr-interest@y..., Bogdan Mitu <bogdan_mt@y...> wrote:
> > > 
> > > --- Terence Parr <parrt@j...> wrote:
> > > > Cool.  There should be lots of work for all...Loring is 
talking 
> > about an 
> > > > editor that highlights ambiguities etc... ;)
> > > 
> > > Here I might be able to help. I already have an editor with 
syntax 
> > highlight
> > > for ANTLR, an improved Ant task, and kind of "unit test" 
framework 
> > for ANTLR
> > > grammars. If someone needs them, just let me know.
> > 
> > That would help.  What I've actually been thinking about is an 
> > interactive development environment for ANTLR with
> >     1.)  Rule database.  This would make it easier to reuse pieces 
of 
> > grammars.
> >     2.)  Refactoring support.  This would include ordering 
> > alternatives to minimize "k" within a rule, computation of minimal 
> > syntactic predicates, etc.
> >     3.)  Tree grammar generation and storage of rewrites:  
> > the idea is 
> > that you generate a tree grammar from a predecessor parse or tree 
> > grammar, and refactor the generated grammar.  After the 
predecessor 
> > grammar is changed, a new version of the tree grammar is 
> > generated and 
> > the refactorings applied automatically.
> >     4.)  Interactive grammar analysis and editing support for a 
> > multi-grammar chain (lexer, parser, multiple tree grammars).
> >     5.)  Output "grammar" support.  This is the last painful part 
of 
> > building ANTLR translators.
> >     6.)  Full LL(k) analysis and predicate hoisting (just to 
> > point out 
> > that John Mitchell has the right idea here).
> >     7.)  Testing support.
> >     8.)  Whatever else makes sense.  You mentioned reverse 
> > translation 
> > support in a previous post; that might be possible via adding 
> > "comments" on deleted nodes (! is not reversible otherwise) and 
> > figuring out how to generate an ANTLR grammar as output--I suspect 
> > that that would not be too difficult.
> > 
> > Except for the output grammar stuff (Ter's working on that), most 
of 
> > this is either an extension of the current ANTLR engine or borrows 
> > from other efforts.  My guess is that this would drastically 
reduce 
> > turnaround for developing a language translator.  I suspect that 
such 
> > an environment would make development of domain specific languages 
> > into ordinary programming practice.
> > 
> > --Loring
> > 
> > > 
> > > Bogdan 
> > > 
> > > > Ter
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Matthew.Ford at forward.com.au  Fri May 31 18:16:22 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
References: <170826586F3BD511910D0200C110AAA8032B49A5@memail03.bco-home.com>
Message-ID: <000401c20909$f1a986d0$0200a8c0@matthewfnb>

My two bits worth are (mainly to do with user interface)
11) No dialog boxes that ask you "Do you really want to do that", even for
deletes and overwrites of files.  These should be replaced with unlimited
undo (persistent would be nice).
11a) As a corollary of 11) no  "File Save"  menu item as any changes you
make should be always be saved (Hay that's why you made them wasn't it).

matthew
----- Original Message -----
From: <mzukowski@yci.com>
To: <antlr-interest@yahoogroups.com>
Sent: Saturday, June 01, 2002 7:57 AM
Subject: RE: [antlr-interest] Re: ACE C preprocessor by Gosling


> I would add
>
>     9.)  Error history.  Some errors and warnings can't be turned off,
even
> when you want to.  It'd be nice to know what are only 'new' errors and
> warnings.
>     10.)  Built in version control.  I do an RCS checkin with every
compile
> because it's so easy to lose a semicolon or whatnot.  This should persist
> across invocations of the editor, (persistent undo, basically) but not
rely
> on the normal version control someone is using for the whole project.
>
> Monty
> www.codetransform.com
>
> > -----Original Message-----
> > From: lgcraymer [mailto:lgc@mail1.jpl.nasa.gov]
> > Sent: Friday, May 31, 2002 2:48 PM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] Re: ACE C preprocessor by Gosling
> >
> >
> > --- In antlr-interest@y..., Bogdan Mitu <bogdan_mt@y...> wrote:
> > >
> > > --- Terence Parr <parrt@j...> wrote:
> > > > Cool.  There should be lots of work for all...Loring is talking
> > about an
> > > > editor that highlights ambiguities etc... ;)
> > >
> > > Here I might be able to help. I already have an editor with syntax
> > highlight
> > > for ANTLR, an improved Ant task, and kind of "unit test" framework
> > for ANTLR
> > > grammars. If someone needs them, just let me know.
> >
> > That would help.  What I've actually been thinking about is an
> > interactive development environment for ANTLR with
> >     1.)  Rule database.  This would make it easier to reuse pieces of
> > grammars.
> >     2.)  Refactoring support.  This would include ordering
> > alternatives to minimize "k" within a rule, computation of minimal
> > syntactic predicates, etc.
> >     3.)  Tree grammar generation and storage of rewrites:
> > the idea is
> > that you generate a tree grammar from a predecessor parse or tree
> > grammar, and refactor the generated grammar.  After the predecessor
> > grammar is changed, a new version of the tree grammar is
> > generated and
> > the refactorings applied automatically.
> >     4.)  Interactive grammar analysis and editing support for a
> > multi-grammar chain (lexer, parser, multiple tree grammars).
> >     5.)  Output "grammar" support.  This is the last painful part of
> > building ANTLR translators.
> >     6.)  Full LL(k) analysis and predicate hoisting (just to
> > point out
> > that John Mitchell has the right idea here).
> >     7.)  Testing support.
> >     8.)  Whatever else makes sense.  You mentioned reverse
> > translation
> > support in a previous post; that might be possible via adding
> > "comments" on deleted nodes (! is not reversible otherwise) and
> > figuring out how to generate an ANTLR grammar as output--I suspect
> > that that would not be too difficult.
> >
> > Except for the output grammar stuff (Ter's working on that), most of
> > this is either an extension of the current ANTLR engine or borrows
> > from other efforts.  My guess is that this would drastically reduce
> > turnaround for developing a language translator.  I suspect that such
> > an environment would make development of domain specific languages
> > into ordinary programming practice.
> >
> > --Loring
> >
> > >
> > > Bogdan
> > >
> > > > Ter
> >
> >
> >
> >
> >
> > Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From glindholm at yahoo.com  Fri May 31 20:24:39 2002
From: glindholm at yahoo.com (glindholm)
Date: Mon Dec 20 16:14:51 2004
Subject: [antlr-interest] Re: SQL string literals
In-Reply-To: <20020531182244.I5892@cs.utwente.nl>
Message-ID: <ad9epn+9lgi@eGroups.com>

With K=2 I believe this will do what you want. It will allow doubled-
up quotes within a quoted string.

options {
    k=2;
}

STRING
    :   '"'  ( ('"'  '"')   | ~('"'))*  '"'
    |   '\'' ( ('\'' '\'')  | ~('\''))* '\''
    ;


(This might be the same as your original attempt but you need to set 
k=2. :)

Greg
--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:
> Hi,
> 
> On Fri, May 31, 2002 at 04:43:59PM +0100, Pete Forman wrote:
> > At 2002-05-31 07:57 -0700, mzukowski@y... wrote:
> > >I think a syntactic predicate would do the trick.  Try this:
> > >
> > >STRING
> > >    : '"'! (~('"')|('"''"')=>'"''"'!)*  '"'!
> > >    ;
> >
> > sql.g:4: warning: lexical nondeterminism upon
> > sql.g:4:        k==1:'"'
> > sql.g:4:        between alt 2 and exit branch of block
> 
> To sum up a few of the already posted things (I think the amount 
of '"'""'
> etc. confused me here and there ;), so I rephrased/rewrote a few 
bits) :
> 
> You can :
> 
> STRING
> : '"'!
> 	( { LA(2) == '\"' }? "\"\""! { $append('\"'); }
> 	| ~'"'
> 	)*
> 	'"'!
> ;
> 
> This gives a warning but that is ok. As you look at the code it 
does the
> right thing. So you can turn of the warning:
> 
> STRING
> : '"'!
> 	( options { warnWhenFollowAmbig=false; } : 
> 		{ LA(2) == '\"' }? "\"\""! { $append('\"'); }
> 	| ~'"'
> 	)*
> 	'"'!
> ;
> 
> Also:
> 
> STRING
> : '"'!
> 	( ("\"\"") => "\"\""! { $append('\"'); }
> 	| ~'"'
> 	)*
> 	'"'!
> ;
> 
> Works but gives a warning. (slightly less efficient as the 
previous one)
> Also here it's possible to turn of the warning...
> 
> Or:
> 
> Increase the lookahead.
> 
> class YourLexer extends Lexer;
> options { k = 2 }
> 
> STRING
> : '"'!
> 	( "\"\""! { $append('\"'); }
> 	| ~'"'
> 	)*
> 	'"'!
> ;
> 
> It is common to turn of warnings for 'known-to-be-good' cases. 
Usually a
> quick glance at the generated code is enough to verify if this is 
valid.
> 
> HTH,
> 
> Ric
> --



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

