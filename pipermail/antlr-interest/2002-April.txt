From praveen_c at yahoo.com  Mon Apr  1 00:54:10 2002
From: praveen_c at yahoo.com (praveen_c)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Parser performance - newbie question.
Message-ID: <a8977i+oi91@eGroups.com>

Hi, 

I'm new to the world of Parser Generators/Lexers. I just learned 
about what ANTLR and JavaCC can do and I'm pretty excited about 'em. 
While I don't have a complete understanding of what these tools can 
do, I do have the following questions.

I'm trying to write a parser that recognizes specials tags in a HTML 
template at runtime( in a J2EE server ). Would a parser generated 
from ANTLR or JavaCC offer acceptable performance when used to parse 
HTML templates at runtime? My gut feeling is that I can handcode a 
parser that offers better performance that the generated parser. I 
think I can optimize it better for my needs. Is that a right 
approach? I know when it comes to extensibility, I'll loose. But I'm 
willing take that risk. 

Thanks in advance for any responses.

-Praveen.




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From remus at nolimits.ro  Mon Apr  1 01:13:13 2002
From: remus at nolimits.ro (Remus Pereni)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Parser performance - newbie question.
In-Reply-To: <a8977i+oi91@eGroups.com>
References: <a8977i+oi91@eGroups.com>
Message-ID: <1464104792.20020401121313@nolimits.ro>

Hello praveen_c,

Monday, April 01, 2002, 11:54:10 AM, you wrote:

p> Hi, 

p> I'm new to the world of Parser Generators/Lexers. I just learned 
p> about what ANTLR and JavaCC can do and I'm pretty excited about 'em. 
p> While I don't have a complete understanding of what these tools can 
p> do, I do have the following questions.

Yes it is exactly what you need then !

p> I'm trying to write a parser that recognizes specials tags in a HTML 
p> template at runtime( in a J2EE server ). Would a parser generated 
p> from ANTLR or JavaCC offer acceptable performance when used to parse 
p> HTML templates at runtime? My gut feeling is that I can handcode a 
p> parser that offers better performance that the generated parser. I 
p> think I can optimize it better for my needs. Is that a right 
p> approach? I know when it comes to extensibility, I'll loose. But I'm 
p> willing take that risk. 

While I have no doubt that you could write your own parser it is not
worth the effort. From my experience what ANTLR generates it is
quite fast ( I had no concerns at all about the speed of
the lexer/parser/tree walker and I've done a full blown oo scripting
language).

Anyhow I believe there will be very small difference in
speed between your hand coded parser and an antlr generated one and
your time would be a lot more well spent if you go with antlr and
use the saved time to work on caching ;)

I work with anltr for almost a year now and I have the most positive
feelings about it. It is an excellent tool, thank you guys!

p> Thanks in advance for any responses.

p> -Praveen.

Best regards,
     Remus
--
Remus Pereni                  mailto:remus@nolimits.ro
http://neuro.nolimits.ro      http://mappa.mundi.net/spacemapper
http://www.nolimits.ro        http://rue.nolimits.ro



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Mon Apr  1 04:10:35 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] ANTLR vs btyacc/treecc?
Message-ID: <a89inr+c95a@eGroups.com>

Hi,

Has anyone had deep-ish experience of both systems. SInce they can 
both generate parsers and tree-walkers, I wonder what the differences 
are?

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From remi.koutcherawy at wanadoo.fr  Mon Apr  1 09:48:12 2002
From: remi.koutcherawy at wanadoo.fr (Remi Koutcherawy)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] What's a TreeParser and why do I want one?
References: <F1221EE0-44F9-11D6-84F7-0030653DE0D6@jguru.com>
Message-ID: <001101c1d9a5$651523c0$6f1c0b50@m5q0n9>


----- Original Message ----- 
From: "Terence Parr" <parrt@jguru.com>
To: <antlr-interest@yahoogroups.com>
Sent: Monday, April 01, 2002 12:52 AM
Subject: Re: [antlr-interest] What's a TreeParser and why do I want one?



On Sunday, March 31, 2002, at 02:49  PM, Terence Parr wrote:

>
> On Sunday, March 31, 2002, at 02:26  AM, Lloyd Dupont wrote:
>
>> Hi fellow ANTLR users...
>> 
>> hmm, I am quite new to ANTLR and, hum, stil inelarning process before
>> real work...
>> hmm.. what is the real use of TreeParser ?
>> 
>> I have my work/test project under my eyes and wonder why bother with a
>> TreeParser (who need an already parsed AST) when I could make my stuff
>> directly in the Parser ?
>
> Hi There,  I just added a (long) FAQ entry to answer this question :)

oops...here is link:

http://www.jguru.com/faq/view.jsp?EID=818959

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Mon Apr  1 13:53:31 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] What's a TreeParser and why do I want one?
References: <F1221EE0-44F9-11D6-84F7-0030653DE0D6@jguru.com>
Message-ID: <000901c1d9c7$ab182490$5fb00ad2@hermes>

interesting, indeed, thanks.

>
> Hi There,  I just added a (long) FAQ entry to answer this question :)

oops...here is link:

http://www.jguru.com/faq/view.jsp?EID=818959

Ter



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Tue Apr  2 02:24:07 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] learning pitfall....
Message-ID: <006b01c1da30$860ba500$eca60ad2@hermes>

still learning ANTLR and having problems.....

I try with my real problem which is, amongst other things, to rewrite my Java interprer with ANTLR.

I want it to be able to read java or my (so-called) "LJSH script" which could have, for example, import statement anyway.

so I try to compile this:

the java.g grammar (in examples\java\java), this work well.

But if I add this production in the grammar:
// ------- added in java.g, in JavaRecognizer class ----------
script : (statement | importDefinition) *  ;
//---------------------------------------------------------------------

there is suddenly a non determinism in "identifierStar" rule, I hardly figure it why and how to debug this.
HHHHHHHHHEEEEEEEEEEEEELLLLLLLLLLLPPPPPPPPPPPP
Please......
(Thanks)

By the way, reading anything I could about nondeterminism I see an example with a token set like that :
-------------
('b' | )
--------------
I hardly figure out what this could mean ! could you explain ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020402/6797dcfd/attachment.html
From klaren at cs.utwente.nl  Tue Apr  2 02:36:03 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] learning pitfall....
In-Reply-To: <006b01c1da30$860ba500$eca60ad2@hermes>; from lloyd@galador.net on Tue, Apr 02, 2002 at 08:24:07PM +1000
References: <006b01c1da30$860ba500$eca60ad2@hermes>
Message-ID: <20020402123603.C4028@cs.utwente.nl>

On Tue, Apr 02, 2002 at 08:24:07PM +1000, Lloyd Dupont wrote:
> But if I add this production in the grammar:
> // ------- added in java.g, in JavaRecognizer class ----------
> script : (statement | importDefinition) *  ;
> //---------------------------------------------------------------------

The problem is that this rule can be empty (zero or more times something).
Which will not work (antlr needs lookahead to decide things if a rule can
be empty there's nothing to decide with...) Rewriting to something like

calling_rule: yyy (script)? xxx ;
script: (statement | importDefinition)+ ;

Will solve the problem.

> By the way, reading anything I could about nondeterminism I see an example with a token set like that :
> -------------
> ('b' | )
> --------------
> I hardly figure out what this could mean ! could you explain ?

Its a 'b' or nothing or in other words an optional 'b'. Or alternatively (
'b' )? Sometimes its covenient to write an optional alternative like this
in order to add specific action code for the empty alternative.

Hope this helps,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 'And this 'rebooting' business? Give it a good kicking, do you?' 'Oh, no,
  of course, we ... that is ... well, yes, in fact,' said Ponder. 'Adrian
    goes round the back and ... er ... prods it with his foot. But in a
     technical way,' he added. --- From: Hogfather by Terry Pratchett.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Tue Apr  2 02:45:49 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] learning pitfall....
References: <006b01c1da30$860ba500$eca60ad2@hermes> <20020402123603.C4028@cs.utwente.nl>
Message-ID: <00dc01c1da33$901c0ff0$eca60ad2@hermes>

From: "Ric Klaren" <klaren@cs.utwente.nl>
> in order to add specific action code for the empty alternative.
> ....
> Hope this helps,
> Ric

... (TESTING PHASE) ....
... (READING AGAIN PHASE) ....
... (TESTING AGAIN PHASE) .....
... Wouahhh !!!!

so fast, so clear, so usefull !
Big thanks !


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From spenserkao at optushome.com.au  Tue Apr  2 06:47:11 2002
From: spenserkao at optushome.com.au (spenserkao)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Question about using Nongreedy Subrules
Message-ID: <a8cg9f+9pkd@eGroups.com>

I tried to test Nongreedy Subrules, under ANTLR v2.7.1, onto a C-
style comment. The compilation was successful, but I kept receiving 
runtime error. Can someone give me a hint? Thanks for any help in 
advance!

--- Start of Runtime error message ---
Exception: antlr.TokenStreamRecognitionException: expecting '*', 
found ' '
--- End of Runtime error message ---

--- Start of Input test data ---
/* BA */
--- End of Input test data ---

--- Start of grammar code(.g) ---  
header {
	import java.io.*;
	import java.util.*;
}

class P extends Parser;

startRule
    :   
	n:COMMENT_BLOCK
	;

class L extends Lexer;
options {
	k=2;
}

COMMENT_BLOCK
	:	"/*" 
		(
			options {
				greedy=false;
			}
		:	.
		)* 
		"*/" 
	{ System.out.println($getText); }
	;
--- End of grammar code(.g) ---



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Tue Apr  2 07:01:46 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Question about using Nongreedy Subrules
Message-ID: <170826586F3BD511910D0200C110AAA8032B4859@memail03.bco-home.com>

You don't have ' ' in your lexer vocabulary, I'm suprised it even recognized
the B and A.  Anyways add this to your lexer options, as documented in
http://www.antlr.org/doc/options.html#charVocabulary:

charVocabulary = '\3'..'\377';

Monty
www.codetransform.com

> -----Original Message-----
> From: spenserkao [mailto:spenserkao@optushome.com.au]
> Sent: Tuesday, April 02, 2002 6:47 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Question about using Nongreedy Subrules
> 
> 
> I tried to test Nongreedy Subrules, under ANTLR v2.7.1, onto a C-
> style comment. The compilation was successful, but I kept receiving 
> runtime error. Can someone give me a hint? Thanks for any help in 
> advance!
> 
> --- Start of Runtime error message ---
> Exception: antlr.TokenStreamRecognitionException: expecting '*', 
> found ' '
> --- End of Runtime error message ---
> 
> --- Start of Input test data ---
> /* BA */
> --- End of Input test data ---
> 
> --- Start of grammar code(.g) ---  
> header {
> 	import java.io.*;
> 	import java.util.*;
> }
> 
> class P extends Parser;
> 
> startRule
>     :   
> 	n:COMMENT_BLOCK
> 	;
> 
> class L extends Lexer;
> options {
> 	k=2;
> }
> 
> COMMENT_BLOCK
> 	:	"/*" 
> 		(
> 			options {
> 				greedy=false;
> 			}
> 		:	.
> 		)* 
> 		"*/" 
> 	{ System.out.println($getText); }
> 	;
> --- End of grammar code(.g) ---
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From spenserkao at optushome.com.au  Tue Apr  2 07:23:39 2002
From: spenserkao at optushome.com.au (spenserkao)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Re: Question about using Nongreedy Subrules
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4859@memail03.bco-home.com>
Message-ID: <a8cidr+kgah@eGroups.com>

It works! Thanks for the useful hint.

Spenser
--- In antlr-interest@y..., mzukowski@b... wrote:
> You don't have ' ' in your lexer vocabulary, I'm suprised it even 
recognized
> the B and A.  Anyways add this to your lexer options, as 
documented in
> http://www.antlr.org/doc/options.html#charVocabulary:
> 
> charVocabulary = '\3'..'\377';
> 
> Monty
> www.codetransform.com
> 
> > -----Original Message-----
> > From: spenserkao [mailto:spenserkao@o...]
> > Sent: Tuesday, April 02, 2002 6:47 AM
> > To: antlr-interest@y...
> > Subject: [antlr-interest] Question about using Nongreedy Subrules
> > 
> > 
> > I tried to test Nongreedy Subrules, under ANTLR v2.7.1, onto a C-
> > style comment. The compilation was successful, but I kept 
receiving 
> > runtime error. Can someone give me a hint? Thanks for any help 
in 
> > advance!
> > 
> > --- Start of Runtime error message ---
> > Exception: antlr.TokenStreamRecognitionException: expecting '*', 
> > found ' '
> > --- End of Runtime error message ---
> > 
> > --- Start of Input test data ---
> > /* BA */
> > --- End of Input test data ---
> > 
> > --- Start of grammar code(.g) ---  
> > header {
> > 	import java.io.*;
> > 	import java.util.*;
> > }
> > 
> > class P extends Parser;
> > 
> > startRule
> >     :   
> > 	n:COMMENT_BLOCK
> > 	;
> > 
> > class L extends Lexer;
> > options {
> > 	k=2;
> > }
> > 
> > COMMENT_BLOCK
> > 	:	"/*" 
> > 		(
> > 			options {
> > 				greedy=false;
> > 			}
> > 		:	.
> > 		)* 
> > 		"*/" 
> > 	{ System.out.println($getText); }
> > 	;
> > --- End of grammar code(.g) ---
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Apr  2 08:54:39 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Searching FAQ before asking questions
In-Reply-To: <a8cidr+kgah@eGroups.com>
Message-ID: <52099FFD-465A-11D6-84F7-0030653DE0D6@jguru.com>


On Tuesday, April 2, 2002, at 07:23  AM, spenserkao wrote:

> It works! Thanks for the useful hint.

Howdy folks.  That was a damn good question.  But please take a second 
to search the ANTLR FAQ at jGuru before asking questions.  For example, 
this specific question is answered at:

http://www.jguru.com/faq/view.jsp?EID=458369

Saves Monty from having to type so much ;)

Best regards,
Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Tue Apr  2 15:25:08 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:44 2004
Subject: following: [antlr-interest] learning pitfall....
References: <006b01c1da30$860ba500$eca60ad2@hermes> <20020402123603.C4028@cs.utwente.nl>
Message-ID: <00ad01c1da9d$a1a880e0$65a70ad2@hermes>

> > But if I add this production in the grammar "java.g":
> > // ------- added in java.g, in JavaRecognizer class ----------
> > script : (statement | importDefinition) *  ;
> > //---------------------------------------------------------------------
> > the grammar (in examples/java/java) no longer work
>
> The problem is that this rule can be empty (zero or more times something).
> Which will not work (antlr needs lookahead to decide things if a rule can
> be empty there's nothing to decide with...) Rewriting to something like
> ....

after more reflexion I am not really satisfyied.
It appear that this help me find solution but:

1st/
the script is not EMPTY, there is at least "EOF" (implictly added), you
could have blank script (file empty) and it should work !

2n/
// --------------------------
script: ( statement ) * ;
// --------------------------
work perfectly without problem. but I do want to have import !

.....
so anyidea about what's wrong with importDefinition rule ?
(examples/java/java/java.g grammar)


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From greenj at ix.netcom.com  Tue Apr  2 15:33:19 2002
From: greenj at ix.netcom.com (John Allen Green)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] nodes, hidden tokens, garbage collection
Message-ID: <139359979.1017761599@[192.168.0.1]>

Hi all,

There's an old issue with hidden tokens: they are doubly-linked, therefore,
they must be manually cleaned up at the time that you delete the AST.

(Simply deleting the AST doesn't take care of them because they refer to
each other, so their reference count never drops to zero. If you don't,
then they are a memory leak.)

I'm just starting to look at a bit of a design issue. I'm adding an API to
my parser so that nodes can be added, deleted, moved around, etc.
Obviously, hidden tokens will be a bit of an issue.

To make things even more fun, I've got backwards links in my custom AST
type from child to parent and from sibling to previous sibling, for
purposes of my API. (Don't ask) So, because of that, I've got the same sort
of issue with regular AST nodes as with the existing hiddenToken objects.

Like I said - I've just started considering the issues and thinking about
design options. I'm wondering if anybody has any advice.

For example:
- has anybody on this list done this sort of thing before?
- has anybody used, or considered using, a garbage collector with Antlr AST?
- any other words of wisdom?

Thanks in advance,
John Green



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Tue Apr  2 16:15:52 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Re: Searching FAQ before asking questions
In-Reply-To: <52099FFD-465A-11D6-84F7-0030653DE0D6@jguru.com>
Message-ID: <a8dhjo+qhfp@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> 
> On Tuesday, April 2, 2002, at 07:23  AM, spenserkao wrote:
> 
> > It works! Thanks for the useful hint.
> 
> Howdy folks.  That was a damn good question.  But please take a 
second 
> to search the ANTLR FAQ at jGuru before asking questions.

Terrence,

Is it possible to have the FAQ exported as a PDF file, HTML archive 
or some similar format for offline use?

It's online-only nature means I can only get to it occasionally. Not 
very useful to me IOW. ;-(

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Apr  2 22:19:40 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Re: Searching FAQ before asking questions
In-Reply-To: <a8dhjo+qhfp@eGroups.com>
Message-ID: <C80F104B-46CA-11D6-84F7-0030653DE0D6@jguru.com>


On Tuesday, April 2, 2002, at 04:15  PM, micheal_jor wrote:

> --- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
>>
>> On Tuesday, April 2, 2002, at 07:23  AM, spenserkao wrote:
>>
>>> It works! Thanks for the useful hint.
>>
>> Howdy folks.  That was a damn good question.  But please take a
> second
>> to search the ANTLR FAQ at jGuru before asking questions.
>
> Terrence,
>
> Is it possible to have the FAQ exported as a PDF file, HTML archive
> or some similar format for offline use?
>
> It's online-only nature means I can only get to it occasionally. Not
> very useful to me IOW. ;-(

There is a printable version that is very simple text.  Link is called 
"Printable View" in gutter.  here ya go:

http://www.jguru.com/faq/printablefaq.jsp?topic=ANTLR

I know what you mean.  Sometimes it's easier to absorb offline (like on 
an airplane!). :)

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Wed Apr  3 00:51:16 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] nodes, hidden tokens, garbage collection
In-Reply-To: <139359979.1017761599@[192.168.0.1]>; from greenj@ix.netcom.com on Tue, Apr 02, 2002 at 03:33:19PM -0800
References: <139359979.1017761599@[192.168.0.1]>
Message-ID: <20020403105116.H4028@cs.utwente.nl>

On Tue, Apr 02, 2002 at 03:33:19PM -0800, John Allen Green wrote:
> Like I said - I've just started considering the issues and thinking about
> design options. I'm wondering if anybody has any advice.
> 
> For example:
> - has anybody on this list done this sort of thing before?
> - has anybody used, or considered using, a garbage collector with Antlr AST?
> - any other words of wisdom?

Add 2 & 3: You can change the AST's to use a memory pool (add custom
new/delete) and hack a bit on the codegenerator and support lib to
completely loose the RefCounts. This would probably clean the code up quite
a ways. After that build the AST as usual and at the end do a garbage
collection over you memory pool.

I want to implement this kindoff scheme as the default practice for C++
since the reference counter is a PITA. (Or let me rephrase it to I want to
make a devel version that implements this scheme) I planned to do this
around easter but some social stuff got in the way ;)

Losing the reference count would also mean that the debugability of my
project would increase by lots with a gcc 3.0.4, gdb 5.2 prerelease and
dwarf2 debugging info's. Now it's nearly functional except that the
reference counter still throws gdb off.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
				  of UCSD Pascal ever released..." --- Larry Smith

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Wed Apr  3 04:03:46 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] I don't understand.....
Message-ID: <001601c1db07$9c658f00$35be0ad2@hermes>

why this (stupid) grammar has problem ?

why OPTION 2 has problem ? it seems quite clear to me !
by the way it is roughly the same than OPTION 1 which work, why ?
//-------------------------------- main.g ----------------------------------
header {
import java.io.FileInputStream;
}

class Main extends Parser;
options {
 buildAST = true;
}

{
    public static void main(String[] args)
     throws Exception
    {
        DCReader l = new DCReader(new FileInputStream("file"));
        Main     p = new Main(l);
        
        System.out.println("start parsing ...");
        p.file();
        System.out.println("find: " + p.getAST());
    }
}

/*
// ------------------- OPTION 1
file: (ID {System.out.println("ID");}
 | NUM {System.out.println("NUM");}
    ) +;

class DCReader extends Lexer;

ID: (CHAR) + ;
NUM: (DIGIT) + ;

protected CHAR: 'a' .. 'z' | 'A' .. 'Z' | '_' | '$' | '.' ;
protected DIGIT: '0' .. '9' ;

WS : (' ' | '\t' | '\f' )+ { _ttype = Token.SKIP; } ;

/**/
// ------------------- OPTION 2
file: (name {System.out.println("name");}
 | number {System.out.println("number");}
    ) +;

name: (CHAR) + ;
number: (DIGIT) + ;

class DCReader extends Lexer;

CHAR: 'a' .. 'z' | 'A' .. 'Z' | '_' | '$' | '.' ;
DIGIT: '0' .. '9' ;

WS : (' ' | '\t' | '\f' )+ { _ttype = Token.SKIP; } ;

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020403/1aa05b27/attachment.html
From s.piree at enneya.com  Wed Apr  3 04:20:06 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] I don't understand.....
References: <001601c1db07$9c658f00$35be0ad2@hermes>
Message-ID: <000801c1db09$e4b39ed0$0100a8c0@daemon>

> why this (stupid) grammar has problem ?
>    file: (name | number) +;
>    name: (CHAR) + ;
>    number: (DIGIT) + ;

Given input "AB C" this could parse as:

    name (A)  name (B)  name (C)
 
or 

    name (ABC)

So there's a conflict. 

If you want to do it like this, then you probably want to return
space as token to separate names (and numbers).

Silvain



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From john-yahoo at pybus.org  Wed Apr  3 06:33:51 2002
From: john-yahoo at pybus.org (John P N Pybus)
Date: Mon Dec 20 16:14:44 2004
Subject: following: [antlr-interest] learning pitfall....
In-Reply-To: <00ad01c1da9d$a1a880e0$65a70ad2@hermes>
References: <006b01c1da30$860ba500$eca60ad2@hermes> <20020402123603.C4028@cs.utwente.nl> <00ad01c1da9d$a1a880e0$65a70ad2@hermes>
Message-ID: <E16slpf-0002DT-00@frontend2.herald.ox.ac.uk>

On Wednesday 03 Apr 2002 12:25 am, you (Lloyd Dupont) wrote:
> > > But if I add this production in the grammar "java.g":
> > > // ------- added in java.g, in JavaRecognizer class ----------
> > > script : (statement | importDefinition) *  ;
> > > //---------------------------------------------------------------------
> > > the grammar (in examples/java/java) no longer work
> >
> > The problem is that this rule can be empty (zero or more times
> > something). Which will not work (antlr needs lookahead to decide things
> > if a rule can be empty there's nothing to decide with...) Rewriting to
> > something like ....
>
> after more reflexion I am not really satisfyied.
> It appear that this help me find solution but:
>
> 1st/
> the script is not EMPTY, there is at least "EOF" (implictly added), you
> could have blank script (file empty) and it should work !
>
> 2n/
> // --------------------------
> script: ( statement ) * ;
> // --------------------------
> work perfectly without problem. but I do want to have import !
>
> .....
> so anyidea about what's wrong with importDefinition rule ?
> (examples/java/java/java.g grammar)

As the error says it's the importDefinition rule antlr is worried about.

identifierStar
	:	IDENT
		( DOT^ IDENT )*
		( DOT^ STAR  )?
	;

The appearance of 'statement' (which may start with IDENT) as an alt in the 
'script' rule puts IDENT into the k=2 lookahead set for the (DOT IDENT) 
alternative.  It now thinks it sees non-determinism between another go at 
(DOT IDENT) and moving on (even though it isn't actually any!).  This is the 
limitation of linear approximate LL(k) rather than the real thing (I'm sure 
there's lots more on this in the FAQ).

Now that you know the non-det warning is false alarm (the grammer does 
actually match statements and imports as you expected) you can disable the 
warning for the identifierStar rule, and all is well.

John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From greenj at ix.netcom.com  Wed Apr  3 12:42:06 2002
From: greenj at ix.netcom.com (John Allen Green)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] nodes, hidden tokens, garbage collection
Message-ID: <50119327.1017837726@localhost>

--On 03/04/2002 10:51 AM +0200 Ric Klaren wrote:
> Add 2 & 3: You can change the AST's to use a memory pool (add custom
> new/delete) and hack a bit on the codegenerator and support lib to
> completely loose the RefCounts. This would probably clean the code up
> quite a ways. After that build the AST as usual and at the end do a
> garbage collection over you memory pool.


Oi, I was hoping to avoid doing any surgery on Antlr. Getting rid of the
reference counting would be very nice, but I think it would be a significant
task.

How were you planning to implement the memory pool? Use a vector<AST>, or
something lower level? There's always the Boehm GCC route, as well.

Were you planning to eliminate RefToken and RefAST by replacing them with
pointers?

As a sort-of-related aside: I've changed my AST / token relationship. I've
added a few extra bits of information into the tokens, which needs to
remain available through to the AST. Rather than copy all this information
from token to AST and then delete the token, I'm keeping a reference to the
token within the AST node. I don't think this impacts my ability to migrate
to a memory pool, but it's something I have to keep in mind.

There's another option for my specific needs. There's a style of reference
counting which uses two counters - one for strong references and one for
weak references. Done right, it eliminates problems with cyclic
dependencies. I've read about it, but I haven't found an example
implementation yet. I could use this easily for my AST, but to implement it
for the hidden tokens, I would have to hack or replace one or two chunks of
the Antlr library.

Of course, going that route would still leave me with the reference
counting, which I agree is a pain.

John
 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Wed Apr  3 14:02:20 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:44 2004
Subject: following: [antlr-interest] learning pitfall....
References: <006b01c1da30$860ba500$eca60ad2@hermes> <20020402123603.C4028@cs.utwente.nl> <00ad01c1da9d$a1a880e0$65a70ad2@hermes> <E16slpf-0002DT-00@frontend2.herald.ox.ac.uk>
Message-ID: <002b01c1db5b$3aa6ee90$e3b00ad2@hermes>

ok, thanks, I am surprised that ANTLR make such a mistake, thanks.


>
> As the error says it's the importDefinition rule antlr is worried about.
>
> identifierStar
> : IDENT
> ( DOT^ IDENT )*
> ( DOT^ STAR  )?
> ;
>
> The appearance of 'statement' (which may start with IDENT) as an alt in
the
> 'script' rule puts IDENT into the k=2 lookahead set for the (DOT IDENT)
> alternative.  It now thinks it sees non-determinism between another go at
> (DOT IDENT) and moving on (even though it isn't actually any!).  This is
the
> limitation of linear approximate LL(k) rather than the real thing (I'm
sure
> there's lots more on this in the FAQ).
>
> Now that you know the non-det warning is false alarm (the grammer does
> actually match statements and imports as you expected) you can disable the
> warning for the identifierStar rule, and all is well.
>
> John
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Wed Apr  3 14:00:30 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] I don't understand.....
References: <001601c1db07$9c658f00$35be0ad2@hermes> <000801c1db09$e4b39ed0$0100a8c0@daemon>
Message-ID: <002501c1db5a$f93eda30$e3b00ad2@hermes>

> > why this (stupid) grammar has problem ?
> >    file: (name | number) +;
> >    name: (CHAR) + ;
> >    number: (DIGIT) + ;
>
> Given input "AB C" this could parse as:
>
>     name (A)  name (B)  name (C)
> or
>     name (ABC)
> So there's a conflict.

I believ ther is no conflict ant that it would parse as "ABC" (the rule are
greedy, no ?)

any way than you for the tip, I will investigate this way...


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From wenye742000 at yahoo.com  Wed Apr  3 14:41:08 2002
From: wenye742000 at yahoo.com (wenye742000)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] Where I can find C/C++ grammar?
Message-ID: <a8g0e4+o4e4@eGroups.com>

Where I can find the C++ grammar for Antlr?
If there are grammar for perl, python, XML, etc... better.

Thanks all

Ye Wen


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Thu Apr  4 01:53:05 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] nodes, hidden tokens, garbage collection
In-Reply-To: <50119327.1017837726@localhost>; from greenj@ix.netcom.com on Wed, Apr 03, 2002 at 12:42:06PM -0800
References: <50119327.1017837726@localhost>
Message-ID: <20020404115304.J4028@cs.utwente.nl>

Hi,

On Wed, Apr 03, 2002 at 12:42:06PM -0800, John Allen Green wrote:
> Oi, I was hoping to avoid doing any surgery on Antlr. Getting rid of the
> reference counting would be very nice, but I think it would be a significant
> task.

Well I was planning to do some major surgery anyway ;)

> How were you planning to implement the memory pool? Use a vector<AST>, or
> something lower level? There's always the Boehm GCC route, as well.

First step custom would be adding a custom new/delete. Then problably do or
a subclassing trick, or some template trick to select the desired memory
pool (and/or the Boehm GC, I'm btw not sure how well the Boehm GC handles
circular things...). Lately I've been experimenting with a memory pool
implementation found in the Efficient C++ book from Bulka and Mayhew.

> Were you planning to eliminate RefToken and RefAST by replacing them with
> pointers?

At least RefAST would dissappear it's causing most 'problems' (or kludges)
and indeed it would become a plain old pointer. RefToken is less
troublesome (no heterogenous tokens and stuff like that).

> There's another option for my specific needs. There's a style of reference
> counting which uses two counters - one for strong references and one for
> weak references. Done right, it eliminates problems with cyclic
> dependencies. I've read about it, but I haven't found an example
> implementation yet. I could use this easily for my AST, but to implement it
> for the hidden tokens, I would have to hack or replace one or two chunks of
> the Antlr library.

Can't you use your own flavour of hidden tokens? I just had a small look at
the current implementation and I think it can be changed a little to solve
the reference counting problem. (basically play dirty in a few places and
store pointers to the objects in stead of using the RefToken) 

Or do it less dirty and use a single linked list of visible tokens and in
the visible tokens you store a vector (or single linked list) with all
hidden tokens before/after the visible one. I don't see why a double linked
list is necessary there (probably there because of direct port from java).

Another possibility is adding a custom new/delete to the hidden token
implementation. Allocate them from a pool attach the pool to the
lexer/parser and delete the pool with the lexer/parser object.

If you switch to another scheme of reference counting (you btw got a reference
on that style of ref counting?) you may have to do some antlr surgery.

HTH,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Thu Apr  4 04:34:31 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] bug report
Message-ID: <001f01c1dbd5$58bf65e0$efbf0ad2@hermes>

in an action I want to write

int c;
// ... some code 
$setText("" + (char) c);

but it failed. unlike 
char aChar = (char) c;
$setText("" + aChar);

is it normal ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020404/7f85eb7e/attachment.html
From parrt at jguru.com  Thu Apr  4 09:31:02 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] bug report
In-Reply-To: <001f01c1dbd5$58bf65e0$efbf0ad2@hermes>
Message-ID: <BC0DBFBB-47F1-11D6-84F7-0030653DE0D6@jguru.com>


On Thursday, April 4, 2002, at 04:34  AM, Lloyd Dupont wrote:

> in an action I want to write
> ?
> int c;
> // ... some code
> $setText("" + (char) c);
> ?
> but it failed. unlike
> char aChar = (char) c;
> $setText("" + aChar);
> ?
> is it normal ?

Possibly...i think the argument handling for the $functions is fairly 
primitive as it used to be java/c++ combined.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From greenj at ix.netcom.com  Thu Apr  4 11:58:40 2002
From: greenj at ix.netcom.com (John Allen Green)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] nodes, hidden tokens, garbage collection
In-Reply-To: <20020404115304.J4028@cs.utwente.nl>
References: <50119327.1017837726@localhost>
 <20020404115304.J4028@cs.utwente.nl>
Message-ID: <68445028.1017921520@localhost>

--On 04/04/2002 11:53 AM +0200 Ric Klaren wrote:
> Well I was planning to do some major surgery anyway ;)
> 
> First step custom would be adding a custom new/delete. Then problably do
> or a subclassing trick, or some template trick to select the desired
> memory pool (and/or the Boehm GC, I'm btw not sure how well the Boehm GC
> handles circular things...). Lately I've been experimenting with a memory
> pool implementation found in the Efficient C++ book from Bulka and Mayhew.

Regarding Boehm GC: From what I've read - yes, it should handle any
circular structures fine. I think a bigger question about Boehm GC is: is
it as portable as Antlr/C++ currently is?

I think that for Antlr's purposes, a memory pool makes more sense than a
full blown GC anyway. (Er, as long as it is implemented allowing Antlr
users to easily create multiple memory pools - one for each tree required
in memory.) With GC, there's the overhead of scanning the memory to find
unreachable objects. With a memory pool - well - when you're done, you're
done, right?

It's been a while since I read about customizing new/delete in C++. I hope
you're not talking about a global replacement for new/delete, but just
building custom new/delete specifically for the objects which should be
stored in memory pools...? I think I read somewhere that globally replacing
new/delete is "evil".

Is there an online link to that book's memory pool implementation, or do I
have to make a trip to the bookstore? :-)

> At least RefAST would dissappear it's causing most 'problems' (or kludges)
> and indeed it would become a plain old pointer. RefToken is less
> troublesome (no heterogenous tokens and stuff like that).

If the overhead of a garbage collector is added anyway... it might not make
sense to have the overhead of ref counting for anything. I'd like to deal
with RefToken as well, at least eventually, because of the problems with
hiddenTokens.

> Can't you use your own flavour of hidden tokens? I just had a small look
> at the current implementation and I think it can be changed a little to
> solve the reference counting problem. (basically play dirty in a few
> places and store pointers to the objects in stead of using the RefToken) 

Wouldn't be too tough, I don't think. I'd have to hack or replace
CommonHiddenStreamToken, as well as CommonHiddenTokenFilter, which refers
to CommonHiddenStreamToken. Storing dumb pointers instead of storing
RefTokens is asking for trouble down the road though, I think. For one, you
would quickly find that you need to pass RefToken to various functions, and
a dumb pointer does you no good.

> Or do it less dirty and use a single linked list of visible tokens and in
> the visible tokens you store a vector (or single linked list) with all
> hidden tokens before/after the visible one. I don't see why a double
> linked list is necessary there (probably there because of direct port
> from java).

I thought about using a vector of backlinks instead of a double-linked AST
structure. However, in designing it, I found that there was a fair bit less
data overhead involved in just putting the backlinks directly into the AST.

> Another possibility is adding a custom new/delete to the hidden token
> implementation. Allocate them from a pool attach the pool to the
> lexer/parser and delete the pool with the lexer/parser object.
> 
> If you switch to another scheme of reference counting (you btw got a
> reference on that style of ref counting?) you may have to do some antlr
> surgery.

A link to that style of ref counting:
http://agora.cubik.org/wiki/view/Main/ReferenceCounting
...follow the link to "acyclic refcounting". Unfortunately, it's more a
description of the motivation than it is a description of the
implementation.

To get me up and running quickly, I've identified where my problems are and
have come up with a solution which should work for me, at least for the
short term. It's certainly not as ideal as getting rid of the refcounting,
but it'll do for now.

There were two problems:
1. With my double linked AST, cyclic dependencies would prevent a dropped
branch from deleting itself. (It would get missed in my "back unlink"
cleanup function.)
2. With the current implementation of the hidden tokens, there was a
problem with figuring out when to delete them. Given nodes N1 and N2,
hidden tokens H1 and H2:
  N1 -> H1 <=> H2 <- N2
If N1 is dropped, how do I know if H1 and H2 are to be dropped as well? It
depends on whether N2 still exists or not, but there's no link from H2 to
N2, so there's no easy way to find out.

My workaround: Don't drop/dereference (what do you call it?!) any nodes. If
a node is to be removed from the tree, move it to -another- tree, which
I've called "looseEnds". Then, at cleanup time, clean up the main tree as
well as the looseEnds tree. (Obviously I've already written functions for
cleaning up back links in the AST and for cleaning up the hidden tokens
when AST is deleted.)

Regards,
John



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Apr  4 14:33:32 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:44 2004
Subject: [antlr-interest] 2.7.2a2 C# codegen...
Message-ID: <a8ikbt+j2qo@eGroups.com>

Few questions to those interested:

1. Should the classes that make up the runtime be .NET-tified or left 
as is with Java conventions?  I'm referrring to the casing, use of 
Properties as opposed to get/set methods etc

2. Is there a way to check if _saveIndex will actually be used before 
declaring it?. I delayed the declaration until first use but then the 
more serious problem in [3] raised it's ugly head so, I regressed to 
default behaviour.

3. Is there a way to ensure that _saveIndex is not redefined within a 
nested scope/block. This is an error in C# unlike Java. A prefix or 
suffix to make each declaration unique within all enclosing blocks 
would be fine or, just reusing a single method-wide declaration if 
there would be no interactions between it's various uses.

4. I've only converted about five examples due to time constaints -
java, calc, filter/filterWithRule, ASTSupport, columns and exprAST I 
think. Anyone up to converting the others?

5. I would like to allow the users to be able to specify a C# 
namespace to be used by default for all the 
lexers/parsers/treeparsers defined in a *.g file. I would also like a 
per-lexer/parser/treeparser namespace declaration option that 
overrides the default (if any) on a per-class basis:

    options 
    {
        language = "CSharp";
        namespace  = "appel.tiger";
    }

    class TigerParser extends Parser;
    options { namespace = "appel.tiger.parser"; }

Finally, how do I get this into ANTLR?. Just mail it to Terrence is 
it?

Micheal




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Thu Apr  4 14:40:45 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] How to deal with languages with preprocessors?
Message-ID: <a8ikpd+bon3@eGroups.com>

Any ideas please?. How to deal with the preprocessor directives in 
C/C++ and C#.

Is this handled in the Lexer or in the Parser. Any [simple-ish or 
clear] examples please?

On a more general note,is there some document/tutorial on writing LL
(k) grammars with ANTLR. 

Also, any docs/tools on converting YACC/LEX stuff to ANTLR? 

Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From ericsmith at windsor.com  Thu Apr  4 14:58:02 2002
From: ericsmith at windsor.com (Smith, Eric V.)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] 2.7.2a2 C# codegen...
Message-ID: <1D532F5C75B30A46A78D5107B635DF895337@edzell.windsor.com>

1.  I'd leave them as is, not .Net-ify them.  It makes debugging easier.

3.  I ran in to this problem as well.  I just created a global label
generator.  Not the cleanest thing, but it works.  I can't believe that
MS made this design decision.  The last time I was out there I discussed
this with a member of the C# team.  He says they're aware of the
generated code issue, but they felt it would prevent many mistakes.  I
disagree, but we're stuck with it.

4.  I'm willing to convert some samples.  I've got all of the samples I
converted from the last time I did this, I suspect many of them will
work with your code.  But I'm going out of town tomorrow, I'll be back
next week.

5.  I don't have an opinion one way or the other on this one.  Do
whatever you feel is best.

Thanks for the work.  I look forward to trying it out.

Eric.


> -----Original Message-----
> From: micheal_jor [mailto:open.zone@virgin.net] 
> Sent: Thursday, April 04, 2002 5:34 PM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] 2.7.2a2 C# codegen...
> 
> 
> Few questions to those interested:
> 
> 1. Should the classes that make up the runtime be .NET-tified or left 
> as is with Java conventions?  I'm referrring to the casing, use of 
> Properties as opposed to get/set methods etc
> 
> 2. Is there a way to check if _saveIndex will actually be used before 
> declaring it?. I delayed the declaration until first use but then the 
> more serious problem in [3] raised it's ugly head so, I regressed to 
> default behaviour.
> 
> 3. Is there a way to ensure that _saveIndex is not redefined within a 
> nested scope/block. This is an error in C# unlike Java. A prefix or 
> suffix to make each declaration unique within all enclosing blocks 
> would be fine or, just reusing a single method-wide declaration if 
> there would be no interactions between it's various uses.
> 
> 4. I've only converted about five examples due to time 
> constaints - java, calc, filter/filterWithRule, ASTSupport, 
> columns and exprAST I 
> think. Anyone up to converting the others?
> 
> 5. I would like to allow the users to be able to specify a C# 
> namespace to be used by default for all the 
> lexers/parsers/treeparsers defined in a *.g file. I would also like a 
> per-lexer/parser/treeparser namespace declaration option that 
> overrides the default (if any) on a per-class basis:
> 
>     options 
>     {
>         language = "CSharp";
>         namespace  = "appel.tiger";
>     }
> 
>     class TigerParser extends Parser;
>     options { namespace = "appel.tiger.parser"; }
> 
> Finally, how do I get this into ANTLR?. Just mail it to Terrence is 
> it?
> 
> Micheal
> 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From chuck.siska at nb.conexant.com  Thu Apr  4 15:20:52 2002
From: chuck.siska at nb.conexant.com (Chuck Siska)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] How to deal with languages with preprocessors?
References: <a8ikpd+bon3@eGroups.com>
Message-ID: <3CACDFD4.E7535C39@nb.conexant.com>

michael --

deal with preprocessor directives by first running the source
through the preprocessor -- then include in your parsing any
line information added by the preprocessor.  best not re-invent
too many wheels at a time.  good luck.

-- chuck

micheal_jor wrote:
> 
> Any ideas please?. How to deal with the preprocessor directives in
> C/C++ and C#.
> 
> Is this handled in the Lexer or in the Parser. Any [simple-ish or
> clear] examples please?...
> 
> Micheal

-- 
                                           |\_/\_.-'""``:-._       
What is life without looking for           . . `; -._      )-;-,_`)
the next cute little bug to play with?     v_,-    _  ),(,.\  ``-' 
                                          _.- _.,-_/ /  ((.'       
-- chuck.siska@conexant.com  `<}:..     ((,.-'   ((,/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Thu Apr  4 20:52:17 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] C# ?
References: <a8ikpd+bon3@eGroups.com> <3CACDFD4.E7535C39@nb.conexant.com>
Message-ID: <002c01c1dc5d$a9dc7070$ebbf0ad2@hermes>

did I miss something ?
is there a C# version ?
Because I am thinking to work on it soon, but I would be happy to
tester/codevelopper/whatever to someone who already start....

my email: lloyd@galador.net


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri Apr  5 01:00:24 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] 2.7.2a2 C# codegen...
In-Reply-To: <a8ikbt+j2qo@eGroups.com>; from open.zone@virgin.net on Thu, Apr 04, 2002 at 10:33:32PM -0000
References: <a8ikbt+j2qo@eGroups.com>
Message-ID: <20020405110024.C907@cs.utwente.nl>

On Thu, Apr 04, 2002 at 10:33:32PM -0000, micheal_jor wrote:
> 1. Should the classes that make up the runtime be .NET-tified or left 
> as is with Java conventions?  I'm referrring to the casing, use of 
> Properties as opposed to get/set methods etc

With C++ I'm more and more leaning to C++-ifying them. But this is mostly
because C++ has some more powerfull things to do some stuff (with
templates). Which in the end will be necessary for Unicode support (I
think). If the java way is enough like the .Net way then I would leave it
as java'ish as possible saves time in porting over new stuff/fixes from the
java mode.

> 2. Is there a way to check if _saveIndex will actually be used before 
> declaring it?. I delayed the declaration until first use but then the 
> more serious problem in [3] raised it's ugly head so, I regressed to 
> default behaviour.


> 3. Is there a way to ensure that _saveIndex is not redefined within a 
> nested scope/block. This is an error in C# unlike Java. A prefix or 
> suffix to make each declaration unique within all enclosing blocks 
> would be fine or, just reusing a single method-wide declaration if 
> there would be no interactions between it's various uses.

I think I kludged around something similar in the C++ codegen. Think I did
it with AST declarations. My fix is d*mn ugly though. We need a different
codegenerator setup.

My problem was that after delaying declarations, I sometimes hid a previous
declaration which yielded 'real usefull'(tm) trees. Look for genASTdecl and
needASTdecl func/vars in CppCodegenerator.java.

_saveIndex maybe tougher though to tackle. You may need to scan ahead in
grammar elements (eeiew)

> 5. I would like to allow the users to be able to specify a C# 
> namespace to be used by default for all the 
> lexers/parsers/treeparsers defined in a *.g file. I would also like a 
> per-lexer/parser/treeparser namespace declaration option that 
> overrides the default (if any) on a per-class basis:

There's some namespace stuff in the C++ mode. Dunno if it's usable for your
problem. Maybe it's possible to share some code between C++/C# mode.

> Finally, how do I get this into ANTLR?. Just mail it to Terrence is 
> it?

Good choice ;)

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 'And this 'rebooting' business? Give it a good kicking, do you?' 'Oh, no,
  of course, we ... that is ... well, yes, in fact,' said Ponder. 'Adrian
    goes round the back and ... er ... prods it with his foot. But in a
     technical way,' he added. --- From: Hogfather by Terry Pratchett.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri Apr  5 01:06:42 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] How to deal with languages with preprocessors?
In-Reply-To: <a8ikpd+bon3@eGroups.com>; from open.zone@virgin.net on Thu, Apr 04, 2002 at 10:40:45PM -0000
References: <a8ikpd+bon3@eGroups.com>
Message-ID: <20020405110642.D907@cs.utwente.nl>

Hi,

On Thu, Apr 04, 2002 at 10:40:45PM -0000, micheal_jor wrote:
> Any ideas please?. How to deal with the preprocessor directives in
> C/C++ and C#.
>
> Is this handled in the Lexer or in the Parser. Any [simple-ish or
> clear] examples please?

Look at /antlr/action/cpp/action.g. It has quite some ugliness
for preprocessor stuff in C++ mode. If C# has C/C++ style includes starting
with the '#' then let me give you one piece of 'good advice'(tm)

Use a different character for the tree building stuff, saves you many
kludges and ugliness in action.g, If I had the choice I'd change it in C++
mode as well. Make it percent signs or so or maybe dollar signs. 

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
				  of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri Apr  5 02:09:46 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] nodes, hidden tokens, garbage collection
In-Reply-To: <68445028.1017921520@localhost>; from greenj@ix.netcom.com on Thu, Apr 04, 2002 at 11:58:40AM -0800
References: <50119327.1017837726@localhost> <20020404115304.J4028@cs.utwente.nl> <68445028.1017921520@localhost>
Message-ID: <20020405120946.E907@cs.utwente.nl>

Hi,

On Thu, Apr 04, 2002 at 11:58:40AM -0800, John Allen Green wrote:
> Regarding Boehm GC: From what I've read - yes, it should handle any
> circular structures fine. I think a bigger question about Boehm GC is: is
> it as portable as Antlr/C++ currently is?

Boehm is pretty portable. At least to common systems. Solaris and many i386
flavoured unixes. Dunno if there's a win32 port.

> I think that for Antlr's purposes, a memory pool makes more sense than a
> full blown GC anyway. (Er, as long as it is implemented allowing Antlr
> users to easily create multiple memory pools - one for each tree required
> in memory.) With GC, there's the overhead of scanning the memory to find
> unreachable objects. With a memory pool - well - when you're done, you're
> done, right?

100% agree. Boehm is nice if you already use it in you app though.

> It's been a while since I read about customizing new/delete in C++. I hope
> you're not talking about a global replacement for new/delete, but just
> building custom new/delete specifically for the objects which should be
> stored in memory pools...? I think I read somewhere that globally replacing
> new/delete is "evil".

No was talking about the specific objects. The global one is usually only
necessary for memory debugging tools and tricks.

> Is there an online link to that book's memory pool implementation, or do I
> have to make a trip to the bookstore? :-)

I diligently typed it in from the book. No online version afaik. I'll send
it to you. On note of interest there's a slightly more advanced memory pool
in the Loki library from the Modern C++ Design book from Andrei
Alexandrescu, the source should be at:
(http://www.awl.com/cseng/titles/0-201-70431-5/) this book really rocks.
That one also support multithreading etc.

> > At least RefAST would dissappear it's causing most 'problems' (or kludges)
> > and indeed it would become a plain old pointer. RefToken is less
> > troublesome (no heterogenous tokens and stuff like that).
> 
> If the overhead of a garbage collector is added anyway... it might not make
> sense to have the overhead of ref counting for anything. I'd like to deal
> with RefToken as well, at least eventually, because of the problems with
> hiddenTokens.

It may in some point depend on how many objects are created and the exact
scheme of garbage collection (if any) you use. For the tokens garbage
collection would be quite prudent :), for the AST's you might drop garbage
collection (depending on what you are parsing)

> > Can't you use your own flavour of hidden tokens? I just had a small look
> > at the current implementation and I think it can be changed a little to
> > solve the reference counting problem. (basically play dirty in a few
> > places and store pointers to the objects in stead of using the RefToken) 
> 
> Wouldn't be too tough, I don't think. I'd have to hack or replace
> CommonHiddenStreamToken, as well as CommonHiddenTokenFilter, which refers
> to CommonHiddenStreamToken. 

Why hack/replace just use your own ;)

> Storing dumb pointers instead of storing RefTokens is asking for trouble
> down the road though, I think. For one, you would quickly find that you
> need to pass RefToken to various functions, and a dumb pointer does you no
> good.

It depends a little for the preserveWhiteSpace example you might get away
with it. Real app probably more difficult indeed.

> > Or do it less dirty and use a single linked list of visible tokens and in
> > the visible tokens you store a vector (or single linked list) with all
> > hidden tokens before/after the visible one. I don't see why a double
> > linked list is necessary there (probably there because of direct port
> > from java).
> 
> I thought about using a vector of backlinks instead of a double-linked AST
> structure. However, in designing it, I found that there was a fair bit less
> data overhead involved in just putting the backlinks directly into the AST.

Hmm if you know how many backlinks you have you may try a dirty trick with
a overallocated class with an array as last attribute. I used that memory
pool to do that old C trick in C++.

> http://agora.cubik.org/wiki/view/Main/ReferenceCounting

Thanks!

> My workaround: Don't drop/dereference (what do you call it?!) any nodes. If
> a node is to be removed from the tree, move it to -another- tree, which
> I've called "looseEnds". Then, at cleanup time, clean up the main tree as
> well as the looseEnds tree. (Obviously I've already written functions for
> cleaning up back links in the AST and for cleaning up the hidden tokens
> when AST is deleted.)

Sounds good.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
	  Innovation makes enemies of all those who prospered under the old
	regime, and only lukewarm support is forthcoming from those who would
					prosper under the new. --- Niccol Machiavelli


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Fri Apr  5 04:45:34 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Re: C# ?
In-Reply-To: <002c01c1dc5d$a9dc7070$ebbf0ad2@hermes>
Message-ID: <a8k69e+hdap@eGroups.com>

--- In antlr-interest@y..., "Lloyd Dupont" <lloyd@g...> wrote:
> did I miss something ?
> is there a C# version ?
> Because I am thinking to work on it soon, but I would be happy to
> tester/codevelopper/whatever to someone who already start....
> 
> my email: lloyd@g...

Lloyd,

There isn't a C# port of ANTLR AFAIK. What we have done is to create 
a C# code generator for ANTLR. So you still run ANTLR as a Java 
application but it spits out working Lexers/Parsers/TreeParsers in 
C#. We have also ported the runtime library to C# so your parsers can 
run.

I don't have a place to put it up so I guess I'll pass it on to 
Terrence (and perhaps Eric who did the first C# codegen port) and he 
can decide how best to let others get to it.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From zjg1964 at yahoo.com  Fri Apr  5 06:44:19 2002
From: zjg1964 at yahoo.com (jg z)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] ANTLR Optional statements
In-Reply-To: <3C98C9D8.18BF2347@sbu.ac.uk>
Message-ID: <20020405144419.48158.qmail@web14905.mail.yahoo.com>

We are trying to convert a C++ Parser from PCCTS to
ANTLR, and becoming increasingly frustrated by the
differences between the two systems.

For instance;

In cplusplus.g we have,

class_head
   :  (  STRUCT  
      |  UNION 
      |  CLASS 
      )
      {ID { base_clause } }
   ;

which works fine in PCCTS.

For ANTLR we have converted this to,

class_head
   :	
    (  STRUCT  
    |  UNION 
    |  CLASS 
    )
    (ID ( base_clause)? )?
   ;

However, the optional statements shown at the end of
this production no longer produces a properly optional
construction in the generated .cpp file.

What are we supposed to do?

David.


__________________________________________________
Do You Yahoo!?
Yahoo! Tax Center - online filing with TurboTax
http://taxes.yahoo.com/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Fri Apr  5 07:03:40 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Re: C# ?
References: <a8k69e+hdap@eGroups.com>
Message-ID: <000f01c1dcb3$136298d0$bdbd0ad2@hermes>

> There isn't a C# port of ANTLR AFAIK. What we have done is to create
> a C# code generator for ANTLR. So you still run ANTLR as a Java
> application but it spits out working Lexers/Parsers/TreeParsers in
> C#. We have also ported the runtime library to C# so your parsers can
> run.
I was a bit scarce.... but it was exactly what I meant and what I was (and
is) looking for !
I am not really in a hurry as it is queued with other taks... but if you
could send me any link I would be very gratefull...

thanks.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Fri Apr  5 07:09:40 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] ANTLR Optional statements
Message-ID: <170826586F3BD511910D0200C110AAA8032B4879@memail03.bco-home.com>

What does it produce that's not right?

> -----Original Message-----
> From: jg z [mailto:zjg1964@yahoo.com]
> Sent: Friday, April 05, 2002 6:44 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] ANTLR Optional statements
> 
> 
> We are trying to convert a C++ Parser from PCCTS to
> ANTLR, and becoming increasingly frustrated by the
> differences between the two systems.
> 
> For instance;
> 
> In cplusplus.g we have,
> 
> class_head
>    :  (  STRUCT  
>       |  UNION 
>       |  CLASS 
>       )
>       {ID { base_clause } }
>    ;
> 
> which works fine in PCCTS.
> 
> For ANTLR we have converted this to,
> 
> class_head
>    :	
>     (  STRUCT  
>     |  UNION 
>     |  CLASS 
>     )
>     (ID ( base_clause)? )?
>    ;
> 
> However, the optional statements shown at the end of
> this production no longer produces a properly optional
> construction in the generated .cpp file.
> 
> What are we supposed to do?
> 
> David.
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Yahoo! Tax Center - online filing with TurboTax
> http://taxes.yahoo.com/
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Fri Apr  5 07:22:40 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] How to deal with languages with preprocessor
	s?
Message-ID: <170826586F3BD511910D0200C110AAA8032B487A@memail03.bco-home.com>

> Any ideas please?. How to deal with the preprocessor directives in 
> C/C++ and C#.

For the GCC parser I run the preprocessor externally.  If you prefer to do
it yourself then you might want to make it a filter stream.  If all you want
to do is some includes, then you can handle that in the parser by opening a
new parser and lexer, feeding it the included filename, then attaching the
resulting tree to your current tree.
 
> Is this handled in the Lexer or in the Parser. Any [simple-ish or 
> clear] examples please?

If there's not an example in the examples directory then there is probably a
FAQ about it.
 
> On a more general note,is there some document/tutorial on writing LL
> (k) grammars with ANTLR. 
> 
> Also, any docs/tools on converting YACC/LEX stuff to ANTLR? 

www.javadude.com 's articles include an old antlr tutorial and LALR to LL
conversion which has basic stuff about yacc/lex to antlr.

Monty

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From zjg1964 at yahoo.com  Fri Apr  5 07:30:58 2002
From: zjg1964 at yahoo.com (jg z)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] ANTLR Optional statements
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B4879@memail03.bco-home.com>
Message-ID: <20020405153058.63324.qmail@web14909.mail.yahoo.com>

The generated code is like this,

		switch ( LA(1)) {
		case ID:
		{
			match(ID);
			{
			switch ( LA(1)) {
			case COLON:
			{
				base_clause();
				break;
			}
			case ANTLR_USE_NAMESPACE(antlr)Token::EOF_TYPE:
			{
				break;
			}
			default:
			{
				throw
ANTLR_USE_NAMESPACE(antlr)NoViableAltException(LT(1),
getFilename());
			}
			}
			}
			break;
		}
		case ANTLR_USE_NAMESPACE(antlr)Token::EOF_TYPE:
		{
			break;
		}
		default:
		{
			throw
ANTLR_USE_NAMESPACE(antlr)NoViableAltException(LT(1),
getFilename());
		}
		}

The problem is, if there is no "ID", it would go into
default and throw an Exception.  It shouldn't do like
this as an optional statement, should it?   
--- mzukowski@bco.com wrote:
> What does it produce that's not right?
> 
> > -----Original Message-----
> > From: jg z [mailto:zjg1964@yahoo.com]
> > Sent: Friday, April 05, 2002 6:44 AM
> > To: antlr-interest@yahoogroups.com
> > Subject: [antlr-interest] ANTLR Optional
> statements
> > 
> > 
> > We are trying to convert a C++ Parser from PCCTS
> to
> > ANTLR, and becoming increasingly frustrated by the
> > differences between the two systems.
> > 
> > For instance;
> > 
> > In cplusplus.g we have,
> > 
> > class_head
> >    :  (  STRUCT  
> >       |  UNION 
> >       |  CLASS 
> >       )
> >       {ID { base_clause } }
> >    ;
> > 
> > which works fine in PCCTS.
> > 
> > For ANTLR we have converted this to,
> > 
> > class_head
> >    :	
> >     (  STRUCT  
> >     |  UNION 
> >     |  CLASS 
> >     )
> >     (ID ( base_clause)? )?
> >    ;
> > 
> > However, the optional statements shown at the end
> of
> > this production no longer produces a properly
> optional
> > construction in the generated .cpp file.
> > 
> > What are we supposed to do?
> > 
> > David.
> > 
> > 
> > __________________________________________________
> > Do You Yahoo!?
> > Yahoo! Tax Center - online filing with TurboTax
> > http://taxes.yahoo.com/
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! Tax Center - online filing with TurboTax
http://taxes.yahoo.com/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Fri Apr  5 07:37:15 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] ANTLR Optional statements
Message-ID: <170826586F3BD511910D0200C110AAA8032B487B@memail03.bco-home.com>

What version of antlr?  Have you tried 2.7.2a2?

Monty

> -----Original Message-----
> From: jg z [mailto:zjg1964@yahoo.com]
> Sent: Friday, April 05, 2002 7:31 AM
> To: antlr-interest@yahoogroups.com
> Subject: RE: [antlr-interest] ANTLR Optional statements
> 
> 
> The generated code is like this,
> 
> 		switch ( LA(1)) {
> 		case ID:
> 		{
> 			match(ID);
> 			{
> 			switch ( LA(1)) {
> 			case COLON:
> 			{
> 				base_clause();
> 				break;
> 			}
> 			case ANTLR_USE_NAMESPACE(antlr)Token::EOF_TYPE:
> 			{
> 				break;
> 			}
> 			default:
> 			{
> 				throw
> ANTLR_USE_NAMESPACE(antlr)NoViableAltException(LT(1),
> getFilename());
> 			}
> 			}
> 			}
> 			break;
> 		}
> 		case ANTLR_USE_NAMESPACE(antlr)Token::EOF_TYPE:
> 		{
> 			break;
> 		}
> 		default:
> 		{
> 			throw
> ANTLR_USE_NAMESPACE(antlr)NoViableAltException(LT(1),
> getFilename());
> 		}
> 		}
> 
> The problem is, if there is no "ID", it would go into
> default and throw an Exception.  It shouldn't do like
> this as an optional statement, should it?   
> --- mzukowski@bco.com wrote:
> > What does it produce that's not right?
> > 
> > > -----Original Message-----
> > > From: jg z [mailto:zjg1964@yahoo.com]
> > > Sent: Friday, April 05, 2002 6:44 AM
> > > To: antlr-interest@yahoogroups.com
> > > Subject: [antlr-interest] ANTLR Optional
> > statements
> > > 
> > > 
> > > We are trying to convert a C++ Parser from PCCTS
> > to
> > > ANTLR, and becoming increasingly frustrated by the
> > > differences between the two systems.
> > > 
> > > For instance;
> > > 
> > > In cplusplus.g we have,
> > > 
> > > class_head
> > >    :  (  STRUCT  
> > >       |  UNION 
> > >       |  CLASS 
> > >       )
> > >       {ID { base_clause } }
> > >    ;
> > > 
> > > which works fine in PCCTS.
> > > 
> > > For ANTLR we have converted this to,
> > > 
> > > class_head
> > >    :	
> > >     (  STRUCT  
> > >     |  UNION 
> > >     |  CLASS 
> > >     )
> > >     (ID ( base_clause)? )?
> > >    ;
> > > 
> > > However, the optional statements shown at the end
> > of
> > > this production no longer produces a properly
> > optional
> > > construction in the generated .cpp file.
> > > 
> > > What are we supposed to do?
> > > 
> > > David.
> > > 
> > > 
> > > __________________________________________________
> > > Do You Yahoo!?
> > > Yahoo! Tax Center - online filing with TurboTax
> > > http://taxes.yahoo.com/
> > > 
> > >  
> > > 
> > > Your use of Yahoo! Groups is subject to 
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> > 
> >  
> > 
> > Your use of Yahoo! Groups is subject to
> > http://docs.yahoo.com/info/terms/ 
> > 
> > 
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Yahoo! Tax Center - online filing with TurboTax
> http://taxes.yahoo.com/
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Fri Apr  5 07:54:38 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] ANTLR Optional statements
In-Reply-To: <20020405153058.63324.qmail@web14909.mail.yahoo.com>; from zjg1964@yahoo.com on Fri, Apr 05, 2002 at 07:30:58AM -0800
References: <170826586F3BD511910D0200C110AAA8032B4879@memail03.bco-home.com> <20020405153058.63324.qmail@web14909.mail.yahoo.com>
Message-ID: <20020405175438.J907@cs.utwente.nl>

Hi,

On Fri, Apr 05, 2002 at 07:30:58AM -0800, jg z wrote:
> 			case ANTLR_USE_NAMESPACE(antlr)Token::EOF_TYPE:
> 			{
> 				break;
> 			}

> The problem is, if there is no "ID", it would go into
> default and throw an Exception.  It shouldn't do like
> this as an optional statement, should it?

I suspect there is a problem in the context of the class_head clause. If I
copy paste the production into an empty grammar it produces code like
above. (Correctly bailing out on EOF)

If I add a production after class_head and regenerate the lookahead of the
next production cleanly shows up in the switch (providing a break out
without exception). (With prerelease version)

e.g input like:

class_head
   :    
    (  STRUCT
    |  UNION
    |  CLASS
    )
    (ID ( base_clause)? )?
   ;

stuff: ID "=" DIGIT;

body:	"{" ( stuff )+ "}" ;

base_clause: SUMTHIN ;

Generates (relevant bit only (slightly edited)):

switch ( LA(1)) {
case ID:
{
	match(ID);
	{
		switch ( LA(1)) {
		case SUMTHIN: {
			base_clause();
			break;
		}
		case 10: {	break;	}
		default:
			{
				throw NoViableAltException(LT(1), getFilename());
			}
		}
	}
	break;
}
case 10:
	{
		break;
	}
default:
	{
		throw NoViableAltException(LT(1), getFilename());
	}
}

Which seems correct to me. (the added case 10's) I suspect that the problem
is not in this actual rule but in some rules around it.

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
	  Innovation makes enemies of all those who prospered under the old
	regime, and only lukewarm support is forthcoming from those who would
					prosper under the new. --- Niccol Machiavelli


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From zjg1964 at yahoo.com  Fri Apr  5 08:43:26 2002
From: zjg1964 at yahoo.com (jg z)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] ANTLR Optional statements
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B487B@memail03.bco-home.com>
Message-ID: <20020405164326.19861.qmail@web14902.mail.yahoo.com>


--- mzukowski@bco.com wrote:
> What version of antlr?  Have you tried 2.7.2a2?
> 
> Monty
  

   I use version 2.7.1. Is version 2.7.2a2 better?

    David


__________________________________________________
Do You Yahoo!?
Yahoo! Tax Center - online filing with TurboTax
http://taxes.yahoo.com/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From zjg1964 at yahoo.com  Fri Apr  5 09:16:31 2002
From: zjg1964 at yahoo.com (jg z)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] ANTLR Optional statements
In-Reply-To: <20020405175438.J907@cs.utwente.nl>
Message-ID: <20020405171631.14029.qmail@web14908.mail.yahoo.com>




> On Fri, Apr 05, 2002 at 07:30:58AM -0800, jg z
> wrote:
> > 			case ANTLR_USE_NAMESPACE(antlr)Token::EOF_TYPE:
> > 			{
> > 				break;
> > 			}
> 
> > The problem is, if there is no "ID", it would go
> into
> > default and throw an Exception.  It shouldn't do
> like
> > this as an optional statement, should it?
> 
> I suspect there is a problem in the context of the
> class_head clause. If I
> copy paste the production into an empty grammar it
> produces code like
> above. (Correctly bailing out on EOF)
> 
> If I add a production after class_head and
> regenerate the lookahead of the
> next production cleanly shows up in the switch
> (providing a break out
> without exception). (With prerelease version)
> 
> e.g input like:
> 
> class_head
>    :    
>     (  STRUCT
>     |  UNION
>     |  CLASS
>     )
>     (ID ( base_clause)? )?
>    ;
> 
> stuff: ID "=" DIGIT;
> 
> body:	"{" ( stuff )+ "}" ;
> 
> base_clause: SUMTHIN ;
> 
> Generates (relevant bit only (slightly edited)):
> 
> switch ( LA(1)) {
> case ID:
> {
> 	match(ID);
> 	{
> 		switch ( LA(1)) {
> 		case SUMTHIN: {
> 			base_clause();
> 			break;
> 		}
> 		case 10: {	break;	}
> 		default:
> 			{
> 				throw NoViableAltException(LT(1),
> getFilename());
> 			}
> 		}
> 	}
> 	break;
> }
> case 10:
> 	{
> 		break;
> 	}
> default:
> 	{
> 		throw NoViableAltException(LT(1), getFilename());
> 	}
> }
> 
> Which seems correct to me. (the added case 10's) I
> suspect that the problem
> is not in this actual rule but in some rules around
> it.
> 
> Cheers,
> 
> Ric

Thank you, Ric,
    I tried to manually change the .cpp code to make
it look like yours,

		switch ( LA(1)) {
		case ID:
		{match(ID);
			{
			switch ( LA(1)) {
			case COLON:
			{
				base_clause();
				break;
			}
//case ANTLR_USE_NAMESPACE(antlr)Token::EOF_TYPE:
			case 10:{break;	}
			default:{throw
ANTLR_USE_NAMESPACE(antlr)NoViableAltException(LT(1),
getFilename());	}
                                        }}
		break;
		}
//case ANTLR_USE_NAMESPACE(antlr)Token::EOF_TYPE:
		case 10:{break;	}
		default:
		{throw
ANTLR_USE_NAMESPACE(antlr)NoViableAltException(LT(1),
getFilename());	}              }

When I run it, without ID in the end of class_head in
my test file, it still goes into default and throw
Exception.

     Cheers.


__________________________________________________
Do You Yahoo!?
Yahoo! Tax Center - online filing with TurboTax
http://taxes.yahoo.com/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Apr  5 10:39:35 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Re: C# ?
In-Reply-To: <a8k69e+hdap@eGroups.com>
Message-ID: <7A06EA95-48C4-11D6-84F7-0030653DE0D6@jguru.com>

I'm happy to host the C# code generator....we should probably decide on 
whose to use though...sounds like a bunch of your folks are doing the 
same thing.

Also a friend of mine at Microsoft has a J# version for 2.7.0...he 
probably doesn't have time to update it for latest stuff.   He says 
(reprinted with permission):

> Just wanted to let you know I tried J# beta 2 with ANTLR and it seems 
> to work fine (I compiled it from source, not using the bytecode 
> converter). If this hold up I don?t have to worry about doing a C# code 
> generator ? C#-J# language interop seems to work great so I can just 
> call the Java parser from my C# program. If I was shipping the result 
> I?d probably want the C# generator so I didn?t need the J# library 
> though.

Does this help anybody needing C# right away?  Might be able to use the 
"bridge".

Terence

On Friday, April 5, 2002, at 04:45  AM, micheal_jor wrote:

> --- In antlr-interest@y..., "Lloyd Dupont" <lloyd@g...> wrote:
>> did I miss something ?
>> is there a C# version ?
>> Because I am thinking to work on it soon, but I would be happy to
>> tester/codevelopper/whatever to someone who already start....
>>
>> my email: lloyd@g...
>
> Lloyd,
>
> There isn't a C# port of ANTLR AFAIK. What we have done is to create
> a C# code generator for ANTLR. So you still run ANTLR as a Java
> application but it spits out working Lexers/Parsers/TreeParsers in
> C#. We have also ported the runtime library to C# so your parsers can
> run.
>
> I don't have a place to put it up so I guess I'll pass it on to
> Terrence (and perhaps Eric who did the first C# codegen port) and he
> can decide how best to let others get to it.
>
> Micheal
>
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Fri Apr  5 12:09:25 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Re: How to deal with languages with preprocessor s?
In-Reply-To: <170826586F3BD511910D0200C110AAA8032B487A@memail03.bco-home.com>
Message-ID: <a8l09l+vg6m@eGroups.com>

Hi Monty,

Thanks for your comments....

--- In antlr-interest@y..., mzukowski@b... wrote:
> > Any ideas please?. How to deal with the preprocessor directives 
in 
> > C/C++ and C#.
> 
> For the GCC parser I run the preprocessor externally.

What does this mean?. What preprocessor do you run externally?. Is it 
a separate Lexer/Parser that you generated using ANTLR as well?

> If you prefer to do
> it yourself then you might want to make it a filter stream.

I'll search the FAQ for "filter stream". Thanks.

> If all you want
> to do is some includes, then you can handle that in the parser by 
opening a
> new parser and lexer, feeding it the included filename, then 
attaching the
> resulting tree to your current tree.

Thanks. I would need to hndle the whole gamut of preprocessor 
directives in the C language family.

> > Is this handled in the Lexer or in the Parser. Any [simple-ish or 
> > clear] examples please?
> 
> If there's not an example in the examples directory then there is 
probably a
> FAQ about it.

I haven't found one in the FAQ I downloaded yet. I'll keep looking.

Thanks

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Fri Apr  5 12:44:02 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Re: C# ?
In-Reply-To: <7A06EA95-48C4-11D6-84F7-0030653DE0D6@jguru.com>
Message-ID: <a8l2ai+hq3p@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> I'm happy to host the C# code generator....we should probably 
decide on 
> whose to use though...sounds like a bunch of your folks are doing 
the 
> same thing.

AFAICT, there is currently one "open" versions - Eric's C# port for 
2.7.1. I now have two new ports working with 2.7.1 and 2.7.2a2 ANTLR 
versions. The plan is to release them asap so others can continue 
testing. The largest grammar that I have tested is the 'java' example 
(supports the -showtree option too).

Someone (was it Scott?) mentioned that they had developed an 
optimized C# port for 2.7.2a2 that had also been .NET-tified with 
regards to naming and uses of Properties for accessors/mutators etc. 
I expressed an interest in seeing the code when it was offered to the 
list but so far I've had no reply.

My intent in case anyone wondered was to backport the optimizations 
to my version which retains the Java-esque naming conventions. I 
actually like the idea of a .NET-tified version but I'm willing to go 
with Eric's point regarding debugging.

> Also a friend of mine at Microsoft has a J# version for 2.7.0...he 
> probably doesn't have time to update it for latest stuff.   He says 
> (reprinted with permission):

J# is good(-ish) for maintianing a kinda no-effort-
required "native" .NET version of ANTLR itself. I don't consider it a 
solution since it can't generate C# parsers without the C# codegen.

> Does this help anybody needing C# right away?  Might be able to use 
the 
> "bridge".

OK. I'll send what I have for 2.7.2a2 to you soon as it is done. I 
haven't had much joy with the debugging "bits". No reply to my 
previous post on the subject  ;-).

A few questions for you Ter if I may:

1. Is the debugging stuff intended for use while ANLTR itself is 
generating the Lexer/Parsers/Whatnots or is it for use with generated 
parsers?

2. In a similar vein, is ParseView for use with ANLTR or the stuff 
that ANTLR generates?

3. How does the debugging stuff work?. What is the thinking behind 
it. If anyone can explain it in enough detail, I'll have a go at 
fixing ParseView for 2.7.2a2.

Thanks in advance

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Apr  5 13:02:49 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Re: C# ?
In-Reply-To: <a8l2ai+hq3p@eGroups.com>
Message-ID: <7C66322F-48D8-11D6-84F7-0030653DE0D6@jguru.com>

On Friday, April 5, 2002, at 12:44  PM, micheal_jor wrote:
> A few questions for you Ter if I may:
>
> 1. Is the debugging stuff intended for use while ANLTR itself is
> generating the Lexer/Parsers/Whatnots or is it for use with generated
> parsers?

Well, both I guess.  That's the problem with a tool written in itself ;)

The debugging stuff is used to trace events such as "rule matched" so 
you can figure out what is going wrong in the recognition of your 
input.  So, generated parsers is the best answer to your question.

>
> 2. In a similar vein, is ParseView for use with ANLTR or the stuff
> that ANTLR generates?

Doesn't work with latest stuff, but it's for generated parsers.

>
> 3. How does the debugging stuff work?. What is the thinking behind
> it. If anyone can explain it in enough detail, I'll have a go at
> fixing ParseView for 2.7.2a2.

Scott Stanchfield put that stuff in.  You might contact him at scott at 
javadude dot com.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Apr  5 13:16:33 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] ooops....JRockit is just a vm
Message-ID: <680F30EF-48DA-11D6-84F7-0030653DE0D6@jguru.com>

...damn.  Confused it with a static compiler product.

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Fri Apr  5 13:40:51 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Re: C# ?
In-Reply-To: <7C66322F-48D8-11D6-84F7-0030653DE0D6@jguru.com>
Message-ID: <a8l5l3+5mqp@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:

> > 2. In a similar vein, is ParseView for use with ANLTR or the stuff
> > that ANTLR generates?
> 
> Doesn't work with latest stuff, but it's for generated parsers.

What exactly makes it bad for the latest stuff?.

> > 3. How does the debugging stuff work?. What is the thinking behind
> > it. If anyone can explain it in enough detail, I'll have a go at
> > fixing ParseView for 2.7.2a2.
> 
> Scott Stanchfield put that stuff in.  You might contact him at 
scott at 
> javadude dot com.

Thanks. I'll sent our current 2.7.2a2 C# codegen port to you I think. 
This debugging/ParseView stuff might take a while....

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Apr  5 13:52:32 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] ooops....JRockit is just a vm
In-Reply-To: <680F30EF-48DA-11D6-84F7-0030653DE0D6@jguru.com>
Message-ID: <6E76A96B-48DF-11D6-84F7-0030653DE0D6@jguru.com>


On Friday, April 5, 2002, at 01:16  PM, Terence Parr wrote:

> ...damn.  Confused it with a static compiler product.

I sent original message to old antlr list...ugh.  Anyway, i was asking 
if anybody wants to test its speed etc...

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Apr  5 13:12:35 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] now that JRockit is free...
Message-ID: <D9AA1DA8-48D9-11D6-84F7-0030653DE0D6@jguru.com>

...anybody wanna try making an ANTLR win or linux binary?  Wanna check 
out it's speed?

http://www.jrockit.com/

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Fri Apr  5 14:49:07 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Re: C# ?
References: <a8l2ai+hq3p@eGroups.com>
Message-ID: <003e01c1dcf4$1904cb00$4dbc0ad2@hermes>

> AFAICT, there is currently one "open" versions - Eric's C# port for 
> 2.7.1. I now have two new ports working with 2.7.1 and 2.7.2a2 ANTLR 
> versions. The plan is to release them asap so others can continue 
> testing. The largest grammar that I have tested is the 'java' example 
> (supports the -showtree option too).
ok, let us know...

> J# is good(-ish) for maintianing a kinda no-effort-
> required "native" .NET version of ANTLR itself. I don't consider it a 
> solution since it can't generate C# parsers without the C# codegen.
exactly.
what I am looking for is something wich authorise:
options {
 language="C#";
}

OK, I just have to wait know, thanks...



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at bco.com  Fri Apr  5 14:55:06 2002
From: mzukowski at bco.com (mzukowski@bco.com)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Re: How to deal with languages with preproce
	ssor s?
Message-ID: <170826586F3BD511910D0200C110AAA8032B4882@memail03.bco-home.com>

> > Any ideas please?. How to deal with the preprocessor directives 
> in 
> > > C/C++ and C#.
> > 
> > For the GCC parser I run the preprocessor externally.
> 
> What does this mean?. What preprocessor do you run externally?. Is it 
> a separate Lexer/Parser that you generated using ANTLR as well?

It means I run gcc in preprocessor mode and pipe that into my lexer's stdin.

> Thanks. I would need to hndle the whole gamut of preprocessor 
> directives in the C language family.

Why?  What are you trying to do?

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Apr  8 02:19:17 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] ANTLR Optional statements
In-Reply-To: <20020405171631.14029.qmail@web14908.mail.yahoo.com>; from zjg1964@yahoo.com on Fri, Apr 05, 2002 at 09:16:31AM -0800
References: <170826586F3BD511910D0200C110AAA8032B487B@memail03.bco-home.com> <20020405164326.19861.qmail@web14902.mail.yahoo.com> <20020405175438.J907@cs.utwente.nl> <20020405171631.14029.qmail@web14908.mail.yahoo.com>
Message-ID: <20020408111917.A21512@cs.utwente.nl>

On Fri, Apr 05, 2002 at 09:16:31AM -0800, jg z wrote:
> > Which seems correct to me. (the added case 10's) I
> > suspect that the problem
> > is not in this actual rule but in some rules around
> > it.
> 
> Thank you, Ric,
>     I tried to manually change the .cpp code to make
> it look like yours,

That won't work as I said the problem is probably with the surrounding rules.

On Fri, Apr 05, 2002 at 08:43:26AM -0800, jg z wrote:
>    I use version 2.7.1. Is version 2.7.2a2 better?

I at least would use one of the 2.7.1 development versions. 2.7.1 has bugs
and some quite crucial ones. Grab or the 2.7.2a2 release (but be prepared
to do some extra hacking for ASTFactory changes) or take the second devel
snapshot from (the one without ASTFactory changes it's marked as such):

http://wwwhome.cs.utwente.nl/~klaren/antlr/

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Apr  8 02:25:55 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Re: C# ?
In-Reply-To: <a8l5l3+5mqp@eGroups.com>; from open.zone@virgin.net on Fri, Apr 05, 2002 at 09:40:51PM -0000
References: <7C66322F-48D8-11D6-84F7-0030653DE0D6@jguru.com> <a8l5l3+5mqp@eGroups.com>
Message-ID: <20020408112555.B21512@cs.utwente.nl>

On Fri, Apr 05, 2002 at 09:40:51PM -0000, micheal_jor wrote:
> > > 2. In a similar vein, is ParseView for use with ANLTR or the stuff
> > > that ANTLR generates?
> > 
> > Doesn't work with latest stuff, but it's for generated parsers.
> 
> What exactly makes it bad for the latest stuff?.

There's a patched version up at my antlr page:

http://wwwhome.cs.utwente.nl/~klaren/antlr/

It was some trivial stuff this version works at least on 2.7.1 but I
suspect it works on 2.7.2 as well.

> > > 3. How does the debugging stuff work?. What is the thinking behind
> > > it. If anyone can explain it in enough detail, I'll have a go at
> > > fixing ParseView for 2.7.2a2.
> > 
> > Scott Stanchfield put that stuff in.  You might contact him at 
> scott at 
> > javadude dot com.

AFAIK it adds some extra hooks and data for a graphical grammar debugger
with which you can control the parse (single step, view lookaheads and stuff)

> Thanks. I'll sent our current 2.7.2a2 C# codegen port to you I think. 
> This debugging/ParseView stuff might take a while....

I'd not put any time in the debugging stuff, at least it seems Scott
Stanchfield is not supporting it anymore, mails to him about the patched
version always went unanswered.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
				  of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From wiggjd at sbu.ac.uk  Mon Apr  8 08:42:23 2002
From: wiggjd at sbu.ac.uk (David Wigg)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] RE: ANTLR Optional statements
Message-ID: <3CB1BA5F.49884372@sbu.ac.uk>

Many thanks to Monty and Ric for your responses to previous messages on
this subject.

We are trying to convert a C++ parser from PCCTS to ANTLR (2.7.2a2) (to
generate C++ code) but finding frustrating differences between the two
systems. I presume no one has listed these differences.

The lack of hoisting seems to me to create more problems than it solves.
I echo John Mitchell's cry "When will ANTLR support hoisting?"

To remind you of our current problem, in cplusplus.g we have,

external_declaration
    :
    |  ( {TYPEDEF | template_head } class_head LCURLY )?
       ...
    |
    ;

class_head
    :  ( STRUCT
       | UNION
       | CLASS
       )
       {ID {base_clause} }
    ;

which works fine in PCCTS because the optional statements at the end
produce a genuine conditional statement using "if (condition) etc."

For ANTLR we have converted this to,

class-head
    :  ( STRUCT
       | UNION
       | CLASS
       )
       (ID (base_clause)? )?
    ;

However, the optional statements shown at the end of this production
no longer produce an optional construction ("if" statement) because
optional statements now need to know what could legitimately follow as
well. Unfortunately, in our case, ANTLR seems to have forgotten that
LCURLY has to follow this, and throws a NoViableAltException (because
there is no alternative to ID (other than EOF).

Is this correct? If so, we will have to recast the g file somehow.

Thanks for your help.

David,
South Bank University
London, UK.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Jason_Sheu at pmc-sierra.com  Mon Apr  8 10:52:37 2002
From: Jason_Sheu at pmc-sierra.com (sjsheu)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] spice/hspice grammer?
Message-ID: <a8sld5+s1a@eGroups.com>

Hi,

Hope this is the right group to ask. Does anyone know any 
spice/hspice grammer written in ANTLR? I was able to find one on the 
Net before. However, I couldn't find it anymore.

Thanks.


Jason Sheu



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Apr  9 02:26:14 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] RE: ANTLR Optional statements
In-Reply-To: <3CB1BA5F.49884372@sbu.ac.uk>; from wiggjd@sbu.ac.uk on Mon, Apr 08, 2002 at 04:42:23PM +0100
References: <3CB1BA5F.49884372@sbu.ac.uk>
Message-ID: <20020409112614.D4291@cs.utwente.nl>

Hi,

On Mon, Apr 08, 2002 at 04:42:23PM +0100, David Wigg wrote:
> However, the optional statements shown at the end of this production
> no longer produce an optional construction ("if" statement) because
> optional statements now need to know what could legitimately follow as
> well. Unfortunately, in our case, ANTLR seems to have forgotten that
> LCURLY has to follow this, and throws a NoViableAltException (because
> there is no alternative to ID (other than EOF).
> 
> Is this correct? If so, we will have to recast the g file somehow.

Could you send me the conversion of the grammar so far, that way I can
verify if this is a problem in a) antlr, b) cpp-codegen, c) the grammar.
Bughunting is not possible without a complete input demonstrating the
problem.

Thanks,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From yhhf_dy at yahoo.com  Tue Apr  9 12:34:01 2002
From: yhhf_dy at yahoo.com (yhhf_dy)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Is there a Visual Basic 6 grammar for ANTLR(or VB .Net)?
Message-ID: <a8vfn9+uhlu@eGroups.com>

I'm going to develop a Visual Basic 6 parser by using ANTLR. Right 
now I know there is a informal BNF grammar for VB.Net, I'll try to 
convert this kind of grammar to ANTLR recognized EBNF. I'm new to 
grammar/parser area, I want to know how hard to use ANTLR to generate 
a VB parser and how about ANTLR learning curve.  
 
Any suggestion would be appreciated. Thanks




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Wed Apr 10 09:02:53 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] ANTLR Optional statements
References: <20020405144419.48158.qmail@web14905.mail.yahoo.com>
Message-ID: <3CB4622D.F12C8487@boeing.com>

jg z wrote:
> 
[...]
> class_head
>    :
>     (  STRUCT
>     |  UNION
>     |  CLASS
>     )
>     (ID ( base_clause)? )?
>    ;
> 

Just out of curiosity what does:

     (  STRUCT
     |  UNION
     |  CLASS
     )
     ((ID)=>ID ( base_clause)? )?
    ;
 
produce?

Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Wed Apr 10 09:24:41 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] ANTLR Optional statements
In-Reply-To: <3CB4622D.F12C8487@boeing.com>; from sinan.karasu@boeing.com on Wed, Apr 10, 2002 at 09:02:53AM -0700
References: <20020405144419.48158.qmail@web14905.mail.yahoo.com> <3CB4622D.F12C8487@boeing.com>
Message-ID: <20020410182441.K4291@cs.utwente.nl>

Hi,

I'll post the solution for the problem in question also to the group..

In context there is a calling rule:

external_declaration:
(  ( (TYPEDEF | template_head )? class_head LCURLY) =>
      ( template_head )? declaration
   | .. more ..
.	

> > class_head
> >    :
> >     (  STRUCT
> >     |  UNION
> >     |  CLASS
> >     )
> >     (ID ( base_clause)? )?
> >    ;

The problem here was the fact that class_head was not called inside the
grammar it was an unreferenced rule. As a result ANTLR set the followset to
EOF. In stead of to EOF and LCURLY.

If class_head had been used inside template_head/declaration rules the
problem would not have occured.

Which leads to the following rule of thumb:

Do not use loose (unreferenced) rules inside predicates.

ANTLR should probably give a warning for unreferenced rules especially if
they occur inside predicates. (Or would this have been caught by hoisting?
I'm not familiar with PCCTS's hoisting)

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
Wit is cultured insolence. --- Aristotle


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tmoog at polhode.com  Wed Apr 10 15:30:03 2002
From: tmoog at polhode.com (Tom Moog)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] ANTLR Optional statements
In-Reply-To: <20020410182441.K4291@cs.utwente.nl>
Message-ID: <Pine.BSF.4.21.0204101715200.41738-100000@shell-1.enteract.com>


Part 1:

The extra EOF in the follow set is a general problem.
When antlr2 or pccts analyzes a grammar and finds an
orphan rule they assume that it is a start rule.  Since
every start rule should have EOF in the follow-set they
add one.  They should probably warn the user, but they
don't.

There is a warning about this in the "Notes For New Users
of pccts" and why pccts has a "-info o" option which
lists all orphan rules.


Part 2

If antlr2 doesn't see class_head, then obviously it will
compute the follow set improperly.  Sounds like a bug
to me.  My hypothesis is that it is skipping the block
following the syntax predicate in computing first and follow
sets.  This is correct for first sets, but incorrect for 
follow sets.


On Wed, 10 Apr 2002, Ric Klaren wrote:

> Hi,
> 
> I'll post the solution for the problem in question also to the group..
> 
> In context there is a calling rule:
> 
> external_declaration:
> (  ( (TYPEDEF | template_head )? class_head LCURLY) =>
>       ( template_head )? declaration
>    | .. more ..
> .	
> 
> > > class_head
> > >    :
> > >     (  STRUCT
> > >     |  UNION
> > >     |  CLASS
> > >     )
> > >     (ID ( base_clause)? )?
> > >    ;
> 
> The problem here was the fact that class_head was not called inside the
> grammar it was an unreferenced rule. As a result ANTLR set the followset to
> EOF. In stead of to EOF and LCURLY.
> 
> If class_head had been used inside template_head/declaration rules the
> problem would not have occured.
> 
> Which leads to the following rule of thumb:
> 
> Do not use loose (unreferenced) rules inside predicates.
> 
> ANTLR should probably give a warning for unreferenced rules especially if
> they occur inside predicates. (Or would this have been caught by hoisting?
> I'm not familiar with PCCTS's hoisting)
> 
> Cheers,
> 
> Ric
> --
> -----+++++*****************************************************+++++++++-------
>     ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
> -----+++++*****************************************************+++++++++-------
> Wit is cultured insolence. --- Aristotle
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From yhhf_dy at yahoo.com  Thu Apr 11 07:35:28 2002
From: yhhf_dy at yahoo.com (yhhf_dy)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Does somebody have prototype grammar of visual basic for antlr?
Message-ID: <a946vg+85pn@eGroups.com>

I just begin to use Antlr to generate a VB parser. After about 
one_week learning, I just have a taste of ANTLR. What I have learned 
is not enough to generate a VB 6 parser. So I ask you help. If you 
have prototype grammer of VB for ANTLR, would you please send me a 
copy, thank you very much or would you please give some suggestions.

Thanks a lot,

fan@ostnet.com




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Apr 11 11:15:20 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] ANTLR Optional statements
In-Reply-To: <Pine.BSF.4.21.0204101715200.41738-100000@shell-1.enteract.com>
Message-ID: <153F9A86-4D78-11D6-82BD-0030653DE0D6@jguru.com>


On Wednesday, April 10, 2002, at 03:30  PM, Tom Moog wrote:

>
> Part 1:
>
> The extra EOF in the follow set is a general problem.
> When antlr2 or pccts analyzes a grammar and finds an
> orphan rule they assume that it is a start rule.  Since
> every start rule should have EOF in the follow-set they
> add one.  They should probably warn the user, but they
> don't.

Well, you might have a grammar with lots of start rules...should one 
really get a warning for that?  Certainly it would be nice to be able to 
get a list of these suckers.  Not sure a warning is proper since every 
single grammar will get a warning then ;)

> There is a warning about this in the "Notes For New Users
> of pccts" and why pccts has a "-info o" option which
> lists all orphan rules.

Ah...you've beaten me to the punch :)  Thanks for all your hard work on 
PCCTS!

> Part 2
>
> If antlr2 doesn't see class_head, then obviously it will
> compute the follow set improperly.  Sounds like a bug

It sees class_head in the predicate but not in the list of rule 
references apparently.  Therefore a standard FOLLOW will not compute it 
properly.  I think I remember saying that a predicate is not part of the 
grammar and is merely there to show a minimum lookahead language that 
predicts an alternative.  It should not be included in FOLLOW 
computations.  HOWEVER, it needs to compute FIRST sets properly.  If the 
lookahead can see past class_head it must include what follows that 
specific reference since it knws the context of the FOLLOW.

> to me.  My hypothesis is that it is skipping the block
> following the syntax predicate in computing first and follow
> sets.  This is correct for first sets, but incorrect for
> follow sets.

ANTLR computes standard static k lookahead to determine if the backtrack 
is necessary even if you specify one.  I should be computing this on the 
alternative not the predicate.

Tom: is this similar to the error you pointed out in PCCTS that you 
fixed regarding syn preds?

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Thu Apr 11 11:52:48 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Language Preprocessor.
Message-ID: <6791D870658F174FB863E2FA890000A37DCBBC@abyss4.advancedsw.com>

I was wondering if I can mark actions as being Java or C++.  If I could I
would
be able to have both java and C++ action in the same grammar file and just
change 
the language to be produced.  I am think of something like a C++
preprocessor.
 
#if language Java
{
 < ACTIONS >
}
#else if language C++
{
  < ACTIONS >
}
 
 
Trey Spiva
Senior Software Engineer
trey.spiva@embarcadero.com
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020411/df384404/attachment.html
From tmoog at polhode.com  Thu Apr 11 15:39:50 2002
From: tmoog at polhode.com (Tom Moog)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] ANTLR Optional statements
In-Reply-To: <153F9A86-4D78-11D6-82BD-0030653DE0D6@jguru.com>
Message-ID: <Pine.BSF.4.21.0204111737040.12880-100000@shell-2.enteract.com>


Maybe this will explain what is going on more 
clearly:
------------------------------------------------------------
#196. (Changed in MR14) Problems with "(alpha)? beta" guess

    Consider the following syntactic predicate in a grammar
    with 2 tokens of lookahead (k=2 or ck=2):

        rule  : ( alpha )? beta ;
        alpha : S t ;
        t     : T U
              | T
              ;
        beta  : S t Z ;

    When antlr computes the prediction expression with one token
    of lookahead for alts 1 and 2 of rule t it finds an ambiguity.

    Because the grammar has a lookahead of 2 it tries to compute
    two tokens of lookahead for alts 1 and 2 of t.  Alt 1 clearly
    has a lookahead of (T U).  Alt 2 is one token long so antlr
    tries to compute the follow set of alt 2, which means finding
    the things which can follow rule t in the context of (alpha)?.
    This cannot be computed, because alpha is only part of a rule,
    and antlr can't tell what part of beta is matched by alpha and
    what part remains to be matched.  Thus it impossible for antlr
    to  properly determine the follow set of rule t.

    Prior to 1.33MR14, the follow of (alpha)? was computed as
    FIRST(beta) as a result of the internal representation of
    guess blocks.

    With MR14 the follow set will be the empty set for that context.

    Normally, one expects a rule appearing in a guess block to also
    appear elsewhere.  When the follow context for this other use
    is "ored" with the empty set, the context from the other use
    results, and a reasonable follow context results.  However if
    there is *no* other use of the rule, or it is used in a different
    manner then the follow context will be inaccurate - it was
    inaccurate even before MR14, but it will be inaccurate in a
    different way.

    For the example given earlier, a reasonable way to rewrite the
    grammar:

        rule  : ( alpha )? beta
        alpha : S t ;
        t     : T U
              | T
              ;
        beta  : alpha Z ;

    If there are no other uses of the rule appearing in the guess
    block it will generate a test for EOF - a workaround for
    representing a null set in the lookahead tests.

    If you encounter such a problem you can use the -alpha option
    to get additional information:

    line 2: error: not possible to compute follow set for alpha
              in an "(alpha)? beta" block.

    With the antlr -alpha command line option the following information
    is inserted into the generated file:

    #if 0

      Trace of references leading to attempt to compute the follow set of
      alpha in an "(alpha)? beta" block. It is not possible for antlr to
      compute this follow set because it is not known what part of beta has
      already been matched by alpha and what part remains to be matched.

      Rules which make use of the incorrect follow set will also be incorrect

         1 #token T              alpha/2   line 7     brief.g
         2 end alpha             alpha/3   line 8     brief.g
         2 end (...)? block at   start/1   line 2     brief.g

    #endif

    At the moment, with the -alpha option selected the program marks
    any rules which appear in the trace back chain (above) as rules with
    possible problems computing follow set.

    Reported by Greg Knapen.




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tmoog at polhode.com  Thu Apr 11 15:27:15 2002
From: tmoog at polhode.com (Tom Moog)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] ANTLR Optional statements
In-Reply-To: <153F9A86-4D78-11D6-82BD-0030653DE0D6@jguru.com>
Message-ID: <Pine.BSF.4.21.0204111722310.11456-100000@shell-2.enteract.com>



Ahhh.  I was misled by the difference in antlr2 and
pccts syntax.  I saw the (...)? and didn't see the
"=>" on the far right side.  My mistake.

Yes, this was pccts fix #196, I think.  You have to
use a special option (-alpha) to get a warning - so
it's a two pass algorithm.  After you know there
is a "(alpha)? beta" problem you can verify it with
-alpha.  A little bit too late, usually.

Tom

On Thu, 11 Apr 2002, Terence Parr wrote:

> 
> On Wednesday, April 10, 2002, at 03:30  PM, Tom Moog wrote:
> 
> >
> > Part 1:
> >
> > The extra EOF in the follow set is a general problem.
> > When antlr2 or pccts analyzes a grammar and finds an
> > orphan rule they assume that it is a start rule.  Since
> > every start rule should have EOF in the follow-set they
> > add one.  They should probably warn the user, but they
> > don't.
> 
> Well, you might have a grammar with lots of start rules...should one 
> really get a warning for that?  Certainly it would be nice to be able to 
> get a list of these suckers.  Not sure a warning is proper since every 
> single grammar will get a warning then ;)
> 
> > There is a warning about this in the "Notes For New Users
> > of pccts" and why pccts has a "-info o" option which
> > lists all orphan rules.
> 
> Ah...you've beaten me to the punch :)  Thanks for all your hard work on 
> PCCTS!
> 
> > Part 2
> >
> > If antlr2 doesn't see class_head, then obviously it will
> > compute the follow set improperly.  Sounds like a bug
> 
> It sees class_head in the predicate but not in the list of rule 
> references apparently.  Therefore a standard FOLLOW will not compute it 
> properly.  I think I remember saying that a predicate is not part of the 
> grammar and is merely there to show a minimum lookahead language that 
> predicts an alternative.  It should not be included in FOLLOW 
> computations.  HOWEVER, it needs to compute FIRST sets properly.  If the 
> lookahead can see past class_head it must include what follows that 
> specific reference since it knws the context of the FOLLOW.
> 
> > to me.  My hypothesis is that it is skipping the block
> > following the syntax predicate in computing first and follow
> > sets.  This is correct for first sets, but incorrect for
> > follow sets.
> 
> ANTLR computes standard static k lookahead to determine if the backtrack 
> is necessary even if you specify one.  I should be computing this on the 
> alternative not the predicate.
> 
> Tom: is this similar to the error you pointed out in PCCTS that you 
> fixed regarding syn preds?
> 
> Ter
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Fri Apr 12 03:51:30 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Language Preprocessor.
In-Reply-To: <6791D870658F174FB863E2FA890000A37DCBBC@abyss4.advancedsw.com>
Message-ID: <20020412105130.19590.qmail@web14809.mail.yahoo.com>

--- Trey Spiva <Trey.Spiva@embarcadero.com> wrote:
> I was wondering if I can mark actions as being Java or C++.  If I could I
> would
> be able to have both java and C++ action in the same grammar file and just
> change 
> the language to be produced.  I am think of something like a C++
> preprocessor.

Hi Trey,

I think a better solution is to mark the points where action should be
inserted in a language-independent manner and later use a simple parser to
replace the markers with actual code. The association <marker>-<code to be
inserted> can be stored in a different file. This way the grammar is kept
generic and easy to read, and by changing the file, you can generate "real"
grammars with actions for Java, C++ or whatever.

This is somewhat similar to the suggestion of Monty to use noweb (literate
programming). I wrote a simple tool that allows me to place markers of the
form:

rule: alfa <init> ( beta <add> )+ ;

and to specify in another file what <init> and <add> mean. If you want, I
can send it to you.


Best regards,
Bogdan

 
> #if language Java
> {
>  < ACTIONS >
> }
> #else if language C++
> {
>   < ACTIONS >
> }
>  
>  
> Trey Spiva
> Senior Software Engineer
> trey.spiva@embarcadero.com
>  
> 



__________________________________________________
Do You Yahoo!?
Yahoo! Tax Center - online filing with TurboTax
http://taxes.yahoo.com/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Fri Apr 12 06:14:46 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Language Preprocessor.
Message-ID: <6791D870658F174FB863E2FA890000A37DCBBF@abyss4.advancedsw.com>

 
> This is somewhat similar to the suggestion of Monty to use noweb (literate
> programming). I wrote a simple tool that allows me to place markers of the
> form:
> 
> rule: alfa <init> ( beta <add> )+ ;
> 
> and to specify in another file what <init> and <add> mean. If you want, I
> can send it to you.

 
Yes I would like to take a look. Thanks.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Fri Apr 12 08:49:10 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] paraphrase without lexer
Message-ID: <016301c1e239$97cd9350$0100a8c0@daemon>


Hi,

I'm using Antlr to create a parser, but because I'm not using the lexer 
support of Antlr, I can't seem to specify a "paraphrase" for a token
(which is used when issueing a syntax error).

Does anyone know if it's possible to specify a paraphrase in the
parser, instead of in the lexer?

e.g. 

tokens {
    MYTOKEN (options {paraphrase="my token"})
}

Silvain




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From yhhf_dy at yahoo.com  Fri Apr 12 09:17:18 2002
From: yhhf_dy at yahoo.com (yhhf_dy)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] How to get difference set between two sets?
Message-ID: <a971ae+3iph@eGroups.com>

Hi,

There are two set described as following rules :

IDENTIFIER:('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
keyword : "class" | "public" | "private" | etc.

I want to get difference between IDENTIFIER set and keyword set, that 
is  difference set = IDENTIFIER set - keyword set

Would you please help me how to implement this in ANTLR.

Thank you ahead.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Apr 12 10:23:54 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] How to get difference set between two sets?
In-Reply-To: <a971ae+3iph@eGroups.com>
Message-ID: <1037972A-4E3A-11D6-82BD-0030653DE0D6@jguru.com>


On Friday, April 12, 2002, at 09:17  AM, yhhf_dy wrote:

> Hi,
>
> There are two set described as following rules :
>
> IDENTIFIER:('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
> keyword : "class" | "public" | "private" | etc.
>
> I want to get difference between IDENTIFIER set and keyword set, that
> is  difference set = IDENTIFIER set - keyword set
>
> Would you please help me how to implement this in ANTLR.

That set is infinite.  No way to delineate on a finite computer.

Are you asking how to get ANTLR to return IDENTIFIER and CLASS, PUBLIC 
etc...?  That's just a literals issue.  See the doc or FAQ.

Regards,
Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From yhhf_dy at yahoo.com  Fri Apr 12 10:49:02 2002
From: yhhf_dy at yahoo.com (yhhf_dy)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Re: How to get difference set between two sets?
In-Reply-To: <1037972A-4E3A-11D6-82BD-0030653DE0D6@jguru.com>
Message-ID: <a976me+n1ft@eGroups.com>

Thank for your response!

Maybe I didn't describ my question clear last time. my question is 
there are two sets - identifier set and keyword set. keyword set is 
subset of identifier. I want to get the difference set between 
identifier and keyword, that is, get identifier but not include 
keyword. Is it possible to do that in antlr?

I'm going to develop a VB 6 parser. Now I have established vb grammar 
file of anltr based on VB .NET grammar
(http://msdn.microsoft.com/library/en-
us/vbls7/html/vblrfvbspec12.asp.) When I compile grammar file there 
are lots of nondeterminism warning. I hope I can overcome those 
problem, right now I knew that it was a hard work to generate VB 
parser.   

Good Wishes

Fan Yang


--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> 
> On Friday, April 12, 2002, at 09:17  AM, yhhf_dy wrote:
> 
> > Hi,
> >
> > There are two set described as following rules :
> >
> > IDENTIFIER:('a'..'z'|'A'..'Z'|'_') 
('a'..'z'|'A'..'Z'|'_'|'0'..'9')*
> > keyword : "class" | "public" | "private" | etc.
> >
> > I want to get difference between IDENTIFIER set and keyword set, 
that
> > is  difference set = IDENTIFIER set - keyword set
> >
> > Would you please help me how to implement this in ANTLR.
> 
> That set is infinite.  No way to delineate on a finite computer.
> 
> Are you asking how to get ANTLR to return IDENTIFIER and CLASS, 
PUBLIC 
> etc...?  That's just a literals issue.  See the doc or FAQ.
> 
> Regards,
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Apr 12 10:22:30 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] paraphrase without lexer
In-Reply-To: <016301c1e239$97cd9350$0100a8c0@daemon>
Message-ID: <DE4E31BF-4E39-11D6-82BD-0030653DE0D6@jguru.com>


On Friday, April 12, 2002, at 08:49  AM, Silvain Piree wrote:

>
> Hi,
>
> I'm using Antlr to create a parser, but because I'm not using the lexer
> support of Antlr, I can't seem to specify a "paraphrase" for a token
> (which is used when issueing a syntax error).
>
> Does anyone know if it's possible to specify a paraphrase in the
> parser, instead of in the lexer?
>
> e.g.
>
> tokens {
>     MYTOKEN (options {paraphrase="my token"})
> }

Well, if you're not using the lexer support of ANTLR then it can't help 
you with paraphrases and can't transmit anything to the lexer.  With 
your own lexer, you are completely on your own I'm afraid.

Best regards,
Terence


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Apr 12 12:07:47 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Re: How to get difference set between two sets?
In-Reply-To: <a976me+n1ft@eGroups.com>
Message-ID: <93E3C9E4-4E48-11D6-82BD-0030653DE0D6@jguru.com>


On Friday, April 12, 2002, at 10:49  AM, yhhf_dy wrote:

> Thank for your response!
>
> Maybe I didn't describ my question clear last time. my question is
> there are two sets - identifier set and keyword set. keyword set is
> subset of identifier. I want to get the difference set between
> identifier and keyword, that is, get identifier but not include
> keyword. Is it possible to do that in antlr?

That's a hashtable isn't it?  You should be able to get the literals 
table (array or string) from the lexer object; it must also build a 
hashtable from that.

> I'm going to develop a VB 6 parser. Now I have established vb grammar
> file of anltr based on VB .NET grammar
> (http://msdn.microsoft.com/library/en-
> us/vbls7/html/vblrfvbspec12.asp.) When I compile grammar file there
> are lots of nondeterminism warning. I hope I can overcome those
> problem, right now I knew that it was a hard work to generate VB
> parser.

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tom_m_roeder at yahoo.ca  Fri Apr 12 13:40:38 2002
From: tom_m_roeder at yahoo.ca (tom_m_roeder)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Frustrating (MSV)C++ EOF problem with 2.7.2a
Message-ID: <a97go6+j5b1@eGroups.com>

Hi everyone,

   I'm new to the group, and have literally (modulo a couple days)
just started using ANTLR.  I like it very much, but have run into a
small issue with my lexer, and I hope you can help me clarify it.  My
parser/lexer now works with (ie. recognizes) my sample files, and I
believe that that part of it is correct, but it hangs on EOF.  I even
have EOF in the rule that I use to start, thus:

compilationUnits
    :    (compilationUnit)* EOF!
    ;

but the lexer seems to hang on waiting for the EOF.  There are several
notes in various places about the EOF conditions, but I was not able
to make any of them help.  I am compiling this under MS Visual C++
6.0, and have managed to compile the static library and link with few
problems, other than changing the __declspec(dllimports) so that it
doesn't get written.  I am compiling with _UNICODE and UNICODE
defined, however, and I have this fear that there's something along
these lines that is killing me.  Can anyone suggest a solution.

    Thanks,

       Tom Roeder


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jkluebs at yahoo.com  Fri Apr 12 14:33:57 2002
From: jkluebs at yahoo.com (jkluebs)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] parsing BSDL strings and "nested" parsers
Message-ID: <a97js5+88jq@eGroups.com>

I am working on a public domain BSDL parser and I would like some 
advice on how to handle strings. Basically, there is a string type 
that is lexically much like a C string (double quotes, can be 
concatenated with a '&').

The thing is that the contents of the strings have semantic meaning 
that can become part of the AST (the contents of the strings have 
EBNF and must be parsed in order to generate a complete BSDL tree).

I can't figure out how to handle this if I am to have a single tree 
generating parser, then the lexer stage or stages must somehow 
concatenate the string (step 1) and then lexically analyze that 
concatenation (step 2). I'm pretty sure that this can't be done with 
one lexer, as I can't see how the lexer could concatenate this string 
and then use this concatenated thing as the source of characters for 
forming tokens. So it would involve a multiple lexing steps. I 
realize that ANTLR has nice interfaces to support its "token stream 
pattern" but I can't figure out how this is going to help me here.

The only workable way that I have thought out is to use nested 
lexer/parsers to process the strings. So the main lexer would pass 
the string fragments and the main parser would concatenate the 
string. Then, when a parser rule in the main parser could simply 
reference the string rule. The parser rule's action would create a 
new lexer that would pass the string through an istringstream and a 
new miniparser that was just good for the specific grammer in the 
string. With BSDL I would need about 8 or 9 of these minigrammars. 
The tree generated by this miniparser could be directly grafted on to 
the main AST.

So basically my question is if this idea of having a main parser 
actions spawn new lexer/parser pairs to process its "parsed out" 
rules is a good pattern for my problem, or is there a nicer way.

All ideas are appreciated.

Thanks,
JKL


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tom_m_roeder at yahoo.ca  Fri Apr 12 14:40:35 2002
From: tom_m_roeder at yahoo.ca (tom_m_roeder)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Re: Frustrating (MSV)C++ EOF problem with 2.7.2a
In-Reply-To: <a97go6+j5b1@eGroups.com>
Message-ID: <a97k8j+88p8@eGroups.com>

Furthermore...having compiled the tracing into the lexer and parser, I
see that it thinks that the stream is returning WHITESPACE to it,
where my definition of WHITESPACE is    
 (' ' | '\t' | '\n' {newline();} | '\r')*

I hope that there is something obviously wrong with this.  

   Thanks,


      Tom Roeder

--- In antlr-interest@y..., "tom_m_roeder" <tom_m_roeder@y...> wrote:
> Hi everyone,
> 
>    I'm new to the group, and have literally (modulo a couple days)
> just started using ANTLR.  I like it very much, but have run into a
> small issue with my lexer, and I hope you can help me clarify it.  My
> parser/lexer now works with (ie. recognizes) my sample files, and I
> believe that that part of it is correct, but it hangs on EOF.  I even
> have EOF in the rule that I use to start, thus:
> 
> compilationUnits
>     :    (compilationUnit)* EOF!
>     ;
> 
> but the lexer seems to hang on waiting for the EOF.  There are several
> notes in various places about the EOF conditions, but I was not able
> to make any of them help.  I am compiling this under MS Visual C++
> 6.0, and have managed to compile the static library and link with few
> problems, other than changing the __declspec(dllimports) so that it
> doesn't get written.  I am compiling with _UNICODE and UNICODE
> defined, however, and I have this fear that there's something along
> these lines that is killing me.  Can anyone suggest a solution.
> 
>     Thanks,
> 
>        Tom Roeder


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From luke.evans at seagatesoftware.com  Fri Apr 12 14:59:56 2002
From: luke.evans at seagatesoftware.com (Luke Evans)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Eclipse
Message-ID: <A399661DAF14DA46AAB21B088F3887DC066DD64A@vanent14.crystaldecisions.com>

Hi all,

I've seen a few comments about an Eclipse plug-in.  IMHO, Eclipse will
become one of, if not _the_, most popular IDE's for general Java
developement.  Besides... we use it here at Crystal Decisions.

Now, we also happen to use Antlr, and so having an Eclipse plug-in would be
very handy indeed.

So... I'm wondering if there is a WIP for a plug-in and whether it is at a
point where it is useable.  If not, I'm wondering how much effort is going
into this, and when something might be forthcoming, as this tooling would be
very cool - and definitely save some 'grubbing around' when we're in a
'grammar change' phase. 

Something like ParseView, or even a graphical grammar builder in Eclipse
would be cool too - but now I'm getting way ahead of reality ;-)

Luke


 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tom_m_roeder at yahoo.ca  Fri Apr 12 14:47:17 2002
From: tom_m_roeder at yahoo.ca (tom_m_roeder)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Re: Frustrating (MSV)C++ EOF problem with 2.7.2a
In-Reply-To: <a97go6+j5b1@eGroups.com>
Message-ID: <a97kl5+brms@eGroups.com>

So, the solution I found, for your information, was to check to see if
(int)(*($getText).c_str()) == 0 or not on each WHITESPACE.  I hope
this doesn't cause difficulty, but then again it oughtn't to.

   Tom ROeder

--- In antlr-interest@y..., "tom_m_roeder" <tom_m_roeder@y...> wrote:
> Hi everyone,
> 
>    I'm new to the group, and have literally (modulo a couple days)
> just started using ANTLR.  I like it very much, but have run into a
> small issue with my lexer, and I hope you can help me clarify it.  My
> parser/lexer now works with (ie. recognizes) my sample files, and I
> believe that that part of it is correct, but it hangs on EOF.  I even
> have EOF in the rule that I use to start, thus:
> 
> compilationUnits
>     :    (compilationUnit)* EOF!
>     ;
> 
> but the lexer seems to hang on waiting for the EOF.  There are several
> notes in various places about the EOF conditions, but I was not able
> to make any of them help.  I am compiling this under MS Visual C++
> 6.0, and have managed to compile the static library and link with few
> problems, other than changing the __declspec(dllimports) so that it
> doesn't get written.  I am compiling with _UNICODE and UNICODE
> defined, however, and I have this fear that there's something along
> these lines that is killing me.  Can anyone suggest a solution.
> 
>     Thanks,
> 
>        Tom Roeder


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Fri Apr 12 23:55:02 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] paraphrase without lexer
References: <DE4E31BF-4E39-11D6-82BD-0030653DE0D6@jguru.com>
Message-ID: <004e01c1e2b8$2d30d780$0100a8c0@daemon>

Terence,

> > Does anyone know if it's possible to specify a paraphrase in the
> > parser, instead of in the lexer?
>
> Well, if you're not using the lexer support of ANTLR then it can't help 
> you with paraphrases and can't transmit anything to the lexer.  With 
> your own lexer, you are completely on your own I'm afraid.

I understand your point; I was hoping that it was possible to specify
the paraphrase in the parser (in the token section) because the paraphrase
is only used by the parser, not by the lexer.

Anyway, thanks for the response,

Silvain


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From glindholm at yahoo.com  Sat Apr 13 15:00:12 2002
From: glindholm at yahoo.com (glindholm)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Can ANTLR build a COBOL lexer?
Message-ID: <a9a9pc+lge3@eGroups.com>

I'm working on a COBOL parser and trying to decide if I can use 
ANTLR to build the lexer or if I should just roll my own. 

I'm going to use this for language translation so I want to preserve 
all the COBOL "fluff" tokens like line-numbers and mod-codes as 
hidden tokens.

The problem is that COBOL has column positional tokens. 
Everything in columns 1-6 is considered the line-number.
The character in column 7 is the comment or continuation character.
Columns 73-80 are the mod-code.
Everything in columns 8 to 72 is free format (mostly).


So my first attempt (which of course failed) at getting the line 
number was:

LINENUM: {1==getColumn()}? . . . . . .;

This has a nondeterminism with every other token rule because of 
the '.' matches everything. The semantic predicate {1==getColumn()}? 
doesn't seem to help because it doesn't get checked until we're 
already in the rule where it throws a SemanticException() if it 
fails.

Question 1) Is the SemanticException suppose to be caught in 
nextToken() and the next rule tried?  I.e. We went into the wrong 
rule let's try the next one?

Question 2) Is this what Hoisting is all about? If Hoisting was 
supported would the {1==getColumn()}? be checked before going into 
the rule?

Question 3) Can this be made to work? Is there any facility in ANTLR 
that I can use for this or do I write my own lexer?


If I write my own lexer I know I need to implement TokenStream.  No 
problem.

Question 4)
What is the strategy for keeping the Token Vocabularies syncronized 
between the ANTLR parser and my non-Antlr lexer?

Should I write the parser first so I can use xTokenTypes in my 
lexer? Or is there some reason I need to hand code a xTokenTypes.txt 
file?

Any other tips or suggestions?

Thanks

Greg Lindholm


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tmoog at polhode.com  Sat Apr 13 17:28:17 2002
From: tmoog at polhode.com (Tom Moog)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Can ANTLR build a COBOL lexer?
In-Reply-To: <a9a9pc+lge3@eGroups.com>
Message-ID: <Pine.BSF.4.21.0204131924370.52346-100000@shell-2.enteract.com>


Some things are hard for a lexer to do, and that includes
having a special mode for column 72.  Write something
that goes in front of the lexer that strips the first and 
last part and saves them.  Perhaps an array indexed by line
number.


On Sat, 13 Apr 2002, glindholm wrote:

> I'm working on a COBOL parser and trying to decide if I can use 
> ANTLR to build the lexer or if I should just roll my own. 
> 
> I'm going to use this for language translation so I want to preserve 
> all the COBOL "fluff" tokens like line-numbers and mod-codes as 
> hidden tokens.
> 
> The problem is that COBOL has column positional tokens. 
> Everything in columns 1-6 is considered the line-number.
> The character in column 7 is the comment or continuation character.
> Columns 73-80 are the mod-code.
> Everything in columns 8 to 72 is free format (mostly).
> 
> 
> So my first attempt (which of course failed) at getting the line 
> number was:
> 
> LINENUM: {1==getColumn()}? . . . . . .;
> 
> This has a nondeterminism with every other token rule because of 
> the '.' matches everything. The semantic predicate {1==getColumn()}? 
> doesn't seem to help because it doesn't get checked until we're 
> already in the rule where it throws a SemanticException() if it 
> fails.
> 
> Question 1) Is the SemanticException suppose to be caught in 
> nextToken() and the next rule tried?  I.e. We went into the wrong 
> rule let's try the next one?
> 
> Question 2) Is this what Hoisting is all about? If Hoisting was 
> supported would the {1==getColumn()}? be checked before going into 
> the rule?
> 
> Question 3) Can this be made to work? Is there any facility in ANTLR 
> that I can use for this or do I write my own lexer?
> 
> 
> If I write my own lexer I know I need to implement TokenStream.  No 
> problem.
> 
> Question 4)
> What is the strategy for keeping the Token Vocabularies syncronized 
> between the ANTLR parser and my non-Antlr lexer?
> 
> Should I write the parser first so I can use xTokenTypes in my 
> lexer? Or is there some reason I need to hand code a xTokenTypes.txt 
> file?
> 
> Any other tips or suggestions?
> 
> Thanks
> 
> Greg Lindholm
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Sun Apr 14 10:16:00 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] paraphrase without lexer
In-Reply-To: <004e01c1e2b8$2d30d780$0100a8c0@daemon>
Message-ID: <4AD4C2E9-4FCB-11D6-82BD-0030653DE0D6@jguru.com>


On Friday, April 12, 2002, at 11:55  PM, Silvain Piree wrote:

> Terence,
>
>>> Does anyone know if it's possible to specify a paraphrase in the
>>> parser, instead of in the lexer?
>>
>> Well, if you're not using the lexer support of ANTLR then it can't help
>> you with paraphrases and can't transmit anything to the lexer.  With
>> your own lexer, you are completely on your own I'm afraid.
>
> I understand your point; I was hoping that it was possible to specify
> the paraphrase in the parser (in the token section) because the 
> paraphrase
> is only used by the parser, not by the lexer.

Ah...i had not thought about it that way.  You're right.  In principle 
that could work; only problem is that I think ANTLR stores that stuff in 
the lexer ;)

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Sun Apr 14 11:20:53 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Can ANTLR build a COBOL lexer?
References: <a9a9pc+lge3@eGroups.com>
Message-ID: <007f01c1e3e1$1dc76c80$0100a8c0@daemon>


Greg,

lexers are not very well suited for positional stuff like left/right margin,
etc. I would advise you to use a preprocessor to extract the margins
and merge the removed margins afterwards with the syntax tree.

Silvain

p.s. good luck writing the cobol grammar; it can be done with antlr
       (I did) but solving the ambiguities introduced by ANSI '85 can
       prove to be a challenge ;-)

----- Original Message -----
From: "glindholm" <glindholm@yahoo.com>
To: <antlr-interest@yahoogroups.com>
Sent: Sunday, April 14, 2002 0:00
Subject: [antlr-interest] Can ANTLR build a COBOL lexer?


> I'm working on a COBOL parser and trying to decide if I can use
> ANTLR to build the lexer or if I should just roll my own.
>
> I'm going to use this for language translation so I want to preserve
> all the COBOL "fluff" tokens like line-numbers and mod-codes as
> hidden tokens.
>
> The problem is that COBOL has column positional tokens.
> Everything in columns 1-6 is considered the line-number.
> The character in column 7 is the comment or continuation character.
> Columns 73-80 are the mod-code.
> Everything in columns 8 to 72 is free format (mostly).
>
>
> So my first attempt (which of course failed) at getting the line
> number was:
>
> LINENUM: {1==getColumn()}? . . . . . .;
>
> This has a nondeterminism with every other token rule because of
> the '.' matches everything. The semantic predicate {1==getColumn()}?
> doesn't seem to help because it doesn't get checked until we're
> already in the rule where it throws a SemanticException() if it
> fails.
>
> Question 1) Is the SemanticException suppose to be caught in
> nextToken() and the next rule tried?  I.e. We went into the wrong
> rule let's try the next one?
>
> Question 2) Is this what Hoisting is all about? If Hoisting was
> supported would the {1==getColumn()}? be checked before going into
> the rule?
>
> Question 3) Can this be made to work? Is there any facility in ANTLR
> that I can use for this or do I write my own lexer?
>
>
> If I write my own lexer I know I need to implement TokenStream.  No
> problem.
>
> Question 4)
> What is the strategy for keeping the Token Vocabularies syncronized
> between the ANTLR parser and my non-Antlr lexer?
>
> Should I write the parser first so I can use xTokenTypes in my
> lexer? Or is there some reason I need to hand code a xTokenTypes.txt
> file?
>
> Any other tips or suggestions?
>
> Thanks
>
> Greg Lindholm
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Sun Apr 14 22:13:39 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] help needed ... : java grammar & identifier
Message-ID: <000b01c1e43c$73a30a00$157e443d@hermes>

I am stuck.

I try to do something intelligible with identifier in the format
IDENT (DOT IDENT) *

my purpose is to create a class like this

public class JavaIdentifier
{
    String[] valuePath; // all IDENT as String
    // some fct....
}

I am using the tree parser, I hardly find how to build (easily) such a class
from such a messy rule:

#---------------
primaryExpression
    :   IDENT
    |   #( DOT
   ( expr
    ( IDENT
    | arrayIndex
    | "this"
    | "class"
    | #( "new" IDENT elist )
    |   "super"
    )
   | #(ARRAY_DECLARATOR typeSpecArray)
   | builtInType ("class")?
   )
  )
 | arrayIndex
 | #(METHOD_CALL primaryExpression elist)
 | #(TYPECAST typeSpec expr)
 |   newExpression
 |   constant
    |   "super"
    |   "true"
    |   "false"
    |   "this"
    |   "null"
 | typeSpec // type name used with instanceof
 ;
#-----------------
I should recursively descend a tree like #(DOT IDENT #(DOT....)), how to do
this ? using ANTLR ?
and in a single rule so i could build my structure ?

any idea help will be wellcome !

thanks.


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Mon Apr 15 01:16:10 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] antlr.Tool - Where can I find it
Message-ID: <a9e28a+vbga@eGroups.com>

Hi,
   I recently downloaded a copy of ANTLR and am going through a 
tutorial about it.  In this tutorial it says that I can compile my 
grammar using java antlr.Tool.  However,  I cannot find a copy of 
this file in the 2.7.1 installation.

Where can I find this ?

I would be very grateful for all help offered regarding this.

Thanks in advance

John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Apr 15 01:47:16 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] paraphrase without lexer
In-Reply-To: <4AD4C2E9-4FCB-11D6-82BD-0030653DE0D6@jguru.com>; from parrt@jguru.com on Sun, Apr 14, 2002 at 10:16:00AM -0700
References: <004e01c1e2b8$2d30d780$0100a8c0@daemon> <4AD4C2E9-4FCB-11D6-82BD-0030653DE0D6@jguru.com>
Message-ID: <20020415104716.A2721@cs.utwente.nl>

Hi,

On Sun, Apr 14, 2002 at 10:16:00AM -0700, Terence Parr wrote:
> >>> Does anyone know if it's possible to specify a paraphrase in the
> >>> parser, instead of in the lexer?
> >>
> >> Well, if you're not using the lexer support of ANTLR then it can't help
> >> you with paraphrases and can't transmit anything to the lexer.  With
> >> your own lexer, you are completely on your own I'm afraid.
> >
> > I understand your point; I was hoping that it was possible to specify
> > the paraphrase in the parser (in the token section) because the
> > paraphrase
> > is only used by the parser, not by the lexer.


> Ah...i had not thought about it that way.  You're right.  In principle
> that could work; only problem is that I think ANTLR stores that stuff in
> the lexer ;)

It's stored in the parsers ;)

I see 2 or 3 options. Override reportError and do search and replace on
error strings. Generate your parser and use some script to search and
replace in the parsers tokenNames section.

Third option (I'm currently making an educated guess after having looked at
the code (cppcodegen)) hack antlr a little to make it settable from the
parser. I suspect that it can be done in under 30 lines of code.

RuleBlock.java being the place with the restriction. It may even be
possible that it works if you just remove the lexer check ;)

Also genTokenStrings method in the CodeGenerators.

The more I look at it the more I feel that it works by just removing the
restriction....

Cheers,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
  "I don't have anything against Java - it's the best damn implementation
				  of UCSD Pascal ever released..." --- Larry Smith


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Apr 15 01:55:24 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] antlr.Tool - Where can I find it
In-Reply-To: <a9e28a+vbga@eGroups.com>; from johnclarke@hotmail.com on Mon, Apr 15, 2002 at 08:16:10AM -0000
References: <a9e28a+vbga@eGroups.com>
Message-ID: <20020415105523.B2721@cs.utwente.nl>

On Mon, Apr 15, 2002 at 08:16:10AM -0000, johnclarke72 wrote:
>    I recently downloaded a copy of ANTLR and am going through a 
> tutorial about it.  In this tutorial it says that I can compile my 
> grammar using java antlr.Tool.  However,  I cannot find a copy of 
> this file in the 2.7.1 installation.

It's not a 'file' well it is it's
<whereyouunpackedthedistro>/antlr/Tool.class

You run it by putting <whereyouunpackedthedistro> in your classpath then
just running java antlr.Tool <parameters> will do the trick.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
	  Innovation makes enemies of all those who prospered under the old
	regime, and only lukewarm support is forthcoming from those who would
					prosper under the new. --- Niccol Machiavelli


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Mon Apr 15 03:59:15 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] java grammar pb: example
Message-ID: <000501c1e46c$b0206b00$fabe0ad2@hermes>

maybe my last mail was more than esoteric. here is an example.
I want to write a jav grammar, and I start using the java grammar in
examples/java/java

and i put all my stuff in the tree parser.
now I am stuck.... HELP!......... please :-) (?)

I have no idea how to transform the following expression in the following
pseudo-code:
#-------------- how to transform -------
a.b.c.(x,y)
#--------- in something like --------
class Call
{
    param: { class ID("x"), class ID("y") }
    fct: class ID("a", "b", "c");
}

#------- or ------------
a.b.c.class
#--------- in -----------
class AClass
{
    name: class ID("a", "b", "c")
}

#-------------------------
to make both parsing example above i should be able to parse all the
DOT-DOT-DOT tree, make some comprehensive code, and ....
anyway could give me some tip, advice, peace of code ?



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Mon Apr 15 06:04:32 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Re: antlr.Tool - Where can I find it
In-Reply-To: <20020415105523.B2721@cs.utwente.nl>
Message-ID: <a9ej50+kqm5@eGroups.com>

Thanks!  

Best Wishes

John

--- In antlr-interest@y..., Ric Klaren <klaren@c...> wrote:
> On Mon, Apr 15, 2002 at 08:16:10AM -0000, johnclarke72 wrote:
> >    I recently downloaded a copy of ANTLR and am going through a 
> > tutorial about it.  In this tutorial it says that I can compile 
my 
> > grammar using java antlr.Tool.  However,  I cannot find a copy of 
> > this file in the 2.7.1 installation.
> 
> It's not a 'file' well it is it's
> <whereyouunpackedthedistro>/antlr/Tool.class
> 
> You run it by putting <whereyouunpackedthedistro> in your classpath 
then
> just running java antlr.Tool <parameters> will do the trick.
> 
> Cheers,
> 
> Ric
> -- 
> -----
+++++*****************************************************+++++++++---
----
>     ---- Ric Klaren ----- klaren@c... ----- +31 53 4893722  ----
> -----
+++++*****************************************************+++++++++---
----
> 	  Innovation makes enemies of all those who prospered under 
the old
> 	regime, and only lukewarm support is forthcoming from those 
who would
> 					prosper under the new. --- 
Niccol? Machiavelli


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Mon Apr 15 08:05:25 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] paraphrase without lexer
References: <004e01c1e2b8$2d30d780$0100a8c0@daemon> <4AD4C2E9-4FCB-11D6-82BD-0030653DE0D6@jguru.com> <20020415104716.A2721@cs.utwente.nl>
Message-ID: <013201c1e48f$255861d0$0100a8c0@daemon>

Ric,

extending Antlr would probably be the best solution (and not that difficult
to implement, although we'd have to agree on the syntax), but ... the
process
of getting changes into the Antlr codebase is very unclear to me, so I
usually create workarounds outside Antlr.

As such, I really like your solution of overriding reportError. Thank you
for that suggestion!

Silvain

> I see 2 or 3 options. Override reportError and do search and replace on
> error strings. Generate your parser and use some script to search and
> replace in the parsers tokenNames section.
>
> Third option (I'm currently making an educated guess after having looked
at
> the code (cppcodegen)) hack antlr a little to make it settable from the
> parser. I suspect that it can be done in under 30 lines of code.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From sinan.karasu at boeing.com  Mon Apr 15 08:47:13 2002
From: sinan.karasu at boeing.com (Sinan)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] Re: Frustrating (MSV)C++ EOF problem with 2.7.2a
References: <a97k8j+88p8@eGroups.com>
Message-ID: <3CBAF601.85915C02@boeing.com>

tom_m_roeder wrote:
> 
> Furthermore...having compiled the tracing into the lexer and parser, I
> see that it thinks that the stream is returning WHITESPACE to it,
> where my definition of WHITESPACE is
>  (' ' | '\t' | '\n' {newline();} | '\r')*
> 
> I hope that there is something obviously wrong with this.
> 
>    Thanks,
> 
>       Tom Roeder
> 

You mean

(' ' | '\t' | '\n' {newline();} | '\r')+  <===== ( + , not * )

otherwise you can have way too much whitespace in a very small file.

Sinan

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Apr 15 09:11:53 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:45 2004
Subject: [antlr-interest] paraphrase without lexer
In-Reply-To: <013201c1e48f$255861d0$0100a8c0@daemon>; from s.piree@enneya.com on Mon, Apr 15, 2002 at 05:05:25PM +0200
References: <004e01c1e2b8$2d30d780$0100a8c0@daemon> <4AD4C2E9-4FCB-11D6-82BD-0030653DE0D6@jguru.com> <20020415104716.A2721@cs.utwente.nl> <013201c1e48f$255861d0$0100a8c0@daemon>
Message-ID: <20020415181152.E2721@cs.utwente.nl>

On Mon, Apr 15, 2002 at 05:05:25PM +0200, Silvain Piree wrote:
> extending Antlr would probably be the best solution (and not that difficult
> to implement, although we'd have to agree on the syntax), but ... the
> process
> of getting changes into the Antlr codebase is very unclear to me, so I
> usually create workarounds outside Antlr.

Syntax would be the same as for lexer. Only problem is that some additional
checks might be necessary. Basically disabling the lexer only check for
paraphrase would work on tokens only (I think). It's a 3-5 line change in
RuleBlock.java.

Try it out and if it's as I think it might be a simple patch. Then feeding
it to me wouldn't be a big problem.

Basically changes to the codebase are done by ppl submitting patches to the
maintainers (Terence, me and a few others with repository write access)

> As such, I really like your solution of overriding reportError. Thank you
> for that suggestion!

No problem ;)

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Why don't we just invite them to dinner and massacre them all when they're
  drunk? You heard the man. There's seven hundred thousand of them. Ah? ..
           So it'd have to be something simple with pasta, then.
                 From: Interesting Times by Terry Pratchet


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Mon Apr 15 09:21:21 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] paraphrase without lexer
In-Reply-To: <013201c1e48f$255861d0$0100a8c0@daemon>; from s.piree@enneya.com on Mon, Apr 15, 2002 at 05:05:25PM +0200
References: <004e01c1e2b8$2d30d780$0100a8c0@daemon> <4AD4C2E9-4FCB-11D6-82BD-0030653DE0D6@jguru.com> <20020415104716.A2721@cs.utwente.nl> <013201c1e48f$255861d0$0100a8c0@daemon>
Message-ID: <20020415182121.F2721@cs.utwente.nl>

Hi,

On Mon, Apr 15, 2002 at 05:05:25PM +0200, Silvain Piree wrote:
> As such, I really like your solution of overriding reportError. Thank you
> for that suggestion!

Ack a fourth solution. Make your own 'yourparserTokenTypes.txt' the format
is pretty easy. Make an example lexer with several of the options and see
what's dumped in the txt file. Then do an importvocab on it and you should
be ok. If you do some tricks with your own lexer and some handy comments
and a script you may even create it automatically from your (lex?)
lexerinput file.

Here's a few snips from an antlr generated:

// $ANTLR 2.7.2a2 (20020112-1): parser.g -> Modest_TokenTypes.txt$
Modest_    // output token vocab name
TYPEDEF="typedef"=4
WS=96
C_COMMENT("'C-comment'")=97

Counting starts at 4.

Cheers,

Ric
-- 
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
 Time what is time - I wish I knew how to tell You why - It hurts to know -
          Aren't we machines - Time what is time - Unlock the door
               - And see the truth - Then time is time again
                From: 'Time what is Time' by Blind Guardian


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Tue Apr 16 06:37:39 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:46 2004
Subject: Annotation tool for ANTLR (was: RE: [antlr-interest] Language Preprocessor.)
In-Reply-To: <6791D870658F174FB863E2FA890000A37DCBBF@abyss4.advancedsw.com>
Message-ID: <20020416133739.33932.qmail@web14803.mail.yahoo.com>

For all interested, 

I uploaded on ANTLR Yahoo group a simple tool that I found useful in the
development/maintenance of multiple versions of the same main grammar. 
The tool is here: 
http://groups.yahoo.com/group/antlr-interest/files/AnnotationTool/
together with some examples.

You can find below a description of the tool. If you give it a try, 
I will be happy to hear your comments.

Best regards,
Bogdan

===================================

  Annotation tool for ANTLR files

===================================

This tool allows the creation of a family of related ANTLR grammars 
from a single source. This situation is common in practice:

. When using the same grammar for multiple runtime environments 
  (Java/C++/...) you end up with grammars identical except for embedded 
  actions.
. When working with lexers, sometimes you want whitespace to be ignored,
  other times you want them to be passed forward as hidden tokens. 
. Parsers can have embedded code for the construction of a Symbol Table,
  or can be plain parsers for source validation.
. When working with tree parsers, it is common to have a series of 
  tree parsers with the same structure but with different embedded 
  actions.

The tool lets you loose the coupling between actual grammars and embedded
actions. You can define insertion points in the main grammar using a simple
mark-up of the form:

rule: <init> (alfa beta <action>)+ ;

and define in a separate file what <init> and <action> mean. Using different
definition files, you can get different varieties of the main grammar. If a 
definition is missing, the correspondent mark is ignored.

Having only one main source makes the maintenance of a grammar easier.
The cluttering is also reduced, making the sources more readable.

For examples of using the tool, see the folder examples in the distribution.
To run the examples cd to /examples, then type:

java -classpath ..annotation.jar;%ANTLR_HOME% annotation.Insert -s
arith_expr.ag -i plain.ins -d plain.g
java -classpath ..annotation.jar;%ANTLR_HOME% annotation.Insert -s
arith_expr.ag -i print.ins -d print.g
java -classpath ..annotation.jar;%ANTLR_HOME% annotation.Insert -s
arith_expr.ag -i calc.ins -d calc.g

arith_expr.ag is the annotated grammar for a simple arithmetic expressions
treewalker. 
Using 3 different insert files, we get:
. a plain tree grammar
. a grammar with embedded actions for printing back the tree
. a grammar with embedded actions for evaluating the expression

The tool is PUBLIC DOMAIN.
Enjoy it.



__________________________________________________
Do You Yahoo!?
Yahoo! Tax Center - online filing with TurboTax
http://taxes.yahoo.com/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Tue Apr 16 11:54:34 2002
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] ooops....JRockit is just a vm
In-Reply-To: <6E76A96B-48DF-11D6-84F7-0030653DE0D6@jguru.com>
References: <680F30EF-48DA-11D6-84F7-0030653DE0D6@jguru.com>
	<6E76A96B-48DF-11D6-84F7-0030653DE0D6@jguru.com>
Message-ID: <15548.29546.22546.280463@non.non.net>

>>>>> "Terence" == Terence Parr <parrt@jguru.com> writes:
>>>>>> On Friday, April 5, 2002, at 01:16 PM, Terence Parr writes:
[...]
>> ...damn.  Confused it with a static compiler product.

> I sent original message to old antlr list...ugh.  Anyway, i was asking if
> anybody wants to test its speed etc...

JRockit is basically a contemporary of the Sun HotSpot dynamic compiler.

If you want native executables, check out:

	* NaturalBridge's BulletTrain, http://www.naturalbridge.com/
	Still MS Windows-only but they keep promising a Linux version.
	Alas, their website seems to be moving backwards and getting
	smaller and smaller.  Not a good sign.

	* Instantiations' JOVE, http://www.instantiations.com/jove/
	$800 plus $250/year for upgrades and support.
	Windows-only.

	* For server-only stuff (i.e., no GUI support, etc.),
	TowerJ, http://www.towerj.com/
	It's not cheap but supports a number of platforms including
	Windows, Linux, Solaris, HPUX, and initial support for
	Itanium-based systems running Linux or Windows.

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Tue Apr 16 11:42:03 2002
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Re: How to deal with languages with preprocessor s?
In-Reply-To: <a8l09l+vg6m@eGroups.com>
References: <170826586F3BD511910D0200C110AAA8032B487A@memail03.bco-home.com>
	<a8l09l+vg6m@eGroups.com>
Message-ID: <15548.28795.602135.556642@non.non.net>

>>>>> "micheal" == micheal jor <open.zone@virgin.net> writes:
>>>>>> --- In antlr-interest@y..., mzukowski@b... wrote:
[...]
>>> Any ideas please?. How to deal with the preprocessor directives in
>>> C/C++ and C#.

>> For the GCC parser I run the preprocessor externally.

> What does this mean?. What preprocessor do you run externally?. Is it a
> separate Lexer/Parser that you generated using ANTLR as well?

% man gcc

and look for the -E switch.  You can learn even more by reading the CPP
documentation:

http://gcc.gnu.org/onlinedocs/gcc-3.0.2/cpp.html

If you're using another compiler system then you're own your own. :-)

Take care,
	John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnm-antlr at non.net  Tue Apr 16 13:03:24 2002
From: johnm-antlr at non.net (John D. Mitchell)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] parsing BSDL strings and "nested" parsers
In-Reply-To: <a97js5+88jq@eGroups.com>
References: <a97js5+88jq@eGroups.com>
Message-ID: <15548.33676.244775.667787@non.non.net>

>>>>> "jkluebs" == jkluebs  <jkluebs@yahoo.com> writes:
[...]
> The thing is that the contents of the strings have semantic meaning that
> can become part of the AST (the contents of the strings have EBNF and
> must be parsed in order to generate a complete BSDL tree).

[...]
> So basically my question is if this idea of having a main parser actions
> spawn new lexer/parser pairs to process its "parsed out" rules is a good
> pattern for my problem, or is there a nicer way.

Sounds like a good approach to me.  The two translators will be cleaner,
clearer, etc.

Take care,
	John

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From chuck.siska at nb.conexant.com  Tue Apr 16 13:20:10 2002
From: chuck.siska at nb.conexant.com (Chuck Siska)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Re: How to deal with languages with preprocessor s?
References: <170826586F3BD511910D0200C110AAA8032B487A@memail03.bco-home.com>
		<a8l09l+vg6m@eGroups.com> <15548.28795.602135.556642@non.non.net>
Message-ID: <3CBC877A.B9147FC6@nb.conexant.com>

cpp also exists as a freeware standalone program, so gcc, itself,
isn't required though it may be convenient.
good luck.

-- chuck

"John D. Mitchell" wrote:
> 
> >>>>> "micheal" == micheal jor <open.zone@virgin.net> writes:
> >>>>>> --- In antlr-interest@y..., mzukowski@b... wrote:
> [...]
> >>> Any ideas please?. How to deal with the preprocessor directives in
> >>> C/C++ and C#.
> 
> >> For the GCC parser I run the preprocessor externally.
> 
> > What does this mean?. What preprocessor do you run externally?. Is it a
> > separate Lexer/Parser that you generated using ANTLR as well?
> 
> % man gcc
> 
> and look for the -E switch.  You can learn even more by reading the CPP
> documentation:
> 
> http://gcc.gnu.org/onlinedocs/gcc-3.0.2/cpp.html
> 
> If you're using another compiler system then you're own your own. :-)
> 
> Take care,
>         John

-- 
                                           |\_/\_.-'""``:-._       
What is life without looking for           . . `; -._      )-;-,_`)
the next cute little bug to play with?     v_,-    _  ),(,.\  ``-' 
                                          _.- _.,-_/ /  ((.'       
-- chuck.siska@conexant.com  `<}:..     ((,.-'   ((,/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Tue Apr 16 11:47:45 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] A grammar question
Message-ID: <a9hrkh+qam0@eGroups.com>

I am working on a parser for a simple language.  I am new to ANTLR 
and just have a couple of questions regarding grammar issues.

1 ) In my code I use ( 'a'..'z' | 'A'..'Z' ) to refer to all of the 
letters from a - z.  Is there any way to add something that will make 
it accept anything (eg all puntuation,etc) without having to define 
every item ?

2) In my grammar an item may have parameters or it may not have 
parameters.  The values for these parameters may have quotes or they 
may not.  A given item can potentially have more than 1 parameter.  
For example :

No parameters : <dodar>
Parameters (Quotes)    : <dodar Param1="value" Param2="Value"> 
Parameters (No Quotes) : <dodar Param1=value Param2=Value>

How can I describe this using Antlr ?

3) An item must have a start tag but the end tag is optional.  Eg 
either <dodar> or <dodar></dodar> is acceptable.  How can I describe 
this using Antlr ?

4) I presume that if I wanted to remove any characters from the 
parsed data I will have to write the Java code myself (eg to 
remove "'s and >'s).  Is this a correct assumption ?

I would be grateful for all advice offered regarding this.

John


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dinurp at yahoo.com  Tue Apr 16 23:55:30 2002
From: dinurp at yahoo.com (dinurp)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Is there a port of ANTLR usable in .NET environment?
Message-ID: <a9j692+10kc3@eGroups.com>




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Wed Apr 17 08:06:54 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] warning:Rule 'XXX' returns a value
Message-ID: <01b501c1e621$83a3bda0$647e443d@hermes>

I return value from rule, because I build my own tree on the fly...
but  get such a warning: "warning:Rule 'XXX' returns a value" for each of my
rule

mmhh... what option to deactivate this ?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Tue Apr 16 11:10:31 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Grammar Problem
Message-ID: <a9hpen+5h0u@eGroups.com>

I am having some problems with an ANTLR grammer that I wrote.  

Basically when I compile the grammar I get the following warning 
message :

warning: lexical nondeterminism between rules STARTTAG and ENDTAG upon
teeny.g:0:      k==1:'<'

When I run my final Java Application and enter :
<i>This is a test</i>

I get the following :

STARTTAG : <i>
TEXT : This
TEXT : is
TEXT : a
TEXT : test
exception: antlr.TokenStreamRecognitionException: unexpected char: /

How can I resolve this error ?  I would be gratefull for all adviced 
offered.  The grammar and Java code have been added to this message.

Thanks in advance

John

The Grammar :
=============

class TeenyLexer extends Lexer;

STARTTAG : "<" ( 'a'..'z' | 'A'..'Z' )+ ">";
ENDTAG   : "</" ( 'a'..'z' | 'A'..'Z' )+ ">";
WORD     : ( 'a'..'z' | 'A'..'Z' | '0'..'9' )+;

// whitespace
WS      :       (       ' '
                |       '\t'
		|	'\r' '\n' { newline(); }
		|	'\n' { newline(); }
		)
		{$setType(Token.SKIP);}	//ignore this token
	;


class TeenyParser extends Parser;

startProcessing :
(
   text:WORD
   {System.out.println("TEXT : "+text.getText());}
   | startTag:STARTTAG
   {System.out.println("STARTTAG : "+startTag.getText());}
   | endTag:ENDTAG
   {System.out.println("ENDTAG : "+endTag.getText());}
)+;

The Java App :
==============

import java.io.*;
import antlr.*;


class TeenyParserApp
{

   public static void main(String[] args)
   {
      try
      {
         TeenyLexer lexer = new TeenyLexer(new DataInputStream
(System.in));
         TokenBuffer buffer = new TokenBuffer(lexer);
         TeenyParser parser = new TeenyParser(buffer);
         parser.startProcessing();
      } catch(Exception e)
        {
          System.err.println("exception: "+e);
        }
    }
}





 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Wed Apr 17 17:16:03 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] C# !
Message-ID: <001801c1e66e$5f0d1b10$b3b40ad2@hermes>

Hey,
I want to test my interpreter in C# now.
where could I download the new ANTLR versionC# aware, please ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020418/b260af93/attachment.html
From lloyd at galador.net  Wed Apr 17 20:41:30 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] lexer state ?
Message-ID: <000001c1e68b$9ab3c5c0$81b00ad2@hermes>

is there in ANTLR some kind of LExer state ?

I mean, I want, in case of parsing error, to skip all text up to the endof line and resume my parsing next line.
how to do that ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020418/c8677b0a/attachment.html
From lloyd at galador.net  Wed Apr 17 20:51:35 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Grammar Problem
References: <a9hpen+5h0u@eGroups.com>
Message-ID: <001301c1e68c$56cf9860$81b00ad2@hermes>

I think that changing the top of your lexer to this will soleve your
problem:

class TeenyLexer extends Lexer;
options {
    k = 3;
}



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Wed Apr 17 21:22:51 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] lexer state ?
References: <000001c1e68b$9ab3c5c0$81b00ad2@hermes>
Message-ID: <000901c1e6a8$5fa38250$8b7f443d@hermes>

> is there in ANTLR some kind of Lexer state ?
> I mean, I want, in case of parsing error, to skip all text up to the endof
line and resume
> my parsing next line.
> how to do that ?

I solve it using the following rule ?
is it a good idea (I mean will it stay stable with further evolution ?)

//------------------------------------------------
skipLine
{
  while(LA(1) != NEWLINE)
    consume();
}:
  NEWLINE
  ;
//------------------------------------------------



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From bogdan_mt at yahoo.com  Thu Apr 18 00:16:58 2002
From: bogdan_mt at yahoo.com (Bogdan Mitu)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Grammar Problem
In-Reply-To: <001301c1e68c$56cf9860$81b00ad2@hermes>
Message-ID: <20020418071658.78477.qmail@web14802.mail.yahoo.com>


--- Lloyd Dupont <lloyd@galador.net> wrote:
> I think that changing the top of your lexer to this will soleve your
> problem:
> 
> class TeenyLexer extends Lexer;
> options {
>     k = 3;
> }

k=2 should be enough. The problem is that with default lookahed (1) the
lexer can not choose between '<' and "</".

You will also get a warning in the rule WS, but the lexer will work, because
'\r' '\n' comes before '\r' and '\n' alternatives.

Take a look in the example grammars from ANTLR distribution, you may find
them helpful.

Bogdan


> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! Tax Center - online filing with TurboTax
http://taxes.yahoo.com/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From borschet at mid.de  Thu Apr 18 00:39:51 2002
From: borschet at mid.de (aborschet)
Date: Mon Dec 20 16:14:46 2004
Subject: bug in 2.7.2a2 C++ lib
In-Reply-To: <393074C5.65320E18@jguru.com>
Message-ID: <a9lt87+uuns@eGroups.com>


In 2.7.1 you specified that the default value for tab is one.
However the C++ char scanner is instantiated with a tabsize of 8.

Module CharScanner.cpp contains:


CharScanner::CharScanner(InputBuffer& cb)
	: saveConsumedInput(true) //, caseSensitiveLiterals(true)
	, literals(CharScannerLiteralsLess(this))
	, inputState(new LexerInputState(cb))
	, commitToPath(false)
	, tabsize(8)
	, traceDepth(0)
{
...
}

I think "tabsize(8)" should be changed to "tabsize(1)" in all 
constructors.

Btw., to track the position of tokens it would be nice to have 
something like the offset of the token in the parsed buffer. I think 
this could be helpful to solve the problem with lines and columns 
which are dependend to tabs and newlines.

Regards
Alex


> 
> * made fields of CommonToken protected (open to subclasses), added 
col.
>   added column tracking support; tabs are counted as 1 unless you
> override
>   tab().  Called from consume(); bumps by one by default.  Overhead 
is
>   minimal; only called on tabs.  extra increment for all consume()s 
now
>   extra int in CommonToken now.
>  
>     /** advance the current column number by an appropriate amount.
>      *  If you do not override this to specify how much to jump for
>      *  a tab, then tabs are counted as one char.  This method is
>      *  called from consume().
>      */
>     public void tab() {
> 	// update inputState.column as function of
> 	// inputState.column and tab stops.
> 	// For example, if tab stops are columns 1 and 5 etc...
> 	// and column is 3, then add 2 to column.
> 	inputState.column++;
>     }
> 
>     added CharScanner.setColumn
> 
>     remove column info thing at website; say out of date, not needed
> 
> * added check for unterminated rules.  Labels in column 1 result in 
a
> warning.
> 
> * wasn't providing always exactly 4 digits for \u chars in
> JavaCharFormatter.escapeChar
> 
> -- 
> Chief Scientist, http://www.jGuru.com   -- Your Java Portal
> Co-Founder, http://www.NoWebPatents.org -- Stop Patent Stupidity!
> parrt@j...

From Matthew.Ford at forward.com.au  Thu Apr 18 00:51:36 2002
From: Matthew.Ford at forward.com.au (Matthew Ford)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] lexer state ?
References: <000001c1e68b$9ab3c5c0$81b00ad2@hermes> <000901c1e6a8$5fa38250$8b7f443d@hermes>
Message-ID: <003101c1e6ad$ddf92d30$0200a8c0@matthewfnb>

Actually the problem is calling skipLine when there is a parsing error.
I use  (where TFLexer is my lexer)

public void reportError(ANTLRException ex) {
    // write out error here
 }

 public void processError(ANTLRException ex) throws TokenStreamException,
    CharStreamException {
  // actually only throws TokenStreamIOException others caught here
  int tokenType=0;
  LexerSharedInputState inputState = TFlexer.getInputState();
  inputState.guessing = 0; // clear guessing mode
    Debug.out("in processError", MAJOR, 0);
    if (!errorFlag) { // first error
     reportError(ex);
     errorFlag=true;  //block new errors until after syncing.
    }

  do {
   try {
    if (ex instanceof TokenStreamRecognitionException) {
     TokenStreamRecognitionException rex =
(TokenStreamRecognitionException)ex;
      // get underlying exception
     ex = null; // have handled this one now
     if ((rex.recog instanceof MismatchedCharException) ||
        (rex.recog instanceof NoViableAltForCharException)) {
      try {
          TFlexer.consume(); // remove current error char;
      } catch (CharStreamException cse) {
       if ( cse instanceof CharStreamIOException ) {
        throw new TokenStreamIOException(((CharStreamIOException)cse).io);
       } else {
        throw new TokenStreamIOException(new IOException(cse.getMessage()));
       }
      }
     }
      }

      tokenType = LA(1);
       if ((tokenType != EOF) && (tokenType != SEMI)) {
        consume(); // remove ;
       }

   } catch (TokenStreamRecognitionException ex1) {
     ex = ex1; // and loop
//      TFlexer.consume(); // remove current error char;
   } catch (TokenStreamRetryException ex1) {
     throw new TokenStreamIOException(new IOException(ex1.getMessage()));
   }
    } while ( tokenType != SEMI && tokenType != EOF && !isEOF());

 }

 private boolean errorFlag = false;

 private boolean eofFlag = false;

 public boolean isEOF() {
  return eofFlag;
  }

----- Original Message -----
From: "Lloyd Dupont" <lloyd@galador.net>
To: <antlr-interest@yahoogroups.com>
Sent: Thursday, April 18, 2002 2:22 PM
Subject: Re: [antlr-interest] lexer state ?


> > is there in ANTLR some kind of Lexer state ?
> > I mean, I want, in case of parsing error, to skip all text up to the
endof
> line and resume
> > my parsing next line.
> > how to do that ?
>
> I solve it using the following rule ?
> is it a good idea (I mean will it stay stable with further evolution ?)
>
> //------------------------------------------------
> skipLine
> {
>   while(LA(1) != NEWLINE)
>     consume();
> }:
>   NEWLINE
>   ;
> //------------------------------------------------
>
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Thu Apr 18 00:33:08 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] ambiguity ?
Message-ID: <004201c1e6c7$0af2a8c0$6da60ad2@hermes>

why these rules ares ambiguous (in a Lexer) ?
#-------------------
DIV_ASSIGN  : "/=" ;

SL_COMMENT :
    ( "//" | '#' )  
    (~('\n'|'\r'))* ('\n'|'\r'('\n')?)
     ;
#-------------------
while these ones are not !
#-------------------
DIV_ASSIGN  : "/=" ;

SL_COMMENT_1 :
     "//"   (~('\n'|'\r'))* ('\n'|'\r'('\n')?)
     ;

SL_COMMENT_2 : 
    '#' 
    (~('\n'|'\r'))* ('\n'|'\r'('\n')?)
    ;

#-------------------

????


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Thu Apr 18 04:00:06 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] lexer state ?
References: <000001c1e68b$9ab3c5c0$81b00ad2@hermes> <000901c1e6a8$5fa38250$8b7f443d@hermes> <003101c1e6ad$ddf92d30$0200a8c0@matthewfnb>
Message-ID: <005b01c1e6c8$33a60310$6da60ad2@hermes>

> Actually the problem is calling skipLine when there is a parsing error.
> I use  (where TFLexer is my lexer)
that's fine for me ! :-)
I write an interpreter with a line by line basis.
So, I simply call parser.skipLine() after an error...
thanks.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Thu Apr 18 10:03:36 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] ambiguity ?
Message-ID: <170826586F3BD511910D0200C110AAA8032B48B2@memail03.bco-home.com>


This is antlr's linear approximate lookahead at work.  Please see the FAQ
about it.

Monty

> -----Original Message-----
> From: Lloyd Dupont [mailto:lloyd@galador.net]
> Sent: Thursday, April 18, 2002 12:33 AM
> To: antlr
> Subject: [antlr-interest] ambiguity ?
> 
> 
> why these rules ares ambiguous (in a Lexer) ?
> #-------------------
> DIV_ASSIGN  : "/=" ;
> 
> SL_COMMENT :
>     ( "//" | '#' )  
>     (~('\n'|'\r'))* ('\n'|'\r'('\n')?)
>      ;
> #-------------------
> while these ones are not !
> #-------------------
> DIV_ASSIGN  : "/=" ;
> 
> SL_COMMENT_1 :
>      "//"   (~('\n'|'\r'))* ('\n'|'\r'('\n')?)
>      ;
> 
> SL_COMMENT_2 : 
>     '#' 
>     (~('\n'|'\r'))* ('\n'|'\r'('\n')?)
>     ;
> 
> #-------------------
> 
> ????
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
http://docs.yahoo.com/info/terms/ 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Thu Apr 18 11:39:23 2002
From: jsrs701 at yahoo.com (J. Stephen Riley Silber)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] ANTLR C++ lib project files for Visual Studio .NET
Message-ID: <Pine.LNX.4.10.10204181136260.26995-101000@moselle.com>


Hi gang,

Attached are project files for multithreaded static libs for VS.NET.
Unzip this into the <ANTLR>\lib\cpp directory, so that you'll have an
<ANTLR>\lib\cpp\libantlr directory.

The project files put two .lib files into <ANTLR>\lib\cpp.  The release
version is libantlr.lib, and the debug is libantlrd.lib.

Hope this helps,
JSRS


J. Stephen Riley Silber
======================================
 "Pig, your freedom lies before you!  Flee into the
  forest and join your piggy friends!"

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: libantlr.zip
Type: application/zip
Size: 97883 bytes
Desc: 
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20020418/f98d6b63/libantlr.zip
From lloyd at galador.net  Fri Apr 19 02:35:47 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] lexer state ?
References: <000001c1e68b$9ab3c5c0$81b00ad2@hermes> <000901c1e6a8$5fa38250$8b7f443d@hermes> <003101c1e6ad$ddf92d30$0200a8c0@matthewfnb> <005b01c1e6c8$33a60310$6da60ad2@hermes>
Message-ID: <004301c1e785$a1779580$47ba0ad2@hermes>

there is lexer state !
look in the doc:
antlr-2.7.2a2/doc/streams.html#lexerstates


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Fri Apr 19 02:48:27 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] ANTLR C++ lib project files for Visual Studio .NET
References: <Pine.LNX.4.10.10204181136260.26995-101000@moselle.com>
Message-ID: <006301c1e787$5c200c90$47ba0ad2@hermes>

uh............
ok i didn't try hard .. 
I just test out of curiosity as I am very java focused on the moment.
anyway, when I click build.. guess what ?
I had a lot of error: xxx.h header not found.
very curious because if i click on it in the file panel it open.
any idea ?

back to java.
but your project is a good idea !


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From johnclarke at hotmail.com  Fri Apr 19 16:33:37 2002
From: johnclarke at hotmail.com (johnclarke72)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Could you advise me ?
Message-ID: <a9q9gh+f6sa@eGroups.com>

I am working on a parser for a simple language. I am new to ANTLR 
and just have a couple of questions regarding grammar issues. 

1 ) In my code I use ( 'a'..'z' | 'A'..'Z' ) to refer to all of the 
letters from a - z. Is there any way to add something that will make 
it accept anything (eg all puntuation,etc) without having to define 
every item ? 

2) In my grammar an item may have parameters or it may not have 
parameters. The values for these parameters may have quotes or they 
may not. A given item can potentially have more than 1 parameter. 
For example : 

No parameters : <dodar> 
Parameters (Quotes) : <dodar Param1="value" Param2="Value"> 
Parameters (No Quotes) : <dodar Param1=value Param2=Value> 

How can I describe this using Antlr ? 

3) An item must have a start tag but the end tag is optional. Eg 
either <dodar> or <dodar></dodar> is acceptable. How can I describe 
this using Antlr ? 

I would be grateful for any advice you can offer. 

Thanks in advance 

John Clarke 



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Fri Apr 19 16:16:59 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Re: ANTLR C++ lib project files for Visual Studio .NET
In-Reply-To: <006301c1e787$5c200c90$47ba0ad2@hermes>
Message-ID: <a9q8hb+indc@eGroups.com>

--- In antlr-interest@y..., "Lloyd Dupont" <lloyd@g...> wrote:
> I had a lot of error: xxx.h header not found.

Oh, nuts, forgot to mention that little bit.

The project files expect you to be using ANTLR-2.7.1, installed at 
c:\antlr-2.7.1.  Not a safe assumption these days.  :-)

You will need to change the additional include directory setting for 
the project to properly find the ANTLR include files.

1. In the Solution Explorer, right-click on the "libantlr" project, 
and select Properties.

2. Click on the C/C++ settings folder in the properties window, and 
then click on General right below it.

3. The first item on the right will be Additional Include 
Directories.  Change that to point to the "lib\cpp" directory of your 
ANTLR installation.

4. Click OK, then try the build again.



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Sat Apr 20 23:36:02 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Could you advise me ?
References: <a9q9gh+f6sa@eGroups.com>
Message-ID: <00c001c1e8fe$d58e6220$28b10ad2@hermes>

> 1 ) In my code I use ( 'a'..'z' | 'A'..'Z' ) to refer to all of the
> letters from a - z. Is there any way to add something that will make
> it accept anything (eg all puntuation,etc) without having to define
> every item ?
.  (one dot, not '.' which is a dot character)

but never use (.)* it will consume all your file...
instead use ~('\r\|'\n\), which mean anything but '\r' or '\n' character

> No parameters : <dodar>
> Parameters (Quotes) : <dodar Param1="value" Param2="Value">
> Parameters (No Quotes) : <dodar Param1=value Param2=Value>
did you try sometjing like (I am not a guru, just assuming)

TAG: '<' TAGNAME PARAM* '>';
TAGNAME: "dodar"
    | "coucou"
    | "foo"
    | "bar"
    | "toto"
    ;
PARAM: IDENT '=' VALUE;

... to be continued ...

> How can I describe this using Antlr ?
like above...

> 3) An item must have a start tag but the end tag is optional. Eg
> either <dodar> or <dodar></dodar> is acceptable. How can I describe
> this using Antlr ?
any optional rule is stated with ?, (did you look the doc or, at last, the
examples ?)

for instance:
TAG:  '<' TAGNAME PARAM* '>'; TAGBODY ("</" TAGNAME ">")?;

or even better:
TAG:  '<' t1:TAGNAME PARAM* '>'; TAGBODY
    ("</" t2:TAGNAME { t1.getText().equals(t2.getText()); }? ">")?;

> I would be grateful for any advice you can offer.
thanks, you're wellcome.

> Thanks in advance
you too good :-)

> John Clarke
Lloyd Dupont
painfully learning ANTLR fellow user


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Sat Apr 20 23:44:06 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Re: ANTLR C++ lib project files for Visual Studio .NET
References: <a9q8hb+indc@eGroups.com>
Message-ID: <00cc01c1e8ff$f5a46220$28b10ad2@hermes>

ha, uh... uhuhuhuhu.............
hum.

I still have some problems.
for example I don't have TreeParserSharedInputState.cpp file...
is it normal ?
or some dllimport tag illegal on static member ? does CL sompiler be fool ?
it seems perfect to me ...

what about sending your project directly to me ?
what about a DLL version ?!

I am Lloyd Dupont llod@galador.net !
anyway it is not really important as I mainly use C, Java, C#, but not C++
....


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dinurp at yahoo.com  Sun Apr 21 20:28:51 2002
From: dinurp at yahoo.com (dinurp)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Re: C# !
In-Reply-To: <001801c1e66e$5f0d1b10$b3b40ad2@hermes>
Message-ID: <aa001j+vbt7@eGroups.com>

Hey,
Where do I get hold of the version which genearates C# code?
Thanks
--- In antlr-interest@y..., "Lloyd Dupont" <lloyd@g...
> wrote:
> Hey,
> I want to test my interpreter in C# now.
> where could I download the new ANTLR versionC# aware, please ?


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Mon Apr 22 01:17:53 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Re: C# !
References: <aa001j+vbt7@eGroups.com>
Message-ID: <003001c1e9d6$33b66870$75a60ad2@hermes>

it is a big mystery ...
some people speak about it, but no one see it...


> Hey,
> Where do I get hold of the version which genearates C# code?
> Thanks
> --- In antlr-interest@y..., "Lloyd Dupont" <lloyd@g...
> > wrote:
> > Hey,
> > I want to test my interpreter in C# now.
> > where could I download the new ANTLR versionC# aware, please ?
>
>
>
>
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/
>
>
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dinurp at yahoo.com  Mon Apr 22 06:09:24 2002
From: dinurp at yahoo.com (dinurp)
Date: Mon Dec 20 16:14:46 2004
Subject: C# ?
In-Reply-To: <a8l5l3+5mqp@eGroups.com>
Message-ID: <aa1224+20gc@eGroups.com>

Hi,
Could you tell me where I can get hold of the generator for C#?
Thanks,
Dinu
--- In antlr-interest@y..., "micheal_jor" <open.zone@v...> wrote:
> --- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> 
> > > 2. In a similar vein, is ParseView for use with ANLTR or the 
stuff
> > > that ANTLR generates?
> > 
> > Doesn't work with latest stuff, but it's for generated parsers.
> 
> What exactly makes it bad for the latest stuff?.
> 
> > > 3. How does the debugging stuff work?. What is the thinking 
behind
> > > it. If anyone can explain it in enough detail, I'll have a go at
> > > fixing ParseView for 2.7.2a2.
> > 
> > Scott Stanchfield put that stuff in.  You might contact him at 
> scott at 
> > javadude dot com.
> 
> Thanks. I'll sent our current 2.7.2a2 C# codegen port to you I 
think. 
> This debugging/ParseView stuff might take a while....
> 
> Micheal

From zjg1964 at yahoo.com  Mon Apr 22 09:00:22 2002
From: zjg1964 at yahoo.com (jg z)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] End of file
In-Reply-To: <Pine.BSF.4.21.0204111737040.12880-100000@shell-2.enteract.com>
Message-ID: <20020422160022.67208.qmail@web14904.mail.yahoo.com>

Hi, 
   We are converting a parser from PCCTS version to
ANTLR version to produce C++ code using ANTLR 2.7.1.

   Now we confront with a problem with detecting the
end of file.

   The related code in our .g file(ANTLR version) is
as following,

translation_unit
   :  {enterExternalScope();}
      (external_declaration)+  EOF
      {exitExternalScope();}
   ;

   The problem is, at the end of a testing file, the
parser goes into external_declaration again instead of
match the EOF. This is because the conditions
controlling the entry of external_declaration both
contain EOF.

   We don't understand why this is not the case in the
example of java.g which is provided in CPP directory
of examples of ANTLR-2.7.1. The corresponding code in
java.g file is,

compilationUnit:
(packageDefinition|/* nothing */)		
( importDefinition )*	
( typeDefinition )*
    EOF!  
;

This version detects end of file correctly. The
condition controlling the entry to typeDefinition does
not contain EOF.

Thanks.

Zuo.


__________________________________________________
Do You Yahoo!?
Yahoo! Games - play chess, backgammon, pool and more
http://games.yahoo.com/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Apr 22 10:52:43 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Preliminary C# code generator now on antlr.org
In-Reply-To: <aa1224+20gc@eGroups.com>
Message-ID: <BEF0DEE2-5619-11D6-8F6C-0030653DE0D6@jguru.com>

Folks, I have posted Michael J's C# stuff at the site.

He says this about it:

> The C# codegen as promised. I have supplied NAnt (Ant for .NET) build 
> files
> for the library and those examples that have been converted. Also there 
> is
> an updated action.g and a couple of Windows batch files to compile the 
> C#
> codegen and build the ActionLexer stuff from action.g, these are at the
> toplevel.
>
> I'll complete the other examples as time permits. There is a rudimentary
> HTML doc on the runtime (in the doc subdirectory) - modelled after the
> existing c++ runtime doc. It is mostly untested so, something else I'll 
> try
> to do later ;-)

It looks like it just overlays on top of an antlr 2.7.2.a2 directory.

Hope this helps,
Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Mon Apr 22 12:30:18 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Re: Preliminary C# code generator now on antlr.org
In-Reply-To: <BEF0DEE2-5619-11D6-8F6C-0030653DE0D6@jguru.com>
Message-ID: <aa1oca+78qg@eGroups.com>

--- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
> Folks, I have posted Michael J's C# stuff at the site.

Cheers Terence.

The ANTLR website has an error in it now. There is some [presumably] 
server-side script showing interspersed with the HTML.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Apr 22 12:33:16 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Re: Preliminary C# code generator now on antlr.org
In-Reply-To: <aa1oca+78qg@eGroups.com>
Message-ID: <CB3D5BAC-5627-11D6-B293-0030653DE0D6@jguru.com>


On Monday, April 22, 2002, at 12:30  PM, micheal_jor wrote:

> --- In antlr-interest@y..., Terence Parr <parrt@j...> wrote:
>> Folks, I have posted Michael J's C# stuff at the site.
>
> Cheers Terence.
>
> The ANTLR website has an error in it now. There is some [presumably]
> server-side script showing interspersed with the HTML.

Ack...that's netscape composer.  i'll fix it...thanks.
Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From Trey.Spiva at embarcadero.com  Mon Apr 22 10:56:51 2002
From: Trey.Spiva at embarcadero.com (Trey Spiva)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Preliminary C# code generator now on antlr.o
	rg
Message-ID: <6791D870658F174FB863E2FA890000A37DCBFE@abyss4.advancedsw.com>

The C# link seems to be messed up.  I get the following when clicking on the
link.

404 Not Found
/resources/antlr-2.7.2a2-CSharp.zip was not found on this server. 

Trey Spiva
Senior Software Engineer
trey.spiva@embarcadero.com


> -----Original Message-----
> From: Terence Parr [mailto:parrt@jguru.com]
> Sent: Monday, April 22, 2002 11:53 AM
> To: ANTLR mailinglist
> Subject: [antlr-interest] Preliminary C# code generator now on antlr.org
> 
> Folks, I have posted Michael J's C# stuff at the site.
> 
> He says this about it:
> 
> > The C# codegen as promised. I have supplied NAnt (Ant for .NET) build
> > files
> > for the library and those examples that have been converted. Also there
> > is
> > an updated action.g and a couple of Windows batch files to compile the
> > C#
> > codegen and build the ActionLexer stuff from action.g, these are at the
> > toplevel.
> >
> > I'll complete the other examples as time permits. There is a rudimentary
> > HTML doc on the runtime (in the doc subdirectory) - modelled after the
> > existing c++ runtime doc. It is mostly untested so, something else I'll
> > try
> > to do later ;-)
> 
> It looks like it just overlays on top of an antlr 2.7.2.a2 directory.
> 
> Hope this helps,
> Ter
> --
> Co-founder, http://www.jguru.com
> Creator, ANTLR Parser Generator: http://www.antlr.org
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Mon Apr 22 12:54:16 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Preliminary C# code generator now on antlr.o rg
In-Reply-To: <6791D870658F174FB863E2FA890000A37DCBFE@abyss4.advancedsw.com>
Message-ID: <B9FF2692-562A-11D6-B293-0030653DE0D6@jguru.com>

wooops.  ok, forgot to put into RCS.  It's on the site now.  Sorry for 
the hassle.

Ter

On Monday, April 22, 2002, at 10:56  AM, Trey Spiva wrote:

> The C# link seems to be messed up.  I get the following when clicking 
> on the
> link.
>
> 404 Not Found
> /resources/antlr-2.7.2a2-CSharp.zip was not found on this server.
>
> Trey Spiva
> Senior Software Engineer
> trey.spiva@embarcadero.com
>
>
>> -----Original Message-----
>> From: Terence Parr [mailto:parrt@jguru.com]
>> Sent: Monday, April 22, 2002 11:53 AM
>> To: ANTLR mailinglist
>> Subject: [antlr-interest] Preliminary C# code generator now on 
>> antlr.org
>>
>> Folks, I have posted Michael J's C# stuff at the site.
>>
>> He says this about it:
>>
>>> The C# codegen as promised. I have supplied NAnt (Ant for .NET) build
>>> files
>>> for the library and those examples that have been converted. Also 
>>> there
>>> is
>>> an updated action.g and a couple of Windows batch files to compile the
>>> C#
>>> codegen and build the ActionLexer stuff from action.g, these are at 
>>> the
>>> toplevel.
>>>
>>> I'll complete the other examples as time permits. There is a 
>>> rudimentary
>>> HTML doc on the runtime (in the doc subdirectory) - modelled after the
>>> existing c++ runtime doc. It is mostly untested so, something else 
>>> I'll
>>> try
>>> to do later ;-)
>>
>> It looks like it just overlays on top of an antlr 2.7.2.a2 directory.
>>
>> Hope this helps,
>> Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org
>>
>>
>>
>>
>> Your use of Yahoo! Groups is subject to 
>> http://docs.yahoo.com/info/terms/
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Tue Apr 23 00:18:01 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Preliminary C# code generator now on antlr.o rg
References: <B9FF2692-562A-11D6-B293-0030653DE0D6@jguru.com>
Message-ID: <000501c1ea97$31df17b0$f9b30ad2@hermes>

yes...
it worked !

though i had hard time compile it.
the build file forgot to build C# action in antlr/actions/csharp ...
and compilation of it and it generated grammar issue a lot of warning.
but it work !
great !
(and NAnt, don't work ,either because of environment or something else, I
don't know I use make ..)

good luck for later release ...
I am going back to my slow ANTLR learning process ..


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From klaren at cs.utwente.nl  Tue Apr 23 05:12:32 2002
From: klaren at cs.utwente.nl (Ric Klaren)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] End of file
In-Reply-To: <20020422160022.67208.qmail@web14904.mail.yahoo.com>; from zjg1964@yahoo.com on Mon, Apr 22, 2002 at 09:00:22AM -0700
References: <Pine.BSF.4.21.0204111737040.12880-100000@shell-2.enteract.com> <20020422160022.67208.qmail@web14904.mail.yahoo.com>
Message-ID: <20020423141232.G29272@cs.utwente.nl>

On Mon, Apr 22, 2002 at 09:00:22AM -0700, jg z wrote:
>    The related code in our .g file(ANTLR version) is
> as following,
>
> translation_unit
>    :  {enterExternalScope();}
>       (external_declaration)+  EOF
>       {exitExternalScope();}
>    ;
>
>    The problem is, at the end of a testing file, the
> parser goes into external_declaration again instead of
> match the EOF. This is because the conditions
> controlling the entry of external_declaration both
> contain EOF.
>
>    We don't understand why this is not the case in the
> example of java.g which is provided in CPP directory
> of examples of ANTLR-2.7.1. The corresponding code in
> java.g file is,

I had a short look at the files David sent me earlier the problem is most
probable in the external_declaration rule where there's an alternative:

	  {K_and_R = TRUE;}
	   {printf("CPP_parser.g Ln490\n");}
	  function_definition
	 |
      // templated forward class decl, init/decl of static member in template
      {beginTemplateDefinition();}
      (template_head declaration_specifiers
		 ( init_declarator_list ) ? SEMICOLON { end_of_stmt();}
		 ) =>      {endTemplateDefinition();}

 /*** what is missing here???? ***/

   |
      // Templated FUNCTIONS and CONSTRUCTORS matched here.
      {beginTemplateDefinition();}
      template_head
      (

Note the predicate pointing to nothing. Removing that eliminates the EOF
from the lookahead set of external_declaration.

Advice: antlr -diagnostic <yourinputfile> is your friend. (The textfile it
generates lists all lookahead sets in readable format, that way you can
track down which alternative is the culprit if something gets a wrong piece
of lookahead)

Advice2: I'm getting the impression that you are trying to convert the old
PCCTS grammar as a whole? If so then it's probably not the most practical
approach. Try to convert it piece by piece (or better said alternative by
alternative). That way it's easier to pinpoint rules that give trouble.

Good luck,

Ric
--
-----+++++*****************************************************+++++++++-------
    ---- Ric Klaren ----- klaren@cs.utwente.nl ----- +31 53 4893722  ----
-----+++++*****************************************************+++++++++-------
     Human beings, who are almost unique in having the ability to learn
   from the experience of others, are also remarkable for their apparent
         disinclination to do so. --- Douglas Adams, Last Chance to See


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dinurp at yahoo.com  Tue Apr 23 05:32:51 2002
From: dinurp at yahoo.com (dinurp)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] While using preliminary C# code generator.
Message-ID: <aa3k9j+ksts@eGroups.com>

Hi,
I am trying to use the new C# code generator. I faced a peculiar 
problem while using it for tree construction. 

condition :
    boolean_term ( OR! boolean_term )*
    {
        if ( null != ##.getNextSibling() )
            ## = #(#[OR],##);
    }
    ;

OR token is defined in another grammer and the grammer from which the 
above piece is extracted imports that grammer.

The code generated by the CSharp generator doen't recognize OR in #
[OR]. This is because the symbol OR is not known to the Parser class. 
It is defined in TokenTypes class. Now I can go ahead and re-write it 
as #[TokenTypes.OR]. But is that the correct way? All the samples I 
have seen, they are for Java or C++, use #[OR] construct.

For the time being I copied all definitions from TokenTypes to the 
Parser class.

What are your suggestions?
Thanks,
Dinu


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From zjg1964 at yahoo.com  Tue Apr 23 05:59:28 2002
From: zjg1964 at yahoo.com (jg z)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] End of file
In-Reply-To: <20020423141232.G29272@cs.utwente.nl>
Message-ID: <20020423125928.52428.qmail@web14906.mail.yahoo.com>

Thank you, Ric,
     According to your comment, we got our problem
solved. We did forget to add something at that point
during the conversion.

   Zuo & David

> 
> I had a short look at the files David sent me
> earlier the problem is most
> probable in the external_declaration rule where
> there's an alternative:
> 
> 	  {K_and_R = TRUE;}
> 	   {printf("CPP_parser.g Ln490\n");}
> 	  function_definition
> 	 |
>       // templated forward class decl, init/decl of
> static member in template
>       {beginTemplateDefinition();}
>       (template_head declaration_specifiers
> 		 ( init_declarator_list ) ? SEMICOLON {
> end_of_stmt();}
> 		 ) =>      {endTemplateDefinition();}
> 
>  /*** what is missing here???? ***/
> 
>    |
>       // Templated FUNCTIONS and CONSTRUCTORS
> matched here.
>       {beginTemplateDefinition();}
>       template_head
>       (
> 
> Note the predicate pointing to nothing. Removing
> that eliminates the EOF
> from the lookahead set of external_declaration.
> 
> Advice: antlr -diagnostic <yourinputfile> is your
> friend. (The textfile it
> generates lists all lookahead sets in readable
> format, that way you can
> track down which alternative is the culprit if
> something gets a wrong piece
> of lookahead)
> 
> Advice2: I'm getting the impression that you are
> trying to convert the old
> PCCTS grammar as a whole? If so then it's probably
> not the most practical
> approach. Try to convert it piece by piece (or
> better said alternative by
> alternative). That way it's easier to pinpoint rules
> that give trouble.
> 
> Good luck,
> 
> Ric
> --
>
-----+++++*****************************************************+++++++++-------
>     ---- Ric Klaren ----- klaren@cs.utwente.nl -----
> +31 53 4893722  ----
>
-----+++++*****************************************************+++++++++-------
>      Human beings, who are almost unique in having
> the ability to learn
>    from the experience of others, are also
> remarkable for their apparent
>          disinclination to do so. --- Douglas Adams,
> Last Chance to See
> 
> 
>  
> 
> Your use of Yahoo! Groups is subject to
> http://docs.yahoo.com/info/terms/ 
> 
> 


__________________________________________________
Do You Yahoo!?
Yahoo! Games - play chess, backgammon, pool and more
http://games.yahoo.com/

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From renji at aliyance.com  Tue Apr 23 06:37:44 2002
From: renji at aliyance.com (Renji Panicker)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Hoisting help required.
Message-ID: <IDENLPNGKJOBKLGMDLJKCEEKCDAA.renji@aliyance.com>

Hi everyone,

I've been trying to understand predicate hoisting without much success.
Please have a look at this very simple snippet:

///////////////////////////////////////////////
assignment_expression:
logicalOr_expression
(
	TOK_ASSIGNMENT
	assignment_expression
)*
;
///////////////////////////////////////////////

I get the following error:

///////////////////////////////////////////////
Performing Custom Build Step on ..\..\..\src\iParser\src\iScriptGrammer.g
ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
..\..\..\src\iParser\src\iScriptGrammer.g:113: warning: nondeterminism upon
..\..\..\src\iParser\src\iScriptGrammer.g:113:  k==1:TOK_ASSIGNMENT
..\..\..\src\iParser\src\iScriptGrammer.g:113:  between alt 1 and exit
branch of block
///////////////////////////////////////////////

I know the solution is something to do with hoisting, but can't figure it
out. Could someone please provide some assistance on this?

Thanks,
-/renji


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From renji at aliyance.com  Tue Apr 23 06:54:16 2002
From: renji at aliyance.com (Renji Panicker)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Hoisting help required.
In-Reply-To: <IDENLPNGKJOBKLGMDLJKCEEKCDAA.renji@aliyance.com>
Message-ID: <IDENLPNGKJOBKLGMDLJKMEEKCDAA.renji@aliyance.com>

Never mind this, sorry. I figured it out. I should have used ? instead of *
...

thanks anyway,
-/renji

-----Original Message-----
From: Renji Panicker [mailto:renji@aliyance.com]
Sent: Tuesday, April 23, 2002 7:08 PM
To: antlr-interest@yahoogroups.com
Subject: [antlr-interest] Hoisting help required.


Hi everyone,

I've been trying to understand predicate hoisting without much success.
Please have a look at this very simple snippet:

///////////////////////////////////////////////
assignment_expression:
logicalOr_expression
(
	TOK_ASSIGNMENT
	assignment_expression
)*
;
///////////////////////////////////////////////

I get the following error:

///////////////////////////////////////////////
Performing Custom Build Step on ..\..\..\src\iParser\src\iScriptGrammer.g
ANTLR Parser Generator   Version 2.7.1   1989-2000 jGuru.com
..\..\..\src\iParser\src\iScriptGrammer.g:113: warning: nondeterminism upon
..\..\..\src\iParser\src\iScriptGrammer.g:113:  k==1:TOK_ASSIGNMENT
..\..\..\src\iParser\src\iScriptGrammer.g:113:  between alt 1 and exit
branch of block
///////////////////////////////////////////////

I know the solution is something to do with hoisting, but can't figure it
out. Could someone please provide some assistance on this?

Thanks,
-/renji




Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dinurp at yahoo.com  Tue Apr 23 22:37:55 2002
From: dinurp at yahoo.com (dinurp)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] While using preliminary C# code generator.
In-Reply-To: <aa3k9j+ksts@eGroups.com>
Message-ID: <aa5gbj+2j7l@eGroups.com>

I faced 2 other problems while using th epreliminary C# code 
generator:
1) new MyLexer(System.In) //did not compile
2) Option caseSensitiveLiterals=false didn't work

Following is the list of changes I made to the code generator to get 
going. They seem to set things right. Any suggestions?

Thanks,
Dinu

315c315
<println("using TextReader= System.IO.TextReader;"); //DINU
---
>println("using StreamReader= System.IO.StreamReader;");
393c393
<println("public " + grammar.getClassName() + "(TextReader r) : this
(new CharBuffer(r))"); //DINU
---
>println("public " + grammar.getClassName() + "(StreamReader r) : this
(new CharBuffer(r))");
433,439c433
<if ( g.caseSensitiveLiterals ) //DINU
<	println("literals = new Hashtable();");
<else //DINU
< 	println("literals = new Hashtable(" + //DINU
< 	"System.Collections.CaseInsensitiveHashCodeProvider.Default," 
+ //DINU
<       "System.Collections.CaseInsensitiveComparer.Default);"); //DIN
U
< 
---
> 	println("literals = new Hashtable();");


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Tue Apr 23 22:59:12 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] While using preliminary C# code generator.
References: <aa5gbj+2j7l@eGroups.com>
Message-ID: <001601c1eb55$29248010$22b60ad2@hermes>

> I faced 2 other problems while using th epreliminary C# code
> generator:
> 1) new MyLexer(System.In) //did not compile

System.In ?? what's that ? let me tell you that java does not have the same
API tha java !

try this: Console.In; ...


> 2) Option caseSensitiveLiterals=false didn't work
uh ?.... I don't know...



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Wed Apr 24 04:24:55 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Re: While using preliminary C# code generator.
In-Reply-To: <aa3k9j+ksts@eGroups.com>
Message-ID: <aa64m7+kg0r@eGroups.com>

--- In antlr-interest@y..., "dinurp" <dinurp@y...> wrote:
> Hi,
> I am trying to use the new C# code generator. I faced a peculiar 
> problem while using it for tree construction. 
> 
> condition :
>     boolean_term ( OR! boolean_term )*
>     {
>         if ( null != ##.getNextSibling() )
>             ## = #(#[OR],##);
>     }
>     ;
> 
> OR token is defined in another grammer and the grammer from which 
the 
> above piece is extracted imports that grammer.
> 
> The code generated by the CSharp generator doen't recognize OR in #
> [OR]. This is because the symbol OR is not known to the Parser 
class. 
> It is defined in TokenTypes class. Now I can go ahead and re-write 
it 
> as #[TokenTypes.OR]. But is that the correct way? All the samples I 
> have seen, they are for Java or C++, use #[OR] construct.

For C#, you have to prefix the Tokens with the xxxTokenTypes class 
name. C# interfaces cannot contain constants like in Java and there 
is no support for global identifiers like in C++.

> For the time being I copied all definitions from TokenTypes to the 
> Parser class.
> 
> What are your suggestions?
> Thanks,

It's better to get used to using the "TokenTypes.OR" style. This is 
how things will be done with C#. Study the CSharp examples for more 
info....

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Wed Apr 24 04:43:27 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Re: Preliminary C# code generator now on antlr.o rg
In-Reply-To: <000501c1ea97$31df17b0$f9b30ad2@hermes>
Message-ID: <aa65ov+3921@eGroups.com>

--- In antlr-interest@y..., "Lloyd Dupont" <lloyd@g...> wrote:
> yes...
> it worked !
> 
> though i had hard time compile it.

Really?. It has a Nant build file that works fine:
   %ANTLR_HOME%/lib/csharp/antlr.runtime.build.

> the build file forgot to build C# action in antlr/actions/csharp ...
> and compilation of it and it generated grammar issue a lot of 
warning.

I did point out that you need to run a separate batch file for that 
(perhaps not too clearly):
    %ANTLR_HOME%/build-actions.bat
and 
    %ANTLR_HOME%/build-codegen.bat for the code generator itself.


> but it work !
> great !

Great news.

> (and NAnt, don't work ,either because of environment or something 
else, I
> don't know I use make ..)

You need to install Nant and ensure that the bin directory is in your 
PATH I believe.

> good luck for later release ...
> I am going back to my slow ANTLR learning process ..

Good luck too. I'll update the docs with this info in due course.

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From open.zone at virgin.net  Wed Apr 24 04:46:50 2002
From: open.zone at virgin.net (micheal_jor)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Re: While using preliminary C# code generator.
In-Reply-To: <aa5gbj+2j7l@eGroups.com>
Message-ID: <aa65va+m6d3@eGroups.com>

--- In antlr-interest@y..., "dinurp" <dinurp@y...> wrote:
> I faced 2 other problems while using th epreliminary C# code 
> generator:
> 1) new MyLexer(System.In) //did not compile

System.In is a Java-ism. In C# you need to use System.Console.In 
instead. See the CSharp examples for more info.

> 2) Option caseSensitiveLiterals=false didn't work

I am not sure why this is the case. 

> 
> Following is the list of changes I made to the code generator to 
get 
> going. They seem to set things right. Any suggestions?

> 
> Thanks,
> Dinu
> 
> 315c315
> <println("using TextReader= System.IO.TextReader;"); //DINU
> ---
> >println("using StreamReader= System.IO.StreamReader;");
> 393c393
> <println("public " + grammar.getClassName() + "(TextReader r) : this
> (new CharBuffer(r))"); //DINU
> ---
> >println("public " + grammar.getClassName() + "(StreamReader r) : 
this
> (new CharBuffer(r))");

A StreamReader is a TextReader. It's a subclass of TextReader.
CharBuffer would accept a StreamReader in any case.
No need for this change AFAICT.

> 433,439c433
> <if ( g.caseSensitiveLiterals ) //DINU
> <	println("literals = new Hashtable();");
> <else //DINU
> < 	println("literals = new Hashtable(" + //DINU
> < 	"System.Collections.CaseInsensitiveHashCodeProvider.Default," 
> + //DINU
> 
<       "System.Collections.CaseInsensitiveComparer.Default);"); //DIN
> U
> < 
> ---
> > 	println("literals = new Hashtable();");

I will try this out too dinurp. Seems it might do what you want. 

Thanks

Micheal



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Wed Apr 24 05:47:49 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Syntax problems ...
Message-ID: <005e01c1eb8e$3e518da0$78bd0ad2@hermes>

I had a problem with the simple grammar at end.

if I type stupid things (I meannot recognised by the lexer) it go in a never
ending loop.
I read the generated code, the parser, when finding a null token presume a
whitespace and loop and in the lexer, when whitespace is called, if it found
no relevant character, it return null.

is it normal ? is it a bug ? what could I do ?

here is my simple grammar (the longuest part is the main function...)
# ----------------
header {
    import java.util.*;
    import java.io.*;
}

class TinyParser extends Parser;
options {
  k=2; // two characters of lookahead
}
{
    public static void main(String[] args)
     throws Exception
    {
        if(args.length == 0)
         parse(System.in);
        else for(int i=0; i<args.length; i++)
         parse(new FileInputStream(args[i]));
        System.out.println("... EOVT ...");
 }

    static void parse(InputStream is)
         throws Exception
    {
        TinyLexer lexer = new TeenyLexer(new DataInputStream(is));
        TokenBuffer buffer = new TokenBuffer(lexer);
        TinyParser parser = new TinyParser(buffer);
        parser.startProcessing();
 }
}

startProcessing :
(
   text:WORD { System.out.println("WORD: " + text.getText()); }
)+
;

// -- here the lexer
class TinyLexer extends Lexer;

options {
  k=2; // two characters of lookahead
  charVocabulary  = '\3'..'\377';
}


WORD : ('a'..'z'|'A'..'Z'|'0'..'9'|'$'|'.') +;

// whitespace
WS :
    ( ' '
    | '\t'
 | '\r' '\n' { newline(); }
 | '\n' { newline(); }
 ) *
 {$setType(Token.SKIP);} //ignore this token
 ;



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Wed Apr 24 06:07:27 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Syntax problems ...
References: <005e01c1eb8e$3e518da0$78bd0ad2@hermes>
Message-ID: <007801c1eb90$fcb19900$78bd0ad2@hermes>

sorry, it was my (stupid) fault.

WS :  ( ' ' | '\t' | '\r' | '\n' ) * {$setType(Token.SKIP);} ;

should have been
WS :  ( ' ' | '\t' | '\r' | '\n' ) + {$setType(Token.SKIP);} ;

note * -> +


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Thu Apr 25 01:22:16 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] example of multiplexer...
Message-ID: <002f01c1ec35$2cb55e30$1eab0ad2@hermes>

I had a had time understanding lexer state/multiplexer with ANTLR.
so here is a nice Java example.

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: lexerstate.tgz
Type: application/x-compressed
Size: 1933 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20020425/2b501483/lexerstate.bin
From parrt at jguru.com  Thu Apr 25 15:52:28 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Antlr 2.7.2a2 Report
In-Reply-To: <4.2.0.58.20020206215019.00c1eae0@postoffice.trump.net.au>
Message-ID: <1E61B1F3-589F-11D6-A387-0030653DE0D6@jguru.com>

Robert...i'm working on a 2.7.2a3 release and will check into these.  At 
the moment I'm looking for the java grammar bugs people submitted so I 
can fix that.  I need to add a feature to jGuru that lets people search 
code for examples :)

Concerning your 1.4 temp file bug report...i'm discussing with Ric.

Ter

On Wednesday, February 6, 2002, at 03:25  AM, Robert Colquhoun wrote:

> 1) This is a totally trivial thing, but when generating bitsets in the 
> lexer:
>
>    private static final long[] mk_tokenSet_1() {
>          long[] data = new long[8];
>          data[0]=-576460752303432712L;
>          for (int i = 1; i<=3; i++) { data[i]=-1L; }
>          for (int i = 4; i<=7; i++) { data[i]=0L; }
>          return data;
>      }
>
> Initializing the array to 0L is not needed as java does this
> automatically(only matters for unicode with lots of bitsets, and even 
> then
> not much).
>
> 2) Exception constructor prototypes have changed.  I am not sure if i 
> was
> supposed to be using these but in my grammar in a couple of places i 
> needed
> to throw SemanticException's which now have a different prototype that
> includes the column number....i was wondering if for backwards
> compatibility could the old prototype(perhaps with @deprecated) so that
> 2.7.2 is binary compatible with 2.7.1
>
> 3) In the BASIC parser i have been working on it is quite common for the
> BASIC programs to have a variable 'EOF'....this does not work at all 
> with
> antlr which internally automatically defines the text for EOF token to
> "EOF" which causes an automatic match when looking up keywords.....i 
> think
> this would also affect other languages.
>
> ie  could the java grammar parse something like:
> 	class Test {
> 		public final static int EOF = -1;
> 	}
>
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Apr 25 17:53:33 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Bug in java grammar 1.18 (again)
In-Reply-To: <E16UAhw-0001C3-00@frontend2.herald.ox.ac.uk>
Message-ID: <08A1C4A0-58B0-11D6-A387-0030653DE0D6@jguru.com>

On Friday, January 25, 2002, at 10:04  AM, John P N Pybus wrote:
> On Friday 18 Jan 2002 9:54 am, you (Sander M?gi) wrote:
>> // (new Outer()).super()  (create enclosing instance) (SM: but does not
>> work for 'holder.outer.super();')
>>
>>     | primaryExpression DOT! "super"! lp3:LPAREN^
>>     | {#lp3.setType(SUPER_CTOR_CALL);#lp3.setText("super");} argList
>>     | RPAREN! SEMI!
>>
>> ...
>
> Indeed, it should be "postfixExpression DOT super", to allow multipart 
> outer
> expressions.  This runs into the problem that postfixExpression itself
> matches id.id.super().

According to the java spec it should be primaryExpression, but I may 
have a radically different version of primary than the book.

Anyway, excuse my ignorance, but what does holder.out.super() mean?  How 
can you call anything but your immediate super?  I can't think of what 
that would mean to say f.g.super().  Certainly the Java spec doesn't 
seem to think you can do it (well syntactically you can but semantically 
you cannot).  Here is from the 2nd edition spec:

Explicit constructor invocation statements can be divided into two kinds:

?  Alternate constructor invocations begin with the keyword this. They 
are used to invoke an alternate constructor of the same class.
?  Superclass constructor invocations begin with either the keyword 
super or a Primary expression. They are used to invoke a constructor of 
the direct superclass. Superclass constructor invocations may be further 
subdivided:
-  Unqualified superclass constructor invocations begin with the keyword 
super.
-  Qualified superclass constructor invocations begin with a Primary 
expression. They allow a subclass constructor to explicitly specify the 
newly created object's immediately enclosing instance with respect to 
the direct superclass (?8.1.2). This may be necessary when the 
superclass is an inner class.

So, it's either

"this(...)"
"super(...)"

or

"(new Outer()).super();"

Can somebody "unconfuse" me?  I've not become an expert on Java 
semantics...I'm just codin' in it.  I can't even contrive an example to 
test with the compiler.

Thanks,
Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Thu Apr 25 18:08:41 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Bug in java grammar 1.18 (again)
In-Reply-To: <08A1C4A0-58B0-11D6-A387-0030653DE0D6@jguru.com>
Message-ID: <25E26FA6-58B2-11D6-A387-0030653DE0D6@jguru.com>


On Thursday, April 25, 2002, at 05:53  PM, Terence Parr wrote:
"(new Outer()).super();"
>
> Can somebody "unconfuse" me?  I've not become an expert on Java
> semantics...I'm just codin' in it.  I can't even contrive an example to
> test with the compiler.

Ok, i found somebody's example and unconfused myself.  f.g.blort.super() 
is obviously parsed as the enclosing instance like (new Outer()) 
followed by super().  Ok, now I'll jump into the grammar and see if i 
can get it to parse properly given John Pybus' version.

Trivial to fix with a syntactic pred, but might slow stuff down.  I'll 
see.

Ter


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From s.piree at enneya.com  Fri Apr 26 05:54:44 2002
From: s.piree at enneya.com (Silvain Piree)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] improve performance for grammar inheritance
Message-ID: <010f01c1ed22$03bccb60$0101a8c0@daemon>

Hi,

I'm using grammar inheritance and experienced performance 
problems.

After some inspection of the ANTLR source code I found that
my performance problems related to the fact that an intermediate
grammar was created for the combined grammars.

This combining of grammars was very slow because the toString()
methods in GrammarFile and Grammar didn't use StringBuffer
but used String.

When using StringBuffer the performance increased significantly.
If anyone is interested I can send the changed source files.

Note: this remark not only applies to GrammarFile and Grammar
but also to other classes (like Rule) that use String. 

Silvain



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Fri Apr 26 09:41:51 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] improve performance for grammar inheritance
In-Reply-To: <010f01c1ed22$03bccb60$0101a8c0@daemon>
Message-ID: <82B3472A-5934-11D6-A387-0030653DE0D6@jguru.com>


On Friday, April 26, 2002, at 05:54  AM, Silvain Piree wrote:

> Hi,
>
> I'm using grammar inheritance and experienced performance
> problems.
>
> After some inspection of the ANTLR source code I found that
> my performance problems related to the fact that an intermediate
> grammar was created for the combined grammars.
>
> This combining of grammars was very slow because the toString()
> methods in GrammarFile and Grammar didn't use StringBuffer
> but used String.
>
> When using StringBuffer the performance increased significantly.
> If anyone is interested I can send the changed source files.
>
> Note: this remark not only applies to GrammarFile and Grammar
> but also to other classes (like Rule) that use String.

Sure...send me some changes to 2.7.2a2 and I'll take a look.  Send the 
whole file(s) so I can do the visual diff myself :)

Thanks,
Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From tomdz at cs.tu-berlin.de  Fri Apr 26 15:17:16 2002
From: tomdz at cs.tu-berlin.de (Thomas Dudziak)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Antlr DLL
References: <20020322165013.H26460@cs.utwente.nl>
Message-ID: <002a01c1ed70$354ccbf0$f9aafea9@bert>

I've attached a patch for the C++ version of Antlr (more specifically Ric's
development version from march, 22.) which allows to compile it as a dll
(using STLPort). In addition, I've created a STLPort-specific VisualStudio6
workspace which allows to compile debug and release, static and dynamic
Antlr libraries. In order to test the libraries, there is an additional
workspace for the Antlr examples.

For those eager to test it, here are the instructions:

1. Install Antlr

Download and unpack the devel version of Antlr (antlr-devel-20020322.tar.gz
at http://wwwhome.cs.utwente.nl/~klaren/antlr/). You will get a directory
structure with one top-level directory "main".
Since the patch is a unified patch, it is possible that versions 2.7.2a1 or
a2 will also work.

2. Patch Antlr

Apply the patch in the directory containing main using the following command
(unix/cygwin)
    patch -p 1 -i antlr.patch
(Perhaps there is a windows or java version of the patch tool other than
that of cygwin ?).
Alternatively you also could try to apply the changes manually since the
format of the diff is relatively easy.

3. Install workspaces

Unzip the Antlrlib workspace to "<where you unpacked Antlr>/main/lib/cpp/".
Unzip the Examples workspace to "<where you unpacked Antlr>/main/examples/"

4. Install STLPort

Download (http://www.stlport.org/download.html) and compile STLPort (I've
used version 4.5.1)

Copy the following STLPort files from "<where you installed STLPort>/lib/"
to the directory "<where you unpacked Antlr>/main/lib/" :
    stlport_vc6_static.lib
    stlport_vc6.exp
    stlport_vc6.lib
    stlport_vc645.dll
The first one is for linking STLPort statically (e.g. creating a static
Antlr lib), the other three for creating an Antlr dll. Note that these are
all release libraries. The debug version of STLPort contains an ASSERT which
always fails when using STLPort with Antlr, but I did not have the time to
check it yet.
Alternatively, you can add the STLPort library directory ("<where you
installed STLPort>/lib/") to library directories used in the projects in the
Antlrlib and Examples workspaces.

5. Set STLPort as the STL implementation that Visual Studio uses

Change the STL used by Visual Studio for the Antlrlib workspace by adding
the "<where you installed STLPort>/stlport/" directory in
Tools->Options->Directories ("Show directories for include files") and
moving it up to the first place. This is an important step as otherwise
Visual Studio will always use its own STL implementation regardless as to
whether you added the above directory to a project's include directories or
not. However this will change the STL for all workspaces, not only for the
current one (but it is probably a good idea anyway as STLPort is certainly
superior to the Visual Studio 6 STL implementation).

6. Build Antlr libraries

Do a batch build of all Antlr library/dll projects in the Antlr workspace.
The resulting four libraries (antlr.lib, antlrD.lib, antlrdll.lib,
antlrdllD.lib) and two dlls (antlrdll.dll, andlrdllD.dll) are placed in
"<where you unpacked Antlr>/main/lib/".


Thats it for the libraries. For generating static libraries that use the
Visual Studio STL implementation, simply use the original Antlr workspace
(part of the distribution) before changing the Visual Studio include
directories (e.g. after Step 2 but before Step 5).

To use the libraries, you have to do the following:
- static library with Visual Studio STL implemenation:
    No specific steps necessary.
- static library with STLPort STL implementation:
    Define the ANTLR_STLPORT macro in the C++ tab of the project properties.
    Link against antlr.lib (release) or antlrD.lib (debug).
- dll
    Define the ANTLR_IMPORTS macro in the C++ tab of the project properties.
    Link against antlrdll.lib (release) or antlrdllD.lib (debug).

The projects in the Examples workspace each define the four configurations
for linking against debug or relase and static or dynamic Antlr library.
However, two examples won't work. In the FlexLexer example, the generated
code won't compile (seems to be a problem with Antlr itself). The Java
example crashes in a STL part (access violation), and it does so both in
static and dynamic STLPort builds (needs further investigation).

Note that the workspaces won't work for Visual Studio 5 (no backwards
compatibility) nor for Visual Studio.NET. The latter has a new, much
improved STL implementation which might be better suited for DLL creation,
but I could not check this yet as I do not currently use VS.NET. This also
means that I could not verify that the workspaces/steps work in VS.NET.

Ciao, Tom


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: antlr-dll-patch.zip
Type: application/x-zip-compressed
Size: 45761 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20020427/9de30bd6/antlr-dll-patch.bin
From rjc at trump.net.au  Fri Apr 26 17:52:40 2002
From: rjc at trump.net.au (Robert Colquhoun)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Antlr 2.7.2a2 Report
In-Reply-To: <1E61B1F3-589F-11D6-A387-0030653DE0D6@jguru.com>
References: <4.2.0.58.20020206215019.00c1eae0@postoffice.trump.net.au>
Message-ID: <4.2.0.58.20020427100229.00b15a80@postoffice.trump.net.au>

At 03:52 PM 25/04/2002 -0700, Terence Parr wrote:
>Robert...i'm working on a 2.7.2a3 release and will check into these.  At
>the moment I'm looking for the java grammar bugs people submitted so I
>can fix that.  I need to add a feature to jGuru that lets people search
>code for examples :)

Thanks, most are  only little things but would be nice if they could be fixed.

>Concerning your 1.4 temp file bug report...i'm discussing with Ric.


According to 1.4 doc:
"Deletion will be attempted only for normal termination of the virtual 
machine, as defined by the Java Language Specification (12.9)."

I am thinking the files are not deleted because antlr uses System.exit() to 
report exit codes.  The other problem is that deleteOnExit() only turns up 
on 1.2 or later VM's which means antlr will no longer run on 1.1.  ie for 
example C++ programmers would not be able to use the MS JVM on windows to 
generate files for MSVC.

I hacked a fix for this by modifying PreservingFileWriter.java in the 
close() method (see attached diff) which seems to now remove the temp files 
under 1.4.  Looking at the PreservingFileWriter code i think provided you 
could guarantee that close() was called the deleteOnExit() call would be 
optional.

  - Robert

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
*** PreservingFileWriter.java.orig	Sun Dec 23 14:16:14 2001
From zedshaw at zedshaw.com  Sun Apr 28 00:18:33 2002
From: zedshaw at zedshaw.com (Zed Shaw)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Updated JEdit ANTLR Mode
Message-ID: <1019978314.270.18.camel@laptop.killnine.net>

Hello All,

I updated the jEdit antlr mode to fix a problem with the Java mode
inside the { }.  Basically, because both ANTLR and Java use { } to
denote blocks, it was causing the parser to not balance blocks
properly.  Also, I'd rather find a way of indicating what language is
used inside a block, rather than just assuming Java.

So, here is the ANTLR mode slightly modified for no language specific
parts.  You can easily turn on whatever language you want (see the
attached file).  

To install this file, you'll need to download the latest jEdit from
http://www.jedit.org/ and install it.  Next, copy this file to your
.jedit/modes/ directory and create a catalog file in that directory. 
See your jEdit help on how to install/create modes for more specific
instructions.

I'd like feedback on the colorization of the text and how it works in
general.  Thanks.

Zed A. Shaw




 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: antlr.xml
Type: text/xml
Size: 1837 bytes
Desc: not available
Url : http://www.antlr.org/pipermail/antlr-interest/attachments/20020428/902ef432/antlr.xml
From lloyd at galador.net  Sun Apr 28 06:22:25 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Tree parser
Message-ID: <001a01c1eeb7$bd6ba9a0$6eb50ad2@hermes>

Hi fellow user.

I think I nearly understand all now, but, hum, well, Tree parser.

Does anyone could send me an example both simple and usefull.

I know there is the calc example. Though simple it is not very usefull as I could do anything directly in the parser.

so....
to say.....
anyone as a simple sample ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.antlr.org/pipermail/antlr-interest/attachments/20020428/5b9363f7/attachment.html
From dinurp at yahoo.com  Mon Apr 29 20:47:52 2002
From: dinurp at yahoo.com (dinurp)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Re: While using preliminary C# code generator.
In-Reply-To: <aa65va+m6d3@eGroups.com>
Message-ID: <aal458+6rvk@eGroups.com>

Hello Micheal,
I have another change I made to share:
lib\csharp\antlr\debug\miscJTreeASTPanel.cs
        public ASTTreeNode(AST a)
        {
            ASTNode_ = a;
            //this.Text = a.getText();
            this.Text = a.ToString(); //DINU
            this.Nodes.Add("Loading.....");
        }

The tree was not behaving like in the Java version. This change I am 
not too sure. But it started behaving the way I wanted it to.

Some clarifications on the earlier post:

> > 1) new MyLexer(System.In) //did not compile
> 
> System.In is a Java-ism. In C# you need to use System.Console.In 
> instead. See the CSharp examples for more info.

Granted, the mistake crept in the post. I meant Console.In

> 
> A StreamReader is a TextReader. It's a subclass of TextReader.
> CharBuffer would accept a StreamReader in any case.
> No need for this change AFAICT.
> 

The problem is in the generated Parser class, it misses the 
constructor with TextReader as a parameter. The closest one takes 
StreamReader as an argument. The suggestion is to change this 
constructor. Nothing major.


Thanks
Dinu



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dinurp at yahoo.com  Mon Apr 29 21:00:02 2002
From: dinurp at yahoo.com (dinurp)
Date: Mon Dec 20 16:14:46 2004
Subject: [antlr-interest] Re: While using preliminary C# code generator.
In-Reply-To: <aa64m7+kg0r@eGroups.com>
Message-ID: <aal4s2+j1pb@eGroups.com>

Hi Micheal
My question was more from the ANTLR grammer's point of view rather 
than C#'s. #[OR] is an ANTLR construct and not a Csharp construct. 
The parser generates code from using this. So my question is can't 
the parser generater generate the proper code so that grammer syntax 
is not different deppending on the target parser language?

Any way this is what I did:
options {
    language="CSharp";
    namespace="myNamespace";
}

{
using TT=MyWalkerTokenTypes;
}
<SNIP>
predicate :
      (simple_predicate)=> simple_predicate
    | (compound_predicate)=> compound_predicate
    | (controlled_predicate)=> controlled_predicate
    |! p:complex_predicate! { ## = #( #[TT.COMPLEX_FILTER], p); }
    ;
<SNIP>

PS:
I made changes for namespace too. But it is not to my liking. I can 
share it if you are interested.

Thanks,
Dinu



--- In antlr-interest@y..., "micheal_jor" <open.zone@v...> wrote:
> --- In antlr-interest@y..., "dinurp" <dinurp@y...> wrote:
> > Hi,
> > I am trying to use the new C# code generator. I faced a peculiar 
> > problem while using it for tree construction. 
> > 
> > condition :
> >     boolean_term ( OR! boolean_term )*
> >     {
> >         if ( null != ##.getNextSibling() )
> >             ## = #(#[OR],##);
> >     }
> >     ;
> > 
> > OR token is defined in another grammer and the grammer from which 
> the 
> > above piece is extracted imports that grammer.
> > 
> > The code generated by the CSharp generator doen't recognize OR in 
#
> > [OR]. This is because the symbol OR is not known to the Parser 
> class. 
> > It is defined in TokenTypes class. Now I can go ahead and re-
write 
> it 
> > as #[TokenTypes.OR]. But is that the correct way? All the samples 
I 
> > have seen, they are for Java or C++, use #[OR] construct.
> 
> For C#, you have to prefix the Tokens with the xxxTokenTypes class 
> name. C# interfaces cannot contain constants like in Java and there 
> is no support for global identifiers like in C++.
> 
> > For the time being I copied all definitions from TokenTypes to 
the 
> > Parser class.
> > 
> > What are your suggestions?
> > Thanks,
> 
> It's better to get used to using the "TokenTypes.OR" style. This is 
> how things will be done with C#. Study the CSharp examples for more 
> info....
> 
> Micheal


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From todd.blanchard at cacheon.com  Tue Apr 30 10:30:16 2002
From: todd.blanchard at cacheon.com (Todd Blanchard)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Anybody got an ObjectiveC grammar?
Message-ID: <201DE2FDBE551E46A77474DE8AA141452B6D9F@EX1.cacheon.com>

Got some stuff to do on Cocoa...

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Apr 30 10:33:42 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Anybody got an ObjectiveC grammar?
In-Reply-To: <201DE2FDBE551E46A77474DE8AA141452B6D9F@EX1.cacheon.com>
Message-ID: <6A78E9A0-5C60-11D6-A07A-0030653DE0D6@jguru.com>


On Tuesday, April 30, 2002, at 10:30  AM, Todd Blanchard wrote:

> Got some stuff to do on Cocoa...

I'll bet the guys at apple have one laying around for PCCTS; I helped 
'em build it at NeXT back in the glory days.  I wonder if they'd give it 
up.  I'll send you out an email...

Ter
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From mzukowski at yci.com  Tue Apr 30 10:35:31 2002
From: mzukowski at yci.com (mzukowski@yci.com)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Anybody got an ObjectiveC grammar?
Message-ID: <170826586F3BD511910D0200C110AAA8032B48EA@memail03.bco-home.com>

I don't have Objective-C, but the GCC translation framework would be a good
place to start.  Check out www.codetransform.com/gcc.html.  ObjC doesn't add
too much to GCC and a pretty simple "grammar subclass" should be all you
need.

Monty

> -----Original Message-----
> From: Todd Blanchard [mailto:todd.blanchard@cacheon.com]
> Sent: Tuesday, April 30, 2002 10:30 AM
> To: antlr-interest@yahoogroups.com
> Subject: [antlr-interest] Anybody got an ObjectiveC grammar?
> 
> 
> Got some stuff to do on Cocoa...
> 
>  
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 
> 

 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From dewing at apple.com  Tue Apr 30 11:00:00 2002
From: dewing at apple.com (David Ewing)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Anybody got an ObjectiveC grammar?
In-Reply-To: <6A78E9A0-5C60-11D6-A07A-0030653DE0D6@jguru.com>
Message-ID: <B8F437C0.1710E%dewing@apple.com>

on 4/30/02 11:33 AM, Terence Parr at parrt@jguru.com wrote:

> 
> On Tuesday, April 30, 2002, at 10:30  AM, Todd Blanchard wrote:
> 
>> Got some stuff to do on Cocoa...
> 
> I'll bet the guys at apple have one laying around for PCCTS; I helped
> 'em build it at NeXT back in the glory days.  I wonder if they'd give it
> up.  I'll send you out an email...

There was a yacc grammar posted to the macosx-dev email list at
omnigroup.com a little over a year ago. It looked like it included
everything OK, but I didn't look at it too closely. You could look at their
archives.

And yes, we do have the ObjC grammar for PCCTS here. I can ask about giving
it out, but no promises.

Also, gcc includes support for ObjC. Looking at its grammar files might
prove useful too. It's probably the best source for the "real" language
since it's the compiler we use.

Dave


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From parrt at jguru.com  Tue Apr 30 11:17:33 2002
From: parrt at jguru.com (Terence Parr)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Anybody got an ObjectiveC grammar?
In-Reply-To: <B8F437C0.1710E%dewing@apple.com>
Message-ID: <8AABC4D6-5C66-11D6-A07A-0030653DE0D6@jguru.com>

Heh I found it!

http://www.antlr.org/1.33/contrib/ObjC.g

At the website all the time folks :)  I new I got it from NeXT at one 
point...they forced me to strip actions, but here is the grammar :)

Ter

On Tuesday, April 30, 2002, at 11:00  AM, David Ewing wrote:

> on 4/30/02 11:33 AM, Terence Parr at parrt@jguru.com wrote:
>
>>
>> On Tuesday, April 30, 2002, at 10:30  AM, Todd Blanchard wrote:
>>
>>> Got some stuff to do on Cocoa...
>>
>> I'll bet the guys at apple have one laying around for PCCTS; I helped
>> 'em build it at NeXT back in the glory days.  I wonder if they'd give 
>> it
>> up.  I'll send you out an email...
>
> There was a yacc grammar posted to the macosx-dev email list at
> omnigroup.com a little over a year ago. It looked like it included
> everything OK, but I didn't look at it too closely. You could look at 
> their
> archives.
>
> And yes, we do have the ObjC grammar for PCCTS here. I can ask about 
> giving
> it out, but no promises.
>
> Also, gcc includes support for ObjC. Looking at its grammar files might
> prove useful too. It's probably the best source for the "real" language
> since it's the compiler we use.
>
> Dave
>
>
>
>
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/
>
>
--
Co-founder, http://www.jguru.com
Creator, ANTLR Parser Generator: http://www.antlr.org


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From jsrs701 at yahoo.com  Tue Apr 30 12:57:18 2002
From: jsrs701 at yahoo.com (jsrs701)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Re: Tree parser
In-Reply-To: <001a01c1eeb7$bd6ba9a0$6eb50ad2@hermes>
Message-ID: <aamsuu+nphl@eGroups.com>

--- In antlr-interest@y..., "Lloyd Dupont" <lloyd@g...> wrote:
> I think I nearly understand all now, but, hum, well, Tree parser.
> so....
> to say.....
> anyone as a simple sample ?

Eep, I don't have a SIMPLE sample, per se, but I have a sample.  :)

The project is a prototype-based OO language that is vaguely C-like.  
The ANTLR part of the project outputs a bytecode assembly language, 
that a stand-alone assembler consumes.  Ultimately a VM consumes the 
bytecode.

Anyway, the parser generates a tree that is consumed by the tree 
parser.  I don't have any tree transform tree parsers as intermediate 
stages--it's just a simple "get a tree, walk it" kind of thing.

If you still want to see it, just holler, and I'll send it over.

JSRS


 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

From lloyd at galador.net  Tue Apr 30 16:24:12 2002
From: lloyd at galador.net (Lloyd Dupont)
Date: Mon Dec 20 16:14:47 2004
Subject: [antlr-interest] Re: Tree parser
References: <aamsuu+nphl@eGroups.com>
Message-ID: <002901c1f09e$2405e670$2fbd0ad2@hermes>

> Eep, I don't have a SIMPLE sample, per se, but I have a sample.  :)
ha ? uhm.....
let me think ...
ok, let me see, this should be helpfull anyway, thank you !
could you send it to me ? (lloyd@galador.net)

and, btw, it seems to be an interesting project !



 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 

